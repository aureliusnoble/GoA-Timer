var kD=Object.defineProperty;var jD=(e,n,r)=>n in e?kD(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var ve=(e,n,r)=>(jD(e,typeof n!="symbol"?n+"":n,r),r);var OA=(e,n,r)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,r)};function ND(e,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function en(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var M4={exports:{}},dm={},Q4={exports:{}},pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zd=Symbol.for("react.element"),ED=Symbol.for("react.portal"),TD=Symbol.for("react.fragment"),FD=Symbol.for("react.strict_mode"),ID=Symbol.for("react.profiler"),UD=Symbol.for("react.provider"),PD=Symbol.for("react.context"),MD=Symbol.for("react.forward_ref"),QD=Symbol.for("react.suspense"),DD=Symbol.for("react.memo"),RD=Symbol.for("react.lazy"),jC=Symbol.iterator;function $D(e){return e===null||typeof e!="object"?null:(e=jC&&e[jC]||e["@@iterator"],typeof e=="function"?e:null)}var D4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R4=Object.assign,$4={};function _A(e,n,r){this.props=e,this.context=n,this.refs=$4,this.updater=r||D4}_A.prototype.isReactComponent={};_A.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};_A.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function O4(){}O4.prototype=_A.prototype;function Xw(e,n,r){this.props=e,this.context=n,this.refs=$4,this.updater=r||D4}var Yw=Xw.prototype=new O4;Yw.constructor=Xw;R4(Yw,_A.prototype);Yw.isPureReactComponent=!0;var NC=Array.isArray,L4=Object.prototype.hasOwnProperty,Jw={current:null},H4={key:!0,ref:!0,__self:!0,__source:!0};function z4(e,n,r){var s,a={},i=null,o=null;if(n!=null)for(s in n.ref!==void 0&&(o=n.ref),n.key!==void 0&&(i=""+n.key),n)L4.call(n,s)&&!H4.hasOwnProperty(s)&&(a[s]=n[s]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var A=Array(c),u=0;u<c;u++)A[u]=arguments[u+2];a.children=A}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)a[s]===void 0&&(a[s]=c[s]);return{$$typeof:Zd,type:e,key:i,ref:o,props:a,_owner:Jw.current}}function OD(e,n){return{$$typeof:Zd,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function Zw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zd}function LD(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return n[r]})}var EC=/\/+/g;function ay(e,n){return typeof e=="object"&&e!==null&&e.key!=null?LD(""+e.key):n.toString(36)}function Xf(e,n,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Zd:case ED:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+ay(o,0):s,NC(a)?(r="",e!=null&&(r=e.replace(EC,"$&/")+"/"),Xf(a,n,r,"",function(u){return u})):a!=null&&(Zw(a)&&(a=OD(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(EC,"$&/")+"/")+e)),n.push(a)),1;if(o=0,s=s===""?".":s+":",NC(e))for(var c=0;c<e.length;c++){i=e[c];var A=s+ay(i,c);o+=Xf(i,n,r,A,a)}else if(A=$D(e),typeof A=="function")for(e=A.call(e),c=0;!(i=e.next()).done;)i=i.value,A=s+ay(i,c++),o+=Xf(i,n,r,A,a);else if(i==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return o}function $h(e,n,r){if(e==null)return e;var s=[],a=0;return Xf(e,s,"","",function(i){return n.call(r,i,a++)}),s}function HD(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Br={current:null},Yf={transition:null},zD={ReactCurrentDispatcher:Br,ReactCurrentBatchConfig:Yf,ReactCurrentOwner:Jw};function K4(){throw Error("act(...) is not supported in production builds of React.")}pt.Children={map:$h,forEach:function(e,n,r){$h(e,function(){n.apply(this,arguments)},r)},count:function(e){var n=0;return $h(e,function(){n++}),n},toArray:function(e){return $h(e,function(n){return n})||[]},only:function(e){if(!Zw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};pt.Component=_A;pt.Fragment=TD;pt.Profiler=ID;pt.PureComponent=Xw;pt.StrictMode=FD;pt.Suspense=QD;pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zD;pt.act=K4;pt.cloneElement=function(e,n,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=R4({},e.props),a=e.key,i=e.ref,o=e._owner;if(n!=null){if(n.ref!==void 0&&(i=n.ref,o=Jw.current),n.key!==void 0&&(a=""+n.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(A in n)L4.call(n,A)&&!H4.hasOwnProperty(A)&&(s[A]=n[A]===void 0&&c!==void 0?c[A]:n[A])}var A=arguments.length-2;if(A===1)s.children=r;else if(1<A){c=Array(A);for(var u=0;u<A;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:Zd,type:e.type,key:a,ref:i,props:s,_owner:o}};pt.createContext=function(e){return e={$$typeof:PD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:UD,_context:e},e.Consumer=e};pt.createElement=z4;pt.createFactory=function(e){var n=z4.bind(null,e);return n.type=e,n};pt.createRef=function(){return{current:null}};pt.forwardRef=function(e){return{$$typeof:MD,render:e}};pt.isValidElement=Zw;pt.lazy=function(e){return{$$typeof:RD,_payload:{_status:-1,_result:e},_init:HD}};pt.memo=function(e,n){return{$$typeof:DD,type:e,compare:n===void 0?null:n}};pt.startTransition=function(e){var n=Yf.transition;Yf.transition={};try{e()}finally{Yf.transition=n}};pt.unstable_act=K4;pt.useCallback=function(e,n){return Br.current.useCallback(e,n)};pt.useContext=function(e){return Br.current.useContext(e)};pt.useDebugValue=function(){};pt.useDeferredValue=function(e){return Br.current.useDeferredValue(e)};pt.useEffect=function(e,n){return Br.current.useEffect(e,n)};pt.useId=function(){return Br.current.useId()};pt.useImperativeHandle=function(e,n,r){return Br.current.useImperativeHandle(e,n,r)};pt.useInsertionEffect=function(e,n){return Br.current.useInsertionEffect(e,n)};pt.useLayoutEffect=function(e,n){return Br.current.useLayoutEffect(e,n)};pt.useMemo=function(e,n){return Br.current.useMemo(e,n)};pt.useReducer=function(e,n,r){return Br.current.useReducer(e,n,r)};pt.useRef=function(e){return Br.current.useRef(e)};pt.useState=function(e){return Br.current.useState(e)};pt.useSyncExternalStore=function(e,n,r){return Br.current.useSyncExternalStore(e,n,r)};pt.useTransition=function(){return Br.current.useTransition()};pt.version="18.3.1";Q4.exports=pt;var S=Q4.exports;const q=en(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KD=S,GD=Symbol.for("react.element"),WD=Symbol.for("react.fragment"),VD=Object.prototype.hasOwnProperty,qD=KD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XD={key:!0,ref:!0,__self:!0,__source:!0};function G4(e,n,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(o=n.ref);for(s in n)VD.call(n,s)&&!XD.hasOwnProperty(s)&&(a[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)a[s]===void 0&&(a[s]=n[s]);return{$$typeof:GD,type:e,key:i,ref:o,props:a,_owner:qD.current}}dm.Fragment=WD;dm.jsx=G4;dm.jsxs=G4;M4.exports=dm;var l=M4.exports,Xv={},W4={exports:{}},As={},V4={exports:{}},q4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(Q,R){var M=Q.length;Q.push(R);e:for(;0<M;){var G=M-1>>>1,V=Q[G];if(0<a(V,R))Q[G]=R,Q[M]=V,M=G;else break e}}function r(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var R=Q[0],M=Q.pop();if(M!==R){Q[0]=M;e:for(var G=0,V=Q.length,K=V>>>1;G<K;){var se=2*(G+1)-1,de=Q[se],ye=se+1,W=Q[ye];if(0>a(de,M))ye<V&&0>a(W,de)?(Q[G]=W,Q[ye]=M,G=ye):(Q[G]=de,Q[se]=M,G=se);else if(ye<V&&0>a(W,M))Q[G]=W,Q[ye]=M,G=ye;else break e}}return R}function a(Q,R){var M=Q.sortIndex-R.sortIndex;return M!==0?M:Q.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var A=[],u=[],h=1,d=null,f=3,g=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Q){for(var R=r(u);R!==null;){if(R.callback===null)s(u);else if(R.startTime<=Q)s(u),R.sortIndex=R.expirationTime,n(A,R);else break;R=r(u)}}function w(Q){if(y=!1,b(Q),!m)if(r(A)!==null)m=!0,P(_);else{var R=r(u);R!==null&&O(w,R.startTime-Q)}}function _(Q,R){m=!1,y&&(y=!1,p(N),N=-1),g=!0;var M=f;try{for(b(R),d=r(A);d!==null&&(!(d.expirationTime>R)||Q&&!E());){var G=d.callback;if(typeof G=="function"){d.callback=null,f=d.priorityLevel;var V=G(d.expirationTime<=R);R=e.unstable_now(),typeof V=="function"?d.callback=V:d===r(A)&&s(A),b(R)}else s(A);d=r(A)}if(d!==null)var K=!0;else{var se=r(u);se!==null&&O(w,se.startTime-R),K=!1}return K}finally{d=null,f=M,g=!1}}var B=!1,k=null,N=-1,C=5,j=-1;function E(){return!(e.unstable_now()-j<C)}function F(){if(k!==null){var Q=e.unstable_now();j=Q;var R=!0;try{R=k(!0,Q)}finally{R?I():(B=!1,k=null)}}else B=!1}var I;if(typeof x=="function")I=function(){x(F)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,L=T.port2;T.port1.onmessage=F,I=function(){L.postMessage(null)}}else I=function(){v(F,0)};function P(Q){k=Q,B||(B=!0,I())}function O(Q,R){N=v(function(){Q(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){m||g||(m=!0,P(_))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(A)},e.unstable_next=function(Q){switch(f){case 1:case 2:case 3:var R=3;break;default:R=f}var M=f;f=R;try{return Q()}finally{f=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,R){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var M=f;f=Q;try{return R()}finally{f=M}},e.unstable_scheduleCallback=function(Q,R,M){var G=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?G+M:G):M=G,Q){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=M+V,Q={id:h++,callback:R,priorityLevel:Q,startTime:M,expirationTime:V,sortIndex:-1},M>G?(Q.sortIndex=M,n(u,Q),r(A)===null&&Q===r(u)&&(y?(p(N),N=-1):y=!0,O(w,M-G))):(Q.sortIndex=V,n(A,Q),m||g||(m=!0,P(_))),Q},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(Q){var R=f;return function(){var M=f;f=R;try{return Q.apply(this,arguments)}finally{f=M}}}})(q4);V4.exports=q4;var YD=V4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JD=S,ls=YD;function je(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X4=new Set,Ad={};function Bl(e,n){Jc(e,n),Jc(e+"Capture",n)}function Jc(e,n){for(Ad[e]=n,e=0;e<n.length;e++)X4.add(n[e])}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yv=Object.prototype.hasOwnProperty,ZD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,TC={},FC={};function e7(e){return Yv.call(FC,e)?!0:Yv.call(TC,e)?!1:ZD.test(e)?FC[e]=!0:(TC[e]=!0,!1)}function t7(e,n,r,s){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function n7(e,n,r,s){if(n===null||typeof n>"u"||t7(e,n,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Sr(e,n,r,s,a,i,o){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=n,this.sanitizeURL=i,this.removeEmptyString=o}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Jn[e]=new Sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Jn[n]=new Sr(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Jn[e]=new Sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Jn[e]=new Sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Jn[e]=new Sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Jn[e]=new Sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Jn[e]=new Sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Jn[e]=new Sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Jn[e]=new Sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var eb=/[\-:]([a-z])/g;function tb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(eb,tb);Jn[n]=new Sr(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(eb,tb);Jn[n]=new Sr(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(eb,tb);Jn[n]=new Sr(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Jn[e]=new Sr(e,1,!1,e.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Jn[e]=new Sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function nb(e,n,r,s){var a=Jn.hasOwnProperty(n)?Jn[n]:null;(a!==null?a.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n7(n,r,a,s)&&(r=null),s||a===null?e7(n)&&(r===null?e.removeAttribute(n):e.setAttribute(n,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(n=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(n):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,n,r):e.setAttribute(n,r))))}var Ni=JD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oh=Symbol.for("react.element"),bc=Symbol.for("react.portal"),_c=Symbol.for("react.fragment"),rb=Symbol.for("react.strict_mode"),Jv=Symbol.for("react.profiler"),Y4=Symbol.for("react.provider"),J4=Symbol.for("react.context"),sb=Symbol.for("react.forward_ref"),Zv=Symbol.for("react.suspense"),ex=Symbol.for("react.suspense_list"),ab=Symbol.for("react.memo"),zi=Symbol.for("react.lazy"),Z4=Symbol.for("react.offscreen"),IC=Symbol.iterator;function LA(e){return e===null||typeof e!="object"?null:(e=IC&&e[IC]||e["@@iterator"],typeof e=="function"?e:null)}var an=Object.assign,iy;function xu(e){if(iy===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);iy=n&&n[1]||""}return`
`+iy+e}var oy=!1;function ly(e,n){if(!e||oy)return"";oy=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var s=u}Reflect.construct(e,[],n)}else{try{n.call()}catch(u){s=u}e.call(n.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,c=i.length-1;1<=o&&0<=c&&a[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==i[c]){var A=`
`+a[o].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=o&&0<=c);break}}}finally{oy=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?xu(e):""}function r7(e){switch(e.tag){case 5:return xu(e.type);case 16:return xu("Lazy");case 13:return xu("Suspense");case 19:return xu("SuspenseList");case 0:case 2:case 15:return e=ly(e.type,!1),e;case 11:return e=ly(e.type.render,!1),e;case 1:return e=ly(e.type,!0),e;default:return""}}function tx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _c:return"Fragment";case bc:return"Portal";case Jv:return"Profiler";case rb:return"StrictMode";case Zv:return"Suspense";case ex:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case J4:return(e.displayName||"Context")+".Consumer";case Y4:return(e._context.displayName||"Context")+".Provider";case sb:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ab:return n=e.displayName||null,n!==null?n:tx(e.type)||"Memo";case zi:n=e._payload,e=e._init;try{return tx(e(n))}catch{}}return null}function s7(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tx(n);case 8:return n===rb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function yo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eE(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function a7(e){var n=eE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Lh(e){e._valueTracker||(e._valueTracker=a7(e))}function tE(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),s="";return e&&(s=eE(e)?e.checked?"true":"false":e.value),e=s,e!==r?(n.setValue(e),!0):!1}function S0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nx(e,n){var r=n.checked;return an({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function UC(e,n){var r=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;r=yo(n.value!=null?n.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function nE(e,n){n=n.checked,n!=null&&nb(e,"checked",n,!1)}function rx(e,n){nE(e,n);var r=yo(n.value),s=n.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?sx(e,n.type,r):n.hasOwnProperty("defaultValue")&&sx(e,n.type,yo(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function PC(e,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,r||n===e.value||(e.value=n),e.defaultValue=n}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function sx(e,n,r){(n!=="number"||S0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var wu=Array.isArray;function Dc(e,n,r,s){if(e=e.options,n){n={};for(var a=0;a<r.length;a++)n["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=n.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+yo(r),n=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}n!==null||e[a].disabled||(n=e[a])}n!==null&&(n.selected=!0)}}function ax(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(je(91));return an({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function MC(e,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(je(92));if(wu(r)){if(1<r.length)throw Error(je(93));r=r[0]}n=r}n==null&&(n=""),r=n}e._wrapperState={initialValue:yo(r)}}function rE(e,n){var r=yo(n.value),s=yo(n.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),n.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function QC(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function sE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ix(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?sE(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hh,aE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(n,r,s,a)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Hh=Hh||document.createElement("div"),Hh.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Hh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function ud(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var Ou={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i7=["Webkit","ms","Moz","O"];Object.keys(Ou).forEach(function(e){i7.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Ou[n]=Ou[e]})});function iE(e,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||Ou.hasOwnProperty(e)&&Ou[e]?(""+n).trim():n+"px"}function oE(e,n){e=e.style;for(var r in n)if(n.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=iE(r,n[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var o7=an({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ox(e,n){if(n){if(o7[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(je(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(je(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(je(61))}if(n.style!=null&&typeof n.style!="object")throw Error(je(62))}}function lx(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cx=null;function ib(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ax=null,Rc=null,$c=null;function DC(e){if(e=nh(e)){if(typeof Ax!="function")throw Error(je(280));var n=e.stateNode;n&&(n=pm(n),Ax(e.stateNode,e.type,n))}}function lE(e){Rc?$c?$c.push(e):$c=[e]:Rc=e}function cE(){if(Rc){var e=Rc,n=$c;if($c=Rc=null,DC(e),n)for(e=0;e<n.length;e++)DC(n[e])}}function AE(e,n){return e(n)}function uE(){}var cy=!1;function dE(e,n,r){if(cy)return e(n,r);cy=!0;try{return AE(e,n,r)}finally{cy=!1,(Rc!==null||$c!==null)&&(uE(),cE())}}function dd(e,n){var r=e.stateNode;if(r===null)return null;var s=pm(r);if(s===null)return null;r=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(je(231,n,typeof r));return r}var ux=!1;if(yi)try{var HA={};Object.defineProperty(HA,"passive",{get:function(){ux=!0}}),window.addEventListener("test",HA,HA),window.removeEventListener("test",HA,HA)}catch{ux=!1}function l7(e,n,r,s,a,i,o,c,A){var u=Array.prototype.slice.call(arguments,3);try{n.apply(r,u)}catch(h){this.onError(h)}}var Lu=!1,k0=null,j0=!1,dx=null,c7={onError:function(e){Lu=!0,k0=e}};function A7(e,n,r,s,a,i,o,c,A){Lu=!1,k0=null,l7.apply(c7,arguments)}function u7(e,n,r,s,a,i,o,c,A){if(A7.apply(this,arguments),Lu){if(Lu){var u=k0;Lu=!1,k0=null}else throw Error(je(198));j0||(j0=!0,dx=u)}}function Sl(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function hE(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function RC(e){if(Sl(e)!==e)throw Error(je(188))}function d7(e){var n=e.alternate;if(!n){if(n=Sl(e),n===null)throw Error(je(188));return n!==e?null:e}for(var r=e,s=n;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return RC(a),e;if(i===s)return RC(a),n;i=i.sibling}throw Error(je(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,c=a.child;c;){if(c===r){o=!0,r=a,s=i;break}if(c===s){o=!0,s=a,r=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===r){o=!0,r=i,s=a;break}if(c===s){o=!0,s=i,r=a;break}c=c.sibling}if(!o)throw Error(je(189))}}if(r.alternate!==s)throw Error(je(190))}if(r.tag!==3)throw Error(je(188));return r.stateNode.current===r?e:n}function fE(e){return e=d7(e),e!==null?gE(e):null}function gE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=gE(e);if(n!==null)return n;e=e.sibling}return null}var mE=ls.unstable_scheduleCallback,$C=ls.unstable_cancelCallback,h7=ls.unstable_shouldYield,f7=ls.unstable_requestPaint,gn=ls.unstable_now,g7=ls.unstable_getCurrentPriorityLevel,ob=ls.unstable_ImmediatePriority,pE=ls.unstable_UserBlockingPriority,N0=ls.unstable_NormalPriority,m7=ls.unstable_LowPriority,yE=ls.unstable_IdlePriority,hm=null,Ta=null;function p7(e){if(Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(hm,e,void 0,(e.current.flags&128)===128)}catch{}}var ia=Math.clz32?Math.clz32:x7,y7=Math.log,v7=Math.LN2;function x7(e){return e>>>=0,e===0?32:31-(y7(e)/v7|0)|0}var zh=64,Kh=4194304;function bu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function E0(e,n){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~a;c!==0?s=bu(c):(i&=o,i!==0&&(s=bu(i)))}else o=r&~a,o!==0?s=bu(o):i!==0&&(s=bu(i));if(s===0)return 0;if(n!==0&&n!==s&&!(n&a)&&(a=s&-s,i=n&-n,a>=i||a===16&&(i&4194240)!==0))return n;if(s&4&&(s|=r&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=s;0<n;)r=31-ia(n),a=1<<r,s|=e[r],n&=~a;return s}function w7(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b7(e,n){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ia(i),c=1<<o,A=a[o];A===-1?(!(c&r)||c&s)&&(a[o]=w7(c,n)):A<=n&&(e.expiredLanes|=c),i&=~c}}function hx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function vE(){var e=zh;return zh<<=1,!(zh&4194240)&&(zh=64),e}function Ay(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function eh(e,n,r){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-ia(n),e[n]=r}function _7(e,n){var r=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ia(r),i=1<<a;n[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function lb(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var s=31-ia(r),a=1<<s;a&n|e[s]&n&&(e[s]|=n),r&=~a}}var Nt=0;function xE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wE,cb,bE,_E,CE,fx=!1,Gh=[],so=null,ao=null,io=null,hd=new Map,fd=new Map,Vi=[],C7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function OC(e,n){switch(e){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":io=null;break;case"pointerover":case"pointerout":hd.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":fd.delete(n.pointerId)}}function zA(e,n,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:n,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},n!==null&&(n=nh(n),n!==null&&cb(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,a!==null&&n.indexOf(a)===-1&&n.push(a),e)}function B7(e,n,r,s,a){switch(n){case"focusin":return so=zA(so,e,n,r,s,a),!0;case"dragenter":return ao=zA(ao,e,n,r,s,a),!0;case"mouseover":return io=zA(io,e,n,r,s,a),!0;case"pointerover":var i=a.pointerId;return hd.set(i,zA(hd.get(i)||null,e,n,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,fd.set(i,zA(fd.get(i)||null,e,n,r,s,a)),!0}return!1}function BE(e){var n=Yo(e.target);if(n!==null){var r=Sl(n);if(r!==null){if(n=r.tag,n===13){if(n=hE(r),n!==null){e.blockedOn=n,CE(e.priority,function(){bE(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Jf(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=gx(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);cx=s,r.target.dispatchEvent(s),cx=null}else return n=nh(r),n!==null&&cb(n),e.blockedOn=r,!1;n.shift()}return!0}function LC(e,n,r){Jf(e)&&r.delete(n)}function S7(){fx=!1,so!==null&&Jf(so)&&(so=null),ao!==null&&Jf(ao)&&(ao=null),io!==null&&Jf(io)&&(io=null),hd.forEach(LC),fd.forEach(LC)}function KA(e,n){e.blockedOn===n&&(e.blockedOn=null,fx||(fx=!0,ls.unstable_scheduleCallback(ls.unstable_NormalPriority,S7)))}function gd(e){function n(a){return KA(a,e)}if(0<Gh.length){KA(Gh[0],e);for(var r=1;r<Gh.length;r++){var s=Gh[r];s.blockedOn===e&&(s.blockedOn=null)}}for(so!==null&&KA(so,e),ao!==null&&KA(ao,e),io!==null&&KA(io,e),hd.forEach(n),fd.forEach(n),r=0;r<Vi.length;r++)s=Vi[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Vi.length&&(r=Vi[0],r.blockedOn===null);)BE(r),r.blockedOn===null&&Vi.shift()}var Oc=Ni.ReactCurrentBatchConfig,T0=!0;function k7(e,n,r,s){var a=Nt,i=Oc.transition;Oc.transition=null;try{Nt=1,Ab(e,n,r,s)}finally{Nt=a,Oc.transition=i}}function j7(e,n,r,s){var a=Nt,i=Oc.transition;Oc.transition=null;try{Nt=4,Ab(e,n,r,s)}finally{Nt=a,Oc.transition=i}}function Ab(e,n,r,s){if(T0){var a=gx(e,n,r,s);if(a===null)xy(e,n,s,F0,r),OC(e,s);else if(B7(a,e,n,r,s))s.stopPropagation();else if(OC(e,s),n&4&&-1<C7.indexOf(e)){for(;a!==null;){var i=nh(a);if(i!==null&&wE(i),i=gx(e,n,r,s),i===null&&xy(e,n,s,F0,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else xy(e,n,s,null,r)}}var F0=null;function gx(e,n,r,s){if(F0=null,e=ib(s),e=Yo(e),e!==null)if(n=Sl(e),n===null)e=null;else if(r=n.tag,r===13){if(e=hE(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return F0=e,null}function SE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(g7()){case ob:return 1;case pE:return 4;case N0:case m7:return 16;case yE:return 536870912;default:return 16}default:return 16}}var Ji=null,ub=null,Zf=null;function kE(){if(Zf)return Zf;var e,n=ub,r=n.length,s,a="value"in Ji?Ji.value:Ji.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&n[r-s]===a[i-s];s++);return Zf=a.slice(e,1<s?1-s:void 0)}function e0(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Wh(){return!0}function HC(){return!1}function us(e){function n(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Wh:HC,this.isPropagationStopped=HC,this}return an(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wh)},persist:function(){},isPersistent:Wh}),n}var CA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},db=us(CA),th=an({},CA,{view:0,detail:0}),N7=us(th),uy,dy,GA,fm=an({},th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==GA&&(GA&&e.type==="mousemove"?(uy=e.screenX-GA.screenX,dy=e.screenY-GA.screenY):dy=uy=0,GA=e),uy)},movementY:function(e){return"movementY"in e?e.movementY:dy}}),zC=us(fm),E7=an({},fm,{dataTransfer:0}),T7=us(E7),F7=an({},th,{relatedTarget:0}),hy=us(F7),I7=an({},CA,{animationName:0,elapsedTime:0,pseudoElement:0}),U7=us(I7),P7=an({},CA,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),M7=us(P7),Q7=an({},CA,{data:0}),KC=us(Q7),D7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O7(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=$7[e])?!!n[e]:!1}function hb(){return O7}var L7=an({},th,{key:function(e){if(e.key){var n=D7[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=e0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?R7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hb,charCode:function(e){return e.type==="keypress"?e0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?e0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),H7=us(L7),z7=an({},fm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),GC=us(z7),K7=an({},th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hb}),G7=us(K7),W7=an({},CA,{propertyName:0,elapsedTime:0,pseudoElement:0}),V7=us(W7),q7=an({},fm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X7=us(q7),Y7=[9,13,27,32],fb=yi&&"CompositionEvent"in window,Hu=null;yi&&"documentMode"in document&&(Hu=document.documentMode);var J7=yi&&"TextEvent"in window&&!Hu,jE=yi&&(!fb||Hu&&8<Hu&&11>=Hu),WC=String.fromCharCode(32),VC=!1;function NE(e,n){switch(e){case"keyup":return Y7.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Cc=!1;function Z7(e,n){switch(e){case"compositionend":return EE(n);case"keypress":return n.which!==32?null:(VC=!0,WC);case"textInput":return e=n.data,e===WC&&VC?null:e;default:return null}}function eR(e,n){if(Cc)return e==="compositionend"||!fb&&NE(e,n)?(e=kE(),Zf=ub=Ji=null,Cc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return jE&&n.locale!=="ko"?null:n.data;default:return null}}var tR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qC(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!tR[e.type]:n==="textarea"}function TE(e,n,r,s){lE(s),n=I0(n,"onChange"),0<n.length&&(r=new db("onChange","change",null,r,s),e.push({event:r,listeners:n}))}var zu=null,md=null;function nR(e){LE(e,0)}function gm(e){var n=kc(e);if(tE(n))return e}function rR(e,n){if(e==="change")return n}var FE=!1;if(yi){var fy;if(yi){var gy="oninput"in document;if(!gy){var XC=document.createElement("div");XC.setAttribute("oninput","return;"),gy=typeof XC.oninput=="function"}fy=gy}else fy=!1;FE=fy&&(!document.documentMode||9<document.documentMode)}function YC(){zu&&(zu.detachEvent("onpropertychange",IE),md=zu=null)}function IE(e){if(e.propertyName==="value"&&gm(md)){var n=[];TE(n,md,e,ib(e)),dE(nR,n)}}function sR(e,n,r){e==="focusin"?(YC(),zu=n,md=r,zu.attachEvent("onpropertychange",IE)):e==="focusout"&&YC()}function aR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gm(md)}function iR(e,n){if(e==="click")return gm(n)}function oR(e,n){if(e==="input"||e==="change")return gm(n)}function lR(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ca=typeof Object.is=="function"?Object.is:lR;function pd(e,n){if(ca(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Yv.call(n,a)||!ca(e[a],n[a]))return!1}return!0}function JC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ZC(e,n){var r=JC(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=n&&s>=n)return{node:r,offset:n-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=JC(r)}}function UE(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?UE(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function PE(){for(var e=window,n=S0();n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=S0(e.document)}return n}function gb(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function cR(e){var n=PE(),r=e.focusedElem,s=e.selectionRange;if(n!==r&&r&&r.ownerDocument&&UE(r.ownerDocument.documentElement,r)){if(s!==null&&gb(r)){if(n=s.start,e=s.end,e===void 0&&(e=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(e,r.value.length);else if(e=(n=r.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=ZC(r,i);var o=ZC(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(n=n.createRange(),n.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(n),e.extend(o.node,o.offset)):(n.setEnd(o.node,o.offset),e.addRange(n)))}}for(n=[],e=r;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)e=n[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var AR=yi&&"documentMode"in document&&11>=document.documentMode,Bc=null,mx=null,Ku=null,px=!1;function eB(e,n,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;px||Bc==null||Bc!==S0(s)||(s=Bc,"selectionStart"in s&&gb(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ku&&pd(Ku,s)||(Ku=s,s=I0(mx,"onSelect"),0<s.length&&(n=new db("onSelect","select",null,n,r),e.push({event:n,listeners:s}),n.target=Bc)))}function Vh(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var Sc={animationend:Vh("Animation","AnimationEnd"),animationiteration:Vh("Animation","AnimationIteration"),animationstart:Vh("Animation","AnimationStart"),transitionend:Vh("Transition","TransitionEnd")},my={},ME={};yi&&(ME=document.createElement("div").style,"AnimationEvent"in window||(delete Sc.animationend.animation,delete Sc.animationiteration.animation,delete Sc.animationstart.animation),"TransitionEvent"in window||delete Sc.transitionend.transition);function mm(e){if(my[e])return my[e];if(!Sc[e])return e;var n=Sc[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in ME)return my[e]=n[r];return e}var QE=mm("animationend"),DE=mm("animationiteration"),RE=mm("animationstart"),$E=mm("transitionend"),OE=new Map,tB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(e,n){OE.set(e,n),Bl(n,[e])}for(var py=0;py<tB.length;py++){var yy=tB[py],uR=yy.toLowerCase(),dR=yy[0].toUpperCase()+yy.slice(1);So(uR,"on"+dR)}So(QE,"onAnimationEnd");So(DE,"onAnimationIteration");So(RE,"onAnimationStart");So("dblclick","onDoubleClick");So("focusin","onFocus");So("focusout","onBlur");So($E,"onTransitionEnd");Jc("onMouseEnter",["mouseout","mouseover"]);Jc("onMouseLeave",["mouseout","mouseover"]);Jc("onPointerEnter",["pointerout","pointerover"]);Jc("onPointerLeave",["pointerout","pointerover"]);Bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hR=new Set("cancel close invalid load scroll toggle".split(" ").concat(_u));function nB(e,n,r){var s=e.type||"unknown-event";e.currentTarget=r,u7(s,n,void 0,e),e.currentTarget=null}function LE(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(n)for(var o=s.length-1;0<=o;o--){var c=s[o],A=c.instance,u=c.currentTarget;if(c=c.listener,A!==i&&a.isPropagationStopped())break e;nB(a,c,u),i=A}else for(o=0;o<s.length;o++){if(c=s[o],A=c.instance,u=c.currentTarget,c=c.listener,A!==i&&a.isPropagationStopped())break e;nB(a,c,u),i=A}}}if(j0)throw e=dx,j0=!1,dx=null,e}function Rt(e,n){var r=n[bx];r===void 0&&(r=n[bx]=new Set);var s=e+"__bubble";r.has(s)||(HE(n,e,2,!1),r.add(s))}function vy(e,n,r){var s=0;n&&(s|=4),HE(r,e,s,n)}var qh="_reactListening"+Math.random().toString(36).slice(2);function yd(e){if(!e[qh]){e[qh]=!0,X4.forEach(function(r){r!=="selectionchange"&&(hR.has(r)||vy(r,!1,e),vy(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[qh]||(n[qh]=!0,vy("selectionchange",!1,n))}}function HE(e,n,r,s){switch(SE(n)){case 1:var a=k7;break;case 4:a=j7;break;default:a=Ab}r=a.bind(null,n,r,e),a=void 0,!ux||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(n,r,{capture:!0,passive:a}):e.addEventListener(n,r,!0):a!==void 0?e.addEventListener(n,r,{passive:a}):e.addEventListener(n,r,!1)}function xy(e,n,r,s,a){var i=s;if(!(n&1)&&!(n&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var c=s.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var A=o.tag;if((A===3||A===4)&&(A=o.stateNode.containerInfo,A===a||A.nodeType===8&&A.parentNode===a))return;o=o.return}for(;c!==null;){if(o=Yo(c),o===null)return;if(A=o.tag,A===5||A===6){s=i=o;continue e}c=c.parentNode}}s=s.return}dE(function(){var u=i,h=ib(r),d=[];e:{var f=OE.get(e);if(f!==void 0){var g=db,m=e;switch(e){case"keypress":if(e0(r)===0)break e;case"keydown":case"keyup":g=H7;break;case"focusin":m="focus",g=hy;break;case"focusout":m="blur",g=hy;break;case"beforeblur":case"afterblur":g=hy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=zC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=T7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=G7;break;case QE:case DE:case RE:g=U7;break;case $E:g=V7;break;case"scroll":g=N7;break;case"wheel":g=X7;break;case"copy":case"cut":case"paste":g=M7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=GC}var y=(n&4)!==0,v=!y&&e==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var x=u,b;x!==null;){b=x;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,p!==null&&(w=dd(x,p),w!=null&&y.push(vd(x,w,b)))),v)break;x=x.return}0<y.length&&(f=new g(f,m,null,r,h),d.push({event:f,listeners:y}))}}if(!(n&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&r!==cx&&(m=r.relatedTarget||r.fromElement)&&(Yo(m)||m[vi]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=r.relatedTarget||r.toElement,g=u,m=m?Yo(m):null,m!==null&&(v=Sl(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=u),g!==m)){if(y=zC,w="onMouseLeave",p="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=GC,w="onPointerLeave",p="onPointerEnter",x="pointer"),v=g==null?f:kc(g),b=m==null?f:kc(m),f=new y(w,x+"leave",g,r,h),f.target=v,f.relatedTarget=b,w=null,Yo(h)===u&&(y=new y(p,x+"enter",m,r,h),y.target=b,y.relatedTarget=v,w=y),v=w,g&&m)t:{for(y=g,p=m,x=0,b=y;b;b=Kl(b))x++;for(b=0,w=p;w;w=Kl(w))b++;for(;0<x-b;)y=Kl(y),x--;for(;0<b-x;)p=Kl(p),b--;for(;x--;){if(y===p||p!==null&&y===p.alternate)break t;y=Kl(y),p=Kl(p)}y=null}else y=null;g!==null&&rB(d,f,g,y,!1),m!==null&&v!==null&&rB(d,v,m,y,!0)}}e:{if(f=u?kc(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var _=rR;else if(qC(f))if(FE)_=oR;else{_=aR;var B=sR}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=iR);if(_&&(_=_(e,u))){TE(d,_,r,h);break e}B&&B(e,f,u),e==="focusout"&&(B=f._wrapperState)&&B.controlled&&f.type==="number"&&sx(f,"number",f.value)}switch(B=u?kc(u):window,e){case"focusin":(qC(B)||B.contentEditable==="true")&&(Bc=B,mx=u,Ku=null);break;case"focusout":Ku=mx=Bc=null;break;case"mousedown":px=!0;break;case"contextmenu":case"mouseup":case"dragend":px=!1,eB(d,r,h);break;case"selectionchange":if(AR)break;case"keydown":case"keyup":eB(d,r,h)}var k;if(fb)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Cc?NE(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(jE&&r.locale!=="ko"&&(Cc||N!=="onCompositionStart"?N==="onCompositionEnd"&&Cc&&(k=kE()):(Ji=h,ub="value"in Ji?Ji.value:Ji.textContent,Cc=!0)),B=I0(u,N),0<B.length&&(N=new KC(N,e,null,r,h),d.push({event:N,listeners:B}),k?N.data=k:(k=EE(r),k!==null&&(N.data=k)))),(k=J7?Z7(e,r):eR(e,r))&&(u=I0(u,"onBeforeInput"),0<u.length&&(h=new KC("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=k))}LE(d,n)})}function vd(e,n,r){return{instance:e,listener:n,currentTarget:r}}function I0(e,n){for(var r=n+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=dd(e,r),i!=null&&s.unshift(vd(e,i,a)),i=dd(e,n),i!=null&&s.push(vd(e,i,a))),e=e.return}return s}function Kl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rB(e,n,r,s,a){for(var i=n._reactName,o=[];r!==null&&r!==s;){var c=r,A=c.alternate,u=c.stateNode;if(A!==null&&A===s)break;c.tag===5&&u!==null&&(c=u,a?(A=dd(r,i),A!=null&&o.unshift(vd(r,A,c))):a||(A=dd(r,i),A!=null&&o.push(vd(r,A,c)))),r=r.return}o.length!==0&&e.push({event:n,listeners:o})}var fR=/\r\n?/g,gR=/\u0000|\uFFFD/g;function sB(e){return(typeof e=="string"?e:""+e).replace(fR,`
`).replace(gR,"")}function Xh(e,n,r){if(n=sB(n),sB(e)!==n&&r)throw Error(je(425))}function U0(){}var yx=null,vx=null;function xx(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var wx=typeof setTimeout=="function"?setTimeout:void 0,mR=typeof clearTimeout=="function"?clearTimeout:void 0,aB=typeof Promise=="function"?Promise:void 0,pR=typeof queueMicrotask=="function"?queueMicrotask:typeof aB<"u"?function(e){return aB.resolve(null).then(e).catch(yR)}:wx;function yR(e){setTimeout(function(){throw e})}function wy(e,n){var r=n,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),gd(n);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);gd(n)}function oo(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function iB(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}var BA=Math.random().toString(36).slice(2),ka="__reactFiber$"+BA,xd="__reactProps$"+BA,vi="__reactContainer$"+BA,bx="__reactEvents$"+BA,vR="__reactListeners$"+BA,xR="__reactHandles$"+BA;function Yo(e){var n=e[ka];if(n)return n;for(var r=e.parentNode;r;){if(n=r[vi]||r[ka]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=iB(e);e!==null;){if(r=e[ka])return r;e=iB(e)}return n}e=r,r=e.parentNode}return null}function nh(e){return e=e[ka]||e[vi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(je(33))}function pm(e){return e[xd]||null}var _x=[],jc=-1;function ko(e){return{current:e}}function Lt(e){0>jc||(e.current=_x[jc],_x[jc]=null,jc--)}function Dt(e,n){jc++,_x[jc]=e.current,e.current=n}var vo={},Ar=ko(vo),Rr=ko(!1),fl=vo;function Zc(e,n){var r=e.type.contextTypes;if(!r)return vo;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=n[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function $r(e){return e=e.childContextTypes,e!=null}function P0(){Lt(Rr),Lt(Ar)}function oB(e,n,r){if(Ar.current!==vo)throw Error(je(168));Dt(Ar,n),Dt(Rr,r)}function zE(e,n,r){var s=e.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in n))throw Error(je(108,s7(e)||"Unknown",a));return an({},r,s)}function M0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vo,fl=Ar.current,Dt(Ar,e),Dt(Rr,Rr.current),!0}function lB(e,n,r){var s=e.stateNode;if(!s)throw Error(je(169));r?(e=zE(e,n,fl),s.__reactInternalMemoizedMergedChildContext=e,Lt(Rr),Lt(Ar),Dt(Ar,e)):Lt(Rr),Dt(Rr,r)}var ai=null,ym=!1,by=!1;function KE(e){ai===null?ai=[e]:ai.push(e)}function wR(e){ym=!0,KE(e)}function jo(){if(!by&&ai!==null){by=!0;var e=0,n=Nt;try{var r=ai;for(Nt=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}ai=null,ym=!1}catch(a){throw ai!==null&&(ai=ai.slice(e+1)),mE(ob,jo),a}finally{Nt=n,by=!1}}return null}var Nc=[],Ec=0,Q0=null,D0=0,xs=[],ws=0,gl=null,li=1,ci="";function $o(e,n){Nc[Ec++]=D0,Nc[Ec++]=Q0,Q0=e,D0=n}function GE(e,n,r){xs[ws++]=li,xs[ws++]=ci,xs[ws++]=gl,gl=e;var s=li;e=ci;var a=32-ia(s)-1;s&=~(1<<a),r+=1;var i=32-ia(n)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,li=1<<32-ia(n)+a|r<<a|s,ci=i+e}else li=1<<i|r<<a|s,ci=e}function mb(e){e.return!==null&&($o(e,1),GE(e,1,0))}function pb(e){for(;e===Q0;)Q0=Nc[--Ec],Nc[Ec]=null,D0=Nc[--Ec],Nc[Ec]=null;for(;e===gl;)gl=xs[--ws],xs[ws]=null,ci=xs[--ws],xs[ws]=null,li=xs[--ws],xs[ws]=null}var is=null,as=null,Yt=!1,Js=null;function WE(e,n){var r=Ss(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=e,n=e.deletions,n===null?(e.deletions=[r],e.flags|=16):n.push(r)}function cB(e,n){switch(e.tag){case 5:var r=e.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,is=e,as=oo(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,is=e,as=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=gl!==null?{id:li,overflow:ci}:null,e.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=Ss(18,null,null,0),r.stateNode=n,r.return=e,e.child=r,is=e,as=null,!0):!1;default:return!1}}function Cx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Bx(e){if(Yt){var n=as;if(n){var r=n;if(!cB(e,n)){if(Cx(e))throw Error(je(418));n=oo(r.nextSibling);var s=is;n&&cB(e,n)?WE(s,r):(e.flags=e.flags&-4097|2,Yt=!1,is=e)}}else{if(Cx(e))throw Error(je(418));e.flags=e.flags&-4097|2,Yt=!1,is=e}}}function AB(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;is=e}function Yh(e){if(e!==is)return!1;if(!Yt)return AB(e),Yt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!xx(e.type,e.memoizedProps)),n&&(n=as)){if(Cx(e))throw VE(),Error(je(418));for(;n;)WE(e,n),n=oo(n.nextSibling)}if(AB(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(je(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(n===0){as=oo(e.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}e=e.nextSibling}as=null}}else as=is?oo(e.stateNode.nextSibling):null;return!0}function VE(){for(var e=as;e;)e=oo(e.nextSibling)}function eA(){as=is=null,Yt=!1}function yb(e){Js===null?Js=[e]:Js.push(e)}var bR=Ni.ReactCurrentBatchConfig;function WA(e,n,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(je(309));var s=r.stateNode}if(!s)throw Error(je(147,e));var a=s,i=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===i?n.ref:(n=function(o){var c=a.refs;o===null?delete c[i]:c[i]=o},n._stringRef=i,n)}if(typeof e!="string")throw Error(je(284));if(!r._owner)throw Error(je(290,e))}return e}function Jh(e,n){throw e=Object.prototype.toString.call(n),Error(je(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function uB(e){var n=e._init;return n(e._payload)}function qE(e){function n(p,x){if(e){var b=p.deletions;b===null?(p.deletions=[x],p.flags|=16):b.push(x)}}function r(p,x){if(!e)return null;for(;x!==null;)n(p,x),x=x.sibling;return null}function s(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function a(p,x){return p=uo(p,x),p.index=0,p.sibling=null,p}function i(p,x,b){return p.index=b,e?(b=p.alternate,b!==null?(b=b.index,b<x?(p.flags|=2,x):b):(p.flags|=2,x)):(p.flags|=1048576,x)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function c(p,x,b,w){return x===null||x.tag!==6?(x=Ny(b,p.mode,w),x.return=p,x):(x=a(x,b),x.return=p,x)}function A(p,x,b,w){var _=b.type;return _===_c?h(p,x,b.props.children,w,b.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===zi&&uB(_)===x.type)?(w=a(x,b.props),w.ref=WA(p,x,b),w.return=p,w):(w=o0(b.type,b.key,b.props,null,p.mode,w),w.ref=WA(p,x,b),w.return=p,w)}function u(p,x,b,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Ey(b,p.mode,w),x.return=p,x):(x=a(x,b.children||[]),x.return=p,x)}function h(p,x,b,w,_){return x===null||x.tag!==7?(x=il(b,p.mode,w,_),x.return=p,x):(x=a(x,b),x.return=p,x)}function d(p,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ny(""+x,p.mode,b),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Oh:return b=o0(x.type,x.key,x.props,null,p.mode,b),b.ref=WA(p,null,x),b.return=p,b;case bc:return x=Ey(x,p.mode,b),x.return=p,x;case zi:var w=x._init;return d(p,w(x._payload),b)}if(wu(x)||LA(x))return x=il(x,p.mode,b,null),x.return=p,x;Jh(p,x)}return null}function f(p,x,b,w){var _=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:c(p,x,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Oh:return b.key===_?A(p,x,b,w):null;case bc:return b.key===_?u(p,x,b,w):null;case zi:return _=b._init,f(p,x,_(b._payload),w)}if(wu(b)||LA(b))return _!==null?null:h(p,x,b,w,null);Jh(p,b)}return null}function g(p,x,b,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(b)||null,c(x,p,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oh:return p=p.get(w.key===null?b:w.key)||null,A(x,p,w,_);case bc:return p=p.get(w.key===null?b:w.key)||null,u(x,p,w,_);case zi:var B=w._init;return g(p,x,b,B(w._payload),_)}if(wu(w)||LA(w))return p=p.get(b)||null,h(x,p,w,_,null);Jh(x,w)}return null}function m(p,x,b,w){for(var _=null,B=null,k=x,N=x=0,C=null;k!==null&&N<b.length;N++){k.index>N?(C=k,k=null):C=k.sibling;var j=f(p,k,b[N],w);if(j===null){k===null&&(k=C);break}e&&k&&j.alternate===null&&n(p,k),x=i(j,x,N),B===null?_=j:B.sibling=j,B=j,k=C}if(N===b.length)return r(p,k),Yt&&$o(p,N),_;if(k===null){for(;N<b.length;N++)k=d(p,b[N],w),k!==null&&(x=i(k,x,N),B===null?_=k:B.sibling=k,B=k);return Yt&&$o(p,N),_}for(k=s(p,k);N<b.length;N++)C=g(k,p,N,b[N],w),C!==null&&(e&&C.alternate!==null&&k.delete(C.key===null?N:C.key),x=i(C,x,N),B===null?_=C:B.sibling=C,B=C);return e&&k.forEach(function(E){return n(p,E)}),Yt&&$o(p,N),_}function y(p,x,b,w){var _=LA(b);if(typeof _!="function")throw Error(je(150));if(b=_.call(b),b==null)throw Error(je(151));for(var B=_=null,k=x,N=x=0,C=null,j=b.next();k!==null&&!j.done;N++,j=b.next()){k.index>N?(C=k,k=null):C=k.sibling;var E=f(p,k,j.value,w);if(E===null){k===null&&(k=C);break}e&&k&&E.alternate===null&&n(p,k),x=i(E,x,N),B===null?_=E:B.sibling=E,B=E,k=C}if(j.done)return r(p,k),Yt&&$o(p,N),_;if(k===null){for(;!j.done;N++,j=b.next())j=d(p,j.value,w),j!==null&&(x=i(j,x,N),B===null?_=j:B.sibling=j,B=j);return Yt&&$o(p,N),_}for(k=s(p,k);!j.done;N++,j=b.next())j=g(k,p,N,j.value,w),j!==null&&(e&&j.alternate!==null&&k.delete(j.key===null?N:j.key),x=i(j,x,N),B===null?_=j:B.sibling=j,B=j);return e&&k.forEach(function(F){return n(p,F)}),Yt&&$o(p,N),_}function v(p,x,b,w){if(typeof b=="object"&&b!==null&&b.type===_c&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Oh:e:{for(var _=b.key,B=x;B!==null;){if(B.key===_){if(_=b.type,_===_c){if(B.tag===7){r(p,B.sibling),x=a(B,b.props.children),x.return=p,p=x;break e}}else if(B.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===zi&&uB(_)===B.type){r(p,B.sibling),x=a(B,b.props),x.ref=WA(p,B,b),x.return=p,p=x;break e}r(p,B);break}else n(p,B);B=B.sibling}b.type===_c?(x=il(b.props.children,p.mode,w,b.key),x.return=p,p=x):(w=o0(b.type,b.key,b.props,null,p.mode,w),w.ref=WA(p,x,b),w.return=p,p=w)}return o(p);case bc:e:{for(B=b.key;x!==null;){if(x.key===B)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(p,x.sibling),x=a(x,b.children||[]),x.return=p,p=x;break e}else{r(p,x);break}else n(p,x);x=x.sibling}x=Ey(b,p.mode,w),x.return=p,p=x}return o(p);case zi:return B=b._init,v(p,x,B(b._payload),w)}if(wu(b))return m(p,x,b,w);if(LA(b))return y(p,x,b,w);Jh(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(p,x.sibling),x=a(x,b),x.return=p,p=x):(r(p,x),x=Ny(b,p.mode,w),x.return=p,p=x),o(p)):r(p,x)}return v}var tA=qE(!0),XE=qE(!1),R0=ko(null),$0=null,Tc=null,vb=null;function xb(){vb=Tc=$0=null}function wb(e){var n=R0.current;Lt(R0),e._currentValue=n}function Sx(e,n,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===r)break;e=e.return}}function Lc(e,n){$0=e,vb=Tc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(Mr=!0),e.firstContext=null)}function Fs(e){var n=e._currentValue;if(vb!==e)if(e={context:e,memoizedValue:n,next:null},Tc===null){if($0===null)throw Error(je(308));Tc=e,$0.dependencies={lanes:0,firstContext:e}}else Tc=Tc.next=e;return n}var Jo=null;function bb(e){Jo===null?Jo=[e]:Jo.push(e)}function YE(e,n,r,s){var a=n.interleaved;return a===null?(r.next=r,bb(n)):(r.next=a.next,a.next=r),n.interleaved=r,xi(e,s)}function xi(e,n){e.lanes|=n;var r=e.alternate;for(r!==null&&(r.lanes|=n),r=e,e=e.return;e!==null;)e.childLanes|=n,r=e.alternate,r!==null&&(r.childLanes|=n),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ki=!1;function _b(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JE(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gi(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function lo(e,n,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,xt&2){var a=s.pending;return a===null?n.next=n:(n.next=a.next,a.next=n),s.pending=n,xi(e,r)}return a=s.interleaved,a===null?(n.next=n,bb(s)):(n.next=a.next,a.next=n),s.interleaved=n,xi(e,r)}function t0(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var s=n.lanes;s&=e.pendingLanes,r|=s,n.lanes=r,lb(e,r)}}function dB(e,n){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=n:i=i.next=n}else a=i=n;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}function O0(e,n,r,s){var a=e.updateQueue;Ki=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var A=c,u=A.next;A.next=null,o===null?i=u:o.next=u,o=A;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=u:c.next=u,h.lastBaseUpdate=A))}if(i!==null){var d=a.baseState;o=0,h=u=A=null,c=i;do{var f=c.lane,g=c.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var m=e,y=c;switch(f=n,g=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(g,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(g,d,f):m,f==null)break e;d=an({},d,f);break e;case 2:Ki=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[c]:f.push(c))}else g={eventTime:g,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(u=h=g,A=d):h=h.next=g,o|=f;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;f=c,c=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(1);if(h===null&&(A=d),a.baseState=A,a.firstBaseUpdate=u,a.lastBaseUpdate=h,n=a.shared.interleaved,n!==null){a=n;do o|=a.lane,a=a.next;while(a!==n)}else i===null&&(a.shared.lanes=0);pl|=o,e.lanes=o,e.memoizedState=d}}function hB(e,n,r){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var s=e[n],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(je(191,a));a.call(s)}}}var rh={},Fa=ko(rh),wd=ko(rh),bd=ko(rh);function Zo(e){if(e===rh)throw Error(je(174));return e}function Cb(e,n){switch(Dt(bd,n),Dt(wd,e),Dt(Fa,rh),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ix(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=ix(n,e)}Lt(Fa),Dt(Fa,n)}function nA(){Lt(Fa),Lt(wd),Lt(bd)}function ZE(e){Zo(bd.current);var n=Zo(Fa.current),r=ix(n,e.type);n!==r&&(Dt(wd,e),Dt(Fa,r))}function Bb(e){wd.current===e&&(Lt(Fa),Lt(wd))}var rn=ko(0);function L0(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var _y=[];function Sb(){for(var e=0;e<_y.length;e++)_y[e]._workInProgressVersionPrimary=null;_y.length=0}var n0=Ni.ReactCurrentDispatcher,Cy=Ni.ReactCurrentBatchConfig,ml=0,sn=null,Cn=null,In=null,H0=!1,Gu=!1,_d=0,_R=0;function er(){throw Error(je(321))}function kb(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!ca(e[r],n[r]))return!1;return!0}function jb(e,n,r,s,a,i){if(ml=i,sn=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,n0.current=e===null||e.memoizedState===null?kR:jR,e=r(s,a),Gu){i=0;do{if(Gu=!1,_d=0,25<=i)throw Error(je(301));i+=1,In=Cn=null,n.updateQueue=null,n0.current=NR,e=r(s,a)}while(Gu)}if(n0.current=z0,n=Cn!==null&&Cn.next!==null,ml=0,In=Cn=sn=null,H0=!1,n)throw Error(je(300));return e}function Nb(){var e=_d!==0;return _d=0,e}function _a(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return In===null?sn.memoizedState=In=e:In=In.next=e,In}function Is(){if(Cn===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=Cn.next;var n=In===null?sn.memoizedState:In.next;if(n!==null)In=n,Cn=e;else{if(e===null)throw Error(je(310));Cn=e,e={memoizedState:Cn.memoizedState,baseState:Cn.baseState,baseQueue:Cn.baseQueue,queue:Cn.queue,next:null},In===null?sn.memoizedState=In=e:In=In.next=e}return In}function Cd(e,n){return typeof n=="function"?n(e):n}function By(e){var n=Is(),r=n.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var s=Cn,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var c=o=null,A=null,u=i;do{var h=u.lane;if((ml&h)===h)A!==null&&(A=A.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};A===null?(c=A=d,o=s):A=A.next=d,sn.lanes|=h,pl|=h}u=u.next}while(u!==null&&u!==i);A===null?o=s:A.next=c,ca(s,n.memoizedState)||(Mr=!0),n.memoizedState=s,n.baseState=o,n.baseQueue=A,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,sn.lanes|=i,pl|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function Sy(e){var n=Is(),r=n.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=n.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ca(i,n.memoizedState)||(Mr=!0),n.memoizedState=i,n.baseQueue===null&&(n.baseState=i),r.lastRenderedState=i}return[i,s]}function e3(){}function t3(e,n){var r=sn,s=Is(),a=n(),i=!ca(s.memoizedState,a);if(i&&(s.memoizedState=a,Mr=!0),s=s.queue,Eb(s3.bind(null,r,s,e),[e]),s.getSnapshot!==n||i||In!==null&&In.memoizedState.tag&1){if(r.flags|=2048,Bd(9,r3.bind(null,r,s,a,n),void 0,null),Qn===null)throw Error(je(349));ml&30||n3(r,n,a)}return a}function n3(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=sn.updateQueue,n===null?(n={lastEffect:null,stores:null},sn.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function r3(e,n,r,s){n.value=r,n.getSnapshot=s,a3(n)&&i3(e)}function s3(e,n,r){return r(function(){a3(n)&&i3(e)})}function a3(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!ca(e,r)}catch{return!0}}function i3(e){var n=xi(e,1);n!==null&&oa(n,e,1,-1)}function fB(e){var n=_a();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cd,lastRenderedState:e},n.queue=e,e=e.dispatch=SR.bind(null,sn,e),[n.memoizedState,e]}function Bd(e,n,r,s){return e={tag:e,create:n,destroy:r,deps:s,next:null},n=sn.updateQueue,n===null?(n={lastEffect:null,stores:null},sn.updateQueue=n,n.lastEffect=e.next=e):(r=n.lastEffect,r===null?n.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,n.lastEffect=e)),e}function o3(){return Is().memoizedState}function r0(e,n,r,s){var a=_a();sn.flags|=e,a.memoizedState=Bd(1|n,r,void 0,s===void 0?null:s)}function vm(e,n,r,s){var a=Is();s=s===void 0?null:s;var i=void 0;if(Cn!==null){var o=Cn.memoizedState;if(i=o.destroy,s!==null&&kb(s,o.deps)){a.memoizedState=Bd(n,r,i,s);return}}sn.flags|=e,a.memoizedState=Bd(1|n,r,i,s)}function gB(e,n){return r0(8390656,8,e,n)}function Eb(e,n){return vm(2048,8,e,n)}function l3(e,n){return vm(4,2,e,n)}function c3(e,n){return vm(4,4,e,n)}function A3(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function u3(e,n,r){return r=r!=null?r.concat([e]):null,vm(4,4,A3.bind(null,n,e),r)}function Tb(){}function d3(e,n){var r=Is();n=n===void 0?null:n;var s=r.memoizedState;return s!==null&&n!==null&&kb(n,s[1])?s[0]:(r.memoizedState=[e,n],e)}function h3(e,n){var r=Is();n=n===void 0?null:n;var s=r.memoizedState;return s!==null&&n!==null&&kb(n,s[1])?s[0]:(e=e(),r.memoizedState=[e,n],e)}function f3(e,n,r){return ml&21?(ca(r,n)||(r=vE(),sn.lanes|=r,pl|=r,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,Mr=!0),e.memoizedState=r)}function CR(e,n){var r=Nt;Nt=r!==0&&4>r?r:4,e(!0);var s=Cy.transition;Cy.transition={};try{e(!1),n()}finally{Nt=r,Cy.transition=s}}function g3(){return Is().memoizedState}function BR(e,n,r){var s=Ao(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},m3(e))p3(n,r);else if(r=YE(e,n,r,s),r!==null){var a=br();oa(r,e,s,a),y3(r,n,s)}}function SR(e,n,r){var s=Ao(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(m3(e))p3(n,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=n.lastRenderedReducer,i!==null))try{var o=n.lastRenderedState,c=i(o,r);if(a.hasEagerState=!0,a.eagerState=c,ca(c,o)){var A=n.interleaved;A===null?(a.next=a,bb(n)):(a.next=A.next,A.next=a),n.interleaved=a;return}}catch{}finally{}r=YE(e,n,a,s),r!==null&&(a=br(),oa(r,e,s,a),y3(r,n,s))}}function m3(e){var n=e.alternate;return e===sn||n!==null&&n===sn}function p3(e,n){Gu=H0=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function y3(e,n,r){if(r&4194240){var s=n.lanes;s&=e.pendingLanes,r|=s,n.lanes=r,lb(e,r)}}var z0={readContext:Fs,useCallback:er,useContext:er,useEffect:er,useImperativeHandle:er,useInsertionEffect:er,useLayoutEffect:er,useMemo:er,useReducer:er,useRef:er,useState:er,useDebugValue:er,useDeferredValue:er,useTransition:er,useMutableSource:er,useSyncExternalStore:er,useId:er,unstable_isNewReconciler:!1},kR={readContext:Fs,useCallback:function(e,n){return _a().memoizedState=[e,n===void 0?null:n],e},useContext:Fs,useEffect:gB,useImperativeHandle:function(e,n,r){return r=r!=null?r.concat([e]):null,r0(4194308,4,A3.bind(null,n,e),r)},useLayoutEffect:function(e,n){return r0(4194308,4,e,n)},useInsertionEffect:function(e,n){return r0(4,2,e,n)},useMemo:function(e,n){var r=_a();return n=n===void 0?null:n,e=e(),r.memoizedState=[e,n],e},useReducer:function(e,n,r){var s=_a();return n=r!==void 0?r(n):n,s.memoizedState=s.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=BR.bind(null,sn,e),[s.memoizedState,e]},useRef:function(e){var n=_a();return e={current:e},n.memoizedState=e},useState:fB,useDebugValue:Tb,useDeferredValue:function(e){return _a().memoizedState=e},useTransition:function(){var e=fB(!1),n=e[0];return e=CR.bind(null,e[1]),_a().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,r){var s=sn,a=_a();if(Yt){if(r===void 0)throw Error(je(407));r=r()}else{if(r=n(),Qn===null)throw Error(je(349));ml&30||n3(s,n,r)}a.memoizedState=r;var i={value:r,getSnapshot:n};return a.queue=i,gB(s3.bind(null,s,i,e),[e]),s.flags|=2048,Bd(9,r3.bind(null,s,i,r,n),void 0,null),r},useId:function(){var e=_a(),n=Qn.identifierPrefix;if(Yt){var r=ci,s=li;r=(s&~(1<<32-ia(s)-1)).toString(32)+r,n=":"+n+"R"+r,r=_d++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=_R++,n=":"+n+"r"+r.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},jR={readContext:Fs,useCallback:d3,useContext:Fs,useEffect:Eb,useImperativeHandle:u3,useInsertionEffect:l3,useLayoutEffect:c3,useMemo:h3,useReducer:By,useRef:o3,useState:function(){return By(Cd)},useDebugValue:Tb,useDeferredValue:function(e){var n=Is();return f3(n,Cn.memoizedState,e)},useTransition:function(){var e=By(Cd)[0],n=Is().memoizedState;return[e,n]},useMutableSource:e3,useSyncExternalStore:t3,useId:g3,unstable_isNewReconciler:!1},NR={readContext:Fs,useCallback:d3,useContext:Fs,useEffect:Eb,useImperativeHandle:u3,useInsertionEffect:l3,useLayoutEffect:c3,useMemo:h3,useReducer:Sy,useRef:o3,useState:function(){return Sy(Cd)},useDebugValue:Tb,useDeferredValue:function(e){var n=Is();return Cn===null?n.memoizedState=e:f3(n,Cn.memoizedState,e)},useTransition:function(){var e=Sy(Cd)[0],n=Is().memoizedState;return[e,n]},useMutableSource:e3,useSyncExternalStore:t3,useId:g3,unstable_isNewReconciler:!1};function Vs(e,n){if(e&&e.defaultProps){n=an({},n),e=e.defaultProps;for(var r in e)n[r]===void 0&&(n[r]=e[r]);return n}return n}function kx(e,n,r,s){n=e.memoizedState,r=r(s,n),r=r==null?n:an({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var xm={isMounted:function(e){return(e=e._reactInternals)?Sl(e)===e:!1},enqueueSetState:function(e,n,r){e=e._reactInternals;var s=br(),a=Ao(e),i=gi(s,a);i.payload=n,r!=null&&(i.callback=r),n=lo(e,i,a),n!==null&&(oa(n,e,a,s),t0(n,e,a))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var s=br(),a=Ao(e),i=gi(s,a);i.tag=1,i.payload=n,r!=null&&(i.callback=r),n=lo(e,i,a),n!==null&&(oa(n,e,a,s),t0(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=br(),s=Ao(e),a=gi(r,s);a.tag=2,n!=null&&(a.callback=n),n=lo(e,a,s),n!==null&&(oa(n,e,s,r),t0(n,e,s))}};function mB(e,n,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):n.prototype&&n.prototype.isPureReactComponent?!pd(r,s)||!pd(a,i):!0}function v3(e,n,r){var s=!1,a=vo,i=n.contextType;return typeof i=="object"&&i!==null?i=Fs(i):(a=$r(n)?fl:Ar.current,s=n.contextTypes,i=(s=s!=null)?Zc(e,a):vo),n=new n(r,i),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=xm,e.stateNode=n,n._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),n}function pB(e,n,r,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,s),n.state!==e&&xm.enqueueReplaceState(n,n.state,null)}function jx(e,n,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},_b(e);var i=n.contextType;typeof i=="object"&&i!==null?a.context=Fs(i):(i=$r(n)?fl:Ar.current,a.context=Zc(e,i)),a.state=e.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(kx(e,n,i,r),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(n=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),n!==a.state&&xm.enqueueReplaceState(a,a.state,null),O0(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function rA(e,n){try{var r="",s=n;do r+=r7(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:n,stack:a,digest:null}}function ky(e,n,r){return{value:e,source:null,stack:r??null,digest:n??null}}function Nx(e,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var ER=typeof WeakMap=="function"?WeakMap:Map;function x3(e,n,r){r=gi(-1,r),r.tag=3,r.payload={element:null};var s=n.value;return r.callback=function(){G0||(G0=!0,Rx=s),Nx(e,n)},r}function w3(e,n,r){r=gi(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;r.payload=function(){return s(a)},r.callback=function(){Nx(e,n)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Nx(e,n),typeof s!="function"&&(co===null?co=new Set([this]):co.add(this));var o=n.stack;this.componentDidCatch(n.value,{componentStack:o!==null?o:""})}),r}function yB(e,n,r){var s=e.pingCache;if(s===null){s=e.pingCache=new ER;var a=new Set;s.set(n,a)}else a=s.get(n),a===void 0&&(a=new Set,s.set(n,a));a.has(r)||(a.add(r),e=zR.bind(null,e,n,r),n.then(e,e))}function vB(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function xB(e,n,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===n?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=gi(-1,1),n.tag=2,lo(r,n,1))),r.lanes|=1),e)}var TR=Ni.ReactCurrentOwner,Mr=!1;function pr(e,n,r,s){n.child=e===null?XE(n,null,r,s):tA(n,e.child,r,s)}function wB(e,n,r,s,a){r=r.render;var i=n.ref;return Lc(n,a),s=jb(e,n,r,s,i,a),r=Nb(),e!==null&&!Mr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,wi(e,n,a)):(Yt&&r&&mb(n),n.flags|=1,pr(e,n,s,a),n.child)}function bB(e,n,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!Rb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=i,b3(e,n,i,s,a)):(e=o0(r.type,null,s,n,n.mode,a),e.ref=n.ref,e.return=n,n.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:pd,r(o,s)&&e.ref===n.ref)return wi(e,n,a)}return n.flags|=1,e=uo(i,s),e.ref=n.ref,e.return=n,n.child=e}function b3(e,n,r,s,a){if(e!==null){var i=e.memoizedProps;if(pd(i,s)&&e.ref===n.ref)if(Mr=!1,n.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(Mr=!0);else return n.lanes=e.lanes,wi(e,n,a)}return Ex(e,n,r,s,a)}function _3(e,n,r){var s=n.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Ic,ts),ts|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Dt(Ic,ts),ts|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Dt(Ic,ts),ts|=s}else i!==null?(s=i.baseLanes|r,n.memoizedState=null):s=r,Dt(Ic,ts),ts|=s;return pr(e,n,a,r),n.child}function C3(e,n){var r=n.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function Ex(e,n,r,s,a){var i=$r(r)?fl:Ar.current;return i=Zc(n,i),Lc(n,a),r=jb(e,n,r,s,i,a),s=Nb(),e!==null&&!Mr?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,wi(e,n,a)):(Yt&&s&&mb(n),n.flags|=1,pr(e,n,r,a),n.child)}function _B(e,n,r,s,a){if($r(r)){var i=!0;M0(n)}else i=!1;if(Lc(n,a),n.stateNode===null)s0(e,n),v3(n,r,s),jx(n,r,s,a),s=!0;else if(e===null){var o=n.stateNode,c=n.memoizedProps;o.props=c;var A=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Fs(u):(u=$r(r)?fl:Ar.current,u=Zc(n,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==s||A!==u)&&pB(n,o,s,u),Ki=!1;var f=n.memoizedState;o.state=f,O0(n,s,o,a),A=n.memoizedState,c!==s||f!==A||Rr.current||Ki?(typeof h=="function"&&(kx(n,r,h,s),A=n.memoizedState),(c=Ki||mB(n,r,c,s,f,A,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(n.flags|=4194308)):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=A),o.props=s,o.state=A,o.context=u,s=c):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{o=n.stateNode,JE(e,n),c=n.memoizedProps,u=n.type===n.elementType?c:Vs(n.type,c),o.props=u,d=n.pendingProps,f=o.context,A=r.contextType,typeof A=="object"&&A!==null?A=Fs(A):(A=$r(r)?fl:Ar.current,A=Zc(n,A));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==d||f!==A)&&pB(n,o,s,A),Ki=!1,f=n.memoizedState,o.state=f,O0(n,s,o,a);var m=n.memoizedState;c!==d||f!==m||Rr.current||Ki?(typeof g=="function"&&(kx(n,r,g,s),m=n.memoizedState),(u=Ki||mB(n,r,u,s,f,m,A)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,A),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,A)),typeof o.componentDidUpdate=="function"&&(n.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=m),o.props=s,o.state=m,o.context=A,s=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),s=!1)}return Tx(e,n,r,s,i,a)}function Tx(e,n,r,s,a,i){C3(e,n);var o=(n.flags&128)!==0;if(!s&&!o)return a&&lB(n,r,!1),wi(e,n,i);s=n.stateNode,TR.current=n;var c=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,e!==null&&o?(n.child=tA(n,e.child,null,i),n.child=tA(n,null,c,i)):pr(e,n,c,i),n.memoizedState=s.state,a&&lB(n,r,!0),n.child}function B3(e){var n=e.stateNode;n.pendingContext?oB(e,n.pendingContext,n.pendingContext!==n.context):n.context&&oB(e,n.context,!1),Cb(e,n.containerInfo)}function CB(e,n,r,s,a){return eA(),yb(a),n.flags|=256,pr(e,n,r,s),n.child}var Fx={dehydrated:null,treeContext:null,retryLane:0};function Ix(e){return{baseLanes:e,cachePool:null,transitions:null}}function S3(e,n,r){var s=n.pendingProps,a=rn.current,i=!1,o=(n.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Dt(rn,a&1),e===null)return Bx(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(o=s.children,e=s.fallback,i?(s=n.mode,i=n.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=_m(o,s,0,null),e=il(e,s,r,null),i.return=n,e.return=n,i.sibling=e,n.child=i,n.child.memoizedState=Ix(r),n.memoizedState=Fx,e):Fb(n,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return FR(e,n,o,s,c,a,r);if(i){i=s.fallback,o=n.mode,a=e.child,c=a.sibling;var A={mode:"hidden",children:s.children};return!(o&1)&&n.child!==a?(s=n.child,s.childLanes=0,s.pendingProps=A,n.deletions=null):(s=uo(a,A),s.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=uo(c,i):(i=il(i,o,r,null),i.flags|=2),i.return=n,s.return=n,s.sibling=i,n.child=s,s=i,i=n.child,o=e.child.memoizedState,o=o===null?Ix(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,n.memoizedState=Fx,s}return i=e.child,e=i.sibling,s=uo(i,{mode:"visible",children:s.children}),!(n.mode&1)&&(s.lanes=r),s.return=n,s.sibling=null,e!==null&&(r=n.deletions,r===null?(n.deletions=[e],n.flags|=16):r.push(e)),n.child=s,n.memoizedState=null,s}function Fb(e,n){return n=_m({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Zh(e,n,r,s){return s!==null&&yb(s),tA(n,e.child,null,r),e=Fb(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function FR(e,n,r,s,a,i,o){if(r)return n.flags&256?(n.flags&=-257,s=ky(Error(je(422))),Zh(e,n,o,s)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(i=s.fallback,a=n.mode,s=_m({mode:"visible",children:s.children},a,0,null),i=il(i,a,o,null),i.flags|=2,s.return=n,i.return=n,s.sibling=i,n.child=s,n.mode&1&&tA(n,e.child,null,o),n.child.memoizedState=Ix(o),n.memoizedState=Fx,i);if(!(n.mode&1))return Zh(e,n,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;return s=c,i=Error(je(419)),s=ky(i,s,void 0),Zh(e,n,o,s)}if(c=(o&e.childLanes)!==0,Mr||c){if(s=Qn,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,xi(e,a),oa(s,e,a,-1))}return Db(),s=ky(Error(je(421))),Zh(e,n,o,s)}return a.data==="$?"?(n.flags|=128,n.child=e.child,n=KR.bind(null,e),a._reactRetry=n,null):(e=i.treeContext,as=oo(a.nextSibling),is=n,Yt=!0,Js=null,e!==null&&(xs[ws++]=li,xs[ws++]=ci,xs[ws++]=gl,li=e.id,ci=e.overflow,gl=n),n=Fb(n,s.children),n.flags|=4096,n)}function BB(e,n,r){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),Sx(e.return,n,r)}function jy(e,n,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=n,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function k3(e,n,r){var s=n.pendingProps,a=s.revealOrder,i=s.tail;if(pr(e,n,s.children,r),s=rn.current,s&2)s=s&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&BB(e,r,n);else if(e.tag===19)BB(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Dt(rn,s),!(n.mode&1))n.memoizedState=null;else switch(a){case"forwards":for(r=n.child,a=null;r!==null;)e=r.alternate,e!==null&&L0(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=n.child,n.child=null):(a=r.sibling,r.sibling=null),jy(n,!1,a,r,i);break;case"backwards":for(r=null,a=n.child,n.child=null;a!==null;){if(e=a.alternate,e!==null&&L0(e)===null){n.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}jy(n,!0,r,null,i);break;case"together":jy(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function s0(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function wi(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),pl|=n.lanes,!(r&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(je(153));if(n.child!==null){for(e=n.child,r=uo(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=uo(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function IR(e,n,r){switch(n.tag){case 3:B3(n),eA();break;case 5:ZE(n);break;case 1:$r(n.type)&&M0(n);break;case 4:Cb(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,a=n.memoizedProps.value;Dt(R0,s._currentValue),s._currentValue=a;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(Dt(rn,rn.current&1),n.flags|=128,null):r&n.child.childLanes?S3(e,n,r):(Dt(rn,rn.current&1),e=wi(e,n,r),e!==null?e.sibling:null);Dt(rn,rn.current&1);break;case 19:if(s=(r&n.childLanes)!==0,e.flags&128){if(s)return k3(e,n,r);n.flags|=128}if(a=n.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Dt(rn,rn.current),s)break;return null;case 22:case 23:return n.lanes=0,_3(e,n,r)}return wi(e,n,r)}var j3,Ux,N3,E3;j3=function(e,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ux=function(){};N3=function(e,n,r,s){var a=e.memoizedProps;if(a!==s){e=n.stateNode,Zo(Fa.current);var i=null;switch(r){case"input":a=nx(e,a),s=nx(e,s),i=[];break;case"select":a=an({},a,{value:void 0}),s=an({},s,{value:void 0}),i=[];break;case"textarea":a=ax(e,a),s=ax(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=U0)}ox(r,s);var o;r=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ad.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var A=s[u];if(c=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&A!==c&&(A!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||A&&A.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in A)A.hasOwnProperty(o)&&c[o]!==A[o]&&(r||(r={}),r[o]=A[o])}else r||(i||(i=[]),i.push(u,r)),r=A;else u==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,c=c?c.__html:void 0,A!=null&&c!==A&&(i=i||[]).push(u,A)):u==="children"?typeof A!="string"&&typeof A!="number"||(i=i||[]).push(u,""+A):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ad.hasOwnProperty(u)?(A!=null&&u==="onScroll"&&Rt("scroll",e),i||c===A||(i=[])):(i=i||[]).push(u,A))}r&&(i=i||[]).push("style",r);var u=i;(n.updateQueue=u)&&(n.flags|=4)}};E3=function(e,n,r,s){r!==s&&(n.flags|=4)};function VA(e,n){if(!Yt)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function tr(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(n)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,n}function UR(e,n,r){var s=n.pendingProps;switch(pb(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tr(n),null;case 1:return $r(n.type)&&P0(),tr(n),null;case 3:return s=n.stateNode,nA(),Lt(Rr),Lt(Ar),Sb(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Yh(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Js!==null&&(Lx(Js),Js=null))),Ux(e,n),tr(n),null;case 5:Bb(n);var a=Zo(bd.current);if(r=n.type,e!==null&&n.stateNode!=null)N3(e,n,r,s,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(je(166));return tr(n),null}if(e=Zo(Fa.current),Yh(n)){s=n.stateNode,r=n.type;var i=n.memoizedProps;switch(s[ka]=n,s[xd]=i,e=(n.mode&1)!==0,r){case"dialog":Rt("cancel",s),Rt("close",s);break;case"iframe":case"object":case"embed":Rt("load",s);break;case"video":case"audio":for(a=0;a<_u.length;a++)Rt(_u[a],s);break;case"source":Rt("error",s);break;case"img":case"image":case"link":Rt("error",s),Rt("load",s);break;case"details":Rt("toggle",s);break;case"input":UC(s,i),Rt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Rt("invalid",s);break;case"textarea":MC(s,i),Rt("invalid",s)}ox(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?s.textContent!==c&&(i.suppressHydrationWarning!==!0&&Xh(s.textContent,c,e),a=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Xh(s.textContent,c,e),a=["children",""+c]):Ad.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Rt("scroll",s)}switch(r){case"input":Lh(s),PC(s,i,!0);break;case"textarea":Lh(s),QC(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=U0)}s=a,n.updateQueue=s,s!==null&&(n.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[ka]=n,e[xd]=s,j3(e,n,!1,!1),n.stateNode=e;e:{switch(o=lx(r,s),r){case"dialog":Rt("cancel",e),Rt("close",e),a=s;break;case"iframe":case"object":case"embed":Rt("load",e),a=s;break;case"video":case"audio":for(a=0;a<_u.length;a++)Rt(_u[a],e);a=s;break;case"source":Rt("error",e),a=s;break;case"img":case"image":case"link":Rt("error",e),Rt("load",e),a=s;break;case"details":Rt("toggle",e),a=s;break;case"input":UC(e,s),a=nx(e,s),Rt("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=an({},s,{value:void 0}),Rt("invalid",e);break;case"textarea":MC(e,s),a=ax(e,s),Rt("invalid",e);break;default:a=s}ox(r,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var A=c[i];i==="style"?oE(e,A):i==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&aE(e,A)):i==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&ud(e,A):typeof A=="number"&&ud(e,""+A):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ad.hasOwnProperty(i)?A!=null&&i==="onScroll"&&Rt("scroll",e):A!=null&&nb(e,i,A,o))}switch(r){case"input":Lh(e),PC(e,s,!1);break;case"textarea":Lh(e),QC(e);break;case"option":s.value!=null&&e.setAttribute("value",""+yo(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Dc(e,!!s.multiple,i,!1):s.defaultValue!=null&&Dc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=U0)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return tr(n),null;case 6:if(e&&n.stateNode!=null)E3(e,n,e.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(je(166));if(r=Zo(bd.current),Zo(Fa.current),Yh(n)){if(s=n.stateNode,r=n.memoizedProps,s[ka]=n,(i=s.nodeValue!==r)&&(e=is,e!==null))switch(e.tag){case 3:Xh(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xh(s.nodeValue,r,(e.mode&1)!==0)}i&&(n.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[ka]=n,n.stateNode=s}return tr(n),null;case 13:if(Lt(rn),s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Yt&&as!==null&&n.mode&1&&!(n.flags&128))VE(),eA(),n.flags|=98560,i=!1;else if(i=Yh(n),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(je(318));if(i=n.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(je(317));i[ka]=n}else eA(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;tr(n),i=!1}else Js!==null&&(Lx(Js),Js=null),i=!0;if(!i)return n.flags&65536?n:null}return n.flags&128?(n.lanes=r,n):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(n.child.flags|=8192,n.mode&1&&(e===null||rn.current&1?kn===0&&(kn=3):Db())),n.updateQueue!==null&&(n.flags|=4),tr(n),null);case 4:return nA(),Ux(e,n),e===null&&yd(n.stateNode.containerInfo),tr(n),null;case 10:return wb(n.type._context),tr(n),null;case 17:return $r(n.type)&&P0(),tr(n),null;case 19:if(Lt(rn),i=n.memoizedState,i===null)return tr(n),null;if(s=(n.flags&128)!==0,o=i.rendering,o===null)if(s)VA(i,!1);else{if(kn!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(o=L0(e),o!==null){for(n.flags|=128,VA(i,!1),s=o.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=r,r=n.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Dt(rn,rn.current&1|2),n.child}e=e.sibling}i.tail!==null&&gn()>sA&&(n.flags|=128,s=!0,VA(i,!1),n.lanes=4194304)}else{if(!s)if(e=L0(o),e!==null){if(n.flags|=128,s=!0,r=e.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),VA(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Yt)return tr(n),null}else 2*gn()-i.renderingStartTime>sA&&r!==1073741824&&(n.flags|=128,s=!0,VA(i,!1),n.lanes=4194304);i.isBackwards?(o.sibling=n.child,n.child=o):(r=i.last,r!==null?r.sibling=o:n.child=o,i.last=o)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=gn(),n.sibling=null,r=rn.current,Dt(rn,s?r&1|2:r&1),n):(tr(n),null);case 22:case 23:return Qb(),s=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(n.flags|=8192),s&&n.mode&1?ts&1073741824&&(tr(n),n.subtreeFlags&6&&(n.flags|=8192)):tr(n),null;case 24:return null;case 25:return null}throw Error(je(156,n.tag))}function PR(e,n){switch(pb(n),n.tag){case 1:return $r(n.type)&&P0(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return nA(),Lt(Rr),Lt(Ar),Sb(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Bb(n),null;case 13:if(Lt(rn),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(je(340));eA()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Lt(rn),null;case 4:return nA(),null;case 10:return wb(n.type._context),null;case 22:case 23:return Qb(),null;case 24:return null;default:return null}}var ef=!1,or=!1,MR=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Fc(e,n){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){un(e,n,s)}else r.current=null}function Px(e,n,r){try{r()}catch(s){un(e,n,s)}}var SB=!1;function QR(e,n){if(yx=T0,e=PE(),gb(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,c=-1,A=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var g;d!==r||a!==0&&d.nodeType!==3||(c=o+a),d!==i||s!==0&&d.nodeType!==3||(A=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===e)break t;if(f===r&&++u===a&&(c=o),f===i&&++h===s&&(A=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}r=c===-1||A===-1?null:{start:c,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(vx={focusedElem:e,selectionRange:r},T0=!1,Ke=n;Ke!==null;)if(n=Ke,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Ke=e;else for(;Ke!==null;){n=Ke;try{var m=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,v=m.memoizedState,p=n.stateNode,x=p.getSnapshotBeforeUpdate(n.elementType===n.type?y:Vs(n.type,y),v);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=n.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(w){un(n,n.return,w)}if(e=n.sibling,e!==null){e.return=n.return,Ke=e;break}Ke=n.return}return m=SB,SB=!1,m}function Wu(e,n,r){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Px(n,r,i)}a=a.next}while(a!==s)}}function wm(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==n)}}function Mx(e){var n=e.ref;if(n!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof n=="function"?n(e):n.current=e}}function T3(e){var n=e.alternate;n!==null&&(e.alternate=null,T3(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[ka],delete n[xd],delete n[bx],delete n[vR],delete n[xR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function F3(e){return e.tag===5||e.tag===3||e.tag===4}function kB(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||F3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qx(e,n,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(e,r)):(n=r,n.appendChild(e)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=U0));else if(s!==4&&(e=e.child,e!==null))for(Qx(e,n,r),e=e.sibling;e!==null;)Qx(e,n,r),e=e.sibling}function Dx(e,n,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Dx(e,n,r),e=e.sibling;e!==null;)Dx(e,n,r),e=e.sibling}var Vn=null,Xs=!1;function Qi(e,n,r){for(r=r.child;r!==null;)I3(e,n,r),r=r.sibling}function I3(e,n,r){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(hm,r)}catch{}switch(r.tag){case 5:or||Fc(r,n);case 6:var s=Vn,a=Xs;Vn=null,Qi(e,n,r),Vn=s,Xs=a,Vn!==null&&(Xs?(e=Vn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Vn.removeChild(r.stateNode));break;case 18:Vn!==null&&(Xs?(e=Vn,r=r.stateNode,e.nodeType===8?wy(e.parentNode,r):e.nodeType===1&&wy(e,r),gd(e)):wy(Vn,r.stateNode));break;case 4:s=Vn,a=Xs,Vn=r.stateNode.containerInfo,Xs=!0,Qi(e,n,r),Vn=s,Xs=a;break;case 0:case 11:case 14:case 15:if(!or&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Px(r,n,o),a=a.next}while(a!==s)}Qi(e,n,r);break;case 1:if(!or&&(Fc(r,n),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){un(r,n,c)}Qi(e,n,r);break;case 21:Qi(e,n,r);break;case 22:r.mode&1?(or=(s=or)||r.memoizedState!==null,Qi(e,n,r),or=s):Qi(e,n,r);break;default:Qi(e,n,r)}}function jB(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new MR),n.forEach(function(s){var a=GR.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function zs(e,n){var r=n.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=n,c=o;e:for(;c!==null;){switch(c.tag){case 5:Vn=c.stateNode,Xs=!1;break e;case 3:Vn=c.stateNode.containerInfo,Xs=!0;break e;case 4:Vn=c.stateNode.containerInfo,Xs=!0;break e}c=c.return}if(Vn===null)throw Error(je(160));I3(i,o,a),Vn=null,Xs=!1;var A=a.alternate;A!==null&&(A.return=null),a.return=null}catch(u){un(a,n,u)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)U3(n,e),n=n.sibling}function U3(e,n){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zs(n,e),xa(e),s&4){try{Wu(3,e,e.return),wm(3,e)}catch(y){un(e,e.return,y)}try{Wu(5,e,e.return)}catch(y){un(e,e.return,y)}}break;case 1:zs(n,e),xa(e),s&512&&r!==null&&Fc(r,r.return);break;case 5:if(zs(n,e),xa(e),s&512&&r!==null&&Fc(r,r.return),e.flags&32){var a=e.stateNode;try{ud(a,"")}catch(y){un(e,e.return,y)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,c=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&nE(a,i),lx(c,o);var u=lx(c,i);for(o=0;o<A.length;o+=2){var h=A[o],d=A[o+1];h==="style"?oE(a,d):h==="dangerouslySetInnerHTML"?aE(a,d):h==="children"?ud(a,d):nb(a,h,d,u)}switch(c){case"input":rx(a,i);break;case"textarea":rE(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Dc(a,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?Dc(a,!!i.multiple,i.defaultValue,!0):Dc(a,!!i.multiple,i.multiple?[]:"",!1))}a[xd]=i}catch(y){un(e,e.return,y)}}break;case 6:if(zs(n,e),xa(e),s&4){if(e.stateNode===null)throw Error(je(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){un(e,e.return,y)}}break;case 3:if(zs(n,e),xa(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{gd(n.containerInfo)}catch(y){un(e,e.return,y)}break;case 4:zs(n,e),xa(e);break;case 13:zs(n,e),xa(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Pb=gn())),s&4&&jB(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(or=(u=or)||h,zs(n,e),or=u):zs(n,e),xa(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(Ke=e,h=e.child;h!==null;){for(d=Ke=h;Ke!==null;){switch(f=Ke,g=f.child,f.tag){case 0:case 11:case 14:case 15:Wu(4,f,f.return);break;case 1:Fc(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,r=f.return;try{n=s,m.props=n.memoizedProps,m.state=n.memoizedState,m.componentWillUnmount()}catch(y){un(s,r,y)}}break;case 5:Fc(f,f.return);break;case 22:if(f.memoizedState!==null){EB(d);continue}}g!==null?(g.return=f,Ke=g):EB(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=d.stateNode,A=d.memoizedProps.style,o=A!=null&&A.hasOwnProperty("display")?A.display:null,c.style.display=iE("display",o))}catch(y){un(e,e.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){un(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zs(n,e),xa(e),s&4&&jB(e);break;case 21:break;default:zs(n,e),xa(e)}}function xa(e){var n=e.flags;if(n&2){try{e:{for(var r=e.return;r!==null;){if(F3(r)){var s=r;break e}r=r.return}throw Error(je(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(ud(a,""),s.flags&=-33);var i=kB(e);Dx(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,c=kB(e);Qx(e,c,o);break;default:throw Error(je(161))}}catch(A){un(e,e.return,A)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function DR(e,n,r){Ke=e,P3(e)}function P3(e,n,r){for(var s=(e.mode&1)!==0;Ke!==null;){var a=Ke,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||ef;if(!o){var c=a.alternate,A=c!==null&&c.memoizedState!==null||or;c=ef;var u=or;if(ef=o,(or=A)&&!u)for(Ke=a;Ke!==null;)o=Ke,A=o.child,o.tag===22&&o.memoizedState!==null?TB(a):A!==null?(A.return=o,Ke=A):TB(a);for(;i!==null;)Ke=i,P3(i),i=i.sibling;Ke=a,ef=c,or=u}NB(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ke=i):NB(e)}}function NB(e){for(;Ke!==null;){var n=Ke;if(n.flags&8772){var r=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:or||wm(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!or)if(r===null)s.componentDidMount();else{var a=n.elementType===n.type?r.memoizedProps:Vs(n.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;i!==null&&hB(n,i,s);break;case 3:var o=n.updateQueue;if(o!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}hB(n,o,r)}break;case 5:var c=n.stateNode;if(r===null&&n.flags&4){r=c;var A=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var u=n.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&gd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}or||n.flags&512&&Mx(n)}catch(f){un(n,n.return,f)}}if(n===e){Ke=null;break}if(r=n.sibling,r!==null){r.return=n.return,Ke=r;break}Ke=n.return}}function EB(e){for(;Ke!==null;){var n=Ke;if(n===e){Ke=null;break}var r=n.sibling;if(r!==null){r.return=n.return,Ke=r;break}Ke=n.return}}function TB(e){for(;Ke!==null;){var n=Ke;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{wm(4,n)}catch(A){un(n,r,A)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var a=n.return;try{s.componentDidMount()}catch(A){un(n,a,A)}}var i=n.return;try{Mx(n)}catch(A){un(n,i,A)}break;case 5:var o=n.return;try{Mx(n)}catch(A){un(n,o,A)}}}catch(A){un(n,n.return,A)}if(n===e){Ke=null;break}var c=n.sibling;if(c!==null){c.return=n.return,Ke=c;break}Ke=n.return}}var RR=Math.ceil,K0=Ni.ReactCurrentDispatcher,Ib=Ni.ReactCurrentOwner,Ts=Ni.ReactCurrentBatchConfig,xt=0,Qn=null,vn=null,Yn=0,ts=0,Ic=ko(0),kn=0,Sd=null,pl=0,bm=0,Ub=0,Vu=null,Pr=null,Pb=0,sA=1/0,ni=null,G0=!1,Rx=null,co=null,tf=!1,Zi=null,W0=0,qu=0,$x=null,a0=-1,i0=0;function br(){return xt&6?gn():a0!==-1?a0:a0=gn()}function Ao(e){return e.mode&1?xt&2&&Yn!==0?Yn&-Yn:bR.transition!==null?(i0===0&&(i0=vE()),i0):(e=Nt,e!==0||(e=window.event,e=e===void 0?16:SE(e.type)),e):1}function oa(e,n,r,s){if(50<qu)throw qu=0,$x=null,Error(je(185));eh(e,r,s),(!(xt&2)||e!==Qn)&&(e===Qn&&(!(xt&2)&&(bm|=r),kn===4&&qi(e,Yn)),Or(e,s),r===1&&xt===0&&!(n.mode&1)&&(sA=gn()+500,ym&&jo()))}function Or(e,n){var r=e.callbackNode;b7(e,n);var s=E0(e,e===Qn?Yn:0);if(s===0)r!==null&&$C(r),e.callbackNode=null,e.callbackPriority=0;else if(n=s&-s,e.callbackPriority!==n){if(r!=null&&$C(r),n===1)e.tag===0?wR(FB.bind(null,e)):KE(FB.bind(null,e)),pR(function(){!(xt&6)&&jo()}),r=null;else{switch(xE(s)){case 1:r=ob;break;case 4:r=pE;break;case 16:r=N0;break;case 536870912:r=yE;break;default:r=N0}r=H3(r,M3.bind(null,e))}e.callbackPriority=n,e.callbackNode=r}}function M3(e,n){if(a0=-1,i0=0,xt&6)throw Error(je(327));var r=e.callbackNode;if(Hc()&&e.callbackNode!==r)return null;var s=E0(e,e===Qn?Yn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||n)n=V0(e,s);else{n=s;var a=xt;xt|=2;var i=D3();(Qn!==e||Yn!==n)&&(ni=null,sA=gn()+500,al(e,n));do try{LR();break}catch(c){Q3(e,c)}while(1);xb(),K0.current=i,xt=a,vn!==null?n=0:(Qn=null,Yn=0,n=kn)}if(n!==0){if(n===2&&(a=hx(e),a!==0&&(s=a,n=Ox(e,a))),n===1)throw r=Sd,al(e,0),qi(e,s),Or(e,gn()),r;if(n===6)qi(e,s);else{if(a=e.current.alternate,!(s&30)&&!$R(a)&&(n=V0(e,s),n===2&&(i=hx(e),i!==0&&(s=i,n=Ox(e,i))),n===1))throw r=Sd,al(e,0),qi(e,s),Or(e,gn()),r;switch(e.finishedWork=a,e.finishedLanes=s,n){case 0:case 1:throw Error(je(345));case 2:Oo(e,Pr,ni);break;case 3:if(qi(e,s),(s&130023424)===s&&(n=Pb+500-gn(),10<n)){if(E0(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){br(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=wx(Oo.bind(null,e,Pr,ni),n);break}Oo(e,Pr,ni);break;case 4:if(qi(e,s),(s&4194240)===s)break;for(n=e.eventTimes,a=-1;0<s;){var o=31-ia(s);i=1<<o,o=n[o],o>a&&(a=o),s&=~i}if(s=a,s=gn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*RR(s/1960))-s,10<s){e.timeoutHandle=wx(Oo.bind(null,e,Pr,ni),s);break}Oo(e,Pr,ni);break;case 5:Oo(e,Pr,ni);break;default:throw Error(je(329))}}}return Or(e,gn()),e.callbackNode===r?M3.bind(null,e):null}function Ox(e,n){var r=Vu;return e.current.memoizedState.isDehydrated&&(al(e,n).flags|=256),e=V0(e,n),e!==2&&(n=Pr,Pr=r,n!==null&&Lx(n)),e}function Lx(e){Pr===null?Pr=e:Pr.push.apply(Pr,e)}function $R(e){for(var n=e;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!ca(i(),a))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function qi(e,n){for(n&=~Ub,n&=~bm,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var r=31-ia(n),s=1<<r;e[r]=-1,n&=~s}}function FB(e){if(xt&6)throw Error(je(327));Hc();var n=E0(e,0);if(!(n&1))return Or(e,gn()),null;var r=V0(e,n);if(e.tag!==0&&r===2){var s=hx(e);s!==0&&(n=s,r=Ox(e,s))}if(r===1)throw r=Sd,al(e,0),qi(e,n),Or(e,gn()),r;if(r===6)throw Error(je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Oo(e,Pr,ni),Or(e,gn()),null}function Mb(e,n){var r=xt;xt|=1;try{return e(n)}finally{xt=r,xt===0&&(sA=gn()+500,ym&&jo())}}function yl(e){Zi!==null&&Zi.tag===0&&!(xt&6)&&Hc();var n=xt;xt|=1;var r=Ts.transition,s=Nt;try{if(Ts.transition=null,Nt=1,e)return e()}finally{Nt=s,Ts.transition=r,xt=n,!(xt&6)&&jo()}}function Qb(){ts=Ic.current,Lt(Ic)}function al(e,n){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,mR(r)),vn!==null)for(r=vn.return;r!==null;){var s=r;switch(pb(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&P0();break;case 3:nA(),Lt(Rr),Lt(Ar),Sb();break;case 5:Bb(s);break;case 4:nA();break;case 13:Lt(rn);break;case 19:Lt(rn);break;case 10:wb(s.type._context);break;case 22:case 23:Qb()}r=r.return}if(Qn=e,vn=e=uo(e.current,null),Yn=ts=n,kn=0,Sd=null,Ub=bm=pl=0,Pr=Vu=null,Jo!==null){for(n=0;n<Jo.length;n++)if(r=Jo[n],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}Jo=null}return e}function Q3(e,n){do{var r=vn;try{if(xb(),n0.current=z0,H0){for(var s=sn.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}H0=!1}if(ml=0,In=Cn=sn=null,Gu=!1,_d=0,Ib.current=null,r===null||r.return===null){kn=1,Sd=n,vn=null;break}e:{var i=e,o=r.return,c=r,A=n;if(n=Yn,c.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var u=A,h=c,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=vB(o);if(g!==null){g.flags&=-257,xB(g,o,c,i,n),g.mode&1&&yB(i,u,n),n=g,A=u;var m=n.updateQueue;if(m===null){var y=new Set;y.add(A),n.updateQueue=y}else m.add(A);break e}else{if(!(n&1)){yB(i,u,n),Db();break e}A=Error(je(426))}}else if(Yt&&c.mode&1){var v=vB(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),xB(v,o,c,i,n),yb(rA(A,c));break e}}i=A=rA(A,c),kn!==4&&(kn=2),Vu===null?Vu=[i]:Vu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n;var p=x3(i,A,n);dB(i,p);break e;case 1:c=A;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(co===null||!co.has(b)))){i.flags|=65536,n&=-n,i.lanes|=n;var w=w3(i,c,n);dB(i,w);break e}}i=i.return}while(i!==null)}$3(r)}catch(_){n=_,vn===r&&r!==null&&(vn=r=r.return);continue}break}while(1)}function D3(){var e=K0.current;return K0.current=z0,e===null?z0:e}function Db(){(kn===0||kn===3||kn===2)&&(kn=4),Qn===null||!(pl&268435455)&&!(bm&268435455)||qi(Qn,Yn)}function V0(e,n){var r=xt;xt|=2;var s=D3();(Qn!==e||Yn!==n)&&(ni=null,al(e,n));do try{OR();break}catch(a){Q3(e,a)}while(1);if(xb(),xt=r,K0.current=s,vn!==null)throw Error(je(261));return Qn=null,Yn=0,kn}function OR(){for(;vn!==null;)R3(vn)}function LR(){for(;vn!==null&&!h7();)R3(vn)}function R3(e){var n=L3(e.alternate,e,ts);e.memoizedProps=e.pendingProps,n===null?$3(e):vn=n,Ib.current=null}function $3(e){var n=e;do{var r=n.alternate;if(e=n.return,n.flags&32768){if(r=PR(r,n),r!==null){r.flags&=32767,vn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{kn=6,vn=null;return}}else if(r=UR(r,n,ts),r!==null){vn=r;return}if(n=n.sibling,n!==null){vn=n;return}vn=n=e}while(n!==null);kn===0&&(kn=5)}function Oo(e,n,r){var s=Nt,a=Ts.transition;try{Ts.transition=null,Nt=1,HR(e,n,r,s)}finally{Ts.transition=a,Nt=s}return null}function HR(e,n,r,s){do Hc();while(Zi!==null);if(xt&6)throw Error(je(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(je(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(_7(e,i),e===Qn&&(vn=Qn=null,Yn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||tf||(tf=!0,H3(N0,function(){return Hc(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ts.transition,Ts.transition=null;var o=Nt;Nt=1;var c=xt;xt|=4,Ib.current=null,QR(e,r),U3(r,e),cR(vx),T0=!!yx,vx=yx=null,e.current=r,DR(r),f7(),xt=c,Nt=o,Ts.transition=i}else e.current=r;if(tf&&(tf=!1,Zi=e,W0=a),i=e.pendingLanes,i===0&&(co=null),p7(r.stateNode),Or(e,gn()),n!==null)for(s=e.onRecoverableError,r=0;r<n.length;r++)a=n[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(G0)throw G0=!1,e=Rx,Rx=null,e;return W0&1&&e.tag!==0&&Hc(),i=e.pendingLanes,i&1?e===$x?qu++:(qu=0,$x=e):qu=0,jo(),null}function Hc(){if(Zi!==null){var e=xE(W0),n=Ts.transition,r=Nt;try{if(Ts.transition=null,Nt=16>e?16:e,Zi===null)var s=!1;else{if(e=Zi,Zi=null,W0=0,xt&6)throw Error(je(331));var a=xt;for(xt|=4,Ke=e.current;Ke!==null;){var i=Ke,o=i.child;if(Ke.flags&16){var c=i.deletions;if(c!==null){for(var A=0;A<c.length;A++){var u=c[A];for(Ke=u;Ke!==null;){var h=Ke;switch(h.tag){case 0:case 11:case 15:Wu(8,h,i)}var d=h.child;if(d!==null)d.return=h,Ke=d;else for(;Ke!==null;){h=Ke;var f=h.sibling,g=h.return;if(T3(h),h===u){Ke=null;break}if(f!==null){f.return=g,Ke=f;break}Ke=g}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}Ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ke=o;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wu(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Ke=p;break e}Ke=i.return}}var x=e.current;for(Ke=x;Ke!==null;){o=Ke;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ke=b;else e:for(o=x;Ke!==null;){if(c=Ke,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:wm(9,c)}}catch(_){un(c,c.return,_)}if(c===o){Ke=null;break e}var w=c.sibling;if(w!==null){w.return=c.return,Ke=w;break e}Ke=c.return}}if(xt=a,jo(),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(hm,e)}catch{}s=!0}return s}finally{Nt=r,Ts.transition=n}}return!1}function IB(e,n,r){n=rA(r,n),n=x3(e,n,1),e=lo(e,n,1),n=br(),e!==null&&(eh(e,1,n),Or(e,n))}function un(e,n,r){if(e.tag===3)IB(e,e,r);else for(;n!==null;){if(n.tag===3){IB(n,e,r);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(co===null||!co.has(s))){e=rA(r,e),e=w3(n,e,1),n=lo(n,e,1),e=br(),n!==null&&(eh(n,1,e),Or(n,e));break}}n=n.return}}function zR(e,n,r){var s=e.pingCache;s!==null&&s.delete(n),n=br(),e.pingedLanes|=e.suspendedLanes&r,Qn===e&&(Yn&r)===r&&(kn===4||kn===3&&(Yn&130023424)===Yn&&500>gn()-Pb?al(e,0):Ub|=r),Or(e,n)}function O3(e,n){n===0&&(e.mode&1?(n=Kh,Kh<<=1,!(Kh&130023424)&&(Kh=4194304)):n=1);var r=br();e=xi(e,n),e!==null&&(eh(e,n,r),Or(e,r))}function KR(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),O3(e,r)}function GR(e,n){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(je(314))}s!==null&&s.delete(n),O3(e,r)}var L3;L3=function(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps||Rr.current)Mr=!0;else{if(!(e.lanes&r)&&!(n.flags&128))return Mr=!1,IR(e,n,r);Mr=!!(e.flags&131072)}else Mr=!1,Yt&&n.flags&1048576&&GE(n,D0,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;s0(e,n),e=n.pendingProps;var a=Zc(n,Ar.current);Lc(n,r),a=jb(null,n,s,e,a,r);var i=Nb();return n.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,$r(s)?(i=!0,M0(n)):i=!1,n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,_b(n),a.updater=xm,n.stateNode=a,a._reactInternals=n,jx(n,s,e,r),n=Tx(null,n,s,!0,i,r)):(n.tag=0,Yt&&i&&mb(n),pr(null,n,a,r),n=n.child),n;case 16:s=n.elementType;e:{switch(s0(e,n),e=n.pendingProps,a=s._init,s=a(s._payload),n.type=s,a=n.tag=VR(s),e=Vs(s,e),a){case 0:n=Ex(null,n,s,e,r);break e;case 1:n=_B(null,n,s,e,r);break e;case 11:n=wB(null,n,s,e,r);break e;case 14:n=bB(null,n,s,Vs(s.type,e),r);break e}throw Error(je(306,s,""))}return n;case 0:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Vs(s,a),Ex(e,n,s,a,r);case 1:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Vs(s,a),_B(e,n,s,a,r);case 3:e:{if(B3(n),e===null)throw Error(je(387));s=n.pendingProps,i=n.memoizedState,a=i.element,JE(e,n),O0(n,s,null,r);var o=n.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},n.updateQueue.baseState=i,n.memoizedState=i,n.flags&256){a=rA(Error(je(423)),n),n=CB(e,n,s,r,a);break e}else if(s!==a){a=rA(Error(je(424)),n),n=CB(e,n,s,r,a);break e}else for(as=oo(n.stateNode.containerInfo.firstChild),is=n,Yt=!0,Js=null,r=XE(n,null,s,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(eA(),s===a){n=wi(e,n,r);break e}pr(e,n,s,r)}n=n.child}return n;case 5:return ZE(n),e===null&&Bx(n),s=n.type,a=n.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,xx(s,a)?o=null:i!==null&&xx(s,i)&&(n.flags|=32),C3(e,n),pr(e,n,o,r),n.child;case 6:return e===null&&Bx(n),null;case 13:return S3(e,n,r);case 4:return Cb(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=tA(n,null,s,r):pr(e,n,s,r),n.child;case 11:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Vs(s,a),wB(e,n,s,a,r);case 7:return pr(e,n,n.pendingProps,r),n.child;case 8:return pr(e,n,n.pendingProps.children,r),n.child;case 12:return pr(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(s=n.type._context,a=n.pendingProps,i=n.memoizedProps,o=a.value,Dt(R0,s._currentValue),s._currentValue=o,i!==null)if(ca(i.value,o)){if(i.children===a.children&&!Rr.current){n=wi(e,n,r);break e}}else for(i=n.child,i!==null&&(i.return=n);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var A=c.firstContext;A!==null;){if(A.context===s){if(i.tag===1){A=gi(-1,r&-r),A.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?A.next=A:(A.next=h.next,h.next=A),u.pending=A}}i.lanes|=r,A=i.alternate,A!==null&&(A.lanes|=r),Sx(i.return,r,n),c.lanes|=r;break}A=A.next}}else if(i.tag===10)o=i.type===n.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(je(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Sx(o,r,n),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===n){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pr(e,n,a.children,r),n=n.child}return n;case 9:return a=n.type,s=n.pendingProps.children,Lc(n,r),a=Fs(a),s=s(a),n.flags|=1,pr(e,n,s,r),n.child;case 14:return s=n.type,a=Vs(s,n.pendingProps),a=Vs(s.type,a),bB(e,n,s,a,r);case 15:return b3(e,n,n.type,n.pendingProps,r);case 17:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Vs(s,a),s0(e,n),n.tag=1,$r(s)?(e=!0,M0(n)):e=!1,Lc(n,r),v3(n,s,a),jx(n,s,a,r),Tx(null,n,s,!0,e,r);case 19:return k3(e,n,r);case 22:return _3(e,n,r)}throw Error(je(156,n.tag))};function H3(e,n){return mE(e,n)}function WR(e,n,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(e,n,r,s){return new WR(e,n,r,s)}function Rb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function VR(e){if(typeof e=="function")return Rb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sb)return 11;if(e===ab)return 14}return 2}function uo(e,n){var r=e.alternate;return r===null?(r=Ss(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function o0(e,n,r,s,a,i){var o=2;if(s=e,typeof e=="function")Rb(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _c:return il(r.children,a,i,n);case rb:o=8,a|=8;break;case Jv:return e=Ss(12,r,n,a|2),e.elementType=Jv,e.lanes=i,e;case Zv:return e=Ss(13,r,n,a),e.elementType=Zv,e.lanes=i,e;case ex:return e=Ss(19,r,n,a),e.elementType=ex,e.lanes=i,e;case Z4:return _m(r,a,i,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y4:o=10;break e;case J4:o=9;break e;case sb:o=11;break e;case ab:o=14;break e;case zi:o=16,s=null;break e}throw Error(je(130,e==null?e:typeof e,""))}return n=Ss(o,r,n,a),n.elementType=e,n.type=s,n.lanes=i,n}function il(e,n,r,s){return e=Ss(7,e,s,n),e.lanes=r,e}function _m(e,n,r,s){return e=Ss(22,e,s,n),e.elementType=Z4,e.lanes=r,e.stateNode={isHidden:!1},e}function Ny(e,n,r){return e=Ss(6,e,null,n),e.lanes=r,e}function Ey(e,n,r){return n=Ss(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function qR(e,n,r,s,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ay(0),this.expirationTimes=Ay(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ay(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function $b(e,n,r,s,a,i,o,c,A){return e=new qR(e,n,r,c,A),n===1?(n=1,i===!0&&(n|=8)):n=0,i=Ss(3,null,null,n),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},_b(i),e}function XR(e,n,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bc,key:s==null?null:""+s,children:e,containerInfo:n,implementation:r}}function z3(e){if(!e)return vo;e=e._reactInternals;e:{if(Sl(e)!==e||e.tag!==1)throw Error(je(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if($r(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(je(171))}if(e.tag===1){var r=e.type;if($r(r))return zE(e,r,n)}return n}function K3(e,n,r,s,a,i,o,c,A){return e=$b(r,s,!0,e,a,i,o,c,A),e.context=z3(null),r=e.current,s=br(),a=Ao(r),i=gi(s,a),i.callback=n??null,lo(r,i,a),e.current.lanes=a,eh(e,a,s),Or(e,s),e}function Cm(e,n,r,s){var a=n.current,i=br(),o=Ao(a);return r=z3(r),n.context===null?n.context=r:n.pendingContext=r,n=gi(i,o),n.payload={element:e},s=s===void 0?null:s,s!==null&&(n.callback=s),e=lo(a,n,o),e!==null&&(oa(e,a,o,i),t0(e,a,o)),o}function q0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function UB(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function Ob(e,n){UB(e,n),(e=e.alternate)&&UB(e,n)}function YR(){return null}var G3=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lb(e){this._internalRoot=e}Bm.prototype.render=Lb.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(je(409));Cm(e,n,null,null)};Bm.prototype.unmount=Lb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;yl(function(){Cm(null,e,null,null)}),n[vi]=null}};function Bm(e){this._internalRoot=e}Bm.prototype.unstable_scheduleHydration=function(e){if(e){var n=_E();e={blockedOn:null,target:e,priority:n};for(var r=0;r<Vi.length&&n!==0&&n<Vi[r].priority;r++);Vi.splice(r,0,e),r===0&&BE(e)}};function Hb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function PB(){}function JR(e,n,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var u=q0(o);i.call(u)}}var o=K3(n,s,e,0,null,!1,!1,"",PB);return e._reactRootContainer=o,e[vi]=o.current,yd(e.nodeType===8?e.parentNode:e),yl(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var c=s;s=function(){var u=q0(A);c.call(u)}}var A=$b(e,0,!1,null,null,!1,!1,"",PB);return e._reactRootContainer=A,e[vi]=A.current,yd(e.nodeType===8?e.parentNode:e),yl(function(){Cm(n,A,r,s)}),A}function km(e,n,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var c=a;a=function(){var A=q0(o);c.call(A)}}Cm(n,o,e,a)}else o=JR(r,n,e,a,s);return q0(o)}wE=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var r=bu(n.pendingLanes);r!==0&&(lb(n,r|1),Or(n,gn()),!(xt&6)&&(sA=gn()+500,jo()))}break;case 13:yl(function(){var s=xi(e,1);if(s!==null){var a=br();oa(s,e,1,a)}}),Ob(e,1)}};cb=function(e){if(e.tag===13){var n=xi(e,134217728);if(n!==null){var r=br();oa(n,e,134217728,r)}Ob(e,134217728)}};bE=function(e){if(e.tag===13){var n=Ao(e),r=xi(e,n);if(r!==null){var s=br();oa(r,e,n,s)}Ob(e,n)}};_E=function(){return Nt};CE=function(e,n){var r=Nt;try{return Nt=e,n()}finally{Nt=r}};Ax=function(e,n,r){switch(n){case"input":if(rx(e,r),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var s=r[n];if(s!==e&&s.form===e.form){var a=pm(s);if(!a)throw Error(je(90));tE(s),rx(s,a)}}}break;case"textarea":rE(e,r);break;case"select":n=r.value,n!=null&&Dc(e,!!r.multiple,n,!1)}};AE=Mb;uE=yl;var ZR={usingClientEntryPoint:!1,Events:[nh,kc,pm,lE,cE,Mb]},qA={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e$={bundleType:qA.bundleType,version:qA.version,rendererPackageName:qA.rendererPackageName,rendererConfig:qA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fE(e),e===null?null:e.stateNode},findFiberByHostInstance:qA.findFiberByHostInstance||YR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{hm=nf.inject(e$),Ta=nf}catch{}}As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZR;As.createPortal=function(e,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hb(n))throw Error(je(200));return XR(e,n,null,r)};As.createRoot=function(e,n){if(!Hb(e))throw Error(je(299));var r=!1,s="",a=G3;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),n=$b(e,1,!1,null,null,r,!1,s,a),e[vi]=n.current,yd(e.nodeType===8?e.parentNode:e),new Lb(n)};As.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(je(188)):(e=Object.keys(e).join(","),Error(je(268,e)));return e=fE(n),e=e===null?null:e.stateNode,e};As.flushSync=function(e){return yl(e)};As.hydrate=function(e,n,r){if(!Sm(n))throw Error(je(200));return km(null,e,n,!0,r)};As.hydrateRoot=function(e,n,r){if(!Hb(e))throw Error(je(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=G3;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),n=K3(n,null,e,1,r??null,a,!1,i,o),e[vi]=n.current,yd(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,a]:n.mutableSourceEagerHydrationData.push(r,a);return new Bm(n)};As.render=function(e,n,r){if(!Sm(n))throw Error(je(200));return km(null,e,n,!1,r)};As.unmountComponentAtNode=function(e){if(!Sm(e))throw Error(je(40));return e._reactRootContainer?(yl(function(){km(null,null,e,!1,function(){e._reactRootContainer=null,e[vi]=null})}),!0):!1};As.unstable_batchedUpdates=Mb;As.unstable_renderSubtreeIntoContainer=function(e,n,r,s){if(!Sm(r))throw Error(je(200));if(e==null||e._reactInternals===void 0)throw Error(je(38));return km(e,n,r,!1,s)};As.version="18.3.1-next-f1338f8080-20240426";function W3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(W3)}catch(e){console.error(e)}}W3(),W4.exports=As;var t$=W4.exports,MB=t$;Xv.createRoot=MB.createRoot,Xv.hydrateRoot=MB.hydrateRoot;var ie=(e=>(e.Titans="titans",e.Atlanteans="atlanteans",e))(ie||{}),dt=(e=>(e.Quick="quick",e.Long="long",e))(dt||{}),nt=(e=>(e.Top="top",e.Bottom="bottom",e.Single="single",e))(nt||{}),De=(e=>(e.None="none",e.AllPick="allpick",e.Single="single",e.Random="random",e.PickAndBan="pickandban",e))(De||{});const Pn=[{id:0,name:"Arien",icon:"heroes/arien.png",complexity:1,roles:["Tactician","Disabler"],additionalRoles:["Durable","Pusher"],expansion:"Core",description:"Arien is a master duelist who boasts the some of the strongest attacks and disruption on the roster. He is relatively sturdy and presents some interesting positional puzzles.",attack:8,initiative:4,defence:5,defence_upgraded:6,movement:5,movement_upgraded:6},{id:1,name:"Brogan",icon:"heroes/brogan.png",complexity:1,roles:["Durable","Disabler"],additionalRoles:["Pusher","Farming"],expansion:"Core",description:"Brogan is a great starting tank, nigh-unkillable and great at applying pressure in an area. More mobile than you might expect, but quite predictable.",attack:7,initiative:1,defence:8,movement:2,movement_upgraded:4},{id:2,name:"Tigerclaw",icon:"heroes/tigerclaw.png",complexity:1,roles:["Melee","Disabler"],additionalRoles:["Farming"],expansion:"Core",description:"Tigerclaw is an evasive hero capable of dodging attacks, debilitating enemy heroes and stealing their gold.",attack:4,attack_upgraded:8,initiative:8,defence:1,defence_upgraded:4,movement:7,movement_upgraded:8},{id:3,name:"Wasp",icon:"heroes/wasp.png",complexity:1,roles:["Disabler","Tactician"],additionalRoles:["Sniper"],expansion:"Core",description:"Wasp is a crowd control specialist, with area control abilities.",attack:5,initiative:6,defence:4,defence_upgraded:5,movement:5},{id:4,name:"Sabina",icon:"heroes/sabina.png",complexity:1,roles:["Tactician","Pusher"],expansion:"Core",description:"Sabina is a pusher who works best surrounded by friendly minions, or in one-on-one duels.",attack:1,attack_upgraded:8,initiative:5,defence:3,movement:5,movement_upgraded:6},{id:5,name:"Xargatha",icon:"heroes/xargatha.png",complexity:1,roles:["Tactician","Pusher"],additionalRoles:["Disabler","Durable","Sniper"],expansion:"Core",description:"Xargartha is a powerful brawler and zoner, who performs best when up and close against enemy minions.",attack:5,attack_upgraded:8,initiative:3,defence:6,movement:6},{id:6,name:"Dodger",icon:"heroes/dodger.png",complexity:1,roles:["Damager","Sniper"],additionalRoles:["Pusher","Farming","Disabler"],expansion:"Core",description:"Dodger is damaging hero who becomes more powerful as her enemies become weaker.",attack:3,initiative:7,defence:2,defence_upgraded:5,movement:5},{id:7,name:"Rowenna",icon:"heroes/rowenna.png",complexity:2,roles:["Melee","Durable"],additionalRoles:["Healer","Farming","Pusher","Tactician"],expansion:"Arcane",description:"Rowenna is a front-line tank and battlefield support who excels at surviving in contested areas.",attack:8,initiative:4,defence:7,movement:3,movement_upgraded:5},{id:8,name:"Garrus",icon:"heroes/garrus.png",complexity:2,roles:["Disabler","Durable"],additionalRoles:["Tactician"],expansion:"Defiant",description:"Garrus dominates the battlefield as a melee brawler who thrives on intimidation and control.",attack:8,initiative:3,defence:7,movement:5,movement_upgraded:6},{id:9,name:"Bain",icon:"heroes/bain.png",complexity:2,roles:["Tactician","Sniper"],additionalRoles:["Healer","Farming","Durable"],expansion:"Defiant",description:"Bain is a ranged initiator who specializes in marking targets, forcing discards, and setting up kills.",attack:5,initiative:4,defence:4,defence_upgraded:6,movement:5,movement_upgraded:6},{id:10,name:"Whisper",icon:"heroes/whisper.png",complexity:2,roles:["Damager","Durable"],additionalRoles:["Tactician","Pusher"],expansion:"Devoted",description:"Whisper is an adaptive support fighter whose power scales with battlefield clearing, gaining strength as minion spawns empty.",attack:7,initiative:7,defence:4,movement:3,movement_upgraded:5},{id:11,name:"Misa",icon:"heroes/misa.png",complexity:2,roles:["Tactician","Durable"],additionalRoles:["Damager"],expansion:"Devoted",description:"Misa is an elite mobility assassin and disruptor who controls engagements through superior positioning and unpredictable movement.",attack:6,initiative:7,defence:5,movement:1,movement_upgraded:8},{id:12,name:"Ursafar",icon:"heroes/ursafar.png",complexity:2,roles:["Durable","Pusher"],additionalRoles:["Farming","Melee"],expansion:"Devoted",description:'Ursafar is a momentum-based melee brawler who transforms from adequate to overwhelming once his "enraged" state activates.',attack:6,initiative:5,defence:6,movement:1,movement_upgraded:5},{id:13,name:"Silverarrow",icon:"heroes/silverarrow.png",complexity:2,roles:["Sniper","Damager"],additionalRoles:["Disabler","Healer","Farming"],expansion:"Devoted",description:"Silverarrow is a long-range zone controller and initiator who dominates through superior positioning and keeping her distance.",attack:2,initiative:7,defence:1,movement:6,movement_upgraded:7},{id:14,name:"Min",icon:"heroes/min.png",complexity:2,roles:["Tokens","Disabler"],additionalRoles:["Damager","Melee"],expansion:"Renowned",description:"Min strikes with lightning speed as one of the game's fastest initiators, wielding ancient dragon-inspired martial arts",attack:4,attack_upgraded:8,initiative:8,defence:3,defence_upgraded:8,movement:6},{id:15,name:"Mrak",icon:"heroes/mrak.png",complexity:3,roles:["Melee","Tokens"],additionalRoles:["Durable","Disabler","Tactician"],expansion:"Arcane",description:"Mrak is a heavyweight disrupter, commanding powers of rock and stone. Slow and immobile, he is at his best when the action comes to him.",attack:8,initiative:1,defence:8,movement:2,movement_upgraded:4},{id:16,name:"Cutter",icon:"heroes/cutter.png",complexity:3,roles:["Tactician","Disabler"],additionalRoles:["Farming"],expansion:"Defiant",description:"Cutter dances across the battlefield, striking precisely when opportunity presents itself. Her grappling hook allows last-second positioning, while her fork-creating attacks force impossible decisions upon enemies.",attack:4,attack_upgraded:8,initiative:6,defence:4,movement:4,movement_upgraded:8},{id:17,name:"Trinkets",icon:"heroes/trinkets.png",complexity:3,roles:["Sniper","Damager"],additionalRoles:["Pusher"],expansion:"Defiant",description:"Trinkets is a light-weight, fast, highly-mobile, ranged killer who presents an enormous danger zone in the Venn Diagram between himself and his Turret.",attack:3,attack_upgraded:5,initiative:6,defence:2,defence_upgraded:4,movement:7,movement_upgraded:8},{id:18,name:"Tali",icon:"heroes/tali.png",complexity:3,roles:["Damager","Pusher"],additionalRoles:["Healer","Durable","Tokens"],expansion:"Devoted",description:"Tali commands the spirit world as a great support hero, manipulating the battlefield with ice tokens and healing totems.",attack:4,attack_upgraded:6,initiative:5,initiative_upgraded:8,defence:4,movement:5},{id:19,name:"Swift",icon:"heroes/swift.png",complexity:3,roles:["Sniper","Farming"],additionalRoles:["Tactician"],expansion:"Renowned",description:"Swift dominates from the shadows with the extremely long attack range, but presents a complex positional puzzle due to straight line restrictions.",attack:5,initiative:4,defence:2,movement:7},{id:20,name:"Wuk",icon:"heroes/wuk.png",complexity:3,roles:["Tokens","Pusher"],additionalRoles:["Durable","Sniper","Tactician","Healer"],expansion:"Renowned",description:"With Wuk at the table, nobody needs to be reminded about the thousand pound gorilla in the room. Everyone's watching to see where Wuk puts down his trees and defines his turf. He exerts great area control, but requires good planning.",attack:5,initiative:1,defence:8,movement:3,movement_upgraded:4},{id:21,name:"Hanu",icon:"heroes/hanu.png",complexity:3,roles:["Tactician","Sniper"],additionalRoles:["Pusher"],expansion:"Renowned",description:"Hanu the Trickster is a great support hero. His cards allow for shenanigans, bamboozling, knavery, and outright mischief.",attack:4,initiative:8,defence:1,movement:7,movement_upgraded:8},{id:22,name:"Brynn",icon:"heroes/brynn.png",complexity:3,roles:["Tactician","Damager"],additionalRoles:["Durable"],expansion:"Wayward",description:"Brynn is a tactical battlefield manipulator who creates and exploits positioning traps, gaining powerful bonuses when enemies are surrounded by three or more obstacles.",attack:4,attack_upgraded:8,initiative:7,defence:4,movement:5,movement_upgraded:6},{id:23,name:"Mortimer",icon:"heroes/mortimer.png",complexity:3,roles:["Melee","Tokens"],additionalRoles:["Farming","Durable","Pusher"],expansion:"Wayward",description:"Mortimer is a battlefield controller who compensates for his limited mobility by commanding persistent zombie tokens that remain on the board between rounds.",attack:8,initiative:2,defence:7,movement:4},{id:24,name:"Widget and Pyro",icon:"heroes/widget.png",complexity:3,roles:["Melee","Tokens"],additionalRoles:["Damager"],expansion:"Wayward",description:"Widget is a kobold tactician who operates as a dual-unit fighter alongside her emotional support dragon, Pyro, allowing her to control two points on the battlefield simultaneously.",attack:5,initiative:4,defence:4,movement:5,movement_upgraded:6},{id:25,name:"Snorri",icon:"heroes/snorri.png",complexity:4,roles:["Sniper","Farming"],additionalRoles:["Durable","Damager","Pusher","Healer"],expansion:"Arcane",description:"Snorri is a traditional dwarf who wields the power of four distinct runes to transform how each of his cards functions.",attack:5,attack_upgraded:6,initiative:2,defence:5,defence_upgraded:6,movement:4,movement_upgraded:5},{id:26,name:"Razzle",icon:"heroes/razzle.png",complexity:4,roles:["Tactician","Melee"],expansion:"Arcane",description:"Razzle is a fractured fey who multiplies across the battlefield, controlling up to four separate copies of herself simultaneously.",attack:3,initiative:8,defence:1,defence_upgraded:4,movement:5,movement_upgraded:6},{id:27,name:"Gydion",icon:"heroes/gydion.png",complexity:4,roles:["Sniper","Tactician"],additionalRoles:["Farming","Damager","Pusher","Tokens"],expansion:"Arcane",description:"Gydion is an absent-minded archwizard who manages two separate handshis action cards and a unique spellbook deck. He prepares spells that are consumed upon casting, requiring careful resource management to maximize his arcane potential.",attack:5,attack_upgraded:6,initiative:3,defence:3,defence_upgraded:5,movement:1,movement_upgraded:4},{id:28,name:"Nebkher",icon:"heroes/nebkher.png",complexity:4,roles:["Disabler","Tokens"],additionalRoles:["Sniper"],expansion:"Defiant",description:"NebKher is a space-bending undead mastermind who manipulates both the battlefield and enemy minds with equal malevolence. His ability to copy enemy actions, create illusion tokens for strategic teleportation, and control minions transforms him into a terrifying disruptor.",attack:2,attack_upgraded:3,initiative:1,defence:5,defence_upgraded:6,movement:2,movement_upgraded:5},{id:29,name:"Ignatia",icon:"heroes/ignatia.png",complexity:4,roles:["Sniper","Damager"],additionalRoles:["Tokens","Tactician","Pusher"],expansion:"Renowned",description:"Ignatia is a dual-natured elementalist whose abilities shift dramatically based on which team controls the tiebreaker coin.",attack:5,initiative:2,defence:6,movement:4,movement_upgraded:5},{id:30,name:"Takahide",icon:"heroes/takahide.png",complexity:4,roles:["Durable","Sniper"],additionalRoles:["Tactician","Damager","Farming"],expansion:"Wayward",description:"Takahide is a masterful battlefield commander who cycles between three distinct combat styles.",attack:5,attack_upgraded:7,initiative:3,initiative_upgraded:5,defence:4,defence_upgraded:7,movement:1,movement_upgraded:4},{id:31,name:"Emmitt",icon:"heroes/emmitt.png",complexity:4,roles:["Melee","Tactician"],additionalRoles:["Durable","Disabler","Tokens"],expansion:"Wayward",description:"Emmitt is a chronological disruptor who bends the very rules of initiative, causing heroes with lower values to act before those with higher in a complete reversal of time's normal flow.",attack:5,attack_upgraded:8,initiative:1,defence:6,movement:2,movement_upgraded:4}],aA=()=>["Core","Devoted","Defiant","Wayward","Renowned","Arcane"],zb=e=>Pn.filter(n=>e.includes(n.expansion)),QB=Object.freeze(Object.defineProperty({__proto__:null,filterHeroesByExpansions:zb,getAllExpansions:aA,heroes:Pn},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r$=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,s)=>s?s.toUpperCase():r.toLowerCase()),DB=e=>{const n=r$(e);return n.charAt(0).toUpperCase()+n.slice(1)},V3=(...e)=>e.filter((n,r,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===r).join(" ").trim(),s$=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var a$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=S.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...c},A)=>S.createElement("svg",{ref:A,...a$,width:n,height:n,stroke:e,strokeWidth:s?Number(r)*24/Number(n):r,className:V3("lucide",a),...!i&&!s$(c)&&{"aria-hidden":"true"},...c},[...o.map(([u,h])=>S.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=(e,n)=>{const r=S.forwardRef(({className:s,...a},i)=>S.createElement(i$,{ref:i,iconNode:n,className:V3(`lucide-${n$(DB(e))}`,`lucide-${e}`,s),...a}));return r.displayName=DB(e),r};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],X0=Ee("arrow-down",o$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],q3=Ee("arrow-left",l$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],A$=Ee("arrow-right",c$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Y0=Ee("arrow-up",u$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],kd=Ee("award",d$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],f$=Ee("bell",h$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],m$=Ee("book",g$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],fc=Ee("bot",p$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ks=Ee("calendar",y$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],x$=Ee("camera",v$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],b$=Ee("chart-no-axes-column-increasing",w$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],lr=Ee("check",_$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Dn=Ee("chevron-down",C$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],jn=Ee("chevron-left",B$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jd=Ee("chevron-right",S$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],_r=Ee("chevron-up",k$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_s=Ee("circle-alert",j$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Lo=Ee("circle-check-big",N$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],iA=Ee("circle-help",E$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],wa=Ee("circle-minus",T$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Di=Ee("circle-plus",F$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],U$=Ee("circle-x",I$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]],Hx=Ee("clock-3",P$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Lr=Ee("clock",M$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],D$=Ee("cloud",Q$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],ea=Ee("coins",R$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],O$=Ee("copy",$$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Kb=Ee("crown",L$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],l0=Ee("database",H$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],J0=Ee("download",z$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],G$=Ee("eraser",K$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Xu=Ee("eye-off",W$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ol=Ee("eye",V$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],X$=Ee("file-text",q$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],J$=Ee("file",Y$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Gb=Ee("flag",Z$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],t8=Ee("flame",e8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],os=Ee("funnel",n8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],oA=Ee("globe",r8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14",key:"1j4xps"}],["path",{d:"m7 18 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"uospg8"}],["path",{d:"m2 13 6 6",key:"16e5sb"}]],X3=Ee("hand-helping",s8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Wb=Ee("heart",a8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],Z0=Ee("hexagon",i8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],l8=Ee("history",o8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Y3=Ee("house",c8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],eg=Ee("infinity",A8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],qt=Ee("info",u8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],h8=Ee("key-round",d8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Bt=Ee("loader-circle",f8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],m8=Ee("loader",g8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],y8=Ee("lock",p8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],x8=Ee("log-out",v8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],RB=Ee("mail",w8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],$B=Ee("medal",b8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"M5 12h14",key:"1ays0h"}]],ta=Ee("minus",_8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],lA=Ee("network",C8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],S8=Ee("pencil",B8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k8=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],jm=Ee("play",k8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ns=Ee("plus",j8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],xo=Ee("refresh-cw",N8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],zc=Ee("rotate-ccw",E8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Nm=Ee("save",T8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],kl=Ee("search",F8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],U8=Ee("send",I8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P8=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],M8=Ee("settings",P8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],zx=Ee("share-2",Q8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Mt=Ee("shield",D8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],Vb=Ee("shuffle",R8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],na=Ee("skull",$8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]],Kx=Ee("sliders-vertical",O8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],tg=Ee("sparkles",L8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],z8=Ee("square-check-big",H8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],G8=Ee("square-pen",K8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],vl=Ee("star",W8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],J3=Ee("sword",V8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],yr=Ee("swords",q8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ng=Ee("target",X8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ho=Ee("trash-2",Y8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J8=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Hr=Ee("trending-up",J8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ai=Ee("triangle-alert",Z8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],SA=Ee("trophy",eO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],rg=Ee("upload",tO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],rO=Ee("user-check",nO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],aO=Ee("user-minus",sO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Z3=Ee("user-plus",iO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],qb=Ee("user-x",oO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wo=Ee("user",lO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],St=Ee("users",cO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],uO=Ee("volume-2",AO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],hO=Ee("volume-x",dO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Jt=Ee("x",fO);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],mO=Ee("zap",gO);function Xb(){const[e,n]=S.useState({isMobile:!1,isTablet:!1,isDesktop:!0});return S.useEffect(()=>{const r=()=>{const s=window.innerWidth;n({isMobile:s<=768,isTablet:s>768&&s<=1024,isDesktop:s>1024})};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}const At=({text:e,children:n,position:r="top",className:s="",maxWidth:a="max-w-xs",disableMobileTooltip:i=!1})=>{const{isMobile:o}=Xb(),[c,A]=S.useState(!1),[u,h]=S.useState(r),d=S.useRef(null),f=S.useRef(null),g=S.useRef(null),m=S.useCallback(()=>{if(!c||!f.current||!g.current)return;const w=f.current.getBoundingClientRect(),_=g.current.getBoundingClientRect(),B=window.innerWidth,k=window.innerHeight;let N=r;(r==="left"&&_.left<w.width+10||r==="right"&&_.right+w.width+10>B)&&(N=r==="left"?"right":"left"),(r==="top"&&_.top<w.height+10||r==="bottom"&&_.bottom+w.height+10>k)&&(N=r==="top"?"bottom":"top"),h(N)},[c,r]);S.useEffect(()=>{c&&setTimeout(m,0)},[c,m]);const y=S.useCallback(w=>{i||(w.stopPropagation(),A(!c))},[c,i]),v=S.useCallback(()=>{o||(d.current=setTimeout(()=>{A(!0)},300))},[o]),p=S.useCallback(()=>{o||(d.current&&clearTimeout(d.current),A(!1))},[o]);S.useEffect(()=>{if(!o||!c)return;const w=_=>{g.current&&!g.current.contains(_.target)&&A(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[o,c]);const x={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"},b={top:"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-r-4 border-l-4 border-transparent border-t-gray-900",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-4 border-r-4 border-l-4 border-transparent border-b-gray-900",left:"left-full top-1/2 transform -translate-y-1/2 border-l-4 border-t-4 border-b-4 border-transparent border-l-gray-900",right:"right-full top-1/2 transform -translate-y-1/2 border-r-4 border-t-4 border-b-4 border-transparent border-r-gray-900"};return l.jsxs("div",{ref:g,className:`relative inline-block ${s}`,onMouseEnter:v,onMouseLeave:p,onClick:o&&!i?y:void 0,children:[n,c&&l.jsxs("div",{ref:f,className:`absolute z-50 px-3 py-2 text-sm bg-gray-900 text-white rounded shadow-lg w-auto min-w-[160px] ${x[u]} ${a}`,onClick:w=>o&&!i&&w.stopPropagation(),children:[e,l.jsx("div",{className:`absolute w-0 h-0 ${b[u]}`})]})]})};var Sa={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var n=function(){this.init()};n.prototype={init:function(){var d=this||r;return d._counter=1e3,d._html5AudioPool=[],d.html5PoolSize=10,d._codecs={},d._howls=[],d._muted=!1,d._volume=1,d._canPlayEvent="canplaythrough",d._navigator=typeof window<"u"&&window.navigator?window.navigator:null,d.masterGain=null,d.noAudio=!1,d.usingWebAudio=!0,d.autoSuspend=!0,d.ctx=null,d.autoUnlock=!0,d._setup(),d},volume:function(d){var f=this||r;if(d=parseFloat(d),f.ctx||h(),typeof d<"u"&&d>=0&&d<=1){if(f._volume=d,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(d,r.ctx.currentTime);for(var g=0;g<f._howls.length;g++)if(!f._howls[g]._webAudio)for(var m=f._howls[g]._getSoundIds(),y=0;y<m.length;y++){var v=f._howls[g]._soundById(m[y]);v&&v._node&&(v._node.volume=v._volume*d)}return f}return f._volume},mute:function(d){var f=this||r;f.ctx||h(),f._muted=d,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(d?0:f._volume,r.ctx.currentTime);for(var g=0;g<f._howls.length;g++)if(!f._howls[g]._webAudio)for(var m=f._howls[g]._getSoundIds(),y=0;y<m.length;y++){var v=f._howls[g]._soundById(m[y]);v&&v._node&&(v._node.muted=d?!0:v._muted)}return f},stop:function(){for(var d=this||r,f=0;f<d._howls.length;f++)d._howls[f].stop();return d},unload:function(){for(var d=this||r,f=d._howls.length-1;f>=0;f--)d._howls[f].unload();return d.usingWebAudio&&d.ctx&&typeof d.ctx.close<"u"&&(d.ctx.close(),d.ctx=null,h()),d},codecs:function(d){return(this||r)._codecs[d.replace(/^x-/,"")]},_setup:function(){var d=this||r;if(d.state=d.ctx&&d.ctx.state||"suspended",d._autoSuspend(),!d.usingWebAudio)if(typeof Audio<"u")try{var f=new Audio;typeof f.oncanplaythrough>"u"&&(d._canPlayEvent="canplay")}catch{d.noAudio=!0}else d.noAudio=!0;try{var f=new Audio;f.muted&&(d.noAudio=!0)}catch{}return d.noAudio||d._setupCodecs(),d},_setupCodecs:function(){var d=this||r,f=null;try{f=typeof Audio<"u"?new Audio:null}catch{return d}if(!f||typeof f.canPlayType!="function")return d;var g=f.canPlayType("audio/mpeg;").replace(/^no$/,""),m=d._navigator?d._navigator.userAgent:"",y=m.match(/OPR\/(\d+)/g),v=y&&parseInt(y[0].split("/")[1],10)<33,p=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,x=m.match(/Version\/(.*?) /),b=p&&x&&parseInt(x[1],10)<15;return d._codecs={mp3:!!(!v&&(g||f.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!g,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(f.canPlayType('audio/wav; codecs="1"')||f.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(f.canPlayType("audio/x-m4b;")||f.canPlayType("audio/m4b;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(f.canPlayType("audio/x-flac;")||f.canPlayType("audio/flac;")).replace(/^no$/,"")},d},_unlockAudio:function(){var d=this||r;if(!(d._audioUnlocked||!d.ctx)){d._audioUnlocked=!1,d.autoUnlock=!1,!d._mobileUnloaded&&d.ctx.sampleRate!==44100&&(d._mobileUnloaded=!0,d.unload()),d._scratchBuffer=d.ctx.createBuffer(1,1,22050);var f=function(g){for(;d._html5AudioPool.length<d.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,d._releaseHtml5Audio(m)}catch{d.noAudio=!0;break}for(var y=0;y<d._howls.length;y++)if(!d._howls[y]._webAudio)for(var v=d._howls[y]._getSoundIds(),p=0;p<v.length;p++){var x=d._howls[y]._soundById(v[p]);x&&x._node&&!x._node._unlocked&&(x._node._unlocked=!0,x._node.load())}d._autoResume();var b=d.ctx.createBufferSource();b.buffer=d._scratchBuffer,b.connect(d.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof d.ctx.resume=="function"&&d.ctx.resume(),b.onended=function(){b.disconnect(0),d._audioUnlocked=!0,document.removeEventListener("touchstart",f,!0),document.removeEventListener("touchend",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("keydown",f,!0);for(var w=0;w<d._howls.length;w++)d._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("click",f,!0),document.addEventListener("keydown",f,!0),d}},_obtainHtml5Audio:function(){var d=this||r;if(d._html5AudioPool.length)return d._html5AudioPool.pop();var f=new Audio().play();return f&&typeof Promise<"u"&&(f instanceof Promise||typeof f.then=="function")&&f.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(d){var f=this||r;return d._unlocked&&f._html5AudioPool.push(d),f},_autoSuspend:function(){var d=this;if(!(!d.autoSuspend||!d.ctx||typeof d.ctx.suspend>"u"||!r.usingWebAudio)){for(var f=0;f<d._howls.length;f++)if(d._howls[f]._webAudio){for(var g=0;g<d._howls[f]._sounds.length;g++)if(!d._howls[f]._sounds[g]._paused)return d}return d._suspendTimer&&clearTimeout(d._suspendTimer),d._suspendTimer=setTimeout(function(){if(d.autoSuspend){d._suspendTimer=null,d.state="suspending";var m=function(){d.state="suspended",d._resumeAfterSuspend&&(delete d._resumeAfterSuspend,d._autoResume())};d.ctx.suspend().then(m,m)}},3e4),d}},_autoResume:function(){var d=this;if(!(!d.ctx||typeof d.ctx.resume>"u"||!r.usingWebAudio))return d.state==="running"&&d.ctx.state!=="interrupted"&&d._suspendTimer?(clearTimeout(d._suspendTimer),d._suspendTimer=null):d.state==="suspended"||d.state==="running"&&d.ctx.state==="interrupted"?(d.ctx.resume().then(function(){d.state="running";for(var f=0;f<d._howls.length;f++)d._howls[f]._emit("resume")}),d._suspendTimer&&(clearTimeout(d._suspendTimer),d._suspendTimer=null)):d.state==="suspending"&&(d._resumeAfterSuspend=!0),d}};var r=new n,s=function(d){var f=this;if(!d.src||d.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}f.init(d)};s.prototype={init:function(d){var f=this;return r.ctx||h(),f._autoplay=d.autoplay||!1,f._format=typeof d.format!="string"?d.format:[d.format],f._html5=d.html5||!1,f._muted=d.mute||!1,f._loop=d.loop||!1,f._pool=d.pool||5,f._preload=typeof d.preload=="boolean"||d.preload==="metadata"?d.preload:!0,f._rate=d.rate||1,f._sprite=d.sprite||{},f._src=typeof d.src!="string"?d.src:[d.src],f._volume=d.volume!==void 0?d.volume:1,f._xhr={method:d.xhr&&d.xhr.method?d.xhr.method:"GET",headers:d.xhr&&d.xhr.headers?d.xhr.headers:null,withCredentials:d.xhr&&d.xhr.withCredentials?d.xhr.withCredentials:!1},f._duration=0,f._state="unloaded",f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=d.onend?[{fn:d.onend}]:[],f._onfade=d.onfade?[{fn:d.onfade}]:[],f._onload=d.onload?[{fn:d.onload}]:[],f._onloaderror=d.onloaderror?[{fn:d.onloaderror}]:[],f._onplayerror=d.onplayerror?[{fn:d.onplayerror}]:[],f._onpause=d.onpause?[{fn:d.onpause}]:[],f._onplay=d.onplay?[{fn:d.onplay}]:[],f._onstop=d.onstop?[{fn:d.onstop}]:[],f._onmute=d.onmute?[{fn:d.onmute}]:[],f._onvolume=d.onvolume?[{fn:d.onvolume}]:[],f._onrate=d.onrate?[{fn:d.onrate}]:[],f._onseek=d.onseek?[{fn:d.onseek}]:[],f._onunlock=d.onunlock?[{fn:d.onunlock}]:[],f._onresume=[],f._webAudio=r.usingWebAudio&&!f._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(f),f._autoplay&&f._queue.push({event:"play",action:function(){f.play()}}),f._preload&&f._preload!=="none"&&f.load(),f},load:function(){var d=this,f=null;if(r.noAudio){d._emit("loaderror",null,"No audio support.");return}typeof d._src=="string"&&(d._src=[d._src]);for(var g=0;g<d._src.length;g++){var m,y;if(d._format&&d._format[g])m=d._format[g];else{if(y=d._src[g],typeof y!="string"){d._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(y),m||(m=/\.([^.]+)$/.exec(y.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&r.codecs(m)){f=d._src[g];break}}if(!f){d._emit("loaderror",null,"No codec support for selected audio sources.");return}return d._src=f,d._state="loading",window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(d._html5=!0,d._webAudio=!1),new a(d),d._webAudio&&o(d),d},play:function(d,f){var g=this,m=null;if(typeof d=="number")m=d,d=null;else{if(typeof d=="string"&&g._state==="loaded"&&!g._sprite[d])return null;if(typeof d>"u"&&(d="__default",!g._playLock)){for(var y=0,v=0;v<g._sounds.length;v++)g._sounds[v]._paused&&!g._sounds[v]._ended&&(y++,m=g._sounds[v]._id);y===1?d=null:m=null}}var p=m?g._soundById(m):g._inactiveSound();if(!p)return null;if(m&&!d&&(d=p._sprite||"__default"),g._state!=="loaded"){p._sprite=d,p._ended=!1;var x=p._id;return g._queue.push({event:"play",action:function(){g.play(x)}}),x}if(m&&!p._paused)return f||g._loadQueue("play"),p._id;g._webAudio&&r._autoResume();var b=Math.max(0,p._seek>0?p._seek:g._sprite[d][0]/1e3),w=Math.max(0,(g._sprite[d][0]+g._sprite[d][1])/1e3-b),_=w*1e3/Math.abs(p._rate),B=g._sprite[d][0]/1e3,k=(g._sprite[d][0]+g._sprite[d][1])/1e3;p._sprite=d,p._ended=!1;var N=function(){p._paused=!1,p._seek=b,p._start=B,p._stop=k,p._loop=!!(p._loop||g._sprite[d][2])};if(b>=k){g._ended(p);return}var C=p._node;if(g._webAudio){var j=function(){g._playLock=!1,N(),g._refreshBuffer(p);var T=p._muted||g._muted?0:p._volume;C.gain.setValueAtTime(T,r.ctx.currentTime),p._playStart=r.ctx.currentTime,typeof C.bufferSource.start>"u"?p._loop?C.bufferSource.noteGrainOn(0,b,86400):C.bufferSource.noteGrainOn(0,b,w):p._loop?C.bufferSource.start(0,b,86400):C.bufferSource.start(0,b,w),_!==1/0&&(g._endTimers[p._id]=setTimeout(g._ended.bind(g,p),_)),f||setTimeout(function(){g._emit("play",p._id),g._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?j():(g._playLock=!0,g.once("resume",j),g._clearTimer(p._id))}else{var E=function(){C.currentTime=b,C.muted=p._muted||g._muted||r._muted||C.muted,C.volume=p._volume*r.volume(),C.playbackRate=p._rate;try{var T=C.play();if(T&&typeof Promise<"u"&&(T instanceof Promise||typeof T.then=="function")?(g._playLock=!0,N(),T.then(function(){g._playLock=!1,C._unlocked=!0,f?g._loadQueue():g._emit("play",p._id)}).catch(function(){g._playLock=!1,g._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):f||(g._playLock=!1,N(),g._emit("play",p._id)),C.playbackRate=p._rate,C.paused){g._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}d!=="__default"||p._loop?g._endTimers[p._id]=setTimeout(g._ended.bind(g,p),_):(g._endTimers[p._id]=function(){g._ended(p),C.removeEventListener("ended",g._endTimers[p._id],!1)},C.addEventListener("ended",g._endTimers[p._id],!1))}catch(L){g._emit("playerror",p._id,L)}};C.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(C.src=g._src,C.load());var F=window&&window.ejecta||!C.readyState&&r._navigator.isCocoonJS;if(C.readyState>=3||F)E();else{g._playLock=!0,g._state="loading";var I=function(){g._state="loaded",E(),C.removeEventListener(r._canPlayEvent,I,!1)};C.addEventListener(r._canPlayEvent,I,!1),g._clearTimer(p._id)}}return p._id},pause:function(d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"pause",action:function(){f.pause(d)}}),f;for(var g=f._getSoundIds(d),m=0;m<g.length;m++){f._clearTimer(g[m]);var y=f._soundById(g[m]);if(y&&!y._paused&&(y._seek=f.seek(g[m]),y._rateSeek=0,y._paused=!0,f._stopFade(g[m]),y._node))if(f._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),f._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||f._emit("pause",y?y._id:null)}return f},stop:function(d,f){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"stop",action:function(){g.stop(d)}}),g;for(var m=g._getSoundIds(d),y=0;y<m.length;y++){g._clearTimer(m[y]);var v=g._soundById(m[y]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,g._stopFade(m[y]),v._node&&(g._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),g._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&g._clearSound(v._node))),f||g._emit("stop",v._id))}return g},mute:function(d,f){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"mute",action:function(){g.mute(d,f)}}),g;if(typeof f>"u")if(typeof d=="boolean")g._muted=d;else return g._muted;for(var m=g._getSoundIds(f),y=0;y<m.length;y++){var v=g._soundById(m[y]);v&&(v._muted=d,v._interval&&g._stopFade(v._id),g._webAudio&&v._node?v._node.gain.setValueAtTime(d?0:v._volume,r.ctx.currentTime):v._node&&(v._node.muted=r._muted?!0:d),g._emit("mute",v._id))}return g},volume:function(){var d=this,f=arguments,g,m;if(f.length===0)return d._volume;if(f.length===1||f.length===2&&typeof f[1]>"u"){var y=d._getSoundIds(),v=y.indexOf(f[0]);v>=0?m=parseInt(f[0],10):g=parseFloat(f[0])}else f.length>=2&&(g=parseFloat(f[0]),m=parseInt(f[1],10));var p;if(typeof g<"u"&&g>=0&&g<=1){if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"volume",action:function(){d.volume.apply(d,f)}}),d;typeof m>"u"&&(d._volume=g),m=d._getSoundIds(m);for(var x=0;x<m.length;x++)p=d._soundById(m[x]),p&&(p._volume=g,f[2]||d._stopFade(m[x]),d._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(g,r.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=g*r.volume()),d._emit("volume",p._id))}else return p=m?d._soundById(m):d._sounds[0],p?p._volume:0;return d},fade:function(d,f,g,m){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(d,f,g,m)}}),y;d=Math.min(Math.max(0,parseFloat(d)),1),f=Math.min(Math.max(0,parseFloat(f)),1),g=parseFloat(g),y.volume(d,m);for(var v=y._getSoundIds(m),p=0;p<v.length;p++){var x=y._soundById(v[p]);if(x){if(m||y._stopFade(v[p]),y._webAudio&&!x._muted){var b=r.ctx.currentTime,w=b+g/1e3;x._volume=d,x._node.gain.setValueAtTime(d,b),x._node.gain.linearRampToValueAtTime(f,w)}y._startFadeInterval(x,d,f,g,v[p],typeof m>"u")}}return y},_startFadeInterval:function(d,f,g,m,y,v){var p=this,x=f,b=g-f,w=Math.abs(b/.01),_=Math.max(4,w>0?m/w:m),B=Date.now();d._fadeTo=g,d._interval=setInterval(function(){var k=(Date.now()-B)/m;B=Date.now(),x+=b*k,x=Math.round(x*100)/100,b<0?x=Math.max(g,x):x=Math.min(g,x),p._webAudio?d._volume=x:p.volume(x,d._id,!0),v&&(p._volume=x),(g<f&&x<=g||g>f&&x>=g)&&(clearInterval(d._interval),d._interval=null,d._fadeTo=null,p.volume(g,d._id),p._emit("fade",d._id))},_)},_stopFade:function(d){var f=this,g=f._soundById(d);return g&&g._interval&&(f._webAudio&&g._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(g._interval),g._interval=null,f.volume(g._fadeTo,d),g._fadeTo=null,f._emit("fade",d)),f},loop:function(){var d=this,f=arguments,g,m,y;if(f.length===0)return d._loop;if(f.length===1)if(typeof f[0]=="boolean")g=f[0],d._loop=g;else return y=d._soundById(parseInt(f[0],10)),y?y._loop:!1;else f.length===2&&(g=f[0],m=parseInt(f[1],10));for(var v=d._getSoundIds(m),p=0;p<v.length;p++)y=d._soundById(v[p]),y&&(y._loop=g,d._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=g,g&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,d.playing(v[p])&&(d.pause(v[p],!0),d.play(v[p],!0)))));return d},rate:function(){var d=this,f=arguments,g,m;if(f.length===0)m=d._sounds[0]._id;else if(f.length===1){var y=d._getSoundIds(),v=y.indexOf(f[0]);v>=0?m=parseInt(f[0],10):g=parseFloat(f[0])}else f.length===2&&(g=parseFloat(f[0]),m=parseInt(f[1],10));var p;if(typeof g=="number"){if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"rate",action:function(){d.rate.apply(d,f)}}),d;typeof m>"u"&&(d._rate=g),m=d._getSoundIds(m);for(var x=0;x<m.length;x++)if(p=d._soundById(m[x]),p){d.playing(m[x])&&(p._rateSeek=d.seek(m[x]),p._playStart=d._webAudio?r.ctx.currentTime:p._playStart),p._rate=g,d._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(g,r.ctx.currentTime):p._node&&(p._node.playbackRate=g);var b=d.seek(m[x]),w=(d._sprite[p._sprite][0]+d._sprite[p._sprite][1])/1e3-b,_=w*1e3/Math.abs(p._rate);(d._endTimers[m[x]]||!p._paused)&&(d._clearTimer(m[x]),d._endTimers[m[x]]=setTimeout(d._ended.bind(d,p),_)),d._emit("rate",p._id)}}else return p=d._soundById(m),p?p._rate:d._rate;return d},seek:function(){var d=this,f=arguments,g,m;if(f.length===0)d._sounds.length&&(m=d._sounds[0]._id);else if(f.length===1){var y=d._getSoundIds(),v=y.indexOf(f[0]);v>=0?m=parseInt(f[0],10):d._sounds.length&&(m=d._sounds[0]._id,g=parseFloat(f[0]))}else f.length===2&&(g=parseFloat(f[0]),m=parseInt(f[1],10));if(typeof m>"u")return 0;if(typeof g=="number"&&(d._state!=="loaded"||d._playLock))return d._queue.push({event:"seek",action:function(){d.seek.apply(d,f)}}),d;var p=d._soundById(m);if(p)if(typeof g=="number"&&g>=0){var x=d.playing(m);x&&d.pause(m,!0),p._seek=g,p._ended=!1,d._clearTimer(m),!d._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=g);var b=function(){x&&d.play(m,!0),d._emit("seek",m)};if(x&&!d._webAudio){var w=function(){d._playLock?setTimeout(w,0):b()};setTimeout(w,0)}else b()}else if(d._webAudio){var _=d.playing(m)?r.ctx.currentTime-p._playStart:0,B=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(B+_*Math.abs(p._rate))}else return p._node.currentTime;return d},playing:function(d){var f=this;if(typeof d=="number"){var g=f._soundById(d);return g?!g._paused:!1}for(var m=0;m<f._sounds.length;m++)if(!f._sounds[m]._paused)return!0;return!1},duration:function(d){var f=this,g=f._duration,m=f._soundById(d);return m&&(g=f._sprite[m._sprite][1]/1e3),g},state:function(){return this._state},unload:function(){for(var d=this,f=d._sounds,g=0;g<f.length;g++)f[g]._paused||d.stop(f[g]._id),d._webAudio||(d._clearSound(f[g]._node),f[g]._node.removeEventListener("error",f[g]._errorFn,!1),f[g]._node.removeEventListener(r._canPlayEvent,f[g]._loadFn,!1),f[g]._node.removeEventListener("ended",f[g]._endFn,!1),r._releaseHtml5Audio(f[g]._node)),delete f[g]._node,d._clearTimer(f[g]._id);var m=r._howls.indexOf(d);m>=0&&r._howls.splice(m,1);var y=!0;for(g=0;g<r._howls.length;g++)if(r._howls[g]._src===d._src||d._src.indexOf(r._howls[g]._src)>=0){y=!1;break}return i&&y&&delete i[d._src],r.noAudio=!1,d._state="unloaded",d._sounds=[],d=null,null},on:function(d,f,g,m){var y=this,v=y["_on"+d];return typeof f=="function"&&v.push(m?{id:g,fn:f,once:m}:{id:g,fn:f}),y},off:function(d,f,g){var m=this,y=m["_on"+d],v=0;if(typeof f=="number"&&(g=f,f=null),f||g)for(v=0;v<y.length;v++){var p=g===y[v].id;if(f===y[v].fn&&p||!f&&p){y.splice(v,1);break}}else if(d)m["_on"+d]=[];else{var x=Object.keys(m);for(v=0;v<x.length;v++)x[v].indexOf("_on")===0&&Array.isArray(m[x[v]])&&(m[x[v]]=[])}return m},once:function(d,f,g){var m=this;return m.on(d,f,g,1),m},_emit:function(d,f,g){for(var m=this,y=m["_on"+d],v=y.length-1;v>=0;v--)(!y[v].id||y[v].id===f||d==="load")&&(setTimeout((function(p){p.call(this,f,g)}).bind(m,y[v].fn),0),y[v].once&&m.off(d,y[v].fn,y[v].id));return m._loadQueue(d),m},_loadQueue:function(d){var f=this;if(f._queue.length>0){var g=f._queue[0];g.event===d&&(f._queue.shift(),f._loadQueue()),d||g.action()}return f},_ended:function(d){var f=this,g=d._sprite;if(!f._webAudio&&d._node&&!d._node.paused&&!d._node.ended&&d._node.currentTime<d._stop)return setTimeout(f._ended.bind(f,d),100),f;var m=!!(d._loop||f._sprite[g][2]);if(f._emit("end",d._id),!f._webAudio&&m&&f.stop(d._id,!0).play(d._id),f._webAudio&&m){f._emit("play",d._id),d._seek=d._start||0,d._rateSeek=0,d._playStart=r.ctx.currentTime;var y=(d._stop-d._start)*1e3/Math.abs(d._rate);f._endTimers[d._id]=setTimeout(f._ended.bind(f,d),y)}return f._webAudio&&!m&&(d._paused=!0,d._ended=!0,d._seek=d._start||0,d._rateSeek=0,f._clearTimer(d._id),f._cleanBuffer(d._node),r._autoSuspend()),!f._webAudio&&!m&&f.stop(d._id,!0),f},_clearTimer:function(d){var f=this;if(f._endTimers[d]){if(typeof f._endTimers[d]!="function")clearTimeout(f._endTimers[d]);else{var g=f._soundById(d);g&&g._node&&g._node.removeEventListener("ended",f._endTimers[d],!1)}delete f._endTimers[d]}return f},_soundById:function(d){for(var f=this,g=0;g<f._sounds.length;g++)if(d===f._sounds[g]._id)return f._sounds[g];return null},_inactiveSound:function(){var d=this;d._drain();for(var f=0;f<d._sounds.length;f++)if(d._sounds[f]._ended)return d._sounds[f].reset();return new a(d)},_drain:function(){var d=this,f=d._pool,g=0,m=0;if(!(d._sounds.length<f)){for(m=0;m<d._sounds.length;m++)d._sounds[m]._ended&&g++;for(m=d._sounds.length-1;m>=0;m--){if(g<=f)return;d._sounds[m]._ended&&(d._webAudio&&d._sounds[m]._node&&d._sounds[m]._node.disconnect(0),d._sounds.splice(m,1),g--)}}},_getSoundIds:function(d){var f=this;if(typeof d>"u"){for(var g=[],m=0;m<f._sounds.length;m++)g.push(f._sounds[m]._id);return g}else return[d]},_refreshBuffer:function(d){var f=this;return d._node.bufferSource=r.ctx.createBufferSource(),d._node.bufferSource.buffer=i[f._src],d._panner?d._node.bufferSource.connect(d._panner):d._node.bufferSource.connect(d._node),d._node.bufferSource.loop=d._loop,d._loop&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop||0),d._node.bufferSource.playbackRate.setValueAtTime(d._rate,r.ctx.currentTime),f},_cleanBuffer:function(d){var f=this,g=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!d.bufferSource)return f;if(r._scratchBuffer&&d.bufferSource&&(d.bufferSource.onended=null,d.bufferSource.disconnect(0),g))try{d.bufferSource.buffer=r._scratchBuffer}catch{}return d.bufferSource=null,f},_clearSound:function(d){var f=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);f||(d.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(d){this._parent=d,this.init()};a.prototype={init:function(){var d=this,f=d._parent;return d._muted=f._muted,d._loop=f._loop,d._volume=f._volume,d._rate=f._rate,d._seek=0,d._paused=!0,d._ended=!0,d._sprite="__default",d._id=++r._counter,f._sounds.push(d),d.create(),d},create:function(){var d=this,f=d._parent,g=r._muted||d._muted||d._parent._muted?0:d._volume;return f._webAudio?(d._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),d._node.gain.setValueAtTime(g,r.ctx.currentTime),d._node.paused=!0,d._node.connect(r.masterGain)):r.noAudio||(d._node=r._obtainHtml5Audio(),d._errorFn=d._errorListener.bind(d),d._node.addEventListener("error",d._errorFn,!1),d._loadFn=d._loadListener.bind(d),d._node.addEventListener(r._canPlayEvent,d._loadFn,!1),d._endFn=d._endListener.bind(d),d._node.addEventListener("ended",d._endFn,!1),d._node.src=f._src,d._node.preload=f._preload===!0?"auto":f._preload,d._node.volume=g*r.volume(),d._node.load()),d},reset:function(){var d=this,f=d._parent;return d._muted=f._muted,d._loop=f._loop,d._volume=f._volume,d._rate=f._rate,d._seek=0,d._rateSeek=0,d._paused=!0,d._ended=!0,d._sprite="__default",d._id=++r._counter,d},_errorListener:function(){var d=this;d._parent._emit("loaderror",d._id,d._node.error?d._node.error.code:0),d._node.removeEventListener("error",d._errorFn,!1)},_loadListener:function(){var d=this,f=d._parent;f._duration=Math.ceil(d._node.duration*10)/10,Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue()),d._node.removeEventListener(r._canPlayEvent,d._loadFn,!1)},_endListener:function(){var d=this,f=d._parent;f._duration===1/0&&(f._duration=Math.ceil(d._node.duration*10)/10,f._sprite.__default[1]===1/0&&(f._sprite.__default[1]=f._duration*1e3),f._ended(d)),d._node.removeEventListener("ended",d._endFn,!1)}};var i={},o=function(d){var f=d._src;if(i[f]){d._duration=i[f].duration,u(d);return}if(/^data:[^;]+;base64,/.test(f)){for(var g=atob(f.split(",")[1]),m=new Uint8Array(g.length),y=0;y<g.length;++y)m[y]=g.charCodeAt(y);A(m.buffer,d)}else{var v=new XMLHttpRequest;v.open(d._xhr.method,f,!0),v.withCredentials=d._xhr.withCredentials,v.responseType="arraybuffer",d._xhr.headers&&Object.keys(d._xhr.headers).forEach(function(p){v.setRequestHeader(p,d._xhr.headers[p])}),v.onload=function(){var p=(v.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){d._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}A(v.response,d)},v.onerror=function(){d._webAudio&&(d._html5=!0,d._webAudio=!1,d._sounds=[],delete i[f],d.load())},c(v)}},c=function(d){try{d.send()}catch{d.onerror()}},A=function(d,f){var g=function(){f._emit("loaderror",null,"Decoding audio data failed.")},m=function(y){y&&f._sounds.length>0?(i[f._src]=y,u(f,y)):g()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(d).then(m).catch(g):r.ctx.decodeAudioData(d,m,g)},u=function(d,f){f&&!d._duration&&(d._duration=f.duration),Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue())},h=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var d=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),f=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),g=f?parseInt(f[1],10):null;if(d&&g&&g<9){var m=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!m&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};e.Howler=r,e.Howl=s,typeof oi<"u"?(oi.HowlerGlobal=n,oi.Howler=r,oi.Howl=s,oi.Sound=a):typeof window<"u"&&(window.HowlerGlobal=n,window.Howler=r,window.Howl=s,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var a=s._howls.length-1;a>=0;a--)s._howls[a].stereo(r);return s},HowlerGlobal.prototype.pos=function(r,s,a){var i=this;if(!i.ctx||!i.ctx.listener)return i;if(s=typeof s!="number"?i._pos[1]:s,a=typeof a!="number"?i._pos[2]:a,typeof r=="number")i._pos=[r,s,a],typeof i.ctx.listener.positionX<"u"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]);else return i._pos;return i},HowlerGlobal.prototype.orientation=function(r,s,a,i,o,c){var A=this;if(!A.ctx||!A.ctx.listener)return A;var u=A._orientation;if(s=typeof s!="number"?u[1]:s,a=typeof a!="number"?u[2]:a,i=typeof i!="number"?u[3]:i,o=typeof o!="number"?u[4]:o,c=typeof c!="number"?u[5]:c,typeof r=="number")A._orientation=[r,s,a,i,o,c],typeof A.ctx.listener.forwardX<"u"?(A.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),A.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),A.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),A.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),A.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),A.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):A.ctx.listener.setOrientation(r,s,a,i,o,c);else return u;return A},Howl.prototype.init=function(r){return function(s){var a=this;return a._orientation=s.orientation||[1,0,0],a._stereo=s.stereo||null,a._pos=s.pos||null,a._pannerAttr={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:360,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:360,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:0,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:"inverse",maxDistance:typeof s.maxDistance<"u"?s.maxDistance:1e4,panningModel:typeof s.panningModel<"u"?s.panningModel:"HRTF",refDistance:typeof s.refDistance<"u"?s.refDistance:1,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:1},a._onstereo=s.onstereo?[{fn:s.onstereo}]:[],a._onpos=s.onpos?[{fn:s.onpos}]:[],a._onorientation=s.onorientation?[{fn:s.onorientation}]:[],r.call(this,s)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(r,s)}}),a;var i=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof s>"u")if(typeof r=="number")a._stereo=r,a._pos=[r,0,0];else return a._stereo;for(var o=a._getSoundIds(s),c=0;c<o.length;c++){var A=a._soundById(o[c]);if(A)if(typeof r=="number")A._stereo=r,A._pos=[r,0,0],A._node&&(A._pannerAttr.panningModel="equalpower",(!A._panner||!A._panner.pan)&&n(A,i),i==="spatial"?typeof A._panner.positionX<"u"?(A._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),A._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),A._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):A._panner.setPosition(r,0,0):A._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),a._emit("stereo",A._id);else return A._stereo}return a},Howl.prototype.pos=function(r,s,a,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,s,a,i)}}),o;if(s=typeof s!="number"?0:s,a=typeof a!="number"?-.5:a,typeof i>"u")if(typeof r=="number")o._pos=[r,s,a];else return o._pos;for(var c=o._getSoundIds(i),A=0;A<c.length;A++){var u=o._soundById(c[A]);if(u)if(typeof r=="number")u._pos=[r,s,a],u._node&&((!u._panner||u._panner.pan)&&n(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):u._panner.setPosition(r,s,a)),o._emit("pos",u._id);else return u._pos}return o},Howl.prototype.orientation=function(r,s,a,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,s,a,i)}}),o;if(s=typeof s!="number"?o._orientation[1]:s,a=typeof a!="number"?o._orientation[2]:a,typeof i>"u")if(typeof r=="number")o._orientation=[r,s,a];else return o._orientation;for(var c=o._getSoundIds(i),A=0;A<c.length;A++){var u=o._soundById(c[A]);if(u)if(typeof r=="number")u._orientation=[r,s,a],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),n(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):u._panner.setOrientation(r,s,a)),o._emit("orientation",u._id);else return u._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,s=arguments,a,i,o;if(!r._webAudio)return r;if(s.length===0)return r._pannerAttr;if(s.length===1)if(typeof s[0]=="object")a=s[0],typeof i>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),r._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(s[0],10)),o?o._pannerAttr:r._pannerAttr;else s.length===2&&(a=s[0],i=parseInt(s[1],10));for(var c=r._getSoundIds(i),A=0;A<c.length;A++)if(o=r._soundById(c[A]),o){var u=o._pannerAttr;u={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:u.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:u.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:u.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:u.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:u.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:u.panningModel};var h=o._panner;h||(o._pos||(o._pos=r._pos||[0,0,-.5]),n(o,"spatial"),h=o._panner),h.coneInnerAngle=u.coneInnerAngle,h.coneOuterAngle=u.coneOuterAngle,h.coneOuterGain=u.coneOuterGain,h.distanceModel=u.distanceModel,h.maxDistance=u.maxDistance,h.refDistance=u.refDistance,h.rolloffFactor=u.rolloffFactor,h.panningModel=u.panningModel}return r},Sound.prototype.init=function(r){return function(){var s=this,a=s._parent;s._orientation=a._orientation,s._stereo=a._stereo,s._pos=a._pos,s._pannerAttr=a._pannerAttr,r.call(this),s._stereo?a.stereo(s._stereo):s._pos&&a.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var s=this,a=s._parent;return s._orientation=a._orientation,s._stereo=a._stereo,s._pos=a._pos,s._pannerAttr=a._pannerAttr,s._stereo?a.stereo(s._stereo):s._pos?a.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,a._refreshBuffer(s)),r.call(this)}}(Sound.prototype.reset);var n=function(r,s){s=s||"spatial",s==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(Sa);const e6=S.createContext({isSoundEnabled:!0,toggleSound:()=>{},playSound:()=>{},unlockAudio:()=>{},isAudioReady:!1}),pO=()=>typeof import.meta<"u"&&{VITE_SUPABASE_URL:"https://vldqocgemjqtmjvxhozj.supabase.co",VITE_SUPABASE_ANON_KEY:"sb_publishable_doGcbZ1R6TOC1hBHRFu2BA_zzBpPiSZ",BASE_URL:"/GoA-Timer/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}?"/GoA-Timer/":"",Gr=pO(),rf={buttonClick:`${Gr}sounds/ui/button-click.mp3`,timerWarning:`${Gr}sounds/timer/timer-warning.mp3`,timerComplete:`${Gr}sounds/timer/timer-complete.mp3`,timerTick:`${Gr}sounds/timer/timer-tick.mp3`,heroSelect:`${Gr}sounds/game/hero-select.mp3`,heroBan:`${Gr}sounds/game/hero-ban.mp3`,coinFlip:`${Gr}sounds/game/coin-flip.mp3`,victory:`${Gr}sounds/victory/victory.mp3`,phaseChange:`${Gr}sounds/game/phase-change.mp3`,turnStart:`${Gr}sounds/game/turn-start.mp3`,turnComplete:`${Gr}sounds/game/turn-complete.mp3`,lifeChange:`${Gr}sounds/game/life-change.mp3`,toggleSwitch:`${Gr}sounds/ui/toggle-switch.mp3`},Gl={},yO=({children:e})=>{const[n,r]=S.useState(()=>{const A=localStorage.getItem("atlantis-sound-enabled");return A!==null?A==="true":!0}),[s,a]=S.useState(!1),i=()=>{console.log("Attempting to unlock audio context..."),Sa.Howler.ctx&&Sa.Howler.ctx.state!=="running"?Sa.Howler.ctx.resume().then(()=>{console.log("AudioContext resumed successfully!"),a(!0),new Sa.Howl({src:[rf.buttonClick],volume:.01}).play()}).catch(A=>{console.error("Failed to resume AudioContext:",A)}):(console.log("AudioContext already running or not available"),a(!0))};S.useEffect(()=>(s&&(console.log("Audio is ready, preloading essential sounds"),["buttonClick","timerComplete","heroSelect","timerTick"].forEach(u=>{Gl[u]||(console.log(`Preloading sound: ${u}`),Gl[u]=new Sa.Howl({src:[rf[u]],preload:!0,volume:u==="timerTick"?.2:.5,onload:()=>console.log(`Successfully loaded: ${u}`),onloaderror:h=>console.error(`Error loading ${u}:`,h)}))})),()=>{console.log("Cleaning up sound cache"),Object.values(Gl).forEach(A=>A.unload())}),[s]),S.useEffect(()=>{localStorage.setItem("atlantis-sound-enabled",n.toString())},[n]);const o=()=>{r(A=>!A)},c=A=>{if(console.log(`Attempting to play sound: ${A}`),!n){console.log("Sound is disabled, not playing");return}if(!s){console.log("Audio context not ready, trying to unlock..."),i();return}if(Gl[A]){console.log(`Playing cached sound: ${A}`),Gl[A].play();return}console.log(`Loading new sound: ${A} from ${rf[A]}`);try{const u=new Sa.Howl({src:[rf[A]],volume:A==="timerTick"?.2:.5,onload:()=>console.log(`Successfully loaded: ${A}`),onloaderror:h=>console.error(`Error loading ${A}:`,h),onplay:()=>console.log(`Started playing: ${A}`),onplayerror:h=>console.error(`Error playing ${A}:`,h)});Gl[A]=u,u.play()}catch(u){console.error(`Exception when trying to play ${A}:`,u)}};return l.jsx(e6.Provider,{value:{isSoundEnabled:n,toggleSound:o,playSound:c,unlockAudio:i,isAudioReady:s},children:e})},gt=()=>S.useContext(e6),OB=({value:e,onChange:n,tooltip:r,minValue:s=10,maxValue:a=600,step:i=10,disabled:o=!1})=>{const[c,A]=S.useState(h(e)),{playSound:u}=gt();function h(v){const p=Math.floor(v/60),x=v%60;return`${p}:${x.toString().padStart(2,"0")}`}function d(v){if(!v.trim())return e;const p=v.split(":");if(p.length===2){const b=parseInt(p[0],10),w=parseInt(p[1],10);if(!isNaN(b)&&!isNaN(w))return Math.min(a,Math.max(s,b*60+w))}const x=parseInt(v,10);return isNaN(x)?e:Math.min(a,Math.max(s,x))}const f=v=>{if(o)return;u("buttonClick");const p=Math.min(a,Math.max(s,e+v));n(p)};S.useEffect(()=>{A(h(e))},[e]);const g=v=>{o||A(v.target.value)},m=()=>{if(o)return;u("buttonClick");const v=d(c);n(v),A(h(v))},y=v=>{if(!o&&v.key==="Enter"){u("buttonClick");const p=d(c);n(p),A(h(p)),v.currentTarget.blur()}};return l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"flex",children:[l.jsx("input",{type:"text",value:c,onChange:g,onBlur:m,onKeyDown:y,className:`w-20 bg-gray-700 text-center text-xl font-mono py-2 px-3 rounded-l-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o?"cursor-not-allowed opacity-60":""}`,"aria-label":"Timer duration",disabled:o}),l.jsxs("div",{className:"flex flex-col border-y border-r border-gray-600 rounded-r-md",children:[l.jsx("button",{className:`bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded-tr-md border-b border-gray-600 ${o?"cursor-not-allowed opacity-60":""}`,onClick:()=>f(i),"aria-label":"Increase time",disabled:o,children:l.jsx(_r,{size:16})}),l.jsx("button",{className:`bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded-br-md ${o?"cursor-not-allowed opacity-60":""}`,onClick:()=>f(-i),"aria-label":"Decrease time",disabled:o,children:l.jsx(Dn,{size:16})})]}),l.jsx(At,{text:r,position:"right",maxWidth:"max-w-xs",children:l.jsx("div",{className:"ml-2 cursor-help",children:l.jsx(qt,{size:18,className:"text-gray-400 hover:text-gray-200"})})})]})})},t6=({player:e,onNameChange:n,onRemove:r,isDuplicate:s=!1,suggestedNames:a=[],disableRemove:i=!1,autoFocus:o=!1})=>{const{playSound:c}=gt(),[A,u]=S.useState(e.name),[h,d]=S.useState(!1),[f,g]=S.useState([]),[m,y]=S.useState(!1),[v,p]=S.useState(-1),x=S.useRef(null),b=S.useRef(null),w=S.useId();S.useEffect(()=>{u(e.name)},[e.name]),S.useEffect(()=>{o&&x.current&&x.current.focus()},[o]),S.useEffect(()=>{if(A.trim()){const F=a.filter(I=>I.toLowerCase().includes(A.toLowerCase()));g(F.slice(0,5)),p(-1)}else g([]),p(-1)},[A,a]);const _=F=>/^[a-zA-Z0-9 .-]*$/.test(F),B=F=>{const I=F.target.value;_(I)?(u(I),d(!!I&&a.length>0)):(y(!0),c("buttonClick"),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{y(!1),b.current=null},3e3))},k=()=>{setTimeout(()=>{d(!1),p(-1);const F=A.trim();F!==A&&u(F),n(F)},200)},N=()=>{A&&a.length>0&&d(!0)},C=F=>{var I,T;if(!(!h||f.length===0))switch(F.key){case"ArrowDown":F.preventDefault(),p(L=>L<f.length-1?L+1:0);break;case"ArrowUp":F.preventDefault(),p(L=>L>0?L-1:f.length-1);break;case"Enter":if(F.preventDefault(),v>=0&&v<f.length)j(f[v],"keyboard");else{const L=A.trim();u(L),n(L),d(!1),p(-1),(I=x.current)==null||I.blur()}break;case"Escape":F.preventDefault(),d(!1),p(-1),(T=x.current)==null||T.blur();break;case"Tab":h&&(d(!1),p(-1));break}},j=(F,I="mouse")=>{var T;u(F),n(F),d(!1),p(-1),c("buttonClick"),I==="keyboard"&&((T=x.current)==null||T.blur())},E=()=>{r&&(c("buttonClick"),r())};return S.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),l.jsxs("div",{className:"relative w-full",children:[l.jsxs("div",{className:`flex border ${s?"border-red-500 bg-red-900/20":m?"border-amber-500 bg-amber-900/20":e.team===ie.Titans?"border-blue-600 bg-blue-900/30":"border-red-600 bg-red-900/30"} rounded-lg overflow-hidden focus-within:ring-2 ${e.team===ie.Titans?"focus-within:ring-blue-500":"focus-within:ring-red-500"}`,children:[l.jsx("input",{ref:x,type:"text",value:A,onChange:B,onBlur:k,onFocus:N,onKeyDown:C,role:"combobox","aria-autocomplete":"list","aria-expanded":h,"aria-controls":h?w:void 0,"aria-activedescendant":v>=0?`${w}-option-${v}`:void 0,autoComplete:"off",placeholder:"Player name",className:`px-3 py-2 flex-grow bg-transparent outline-none text-sm ${e.team===ie.Titans?"text-blue-100 placeholder-blue-300":"text-red-100 placeholder-red-300"}`}),s&&l.jsx("div",{className:"flex items-center pr-2",children:l.jsx(_s,{size:16,className:"text-red-500"})}),m&&l.jsx("div",{className:"flex items-center pr-2",children:l.jsx(Ai,{size:16,className:"text-amber-500"})}),r&&!i&&l.jsx("button",{onClick:E,className:"px-2 text-gray-400 hover:text-white focus:outline-none","aria-label":"Remove player",children:l.jsx(Jt,{size:16})})]}),s&&l.jsx("div",{className:"text-red-500 text-xs mt-1",children:"Duplicate name"}),m&&l.jsx("div",{className:"text-amber-500 text-xs mt-1",children:"Only letters, numbers, spaces, periods, and hyphens are allowed"}),h&&f.length>0&&l.jsx("ul",{id:w,role:"listbox","aria-label":"Player name suggestions",className:"absolute z-10 w-full mt-1 bg-gray-700 rounded-md shadow-lg max-h-60 overflow-auto",children:f.map((F,I)=>l.jsx("li",{id:`${w}-option-${I}`,role:"option","aria-selected":I===v,onMouseDown:T=>{T.preventDefault(),j(F,"mouse")},onMouseEnter:()=>p(I),className:`px-4 py-2 cursor-pointer text-sm min-h-[44px] flex items-center ${I===v?"bg-blue-600 text-white":"hover:bg-gray-600"}`,children:F},I))})]})},vO="modulepreload",xO=function(e){return"/GoA-Timer/"+e},LB={},HB=function(n,r,s){if(!r||r.length===0)return n();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=xO(i),i in LB)return;LB[i]=!0;const o=i.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!s)for(let h=a.length-1;h>=0;h--){const d=a[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${c}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":vO,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>n()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var ot={},Em={},It={};Object.defineProperty(It,"__esModule",{value:!0});It.z=It.tau=It.sigma=It.mu=It.epsilon=It.default=It.betaSq=It.beta=void 0;const Yb=e=>(e==null?void 0:e.z)??3;It.z=Yb;const Jb=e=>(e==null?void 0:e.mu)??25;It.mu=Jb;const n6=e=>(e==null?void 0:e.tau)??Jb(e)/300;It.tau=n6;const r6=e=>(e==null?void 0:e.sigma)??Jb(e)/Yb(e);It.sigma=r6;const s6=e=>(e==null?void 0:e.epsilon)??1e-4;It.epsilon=s6;const Zb=e=>(e==null?void 0:e.beta)??r6(e)/2;It.beta=Zb;const Gx=e=>Zb(e)**2;It.betaSq=Gx;var wO=e=>({EPSILON:s6(e),TWOBETASQ:2*Gx(e),BETA:Zb(e),BETASQ:Gx(e),Z:Yb(e),TAU:n6(e)});It.default=wO;Object.defineProperty(Em,"__esModule",{value:!0});Em.default=void 0;var zB=It;const bO=(e,n={})=>({mu:(e==null?void 0:e.mu)??(0,zB.mu)(n),sigma:(e==null?void 0:e.sigma)??(0,zB.sigma)({...n,mu:e==null?void 0:e.mu})});var _O=bO;Em.default=_O;var Tm={},H={exports:{}},CO=function(){return!1},BO=CO,SO=function(){return!0},kO=SO,jO={"@@functional/placeholder":!0};function NO(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}var Fm=NO,EO=Fm;function TO(e){return function n(r){return arguments.length===0||EO(r)?n:e.apply(this,arguments)}}var Je=TO,Ty=Je,XA=Fm;function FO(e){return function n(r,s){switch(arguments.length){case 0:return n;case 1:return XA(r)?n:Ty(function(a){return e(r,a)});default:return XA(r)&&XA(s)?n:XA(r)?Ty(function(a){return e(a,s)}):XA(s)?Ty(function(a){return e(r,a)}):e(r,s)}}}var ue=FO,IO=ue,UO=IO(function(n,r){return Number(n)+Number(r)}),Im=UO;function PO(e,n){e=e||[],n=n||[];var r,s=e.length,a=n.length,i=[];for(r=0;r<s;)i[i.length]=e[r],r+=1;for(r=0;r<a;)i[i.length]=n[r],r+=1;return i}var Qs=PO;function MO(e,n){switch(e){case 0:return function(){return n.apply(this,arguments)};case 1:return function(r){return n.apply(this,arguments)};case 2:return function(r,s){return n.apply(this,arguments)};case 3:return function(r,s,a){return n.apply(this,arguments)};case 4:return function(r,s,a,i){return n.apply(this,arguments)};case 5:return function(r,s,a,i,o){return n.apply(this,arguments)};case 6:return function(r,s,a,i,o,c){return n.apply(this,arguments)};case 7:return function(r,s,a,i,o,c,A){return n.apply(this,arguments)};case 8:return function(r,s,a,i,o,c,A,u){return n.apply(this,arguments)};case 9:return function(r,s,a,i,o,c,A,u,h){return n.apply(this,arguments)};case 10:return function(r,s,a,i,o,c,A,u,h,d){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var Da=MO,QO=Da,KB=Fm;function a6(e,n,r){return function(){for(var s=[],a=0,i=e,o=0;o<n.length||a<arguments.length;){var c;o<n.length&&(!KB(n[o])||a>=arguments.length)?c=n[o]:(c=arguments[a],a+=1),s[o]=c,KB(c)||(i-=1),o+=1}return i<=0?r.apply(this,s):QO(i,a6(e,s,r))}}var sh=a6,DO=Da,RO=Je,$O=ue,OO=sh,LO=$O(function(n,r){return n===1?RO(r):DO(n,OO(n,[],r))}),$n=LO,HO=Qs,zO=Je,KO=$n,GO=zO(function(n){return KO(n.length,function(){var r=0,s=arguments[0],a=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var o=s.apply(this,HO(arguments,[r,a]));return r+=1,o},n.apply(this,i)})}),WO=GO,VO=Qs,qO=Je,XO=$n,YO=qO(function(n){return XO(n.length,function(){var r=arguments[0],s=arguments[arguments.length-1],a=s.length-1,i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var o=r.apply(this,VO(arguments,[a,s]));return a-=1,o},n.apply(this,i)})}),JO=YO,sf=Je,Wl=ue,Kn=Fm;function ZO(e){return function n(r,s,a){switch(arguments.length){case 0:return n;case 1:return Kn(r)?n:Wl(function(i,o){return e(r,i,o)});case 2:return Kn(r)&&Kn(s)?n:Kn(r)?Wl(function(i,o){return e(i,s,o)}):Kn(s)?Wl(function(i,o){return e(r,i,o)}):sf(function(i){return e(r,s,i)});default:return Kn(r)&&Kn(s)&&Kn(a)?n:Kn(r)&&Kn(s)?Wl(function(i,o){return e(i,o,a)}):Kn(r)&&Kn(a)?Wl(function(i,o){return e(i,s,o)}):Kn(s)&&Kn(a)?Wl(function(i,o){return e(r,i,o)}):Kn(r)?sf(function(i){return e(i,s,a)}):Kn(s)?sf(function(i){return e(r,i,a)}):Kn(a)?sf(function(i){return e(r,s,i)}):e(r,s,a)}}}var et=ZO,eL=Qs,tL=et,nL=tL(function(n,r,s){var a=s.length;if(n>=a||n<-a)return s;var i=(a+n)%a,o=eL(s);return o[i]=r(s[i]),o}),i6=nL,dr=Array.isArray||function(n){return n!=null&&n.length>=0&&Object.prototype.toString.call(n)==="[object Array]"};function rL(e){return e!=null&&typeof e["@@transducer/step"]=="function"}var e_=rL,sL=dr,aL=e_;function iL(e,n,r){return function(){if(arguments.length===0)return r();var s=arguments[arguments.length-1];if(!sL(s)){for(var a=0;a<e.length;){if(typeof s[e[a]]=="function")return s[e[a]].apply(s,Array.prototype.slice.call(arguments,0,-1));a+=1}if(aL(s)){var i=n.apply(null,Array.prototype.slice.call(arguments,0,-1));return i(s)}}return r.apply(this,arguments)}}var zt=iL;function oL(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}var Ei=oL,on={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}},lL=Ei,cL=on,AL=function(){function e(n,r){this.xf=r,this.f=n,this.all=!0}return e.prototype["@@transducer/init"]=cL.init,e.prototype["@@transducer/result"]=function(n){return this.all&&(n=this.xf["@@transducer/step"](n,!0)),this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)||(this.all=!1,n=lL(this.xf["@@transducer/step"](n,!1))),n},e}();function uL(e){return function(n){return new AL(e,n)}}var dL=uL,hL=ue,fL=zt,gL=dL,mL=hL(fL(["all"],gL,function(n,r){for(var s=0;s<r.length;){if(!n(r[s]))return!1;s+=1}return!0})),o6=mL;function pL(e){for(var n=[],r;!(r=e.next()).done;)n.push(r.value);return n}var yL=pL;function vL(e,n,r){for(var s=0,a=r.length;s<a;){if(e(n,r[s]))return!0;s+=1}return!1}var ah=vL;function xL(e){var n=String(e).match(/^function (\w*)/);return n==null?"":n[1]}var wL=xL;function bL(e,n){return Object.prototype.hasOwnProperty.call(n,e)}var kr=bL;function _L(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}var l6=typeof Object.is=="function"?Object.is:_L,CL=kr,GB=Object.prototype.toString,BL=function(){return GB.call(arguments)==="[object Arguments]"?function(n){return GB.call(n)==="[object Arguments]"}:function(n){return CL("callee",n)}}(),c6=BL,WB=Je,VB=kr,SL=c6,kL=!{toString:null}.propertyIsEnumerable("toString"),qB=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],XB=function(){return arguments.propertyIsEnumerable("length")}(),jL=function(n,r){for(var s=0;s<n.length;){if(n[s]===r)return!0;s+=1}return!1},NL=WB(typeof Object.keys=="function"&&!XB?function(n){return Object(n)!==n?[]:Object.keys(n)}:function(n){if(Object(n)!==n)return[];var r,s,a=[],i=XB&&SL(n);for(r in n)VB(r,n)&&(!i||r!=="length")&&(a[a.length]=r);if(kL)for(s=qB.length-1;s>=0;)r=qB[s],VB(r,n)&&!jL(a,r)&&(a[a.length]=r),s-=1;return a}),da=NL,EL=Je,TL=EL(function(n){return n===null?"Null":n===void 0?"Undefined":Object.prototype.toString.call(n).slice(8,-1)}),t_=TL,YB=yL,JB=ah,FL=wL,IL=kr,Fy=l6,ZB=da,e5=t_;function t5(e,n,r,s){var a=YB(e),i=YB(n);function o(c,A){return n_(c,A,r.slice(),s.slice())}return!JB(function(c,A){return!JB(o,A,c)},i,a)}function n_(e,n,r,s){if(Fy(e,n))return!0;var a=e5(e);if(a!==e5(n))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof n["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](n)&&typeof n["fantasy-land/equals"]=="function"&&n["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof n.equals=="function")return typeof e.equals=="function"&&e.equals(n)&&typeof n.equals=="function"&&n.equals(e);switch(a){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&FL(e.constructor)==="Promise")return e===n;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof n&&Fy(e.valueOf(),n.valueOf())))return!1;break;case"Date":if(!Fy(e.valueOf(),n.valueOf()))return!1;break;case"Error":return e.name===n.name&&e.message===n.message;case"RegExp":if(!(e.source===n.source&&e.global===n.global&&e.ignoreCase===n.ignoreCase&&e.multiline===n.multiline&&e.sticky===n.sticky&&e.unicode===n.unicode))return!1;break}for(var i=r.length-1;i>=0;){if(r[i]===e)return s[i]===n;i-=1}switch(a){case"Map":return e.size!==n.size?!1:t5(e.entries(),n.entries(),r.concat([e]),s.concat([n]));case"Set":return e.size!==n.size?!1:t5(e.values(),n.values(),r.concat([e]),s.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=ZB(e);if(o.length!==ZB(n).length)return!1;var c=r.concat([e]),A=s.concat([n]);for(i=o.length-1;i>=0;){var u=o[i];if(!(IL(u,n)&&n_(n[u],e[u],c,A)))return!1;i-=1}return!0}var UL=n_,PL=ue,ML=UL,QL=PL(function(n,r){return ML(n,r,[],[])}),Ds=QL,DL=Ds;function RL(e,n,r){var s,a;if(typeof e.indexOf=="function")switch(typeof n){case"number":if(n===0){for(s=1/n;r<e.length;){if(a=e[r],a===0&&1/a===s)return r;r+=1}return-1}else if(n!==n){for(;r<e.length;){if(a=e[r],typeof a=="number"&&a!==a)return r;r+=1}return-1}return e.indexOf(n,r);case"string":case"boolean":case"function":case"undefined":return e.indexOf(n,r);case"object":if(n===null)return e.indexOf(n,r)}for(;r<e.length;){if(DL(e[r],n))return r;r+=1}return-1}var A6=RL,$L=A6;function OL(e,n){return $L(n,e,0)>=0}var r_=OL;function LL(e,n){for(var r=0,s=n.length,a=Array(s);r<s;)a[r]=e(n[r]),r+=1;return a}var ih=LL;function HL(e){var n=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+n.replace(/"/g,'\\"')+'"'}var zL=HL,YA=function(n){return(n<10?"0":"")+n},KL=typeof Date.prototype.toISOString=="function"?function(n){return n.toISOString()}:function(n){return n.getUTCFullYear()+"-"+YA(n.getUTCMonth()+1)+"-"+YA(n.getUTCDate())+"T"+YA(n.getUTCHours())+":"+YA(n.getUTCMinutes())+":"+YA(n.getUTCSeconds())+"."+(n.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},GL=KL;function WL(e){return function(){return!e.apply(this,arguments)}}var u6=WL;function VL(e,n,r){for(var s=0,a=r.length;s<a;)n=e(n,r[s]),s+=1;return n}var oh=VL;function qL(e,n){for(var r=0,s=n.length,a=[];r<s;)e(n[r])&&(a[a.length]=n[r]),r+=1;return a}var s_=qL;function XL(e){return Object.prototype.toString.call(e)==="[object Object]"}var lh=XL,n5=on,YL=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=n5.init,e.prototype["@@transducer/result"]=n5.result,e.prototype["@@transducer/step"]=function(n,r){return this.f(r)?this.xf["@@transducer/step"](n,r):n},e}();function JL(e){return function(n){return new YL(e,n)}}var ZL=JL,eH=oh,tH=ue,nH=zt,rH=s_,sH=lh,aH=ZL,iH=da,oH=tH(nH(["fantasy-land/filter","filter"],aH,function(e,n){return sH(n)?eH(function(r,s){return e(n[s])&&(r[s]=n[s]),r},{},iH(n)):rH(e,n)})),a_=oH,lH=u6,cH=ue,AH=a_,uH=cH(function(n,r){return AH(lH(n),r)}),Um=uH,dH=r_,Iy=ih,Uy=zL,hH=GL,r5=da,fH=Um;function d6(e,n){var r=function(o){var c=n.concat([e]);return dH(o,c)?"<Circular>":d6(o,c)},s=function(i,o){return Iy(function(c){return Uy(c)+": "+r(i[c])},o.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+Iy(r,e).join(", ")+"))";case"[object Array]":return"["+Iy(r,e).concat(s(e,fH(function(i){return/^\d+$/.test(i)},r5(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):Uy(hH(e)))+")";case"[object Map]":return"new Map("+r(Array.from(e))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+r(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object Set]":return"new Set("+r(Array.from(e).sort())+")";case"[object String]":return typeof e=="object"?"new String("+r(e.valueOf())+")":Uy(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var a=e.toString();if(a!=="[object Object]")return a}return"{"+s(e,r5(e)).join(", ")+"}"}}var h6=d6,gH=Je,mH=h6,pH=gH(function(n){return mH(n,[])}),kA=pH,yH=ue,s5=kA,vH=yH(function(n,r){if(n===r)return r;function s(A,u){if(A>u!=u>A)return u>A?u:A}var a=s(n,r);if(a!==void 0)return a;var i=s(typeof n,typeof r);if(i!==void 0)return i===typeof n?n:r;var o=s5(n),c=s(o,s5(r));return c!==void 0&&c===o?n:r}),jl=vH,a5=on,xH=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=a5.init,e.prototype["@@transducer/result"]=a5.result,e.prototype["@@transducer/step"]=function(n,r){return this.xf["@@transducer/step"](n,this.f(r))},e}(),wH=function(n){return function(r){return new xH(n,r)}},f6=wH,bH=oh,_H=ue,CH=zt,BH=ih,SH=f6,kH=$n,jH=da,NH=_H(CH(["fantasy-land/map","map"],SH,function(n,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return kH(r.length,function(){return n.call(this,r.apply(this,arguments))});case"[object Object]":return bH(function(s,a){return s[a]=n(r[a]),s},{},jH(r));default:return BH(n,r)}})),Ra=NH,No=Number.isInteger||function(n){return n<<0===n};function EH(e){return Object.prototype.toString.call(e)==="[object String]"}var jA=EH,TH=ue,FH=jA,IH=TH(function(n,r){var s=n<0?r.length+n:n;return FH(r)?r.charAt(s):r[s]}),Nl=IH,UH=ue,PH=No,MH=Nl,QH=UH(function(n,r){if(r!=null)return PH(n)?MH(n,r):r[n]}),El=QH,DH=ue,RH=Ra,$H=El,OH=DH(function(n,r){return RH($H(n),r)}),ch=OH,LH=Je,HH=dr,zH=jA,KH=LH(function(n){return HH(n)?!0:!n||typeof n!="object"||zH(n)?!1:n.length===0?!0:n.length>0?n.hasOwnProperty(0)&&n.hasOwnProperty(n.length-1):!1}),Pm=KH,GH=Pm,i5=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function WH(e,n,r){return function(a,i,o){if(GH(o))return e(a,i,o);if(o==null)return i;if(typeof o["fantasy-land/reduce"]=="function")return n(a,i,o,"fantasy-land/reduce");if(o[i5]!=null)return r(a,i,o[i5]());if(typeof o.next=="function")return r(a,i,o);if(typeof o.reduce=="function")return n(a,i,o,"reduce");throw new TypeError("reduce: list must be array or iterable")}}var g6=WH;function VH(e,n,r){for(var s=0,a=r.length;s<a;){if(n=e["@@transducer/step"](n,r[s]),n&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}s+=1}return e["@@transducer/result"](n)}var m6=VH,qH=Da,XH=ue,YH=XH(function(n,r){return qH(n.length,function(){return n.apply(r,arguments)})}),p6=YH,JH=g6,ZH=m6,e9=p6;function t9(e,n,r){for(var s=r.next();!s.done;){if(n=e["@@transducer/step"](n,s.value),n&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}s=r.next()}return e["@@transducer/result"](n)}function n9(e,n,r,s){return e["@@transducer/result"](r[s](e9(e["@@transducer/step"],e),n))}var r9=JH(ZH,n9,t9),Tl=r9,s9=function(){function e(n){this.f=n}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(n){return n},e.prototype["@@transducer/step"]=function(n,r){return this.f(n,r)},e}();function a9(e){return new s9(e)}var Mm=a9,i9=et,o9=Tl,l9=Mm,c9=i9(function(e,n,r){return o9(typeof e=="function"?l9(e):e,n,r)}),Ti=c9,A9=Je,u9=$n,d9=jl,h9=ch,f9=Ti,g9=A9(function(n){return u9(f9(d9,0,h9("length",n)),function(){for(var r=0,s=n.length;r<s;){if(!n[r].apply(this,arguments))return!1;r+=1}return!0})}),m9=g9,p9=Je,y9=p9(function(n){return function(){return n}}),Qm=y9,v9=ue,x9=v9(function(n,r){return n&&r}),y6=x9,w9=Ei,b9=on,_9=function(){function e(n,r){this.xf=r,this.f=n,this.any=!1}return e.prototype["@@transducer/init"]=b9.init,e.prototype["@@transducer/result"]=function(n){return this.any||(n=this.xf["@@transducer/step"](n,!1)),this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)&&(this.any=!0,n=w9(this.xf["@@transducer/step"](n,!0))),n},e}();function C9(e){return function(n){return new _9(e,n)}}var B9=C9,S9=ue,k9=zt,j9=B9,N9=S9(k9(["any"],j9,function(n,r){for(var s=0;s<r.length;){if(n(r[s]))return!0;s+=1}return!1})),E9=N9,T9=Je,F9=$n,I9=jl,U9=ch,P9=Ti,M9=T9(function(n){return F9(P9(I9,0,U9("length",n)),function(){for(var r=0,s=n.length;r<s;){if(n[r].apply(this,arguments))return!0;r+=1}return!1})}),Q9=M9,D9=oh,R9=g6;function $9(e,n,r){for(var s=r.next();!s.done;)n=e(n,s.value),s=r.next();return n}function O9(e,n,r,s){return r[s](e,n)}var L9=R9(D9,O9,$9),Dm=L9,H9=Qs,z9=ue,K9=Dm,G9=Ra,W9=z9(function(n,r){return typeof r["fantasy-land/ap"]=="function"?r["fantasy-land/ap"](n):typeof n.ap=="function"?n.ap(r):typeof n=="function"?function(s){return n(s)(r(s))}:K9(function(s,a){return H9(s,G9(a,r))},[],n)}),i_=W9;function V9(e,n){for(var r=0,s=n.length-(e-1),a=new Array(s>=0?s:0);r<s;)a[r]=Array.prototype.slice.call(n,r,r+e),r+=1;return a}var q9=V9,X9=Qs,Y9=on,J9=function(){function e(n,r){this.xf=r,this.pos=0,this.full=!1,this.acc=new Array(n)}return e.prototype["@@transducer/init"]=Y9.init,e.prototype["@@transducer/result"]=function(n){return this.acc=null,this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.store(r),this.full?this.xf["@@transducer/step"](n,this.getCopy()):n},e.prototype.store=function(n){this.acc[this.pos]=n,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return X9(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},e}();function Z9(e){return function(n){return new J9(e,n)}}var ez=Z9,tz=q9,nz=ue,rz=zt,sz=ez,az=nz(rz([],sz,tz)),iz=az,oz=Qs,lz=ue,cz=lz(function(n,r){return oz(r,[n])}),Az=cz,uz=ue,dz=uz(function(n,r){return n.apply(this,r)}),v6=dz,hz=Je,fz=da,gz=hz(function(n){for(var r=fz(n),s=r.length,a=[],i=0;i<s;)a[i]=n[r[i]],i+=1;return a}),x6=gz,mz=Je,pz=dr,yz=v6,vz=$n,xz=jl,wz=ch,bz=Ti,_z=da,Cz=x6;function o5(e,n){return pz(n)?n.map(e):_z(n).reduce(function(r,s){return r[s]=e(n[s]),r},{})}var Bz=mz(function e(n){return n=o5(function(r){return typeof r=="function"?r:e(r)},n),vz(bz(xz,0,wz("length",Cz(n))),function(){var r=arguments;return o5(function(s){return yz(s,r)},n)})}),Sz=Bz,kz=ue,jz=kz(function(n,r){return r(n)}),Nz=jz,Ez=et,Tz=Ez(function(n,r,s){var a=n(r),i=n(s);return a<i?-1:a>i?1:0}),Fz=Tz,Iz=dr,Uz=No;function Pz(e,n,r){if(Uz(e)&&Iz(r)){var s=[].concat(r);return s[e]=n,s}var a={};for(var i in r)a[i]=r[i];return a[e]=n,a}var o_=Pz,Mz=Je,Qz=Mz(function(n){return n==null}),Ah=Qz,Dz=et,Rz=kr,$z=No,Oz=o_,Lz=Ah,Hz=Dz(function e(n,r,s){if(n.length===0)return r;var a=n[0];if(n.length>1){var i=!Lz(s)&&Rz(a,s)&&typeof s[a]=="object"?s[a]:$z(n[1])?[]:{};r=e(Array.prototype.slice.call(n,1),r,i)}return Oz(a,r,s)}),l_=Hz,zz=et,Kz=l_,Gz=zz(function(n,r,s){return Kz([n],r,s)}),c_=Gz,Wz=ue,Vz=Wz(function(n,r){switch(n){case 0:return function(){return r.call(this)};case 1:return function(s){return r.call(this,s)};case 2:return function(s,a){return r.call(this,s,a)};case 3:return function(s,a,i){return r.call(this,s,a,i)};case 4:return function(s,a,i,o){return r.call(this,s,a,i,o)};case 5:return function(s,a,i,o,c){return r.call(this,s,a,i,o,c)};case 6:return function(s,a,i,o,c,A){return r.call(this,s,a,i,o,c,A)};case 7:return function(s,a,i,o,c,A,u){return r.call(this,s,a,i,o,c,A,u)};case 8:return function(s,a,i,o,c,A,u,h){return r.call(this,s,a,i,o,c,A,u,h)};case 9:return function(s,a,i,o,c,A,u,h,d){return r.call(this,s,a,i,o,c,A,u,h,d)};case 10:return function(s,a,i,o,c,A,u,h,d,f){return r.call(this,s,a,i,o,c,A,u,h,d,f)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),Rm=Vz,qz=Je,Xz=Rm,Yz=qz(function(n){return Xz(2,n)}),Jz=Yz;function Zz(e){var n=Object.prototype.toString.call(e);return n==="[object Function]"||n==="[object AsyncFunction]"||n==="[object GeneratorFunction]"||n==="[object AsyncGeneratorFunction]"}var uh=Zz,eK=ue,tK=oh,nK=i_,l5=$n,rK=Ra,sK=eK(function(n,r){var s=l5(n,r);return l5(n,function(){return tK(nK,rK(s,arguments[0]),Array.prototype.slice.call(arguments,1))})}),w6=sK,aK=Je,iK=w6,oK=aK(function(n){return iK(n.length,n)}),$m=oK,lK=ue,cK=uh,AK=y6,uK=$m,dK=lK(function(n,r){return cK(n)?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:uK(AK)(n,r)}),hK=dK,fK=Je,gK=fK(function(n){return n.apply(this,Array.prototype.slice.call(arguments,1))}),mK=gK,pK=Pm;function yK(e){return function n(r){for(var s,a,i,o=[],c=0,A=r.length;c<A;){if(pK(r[c]))for(s=e?n(r[c]):r[c],i=0,a=s.length;i<a;)o[o.length]=s[i],i+=1;else o[o.length]=r[c];c+=1}return o}}var b6=yK;function vK(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}}var xK=vK,wK=xK,bK=Pm,_K=m6,CK=Tl,sg=on,_6="@@transducer/init",Wx="@@transducer/step",C6="@@transducer/result",BK=function(){function e(n){this.xf=n}return e.prototype[_6]=sg.init,e.prototype[C6]=sg.result,e.prototype[Wx]=function(n,r){var s=this.xf[Wx](n,r);return s["@@transducer/reduced"]?wK(s):s},e}(),SK=function(){function e(n){this.xf=new BK(n)}return e.prototype[_6]=sg.init,e.prototype[C6]=sg.result,e.prototype[Wx]=function(n,r){return bK(r)?CK(this.xf,n,r):_K(this.xf,n,[r])},e}(),kK=function(n){return new SK(n)},jK=kK,NK=jK,EK=f6;function TK(e){return function(n){return EK(e)(NK(n))}}var FK=TK,IK=ue,UK=zt,PK=b6,MK=FK,QK=Ra,DK=IK(UK(["fantasy-land/chain","chain"],MK,function(n,r){return typeof r=="function"?function(s){return n(r(s))(s)}:PK(!1)(QK(n,r))})),B6=DK,RK=et,$K=RK(function(n,r,s){if(n>r)throw new Error("min must not be greater than max in clamp(min, max, value)");return s<n?n:s>r?r:s}),OK=$K;function LK(e){return new RegExp(e.source,e.flags?e.flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")+(e.dotAll?"s":""))}var S6=LK,HK=S6,zK=t_;function k6(e,n,r){if(r||(r=new GK),KK(e))return e;var s=function(i){var o=r.get(e);if(o)return o;r.set(e,i);for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(i[c]=n?k6(e[c],!0,r):e[c]);return i};switch(zK(e)){case"Object":return s(Object.create(Object.getPrototypeOf(e)));case"Array":return s([]);case"Date":return new Date(e.valueOf());case"RegExp":return HK(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var A_=k6;function KK(e){var n=typeof e;return e==null||n!="object"&&n!="function"}var GK=function(){function e(){this.map={},this.length=0}return e.prototype.set=function(n,r){const s=this.hash(n);let a=this.map[s];a||(this.map[s]=a=[]),a.push([n,r]),this.length+=1},e.prototype.hash=function(n){let r=[];for(var s in n)r.push(Object.prototype.toString.call(n[s]));return r.join()},e.prototype.get=function(n){if(this.length<=180){for(const a in this.map){const i=this.map[a];for(let o=0;o<i.length;o+=1){const c=i[o];if(c[0]===n)return c[1]}}return}const r=this.hash(n),s=this.map[r];if(s)for(let a=0;a<s.length;a+=1){const i=s[a];if(i[0]===n)return i[1]}},e}(),WK=A_,VK=Je,qK=VK(function(n){return n!=null&&typeof n.clone=="function"?n.clone():WK(n,!0)}),j6=qK,XK=ue,YK=Dm,JK=XK(function(n,r){var s=YK(function(o,c){var A=n(c);return o[A]===void 0&&(o[A]=[]),o[A].push(c),o},{},r),a=[];for(var i in s)a.push(s[i]);return a}),ZK=JK,eG=Je,tG=eG(function(n){return function(r,s){return n(r,s)?-1:n(s,r)?1:0}}),nG=tG,rG=Je,sG=rG(function(n){return!n}),N6=sG,aG=$m,iG=N6,oG=aG(iG),lG=oG;function cG(e,n){return function(){return n.call(this,e.apply(this,arguments))}}var AG=cG,uG=dr;function dG(e,n){return function(){var r=arguments.length;if(r===0)return n();var s=arguments[r-1];return uG(s)||typeof s[e]!="function"?n.apply(this,arguments):s[e].apply(s,Array.prototype.slice.call(arguments,0,r-1))}}var dh=dG,hG=dh,fG=et,gG=fG(hG("slice",function(n,r,s){return Array.prototype.slice.call(s,n,r)})),ha=gG,mG=dh,pG=Je,yG=ha,vG=pG(mG("tail",yG(1,1/0))),u_=vG,xG=Da,wG=AG,bG=Ti,_G=u_;function CG(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return xG(arguments[0].length,bG(wG,arguments[0],_G(arguments)))}var E6=CG,BG=Je,SG=jA,kG=BG(function(n){return SG(n)?n.split("").reverse().join(""):Array.prototype.slice.call(n,0).reverse()}),d_=kG,jG=E6,NG=d_;function EG(){if(arguments.length===0)throw new Error("compose requires at least one argument");return jG.apply(this,NG(arguments))}var T6=EG,TG=Nl,FG=TG(0),F6=FG;function IG(e){return e}var Om=IG,UG=Je,PG=Om,MG=UG(PG),Lm=MG,QG=Da,DG=ue,RG=F6,$G=Dm,OG=u_,LG=Lm,HG=DG(function(n,r){if(r.length<=0)return LG;var s=RG(r),a=OG(r);return QG(s.length,function(){return $G(function(i,o){return n.call(this,o,i)},s.apply(this,arguments),a)})}),I6=HG,zG=ue,KG=I6,GG=d_,WG=zG(function(n,r){return KG.apply(this,[n,GG(r)])}),VG=WG,qG=ue,c5=dr,A5=uh,u5=jA,Py=kA,XG=qG(function(n,r){if(c5(n)){if(c5(r))return n.concat(r);throw new TypeError(Py(r)+" is not an array")}if(u5(n)){if(u5(r))return n+r;throw new TypeError(Py(r)+" is not a string")}if(n!=null&&A5(n["fantasy-land/concat"]))return n["fantasy-land/concat"](r);if(n!=null&&A5(n.concat))return n.concat(r);throw new TypeError(Py(n)+' does not have a method named "concat" or "fantasy-land/concat"')}),h_=XG,YG=Da,JG=Je,ZG=Ra,eW=jl,tW=Ti,nW=JG(function(n){var r=tW(eW,0,ZG(function(s){return s[0].length},n));return YG(r,function(){for(var s=0;s<n.length;){if(n[s][0].apply(this,arguments))return n[s][1].apply(this,arguments);s+=1}})}),rW=nW,sW=Je,aW=$n,iW=sW(function(n){return aW(n.length,n)}),f_=iW,oW=ue,lW=f_,cW=Rm,AW=oW(function(n,r){if(n>10)throw new Error("Constructor with greater than ten arguments");return n===0?function(){return new r}:lW(cW(n,function(s,a,i,o,c,A,u,h,d,f){switch(n){case 1:return new r(s);case 2:return new r(s,a);case 3:return new r(s,a,i);case 4:return new r(s,a,i,o);case 5:return new r(s,a,i,o,c);case 6:return new r(s,a,i,o,c,A);case 7:return new r(s,a,i,o,c,A,u);case 8:return new r(s,a,i,o,c,A,u,h);case 9:return new r(s,a,i,o,c,A,u,h,d);case 10:return new r(s,a,i,o,c,A,u,h,d,f)}}))}),U6=AW,uW=Je,dW=U6,hW=uW(function(n){return dW(n.length,n)}),fW=hW,gW=ue,mW=ih,pW=$n,yW=jl,vW=ch,xW=Ti,wW=gW(function(n,r){return pW(xW(yW,0,vW("length",r)),function(){var s=arguments,a=this;return n.apply(a,mW(function(i){return i.apply(a,s)},r))})}),P6=wW,bW=Dm,_W=f_,CW=_W(function(e,n){return bW(function(r,s){return e(s)?r+1:r},0,n)}),BW=CW,SW=A_,kW=kr,jW=on,NW=function(){function e(n,r,s,a){this.valueFn=n,this.valueAcc=r,this.keyFn=s,this.xf=a,this.inputs={}}return e.prototype["@@transducer/init"]=jW.init,e.prototype["@@transducer/result"]=function(n){var r;for(r in this.inputs)if(kW(r,this.inputs)&&(n=this.xf["@@transducer/step"](n,this.inputs[r]),n["@@transducer/reduced"])){n=n["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){var s=this.keyFn(r);return this.inputs[s]=this.inputs[s]||[s,SW(this.valueAcc,!1)],this.inputs[s][1]=this.valueFn(this.inputs[s][1],r),n},e}();function EW(e,n,r){return function(s){return new NW(e,n,r,s)}}var TW=EW,FW=A_,IW=sh,UW=zt,PW=kr,MW=Ei,QW=Tl,DW=TW,RW=Mm,$W=IW(4,[],UW([],DW,function(n,r,s,a){var i=RW(function(o,c){var A=s(c),u=n(PW(A,o)?o[A]:FW(r,!1),c);return u&&u["@@transducer/reduced"]?MW(o):(o[A]=u,o)});return QW(i,{},a)})),Hm=$W,OW=Hm,LW=OW(function(e,n){return e+1},0),HW=LW,zW=Im,KW=zW(-1),GW=KW,WW=ue,VW=WW(function(n,r){return r==null||r!==r?n:r}),g_=VW,qW=et,XW=qW(function(n,r,s){var a=n(r),i=n(s);return a>i?-1:a<i?1:0}),YW=XW,d5=r_,JW=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(n){return!h5(n,!0,this)},e.prototype.has=function(n){return h5(n,!1,this)},e}();function h5(e,n,r){var s=typeof e,a,i;switch(s){case"string":case"number":return e===0&&1/e===-1/0?r._items["-0"]?!0:(n&&(r._items["-0"]=!0),!1):r._nativeSet!==null?n?(a=r._nativeSet.size,r._nativeSet.add(e),i=r._nativeSet.size,i===a):r._nativeSet.has(e):s in r._items?e in r._items[s]?!0:(n&&(r._items[s][e]=!0),!1):(n&&(r._items[s]={},r._items[s][e]=!0),!1);case"boolean":if(s in r._items){var o=e?1:0;return r._items[s][o]?!0:(n&&(r._items[s][o]=!0),!1)}else return n&&(r._items[s]=e?[!1,!0]:[!0,!1]),!1;case"function":return r._nativeSet!==null?n?(a=r._nativeSet.size,r._nativeSet.add(e),i=r._nativeSet.size,i===a):r._nativeSet.has(e):s in r._items?d5(e,r._items[s])?!0:(n&&r._items[s].push(e),!1):(n&&(r._items[s]=[e]),!1);case"undefined":return r._items[s]?!0:(n&&(r._items[s]=!0),!1);case"object":if(e===null)return r._items.null?!0:(n&&(r._items.null=!0),!1);default:return s=Object.prototype.toString.call(e),s in r._items?d5(e,r._items[s])?!0:(n&&r._items[s].push(e),!1):(n&&(r._items[s]=[e]),!1)}}var hh=JW,ZW=ue,eV=hh,tV=ZW(function(n,r){for(var s=[],a=0,i=n.length,o=r.length,c=new eV,A=0;A<o;A+=1)c.add(r[A]);for(;a<i;)c.add(n[a])&&(s[s.length]=n[a]),a+=1;return s}),M6=tV,f5=ah,nV=et,rV=nV(function(n,r,s){for(var a=[],i=0,o=r.length;i<o;)!f5(n,r[i],s)&&!f5(n,r[i],a)&&a.push(r[i]),i+=1;return a}),Q6=rV,sV=et,aV=sV(function(n,r,s){var a=Array.prototype.slice.call(s,0);return a.splice(n,r),a}),D6=aV,iV=No,oV=dr,lV=D6;function cV(e,n){if(n==null)return n;if(iV(e)&&oV(n))return lV(e,1,n);var r={};for(var s in n)r[s]=n[s];return delete r[e],r}var AV=cV,uV=ue,dV=AV,hV=No,fV=dr,gV=c_;function mV(e,n){if(hV(e)&&fV(n))return[].concat(n);var r={};for(var s in n)r[s]=n[s];return r}var pV=uV(function e(n,r){if(r==null)return r;switch(n.length){case 0:return r;case 1:return dV(n[0],r);default:var s=n[0],a=Array.prototype.slice.call(n,1);return r[s]==null?mV(s,r):gV(s,e(a,r[s]),r)}}),R6=pV,yV=ue,vV=R6,xV=yV(function(n,r){return vV([n],r)}),wV=xV,bV=ue,_V=bV(function(n,r){return n/r}),CV=_V,g5=on,BV=function(){function e(n,r){this.xf=r,this.n=n}return e.prototype["@@transducer/init"]=g5.init,e.prototype["@@transducer/result"]=g5.result,e.prototype["@@transducer/step"]=function(n,r){return this.n>0?(this.n-=1,n):this.xf["@@transducer/step"](n,r)},e}();function SV(e){return function(n){return new BV(e,n)}}var kV=SV,jV=ue,NV=zt,EV=kV,TV=ha,FV=jV(NV(["drop"],EV,function(n,r){return TV(Math.max(0,n),1/0,r)})),$6=FV,IV=Ei,m5=on,UV=function(){function e(n,r){this.xf=r,this.n=n,this.i=0}return e.prototype["@@transducer/init"]=m5.init,e.prototype["@@transducer/result"]=m5.result,e.prototype["@@transducer/step"]=function(n,r){this.i+=1;var s=this.n===0?n:this.xf["@@transducer/step"](n,r);return this.n>=0&&this.i>=this.n?IV(s):s},e}();function PV(e){return function(n){return new UV(e,n)}}var MV=PV,QV=ue,DV=zt,RV=MV,$V=ha,OV=QV(DV(["take"],RV,function(n,r){return $V(0,n<0?1/0:n,r)})),m_=OV,LV=m_;function HV(e,n){return LV(e<n.length?n.length-e:0,n)}var zV=HV,KV=on,GV=function(){function e(n,r){if(n<=0)return r;this.xf=r,this.pos=0,this.full=!1,this.acc=new Array(n)}return e.prototype["@@transducer/init"]=KV.init,e.prototype["@@transducer/result"]=function(n){return this.acc=null,this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.full&&(n=this.xf["@@transducer/step"](n,this.acc[this.pos])),this.store(r),n},e.prototype.store=function(n){this.acc[this.pos]=n,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e}();function WV(e){return function(n){return new GV(e,n)}}var VV=WV,qV=ue,XV=zt,YV=zV,JV=VV,ZV=qV(XV([],JV,YV)),eq=ZV,tq=ha;function nq(e,n){for(var r=n.length-1;r>=0&&e(n[r]);)r-=1;return tq(0,r+1,n)}var rq=nq,sq=on,aq=Tl,iq=function(){function e(n,r){this.f=n,this.retained=[],this.xf=r}return e.prototype["@@transducer/init"]=sq.init,e.prototype["@@transducer/result"]=function(n){return this.retained=null,this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)?this.retain(n,r):this.flush(n,r)},e.prototype.flush=function(n,r){return n=aq(this.xf,n,this.retained),this.retained=[],this.xf["@@transducer/step"](n,r)},e.prototype.retain=function(n,r){return this.retained.push(r),n},e}();function oq(e){return function(n){return new iq(e,n)}}var lq=oq,cq=ue,Aq=zt,uq=rq,dq=lq,hq=cq(Aq([],dq,uq)),fq=hq,p5=on,gq=function(){function e(n,r){this.xf=r,this.pred=n,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=p5.init,e.prototype["@@transducer/result"]=p5.result,e.prototype["@@transducer/step"]=function(n,r){var s=!1;return this.seenFirstValue?this.pred(this.lastValue,r)&&(s=!0):this.seenFirstValue=!0,this.lastValue=r,s?n:this.xf["@@transducer/step"](n,r)},e}();function mq(e){return function(n){return new gq(e,n)}}var p_=mq,pq=Nl,yq=pq(-1),O6=yq,vq=ue,xq=zt,wq=p_,bq=O6,_q=vq(xq([],wq,function(n,r){var s=[],a=1,i=r.length;if(i!==0)for(s[0]=r[0];a<i;)n(bq(s),r[a])||(s[s.length]=r[a]),a+=1;return s})),y_=_q,Cq=Je,Bq=zt,Sq=p_,kq=y_,y5=Ds,jq=Cq(Bq([],function(){return Sq(y5)},kq(y5))),Nq=jq,Eq=et,Tq=Ds,Fq=Eq(function(n,r,s){return Tq(n(r),n(s))}),L6=Fq,Iq=ue,Uq=zt,Pq=p_,Mq=y_,v5=L6,Qq=Iq(function(e,n){return Uq([],function(){return Pq(v5(e))},Mq(v5(e)))(n)}),Dq=Qq,x5=on,Rq=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=x5.init,e.prototype["@@transducer/result"]=x5.result,e.prototype["@@transducer/step"]=function(n,r){if(this.f){if(this.f(r))return n;this.f=null}return this.xf["@@transducer/step"](n,r)},e}();function $q(e){return function(n){return new Rq(e,n)}}var Oq=$q,Lq=ue,Hq=zt,zq=Oq,Kq=ha,Gq=Lq(Hq(["dropWhile"],zq,function(n,r){for(var s=0,a=r.length;s<a&&n(r[s]);)s+=1;return Kq(s,1/0,r)})),Wq=Gq,Vq=ue,qq=Vq(function(n,r){return n||r}),H6=qq,Xq=ue,Yq=uh,Jq=$m,Zq=H6,eX=Xq(function(n,r){return Yq(n)?function(){return n.apply(this,arguments)||r.apply(this,arguments)}:Jq(Zq)(n,r)}),tX=eX;function nX(e){var n=Object.prototype.toString.call(e);return n==="[object Uint8ClampedArray]"||n==="[object Int8Array]"||n==="[object Uint8Array]"||n==="[object Int16Array]"||n==="[object Uint16Array]"||n==="[object Int32Array]"||n==="[object Uint32Array]"||n==="[object Float32Array]"||n==="[object Float64Array]"||n==="[object BigInt64Array]"||n==="[object BigUint64Array]"}var rX=nX,sX=Je,aX=c6,iX=dr,oX=lh,lX=jA,cX=rX,AX=sX(function(n){return n!=null&&typeof n["fantasy-land/empty"]=="function"?n["fantasy-land/empty"]():n!=null&&n.constructor!=null&&typeof n.constructor["fantasy-land/empty"]=="function"?n.constructor["fantasy-land/empty"]():n!=null&&typeof n.empty=="function"?n.empty():n!=null&&n.constructor!=null&&typeof n.constructor.empty=="function"?n.constructor.empty():iX(n)?[]:lX(n)?"":oX(n)?{}:aX(n)?function(){return arguments}():cX(n)?n.constructor.from(""):void 0}),z6=AX,uX=ue,dX=$6,hX=uX(function(n,r){return dX(n>=0?r.length-n:0,r)}),K6=hX,fX=ue,gX=Ds,mX=K6,pX=fX(function(e,n){return gX(mX(e.length,n),e)}),yX=pX,vX=et,xX=Ds,wX=vX(function(n,r,s){return xX(r[n],s[n])}),bX=wX,_X=ue,CX=dr,BX=lh,SX=_X(function e(n,r){if(!BX(r)&&!CX(r))return r;var s=r instanceof Array?[]:{},a,i,o;for(i in r)a=n[i],o=typeof a,s[i]=o==="function"?a(r[i]):a&&o==="object"?e(a,r[i]):r[i];return s}),kX=SX,jX=Ei,NX=on,EX=function(){function e(n,r){this.xf=r,this.f=n,this.found=!1}return e.prototype["@@transducer/init"]=NX.init,e.prototype["@@transducer/result"]=function(n){return this.found||(n=this.xf["@@transducer/step"](n,void 0)),this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)&&(this.found=!0,n=jX(this.xf["@@transducer/step"](n,r))),n},e}();function TX(e){return function(n){return new EX(e,n)}}var FX=TX,IX=ue,UX=zt,PX=FX,MX=IX(UX(["find"],PX,function(n,r){for(var s=0,a=r.length;s<a;){if(n(r[s]))return r[s];s+=1}})),QX=MX,DX=Ei,RX=on,$X=function(){function e(n,r){this.xf=r,this.f=n,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=RX.init,e.prototype["@@transducer/result"]=function(n){return this.found||(n=this.xf["@@transducer/step"](n,-1)),this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.idx+=1,this.f(r)&&(this.found=!0,n=DX(this.xf["@@transducer/step"](n,this.idx))),n},e}();function OX(e){return function(n){return new $X(e,n)}}var LX=OX,HX=ue,zX=zt,KX=LX,GX=HX(zX([],KX,function(n,r){for(var s=0,a=r.length;s<a;){if(n(r[s]))return s;s+=1}return-1})),WX=GX,VX=on,qX=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=VX.init,e.prototype["@@transducer/result"]=function(n){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](n,this.last))},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)&&(this.last=r),n},e}();function XX(e){return function(n){return new qX(e,n)}}var YX=XX,JX=ue,ZX=zt,eY=YX,tY=JX(ZX([],eY,function(n,r){for(var s=r.length-1;s>=0;){if(n(r[s]))return r[s];s-=1}})),nY=tY,rY=on,sY=function(){function e(n,r){this.xf=r,this.f=n,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=rY.init,e.prototype["@@transducer/result"]=function(n){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](n,this.lastIdx))},e.prototype["@@transducer/step"]=function(n,r){return this.idx+=1,this.f(r)&&(this.lastIdx=this.idx),n},e}();function aY(e){return function(n){return new sY(e,n)}}var iY=aY,oY=ue,lY=zt,cY=iY,AY=oY(lY([],cY,function(n,r){for(var s=r.length-1;s>=0;){if(n(r[s]))return s;s-=1}return-1})),uY=AY,dY=Je,hY=b6,fY=dY(hY(!0)),gY=fY,mY=Je,pY=$n,yY=mY(function(n){return pY(n.length,function(r,s){var a=Array.prototype.slice.call(arguments,0);return a[0]=s,a[1]=r,n.apply(this,a)})}),G6=yY,vY=dh,xY=ue,wY=xY(vY("forEach",function(n,r){for(var s=r.length,a=0;a<s;)n(r[a]),a+=1;return r})),bY=wY,_Y=ue,CY=da,BY=_Y(function(n,r){for(var s=CY(r),a=0;a<s.length;){var i=s[a];n(r[i],i,r),a+=1}return r}),SY=BY,kY=Je,jY=kY(function(n){for(var r={},s=0;s<n.length;)r[n[s][0]]=n[s][1],s+=1;return r}),NY=jY,EY=dh,TY=ue,FY=Hm,IY=TY(EY("groupBy",FY(function(e,n){return e.push(n),e},[]))),UY=IY,PY=ue,MY=PY(function(e,n){for(var r=[],s=0,a=n.length;s<a;){for(var i=s+1;i<a&&e(n[i-1],n[i]);)i+=1;r.push(n.slice(s,i)),s=i}return r}),QY=MY,DY=ue,RY=DY(function(n,r){return n>r}),$Y=RY,OY=ue,LY=OY(function(n,r){return n>=r}),HY=LY,zY=ue,KY=kr,w5=Ah,GY=zY(function(n,r){if(n.length===0||w5(r))return!1;for(var s=r,a=0;a<n.length;)if(!w5(s)&&KY(n[a],s))s=s[n[a]],a+=1;else return!1;return!0}),W6=GY,WY=ue,VY=W6,qY=WY(function(n,r){return VY([n],r)}),XY=qY,YY=ue,JY=Ah,ZY=YY(function(n,r){return JY(r)?!1:n in r}),eJ=ZY,b5=l6,V6=function(e,n){switch(arguments.length){case 0:return V6;case 1:return function(){return function r(s){switch(arguments.length){case 0:return r;default:return b5(e,s)}}}();default:return b5(e,n)}},tJ=V6,nJ=et,rJ=$n,sJ=nJ(function(n,r,s){return rJ(Math.max(n.length,r.length,s.length),function(){return n.apply(this,arguments)?r.apply(this,arguments):s.apply(this,arguments)})}),aJ=sJ,iJ=Im,oJ=iJ(1),lJ=oJ,cJ=r_,AJ=ue,uJ=AJ(cJ),dJ=uJ,hJ=Hm,fJ=hJ(function(e,n){return n},null),gJ=fJ,mJ=ue,pJ=A6,yJ=dr,vJ=mJ(function(n,r){return typeof r.indexOf=="function"&&!yJ(r)?r.indexOf(n):pJ(r,n,0)}),xJ=vJ,wJ=ha,bJ=wJ(0,-1),_J=bJ,CJ=ah,BJ=et,SJ=s_,kJ=BJ(function(n,r,s){return SJ(function(a){return CJ(n,a,s)},r)}),jJ=kJ,NJ=et,EJ=NJ(function(n,r,s){n=n<s.length&&n>=0?n:s.length;var a=Array.prototype.slice.call(s,0);return a.splice(n,0,r),a}),TJ=EJ,FJ=et,IJ=FJ(function(n,r,s){return n=n<s.length&&n>=0?n:s.length,[].concat(Array.prototype.slice.call(s,0,n),r,Array.prototype.slice.call(s,n))}),UJ=IJ,PJ=hh,_5=on,MJ=function(){function e(n,r){this.xf=r,this.f=n,this.set=new PJ}return e.prototype["@@transducer/init"]=_5.init,e.prototype["@@transducer/result"]=_5.result,e.prototype["@@transducer/step"]=function(n,r){return this.set.add(this.f(r))?this.xf["@@transducer/step"](n,r):n},e}();function QJ(e){return function(n){return new MJ(e,n)}}var DJ=QJ,RJ=hh,$J=ue,OJ=zt,LJ=DJ,HJ=$J(OJ([],LJ,function(e,n){for(var r=new RJ,s=[],a=0,i,o;a<n.length;)o=n[a],i=e(o),r.add(i)&&s.push(o),a+=1;return s})),q6=HJ,zJ=Lm,KJ=q6,GJ=KJ(zJ),v_=GJ,WJ=ue,VJ=s_,qJ=hh,XJ=v_,YJ=WJ(function(n,r){for(var s=new qJ,a=0;a<n.length;a+=1)s.add(n[a]);return XJ(VJ(s.has.bind(s),r))}),JJ=YJ,ZJ=dh,eZ=ue,tZ=eZ(ZJ("intersperse",function(n,r){for(var s=[],a=0,i=r.length;a<i;)a===i-1?s.push(r[a]):s.push(r[a],n),a+=1;return s})),nZ=tZ,rZ=kr;function sZ(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1,s=arguments.length;r<s;){var a=arguments[r];if(a!=null)for(var i in a)rZ(i,a)&&(n[i]=a[i]);r+=1}return n}var zm=typeof Object.assign=="function"?Object.assign:sZ,aZ=ue,iZ=aZ(function(n,r){var s={};return s[n]=r,s}),X6=iZ,oZ=zm,x_=Om,Y6=Pm,lZ=e_,cZ=X6,AZ={"@@transducer/init":Array,"@@transducer/step":function(e,n){return e.push(n),e},"@@transducer/result":x_},uZ={"@@transducer/init":String,"@@transducer/step":function(e,n){return e+n},"@@transducer/result":x_},dZ={"@@transducer/init":Object,"@@transducer/step":function(e,n){return oZ(e,Y6(n)?cZ(n[0],n[1]):n)},"@@transducer/result":x_};function hZ(e){if(lZ(e))return e;if(Y6(e))return AZ;if(typeof e=="string")return uZ;if(typeof e=="object")return dZ;throw new Error("Cannot create transformer for "+e)}var fZ=hZ,gZ=et,mZ=e_,pZ=Tl,yZ=fZ,vZ=gZ(function(n,r,s){var a=r(mZ(n)?n:yZ(n));return pZ(a,a["@@transducer/init"](),s)}),xZ=vZ,wZ=Je,bZ=kr,_Z=da,CZ=wZ(function(n){for(var r=_Z(n),s=r.length,a=0,i={};a<s;){var o=r[a],c=n[o],A=bZ(c,i)?i[c]:i[c]=[];A[A.length]=o,a+=1}return i}),BZ=CZ,SZ=Je,kZ=da,jZ=SZ(function(n){for(var r=kZ(n),s=r.length,a=0,i={};a<s;){var o=r[a];i[n[o]]=o,a+=1}return i}),NZ=jZ,EZ=ue,TZ=uh,FZ=$n,IZ=kA,UZ=EZ(function(n,r){return FZ(n+1,function(){var s=arguments[n];if(s!=null&&TZ(s[r]))return s[r].apply(s,Array.prototype.slice.call(arguments,0,n));throw new TypeError(IZ(s)+' does not have a method named "'+r+'"')})}),fh=UZ,PZ=ue,MZ=PZ(function(n,r){return r instanceof n||r!=null&&(r.constructor===n||n.name==="Object"&&typeof r=="object")}),J6=MZ,QZ=Je,DZ=z6,RZ=Ds,$Z=QZ(function(n){return n!=null&&RZ(n,DZ(n))}),OZ=$Z,LZ=Ah,HZ=Je,zZ=HZ(function(n){return!LZ(n)}),KZ=zZ,GZ=fh,WZ=GZ(1,"join"),VZ=WZ,qZ=Je,XZ=P6,YZ=qZ(function(n){return XZ(function(){return Array.prototype.slice.call(arguments,0)},n)}),Z6=YZ,JZ=Je,ZZ=JZ(function(n){var r,s=[];for(r in n)s[s.length]=r;return s}),eee=ZZ,tee=ue,nee=dr,ree=Ds,see=tee(function(n,r){if(typeof r.lastIndexOf=="function"&&!nee(r))return r.lastIndexOf(n);for(var s=r.length-1;s>=0;){if(ree(r[s],n))return s;s-=1}return-1}),aee=see;function iee(e){return Object.prototype.toString.call(e)==="[object Number]"}var eT=iee,oee=Je,lee=eT,cee=oee(function(n){return n!=null&&lee(n.length)?n.length:NaN}),tT=cee,Aee=ue,uee=Ra,dee=Aee(function(n,r){return function(s){return function(a){return uee(function(i){return r(i,a)},s(n(a)))}}}),Km=dee,hee=et,fee=i6,gee=Qm,mee=hee(function(n,r,s){return fee(n,gee(r),s)}),nT=mee,pee=Je,yee=Km,vee=Nl,xee=nT,wee=pee(function(n){return yee(vee(n),xee(n))}),bee=wee,_ee=ue,Cee=No,Bee=Nl,See=_ee(function(n,r){return n.map(function(s){for(var a=r,i=0,o;i<s.length;){if(a==null)return;o=s[i],a=Cee(o)?Bee(o,a):a[o],i+=1}return a})}),rT=See,kee=ue,jee=rT,Nee=kee(function(n,r){return jee([n],r)[0]}),NA=Nee,Eee=Je,Tee=l_,Fee=Km,Iee=NA,Uee=Eee(function(n){return Fee(Iee(n),Tee(n))}),Pee=Uee,Mee=Je,Qee=c_,Dee=Km,Ree=El,$ee=Mee(function(n){return Dee(Ree(n),Qee(n))}),Oee=$ee,Lee=ue,Hee=Lee(function(n,r){return n<r}),zee=Hee,Kee=ue,Gee=Kee(function(n,r){return n<=r}),Wee=Gee,Vee=et,qee=Vee(function(n,r,s){for(var a=0,i=s.length,o=[],c=[r];a<i;)c=n(c[0],s[a]),o[a]=c[1],a+=1;return[c[0],o]}),Xee=qee,Yee=et,Jee=Yee(function(n,r,s){for(var a=s.length-1,i=[],o=[r];a>=0;)o=n(o[0],s[a]),i[a]=o[1],a-=1;return[o[0],i]}),Zee=Jee,ete=oh,tte=ue,nte=da,rte=tte(function(n,r){return ete(function(s,a){return s[a]=n(r[a],a,r),s},{},nte(r))}),ste=rte,ate=ue,ite=ate(function(n,r){return r.match(n)||[]}),ote=ite,lte=ue,C5=No,cte=lte(function(n,r){return C5(n)?!C5(r)||r<1?NaN:(n%r+r)%r:NaN}),Ate=cte,ute=et,dte=jl,hte=ute(function(n,r,s){var a=n(s);return dte(n(r),a)===a?s:r}),fte=hte,gte=Im,mte=Ti,pte=mte(gte,0),sT=pte,yte=Je,vte=sT,xte=yte(function(n){return vte(n)/n.length}),aT=xte,wte=Je,bte=aT,_te=wte(function(n){var r=n.length;if(r===0)return NaN;var s=2-r%2,a=(r-s)/2;return bte(Array.prototype.slice.call(n,0).sort(function(i,o){return i<o?-1:i>o?1:0}).slice(a,a+s))}),Cte=_te,Bte=Da,Ste=ue,kte=kr,jte=Ste(function(n,r){var s={};return Bte(r.length,function(){var a=n.apply(this,arguments);return kte(a,s)||(s[a]=r.apply(this,arguments)),s[a]})}),Nte=jte,Ete=zm,Tte=Je,Fte=Tte(function(n){return Ete.apply(null,[{}].concat(n))}),Ite=Fte,Ute=et,af=kr,Pte=Ute(function(n,r,s){var a={},i;r=r||{},s=s||{};for(i in r)af(i,r)&&(a[i]=af(i,s)?n(i,r[i],s[i]):r[i]);for(i in s)af(i,s)&&!af(i,a)&&(a[i]=s[i]);return a}),w_=Pte,Mte=et,B5=lh,Qte=w_,Dte=Mte(function e(n,r,s){return Qte(function(a,i,o){return B5(i)&&B5(o)?e(n,i,o):n(a,i,o)},r,s)}),Gm=Dte,Rte=ue,$te=Gm,Ote=Rte(function(n,r){return $te(function(s,a,i){return a},n,r)}),Lte=Ote,Hte=ue,zte=Gm,Kte=Hte(function(n,r){return zte(function(s,a,i){return i},n,r)}),iT=Kte,Gte=et,Wte=Gm,Vte=Gte(function(n,r,s){return Wte(function(a,i,o){return n(i,o)},r,s)}),qte=Vte,Xte=zm,Yte=ue,Jte=Yte(function(n,r){return Xte({},r,n)}),Zte=Jte,ene=zm,tne=ue,nne=tne(function(n,r){return ene({},n,r)}),rne=nne,sne=et,ane=w_,ine=sne(function(n,r,s){return ane(function(a,i,o){return n(i,o)},r,s)}),one=ine,lne=ue,S5=kA,cne=lne(function(n,r){if(n===r)return n;function s(A,u){if(A<u!=u<A)return u<A?u:A}var a=s(n,r);if(a!==void 0)return a;var i=s(typeof n,typeof r);if(i!==void 0)return i===typeof n?n:r;var o=S5(n),c=s(o,S5(r));return c!==void 0?c===o?n:r:n}),oT=cne,Ane=et,une=oT,dne=Ane(function(n,r,s){var a=n(s);return une(n(r),a)===a?s:r}),hne=dne,fne=dr,gne=No;function mne(e,n,r){if(gne(e)&&fne(r)){var s=[].concat(r);return s[e]=n(s[e]),s}var a={};for(var i in r)a[i]=r[i];return a[e]=n(a[e]),a}var pne=mne,yne=et,vne=dr,xne=lh,wne=kr,bne=o_,_ne=pne,Cne=yne(function e(n,r,s){if(!xne(s)&&!vne(s)||n.length===0)return s;var a=n[0];if(!wne(a,s))return s;if(n.length===1)return _ne(a,r,s);var i=e(Array.prototype.slice.call(n,1),r,s[a]);return i===s[a]?s:bne(a,i,s)}),lT=Cne,Bne=et,Sne=lT,kne=Bne(function(n,r,s){return Sne([n],r,s)}),jne=kne,Nne=ue,Ene=Nne(function(n,r){return n%r}),Tne=Ene,Fne=et,Ine=Fne(function(e,n,r){var s=r.length,a=r.slice(),i=e<0?s+e:e,o=n<0?s+n:n,c=a.splice(i,1);return i<0||i>=r.length||o<0||o>=r.length?r:[].concat(a.slice(0,o)).concat(c).concat(a.slice(o,r.length))}),Une=Ine,Pne=ue,Mne=Pne(function(n,r){return n*r}),cT=Mne,Qne=iT,Dne=ue,Rne=Dne((e,n)=>r=>e.call(globalThis,Qne(n,r))),$ne=Rne,One=Je,Lne=One(function(n){return-n}),Hne=Lne,zne=u6,Kne=ue,Gne=o6,Wne=Kne(function(n,r){return Gne(zne(n),r)}),Vne=Wne,qne=Je,Xne=$n,Yne=Nl,Jne=qne(function(n){var r=n<0?1:n+1;return Xne(r,function(){return Yne(n,arguments)})}),Zne=Jne,ere=et,tre=ere(function(n,r,s){return n(r(s))}),nre=tre,rre=ue,sre=rre(function(n,r){return typeof n["fantasy-land/of"]=="function"?n["fantasy-land/of"](r):typeof n.of=="function"?n.of(r):[r]}),are=sre,ire=ue,ore=ire(function(n,r){for(var s={},a={},i=0,o=n.length;i<o;)a[n[i]]=1,i+=1;for(var c in r)a.hasOwnProperty(c)||(s[c]=r[c]);return s}),lre=ore,cre=sh,Are=cre(4,[],function(n,r,s,a){return n(r(s),r(a))}),ure=Are,dre=Da,hre=Je,fre=hre(function(n){var r=!1,s;return dre(n.length,function(){return r||(r=!0,s=n.apply(this,arguments)),s})}),gre=fre,mre=uh,pre=h6;function yre(e,n){if(n==null||!mre(n.then))throw new TypeError("`"+e+"` expected a Promise, received "+pre(n,[]))}var AT=yre,vre=ue,xre=AT,wre=vre(function(n,r){return xre("otherwise",r),r.then(null,n)}),bre=wre,_re=et,uT=function(e){return{value:e,map:function(n){return uT(n(e))}}},Cre=_re(function(n,r,s){return n(function(a){return uT(r(a))})(s).value}),dT=Cre,Bre=ue,Sre=Bre(function(n,r){return[n,r]}),kre=Sre,jre=Da,Nre=ue;function Ere(e){return Nre(function(n,r){return jre(Math.max(0,n.length-r.length),function(){return n.apply(this,e(r,arguments))})})}var hT=Ere,Tre=Qs,Fre=hT,Ire=Fre(Tre),Ure=Ire,Pre=Qs,Mre=hT,Qre=G6,Dre=Mre(Qre(Pre)),Rre=Dre,$re=a_,Ore=Z6,Lre=Um,Hre=Ore([$re,Lre]),zre=Hre,Kre=et,Gre=Ds,Wre=NA,Vre=Kre(function(n,r,s){return Gre(Wre(r,s),n)}),qre=Vre,Xre=et,Yre=g_,Jre=NA,Zre=Xre(function(n,r,s){return Yre(n,Jre(r,s))}),ese=Zre,tse=et,nse=NA,rse=tse(function(n,r,s){return n(nse(r,s))}),sse=rse,ase=ue,ise=ase(function(n,r){for(var s={},a=0;a<n.length;)n[a]in r&&(s[n[a]]=r[n[a]]),a+=1;return s}),ose=ise,lse=ue,cse=lse(function(n,r){for(var s={},a=0,i=n.length;a<i;){var o=n[a];s[o]=r[o],a+=1}return s}),fT=cse,Ase=ue,use=Ase(function(n,r){var s={};for(var a in r)n(r[a],a,r)&&(s[a]=r[a]);return s}),dse=use,hse=Qs,fse=ue,gse=fse(function(n,r){return hse([n],r)}),gT=gse,mse=cT,pse=Ti,yse=pse(mse,1),vse=yse,xse=ue,wse=$n,bse=xse(function(n,r){return wse(r.length,function(){for(var s=[],a=0;a<r.length;)s.push(r[a].call(this,arguments[a])),a+=1;return n.apply(this,s.concat(Array.prototype.slice.call(arguments,r.length)))})}),mT=bse,_se=ih,Cse=Lm,Bse=fT,Sse=mT,kse=Sse(_se,[Bse,Cse]),jse=kse;function Nse(e,n,r){return function(s){return n(r(e(s)))}}var pT=Nse,k5=on,Ese=pT,Tse=function(){function e(n,r,s){this.xf=s,this.f=n,this.g=r}return e.prototype["@@transducer/init"]=k5.init,e.prototype["@@transducer/result"]=k5.result,e.prototype["@@transducer/step"]=function(n,r){return this.xf["@@transducer/step"](n,Ese(this.f,this.g,r))},e}();function Fse(e,n){return function(r){return new Tse(e,n,r)}}var Ise=Fse,Use=et,Pse=zt,Mse=pT,Qse=Ise,Dse=Use(Pse(["fantasy-land/promap","promap"],Qse,Mse)),Rse=Dse,$se=et,Ose=El,Lse=Ds,Hse=$se(function(n,r,s){return Lse(n,Ose(r,s))}),zse=Hse,Kse=et,Gse=El,Wse=J6,Vse=Kse(function(n,r,s){return Wse(n,Gse(r,s))}),qse=Vse,Xse=et,Yse=g_,Jse=El,Zse=Xse(function(n,r,s){return Yse(n,Jse(r,s))}),eae=Zse,tae=et,nae=El,rae=tae(function(n,r,s){return n(nae(r,s))}),sae=rae,aae=ue,iae=NA,oae=aae(function(n,r){return n.map(function(s){return iae([s],r)})}),lae=oae,cae=ue,j5=eT,Aae=cae(function(n,r){if(!(j5(n)&&j5(r)))throw new TypeError("Both arguments to range must be numbers");for(var s=[],a=n;a<r;)s.push(a),a+=1;return s}),uae=Aae,dae=et,hae=dae(function(n,r,s){for(var a=s.length-1;a>=0;){if(r=n(s[a],r),r&&r["@@transducer/reduced"]){r=r["@@transducer/value"];break}a-=1}return r}),yT=hae,fae=sh,gae=Tl,mae=Mm,pae=Ei,yae=fae(4,[],function(n,r,s,a){var i=mae(function(o,c){return n(o,c)?r(o,c):pae(o)});return gae(i,s,a)}),vae=yae,xae=Je,wae=Ei,bae=xae(wae),_ae=bae,Cae=ue,Bae=Cae(function(n,r){var s=Number(r),a=0,i;if(s<0||isNaN(s))throw new RangeError("n must be a non-negative number");for(i=[];a<s;)i.push(n(a)),a+=1;return i}),vT=Bae,Sae=ue,kae=Qm,jae=vT,Nae=Sae(function(n,r){return jae(kae(n),r)}),Eae=Nae,Tae=et,Fae=Tae(function(n,r,s){return s.replace(n,r)}),Iae=Fae,Uae=et,Pae=on,N5="@@transducer/init",My="@@transducer/step",Mae=function(){function e(n,r,s){this.xf=s,this.f=n,this.acc=r}return e.prototype[N5]=function(){return this.xf[My](this.xf[N5](),this.acc)},e.prototype["@@transducer/result"]=Pae.result,e.prototype[My]=function(n,r){return n["@@transducer/reduced"]?n:(this.acc=this.f(this.acc,r),this.xf[My](n,this.acc))},e}(),Qae=Uae(function(n,r,s){return new Mae(n,r,s)}),Dae=Qae,Rae=et,$ae=zt,Oae=Dae,Lae=Rae($ae([],Oae,function(n,r,s){for(var a=0,i=s.length,o=[r];a<i;)r=n(r,s[a]),o[a+1]=r,a+=1;return o})),Hae=Lae,zae=ue,Kae=i_,Gae=Ra,Wae=gT,Vae=yT,E5=Om,qae=zae(function(n,r){var s=typeof n["fantasy-land/of"]=="function"?n["fantasy-land/of"]:typeof n.of=="function"?n.of:n,a={"fantasy-land/of":s};return typeof r["fantasy-land/traverse"]=="function"?r["fantasy-land/traverse"](a,E5):typeof r.traverse=="function"?r.traverse(a,E5):Vae(function(i,o){return Kae(Gae(Wae,i),o)},s([]),r)}),xT=qae,Xae=et,Yae=Qm,Jae=dT,Zae=Xae(function(n,r,s){return Jae(n,Yae(r),s)}),eie=Zae,tie=ue,nie=tie(function(n,r){return Array.prototype.slice.call(r,0).sort(n)}),rie=nie,sie=ue,aie=sie(function(n,r){return Array.prototype.slice.call(r,0).sort(function(s,a){var i=n(s),o=n(a);return i<o?-1:i>o?1:0})}),iie=aie,oie=ue,lie=oie(function(n,r){return Array.prototype.slice.call(r,0).sort(function(s,a){for(var i=0,o=0;i===0&&o<n.length;)i=n[o](s,a),o+=1;return i})}),cie=lie,Aie=fh,uie=Aie(1,"split"),die=uie,hie=ue,fie=tT,T5=ha,gie=hie(function(n,r){return[T5(0,n,r),T5(n,fie(r),r)]}),mie=gie,pie=ue,yie=ha,vie=pie(function(n,r){if(n<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var s=[],a=0;a<r.length;)s.push(yie(a,a+=n,r));return s}),xie=vie,wie=ue,bie=wie(function(n,r){for(var s=0,a=r.length,i=[];s<a&&!n(r[s]);)i.push(r[s]),s+=1;return[i,Array.prototype.slice.call(r,s)]}),_ie=bie,Cie=sh,Bie=Cie(2,[],function(n,r){for(var s=[],a=[],i=0;i<r.length;i=i+1)n(r[i])||a.push(r[i]),(i<r.length-1&&n(r[i+1])||i===r.length-1)&&a.length>0&&(s.push(a),a=[]);return s}),Sie=Bie,kie=ue,jie=Ds,Nie=m_,Eie=kie(function(e,n){return jie(Nie(e.length,n),e)}),Tie=Eie,Fie=ue,Iie=Fie(function(n,r){return Number(n)-Number(r)}),Uie=Iie,Pie=et,wT=dr,Mie=jA,Qie=j6,Die=function(e,n,r){var s=Qie(r),a=Object.getOwnPropertyNames(s);if(a.includes(e)&&a.includes(n)){var i=s[e];s[e]=s[n],s[n]=i}return s},bT=function(e,n,r){var s=r.length,a=r.slice(),i=e<0?s+e:e,o=n<0?s+n:n,c=Math.min(i,o),A=Math.max(i,o);return i<0||i>s||o<0||o>s||i===o||(a=[].concat(a.slice(0,c)).concat(a[A]).concat(a.slice(c+1,A)).concat(a[c]).concat(a.slice(A+1,s))),a},Rie=function(e,n,r){var s=bT(e,n,r);return wT(s)?s.join(""):s},$ie=Pie(function(e,n,r){return wT(r)?bT(e,n,r):Mie(r)?Rie(e,n,r):Die(e,n,r)}),Oie=$ie,Lie=ue,Hie=h_,F5=M6,zie=Lie(function(n,r){return Hie(F5(n,r),F5(r,n))}),Kie=zie,Gie=et,Wie=h_,I5=Q6,Vie=Gie(function(n,r,s){return Wie(I5(n,r,s),I5(n,s,r))}),qie=Vie,Xie=ue,Yie=ha,Jie=Xie(function(n,r){for(var s=r.length-1;s>=0&&n(r[s]);)s-=1;return Yie(s+1,1/0,r)}),Zie=Jie,eoe=Ei,U5=on,toe=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=U5.init,e.prototype["@@transducer/result"]=U5.result,e.prototype["@@transducer/step"]=function(n,r){return this.f(r)?this.xf["@@transducer/step"](n,r):eoe(n)},e}();function noe(e){return function(n){return new toe(e,n)}}var roe=noe,soe=ue,aoe=zt,ioe=roe,ooe=ha,loe=soe(aoe(["takeWhile"],ioe,function(n,r){for(var s=0,a=r.length;s<a&&n(r[s]);)s+=1;return ooe(0,s,r)})),coe=loe,P5=on,Aoe=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=P5.init,e.prototype["@@transducer/result"]=P5.result,e.prototype["@@transducer/step"]=function(n,r){return this.f(r),this.xf["@@transducer/step"](n,r)},e}();function uoe(e){return function(n){return new Aoe(e,n)}}var doe=uoe,hoe=ue,foe=zt,goe=doe,moe=hoe(foe([],goe,function(n,r){return n(r),r})),poe=moe;function yoe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var voe=yoe,xoe=S6,woe=ue,boe=voe,_oe=kA,Coe=woe(function(n,r){if(!boe(n))throw new TypeError("test requires a value of type RegExp as its first argument; received "+_oe(n));return xoe(n).test(r)}),Boe=Coe,Soe=ue,koe=AT,joe=Soe(function(n,r){return koe("andThen",r),r.then(n)}),Noe=joe,Eoe=fh,Toe=Eoe(0,"toLowerCase"),Foe=Toe,Ioe=Je,Uoe=kr,Poe=Ioe(function(n){var r=[];for(var s in n)Uoe(s,n)&&(r[r.length]=[s,n[s]]);return r}),Moe=Poe,Qoe=Je,Doe=Qoe(function(n){var r=[];for(var s in n)r[r.length]=[s,n[s]];return r}),Roe=Doe,$oe=fh,Ooe=$oe(0,"toUpperCase"),Loe=Ooe,Hoe=Tl,zoe=Mm,Koe=$n,Goe=Koe(4,function(n,r,s,a){return Hoe(n(typeof r=="function"?zoe(r):r),s,a)}),Woe=Goe,Voe=Je,qoe=Voe(function(n){for(var r=0,s=[];r<n.length;){for(var a=n[r],i=0;i<a.length;)typeof s[i]>"u"&&(s[i]=[]),s[i].push(a[i]),i+=1;r+=1}return s}),Xoe=qoe,Yoe=et,Joe=Ra,Zoe=xT,ele=Yoe(function(n,r,s){var a=typeof n["fantasy-land/of"]=="function"?n["fantasy-land/of"]:typeof n.of=="function"?n.of:n,i={"fantasy-land/of":a};return typeof s["fantasy-land/traverse"]=="function"?s["fantasy-land/traverse"](i,r):typeof s.traverse=="function"?s.traverse(i,r):Zoe(i,Joe(r,s))}),tle=ele,M5=Je,JA=`	
\v\f\r \u2028\u2029\uFEFF`,nle="",rle=typeof String.prototype.trim=="function",sle=M5(!rle||JA.trim()||!nle.trim()?function(n){var r=new RegExp("^["+JA+"]["+JA+"]*"),s=new RegExp("["+JA+"]["+JA+"]*$");return n.replace(r,"").replace(s,"")}:function(n){return n.trim()}),ale=sle,ile=Da,ole=Qs,lle=ue,cle=lle(function(n,r){return ile(n.length,function(){try{return n.apply(this,arguments)}catch(s){return r.apply(this,ole([s],arguments))}})}),Ale=cle,ule=Je,dle=ule(function(n){return function(){return n(Array.prototype.slice.call(arguments,0))}}),hle=dle,fle=Je,gle=Rm,mle=fle(function(n){return gle(1,n)}),ple=mle,yle=ue,vle=$n,xle=yle(function(n,r){return vle(n,function(){for(var s=1,a=r,i=0,o;s<=n&&typeof a=="function";)o=s===n?arguments.length:i+a.length,a=a.apply(this,Array.prototype.slice.call(arguments,i,o)),s+=1,i=o;return a})}),wle=xle,ble=ue,_le=ble(function(n,r){for(var s=n(r),a=[];s&&s.length;)a[a.length]=s[0],s=n(s[1]);return a}),Cle=_le,Ble=Qs,Sle=ue,kle=T6,jle=v_,Nle=Sle(kle(jle,Ble)),Ele=Nle,Tle=ah,Q5=on,Fle=function(){function e(n,r){this.xf=r,this.pred=n,this.items=[]}return e.prototype["@@transducer/init"]=Q5.init,e.prototype["@@transducer/result"]=Q5.result,e.prototype["@@transducer/step"]=function(n,r){return Tle(this.pred,r,this.items)?n:(this.items.push(r),this.xf["@@transducer/step"](n,r))},e}();function Ile(e){return function(n){return new Fle(e,n)}}var Ule=Ile,Ple=ue,Mle=zt,Qle=ah,Dle=Ule,Rle=Ple(Mle([],Dle,function(e,n){for(var r=0,s=n.length,a=[],i;r<s;)i=n[r],Qle(e,i,a)||(a[a.length]=i),r+=1;return a})),_T=Rle,$le=Qs,Ole=et,Lle=_T,Hle=Ole(function(n,r,s){return Lle(n,$le(r,s))}),zle=Hle,Kle=et,Gle=Kle(function(n,r,s){return n(s)?s:r(s)}),Wle=Gle,Vle=Om,qle=B6,Xle=qle(Vle),Yle=Xle,Jle=et,Zle=Jle(function(n,r,s){for(var a=s;!n(a);)a=r(a);return a}),ece=Zle,tce=ue,nce=dr,rce=ih,sce=o_,ace=tce(function(e,n){return e in n&&nce(n[e])?rce(function(r){return sce(e,r,n)},n[e]):[n]}),ice=ace,oce=Je,lce=oce(function(n){var r,s=[];for(r in n)s[s.length]=n[r];return s}),cce=lce,Ace=ue,uce=function(e){return{value:e,"fantasy-land/map":function(){return this}}},dce=Ace(function(n,r){return n(uce)(r).value}),hce=dce,fce=et,gce=fce(function(n,r,s){return n(s)?r(s):s}),mce=gce,pce=ue,yce=kr,vce=pce(function(n,r){for(var s in n)if(yce(s,n)&&!n[s](r[s]))return!1;return!0}),CT=vce,xce=ue,wce=kr,bce=xce(function(n,r){for(var s in n)if(wce(s,n)&&n[s](r[s]))return!0;return!1}),_ce=bce,Cce=ue,Bce=Ds,Sce=Ra,kce=CT,jce=Cce(function(n,r){return kce(Sce(Bce,n),r)}),Nce=jce,Ece=ue,Tce=hh,Fce=Um,Ice=Ece(function(n,r){for(var s=new Tce,a=0;a<n.length;a+=1)s.add(n[a]);return Fce(s.has.bind(s),r)}),Uce=Ice,Pce=ue,Mce=Pce(function(n,r){return!!(!n^!r)}),Qce=Mce,Dce=ue,Rce=Dce(function(n,r){for(var s=0,a=n.length,i,o=r.length,c=[];s<a;){for(i=0;i<o;)c[c.length]=[n[s],r[i]],i+=1;s+=1}return c}),$ce=Rce,Oce=ue,Lce=Oce(function(n,r){for(var s=[],a=0,i=Math.min(n.length,r.length);a<i;)s[a]=[n[a],r[a]],a+=1;return s}),Hce=Lce,zce=ue,Kce=zce(function(n,r){for(var s=0,a=Math.min(n.length,r.length),i={};s<a;)i[n[s]]=r[s],s+=1;return i}),Gce=Kce,Wce=et,Vce=Wce(function(n,r,s){for(var a=[],i=0,o=Math.min(r.length,s.length);i<o;)a[i]=n(r[i],s[i]),i+=1;return a}),qce=Vce,Xce=$n,Yce=Je,Jce=Yce(function(n){return Xce(n.length,function(){var s=arguments;return function(){return n.apply(this,s)}})}),Zce=Jce;H.exports={};H.exports.F=BO;H.exports.T=kO;H.exports.__=jO;H.exports.add=Im;H.exports.addIndex=WO;H.exports.addIndexRight=JO;H.exports.adjust=i6;H.exports.all=o6;H.exports.allPass=m9;H.exports.always=Qm;H.exports.and=y6;H.exports.any=E9;H.exports.anyPass=Q9;H.exports.ap=i_;H.exports.aperture=iz;H.exports.append=Az;H.exports.apply=v6;H.exports.applySpec=Sz;H.exports.applyTo=Nz;H.exports.ascend=Fz;H.exports.assoc=c_;H.exports.assocPath=l_;H.exports.binary=Jz;H.exports.bind=p6;H.exports.both=hK;H.exports.call=mK;H.exports.chain=B6;H.exports.clamp=OK;H.exports.clone=j6;H.exports.collectBy=ZK;H.exports.comparator=nG;H.exports.complement=lG;H.exports.compose=T6;H.exports.composeWith=VG;H.exports.concat=h_;H.exports.cond=rW;H.exports.construct=fW;H.exports.constructN=U6;H.exports.converge=P6;H.exports.count=BW;H.exports.countBy=HW;H.exports.curry=f_;H.exports.curryN=$n;H.exports.dec=GW;H.exports.defaultTo=g_;H.exports.descend=YW;H.exports.difference=M6;H.exports.differenceWith=Q6;H.exports.dissoc=wV;H.exports.dissocPath=R6;H.exports.divide=CV;H.exports.drop=$6;H.exports.dropLast=eq;H.exports.dropLastWhile=fq;H.exports.dropRepeats=Nq;H.exports.dropRepeatsBy=Dq;H.exports.dropRepeatsWith=y_;H.exports.dropWhile=Wq;H.exports.either=tX;H.exports.empty=z6;H.exports.endsWith=yX;H.exports.eqBy=L6;H.exports.eqProps=bX;H.exports.equals=Ds;H.exports.evolve=kX;H.exports.filter=a_;H.exports.find=QX;H.exports.findIndex=WX;H.exports.findLast=nY;H.exports.findLastIndex=uY;H.exports.flatten=gY;H.exports.flip=G6;H.exports.forEach=bY;H.exports.forEachObjIndexed=SY;H.exports.fromPairs=NY;H.exports.groupBy=UY;H.exports.groupWith=QY;H.exports.gt=$Y;H.exports.gte=HY;H.exports.has=XY;H.exports.hasIn=eJ;H.exports.hasPath=W6;H.exports.head=F6;H.exports.identical=tJ;H.exports.identity=Lm;H.exports.ifElse=aJ;H.exports.inc=lJ;H.exports.includes=dJ;H.exports.indexBy=gJ;H.exports.indexOf=xJ;H.exports.init=_J;H.exports.innerJoin=jJ;H.exports.insert=TJ;H.exports.insertAll=UJ;H.exports.intersection=JJ;H.exports.intersperse=nZ;H.exports.into=xZ;H.exports.invert=BZ;H.exports.invertObj=NZ;H.exports.invoker=fh;H.exports.is=J6;H.exports.isEmpty=OZ;H.exports.isNil=Ah;H.exports.isNotNil=KZ;H.exports.join=VZ;H.exports.juxt=Z6;H.exports.keys=da;H.exports.keysIn=eee;H.exports.last=O6;H.exports.lastIndexOf=aee;H.exports.length=tT;H.exports.lens=Km;H.exports.lensIndex=bee;H.exports.lensPath=Pee;H.exports.lensProp=Oee;H.exports.lift=$m;H.exports.liftN=w6;H.exports.lt=zee;H.exports.lte=Wee;H.exports.map=Ra;H.exports.mapAccum=Xee;H.exports.mapAccumRight=Zee;H.exports.mapObjIndexed=ste;H.exports.match=ote;H.exports.mathMod=Ate;H.exports.max=jl;H.exports.maxBy=fte;H.exports.mean=aT;H.exports.median=Cte;H.exports.memoizeWith=Nte;H.exports.mergeAll=Ite;H.exports.mergeDeepLeft=Lte;H.exports.mergeDeepRight=iT;H.exports.mergeDeepWith=qte;H.exports.mergeDeepWithKey=Gm;H.exports.mergeLeft=Zte;H.exports.mergeRight=rne;H.exports.mergeWith=one;H.exports.mergeWithKey=w_;H.exports.min=oT;H.exports.minBy=hne;H.exports.modify=jne;H.exports.modifyPath=lT;H.exports.modulo=Tne;H.exports.move=Une;H.exports.multiply=cT;H.exports.nAry=Rm;H.exports.partialObject=$ne;H.exports.negate=Hne;H.exports.none=Vne;H.exports.not=N6;H.exports.nth=Nl;H.exports.nthArg=Zne;H.exports.o=nre;H.exports.objOf=X6;H.exports.of=are;H.exports.omit=lre;H.exports.on=ure;H.exports.once=gre;H.exports.or=H6;H.exports.otherwise=bre;H.exports.over=dT;H.exports.pair=kre;H.exports.partial=Ure;H.exports.partialRight=Rre;H.exports.partition=zre;H.exports.path=NA;H.exports.paths=rT;H.exports.pathEq=qre;H.exports.pathOr=ese;H.exports.pathSatisfies=sse;H.exports.pick=ose;H.exports.pickAll=fT;H.exports.pickBy=dse;H.exports.pipe=E6;H.exports.pipeWith=I6;H.exports.pluck=ch;H.exports.prepend=gT;H.exports.product=vse;H.exports.project=jse;H.exports.promap=Rse;H.exports.prop=El;H.exports.propEq=zse;H.exports.propIs=qse;H.exports.propOr=eae;H.exports.propSatisfies=sae;H.exports.props=lae;H.exports.range=uae;H.exports.reduce=Ti;H.exports.reduceBy=Hm;H.exports.reduceRight=yT;H.exports.reduceWhile=vae;H.exports.reduced=_ae;H.exports.reject=Um;H.exports.remove=D6;H.exports.repeat=Eae;H.exports.replace=Iae;H.exports.reverse=d_;H.exports.scan=Hae;H.exports.sequence=xT;H.exports.set=eie;H.exports.slice=ha;H.exports.sort=rie;H.exports.sortBy=iie;H.exports.sortWith=cie;H.exports.split=die;H.exports.splitAt=mie;H.exports.splitEvery=xie;H.exports.splitWhen=_ie;H.exports.splitWhenever=Sie;H.exports.startsWith=Tie;H.exports.subtract=Uie;H.exports.sum=sT;H.exports.swap=Oie;H.exports.symmetricDifference=Kie;H.exports.symmetricDifferenceWith=qie;H.exports.tail=u_;H.exports.take=m_;H.exports.takeLast=K6;H.exports.takeLastWhile=Zie;H.exports.takeWhile=coe;H.exports.tap=poe;H.exports.test=Boe;H.exports.andThen=Noe;H.exports.times=vT;H.exports.toLower=Foe;H.exports.toPairs=Moe;H.exports.toPairsIn=Roe;H.exports.toString=kA;H.exports.toUpper=Loe;H.exports.transduce=Woe;H.exports.transpose=Xoe;H.exports.traverse=tle;H.exports.trim=ale;H.exports.tryCatch=Ale;H.exports.type=t_;H.exports.unapply=hle;H.exports.unary=ple;H.exports.uncurryN=wle;H.exports.unfold=Cle;H.exports.union=Ele;H.exports.unionWith=zle;H.exports.uniq=v_;H.exports.uniqBy=q6;H.exports.uniqWith=_T;H.exports.unless=Wle;H.exports.unnest=Yle;H.exports.until=ece;H.exports.unwind=ice;H.exports.update=nT;H.exports.useWith=mT;H.exports.values=x6;H.exports.valuesIn=cce;H.exports.view=hce;H.exports.when=mce;H.exports.where=CT;H.exports.whereAny=_ce;H.exports.whereEq=Nce;H.exports.without=Uce;H.exports.xor=Qce;H.exports.xprod=$ce;H.exports.zip=Hce;H.exports.zipObj=Gce;H.exports.zipWith=qce;H.exports.thunkify=Zce;var gh=H.exports,BT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.curried=void 0;const n=r=>s=>{if(s.length===0)return[[],[]];const a=[];s.forEach((c,A)=>{a.push([r[A],A,s[A]])}),a.sort(([c],[A])=>c-A);const i=[],o=[];return a.forEach(([c,A,u])=>{o.push(A),i.push(u)}),[i,o]};e.curried=n,e.default=(r,s)=>(0,e.curried)(r)(s)})(BT);var ST={},Wm={},Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});Xt.utilSumQ=Xt.utilA=Xt.sum=Xt.score=Xt.rankings=Xt.ladderPairs=Xt.gamma=Xt.default=void 0;var eAe=gh,tAe=nAe(It);function nAe(e){return e&&e.__esModule?e:{default:e}}const Nd=(e,n)=>e+n;Xt.sum=Nd;const rAe=(e,n)=>e<n?0:e>n?1:.5;Xt.score=rAe;const kT=(e,n=[])=>{const r=e.map((i,o)=>n[o]||o),s=new Array(e.length);let a=0;for(let i=0;i<r.length;i+=1)i>0&&r[i-1]<r[i]&&(a=i),s[i]=a;return s};Xt.rankings=kT;const sAe=e=>n=>{const r=kT(n,e.rank);return n.map((s,a)=>[s.map(({mu:i})=>i).reduce(Nd,0),s.map(({sigma:i})=>i*i).reduce(Nd,0),s,r[a]])},aAe=e=>{const n=e.length,r=[void 0,...e.slice(0,n-1)],s=[...e.slice(1),void 0];return(0,eAe.zip)(r,s).map(([a,i])=>a!==void 0&&i!==void 0?[a,i]:a!==void 0&&i===void 0?[a]:a===void 0&&i!==void 0?[i]:[])};Xt.ladderPairs=aAe;const iAe=e=>{const{BETASQ:n}=(0,tAe.default)(e);return r=>Math.sqrt(r.map(([s,a,i,o])=>a+n).reduce(Nd,0))},oAe=(e,n)=>e.map(([r,s,a,i])=>e.filter(([o,c,A,u])=>u>=i).map(([o,c,A,u])=>Math.exp(o/n)).reduce(Nd,0));Xt.utilSumQ=oAe;const lAe=e=>e.map(([n,r,s,a])=>e.filter(([i,o,c,A])=>a===A).length);Xt.utilA=lAe;const jT=e=>e.gamma??((n,r,s,a,i,o)=>Math.sqrt(a)/n);Xt.gamma=jT;var cAe=e=>({utilC:iAe(e),teamRating:sAe(e),gamma:jT(e)});Xt.default=cAe;Object.defineProperty(Wm,"__esModule",{value:!0});Wm.default=void 0;var Qy=dAe(Xt),AAe=uAe(It);function uAe(e){return e&&e.__esModule?e:{default:e}}function NT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(NT=function(s){return s?r:n})(e)}function dAe(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=NT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}const hAe=(e,n={})=>{const{EPSILON:r}=(0,AAe.default)(n),{utilC:s,teamRating:a,gamma:i}=(0,Qy.default)(n),o=a(e),c=s(o),A=(0,Qy.utilSumQ)(o,c),u=(0,Qy.utilA)(o);return o.map((h,d)=>{const[f,g,m,y]=h,v=Math.exp(f/c),[p,x]=o.filter(([B,k,N,C])=>C<=y).reduce(([B,k],[N],C)=>{const j=v/A[C];return[B+(d===C?1-j:-j)/u[C],k+j*(1-j)/u[C]]},[0,0]),b=i(c,o.length,...h),w=p*(g/c),_=b*x*(g/c**2);return m.map(({mu:B,sigma:k})=>({mu:B+k**2/g*w,sigma:k*Math.sqrt(Math.max(1-k**2/g*_,r))}))})};var fAe=hAe;Wm.default=fAe;var Vm={};Object.defineProperty(Vm,"__esModule",{value:!0});Vm.default=void 0;var D5=pAe(Xt),gAe=mAe(It);function mAe(e){return e&&e.__esModule?e:{default:e}}function ET(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(ET=function(s){return s?r:n})(e)}function pAe(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=ET(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}const yAe=(e,n={})=>{const{TWOBETASQ:r,EPSILON:s}=(0,gAe.default)(n),{teamRating:a,gamma:i}=(0,D5.default)(n),o=a(e);return o.map((c,A)=>{const[u,h,d,f]=c,[g,m]=o.filter((y,v)=>v!==A).reduce(([y,v],[p,x,b,w])=>{const _=Math.sqrt(h+x+r),B=1/(1+Math.exp((p-u)/_)),k=h/_,N=i(_,o.length,...c);return[y+k*((0,D5.score)(w,f)-B),v+N*k/_*B*(1-B)]},[0,0]);return d.map(({mu:y,sigma:v})=>{const p=v*v;return{mu:y+p/h*g,sigma:v*Math.sqrt(Math.max(1-p/h*m,s))}})})};var vAe=yAe;Vm.default=vAe;var qm={};Object.defineProperty(qm,"__esModule",{value:!0});qm.default=void 0;var xAe=gh,Dy=_Ae(Xt),wAe=bAe(It);function bAe(e){return e&&e.__esModule?e:{default:e}}function TT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(TT=function(s){return s?r:n})(e)}function _Ae(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=TT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}const CAe=(e,n={})=>{const{TWOBETASQ:r,EPSILON:s}=(0,wAe.default)(n),{teamRating:a,gamma:i}=(0,Dy.default)(n),o=a(e),c=(0,Dy.ladderPairs)(o);return(0,xAe.zip)(o,c).map(([A,u])=>{const[h,d,f,g]=A,[m,y]=u.reduce(([v,p],[x,b,w,_])=>{const B=Math.sqrt(d+b+r),k=1/(1+Math.exp((x-h)/B)),N=d/B,C=i(B,o.length,...A);return[v+N*((0,Dy.score)(_,g)-k),p+C*N/B*k*(1-k)]},[0,0]);return f.map(({mu:v,sigma:p})=>{const x=p*p;return{mu:v+x/d*m,sigma:p*Math.sqrt(Math.max(1-x/d*y,s))}})})};var BAe=CAe;qm.default=BAe;var Xm={},Bn={},FT={exports:{}},IT={exports:{}};(function(e,n){(function(r){const s=Math.PI*2;function a(i,o,c=null){var A,u;c?(A=c(),u=c()):(A=Math.random(),u=Math.random());var h=Math.sqrt(-2*Math.log(A))*Math.cos(s*u);return h*o+i}r(a)})(function(r){e.exports=r})})(IT);var SAe=IT.exports;(function(e,n){(function(r){const s=SAe;var a=function(u){var h=Math.abs(u),d=1/(1+h/2),f=d*Math.exp(-h*h-1.26551223+d*(1.00002368+d*(.37409196+d*(.09678418+d*(-.18628806+d*(.27886807+d*(-1.13520398+d*(1.48851587+d*(-.82215223+d*.17087277)))))))));return u>=0?f:2-f},i=function(u){if(u>=2)return-100;if(u<=0)return 100;for(var h=u<1?u:2-u,d=Math.sqrt(-2*Math.log(h/2)),f=-.70711*((2.30753+d*.27061)/(1+d*(.99229+d*.04481))-d),g=0;g<2;g++){var m=a(f)-h;f+=m/(1.1283791670955126*Math.exp(-(f*f))-f*m)}return u<1?f:-f},o=function(u,h){if(h<=0)throw new Error("Variance must be > 0 (but was "+h+")");this.mean=u,this.variance=h,this.standardDeviation=Math.sqrt(h)};o.prototype.pdf=function(u){var h=this.standardDeviation*Math.sqrt(2*Math.PI),d=Math.exp(-Math.pow(u-this.mean,2)/(2*this.variance));return d/h},o.prototype.cdf=function(u){return .5*a(-(u-this.mean)/(this.standardDeviation*Math.sqrt(2)))},o.prototype.ppf=function(u){return this.mean-this.standardDeviation*Math.sqrt(2)*i(2*u)},o.prototype.mul=function(u){if(typeof u=="number")return this.scale(u);var h=1/this.variance,d=1/u.variance;return A(h+d,h*this.mean+d*u.mean)},o.prototype.div=function(u){if(typeof u=="number")return this.scale(1/u);var h=1/this.variance,d=1/u.variance;return A(h-d,h*this.mean-d*u.mean)},o.prototype.add=function(u){return c(this.mean+u.mean,this.variance+u.variance)},o.prototype.sub=function(u){return c(this.mean-u.mean,this.variance+u.variance)},o.prototype.scale=function(u){return c(this.mean*u,this.variance*u*u)},o.prototype.random=function(u,h=null){let d=this.mean,f=this.standardDeviation;return Array(u).fill(0).map(()=>s(d,f,h))};var c=function(u,h){return new o(u,h)},A=function(u,h){return c(h/u,1/u)};r(c)})(function(r){e.exports=r})})(FT);var kAe=FT.exports;Object.defineProperty(Bn,"__esModule",{value:!0});Bn.wt=Bn.w=Bn.vt=Bn.v=Bn.phiMinor=Bn.phiMajorInverse=Bn.phiMajor=void 0;var jAe=NAe(kAe);function NAe(e){return e&&e.__esModule?e:{default:e}}const b_=(0,jAe.default)(0,1),xl=e=>b_.cdf(e);Bn.phiMajor=xl;const EAe=e=>b_.ppf(e);Bn.phiMajorInverse=EAe;const cA=e=>b_.pdf(e);Bn.phiMinor=cA;const Vx=(e,n)=>{const r=e-n,s=xl(r);return s<Number.EPSILON?-r:cA(r)/s};Bn.v=Vx;const TAe=(e,n)=>{const r=e-n;return xl(r)<Number.EPSILON?e<0?1:0:Vx(e,n)*(Vx(e,n)+r)};Bn.w=TAe;const qx=(e,n)=>{const r=Math.abs(e),s=xl(n-r)-xl(-n-r);if(s<1e-5)return e<0?-e-n:-e+n;const a=cA(-n-r)-cA(n-r);return(e<0?-a:a)/s};Bn.vt=qx;const FAe=(e,n)=>{const r=Math.abs(e),s=xl(n-r)-xl(-n-r);return s<Number.EPSILON?1:((n-r)*cA(n-r)+(n+r)*cA(-n-r))/s+qx(e,n)*qx(e,n)};Bn.wt=FAe;Object.defineProperty(Xm,"__esModule",{value:!0});Xm.default=void 0;var IAe=UT(Xt),UAe=UT(It),of=Bn;function UT(e){return e&&e.__esModule?e:{default:e}}const PAe=(e,n={})=>{const{TWOBETASQ:r,EPSILON:s}=(0,UAe.default)(n),{teamRating:a,gamma:i}=(0,IAe.default)(n),o=a(e);return o.map((c,A)=>{const[u,h,d,f]=c,[g,m]=o.filter((y,v)=>A!==v).reduce(([y,v],[p,x,b,w])=>{const _=Math.sqrt(h+x+r),B=(u-p)/_,k=h/_,N=i(_,o.length,...c);if(w===f)return[y+k*(0,of.vt)(B,s/_),v+N*k/_*(0,of.wt)(B,s/_)];const C=w>f?1:-1;return[y+C*k*(0,of.v)(C*B,s/_),v+N*k/_*(0,of.w)(C*B,s/_)]},[0,0]);return d.map(({mu:y,sigma:v})=>{const p=v*v;return{mu:y+p/h*g,sigma:v*Math.sqrt(Math.max(1-p/h*m,s))}})})};var MAe=PAe;Xm.default=MAe;var Ym={};Object.defineProperty(Ym,"__esModule",{value:!0});Ym.default=void 0;var QAe=gh,R5=$Ae(Xt),lf=Bn,DAe=RAe(It);function RAe(e){return e&&e.__esModule?e:{default:e}}function PT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(PT=function(s){return s?r:n})(e)}function $Ae(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=PT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}const OAe=(e,n={})=>{const{TWOBETASQ:r,EPSILON:s}=(0,DAe.default)(n),{teamRating:a,gamma:i}=(0,R5.default)(n),o=a(e),c=(0,R5.ladderPairs)(o);return(0,QAe.zip)(o,c).map(([A,u])=>{const[h,d,f,g]=A,[m,y]=u.reduce(([v,p],[x,b,w,_])=>{const B=2*Math.sqrt(d+b+r),k=(h-x)/B,N=d/B,C=i(B,o.length,...A);if(_===g)return[v+N*(0,lf.vt)(k,s/B),p+C*N/B*(0,lf.wt)(k,s/B)];const j=_>g?1:-1;return[v+j*N*(0,lf.v)(j*k,s/B),p+C*N/B*(0,lf.w)(j*k,s/B)]},[0,0]);return f.map(({mu:v,sigma:p})=>{const x=p*p;return{mu:v+x/d*m,sigma:p*Math.sqrt(Math.max(1-x/d*y,s))}})})};var LAe=OAe;Ym.default=LAe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"bradleyTerryFull",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"bradleyTerryPart",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"plackettLuce",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"thurstoneMostellerFull",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"thurstoneMostellerPart",{enumerable:!0,get:function(){return i.default}});var n=o(Wm),r=o(Vm),s=o(qm),a=o(Xm),i=o(Ym);function o(c){return c&&c.__esModule?c:{default:c}}})(ST);Object.defineProperty(Tm,"__esModule",{value:!0});Tm.default=void 0;var Ry=gh,$5=zAe(BT),HAe=ST;function zAe(e){return e&&e.__esModule?e:{default:e}}const KAe=(e,n={})=>{var u;const r=n.model??HAe.plackettLuce;let s=e;if(n.tau){const h=n.tau*n.tau;s=e.map(d=>d.map(f=>({...f,sigma:Math.sqrt(f.sigma*f.sigma+h)})))}const a=n.rank??((u=n.score)==null?void 0:u.map(h=>-h))??(0,Ry.range)(1,e.length+1),[i,o]=(0,$5.default)(a,s),c=r(i,{...n,rank:(0,Ry.sortBy)(Ry.identity,a)});let[A]=(0,$5.default)(o,c);return n.tau&&n.preventSigmaIncrease&&(A=A.map((h,d)=>h.map((f,g)=>({...f,sigma:Math.min(f.sigma,e[d][g].sigma)})))),A};var GAe=KAe;Tm.default=GAe;var Jm={};Object.defineProperty(Jm,"__esModule",{value:!0});Jm.default=void 0;var WAe=VAe(It);function VAe(e){return e&&e.__esModule?e:{default:e}}const qAe=(e,n={})=>{const{sigma:r,mu:s}=e,{Z:a}=(0,WAe.default)(n);return s-a*r};var XAe=qAe;Jm.default=XAe;var Zm={};Object.defineProperty(Zm,"__esModule",{value:!0});Zm.default=void 0;var YAe=eue(It),O5=ZAe(Xt),JAe=Bn;function MT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(MT=function(s){return s?r:n})(e)}function ZAe(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=MT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}function eue(e){return e&&e.__esModule?e:{default:e}}const tue=(e,n={})=>{const{teamRating:r}=(0,O5.default)(n),{BETASQ:s}=(0,YAe.default)(n),a=r(e),i=e.length,o=i*(i-1)/2;return a.map(([c,A],u)=>a.filter((h,d)=>u!==d).map(([h,d])=>(0,JAe.phiMajor)((c-h)/Math.sqrt(i*s+A**2+d**2))).reduce(O5.sum,0)/o)};var nue=tue;Zm.default=nue;var ep={};Object.defineProperty(ep,"__esModule",{value:!0});ep.default=void 0;var rue=gh,sue=iue(It),L5=aue(Xt),$y=Bn;function QT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(QT=function(s){return s?r:n})(e)}function aue(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=QT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}function iue(e){return e&&e.__esModule?e:{default:e}}const oue=(e,n={})=>{const{teamRating:r}=(0,L5.default)(n),{BETASQ:s,BETA:a}=(0,sue.default)(n),i=e.length;if(i===0)return;if(i===1)return 1;const o=i*(i-1)/(i>2?1:2),c=r(e),A=Math.sqrt((0,rue.flatten)(e).length)*a*(0,$y.phiMajorInverse)((1+1/i)/2);return Math.abs(c.map(([u,h],d)=>c.filter((f,g)=>d!==g).map(([f,g])=>{const m=Math.sqrt(i*s+h**2+g**2);return(0,$y.phiMajor)((A-u+f)/m)-(0,$y.phiMajor)((u-f-A)/m)})).flat().reduce(L5.sum,0))/o};var lue=oue;ep.default=lue;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ordinal",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"predictDraw",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"predictWin",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"rate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"rating",{enumerable:!0,get:function(){return n.default}});var n=o(Em),r=o(Tm),s=o(Jm),a=o(Zm),i=o(ep);function o(c){return c&&c.__esModule?c:{default:c}}})(ot);var DT={};Object.defineProperty(DT,"__esModule",{value:!0});var H5=function(e,n){var r=Math.pow(10,n);return Math.round(e*r)/r},cue=function(){function e(n,r){n===void 0&&(n=0),r===void 0&&(r=1),this.mean=n,this.standardDeviation=r}return e.prototype.zScore=function(n){return(n-this.mean)/this.standardDeviation},e.prototype.pdf=function(n){var r=Math.pow(Math.E,-(Math.pow(n-this.mean,2)/(2*Math.pow(this.standardDeviation,2)))),s=this.standardDeviation*Math.sqrt(2*Math.PI);return r/s},e.prototype.cdf=function(n){var r=this.zScore(n);if(r=H5(r,2),r===0)return .5;if(r<=-3.5)return 0;if(r>=3.5)return 1;var s=e.zTable,a=Math.abs(r),i=Math.floor(a*10)/10,o=H5(Math.round(a*100)%10/100,2),c=s.z.indexOf(o),A=s[i][c];return r<0?1-A:A},e.prototype.probabilityBetween=function(n,r){return Math.abs(this.cdf(n)-this.cdf(r))},Object.defineProperty(e,"zTable",{get:function(){return{z:[0,.01,.02,.03,.04,.05,.06,.07,.08,.09],0:[.5,.504,.508,.512,.516,.5199,.5239,.5279,.5319,.5359],"0.1":[.5398,.5438,.5478,.5517,.5557,.5596,.5636,.5675,.5714,.5753],"0.2":[.5793,.5832,.5871,.591,.5948,.5987,.6026,.6064,.6103,.6141],"0.3":[.6179,.6217,.6255,.6293,.6331,.6368,.6406,.6443,.648,.6517],"0.4":[.6554,.6591,.6628,.6664,.67,.6736,.6772,.6808,.6844,.6879],"0.5":[.6915,.695,.6985,.7019,.7054,.7088,.7123,.7157,.719,.7224],"0.6":[.7257,.7291,.7324,.7357,.7389,.7422,.7454,.7486,.7517,.7549],"0.7":[.758,.7611,.7642,.7673,.7704,.7734,.7764,.7794,.7823,.7852],"0.8":[.7881,.791,.7939,.7967,.7995,.8023,.8051,.8078,.8106,.8133],"0.9":[.8159,.8186,.8212,.8238,.8264,.8289,.8315,.834,.8365,.8389],1:[.8413,.8438,.8461,.8485,.8508,.8531,.8554,.8577,.8599,.8621],"1.1":[.8643,.8665,.8686,.8708,.8729,.8749,.877,.879,.881,.883],"1.2":[.8849,.8869,.8888,.8907,.8925,.8944,.8962,.898,.8997,.9015],"1.3":[.9032,.9049,.9066,.9082,.9099,.9115,.9131,.9147,.9162,.9177],"1.4":[.9192,.9207,.9222,.9236,.9251,.9265,.9279,.9292,.9306,.9319],"1.5":[.9332,.9345,.9357,.937,.9382,.9394,.9406,.9418,.9429,.9441],"1.6":[.9452,.9463,.9474,.9484,.9495,.9505,.9515,.9525,.9535,.9545],"1.7":[.9554,.9564,.9573,.9582,.9591,.9599,.9608,.9616,.9625,.9633],"1.8":[.9641,.9649,.9656,.9664,.9671,.9678,.9686,.9693,.9699,.9706],"1.9":[.9713,.9719,.9726,.9732,.9738,.9744,.975,.9756,.9761,.9767],2:[.9772,.9778,.9783,.9788,.9793,.9798,.9803,.9808,.9812,.9817],"2.1":[.9821,.9826,.983,.9834,.9838,.9842,.9846,.985,.9854,.9857],"2.2":[.9861,.9864,.9868,.9871,.9875,.9878,.9881,.9884,.9887,.989],"2.3":[.9893,.9896,.9898,.9901,.9904,.9906,.9909,.9911,.9913,.9916],"2.4":[.9918,.992,.9922,.9925,.9927,.9929,.9931,.9932,.9934,.9936],"2.5":[.9938,.994,.9941,.9943,.9945,.9946,.9948,.9949,.9951,.9952],"2.6":[.9953,.9955,.9956,.9957,.9959,.996,.9961,.9962,.9963,.9964],"2.7":[.9965,.9966,.9967,.9968,.9969,.997,.9971,.9972,.9973,.9974],"2.8":[.9974,.9975,.9976,.9977,.9977,.9978,.9979,.9979,.998,.9981],"2.9":[.9981,.9982,.9982,.9983,.9984,.9984,.9985,.9985,.9986,.9986],3:[.9987,.9987,.9987,.9988,.9988,.9989,.9989,.9989,.999,.999],"3.1":[.999,.9991,.9991,.9991,.9992,.9992,.9992,.9992,.9993,.9993],"3.2":[.9993,.9993,.9994,.9994,.9994,.9994,.9994,.9995,.9995,.9995],"3.3":[.9995,.9995,.9995,.9996,.9996,.9996,.9996,.9996,.9996,.9997],"3.4":[.9997,.9997,.9997,.9997,.9997,.9997,.9997,.9997,.9997,.9998]}},enumerable:!1,configurable:!0}),e}(),z5=DT.default=cue;function tp(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)n.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function Aue(e,n,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(h){try{u(s.next(h))}catch(d){o(d)}}function A(h){try{u(s.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):a(h.value).then(c,A)}u((s=s.apply(e,n||[])).next())})}const uue=e=>e?(...n)=>e(...n):(...n)=>fetch(...n);class __ extends Error{constructor(n,r="FunctionsError",s){super(n),this.name=r,this.context=s}}class due extends __{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class K5 extends __{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class G5 extends __{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Xx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Xx||(Xx={}));class hue{constructor(n,{headers:r={},customFetch:s,region:a=Xx.Any}={}){this.url=n,this.headers=r,this.region=a,this.fetch=uue(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Aue(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:c,method:A,body:u,signal:h,timeout:d}=s;let f={},{region:g}=s;g||(g=this.region);const m=new URL(`${this.url}/${r}`);g&&g!=="any"&&(f["x-region"]=g,m.searchParams.set("forceFunctionRegion",g));let y;u&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let v=h;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),h?(v=o.signal,h.addEventListener("abort",()=>o.abort())):v=o.signal);const p=yield this.fetch(m.toString(),{method:A||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),c),body:y,signal:v}).catch(_=>{throw new due(_)}),x=p.headers.get("x-relay-error");if(x&&x==="true")throw new K5(p);if(!p.ok)throw new G5(p);let b=((a=p.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield p.json():b==="application/octet-stream"||b==="application/pdf"?w=yield p.blob():b==="text/event-stream"?w=p:b==="multipart/form-data"?w=yield p.formData():w=yield p.text(),{data:w,error:null,response:p}}catch(c){return{data:null,error:c,response:c instanceof G5||c instanceof K5?c.context:void 0}}finally{i&&clearTimeout(i)}})}}var fue=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},gue=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,c=null,A=null,u=i.status,h=i.statusText;if(i.ok){var d,f;if(r.method!=="HEAD"){var g;const p=await i.text();p===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((g=r.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?c=p:c=JSON.parse(p))}const y=(d=r.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),v=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");y&&v&&v.length>1&&(A=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(c)&&(c.length>1?(o={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,A=null,u=406,h="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var m;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(c=[],o=null,u=200,h="OK")}catch{i.status===404&&y===""?(u=204,h="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(m=o.details)===null||m===void 0)&&m.includes("0 rows"))&&(o=null,u=200,h="OK"),o&&r.shouldThrowOnError)throw new fue(o)}return{error:o,data:c,count:A,status:u,statusText:h}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let c="";const A=i==null?void 0:i.cause;if(A){var u,h,d,f;const m=(u=A==null?void 0:A.message)!==null&&u!==void 0?u:"",y=(h=A==null?void 0:A.code)!==null&&h!==void 0?h:"";c=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,c+=`

Caused by: ${(f=A==null?void 0:A.name)!==null&&f!==void 0?f:"Error"}: ${m}`,y&&(c+=` (${y})`),A!=null&&A.stack&&(c+=`
${A.stack}`)}else{var g;c=(g=i==null?void 0:i.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,n)}returns(){return this}overrideTypes(){return this}},mue=class extends gue{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var o;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),A=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${A}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const W5=new RegExp("[,()]");var gc=class extends mue{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}regexMatch(e,n){return this.url.searchParams.append(e,`match.${n}`),this}regexIMatch(e,n){return this.url.searchParams.append(e,`imatch.${n}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}isDistinct(e,n){return this.url.searchParams.append(e,`isdistinct.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&W5.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&W5.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}},pue=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,n){const{head:r=!1,count:s}=n??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new gc({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(i.length>0){const o=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new gc({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((A,u)=>A.concat(Object.keys(u)),[]);if(c.length>0){const A=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",A.join(","))}}return new gc({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new gc({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new gc({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},yue=class RT{constructor(n,{headers:r={},schema:s,fetch:a}={}){this.url=n,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new pue(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new RT(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:s=!1,get:a=!1,count:i}={}){var o;let c;const A=new URL(`${this.url}/rpc/${n}`);let u;s||a?(c=s?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{A.searchParams.append(d,f)})):(c="POST",u=r);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new gc({method:c,url:A,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class vue{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const s=this.getWebSocketConstructor();return new s(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const xue="2.89.0",wue=`realtime-js/${xue}`,$T="1.0.0",bue="2.0.0",V5=$T,Yx=1e4,_ue=1e3,Cue=100;var Gi;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Gi||(Gi={}));var bn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(bn||(bn={}));var Ys;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ys||(Ys={}));var Jx;(function(e){e.websocket="websocket"})(Jx||(Jx={}));var Go;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Go||(Go={}));class Bue{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let s=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,s;const a=(s=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(n){var r,s;const a=(s=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(n,r,s){var a,i;const o=n.topic,c=(a=n.ref)!==null&&a!==void 0?a:"",A=(i=n.join_ref)!==null&&i!==void 0?i:"",u=n.payload.event,h=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(A.length>255)throw new Error(`joinRef length ${A.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+A.length+c.length+o.length+u.length+d.length,g=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(g),y=0;m.setUint8(y++,this.KINDS.userBroadcastPush),m.setUint8(y++,A.length),m.setUint8(y++,c.length),m.setUint8(y++,o.length),m.setUint8(y++,u.length),m.setUint8(y++,d.length),m.setUint8(y++,r),Array.from(A,p=>m.setUint8(y++,p.charCodeAt(0))),Array.from(c,p=>m.setUint8(y++,p.charCodeAt(0))),Array.from(o,p=>m.setUint8(y++,p.charCodeAt(0))),Array.from(u,p=>m.setUint8(y++,p.charCodeAt(0))),Array.from(d,p=>m.setUint8(y++,p.charCodeAt(0)));var v=new Uint8Array(g.byteLength+s.byteLength);return v.set(new Uint8Array(g),0),v.set(new Uint8Array(s),g.byteLength),v.buffer}decode(n,r){if(this._isArrayBuffer(n)){let s=this._binaryDecode(n);return r(s)}if(typeof n=="string"){const s=JSON.parse(n),[a,i,o,c,A]=s;return r({join_ref:a,ref:i,topic:o,event:c,payload:A})}return r({})}_binaryDecode(n){const r=new DataView(n),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,a)}}_decodeUserBroadcast(n,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),c=r.getUint8(4);let A=this.HEADER_LENGTH+4;const u=s.decode(n.slice(A,A+a));A=A+a;const h=s.decode(n.slice(A,A+i));A=A+i;const d=s.decode(n.slice(A,A+o));A=A+o;const f=n.slice(A,n.byteLength),g=c===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,m={type:this.BROADCAST_EVENT,event:h,payload:g};return o>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n==null?void 0:n.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([s])=>r.includes(s)))}}let OT=class{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ut;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ut||(Ut={}));const q5=(e,n,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return n?Object.keys(n).reduce((i,o)=>(i[o]=Sue(o,e,n,a),i),{}):{}},Sue=(e,n,r,s)=>{const a=n.find(c=>c.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?LT(i,o):Zx(o)},LT=(e,n)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Eue(n,r)}switch(e){case Ut.bool:return kue(n);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return jue(n);case Ut.json:case Ut.jsonb:return Nue(n);case Ut.timestamp:return Tue(n);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return Zx(n);default:return Zx(n)}},Zx=e=>e,kue=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},jue=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},Nue=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Eue=(e,n)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>LT(n,c))}return e},Tue=e=>typeof e=="string"?e.replace(" ","T"):e,HT=e=>{const n=new URL(e);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Oy{constructor(n,r,s={},a=Yx){this.channel=n,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var s;return this._hasReceived(n)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var X5;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(X5||(X5={}));class Yu{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yu.syncState(this.state,a,i,o),this.pendingDiffs.forEach(A=>{this.state=Yu.syncDiff(this.state,A,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Yu.syncDiff(this.state,a,i,o),c())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,s,a){const i=this.cloneDeep(n),o=this.transformState(r),c={},A={};return this.map(i,(u,h)=>{o[u]||(A[u]=h)}),this.map(o,(u,h)=>{const d=i[u];if(d){const f=h.map(v=>v.presence_ref),g=d.map(v=>v.presence_ref),m=h.filter(v=>g.indexOf(v.presence_ref)<0),y=d.filter(v=>f.indexOf(v.presence_ref)<0);m.length>0&&(c[u]=m),y.length>0&&(A[u]=y)}else c[u]=h}),this.syncDiff(i,{joins:c,leaves:A},s,a)}static syncDiff(n,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(c,A)=>{var u;const h=(u=n[c])!==null&&u!==void 0?u:[];if(n[c]=this.cloneDeep(A),h.length>0){const d=n[c].map(g=>g.presence_ref),f=h.filter(g=>d.indexOf(g.presence_ref)<0);n[c].unshift(...f)}s(c,h,A)}),this.map(o,(c,A)=>{let u=n[c];if(!u)return;const h=A.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),n[c]=u,a(c,u,A),u.length===0&&delete n[c]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(s=>r(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,s)=>{const a=n[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Y5;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Y5||(Y5={}));var Ju;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ju||(Ju={}));var ri;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ri||(ri={}));class Uc{constructor(n,r={config:{}},s){var a,i;if(this.topic=n,this.params=r,this.socket=s,this.bindings={},this.state=bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Oy(this,Ys.join,this.params,this.timeout),this.rejoinTimer=new OT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ys.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new Yu(this),this.broadcastEndpointURL=HT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==bn.closed){const{config:{broadcast:o,presence:c,private:A}}=this.params,u=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&a!==void 0?a:[],h=!!this.bindings[Ju.PRESENCE]&&this.bindings[Ju.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},c),{enabled:h}),postgres_changes:u,private:A};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>n==null?void 0:n(ri.CHANNEL_ERROR,g)),this._onClose(()=>n==null?void 0:n(ri.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){n==null||n(ri.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,p=[];for(let x=0;x<v;x++){const b=y[x],{filter:{event:w,schema:_,table:B,filter:k}}=b,N=g&&g[x];if(N&&N.event===w&&Uc.isFilterValueEqual(N.schema,_)&&Uc.isFilterValueEqual(N.table,B)&&Uc.isFilterValueEqual(N.filter,k))p.push(Object.assign(Object.assign({},b),{id:N.id}));else{this.unsubscribe(),this.state=bn.errored,n==null||n(ri.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,n&&n(ri.SUBSCRIBED);return}}).receive("error",g=>{this.state=bn.errored,n==null||n(ri.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(ri.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,s){return this.state===bn.joined&&n===Ju.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,s)}async httpSend(n,r,s={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(c.status===202)return{success:!0};let A=c.statusText;try{const u=await c.json();A=u.error||u.message||A}catch{}return Promise.reject(new Error(A))}async send(n,r={}){var s,a;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=n,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const A={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,A;const u=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((A=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||A===void 0)&&A.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=bn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ys.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Oy(this,Ys.leave,{},n),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bn.closed,this.bindings={}}async _fetchWithTimeout(n,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(n,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Oy(this,n,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Cue){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,s){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,s){var a,i;const o=n.toLocaleLowerCase(),{close:c,error:A,leave:u,join:h}=Ys;if(s&&[c,A,u,h].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var m,y,v;return((m=g.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(y=g.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(g=>g.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var m,y,v,p,x,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const w=g.id,_=(m=g.filter)===null||m===void 0?void 0:m.event;return w&&((y=r.ids)===null||y===void 0?void 0:y.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const w=(x=(p=g==null?void 0:g.filter)===null||p===void 0?void 0:p.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return w==="*"||w===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:y,table:v,commit_timestamp:p,type:x,errors:b}=m;f=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:p,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(m))}g.callback(f,s)})}_isClosed(){return this.state===bn.closed}_isJoined(){return this.state===bn.joined}_isJoining(){return this.state===bn.joining}_isLeaving(){return this.state===bn.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,s){const a=n.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(n,r){const s=n.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Uc.isEqual(a.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const s in n)if(n[s]!==r[s])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Ys.close,{},n)}_onError(n){this._on(Ys.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bn.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=q5(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=q5(n.columns,n.old_record)),r}}const Ly=()=>{},cf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fue=[1e3,2e3,5e3,1e4],Iue=1e4,Uue=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Pue{constructor(n,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yx,this.transport=null,this.heartbeatIntervalMs=cf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ly,this.ref=0,this.reconnectTimer=null,this.vsn=V5,this.logger=Ly,this.conn=null,this.sendBuffer=[],this.serializer=new Bue,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${Jx.websocket}`,this.httpEndpoint=HT(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=vue.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,s){this.logger(n,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Gi.connecting:return Go.Connecting;case Gi.open:return Go.Open;case Gi.closing:return Go.Closing;default:return Go.Closed}}isConnected(){return this.connectionState()===Go.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const s=`realtime:${n}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new Uc(`realtime:${n}`,r,this);return this.channels.push(i),i}}push(n){const{topic:r,event:s,payload:a,ref:i}=n,o=()=>{this.encode(n,c=>{var A;(A=this.conn)===null||A===void 0||A.send(c)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(_ue,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},cf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=r,c=o?`(${o})`:"",A=i.status||"";this.log("receive",`${A} ${s} ${a} ${c}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Gi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gi.open||this.conn.readyState===Gi.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Ys.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const s=n.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${n}${s}${a}`}_workerObjectUrl(n){let r;if(n)r=n;else{const s=new Blob([Uue],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,s=!1;if(n)r=n,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:wue};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Ys.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${n} callback`,a)}})}catch(s){this.log("error",`error triggering ${n} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new OT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,s,a,i,o,c,A,u,h,d,f,g;switch(this.transport=(r=n==null?void 0:n.transport)!==null&&r!==void 0?r:null,this.timeout=(s=n==null?void 0:n.timeout)!==null&&s!==void 0?s:Yx,this.heartbeatIntervalMs=(a=n==null?void 0:n.heartbeatIntervalMs)!==null&&a!==void 0?a:cf.HEARTBEAT_INTERVAL,this.worker=(i=n==null?void 0:n.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=n==null?void 0:n.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(c=n==null?void 0:n.heartbeatCallback)!==null&&c!==void 0?c:Ly,this.vsn=(A=n==null?void 0:n.vsn)!==null&&A!==void 0?A:V5,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=n==null?void 0:n.reconnectAfterMs)!==null&&u!==void 0?u:m=>Fue[m-1]||Iue,this.vsn){case $T:this.encode=(h=n==null?void 0:n.encode)!==null&&h!==void 0?h:(m,y)=>y(JSON.stringify(m)),this.decode=(d=n==null?void 0:n.decode)!==null&&d!==void 0?d:(m,y)=>y(JSON.parse(m));break;case bue:this.encode=(f=n==null?void 0:n.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(g=n==null?void 0:n.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var Ed=class extends Error{constructor(e,n){var r;super(e),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((r=n.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Mue(e,n,r){const s=new URL(n,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function Que(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function Due(e){const n=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:i,headers:o}){const c=Mue(e.baseUrl,s,a),A=await Que(e.auth),u=await n(c,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...A,...o},body:i?JSON.stringify(i):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&h?JSON.parse(h):h;if(!u.ok){const g=d?f:void 0,m=g==null?void 0:g.error;throw new Ed((m==null?void 0:m.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:g})}return{status:u.status,headers:u.headers,data:f}}}}function Af(e){return e.join("")}var Rue=class{constructor(e,n=""){this.client=e,this.prefix=n}async listNamespaces(e){const n=e?{parent:Af(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,n){const r={namespace:e.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Af(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Af(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Af(e.namespace)}`}),!0}catch(n){if(n instanceof Ed&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(e,n){try{return await this.createNamespace(e,n)}catch(r){if(r instanceof Ed&&r.status===409)return;throw r}}};function Vl(e){return e.join("")}var $ue=class{constructor(e,n="",r){this.client=e,this.prefix=n,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vl(e.namespace)}/tables`})).data.identifiers}async createTable(e,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vl(e.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(e,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Vl(e.namespace)}/tables/${e.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Vl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Vl(e.namespace)}/tables/${e.name}`,headers:n})).data.metadata}async tableExists(e){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Vl(e.namespace)}/tables/${e.name}`,headers:n}),!0}catch(r){if(r instanceof Ed&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,n){try{return await this.createTable(e,n)}catch(r){if(r instanceof Ed&&r.status===409)return await this.loadTable({namespace:e.namespace,name:n.name});throw r}}},Oue=class{constructor(e){var s;let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=Due({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new Rue(this.client,n),this.tableOps=new $ue(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,n){return this.namespaceOps.createNamespace(e,n)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,n){return this.tableOps.createTable(e,n)}async updateTable(e,n){return this.tableOps.updateTable(e,n)}async dropTable(e,n){await this.tableOps.dropTable(e,n)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,n){return this.namespaceOps.createNamespaceIfNotExists(e,n)}async createTableIfNotExists(e,n){return this.tableOps.createTableIfNotExists(e,n)}},np=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function nn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Lue=class extends np{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},e1=class extends np{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}};const C_=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),Hue=()=>Response,t1=e=>{if(Array.isArray(e))return e.map(r=>t1(r));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));n[a]=t1(s)}),n},zue=e=>{if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Kue=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Td(e){"@babel/helpers - typeof";return Td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Td(e)}function Gue(e,n){if(Td(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n||"default");if(Td(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Wue(e){var n=Gue(e,"string");return Td(n)=="symbol"?n:n+""}function Vue(e,n,r){return(n=Wue(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function J5(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function rt(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?J5(Object(r),!0).forEach(function(s){Vue(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const Hy=e=>{var n;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(n=e.error)===null||n===void 0?void 0:n.message)||JSON.stringify(e)},que=async(e,n,r)=>{e instanceof await Hue()&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";n(new Lue(Hy(s),a,i))}).catch(s=>{n(new e1(Hy(s),s))}):n(new e1(Hy(e),e))},Xue=(e,n,r,s)=>{const a={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"||!s?a:(zue(s)?(a.headers=rt({"Content-Type":"application/json"},n==null?void 0:n.headers),a.body=JSON.stringify(s)):a.body=s,n!=null&&n.duplex&&(a.duplex=n.duplex),rt(rt({},a),r))};async function mh(e,n,r,s,a,i){return new Promise((o,c)=>{e(r,Xue(n,s,a,i)).then(A=>{if(!A.ok)throw A;return s!=null&&s.noResolveJson?A:A.json()}).then(A=>o(A)).catch(A=>que(A,c,s))})}async function Fd(e,n,r,s){return mh(e,"GET",n,r,s)}async function qs(e,n,r,s,a){return mh(e,"POST",n,s,a,r)}async function n1(e,n,r,s,a){return mh(e,"PUT",n,s,a,r)}async function Yue(e,n,r,s){return mh(e,"HEAD",n,rt(rt({},r),{},{noResolveJson:!0}),s)}async function B_(e,n,r,s,a){return mh(e,"DELETE",n,s,a,r)}var Jue=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}};let zT;zT=Symbol.toStringTag;var Zue=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[zT]="BlobDownloadBuilder",this.promise=null}asStream(){return new Jue(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(nn(n))return{data:null,error:n};throw n}}};const ede={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Z5={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var tde=class{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=C_(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,n,r,s){var a=this;try{let i;const o=rt(rt({},Z5),s);let c=rt(rt({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const A=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),A&&i.append("metadata",a.encodeMetadata(A)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),A&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(A))):(i=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,A&&(c["x-metadata"]=a.toBase64(a.encodeMetadata(A))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(c=rt(rt({},c),s.headers));const u=a._removeEmptyFolders(n),h=a._getFinalPath(u),d=await(e=="PUT"?n1:qs)(a.fetch,`${a.url}/object/${h}`,i,rt({headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(nn(i))return{data:null,error:i};throw i}}async upload(e,n,r){return this.uploadOrUpdate("POST",e,n,r)}async uploadToSignedUrl(e,n,r,s){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),c=new URL(a.url+`/object/upload/sign/${o}`);c.searchParams.set("token",n);try{let A;const u=rt({upsert:Z5.upsert},s),h=rt(rt({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(A=new FormData,A.append("cacheControl",u.cacheControl),A.append("",r)):typeof FormData<"u"&&r instanceof FormData?(A=r,A.append("cacheControl",u.cacheControl)):(A=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:i,fullPath:(await n1(a.fetch,c.toString(),A,{headers:h})).Key},error:null}}catch(A){if(a.shouldThrowOnError)throw A;if(nn(A))return{data:null,error:A};throw A}}async createSignedUploadUrl(e,n){var r=this;try{let s=r._getFinalPath(e);const a=rt({},r.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=await qs(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(r.url+i.url),c=o.searchParams.get("token");if(!c)throw new np("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(nn(s))return{data:null,error:s};throw s}}async update(e,n,r){return this.uploadOrUpdate("PUT",e,n,r)}async move(e,n,r){var s=this;try{return{data:await qs(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(nn(a))return{data:null,error:a};throw a}}async copy(e,n,r){var s=this;try{return{data:{path:(await qs(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(nn(a))return{data:null,error:a};throw a}}async createSignedUrl(e,n,r){var s=this;try{let a=s._getFinalPath(e),i=await qs(s.fetch,`${s.url}/object/sign/${a}`,rt({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:s.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(nn(a))return{data:null,error:a};throw a}}async createSignedUrls(e,n,r){var s=this;try{const a=await qs(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:n,paths:e},{headers:s.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>rt(rt({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(nn(a))return{data:null,error:a};throw a}}download(e,n){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",i=this._getFinalPath(e),o=()=>Fd(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new Zue(o,this.shouldThrowOnError)}async info(e){var n=this;const r=n._getFinalPath(e);try{return{data:t1(await Fd(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nn(s))return{data:null,error:s};throw s}}async exists(e){var n=this;const r=n._getFinalPath(e);try{return await Yue(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(nn(s)&&s instanceof e1){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const i=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&s.push(o);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${c}`)}}}async remove(e){var n=this;try{return{data:await B_(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async list(e,n,r){var s=this;try{const a=rt(rt(rt({},ede),n),{},{prefix:e||""});return{data:await qs(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},r),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(nn(a))return{data:null,error:a};throw a}}async listV2(e,n){var r=this;try{const s=rt({},e);return{data:await qs(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(nn(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}};const KT="2.89.0",GT={"X-Client-Info":`storage-js/${KT}`};var nde=class{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=rt(rt({},GT),n),this.fetch=C_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var n=this;try{const r=n.listBucketOptionsToQueryString(e);return{data:await Fd(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async getBucket(e){var n=this;try{return{data:await Fd(n.fetch,`${n.url}/bucket/${e}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async createBucket(e,n={public:!1}){var r=this;try{return{data:await qs(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(nn(s))return{data:null,error:s};throw s}}async updateBucket(e,n){var r=this;try{return{data:await n1(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(nn(s))return{data:null,error:s};throw s}}async emptyBucket(e){var n=this;try{return{data:await qs(n.fetch,`${n.url}/bucket/${e}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var n=this;try{return{data:await B_(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},rde=class{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=rt(rt({},GT),n),this.fetch=C_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var n=this;try{return{data:await qs(n.fetch,`${n.url}/bucket`,{name:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async listBuckets(e){var n=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),a=s?`${n.url}/bucket?${s}`:`${n.url}/bucket`;return{data:await Fd(n.fetch,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}async deleteBucket(e){var n=this;try{return{data:await B_(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(nn(r))return{data:null,error:r};throw r}}from(e){var n=this;if(!Kue(e))throw new np("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Oue({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...c)=>{try{return{data:await o.apply(a,c),error:null}}catch(A){if(s)throw A;return{data:null,error:A}}}}})}};const S_={"X-Client-Info":`storage-js/${KT}`,"Content-Type":"application/json"};var WT=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function rs(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var zy=class extends WT{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},sde=class extends WT{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}};const k_=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),ade=e=>{if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},eS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ide=async(e,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";n(new zy(eS(i),s,o))}).catch(()=>{const i=s+"";n(new zy(a.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";n(new zy(a.statusText||`HTTP ${s} error`,s,i))}}else n(new sde(eS(e),e))},ode=(e,n,r,s)=>{const a={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"||!s?a:(ade(s)?(a.headers=rt({"Content-Type":"application/json"},n==null?void 0:n.headers),a.body=JSON.stringify(s)):a.body=s,rt(rt({},a),r))};async function lde(e,n,r,s,a,i){return new Promise((o,c)=>{e(r,ode(n,s,a,i)).then(A=>{if(!A.ok)throw A;if(s!=null&&s.noResolveJson)return A;const u=A.headers.get("content-type");return!u||!u.includes("application/json")?{}:A.json()}).then(A=>o(A)).catch(A=>ide(A,c,s))})}async function ss(e,n,r,s,a){return lde(e,"POST",n,s,a,r)}var cde=class{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=rt(rt({},S_),n),this.fetch=k_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var n=this;try{return{data:await ss(n.fetch,`${n.url}/CreateIndex`,e,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}async getIndex(e,n){var r=this;try{return{data:await ss(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rs(s))return{data:null,error:s};throw s}}async listIndexes(e){var n=this;try{return{data:await ss(n.fetch,`${n.url}/ListIndexes`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}async deleteIndex(e,n){var r=this;try{return{data:await ss(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(rs(s))return{data:null,error:s};throw s}}},Ade=class{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=rt(rt({},S_),n),this.fetch=k_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var n=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ss(n.fetch,`${n.url}/PutVectors`,e,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}async getVectors(e){var n=this;try{return{data:await ss(n.fetch,`${n.url}/GetVectors`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}async listVectors(e){var n=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await ss(n.fetch,`${n.url}/ListVectors`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}async queryVectors(e){var n=this;try{return{data:await ss(n.fetch,`${n.url}/QueryVectors`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}async deleteVectors(e){var n=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ss(n.fetch,`${n.url}/DeleteVectors`,e,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}},ude=class{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=rt(rt({},S_),n),this.fetch=k_(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var n=this;try{return{data:await ss(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}async getBucket(e){var n=this;try{return{data:await ss(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var n=this;try{return{data:await ss(n.fetch,`${n.url}/ListVectorBuckets`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}async deleteBucket(e){var n=this;try{return{data:await ss(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rs(r))return{data:null,error:r};throw r}}},dde=class extends ude{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new hde(this.url,this.headers,e,this.fetch)}async createBucket(e){var n=()=>super.createBucket,r=this;return n().call(r,e)}async getBucket(e){var n=()=>super.getBucket,r=this;return n().call(r,e)}async listBuckets(e={}){var n=()=>super.listBuckets,r=this;return n().call(r,e)}async deleteBucket(e){var n=()=>super.deleteBucket,r=this;return n().call(r,e)}},hde=class extends cde{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}async createIndex(e){var n=()=>super.createIndex,r=this;return n().call(r,rt(rt({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var n=()=>super.listIndexes,r=this;return n().call(r,rt(rt({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,e)}async deleteIndex(e){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,e)}index(e){return new fde(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},fde=class extends Ade{constructor(e,n,r,s,a){super(e,n,a),this.vectorBucketName=r,this.indexName=s}async putVectors(e){var n=()=>super.putVectors,r=this;return n().call(r,rt(rt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var n=()=>super.getVectors,r=this;return n().call(r,rt(rt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var n=()=>super.listVectors,r=this;return n().call(r,rt(rt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var n=()=>super.queryVectors,r=this;return n().call(r,rt(rt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var n=()=>super.deleteVectors,r=this;return n().call(r,rt(rt({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},gde=class extends nde{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new tde(this.url,this.headers,e,this.fetch)}get vectors(){return new dde(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new rde(this.url+"/iceberg",this.headers,this.fetch)}};const VT="2.89.0",mc=30*1e3,r1=3,Ky=r1*mc,mde="http://localhost:9999",pde="supabase.auth.token",yde={"X-Client-Info":`gotrue-js/${VT}`},s1="X-Supabase-Api-Version",qT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vde=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xde=10*60*1e3;class Id extends Error{constructor(n,r,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class wde extends Id{constructor(n,r,s){super(n,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function bde(e){return qe(e)&&e.name==="AuthApiError"}class Wo extends Id{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Fi extends Id{constructor(n,r,s,a){super(n,s,a),this.name=r,this.status=s}}class Vr extends Fi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _de(e){return qe(e)&&e.name==="AuthSessionMissingError"}class ql extends Fi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class uf extends Fi{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class df extends Fi{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Cde(e){return qe(e)&&e.name==="AuthImplicitGrantRedirectError"}class tS extends Fi{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bde extends Fi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class a1 extends Fi{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function Gy(e){return qe(e)&&e.name==="AuthRetryableFetchError"}class nS extends Fi{constructor(n,r,s){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class i1 extends Fi{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const ag="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rS=` 	
\r=`.split(""),Sde=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<rS.length;n+=1)e[rS[n].charCodeAt(0)]=-2;for(let n=0;n<ag.length;n+=1)e[ag[n].charCodeAt(0)]=n;return e})();function sS(e,n,r){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(ag[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(ag[s]),n.queuedBits-=6}}function XT(e,n,r){const s=Sde[e];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function aS(e){const n=[],r=o=>{n.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Nde(o,s,r)};for(let o=0;o<e.length;o+=1)XT(e.charCodeAt(o),a,i);return n.join("")}function kde(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function jde(e,n){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}kde(s,n)}}function Nde(e,n,r){if(n.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Kc(e){const n=[],r={queue:0,queuedBits:0},s=a=>{n.push(a)};for(let a=0;a<e.length;a+=1)XT(e.charCodeAt(a),r,s);return new Uint8Array(n)}function Ede(e){const n=[];return jde(e,r=>n.push(r)),new Uint8Array(n)}function el(e){const n=[],r={queue:0,queuedBits:0},s=a=>{n.push(a)};return e.forEach(a=>sS(a,r,s)),sS(null,r,s),n.join("")}function Tde(e){return Math.round(Date.now()/1e3)+e}function Fde(){return Symbol("auth-callback")}const Wn=()=>typeof window<"u"&&typeof document<"u",Uo={tested:!1,writable:!1},YT=()=>{if(!Wn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Uo.tested)return Uo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Uo.tested=!0,Uo.writable=!0}catch{Uo.tested=!0,Uo.writable=!1}return Uo.writable};function Ide(e){const n={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{n[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{n[a]=s}),n}const JT=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),Ude=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",pc=async(e,n,r)=>{await e.setItem(n,JSON.stringify(r))},Po=async(e,n)=>{const r=await e.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Gn=async(e,n)=>{await e.removeItem(n)};class rp{constructor(){this.promise=new rp.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}rp.promiseConstructor=Promise;function Wy(e){const n=e.split(".");if(n.length!==3)throw new i1("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!vde.test(n[s]))throw new i1("JWT not in base64url format");return{header:JSON.parse(aS(n[0])),payload:JSON.parse(aS(n[1])),signature:Kc(n[2]),raw:{header:n[0],payload:n[1]}}}async function Pde(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function Mde(e,n){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!n(i,null,o)){s(o);return}}catch(o){if(!n(i,o)){a(o);return}}})()})}function Qde(e){return("0"+e.toString(16)).substr(-2)}function Dde(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(n),Array.from(n,Qde).join("")}async function Rde(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function $de(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Rde(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xl(e,n,r=!1){const s=Dde();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await pc(e,`${n}-code-verifier`,a);const i=await $de(s);return[i,s===i?"plain":"s256"]}const Ode=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Lde(e){const n=e.headers.get(s1);if(!n||!n.match(Ode))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Hde(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function zde(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Kde=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Yl(e){if(!Kde.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vy(){const e={};return new Proxy(e,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Gde(e,n){return new Proxy(e,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!n.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,s,a)}})}function iS(e){return JSON.parse(JSON.stringify(e))}const Ho=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Wde=[502,503,504];async function oS(e){var n;if(!Ude(e))throw new a1(Ho(e),0);if(Wde.includes(e.status))throw new a1(Ho(e),e.status);let r;try{r=await e.json()}catch(i){throw new Wo(Ho(i),i)}let s;const a=Lde(e);if(a&&a.getTime()>=qT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new nS(Ho(r),e.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new Vr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new nS(Ho(r),e.status,r.weak_password.reasons);throw new wde(Ho(r),e.status||500,s)}const Vde=(e,n,r,s)=>{const a={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function tt(e,n,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[s1]||(i[s1]=qT["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",A=await qde(e,n,r+c,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(A):{data:Object.assign({},A),error:null}}async function qde(e,n,r,s,a,i){const o=Vde(n,s,a,i);let c;try{c=await e(r,Object.assign({},o))}catch(A){throw console.error(A),new a1(Ho(A),0)}if(c.ok||await oS(c),s!=null&&s.noResolveJson)return c;try{return await c.json()}catch(A){await oS(A)}}function Ks(e){var n;let r=null;Jde(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Tde(e.expires_in)));const s=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:r,user:s},error:null}}function lS(e){const n=Ks(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(n.data.weak_password=e.weak_password),n}function Xi(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function Xde(e){return{data:e,error:null}}function Yde(e){const{action_link:n,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=tp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:n,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},A=Object.assign({},o);return{data:{properties:c,user:A},error:null}}function cS(e){return e}function Jde(e){return e.access_token&&e.refresh_token&&e.expires_in}const qy=["global","local","others"];class Zde{constructor({url:n="",headers:r={},fetch:s}){this.url=n,this.headers=r,this.fetch=JT(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=qy[0]){if(qy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qy.join(", ")}`);try{return await tt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,r={}){try{return await tt(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xi})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:r}=n,s=tp(n,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await tt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Yde,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(qe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await tt(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Xi})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,s,a,i,o,c,A;try{const u={nextPage:null,lastPage:0,total:0},h=await tt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=n==null?void 0:n.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:cS});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(A=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&A!==void 0?A:[];return g.length>0&&(g.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(qe(u))return{data:{users:[]},error:u};throw u}}async getUserById(n){Yl(n);try{return await tt(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Xi})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Yl(n);try{return await tt(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Xi})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,r=!1){Yl(n);try{return await tt(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xi})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){Yl(n.userId);try{const{data:r,error:s}=await tt(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Yl(n.userId),Yl(n.id);try{return{data:await tt(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,s,a,i,o,c,A;try{const u={nextPage:null,lastPage:0,total:0},h=await tt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=n==null?void 0:n.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:cS});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(A=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&A!==void 0?A:[];return g.length>0&&(g.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(qe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(n){try{return await tt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await tt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await tt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(qe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(n){try{return await tt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await tt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}}function AS(e={}){return{getItem:n=>e[n]||null,setItem:(n,r)=>{e[n]=r},removeItem:n=>{delete e[n]}}}const Jl={debug:!!(globalThis&&YT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ZT extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class ehe extends ZT{}async function the(e,n,r){Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(n===0)throw Jl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ehe(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Jl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function nhe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function eF(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function rhe(e){return parseInt(e,16)}function she(e){const n=new TextEncoder().encode(e);return"0x"+Array.from(n,s=>s.toString(16).padStart(2,"0")).join("")}function ahe(e){var n;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:c,requestId:A,resources:u,scheme:h,uri:d,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((n=e.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=eF(e.address),m=h?`${h}://${s}`:s,y=e.statement?`${e.statement}
`:"",v=`${m} wants you to sign in with your Ethereum account:
${g}

${y}`;let p=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(p+=`
Expiration Time: ${a.toISOString()}`),c&&(p+=`
Not Before: ${c.toISOString()}`),A&&(p+=`
Request ID: ${A}`),u){let x=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);x+=`
- ${b}`}p+=x}return`${v}
${p}`}class pn extends Error{constructor({message:n,code:r,cause:s,name:a}){var i;super(n,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class ig extends pn{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function ihe({error:e,options:n}){var r,s,a;const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new pn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new pn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(n.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new pn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new pn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new pn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new pn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new pn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(tF(o)){if(i.rp.id!==o)return new pn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new pn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new pn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function ohe({error:e,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new pn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new pn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(tF(s)){if(r.rpId!==s)return new pn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new pn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new pn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new pn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class lhe{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const che=new lhe;function Ahe(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:n,user:r,excludeCredentials:s}=e,a=tp(e,["challenge","user","excludeCredentials"]),i=Kc(n).buffer,o=Object.assign(Object.assign({},r),{id:Kc(r.id).buffer}),c=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){c.excludeCredentials=new Array(s.length);for(let A=0;A<s.length;A++){const u=s[A];c.excludeCredentials[A]=Object.assign(Object.assign({},u),{id:Kc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return c}function uhe(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:n,allowCredentials:r}=e,s=tp(e,["challenge","allowCredentials"]),a=Kc(n).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const c=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},c),{id:Kc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return i}function dhe(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:el(new Uint8Array(e.response.attestationObject)),clientDataJSON:el(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function hhe(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:el(new Uint8Array(a.authenticatorData)),clientDataJSON:el(new Uint8Array(a.clientDataJSON)),signature:el(new Uint8Array(a.signature)),userHandle:a.userHandle?el(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function tF(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function uS(){var e,n;return!!(Wn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function fhe(e){try{const n=await navigator.credentials.create(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ig("Browser returned unexpected credential type",n)}:{data:null,error:new ig("Empty credential response",n)}}catch(n){return{data:null,error:ihe({error:n,options:e})}}}async function ghe(e){try{const n=await navigator.credentials.get(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ig("Browser returned unexpected credential type",n)}:{data:null,error:new ig("Empty credential response",n)}}catch(n){return{data:null,error:ohe({error:n,options:e})}}}const mhe={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},phe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function og(...e){const n=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(n(o)){const c=s[i];n(c)?s[i]=og(c,o):s[i]=og(o)}else s[i]=o}return s}function yhe(e,n){return og(mhe,e,n||{})}function vhe(e,n){return og(phe,e,n||{})}class xhe{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:c}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!o)return{data:null,error:c};const A=a??che.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=yhe(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:d}=await fhe({publicKey:u,signal:A});return h?{data:{factorId:n,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=vhe(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:d}=await ghe(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:A}));return h?{data:{factorId:n,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new Wo("Unexpected error in challenge",o)}}}async _verify({challengeId:n,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:s})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Id("rpId is required for WebAuthn authentication")};try{if(!uS())return{data:null,error:new Wo("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:c};const{webauthn:A}=o;return this._verify({factorId:n,challengeId:o.challengeId,webauthn:{type:A.type,rpId:r,rpOrigins:s,credential_response:A.credential_response}})}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new Wo("Unexpected error in authenticate",o)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new Id("rpId is required for WebAuthn registration")};try{if(!uS())return{data:null,error:new Wo("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this._enroll({friendlyName:n});if(!o)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===n&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:c};const{data:A,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return A?this._verify({factorId:o.id,challengeId:A.challengeId,webauthn:{rpId:r,rpOrigins:s,type:A.webauthn.type,credential_response:A.webauthn.credential_response}}):{data:null,error:u}}catch(o){return qe(o)?{data:null,error:o}:{data:null,error:new Wo("Unexpected error in register",o)}}}}nhe();const whe={url:mde,storageKey:pde,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yde,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function dS(e,n,r){return await r()}const Zl={};class Ud{get jwks(){var n,r;return(r=(n=Zl[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Zl[this.storageKey]=Object.assign(Object.assign({},Zl[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Zl[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Zl[this.storageKey]=Object.assign(Object.assign({},Zl[this.storageKey]),{cachedAt:n})}constructor(n){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},whe),n);if(this.storageKey=i.storageKey,this.instanceID=(r=Ud.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ud.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Wn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Zde({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=JT(i.fetch),this.lock=i.lock||dS,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Wn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=the:this.lock=dS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new xhe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:YT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=AS(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=AS(this.memoryStorage)),Wn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${VT}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},s="none";if(Wn()&&(r=Ide(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Wn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Cde(i)){const A=(n=i.details)===null||n===void 0?void 0:n.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return qe(r)?this._returnResult({error:r}):this._returnResult({error:new Wo("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,s,a;try{const i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=n==null?void 0:n.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ks}),{data:o,error:c}=i;if(c||!o)return this._returnResult({data:{user:null,session:null},error:c});const A=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:u,session:A},error:null})}catch(i){if(qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(n){var r,s,a;try{let i;if("email"in n){const{email:h,password:d,options:f}=n;let g=null,m=null;this.flowType==="pkce"&&([g,m]=await Xl(this.storage,this.storageKey)),i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:m},xform:Ks})}else if("phone"in n){const{phone:h,password:d,options:f}=n;i=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ks})}else throw new uf("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return await Gn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const A=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:u,session:A},error:null})}catch(i){if(await Gn(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(n){try{let r;if("email"in n){const{email:i,password:o,options:c}=n;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:lS})}else if("phone"in n){const{phone:i,password:o,options:c}=n;r=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:lS})}else throw new uf("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new ql;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,s,a,i;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=n.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=n.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,s,a,i,o,c,A,u,h,d,f;let g,m;if("message"in n)g=n.message,m=n.signature;else{const{chain:y,wallet:v,statement:p,options:x}=n;let b;if(Wn())if(typeof v=="object")b=v;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")b=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=v}const w=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),_=await b.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const B=eF(_[0]);let k=(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!k){const C=await b.request({method:"eth_chainId"});k=rhe(C)}const N={domain:w.host,address:B,statement:p,uri:w.href,version:"1",chainId:k,nonce:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(A=x==null?void 0:x.signInWithEthereum)===null||A===void 0?void 0:A.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=x==null?void 0:x.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=ahe(N),m=await b.request({method:"personal_sign",params:[she(g),B]})}try{const{data:y,error:v}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:m},!((d=n.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=n.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ks});if(v)throw v;if(!y||!y.session||!y.user){const p=new ql;return this._returnResult({data:{user:null,session:null},error:p})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(qe(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(n){var r,s,a,i,o,c,A,u,h,d,f,g;let m,y;if("message"in n)m=n.message,y=n.signature;else{const{chain:v,wallet:p,statement:x,options:b}=n;let w;if(Wn())if(typeof p=="object")w=p;else{const B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))w=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const B=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),x?{statement:x}:null));let k;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")k=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)k=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)m=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),y=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((A=b==null?void 0:b.signInWithSolana)===null||A===void 0)&&A.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const B=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=B}}try{const{data:v,error:p}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:el(y)},!((f=n.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=n.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ks});if(p)throw p;if(!v||!v.session||!v.user){const x=new ql;return this._returnResult({data:{user:null,session:null},error:x})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:p})}catch(v){if(qe(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(n){const r=await Po(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new Bde;const{data:i,error:o}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:Ks});if(await Gn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const c=new ql;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Gn(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(n){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=n,c=await tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ks}),{data:A,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!A||!A.session||!A.user){const h=new ql;return this._returnResult({data:{user:null,session:null},error:h})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:A,error:u})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,s,a,i,o;try{if("email"in n){const{email:c,options:A}=n;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Xl(this.storage,this.storageKey));const{error:d}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},create_user:(s=A==null?void 0:A.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:A==null?void 0:A.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in n){const{phone:c,options:A}=n,{data:u,error:h}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=A==null?void 0:A.data)!==null&&a!==void 0?a:{},create_user:(i=A==null?void 0:A.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(o=A==null?void 0:A.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new uf("You must provide either an email or phone number.")}catch(c){if(await Gn(this.storage,`${this.storageKey}-code-verifier`),qe(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(n){var r,s;try{let a,i;"options"in n&&(a=(r=n.options)===null||r===void 0?void 0:r.redirectTo,i=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:c}=await tt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ks});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const A=o.session,u=o.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),this._returnResult({data:{user:u,session:A},error:null})}catch(a){if(qe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(n){var r,s,a,i,o;try{let c=null,A=null;this.flowType==="pkce"&&([c,A]=await Xl(this.storage,this.storageKey));const u=await tt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=n==null?void 0:n.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:A}),headers:this.headers,xform:Xde});return!((i=u.data)===null||i===void 0)&&i.url&&Wn()&&!(!((o=n.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(await Gn(this.storage,`${this.storageKey}-code-verifier`),qe(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;if(s)throw s;if(!r)throw new Vr;const{error:a}=await tt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(n){if(qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:s,type:a,options:i}=n,{error:o}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in n){const{phone:s,type:a,options:i}=n,{data:o,error:c}=await tt(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c})}throw new uf("You must provide either an email or phone number and a type")}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Po(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<Ky:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.userStorage){const o=await Po(this.userStorage,this.storageKey+"-user");o!=null&&o.user?n.user=o.user:n.user=Vy()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};n.user=Gde(n.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:a,error:i}=await this._callRefreshToken(n.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Xi}):await this._useSession(async r=>{var s,a,i;const{data:o,error:c}=r;if(c)throw c;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vr}:await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Xi})})}catch(r){if(qe(r))return _de(r)&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Vr;const o=a.session;let c=null,A=null;this.flowType==="pkce"&&n.email!=null&&([c,A]=await Xl(this.storage,this.storageKey));const{data:u,error:h}=await tt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:c,code_challenge_method:A}),jwt:o.access_token,xform:Xi});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await Gn(this.storage,`${this.storageKey}-code-verifier`),qe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Vr;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=Wy(n.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:c,error:A}=await this._callRefreshToken(n.refresh_token);if(A)return this._returnResult({data:{user:null,session:null},error:A});if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:A}=await this._getUser(n.access_token);if(A)throw A;i={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(qe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var s;if(!n){const{data:o,error:c}=r;if(c)throw c;n=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(n!=null&&n.refresh_token))throw new Vr;const{data:a,error:i}=await this._callRefreshToken(n.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Wn())throw new df("No browser detected.");if(n.error||n.error_description||n.error_code)throw new df(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new tS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new df("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new tS("No code detected.");const{data:x,error:b}=await this._exchangeCodeForSession(n.code);if(b)throw b;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:c,expires_at:A,token_type:u}=n;if(!i||!c||!o||!u)throw new df("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(c);let f=h+d;A&&(f=parseInt(A));const g=f-h;g*1e3<=mc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const m=f-d;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,h);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const p={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:n.type},error:null})}catch(s){if(qe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Po(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:c}=await this.admin.signOut(o,n);if(c&&!(bde(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return n!=="others"&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=Fde(),s={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",n,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",i),console.error(i)}})}async resetPasswordForEmail(n,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Xl(this.storage,this.storageKey,!0));try{return await tt(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Gn(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var n;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,c,A,u,h;const{data:d,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(o=n.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(A=n.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await tt(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return Wn()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:n.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(qe(s))return this._returnResult({data:{provider:n.provider,url:null},error:s});throw s}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:c,token:A,access_token:u,nonce:h}=n,d=await tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:c,id_token:A,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ks}),{data:f,error:g}=d;return g?this._returnResult({data:{user:null,session:null},error:g}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new ql}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:g}))}catch(a){if(await Gn(this.storage,`${this.storageKey}-code-verifier`),qe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await tt(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Mde(async a=>(a>0&&await Pde(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await tt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ks})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Gy(i)&&Date.now()+o-s<mc})}catch(s){if(this._debug(r,"error",s),qe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",s),Wn()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Po(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Po(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await pc(this.userStorage,this.storageKey+"-user",o)),a.user=(n=o==null?void 0:o.user)!==null&&n!==void 0?n:Vy()}else if(a&&!a.user&&!a.user){const o=await Po(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Gn(this.storage,this.storageKey+"-user"),await pc(this.storage,this.storageKey,a)):a.user=Vy()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ky;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${Ky}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Gy(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(a.access_token);!c&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var r,s;if(!n)throw new Vr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new rp;const{data:i,error:o}=await this._refreshAccessToken(n);if(o)throw o;if(!i.session)throw new Vr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={data:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(a,"error",i),qe(i)){const o={data:null,error:i};return Gy(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(n,r,s=!0){const a=`#_notifyAllSubscribers(${n})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(n,r)}catch(A){i.push(A)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Gn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await pc(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=iS(a);await pc(this.storage,this.storageKey,i)}else{const a=iS(r);await pc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Gn(this.storage,this.storageKey),await Gn(this.storage,this.storageKey+"-code-verifier"),await Gn(this.storage,this.storageKey+"-user"),this.userStorage&&await Gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Wn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),mc);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-n)/mc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${mc}ms, refresh threshold is ${r1} ticks`),a<=r1&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof ZT)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Xl(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(c.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${a.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await tt(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:A,error:u}=await tt(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(n.factorType==="totp"&&A.type==="totp"&&(!((a=A==null?void 0:A.totp)===null||a===void 0)&&a.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),this._returnResult({data:A,error:null}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?dhe(n.webauthn.credential_response):hhe(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:A}=await tt(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return A?this._returnResult({data:null,error:A}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:A}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await tt(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:c}=o;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Ahe(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:uhe(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:s}=await this._challenge({factorId:n.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(n=r==null?void 0:r.factors)!==null&&n!==void 0?n:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Wy(s.access_token);let o=null;i.aal&&(o=i.aal);let c=o;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await tt(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Vr})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Vr});const o=await tt(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&Wn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(qe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(n,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Vr});const o=await tt(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&Wn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(qe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await tt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Vr})})}catch(n){if(qe(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?(await tt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Vr})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let s=r.keys.find(c=>c.kid===n);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(c=>c.kid===n),s&&this.jwks_cached_at+xde>a)return s;const{data:i,error:o}=await tt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(c=>c.kid===n),!s)?null:s}async getClaims(n,r={}){try{let s=n;if(!s){const{data:g,error:m}=await this.getSession();if(m||!g.session)return this._returnResult({data:null,error:m});s=g.session.access_token}const{header:a,payload:i,signature:o,raw:{header:c,payload:A}}=Wy(s);r!=null&&r.allowExpired||Hde(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:g}=await this.getUser(s);if(g)throw g;return{data:{claims:i,header:a,signature:o},error:null}}const h=zde(a.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,Ede(`${c}.${A}`)))throw new i1("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(qe(s))return this._returnResult({data:null,error:s});throw s}}}Ud.nextInstanceID={};const bhe=Ud,_he="2.89.0";let Cu="";typeof Deno<"u"?Cu="deno":typeof document<"u"?Cu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cu="react-native":Cu="node";const Che={"X-Client-Info":`supabase-js-${Cu}/${_he}`},Bhe={headers:Che},She={schema:"public"},khe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},jhe={};function Pd(e){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pd(e)}function Nhe(e,n){if(Pd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n||"default");if(Pd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Ehe(e){var n=Nhe(e,"string");return Pd(n)=="symbol"?n:n+""}function The(e,n,r){return(n=Ehe(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function hS(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function An(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?hS(Object(r),!0).forEach(function(s){The(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hS(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const Fhe=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),Ihe=()=>Headers,Uhe=(e,n,r)=>{const s=Fhe(r),a=Ihe();return async(i,o)=>{var c;const A=(c=await n())!==null&&c!==void 0?c:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${A}`),s(i,An(An({},o),{},{headers:u}))}};function Phe(e){return e.endsWith("/")?e:e+"/"}function Mhe(e,n){var r,s;const{db:a,auth:i,realtime:o,global:c}=e,{db:A,auth:u,realtime:h,global:d}=n,f={db:An(An({},A),a),auth:An(An({},u),i),realtime:An(An({},h),o),storage:{},global:An(An(An({},d),c),{},{headers:An(An({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(s=c==null?void 0:c.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function Qhe(e){const n=e==null?void 0:e.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Phe(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Dhe=class extends bhe{constructor(e){super(e)}},Rhe=class{constructor(e,n,r){var s,a;this.supabaseUrl=e,this.supabaseKey=n;const i=Qhe(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,c={db:She,realtime:jhe,auth:An(An({},khe),{},{storageKey:o}),global:Bhe},A=Mhe(r??{},c);if(this.storageKey=(s=A.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=A.global.headers)!==null&&a!==void 0?a:{},A.accessToken)this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=A.auth)!==null&&u!==void 0?u:{},this.headers,A.global.fetch)}this.fetch=Uhe(n,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(An({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new yue(new URL("rest/v1",i).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new gde(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new hue(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,n,r;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(n=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:i,flowType:o,lock:c,debug:A,throwOnError:u},h,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dhe({url:this.authUrl.href,headers:An(An({},f),h),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,flowType:o,lock:c,debug:A,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Pue(this.realtimeUrl.href,An(An({},e),{},{params:An(An({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const $he=(e,n,r)=>new Rhe(e,n,r);function Ohe(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Ohe()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Lhe="https://vldqocgemjqtmjvxhozj.supabase.co",Hhe="sb_publishable_doGcbZ1R6TOC1hBHRFu2BA_zzBpPiSZ",ce=$he(Lhe,Hhe,{auth:{autoRefreshToken:!0,persistSession:!0,storageKey:"goa-timer-auth",storage:localStorage},realtime:{params:{eventsPerSecond:10}}}),st=()=>ce!==null;class zhe{constructor(){ve(this,"syncStatusListeners",new Set);ve(this,"currentStatus",{status:"idle",progress:0,message:"Ready to sync"});ve(this,"realtimeChannels",[]);ve(this,"syncInProgress",!1);ve(this,"autoSyncEnabled",!1);ve(this,"autoSyncUnsubscribe",null);ve(this,"autoUploadEnabled",!0);ve(this,"autoUploadTimeout",null);ve(this,"autoUploadDebounceMs",3e3);ve(this,"autoSyncOwnDevicesEnabled",!1);ve(this,"autoSyncOwnDevicesUnsubscribe",null);ve(this,"ownDevicesRealtimeChannel",null);ve(this,"FRIEND_PREFS_KEY","cloudSync_friendPreferences");const n=localStorage.getItem("cloudSync_autoEnabled");this.autoSyncEnabled=n==="true";const r=localStorage.getItem("cloudSync_autoUploadEnabled");this.autoUploadEnabled=r!=="false";const s=localStorage.getItem("cloudSync_autoSyncOwnDevices");this.autoSyncOwnDevicesEnabled=s!=="false"}async uploadLocalData(){if(!st()||!ce)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Cloud features not configured"};if(this.syncInProgress)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Sync already in progress"};this.syncInProgress=!0,this.updateStatus({status:"uploading",progress:0,message:"Preparing local data..."});try{const{data:{user:n}}=await ce.auth.getUser();if(!n)throw new Error("Not authenticated");const r=await Ct.exportData();this.updateStatus({status:"uploading",progress:5,message:"Exporting local database..."}),this.updateStatus({status:"uploading",progress:10,message:"Checking for deleted matches..."});const s=await this.getOwnTombstones(),a=new Set(s),i=r.matches.filter(d=>!a.has(d.id)),o=new Set(i.map(d=>d.id)),c=r.matchPlayers.filter(d=>o.has(d.matchId));s.length>0&&console.log(`[CloudSyncService] Skipping ${r.matches.length-i.length} tombstoned matches`);const A=this.getDeviceId();let u=0;this.updateStatus({status:"uploading",progress:20,message:`Uploading ${r.players.length} players...`});for(let d=0;d<r.players.length;d++){const f=r.players[d],{error:g}=await ce.from("cloud_players").upsert({owner_id:n.id,local_id:f.id,name:f.name,total_games:f.totalGames,wins:f.wins,losses:f.losses,elo:f.elo,mu:f.mu,sigma:f.sigma,ordinal:f.ordinal,last_played:f.lastPlayed,date_created:f.dateCreated,device_id:f.deviceId||A,level:f.level,sync_source:"local",synced_at:new Date().toISOString()},{onConflict:"owner_id,local_id"});g||u++,this.updateStatus({status:"uploading",progress:20+Math.floor(d/r.players.length*20),message:`Uploading players (${d+1}/${r.players.length})...`})}this.updateStatus({status:"uploading",progress:40,message:`Uploading ${i.length} matches...`});for(let d=0;d<i.length;d++){const f=i[d],{error:g}=await ce.from("cloud_matches").upsert({id:f.id,owner_id:n.id,date:f.date,winning_team:f.winningTeam.toLowerCase(),game_length:f.gameLength.toLowerCase(),double_lanes:f.doubleLanes,titan_players:f.titanPlayers,atlantean_players:f.atlanteanPlayers,device_id:f.deviceId||A,sync_source:"local",synced_at:new Date().toISOString(),victory_type:f.victoryType||null},{onConflict:"owner_id,id"});g||u++,this.updateStatus({status:"uploading",progress:40+Math.floor(d/Math.max(i.length,1)*30),message:`Uploading matches (${d+1}/${i.length})...`})}this.updateStatus({status:"uploading",progress:70,message:`Uploading ${c.length} match details...`});for(let d=0;d<c.length;d++){const f=c[d],{error:g}=await ce.from("cloud_match_players").upsert({id:f.id,owner_id:n.id,match_id:f.matchId,player_id:f.playerId,team:f.team.toLowerCase(),hero_id:f.heroId,hero_name:f.heroName,hero_roles:f.heroRoles,kills:f.kills,deaths:f.deaths,assists:f.assists,gold_earned:f.goldEarned,minion_kills:f.minionKills,level:f.level,device_id:f.deviceId||A,sync_source:"local",synced_at:new Date().toISOString()},{onConflict:"owner_id,id"});g||u++,this.updateStatus({status:"uploading",progress:70+Math.floor(d/Math.max(c.length,1)*25),message:`Uploading match details (${d+1}/${c.length})...`})}await ce.from("profiles").update({last_sync_at:new Date().toISOString()}).eq("id",n.id);const h=new Date;return localStorage.setItem("cloudSync_lastSync",h.toISOString()),this.updateStatus({status:"complete",progress:100,message:`Upload complete! ${u} records synced.`,lastSyncAt:h}),this.syncInProgress=!1,{success:!0,recordsAdded:u,recordsUpdated:0}}catch(n){return console.error("[CloudSyncService] Upload error:",n),this.updateStatus({status:"error",progress:0,message:"Upload failed",error:n instanceof Error?n.message:"Unknown error"}),this.syncInProgress=!1,{success:!1,recordsAdded:0,recordsUpdated:0,error:String(n)}}}async syncFromFriends(n){if(!st()||!ce)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Cloud features not configured"};if(this.syncInProgress)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Sync already in progress"};this.syncInProgress=!0,this.updateStatus({status:"downloading",progress:0,message:"Fetching friend data..."});try{const{data:{user:r}}=await ce.auth.getUser();if(!r)throw new Error("Not authenticated");let s;if(n&&n.length>0)s=n;else{const{data:h}=await ce.from("friends").select("friend_id").eq("user_id",r.id);s=(h||[]).map(d=>d.friend_id)}if(s.length===0)return this.updateStatus({status:"complete",progress:100,message:"No friends to sync from",lastSyncAt:new Date}),this.syncInProgress=!1,{success:!0,recordsAdded:0,recordsUpdated:0};this.updateStatus({status:"downloading",progress:20,message:`Downloading from ${s.length} friend${s.length===1?"":"s"}...`});const{data:a}=await ce.from("cloud_players").select("*").in("owner_id",s);this.updateStatus({status:"downloading",progress:40,message:"Downloading matches..."});const{data:i}=await ce.from("cloud_matches").select("*").in("owner_id",s);this.updateStatus({status:"downloading",progress:60,message:"Downloading match details..."});const{data:o}=await ce.from("cloud_match_players").select("*").in("owner_id",s);this.updateStatus({status:"merging",progress:70,message:"Merging data..."});const c={players:(a||[]).map(h=>this.cloudPlayerToLocal(h)),matches:(i||[]).map(h=>this.cloudMatchToLocal(h)),matchPlayers:(o||[]).map(h=>this.cloudMatchPlayerToLocal(h)),exportDate:new Date,version:4},A=await Ct.mergeData(c),u=new Date;return localStorage.setItem("cloudSync_lastSync",u.toISOString()),this.updateStatus({status:"complete",progress:100,message:`Sync complete! Merged data from ${s.length} friends.`,lastSyncAt:u}),this.syncInProgress=!1,{success:A,recordsAdded:c.players.length+c.matches.length,recordsUpdated:0}}catch(r){return console.error("[CloudSyncService] Sync error:",r),this.updateStatus({status:"error",progress:0,message:"Sync failed",error:r instanceof Error?r.message:"Unknown error"}),this.syncInProgress=!1,{success:!1,recordsAdded:0,recordsUpdated:0,error:String(r)}}}subscribeToFriendUpdates(n){if(!st()||!ce)return()=>{};const r=ce.channel("friend_matches").on("postgres_changes",{event:"*",schema:"public",table:"cloud_matches"},()=>{console.log("[CloudSyncService] Friend match update detected"),n()}).subscribe();return this.realtimeChannels.push(r),()=>{this.realtimeChannels.forEach(s=>{ce==null||ce.removeChannel(s)}),this.realtimeChannels=[]}}setAutoSync(n){this.autoSyncEnabled=n,localStorage.setItem("cloudSync_autoEnabled",String(n)),n?this.startAutoSync():this.stopAutoSync()}isAutoSyncEnabled(){return this.autoSyncEnabled}setAutoUpload(n){this.autoUploadEnabled=n,localStorage.setItem("cloudSync_autoUploadEnabled",String(n))}isAutoUploadEnabled(){return this.autoUploadEnabled}getFriendSyncPreferences(){const n=localStorage.getItem(this.FRIEND_PREFS_KEY);if(!n)return{};try{return JSON.parse(n)}catch{return{}}}setFriendSyncPreference(n,r){const s=this.getFriendSyncPreferences();s[n]={autoSync:r},localStorage.setItem(this.FRIEND_PREFS_KEY,JSON.stringify(s))}isFriendAutoSyncEnabled(n){var s;return((s=this.getFriendSyncPreferences()[n])==null?void 0:s.autoSync)??!1}getAutoSyncFriendIds(n){const r=this.getFriendSyncPreferences();return n.filter(s=>{var a;return((a=r[s])==null?void 0:a.autoSync)??!1})}triggerAutoUpload(){this.autoUploadEnabled&&(!st()||!ce||(this.autoUploadTimeout&&clearTimeout(this.autoUploadTimeout),this.autoUploadTimeout=setTimeout(async()=>{if(!ce)return;const{data:{user:n}}=await ce.auth.getUser();n&&!this.syncInProgress&&(console.log("[CloudSyncService] Auto-uploading data..."),await this.uploadLocalData())},this.autoUploadDebounceMs)))}async downloadOwnCloudData(){if(!st()||!ce)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Cloud features not configured"};if(this.syncInProgress)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Sync already in progress"};this.syncInProgress=!0,this.updateStatus({status:"downloading",progress:0,message:"Downloading your data from cloud..."});try{const{data:{user:n}}=await ce.auth.getUser();if(!n)throw new Error("Not authenticated");const r=this.getDeviceId();this.updateStatus({status:"downloading",progress:10,message:"Checking for deleted matches..."});const s=await this.getOwnTombstones(),a=new Set(s);this.updateStatus({status:"downloading",progress:20,message:"Downloading players from other devices..."});const{data:i}=await ce.from("cloud_players").select("*").eq("owner_id",n.id).neq("device_id",r);this.updateStatus({status:"downloading",progress:40,message:"Downloading matches from other devices..."});const{data:o}=await ce.from("cloud_matches").select("*").eq("owner_id",n.id).neq("device_id",r);this.updateStatus({status:"downloading",progress:60,message:"Downloading match details from other devices..."});const{data:c}=await ce.from("cloud_match_players").select("*").eq("owner_id",n.id).neq("device_id",r);this.updateStatus({status:"merging",progress:70,message:"Applying deletions..."});const A=await this.applyTombstonesToLocal(s);A>0&&console.log(`[CloudSyncService] Applied ${A} tombstones`),this.updateStatus({status:"merging",progress:80,message:"Merging data..."});const u=(o||[]).filter(v=>!a.has(v.id)),h=new Set(u.map(v=>v.id)),d=(c||[]).filter(v=>h.has(v.match_id)),f={players:(i||[]).map(v=>this.cloudPlayerToLocal(v)),matches:u.map(v=>this.cloudMatchToLocal(v)),matchPlayers:d.map(v=>this.cloudMatchPlayerToLocal(v)),exportDate:new Date,version:4},g=await Ct.mergeData(f),m=new Date;localStorage.setItem("cloudSync_lastOwnSync",m.toISOString());const y=f.players.length+f.matches.length+f.matchPlayers.length;return this.updateStatus({status:"complete",progress:100,message:y>0||A>0?`Synced: ${y} records downloaded${A>0?`, ${A} deleted`:""}.`:"No new data found from other devices.",lastSyncAt:m}),this.syncInProgress=!1,{success:g,recordsAdded:y,recordsUpdated:A}}catch(n){return console.error("[CloudSyncService] Download own data error:",n),this.updateStatus({status:"error",progress:0,message:"Download failed",error:n instanceof Error?n.message:"Unknown error"}),this.syncInProgress=!1,{success:!1,recordsAdded:0,recordsUpdated:0,error:String(n)}}}subscribeToOwnDeviceUpdates(n){return!st()||!ce?()=>{}:(this.ownDevicesRealtimeChannel=ce.channel("own_device_sync").on("postgres_changes",{event:"INSERT",schema:"public",table:"cloud_matches"},async r=>{if(!ce)return;const{data:{user:s}}=await ce.auth.getUser();if(!s)return;const a=r.new,i=a.owner_id,o=a.device_id,c=this.getDeviceId();i===s.id&&o!==c&&(console.log("[CloudSyncService] Own data change detected from device:",o),n(o))}).subscribe(),()=>{this.ownDevicesRealtimeChannel&&(ce==null||ce.removeChannel(this.ownDevicesRealtimeChannel),this.ownDevicesRealtimeChannel=null)})}setAutoSyncOwnDevices(n){this.autoSyncOwnDevicesEnabled=n,localStorage.setItem("cloudSync_autoSyncOwnDevices",String(n)),n?this.startAutoSyncOwnDevices():this.stopAutoSyncOwnDevices()}isAutoSyncOwnDevicesEnabled(){return this.autoSyncOwnDevicesEnabled}getLastOwnSyncTime(){const n=localStorage.getItem("cloudSync_lastOwnSync");return n?new Date(n):null}async getOwnTombstones(){if(!st()||!ce)return[];try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return[];const{data:r}=await ce.from("deleted_matches").select("match_id").eq("owner_id",n.id);return(r||[]).map(s=>s.match_id)}catch(n){return console.error("[CloudSyncService] Error fetching tombstones:",n),[]}}async deleteMatchFromCloud(n){if(!st()||!ce)return{success:!1,error:"Cloud features not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const s=this.getDeviceId();await ce.from("cloud_match_players").delete().eq("owner_id",r.id).eq("match_id",n),await ce.from("cloud_matches").delete().eq("owner_id",r.id).eq("id",n);const{error:a}=await ce.from("deleted_matches").upsert({owner_id:r.id,match_id:n,deleted_at:new Date().toISOString(),device_id:s},{onConflict:"owner_id,match_id"});return a&&console.error("[CloudSyncService] Tombstone insert error:",a),console.log("[CloudSyncService] Match deleted from cloud:",n),{success:!0}}catch(r){return console.error("[CloudSyncService] Delete from cloud error:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async applyTombstonesToLocal(n){if(n.length===0)return 0;let r=0;for(const s of n)await Ct.getMatch(s)&&(await Ct.deleteMatchAndPlayersOnly(s),r++,console.log("[CloudSyncService] Applied tombstone - deleted local match:",s));return r>0&&await Ct.recalculatePlayerStats(),r}startAutoSyncOwnDevices(){this.autoSyncOwnDevicesUnsubscribe||(this.autoSyncOwnDevicesUnsubscribe=this.subscribeToOwnDeviceUpdates(async n=>{setTimeout(async()=>{this.autoSyncOwnDevicesEnabled&&!this.syncInProgress&&(console.log("[CloudSyncService] Auto-syncing from device:",n),await this.downloadOwnCloudData())},2e3)}))}stopAutoSyncOwnDevices(){this.autoSyncOwnDevicesUnsubscribe&&(this.autoSyncOwnDevicesUnsubscribe(),this.autoSyncOwnDevicesUnsubscribe=null)}startAutoSync(){this.autoSyncUnsubscribe||(this.autoSyncUnsubscribe=this.subscribeToFriendUpdates(async()=>{setTimeout(async()=>{if(this.autoSyncEnabled&&!this.syncInProgress&&ce){const{data:{user:n}}=await ce.auth.getUser();if(!n)return;const{data:r}=await ce.from("friends").select("friend_id").eq("user_id",n.id),s=(r||[]).map(i=>i.friend_id),a=this.getAutoSyncFriendIds(s);a.length>0&&this.syncFromFriends(a)}},2e3)}))}stopAutoSync(){this.autoSyncUnsubscribe&&(this.autoSyncUnsubscribe(),this.autoSyncUnsubscribe=null)}onStatusChange(n){return this.syncStatusListeners.add(n),n(this.currentStatus),()=>this.syncStatusListeners.delete(n)}getStatus(){return{...this.currentStatus}}getLastSyncTime(){const n=localStorage.getItem("cloudSync_lastSync");return n?new Date(n):null}updateStatus(n){this.currentStatus={...this.currentStatus,...n},this.syncStatusListeners.forEach(r=>r(this.currentStatus))}getDeviceId(){const n="guards-of-atlantis-device-id";return localStorage.getItem(n)||"unknown"}cloudPlayerToLocal(n){return{id:n.local_id,name:n.name,totalGames:n.total_games,wins:n.wins,losses:n.losses,elo:n.elo,mu:n.mu,sigma:n.sigma,ordinal:n.ordinal,lastPlayed:new Date(n.last_played),dateCreated:new Date(n.date_created),deviceId:n.device_id,level:n.level}}cloudMatchToLocal(n){const r=n.winning_team.toLowerCase(),s=n.game_length.toLowerCase();return{id:n.id,date:new Date(n.date),winningTeam:r,gameLength:s,doubleLanes:n.double_lanes,titanPlayers:n.titan_players,atlanteanPlayers:n.atlantean_players,deviceId:n.device_id}}cloudMatchPlayerToLocal(n){const r=n.team.toLowerCase();return{id:n.id,matchId:n.match_id,playerId:n.player_id,team:r,heroId:n.hero_id,heroName:n.hero_name,heroRoles:n.hero_roles,kills:n.kills,deaths:n.deaths,assists:n.assists,goldEarned:n.gold_earned,minionKills:n.minion_kills,level:n.level,deviceId:n.device_id}}}const mr=new zhe,Khe="GuardsOfAtlantisStats",fS=4,lt={PLAYERS:"players",MATCHES:"matches",MATCH_PLAYERS:"matchPlayers"},gS=1200,za=25/6,ZA=25/300;function hf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}class Ghe{constructor(){ve(this,"db",null);ve(this,"playerRatings",{})}async initialize(){try{return this.db=await this.openDatabase(),await this.checkAndMigrateRatings(),!0}catch(n){return console.error("Failed to initialize database:",n),!1}}async checkAndMigrateRatings(){try{(await this.getAllPlayers()).some(s=>s.totalGames>0&&(s.mu===void 0||s.sigma===void 0||s.ordinal===void 0))&&(console.log("Migrating player ratings to TrueSkill system..."),await this.recalculatePlayerStats(),console.log("Migration complete!"))}catch(n){console.error("Error checking rating migration:",n)}}openDatabase(){return new Promise((n,r)=>{const s=indexedDB.open(Khe,fS);s.onupgradeneeded=a=>{const i=a.target.result;if(i.objectStoreNames.contains(lt.PLAYERS)){const o=a.target.transaction;if(o){const c=o.objectStore(lt.PLAYERS);c.indexNames.contains("ordinal")||c.createIndex("ordinal","ordinal",{unique:!1})}}else{const o=i.createObjectStore(lt.PLAYERS,{keyPath:"id"});o.createIndex("name","name",{unique:!0}),o.createIndex("elo","elo",{unique:!1}),o.createIndex("ordinal","ordinal",{unique:!1})}if(!i.objectStoreNames.contains(lt.MATCHES)){const o=i.createObjectStore(lt.MATCHES,{keyPath:"id"});o.createIndex("date","date",{unique:!1}),o.createIndex("winningTeam","winningTeam",{unique:!1})}if(!i.objectStoreNames.contains(lt.MATCH_PLAYERS)){const o=i.createObjectStore(lt.MATCH_PLAYERS,{keyPath:"id"});o.createIndex("matchId","matchId",{unique:!1}),o.createIndex("playerId","playerId",{unique:!1}),o.createIndex("heroId","heroId",{unique:!1}),o.createIndex("heroName","heroName",{unique:!1}),o.createIndex("playerMatch",["playerId","matchId"],{unique:!0})}},s.onsuccess=a=>{const i=a.target.result;n(i)},s.onerror=a=>{r(a.target.error)}})}getDisplayRating(n){return n.ordinal!==void 0?Math.round((n.ordinal+25)*40+200):n.elo}getDeviceId(){const n="guards-of-atlantis-device-id";let r=localStorage.getItem(n);if(!r){const s=Date.now().toString(36),a=Math.random().toString(36).substring(2,10);r=`device_${s}_${a}`,localStorage.setItem(n,r)}return r}async getPlayer(n){return this.db||await this.initialize(),this.db?new Promise((r,s)=>{const o=this.db.transaction([lt.PLAYERS],"readonly").objectStore(lt.PLAYERS).get(n);o.onsuccess=()=>{r(o.result||null)},o.onerror=()=>{s(o.error)}}):null}async savePlayer(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return n.deviceId||(n.deviceId=this.getDeviceId()),new Promise((r,s)=>{const o=this.db.transaction([lt.PLAYERS],"readwrite").objectStore(lt.PLAYERS).put(n);o.onsuccess=()=>{r()},o.onerror=()=>{s(o.error)}})}async getAllPlayers(){return this.db||await this.initialize(),this.db?new Promise((n,r)=>{const i=this.db.transaction([lt.PLAYERS],"readonly").objectStore(lt.PLAYERS).getAll();i.onsuccess=()=>{n(i.result||[])},i.onerror=()=>{r(i.error)}}):[]}async getHeroStats(n=1,r,s){try{const a=await this.getAllMatchPlayers();let i=await this.getAllMatches();(r||s)&&(i=i.filter(d=>{const f=new Date(d.date);return!(r&&f<r||s&&f>s)}));const o=new Set(i.map(d=>d.id)),c=a.filter(d=>o.has(d.matchId)),A=new Map(i.map(d=>[d.id,d])),u=new Map;for(const d of c){const f=d.heroId;if(f==null)continue;u.has(f)||u.set(f,{heroId:f,heroName:d.heroName,icon:`heroes/${d.heroName.toLowerCase()}.png`,roles:d.heroRoles,complexity:1,expansion:"Unknown",totalGames:0,wins:0,losses:0,teammates:new Map,opponents:new Map,victoryTypeStats:{throne:{wins:0,total:0},wave:{wins:0,total:0},kills:{wins:0,total:0}}});const g=u.get(f);g.totalGames+=1;const m=A.get(d.matchId);if(!m)continue;const y=d.team===m.winningTeam;y?g.wins+=1:g.losses+=1;const v=m.victoryType;v&&g.victoryTypeStats[v]&&(g.victoryTypeStats[v].total+=1,y&&(g.victoryTypeStats[v].wins+=1))}for(const d of i){const f=c.filter(g=>g.matchId===d.id);for(const g of f){const m=g.heroId;if(m==null||!u.has(m))continue;const y=u.get(m),v=g.team,p=v===d.winningTeam,x=f.filter(w=>w.team===v&&w.heroId!==m),b=f.filter(w=>w.team!==v);for(const w of x){if(w.heroId===void 0||w.heroId===null)continue;let _=y.teammates.get(w.heroId);_||(_={wins:0,games:0},y.teammates.set(w.heroId,_)),_.games+=1,p&&(_.wins+=1)}for(const w of b){if(w.heroId===void 0||w.heroId===null)continue;let _=y.opponents.get(w.heroId);_||(_={wins:0,games:0},y.opponents.set(w.heroId,_)),_.games+=1,p&&(_.wins+=1)}}}const h=Array.from(u.values()).map(d=>{const f=d.totalGames>0?d.wins/d.totalGames*100:0,g=Array.from(d.teammates.entries()).filter(([v,p])=>p.games>=n).map(([v,p])=>{const x=u.get(v);return x?{heroId:v,heroName:x.heroName,icon:x.icon,winRate:p.games>0?p.wins/p.games*100:0,gamesPlayed:p.games}:null}).filter(v=>v!==null).sort((v,p)=>p.winRate-v.winRate).slice(0,3),m=Array.from(d.opponents.entries()).filter(([v,p])=>p.games>=n).map(([v,p])=>{const x=u.get(v);return x?{heroId:v,heroName:x.heroName,icon:x.icon,winRate:p.games>0?p.wins/p.games*100:0,gamesPlayed:p.games}:null}).filter(v=>v!==null).sort((v,p)=>p.winRate-v.winRate).slice(0,3),y=Array.from(d.opponents.entries()).filter(([v,p])=>p.games>=n).map(([v,p])=>{const x=u.get(v);return x?{heroId:v,heroName:x.heroName,icon:x.icon,winRate:p.games>0?p.wins/p.games*100:0,gamesPlayed:p.games}:null}).filter(v=>v!==null).sort((v,p)=>v.winRate-p.winRate).slice(0,3);return{...d,winRate:f,bestTeammates:g,bestAgainst:m,worstAgainst:y,teammates:void 0,opponents:void 0}});try{const{heroes:d}=await HB(()=>Promise.resolve().then(()=>QB),void 0);for(const f of h){const g=d.find(m=>m.name===f.heroName);g&&(f.complexity=g.complexity,f.expansion=g.expansion)}}catch(d){console.error("Error enriching hero stats with heroes.ts data:",d)}return h}catch(a){return console.error("Error getting hero stats:",a),[]}}async getHeroWinRateOverTime(n,r=3,s,a){try{const i=await this.getAllMatchPlayers();let o=await this.getAllMatches();if(o.sort((m,y)=>new Date(m.date).getTime()-new Date(y.date).getTime()),(s||a)&&(o=o.filter(m=>{const y=new Date(m.date);return!(s&&y<s||a&&y>a)})),o.length===0)return{heroes:[],dateRange:null};const c=new Set(o.map(m=>m.id)),A=i.filter(m=>c.has(m.matchId)),u=new Map(o.map(m=>[m.id,m])),h=new Map;for(const m of A){const y=m.heroId;if(y==null||n&&n.length>0&&!n.includes(y))continue;const v=u.get(m.matchId);if(!v)continue;h.has(y)||h.set(y,{heroName:m.heroName,icon:`heroes/${m.heroName.toLowerCase().replace(/\s+/g,"")}.png`,matches:[]});const p=h.get(y),x=new Date(v.date).toISOString().split("T")[0],b=m.team===v.winningTeam;p.matches.push({date:x,won:b})}const d=[];for(const[m,y]of h.entries()){y.matches.sort((B,k)=>B.date.localeCompare(k.date));const v=new Map;for(const B of y.matches){v.has(B.date)||v.set(B.date,{wins:0,games:0});const k=v.get(B.date);k.games++,B.won&&k.wins++}const p=[];let x=0,b=0;const w=Array.from(v.keys()).sort();for(const B of w){const k=v.get(B);x+=k.games,b+=k.wins,p.push({date:B,gamesPlayedTotal:x,winsTotal:b,winRate:x>0?b/x*100:0,gamesPlayedOnDate:k.games})}const _=p.filter(B=>B.gamesPlayedTotal>=r);_.length>0&&d.push({heroId:m,heroName:y.heroName,icon:y.icon,totalGames:x,currentWinRate:x>0?b/x*100:0,dataPoints:_})}d.sort((m,y)=>y.totalGames-m.totalGames);try{const{heroes:m}=await HB(()=>Promise.resolve().then(()=>QB),void 0);for(const y of d){const v=m.find(p=>p.name===y.heroName);v&&(y.icon=v.icon)}}catch(m){console.error("Error enriching hero icons:",m)}const f=d.flatMap(m=>m.dataPoints.map(y=>y.date)),g=f.length>0?{firstMatch:f.reduce((m,y)=>y<m?y:m),lastMatch:f.reduce((m,y)=>y>m?y:m)}:null;return{heroes:d,dateRange:g}}catch(i){return console.error("Error getting hero win rate over time:",i),{heroes:[],dateRange:null}}}async getFilteredPlayerStats(n,r,s=!1){try{const a=await this.getAllPlayers();let i=await this.getAllMatches();const o=await this.getAllMatchPlayers();let c=null;(n||r)&&(c={start:n||new Date(0),end:r||new Date}),(n||r)&&(i=i.filter(g=>{const m=new Date(g.date);return!(n&&m<n||r&&m>r)}));const A=new Set(i.map(g=>g.id)),u=o.filter(g=>A.has(g.matchId)),h=new Map(i.map(g=>[g.id,g]));let d={};s?d=await this.calculateTrueSkillForMatches(i):d=await this.getCurrentTrueSkillRatings();const f=[];for(const g of a){const m=u.filter(L=>L.playerId===g.id);if(m.length===0)continue;let y=0,v=0,p=0,x=0,b=0,w=0,_=0,B=!1,k=null;const N=new Map,C=new Map;for(const L of m){const P=h.get(L.matchId);if(!P)continue;const O=new Date(P.date);if((!k||O>k)&&(k=O),L.team===P.winningTeam?y++:v++,L.kills!==void 0&&(p+=L.kills,B=!0),L.deaths!==void 0&&(x+=L.deaths),L.assists!==void 0&&(b+=L.assists),L.goldEarned!==void 0&&(w+=L.goldEarned),L.minionKills!==void 0&&(_+=L.minionKills),L.heroId!==void 0){const Q=N.get(L.heroId);Q?Q.count++:N.set(L.heroId,{heroId:L.heroId,heroName:L.heroName,count:1})}if(L.heroRoles)for(const Q of L.heroRoles)C.set(Q,(C.get(Q)||0)+1)}const j=m.length,E=j>0?y/j*100:0,F=x>0?p/x:p,I=Array.from(N.values()).sort((L,P)=>P.count-L.count).slice(0,3),T=Array.from(C.entries()).map(([L,P])=>({role:L,count:P})).sort((L,P)=>P.count-L.count).slice(0,3);f.push({id:g.id,name:g.name,gamesPlayed:j,wins:y,losses:v,winRate:E,kills:p,deaths:x,assists:b,kdRatio:F,totalGold:w,totalMinionKills:_,averageGold:j>0?w/j:0,averageMinionKills:j>0?_/j:0,hasCombatStats:B,favoriteHeroes:I,favoriteRoles:T,displayRating:d[g.id]||1200,lastPlayed:k})}return{players:f,dateRange:c}}catch(a){return console.error("Error getting filtered player stats:",a),{players:[],dateRange:null}}}async calculateTrueSkillForMatches(n){try{const r=[...n].sort((o,c)=>{const A=new Date(o.date).getTime(),u=new Date(c.date).getTime();return A-u}),s=await this.getAllPlayers(),a={};for(const o of s)a[o.id]=ot.rating();for(const o of r){const c=await this.getMatchPlayers(o.id),A=[],u=[],h=[],d=[];for(const m of c)m.team===ie.Titans?(A.push(m.playerId),u.push(a[m.playerId]||ot.rating())):(h.push(m.playerId),d.push(a[m.playerId]||ot.rating()));if(u.length===0||d.length===0)continue;let f;o.winningTeam===ie.Titans?f=[1,2]:f=[2,1];const g=ot.rate([u,d],{rank:f,beta:za,tau:ZA});for(let m=0;m<A.length;m++)a[A[m]]=g[0][m];for(let m=0;m<h.length;m++)a[h[m]]=g[1][m]}const i={};for(const o in a){const c=a[o],A=ot.ordinal(c);i[o]=Math.round((A+25)*40+200)}return i}catch(r){return console.error("Error calculating TrueSkill for matches:",r),{}}}async getAllMatchPlayers(){return this.db||await this.initialize(),this.db?new Promise((n,r)=>{const i=this.db.transaction([lt.MATCH_PLAYERS],"readonly").objectStore(lt.MATCH_PLAYERS).getAll();i.onsuccess=()=>{n(i.result||[])},i.onerror=()=>{r(i.error)}}):[]}async getAllMatches(){return this.db||await this.initialize(),this.db?new Promise((n,r)=>{const i=this.db.transaction([lt.MATCHES],"readonly").objectStore(lt.MATCHES).getAll();i.onsuccess=()=>{n(i.result||[])},i.onerror=()=>{r(i.error)}}):[]}async getMatch(n){return this.db||await this.initialize(),this.db?new Promise((r,s)=>{const o=this.db.transaction([lt.MATCHES],"readonly").objectStore(lt.MATCHES).get(n);o.onsuccess=()=>{r(o.result||null)},o.onerror=()=>{s(o.error)}}):null}async saveMatch(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return n.id||(n.id=hf()),n.deviceId||(n.deviceId=this.getDeviceId()),new Promise((r,s)=>{const o=this.db.transaction([lt.MATCHES],"readwrite").objectStore(lt.MATCHES).put(n);o.onsuccess=()=>{r(n.id)},o.onerror=()=>{s(o.error)}})}async deleteMatch(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{if(!await this.getMatch(n))throw new Error("Match not found");const s=await this.getMatchPlayers(n);await this.deleteMatchAndPlayers(n,s),await this.recalculatePlayerStats(),mr.deleteMatchFromCloud(n).catch(a=>{console.error("[DatabaseService] Cloud deletion failed:",a)})}catch(r){throw console.error("Error deleting match:",r),r}}async deleteMatchAndPlayers(n,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return new Promise((s,a)=>{const i=this.db.transaction([lt.MATCHES,lt.MATCH_PLAYERS],"readwrite"),o=i.objectStore(lt.MATCH_PLAYERS);r.forEach(A=>{o.delete(A.id)}),i.objectStore(lt.MATCHES).delete(n),i.oncomplete=()=>{s()},i.onerror=()=>{a(i.error)}})}async deleteMatchAndPlayersOnly(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{if(!await this.getMatch(n))return!1;const s=await this.getMatchPlayers(n);return await this.deleteMatchAndPlayers(n,s),!0}catch(r){return console.error("Error deleting match locally:",r),!1}}initializeTrueSkillRatings(n){this.playerRatings={};for(const r of n)r.mu!==void 0&&r.sigma!==void 0?this.playerRatings[r.id]={mu:r.mu,sigma:r.sigma}:this.playerRatings[r.id]=ot.rating()}async recalculatePlayerStats(){try{console.log("Starting player statistics recalculation with TrueSkill...");const n=await this.getAllPlayers();console.log(`Found ${n.length} players for recalculation`);const r=new Map;for(const a of n)r.set(a.id,{totalGames:0,wins:0,losses:0});this.playerRatings={};for(const a of n)this.playerRatings[a.id]=ot.rating();let s=await this.getAllMatches();s.sort((a,i)=>{const o=new Date(a.date).getTime(),c=new Date(i.date).getTime();return o-c}),console.log(`Processing ${s.length} matches in chronological order`);for(const a of s){const i=await this.getMatchPlayers(a.id),o=[],c=[],A=[],u=[];for(const f of i)f.team===ie.Titans?(o.push(f.playerId),A.push(this.playerRatings[f.playerId])):(c.push(f.playerId),u.push(this.playerRatings[f.playerId]));if(A.length===0||u.length===0){console.warn(`Skipping match ${a.id} due to empty team`);continue}let h;a.winningTeam===ie.Titans?h=[1,2]:h=[2,1];const d=ot.rate([A,u],{rank:h,beta:za,tau:ZA});for(let f=0;f<o.length;f++)this.playerRatings[o[f]]=d[0][f];for(let f=0;f<c.length;f++)this.playerRatings[c[f]]=d[1][f];for(const f of i){const g=r.get(f.playerId);g&&(g.totalGames+=1,f.team===a.winningTeam?g.wins+=1:g.losses+=1)}}for(const a of n){const i=r.get(a.id),o=this.playerRatings[a.id],c={...a,totalGames:i.totalGames,wins:i.wins,losses:i.losses,mu:o.mu,sigma:o.sigma,ordinal:ot.ordinal(o),elo:Math.round((ot.ordinal(o)+25)*40+200),lastPlayed:i.totalGames>0?new Date:a.lastPlayed};await this.savePlayer(c)}console.log("Player statistics recalculation completed successfully")}catch(n){throw console.error("Error recalculating player stats:",n),n}}calculateNewELO(n,r,s,a,i=.7,o=32){return n}async saveMatchPlayer(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return n.id||(n.id=hf()),n.deviceId||(n.deviceId=this.getDeviceId()),new Promise((r,s)=>{const o=this.db.transaction([lt.MATCH_PLAYERS],"readwrite").objectStore(lt.MATCH_PLAYERS).put(n);o.onsuccess=()=>{r(n.id)},o.onerror=()=>{s(o.error)}})}async getMatchPlayers(n){return this.db||await this.initialize(),this.db?new Promise((r,s)=>{const c=this.db.transaction([lt.MATCH_PLAYERS],"readonly").objectStore(lt.MATCH_PLAYERS).index("matchId").getAll(n);c.onsuccess=()=>{r(c.result||[])},c.onerror=()=>{s(c.error)}}):[]}async getPlayerMatches(n){return this.db||await this.initialize(),this.db?new Promise((r,s)=>{const c=this.db.transaction([lt.MATCH_PLAYERS],"readonly").objectStore(lt.MATCH_PLAYERS).index("playerId").getAll(n);c.onsuccess=()=>{r(c.result||[])},c.onerror=()=>{s(c.error)}}):[]}async recordMatch(n,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");if(Object.keys(this.playerRatings).length===0){const g=await this.getAllPlayers();this.initializeTrueSkillRatings(g)}const s=r.map(async g=>{const m=await this.getPlayer(g.id);if(!m){const y=ot.rating(),v={id:g.id,name:g.id,totalGames:0,wins:0,losses:0,elo:gS,mu:y.mu,sigma:y.sigma,ordinal:ot.ordinal(y),lastPlayed:new Date,dateCreated:new Date,deviceId:this.getDeviceId(),level:g.level||1};return await this.savePlayer(v),this.playerRatings[g.id]=y,v}return this.playerRatings[g.id]||(m.mu!==void 0&&m.sigma!==void 0?this.playerRatings[g.id]={mu:m.mu,sigma:m.sigma}:this.playerRatings[g.id]=ot.rating()),g.level!==void 0&&(m.level===void 0||g.level>m.level)&&(m.level=g.level,await this.savePlayer(m)),m}),a=await Promise.all(s),i=[],o=[],c=[],A=[];for(let g=0;g<r.length;g++)r[g].team===ie.Titans?(i.push(r[g].id),o.push(this.playerRatings[r[g].id])):(c.push(r[g].id),A.push(this.playerRatings[r[g].id]));const u={id:hf(),date:n.date,winningTeam:n.winningTeam,gameLength:n.gameLength,doubleLanes:n.doubleLanes,titanPlayers:i.length,atlanteanPlayers:c.length,deviceId:this.getDeviceId(),victoryType:n.victoryType};await this.saveMatch(u);let h;n.winningTeam===ie.Titans?h=[1,2]:h=[2,1];const d=ot.rate([o,A],{rank:h,beta:za,tau:ZA}),f=r.map(async(g,m)=>{const y=a[m],v=g.team===n.winningTeam;let p;if(g.team===ie.Titans){const w=i.indexOf(g.id);p=d[0][w]}else{const w=c.indexOf(g.id);p=d[1][w]}this.playerRatings[g.id]=p;const x={...y,totalGames:y.totalGames+1,wins:y.wins+(v?1:0),losses:y.losses+(v?0:1),mu:p.mu,sigma:p.sigma,ordinal:ot.ordinal(p),elo:Math.round((ot.ordinal(p)+25)*40+200),lastPlayed:new Date,level:g.level||y.level};await this.savePlayer(x);const b={id:hf(),matchId:u.id,playerId:y.id,team:g.team,heroId:g.heroId,heroName:g.heroName,heroRoles:g.heroRoles,kills:g.kills,deaths:g.deaths,assists:g.assists,goldEarned:g.goldEarned,minionKills:g.minionKills,level:g.level,deviceId:this.getDeviceId()};await this.saveMatchPlayer(b)});return await Promise.all(f),mr.triggerAutoUpload(),u.id}async getPlayerStats(n){const r=await this.getPlayer(n);if(!r)return{player:null,favoriteHeroes:[],allHeroesPlayed:[],favoriteRoles:[],allRolesPlayed:[],matchesPlayed:[]};const s=await this.getPlayerMatches(n),a=new Map;s.forEach(h=>{const d=a.get(h.heroId);d?d.count+=1:a.set(h.heroId,{heroId:h.heroId,heroName:h.heroName,count:1})});const i=Array.from(a.values()).sort((h,d)=>d.count-h.count).slice(0,3),o=Array.from(a.values()).sort((h,d)=>d.count-h.count),c=new Map;s.forEach(h=>{h.heroRoles.forEach(d=>{const f=c.get(d);f?f.count+=1:c.set(d,{role:d,count:1})})});const A=Array.from(c.values()).sort((h,d)=>d.count-h.count).slice(0,3),u=Array.from(c.values()).sort((h,d)=>d.count-h.count);return{player:r,favoriteHeroes:i,allHeroesPlayed:o,favoriteRoles:A,allRolesPlayed:u,matchesPlayed:s}}async calculateWinProbability(n,r){if(Object.keys(this.playerRatings).length===0){const g=await this.getAllPlayers();this.initializeTrueSkillRatings(g)}const s=[],a=[];for(const g of n)this.playerRatings[g]?s.push(this.playerRatings[g]):s.push(ot.rating());for(const g of r)this.playerRatings[g]?a.push(this.playerRatings[g]):a.push(ot.rating());const i=s.reduce((g,m)=>g+m.mu,0),o=s.reduce((g,m)=>g+m.sigma**2,0)+s.length*za**2,c=a.reduce((g,m)=>g+m.mu,0),A=a.reduce((g,m)=>g+m.sigma**2,0)+a.length*za**2,u=Math.sqrt(o+A),h=i-c,f=new z5(0,u).cdf(h);return Math.round(f*100)}async calculateWinProbabilityWithCI(n,r){if(Object.keys(this.playerRatings).length===0){const k=await this.getAllPlayers();this.initializeTrueSkillRatings(k)}const s=[],a=[];for(const k of n)this.playerRatings[k]?s.push(this.playerRatings[k]):s.push(ot.rating());for(const k of r)this.playerRatings[k]?a.push(this.playerRatings[k]):a.push(ot.rating());const i=s.reduce((k,N)=>k+N.mu,0),o=s.reduce((k,N)=>k+N.sigma**2,0),c=o+s.length*za**2,A=a.reduce((k,N)=>k+N.mu,0),u=a.reduce((k,N)=>k+N.sigma**2,0),h=u+a.length*za**2,d=i-A,f=c+h,g=Math.sqrt(f),m=new z5(0,g),y=m.cdf(d),v=o+u,x=1.96*Math.sqrt(v),b=d-x,w=m.cdf(b),_=d+x,B=m.cdf(_);return{team1Probability:Math.round(y*100),team1Lower:Math.round(w*100),team1Upper:Math.round(B*100),team2Probability:Math.round((1-y)*100),team2Lower:Math.round((1-B)*100),team2Upper:Math.round((1-w)*100)}}async generateBalancedTeams(n){const r=await this.getAllPlayers(),s=r.filter(o=>n.includes(o.id));if(s.length<4)return{team1:[],team2:[]};Object.keys(this.playerRatings).length===0&&this.initializeTrueSkillRatings(r),s.sort((o,c)=>{const A=this.getDisplayRating(o);return this.getDisplayRating(c)-A});const a=[],i=[];return s.forEach(o=>{const c=a.reduce((u,h)=>u+this.getDisplayRating(h),0),A=i.reduce((u,h)=>u+this.getDisplayRating(h),0);c<=A?a.push(o):i.push(o)}),{team1:a.map(o=>o.id),team2:i.map(o=>o.id)}}async generateBalancedTeamsByExperience(n){return this.getAllPlayers().then(r=>{const s=r.filter(o=>n.includes(o.id));if(s.length<4)return{team1:[],team2:[]};s.sort((o,c)=>c.totalGames-o.totalGames);const a=[],i=[];return s.forEach(o=>{const c=a.reduce((u,h)=>u+h.totalGames,0),A=i.reduce((u,h)=>u+h.totalGames,0);c<=A?a.push(o):i.push(o)}),{team1:a.map(o=>o.id),team2:i.map(o=>o.id)}})}async exportData(){const n=await this.getAllPlayers(),r=await this.getAllMatches(),s=[];for(const a of r){const i=await this.getMatchPlayers(a.id);s.push(...i)}return{players:n,matches:r,matchPlayers:s,exportDate:new Date,version:fS}}async importData(n,r="replace"){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{if(r==="replace"){await this.clearAllData();for(const s of n.players)await this.savePlayer(s);for(const s of n.matches)await this.saveMatch(s);for(const s of n.matchPlayers)await this.saveMatchPlayer(s)}else await this.mergeData(n);return await this.recalculatePlayerStats(),!0}catch(s){return console.error("Error importing data:",s),!1}}async mergeData(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{const r=this.getDeviceId(),s=await this.getAllPlayers(),a=new Set(s.map(A=>A.id));for(const A of n.players)if(!a.has(A.id)){const u={id:A.id,name:A.name,totalGames:0,wins:0,losses:0,elo:gS,mu:void 0,sigma:void 0,ordinal:void 0,lastPlayed:new Date,dateCreated:new Date,deviceId:`imported_${r}`,level:A.level||1};await this.savePlayer(u),a.add(A.id)}const i=await this.getAllMatches(),o=new Set(i.map(A=>A.id)),c=new Map;for(const A of n.matchPlayers)c.has(A.matchId)||c.set(A.matchId,[]),c.get(A.matchId).push(A);for(const A of n.matches){if(o.has(A.id))continue;A.deviceId||(A.deviceId=`imported_${r}`),await this.saveMatch(A);const u=c.get(A.id)||[];for(const h of u)h.deviceId||(h.deviceId=`imported_${r}`),await this.saveMatchPlayer(h)}return await this.recalculatePlayerStats(),!0}catch(r){return console.error("Error merging data:",r),!1}}async clearAllData(){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{const n=this.db.transaction([lt.PLAYERS,lt.MATCHES,lt.MATCH_PLAYERS],"readwrite");return n.objectStore(lt.PLAYERS).clear(),n.objectStore(lt.MATCHES).clear(),n.objectStore(lt.MATCH_PLAYERS).clear(),this.playerRatings={},new Promise((r,s)=>{n.oncomplete=()=>r(!0),n.onerror=()=>s(n.error)})}catch(n){return console.error("Error clearing database:",n),!1}}async getCurrentTrueSkillRatings(){try{let n=await this.getAllMatches();n.sort((i,o)=>{const c=new Date(i.date).getTime(),A=new Date(o.date).getTime();return c-A});const r=await this.getAllPlayers(),s={};for(const i of r)s[i.id]=ot.rating();for(let i=0;i<n.length;i++){const o=n[i],c=await this.getMatchPlayers(o.id),A=[],u=[],h=[],d=[];for(const m of c)m.team===ie.Titans?(A.push(m.playerId),u.push(s[m.playerId])):(h.push(m.playerId),d.push(s[m.playerId]));if(u.length===0||d.length===0)continue;let f;o.winningTeam===ie.Titans?f=[1,2]:f=[2,1];const g=ot.rate([u,d],{rank:f,beta:za,tau:ZA});for(let m=0;m<A.length;m++)s[A[m]]=g[0][m];for(let m=0;m<h.length;m++)s[h[m]]=g[1][m]}const a={};for(const i in s){const o=s[i],c=ot.ordinal(o);a[i]=Math.round((c+25)*40+200)}return a}catch(n){return console.error("Error getting current TrueSkill ratings:",n),{}}}async getHistoricalRatings(){try{let n=await this.getAllMatches();n.sort((o,c)=>{const A=new Date(o.date).getTime(),u=new Date(c.date).getTime();return A-u});const r=await this.getAllPlayers(),s={};for(const o of r)s[o.id]=ot.rating();const a=[],i={};for(const o in s){const c=s[o],A=ot.ordinal(c),u=Math.round((A+25)*40+200);i[o]=u}a.push({date:n.length>0?n[0].date.toString():new Date().toISOString(),matchNumber:0,ratings:i,participants:[]});for(let o=0;o<n.length;o++){const c=n[o],A=await this.getMatchPlayers(c.id),u=[],h=[],d=[],f=[];for(const v of A)v.team===ie.Titans?(u.push(v.playerId),h.push(s[v.playerId])):(d.push(v.playerId),f.push(s[v.playerId]));if(h.length===0||f.length===0)continue;let g;c.winningTeam===ie.Titans?g=[1,2]:g=[2,1];const m=ot.rate([h,f],{rank:g,beta:za,tau:ZA});for(let v=0;v<u.length;v++)s[u[v]]=m[0][v];for(let v=0;v<d.length;v++)s[d[v]]=m[1][v];const y={};for(const v in s){const p=s[v],x=ot.ordinal(p),b=Math.round((x+25)*40+200);y[v]=b}a.push({date:c.date.toString(),matchNumber:o+1,ratings:y,participants:A.map(v=>v.playerId)})}return a}catch(n){return console.error("Error getting historical ratings:",n),[]}}async hasMatchData(){return(await this.getAllMatches()).length>0}async updateMatchPlayer(n,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");const a=this.db.transaction(["matchPlayers"],"readwrite").objectStore("matchPlayers"),i=await a.get(n);if(i){const o={...i,...r};await a.put(o)}}async getPlayersWithNoGames(){return this.db||await this.initialize(),this.db?(await this.getAllPlayers()).filter(r=>r.totalGames===0):[]}async deletePlayer(n){if(this.db||await this.initialize(),!this.db)return!1;try{const r=await this.getPlayer(n);if(!r)return console.warn(`Player with ID ${n} not found`),!1;if(r.totalGames!==0)return console.warn(`Cannot delete player ${n}: has ${r.totalGames} games recorded`),!1;const s=await this.getPlayerMatches(n);return s.length>0?(console.warn(`Cannot delete player ${n}: has ${s.length} match records`),!1):new Promise((a,i)=>{const A=this.db.transaction([lt.PLAYERS],"readwrite").objectStore(lt.PLAYERS).delete(n);A.onsuccess=()=>{console.log(`Successfully deleted player ${n}`),a(!0)},A.onerror=()=>{console.error(`Error deleting player ${n}:`,A.error),i(A.error)}})}catch(r){return console.error(`Error deleting player ${n}:`,r),!1}}async updateMatch(n,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return new Promise((s,a)=>{const o=this.db.transaction([lt.MATCHES],"readwrite").objectStore(lt.MATCHES),c=o.get(n);c.onsuccess=()=>{const A=c.result;if(!A){a(new Error(`Match with ID ${n} not found`));return}const u={...A,...r},h=o.put(u);h.onsuccess=()=>s(),h.onerror=()=>a(h.error)},c.onerror=()=>a(c.error)})}async updateMatchPlayers(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return new Promise((r,s)=>{const i=this.db.transaction([lt.MATCH_PLAYERS],"readwrite").objectStore(lt.MATCH_PLAYERS);let o=n.length,c=!1;if(o===0){r();return}n.forEach(A=>{const u=i.get(A.id);u.onsuccess=()=>{if(c)return;const h=u.result;if(!h){c=!0,s(new Error(`Match player with ID ${A.id} not found`));return}const d={...h,...A.updates},f=i.put(d);f.onsuccess=()=>{o--,o===0&&r()},f.onerror=()=>{c=!0,s(f.error)}},u.onerror=()=>{c=!0,s(u.error)}})})}validateMatchEdit(n,r){const s=[],a=[],i=r.filter(f=>f.team===ie.Titans),o=r.filter(f=>f.team===ie.Atlanteans);i.length===0&&s.push({field:"teams",message:"Titans team cannot be empty",severity:"error"}),o.length===0&&s.push({field:"teams",message:"Atlanteans team cannot be empty",severity:"error"}),Math.abs(i.length-o.length)>1&&a.push({field:"teams",message:`Team sizes are unbalanced (Titans: ${i.length}, Atlanteans: ${o.length})`,severity:"warning"});const A=new Map;r.forEach(f=>{A.has(f.heroId)||A.set(f.heroId,[]),A.get(f.heroId).push(f.playerId)}),A.forEach((f,g)=>{f.length>1&&s.push({field:"hero",message:`Hero ID ${g} is assigned to multiple players: ${f.join(", ")}`,severity:"error"})}),r.forEach(f=>{if(f.kills&&f.kills>0){const y=n.gameLength===dt.Quick?10:20;f.kills>y&&a.push({field:"kills",playerId:f.playerId,message:`${f.kills} kills seems high for ${n.gameLength} match`,severity:"warning"})}f.deaths&&f.deaths>15&&a.push({field:"deaths",playerId:f.playerId,message:`${f.deaths} deaths seems very high`,severity:"warning"}),["kills","deaths","assists","goldEarned","minionKills"].forEach(g=>{const m=f[g];m!==void 0&&m<0&&s.push({field:g,playerId:f.playerId,message:`${g} cannot be negative`,severity:"error"})}),f.level!==void 0&&(f.level<1||f.level>10)&&s.push({field:"level",playerId:f.playerId,message:"Level must be between 1 and 10",severity:"error"})});const u=new Date(n.date);u>new Date&&a.push({field:"date",message:"Match date is in the future",severity:"warning"});const d=new Date;return d.setFullYear(d.getFullYear()-1),u<d&&a.push({field:"date",message:"Match date is more than a year old",severity:"warning"}),{isValid:s.length===0,errors:s,warnings:a}}async editMatch(n,r,s){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");const a=await this.getMatch(n);if(!a)throw new Error(`Match with ID ${n} not found`);const i=await this.getMatchPlayers(n),o={...a,...r},c=i.map(u=>{const h=s.find(d=>d.id===u.id);return h?{...u,...h.updates}:u}),A=this.validateMatchEdit(o,c);if(!A.isValid)throw new Error(`Validation failed: ${A.errors.map(u=>u.message).join(", ")}`);try{await Promise.all([this.updateMatch(n,r),this.updateMatchPlayers(s)]),await this.recalculatePlayerStats(),console.log(`Successfully edited match ${n}`)}catch(u){throw console.error(`Error editing match ${n}:`,u),new Error(`Failed to edit match: ${u.message}`)}}async getEditableMatch(n){try{const r=await this.getMatch(n);if(!r)return null;const s=await this.getMatchPlayers(n),a=await Promise.all(s.map(async i=>{const o=await this.getPlayer(i.playerId);return{...i,playerName:(o==null?void 0:o.name)||"Unknown Player"}}));return{match:r,players:a}}catch(r){return console.error(`Error getting editable match ${n}:`,r),null}}async canEditMatch(n){try{if(!await this.getMatch(n))return{canEdit:!1,reason:"Match not found"};const s=await this.getMatchPlayers(n);if(s.length===0)return{canEdit:!1,reason:"Match has no player data"};for(const a of s)if(!await this.getPlayer(a.playerId))return{canEdit:!1,reason:`Player ${a.playerId} no longer exists`};return{canEdit:!0}}catch(r){return console.error(`Error checking if match ${n} can be edited:`,r),{canEdit:!1,reason:"Error checking match editability"}}}async getHeroRelationshipNetwork(n,r=1,s,a){try{const i=await this.getAllMatchPlayers();let o=await this.getAllMatches();if((s||a)&&(o=o.filter(f=>{const g=new Date(f.date);return!(s&&g<s||a&&g>a)})),o.length===0)return[];const c=new Set(o.map(f=>f.id)),A=i.filter(f=>c.has(f.matchId)),u=new Set(n),h=new Map;for(const f of o){const g=A.filter(m=>m.matchId===f.id);for(const m of g){if(m.heroId===void 0||m.heroId===null||!u.has(m.heroId))continue;const y=m.team===f.winningTeam;for(const v of g){if(v.heroId===void 0||v.heroId===null||m.heroId===v.heroId||!u.has(v.heroId))continue;const p=`${m.heroId}-${v.heroId}`;h.has(p)||h.set(p,{heroId:m.heroId,relatedHeroId:v.heroId,teammateWins:0,teammateLosses:0,opponentWins:0,opponentLosses:0});const x=h.get(p);m.team===v.team?y?x.teammateWins++:x.teammateLosses++:y?x.opponentWins++:x.opponentLosses++}}}return Array.from(h.values()).filter(f=>f.teammateWins+f.teammateLosses+f.opponentWins+f.opponentLosses>=r)}catch(i){return console.error("Error getting hero relationship network:",i),[]}}async getPlayerRelationshipNetwork(n,r=1,s,a){try{const i=await this.getAllMatchPlayers();let o=await this.getAllMatches();const c=await this.getAllPlayers(),A=new Map(c.map(m=>[m.id,m.name]));if((s||a)&&(o=o.filter(m=>{const y=new Date(m.date);return!(s&&y<s||a&&y>a)})),o.length===0)return[];const u=new Set(o.map(m=>m.id)),h=i.filter(m=>u.has(m.matchId)),d=new Set(n),f=new Map;for(const m of o){const y=h.filter(v=>v.matchId===m.id);for(const v of y){if(!v.playerId||!d.has(v.playerId))continue;const p=v.team===m.winningTeam;for(const x of y){if(!x.playerId||v.playerId===x.playerId||!d.has(x.playerId))continue;const b=`${v.playerId}-${x.playerId}`;f.has(b)||f.set(b,{playerId:v.playerId,relatedPlayerId:x.playerId,relatedPlayerName:A.get(x.playerId)||x.playerId,teammateWins:0,teammateLosses:0,opponentWins:0,opponentLosses:0});const w=f.get(b);v.team===x.team?p?w.teammateWins++:w.teammateLosses++:p?w.opponentWins++:w.opponentLosses++}}}return Array.from(f.values()).filter(m=>m.teammateWins+m.teammateLosses+m.opponentWins+m.opponentLosses>=r)}catch(i){return console.error("Error getting player relationship network:",i),[]}}}const Yr=new Ghe,Ct=Yr,Whe=e=>Yr.getDisplayRating(e),Vhe=({strategyTime:e,moveTime:n,gameLength:r,onStrategyTimeChange:s,onMoveTimeChange:a,onGameLengthChange:i,players:o,onAddPlayer:c,onRemovePlayer:A,onDraftHeroes:u,selectedExpansions:h,onToggleExpansion:d,onPlayerNameChange:f,duplicateNames:g,canStartDrafting:m,heroCount:y,maxComplexity:v,onMaxComplexityChange:p,strategyTimerEnabled:x,moveTimerEnabled:b,onStrategyTimerEnabledChange:w,onMoveTimerEnabledChange:_,useDoubleLaneFor6Players:B,onUseDoubleLaneFor6PlayersChange:k,onViewMatches:N})=>{const{playSound:C}=gt(),[j,E]=S.useState([]),[F,I]=S.useState({timers:!0,"game-length":!0,complexity:!0,players:!0,names:!0,expansions:!1}),T=aA();S.useEffect(()=>{e!==90&&s(90),n!==30&&a(30),Ct.hasMatchData(),(async()=>{try{const Re=(await Ct.getAllPlayers()).filter(Le=>Le.totalGames>0).map(Le=>Le.name).filter((Le,ze,Ae)=>Ae.indexOf(Le)===ze).sort();E(Re)}catch(he){console.error("Error loading player names:",he)}})()},[]);const L=o.filter(pe=>pe.team===ie.Titans).length,P=o.filter(pe=>pe.team===ie.Atlanteans).length,O=L+P,R=o.filter(pe=>pe.name.trim()!=="").length===O&&O>0,M=g.length===0,G=O<=6,V=O<10,K=L<5,se=P<5,de=L>=2&&P>=2,ye=L>0&&P>0&&Math.abs(L-P)<=1&&de,W=O===6&&r===dt.Long,U=ye&&R&&M&&m,$=pe=>{C("buttonClick"),I({...F,[pe]:!F[pe]})},ne=pe=>{V&&(pe===ie.Titans?K:se)&&(C("buttonClick"),c(pe))},J=pe=>{C("toggleSwitch"),pe?w(!x):_(!b)},z=pe=>{pe===dt.Quick&&!G||(C("buttonClick"),i(pe))},oe=pe=>{C("toggleSwitch"),d(pe)},Ce=pe=>{C("buttonClick"),p(pe)},Fe=()=>{C("toggleSwitch"),k(!B)},Ne=()=>{U&&(C("buttonClick"),u())},Be=()=>{C("buttonClick"),N()};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Game Setup"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>$("timers"),children:[l.jsx("span",{className:"mr-2",children:F.timers?"":""}),"Timer Settings"]}),F.timers&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("label",{className:"flex-grow",children:"Strategy Timer"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(At,{text:x?"Disable timer (unlimited time)":"Enable timer (timed phase)",position:"top",children:l.jsx("div",{className:`w-12 h-6 rounded-full flex items-center p-1 cursor-pointer transition-colors ${x?"bg-green-600 justify-end":"bg-gray-600 justify-start"}`,onClick:()=>J(!0),children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full"})})}),l.jsx("div",{className:"ml-2",children:x?l.jsx(Lr,{size:16}):l.jsx(eg,{size:16})})]})]}),l.jsx("div",{className:x?"":"opacity-50",children:l.jsx(OB,{value:e,onChange:s,tooltip:"This is the amount of time teams will have to publicly discuss what cards to play",minValue:30,maxValue:300,step:10,disabled:!x})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("label",{className:"flex-grow",children:"Action Timer"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(At,{text:b?"Disable timer (unlimited time)":"Enable timer (timed phase)",position:"top",children:l.jsx("div",{className:`w-12 h-6 rounded-full flex items-center p-1 cursor-pointer transition-colors ${b?"bg-green-600 justify-end":"bg-gray-600 justify-start"}`,onClick:()=>J(!1),children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full"})})}),l.jsx("div",{className:"ml-2",children:b?l.jsx(Lr,{size:16}):l.jsx(eg,{size:16})})]})]}),l.jsx("div",{className:b?"":"opacity-50",children:l.jsx(OB,{value:n,onChange:a,tooltip:"This is the time each player will have to resolve their cards once revealed",minValue:10,maxValue:120,step:10,disabled:!b})})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>$("game-length"),children:[l.jsx("span",{className:"mr-2",children:F["game-length"]?"":""}),"Game Length"]}),F["game-length"]&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gameLength",value:dt.Quick,checked:r===dt.Quick,onChange:()=>z(dt.Quick),disabled:!G,className:"form-radio h-5 w-5 text-blue-600"}),l.jsxs("span",{className:`ml-2 ${G?"":"text-gray-500"}`,children:["Quick",!G&&l.jsx("span",{className:"ml-2 text-red-400 text-sm",children:"(Max 6 players)"})]})]}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gameLength",value:dt.Long,checked:r===dt.Long,onChange:()=>z(dt.Long),className:"form-radio h-5 w-5 text-blue-600"}),l.jsx("span",{className:"ml-2",children:"Long"})]})]}),W&&l.jsxs("div",{className:"mt-4 mb-4 bg-blue-900/30 p-3 rounded",children:[l.jsxs("label",{className:"flex items-center cursor-pointer mb-1",children:[l.jsx("input",{type:"checkbox",checked:B,onChange:Fe,className:"form-checkbox h-5 w-5 text-blue-600 mr-2"}),l.jsx("span",{className:"font-medium",children:"Use Double Lane Map"})]}),l.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Enable this option to use two lanes (top and bottom) for 6 player games"})]}),l.jsxs("div",{className:"mt-4 bg-gray-700 p-3 rounded-md text-sm",children:[l.jsx("h4",{className:"font-semibold mb-1",children:"Current Configuration:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:[l.jsx("li",{children:r===dt.Quick?"3 waves, single lane":O<=5||O===6&&!B?"5 waves, single lane":"7 waves per lane, two lanes"}),l.jsx("li",{children:r===dt.Quick?O<=5?"4 lives per team":"5 lives per team":O===6&&!B?"8 lives per team":O<=8?"6 lives per team":"7 lives per team"}),(O>=7||O===6&&B&&r===dt.Long)&&l.jsx("li",{className:"text-amber-300",children:"Using two separate lanes (top and bottom)"})]})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>$("complexity"),children:[l.jsx("span",{className:"mr-2",children:F.complexity?"":""}),"Max Complexity"]}),F.complexity&&l.jsx(l.Fragment,{children:l.jsx("div",{className:"flex flex-col gap-3 mb-4",children:[1,2,3,4].map(pe=>l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"complexity",value:pe,checked:v===pe,onChange:()=>Ce(pe),className:"form-radio h-5 w-5 text-blue-600"}),l.jsxs("span",{className:"ml-2",children:[pe," ",pe===1?"(Simplest)":pe===4?"(Most Complex)":""]})]},pe))})})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>$("players"),children:[l.jsx("span",{className:"mr-2",children:F.players?"":""}),"Players"]}),F.players&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsxs("span",{children:["Titans: ",L," players"]}),l.jsx("button",{className:`px-3 py-1 rounded text-sm ${V&&K?"bg-blue-700 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,onClick:()=>ne(ie.Titans),disabled:!V||!K,children:"Add Player"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:["Atlanteans: ",P," players"]}),l.jsx("button",{className:`px-3 py-1 rounded text-sm ${V&&se?"bg-red-700 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,onClick:()=>ne(ie.Atlanteans),disabled:!V||!se,children:"Add Player"})]})]}),!V&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Maximum 10 players allowed"}),!K&&L>=5&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Maximum 5 Titans players allowed"}),!se&&P>=5&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Maximum 5 Atlanteans players allowed"}),L!==P&&l.jsx("div",{className:`text-amber-400 text-sm mt-2 ${Math.abs(L-P)>1?"text-red-400":""}`,children:Math.abs(L-P)>1?"Teams must have equal player counts or differ by only 1 player":"Teams are uneven. The team with more players will need to use handicap cards."}),O>0&&!de&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Each team must have at least 2 players"}),O>0&&!R&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"All players must enter their names"}),g.length>0&&l.jsxs("div",{className:"text-red-400 text-sm mt-2",children:["Duplicate names found: ",g.join(", ")]}),O>0&&!m&&l.jsxs("div",{className:"text-red-400 text-sm mt-2",children:["Not enough heroes (",y,") for ",O," players. Select more expansions or increase complexity."]}),L>0&&L===P&&R&&de&&g.length===0&&l.jsxs("div",{className:"text-emerald-400 text-sm mt-2",children:["Teams are balanced with ",L," players each"]}),L>0&&P>0&&L!==P&&Math.abs(L-P)===1&&R&&de&&g.length===0&&l.jsxs("div",{className:"text-emerald-400 text-sm mt-2",children:["Teams are valid: ",L," Titans vs ",P," Atlanteans"]})]})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>$("expansions"),children:[l.jsx("span",{className:"mr-2",children:F.expansions?"":""}),"Expansions"]}),F.expansions&&l.jsx(l.Fragment,{children:l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:T.map(pe=>l.jsxs("label",{className:"flex items-center bg-gray-700 p-3 rounded-lg cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:h.includes(pe),onChange:()=>oe(pe),className:"mr-2 h-5 w-5"}),l.jsx("span",{children:pe})]},pe))})})]}),o.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>$("names"),children:[l.jsx("span",{className:"mr-2",children:F.names?"":""}),"Player Names"]}),F.names&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(pe=>{const he=pe.name.trim()!==""&&g.includes(pe.name.trim());return l.jsx(t6,{player:pe,onNameChange:Re=>f(pe.id,Re),onRemove:()=>{C("buttonClick"),A(pe.id)},isDuplicate:he,suggestedNames:j},pe.id)})})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[l.jsx("div",{className:"relative",children:l.jsx(At,{text:"View match statistics and player records",position:"top",disableMobileTooltip:!0,children:l.jsx("button",{className:"px-6 py-3 rounded-lg font-medium text-white bg-green-600 hover:bg-green-500",onClick:Be,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(b$,{size:20,className:"mr-2"}),"View Matches"]})})})}),l.jsx("div",{className:"relative",children:l.jsx(At,{text:"Click to select heroes for each player and start the game.",position:"top",disableMobileTooltip:!0,children:l.jsx("button",{className:`px-6 py-3 rounded-lg font-medium text-white ${U?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 cursor-not-allowed"}`,onClick:Ne,disabled:!U,children:"Draft Heroes"})})})]}),l.jsx("div",{className:"text-sm text-center w-full mt-4",children:l.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[l.jsxs("span",{className:"text-blue-300",children:["Available heroes: ",y]}),O>0&&l.jsx("span",{className:"text-yellow-300",children:m?" Enough heroes for drafting":" Not enough heroes for drafting"})]})}),l.jsx("p",{className:"mt-4 text-xs text-gray-300 text-center mb-2",children:"Disclaimer: This is not a professional product and it is always recommended you back up your data (View Matches>Export Data). This is not an official product and has not been approved by Wolff Designa. All game content is the sole property of Wolff Designa."})]})},qhe={kills:!1,deaths:!1,assists:!1,goldEarned:!1,minionKills:!1,level:!1},nF=({players:e,onComplete:n,isVisible:r})=>{const{playSound:s}=gt(),[a,i]=S.useState(!1),[o,c]=S.useState(qhe),[A,u]=S.useState({}),[h,d]=S.useState(0),[f,g]=S.useState({minionBattle:!1,pushLane:!1,removeTokens:!1,retrieveCards:!1,levelUp:!1,pityCoins:!1});S.useEffect(()=>{if(r){const C={};e.forEach(j=>{var E;C[j.id]={goldCollected:0,kills:0,assists:0,deaths:0,minionKills:0,level:((E=j.stats)==null?void 0:E.level)||1}}),u(C),g({minionBattle:!1,pushLane:!1,removeTokens:!1,retrieveCards:!1,levelUp:!1,pityCoins:!1}),d(0),s("phaseChange")}},[e,r,s]);const m=(C,j,E)=>{s("buttonClick"),u(F=>{var L;const I=((L=F[C])==null?void 0:L[j])||0;if(j==="level"){const P=Math.max(1,Math.min(10,I+E));return{...F,[C]:{...F[C],[j]:P}}}const T=Math.max(0,I+E);return{...F,[C]:{...F[C],[j]:T}}})},y=C=>{s("buttonClick"),g(j=>({...j,[C]:!j[C]}))},v=(C,j)=>{s("toggleSwitch"),c(E=>({...E,[C]:j}))},p=()=>{s("phaseChange"),g({minionBattle:!0,pushLane:!0,removeTokens:!0,retrieveCards:!0,levelUp:!0,pityCoins:!0})},x=()=>{if(s("phaseChange"),a){const C={};Object.entries(A).forEach(([j,E])=>{const F=parseInt(j),I={goldCollected:o.goldEarned?E.goldCollected:void 0,kills:o.kills?E.kills:void 0,assists:o.assists?E.assists:void 0,deaths:o.deaths?E.deaths:void 0,minionKills:o.minionKills?E.minionKills:void 0,level:o.level?E.level:void 0};C[F]=I}),n(C)}else n()},b=C=>{s("buttonClick"),m(C,"kills",1);const j=e.find(E=>E.id===C);j&&e.forEach(E=>{E.id!==C&&E.team===j.team&&m(E.id,"assists",1)})},w=C=>{s("buttonClick"),d(C)},_=[{tab:0,enabled:o.kills,icon:l.jsx(yr,{size:16}),label:"Kills"},{tab:1,enabled:o.deaths,icon:l.jsx(na,{size:16}),label:"Deaths"},{tab:2,enabled:o.minionKills,icon:l.jsx(fc,{size:16}),label:"Minions"},{tab:3,enabled:o.goldEarned,icon:l.jsx(ea,{size:16}),label:"Gold"},{tab:4,enabled:o.level,icon:l.jsx(Mt,{size:16}),label:"Level"}].filter(C=>C.enabled);if(S.useEffect(()=>{a&&_.length>0&&!_.find(C=>C.tab===h)&&d(_[0].tab)},[o,h,_,a]),!r)return null;const B=Object.values(f).every(C=>C),k=e.filter(C=>C.team===ie.Titans),N=e.filter(C=>C.team===ie.Atlanteans);return l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"End of Round Assistant"}),l.jsx("button",{onClick:()=>n(),className:"p-1 bg-gray-700 hover:bg-gray-600 rounded-full","aria-label":"Close",children:l.jsx(Jt,{size:24})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"text-xl font-semibold",children:"End of Round Checklist"}),l.jsxs("button",{onClick:p,className:"px-4 py-1 bg-green-600 hover:bg-green-500 rounded-lg flex items-center text-sm",children:[l.jsx(z8,{size:16,className:"mr-2"}),"Check All Items"]})]}),l.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg space-y-3",children:[l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.minionBattle?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("minionBattle"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.minionBattle?"bg-green-600":"bg-gray-600"}`,children:f.minionBattle?l.jsx(Lo,{size:16}):l.jsx("span",{children:"1"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Minion Battle"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Count minions in Battle Zone. Team with fewer minions removes the difference."})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.pushLane?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("pushLane"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.pushLane?"bg-green-600":"bg-gray-600"}`,children:f.pushLane?l.jsx(Lo,{size:16}):l.jsx("span",{children:"2"})}),l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium",children:["Push the Lane ",l.jsx("span",{className:"text-gray-400 font-normal",children:"(if applicable)"})]}),l.jsx("p",{className:"text-sm text-gray-300",children:"Flip Wave counter, move Battle Zone, respawn minions."})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.removeTokens?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("removeTokens"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.removeTokens?"bg-green-600":"bg-gray-600"}`,children:f.removeTokens?l.jsx(Lo,{size:16}):l.jsx("span",{children:"3"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Remove Tokens, Return Markers"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Clear the board of all tokens and return markers."})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.retrieveCards?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("retrieveCards"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.retrieveCards?"bg-green-600":"bg-gray-600"}`,children:f.retrieveCards?l.jsx(Lo,{size:16}):l.jsx("span",{children:"4"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Retrieve Cards"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Take back all resolved and discarded cards into hand."})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.levelUp?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("levelUp"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.levelUp?"bg-green-600":"bg-gray-600"}`,children:f.levelUp?l.jsx(Lo,{size:16}):l.jsx("span",{children:"5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Level Up"}),l.jsx("p",{className:"text-sm text-gray-300",children:"If you have enough coins, purchase level up(s). This is mandatory!"})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.pityCoins?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("pityCoins"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.pityCoins?"bg-green-600":"bg-gray-600"}`,children:f.pityCoins?l.jsx(Lo,{size:16}):l.jsx("span",{children:"6"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Collect Pity Coin"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Players who did NOT level up collect 1 coin."})]})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("input",{type:"checkbox",id:"enableLogging",checked:a,onChange:C=>{s("toggleSwitch"),i(C.target.checked)},className:"mr-3 h-5 w-5"}),l.jsx("label",{htmlFor:"enableLogging",className:"text-xl font-medium",children:"Log Player Stats (Optional)"})]}),a&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-300 italic",children:"Enter stats for this round only. You only need to enter the stats you are interested in tracking."}),l.jsxs("div",{className:"mb-4 p-3 bg-gray-700/50 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Select Stats to Track"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[l.jsx(ec,{icon:l.jsx(yr,{size:16}),label:"Kills",enabled:o.kills,onChange:C=>v("kills",C)}),l.jsx(ec,{icon:l.jsx(na,{size:16}),label:"Deaths",enabled:o.deaths,onChange:C=>v("deaths",C)}),l.jsx(ec,{icon:l.jsx(St,{size:16}),label:"Assists",enabled:o.assists,onChange:C=>v("assists",C)}),l.jsx(ec,{icon:l.jsx(ea,{size:16}),label:"Gold Earned",enabled:o.goldEarned,onChange:C=>v("goldEarned",C)}),l.jsx(ec,{icon:l.jsx(fc,{size:16}),label:"Minion Kills",enabled:o.minionKills,onChange:C=>v("minionKills",C)}),l.jsx(ec,{icon:l.jsx(Mt,{size:16}),label:"Level",enabled:o.level,onChange:C=>v("level",C)})]})]}),_.length>0?l.jsx("div",{className:"flex border-b border-gray-700 flex-wrap",children:_.map(C=>l.jsxs("button",{className:`px-4 py-2 flex items-center ${h===C.tab?"border-b-2 border-blue-500 text-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>w(C.tab),children:[C.icon," ",l.jsx("span",{className:"ml-2",children:C.label})]},C.tab))}):l.jsxs("div",{className:"text-center py-8 text-gray-400",children:[l.jsx("p",{className:"mb-2",children:"No stats selected for tracking"}),l.jsx("p",{className:"text-sm",children:"Enable stat categories above to begin tracking data"})]}),l.jsxs("div",{className:"mt-4",children:[h===0&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"When a player gets a kill, their teammates automatically receive an assist. Click on the player who got the kill."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(C=>{var j,E,F,I,T;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:L=>{const P=L.target;P.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium flex items-center",children:[C.name,l.jsx(vl,{size:14,className:"ml-1 text-yellow-500"}),((j=C.hero)==null?void 0:j.complexity)||1,((E=C.stats)==null?void 0:E.level)&&l.jsxs("span",{className:"ml-1 flex items-center",children:[l.jsx(Mt,{size:14,className:"text-blue-300"})," ",C.stats.level]})]}),l.jsxs("div",{className:"text-xs flex space-x-2",children:[l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(yr,{size:12,className:"mr-1"}),((F=A[C.id])==null?void 0:F.kills)||0]}),l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(St,{size:12,className:"mr-1"}),((I=A[C.id])==null?void 0:I.assists)||0]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-blue-700 hover:bg-blue-600 px-3 py-1 rounded text-sm",onClick:()=>b(C.id),children:"Got Kill"}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"kills",-1),disabled:!((T=A[C.id])!=null&&T.kills),children:l.jsx(wa,{size:16})})]})]},C.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:N.map(C=>{var j,E,F,I,T;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:L=>{const P=L.target;P.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium flex items-center",children:[C.name,l.jsx(vl,{size:14,className:"ml-1 text-yellow-500"}),((j=C.hero)==null?void 0:j.complexity)||1,((E=C.stats)==null?void 0:E.level)&&l.jsxs("span",{className:"ml-1 flex items-center",children:[l.jsx(Mt,{size:14,className:"text-red-300"})," ",C.stats.level]})]}),l.jsxs("div",{className:"text-xs flex space-x-2",children:[l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(yr,{size:12,className:"mr-1"}),((F=A[C.id])==null?void 0:F.kills)||0]}),l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(St,{size:12,className:"mr-1"}),((I=A[C.id])==null?void 0:I.assists)||0]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-red-700 hover:bg-red-600 px-3 py-1 rounded text-sm",onClick:()=>b(C.id),children:"Got Kill"}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"kills",-1),disabled:!((T=A[C.id])!=null&&T.kills),children:l.jsx(wa,{size:16})})]})]},C.id)})})]})]})]}),h===1&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"Record player deaths."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(C=>{var j,E,F;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:I=>{const T=I.target;T.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:C.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(na,{size:12,className:"mr-1"}),((j=A[C.id])==null?void 0:j.deaths)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"deaths",-1),disabled:!((E=A[C.id])!=null&&E.deaths),children:l.jsx(wa,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((F=A[C.id])==null?void 0:F.deaths)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"deaths",1),children:l.jsx(Di,{size:16})})]})]},C.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:N.map(C=>{var j,E,F;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:I=>{const T=I.target;T.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:C.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(na,{size:12,className:"mr-1"}),((j=A[C.id])==null?void 0:j.deaths)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"deaths",-1),disabled:!((E=A[C.id])!=null&&E.deaths),children:l.jsx(wa,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((F=A[C.id])==null?void 0:F.deaths)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"deaths",1),children:l.jsx(Di,{size:16})})]})]},C.id)})})]})]})]}),h===2&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"Record minion kills."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(C=>{var j,E,F;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:I=>{const T=I.target;T.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:C.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Minion Kills",children:[l.jsx(fc,{size:12,className:"mr-1"}),((j=A[C.id])==null?void 0:j.minionKills)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"minionKills",-1),disabled:!((E=A[C.id])!=null&&E.minionKills),children:l.jsx(wa,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((F=A[C.id])==null?void 0:F.minionKills)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"minionKills",1),children:l.jsx(Di,{size:16})})]})]},C.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:N.map(C=>{var j,E,F;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:I=>{const T=I.target;T.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:C.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Minion Kills",children:[l.jsx(fc,{size:12,className:"mr-1"}),((j=A[C.id])==null?void 0:j.minionKills)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"minionKills",-1),disabled:!((E=A[C.id])!=null&&E.minionKills),children:l.jsx(wa,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((F=A[C.id])==null?void 0:F.minionKills)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"minionKills",1),children:l.jsx(Di,{size:16})})]})]},C.id)})})]})]})]}),h===3&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"Record gold collected this round (before spending on level-ups and including pity coins)."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(C=>{var j,E,F;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:I=>{const T=I.target;T.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:C.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Gold Collected",children:[l.jsx(ea,{size:12,className:"mr-1"}),((j=A[C.id])==null?void 0:j.goldCollected)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"goldCollected",-1),disabled:!((E=A[C.id])!=null&&E.goldCollected),children:l.jsx(wa,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((F=A[C.id])==null?void 0:F.goldCollected)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"goldCollected",1),children:l.jsx(Di,{size:16})})]})]},C.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:N.map(C=>{var j,E,F;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:I=>{const T=I.target;T.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:C.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Gold Collected",children:[l.jsx(ea,{size:12,className:"mr-1"}),((j=A[C.id])==null?void 0:j.goldCollected)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"goldCollected",-1),disabled:!((E=A[C.id])!=null&&E.goldCollected),children:l.jsx(wa,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((F=A[C.id])==null?void 0:F.goldCollected)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"goldCollected",1),children:l.jsx(Di,{size:16})})]})]},C.id)})})]})]})]}),h===4&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"Record player level after purchasing any level ups with gold."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(C=>{var j,E,F,I;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:T=>{const L=T.target;L.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:C.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Player Level",children:[l.jsx(Mt,{size:14,className:"mr-1 text-blue-300"}),"Current Level: ",((j=C.stats)==null?void 0:j.level)||1]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"level",-1),disabled:((E=A[C.id])==null?void 0:E.level)===1,children:l.jsx(wa,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((F=A[C.id])==null?void 0:F.level)||1}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"level",1),disabled:((I=A[C.id])==null?void 0:I.level)===10,children:l.jsx(Di,{size:16})})]})]},C.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:N.map(C=>{var j,E,F,I;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&l.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:T=>{const L=T.target;L.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:C.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Player Level",children:[l.jsx(Mt,{size:14,className:"mr-1 text-red-300"}),"Current Level: ",((j=C.stats)==null?void 0:j.level)||1]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"level",-1),disabled:((E=A[C.id])==null?void 0:E.level)===1,children:l.jsx(wa,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((F=A[C.id])==null?void 0:F.level)||1}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(C.id,"level",1),disabled:((I=A[C.id])==null?void 0:I.level)===10,children:l.jsx(Di,{size:16})})]})]},C.id)})})]})]})]}),_.length>1&&l.jsxs("div",{className:"flex justify-between mt-4",children:[l.jsxs("button",{className:"flex items-center px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>{const C=_.findIndex(E=>E.tab===h),j=Math.max(0,C-1);w(_[j].tab)},disabled:_.findIndex(C=>C.tab===h)===0,children:[l.jsx(jn,{size:16,className:"mr-1"})," Previous"]}),l.jsxs("button",{className:"flex items-center px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>{const C=_.findIndex(E=>E.tab===h),j=Math.min(_.length-1,C+1);w(_[j].tab)},disabled:_.findIndex(C=>C.tab===h)===_.length-1,children:["Next ",l.jsx(jd,{size:16,className:"ml-1"})]})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-2",children:"Stats Being Tracked This Round"}),Object.values(o).some(Boolean)?l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[o.kills&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-blue-300",children:[l.jsx(yr,{size:16,className:"mr-2"})," Total Kills"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,j)=>C+(j.kills||0),0)})]}),o.deaths&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-red-300",children:[l.jsx(na,{size:16,className:"mr-2"})," Total Deaths"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,j)=>C+(j.deaths||0),0)})]}),o.assists&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-purple-300",children:[l.jsx(St,{size:16,className:"mr-2"})," Total Assists"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,j)=>C+(j.assists||0),0)})]}),o.goldEarned&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-yellow-300",children:[l.jsx(ea,{size:16,className:"mr-2"})," Gold Collected"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,j)=>C+(j.goldCollected||0),0)})]}),o.minionKills&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-green-300",children:[l.jsx(fc,{size:16,className:"mr-2"})," Minion Kills"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,j)=>C+(j.minionKills||0),0)})]}),o.level&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-indigo-300",children:[l.jsx(Mt,{size:16,className:"mr-2"})," Levels"]}),l.jsx("div",{className:"text-sm",children:e.map(C=>{var j;return`${C.name}: ${((j=A[C.id])==null?void 0:j.level)||1}`}).join(", ")})]})]}):l.jsxs("div",{className:"text-center py-4 text-gray-400",children:[l.jsx("p",{children:"No statistics will be tracked this round."}),l.jsx("p",{className:"text-sm",children:"Enable stat categories above to begin tracking."})]})]})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{className:`text-${B?"green":"yellow"}-400 font-medium`,children:B?"All steps completed!":"Please complete all steps"}),l.jsx("button",{onClick:x,className:`px-6 py-3 rounded-lg text-white font-medium ${B?"bg-green-600 hover:bg-green-500":"bg-blue-600 hover:bg-blue-500"}`,children:a?"Save Stats & Continue":"Continue"})]})]})})},ec=({icon:e,label:n,enabled:r,onChange:s})=>l.jsxs("div",{className:`flex items-center p-2 rounded cursor-pointer transition-colors ${r?"bg-blue-900/30 border border-blue-500/50":"bg-gray-600 border border-gray-500"}`,onClick:()=>s(!r),children:[l.jsx("div",{className:`mr-2 ${r?"text-blue-400":"text-gray-400"}`,children:e}),l.jsx("span",{className:`text-sm flex-grow ${r?"text-blue-200":"text-gray-400"}`,children:n}),l.jsx("div",{className:"ml-auto",children:l.jsx("div",{className:`w-4 h-4 rounded-full ${r?"bg-blue-500":"bg-gray-500"}`})})]}),Xhe=({gameState:e,players:n,strategyTimeRemaining:r,moveTimeRemaining:s,strategyTimerActive:a,moveTimerActive:i,onStartStrategyTimer:o,onPauseStrategyTimer:c,onResetStrategyTimer:A,onEndStrategyPhase:u,onStartMoveTimer:h,onPauseMoveTimer:d,onResetMoveTimer:f,onSelectPlayer:g,onCompletePlayerTurn:m,onStartNextTurn:y,onAdjustTeamLife:v,onIncrementWave:p,onDecrementWave:x,onAdjustRound:b,onAdjustTurn:w,onDeclareVictory:_,onFlipCoin:B,strategyTimerEnabled:k,moveTimerEnabled:N,onSavePlayerStats:C})=>{var z,oe,Ce,Fe,Ne,Be,pe;const{playSound:j}=gt(),[E,F]=S.useState(!1),I=he=>{const Re=Math.floor(he/60),Le=he%60;return`${Re}:${Le.toString().padStart(2,"0")}`},T=e.activeHeroIndex>=0?n[e.activeHeroIndex]:null;S.useEffect(()=>{a&&k&&(r===10&&j("timerWarning"),r>0&&j("timerTick"))},[r,a,k,j]),S.useEffect(()=>{i&&N&&(s===10&&j("timerWarning"),s>0&&j("timerTick"))},[s,i,N,j]);const L=()=>n.some(he=>he.stats&&((he.stats.totalKills??0)>0||(he.stats.totalAssists??0)>0||(he.stats.totalDeaths??0)>0||(he.stats.totalMinionKills??0)>0||(he.stats.totalGoldEarned??0)>0||he.stats.level!==void 0)),P=he=>n.some(Re=>Re.stats&&(he==="level"?Re.stats[he]!==void 0:(Re.stats[he]??0)>0)),O=()=>{j("buttonClick")},Q=()=>{j("buttonClick"),o()},R=()=>{j("buttonClick"),c()},M=()=>{j("phaseChange"),u()},G=()=>{j("buttonClick"),h()},V=()=>{j("buttonClick"),d()},K=()=>{j("buttonClick"),A()},se=()=>{j("buttonClick"),f()},de=()=>{j("turnComplete"),m()},ye=()=>{e.turn===4?F(!0):(j("turnStart"),y())},W=he=>{he&&C&&C(he),F(!1),j("turnStart"),y()},U=he=>{j("victory"),_(he)},$=()=>{j("coinFlip"),B()},ne=(he,Re)=>{j("lifeChange"),v(he,Re)};return l.jsxs("div",{className:"game-timer",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-blue-900/50 rounded-lg p-4 text-center",children:[l.jsx("h3",{className:"text-xl font-bold mb-2",children:"Titans Lives"}),l.jsxs("div",{className:"flex justify-center items-center gap-4",children:[l.jsx("button",{className:"bg-blue-700 hover:bg-blue-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>ne(ie.Titans,-1),children:"-"}),l.jsx("span",{className:"text-4xl font-bold",children:e.teamLives[ie.Titans]}),l.jsx("button",{className:"bg-blue-700 hover:bg-blue-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>ne(ie.Titans,1),children:"+"})]}),l.jsxs("button",{className:"mt-4 w-full bg-blue-700 hover:bg-blue-600 rounded-lg py-2 px-4 flex items-center justify-center",onClick:()=>U(ie.Titans),children:[l.jsx(kd,{size:18,className:"mr-2"}),l.jsx("span",{children:"Declare Titan Victory"})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[l.jsxs("div",{className:"flex justify-between mb-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"Round"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center mr-2",onClick:()=>{O(),b(-1)},children:l.jsx(ta,{size:14})}),l.jsx("div",{className:"text-2xl font-bold",children:e.round}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center ml-2",onClick:()=>{O(),b(1)},children:l.jsx(ns,{size:14})})]})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"Turn"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center mr-2",onClick:()=>{O(),w(-1)},children:l.jsx(ta,{size:14})}),l.jsxs("div",{className:"text-2xl font-bold",children:[e.turn,"/4"]}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center ml-2",onClick:()=>{O(),w(1)},children:l.jsx(ns,{size:14})})]})]}),!e.hasMultipleLanes&&l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"Wave"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center mr-2",onClick:()=>{O(),x(nt.Single)},disabled:!e.waves[nt.Single]||e.waves[nt.Single].currentWave<=1,children:l.jsx(ta,{size:14})}),l.jsxs("div",{className:"text-2xl font-bold",children:[((z=e.waves[nt.Single])==null?void 0:z.currentWave)||1,"/",((oe=e.waves[nt.Single])==null?void 0:oe.totalWaves)||3]}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center ml-2",onClick:()=>{O(),p(nt.Single)},disabled:!e.waves[nt.Single]||e.waves[nt.Single].currentWave>=e.waves[nt.Single].totalWaves,children:l.jsx(ns,{size:14})})]})]})]}),l.jsx("div",{className:"mt-2 mb-4",children:l.jsxs("span",{className:"px-3 py-1 rounded-full bg-gray-700 text-sm",children:[e.currentPhase==="strategy"&&"Strategy Phase",e.currentPhase==="move"&&"Action Phase",e.currentPhase==="turn-end"&&"Turn Complete"]})}),e.hasMultipleLanes&&l.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[l.jsx("h4",{className:"text-lg font-bold mb-2",children:"Wave Counters"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative bg-gray-700/50 p-2 rounded",children:[l.jsx("span",{className:"text-sm text-gray-300",children:"Top Lane"}),l.jsxs("div",{className:"flex items-center justify-center mt-1",children:[l.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center mr-2",onClick:()=>{O(),x(nt.Top)},disabled:!e.waves[nt.Top]||e.waves[nt.Top].currentWave<=1,children:l.jsx(ta,{size:12})}),l.jsxs("div",{className:"text-xl font-bold",children:[((Ce=e.waves[nt.Top])==null?void 0:Ce.currentWave)||1,"/",((Fe=e.waves[nt.Top])==null?void 0:Fe.totalWaves)||7]}),l.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center ml-2",onClick:()=>{O(),p(nt.Top)},disabled:!e.waves[nt.Top]||e.waves[nt.Top].currentWave>=e.waves[nt.Top].totalWaves,children:l.jsx(ns,{size:12})})]})]}),l.jsxs("div",{className:"relative bg-gray-700/50 p-2 rounded",children:[l.jsx("span",{className:"text-sm text-gray-300",children:"Bottom Lane"}),l.jsxs("div",{className:"flex items-center justify-center mt-1",children:[l.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center mr-2",onClick:()=>{O(),x(nt.Bottom)},disabled:!e.waves[nt.Bottom]||e.waves[nt.Bottom].currentWave<=1,children:l.jsx(ta,{size:12})}),l.jsxs("div",{className:"text-xl font-bold",children:[((Ne=e.waves[nt.Bottom])==null?void 0:Ne.currentWave)||1,"/",((Be=e.waves[nt.Bottom])==null?void 0:Be.totalWaves)||7]}),l.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center ml-2",onClick:()=>{O(),p(nt.Bottom)},disabled:!e.waves[nt.Bottom]||e.waves[nt.Bottom].currentWave>=e.waves[nt.Bottom].totalWaves,children:l.jsx(ns,{size:12})})]})]})]})]}),l.jsx("div",{className:"mt-3",children:l.jsx(At,{text:"Click to flip the tie-breaker coin",children:l.jsxs("button",{className:`flex items-center justify-center px-4 py-2 rounded-lg text-white ${e.coinSide===ie.Titans?"bg-blue-700 hover:bg-blue-600":"bg-orange-600 hover:bg-orange-500"}`,onClick:$,children:[l.jsx("span",{className:"mr-2",children:"Tiebreaker:"}),l.jsx("span",{className:"font-bold",children:e.coinSide===ie.Titans?"Titans":"Atlanteans"})]})})})]}),l.jsxs("div",{className:"bg-red-900/50 rounded-lg p-4 text-center",children:[l.jsx("h3",{className:"text-xl font-bold mb-2",children:"Atlanteans Lives"}),l.jsxs("div",{className:"flex justify-center items-center gap-4",children:[l.jsx("button",{className:"bg-red-700 hover:bg-red-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>ne(ie.Atlanteans,-1),children:"-"}),l.jsx("span",{className:"text-4xl font-bold",children:e.teamLives[ie.Atlanteans]}),l.jsx("button",{className:"bg-red-700 hover:bg-red-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>ne(ie.Atlanteans,1),children:"+"})]}),l.jsxs("button",{className:"mt-4 w-full bg-red-700 hover:bg-red-600 rounded-lg py-2 px-4 flex items-center justify-center",onClick:()=>U(ie.Atlanteans),children:[l.jsx(kd,{size:18,className:"mr-2"}),l.jsx("span",{children:"Declare Atlantean Victory"})]})]})]}),l.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:e.currentPhase==="strategy"?l.jsxs("div",{className:"text-center",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Strategy Phase - Turn ",e.turn]}),l.jsx("div",{className:`text-6xl font-bold mb-6 flex justify-center items-center ${k&&r<=10?"text-red-500 animate-pulse":""}`,children:k?I(r):l.jsx(eg,{size:64,className:"text-gray-300"})}),l.jsxs("div",{className:"flex justify-center gap-4",children:[k&&(a?l.jsx("button",{className:"bg-amber-600 hover:bg-amber-500 px-6 py-3 rounded-lg text-white font-medium",onClick:R,children:"Pause"}):l.jsx("button",{className:"bg-green-600 hover:bg-green-500 px-6 py-3 rounded-lg text-white font-medium",onClick:Q,children:"Resume"})),k&&l.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-6 py-3 rounded-lg text-white font-medium flex items-center",onClick:K,children:[l.jsx(zc,{size:18,className:"mr-2"}),"Reset Timer"]}),l.jsx("button",{className:"bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-lg text-white font-medium",onClick:M,children:"End Strategy Phase"})]})]}):e.currentPhase==="move"?l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Action Phase"}),T&&T.hero?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:`inline-block py-2 px-4 rounded-lg text-white font-medium ${T.team===ie.Titans?"bg-blue-700":"bg-red-700"}`,children:T.team===ie.Titans?"Titans":"Atlanteans"}),l.jsxs("div",{className:"flex items-center justify-center mt-2",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full overflow-hidden mr-3",children:l.jsx("img",{src:T.hero.icon,alt:T.hero.name,className:"w-full h-full object-cover",onError:he=>{const Re=he.target;Re.src="https://via.placeholder.com/64?text=Hero"}})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-2xl font-bold",children:[T.hero.name,((pe=T.stats)==null?void 0:pe.level)&&l.jsxs("span",{className:"ml-2 flex items-center",title:"Player Level",children:[l.jsx(Mt,{size:18,className:`${T.team===ie.Titans?"text-blue-300":"text-red-300"} mr-1`}),T.stats.level]})]}),l.jsx("div",{className:"text-lg text-gray-300",children:T.name})]})]}),l.jsx("div",{className:`text-6xl font-bold my-6 flex justify-center items-center ${N&&s<=10?"text-red-500 animate-pulse":""}`,children:N?I(s):l.jsx(eg,{size:64,className:"text-gray-300"})}),l.jsxs("div",{className:"flex justify-center gap-4",children:[N&&(i?l.jsx("button",{className:"bg-amber-600 hover:bg-amber-500 px-6 py-3 rounded-lg text-white font-medium",onClick:V,children:"Pause"}):l.jsx("button",{className:"bg-green-600 hover:bg-green-500 px-6 py-3 rounded-lg text-white font-medium",onClick:G,children:"Resume"})),N&&l.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-6 py-3 rounded-lg text-white font-medium flex items-center",onClick:se,children:[l.jsx(zc,{size:18,className:"mr-2"}),"Reset Timer"]}),l.jsxs("button",{className:"bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-lg text-white font-medium flex items-center",onClick:de,children:[l.jsx(lr,{size:18,className:"mr-2"}),"Complete Turn"]})]})]})}):l.jsx("div",{className:"py-6 text-xl text-amber-300",children:"Select a player to start their action timer"})]}):l.jsxs("div",{className:"text-center",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Turn ",e.turn," Complete"]}),l.jsx("p",{className:"text-lg mb-6",children:"All players have completed their actions"}),l.jsxs("button",{className:"bg-green-600 hover:bg-green-500 px-8 py-4 rounded-lg text-white font-medium text-xl flex items-center mx-auto",onClick:ye,children:[l.jsx(zc,{size:20,className:"mr-2"}),e.turn===4?"End Round":"Start Next Turn"]})]})}),e.currentPhase!=="turn-end"&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-3",children:e.currentPhase==="strategy"?"Players (waiting for strategy phase to end)":"Select Player"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((he,Re)=>he.hero&&J(he,Re))})]}),l.jsx(nF,{players:n,onComplete:W,isVisible:E})]});function J(he,Re){var le,te,ge,Ge,D,X,re;const Le=e.activeHeroIndex===Re,ze=e.completedTurns.includes(Re),Ae=e.currentPhase==="move"&&!ze&&!Le,Me=he.stats&&((he.stats.totalKills??0)>0||(he.stats.totalAssists??0)>0||(he.stats.totalDeaths??0)>0||(he.stats.totalMinionKills??0)>0||(he.stats.totalGoldEarned??0)>0||he.stats.level!==void 0);return l.jsx("div",{className:`p-5 rounded-lg transition-all relative shadow-md ${Le?he.team===ie.Titans?"bg-blue-700 ring-4 ring-white":"bg-red-700 ring-4 ring-white":ze?"bg-gray-700/90 opacity-60":he.team===ie.Titans?"bg-blue-900/70 hover:bg-blue-800":"bg-red-900/70 hover:bg-red-800"} ${Ae?"cursor-pointer transform hover:scale-[1.02] hover:shadow-lg":""}`,onClick:()=>{Ae&&(j("heroSelect"),g(Re))},children:l.jsxs("div",{className:"flex items-start",children:[he.hero&&l.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full overflow-hidden mr-4 flex-shrink-0 border-2 border-gray-600",children:l.jsx("img",{src:he.hero.icon,alt:he.hero.name,className:"w-full h-full object-cover",onError:xe=>{const me=xe.target;me.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"text-xl font-bold mb-1 flex items-center",children:[((le=he.hero)==null?void 0:le.name)||"Unknown Hero",((te=he.stats)==null?void 0:te.level)&&l.jsxs("span",{className:"ml-2 flex items-center",title:`Level ${he.stats.level}`,children:[l.jsx(Mt,{size:16,className:`${he.team===ie.Titans?"text-blue-300":"text-red-300"} mr-1`}),he.stats.level]})]}),ze&&l.jsx("div",{className:"bg-green-600 rounded-full p-1.5 ml-2",title:"Completed",children:l.jsx(lr,{size:20})}),Le&&l.jsx("div",{className:"bg-yellow-500 rounded-full p-1.5 ml-2 animate-pulse",title:"Active",children:l.jsx(Lr,{size:20})})]}),l.jsx("div",{className:"text-lg font-medium text-gray-100 mb-2",children:he.name||`Player ${he.id}`}),he.lane&&l.jsx("div",{className:"text-base text-gray-300 mb-2",children:he.lane===nt.Top?"Top Lane":"Bottom Lane"}),Me&&L()&&l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-2 text-base bg-black/20 p-2 rounded",children:[P("totalKills")&&l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(yr,{size:18,className:"mr-2 text-blue-400"}),l.jsx("span",{className:"font-bold",children:((ge=he.stats)==null?void 0:ge.totalKills)||0})]}),P("totalDeaths")&&l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(na,{size:18,className:"mr-2 text-red-400"}),l.jsx("span",{className:"font-bold",children:((Ge=he.stats)==null?void 0:Ge.totalDeaths)||0})]}),P("totalAssists")&&l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(St,{size:18,className:"mr-2 text-green-400"}),l.jsx("span",{className:"font-bold",children:((D=he.stats)==null?void 0:D.totalAssists)||0})]}),P("totalMinionKills")&&l.jsxs("span",{className:"flex items-center",title:"Minion Kills",children:[l.jsx(fc,{size:18,className:"mr-2 text-yellow-400"}),l.jsx("span",{className:"font-bold",children:((X=he.stats)==null?void 0:X.totalMinionKills)||0})]}),P("totalGoldEarned")&&l.jsxs("span",{className:"flex items-center col-span-2 mt-1 justify-center bg-amber-900/30 py-1 px-2 rounded",title:"Total Gold Earned",children:[l.jsx(ea,{size:18,className:"mr-2 text-amber-400"}),l.jsx("span",{className:"font-bold",children:((re=he.stats)==null?void 0:re.totalGoldEarned)||0})]})]})]})]})},he.id)}},rF=()=>{const[e,n]=S.useState(!1),r=[{role:"Damager",description:"Damagers are heroes adept at forcing their opponents to discard cards. This weakens enemy heroes, making it easier for your allies to take them down."},{role:"Disabler",description:"Disablers possess the power to weaken enemy heroes by preventing or limiting their ability to perform certain actions."},{role:"Durable",description:"Durable heroes are best equipped to withstand the heat of battle and survive, usually achieve this through a combination of a high defense stat and self-healing abilities."},{role:"Farming",description:"Heroes with farming abilities can generate extra coins for themselves or their allies, enabling faster leveling and setting up stronger late game."},{role:"Healer",description:"Healers help their allies by letting them retrieve discarded cards, greatly increasing their chances of surviving the fight."},{role:"Melee",description:"These heroes are focused on attacking in close quarters. A team composed entirely of melee fighters is formidable in a brawl, but may struggle against fast ranged heroes and heroes capable of placing tokens."},{role:"Pusher",description:"These heroes are able to deal with more than two enemy minions each round, or protect and respawn their own minions, giving them an edge at pushing the lane."},{role:"Sniper",description:"Most heroes have access to some form of ranged attacks, while Snipers are capable of attacking enemy heroes and minions at a much longer range."},{role:"Tactician",description:"Tacticians specialize in controlling the battlefield by moving, pushing, or repositioning units. Their versatile abilities allow them to support allies and hinder enemies."},{role:"Tokens",description:"These heroes are capable of placing tokens  temporary obstacles with special qualities. Each such hero uses their own type of tokens and the icon will correspond to the ones used by this particular hero."}];return l.jsxs("div",{className:"bg-gray-700 rounded-lg mb-4 overflow-hidden",children:[l.jsxs("button",{className:"w-full px-4 py-3 flex items-center justify-between bg-gray-800 hover:bg-gray-700 transition-colors text-left",onClick:()=>n(!e),"aria-expanded":e,children:[l.jsxs("span",{className:"font-semibold flex items-center",children:[l.jsx("span",{className:"mr-2 text-yellow-400",children:""}),"Hero Role Explanations"]}),e?l.jsx(_r,{size:18}):l.jsx(Dn,{size:18})]}),e&&l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(s=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded",children:[l.jsx("h4",{className:"text-yellow-400 font-semibold mb-1",children:s.role}),l.jsx("p",{className:"text-sm text-gray-300",children:s.description})]},s.role))})})]})},sF=({hero:e,onClose:n,isVisible:r,cardPosition:s})=>{const{isMobile:a}=Xb(),i=S.useRef(null),o=S.useRef(null),[c,A]=S.useState({left:8,bottom:8,right:"auto",top:"auto"});if(S.useEffect(()=>{if(!a&&r&&o.current&&s){const d=o.current.getBoundingClientRect(),f=window.innerWidth,g=window.innerHeight;let m={left:8,bottom:8,right:"auto",top:"auto"};s.x<f/2?m={left:Math.min(s.x+s.width+20,f-d.width-8),top:Math.min(s.y,g-d.height-8),right:"auto",bottom:"auto"}:m={right:Math.min(f-s.x+20,f-8),top:Math.min(s.y,g-d.height-8),left:"auto",bottom:"auto"},s.y+d.height>g-20&&(m.top=Math.max(8,g-d.height-20)),A(m)}},[a,r,s]),!e||!r)return null;const u=d=>{i.current&&!i.current.contains(d.target)&&n()},h=(d,f=0,g=0)=>l.jsxs("div",{className:"mb-2",children:[l.jsx("div",{className:"text-sm font-medium mb-1",children:d}),l.jsx("div",{className:"flex",children:Array.from({length:8}).map((m,y)=>l.jsx("div",{className:`h-5 w-5 transform skew-x-12 mr-0.5 flex-shrink-0 ${y<f?"bg-blue-600":y<g?"bg-blue-200":"bg-gray-700"}`},y))})]});return a?l.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:u,children:l.jsxs("div",{ref:i,className:"bg-gray-900 rounded-lg w-full max-w-md p-4 relative",onClick:d=>d.stopPropagation(),children:[l.jsx("button",{className:"absolute top-2 right-2 p-1 bg-gray-800 rounded-full",onClick:n,"aria-label":"Close hero information",children:l.jsx(Jt,{size:18})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full overflow-hidden mb-3",children:l.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-cover",onError:d=>{d.target.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("h3",{className:"text-xl font-bold mb-1",children:e.name}),l.jsx("div",{className:"text-sm text-gray-300 mb-1",children:e.roles.join("  ")}),e.additionalRoles&&e.additionalRoles.length>0&&l.jsx("div",{className:"text-xs text-gray-400 mb-2",children:e.additionalRoles.join("  ")}),l.jsxs("div",{className:"flex mb-3",children:[[...Array(e.complexity)].map((d,f)=>l.jsx("span",{className:"text-yellow-400 text-lg",children:""},f)),[...Array(4-e.complexity)].map((d,f)=>l.jsx("span",{className:"text-gray-600 text-lg",children:""},f+e.complexity))]}),l.jsxs("div",{className:"w-full mb-4 grid grid-cols-2 gap-3",children:[h("Attack",e.attack,e.attack_upgraded),h("Initiative",e.initiative,e.initiative_upgraded),h("Defence",e.defence,e.defence_upgraded),h("Movement",e.movement,e.movement_upgraded)]}),l.jsx("p",{className:"text-sm leading-relaxed",children:e.description||"This hero's abilities and playstyle are shrouded in mystery."})]})]})}):l.jsx("div",{ref:o,className:"fixed bg-gray-900/95 p-6 rounded-lg shadow-lg max-w-2xl z-50",style:{left:c.left!=="auto"?`${c.left}px`:"auto",right:c.right!=="auto"?`${c.right}px`:"auto",top:c.top!=="auto"?`${c.top}px`:"auto",bottom:c.bottom!=="auto"?`${c.bottom}px`:"auto"},children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"w-28 h-28 bg-gray-300 rounded-full overflow-hidden mr-6 flex-shrink-0",children:l.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-cover",onError:d=>{d.target.src="https://via.placeholder.com/192?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold mb-2",children:e.name}),l.jsx("div",{className:"text-lg text-gray-300 mb-1",children:e.roles.join("  ")}),e.additionalRoles&&e.additionalRoles.length>0&&l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:e.additionalRoles.join("  ")}),l.jsxs("div",{className:"flex mb-3",children:[[...Array(e.complexity)].map((d,f)=>l.jsx("span",{className:"text-yellow-400 text-xl",children:""},f)),[...Array(4-e.complexity)].map((d,f)=>l.jsx("span",{className:"text-gray-600 text-xl",children:""},f+e.complexity))]}),l.jsxs("div",{className:"w-full mb-4 grid grid-cols-2 gap-4",children:[h("Attack",e.attack,e.attack_upgraded),h("Initiative",e.initiative,e.initiative_upgraded),h("Defence",e.defence,e.defence_upgraded),h("Movement",e.movement,e.movement_upgraded)]}),l.jsx("p",{className:"text-base leading-relaxed",children:e.description||"This hero's abilities and playstyle are shrouded in mystery."})]})]})})},Yhe=({players:e,draftingState:n,onHeroSelect:r,onHeroBan:s,onFinishDrafting:a,onCancelDrafting:i,onUndoLastAction:o,onResetDraft:c,onBackToDraftSelection:A,canUndo:u})=>{const{isMobile:h}=Xb(),{playSound:d}=gt(),[f,g]=S.useState(null),[m,y]=S.useState(!1),[v,p]=S.useState(void 0),x=S.useRef(null),b=S.useRef(null),w=e.filter(W=>W.team===n.currentTeam&&!n.selectedHeroes.some(U=>U.playerId===W.id)),_=e.every(W=>n.selectedHeroes.some(U=>U.playerId===W.id)),B=W=>W===ie.Titans?"Titans":"Atlanteans",k=()=>{if(n.mode!==De.PickAndBan)return"Invalid Mode";if(n.currentStep>=n.pickBanSequence.length)return e.every(J=>n.selectedHeroes.some(z=>z.playerId===J.id))?"Draft Complete":"Drafting Paused/Error";const W=n.pickBanSequence[n.currentStep],U=B(n.currentTeam),$=W.action==="ban"?"Ban":"Pick";return`${U} ${$} - Round ${W.round}`},N=W=>[...W].sort((U,$)=>U.complexity!==$.complexity?U.complexity-$.complexity:U.name.localeCompare($.name)),C=(W,U)=>{d("heroSelect"),r(W,U)},j=W=>{d("heroBan"),s(W)},E=()=>{d("phaseChange"),a()},F=()=>{d("buttonClick"),i()},I=()=>{u&&(d("buttonClick"),o())},T=()=>{d("buttonClick"),c()},L=()=>{d("buttonClick"),A()},P=W=>{h&&!_&&(d("buttonClick"),g(W),y(!0))},O=()=>{d("buttonClick"),y(!1)},Q=(W,U)=>{if(!h){g(W);const ne=U.currentTarget.getBoundingClientRect();p({x:ne.left,y:ne.top,width:ne.width,height:ne.height})}},R=()=>{h||(g(null),p(void 0))},M=(W,U,$)=>{var he,Re,Le,ze;const ne=U==="available",J=U==="assigned",z=U==="selected",oe=U==="banned",Ce=e.filter(Ae=>Ae.team===n.currentTeam&&!n.selectedHeroes.some(Me=>Me.playerId===Ae.id)),Fe=_&&(ne||J),Ne=$?((he=e.find(Ae=>Ae.id===$))==null?void 0:he.name)||`Player ${$}`:"",Be=$?(Re=e.find(Ae=>Ae.id===$))==null?void 0:Re.team:void 0,pe=`
      relative p-5 rounded-lg transition-all
      ${Fe?"opacity-40 pointer-events-none":""}
      ${ne?"bg-gray-800 hover:bg-gray-700":""}
      ${J?"bg-amber-900/30 hover:bg-amber-800/40":""}
      ${z?Be===ie.Titans?"bg-blue-900/30":"bg-red-900/30":""}
      ${oe?"bg-red-900/30 opacity-70":""}
    `;return l.jsxs("div",{className:pe,onClick:()=>P(W),onMouseEnter:Ae=>Q(W,Ae),onMouseLeave:R,children:[oe&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:l.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[l.jsx("div",{className:"absolute w-3/4 h-0.5 bg-red-500 transform rotate-45"}),l.jsx("div",{className:"absolute w-3/4 h-0.5 bg-red-500 transform -rotate-45"})]})}),l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:W.icon,alt:W.name,className:"w-full h-full object-cover",onError:Ae=>{const Me=Ae.target;Me.src="https://via.placeholder.com/112?text=Hero"}})}),l.jsx("div",{className:"mt-3 font-medium text-xl",children:W.name}),z&&Ne&&l.jsx("div",{className:"mt-1 text-sm text-gray-300",children:Ne})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(W.complexity)].map((Ae,Me)=>l.jsx("span",{className:"text-yellow-400 text-lg sm:text-xl",children:""},Me)),[...Array(4-W.complexity)].map((Ae,Me)=>l.jsx("span",{className:"text-gray-600 text-lg sm:text-xl",children:""},Me+W.complexity))]}),l.jsx("div",{className:"text-sm sm:text-base text-center text-gray-300 mb-3",children:W.roles.join(", ")}),ne&&n.mode===De.PickAndBan&&l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2",onClick:Ae=>Ae.stopPropagation(),children:[((Le=n.pickBanSequence[n.currentStep])==null?void 0:Le.action)==="ban"&&l.jsx("button",{className:"w-full px-3 py-2 bg-red-700 hover:bg-red-600 rounded text-sm flex items-center justify-center",onClick:Ae=>{Ae.stopPropagation(),j(W)},children:"Ban Hero"}),((ze=n.pickBanSequence[n.currentStep])==null?void 0:ze.action)==="pick"&&Ce.length>0&&l.jsx("div",{className:"grid grid-cols-1 gap-1",children:Ce.map(Ae=>l.jsxs("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:Me=>{Me.stopPropagation(),C(W,Ae.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:Ae.name})]},Ae.id))})]}),ne&&n.mode===De.AllPick&&l.jsx("div",{className:"mt-3",onClick:Ae=>Ae.stopPropagation(),children:Ce.length>0&&l.jsx("div",{className:"grid grid-cols-1 gap-1",children:Ce.map(Ae=>l.jsxs("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:Me=>{Me.stopPropagation(),C(W,Ae.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:Ae.name})]},Ae.id))})}),ne&&n.mode===De.Random&&l.jsx("div",{className:"mt-3",onClick:Ae=>Ae.stopPropagation(),children:Ce.length>0&&l.jsx("div",{className:"grid grid-cols-1 gap-1",children:Ce.map(Ae=>l.jsxs("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:Me=>{Me.stopPropagation(),C(W,Ae.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:Ae.name})]},Ae.id))})}),J&&l.jsx("div",{className:"mt-3",onClick:Ae=>Ae.stopPropagation(),children:l.jsx("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:Ae=>{var le;Ae.stopPropagation();const Me=(le=n.assignedHeroes.find(te=>te.heroOptions.some(ge=>ge.id===W.id)))==null?void 0:le.playerId;Me&&C(W,Me)},children:"Select Hero"})})]},`${W.id}-${U}-${$||0}`)},G=()=>{const W=N(n.availableHeroes);return l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"All Pick"}),l.jsx("div",{className:"mb-6",children:_?l.jsxs("div",{className:"p-3 rounded-lg bg-green-900/50 border-2 border-green-400",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Start Game"}),l.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):l.jsxs("div",{className:`p-3 rounded-lg ${n.currentTeam===ie.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[l.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[B(n.currentTeam)," Turn"]}),w.length>0?l.jsxs("div",{className:"text-md mb-3",children:["Select any hero for: ",w.map(U=>U.name).join(", ")]}):l.jsxs("div",{className:"text-md mb-3",children:["All ",B(n.currentTeam)," players have selected heroes"]})]})}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:W.map(U=>M(U,"available"))})]})},V=()=>l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Single Draft"}),l.jsx("div",{className:"mb-6",children:_?l.jsxs("div",{className:"p-3 rounded-lg bg-green-900/50 border-2 border-green-400",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Start Game"}),l.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):l.jsxs("div",{className:`p-3 rounded-lg ${n.currentTeam===ie.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[l.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[B(n.currentTeam)," Turn"]}),w.length>0?l.jsxs("div",{className:"text-md mb-3",children:["Any ",B(n.currentTeam)," player can select a hero from their options"]}):l.jsxs("div",{className:"text-md mb-3",children:["All ",B(n.currentTeam)," players have selected heroes"]})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("h4",{className:"text-lg font-medium mb-3 bg-blue-900/50 p-2 rounded flex items-center",children:[l.jsx("div",{className:"bg-blue-700 rounded-full p-1 mr-2",children:l.jsx(wo,{size:16})}),"Titans Team"]}),l.jsx("div",{ref:x,className:"max-h-96 overflow-y-auto pr-2 space-y-4 custom-scrollbar",children:n.assignedHeroes.filter(W=>{const U=e.find($=>$.id===W.playerId);return U&&U.team===ie.Titans}).map(W=>{const U=e.find(J=>J.id===W.playerId);if(!U)return null;const $=n.selectedHeroes.some(J=>J.playerId===U.id),ne=N(W.heroOptions);return l.jsxs("div",{className:`bg-gray-800 p-4 rounded-lg ${$?"opacity-60":""}`,children:[l.jsxs("h5",{className:"text-lg font-medium mb-3 flex items-center",children:[U.name,$&&l.jsx("span",{className:"ml-2 bg-green-600 text-white text-xs px-2 py-1 rounded",children:"Selected"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:ne.map(J=>l.jsxs("div",{className:`relative p-4 rounded-lg ${_?"opacity-40 pointer-events-none":n.currentTeam===ie.Titans&&!$?"bg-blue-900/30 hover:bg-blue-800/40 cursor-pointer":"bg-gray-800"}`,onClick:z=>{n.currentTeam===ie.Titans&&!$&&!_?(z.stopPropagation(),C(J,U.id)):P(J)},onMouseEnter:z=>Q(J,z),onMouseLeave:R,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:J.icon,alt:J.name,className:"w-full h-full object-cover",onError:z=>{const oe=z.target;oe.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("div",{className:"mt-2 font-medium text-lg",children:J.name})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(J.complexity)].map((z,oe)=>l.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},oe)),[...Array(4-J.complexity)].map((z,oe)=>l.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},oe+J.complexity))]}),l.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-2",children:J.roles.join(", ")}),n.currentTeam===ie.Titans&&!$&&!_&&l.jsx("button",{className:"w-full mt-2 px-3 py-2 bg-blue-700 hover:bg-blue-600 rounded text-sm",onClick:z=>{z.stopPropagation(),C(J,U.id)},children:"Select This Hero"})]},J.id))})]},U.id)})})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium mb-3 bg-red-900/50 p-2 rounded flex items-center",children:[l.jsx("div",{className:"bg-red-700 rounded-full p-1 mr-2",children:l.jsx(wo,{size:16})}),"Atlanteans Team"]}),l.jsx("div",{ref:b,className:"max-h-96 overflow-y-auto pr-2 space-y-4 custom-scrollbar",children:n.assignedHeroes.filter(W=>{const U=e.find($=>$.id===W.playerId);return U&&U.team===ie.Atlanteans}).map(W=>{const U=e.find(J=>J.id===W.playerId);if(!U)return null;const $=n.selectedHeroes.some(J=>J.playerId===U.id),ne=N(W.heroOptions);return l.jsxs("div",{className:`bg-gray-800 p-4 rounded-lg ${$?"opacity-60":""}`,children:[l.jsxs("h5",{className:"text-lg font-medium mb-3 flex items-center",children:[U.name,$&&l.jsx("span",{className:"ml-2 bg-green-600 text-white text-xs px-2 py-1 rounded",children:"Selected"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:ne.map(J=>l.jsxs("div",{className:`relative p-4 rounded-lg ${_?"opacity-40 pointer-events-none":n.currentTeam===ie.Atlanteans&&!$?"bg-red-900/30 hover:bg-red-800/40 cursor-pointer":"bg-gray-800"}`,onClick:z=>{n.currentTeam===ie.Atlanteans&&!$&&!_?(z.stopPropagation(),C(J,U.id)):P(J)},onMouseEnter:z=>Q(J,z),onMouseLeave:R,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:J.icon,alt:J.name,className:"w-full h-full object-cover",onError:z=>{const oe=z.target;oe.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("div",{className:"mt-2 font-medium text-lg",children:J.name})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(J.complexity)].map((z,oe)=>l.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},oe)),[...Array(4-J.complexity)].map((z,oe)=>l.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},oe+J.complexity))]}),l.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-2",children:J.roles.join(", ")}),n.currentTeam===ie.Atlanteans&&!$&&!_&&l.jsx("button",{className:"w-full mt-2 px-3 py-2 bg-red-700 hover:bg-red-600 rounded text-sm",onClick:z=>{z.stopPropagation(),C(J,U.id)},children:"Select This Hero"})]},J.id))})]},U.id)})})]})]}),K=()=>{const W=N(n.availableHeroes);return l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Random Draft"}),l.jsx("div",{className:"mb-6",children:_?l.jsxs("div",{className:"p-3 rounded-lg bg-green-900/50 border-2 border-green-400",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Start Game"}),l.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):l.jsxs("div",{className:`p-3 rounded-lg ${n.currentTeam===ie.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[l.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[B(n.currentTeam)," Turn"]}),w.length>0?l.jsxs("div",{className:"text-md mb-3",children:[w.map(U=>U.name).join(", ")," need to select a hero"]}):l.jsxs("div",{className:"text-md mb-3",children:["All ",B(n.currentTeam)," players have selected heroes"]})]})}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:W.map(U=>l.jsxs("div",{className:`relative p-4 rounded-lg transition-all ${_?"opacity-40 pointer-events-none":n.currentTeam===ie.Titans?"bg-blue-900/30 hover:bg-blue-800/40":"bg-red-900/30 hover:bg-red-800/40"}`,onClick:()=>P(U),onMouseEnter:$=>Q(U,$),onMouseLeave:R,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:U.icon,alt:U.name,className:"w-full h-full object-cover",onError:$=>{const ne=$.target;ne.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("div",{className:"mt-2 font-medium text-lg",children:U.name})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(U.complexity)].map(($,ne)=>l.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},ne)),[...Array(4-U.complexity)].map(($,ne)=>l.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},ne+U.complexity))]}),l.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-3",children:U.roles.join(", ")}),w.length>0&&!_&&l.jsx("div",{className:"grid grid-cols-1 gap-1 mt-2",onClick:$=>$.stopPropagation(),children:w.map($=>l.jsxs("button",{className:"w-full px-3 py-2 rounded text-sm bg-green-600 hover:bg-green-500 flex items-center justify-center",onClick:ne=>{ne.stopPropagation(),C(U,$.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:$.name})]},$.id))})]},U.id))})]})},se=()=>{if(n.mode!==De.PickAndBan)return null;const W=N(n.availableHeroes),U=N(n.bannedHeroes),$=n.currentStep<n.pickBanSequence.length?n.pickBanSequence[n.currentStep]:null;if(!$&&!_)return l.jsx("div",{children:"Draft complete"});const ne=($==null?void 0:$.action)==="pick",J=($==null?void 0:$.action)==="ban";return l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Pick and Ban"}),l.jsx("div",{className:"mb-6",children:_?l.jsxs("div",{className:"p-4 rounded-lg bg-green-900/50 border-2 border-green-400",children:[l.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Start Game"}),l.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):l.jsxs("div",{className:`p-4 rounded-lg ${n.currentTeam===ie.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[l.jsx("h4",{className:"text-xl font-semibold mb-2",children:k()}),l.jsxs("div",{className:"text-md mb-3",children:[J&&"Select a hero to ban from the pool",ne&&w.length>0&&`${w.map(z=>z.name).join(", ")} need to pick a hero`,ne&&w.length===0&&"All players on this team have selected heroes"]})]})}),U.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-lg font-medium mb-3 bg-red-900/30 p-2 rounded",children:"Banned Heroes"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:U.map(z=>M(z,"banned"))})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:W.map(z=>l.jsxs("div",{className:`relative p-4 rounded-lg transition-all ${_?"opacity-40 pointer-events-none":n.currentTeam===ie.Titans?"bg-blue-900/30 hover:bg-blue-800/40":"bg-red-900/30 hover:bg-red-800/40"} cursor-pointer`,onClick:()=>P(z),onMouseEnter:oe=>Q(z,oe),onMouseLeave:R,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:z.icon,alt:z.name,className:"w-full h-full object-cover",onError:oe=>{const Ce=oe.target;Ce.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("div",{className:"mt-2 font-medium text-lg",children:z.name})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(z.complexity)].map((oe,Ce)=>l.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},Ce)),[...Array(4-z.complexity)].map((oe,Ce)=>l.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},Ce+z.complexity))]}),l.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-3",children:z.roles.join(", ")}),!_&&l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2",onClick:oe=>oe.stopPropagation(),children:[J&&l.jsx("button",{className:"w-full px-3 py-2 bg-red-600 hover:bg-red-500 rounded text-sm flex items-center justify-center",onClick:oe=>{oe.stopPropagation(),j(z)},children:"Ban Hero"}),ne&&w.length>0&&l.jsx("div",{className:"grid grid-cols-1 gap-1",children:w.map(oe=>l.jsxs("button",{className:"w-full px-3 py-2 bg-green-600 hover:bg-green-500 rounded text-sm flex items-center justify-center",onClick:Ce=>{Ce.stopPropagation(),C(z,oe.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:oe.name})]},oe.id))})]})]},z.id))})]})},de=()=>{switch(n.mode){case De.AllPick:return G();case De.Single:return V();case De.Random:return K();case De.PickAndBan:return se();default:return l.jsx("div",{children:"Invalid drafting mode"})}},ye=()=>{if(n.selectedHeroes.length===0)return null;const W=n.selectedHeroes.filter($=>{var ne;return((ne=e.find(J=>J.id===$.playerId))==null?void 0:ne.team)===ie.Titans}),U=n.selectedHeroes.filter($=>{var ne;return((ne=e.find(J=>J.id===$.playerId))==null?void 0:ne.team)===ie.Atlanteans});return l.jsxs("div",{className:"mb-8 bg-gray-800 p-6 rounded-lg",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Selected Heroes"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-lg",children:[l.jsx("h4",{className:"text-lg font-medium mb-3 border-b border-blue-700 pb-2",children:"Titans"}),W.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:W.map($=>M($.hero,"selected",$.playerId))}):l.jsx("p",{className:"text-gray-400 italic",children:"No heroes selected yet"})]}),l.jsxs("div",{className:"bg-red-900/30 p-4 rounded-lg",children:[l.jsx("h4",{className:"text-lg font-medium mb-3 border-b border-red-700 pb-2",children:"Atlanteans"}),U.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:U.map($=>M($.hero,"selected",$.playerId))}):l.jsx("p",{className:"text-gray-400 italic",children:"No heroes selected yet"})]})]})]})};return l.jsxs("div",{className:"drafting-system",children:[l.jsx("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 mb-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3 sm:mb-0",children:n.mode===De.AllPick?"All Pick":n.mode===De.Single?"Single Draft":n.mode===De.Random?"Random Draft":"Pick and Ban Draft"}),l.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[l.jsx(At,{text:"Undo the last hero selection",children:l.jsxs("button",{className:`px-3 py-2 ${u?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 opacity-50 cursor-not-allowed"} rounded-lg flex items-center`,onClick:I,disabled:!u,children:[l.jsx(zc,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Undo"})]})}),l.jsx(At,{text:"Reset all selections and restart with the same draft mode",children:l.jsxs("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center",onClick:T,children:[l.jsx(xo,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})}),l.jsx(At,{text:"Go back to draft mode selection without rerolling tiebreaker",children:l.jsxs("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center",onClick:L,children:[l.jsx(q3,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Back"})]})}),l.jsx(At,{text:"Return to game setup screen",children:l.jsxs("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center",onClick:F,children:[l.jsx(Jt,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Cancel"})]})}),(n.isComplete||_)&&l.jsx(At,{text:"Finish drafting and start the game",children:l.jsxs("button",{className:"px-3 py-2 bg-green-700 hover:bg-green-600 rounded-lg flex items-center",onClick:E,children:[l.jsx(jm,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Start Game"})]})})]})]})}),l.jsx(rF,{}),n.selectedHeroes.length>0&&ye(),l.jsx("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:de()}),l.jsx(sF,{hero:f,onClose:O,isVisible:(h?m:!!f)&&!_,cardPosition:v}),l.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(0, 0, 0, 0.2);
          border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(255, 255, 255, 0.3);
          border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background-color: rgba(255, 255, 255, 0.5);
        }
        
        /* Add smooth height transitions */
        .transition-height {
          transition: max-height 0.3s ease-in-out;
        }
      `})]})},Jhe=({result:e,onComplete:n})=>{const[r,s]=S.useState(!1),[a,i]=S.useState(!1),{playSound:o}=gt();S.useEffect(()=>{s(!0),o("coinFlip");const A=setTimeout(()=>{i(!0),o("buttonClick")},3e3);return()=>clearTimeout(A)},[]);const c=()=>{o("buttonClick"),n()};return l.jsxs("div",{className:"fixed top-0 left-0 w-full h-full bg-black/80 flex flex-col items-center justify-center z-50",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-3xl font-bold mb-8 text-white",children:"Randomizing Tiebreaker"}),l.jsx("div",{className:"coin-flip-container",children:l.jsxs("div",{className:`coin ${r?"flipping":""} ${e===ie.Titans?"flip-titans":"flip-atlanteans"}`,children:[l.jsxs("div",{className:"coin-face heads",children:[l.jsx("div",{className:"coin-emblem",children:"Titans"}),l.jsx("div",{className:"coin-shine"})]}),l.jsxs("div",{className:"coin-face tails",children:[l.jsx("div",{className:"coin-emblem",children:"Atlanteans"}),l.jsx("div",{className:"coin-shine"})]})]})}),l.jsx("div",{className:"text-2xl font-bold mt-8 text-white",children:e===ie.Titans?"Titans go first!":"Atlanteans go first!"}),l.jsx("button",{className:`continue-button ${a?"visible":""}`,onClick:c,children:"Continue to Draft"})]}),l.jsx("style",{children:`
        .coin.flipping.flip-titans {
          animation: flipCoinTitans 3s ease-out forwards;
        }
        
        .coin.flipping.flip-atlanteans {
          animation: flipCoinAtlanteans 3s ease-out forwards;
        }
        
        @keyframes flipCoinTitans {
          0% { transform: rotateY(0) rotateX(0); }
          20% { transform: rotateY(180deg) rotateX(10deg); }
          40% { transform: rotateY(360deg) rotateX(-10deg); }
          60% { transform: rotateY(540deg) rotateX(10deg); }
          80% { transform: rotateY(720deg) rotateX(-10deg); }
          100% { transform: rotateY(0deg) rotateX(10deg); } /* End on Titans side (heads) */
        }
        
        @keyframes flipCoinAtlanteans {
          0% { transform: rotateY(0) rotateX(0); }
          20% { transform: rotateY(180deg) rotateX(10deg); }
          40% { transform: rotateY(360deg) rotateX(-10deg); }
          60% { transform: rotateY(540deg) rotateX(10deg); }
          80% { transform: rotateY(720deg) rotateX(-10deg); }
          100% { transform: rotateY(180deg) rotateX(10deg); } /* End on Atlanteans side (tails) */
        }
        
 
      `})]})},Zhe=({onSelectMode:e,onCancel:n,playerCount:r,availableDraftModes:s,heroCount:a,handicapTeam:i})=>{const{playSound:o}=gt(),c={[De.AllPick]:"Teams take turns selecting any available hero for their players.",[De.Single]:"Randomly deal 3 unique heroes to each player. Teams alternate selections.",[De.Random]:`Randomly select ${r+2} heroes from the pool. Teams alternate picks from this pool.`,[De.PickAndBan]:"Full drafting experience with pick and ban phases. The draft sequence varies based on the number of players."},A={[De.AllPick]:r,[De.Single]:r*3,[De.Random]:r+2,[De.PickAndBan]:r*2},u={[De.AllPick]:"Default draft",[De.Single]:"Forces players to try new heroes",[De.Random]:"Good for balanced hero selection",[De.PickAndBan]:"Best for competitive play"},h=f=>{s[f]&&(o("buttonClick"),e(f))},d=()=>{o("buttonClick"),n()};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Select Draft Mode"}),i&&l.jsx("div",{className:"bg-amber-900/30 border border-amber-600 p-4 rounded-lg mb-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(_s,{size:20,className:"text-amber-400 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-amber-400",children:"Warning: Uneven Teams"}),l.jsxs("p",{className:"text-sm text-gray-300",children:["All players on the ",i===ie.Titans?"Titans":"Atlanteans"," team must replace one of their basic cards with a handicap card."]})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{className:`relative ${s[De.AllPick]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(De.AllPick),children:[l.jsx("h3",{className:"text-xl font-semibold mb-3",children:"All Pick"}),l.jsx("p",{className:"text-gray-300 mb-4",children:c[De.AllPick]}),l.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[De.AllPick]}),!s[De.AllPick]&&l.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[l.jsx(_s,{size:16,className:"mr-1"}),l.jsxs("span",{className:"text-xs",children:["Requires ",A[De.AllPick]," heroes"]})]})]}),l.jsxs("div",{className:`relative ${s[De.Single]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(De.Single),children:[l.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Single Draft"}),l.jsx("p",{className:"text-gray-300 mb-4",children:c[De.Single]}),l.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[De.Single]}),!s[De.Single]&&l.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[l.jsx(_s,{size:16,className:"mr-1"}),l.jsxs("span",{className:"text-xs",children:["Requires ",A[De.Single]," heroes"]})]})]}),l.jsxs("div",{className:`relative ${s[De.Random]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(De.Random),children:[l.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Random Draft"}),l.jsx("p",{className:"text-gray-300 mb-4",children:c[De.Random]}),l.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[De.Random]}),!s[De.Random]&&l.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[l.jsx(_s,{size:16,className:"mr-1"}),l.jsxs("span",{className:"text-xs",children:["Requires ",A[De.Random]," heroes"]})]})]}),l.jsxs("div",{className:`relative ${s[De.PickAndBan]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(De.PickAndBan),children:[l.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Pick and Ban"}),l.jsx("p",{className:"text-gray-300 mb-4",children:c[De.PickAndBan]}),l.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[De.PickAndBan]}),!s[De.PickAndBan]&&l.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[l.jsx(_s,{size:16,className:"mr-1"}),l.jsxs("span",{className:"text-xs",children:["Requires ",A[De.PickAndBan]," heroes"]})]})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm text-gray-400",children:["Available heroes: ",a]}),l.jsx("button",{className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",onClick:d,children:"Cancel"})]})]})},efe=({feedbackUrl:e})=>{const[n,r]=S.useState(()=>{const a=localStorage.getItem("feedbackBar_expanded");return a!==null?a==="true":!0}),s=()=>{r(a=>{const i=!a;return localStorage.setItem("feedbackBar_expanded",String(i)),i})};return l.jsx("div",{className:"fixed bottom-0 left-0 z-50 transition-all duration-300",children:n?l.jsxs("div",{className:"w-full bg-gray-800 bg-opacity-90 backdrop-blur-sm text-center text-base text-white py-3 px-4 flex items-center justify-between shadow-lg",children:[l.jsx("div",{className:"flex-1"}),l.jsx("div",{className:"flex-1 text-center",children:l.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-300",children:"Share Feedback"})}),l.jsx("div",{className:"flex-1 flex justify-end",children:l.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-white/10 transition-colors","aria-label":"Collapse feedback bar",children:l.jsx(Dn,{size:16})})})]}):l.jsx("button",{onClick:s,className:"fixed bottom-2 left-2 bg-blue-600 hover:bg-blue-500 p-2 rounded-full shadow-lg","aria-label":"Expand feedback bar",children:l.jsx(_r,{size:20,className:"text-white"})})})},tfe=()=>{const{isSoundEnabled:e,toggleSound:n,playSound:r}=gt(),s=()=>{n(),r("toggleSwitch")};return l.jsx("button",{onClick:s,className:`fixed bottom-2 right-2 z-50 p-2 rounded-full shadow-lg transition-colors ${e?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,"aria-label":e?"Mute sound":"Unmute sound",title:e?"Mute sound":"Unmute sound",children:e?l.jsx(uO,{size:20,className:"text-white"}):l.jsx(hO,{size:20,className:"text-white"})})};class nfe{generateToken(){const n=crypto.getRandomValues(new Uint8Array(12));return"goa_"+btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}mapDbRowToShareLink(n){return{id:n.id,shareToken:n.share_token,isActive:n.is_active,createdAt:new Date(n.created_at),viewCount:n.view_count,lastViewedAt:n.last_viewed_at?new Date(n.last_viewed_at):null,label:n.label,expiresAt:n.expires_at?new Date(n.expires_at):null,isAnonymized:n.is_anonymized??!1}}async getMyShareLinks(){if(!st()||!ce)return[];try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return[];const{data:r,error:s}=await ce.from("share_links").select("*").eq("owner_id",n.id).order("created_at",{ascending:!0});return s?(console.error("[ShareService] Get share links error:",s),[]):(r||[]).map(a=>this.mapDbRowToShareLink(a))}catch(n){return console.error("[ShareService] Get share links error:",n),[]}}async createShareLink(n={}){var r;if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:s}}=await ce.auth.getUser();if(!s)return{success:!1,error:"Not authenticated"};if((await this.getMyShareLinks()).length>=3)return{success:!1,error:"Maximum of 3 share links allowed"};const i=this.generateToken(),{data:o,error:c}=await ce.from("share_links").insert({owner_id:s.id,share_token:i,is_active:!0,label:n.label||null,expires_at:((r=n.expiresAt)==null?void 0:r.toISOString())||null,is_anonymized:n.isAnonymized||!1}).select().single();return c?{success:!1,error:c.message}:{success:!0,shareLink:this.mapDbRowToShareLink(o)}}catch(s){return console.error("[ShareService] Create share link error:",s),{success:!1,error:"An unexpected error occurred"}}}async updateShareLink(n,r){var s;if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:a}}=await ce.auth.getUser();if(!a)return{success:!1,error:"Not authenticated"};const i={};r.label!==void 0&&(i.label=r.label),r.expiresAt!==void 0&&(i.expires_at=((s=r.expiresAt)==null?void 0:s.toISOString())||null),r.isAnonymized!==void 0&&(i.is_anonymized=r.isAnonymized),r.isActive!==void 0&&(i.is_active=r.isActive);const{data:o,error:c}=await ce.from("share_links").update(i).eq("id",n).eq("owner_id",a.id).select().single();return c?{success:!1,error:c.message}:{success:!0,shareLink:this.mapDbRowToShareLink(o)}}catch(a){return console.error("[ShareService] Update share link error:",a),{success:!1,error:"An unexpected error occurred"}}}async expireShareLink(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:s}=await ce.rpc("expire_share_link",{p_link_id:n});return s?{success:!1,error:s.message}:{success:r===!0}}catch(r){return console.error("[ShareService] Expire share link error:",r),{success:!1,error:"An unexpected error occurred"}}}async deleteShareLink(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:s}=await ce.from("share_links").delete().eq("id",n).eq("owner_id",r.id);return s?{success:!1,error:s.message}:{success:!0}}catch(r){return console.error("[ShareService] Delete share link error:",r),{success:!1,error:"An unexpected error occurred"}}}async getSharedData(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:s}=await ce.rpc("get_shared_data",{p_share_token:n});return s?(console.error("[ShareService] Get shared data error:",s),{success:!1,error:s.message}):r&&r.error?{success:!1,error:r.error,errorCode:r.error_code,expiredAt:r.expired_at?new Date(r.expired_at):void 0}:(console.log("[ShareService] Raw shared data from RPC:",{is_anonymized:r.is_anonymized,expires_at:r.expires_at,display_name:r.display_name}),{success:!0,data:{ownerId:r.owner_id,displayName:r.display_name||"Unknown User",players:r.players||[],matches:r.matches||[],matchPlayers:r.match_players||[],isAnonymized:r.is_anonymized||!1,expiresAt:r.expires_at?new Date(r.expires_at):null,playerNameMapping:r.player_name_mapping||void 0}})}catch(r){return console.error("[ShareService] Get shared data error:",r),{success:!1,error:"An unexpected error occurred"}}}getShareUrl(n){return`${window.location.origin+window.location.pathname}?share=${n}`}getShareTokenFromUrl(){return new URLSearchParams(window.location.search).get("share")}clearShareTokenFromUrl(){const n=new URL(window.location.href);n.searchParams.delete("share"),window.history.replaceState({},"",n.toString())}async getMyShareLink(){const n=await this.getMyShareLinks();return n.length>0?n[0]:null}async enableSharing(){const n=await this.getMyShareLinks();return n.length>0?this.updateShareLink(n[0].id,{isActive:!0}):this.createShareLink()}async disableSharing(){const n=await this.getMyShareLinks();for(const r of n)await this.updateShareLink(r.id,{isActive:!1});return{success:!0}}}const ra=new nfe,aF=S.createContext({isViewMode:!1,shareToken:null,sharedData:null,ownerDisplayName:null,isLoading:!1,error:null,errorCode:null,isExpired:!1,expiredAt:null,exitViewMode:()=>{}}),ph=()=>S.useContext(aF),rfe=({children:e})=>{const[n,r]=S.useState(!1),[s,a]=S.useState(null),[i,o]=S.useState(null),[c,A]=S.useState(null),[u,h]=S.useState(!1),[d,f]=S.useState(null),[g,m]=S.useState(null),[y,v]=S.useState(!1),[p,x]=S.useState(null);S.useEffect(()=>{const w=ra.getShareTokenFromUrl();if(!w)return;if(!st()){f("Cloud features are not available");return}a(w),h(!0),f(null),m(null),v(!1),x(null),(async()=>{const B=await ra.getSharedData(w);B.success&&B.data?(o(B.data),A(B.data.displayName),r(!0)):(f(B.error||"Failed to load shared data"),m(B.errorCode||null),B.errorCode==="LINK_EXPIRED"&&(v(!0),x(B.expiredAt||null))),h(!1)})()},[]);const b=S.useCallback(()=>{ra.clearShareTokenFromUrl(),r(!1),a(null),o(null),A(null),f(null),m(null),v(!1),x(null),window.location.reload()},[]);return l.jsx(aF.Provider,{value:{isViewMode:n,shareToken:s,sharedData:i,ownerDisplayName:c,isLoading:u,error:d,errorCode:g,isExpired:y,expiredAt:p,exitViewMode:b},children:e})},iF="dismissedFeatureAnnouncements";function oF(){const e=localStorage.getItem(iF);if(!e)return[];try{return JSON.parse(e)}catch{return[]}}function sfe(e){return oF().includes(e)}function afe(e){const n=oF();n.includes(e)||(n.push(e),localStorage.setItem(iF,JSON.stringify(n)))}const ife=({id:e,title:n,description:r,icon:s,buttonText:a="Got it!"})=>{const{playSound:i}=gt(),{isViewMode:o}=ph(),[c,A]=q.useState(()=>!o&&!sfe(e)),u=()=>{i("buttonClick"),o||afe(e),A(!1)};return c?l.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-900 rounded-lg w-full max-w-md border border-orange-600/50 shadow-xl shadow-orange-600/20",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[s||l.jsx(tg,{size:24,className:"text-orange-400"}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:n})]}),l.jsx("button",{onClick:u,className:"text-gray-400 hover:text-white p-1 transition-colors",children:l.jsx(Jt,{size:20})})]}),l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"text-gray-300 text-sm leading-relaxed",children:r})}),l.jsx("div",{className:"p-4 border-t border-gray-700",children:l.jsx("button",{onClick:u,className:"w-full bg-orange-600 hover:bg-orange-500 text-white font-medium py-3 px-4 rounded transition-colors",children:a})})]})}):null},ofe=()=>(S.useEffect(()=>{const e=()=>{Sa.Howler.ctx&&Sa.Howler.ctx.state!=="running"&&Sa.Howler.ctx.resume().then(()=>{console.log("AudioContext resumed successfully on user interaction")}).catch(n=>{console.error("Failed to resume AudioContext:",n)}),document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e)};return document.addEventListener("click",e),document.addEventListener("keydown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e)}},[]),null),lF=[{value:"throne",label:"Throne",icon:Kb,bgSelected:"bg-yellow-900/50",borderSelected:"border-yellow-500",textSelected:"text-yellow-400",description:"Wave pushed into enemy Throne"},{value:"wave",label:"Wave",icon:Gb,bgSelected:"bg-blue-900/50",borderSelected:"border-blue-500",textSelected:"text-blue-400",description:"Team won the final wave"},{value:"kills",label:"Kills",icon:na,bgSelected:"bg-red-900/50",borderSelected:"border-red-500",textSelected:"text-red-400",description:"Opponent ran out of lives"}],j_=({value:e,onChange:n,disabled:r=!1,required:s=!1,showNotRecorded:a=!1,className:i=""})=>l.jsxs("div",{className:`space-y-2 ${i}`,children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300",children:["Victory Type ",s&&l.jsx("span",{className:"text-red-400",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:lF.map(o=>{const c=o.icon,A=e===o.value;return l.jsxs("button",{type:"button",onClick:()=>n(o.value),disabled:r,className:`p-3 rounded-lg border-2 transition-all flex flex-col items-center ${A?`${o.borderSelected} ${o.bgSelected}`:"border-gray-600 bg-gray-800 hover:bg-gray-700 hover:border-gray-500"} ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,title:o.description,children:[l.jsx(c,{size:24,className:A?o.textSelected:"text-gray-400"}),l.jsx("span",{className:`text-sm mt-1 ${A?"font-medium text-white":"text-gray-300"}`,children:o.label})]},o.value)})}),a&&l.jsx("button",{type:"button",onClick:()=>n(void 0),disabled:r,className:`w-full mt-2 px-3 py-2 rounded-lg border text-sm transition-all ${e===void 0?"border-gray-500 bg-gray-700 text-white":"border-gray-600 bg-gray-800 text-gray-400 hover:bg-gray-700 hover:border-gray-500"} ${r?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:"Not Recorded (Legacy)"})]}),lfe=e=>{const n=lF.find(r=>r.value===e);return n?{icon:n.icon,label:n.label,color:n.textSelected,description:n.description}:null},cfe=({winningTeam:e,onReturnToSetup:n,players:r,gameLength:s,doubleLanes:a,onUpdatePlayerStats:i})=>{const[o,c]=S.useState(!1),[A,u]=S.useState(!1),[h,d]=S.useState(!1),[f,g]=S.useState(null),[m,y]=S.useState(!1),[v,p]=S.useState(!1),[x,b]=S.useState(void 0),[w,_]=S.useState(null),{playSound:B}=gt();S.useEffect(()=>{B("victory");const j=setTimeout(()=>{c(!0),B("buttonClick")},3e3);return()=>clearTimeout(j)},[]);const k=()=>{B("buttonClick"),n()},N=async()=>{if(!x){_("Please select how the match was won"),B("buttonClick");return}u(!0),g(null),_(null);try{B("buttonClick");const j={date:new Date,winningTeam:e,gameLength:s,doubleLanes:a,victoryType:x},E=r.map(F=>{var I,T,L,P,O,Q,R,M,G;return{id:F.name,team:F.team,heroId:((I=F.hero)==null?void 0:I.id)||0,heroName:((T=F.hero)==null?void 0:T.name)||"Unknown Hero",heroRoles:((L=F.hero)==null?void 0:L.roles)||[],kills:(P=F.stats)==null?void 0:P.totalKills,deaths:(O=F.stats)==null?void 0:O.totalDeaths,assists:(Q=F.stats)==null?void 0:Q.totalAssists,goldEarned:(R=F.stats)==null?void 0:R.totalGoldEarned,minionKills:(M=F.stats)==null?void 0:M.totalMinionKills,level:(G=F.stats)==null?void 0:G.level}});await Ct.recordMatch(j,E),d(!0),B("phaseChange")}catch(j){console.error("Error saving match data:",j),g("Failed to save match data. Please try again.")}finally{u(!1)}},C=j=>{B("buttonClick"),j&&i&&i(j),p(!0),y(!1),B("phaseChange")};return l.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center",children:[l.jsx("div",{className:`absolute inset-0 ${e===ie.Titans?"bg-blue-900 bg-opacity-95":"bg-red-900 bg-opacity-95"}`}),l.jsxs("div",{className:"relative z-10 text-center",children:[l.jsx("div",{className:"mb-8 transform scale-100 animate-bounce",children:l.jsx(SA,{size:120,className:`${e===ie.Titans?"text-blue-300":"text-red-300"}`})}),l.jsxs("h1",{className:"text-6xl font-bold mb-4 animate-in fade-in",children:[e===ie.Titans?"Titan":"Atlantean"," Victory!"]}),l.jsxs("p",{className:"text-2xl mb-12 opacity-75",children:["The ",e===ie.Titans?"Titan":"Atlantean","s have emerged victorious!"]}),l.jsx("div",{className:"victory-stars",children:[...Array(20)].map((j,E)=>l.jsx("div",{className:`absolute star-${E} text-${e===ie.Titans?"blue":"red"}-200`,style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,opacity:Math.random()*.5+.5,animation:`twinkle ${Math.random()*2+1}s infinite alternate`},children:""},E))}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center mt-4",children:[l.jsxs("button",{onClick:k,className:`px-6 py-3 rounded-lg text-white font-medium flex items-center mx-auto ${o?"opacity-100":"opacity-0"} transition-opacity duration-500 ${e===ie.Titans?"bg-blue-600 hover:bg-blue-500":"bg-red-600 hover:bg-red-500"}`,children:[l.jsx(Y3,{size:20,className:"mr-2"}),"Return to Setup"]}),!v&&o&&l.jsx(At,{text:"Record statistics for the final round before saving",children:l.jsxs("button",{onClick:()=>{B("buttonClick"),y(!0)},className:`px-6 py-3 rounded-lg text-white font-medium flex items-center mx-auto ${e===ie.Titans?"bg-blue-700 hover:bg-blue-600":"bg-red-700 hover:bg-red-600"}`,children:[l.jsx(l0,{size:20,className:"mr-2"}),"Record Final Round Stats"]})}),o&&l.jsx(At,{text:h?"Match data saved successfully":"Save match results to your statistics",children:l.jsx("button",{onClick:N,disabled:A||h,className:`px-6 py-3 rounded-lg text-white font-medium flex items-center mx-auto
                  ${h?"bg-green-600 cursor-default":e===ie.Titans?"bg-blue-700 hover:bg-blue-600":"bg-red-700 hover:bg-red-600"} ${A?"opacity-70 cursor-wait":"opacity-100"}`,children:A?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):h?l.jsxs(l.Fragment,{children:[l.jsx(l0,{size:20,className:"mr-2"}),"Saved Successfully"]}):l.jsxs(l.Fragment,{children:[l.jsx(l0,{size:20,className:"mr-2"}),"Save Match Data"]})})})]}),o&&!h&&l.jsxs("div",{className:"mt-6 p-4 bg-gray-800/80 rounded-lg max-w-md mx-auto",children:[l.jsx(j_,{value:x,onChange:j=>{b(j),_(null),B("buttonClick")},required:!0}),w&&l.jsxs("div",{className:"mt-2 text-red-400 text-sm flex items-center justify-center",children:[l.jsx(Ai,{size:14,className:"mr-1"}),w]})]}),v&&o&&l.jsx("div",{className:"mt-4 px-5 py-3 bg-green-800/70 rounded-lg inline-block",children:l.jsxs("p",{className:"flex items-center text-green-200",children:[l.jsx(Lo,{size:16,className:"mr-2"}),"Final round statistics recorded"]})}),f&&l.jsx("div",{className:"mt-4 px-5 py-3 bg-red-800/70 rounded-lg inline-block",children:l.jsxs("p",{className:"flex items-center text-red-200",children:[l.jsx(Ai,{size:16,className:"mr-2"}),f]})})]}),l.jsx(nF,{players:r,onComplete:C,isVisible:m}),l.jsx("style",{children:`
        @keyframes twinkle {
          0% { transform: scale(0.5); opacity: 0.3; }
          100% { transform: scale(1.5); opacity: 0.9; }
        }
        
        .animate-in {
          animation: fadeIn 1s ease-out forwards;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        .victory-stars div {
          position: absolute;
          font-size: 1.5rem;
        }
      `})]})},Afe=({gameState:e,players:n,onResume:r,onDiscard:s,savedTime:a})=>{const{playSound:i}=gt(),o=()=>{i("buttonClick"),r()},c=()=>{i("buttonClick"),s()},A=n.filter(d=>d.team===ie.Titans).length,u=n.filter(d=>d.team===ie.Atlanteans).length,h=d=>{switch(d){case"strategy":return"Strategy Phase";case"move":return"Action Phase";case"turn-end":return"Turn Complete";default:return d}};return l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full shadow-lg border border-blue-500",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center",children:[l.jsx(Lr,{size:24,className:"mr-2 text-blue-400"}),"Resume Previous Game?"]}),l.jsxs("p",{className:"mb-4",children:["You have an ongoing game session from ",l.jsx("span",{className:"font-medium text-blue-300",children:a}),". Would you like to resume where you left off?"]}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg mb-6",children:[l.jsx("h3",{className:"font-semibold mb-2 text-blue-200",children:"Game Summary:"}),l.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[l.jsxs("li",{className:"flex items-center",children:[l.jsx(Mt,{size:16,className:"mr-2 text-yellow-400"}),l.jsxs("span",{children:["Round ",e.round,", Turn ",e.turn,"/4"]})]}),l.jsxs("li",{className:"flex items-center",children:[l.jsx(wo,{size:16,className:"mr-2 text-green-400"}),l.jsxs("span",{children:[A," Titans vs ",u," Atlanteans"]})]}),l.jsxs("li",{className:"flex justify-between",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),"Titans: ",e.teamLives.titans," lives"]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),"Atlanteans: ",e.teamLives.atlanteans," lives"]})]}),l.jsxs("li",{children:["Current Phase: ",l.jsx("span",{className:"text-yellow-300",children:h(e.currentPhase)})]})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("button",{className:"flex-1 bg-green-600 hover:bg-green-500 px-4 py-3 rounded-lg text-white font-medium flex items-center justify-center shadow-md",onClick:o,children:[l.jsx(jm,{size:18,className:"mr-2"})," Resume Game"]}),l.jsxs("button",{className:"flex-1 bg-gray-600 hover:bg-gray-500 px-4 py-3 rounded-lg text-white font-medium flex items-center justify-center shadow-md",onClick:c,children:[l.jsx(Jt,{size:18,className:"mr-2"})," New Game"]})]})]})})};class ufe{constructor(){ve(this,"dbName","guards-of-atlantis-timer");ve(this,"storeName","game-state");ve(this,"version",1);ve(this,"dbPromise",null);this.initDB()}initDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((n,r)=>{const s=indexedDB.open(this.dbName,this.version);s.onerror=a=>{console.error("IndexedDB error:",a),r(a)},s.onsuccess=a=>{n(a.target.result)},s.onupgradeneeded=a=>{const i=a.target.result;i.objectStoreNames.contains(this.storeName)||i.createObjectStore(this.storeName,{keyPath:"id"})}}),this.dbPromise)}async saveGame(n){try{const s=(await this.initDB()).transaction(this.storeName,"readwrite"),a=s.objectStore(this.storeName),i={...n,timestamp:Date.now()};return a.put({id:"current",...i}),new Promise((o,c)=>{s.oncomplete=()=>o(),s.onerror=A=>c(A)})}catch(r){throw console.error("Error saving game:",r),r}}async loadGame(){try{const a=(await this.initDB()).transaction(this.storeName,"readonly").objectStore(this.storeName).get("current");return new Promise((i,o)=>{a.onsuccess=()=>{const c=a.result;if(c){const{id:A,...u}=c;i(u)}else i(null)},a.onerror=c=>o(c)})}catch(n){return console.error("Error loading game:",n),null}}async clearGame(){try{const r=(await this.initDB()).transaction(this.storeName,"readwrite");return r.objectStore(this.storeName).delete("current"),new Promise((a,i)=>{r.oncomplete=()=>a(),r.onerror=o=>i(o)})}catch(n){throw console.error("Error clearing game:",n),n}}isSupported(){return!!window.indexedDB}}const tc=new ufe,Jr=class Jr{async runMigrations(){const n=Date.now();try{const r=this.getLastMigrationVersion();if(r>=Jr.CURRENT_VERSION)return{success:!0,version:r,matchesAnalyzed:0,statsConverted:0,playersAffected:0,duration:Date.now()-n};const s=this.runLegacyStatsMigration(),a=new Promise((o,c)=>{setTimeout(()=>c(new Error("Migration timeout")),Jr.TIMEOUT_MS)}),i=await Promise.race([s,a]);return this.setMigrationVersion(Jr.CURRENT_VERSION),{success:!0,version:Jr.CURRENT_VERSION,duration:Date.now()-n,...i}}catch(r){return console.error("Migration failed:",r),{success:!1,version:this.getLastMigrationVersion(),matchesAnalyzed:0,statsConverted:0,playersAffected:0,error:r instanceof Error?r.message:"Unknown migration error",duration:Date.now()-n}}}async runLegacyStatsMigration(){console.log(" Starting legacy stats migration...");const n=await Ct.getAllMatches();console.log(` Found ${n.length} matches to analyze`);let r=0;const s=new Set;for(const i of n){const o=await Ct.getMatchPlayers(i.id),c=["kills","deaths","assists","goldEarned","minionKills","level"];for(const A of c){const u=o.map(g=>g[A]),h=u.every(g=>g===0),d=u.some(g=>g==null),f=u.some(g=>g!==0&&g!==void 0&&g!==null);if(h&&!d&&!f)for(const g of o)await Ct.updateMatchPlayer(g.id,{...g,[A]:void 0}),r++,s.add(g.playerId)}}const a={matchesAnalyzed:n.length,statsConverted:r,playersAffected:s.size};return console.log(" Legacy stats migration completed:",a),a}getLastMigrationVersion(){try{const n=localStorage.getItem(Jr.MIGRATION_VERSION_KEY);return parseInt(n||"0")}catch(n){return console.warn("Failed to read migration version:",n),0}}setMigrationVersion(n){try{localStorage.setItem(Jr.MIGRATION_VERSION_KEY,n.toString())}catch(r){console.warn("Failed to save migration version:",r)}}isMigrationNeeded(){return this.getLastMigrationVersion()<Jr.CURRENT_VERSION}resetMigrationVersion(){try{localStorage.removeItem(Jr.MIGRATION_VERSION_KEY)}catch(n){console.warn("Failed to reset migration version:",n)}}};ve(Jr,"MIGRATION_VERSION_KEY","goa_migration_version"),ve(Jr,"CURRENT_VERSION",1),ve(Jr,"TIMEOUT_MS",3e4);let o1=Jr;const dfe=new o1;class hfe{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(n){this.flush(),this._parts.push(n)}append(n){this._pieces.push(n)}flush(){if(this._pieces.length>0){const n=new Uint8Array(this._pieces);this._parts.push(n),this._pieces=[]}}toArrayBuffer(){const n=[];for(const r of this._parts)n.push(r);return ffe(n).buffer}}function ffe(e){let n=0;for(const a of e)n+=a.byteLength;const r=new Uint8Array(n);let s=0;for(const a of e){const i=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);r.set(i,s),s+=a.byteLength}return r}function cF(e){return new gfe(e).unpack()}function AF(e){const n=new mfe,r=n.pack(e);return r instanceof Promise?r.then(()=>n.getBuffer()):n.getBuffer()}class gfe{constructor(n){this.index=0,this.dataBuffer=n,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const n=this.unpack_uint8();if(n<128)return n;if((n^224)<32)return(n^224)-32;let r;if((r=n^160)<=15)return this.unpack_raw(r);if((r=n^176)<=15)return this.unpack_string(r);if((r=n^144)<=15)return this.unpack_array(r);if((r=n^128)<=15)return this.unpack_map(r);switch(n){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}}unpack_uint8(){const n=this.dataView[this.index]&255;return this.index++,n}unpack_uint16(){const n=this.read(2),r=(n[0]&255)*256+(n[1]&255);return this.index+=2,r}unpack_uint32(){const n=this.read(4),r=((n[0]*256+n[1])*256+n[2])*256+n[3];return this.index+=4,r}unpack_uint64(){const n=this.read(8),r=((((((n[0]*256+n[1])*256+n[2])*256+n[3])*256+n[4])*256+n[5])*256+n[6])*256+n[7];return this.index+=8,r}unpack_int8(){const n=this.unpack_uint8();return n<128?n:n-256}unpack_int16(){const n=this.unpack_uint16();return n<32768?n:n-65536}unpack_int32(){const n=this.unpack_uint32();return n<2**31?n:n-2**32}unpack_int64(){const n=this.unpack_uint64();return n<2**63?n:n-2**64}unpack_raw(n){if(this.length<this.index+n)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${n} ${this.length}`);const r=this.dataBuffer.slice(this.index,this.index+n);return this.index+=n,r}unpack_string(n){const r=this.read(n);let s=0,a="",i,o;for(;s<n;)i=r[s],i<160?(o=i,s++):(i^192)<32?(o=(i&31)<<6|r[s+1]&63,s+=2):(i^224)<16?(o=(i&15)<<12|(r[s+1]&63)<<6|r[s+2]&63,s+=3):(o=(i&7)<<18|(r[s+1]&63)<<12|(r[s+2]&63)<<6|r[s+3]&63,s+=4),a+=String.fromCodePoint(o);return this.index+=n,a}unpack_array(n){const r=new Array(n);for(let s=0;s<n;s++)r[s]=this.unpack();return r}unpack_map(n){const r={};for(let s=0;s<n;s++){const a=this.unpack();r[a]=this.unpack()}return r}unpack_float(){const n=this.unpack_uint32(),r=n>>31,s=(n>>23&255)-127,a=n&8388607|8388608;return(r===0?1:-1)*a*2**(s-23)}unpack_double(){const n=this.unpack_uint32(),r=this.unpack_uint32(),s=n>>31,a=(n>>20&2047)-1023,o=(n&1048575|1048576)*2**(a-20)+r*2**(a-52);return(s===0?1:-1)*o}read(n){const r=this.index;if(r+n<=this.length)return this.dataView.subarray(r,r+n);throw new Error("BinaryPackFailure: read index out of range")}}class mfe{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(n){if(typeof n=="string")this.pack_string(n);else if(typeof n=="number")Math.floor(n)===n?this.pack_integer(n):this.pack_double(n);else if(typeof n=="boolean")n===!0?this._bufferBuilder.append(195):n===!1&&this._bufferBuilder.append(194);else if(n===void 0)this._bufferBuilder.append(192);else if(typeof n=="object")if(n===null)this._bufferBuilder.append(192);else{const r=n.constructor;if(n instanceof Array){const s=this.pack_array(n);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(n instanceof ArrayBuffer)this.pack_bin(new Uint8Array(n));else if("BYTES_PER_ELEMENT"in n){const s=n;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(n instanceof Date)this.pack_string(n.toString());else{if(n instanceof Blob)return n.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(r==Object||r.toString().startsWith("class")){const s=this.pack_object(n);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${r.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof n}" not yet supported`);this._bufferBuilder.flush()}pack_bin(n){const r=n.length;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this._bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_string(n){const r=this._textEncoder.encode(n),s=r.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_array(n){const r=n.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this._bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");const s=a=>{if(a<r){const i=this.pack(n[a]);return i instanceof Promise?i.then(()=>s(a+1)):s(a+1)}};return s(0)}pack_integer(n){if(n>=-32&&n<=127)this._bufferBuilder.append(n&255);else if(n>=0&&n<=255)this._bufferBuilder.append(204),this.pack_uint8(n);else if(n>=-128&&n<=127)this._bufferBuilder.append(208),this.pack_int8(n);else if(n>=0&&n<=65535)this._bufferBuilder.append(205),this.pack_uint16(n);else if(n>=-32768&&n<=32767)this._bufferBuilder.append(209),this.pack_int16(n);else if(n>=0&&n<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(n);else if(n>=-2147483648&&n<=2147483647)this._bufferBuilder.append(210),this.pack_int32(n);else if(n>=-9223372036854776e3&&n<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(n);else if(n>=0&&n<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(n);else throw new Error("Invalid integer")}pack_double(n){let r=0;n<0&&(r=1,n=-n);const s=Math.floor(Math.log(n)/Math.LN2),a=n/2**s-1,i=Math.floor(a*2**52),o=2**32,c=r<<31|s+1023<<20|i/o&1048575,A=i%o;this._bufferBuilder.append(203),this.pack_int32(c),this.pack_int32(A)}pack_object(n){const r=Object.keys(n),s=r.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const a=i=>{if(i<r.length){const o=r[i];if(n.hasOwnProperty(o)){this.pack(o);const c=this.pack(n[o]);if(c instanceof Promise)return c.then(()=>a(i+1))}return a(i+1)}};return a(0)}pack_uint8(n){this._bufferBuilder.append(n)}pack_uint16(n){this._bufferBuilder.append(n>>8),this._bufferBuilder.append(n&255)}pack_uint32(n){const r=n&4294967295;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_uint64(n){const r=n/4294967296,s=n%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(n){this._bufferBuilder.append(n&255)}pack_int16(n){this._bufferBuilder.append((n&65280)>>8),this._bufferBuilder.append(n&255)}pack_int32(n){this._bufferBuilder.append(n>>>24&255),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_int64(n){const r=Math.floor(n/4294967296),s=n%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new hfe,this._textEncoder=new TextEncoder}}let uF=!0,dF=!0;function Bu(e,n,r){const s=e.match(n);return s&&s.length>=r&&parseFloat(s[r],10)}function Fl(e,n,r){if(!e.RTCPeerConnection)return;const s=e.RTCPeerConnection.prototype,a=s.addEventListener;s.addEventListener=function(o,c){if(o!==n)return a.apply(this,arguments);const A=u=>{const h=r(u);h&&(c.handleEvent?c.handleEvent(h):c(h))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(c,A),a.apply(this,[o,A])};const i=s.removeEventListener;s.removeEventListener=function(o,c){if(o!==n||!this._eventMap||!this._eventMap[n])return i.apply(this,arguments);if(!this._eventMap[n].has(c))return i.apply(this,arguments);const A=this._eventMap[n].get(c);return this._eventMap[n].delete(c),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[o,A])},Object.defineProperty(s,"on"+n,{get(){return this["_on"+n]},set(o){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),o&&this.addEventListener(n,this["_on"+n]=o)},enumerable:!0,configurable:!0})}function pfe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(uF=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function yfe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(dF=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function hF(){if(typeof window=="object"){if(uF)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function N_(e,n){dF&&console.warn(e+" is deprecated, please use "+n+" instead.")}function vfe(e){const n={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return n.browser="Not a browser.",n;const{navigator:r}=e;if(r.userAgentData&&r.userAgentData.brands){const s=r.userAgentData.brands.find(a=>a.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(r.mozGetUserMedia)n.browser="firefox",n.version=parseInt(Bu(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)n.browser="chrome",n.version=parseInt(Bu(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))n.browser="safari",n.version=parseInt(Bu(r.userAgent,/AppleWebKit\/(\d+)\./,1)),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,n._safariVersion=Bu(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return n.browser="Not a supported browser.",n;return n}function mS(e){return Object.prototype.toString.call(e)==="[object Object]"}function fF(e){return mS(e)?Object.keys(e).reduce(function(n,r){const s=mS(e[r]),a=s?fF(e[r]):e[r],i=s&&!Object.keys(a).length;return a===void 0||i?n:Object.assign(n,{[r]:a})},{}):e}function l1(e,n,r){!n||r.has(n.id)||(r.set(n.id,n),Object.keys(n).forEach(s=>{s.endsWith("Id")?l1(e,e.get(n[s]),r):s.endsWith("Ids")&&n[s].forEach(a=>{l1(e,e.get(a),r)})}))}function pS(e,n,r){const s=r?"outbound-rtp":"inbound-rtp",a=new Map;if(n===null)return a;const i=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===n.id&&i.push(o)}),i.forEach(o=>{e.forEach(c=>{c.type===s&&c.trackId===o.id&&l1(e,c,a)})}),a}const yS=hF;function gF(e,n){const r=e&&e.navigator;if(!r.mediaDevices)return;const s=function(c){if(typeof c!="object"||c.mandatory||c.optional)return c;const A={};return Object.keys(c).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const h=typeof c[u]=="object"?c[u]:{ideal:c[u]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const d=function(f,g){return f?f+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(h.ideal!==void 0){A.optional=A.optional||[];let f={};typeof h.ideal=="number"?(f[d("min",u)]=h.ideal,A.optional.push(f),f={},f[d("max",u)]=h.ideal,A.optional.push(f)):(f[d("",u)]=h.ideal,A.optional.push(f))}h.exact!==void 0&&typeof h.exact!="number"?(A.mandatory=A.mandatory||{},A.mandatory[d("",u)]=h.exact):["min","max"].forEach(f=>{h[f]!==void 0&&(A.mandatory=A.mandatory||{},A.mandatory[d(f,u)]=h[f])})}),c.advanced&&(A.optional=(A.optional||[]).concat(c.advanced)),A},a=function(c,A){if(n.version>=61)return A(c);if(c=JSON.parse(JSON.stringify(c)),c&&typeof c.audio=="object"){const u=function(h,d,f){d in h&&!(f in h)&&(h[f]=h[d],delete h[d])};c=JSON.parse(JSON.stringify(c)),u(c.audio,"autoGainControl","googAutoGainControl"),u(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=s(c.audio)}if(c&&typeof c.video=="object"){let u=c.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const h=n.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete c.video.facingMode;let d;if(u.exact==="environment"||u.ideal==="environment"?d=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(d=["front"]),d)return r.mediaDevices.enumerateDevices().then(f=>{f=f.filter(m=>m.kind==="videoinput");let g=f.find(m=>d.some(y=>m.label.toLowerCase().includes(y)));return!g&&f.length&&d.includes("back")&&(g=f[f.length-1]),g&&(c.video.deviceId=u.exact?{exact:g.deviceId}:{ideal:g.deviceId}),c.video=s(c.video),yS("chrome: "+JSON.stringify(c)),A(c)})}c.video=s(c.video)}return yS("chrome: "+JSON.stringify(c)),A(c)},i=function(c){return n.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(c,A,u){a(c,h=>{r.webkitGetUserMedia(h,A,d=>{u&&u(i(d))})})};if(r.getUserMedia=o.bind(r),r.mediaDevices.getUserMedia){const c=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(A){return a(A,u=>c(u).then(h=>{if(u.audio&&!h.getAudioTracks().length||u.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(i(h))))}}}function mF(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function pF(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",a=>{let i;e.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(c=>c.track&&c.track.id===a.track.id):i={track:a.track};const o=new Event("track");o.track=a.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[s.stream],this.dispatchEvent(o)}),s.stream.getTracks().forEach(a=>{let i;e.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(c=>c.track&&c.track.id===a.id):i={track:a};const o=new Event("track");o.track=a,o.receiver=i,o.transceiver={receiver:i},o.streams=[s.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),n.apply(this,arguments)}}else Fl(e,"track",n=>(n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n))}function yF(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const n=function(a,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=a.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:a}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(c,A){let u=a.apply(this,arguments);return u||(u=n(this,c),this._senders.push(u)),u};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(c){i.apply(this,arguments);const A=this._senders.indexOf(c);A!==-1&&this._senders.splice(A,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(n(this,o))})};const s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],s.apply(this,[i]),i.getTracks().forEach(o=>{const c=this._senders.find(A=>A.track===o);c&&this._senders.splice(this._senders.indexOf(c),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function vF(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i});const s=e.RTCPeerConnection.prototype.addTrack;s&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=s.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>pS(o,i.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const a=r.apply(this,[]);return a.forEach(i=>i._pc=this),a}),Fl(e,"track",s=>(s.receiver._pc=s.srcElement,s)),e.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(i=>pS(i,a.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const s=arguments[0];let a,i,o;return this.getSenders().forEach(c=>{c.track===s&&(a?o=!0:a=c)}),this.getReceivers().forEach(c=>(c.track===s&&(i?o=!0:i=c),c.track===s)),o||a&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return n.apply(this,arguments)}}function xF(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,c){if(!c)return n.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const A=n.apply(this,arguments);return this._shimmedLocalStreams[c.id]?this._shimmedLocalStreams[c.id].indexOf(A)===-1&&this._shimmedLocalStreams[c.id].push(A):this._shimmedLocalStreams[c.id]=[c,A],A};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(d=>d.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const c=this.getSenders();r.apply(this,arguments);const A=this.getSenders().filter(u=>c.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(A)};const s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],s.apply(this,arguments)};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(c=>{const A=this._shimmedLocalStreams[c].indexOf(o);A!==-1&&this._shimmedLocalStreams[c].splice(A,1),this._shimmedLocalStreams[c].length===1&&delete this._shimmedLocalStreams[c]}),a.apply(this,arguments)}}function wF(e,n){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&n.version>=65)return xF(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=r.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(d=>this._reverseStreams[d.id])};const s=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const d=new e.MediaStream(h.getTracks());this._streams[h.id]=d,this._reverseStreams[d.id]=h,h=d}s.apply(this,[h])};const a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(y=>y===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[d.id];if(m)m.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new e.MediaStream([h]);this._streams[d.id]=y,this._reverseStreams[y.id]=d,this.addStream(y)}return this.getSenders().find(y=>y.track===h)};function i(u,h){let d=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const g=u._reverseStreams[f],m=u._streams[g.id];d=d.replace(new RegExp(m.id,"g"),g.id)}),new RTCSessionDescription({type:h.type,sdp:d})}function o(u,h){let d=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const g=u._reverseStreams[f],m=u._streams[g.id];d=d.replace(new RegExp(g.id,"g"),m.id)}),new RTCSessionDescription({type:h.type,sdp:d})}["createOffer","createAnswer"].forEach(function(u){const h=e.RTCPeerConnection.prototype[u],d={[u](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[m=>{const y=i(this,m);f[0].apply(null,[y])},m=>{f[1]&&f[1].apply(null,m)},arguments[2]]):h.apply(this,arguments).then(m=>i(this,m))}};e.RTCPeerConnection.prototype[u]=d[u]});const c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?c.apply(this,arguments):(arguments[0]=o(this,arguments[0]),c.apply(this,arguments))};const A=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const u=A.get.apply(this);return u.type===""?u:i(this,u)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(y=>h.track===y)&&(f=this._streams[g])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c1(e,n){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const s=e.RTCPeerConnection.prototype[r],a={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=a[r]})}function bF(e,n){Fl(e,"negotiationneeded",r=>{const s=r.target;if(!((n.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return r})}const vS=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:bF,shimAddTrackRemoveTrack:wF,shimAddTrackRemoveTrackWithNative:xF,shimGetSendersWithDtmf:yF,shimGetUserMedia:gF,shimMediaStream:mF,shimOnTrack:pF,shimPeerConnection:c1,shimSenderReceiverGetStats:vF},Symbol.toStringTag,{value:"Module"}));function _F(e,n){const r=e&&e.navigator,s=e&&e.MediaStreamTrack;if(r.getUserMedia=function(a,i,o){N_("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(a).then(i,o)},!(n.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const a=function(o,c,A){c in o&&!(A in o)&&(o[A]=o[c],delete o[c])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),a(o.audio,"autoGainControl","mozAutoGainControl"),a(o.audio,"noiseSuppression","mozNoiseSuppression")),i(o)},s&&s.prototype.getSettings){const o=s.prototype.getSettings;s.prototype.getSettings=function(){const c=o.apply(this,arguments);return a(c,"mozAutoGainControl","autoGainControl"),a(c,"mozNoiseSuppression","noiseSuppression"),c}}if(s&&s.prototype.applyConstraints){const o=s.prototype.applyConstraints;s.prototype.applyConstraints=function(c){return this.kind==="audio"&&typeof c=="object"&&(c=JSON.parse(JSON.stringify(c)),a(c,"autoGainControl","mozAutoGainControl"),a(c,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[c])}}}}function xfe(e,n){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return s.video===!0?s.video={mediaSource:n}:s.video.mediaSource=n,e.navigator.mediaDevices.getUserMedia(s)})}function CF(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function A1(e,n){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const i=e.RTCPeerConnection.prototype[a],o={[a](){return arguments[0]=new(a==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[a]=o[a]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[i,o,c]=arguments;return s.apply(this,[i||null]).then(A=>{if(n.version<53&&!o)try{A.forEach(u=>{u.type=r[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;A.forEach((h,d)=>{A.set(d,Object.assign({},h,{type:r[h.type]||h.type}))})}return A}).then(o,c)}}function BF(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(i=>i._pc=this),a});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function SF(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s}),Fl(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function kF(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){N_("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&r.getTracks().includes(s.track)&&this.removeTrack(s)})})}function jF(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function NF(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const n=e.RTCPeerConnection.prototype.addTransceiver;n&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const a=s.length>0;a&&s.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=n.apply(this,arguments);if(a){const{sender:o}=i,c=o.getParameters();(!("encodings"in c)||c.encodings.length===1&&Object.keys(c.encodings[0]).length===0)&&(c.encodings=s,o.sendEncodings=s,this.setParametersPromises.push(o.setParameters(c).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function EF(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const n=e.RTCRtpSender.prototype.getParameters;n&&(e.RTCRtpSender.prototype.getParameters=function(){const s=n.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function TF(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}function FF(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const n=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}const xS=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:NF,shimCreateAnswer:FF,shimCreateOffer:TF,shimGetDisplayMedia:xfe,shimGetParameters:EF,shimGetUserMedia:_F,shimOnTrack:CF,shimPeerConnection:A1,shimRTCDataChannel:jF,shimReceiverGetStats:SF,shimRemoveStream:kF,shimSenderGetStats:BF},Symbol.toStringTag,{value:"Module"}));function IF(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(a=>n.call(this,a,s)),s.getVideoTracks().forEach(a=>n.call(this,a,s))},e.RTCPeerConnection.prototype.addTrack=function(s,...a){return a&&a.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),n.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(r);if(s===-1)return;this._localStreams.splice(s,1);const a=r.getTracks();this.getSenders().forEach(i=>{a.includes(i.track)&&this.removeTrack(i)})})}}function UF(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const i=new Event("addstream");i.stream=a,this.dispatchEvent(i)})})}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(i=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(i)>=0)return;s._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,s.dispatchEvent(o)})}),n.apply(s,arguments)}}}function PF(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,r=n.createOffer,s=n.createAnswer,a=n.setLocalDescription,i=n.setRemoteDescription,o=n.addIceCandidate;n.createOffer=function(u,h){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return h?(f.then(u,h),Promise.resolve()):f},n.createAnswer=function(u,h){const d=arguments.length>=2?arguments[2]:arguments[0],f=s.apply(this,[d]);return h?(f.then(u,h),Promise.resolve()):f};let c=function(A,u,h){const d=a.apply(this,[A]);return h?(d.then(u,h),Promise.resolve()):d};n.setLocalDescription=c,c=function(A,u,h){const d=i.apply(this,[A]);return h?(d.then(u,h),Promise.resolve()):d},n.setRemoteDescription=c,c=function(A,u,h){const d=o.apply(this,[A]);return h?(d.then(u,h),Promise.resolve()):d},n.addIceCandidate=c}function MF(e){const n=e&&e.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){const r=n.mediaDevices,s=r.getUserMedia.bind(r);n.mediaDevices.getUserMedia=a=>s(QF(a))}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=(function(s,a,i){n.mediaDevices.getUserMedia(s).then(a,i)}).bind(n))}function QF(e){return e&&e.video!==void 0?Object.assign({},e,{video:fF(e.video)}):e}function DF(e){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection;e.RTCPeerConnection=function(s,a){if(s&&s.iceServers){const i=[];for(let o=0;o<s.iceServers.length;o++){let c=s.iceServers[o];c.urls===void 0&&c.url?(N_("RTCIceServer.url","RTCIceServer.urls"),c=JSON.parse(JSON.stringify(c)),c.urls=c.url,delete c.url,i.push(c)):i.push(s.iceServers[o])}s.iceServers=i}return new n(s,a)},e.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return n.generateCertificate}})}function RF(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function $F(e){const n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const a=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):s.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):s.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function OF(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const wS=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:OF,shimCallbacksAPI:PF,shimConstraints:QF,shimCreateOfferLegacy:$F,shimGetUserMedia:MF,shimLocalStreamsAPI:IF,shimRTCIceServerUrls:DF,shimRemoteStreamsAPI:UF,shimTrackEventTransceiver:RF},Symbol.toStringTag,{value:"Module"}));var LF={exports:{}};(function(e){const n={};n.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},n.localCName=n.generateIdentifier(),n.splitLines=function(r){return r.trim().split(`
`).map(s=>s.trim())},n.splitSections=function(r){return r.split(`
m=`).map((a,i)=>(i>0?"m="+a:a).trim()+`\r
`)},n.getDescription=function(r){const s=n.splitSections(r);return s&&s[0]},n.getMediaSections=function(r){const s=n.splitSections(r);return s.shift(),s},n.matchPrefix=function(r,s){return n.splitLines(r).filter(a=>a.indexOf(s)===0)},n.parseCandidate=function(r){let s;r.indexOf("a=candidate:")===0?s=r.substring(12).split(" "):s=r.substring(10).split(" ");const a={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let i=8;i<s.length;i+=2)switch(s[i]){case"raddr":a.relatedAddress=s[i+1];break;case"rport":a.relatedPort=parseInt(s[i+1],10);break;case"tcptype":a.tcpType=s[i+1];break;case"ufrag":a.ufrag=s[i+1],a.usernameFragment=s[i+1];break;default:a[s[i]]===void 0&&(a[s[i]]=s[i+1]);break}return a},n.writeCandidate=function(r){const s=[];s.push(r.foundation);const a=r.component;a==="rtp"?s.push(1):a==="rtcp"?s.push(2):s.push(a),s.push(r.protocol.toUpperCase()),s.push(r.priority),s.push(r.address||r.ip),s.push(r.port);const i=r.type;return s.push("typ"),s.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(s.push("raddr"),s.push(r.relatedAddress),s.push("rport"),s.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(s.push("ufrag"),s.push(r.usernameFragment||r.ufrag)),"candidate:"+s.join(" ")},n.parseIceOptions=function(r){return r.substring(14).split(" ")},n.parseRtpMap=function(r){let s=r.substring(9).split(" ");const a={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),a.name=s[0],a.clockRate=parseInt(s[1],10),a.channels=s.length===3?parseInt(s[2],10):1,a.numChannels=a.channels,a},n.writeRtpMap=function(r){let s=r.payloadType;r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType);const a=r.channels||r.numChannels||1;return"a=rtpmap:"+s+" "+r.name+"/"+r.clockRate+(a!==1?"/"+a:"")+`\r
`},n.parseExtmap=function(r){const s=r.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},n.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},n.parseFmtp=function(r){const s={};let a;const i=r.substring(r.indexOf(" ")+1).split(";");for(let o=0;o<i.length;o++)a=i[o].trim().split("="),s[a[0].trim()]=a[1];return s},n.writeFmtp=function(r){let s="",a=r.payloadType;if(r.preferredPayloadType!==void 0&&(a=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const i=[];Object.keys(r.parameters).forEach(o=>{r.parameters[o]!==void 0?i.push(o+"="+r.parameters[o]):i.push(o)}),s+="a=fmtp:"+a+" "+i.join(";")+`\r
`}return s},n.parseRtcpFb=function(r){const s=r.substring(r.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},n.writeRtcpFb=function(r){let s="",a=r.payloadType;return r.preferredPayloadType!==void 0&&(a=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(i=>{s+="a=rtcp-fb:"+a+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),s},n.parseSsrcMedia=function(r){const s=r.indexOf(" "),a={ssrc:parseInt(r.substring(7,s),10)},i=r.indexOf(":",s);return i>-1?(a.attribute=r.substring(s+1,i),a.value=r.substring(i+1)):a.attribute=r.substring(s+1),a},n.parseSsrcGroup=function(r){const s=r.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(a=>parseInt(a,10))}},n.getMid=function(r){const s=n.matchPrefix(r,"a=mid:")[0];if(s)return s.substring(6)},n.parseFingerprint=function(r){const s=r.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},n.getDtlsParameters=function(r,s){return{role:"auto",fingerprints:n.matchPrefix(r+s,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(r,s){let a="a=setup:"+s+`\r
`;return r.fingerprints.forEach(i=>{a+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),a},n.parseCryptoLine=function(r){const s=r.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},n.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?n.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},n.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const s=r.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},n.getCryptoParameters=function(r,s){return n.matchPrefix(r+s,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(r,s){const a=n.matchPrefix(r+s,"a=ice-ufrag:")[0],i=n.matchPrefix(r+s,"a=ice-pwd:")[0];return a&&i?{usernameFragment:a.substring(12),password:i.substring(10)}:null},n.writeIceParameters=function(r){let s="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(s+=`a=ice-lite\r
`),s},n.parseRtpParameters=function(r){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=n.splitLines(r)[0].split(" ");s.profile=i[2];for(let c=3;c<i.length;c++){const A=i[c],u=n.matchPrefix(r,"a=rtpmap:"+A+" ")[0];if(u){const h=n.parseRtpMap(u),d=n.matchPrefix(r,"a=fmtp:"+A+" ");switch(h.parameters=d.length?n.parseFmtp(d[0]):{},h.rtcpFeedback=n.matchPrefix(r,"a=rtcp-fb:"+A+" ").map(n.parseRtcpFb),s.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(h.name.toUpperCase());break}}}n.matchPrefix(r,"a=extmap:").forEach(c=>{s.headerExtensions.push(n.parseExtmap(c))});const o=n.matchPrefix(r,"a=rtcp-fb:* ").map(n.parseRtcpFb);return s.codecs.forEach(c=>{o.forEach(A=>{c.rtcpFeedback.find(h=>h.type===A.type&&h.parameter===A.parameter)||c.rtcpFeedback.push(A)})}),s},n.writeRtpDescription=function(r,s){let a="";a+="m="+r+" ",a+=s.codecs.length>0?"9":"0",a+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=s.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(o=>{a+=n.writeRtpMap(o),a+=n.writeFmtp(o),a+=n.writeRtcpFb(o)});let i=0;return s.codecs.forEach(o=>{o.maxptime>i&&(i=o.maxptime)}),i>0&&(a+="a=maxptime:"+i+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(o=>{a+=n.writeExtmap(o)}),a},n.parseRtpEncodingParameters=function(r){const s=[],a=n.parseRtpParameters(r),i=a.fecMechanisms.indexOf("RED")!==-1,o=a.fecMechanisms.indexOf("ULPFEC")!==-1,c=n.matchPrefix(r,"a=ssrc:").map(f=>n.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),A=c.length>0&&c[0].ssrc;let u;const h=n.matchPrefix(r,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(m=>parseInt(m,10)));h.length>0&&h[0].length>1&&h[0][0]===A&&(u=h[0][1]),a.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let g={ssrc:A,codecPayloadType:parseInt(f.parameters.apt,10)};A&&u&&(g.rtx={ssrc:u}),s.push(g),i&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:A,mechanism:o?"red+ulpfec":"red"},s.push(g))}}),s.length===0&&A&&s.push({ssrc:A});let d=n.matchPrefix(r,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,s.forEach(f=>{f.maxBitrate=d})),s},n.parseRtcpParameters=function(r){const s={},a=n.matchPrefix(r,"a=ssrc:").map(c=>n.parseSsrcMedia(c)).filter(c=>c.attribute==="cname")[0];a&&(s.cname=a.value,s.ssrc=a.ssrc);const i=n.matchPrefix(r,"a=rtcp-rsize");s.reducedSize=i.length>0,s.compound=i.length===0;const o=n.matchPrefix(r,"a=rtcp-mux");return s.mux=o.length>0,s},n.writeRtcpParameters=function(r){let s="";return r.reducedSize&&(s+=`a=rtcp-rsize\r
`),r.mux&&(s+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(s+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),s},n.parseMsid=function(r){let s;const a=n.matchPrefix(r,"a=msid:");if(a.length===1)return s=a[0].substring(7).split(" "),{stream:s[0],track:s[1]};const i=n.matchPrefix(r,"a=ssrc:").map(o=>n.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(i.length>0)return s=i[0].value.split(" "),{stream:s[0],track:s[1]}},n.parseSctpDescription=function(r){const s=n.parseMLine(r),a=n.matchPrefix(r,"a=max-message-size:");let i;a.length>0&&(i=parseInt(a[0].substring(19),10)),isNaN(i)&&(i=65536);const o=n.matchPrefix(r,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:s.fmt,maxMessageSize:i};const c=n.matchPrefix(r,"a=sctpmap:");if(c.length>0){const A=c[0].substring(10).split(" ");return{port:parseInt(A[0],10),protocol:A[1],maxMessageSize:i}}},n.writeSctpDescription=function(r,s){let a=[];return r.protocol!=="DTLS/SCTP"?a=["m="+r.kind+" 9 "+r.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:a=["m="+r.kind+" 9 "+r.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&a.push("a=max-message-size:"+s.maxMessageSize+`\r
`),a.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,22)},n.writeSessionBoilerplate=function(r,s,a){let i;const o=s!==void 0?s:2;return r?i=r:i=n.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+i+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},n.getDirection=function(r,s){const a=n.splitLines(r);for(let i=0;i<a.length;i++)switch(a[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[i].substring(2)}return s?n.getDirection(s):"sendrecv"},n.getKind=function(r){return n.splitLines(r)[0].split(" ")[0].substring(2)},n.isRejected=function(r){return r.split(" ",2)[1]==="0"},n.parseMLine=function(r){const a=n.splitLines(r)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},n.parseOLine=function(r){const a=n.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},n.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const s=n.splitLines(r);for(let a=0;a<s.length;a++)if(s[a].length<2||s[a].charAt(1)!=="=")return!1;return!0},e.exports=n})(LF);var HF=LF.exports;const Gc=en(HF),wfe=ND({__proto__:null,default:Gc},[HF]);function c0(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const n=e.RTCIceCandidate;e.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const a=new n(s),i=Gc.parseCandidate(s.candidate);for(const o in i)o in a||Object.defineProperty(a,o,{value:i[o]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new n(s)},e.RTCIceCandidate.prototype=n.prototype,Fl(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function u1(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Fl(e,"icecandidate",n=>{if(n.candidate){const r=Gc.parseCandidate(n.candidate.candidate);r.type==="relay"&&(n.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return n})}function A0(e,n){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(c){if(!c||!c.sdp)return!1;const A=Gc.splitSections(c.sdp);return A.shift(),A.some(u=>{const h=Gc.parseMLine(u);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},s=function(c){const A=c.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(A===null||A.length<2)return-1;const u=parseInt(A[1],10);return u!==u?-1:u},a=function(c){let A=65536;return n.browser==="firefox"&&(n.version<57?c===-1?A=16384:A=2147483637:n.version<60?A=n.version===57?65535:65536:A=2147483637),A},i=function(c,A){let u=65536;n.browser==="firefox"&&n.version===57&&(u=65535);const h=Gc.matchPrefix(c.sdp,"a=max-message-size:");return h.length>0?u=parseInt(h[0].substring(19),10):n.browser==="firefox"&&A!==-1&&(u=2147483637),u},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,n.browser==="chrome"&&n.version>=76){const{sdpSemantics:A}=this.getConfiguration();A==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const A=s(arguments[0]),u=a(A),h=i(arguments[0],A);let d;u===0&&h===0?d=Number.POSITIVE_INFINITY:u===0||h===0?d=Math.max(u,h):d=Math.min(u,h);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function u0(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function n(s,a){const i=s.send;s.send=function(){const c=arguments[0],A=c.length||c.size||c.byteLength;if(s.readyState==="open"&&a.sctp&&A>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return i.apply(s,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const a=r.apply(this,arguments);return n(a,this),a},Fl(e,"datachannel",s=>(n(s.channel,s.target),s))}function d1(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype;Object.defineProperty(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const s=n[r];n[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const i=a.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const o=new Event("connectionstatechange",a);i.dispatchEvent(o)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function h1(e,n){if(!e.RTCPeerConnection||n.browser==="chrome"&&n.version>=71||n.browser==="safari"&&n._safariVersion>=13.1)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=a.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&a instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:a.type,sdp:i}):a.sdp=i}return r.apply(this,arguments)}}function d0(e,n){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(n.browser==="chrome"&&n.version<78||n.browser==="firefox"&&n.version<68||n.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function h0(e,n){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return r.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?r.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>r.apply(this,[o]))})}const bfe=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:h1,shimAddIceCandidateNullOrEmpty:d0,shimConnectionState:d1,shimMaxMessageSize:A0,shimParameterlessSetLocalDescription:h0,shimRTCIceCandidate:c0,shimRTCIceCandidateRelayProtocol:u1,shimSendThrowTypeError:u0},Symbol.toStringTag,{value:"Module"}));function _fe({window:e}={},n={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=hF,s=vfe(e),a={browserDetails:s,commonShim:bfe,extractVersion:Bu,disableLog:pfe,disableWarnings:yfe,sdp:wfe};switch(s.browser){case"chrome":if(!vS||!c1||!n.shimChrome)return r("Chrome shim is not included in this adapter release."),a;if(s.version===null)return r("Chrome shim can not determine version, not shimming."),a;r("adapter.js shimming chrome."),a.browserShim=vS,d0(e,s),h0(e),gF(e,s),mF(e),c1(e,s),pF(e),wF(e,s),yF(e),vF(e),bF(e,s),c0(e),u1(e),d1(e),A0(e,s),u0(e),h1(e,s);break;case"firefox":if(!xS||!A1||!n.shimFirefox)return r("Firefox shim is not included in this adapter release."),a;r("adapter.js shimming firefox."),a.browserShim=xS,d0(e,s),h0(e),_F(e,s),A1(e,s),CF(e),kF(e),BF(e),SF(e),jF(e),NF(e),EF(e),TF(e),FF(e),c0(e),d1(e),A0(e,s),u0(e);break;case"safari":if(!wS||!n.shimSafari)return r("Safari shim is not included in this adapter release."),a;r("adapter.js shimming safari."),a.browserShim=wS,d0(e,s),h0(e),DF(e),$F(e),PF(e),IF(e),UF(e),RF(e),MF(e),OF(e),c0(e),u1(e),A0(e,s),u0(e),h1(e,s);break;default:r("Unsupported browser!");break}return a}const bS=_fe({window:typeof window>"u"?void 0:window});function Il(e,n,r,s){Object.defineProperty(e,n,{get:r,set:s,enumerable:!0,configurable:!0})}class zF{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=n=>{const r=[],s=n.byteLength,a=Math.ceil(s/this.chunkedMTU);let i=0,o=0;for(;o<s;){const c=Math.min(s,o+this.chunkedMTU),A=n.slice(o,c),u={__peerData:this._dataCount,n:i,data:A,total:a};r.push(u),o=c,i++}return this._dataCount++,r}}}function Cfe(e){let n=0;for(const a of e)n+=a.byteLength;const r=new Uint8Array(n);let s=0;for(const a of e)r.set(a,s),s+=a.byteLength;return r}const Xy=bS.default||bS,eu=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),n=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?n>=this.minChromeVersion:e==="firefox"?n>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1}getBrowser(){return Xy.browserDetails.browser}getVersion(){return Xy.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),n=Xy.browserDetails.version||0;if(e==="chrome"&&n<this.minChromeVersion)return!1;if(e==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,s=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),s=!0}catch{}finally{r&&r.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Bfe=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),KF=()=>Math.random().toString(36).slice(2),_S={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class Sfe extends zF{noop(){}blobToArrayBuffer(n,r){const s=new FileReader;return s.onload=function(a){a.target&&r(a.target.result)},s.readAsArrayBuffer(n),s}binaryStringToArrayBuffer(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s)&255;return r.buffer}isSecure(){return location.protocol==="https:"}constructor(...n){super(...n),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=_S,this.browser=eu.getBrowser(),this.browserVersion=eu.getVersion(),this.pack=AF,this.unpack=cF,this.supports=function(){const r={browser:eu.isBrowserSupported(),webRTC:eu.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;let s;try{s=new RTCPeerConnection(_S),r.audioVideo=!0;let a;try{a=s.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!a.ordered;try{a.binaryType="blob",r.binaryBlob=!eu.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{s&&s.close()}return r}(),this.validateId=Bfe,this.randomToken=KF}}const Fr=new Sfe,kfe="PeerJS: ";var CS;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(CS||(CS={}));class jfe{get logLevel(){return this._logLevel}set logLevel(n){this._logLevel=n}log(...n){this._logLevel>=3&&this._print(3,...n)}warn(...n){this._logLevel>=2&&this._print(2,...n)}error(...n){this._logLevel>=1&&this._print(1,...n)}setLogFunction(n){this._print=n}_print(n,...r){const s=[kfe,...r];for(const a in s)s[a]instanceof Error&&(s[a]="("+s[a].name+") "+s[a].message);n>=3?console.log(...s):n>=2?console.warn("WARNING",...s):n>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var We=new jfe,E_={},Nfe=Object.prototype.hasOwnProperty,Cr="~";function Md(){}Object.create&&(Md.prototype=Object.create(null),new Md().__proto__||(Cr=!1));function Efe(e,n,r){this.fn=e,this.context=n,this.once=r||!1}function GF(e,n,r,s,a){if(typeof r!="function")throw new TypeError("The listener must be a function");var i=new Efe(r,s||e,a),o=Cr?Cr+n:n;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],i]:e._events[o].push(i):(e._events[o]=i,e._eventsCount++),e}function f0(e,n){--e._eventsCount===0?e._events=new Md:delete e._events[n]}function ur(){this._events=new Md,this._eventsCount=0}ur.prototype.eventNames=function(){var n=[],r,s;if(this._eventsCount===0)return n;for(s in r=this._events)Nfe.call(r,s)&&n.push(Cr?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(r)):n};ur.prototype.listeners=function(n){var r=Cr?Cr+n:n,s=this._events[r];if(!s)return[];if(s.fn)return[s.fn];for(var a=0,i=s.length,o=new Array(i);a<i;a++)o[a]=s[a].fn;return o};ur.prototype.listenerCount=function(n){var r=Cr?Cr+n:n,s=this._events[r];return s?s.fn?1:s.length:0};ur.prototype.emit=function(n,r,s,a,i,o){var c=Cr?Cr+n:n;if(!this._events[c])return!1;var A=this._events[c],u=arguments.length,h,d;if(A.fn){switch(A.once&&this.removeListener(n,A.fn,void 0,!0),u){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,r),!0;case 3:return A.fn.call(A.context,r,s),!0;case 4:return A.fn.call(A.context,r,s,a),!0;case 5:return A.fn.call(A.context,r,s,a,i),!0;case 6:return A.fn.call(A.context,r,s,a,i,o),!0}for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];A.fn.apply(A.context,h)}else{var f=A.length,g;for(d=0;d<f;d++)switch(A[d].once&&this.removeListener(n,A[d].fn,void 0,!0),u){case 1:A[d].fn.call(A[d].context);break;case 2:A[d].fn.call(A[d].context,r);break;case 3:A[d].fn.call(A[d].context,r,s);break;case 4:A[d].fn.call(A[d].context,r,s,a);break;default:if(!h)for(g=1,h=new Array(u-1);g<u;g++)h[g-1]=arguments[g];A[d].fn.apply(A[d].context,h)}}return!0};ur.prototype.on=function(n,r,s){return GF(this,n,r,s,!1)};ur.prototype.once=function(n,r,s){return GF(this,n,r,s,!0)};ur.prototype.removeListener=function(n,r,s,a){var i=Cr?Cr+n:n;if(!this._events[i])return this;if(!r)return f0(this,i),this;var o=this._events[i];if(o.fn)o.fn===r&&(!a||o.once)&&(!s||o.context===s)&&f0(this,i);else{for(var c=0,A=[],u=o.length;c<u;c++)(o[c].fn!==r||a&&!o[c].once||s&&o[c].context!==s)&&A.push(o[c]);A.length?this._events[i]=A.length===1?A[0]:A:f0(this,i)}return this};ur.prototype.removeAllListeners=function(n){var r;return n?(r=Cr?Cr+n:n,this._events[r]&&f0(this,r)):(this._events=new Md,this._eventsCount=0),this};ur.prototype.off=ur.prototype.removeListener;ur.prototype.addListener=ur.prototype.on;ur.prefixed=Cr;ur.EventEmitter=ur;E_=ur;var Ul={};Il(Ul,"ConnectionType",()=>Ia);Il(Ul,"PeerErrorType",()=>cn);Il(Ul,"BaseConnectionErrorType",()=>Qd);Il(Ul,"DataConnectionErrorType",()=>Dd);Il(Ul,"SerializationType",()=>AA);Il(Ul,"SocketEventType",()=>Na);Il(Ul,"ServerMessageType",()=>Un);var Ia;(function(e){e.Data="data",e.Media="media"})(Ia||(Ia={}));var cn;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(cn||(cn={}));var Qd;(function(e){e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed"})(Qd||(Qd={}));var Dd;(function(e){e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big"})(Dd||(Dd={}));var AA;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw"})(AA||(AA={}));var Na;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(Na||(Na={}));var Un;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(Un||(Un={}));var T_={};T_=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class Tfe extends E_.EventEmitter{constructor(n,r,s,a,i,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const c=n?"wss://":"ws://";this._baseUrl=c+r+":"+s+a+"peerjs?key="+i}start(n,r){this._id=n;const s=`${this._baseUrl}&id=${n}&token=${r}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+T_.version),this._disconnected=!1,this._socket.onmessage=a=>{let i;try{i=JSON.parse(a.data),We.log("Server message received:",i)}catch{We.log("Invalid server message",a.data);return}this.emit(Na.Message,i)},this._socket.onclose=a=>{this._disconnected||(We.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(Na.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),We.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){We.log("Cannot send heartbeat, because socket closed");return}const n=JSON.stringify({type:Un.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const n=[...this._messagesQueue];this._messagesQueue=[];for(const r of n)this.send(r)}send(n){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(Na.Error,"Invalid message");return}if(!this._wsOpen())return;const r=JSON.stringify(n);this._socket.send(r)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class WF{constructor(n){this.connection=n}startConnection(n){const r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===Ia.Media&&n._stream&&this._addTracksToConnection(n._stream,r),n.originator){const s=this.connection,a={ordered:!!n.reliable},i=r.createDataChannel(s.label,a);s._initializeDataChannel(i),this._makeOffer()}else this.handleSDP("OFFER",n.sdp)}_startPeerConnection(){We.log("Creating RTCPeerConnection.");const n=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(n),n}_setupListeners(n){const r=this.connection.peer,s=this.connection.connectionId,a=this.connection.type,i=this.connection.provider;We.log("Listening for ICE candidates."),n.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(We.log(`Received ICE candidates for ${r}:`,o.candidate),i.socket.send({type:Un.Candidate,payload:{candidate:o.candidate,type:a,connectionId:s},dst:r}))},n.oniceconnectionstatechange=()=>{switch(n.iceConnectionState){case"failed":We.log("iceConnectionState is failed, closing connections to "+r),this.connection.emitError(Qd.NegotiationFailed,"Negotiation of connection to "+r+" failed."),this.connection.close();break;case"closed":We.log("iceConnectionState is closed, closing connections to "+r),this.connection.emitError(Qd.ConnectionClosed,"Connection to "+r+" closed."),this.connection.close();break;case"disconnected":We.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":n.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",n.iceConnectionState)},We.log("Listening for data channel"),n.ondatachannel=o=>{We.log("Received data channel");const c=o.channel;i.getConnection(r,s)._initializeDataChannel(c)},We.log("Listening for remote stream"),n.ontrack=o=>{We.log("Received remote stream");const c=o.streams[0],A=i.getConnection(r,s);if(A.type===Ia.Media){const u=A;this._addStreamToMediaConnection(c,u)}}}cleanup(){We.log("Cleaning up PeerConnection to "+this.connection.peer);const n=this.connection.peerConnection;if(!n)return;this.connection.peerConnection=null,n.onicecandidate=n.oniceconnectionstatechange=n.ondatachannel=n.ontrack=()=>{};const r=n.signalingState!=="closed";let s=!1;const a=this.connection.dataChannel;a&&(s=!!a.readyState&&a.readyState!=="closed"),(r||s)&&n.close()}async _makeOffer(){const n=this.connection.peerConnection,r=this.connection.provider;try{const s=await n.createOffer(this.connection.options.constraints);We.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await n.setLocalDescription(s),We.log("Set localDescription:",s,`for:${this.connection.peer}`);let a={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ia.Data){const i=this.connection;a={...a,label:i.label,reliable:i.reliable,serialization:i.serialization}}r.socket.send({type:Un.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(cn.WebRTC,a),We.log("Failed to setLocalDescription, ",a))}}catch(s){r.emitError(cn.WebRTC,s),We.log("Failed to createOffer, ",s)}}async _makeAnswer(){const n=this.connection.peerConnection,r=this.connection.provider;try{const s=await n.createAnswer();We.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await n.setLocalDescription(s),We.log("Set localDescription:",s,`for:${this.connection.peer}`),r.socket.send({type:Un.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){r.emitError(cn.WebRTC,a),We.log("Failed to setLocalDescription, ",a)}}catch(s){r.emitError(cn.WebRTC,s),We.log("Failed to create answer, ",s)}}async handleSDP(n,r){r=new RTCSessionDescription(r);const s=this.connection.peerConnection,a=this.connection.provider;We.log("Setting remote description",r);const i=this;try{await s.setRemoteDescription(r),We.log(`Set remoteDescription:${n} for:${this.connection.peer}`),n==="OFFER"&&await i._makeAnswer()}catch(o){a.emitError(cn.WebRTC,o),We.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(n){We.log("handleCandidate:",n);try{await this.connection.peerConnection.addIceCandidate(n),We.log(`Added ICE candidate for:${this.connection.peer}`)}catch(r){this.connection.provider.emitError(cn.WebRTC,r),We.log("Failed to handleCandidate, ",r)}}_addTracksToConnection(n,r){if(We.log(`add tracks from stream ${n.id} to peer connection`),!r.addTrack)return We.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");n.getTracks().forEach(s=>{r.addTrack(s,n)})}_addStreamToMediaConnection(n,r){We.log(`add stream ${n.id} to media connection ${r.connectionId}`),r.addStream(n)}}class VF extends E_.EventEmitter{emitError(n,r){We.error("Error:",r),this.emit("error",new Ffe(`${n}`,r))}}class Ffe extends Error{constructor(n,r){typeof r=="string"?super(r):(super(),Object.assign(this,r)),this.type=n}}class qF extends VF{get open(){return this._open}constructor(n,r,s){super(),this.peer=n,this.provider=r,this.options=s,this._open=!1,this.metadata=s.metadata}}var Gw;const ld=class ld extends qF{get type(){return Ia.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(n,r,s){super(n,r,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||ld.ID_PREFIX+Fr.randomToken(),this._negotiator=new WF(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(n){this.dataChannel=n,this.dataChannel.onopen=()=>{We.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{We.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(n){We.log("Receiving stream",n),this._remoteStream=n,super.emit("stream",n)}handleMessage(n){const r=n.type,s=n.payload;switch(n.type){case Un.Answer:this._negotiator.handleSDP(r,s.sdp),this._open=!0;break;case Un.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:We.warn(`Unrecognized message type:${r} from peer:${this.peer}`);break}}answer(n,r={}){if(this._localStream){We.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:n});const s=this.provider._getMessages(this.connectionId);for(const a of s)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Gw=new WeakMap,OA(ld,Gw,ld.ID_PREFIX="mc_");let lg=ld;class Ife{constructor(n){this._options=n}_buildRequest(n){const r=this._options.secure?"https":"http",{host:s,port:a,path:i,key:o}=this._options,c=new URL(`${r}://${s}:${a}${i}${o}/${n}`);return c.searchParams.set("ts",`${Date.now()}${Math.random()}`),c.searchParams.set("version",T_.version),fetch(c.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const n=await this._buildRequest("id");if(n.status!==200)throw new Error(`Error. Status:${n.status}`);return n.text()}catch(n){We.error("Error retrieving ID",n);let r="";throw this._options.path==="/"&&this._options.host!==Fr.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}}async listAllPeers(){try{const n=await this._buildRequest("peers");if(n.status!==200){if(n.status===401){let r="";throw this._options.host===Fr.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${n.status}`)}return n.json()}catch(n){throw We.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n)}}}var Ww,Vw;const Xo=class Xo extends qF{get type(){return Ia.Data}constructor(n,r,s){super(n,r,s),this.connectionId=this.options.connectionId||Xo.ID_PREFIX+KF(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new WF(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(n){this.dataChannel=n,this.dataChannel.onopen=()=>{We.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=r=>{We.log(`DC#${this.connectionId} dc onmessage:`,r.data)},this.dataChannel.onclose=()=>{We.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(n){if(n!=null&&n.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(n,r=!1){if(!this.open){this.emitError(Dd.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(n,r)}async handleMessage(n){const r=n.payload;switch(n.type){case Un.Answer:await this._negotiator.handleSDP(n.type,r.sdp);break;case Un.Candidate:await this._negotiator.handleCandidate(r.candidate);break;default:We.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}}};Ww=new WeakMap,Vw=new WeakMap,OA(Xo,Ww,Xo.ID_PREFIX="dc_"),OA(Xo,Vw,Xo.MAX_BUFFERED_AMOUNT=8388608);let cg=Xo;class F_ extends cg{get bufferSize(){return this._bufferSize}_initializeDataChannel(n){super._initializeDataChannel(n),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",r=>this._handleDataMessage(r))}_bufferedSend(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)}_trySend(n){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>cg.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(r){return We.error(`DC#:${this.connectionId} Error when sending:`,r),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(n){if(n!=null&&n.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...n){super(...n),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Yy extends F_{close(n){super.close(n),this._chunkedData={}}constructor(n,r,s){super(n,r,s),this.chunker=new zF,this.serialization=AA.Binary,this._chunkedData={}}_handleDataMessage({data:n}){const r=cF(n),s=r.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(r);return}this.emit("data",r)}_handleChunk(n){const r=n.__peerData,s=this._chunkedData[r]||{data:[],count:0,total:n.total};if(s.data[n.n]=new Uint8Array(n.data),s.count++,this._chunkedData[r]=s,s.total===s.count){delete this._chunkedData[r];const a=Cfe(s.data);this._handleDataMessage({data:a})}}_send(n,r){const s=AF(n);if(s instanceof Promise)return this._send_blob(s);if(!r&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(n){const r=await n;if(r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}_sendChunks(n){const r=this.chunker.chunk(n);We.log(`DC#${this.connectionId} Try to send ${r.length} chunks...`);for(const s of r)this.send(s,!0)}}class Ufe extends F_{_handleDataMessage({data:n}){super.emit("data",n)}_send(n,r){this._bufferedSend(n)}constructor(...n){super(...n),this.serialization=AA.None}}class Pfe extends F_{_handleDataMessage({data:n}){const r=this.parse(this.decoder.decode(n)),s=r.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",r)}_send(n,r){const s=this.encoder.encode(this.stringify(n));if(s.byteLength>=Fr.chunkedMTU){this.emitError(Dd.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...n){super(...n),this.serialization=AA.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var qw;const cd=class cd extends VF{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const n=Object.create(null);for(const[r,s]of this._connections)n[r]=s;return n}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(n,r){super(),this._serializers={raw:Ufe,json:Pfe,binary:Yy,"binary-utf8":Yy,default:Yy},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(n&&n.constructor==Object?r=n:n&&(s=n.toString()),r={debug:0,host:Fr.CLOUD_HOST,port:Fr.CLOUD_PORT,path:"/",key:cd.DEFAULT_KEY,token:Fr.randomToken(),config:Fr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...r},this._options=r,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Fr.CLOUD_HOST?this._options.secure=Fr.isSecure():this._options.host==Fr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&We.setLogFunction(this._options.logFunction),We.logLevel=this._options.debug||0,this._api=new Ife(r),this._socket=this._createServerConnection(),!Fr.supports.audioVideo&&!Fr.supports.data){this._delayedAbort(cn.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!Fr.validateId(s)){this._delayedAbort(cn.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(cn.ServerError,a))}_createServerConnection(){const n=new Tfe(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return n.on(Na.Message,r=>{this._handleMessage(r)}),n.on(Na.Error,r=>{this._abort(cn.SocketError,r)}),n.on(Na.Disconnected,()=>{this.disconnected||(this.emitError(cn.Network,"Lost connection to server."),this.disconnect())}),n.on(Na.Close,()=>{this.disconnected||this._abort(cn.SocketClosed,"Underlying socket is already closed.")}),n}_initialize(n){this._id=n,this.socket.start(n,this._options.token)}_handleMessage(n){const r=n.type,s=n.payload,a=n.src;switch(r){case Un.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Un.Error:this._abort(cn.ServerError,s.msg);break;case Un.IdTaken:this._abort(cn.UnavailableID,`ID "${this.id}" is taken`);break;case Un.InvalidKey:this._abort(cn.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Un.Leave:We.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case Un.Expire:this.emitError(cn.PeerUnavailable,`Could not connect to peer ${a}`);break;case Un.Offer:{const i=s.connectionId;let o=this.getConnection(a,i);if(o&&(o.close(),We.warn(`Offer received for existing Connection ID:${i}`)),s.type===Ia.Media){const A=new lg(a,this,{connectionId:i,_payload:s,metadata:s.metadata});o=A,this._addConnection(a,o),this.emit("call",A)}else if(s.type===Ia.Data){const A=new this._serializers[s.serialization](a,this,{connectionId:i,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});o=A,this._addConnection(a,o),this.emit("connection",A)}else{We.warn(`Received malformed connection type:${s.type}`);return}const c=this._getMessages(i);for(const A of c)o.handleMessage(A);break}default:{if(!s){We.warn(`You received a malformed message from ${a} of type ${r}`);return}const i=s.connectionId,o=this.getConnection(a,i);o&&o.peerConnection?o.handleMessage(n):i?this._storeMessage(i,n):We.warn("You received an unrecognized message:",n);break}}}_storeMessage(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)}_getMessages(n){const r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]}connect(n,r={}){if(r={serialization:"default",...r},this.disconnected){We.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(cn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[r.serialization](n,this,r);return this._addConnection(n,s),s}call(n,r,s={}){if(this.disconnected){We.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(cn.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){We.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new lg(n,this,{...s,_stream:r});return this._addConnection(n,a),a}_addConnection(n,r){We.log(`add connection ${r.type}:${r.connectionId} to peerId:${n}`),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)}_removeConnection(n){const r=this._connections.get(n.peer);if(r){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}this._lostMessages.delete(n.connectionId)}getConnection(n,r){const s=this._connections.get(n);if(!s)return null;for(const a of s)if(a.connectionId===r)return a;return null}_delayedAbort(n,r){setTimeout(()=>{this._abort(n,r)},0)}_abort(n,r){We.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(We.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const n of this._connections.keys())this._cleanupPeer(n),this._connections.delete(n);this.socket.removeAllListeners()}_cleanupPeer(n){const r=this._connections.get(n);if(r)for(const s of r)s.close()}disconnect(){if(this.disconnected)return;const n=this.id;We.log(`Disconnect peer with ID:${n}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}reconnect(){if(this.disconnected&&!this.destroyed)We.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)We.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(n=r=>{}){this._api.listAllPeers().then(r=>n(r)).catch(r=>this._abort(cn.ServerError,r))}};qw=new WeakMap,OA(cd,qw,cd.DEFAULT_KEY="peerjs");let f1=cd;var BS=f1;class Mfe{constructor(n={}){ve(this,"peer",null);ve(this,"connections",new Map);ve(this,"dataListeners",new Set);ve(this,"connectionStateChangeHandler",null);ve(this,"connectionState",{isConnecting:!1,isConnected:!1,error:null,connectionCode:null,isHost:!1,peerCount:0,detailedStatus:"Initialized"});ve(this,"options");ve(this,"reconnectAttempts",0);ve(this,"maxReconnectAttempts",3);this.options={debug:!1,...n},n.onData&&this.dataListeners.add(n.onData),this.logConnectionStatus("P2PService initialized")}async initAsHost(){const n=this.generateConnectionCode();return this.updateState({isHost:!0,isConnecting:!0,connectionCode:n,detailedStatus:"Initializing as host"}),this.log("Generated connection code:",n),new Promise((r,s)=>{try{this.cleanupPeer();const a=setTimeout(()=>{s(new Error("PeerJS initialization timeout"))},15e3);this.peer=new BS(n,{debug:this.options.debug?2:0}),this.peer.on("open",i=>{clearTimeout(a),this.log("Host initialized with ID:",i),this.logConnectionStatus("Host peer opened, waiting for connections"),this.setupPeerListeners(),r(i)}),this.peer.on("error",i=>{if(clearTimeout(a),i.type==="unavailable-id"){this.log("Connection code already in use, generating new one"),this.logConnectionStatus("Connection code in use, retrying"),this.initAsHost().then(r).catch(s);return}this.handleError("Failed to initialize as host",i),s(i)})}catch(a){this.handleError("Failed to initialize as host",a),s(a)}})}async connect(n){if(!n)throw new Error("Connection code is required");if(n=n.trim().toUpperCase(),this.connectionState.isConnected&&this.connectionState.connectionCode===n&&this.connections.size>0)if(console.log("Already connected to",n),await this.checkConnectionHealth()){console.log("Connection is healthy, no need to reconnect");return}else console.log("Connection is not healthy despite appearing connected, will reconnect"),this.cleanupPeer();return this.updateState({isHost:!1,isConnecting:!0,connectionCode:n,detailedStatus:`Connecting to host: ${n}`}),new Promise((r,s)=>{try{this.cleanupPeer();const a=setTimeout(()=>{s(new Error("PeerJS initialization timeout")),this.updateState({isConnecting:!1,error:"Connection timed out. Please try again.",detailedStatus:"Connection timeout"})},15e3);this.peer=new BS({debug:this.options.debug?2:0}),this.peer.on("open",i=>{if(this.log("Initialized with ID:",i),this.logConnectionStatus(`Client peer opened with ID ${i}, connecting to ${n}`),this.setupPeerListeners(),!this.peer){clearTimeout(a),s(new Error("Peer connection was lost"));return}try{this.log(`Attempting to connect to host ${n}`);const o=this.peer.connect(n,{reliable:!0,serialization:"json"});this.handleOutgoingConnection(o,()=>{clearTimeout(a),r()},c=>{clearTimeout(a),s(c)})}catch(o){clearTimeout(a),this.handleError("Failed to connect to peer",o),s(o)}}),this.peer.on("error",i=>{clearTimeout(a),this.handleError("Connection error",i),s(i)})}catch(a){this.handleError("Failed to connect",a),s(a)}})}async checkConnectionHealth(){if(this.connections.size===0)return!1;try{return new Promise(n=>{const r=setTimeout(()=>{this.log("Health check timed out"),n(!1)},3e3),s=i=>{i&&i.type==="health-check-response"&&(clearTimeout(r),this.removeDataListener(s),n(!0))};this.onData(s),this.send({type:"health-check-request",timestamp:Date.now()})||(clearTimeout(r),this.removeDataListener(s),n(!1))})}catch(n){return this.log("Error during health check:",n),!1}}send(n){if(this.logConnectionStatus(`Attempting to send data, connections: ${this.connections.size}`),!this.validateConnections())return this.updateState({error:"Cannot send data: not connected to any peers",detailedStatus:"No active connections for sending"}),!1;try{let r=0;for(const s of this.connections.values())s.open?(this.log(`Sending data to peer: ${s.peer}`),s.send(n),r++):this.log(`Connection to ${s.peer} exists but is not open, skipping`);return r===0?(this.updateState({error:"Cannot send data: all connections are closed",detailedStatus:"All connections closed"}),!1):(this.log(`Successfully sent data to ${r} peer(s)`),!0)}catch(r){return this.handleError("Failed to send data",r),!1}}getState(){return{...this.connectionState}}onData(n){this.dataListeners.add(n)}removeDataListener(n){this.dataListeners.delete(n)}disconnect(){this.log("Disconnecting from all peers"),this.cleanupPeer(),this.updateState({isConnecting:!1,isConnected:!1,connectionCode:null,error:null,peerCount:0,detailedStatus:"Disconnected"})}validateConnections(){if(this.connections.size===0)return this.log("No connections in the connections map"),!1;let n=!1;for(const r of this.connections.values())if(r.open){n=!0;break}return n||this.log("No open connections found despite having connection objects"),n}setupPeerListeners(){this.peer&&(this.peer.on("connection",n=>{this.log("Incoming connection from peer:",n.peer),this.logConnectionStatus(`Incoming connection from: ${n.peer}`),this.handleIncomingConnection(n)}),this.peer.on("disconnected",()=>{this.log("Disconnected from PeerJS server"),this.logConnectionStatus("Disconnected from signaling server, attempting reconnect"),this.peer&&this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,this.log(`Attempting reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.peer.reconnect()):this.reconnectAttempts>=this.maxReconnectAttempts&&(this.log("Max reconnect attempts reached, giving up"),this.updateState({isConnected:!1,isConnecting:!1,error:"Connection lost and could not reconnect automatically",detailedStatus:"Max reconnect attempts reached"}))}),this.peer.on("close",()=>{this.log("Peer connection closed"),this.logConnectionStatus("Peer closed"),this.updateState({isConnected:!1,isConnecting:!1,peerCount:0,detailedStatus:"Peer connection closed"})}),this.peer.on("error",n=>{this.handleError("Peer error",n)}))}handleIncomingConnection(n){this.log(`Handling incoming connection from ${n.peer}`),this.connections.set(n.peer,n),this.log(`Added connection to map, current size: ${this.connections.size}`),n.on("open",()=>{this.log("Connection opened to peer:",n.peer),this.logConnectionStatus(`Connection opened with peer: ${n.peer}`),this.updateConnectionStateFromMap()}),n.on("data",r=>{this.log("Received data from peer:",n.peer),this.notifyDataListeners(r)}),n.on("close",()=>{this.log("Connection closed from peer:",n.peer),this.logConnectionStatus(`Connection closed from peer: ${n.peer}`),this.connections.delete(n.peer),this.log(`Removed connection from map, current size: ${this.connections.size}`),this.updateConnectionStateFromMap()}),n.on("error",r=>{this.handleError(`Connection error with peer ${n.peer}`,r),this.connections.delete(n.peer),this.log(`Removed errored connection, current size: ${this.connections.size}`),this.updateConnectionStateFromMap()})}updateConnectionStateFromMap(){const n=[...this.connections.values()].filter(r=>r.open).length;this.log(`Updating connection state based on map: ${n} open connections`),this.updateState({isConnected:n>0,isConnecting:!1,error:null,peerCount:n,detailedStatus:n>0?`Connected with ${n} peer(s)`:"No active connections"})}handleOutgoingConnection(n,r,s){const a=setTimeout(()=>{s(new Error("Connection timeout"))},15e3);this.log(`Attempting outgoing connection to ${n.peer}`),n.on("open",()=>{clearTimeout(a),this.log("Connection opened to host:",n.peer),this.logConnectionStatus(`Connection opened to host: ${n.peer}`),this.connections.set(n.peer,n),this.log(`Added connection to map, current size: ${this.connections.size}`),this.updateConnectionStateFromMap(),r()}),n.on("data",i=>{this.log("Received data from host:",n.peer),this.notifyDataListeners(i)}),n.on("close",()=>{this.log("Connection closed from host:",n.peer),this.logConnectionStatus(`Connection closed from host: ${n.peer}`),this.connections.delete(n.peer),this.log(`Removed connection from map, current size: ${this.connections.size}`),this.updateConnectionStateFromMap()}),n.on("error",i=>{clearTimeout(a),this.handleError(`Connection error with host ${n.peer}`,i),this.connections.delete(n.peer),this.log(`Removed errored connection, current size: ${this.connections.size}`),this.updateConnectionStateFromMap(),s(i instanceof Error?i:new Error(String(i)))})}cleanupPeer(){this.log(`Cleaning up peer and ${this.connections.size} connections`);for(const n of this.connections.values())try{this.log(`Closing connection to ${n.peer}`),n.close()}catch(r){this.log(`Error closing connection: ${r}`)}if(this.connections.clear(),this.log("Cleared all connections from map"),this.peer){try{this.log("Destroying peer instance"),this.peer.destroy()}catch(n){this.log(`Error destroying peer: ${n}`)}this.peer=null}this.reconnectAttempts=0}handleError(n,r){let s,a;if(r&&typeof r=="object"&&r.type)switch(r.type){case"peer-unavailable":s=`${n}: The connection code is invalid or the host is no longer available`,a="Host unavailable";break;case"disconnected":s=`${n}: Connection to signaling server lost`,a="Signaling server disconnected";break;case"server-error":s=`${n}: WebRTC server error`,a="WebRTC server error";break;case"socket-error":s=`${n}: Network connection issue`,a="Network connection issue";break;case"socket-closed":s=`${n}: Connection closed unexpectedly`,a="Connection closed unexpectedly";break;default:s=`${n}: ${r.type||r.message||"Unknown error"}`,a=`Error: ${r.type||"Unknown"}`}else s=`${n}: ${(r==null?void 0:r.message)||r||"Unknown error"}`,a="Unknown error occurred";this.log("ERROR:",s,r),this.updateState({isConnecting:!1,error:s,detailedStatus:a})}set onConnectionStateChange(n){this.connectionStateChangeHandler=n}updateState(n){this.connectionState={...this.connectionState,...n},(n.isConnected!==void 0||n.isConnecting!==void 0||n.error!==void 0||n.peerCount!==void 0)&&this.log(`State updated: connected=${this.connectionState.isConnected}, connecting=${this.connectionState.isConnecting}, peers=${this.connectionState.peerCount}, error=${this.connectionState.error?"yes":"no"}`),this.options.onConnectionStateChange&&this.options.onConnectionStateChange(this.connectionState),this.connectionStateChangeHandler&&this.connectionStateChangeHandler(this.connectionState)}notifyDataListeners(n){this.dataListeners.forEach(r=>{try{r(n)}catch(s){this.log("Error in data listener:",s)}})}generateConnectionCode(n=6){const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let s="";for(let a=0;a<n;a++){const i=Math.floor(Math.random()*r.length);s+=r[i]}return s}logConnectionStatus(n){this.log(`CONNECTION STATUS: ${n} (connections: ${this.connections.size}, connected: ${this.connectionState.isConnected})`)}log(...n){(n[0]==="ERROR:"||this.options.debug)&&console.log("[P2PService]",...n)}}class Qfe{constructor(n){ve(this,"p2pService");ve(this,"onProgressCallback",null);ve(this,"chunkSize",10*1024);ve(this,"syncInProgress",!1);ve(this,"receivedChunks",new Map);ve(this,"totalExpectedChunks",0);ve(this,"transferStartTime",0);ve(this,"currentOperationId",null);ve(this,"currentProgress",{percent:0,status:"idle",message:"Ready to sync"});ve(this,"retryCount",0);ve(this,"maxRetries",5);ve(this,"chunkRetryCount",new Map);ve(this,"maxChunkRetries",3);ve(this,"healthcheckInterval",null);this.p2pService=n,console.log("[DatabaseSyncService] Initialized"),this.p2pService.onData(this.handleSyncMessage.bind(this))}async requestData(){console.log("[DatabaseSyncService] requestData called");const n=this.p2pService.getState();if(console.log("[DatabaseSyncService] Current connection state:",n.isConnected?"connected":"disconnected","peers:",n.peerCount),!n.isConnected)throw console.error("[DatabaseSyncService] Not connected to any peers"),this.updateProgress({percent:0,status:"error",message:"Not connected to any peers",error:"Connection is not active"}),new Error("Not connected to any peers");if(this.syncInProgress)throw console.error("[DatabaseSyncService] Sync already in progress"),this.updateProgress({percent:0,status:"error",message:"Sync already in progress",error:"Sync operation is already running"}),new Error("Sync already in progress");if(!await this.performConnectionHealthCheck())throw console.error("[DatabaseSyncService] Connection health check failed"),this.updateProgress({percent:0,status:"error",message:"Connection health check failed. Try disconnecting and reconnecting.",error:"Connection health check failed"}),new Error("Connection health check failed");if(this.syncInProgress=!0,this.currentOperationId=this.generateOperationId(),this.retryCount=0,console.log("[DatabaseSyncService] Starting data request with operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"awaiting-confirmation",message:"Waiting for the other device to approve data request",isDataRequest:!0}),!this.p2pService.send({type:"db-sync-request-data",payload:{operationId:this.currentOperationId}}))throw console.error("[DatabaseSyncService] Failed to send data request"),this.syncInProgress=!1,this.currentOperationId=null,this.updateProgress({percent:0,status:"error",message:"Failed to send data request. Try reconnecting.",error:"Message sending failed"}),new Error("Failed to send data request");this.startHealthcheckInterval()}async sendData(){console.log("[DatabaseSyncService] sendData called");const n=this.p2pService.getState();if(console.log("[DatabaseSyncService] Current connection state:",n.isConnected?"connected":"disconnected","peers:",n.peerCount),!n.isConnected)throw console.error("[DatabaseSyncService] Not connected to any peers"),this.updateProgress({percent:0,status:"error",message:"Not connected to any peers",error:"Connection is not active"}),new Error("Not connected to any peers");if(this.syncInProgress)throw console.error("[DatabaseSyncService] Sync already in progress"),this.updateProgress({percent:0,status:"error",message:"Sync already in progress",error:"Sync operation is already running"}),new Error("Sync already in progress");if(!await this.performConnectionHealthCheck())throw console.error("[DatabaseSyncService] Connection health check failed"),this.updateProgress({percent:0,status:"error",message:"Connection health check failed. Try disconnecting and reconnecting.",error:"Connection health check failed"}),new Error("Connection health check failed");if(this.syncInProgress=!0,this.currentOperationId=this.generateOperationId(),this.retryCount=0,this.chunkRetryCount.clear(),console.log("[DatabaseSyncService] Starting data send with operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"awaiting-confirmation",message:"Waiting for the other device to accept data",isDataRequest:!1}),!this.p2pService.send({type:"db-sync-send-data-request",payload:{operationId:this.currentOperationId}}))throw console.error("[DatabaseSyncService] Failed to send data request"),this.syncInProgress=!1,this.currentOperationId=null,this.updateProgress({percent:0,status:"error",message:"Failed to send data request. Try reconnecting.",error:"Message sending failed"}),new Error("Failed to send data request");this.startHealthcheckInterval()}async performConnectionHealthCheck(){return new Promise(n=>{console.log("[DatabaseSyncService] Performing connection health check");const r=setTimeout(()=>{console.error("[DatabaseSyncService] Health check timed out"),this.p2pService.removeDataListener(s),n(!1)},8e3),s=i=>{i&&i.type==="db-sync-healthcheck-response"&&(console.log("[DatabaseSyncService] Received health check response in listener"),clearTimeout(r),this.p2pService.removeDataListener(s),n(!0))};this.p2pService.onData(s),this.p2pService.send({type:"db-sync-healthcheck"})||(console.error("[DatabaseSyncService] Failed to send health check"),clearTimeout(r),this.p2pService.removeDataListener(s),n(!1))})}startHealthcheckInterval(){this.stopHealthcheckInterval(),this.healthcheckInterval=setInterval(()=>{this.syncInProgress&&(this.currentProgress.status==="awaiting-confirmation"||this.currentProgress.status==="pending-confirmation")?(console.log("[DatabaseSyncService] Performing periodic health check"),this.performConnectionHealthCheck().then(n=>{if(n)this.retryCount=0;else{if(console.error("[DatabaseSyncService] Periodic health check failed"),this.retryCount<this.maxRetries){this.retryCount++,console.log(`[DatabaseSyncService] Retrying health check (${this.retryCount}/${this.maxRetries})`),this.updateProgress({percent:0,status:"reconnecting",message:`Connection issue detected, retrying (${this.retryCount}/${this.maxRetries})...`,isDataRequest:this.currentProgress.isDataRequest});return}(this.currentProgress.status==="awaiting-confirmation"||this.currentProgress.status==="pending-confirmation")&&(this.updateProgress({percent:0,status:"error",message:"Connection was lost while waiting for confirmation",error:"Connection health check failed after multiple attempts"}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval())}})):this.stopHealthcheckInterval()},2e4)}stopHealthcheckInterval(){this.healthcheckInterval&&(clearInterval(this.healthcheckInterval),this.healthcheckInterval=null)}confirmDataOperation(){if(console.log("[DatabaseSyncService] confirmDataOperation called, current status:",this.currentProgress.status),this.currentProgress.status==="pending-confirmation"){const n=this.p2pService.getState();if(!n.isConnected||n.peerCount===0){console.error("[DatabaseSyncService] Cannot confirm - connection lost");const s=n.connectionCode;s?this.attemptReconnection(s).then(a=>{a?(console.log("[DatabaseSyncService] Reconnection successful, retrying confirm"),setTimeout(()=>this.confirmDataOperation(),1e3)):(this.updateProgress({percent:0,status:"error",message:"Connection lost and reconnection failed. Please try again.",error:"Reconnection failed"}),this.syncInProgress=!1,this.currentOperationId=null)}):(this.updateProgress({percent:0,status:"error",message:"Connection lost. Please reconnect and try again.",error:"Connection lost"}),this.syncInProgress=!1,this.currentOperationId=null);return}if(this.currentProgress.isDataRequest)console.log("[DatabaseSyncService] Confirming data request, sending data"),this.handleSendDataAfterConfirmation();else{if(console.log("[DatabaseSyncService] Confirming data send request, ready to receive"),!this.p2pService.send({type:"db-sync-send-data-confirm",payload:{operationId:this.currentOperationId}})){console.error("[DatabaseSyncService] Failed to send confirmation");const a=this.p2pService.getState().connectionCode;if(a){this.attemptReconnection(a).then(i=>{i?(console.log("[DatabaseSyncService] Reconnection successful, retrying confirm"),setTimeout(()=>this.confirmDataOperation(),1e3)):(this.updateProgress({percent:0,status:"error",message:"Failed to send confirmation and reconnection failed. Please try again.",error:"Confirmation failed"}),this.syncInProgress=!1,this.currentOperationId=null)});return}this.updateProgress({percent:0,status:"error",message:"Failed to send confirmation. Try reconnecting.",error:"Message sending failed"}),this.syncInProgress=!1,this.currentOperationId=null;return}this.updateProgress({percent:0,status:"preparing",message:"Preparing to receive data"})}}else console.warn("[DatabaseSyncService] confirmDataOperation called when not in pending-confirmation state")}async attemptReconnection(n){this.updateProgress({percent:0,status:"reconnecting",message:"Connection lost - attempting to reconnect..."}),console.log(`[DatabaseSyncService] Attempting to reconnect with code: ${n}`);try{const r=this.p2pService.getState();if(r.isConnected&&r.peerCount>0)return console.log("[DatabaseSyncService] Already connected, no need to reconnect"),!0;for(let s=1;s<=3;s++){console.log(`[DatabaseSyncService] Reconnection attempt ${s}/3`),s>1&&await new Promise(a=>setTimeout(a,1e3*s));try{await this.p2pService.connect(n);const a=this.p2pService.getState();if(a.isConnected&&a.peerCount>0)return console.log("[DatabaseSyncService] Reconnection successful"),!0}catch(a){console.error(`[DatabaseSyncService] Reconnection attempt ${s} failed:`,a)}}return console.error("[DatabaseSyncService] All reconnection attempts failed"),!1}catch(r){return console.error("[DatabaseSyncService] Error during reconnection:",r),!1}}rejectDataOperation(){console.log("[DatabaseSyncService] rejectDataOperation called, current status:",this.currentProgress.status),this.currentProgress.status==="pending-confirmation"?this.currentProgress.isDataRequest?(console.log("[DatabaseSyncService] Rejecting data request"),this.p2pService.send({type:"db-sync-request-reject",payload:{operationId:this.currentOperationId}})||console.warn("[DatabaseSyncService] Failed to send rejection, but continuing with local state reset")):(console.log("[DatabaseSyncService] Rejecting data send request"),this.p2pService.send({type:"db-sync-send-data-reject",payload:{operationId:this.currentOperationId}})||console.warn("[DatabaseSyncService] Failed to send rejection, but continuing with local state reset")):this.currentProgress.status==="awaiting-confirmation"?console.log("[DatabaseSyncService] Cancelling our own operation while awaiting confirmation"):console.warn("[DatabaseSyncService] rejectDataOperation called when not in expected state"),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"idle",message:"Ready to sync"})}onProgress(n){this.onProgressCallback=n}handleSyncMessage(n){var r,s,a;if(!n||!n.type){console.warn("[DatabaseSyncService] Received malformed message:",n);return}switch(console.log("[DatabaseSyncService] Received message type:",n.type),n.type){case"db-sync-healthcheck":console.log("[DatabaseSyncService] Responding to health check"),this.p2pService.send({type:"db-sync-healthcheck-response"});break;case"db-sync-healthcheck-response":console.log("[DatabaseSyncService] Received health check response");break;case"db-sync-request-data":this.handleDataRequest(n.payload);break;case"db-sync-request-confirm":this.handleDataRequestConfirmation(n.payload);break;case"db-sync-request-reject":this.handleDataRequestRejection(n.payload);break;case"db-sync-send-data-request":this.handleSendDataRequest(n.payload);break;case"db-sync-send-data-confirm":this.handleSendDataConfirmation(n.payload);break;case"db-sync-send-data-reject":this.handleSendDataRejection(n.payload);break;case"db-sync-data":this.handleDirectData(n.payload);break;case"db-sync-chunk":this.handleDataChunk(n);break;case"db-sync-chunk-ack":console.log("[DatabaseSyncService] Received chunk acknowledgment");break;case"db-sync-error":console.error("[DatabaseSyncService] Received error from peer:",(r=n.payload)==null?void 0:r.message),this.updateProgress({percent:0,status:"error",message:`Peer error: ${((s=n.payload)==null?void 0:s.message)||"Unknown error"}`,error:(a=n.payload)==null?void 0:a.message}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval();break;case"db-sync-info":console.log("[DatabaseSyncService] Info from peer:",n.payload);break;default:console.warn("[DatabaseSyncService] Received unknown message type:",n.type)}}handleDataRequest(n){if(console.log("[DatabaseSyncService] Handling data request:",n),this.syncInProgress){console.warn("[DatabaseSyncService] Rejecting data request because sync is already in progress"),this.p2pService.send({type:"db-sync-request-reject",payload:{operationId:n==null?void 0:n.operationId,message:"Sync already in progress"}});return}this.syncInProgress=!0,this.currentOperationId=n==null?void 0:n.operationId,console.log("[DatabaseSyncService] Set up for data request, operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"pending-confirmation",message:"The connected device is requesting your match data",isDataRequest:!0})}handleDataRequestConfirmation(n){if(console.log("[DatabaseSyncService] Handling data request confirmation:",n),(n==null?void 0:n.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received confirmation for unknown operation:",n==null?void 0:n.operationId);return}this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"preparing",message:"Request approved, receiving data..."})}handleDataRequestRejection(n){if(console.log("[DatabaseSyncService] Handling data request rejection:",n),(n==null?void 0:n.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received rejection for unknown operation:",n==null?void 0:n.operationId);return}this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"error",message:"Data request was declined by the other device",error:"Request rejected by peer"}),this.syncInProgress=!1,this.currentOperationId=null}handleSendDataRequest(n){if(console.log("[DatabaseSyncService] Handling send data request:",n),this.syncInProgress){console.warn("[DatabaseSyncService] Rejecting send data request because sync is already in progress"),this.p2pService.send({type:"db-sync-send-data-reject",payload:{operationId:n==null?void 0:n.operationId,message:"Sync already in progress"}});return}this.syncInProgress=!0,this.currentOperationId=n==null?void 0:n.operationId,console.log("[DatabaseSyncService] Set up for send data request, operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"pending-confirmation",message:"The connected device wants to send you match data",isDataRequest:!1})}handleSendDataConfirmation(n){if(console.log("[DatabaseSyncService] Handling send data confirmation:",n),(n==null?void 0:n.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received confirmation for unknown operation:",n==null?void 0:n.operationId);return}this.stopHealthcheckInterval(),this.handleSendDataAfterConfirmation()}handleSendDataRejection(n){if(console.log("[DatabaseSyncService] Handling send data rejection:",n),(n==null?void 0:n.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received rejection for unknown operation:",n==null?void 0:n.operationId);return}this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"error",message:"Your data send was declined by the other device",error:"Send request rejected by peer"}),this.syncInProgress=!1,this.currentOperationId=null}async handleSendDataAfterConfirmation(){console.log("[DatabaseSyncService] Handling send data after confirmation"),this.transferStartTime=Date.now(),this.updateProgress({percent:0,status:"preparing",message:"Preparing database for export"});try{this.chunkRetryCount.clear(),console.log("[DatabaseSyncService] Exporting database data");const n=await Ct.exportData(),r=JSON.stringify(n);console.log(`[DatabaseSyncService] Exported data size: ${this.formatDataSize(r.length)}`),console.log("[DatabaseSyncService] Using chunked transfer for data sending"),await this.sendLargeData(r),setTimeout(()=>{this.syncInProgress=!1,this.currentOperationId=null},3e3)}catch(n){if(console.error("[DatabaseSyncService] Error handling data send:",n),this.p2pService.send({type:"db-sync-error",payload:{message:`Export error: ${n}`}}),this.retryCount<this.maxRetries)if(this.retryCount++,console.log(`[DatabaseSyncService] Retrying entire send operation (${this.retryCount}/${this.maxRetries})`),this.updateProgress({percent:0,status:"reconnecting",message:`Connection issue, retrying entire operation (${this.retryCount}/${this.maxRetries})...`}),await this.performConnectionHealthCheck()){setTimeout(()=>{this.handleSendDataAfterConfirmation()},2e3);return}else console.error("[DatabaseSyncService] Connection health check failed before retry");this.updateProgress({percent:0,status:"error",message:`Error preparing or sending data: ${n}`,error:String(n)}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval()}}async sendLargeData(n){try{const r=Math.ceil(n.length/this.chunkSize);let s=0;console.log(`[DatabaseSyncService] Preparing to send data in ${r} chunks (${this.formatDataSize(n.length)})`),this.updateProgress({percent:10,status:"sending",message:`Preparing to send data in ${r} chunks (${this.formatDataSize(n.length)})`});for(let a=0;a<r;a++){const i=a*this.chunkSize,o=Math.min(n.length,i+this.chunkSize),c=n.substring(i,o);let A=this.chunkRetryCount.get(a)||0,u=!1;for(;!u&&A<this.maxChunkRetries;){console.log(`[DatabaseSyncService] Sending chunk ${a+1}/${r} (attempt ${A+1}/${this.maxChunkRetries})`);try{if(A>0&&!await this.performConnectionHealthCheck())throw console.error(`[DatabaseSyncService] Connection health check failed before sending chunk ${a+1}`),new Error("Connection health check failed");if(!this.p2pService.send({type:"db-sync-chunk",chunkId:a,totalChunks:r,payload:c,isLast:a===r-1}))throw console.error(`[DatabaseSyncService] Failed to send chunk ${a+1}/${r}`),new Error(`Failed to send chunk ${a+1}/${r}`);u=!0,s++,this.updateProgress({percent:10+Math.floor(s/r*80),status:"sending",message:`Sending data: chunk ${s}/${r}`})}catch(h){if(A++,this.chunkRetryCount.set(a,A),console.error(`[DatabaseSyncService] Error sending chunk ${a+1}, attempt ${A}:`,h),A<this.maxChunkRetries){this.updateProgress({percent:10+Math.floor(s/r*80),status:"reconnecting",message:`Retrying chunk ${a+1}/${r} (attempt ${A}/${this.maxChunkRetries})...`});const d=500*A;console.log(`[DatabaseSyncService] Waiting ${d}ms before retry...`),await new Promise(f=>setTimeout(f,d))}else throw console.error(`[DatabaseSyncService] Max retries exceeded for chunk ${a+1}`),new Error(`Failed to send chunk ${a+1} after ${A} attempts`)}}a<r-1&&await new Promise(h=>setTimeout(h,200))}console.log(`[DatabaseSyncService] Successfully sent all ${s} chunks`),this.updateProgress({percent:100,status:"complete",message:`Data sent successfully in ${s} chunks (${this.formatDataSize(n.length)})`})}catch(r){console.error("[DatabaseSyncService] Error sending large data:",r);try{this.p2pService.send({type:"db-sync-error",payload:{message:`Send error: ${r}`}})}catch{}throw r}}async handleDirectData(n){console.log("[DatabaseSyncService] Handling direct data transfer"),this.updateProgress({percent:50,status:"receiving",message:"Received data, processing..."});try{await this.importAndMergeData(n),this.updateProgress({percent:100,status:"complete",message:"Data received and merged successfully"}),setTimeout(()=>{this.syncInProgress=!1,this.currentOperationId=null},3e3)}catch(r){console.error("[DatabaseSyncService] Error handling direct data:",r),this.updateProgress({percent:0,status:"error",message:`Error importing data: ${r}`,error:String(r)}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval()}}handleDataChunk(n){if(n.chunkId===void 0||n.totalChunks===void 0||!n.payload){console.warn("[DatabaseSyncService] Received malformed chunk message");return}console.log(`[DatabaseSyncService] Received chunk ${n.chunkId+1}/${n.totalChunks}`),this.totalExpectedChunks=n.totalChunks,this.receivedChunks.set(n.chunkId,n.payload);const r=Math.floor(this.receivedChunks.size/this.totalExpectedChunks*100);this.updateProgress({percent:r*.8,status:"receiving",message:`Receiving data: ${this.receivedChunks.size}/${this.totalExpectedChunks} chunks`}),this.receivedChunks.size===this.totalExpectedChunks&&(console.log("[DatabaseSyncService] All chunks received, reassembling"),this.reassembleAndProcessChunks())}async reassembleAndProcessChunks(){try{this.updateProgress({percent:80,status:"processing",message:"Reassembling data chunks..."});let n="";for(let s=0;s<this.totalExpectedChunks;s++){const a=this.receivedChunks.get(s);if(!a)throw new Error(`Missing chunk ${s}`);n+=a}console.log(`[DatabaseSyncService] Reassembled data size: ${this.formatDataSize(n.length)}`),console.log("[DatabaseSyncService] Parsing JSON data");const r=JSON.parse(n);this.updateProgress({percent:85,status:"processing",message:"Processing and merging data..."}),await this.importAndMergeData(r),this.updateProgress({percent:100,status:"complete",message:`Data received and merged successfully (${this.formatDataSize(n.length)})`}),this.receivedChunks.clear(),this.totalExpectedChunks=0,setTimeout(()=>{this.syncInProgress=!1,this.currentOperationId=null},3e3)}catch(n){console.error("[DatabaseSyncService] Error reassembling chunks:",n),this.updateProgress({percent:0,status:"error",message:`Error processing received data: ${n}`,error:String(n)}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval(),this.receivedChunks.clear(),this.totalExpectedChunks=0}}async importAndMergeData(n){try{this.validateExportData(n),console.log("[DatabaseSyncService] Importing data with merge mode"),await Ct.importData(n,"merge");const r=((Date.now()-this.transferStartTime)/1e3).toFixed(1);console.log(`[DatabaseSyncService] Data merged successfully in ${r}s`),this.updateProgress({percent:100,status:"complete",message:`Data successfully merged in ${r}s`})}catch(r){throw console.error("[DatabaseSyncService] Error importing data:",r),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval(),r}}validateExportData(n){if(!n)throw new Error("No data received");if(console.log("[DatabaseSyncService] Validating export data structure"),!n.players||!Array.isArray(n.players)||!n.matches||!Array.isArray(n.matches)||!n.matchPlayers||!Array.isArray(n.matchPlayers))throw new Error("Invalid data format: missing required collections");console.log("[DatabaseSyncService] Export data validation passed"),console.log(`[DatabaseSyncService] Data contains: ${n.players.length} players, ${n.matches.length} matches, ${n.matchPlayers.length} match players`)}formatDataSize(n){return n<1024?`${n} bytes`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`}updateProgress(n){console.log(`[DatabaseSyncService] Progress update: ${n.status} - ${n.message}`),this.currentProgress=n,this.onProgressCallback&&this.onProgressCallback(n)}generateOperationId(){return"op_"+Date.now().toString(36)+Math.random().toString(36).substring(2,7)}}const g0={percent:0,status:"idle",message:"Ready to sync"},Dfe=S.createContext({connectionState:{isConnecting:!1,isConnected:!1,error:null,connectionCode:null,isHost:!1,peerCount:0},syncProgress:g0,initAsHost:async()=>"",connect:async()=>{},disconnect:()=>{},sendData:async()=>{},requestData:async()=>{},confirmDataOperation:()=>{},rejectDataOperation:()=>{}}),Rfe=({children:e,onDataReceived:n,onSyncCompleted:r,debug:s=!1})=>{const[a]=S.useState(()=>(console.log("[ConnectionContext] Initializing P2PService"),new Mfe({debug:s,onData:x=>{console.log("[ConnectionContext] Data received from peer"),n&&n(x)}}))),[i]=S.useState(()=>(console.log("[ConnectionContext] Initializing DatabaseSyncService"),new Qfe(a))),[o,c]=S.useState(a.getState()),[A,u]=S.useState(g0),h=S.useCallback(x=>{console.log("[ConnectionContext] Data handler called"),n&&n(x)},[n]);S.useEffect(()=>{console.log("[ConnectionContext] Setting up event handlers");const x=_=>{console.log("[ConnectionContext] Connection state changed:",_.isConnected?"connected":"disconnected",_.isHost?"(host)":"(client)","peers:",_.peerCount),c(_),!_.isConnected&&A.status!=="idle"&&A.status!=="pending-confirmation"&&A.status!=="awaiting-confirmation"&&(console.log("[ConnectionContext] Resetting sync progress due to disconnection"),u(g0))},b=_=>{console.log("[ConnectionContext] Sync progress:",_.status,_.message),u(_)};return a.onConnectionStateChange=x,i.onProgress(b),(()=>{const B=new URLSearchParams(window.location.search).get("connect");if(B){console.log("[ConnectionContext] Found connection code in URL:",B),f(B).catch(N=>{console.error("[ConnectionContext] Failed to connect with URL code:",N)});const k=new URL(window.location.href);k.searchParams.delete("connect"),window.history.replaceState({},document.title,k.toString())}})(),()=>{console.log("[ConnectionContext] Cleanup - removing event handlers"),a&&(a.onConnectionStateChange=null,a.disconnect())}},[a,i,r,h]),S.useEffect(()=>{A.status==="complete"&&r&&(console.log("[ConnectionContext] Sync completed, triggering callback"),setTimeout(()=>{r()},500))},[A.status,r]);const d=async()=>{try{console.log("[ConnectionContext] Initializing as host");const x=await a.initAsHost();return console.log("[ConnectionContext] Host initialized with code:",x),x}catch(x){throw console.error("[ConnectionContext] Error initializing as host:",x),c({...o,isConnecting:!1,error:x instanceof Error?x.message:String(x)}),x}},f=async x=>{try{console.log("[ConnectionContext] Connecting to:",x),await a.connect(x),console.log("[ConnectionContext] Connected successfully")}catch(b){throw console.error("[ConnectionContext] Error connecting:",b),c({...o,isConnecting:!1,error:b instanceof Error?b.message:String(b)}),b}},g=()=>{console.log("[ConnectionContext] Disconnecting"),a.disconnect(),u(g0)},m=async()=>{try{if(console.log("[ConnectionContext] Sending data, connection state:",o.isConnected?"connected":"disconnected","peers:",o.peerCount),!o.isConnected||o.peerCount===0)throw console.error("[ConnectionContext] Cannot send data - not connected or no peers"),new Error("Not connected to any peers. Please reconnect and try again.");await i.sendData()}catch(x){throw console.error("[ConnectionContext] Send data error:",x),u({percent:0,status:"error",message:`Failed to send data: ${x instanceof Error?x.message:String(x)}`,error:String(x)}),x}},y=async()=>{try{if(console.log("[ConnectionContext] Requesting data, connection state:",o.isConnected?"connected":"disconnected","peers:",o.peerCount),!o.isConnected||o.peerCount===0)throw console.error("[ConnectionContext] Cannot request data - not connected or no peers"),new Error("Not connected to any peers. Please reconnect and try again.");await i.requestData()}catch(x){throw console.error("[ConnectionContext] Request data error:",x),u({percent:0,status:"error",message:`Failed to request data: ${x instanceof Error?x.message:String(x)}`,error:String(x)}),x}},v=()=>{if(console.log("[ConnectionContext] Confirming data operation"),!o.isConnected){console.error("[ConnectionContext] Cannot confirm operation - not connected"),u({percent:0,status:"error",message:"Cannot confirm - connection lost. Please reconnect and try again.",error:"Connection lost"});return}i.confirmDataOperation()},p=()=>{console.log("[ConnectionContext] Rejecting data operation"),i.rejectDataOperation()};return l.jsx(Dfe.Provider,{value:{connectionState:o,syncProgress:A,initAsHost:d,connect:f,disconnect:g,sendData:m,requestData:y,confirmDataOperation:v,rejectDataOperation:p},children:e})};class $fe{async signUp(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:s}=await ce.rpc("check_username_available",{check_username:n.username});if(s)return{success:!1,error:"Failed to check username availability"};if(!r)return{success:!1,error:"Username is already taken"};const a=this.validatePassword(n.password);if(a)return{success:!1,error:a};const i=this.validateUsername(n.username);if(i)return{success:!1,error:i};const o=window.location.origin+"/GoA-Timer/",{data:c,error:A}=await ce.auth.signUp({email:n.email,password:n.password,options:{emailRedirectTo:o,data:{username:n.username,display_name:n.displayName||n.username}}});if(A)return{success:!1,error:A.message};if(!c.user)return{success:!1,error:"Failed to create user account"};if(c.user.identities&&c.user.identities.length===0)return{success:!1,error:"An account with this email already exists. Please sign in instead."};const{error:u}=await ce.from("profiles").insert({id:c.user.id,username:n.username,display_name:n.displayName||n.username,device_id:this.getDeviceId()});return u&&console.error("[AuthService] Failed to create profile:",u),{success:!0,user:c.user,session:c.session||void 0}}catch(r){return console.error("[AuthService] Sign up error:",r),{success:!1,error:"An unexpected error occurred"}}}async login(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:s}=await ce.auth.signInWithPassword({email:n.email,password:n.password});return s?{success:!1,error:s.message}:{success:!0,user:r.user,session:r.session}}catch(r){return console.error("[AuthService] Login error:",r),{success:!1,error:"An unexpected error occurred"}}}async logout(){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{error:n}=await ce.auth.signOut();return n?{success:!1,error:n.message}:{success:!0}}catch(n){return console.error("[AuthService] Logout error:",n),{success:!1,error:"An unexpected error occurred"}}}async changePassword(n,r){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const s=await this.getUser();if(!(s!=null&&s.email))return{success:!1,error:"No user logged in"};const a=this.validatePassword(r);if(a)return{success:!1,error:a};const{error:i}=await ce.auth.signInWithPassword({email:s.email,password:n});if(i)return{success:!1,error:"Current password is incorrect"};const{error:o}=await ce.auth.updateUser({password:r});return o?{success:!1,error:o.message}:{success:!0}}catch(s){return console.error("[AuthService] Change password error:",s),{success:!1,error:"An unexpected error occurred"}}}async sendPasswordResetEmail(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};if(!n||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n))return{success:!1,error:"Please enter a valid email address"};try{const r=window.location.origin+"/GoA-Timer/",{error:s}=await ce.auth.resetPasswordForEmail(n,{redirectTo:r});return s&&(console.error("[AuthService] Password reset error:",s),s.message.toLowerCase().includes("rate")||s.message.toLowerCase().includes("limit"))?{success:!1,error:"Too many requests. Please try again later."}:{success:!0}}catch(r){return console.error("[AuthService] Password reset error:",r),{success:!1,error:"An unexpected error occurred"}}}async updatePasswordFromReset(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};const r=this.validatePassword(n);if(r)return{success:!1,error:r};try{const{error:s}=await ce.auth.updateUser({password:n});return s?(console.error("[AuthService] Update password error:",s),{success:!1,error:s.message}):{success:!0}}catch(s){return console.error("[AuthService] Update password error:",s),{success:!1,error:"An unexpected error occurred"}}}async getSession(){if(!st()||!ce)return null;const{data:n}=await ce.auth.getSession();return n.session}async getUser(){if(!st()||!ce)return null;const{data:n}=await ce.auth.getUser();return n.user}async getProfile(){var a,i,o;if(!st()||!ce)return null;const n=await this.getUser();if(!n)return null;const{data:r,error:s}=await ce.from("profiles").select("id, username, display_name, avatar_url, share_stats_with_friends, share_match_history_with_friends").eq("id",n.id).single();if(s||!r){if(console.error("[AuthService] Failed to get profile:",s),(s==null?void 0:s.code)==="PGRST116"){const c=((a=n.user_metadata)==null?void 0:a.username)||((i=n.email)==null?void 0:i.split("@")[0])||"user",{data:A,error:u}=await ce.from("profiles").insert({id:n.id,username:c,display_name:((o=n.user_metadata)==null?void 0:o.display_name)||c,device_id:this.getDeviceId()}).select().single();if(u)return console.error("[AuthService] Failed to create profile:",u),null;if(A)return{id:A.id,username:A.username,displayName:A.display_name,avatarUrl:A.avatar_url,shareStatsWithFriends:A.share_stats_with_friends??!0,shareMatchHistoryWithFriends:A.share_match_history_with_friends??!0}}return null}return{id:r.id,username:r.username,displayName:r.display_name,avatarUrl:r.avatar_url,shareStatsWithFriends:r.share_stats_with_friends,shareMatchHistoryWithFriends:r.share_match_history_with_friends}}async updateProfile(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};const r=await this.getUser();if(!r)return{success:!1,error:"Not authenticated"};const s={};n.displayName!==void 0&&(s.display_name=n.displayName),n.shareStatsWithFriends!==void 0&&(s.share_stats_with_friends=n.shareStatsWithFriends),n.shareMatchHistoryWithFriends!==void 0&&(s.share_match_history_with_friends=n.shareMatchHistoryWithFriends);const{error:a}=await ce.from("profiles").update(s).eq("id",r.id);return a?{success:!1,error:a.message}:{success:!0}}onAuthStateChange(n){if(!st()||!ce)return()=>{};const{data:{subscription:r}}=ce.auth.onAuthStateChange((s,a)=>{n((a==null?void 0:a.user)||null,s)});return()=>r.unsubscribe()}async isUsernameAvailable(n){if(!st()||!ce)return!1;const{data:r,error:s}=await ce.rpc("check_username_available",{check_username:n});return s?(console.error("[AuthService] Username check error:",s),!1):r===!0}validatePassword(n){return n.length<8?"Password must be at least 8 characters long":/[A-Z]/.test(n)?/[a-z]/.test(n)?/[0-9]/.test(n)?null:"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter"}validateUsername(n){return n.length<3?"Username must be at least 3 characters long":n.length>30?"Username must be at most 30 characters long":/^[a-zA-Z0-9_-]+$/.test(n)?null:"Username can only contain letters, numbers, underscores, and hyphens"}async resendConfirmationEmail(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{error:r}=await ce.auth.resend({type:"signup",email:n});return r?{success:!1,error:r.message}:{success:!0}}catch(r){return console.error("[AuthService] Resend confirmation error:",r),{success:!1,error:"An unexpected error occurred"}}}async deleteCloudData(){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};if(!await this.getUser())return{success:!1,error:"Not authenticated"};try{const{data:r,error:s}=await ce.rpc("delete_own_cloud_data");return s?(console.error("[AuthService] Failed to delete cloud data:",s),{success:!1,error:s.message}):r!==!0?{success:!1,error:"Failed to delete cloud data"}:(localStorage.removeItem("cloudSync_lastSync"),{success:!0})}catch(r){return console.error("[AuthService] Delete cloud data error:",r),{success:!1,error:"An unexpected error occurred"}}}async deleteAccount(){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};if(!await this.getUser())return{success:!1,error:"Not authenticated"};try{const{data:r,error:s}=await ce.rpc("delete_own_account");return s?(console.error("[AuthService] Failed to delete account:",s),{success:!1,error:s.message}):r!==!0?{success:!1,error:"Failed to delete account"}:(await ce.auth.signOut(),localStorage.removeItem("cloudSync_lastSync"),localStorage.removeItem("cloudSync_autoEnabled"),{success:!0})}catch(r){return console.error("[AuthService] Delete account error:",r),{success:!1,error:"An unexpected error occurred"}}}getDeviceId(){const n="guards-of-atlantis-device-id";let r=localStorage.getItem(n);if(!r){const s=Date.now().toString(36),a=Math.random().toString(36).substring(2,10);r=`device_${s}_${a}`,localStorage.setItem(n,r)}return r}}const _n=new $fe,XF=S.createContext({user:null,profile:null,isLoading:!0,isConfigured:!1,error:null,isPasswordRecoveryMode:!1,signUp:async()=>({success:!1}),login:async()=>({success:!1}),logout:async()=>{},clearError:()=>{},checkUsernameAvailable:async()=>!1,refreshProfile:async()=>{},updateProfile:async()=>({success:!1}),deleteCloudData:async()=>({success:!1}),deleteAccount:async()=>({success:!1}),changePassword:async()=>({success:!1}),sendPasswordResetEmail:async()=>({success:!1}),updatePasswordFromReset:async()=>({success:!1}),clearPasswordRecoveryMode:()=>{}}),I_=()=>S.useContext(XF),Ofe=({children:e})=>{const[n,r]=S.useState(null),[s,a]=S.useState(null),[i,o]=S.useState(!0),[c,A]=S.useState(null),[u,h]=S.useState(!1),d=st(),f=S.useCallback(async()=>{if(!d)return;const C=await _n.getProfile();a(C)},[d]);S.useEffect(()=>{const j=(()=>{console.log("[AuthContext] Checking URL for recovery..."),console.log("[AuthContext] Full URL:",window.location.href),console.log("[AuthContext] Hash:",window.location.hash),console.log("[AuthContext] Search:",window.location.search);const I=window.location.hash;if(I){const O=new URLSearchParams(I.substring(1)).get("type");if(console.log("[AuthContext] Hash params - type:",O),O==="recovery")return console.log("[AuthContext] Detected recovery from URL hash"),!0}const L=new URLSearchParams(window.location.search).get("type");return console.log("[AuthContext] Query params - type:",L),L==="recovery"?(console.log("[AuthContext] Detected recovery from URL query params"),!0):!1})(),E=async()=>{if(!d){o(!1);return}const I=await _n.getUser();r(I),I&&await f(),o(!1)},F=_n.onAuthStateChange(async(I,T)=>{console.log("[AuthContext] Auth state change - event:",T,"user:",I==null?void 0:I.email),r(I),T==="PASSWORD_RECOVERY"&&(console.log("[AuthContext] PASSWORD_RECOVERY event detected"),h(!0)),I?await f():a(null)});return E(),j&&h(!0),F},[d,f]);const g=S.useCallback(async C=>{A(null);const j=await _n.signUp(C);return!j.success&&j.error?A(j.error):j.success&&await f(),j},[f]),m=S.useCallback(async C=>{A(null);const j=await _n.login(C);return!j.success&&j.error?A(j.error):j.success&&await f(),j},[f]),y=S.useCallback(async()=>{A(null);const C=await _n.logout();!C.success&&C.error?A(C.error):a(null)},[]),v=S.useCallback(()=>A(null),[]),p=S.useCallback(C=>_n.isUsernameAvailable(C),[]),x=S.useCallback(async C=>{const j=await _n.updateProfile(C);return j.success&&await f(),j},[f]),b=S.useCallback(async()=>{A(null);const C=await _n.deleteCloudData();return!C.success&&C.error&&A(C.error),C},[]),w=S.useCallback(async()=>{A(null);const C=await _n.deleteAccount();return!C.success&&C.error?A(C.error):(r(null),a(null)),C},[]),_=S.useCallback(async(C,j)=>{A(null);const E=await _n.changePassword(C,j);return!E.success&&E.error&&A(E.error),E},[]),B=S.useCallback(async C=>{A(null);const j=await _n.sendPasswordResetEmail(C);return!j.success&&j.error&&A(j.error),j},[]),k=S.useCallback(async C=>{A(null);const j=await _n.updatePasswordFromReset(C);return!j.success&&j.error?A(j.error):j.success&&(h(!1),await f()),j},[f]),N=S.useCallback(()=>{h(!1)},[]);return l.jsx(XF.Provider,{value:{user:n,profile:s,isLoading:i,isConfigured:d,error:c,isPasswordRecoveryMode:u,signUp:g,login:m,logout:y,clearError:v,checkUsernameAvailable:p,refreshProfile:f,updateProfile:x,deleteCloudData:b,deleteAccount:w,changePassword:_,sendPasswordResetEmail:B,updatePasswordFromReset:k,clearPasswordRecoveryMode:N},children:e})},YF=S.createContext(void 0),Lfe=({children:e})=>{const[n,r]=S.useState(null),s=S.useCallback(a=>{r(a)},[]);return l.jsx(YF.Provider,{value:{playerStatsFilters:n,setPlayerStatsFilters:s},children:e})},U_=()=>{const e=S.useContext(YF);if(e===void 0)throw new Error("useStatsFilter must be used within a StatsFilterProvider");return e},Hfe=()=>{const{login:e,signUp:n,error:r,clearError:s,isPasswordRecoveryMode:a,sendPasswordResetEmail:i,updatePasswordFromReset:o,clearPasswordRecoveryMode:c}=I_(),{playSound:A}=gt(),[u,h]=S.useState("login"),[d,f]=S.useState(""),[g,m]=S.useState(""),[y,v]=S.useState(""),[p,x]=S.useState(!1),[b,w]=S.useState(!1),[_,B]=S.useState(null),[k,N]=S.useState(!1),[C,j]=S.useState(null),[E,F]=S.useState(!1),[I,T]=S.useState(!1),[L,P]=S.useState(!1),[O,Q]=S.useState(!1),[R,M]=S.useState(""),[G,V]=S.useState("");S.useEffect(()=>{if(u!=="signup"||y.length<3){B(null);return}if(_n.validateUsername(y)){B(null);return}N(!0);const Ce=setTimeout(async()=>{const Fe=await _n.isUsernameAvailable(y);B(Fe),N(!1)},500);return()=>clearTimeout(Ce)},[y,u]);const K=oe=>{A("buttonClick"),h(oe||(u==="login"?"signup":"login")),s(),j(null),B(null),F(!1),P(!1),Q(!1),M(""),V("")},se=()=>{A("buttonClick"),h("forgot-password"),s(),j(null),Q(!1)},de=async oe=>{if(oe.preventDefault(),A("buttonClick"),!d.trim()){j("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)){j("Invalid email format");return}j(null),w(!0);try{(await i(d)).success&&Q(!0)}finally{w(!1)}},ye=async oe=>{oe.preventDefault(),A("buttonClick");const Ce=_n.validatePassword(R);if(Ce){j(Ce);return}if(R!==G){j("Passwords do not match");return}j(null),w(!0);try{(await o(R)).success&&A("phaseChange")}finally{w(!1)}},W=async()=>{A("buttonClick"),T(!0),P(!1),j(null);try{const oe=await _n.resendConfirmationEmail(d);oe.success?P(!0):oe.error&&j(oe.error)}finally{T(!1)}},U=S.useCallback(()=>{if(!d.trim())return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d))return"Invalid email format";if(!g)return"Password is required";if(u==="signup"){if(!y.trim())return"Username is required";const oe=_n.validateUsername(y);if(oe)return oe;const Ce=_n.validatePassword(g);if(Ce)return Ce;if(_===!1)return"Username is already taken"}return null},[d,g,y,u,_]),$=async oe=>{oe.preventDefault(),A("buttonClick");const Ce=U();if(Ce){j(Ce);return}j(null),w(!0);try{if(u==="login")(await e({email:d,password:g})).success&&A("phaseChange");else{const Fe=await n({email:d,password:g,username:y});Fe.success?(A("phaseChange"),F(!0)):Fe.error&&(Fe.error.toLowerCase().includes("already registered")||Fe.error.toLowerCase().includes("already been registered")||Fe.error.toLowerCase().includes("user already registered"))&&j("An account with this email already exists. Please sign in instead.")}}finally{w(!1)}},ne=[{label:"8+ characters",met:g.length>=8},{label:"Uppercase letter",met:/[A-Z]/.test(g)},{label:"Lowercase letter",met:/[a-z]/.test(g)},{label:"Number",met:/[0-9]/.test(g)}],J=[{label:"8+ characters",met:R.length>=8},{label:"Uppercase letter",met:/[A-Z]/.test(R)},{label:"Lowercase letter",met:/[a-z]/.test(R)},{label:"Number",met:/[0-9]/.test(R)}],z=C||r;return a?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(h8,{size:32,className:"text-white"})}),l.jsx("h3",{className:"text-xl font-semibold text-white",children:"Set New Password"}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Enter your new password below"})]}),l.jsxs("form",{onSubmit:ye,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:p?"text":"password",value:R,onChange:oe=>M(oe.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500 pr-10",placeholder:"Create a strong password",disabled:b}),l.jsx("button",{type:"button",onClick:()=>x(!p),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:p?l.jsx(Xu,{size:18}):l.jsx(ol,{size:18})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Confirm Password"}),l.jsx("input",{type:p?"text":"password",value:G,onChange:oe=>V(oe.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"Confirm your password",disabled:b})]}),R.length>0&&l.jsx("div",{className:"grid grid-cols-2 gap-1 text-xs",children:J.map(oe=>l.jsxs("div",{className:`flex items-center ${oe.met?"text-green-500":"text-gray-500"}`,children:[oe.met?l.jsx(lr,{size:12,className:"mr-1"}):l.jsx(Jt,{size:12,className:"mr-1"}),oe.label]},oe.label))}),G.length>0&&l.jsxs("div",{className:`flex items-center text-xs ${R===G?"text-green-500":"text-gray-500"}`,children:[R===G?l.jsx(lr,{size:12,className:"mr-1"}):l.jsx(Jt,{size:12,className:"mr-1"}),"Passwords match"]}),z&&l.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded p-2 text-red-300 text-sm",children:z}),l.jsx("button",{type:"submit",disabled:b,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded transition-colors flex items-center justify-center",children:b?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:18,className:"animate-spin mr-2"}),"Updating password..."]}):"Update Password"})]}),l.jsx("button",{onClick:()=>{c(),K("login")},className:"w-full text-gray-400 hover:text-white text-sm",disabled:b,children:"Cancel"})]}):O?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center py-6",children:[l.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(RB,{size:32,className:"text-white"})}),l.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Check Your Email"}),l.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"If an account exists for this email, we've sent password reset instructions to:"}),l.jsx("p",{className:"text-orange-400 font-medium mb-4",children:d}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Click the link in the email to reset your password. If you don't see it, check your spam folder."})]}),l.jsx("button",{onClick:()=>K("login"),className:"w-full bg-orange-600 hover:bg-orange-500 text-white font-medium py-2 px-4 rounded transition-colors",children:"Back to Sign In"})]}):u==="forgot-password"?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-white",children:"Reset Password"}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Enter your email to receive a reset link"})]}),l.jsxs("form",{onSubmit:de,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:d,onChange:oe=>f(oe.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"you@example.com",disabled:b})]}),z&&l.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded p-2 text-red-300 text-sm",children:z}),l.jsx("button",{type:"submit",disabled:b,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded transition-colors flex items-center justify-center",children:b?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:18,className:"animate-spin mr-2"}),"Sending..."]}):"Send Reset Link"})]}),l.jsx("div",{className:"text-center text-sm text-gray-400",children:l.jsx("button",{onClick:()=>K("login"),className:"text-orange-400 hover:text-orange-300",disabled:b,children:"Back to Sign In"})})]}):E?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center py-6",children:[l.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(RB,{size:32,className:"text-white"})}),l.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Check Your Email"}),l.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"We've sent a confirmation link to:"}),l.jsx("p",{className:"text-orange-400 font-medium mb-4",children:d}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Click the link in the email to activate your account. If you don't see it, check your spam folder."})]}),L&&l.jsx("div",{className:"bg-green-900/50 border border-green-700 rounded p-2 text-green-300 text-sm text-center",children:"Confirmation email resent!"}),C&&l.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded p-2 text-red-300 text-sm text-center",children:C}),l.jsx("button",{onClick:W,disabled:I,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 text-white font-medium py-2 px-4 rounded transition-colors flex items-center justify-center",children:I?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:18,className:"animate-spin mr-2"}),"Sending..."]}):"Resend Confirmation Email"}),l.jsx("button",{onClick:()=>K("login"),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded transition-colors",children:"Back to Sign In"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-white",children:u==="login"?"Welcome Back":"Create Account"}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:u==="login"?"Sign in to sync your data":"Join to sync with friends"})]}),l.jsxs("form",{onSubmit:$,className:"space-y-4",children:[u==="signup"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Username"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:y,onChange:oe=>v(oe.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500 pr-8",placeholder:"Choose a username",disabled:b}),y.length>=3&&l.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:k?l.jsx(Bt,{size:16,className:"animate-spin text-gray-400"}):_===!0?l.jsx(lr,{size:16,className:"text-green-500"}):_===!1?l.jsx(Jt,{size:16,className:"text-red-500"}):null})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"3-30 characters, letters, numbers, _ and - only"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:d,onChange:oe=>f(oe.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"you@example.com",disabled:b})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:p?"text":"password",value:g,onChange:oe=>m(oe.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500 pr-10",placeholder:u==="signup"?"Create a strong password":"Enter your password",disabled:b}),l.jsx("button",{type:"button",onClick:()=>x(!p),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:p?l.jsx(Xu,{size:18}):l.jsx(ol,{size:18})})]})]}),u==="signup"&&g.length>0&&l.jsx("div",{className:"grid grid-cols-2 gap-1 text-xs",children:ne.map(oe=>l.jsxs("div",{className:`flex items-center ${oe.met?"text-green-500":"text-gray-500"}`,children:[oe.met?l.jsx(lr,{size:12,className:"mr-1"}):l.jsx(Jt,{size:12,className:"mr-1"}),oe.label]},oe.label))}),z&&l.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded p-2 text-red-300 text-sm",children:z}),l.jsx("button",{type:"submit",disabled:b||u==="signup"&&_===!1,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded transition-colors flex items-center justify-center",children:b?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:18,className:"animate-spin mr-2"}),u==="login"?"Signing in...":"Creating account..."]}):u==="login"?"Sign In":"Create Account"})]}),l.jsx("div",{className:"text-center text-sm text-gray-400",children:u==="login"?l.jsxs(l.Fragment,{children:["Don't have an account?"," ",l.jsx("button",{onClick:()=>K(),className:"text-orange-400 hover:text-orange-300",disabled:b,children:"Sign up"})]}):l.jsxs(l.Fragment,{children:["Already have an account?"," ",l.jsx("button",{onClick:()=>K(),className:"text-orange-400 hover:text-orange-300",disabled:b,children:"Sign in"})]})}),u==="login"&&l.jsx("div",{className:"text-center pt-2",children:l.jsx("button",{onClick:se,className:"text-gray-400 hover:text-orange-400 text-sm underline",disabled:b,children:"Forgot your password?"})})]})},zfe=()=>{const{user:e,profile:n,logout:r,updateProfile:s,deleteCloudData:a,deleteAccount:i,changePassword:o}=I_(),{playSound:c}=gt(),[A,u]=S.useState(!1),[h,d]=S.useState(!1),[f,g]=S.useState(!1),[m,y]=S.useState(!1),[v,p]=S.useState(!1),[x,b]=S.useState(!1),[w,_]=S.useState(!1),[B,k]=S.useState(!1),[N,C]=S.useState(!1),[j,E]=S.useState(null),[F,I]=S.useState(""),[T,L]=S.useState(""),[P,O]=S.useState(""),[Q,R]=S.useState(!1),[M,G]=S.useState(!1),[V,K]=S.useState(!1),[se,de]=S.useState(null),[ye,W]=S.useState(!1),U=async()=>{c("buttonClick"),y(!0),await r(),y(!1)},$=async()=>{n&&(c("toggleSwitch"),p(!0),await s({shareStatsWithFriends:!n.shareStatsWithFriends}),p(!1))},ne=async()=>{n&&(c("toggleSwitch"),p(!0),await s({shareMatchHistoryWithFriends:!n.shareMatchHistoryWithFriends}),p(!1))},J=async()=>{if(!B){k(!0);return}c("buttonClick"),E(null),b(!0);const Ne=await a();b(!1),k(!1),Ne.success||E(Ne.error||"Failed to delete cloud data")},z=async()=>{if(!N){C(!0);return}c("buttonClick"),E(null),_(!0);const Ne=await i();_(!1),C(!1),Ne.success||E(Ne.error||"Failed to delete account")},oe=()=>{k(!1),C(!1),E(null)},Ce=async()=>{if(de(null),W(!1),T!==P){de("New passwords do not match");return}if(F===T){de("New password must be different from current password");return}c("buttonClick"),K(!0);const Ne=await o(F,T);K(!1),Ne.success?(W(!0),I(""),L(""),O(""),setTimeout(()=>W(!1),3e3)):de(Ne.error||"Failed to change password")},Fe=()=>{I(""),L(""),O(""),de(null),W(!1)};return!e||!n?l.jsx("div",{className:"flex items-center justify-center h-32",children:l.jsx(Bt,{size:24,className:"animate-spin text-orange-400"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center",children:n.avatarUrl?l.jsx("img",{src:n.avatarUrl,alt:n.username,className:"w-full h-full rounded-full object-cover"}):l.jsx(wo,{size:32,className:"text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:n.displayName||n.username}),l.jsxs("p",{className:"text-sm text-gray-400",children:["@",n.username]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.email})]})]})}),l.jsxs("button",{onClick:()=>{c("buttonClick"),u(!A)},className:"w-full flex items-center justify-between bg-gray-800 hover:bg-gray-750 rounded-lg p-3 transition-colors",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(M8,{size:18,className:"text-gray-400 mr-3"}),l.jsx("span",{className:"text-white",children:"Privacy Settings"})]}),l.jsx("span",{className:"text-gray-400",children:A?"":""})]}),A&&l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Mt,{size:16,className:"text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm",children:"Share Stats"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Friends can see your player stats"})]})]}),l.jsx("button",{onClick:$,disabled:v,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${n.shareStatsWithFriends?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[n.shareMatchHistoryWithFriends?l.jsx(ol,{size:16,className:"text-gray-400 mr-2"}):l.jsx(Xu,{size:16,className:"text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm",children:"Share Match History"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Friends can see your matches"})]})]}),l.jsx("button",{onClick:ne,disabled:v,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${n.shareMatchHistoryWithFriends?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})]}),l.jsxs("button",{onClick:()=>{c("buttonClick"),d(!h),h||Fe()},className:"w-full flex items-center justify-between bg-gray-800 hover:bg-gray-750 rounded-lg p-3 transition-colors",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(y8,{size:18,className:"text-gray-400 mr-3"}),l.jsx("span",{className:"text-white",children:"Security"})]}),l.jsx("span",{className:"text-gray-400",children:h?"":""})]}),h&&l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Change Password"}),ye&&l.jsxs("div",{className:"bg-green-900/30 border border-green-700 text-green-300 text-sm p-3 rounded flex items-center",children:[l.jsx(lr,{size:16,className:"mr-2"}),"Password changed successfully!"]}),se&&l.jsx("div",{className:"bg-red-900/30 border border-red-700 text-red-300 text-sm p-3 rounded",children:se}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Current Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:Q?"text":"password",value:F,onChange:Ne=>I(Ne.target.value),disabled:V,className:"w-full bg-gray-700 text-white px-3 py-2 rounded pr-10 text-sm",placeholder:"Enter current password"}),l.jsx("button",{type:"button",onClick:()=>R(!Q),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:Q?l.jsx(Xu,{size:16}):l.jsx(ol,{size:16})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:M?"text":"password",value:T,onChange:Ne=>L(Ne.target.value),disabled:V,className:"w-full bg-gray-700 text-white px-3 py-2 rounded pr-10 text-sm",placeholder:"Enter new password"}),l.jsx("button",{type:"button",onClick:()=>G(!M),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:M?l.jsx(Xu,{size:16}):l.jsx(ol,{size:16})})]}),l.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Minimum 6 characters"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Confirm New Password"}),l.jsx("input",{type:M?"text":"password",value:P,onChange:Ne=>O(Ne.target.value),disabled:V,className:"w-full bg-gray-700 text-white px-3 py-2 rounded text-sm",placeholder:"Confirm new password"})]}),l.jsx("button",{onClick:Ce,disabled:V||!F||!T||!P,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded transition-colors text-sm",children:V?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:14,className:"animate-spin inline mr-2"}),"Changing Password..."]}):"Change Password"})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Account"}),l.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[l.jsxs("p",{children:["User ID: ",e.id.substring(0,8),"..."]}),l.jsxs("p",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]})]}),l.jsxs("button",{onClick:()=>{c("buttonClick"),g(!f),oe()},className:"w-full flex items-center justify-between bg-gray-800 hover:bg-gray-750 rounded-lg p-3 transition-colors",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(ho,{size:18,className:"text-gray-400 mr-3"}),l.jsx("span",{className:"text-white",children:"Account Management"})]}),l.jsx("span",{className:"text-gray-400",children:f?"":""})]}),f&&l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4 border border-red-900/30",children:[j&&l.jsx("div",{className:"bg-red-900/30 border border-red-700 text-red-300 text-sm p-3 rounded",children:j}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(ho,{size:16,className:"text-red-500 mr-2 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Delete Cloud Data"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Remove all your synced players, matches, and stats from the cloud. Your local data will remain intact. Anyone who has already synced your data will still retain their copy."})]})]}),B?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:J,disabled:x,className:"flex-1 bg-red-700 hover:bg-red-600 disabled:bg-gray-600 text-white text-sm py-2 px-3 rounded transition-colors",children:x?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:14,className:"animate-spin inline mr-1"}),"Deleting..."]}):"Yes, Delete My Data"}),l.jsx("button",{onClick:oe,disabled:x,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:"Cancel"})]}):l.jsx("button",{onClick:J,className:"w-full bg-gray-700 hover:bg-red-700 text-red-400 hover:text-white text-sm py-2 px-3 rounded transition-colors",children:"Delete Cloud Data"})]}),l.jsx("div",{className:"border-t border-gray-700 my-2"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(ho,{size:16,className:"text-red-500 mr-2 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Delete Account"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Permanently delete your account, all cloud data, and friend connections. This action cannot be undone."})]})]}),N?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:z,disabled:w,className:"flex-1 bg-red-700 hover:bg-red-600 disabled:bg-gray-600 text-white text-sm py-2 px-3 rounded transition-colors",children:w?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:14,className:"animate-spin inline mr-1"}),"Deleting..."]}):"Yes, Delete My Account"}),l.jsx("button",{onClick:oe,disabled:w,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:"Cancel"})]}):l.jsx("button",{onClick:z,className:"w-full bg-gray-700 hover:bg-red-700 text-red-400 hover:text-white text-sm py-2 px-3 rounded transition-colors",children:"Delete Account"})]})]}),l.jsx("button",{onClick:U,disabled:m,className:"w-full flex items-center justify-center bg-red-700 hover:bg-red-600 disabled:bg-gray-600 text-white font-medium py-2 px-4 rounded transition-colors",children:m?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:18,className:"animate-spin mr-2"}),"Signing out..."]}):l.jsxs(l.Fragment,{children:[l.jsx(x8,{size:18,className:"mr-2"}),"Sign Out"]})})]})};class Kfe{constructor(){ve(this,"realtimeChannel",null)}async searchUsers(n){if(!st()||!ce||n.length<2)return[];try{const{data:r,error:s}=await ce.rpc("search_users",{search_query:n});return s?(console.error("[FriendService] Search error:",s),[]):(r||[]).map(a=>({id:a.id,username:a.username,displayName:a.display_name,avatarUrl:a.avatar_url}))}catch(r){return console.error("[FriendService] Search error:",r),[]}}async sendFriendRequest(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{data:s}=await ce.from("friends").select("id").eq("user_id",r.id).eq("friend_id",n).single();if(s)return{success:!1,error:"Already friends with this user"};const{error:a}=await ce.from("friend_requests").insert({from_user_id:r.id,to_user_id:n,status:"pending"});return a?a.code==="23505"?{success:!1,error:"Friend request already sent"}:{success:!1,error:a.message}:{success:!0}}catch(r){return console.error("[FriendService] Send request error:",r),{success:!1,error:"An unexpected error occurred"}}}async getPendingRequests(){if(!st()||!ce)return[];try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return[];const{data:r,error:s}=await ce.from("friend_requests").select(`
          id,
          from_user_id,
          to_user_id,
          status,
          created_at,
          from_user:profiles!friend_requests_from_user_id_fkey (
            id, username, display_name, avatar_url
          )
        `).eq("to_user_id",n.id).eq("status","pending").order("created_at",{ascending:!1});return s?(console.error("[FriendService] Get requests error:",s),[]):(r||[]).map(a=>{const i=Array.isArray(a.from_user)?a.from_user[0]:a.from_user;return{id:a.id,fromUserId:a.from_user_id,toUserId:a.to_user_id,status:a.status,createdAt:new Date(a.created_at),fromUser:i?{id:i.id,username:i.username,displayName:i.display_name,avatarUrl:i.avatar_url}:void 0}})}catch(n){return console.error("[FriendService] Get requests error:",n),[]}}async getSentRequests(){if(!st()||!ce)return[];try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return[];const{data:r,error:s}=await ce.from("friend_requests").select(`
          id,
          from_user_id,
          to_user_id,
          status,
          created_at,
          to_user:profiles!friend_requests_to_user_id_fkey (
            id, username, display_name, avatar_url
          )
        `).eq("from_user_id",n.id).eq("status","pending").order("created_at",{ascending:!1});return s?(console.error("[FriendService] Get sent requests error:",s),[]):(r||[]).map(a=>{const i=Array.isArray(a.to_user)?a.to_user[0]:a.to_user;return{id:a.id,fromUserId:a.from_user_id,toUserId:a.to_user_id,status:a.status,createdAt:new Date(a.created_at),toUser:i?{id:i.id,username:i.username,displayName:i.display_name,avatarUrl:i.avatar_url}:void 0}})}catch(n){return console.error("[FriendService] Get sent requests error:",n),[]}}async acceptRequest(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:s}=await ce.rpc("accept_friend_request",{request_id:n});return s?{success:!1,error:s.message}:{success:r===!0}}catch(r){return console.error("[FriendService] Accept request error:",r),{success:!1,error:"An unexpected error occurred"}}}async rejectRequest(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:s}=await ce.from("friend_requests").update({status:"rejected",responded_at:new Date().toISOString()}).eq("id",n).eq("to_user_id",r.id);return s?{success:!1,error:s.message}:{success:!0}}catch(r){return console.error("[FriendService] Reject request error:",r),{success:!1,error:"An unexpected error occurred"}}}async cancelRequest(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:s}=await ce.from("friend_requests").delete().eq("id",n).eq("from_user_id",r.id);return s?{success:!1,error:s.message}:{success:!0}}catch(r){return console.error("[FriendService] Cancel request error:",r),{success:!1,error:"An unexpected error occurred"}}}async getFriends(){if(!st()||!ce)return[];try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return[];const{data:r,error:s}=await ce.from("friends").select(`
          id,
          created_at,
          friend:profiles!friends_friend_id_fkey (
            id, username, display_name, avatar_url
          )
        `).eq("user_id",n.id).order("created_at",{ascending:!1});return s?(console.error("[FriendService] Get friends error:",s),[]):(r||[]).map(a=>{const i=Array.isArray(a.friend)?a.friend[0]:a.friend;return{id:a.id,createdAt:new Date(a.created_at),friendProfile:{id:i.id,username:i.username,displayName:i.display_name,avatarUrl:i.avatar_url}}})}catch(n){return console.error("[FriendService] Get friends error:",n),[]}}async removeFriend(n){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:s}=await ce.from("friends").delete().eq("user_id",r.id).eq("friend_id",n),{error:a}=await ce.from("friends").delete().eq("user_id",n).eq("friend_id",r.id);return s||a?{success:!1,error:(s==null?void 0:s.message)||(a==null?void 0:a.message)}:{success:!0}}catch(r){return console.error("[FriendService] Remove friend error:",r),{success:!1,error:"An unexpected error occurred"}}}subscribeToRequests(n,r){return!st()||!ce?()=>{}:(this.realtimeChannel=ce.channel("friend_requests_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"friend_requests"},s=>{const a=this.mapRequestFromPayload(s.new);a&&n(a)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"friend_requests"},s=>{const a=this.mapRequestFromPayload(s.new);a&&r(a)}).subscribe(),()=>{this.realtimeChannel&&(ce==null||ce.removeChannel(this.realtimeChannel),this.realtimeChannel=null)})}mapRequestFromPayload(n){return n?{id:n.id,fromUserId:n.from_user_id,toUserId:n.to_user_id,status:n.status,createdAt:new Date(n.created_at)}:null}}const ja=new Kfe,Gfe=({pendingRequests:e,sentRequests:n,onAction:r})=>{const{playSound:s}=gt(),[a,i]=S.useState(null),o=async h=>{s("buttonClick"),i(h),(await ja.acceptRequest(h)).success&&(s("phaseChange"),r()),i(null)},c=async h=>{s("buttonClick"),i(h),await ja.rejectRequest(h),r(),i(null)},A=async h=>{s("buttonClick"),i(h),await ja.cancelRequest(h),r(),i(null)},u=h=>{const d=Math.floor((Date.now()-h.getTime())/1e3);if(d<60)return"just now";const f=Math.floor(d/60);if(f<60)return`${f}m ago`;const g=Math.floor(f/60);return g<24?`${g}h ago`:`${Math.floor(g/24)}d ago`};return l.jsxs("div",{className:"space-y-4 bg-gray-800 rounded-lg p-3",children:[e.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2 flex items-center",children:[l.jsx(Lr,{size:14,className:"mr-1"}),"Received (",e.length,")"]}),l.jsx("div",{className:"space-y-2",children:e.map(h=>{var d,f,g;return l.jsxs("div",{className:"flex items-center justify-between bg-gray-900 rounded p-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-sm font-semibold text-gray-400",children:((d=h.fromUser)==null?void 0:d.username.charAt(0).toUpperCase())||"?"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm",children:((f=h.fromUser)==null?void 0:f.displayName)||((g=h.fromUser)==null?void 0:g.username)||"Unknown"}),l.jsx("p",{className:"text-gray-500 text-xs",children:u(h.createdAt)})]})]}),l.jsx("div",{className:"flex space-x-1",children:a===h.id?l.jsx(Bt,{size:16,className:"animate-spin text-gray-400"}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>o(h.id),className:"p-1.5 bg-green-600 hover:bg-green-500 text-white rounded transition-colors",title:"Accept",children:l.jsx(lr,{size:14})}),l.jsx("button",{onClick:()=>c(h.id),className:"p-1.5 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",title:"Reject",children:l.jsx(Jt,{size:14})})]})})]},h.id)})})]}),n.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2 flex items-center",children:[l.jsx(U8,{size:14,className:"mr-1"}),"Sent (",n.length,")"]}),l.jsx("div",{className:"space-y-2",children:n.map(h=>{var d,f,g;return l.jsxs("div",{className:"flex items-center justify-between bg-gray-900 rounded p-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-sm font-semibold text-gray-400",children:((d=h.toUser)==null?void 0:d.username.charAt(0).toUpperCase())||"?"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm",children:((f=h.toUser)==null?void 0:f.displayName)||((g=h.toUser)==null?void 0:g.username)||"Unknown"}),l.jsxs("p",{className:"text-gray-500 text-xs flex items-center",children:[l.jsx(Lr,{size:10,className:"mr-1"}),"Pending - ",u(h.createdAt)]})]})]}),a===h.id?l.jsx(Bt,{size:16,className:"animate-spin text-gray-400"}):l.jsx("button",{onClick:()=>A(h.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-gray-800 rounded transition-colors",title:"Cancel request",children:l.jsx(Jt,{size:14})})]},h.id)})})]}),e.length===0&&n.length===0&&l.jsx("p",{className:"text-gray-500 text-sm text-center py-2",children:"No pending requests"})]})},Wfe=({onClose:e,onRequestSent:n,existingFriendIds:r,pendingRequestIds:s})=>{const{playSound:a}=gt(),i=S.useRef(null),o=S.useRef(null),[c,A]=S.useState(""),[u,h]=S.useState([]),[d,f]=S.useState(!1),[g,m]=S.useState(null),[y,v]=S.useState(new Set),[p,x]=S.useState(null);S.useEffect(()=>{var _;(_=o.current)==null||_.focus()},[]),S.useEffect(()=>{const _=B=>{i.current&&!i.current.contains(B.target)&&e()};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[e]),S.useEffect(()=>{const _=B=>{B.key==="Escape"&&e()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[e]),S.useEffect(()=>{if(c.length<2){h([]);return}f(!0);const _=setTimeout(async()=>{const B=await ja.searchUsers(c);h(B),f(!1)},300);return()=>clearTimeout(_)},[c]);const b=async _=>{a("buttonClick"),x(null),m(_);const B=await ja.sendFriendRequest(_);B.success?(a("phaseChange"),v(new Set([...y,_])),n()):x(B.error||"Failed to send request"),m(null)},w=_=>{const B=r.includes(_.id),k=s.includes(_.id),N=y.has(_.id),C=g===_.id;return B?l.jsxs("span",{className:"text-green-500 text-xs flex items-center",children:[l.jsx(lr,{size:14,className:"mr-1"}),"Friends"]}):k||N?l.jsxs("span",{className:"text-orange-400 text-xs flex items-center",children:[l.jsx(lr,{size:14,className:"mr-1"}),"Pending"]}):C?l.jsx(Bt,{size:16,className:"animate-spin text-orange-400"}):l.jsx("button",{onClick:()=>b(_.id),className:"p-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded transition-colors",title:"Send friend request",children:l.jsx(Z3,{size:16})})};return l.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{ref:i,className:"bg-gray-900 rounded-lg w-full max-w-md shadow-xl",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Find Friends"}),l.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-800 rounded transition-colors",children:l.jsx(Jt,{size:20,className:"text-gray-400"})})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(kl,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),l.jsx("input",{ref:o,type:"text",value:c,onChange:_=>A(_.target.value),placeholder:"Search by username...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white focus:outline-none focus:border-orange-500"}),d&&l.jsx(Bt,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin text-orange-400"})]}),p&&l.jsx("div",{className:"mt-2 bg-red-900/50 border border-red-700 rounded p-2",children:l.jsx("p",{className:"text-red-300 text-sm",children:p})})]}),l.jsx("div",{className:"max-h-64 overflow-y-auto",children:c.length<2?l.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"Type at least 2 characters to search"}):u.length===0&&!d?l.jsxs("p",{className:"text-gray-500 text-sm text-center py-8",children:['No users found matching "',c,'"']}):l.jsx("div",{className:"px-4 pb-4 space-y-2",children:u.map(_=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-800 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center",children:_.avatarUrl?l.jsx("img",{src:_.avatarUrl,alt:_.username,className:"w-full h-full rounded-full object-cover"}):l.jsx("span",{className:"text-lg font-semibold text-gray-400",children:_.username.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:_.displayName||_.username}),l.jsxs("p",{className:"text-gray-500 text-xs",children:["@",_.username]})]})]}),w(_)]},_.id))})}),l.jsx("div",{className:"p-4 border-t border-gray-800",children:l.jsx("button",{onClick:e,className:"w-full bg-gray-700 hover:bg-gray-600 text-white py-2 rounded transition-colors",children:"Close"})})]})})},Vfe=({onPendingCountChange:e})=>{const{playSound:n}=gt(),[r,s]=S.useState([]),[a,i]=S.useState([]),[o,c]=S.useState([]),[A,u]=S.useState(!0),[h,d]=S.useState(!1),[f,g]=S.useState(!1),[m,y]=S.useState(""),[v,p]=S.useState(null),[x,b]=S.useState(null),[w,_]=S.useState(mr.getFriendSyncPreferences()),B=S.useCallback(async()=>{u(!0);try{const[I,T,L]=await Promise.all([ja.getFriends(),ja.getPendingRequests(),ja.getSentRequests()]);s(I),i(T),c(L),e==null||e(T.length)}catch(I){console.error("[FriendsPanel] Load error:",I)}finally{u(!1)}},[e]);S.useEffect(()=>(B(),ja.subscribeToRequests(()=>B(),()=>B())),[B]);const k=async I=>{n("buttonClick"),p(I),(await ja.removeFriend(I)).success&&s(r.filter(L=>L.friendProfile.id!==I)),p(null)},N=I=>{var P;n("toggleSwitch");const L=!(((P=w[I])==null?void 0:P.autoSync)??!1);mr.setFriendSyncPreference(I,L),_({...w,[I]:{autoSync:L}})},C=I=>{var T;return((T=w[I])==null?void 0:T.autoSync)??!1},j=async I=>{n("buttonClick"),b(I),await mr.syncFromFriends([I]),b(null)},E=async()=>{await B()},F=r.filter(I=>{var T;return I.friendProfile.username.toLowerCase().includes(m.toLowerCase())||((T=I.friendProfile.displayName)==null?void 0:T.toLowerCase().includes(m.toLowerCase()))});return A?l.jsx("div",{className:"flex items-center justify-center h-32",children:l.jsx(Bt,{size:24,className:"animate-spin text-orange-400"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[l.jsx(St,{size:20,className:"mr-2"}),"Friends (",r.length,")"]}),l.jsx("button",{onClick:()=>{n("buttonClick"),d(!0)},className:"bg-orange-600 hover:bg-orange-500 text-white p-2 rounded transition-colors",title:"Add Friend",children:l.jsx(Z3,{size:18})})]}),(a.length>0||o.length>0)&&l.jsxs("button",{onClick:()=>{n("buttonClick"),g(!f)},className:"w-full flex items-center justify-between bg-orange-900/50 hover:bg-orange-900/70 border border-orange-700 rounded-lg p-3 transition-colors",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(f$,{size:18,className:"text-orange-400 mr-2"}),l.jsxs("span",{className:"text-white",children:["Friend Requests",a.length>0&&l.jsxs("span",{className:"ml-2 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:[a.length," new"]})]})]}),f?l.jsx(_r,{size:18,className:"text-gray-400"}):l.jsx(Dn,{size:18,className:"text-gray-400"})]}),f&&l.jsx(Gfe,{pendingRequests:a,sentRequests:o,onAction:E}),r.length>0&&l.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx(Ai,{size:16,className:"text-yellow-500 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-xs text-yellow-200/80",children:[l.jsx("p",{className:"font-medium text-yellow-200 mb-1",children:"About Auto-Sync"}),l.jsxs("p",{children:["Enabling auto-sync (",l.jsx(xo,{size:12,className:"inline text-orange-400"}),") for a friend means any matches they add or changes they make will automatically be applied to your account. Only enable this for friends you trust. You can manually download friend data instead for more control."]})]})]})}),r.length>3&&l.jsxs("div",{className:"relative",children:[l.jsx(kl,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",value:m,onChange:I=>y(I.target.value),placeholder:"Search friends...",className:"w-full bg-gray-800 border border-gray-700 rounded pl-9 pr-3 py-2 text-white text-sm focus:outline-none focus:border-orange-500"})]}),l.jsx("div",{className:"space-y-2",children:F.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(St,{size:48,className:"mx-auto text-gray-600 mb-3"}),l.jsx("p",{className:"text-gray-400",children:r.length===0?"No friends yet":"No friends match your search"}),r.length===0&&l.jsx("button",{onClick:()=>{n("buttonClick"),d(!0)},className:"mt-3 text-orange-400 hover:text-orange-300 text-sm",children:"Add your first friend"})]}):F.map(I=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-800 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center",children:I.friendProfile.avatarUrl?l.jsx("img",{src:I.friendProfile.avatarUrl,alt:I.friendProfile.username,className:"w-full h-full rounded-full object-cover"}):l.jsx("span",{className:"text-lg font-semibold text-gray-400",children:I.friendProfile.username.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:I.friendProfile.displayName||I.friendProfile.username}),l.jsxs("p",{className:"text-gray-500 text-xs",children:["@",I.friendProfile.username]})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{onClick:()=>j(I.friendProfile.id),disabled:x===I.friendProfile.id,className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-gray-700 rounded transition-colors disabled:opacity-50",title:"Sync from this friend",children:x===I.friendProfile.id?l.jsx(Bt,{size:16,className:"animate-spin"}):l.jsx(J0,{size:16})}),l.jsx("button",{onClick:()=>N(I.friendProfile.id),className:`p-2 rounded transition-colors ${C(I.friendProfile.id)?"text-orange-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-700 hover:text-gray-400"}`,title:C(I.friendProfile.id)?"Auto-sync enabled (click to disable)":"Auto-sync disabled (click to enable)",children:l.jsx(xo,{size:16})}),l.jsx("button",{onClick:()=>k(I.friendProfile.id),disabled:v===I.friendProfile.id,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-gray-700 rounded transition-colors",title:"Remove friend",children:v===I.friendProfile.id?l.jsx(Bt,{size:16,className:"animate-spin"}):l.jsx(aO,{size:16})})]})]},I.id))}),h&&l.jsx(Wfe,{onClose:()=>d(!1),onRequestSent:B,existingFriendIds:r.map(I=>I.friendProfile.id),pendingRequestIds:[...a.map(I=>I.fromUserId),...o.map(I=>I.toUserId)]})]})},qfe=()=>{const{playSound:e}=gt(),[n,r]=S.useState(mr.getStatus()),[s,a]=S.useState(mr.isAutoUploadEnabled()),[i,o]=S.useState(mr.isAutoSyncOwnDevicesEnabled()),[c,A]=S.useState(mr.getLastSyncTime()),[u,h]=S.useState(mr.getLastOwnSyncTime());S.useEffect(()=>mr.onStatusChange(w=>{r(w),w.lastSyncAt&&A(w.lastSyncAt)}),[]);const d=async()=>{e("buttonClick"),await mr.uploadLocalData()},f=async()=>{e("buttonClick"),(await mr.downloadOwnCloudData()).success&&h(new Date)},g=()=>{e("toggleSwitch");const b=!s;a(b),mr.setAutoUpload(b)},m=()=>{e("toggleSwitch");const b=!i;o(b),mr.setAutoSyncOwnDevices(b)},y=b=>{if(!b)return"Never";const w=Math.floor((Date.now()-b.getTime())/1e3);if(w<60)return"Just now";const _=Math.floor(w/60);if(_<60)return`${_} min ago`;const B=Math.floor(_/60);return B<24?`${B} hours ago`:b.toLocaleDateString()},v=["uploading","downloading","merging"].includes(n.status),p=()=>{switch(n.status){case"uploading":return l.jsx(rg,{size:18,className:"animate-pulse text-orange-400"});case"downloading":return l.jsx(J0,{size:18,className:"animate-pulse text-orange-400"});case"merging":return l.jsx(xo,{size:18,className:"animate-spin text-orange-400"});case"complete":return l.jsx(lr,{size:18,className:"text-green-500"});case"error":return l.jsx(_s,{size:18,className:"text-red-500"});default:return l.jsx(Lr,{size:18,className:"text-gray-400"})}},x=()=>{switch(n.status){case"uploading":case"downloading":case"merging":return"text-orange-400";case"complete":return"text-green-500";case"error":return"text-red-500";default:return"text-gray-400"}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Sync Status"}),p()]}),l.jsx("p",{className:`text-sm font-medium ${x()}`,children:n.message}),v&&l.jsxs("div",{className:"mt-3",children:[l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:l.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${n.progress}%`}})}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[n.progress,"%"]})]}),n.error&&l.jsx("div",{className:"mt-3 bg-red-900/50 border border-red-700 rounded p-2",children:l.jsx("p",{className:"text-red-300 text-xs",children:n.error})}),l.jsxs("div",{className:"mt-3 flex items-center text-xs text-gray-500",children:[l.jsx(Lr,{size:12,className:"mr-1"}),"Last sync: ",y(c)]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:d,disabled:v,className:"w-full flex items-center justify-center bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded transition-colors",children:n.status==="uploading"?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:18,className:"animate-spin mr-2"}),"Uploading..."]}):l.jsxs(l.Fragment,{children:[l.jsx(rg,{size:18,className:"mr-2"}),"Upload My Data"]})}),l.jsx("button",{onClick:f,disabled:v,className:"w-full flex items-center justify-center bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded transition-colors",children:n.status==="downloading"?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:18,className:"animate-spin mr-2"}),"Downloading..."]}):l.jsxs(l.Fragment,{children:[l.jsx(J0,{size:18,className:"mr-2"}),"Download My Data"]})}),l.jsxs("div",{className:"flex items-center text-xs text-gray-500 px-1",children:[l.jsx(Lr,{size:12,className:"mr-1"}),"Last download from other devices: ",y(u)]})]}),l.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Auto-Upload"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Automatically upload data when you record matches"})]}),l.jsx("button",{onClick:g,disabled:v,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${s?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})}),l.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Auto-Sync Devices"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Automatically download data from your other devices"})]}),l.jsx("button",{onClick:m,disabled:v,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${i?"bg-blue-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})}),l.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Upload:"})," Sends your local match data to the cloud."]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Download:"})," Gets your data from other devices you own."]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Auto-Upload:"})," Uploads after recording matches."]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Auto-Sync Devices:"})," Downloads when other devices upload."]}),l.jsx("p",{className:"text-gray-600 mt-2",children:"To sync from friends, go to the Friends tab."})]})]})},Xfe=({link:e,index:n,onUpdate:r,onDelete:s,onExpire:a})=>{const{playSound:i}=gt(),[o,c]=S.useState(!1),[A,u]=S.useState(!1),[h,d]=S.useState(!1),[f,g]=S.useState(!1),[m,y]=S.useState(!1),v=!e.isActive||e.expiresAt&&new Date(e.expiresAt)<new Date,p=async()=>{i("buttonClick");const j=ra.getShareUrl(e.shareToken);try{await navigator.clipboard.writeText(j),c(!0),setTimeout(()=>c(!1),2e3)}catch(E){console.error("Failed to copy:",E)}},x=async()=>{if(v&&!e.isActive)return;i("toggleSwitch"),y(!0);const j=await ra.updateShareLink(e.id,{isActive:!e.isActive});j.success&&j.shareLink&&r(j.shareLink),y(!1)},b=async()=>{i("buttonClick"),d(!1),a(e.id)},w=async()=>{i("buttonClick"),g(!1),s(e.id)},_=j=>j===0?"No views":j===1?"1 view":`${j} views`,B=j=>{if(!j)return"Never";const F=new Date().getTime()-j.getTime(),I=Math.floor(F/6e4),T=Math.floor(F/36e5),L=Math.floor(F/864e5);return I<1?"Just now":I<60?`${I}m ago`:T<24?`${T}h ago`:`${L}d ago`},N=(()=>{if(!e.expiresAt)return{text:"Never expires",isExpired:!1,isWarning:!1};const j=new Date(e.expiresAt),E=new Date;if(j<E)return{text:"Expired",isExpired:!0,isWarning:!1};const F=j.getTime()-E.getTime(),I=Math.floor(F/36e5),T=Math.floor(F/864e5);return T>0?{text:`Expires in ${T}d`,isExpired:!1,isWarning:T<=1}:I>0?{text:`Expires in ${I}h`,isExpired:!1,isWarning:!0}:{text:`Expires in ${Math.floor(F/6e4)}m`,isExpired:!1,isWarning:!0}})(),C=e.label||`Link ${n+1}`;return l.jsxs("div",{className:`bg-gray-800 rounded-lg border ${v?"border-gray-700 opacity-75":"border-gray-700"}`,children:[l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-white font-medium",children:C}),e.isAnonymized&&l.jsxs("span",{className:"text-xs bg-purple-600/30 text-purple-300 px-2 py-0.5 rounded flex items-center gap-1",children:[l.jsx(qb,{size:12}),"Anonymous"]}),v&&l.jsx("span",{className:"text-xs bg-red-600/30 text-red-300 px-2 py-0.5 rounded",children:e.isActive?"Expired":"Inactive"})]}),l.jsx("button",{onClick:()=>u(!A),className:"text-gray-400 hover:text-white transition-colors p-1",children:A?l.jsx(_r,{size:18}):l.jsx(Dn,{size:18})})]}),!v&&l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("div",{className:"flex-1 bg-gray-900 rounded px-3 py-2 overflow-hidden",children:l.jsx("code",{className:"text-xs text-green-400 truncate block",children:ra.getShareUrl(e.shareToken)})}),l.jsx("button",{onClick:p,className:"flex items-center gap-1 text-sm text-orange-400 hover:text-orange-300 transition-colors px-3 py-2 bg-gray-900 rounded",children:o?l.jsxs(l.Fragment,{children:[l.jsx(lr,{size:14}),"Copied"]}):l.jsxs(l.Fragment,{children:[l.jsx(O$,{size:14}),"Copy"]})})]}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(ol,{size:14}),_(e.viewCount)]}),l.jsxs("div",{children:["Last viewed: ",B(e.lastViewedAt)]})]}),l.jsxs("div",{className:`flex items-center gap-1 ${N.isExpired?"text-red-400":N.isWarning?"text-yellow-400":"text-gray-500"}`,children:[l.jsx(Lr,{size:14}),N.text]})]})]}),A&&l.jsxs("div",{className:"border-t border-gray-700 p-4 space-y-3",children:[!v&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-white",children:"Active"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Link can be accessed by others"})]}),l.jsx("button",{onClick:x,disabled:m,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${e.isActive?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]}),!v&&l.jsx("div",{children:h?l.jsxs("div",{className:"bg-red-900/20 border border-red-800 rounded p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-300 text-sm mb-2",children:[l.jsx(_s,{size:16}),l.jsx("span",{children:"This action cannot be undone"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:b,className:"flex-1 bg-red-600 hover:bg-red-700 text-white text-sm py-2 rounded transition-colors",children:"Expire Now"}),l.jsx("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-sm py-2 rounded transition-colors",children:"Cancel"})]})]}):l.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 text-red-400 hover:text-red-300 text-sm py-2 border border-red-800/50 hover:border-red-700 rounded transition-colors",children:[l.jsx(U$,{size:16}),"Expire This Link"]})}),l.jsx("div",{children:f?l.jsxs("div",{className:"bg-red-900/20 border border-red-800 rounded p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-300 text-sm mb-2",children:[l.jsx(_s,{size:16}),l.jsx("span",{children:"Delete this link permanently?"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:w,className:"flex-1 bg-red-600 hover:bg-red-700 text-white text-sm py-2 rounded transition-colors",children:"Delete"}),l.jsx("button",{onClick:()=>g(!1),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white text-sm py-2 rounded transition-colors",children:"Cancel"})]})]}):l.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 text-gray-400 hover:text-red-400 text-sm py-2 border border-gray-700 hover:border-red-800/50 rounded transition-colors",children:[l.jsx(ho,{size:16}),"Delete Link"]})})]})]})},Yfe=()=>{const{playSound:e}=gt(),[n,r]=S.useState([]),[s,a]=S.useState(!0),[i,o]=S.useState(null),[c,A]=S.useState(!1),[u,h]=S.useState(!1),[d,f]=S.useState(""),[g,m]=S.useState("never"),[y,v]=S.useState(""),[p,x]=S.useState(!1);S.useEffect(()=>{(async()=>{a(!0);const F=await ra.getMyShareLinks();r(F),a(!1)})()},[]);const b=()=>{const E=new Date;switch(g){case"never":return;case"1day":return new Date(E.getTime()+24*60*60*1e3);case"7days":return new Date(E.getTime()+7*24*60*60*1e3);case"30days":return new Date(E.getTime()+30*24*60*60*1e3);case"custom":return y?new Date(y):void 0;default:return}},w=async()=>{e("buttonClick"),h(!0),o(null);const E={label:d.trim()||void 0,expiresAt:b(),isAnonymized:p},F=await ra.createShareLink(E);F.success&&F.shareLink?(r(I=>[...I,F.shareLink]),A(!1),_()):o(F.error||"Failed to create share link"),h(!1)},_=()=>{f(""),m("never"),v(""),x(!1)},B=E=>{r(F=>F.map(I=>I.id===E.id?E:I))},k=async E=>{const F=await ra.expireShareLink(E);if(F.success){const I=await ra.getMyShareLinks();r(I)}else o(F.error||"Failed to expire link")},N=async E=>{const F=await ra.deleteShareLink(E);F.success?r(I=>I.filter(T=>T.id!==E)):o(F.error||"Failed to delete link")},C=n.length<3,j=()=>{const E=new Date;return E.setDate(E.getDate()+1),E.toISOString().split("T")[0]};return s?l.jsx("div",{className:"flex items-center justify-center h-32",children:l.jsx(Bt,{size:24,className:"animate-spin text-orange-400"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx(zx,{size:20,className:"text-orange-400 mr-2"}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Public Sharing"})]}),l.jsx("p",{className:"text-sm text-gray-400",children:"Create shareable links that let anyone view your stats. You can have up to 3 active share links with different settings."})]}),i&&l.jsxs("div",{className:"bg-red-900/30 border border-red-700 text-red-300 text-sm p-3 rounded flex items-center",children:[l.jsx(_s,{size:16,className:"mr-2 flex-shrink-0"}),i,l.jsx("button",{onClick:()=>o(null),className:"ml-auto text-red-400 hover:text-red-300",children:l.jsx(Jt,{size:16})})]}),n.length>0?l.jsx("div",{className:"space-y-4",children:n.map((E,F)=>l.jsx(Xfe,{link:E,index:F,onUpdate:B,onDelete:N,onExpire:k},E.id))}):l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 text-center",children:[l.jsx(zx,{size:32,className:"text-gray-600 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"No share links yet"}),l.jsx("p",{className:"text-gray-500 text-sm",children:"Create a share link to let others view your stats"})]}),l.jsxs("button",{onClick:()=>{e("buttonClick"),A(!0)},disabled:!C,className:`w-full flex items-center justify-center gap-2 py-3 rounded-lg font-medium transition-colors ${C?"bg-orange-600 hover:bg-orange-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:[l.jsx(ns,{size:18}),C?"Create New Share Link":"Maximum Links Reached (3/3)"]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"What viewers can see:"}),l.jsxs("ul",{className:"text-sm text-gray-500 space-y-1",children:[l.jsxs("li",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Player statistics and rankings"]}),l.jsxs("li",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Match history and results"]}),l.jsxs("li",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Hero performance stats"]})]}),l.jsx("p",{className:"text-xs text-gray-600 mt-3",children:"Viewers cannot modify your data. You can expire or delete links at any time."})]}),c&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-md w-full p-6 shadow-xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Create Share Link"}),l.jsx("button",{onClick:()=>{A(!1),_()},className:"text-gray-400 hover:text-white transition-colors",children:l.jsx(Jt,{size:20})})]}),l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Label (optional)"}),l.jsx("input",{type:"text",value:d,onChange:E=>f(E.target.value),placeholder:"e.g., Friends, Discord, Public",maxLength:50,className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:[l.jsx(ks,{size:14,className:"inline mr-1"}),"Expiration"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[{value:"never",label:"Never"},{value:"1day",label:"1 Day"},{value:"7days",label:"7 Days"},{value:"30days",label:"30 Days"}].map(E=>l.jsx("button",{onClick:()=>m(E.value),className:`py-2 px-3 rounded text-sm font-medium transition-colors ${g===E.value?"bg-orange-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:E.label},E.value))}),l.jsx("button",{onClick:()=>m("custom"),className:`w-full py-2 px-3 rounded text-sm font-medium transition-colors ${g==="custom"?"bg-orange-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Custom Date"}),g==="custom"&&l.jsx("input",{type:"date",value:y,onChange:E=>v(E.target.value),min:j(),className:"w-full mt-2 bg-gray-900 border border-gray-700 rounded-lg px-3 py-2 text-white focus:outline-none focus:border-orange-500"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qb,{size:16,className:"text-purple-400"}),l.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Anonymize Players"})]}),l.jsx("button",{onClick:()=>x(!p),className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${p?"bg-purple-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-start gap-1",children:[l.jsx(qt,{size:12,className:"mt-0.5 flex-shrink-0"}),'Player names will be shown as "Player 1", "Player 2", etc. Your display name will still be visible.']})]})]}),l.jsxs("div",{className:"flex gap-3 mt-6",children:[l.jsx("button",{onClick:()=>{A(!1),_()},className:"flex-1 py-2 px-4 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors",children:"Cancel"}),l.jsx("button",{onClick:w,disabled:u||g==="custom"&&!y,className:"flex-1 py-2 px-4 bg-orange-600 hover:bg-orange-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:u?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:16,className:"animate-spin"}),"Creating..."]}):"Create Link"})]})]})})]})},Jfe=()=>{const{user:e,isConfigured:n,isLoading:r,isPasswordRecoveryMode:s}=I_(),{playSound:a}=gt(),[i,o]=S.useState(()=>{const g=localStorage.getItem("cloudSidebar_collapsed");return g!==null?g==="true":!0}),[c,A]=S.useState("login"),[u,h]=S.useState(0);S.useEffect(()=>{localStorage.setItem("cloudSidebar_collapsed",String(i))},[i]),S.useEffect(()=>{s?A("login"):e&&c==="login"?A("profile"):!e&&c!=="login"&&A("login")},[e,c,s]);const d=()=>{a("buttonClick"),o(!i)},f=g=>{a("buttonClick"),A(g)};return n?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:d,className:`fixed top-20 z-40 p-2 rounded-l-lg transition-all duration-300 ${i?"right-0":"right-80"} bg-orange-600 hover:bg-orange-500 text-white shadow-lg`,"aria-label":i?"Open cloud panel":"Close cloud panel",children:i?l.jsxs(l.Fragment,{children:[l.jsx(jn,{size:20}),u>0&&l.jsx("span",{className:"absolute -top-1 -left-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center font-bold",children:u>9?"9+":u})]}):l.jsx(jd,{size:20})}),l.jsxs("div",{className:`fixed top-0 right-0 h-full w-80 bg-gray-900 shadow-xl z-40 transform transition-transform duration-300 flex flex-col ${i?"translate-x-full":"translate-x-0"}`,children:[l.jsxs("div",{className:"bg-orange-600 p-4 flex items-center justify-between flex-shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold text-white flex items-center",children:[l.jsx(D$,{size:20,className:"mr-2"}),"Cloud Sync"]}),l.jsx("button",{onClick:d,className:"p-1 hover:bg-orange-500 rounded transition-colors","aria-label":"Close panel",children:l.jsx(Jt,{size:20,className:"text-white"})})]}),e&&!r&&l.jsxs("div",{className:"flex border-b border-gray-700 flex-shrink-0",children:[l.jsx("button",{onClick:()=>f("profile"),className:`flex-1 p-3 flex items-center justify-center transition-colors ${c==="profile"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Profile",children:l.jsx(wo,{size:18})}),l.jsxs("button",{onClick:()=>f("friends"),className:`flex-1 p-3 flex items-center justify-center relative transition-colors ${c==="friends"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Friends",children:[l.jsx(St,{size:18}),u>0&&l.jsx("span",{className:"absolute top-1 right-4 w-4 h-4 bg-red-500 rounded-full text-xs flex items-center justify-center font-bold",children:u>9?"9+":u})]}),l.jsx("button",{onClick:()=>f("sync"),className:`flex-1 p-3 flex items-center justify-center transition-colors ${c==="sync"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Sync",children:l.jsx(xo,{size:18})}),l.jsx("button",{onClick:()=>f("share"),className:`flex-1 p-3 flex items-center justify-center transition-colors ${c==="share"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Share",children:l.jsx(zx,{size:18})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r?l.jsx("div",{className:"flex items-center justify-center h-32",children:l.jsx(xo,{size:24,className:"animate-spin text-orange-400"})}):!e||s?l.jsx(Hfe,{}):l.jsxs(l.Fragment,{children:[c==="profile"&&l.jsx(zfe,{}),c==="friends"&&l.jsx(Vfe,{onPendingCountChange:h}),c==="sync"&&l.jsx(qfe,{}),c==="share"&&l.jsx(Yfe,{})]})})]})]}):null},Zfe=({expiredAt:e,onGoHome:n})=>{const r=s=>s.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return l.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 to-gray-900 flex items-center justify-center p-6",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-md w-full text-center shadow-xl border border-gray-700",children:[l.jsx("div",{className:"mb-6",children:l.jsx("div",{className:"w-20 h-20 mx-auto bg-orange-600/20 rounded-full flex items-center justify-center",children:l.jsx(Lr,{size:40,className:"text-orange-400"})})}),l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"This Link Has Expired"}),l.jsx("p",{className:"text-gray-400 mb-4",children:"The share link you're trying to access is no longer available."}),e&&l.jsxs("p",{className:"text-gray-500 text-sm mb-6 bg-gray-900/50 rounded p-3",children:["Expired on: ",r(e)]}),l.jsx("p",{className:"text-gray-500 text-sm mb-8",children:"If you believe this is an error, please contact the person who shared this link with you to request a new one."}),l.jsxs("button",{onClick:n,className:"w-full bg-orange-600 hover:bg-orange-700 text-white py-3 px-6 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[l.jsx(Y3,{size:18}),"Go to Home"]})]})})},e0e=()=>{const{isViewMode:e,ownerDisplayName:n,sharedData:r,isLoading:s,error:a,isExpired:i,expiredAt:o,exitViewMode:c}=ph(),A=u=>{const h=new Date,d=u.getTime()-h.getTime(),f=Math.floor(d/(1e3*60*60*24));if(f>7)return u.toLocaleDateString(void 0,{month:"short",day:"numeric"});if(f>0)return`${f}d`;{const g=Math.floor(d/36e5);if(g>0)return`${g}h`;const m=Math.floor(d/(1e3*60));return`${Math.max(1,m)}m`}};return s?l.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-blue-600 text-white py-2 px-4 shadow-lg",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-center",children:[l.jsx(Bt,{size:18,className:"animate-spin mr-2"}),l.jsx("span",{className:"text-sm font-medium",children:"Loading shared stats..."})]})}):i?l.jsx(Zfe,{expiredAt:o,onGoHome:c}):a&&!i?l.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-red-600 text-white py-2 px-4 shadow-lg",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(_s,{size:18,className:"mr-2"}),l.jsx("span",{className:"text-sm font-medium",children:a})]}),l.jsxs("button",{onClick:c,className:"flex items-center bg-red-700 hover:bg-red-800 px-3 py-1 rounded text-sm font-medium transition-colors",children:[l.jsx(Jt,{size:16,className:"mr-1"}),"Go Back"]})]})}):e?l.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-blue-600 text-white py-2 px-4 shadow-lg",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(ol,{size:18,className:"mr-2"}),l.jsxs("span",{className:"text-sm font-medium",children:["Viewing ",l.jsx("span",{className:"font-bold",children:n}),"'s Stats"]})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-xs bg-blue-700 px-2 py-0.5 rounded",children:"Read-only"}),(r==null?void 0:r.expiresAt)&&l.jsxs("span",{className:"text-xs bg-blue-700 px-2 py-0.5 rounded flex items-center gap-1",children:[l.jsx(Lr,{size:12}),"Expires: ",A(r.expiresAt)]}),(r==null?void 0:r.isAnonymized)&&l.jsxs("span",{className:"text-xs bg-purple-600 px-2 py-0.5 rounded flex items-center gap-1",children:[l.jsx(qb,{size:12}),"Anonymised"]})]})]}),l.jsxs("button",{onClick:c,className:"flex items-center bg-blue-700 hover:bg-blue-800 px-3 py-1 rounded text-sm font-medium transition-colors",children:[l.jsx(Jt,{size:16,className:"mr-1"}),"Exit"]})]})}):null},t0e=e=>+e;function n0e(e){return e*e}function r0e(e){return e*(2-e)}function SS(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function s0e(e){return e*e*e}function a0e(e){return--e*e*e+1}function g1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var P_=3,i0e=function e(n){n=+n;function r(s){return Math.pow(s,n)}return r.exponent=e,r}(P_),o0e=function e(n){n=+n;function r(s){return 1-Math.pow(1-s,n)}return r.exponent=e,r}(P_),kS=function e(n){n=+n;function r(s){return((s*=2)<=1?Math.pow(s,n):2-Math.pow(2-s,n))/2}return r.exponent=e,r}(P_),JF=Math.PI,ZF=JF/2;function l0e(e){return+e==1?1:1-Math.cos(e*ZF)}function c0e(e){return Math.sin(e*ZF)}function jS(e){return(1-Math.cos(JF*e))/2}function bo(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function A0e(e){return bo(1-+e)}function u0e(e){return 1-bo(e)}function NS(e){return((e*=2)<=1?bo(1-e):2-bo(e-1))/2}function d0e(e){return 1-Math.sqrt(1-e*e)}function h0e(e){return Math.sqrt(1- --e*e)}function ES(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var m1=4/11,f0e=6/11,g0e=8/11,m0e=3/4,p0e=9/11,y0e=10/11,v0e=15/16,x0e=21/22,w0e=63/64,ff=1/m1/m1;function b0e(e){return 1-Rd(1-e)}function Rd(e){return(e=+e)<m1?ff*e*e:e<g0e?ff*(e-=f0e)*e+m0e:e<y0e?ff*(e-=p0e)*e+v0e:ff*(e-=x0e)*e+w0e}function _0e(e){return((e*=2)<=1?1-Rd(1-e):Rd(e-1)+1)/2}var M_=1.70158,C0e=function e(n){n=+n;function r(s){return(s=+s)*s*(n*(s-1)+s)}return r.overshoot=e,r}(M_),B0e=function e(n){n=+n;function r(s){return--s*s*((s+1)*n+s)+1}return r.overshoot=e,r}(M_),TS=function e(n){n=+n;function r(s){return((s*=2)<1?s*s*((n+1)*s-n):(s-=2)*s*((n+1)*s+n)+2)/2}return r.overshoot=e,r}(M_),uA=2*Math.PI,Q_=1,D_=.3,S0e=function e(n,r){var s=Math.asin(1/(n=Math.max(1,n)))*(r/=uA);function a(i){return n*bo(- --i)*Math.sin((s-i)/r)}return a.amplitude=function(i){return e(i,r*uA)},a.period=function(i){return e(n,i)},a}(Q_,D_),FS=function e(n,r){var s=Math.asin(1/(n=Math.max(1,n)))*(r/=uA);function a(i){return 1-n*bo(i=+i)*Math.sin((i+s)/r)}return a.amplitude=function(i){return e(i,r*uA)},a.period=function(i){return e(n,i)},a}(Q_,D_),k0e=function e(n,r){var s=Math.asin(1/(n=Math.max(1,n)))*(r/=uA);function a(i){return((i=i*2-1)<0?n*bo(-i)*Math.sin((s-i)/r):2-n*bo(i)*Math.sin((s+i)/r))/2}return a.amplitude=function(i){return e(i,r*uA)},a.period=function(i){return e(n,i)},a}(Q_,D_);const j0e=Object.freeze(Object.defineProperty({__proto__:null,easeBack:TS,easeBackIn:C0e,easeBackInOut:TS,easeBackOut:B0e,easeBounce:Rd,easeBounceIn:b0e,easeBounceInOut:_0e,easeBounceOut:Rd,easeCircle:ES,easeCircleIn:d0e,easeCircleInOut:ES,easeCircleOut:h0e,easeCubic:g1,easeCubicIn:s0e,easeCubicInOut:g1,easeCubicOut:a0e,easeElastic:FS,easeElasticIn:S0e,easeElasticInOut:k0e,easeElasticOut:FS,easeExp:NS,easeExpIn:A0e,easeExpInOut:NS,easeExpOut:u0e,easeLinear:t0e,easePoly:kS,easePolyIn:i0e,easePolyInOut:kS,easePolyOut:o0e,easeQuad:SS,easeQuadIn:n0e,easeQuadInOut:SS,easeQuadOut:r0e,easeSin:jS,easeSinIn:l0e,easeSinInOut:jS,easeSinOut:c0e},Symbol.toStringTag,{value:"Module"}));var N0e=typeof oi=="object"&&oi&&oi.Object===Object&&oi,eI=N0e,E0e=eI,T0e=typeof self=="object"&&self&&self.Object===Object&&self,F0e=E0e||T0e||Function("return this")(),Ii=F0e,I0e=Ii,U0e=I0e.Symbol,yh=U0e,IS=yh,tI=Object.prototype,P0e=tI.hasOwnProperty,M0e=tI.toString,tu=IS?IS.toStringTag:void 0;function Q0e(e){var n=P0e.call(e,tu),r=e[tu];try{e[tu]=void 0;var s=!0}catch{}var a=M0e.call(e);return s&&(n?e[tu]=r:delete e[tu]),a}var D0e=Q0e,R0e=Object.prototype,$0e=R0e.toString;function O0e(e){return $0e.call(e)}var L0e=O0e,US=yh,H0e=D0e,z0e=L0e,K0e="[object Null]",G0e="[object Undefined]",PS=US?US.toStringTag:void 0;function W0e(e){return e==null?e===void 0?G0e:K0e:PS&&PS in Object(e)?H0e(e):z0e(e)}var Pl=W0e;function V0e(e,n){return function(r){return e(n(r))}}var nI=V0e,q0e=nI,X0e=q0e(Object.getPrototypeOf,Object),rI=X0e;function Y0e(e){return e!=null&&typeof e=="object"}var Ml=Y0e,J0e=Pl,Z0e=rI,ege=Ml,tge="[object Object]",nge=Function.prototype,rge=Object.prototype,sI=nge.toString,sge=rge.hasOwnProperty,age=sI.call(Object);function ige(e){if(!ege(e)||J0e(e)!=tge)return!1;var n=Z0e(e);if(n===null)return!0;var r=sge.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&sI.call(r)==age}var oge=ige;const Us=en(oge);function lge(e,n){for(var r=-1,s=e==null?0:e.length,a=Array(s);++r<s;)a[r]=n(e[r],r,e);return a}var R_=lge,cge=Array.isArray,Rs=cge,Age=Pl,uge=Ml,dge="[object Symbol]";function hge(e){return typeof e=="symbol"||uge(e)&&Age(e)==dge}var sp=hge,fge=Rs,gge=sp,mge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pge=/^\w*$/;function yge(e,n){if(fge(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||gge(e)?!0:pge.test(e)||!mge.test(e)||n!=null&&e in Object(n)}var $_=yge;function vge(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Ql=vge;const p1=en(Ql);var xge=Pl,wge=Ql,bge="[object AsyncFunction]",_ge="[object Function]",Cge="[object GeneratorFunction]",Bge="[object Proxy]";function Sge(e){if(!wge(e))return!1;var n=xge(e);return n==_ge||n==Cge||n==bge||n==Bge}var aI=Sge,kge=Ii,jge=kge["__core-js_shared__"],Nge=jge,Jy=Nge,MS=function(){var e=/[^.]+$/.exec(Jy&&Jy.keys&&Jy.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Ege(e){return!!MS&&MS in e}var Tge=Ege,Fge=Function.prototype,Ige=Fge.toString;function Uge(e){if(e!=null){try{return Ige.call(e)}catch{}try{return e+""}catch{}}return""}var iI=Uge,Pge=aI,Mge=Tge,Qge=Ql,Dge=iI,Rge=/[\\^$.*+?()[\]{}|]/g,$ge=/^\[object .+?Constructor\]$/,Oge=Function.prototype,Lge=Object.prototype,Hge=Oge.toString,zge=Lge.hasOwnProperty,Kge=RegExp("^"+Hge.call(zge).replace(Rge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gge(e){if(!Qge(e)||Mge(e))return!1;var n=Pge(e)?Kge:$ge;return n.test(Dge(e))}var Wge=Gge;function Vge(e,n){return e==null?void 0:e[n]}var qge=Vge,Xge=Wge,Yge=qge;function Jge(e,n){var r=Yge(e,n);return Xge(r)?r:void 0}var Dl=Jge,Zge=Dl,eme=Zge(Object,"create"),ap=eme,QS=ap;function tme(){this.__data__=QS?QS(null):{},this.size=0}var nme=tme;function rme(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var sme=rme,ame=ap,ime="__lodash_hash_undefined__",ome=Object.prototype,lme=ome.hasOwnProperty;function cme(e){var n=this.__data__;if(ame){var r=n[e];return r===ime?void 0:r}return lme.call(n,e)?n[e]:void 0}var Ame=cme,ume=ap,dme=Object.prototype,hme=dme.hasOwnProperty;function fme(e){var n=this.__data__;return ume?n[e]!==void 0:hme.call(n,e)}var gme=fme,mme=ap,pme="__lodash_hash_undefined__";function yme(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=mme&&n===void 0?pme:n,this}var vme=yme,xme=nme,wme=sme,bme=Ame,_me=gme,Cme=vme;function EA(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var s=e[n];this.set(s[0],s[1])}}EA.prototype.clear=xme;EA.prototype.delete=wme;EA.prototype.get=bme;EA.prototype.has=_me;EA.prototype.set=Cme;var Bme=EA;function Sme(){this.__data__=[],this.size=0}var kme=Sme;function jme(e,n){return e===n||e!==e&&n!==n}var TA=jme,Nme=TA;function Eme(e,n){for(var r=e.length;r--;)if(Nme(e[r][0],n))return r;return-1}var ip=Eme,Tme=ip,Fme=Array.prototype,Ime=Fme.splice;function Ume(e){var n=this.__data__,r=Tme(n,e);if(r<0)return!1;var s=n.length-1;return r==s?n.pop():Ime.call(n,r,1),--this.size,!0}var Pme=Ume,Mme=ip;function Qme(e){var n=this.__data__,r=Mme(n,e);return r<0?void 0:n[r][1]}var Dme=Qme,Rme=ip;function $me(e){return Rme(this.__data__,e)>-1}var Ome=$me,Lme=ip;function Hme(e,n){var r=this.__data__,s=Lme(r,e);return s<0?(++this.size,r.push([e,n])):r[s][1]=n,this}var zme=Hme,Kme=kme,Gme=Pme,Wme=Dme,Vme=Ome,qme=zme;function FA(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var s=e[n];this.set(s[0],s[1])}}FA.prototype.clear=Kme;FA.prototype.delete=Gme;FA.prototype.get=Wme;FA.prototype.has=Vme;FA.prototype.set=qme;var op=FA,Xme=Dl,Yme=Ii,Jme=Xme(Yme,"Map"),O_=Jme,DS=Bme,Zme=op,epe=O_;function tpe(){this.size=0,this.__data__={hash:new DS,map:new(epe||Zme),string:new DS}}var npe=tpe;function rpe(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var spe=rpe,ape=spe;function ipe(e,n){var r=e.__data__;return ape(n)?r[typeof n=="string"?"string":"hash"]:r.map}var lp=ipe,ope=lp;function lpe(e){var n=ope(this,e).delete(e);return this.size-=n?1:0,n}var cpe=lpe,Ape=lp;function upe(e){return Ape(this,e).get(e)}var dpe=upe,hpe=lp;function fpe(e){return hpe(this,e).has(e)}var gpe=fpe,mpe=lp;function ppe(e,n){var r=mpe(this,e),s=r.size;return r.set(e,n),this.size+=r.size==s?0:1,this}var ype=ppe,vpe=npe,xpe=cpe,wpe=dpe,bpe=gpe,_pe=ype;function IA(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var s=e[n];this.set(s[0],s[1])}}IA.prototype.clear=vpe;IA.prototype.delete=xpe;IA.prototype.get=wpe;IA.prototype.has=bpe;IA.prototype.set=_pe;var L_=IA,oI=L_,Cpe="Expected a function";function H_(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(Cpe);var r=function(){var s=arguments,a=n?n.apply(this,s):s[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,s);return r.cache=i.set(a,o)||i,o};return r.cache=new(H_.Cache||oI),r}H_.Cache=oI;var lI=H_;const cI=en(lI);var Bpe=lI,Spe=500;function kpe(e){var n=Bpe(e,function(s){return r.size===Spe&&r.clear(),s}),r=n.cache;return n}var jpe=kpe,Npe=jpe,Epe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tpe=/\\(\\)?/g,Fpe=Npe(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Epe,function(r,s,a,i){n.push(a?i.replace(Tpe,"$1"):s||r)}),n}),Ipe=Fpe,RS=yh,Upe=R_,Ppe=Rs,Mpe=sp,Qpe=1/0,$S=RS?RS.prototype:void 0,OS=$S?$S.toString:void 0;function AI(e){if(typeof e=="string")return e;if(Ppe(e))return Upe(e,AI)+"";if(Mpe(e))return OS?OS.call(e):"";var n=e+"";return n=="0"&&1/e==-Qpe?"-0":n}var Dpe=AI,Rpe=Dpe;function $pe(e){return e==null?"":Rpe(e)}var uI=$pe,Ope=Rs,Lpe=$_,Hpe=Ipe,zpe=uI;function Kpe(e,n){return Ope(e)?e:Lpe(e,n)?[e]:Hpe(zpe(e))}var cp=Kpe,Gpe=sp,Wpe=1/0;function Vpe(e){if(typeof e=="string"||Gpe(e))return e;var n=e+"";return n=="0"&&1/e==-Wpe?"-0":n}var vh=Vpe,qpe=cp,Xpe=vh;function Ype(e,n){n=qpe(n,e);for(var r=0,s=n.length;e!=null&&r<s;)e=e[Xpe(n[r++])];return r&&r==s?e:void 0}var Ap=Ype,Jpe=op;function Zpe(){this.__data__=new Jpe,this.size=0}var eye=Zpe;function tye(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}var nye=tye;function rye(e){return this.__data__.get(e)}var sye=rye;function aye(e){return this.__data__.has(e)}var iye=aye,oye=op,lye=O_,cye=L_,Aye=200;function uye(e,n){var r=this.__data__;if(r instanceof oye){var s=r.__data__;if(!lye||s.length<Aye-1)return s.push([e,n]),this.size=++r.size,this;r=this.__data__=new cye(s)}return r.set(e,n),this.size=r.size,this}var dye=uye,hye=op,fye=eye,gye=nye,mye=sye,pye=iye,yye=dye;function UA(e){var n=this.__data__=new hye(e);this.size=n.size}UA.prototype.clear=fye;UA.prototype.delete=gye;UA.prototype.get=mye;UA.prototype.has=pye;UA.prototype.set=yye;var dI=UA,vye="__lodash_hash_undefined__";function xye(e){return this.__data__.set(e,vye),this}var wye=xye;function bye(e){return this.__data__.has(e)}var _ye=bye,Cye=L_,Bye=wye,Sye=_ye;function Ag(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new Cye;++n<r;)this.add(e[n])}Ag.prototype.add=Ag.prototype.push=Bye;Ag.prototype.has=Sye;var hI=Ag;function kye(e,n){for(var r=-1,s=e==null?0:e.length;++r<s;)if(n(e[r],r,e))return!0;return!1}var jye=kye;function Nye(e,n){return e.has(n)}var fI=Nye,Eye=hI,Tye=jye,Fye=fI,Iye=1,Uye=2;function Pye(e,n,r,s,a,i){var o=r&Iye,c=e.length,A=n.length;if(c!=A&&!(o&&A>c))return!1;var u=i.get(e),h=i.get(n);if(u&&h)return u==n&&h==e;var d=-1,f=!0,g=r&Uye?new Eye:void 0;for(i.set(e,n),i.set(n,e);++d<c;){var m=e[d],y=n[d];if(s)var v=o?s(y,m,d,n,e,i):s(m,y,d,e,n,i);if(v!==void 0){if(v)continue;f=!1;break}if(g){if(!Tye(n,function(p,x){if(!Fye(g,x)&&(m===p||a(m,p,r,s,i)))return g.push(x)})){f=!1;break}}else if(!(m===y||a(m,y,r,s,i))){f=!1;break}}return i.delete(e),i.delete(n),f}var gI=Pye,Mye=Ii,Qye=Mye.Uint8Array,Dye=Qye;function Rye(e){var n=-1,r=Array(e.size);return e.forEach(function(s,a){r[++n]=[a,s]}),r}var $ye=Rye;function Oye(e){var n=-1,r=Array(e.size);return e.forEach(function(s){r[++n]=s}),r}var z_=Oye,LS=yh,HS=Dye,Lye=TA,Hye=gI,zye=$ye,Kye=z_,Gye=1,Wye=2,Vye="[object Boolean]",qye="[object Date]",Xye="[object Error]",Yye="[object Map]",Jye="[object Number]",Zye="[object RegExp]",eve="[object Set]",tve="[object String]",nve="[object Symbol]",rve="[object ArrayBuffer]",sve="[object DataView]",zS=LS?LS.prototype:void 0,Zy=zS?zS.valueOf:void 0;function ave(e,n,r,s,a,i,o){switch(r){case sve:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case rve:return!(e.byteLength!=n.byteLength||!i(new HS(e),new HS(n)));case Vye:case qye:case Jye:return Lye(+e,+n);case Xye:return e.name==n.name&&e.message==n.message;case Zye:case tve:return e==n+"";case Yye:var c=zye;case eve:var A=s&Gye;if(c||(c=Kye),e.size!=n.size&&!A)return!1;var u=o.get(e);if(u)return u==n;s|=Wye,o.set(e,n);var h=Hye(c(e),c(n),s,a,i,o);return o.delete(e),h;case nve:if(Zy)return Zy.call(e)==Zy.call(n)}return!1}var ive=ave;function ove(e,n){for(var r=-1,s=n.length,a=e.length;++r<s;)e[a+r]=n[r];return e}var K_=ove,lve=K_,cve=Rs;function Ave(e,n,r){var s=n(e);return cve(e)?s:lve(s,r(e))}var mI=Ave;function uve(e,n){for(var r=-1,s=e==null?0:e.length,a=0,i=[];++r<s;){var o=e[r];n(o,r,e)&&(i[a++]=o)}return i}var dve=uve;function hve(){return[]}var pI=hve,fve=dve,gve=pI,mve=Object.prototype,pve=mve.propertyIsEnumerable,KS=Object.getOwnPropertySymbols,yve=KS?function(e){return e==null?[]:(e=Object(e),fve(KS(e),function(n){return pve.call(e,n)}))}:gve,yI=yve;function vve(e,n){for(var r=-1,s=Array(e);++r<e;)s[r]=n(r);return s}var xve=vve,wve=Pl,bve=Ml,_ve="[object Arguments]";function Cve(e){return bve(e)&&wve(e)==_ve}var Bve=Cve,GS=Bve,Sve=Ml,vI=Object.prototype,kve=vI.hasOwnProperty,jve=vI.propertyIsEnumerable,Nve=GS(function(){return arguments}())?GS:function(e){return Sve(e)&&kve.call(e,"callee")&&!jve.call(e,"callee")},up=Nve,ug={exports:{}};function Eve(){return!1}var Tve=Eve;ug.exports;(function(e,n){var r=Ii,s=Tve,a=n&&!n.nodeType&&n,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,c=o?r.Buffer:void 0,A=c?c.isBuffer:void 0,u=A||s;e.exports=u})(ug,ug.exports);var G_=ug.exports,Fve=9007199254740991,Ive=/^(?:0|[1-9]\d*)$/;function Uve(e,n){var r=typeof e;return n=n??Fve,!!n&&(r=="number"||r!="symbol"&&Ive.test(e))&&e>-1&&e%1==0&&e<n}var dp=Uve,Pve=9007199254740991;function Mve(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Pve}var W_=Mve,Qve=Pl,Dve=W_,Rve=Ml,$ve="[object Arguments]",Ove="[object Array]",Lve="[object Boolean]",Hve="[object Date]",zve="[object Error]",Kve="[object Function]",Gve="[object Map]",Wve="[object Number]",Vve="[object Object]",qve="[object RegExp]",Xve="[object Set]",Yve="[object String]",Jve="[object WeakMap]",Zve="[object ArrayBuffer]",exe="[object DataView]",txe="[object Float32Array]",nxe="[object Float64Array]",rxe="[object Int8Array]",sxe="[object Int16Array]",axe="[object Int32Array]",ixe="[object Uint8Array]",oxe="[object Uint8ClampedArray]",lxe="[object Uint16Array]",cxe="[object Uint32Array]",Ot={};Ot[txe]=Ot[nxe]=Ot[rxe]=Ot[sxe]=Ot[axe]=Ot[ixe]=Ot[oxe]=Ot[lxe]=Ot[cxe]=!0;Ot[$ve]=Ot[Ove]=Ot[Zve]=Ot[Lve]=Ot[exe]=Ot[Hve]=Ot[zve]=Ot[Kve]=Ot[Gve]=Ot[Wve]=Ot[Vve]=Ot[qve]=Ot[Xve]=Ot[Yve]=Ot[Jve]=!1;function Axe(e){return Rve(e)&&Dve(e.length)&&!!Ot[Qve(e)]}var uxe=Axe;function dxe(e){return function(n){return e(n)}}var V_=dxe,dg={exports:{}};dg.exports;(function(e,n){var r=eI,s=n&&!n.nodeType&&n,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&r.process,c=function(){try{var A=a&&a.require&&a.require("util").types;return A||o&&o.binding&&o.binding("util")}catch{}}();e.exports=c})(dg,dg.exports);var xI=dg.exports,hxe=uxe,fxe=V_,WS=xI,VS=WS&&WS.isTypedArray,gxe=VS?fxe(VS):hxe,q_=gxe,mxe=xve,pxe=up,yxe=Rs,vxe=G_,xxe=dp,wxe=q_,bxe=Object.prototype,_xe=bxe.hasOwnProperty;function Cxe(e,n){var r=yxe(e),s=!r&&pxe(e),a=!r&&!s&&vxe(e),i=!r&&!s&&!a&&wxe(e),o=r||s||a||i,c=o?mxe(e.length,String):[],A=c.length;for(var u in e)(n||_xe.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||xxe(u,A)))&&c.push(u);return c}var wI=Cxe,Bxe=Object.prototype;function Sxe(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||Bxe;return e===r}var X_=Sxe,kxe=nI,jxe=kxe(Object.keys,Object),Nxe=jxe,Exe=X_,Txe=Nxe,Fxe=Object.prototype,Ixe=Fxe.hasOwnProperty;function Uxe(e){if(!Exe(e))return Txe(e);var n=[];for(var r in Object(e))Ixe.call(e,r)&&r!="constructor"&&n.push(r);return n}var bI=Uxe,Pxe=aI,Mxe=W_;function Qxe(e){return e!=null&&Mxe(e.length)&&!Pxe(e)}var PA=Qxe,Dxe=wI,Rxe=bI,$xe=PA;function Oxe(e){return $xe(e)?Dxe(e):Rxe(e)}var Y_=Oxe,Lxe=mI,Hxe=yI,zxe=Y_;function Kxe(e){return Lxe(e,zxe,Hxe)}var Gxe=Kxe,qS=Gxe,Wxe=1,Vxe=Object.prototype,qxe=Vxe.hasOwnProperty;function Xxe(e,n,r,s,a,i){var o=r&Wxe,c=qS(e),A=c.length,u=qS(n),h=u.length;if(A!=h&&!o)return!1;for(var d=A;d--;){var f=c[d];if(!(o?f in n:qxe.call(n,f)))return!1}var g=i.get(e),m=i.get(n);if(g&&m)return g==n&&m==e;var y=!0;i.set(e,n),i.set(n,e);for(var v=o;++d<A;){f=c[d];var p=e[f],x=n[f];if(s)var b=o?s(x,p,f,n,e,i):s(p,x,f,e,n,i);if(!(b===void 0?p===x||a(p,x,r,s,i):b)){y=!1;break}v||(v=f=="constructor")}if(y&&!v){var w=e.constructor,_=n.constructor;w!=_&&"constructor"in e&&"constructor"in n&&!(typeof w=="function"&&w instanceof w&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return i.delete(e),i.delete(n),y}var Yxe=Xxe,Jxe=Dl,Zxe=Ii,e1e=Jxe(Zxe,"DataView"),t1e=e1e,n1e=Dl,r1e=Ii,s1e=n1e(r1e,"Promise"),a1e=s1e,i1e=Dl,o1e=Ii,l1e=i1e(o1e,"Set"),_I=l1e,c1e=Dl,A1e=Ii,u1e=c1e(A1e,"WeakMap"),d1e=u1e,y1=t1e,v1=O_,x1=a1e,w1=_I,b1=d1e,CI=Pl,MA=iI,XS="[object Map]",h1e="[object Object]",YS="[object Promise]",JS="[object Set]",ZS="[object WeakMap]",ek="[object DataView]",f1e=MA(y1),g1e=MA(v1),m1e=MA(x1),p1e=MA(w1),y1e=MA(b1),zo=CI;(y1&&zo(new y1(new ArrayBuffer(1)))!=ek||v1&&zo(new v1)!=XS||x1&&zo(x1.resolve())!=YS||w1&&zo(new w1)!=JS||b1&&zo(new b1)!=ZS)&&(zo=function(e){var n=CI(e),r=n==h1e?e.constructor:void 0,s=r?MA(r):"";if(s)switch(s){case f1e:return ek;case g1e:return XS;case m1e:return YS;case p1e:return JS;case y1e:return ZS}return n});var BI=zo,ev=dI,v1e=gI,x1e=ive,w1e=Yxe,tk=BI,nk=Rs,rk=G_,b1e=q_,_1e=1,sk="[object Arguments]",ak="[object Array]",gf="[object Object]",C1e=Object.prototype,ik=C1e.hasOwnProperty;function B1e(e,n,r,s,a,i){var o=nk(e),c=nk(n),A=o?ak:tk(e),u=c?ak:tk(n);A=A==sk?gf:A,u=u==sk?gf:u;var h=A==gf,d=u==gf,f=A==u;if(f&&rk(e)){if(!rk(n))return!1;o=!0,h=!1}if(f&&!h)return i||(i=new ev),o||b1e(e)?v1e(e,n,r,s,a,i):x1e(e,n,A,r,s,a,i);if(!(r&_1e)){var g=h&&ik.call(e,"__wrapped__"),m=d&&ik.call(n,"__wrapped__");if(g||m){var y=g?e.value():e,v=m?n.value():n;return i||(i=new ev),a(y,v,r,s,i)}}return f?(i||(i=new ev),w1e(e,n,r,s,a,i)):!1}var S1e=B1e,k1e=S1e,ok=Ml;function SI(e,n,r,s,a){return e===n?!0:e==null||n==null||!ok(e)&&!ok(n)?e!==e&&n!==n:k1e(e,n,r,s,SI,a)}var J_=SI,j1e=dI,N1e=J_,E1e=1,T1e=2;function F1e(e,n,r,s){var a=r.length,i=a,o=!s;if(e==null)return!i;for(e=Object(e);a--;){var c=r[a];if(o&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<i;){c=r[a];var A=c[0],u=e[A],h=c[1];if(o&&c[2]){if(u===void 0&&!(A in e))return!1}else{var d=new j1e;if(s)var f=s(u,h,A,e,n,d);if(!(f===void 0?N1e(h,u,E1e|T1e,s,d):f))return!1}}return!0}var I1e=F1e,U1e=Ql;function P1e(e){return e===e&&!U1e(e)}var kI=P1e,M1e=kI,Q1e=Y_;function D1e(e){for(var n=Q1e(e),r=n.length;r--;){var s=n[r],a=e[s];n[r]=[s,a,M1e(a)]}return n}var R1e=D1e;function $1e(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}var jI=$1e,O1e=I1e,L1e=R1e,H1e=jI;function z1e(e){var n=L1e(e);return n.length==1&&n[0][2]?H1e(n[0][0],n[0][1]):function(r){return r===e||O1e(r,e,n)}}var K1e=z1e,G1e=Ap;function W1e(e,n,r){var s=e==null?void 0:G1e(e,n);return s===void 0?r:s}var V1e=W1e;function q1e(e,n){return e!=null&&n in Object(e)}var X1e=q1e,Y1e=cp,J1e=up,Z1e=Rs,ewe=dp,twe=W_,nwe=vh;function rwe(e,n,r){n=Y1e(n,e);for(var s=-1,a=n.length,i=!1;++s<a;){var o=nwe(n[s]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&twe(a)&&ewe(o,a)&&(Z1e(e)||J1e(e)))}var swe=rwe,awe=X1e,iwe=swe;function owe(e,n){return e!=null&&iwe(e,n,awe)}var NI=owe,lwe=J_,cwe=V1e,Awe=NI,uwe=$_,dwe=kI,hwe=jI,fwe=vh,gwe=1,mwe=2;function pwe(e,n){return uwe(e)&&dwe(n)?hwe(fwe(e),n):function(r){var s=cwe(r,e);return s===void 0&&s===n?Awe(r,e):lwe(n,s,gwe|mwe)}}var ywe=pwe;function vwe(e){return e}var xh=vwe;const QA=en(xh);function xwe(e){return function(n){return n==null?void 0:n[e]}}var wwe=xwe,bwe=Ap;function _we(e){return function(n){return bwe(n,e)}}var Cwe=_we,Bwe=wwe,Swe=Cwe,kwe=$_,jwe=vh;function Nwe(e){return kwe(e)?Bwe(jwe(e)):Swe(e)}var EI=Nwe;const TI=en(EI);var Ewe=K1e,Twe=ywe,Fwe=xh,Iwe=Rs,Uwe=EI;function Pwe(e){return typeof e=="function"?e:e==null?Fwe:typeof e=="object"?Iwe(e)?Twe(e[0],e[1]):Ewe(e):Uwe(e)}var hp=Pwe;function Mwe(e){return function(n,r,s){for(var a=-1,i=Object(n),o=s(n),c=o.length;c--;){var A=o[e?c:++a];if(r(i[A],A,i)===!1)break}return n}}var Qwe=Mwe,Dwe=Qwe,Rwe=Dwe(),$we=Rwe,Owe=$we,Lwe=Y_;function Hwe(e,n){return e&&Owe(e,n,Lwe)}var zwe=Hwe,Kwe=PA;function Gwe(e,n){return function(r,s){if(r==null)return r;if(!Kwe(r))return e(r,s);for(var a=r.length,i=n?a:-1,o=Object(r);(n?i--:++i<a)&&s(o[i],i,o)!==!1;);return r}}var Wwe=Gwe,Vwe=zwe,qwe=Wwe,Xwe=qwe(Vwe),Ywe=Xwe,Jwe=Ywe,Zwe=PA;function ebe(e,n){var r=-1,s=Zwe(e)?Array(e.length):[];return Jwe(e,function(a,i,o){s[++r]=n(a,i,o)}),s}var tbe=ebe;function nbe(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}var rbe=nbe,lk=sp;function sbe(e,n){if(e!==n){var r=e!==void 0,s=e===null,a=e===e,i=lk(e),o=n!==void 0,c=n===null,A=n===n,u=lk(n);if(!c&&!u&&!i&&e>n||i&&o&&A&&!c&&!u||s&&o&&A||!r&&A||!a)return 1;if(!s&&!i&&!u&&e<n||u&&r&&a&&!s&&!i||c&&r&&a||!o&&a||!A)return-1}return 0}var abe=sbe,ibe=abe;function obe(e,n,r){for(var s=-1,a=e.criteria,i=n.criteria,o=a.length,c=r.length;++s<o;){var A=ibe(a[s],i[s]);if(A){if(s>=c)return A;var u=r[s];return A*(u=="desc"?-1:1)}}return e.index-n.index}var lbe=obe,tv=R_,cbe=Ap,Abe=hp,ube=tbe,dbe=rbe,hbe=V_,fbe=lbe,gbe=xh,mbe=Rs;function pbe(e,n,r){n.length?n=tv(n,function(i){return mbe(i)?function(o){return cbe(o,i.length===1?i[0]:i)}:i}):n=[gbe];var s=-1;n=tv(n,hbe(Abe));var a=ube(e,function(i,o,c){var A=tv(n,function(u){return u(i)});return{criteria:A,index:++s,value:i}});return dbe(a,function(i,o){return fbe(i,o,r)})}var ybe=pbe,vbe=ybe,ck=Rs;function xbe(e,n,r,s){return e==null?[]:(ck(n)||(n=n==null?[]:[n]),r=s?void 0:r,ck(r)||(r=r==null?[]:[r]),vbe(e,n,r))}var wbe=xbe;const Z_=en(wbe);function e2(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function FI(e,n){var r=Object.create(e.prototype);for(var s in n)r[s]=n[s];return r}function wh(){}var $d=.7,hg=1/$d,Wc="\\s*([+-]?\\d+)\\s*",Od="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ua="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bbe=/^#([0-9a-f]{3,8})$/,_be=new RegExp(`^rgb\\(${Wc},${Wc},${Wc}\\)$`),Cbe=new RegExp(`^rgb\\(${Ua},${Ua},${Ua}\\)$`),Bbe=new RegExp(`^rgba\\(${Wc},${Wc},${Wc},${Od}\\)$`),Sbe=new RegExp(`^rgba\\(${Ua},${Ua},${Ua},${Od}\\)$`),kbe=new RegExp(`^hsl\\(${Od},${Ua},${Ua}\\)$`),jbe=new RegExp(`^hsla\\(${Od},${Ua},${Ua},${Od}\\)$`),Ak={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};e2(wh,wl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uk,formatHex:uk,formatHex8:Nbe,formatHsl:Ebe,formatRgb:dk,toString:dk});function uk(){return this.rgb().formatHex()}function Nbe(){return this.rgb().formatHex8()}function Ebe(){return II(this).formatHsl()}function dk(){return this.rgb().formatRgb()}function wl(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=bbe.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?hk(n):r===3?new Qr(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?mf(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?mf(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=_be.exec(e))?new Qr(n[1],n[2],n[3],1):(n=Cbe.exec(e))?new Qr(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Bbe.exec(e))?mf(n[1],n[2],n[3],n[4]):(n=Sbe.exec(e))?mf(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=kbe.exec(e))?mk(n[1],n[2]/100,n[3]/100,1):(n=jbe.exec(e))?mk(n[1],n[2]/100,n[3]/100,n[4]):Ak.hasOwnProperty(e)?hk(Ak[e]):e==="transparent"?new Qr(NaN,NaN,NaN,0):null}function hk(e){return new Qr(e>>16&255,e>>8&255,e&255,1)}function mf(e,n,r,s){return s<=0&&(e=n=r=NaN),new Qr(e,n,r,s)}function Tbe(e){return e instanceof wh||(e=wl(e)),e?(e=e.rgb(),new Qr(e.r,e.g,e.b,e.opacity)):new Qr}function _1(e,n,r,s){return arguments.length===1?Tbe(e):new Qr(e,n,r,s??1)}function Qr(e,n,r,s){this.r=+e,this.g=+n,this.b=+r,this.opacity=+s}e2(Qr,_1,FI(wh,{brighter(e){return e=e==null?hg:Math.pow(hg,e),new Qr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$d:Math.pow($d,e),new Qr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qr(ll(this.r),ll(this.g),ll(this.b),fg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fk,formatHex:fk,formatHex8:Fbe,formatRgb:gk,toString:gk}));function fk(){return`#${tl(this.r)}${tl(this.g)}${tl(this.b)}`}function Fbe(){return`#${tl(this.r)}${tl(this.g)}${tl(this.b)}${tl((isNaN(this.opacity)?1:this.opacity)*255)}`}function gk(){const e=fg(this.opacity);return`${e===1?"rgb(":"rgba("}${ll(this.r)}, ${ll(this.g)}, ${ll(this.b)}${e===1?")":`, ${e})`}`}function fg(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ll(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tl(e){return e=ll(e),(e<16?"0":"")+e.toString(16)}function mk(e,n,r,s){return s<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new sa(e,n,r,s)}function II(e){if(e instanceof sa)return new sa(e.h,e.s,e.l,e.opacity);if(e instanceof wh||(e=wl(e)),!e)return new sa;if(e instanceof sa)return e;e=e.rgb();var n=e.r/255,r=e.g/255,s=e.b/255,a=Math.min(n,r,s),i=Math.max(n,r,s),o=NaN,c=i-a,A=(i+a)/2;return c?(n===i?o=(r-s)/c+(r<s)*6:r===i?o=(s-n)/c+2:o=(n-r)/c+4,c/=A<.5?i+a:2-i-a,o*=60):c=A>0&&A<1?0:o,new sa(o,c,A,e.opacity)}function Ibe(e,n,r,s){return arguments.length===1?II(e):new sa(e,n,r,s??1)}function sa(e,n,r,s){this.h=+e,this.s=+n,this.l=+r,this.opacity=+s}e2(sa,Ibe,FI(wh,{brighter(e){return e=e==null?hg:Math.pow(hg,e),new sa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$d:Math.pow($d,e),new sa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*n,a=2*r-s;return new Qr(nv(e>=240?e-240:e+120,a,s),nv(e,a,s),nv(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new sa(pk(this.h),pf(this.s),pf(this.l),fg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fg(this.opacity);return`${e===1?"hsl(":"hsla("}${pk(this.h)}, ${pf(this.s)*100}%, ${pf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pk(e){return e=(e||0)%360,e<0?e+360:e}function pf(e){return Math.max(0,Math.min(1,e||0))}function nv(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const t2=e=>()=>e;function Ube(e,n){return function(r){return e+r*n}}function Pbe(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(s){return Math.pow(e+s*n,r)}}function Mbe(e){return(e=+e)==1?UI:function(n,r){return r-n?Pbe(n,r,e):t2(isNaN(n)?r:n)}}function UI(e,n){var r=n-e;return r?Ube(e,r):t2(isNaN(e)?n:e)}const gg=function e(n){var r=Mbe(n);function s(a,i){var o=r((a=_1(a)).r,(i=_1(i)).r),c=r(a.g,i.g),A=r(a.b,i.b),u=UI(a.opacity,i.opacity);return function(h){return a.r=o(h),a.g=c(h),a.b=A(h),a.opacity=u(h),a+""}}return s.gamma=e,s}(1);function Qbe(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,s=n.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=e[a]*(1-i)+n[a]*i;return s}}function Dbe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rbe(e,n){var r=n?n.length:0,s=e?Math.min(r,e.length):0,a=new Array(s),i=new Array(r),o;for(o=0;o<s;++o)a[o]=$a(e[o],n[o]);for(;o<r;++o)i[o]=n[o];return function(c){for(o=0;o<s;++o)i[o]=a[o](c);return i}}function $be(e,n){var r=new Date;return e=+e,n=+n,function(s){return r.setTime(e*(1-s)+n*s),r}}function Zs(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function Obe(e,n){var r={},s={},a;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(a in n)a in e?r[a]=$a(e[a],n[a]):s[a]=n[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var C1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rv=new RegExp(C1.source,"g");function Lbe(e){return function(){return e}}function Hbe(e){return function(n){return e(n)+""}}function PI(e,n){var r=C1.lastIndex=rv.lastIndex=0,s,a,i,o=-1,c=[],A=[];for(e=e+"",n=n+"";(s=C1.exec(e))&&(a=rv.exec(n));)(i=a.index)>r&&(i=n.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(s=s[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,A.push({i:o,x:Zs(s,a)})),r=rv.lastIndex;return r<n.length&&(i=n.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?A[0]?Hbe(A[0].x):Lbe(n):(n=A.length,function(u){for(var h=0,d;h<n;++h)c[(d=A[h]).i]=d.x(u);return c.join("")})}function $a(e,n){var r=typeof n,s;return n==null||r==="boolean"?t2(n):(r==="number"?Zs:r==="string"?(s=wl(n))?(n=s,gg):PI:n instanceof wl?gg:n instanceof Date?$be:Dbe(n)?Qbe:Array.isArray(n)?Rbe:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Obe:Zs)(e,n)}function n2(e,n){return e=+e,n=+n,function(r){return Math.round(e*(1-r)+n*r)}}var yk=180/Math.PI,B1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function MI(e,n,r,s,a,i){var o,c,A;return(o=Math.sqrt(e*e+n*n))&&(e/=o,n/=o),(A=e*r+n*s)&&(r-=e*A,s-=n*A),(c=Math.sqrt(r*r+s*s))&&(r/=c,s/=c,A/=c),e*s<n*r&&(e=-e,n=-n,A=-A,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(n,e)*yk,skewX:Math.atan(A)*yk,scaleX:o,scaleY:c}}var yf;function zbe(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?B1:MI(n.a,n.b,n.c,n.d,n.e,n.f)}function Kbe(e){return e==null||(yf||(yf=document.createElementNS("http://www.w3.org/2000/svg","g")),yf.setAttribute("transform",e),!(e=yf.transform.baseVal.consolidate()))?B1:(e=e.matrix,MI(e.a,e.b,e.c,e.d,e.e,e.f))}function QI(e,n,r,s){function a(u){return u.length?u.pop()+" ":""}function i(u,h,d,f,g,m){if(u!==d||h!==f){var y=g.push("translate(",null,n,null,r);m.push({i:y-4,x:Zs(u,d)},{i:y-2,x:Zs(h,f)})}else(d||f)&&g.push("translate("+d+n+f+r)}function o(u,h,d,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:d.push(a(d)+"rotate(",null,s)-2,x:Zs(u,h)})):h&&d.push(a(d)+"rotate("+h+s)}function c(u,h,d,f){u!==h?f.push({i:d.push(a(d)+"skewX(",null,s)-2,x:Zs(u,h)}):h&&d.push(a(d)+"skewX("+h+s)}function A(u,h,d,f,g,m){if(u!==d||h!==f){var y=g.push(a(g)+"scale(",null,",",null,")");m.push({i:y-4,x:Zs(u,d)},{i:y-2,x:Zs(h,f)})}else(d!==1||f!==1)&&g.push(a(g)+"scale("+d+","+f+")")}return function(u,h){var d=[],f=[];return u=e(u),h=e(h),i(u.translateX,u.translateY,h.translateX,h.translateY,d,f),o(u.rotate,h.rotate,d,f),c(u.skewX,h.skewX,d,f),A(u.scaleX,u.scaleY,h.scaleX,h.scaleY,d,f),u=h=null,function(g){for(var m=-1,y=f.length,v;++m<y;)d[(v=f[m]).i]=v.x(g);return d.join("")}}}var Gbe=QI(zbe,"px, ","px)","deg)"),Wbe=QI(Kbe,", ",")",")"),Vbe=1e-12;function vk(e){return((e=Math.exp(e))+1/e)/2}function qbe(e){return((e=Math.exp(e))-1/e)/2}function Xbe(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ybe=function e(n,r,s){function a(i,o){var c=i[0],A=i[1],u=i[2],h=o[0],d=o[1],f=o[2],g=h-c,m=d-A,y=g*g+m*m,v,p;if(y<Vbe)p=Math.log(f/u)/n,v=function(k){return[c+k*g,A+k*m,u*Math.exp(n*k*p)]};else{var x=Math.sqrt(y),b=(f*f-u*u+s*y)/(2*u*r*x),w=(f*f-u*u-s*y)/(2*f*r*x),_=Math.log(Math.sqrt(b*b+1)-b),B=Math.log(Math.sqrt(w*w+1)-w);p=(B-_)/n,v=function(k){var N=k*p,C=vk(_),j=u/(r*x)*(C*Xbe(n*N+_)-qbe(_));return[c+j*g,A+j*m,u*C/vk(n*N+_)]}}return v.duration=p*1e3*n/Math.SQRT2,v}return a.rho=function(i){var o=Math.max(.001,+i),c=o*o,A=c*c;return e(o,c,A)},a}(Math.SQRT2,2,4);function Jbe(e,n){n===void 0&&(n=e,e=$a);for(var r=0,s=n.length-1,a=n[0],i=new Array(s<0?0:s);r<s;)i[r]=e(a,a=n[++r]);return function(o){var c=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[c](o-c)}}const mg=function(e){if(e!==null)switch(typeof e){case"undefined":return!1;case"number":return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY;case"string":return!0;case"boolean":return!1;case"object":return e instanceof Date||Array.isArray(e)||Us(e);case"function":return!0}return!1},DI=function(e,n,r){return r===void 0&&(r=0),function(s){return s<r?e:n}},RI=function(e,n){return function(r){return r>=1?n:function(){const s=typeof e=="function"?e.apply(this,arguments):e,a=typeof n=="function"?n.apply(this,arguments):n;return $a(s,a)(r)}}},$I=function(e,n){const r=(u,h)=>u===h||!mg(u)||!mg(h)?DI(u,h):typeof u=="function"||typeof h=="function"?RI(u,h):typeof u=="object"&&Us(u)||typeof h=="object"&&Us(h)?$I(u,h):$a(u,h),s=u=>Array.isArray(u)?Z_(u,"key"):u,a={},i={};let o=e,c=n,A;(o===null||typeof o!="object")&&(o={}),(c===null||typeof c!="object")&&(c={});for(A in c)A in o?a[A]=r(s(o[A]),s(c[A])):i[A]=c[A];return function(u){for(A in a)i[A]=a[A](u);return i}},Zbe=function(e,n){const r=s=>typeof s=="string"?s.replace(/,/g,""):s;return $a(r(e),r(n))},e_e=function(e,n){return e===n||!mg(e)||!mg(n)?DI(e,n):typeof e=="function"||typeof n=="function"?RI(e,n):Us(e)||Us(n)?$I(e,n):typeof e=="string"||typeof n=="string"?Zbe(e,n):$a(e,n)};var dA=0,Su=0,nu=0,OI=1e3,pg,ku,yg=0,bl=0,fp=0,Ld=typeof performance=="object"&&performance.now?performance:Date,LI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Hd(){return bl||(LI(t_e),bl=Ld.now()+fp)}function t_e(){bl=0}function vg(){this._call=this._time=this._next=null}vg.prototype=gp.prototype={constructor:vg,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Hd():+r)+(n==null?0:+n),!this._next&&ku!==this&&(ku?ku._next=this:pg=this,ku=this),this._call=e,this._time=r,S1()},stop:function(){this._call&&(this._call=null,this._time=1/0,S1())}};function gp(e,n,r){var s=new vg;return s.restart(e,n,r),s}function n_e(){Hd(),++dA;for(var e=pg,n;e;)(n=bl-e._time)>=0&&e._call.call(void 0,n),e=e._next;--dA}function xk(){bl=(yg=Ld.now())+fp,dA=Su=0;try{n_e()}finally{dA=0,s_e(),bl=0}}function r_e(){var e=Ld.now(),n=e-yg;n>OI&&(fp-=n,yg=e)}function s_e(){for(var e,n=pg,r,s=1/0;n;)n._call?(s>n._time&&(s=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:pg=r);ku=e,S1(s)}function S1(e){if(!dA){Su&&(Su=clearTimeout(Su));var n=e-bl;n>24?(e<1/0&&(Su=setTimeout(xk,e-Ld.now()-fp)),nu&&(nu=clearInterval(nu))):(nu||(yg=Ld.now(),nu=setInterval(r_e,OI)),dA=1,LI(xk))}}function wk(e,n,r){var s=new vg;return n=n==null?0:+n,s.restart(a=>{s.stop(),e(a+n)},n,r),s}class bk{constructor(){ve(this,"loop",()=>{this.subscribers.forEach(n=>{n.callback(Hd()-n.startTime,n.duration)})});this.shouldAnimate=!0,this.subscribers=[],this.timer=null,this.activeSubscriptions=0}bypassAnimation(){this.shouldAnimate=!1}resumeAnimation(){this.shouldAnimate=!0}start(){this.timer||(this.timer=gp(this.loop))}stop(){this.timer&&(this.timer.stop(),this.timer=null)}subscribe(n,r){const s=this.subscribers.push({startTime:Hd(),callback:n,duration:this.shouldAnimate?r:0});return this.activeSubscriptions++,this.start(),s}unsubscribe(n){n!==null&&this.subscribers[n-1]&&(delete this.subscribers[n-1],this.activeSubscriptions--),this.activeSubscriptions===0&&this.stop()}}const HI=q.createContext({transitionTimer:new bk,animationTimer:new bk});HI.displayName="TimerContext";const r2=HI,a_e=e=>`ease${e.charAt(0).toUpperCase()+e.slice(1)}`,i_e=1e3,o_e=e=>{let{duration:n=i_e,easing:r="quadInOut",delay:s=0,data:a,children:i,onEnd:o}=e;const[c,A]=q.useState({data:Array.isArray(a)?a[0]:a,animationInfo:{progress:0,animating:!1}}),u=q.useContext(r2).animationTimer,h=q.useRef(Array.isArray(a)?a.slice(1):[]),d=q.useRef(null),f=q.useRef(void 0),g=j0e[a_e(r)];q.useEffect(()=>(h.current.length&&m(),()=>{f.current?u.unsubscribe(f.current):u.stop()}),[]),q.useEffect(()=>{d.current&&c.animationInfo&&c.animationInfo.progress<1?A({data:d.current(1),animationInfo:{progress:1,animating:!1,terminating:!0}}):(u.unsubscribe(f.current),h.current=Array.isArray(a)?a:[a],m())},[a]);const m=()=>{if(h.current.length){const v=h.current[0];d.current=e_e(c.data,v),s?setTimeout(()=>{f.current=u.subscribe(y,n)},s):f.current=u.subscribe(y,n)}else o&&o()},y=v=>{if(!d.current)return;const p=n?v/n:1;if(p>=1){A({data:d.current(1),animationInfo:{progress:1,animating:!1,terminating:!0}}),f.current&&u.unsubscribe(f.current),h.current.shift(),m();return}A({data:d.current(g(p)),animationInfo:{progress:p,animating:p<1}})};return i(c.data,c.animationInfo)};var l_e=uI,c_e=0;function A_e(e){var n=++c_e;return l_e(e)+n}var u_e=A_e;const s2=en(u_e);function k1(){return k1=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},k1.apply(this,arguments)}const d_e=q.forwardRef((e,n)=>q.createElement("svg",k1({ref:n},e)));function h_e(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}var f_e=h_e,g_e=f_e,_k=Math.max;function m_e(e,n,r){return n=_k(n===void 0?e.length-1:n,0),function(){for(var s=arguments,a=-1,i=_k(s.length-n,0),o=Array(i);++a<i;)o[a]=s[n+a];a=-1;for(var c=Array(n+1);++a<n;)c[a]=s[a];return c[n]=r(o),g_e(e,this,c)}}var zI=m_e;function p_e(e){return function(){return e}}var y_e=p_e,v_e=Dl,x_e=function(){try{var e=v_e(Object,"defineProperty");return e({},"",{}),e}catch{}}(),KI=x_e,w_e=y_e,Ck=KI,b_e=xh,__e=Ck?function(e,n){return Ck(e,"toString",{configurable:!0,enumerable:!1,value:w_e(n),writable:!0})}:b_e,C_e=__e,B_e=800,S_e=16,k_e=Date.now;function j_e(e){var n=0,r=0;return function(){var s=k_e(),a=S_e-(s-r);if(r=s,a>0){if(++n>=B_e)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}var N_e=j_e,E_e=C_e,T_e=N_e,F_e=T_e(E_e),GI=F_e,I_e=xh,U_e=zI,P_e=GI;function M_e(e,n){return P_e(U_e(e,n,I_e),e+"")}var Q_e=M_e,D_e=TA,R_e=PA,$_e=dp,O_e=Ql;function L_e(e,n,r){if(!O_e(r))return!1;var s=typeof n;return(s=="number"?R_e(r)&&$_e(n,r.length):s=="string"&&n in r)?D_e(r[n],e):!1}var H_e=L_e;function z_e(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}var K_e=z_e,G_e=Ql,W_e=X_,V_e=K_e,q_e=Object.prototype,X_e=q_e.hasOwnProperty;function Y_e(e){if(!G_e(e))return V_e(e);var n=W_e(e),r=[];for(var s in e)s=="constructor"&&(n||!X_e.call(e,s))||r.push(s);return r}var J_e=Y_e,Z_e=wI,e2e=J_e,t2e=PA;function n2e(e){return t2e(e)?Z_e(e,!0):e2e(e)}var WI=n2e,r2e=Q_e,s2e=TA,a2e=H_e,i2e=WI,VI=Object.prototype,o2e=VI.hasOwnProperty,l2e=r2e(function(e,n){e=Object(e);var r=-1,s=n.length,a=s>2?n[2]:void 0;for(a&&a2e(n[0],n[1],a)&&(s=1);++r<s;)for(var i=n[r],o=i2e(i),c=-1,A=o.length;++c<A;){var u=o[c],h=e[u];(h===void 0||s2e(h,VI[u])&&!o2e.call(e,u))&&(e[u]=i[u])}return e}),c2e=l2e;const Ve=en(c2e);var Bk=KI;function A2e(e,n,r){n=="__proto__"&&Bk?Bk(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}var u2e=A2e,d2e=u2e,h2e=TA,f2e=Object.prototype,g2e=f2e.hasOwnProperty;function m2e(e,n,r){var s=e[n];(!(g2e.call(e,n)&&h2e(s,r))||r===void 0&&!(n in e))&&d2e(e,n,r)}var p2e=m2e,y2e=p2e,v2e=cp,x2e=dp,Sk=Ql,w2e=vh;function b2e(e,n,r,s){if(!Sk(e))return e;n=v2e(n,e);for(var a=-1,i=n.length,o=i-1,c=e;c!=null&&++a<i;){var A=w2e(n[a]),u=r;if(A==="__proto__"||A==="constructor"||A==="prototype")return e;if(a!=o){var h=c[A];u=s?s(h,A,c):void 0,u===void 0&&(u=Sk(h)?h:x2e(n[a+1])?[]:{})}y2e(c,A,u),c=c[A]}return e}var _2e=b2e,C2e=Ap,B2e=_2e,S2e=cp;function k2e(e,n,r){for(var s=-1,a=n.length,i={};++s<a;){var o=n[s],c=C2e(e,o);r(c,o)&&B2e(i,S2e(o,e),c)}return i}var qI=k2e,j2e=qI,N2e=NI;function E2e(e,n){return j2e(e,n,function(r,s){return N2e(e,s)})}var T2e=E2e,kk=yh,F2e=up,I2e=Rs,jk=kk?kk.isConcatSpreadable:void 0;function U2e(e){return I2e(e)||F2e(e)||!!(jk&&e&&e[jk])}var P2e=U2e,M2e=K_,Q2e=P2e;function XI(e,n,r,s,a){var i=-1,o=e.length;for(r||(r=Q2e),a||(a=[]);++i<o;){var c=e[i];n>0&&r(c)?n>1?XI(c,n-1,r,s,a):M2e(a,c):s||(a[a.length]=c)}return a}var D2e=XI,R2e=D2e;function $2e(e){var n=e==null?0:e.length;return n?R2e(e,1):[]}var O2e=$2e,L2e=O2e,H2e=zI,z2e=GI;function K2e(e){return z2e(H2e(e,void 0,L2e),e+"")}var G2e=K2e,W2e=T2e,V2e=G2e,q2e=V2e(function(e,n){return e==null?{}:W2e(e,n)}),X2e=q2e;const xg=en(X2e);function Y2e(e){return e.axis!=="x"?[e.height-e.padding.bottom,e.padding.top]:[e.padding.left,e.width-e.padding.right]}function J2e(e){if(e.axis==="x"){const n=Mn(e.startAngle||0),r=Mn(e.endAngle||360);return[n,r]}return[e.innerRadius||0,j1({height:e.height,width:e.width,padding:e.padding})]}function YI(e){return Object.entries(e).reduce((n,r)=>(n[r[1]]=r[0],n),{})}function a2(e,n){n===void 0&&(n=[]);const r={};for(const s in e)n.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}function JI(e){const{_x:n,_x1:r,_x0:s,_voronoiX:a,_y:i,_y1:o,_y0:c,_voronoiY:A}=e;return Ve({},{x:a??(r??n),x0:s??n,y:A??(o??i),y0:c??i},e)}function i2(e,n){const{scale:r,polar:s,horizontal:a}=e,i=JI(n),o=e.origin||{x:0,y:0},c=a?r.y(i.y):r.x(i.x),A=a?r.y(i.y0):r.x(i.x0),u=a?r.x(i.x):r.y(i.y),h=a?r.x(i.x0):r.y(i.y0);return{x:s?u*Math.cos(c)+o.x:c,x0:s?h*Math.cos(A)+o.x:A,y:s?-u*Math.sin(c)+o.y:u,y0:s?-h*Math.sin(A)+o.x:h}}function Ps(e){const n=typeof e=="number"?e:0,r=typeof e=="object"?e:{};return{top:r.top||n,bottom:r.bottom||n,left:r.left||n,right:r.right||n}}function ZI(e){return(e&&e.type&&e.type.role)==="tooltip"}function o2(e,n){const{theme:r={},labelComponent:s}=e,a=r[n]&&r[n].style||{};if(!ZI(s))return a;const i=r.tooltip&&r.tooltip.style||{},o=Ve({},i,a.labels);return Ve({},{labels:o},a)}function l2(e,n){const r="100%",s="100%";if(!e)return Ve({parent:{height:s,width:r}},n);const{data:a,labels:i,parent:o}=e,c=n&&n.parent||{},A=n&&n.labels||{},u=n&&n.data||{};return{parent:Ve({},o,c,{width:r,height:s}),labels:Ve({},i,A),data:Ve({},a,u)}}function Xe(e,n){return Et(e)?e(n):e}function cr(e,n){return n.disableInlineStyles?{}:!e||!Object.keys(e).some(r=>Et(e[r]))?e:Object.keys(e).reduce((r,s)=>(r[s]=Xe(e[s],n),r),{})}function Mn(e){return typeof e=="number"?e*(Math.PI/180):e}function c2(e){return typeof e=="number"?e/(Math.PI/180):e}function j1(e){const{width:n,height:r,padding:s}=e,{left:a,right:i,top:o,bottom:c}=s;return Math.min(n-a-i,r-o-c)/2}function bh(e){const{width:n,height:r}=e,{top:s,bottom:a,left:i,right:o}=Ps(e.padding),c=Math.min(n-i-o,r-s-a)/2,A=n/2+i-o,u=r/2+s-a;return{x:A+c>n?c+i-o:A,y:u+c>r?c+s-a:u}}function Rn(e,n){return e.range&&e.range[n]?e.range[n]:e.range&&Array.isArray(e.range)?e.range:e.polar?J2e({axis:n,innerRadius:e.innerRadius,startAngle:e.startAngle,endAngle:e.endAngle,height:e.height,width:e.width,padding:Ps(e.padding)}):Y2e({axis:n,height:e.height,width:e.width,padding:Ps(e.padding)})}function zd(e){return e==null}function Et(e){return typeof e=="function"}function A2(e){return Et(e)?e:e==null?n=>n:TI(e)}function la(e,n,r){const s=e.theme&&e.theme[r]?e.theme[r]:{},a=a2(s,["style"]),i=eCe(e);return Ve(i===void 0?{}:{horizontal:i},e,a,n)}function Z2e(e,n){return n?e==="x"?"y":"x":e}function u2(e,n,r){const s=n?e:0;let a=n||e;a||(a=0);const i=a-s,o=Math.abs(i),c=i/o||1,A=r||1,u=Math.max(Math.ceil(o/A),0);return Array.from(Array(u),(h,d)=>s+d*c*A)}function _h(e,n,r,s,a){r===void 0&&(r={}),s===void 0&&(s=[]),a===void 0&&(a=(u,h)=>u.concat(h));const i=["data","domain","categories","polar","startAngle","endAngle","minDomain","maxDomain","horizontal"],o=(u,h,d)=>u.reduce((f,g,m)=>{let y=f;const v=g.type&&g.type.role,p=g.props.name||`${v}-${h[m]}`;if(g.props&&g.props.children){const x=Object.assign({},g.props,xg(r,i)),b=g.type&&g.type.role==="stack"&&Et(g.type.getChildren)?g.type.getChildren(x):q.Children.toArray(g.props.children).map(B=>{const k=Object.assign({},B.props,xg(x,i));return q.cloneElement(B,k)}),w=b.map((B,k)=>`${p}-${k}`),_=o(b,w,g);y=a(y,_)}else{const x=n(g,p,d);x&&(y=a(y,x))}return y},s),c=e.filter(S.isValidElement),A=c.map((u,h)=>h);return o(c,A)}function eCe(e){if(e.horizontal!==void 0||!e.children)return e.horizontal;const n=r=>r.reduce((s,a)=>{const i=a.props||{};return s||i.horizontal||!i.children?s||i.horizontal:n(q.Children.toArray(i.children))},!1);return n(q.Children.toArray(e.children))}const eU={startsWith:["data-","aria-"],exactMatch:[]},tCe=e=>{let n=!1;return eU.startsWith.forEach(r=>{new RegExp(`\\b(${r})(\\w|-)+`,"g").test(e)&&(n=!0)}),n},nCe=e=>eU.exactMatch.includes(e),rCe=e=>!!(tCe(e)||nCe(e)),Ui=e=>{const n={...e};return Object.fromEntries(Object.entries(n).filter(r=>{let[s]=r;return rCe(s)}).map(r=>{let[s,a]=r;return[s,Xe(a,e)]}))},d2=(e,n)=>S.cloneElement(e,Ui(n));var sCe=bI,aCe=BI,iCe=up,oCe=Rs,lCe=PA,cCe=G_,ACe=X_,uCe=q_,dCe="[object Map]",hCe="[object Set]",fCe=Object.prototype,gCe=fCe.hasOwnProperty;function mCe(e){if(e==null)return!0;if(lCe(e)&&(oCe(e)||typeof e=="string"||typeof e.splice=="function"||cCe(e)||uCe(e)||iCe(e)))return!e.length;var n=aCe(e);if(n==dCe||n==hCe)return!e.size;if(ACe(e))return!sCe(e).length;for(var r in e)if(gCe.call(e,r))return!1;return!0}var pCe=mCe;const mn=en(pCe);var yCe=typeof Element<"u",vCe=typeof Map=="function",xCe=typeof Set=="function",wCe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function m0(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!m0(e[s],n[s]))return!1;return!0}var i;if(vCe&&e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i=e.entries();!(s=i.next()).done;)if(!n.has(s.value[0]))return!1;for(i=e.entries();!(s=i.next()).done;)if(!m0(s.value[1],n.get(s.value[0])))return!1;return!0}if(xCe&&e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i=e.entries();!(s=i.next()).done;)if(!n.has(s.value[0]))return!1;return!0}if(wCe&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof n.valueOf=="function")return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof n.toString=="function")return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;if(yCe&&e instanceof Element)return!1;for(s=r;s--!==0;)if(!((a[s]==="_owner"||a[s]==="__v"||a[s]==="__o")&&e.$$typeof)&&!m0(e[a[s]],n[a[s]]))return!1;return!0}return e!==e&&n!==n}var bCe=function(n,r){try{return m0(n,r)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const cl=en(bCe);function tU(e){return Array.isArray(e)&&e.length>0}function wg(e){return Array.isArray(e)&&e.some(n=>typeof n=="string")}function bi(e){return Array.isArray(e)&&e.some(n=>n instanceof Date)}function _Ce(e){return tU(e)&&e.every(n=>typeof n=="string")}function bg(e,n){return e&&n?e.filter(r=>!n.includes(r)):[]}function Nk(e){return tU(e)&&e.every(Array.isArray)}function CCe(e){return e.filter(n=>n!==void 0)}function Aa(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const a=e.concat(r);return bi(a)?new Date(Math.max(...a)):Math.max(...a)}function ua(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const a=e.concat(r);return bi(a)?new Date(Math.min(...a)):Math.min(...a)}function nU(e,n){return(e.key||n).toString()}function Ek(e){return e.reduce((n,r,s)=>{const a=nU(r,s);return n[a]=r,n},{})}function Tk(e,n){let r=!1;const s=Object.keys(e).reduce((a,i)=>(i in n||(r=!0,a[i]=!0),a),{});return r&&s}function BCe(e,n){const r=e&&Ek(e),s=n&&Ek(n);return{entering:r&&Tk(s,r),exiting:s&&Tk(r,s)}}function N1(e){return e.type&&e.type.getData?e.type.getData(e.props):e.props&&e.props.data||!1}function rU(e,n){let r=!1,s=!1;const a=(c,A)=>{if(!A||c.type!==A.type)return{};const{entering:u,exiting:h}=BCe(N1(c),N1(A))||{};return r=r||!!h,s=s||!!u,{entering:u||!1,exiting:h||!1}},i=(c,A)=>c.map((u,h)=>u&&u.props&&u.props.children&&A[h]?i(q.Children.toArray(c[h].props.children),q.Children.toArray(A[h].props.children)):a(u,A[h])),o=i(q.Children.toArray(e),q.Children.toArray(n));return{nodesWillExit:r,nodesWillEnter:s,childrenTransitions:o,nodesShouldEnter:!1}}function SCe(e,n){const r=e.onEnter&&e.onEnter.after?e.onEnter.after:QA;return{data:n.map((s,a)=>Object.assign({},s,r(s,a,n)))}}function kCe(e,n,r,s){const a=Object.assign({},e,{onEnd:s});if(a&&a.onLoad&&!a.onLoad.duration)return{animate:a,data:r};const i=a.onLoad&&a.onLoad.before?a.onLoad.before:QA,o=r.map((c,A)=>Object.assign({},c,i(c,A,r)));return{animate:a,data:o,clipWidth:0}}function jCe(e,n,r){const s=Object.assign({},e,{onEnd:r});let a=n;if(s&&s.onLoad&&!s.onLoad.duration)return{animate:e,data:n};const i=e.onLoad&&e.onLoad.after?e.onLoad.after:QA;return a=n.map((o,c)=>Object.assign({},o,i(o,c,n))),{animate:s,data:a}}function NCe(e,n,r,s,a){const i=e&&e.onExit,o=Object.assign({},e,i);let c=r;if(s){e.onEnd=a;const A=e.onExit&&e.onExit.before?e.onExit.before:QA;c=r.map((u,h)=>{const d=(u.key||h).toString();return s[d]?Object.assign({},u,A(u,h,r)):u})}return{animate:o,data:c}}function ECe(e,n,r,s,a){let i=e,o=r;if(s){i=Object.assign({},e,{onEnd:a});const c=e.onEnter&&e.onEnter.before?e.onEnter.before:QA;o=r.map((A,u)=>{const h=(A.key||u).toString();return s[h]?Object.assign({},A,c(A,u,r)):A})}return{animate:i,data:o}}function TCe(e,n,r,s){const a=e&&e.onEnter,i=Object.assign({},e,a);let o=n;if(r){i.onEnd=s;const c=i.onEnter&&i.onEnter.after?i.onEnter.after:QA;o=n.map((A,u)=>{const h=nU(A,u);return r[h]?Object.assign({},A,c(A,u,n)):A})}return{animate:i,data:o}}function sU(e,n,r){const s=n&&n.nodesWillExit,a=n&&n.nodesWillEnter,i=n&&n.nodesShouldEnter,o=n&&n.nodesShouldLoad,c=n&&n.nodesDoneLoad,A=n&&n.childrenTransitions||[],u={enter:e.animate&&e.animate.onEnter&&e.animate.onEnter.duration,exit:e.animate&&e.animate.onExit&&e.animate.onExit.duration,load:e.animate&&e.animate.onLoad&&e.animate.onLoad.duration,move:e.animate&&e.animate.duration},h=(m,y,v)=>o?jCe(v,y,()=>{r({nodesShouldLoad:!1,nodesDoneLoad:!0})}):kCe(v,m,y,()=>{r({nodesDoneLoad:!0})}),d=(m,y,v,p)=>NCe(p,y,v,m,()=>{r({nodesWillExit:!1})}),f=(m,y,v,p)=>i?TCe(p,v,m,()=>{r({nodesWillEnter:!1})}):ECe(p,y,v,m,()=>{r({nodesShouldEnter:!0})}),g=function(m,y){const v=m.props.animate;if(!m.type)return{};const p=m.props&&m.props.polar&&m.type.defaultPolarTransitions||m.type.defaultTransitions;if(p){const x=v[y]&&v[y].duration;return x!==void 0?x:p[y]&&p[y].duration}return{}};return function(y,v){const p=N1(y)||[],x=Ve({},e.animate,y.props.animate),b=y.props.polar&&y.type.defaultPolarTransitions||y.type.defaultTransitions;x.onExit=Ve({},x.onExit,b&&b.onExit),x.onEnter=Ve({},x.onEnter,b&&b.onEnter),x.onLoad=Ve({},x.onLoad,b&&b.onLoad);const w=A[v]||A[0];if(c){if(s){const _=w&&w.exiting,B=u.exit!==void 0?u.exit:g(y,"onExit");return d(_,y,p,Object.assign({},x,_?{duration:B}:{delay:B}))}else if(a){const _=w&&w.entering,B=u.enter!==void 0?u.enter:g(y,"onEnter"),k=u.move!==void 0?u.move:y.props.animate&&y.props.animate.duration;return f(_,y,p,Object.assign({},x,{duration:i&&_?B:k}))}else if(!n&&x&&x.onExit)return SCe(x,p)}else{const B={duration:u.load!==void 0?u.load:g(y,"onLoad")};return h(y,p,Object.assign({},x,B))}return{animate:x,data:p}}}function E1(){return E1=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},E1.apply(this,arguments)}class T1 extends q.Component{constructor(n,r){super(n,r),this.state={nodesShouldLoad:!1,nodesDoneLoad:!1};const s=this.props.children,a=s.props.polar;this.continuous=!a&&s.type&&s.type.continuous===!0,this.timer=this.context.transitionTimer}componentDidMount(){this.setState({nodesShouldLoad:!0})}shouldComponentUpdate(n){return cl(this.props,n)||(this.timer.bypassAnimation(),this.setState(this.getTransitionState(this.props,n),()=>this.timer.resumeAnimation())),!0}componentWillUnmount(){this.timer.stop()}getTransitionState(n,r){const{animate:s}=n;if(s){if(s.parentState)return{oldProps:s.parentState.nodesWillExit?n:null,nextProps:r}}else return{};const a=q.Children.toArray(n.children),i=q.Children.toArray(r.children),{nodesWillExit:o,nodesWillEnter:c,childrenTransitions:A,nodesShouldEnter:u}=rU(a,i);return{nodesWillExit:o,nodesWillEnter:c,childrenTransitions:A,nodesShouldEnter:u,oldProps:o?n:null,nextProps:r}}getDomainFromChildren(n,r){const s=A=>A.reduce((u,h)=>{if(h.type&&Et(h.type.getDomain)){const d=h.props&&h.type.getDomain(h.props,r);return d?u.concat(d):u}else if(h.props&&h.props.children)return u.concat(s(q.Children.toArray(h.props.children)));return u},[]),a=q.Children.toArray(n.children)[0],i=a.props||{},o=Array.isArray(i.domain)?i.domain:i.domain&&i.domain[r];if(!i.children&&o)return o;const c=s([a]);return c.length===0?[0,1]:[ua(c),Aa(c)]}pickProps(){return this.state?this.state.nodesWillExit?this.state.oldProps||this.props:this.props:this.props}pickDomainProps(n){var s;const r=(s=n.animate)==null?void 0:s.parentState;return r&&r.nodesWillExit?(this.continuous||r.continuous)&&(r.nextProps||this.state.nextProps)||n:this.continuous&&this.state.nodesWillExit&&this.state.nextProps||n}getClipWidth(n,r){const s=()=>{const i=Rn(r.props,"x");return i?Math.abs(i[1]-i[0]):n.width},a=this.transitionProps?this.transitionProps.clipWidth:void 0;return a!==void 0?a:s()}render(){var d;const n=this.pickProps(),r=(d=this.props.animate)!=null&&d.getTransitions?this.props.animate.getTransitions:sU(n,this.state,f=>this.setState(f)),s=q.Children.toArray(n.children)[0],a=r(s);this.transitionProps=a;const i={x:this.getDomainFromChildren(this.pickDomainProps(n),"x"),y:this.getDomainFromChildren(n,"y")},o=this.getClipWidth(n,s),c=Ve({domain:i,clipWidth:o},a,s.props),u=(n.animationWhitelist||[]).concat(["clipWidth"]),h=u.length?xg(c,u):c;return q.createElement(o_e,E1({},c.animate,{data:h}),f=>{if(s.props.groupComponent){const g=this.continuous?q.cloneElement(s.props.groupComponent,{clipWidth:f.clipWidth||0}):s.props.groupComponent;return q.cloneElement(s,Ve({animate:null,animating:!0,groupComponent:g},f,c))}return q.cloneElement(s,Ve({animate:null,animating:!0},f,c))})}}ve(T1,"displayName","VictoryTransition"),ve(T1,"contextType",r2);var FCe=K_,ICe=rI,UCe=yI,PCe=pI,MCe=Object.getOwnPropertySymbols,QCe=MCe?function(e){for(var n=[];e;)FCe(n,UCe(e)),e=ICe(e);return n}:PCe,DCe=QCe,RCe=mI,$Ce=DCe,OCe=WI;function LCe(e){return RCe(e,OCe,$Ce)}var HCe=LCe,zCe=R_,KCe=hp,GCe=qI,WCe=HCe;function VCe(e,n){if(e==null)return{};var r=zCe(WCe(e),function(s){return[s]});return n=KCe(n),GCe(e,r,function(s,a){return n(s,a[0])})}var aU=VCe;const _g=en(aU);var qCe="Expected a function";function XCe(e){if(typeof e!="function")throw new TypeError(qCe);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}var YCe=XCe,JCe=hp,ZCe=YCe,eBe=aU;function tBe(e,n){return eBe(e,ZCe(JCe(n)))}var nBe=tBe;const iU=en(nBe);function rBe(e,n,r,s){for(var a=e.length,i=r+(s?1:-1);s?i--:++i<a;)if(n(e[i],i,e))return i;return-1}var sBe=rBe;function aBe(e){return e!==e}var iBe=aBe;function oBe(e,n,r){for(var s=r-1,a=e.length;++s<a;)if(e[s]===n)return s;return-1}var lBe=oBe,cBe=sBe,ABe=iBe,uBe=lBe;function dBe(e,n,r){return n===n?uBe(e,n,r):cBe(e,ABe,r)}var hBe=dBe,fBe=hBe;function gBe(e,n){var r=e==null?0:e.length;return!!r&&fBe(e,n,0)>-1}var mBe=gBe;function pBe(e,n,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(n,e[s]))return!0;return!1}var yBe=pBe;function vBe(){}var xBe=vBe,sv=_I,wBe=xBe,bBe=z_,_Be=1/0,CBe=sv&&1/bBe(new sv([,-0]))[1]==_Be?function(e){return new sv(e)}:wBe,BBe=CBe,SBe=hI,kBe=mBe,jBe=yBe,NBe=fI,EBe=BBe,TBe=z_,FBe=200;function IBe(e,n,r){var s=-1,a=kBe,i=e.length,o=!0,c=[],A=c;if(r)o=!1,a=jBe;else if(i>=FBe){var u=n?null:EBe(e);if(u)return TBe(u);o=!1,a=NBe,A=new SBe}else A=n?[]:c;e:for(;++s<i;){var h=e[s],d=n?n(h):h;if(h=r||h!==0?h:0,o&&d===d){for(var f=A.length;f--;)if(A[f]===d)continue e;n&&A.push(d),c.push(h)}else a(A,d,r)||(A!==c&&A.push(d),c.push(h))}return c}var oU=IBe,UBe=oU;function PBe(e){return e&&e.length?UBe(e):[]}var MBe=PBe;const _l=en(MBe),h2=/^onGlobal(.*)$/;function lU(e,n,r,s){const a=h=>{const f=(()=>{const g=h.reduce((m,y)=>y.target!==void 0?(Array.isArray(y.target)?y.target.includes(n):`${y.target}`==`${n}`)?m.concat(y):m:m.concat(y),[]);return r!==void 0&&n!=="parent"?g.filter(m=>{const y=m.eventKey,v=p=>p?`${p}`==`${r}`:!0;return Array.isArray(y)?y.some(p=>v(p)):v(y)}):g})();return Array.isArray(f)&&f.reduce((g,m)=>m?Object.assign(g,m.eventHandlers):g,{})},o=(()=>Array.isArray(this.componentEvents)?Array.isArray(e.events)?this.componentEvents.concat(...e.events):this.componentEvents:e.events)(),c=o&&Et(s)?s(a(o),n):void 0;if(!e.sharedEvents)return c;const A=e.sharedEvents.getEvents,u=e.sharedEvents.events&&A(a(e.sharedEvents.events),n);return Object.assign({},u,c)}function cU(e,n,r,s){if(mn(e))return{};const a=s||this.baseProps,i=(h,d)=>{const{childName:f,target:g,key:m}=h,y=d==="props"?a:this.state||{},v=f==null||!y[f]?y:y[f];return m==="parent"?v.parent:v[m]&&v[m][g]},o=(h,d)=>{const f=n==="parent"?h.childName:h.childName||r,g=h.target||n,m=x=>g==="parent"?"parent":h.eventKey==="all"?a[x]?Object.keys(a[x]).filter(b=>b!=="parent"):Object.keys(a).filter(b=>b!=="parent"):h.eventKey===void 0&&d==="parent"?a[x]?Object.keys(a[x]):Object.keys(a):h.eventKey!==void 0?h.eventKey:d,y=(x,b)=>{const w=this.state||{};if(!Et(h.mutation))return w;const _=i({childName:b,key:x,target:g},"props"),B=i({childName:b,key:x,target:g},"state"),k=h.mutation(Object.assign({},_,B),a),N=w[b]||{},C=F=>(F[x]&&F[x][g]&&delete F[x][g],F[x]&&!Object.keys(F[x]).length&&delete F[x],F),j=F=>g==="parent"?Object.assign(F,{[x]:Object.assign(F[x]||{},k)}):Object.assign(F,{[x]:Object.assign(F[x]||{},{[g]:k})}),E=F=>k?j(F):C(F);return b!=null?Object.assign(w,{[b]:E(N)}):E(w)},v=x=>{const b=m(x);return Array.isArray(b)?b.reduce((w,_)=>Object.assign(w,y(_,x)),{}):y(b,x)},p=f==="all"?Object.keys(a).filter(x=>x!=="parent"):f;return Array.isArray(p)?p.reduce((x,b)=>Object.assign(x,v(b)),{}):v(p)},c=(h,d)=>Array.isArray(h)?h.reduce((f,g)=>Object.assign({},f,o(g,d)),{}):o(h,d),A=h=>{const d=m=>Et(m.callback)&&m.callback,g=(Array.isArray(h)?h.map(m=>d(m)):[d(h)]).filter(m=>m!==!1);return g.length?()=>g.forEach(m=>m()):void 0},u=(h,d,f,g)=>{const m=e[g](h,d,f,this);if(!mn(m)){const y=A(m);this.setState(c(m,f),y)}};return Object.keys(e).reduce((h,d)=>(h[d]=u,h),{})}function AU(e,n,r){return e?Object.keys(e).reduce((s,a)=>{const i=o=>e[a](o,r,n,a);return s[a]=i,s},{}):{}}function uU(e,n,r){const s=this.state||{};return r?s[r]&&s[r][e]&&s[r][e][n]:e==="parent"?s[e]&&s[e][n]||s[e]:s[e]&&s[e][n]}function QBe(e,n,r,s){return n===void 0&&(n={}),r===void 0&&(r={}),s.reduce((a,i)=>{const o=r[i],c=dU(e,n[i],r[i],i);return a[i]=c||o,_g(a,A=>!mn(A))},{})}function dU(e,n,r,s){return n===void 0&&(n={}),r===void 0&&(r={}),Object.keys(n).reduce((i,o)=>{const c=r[o]||{},A=n[o]||{};if(o==="parent"){const h=Fk(e,A,c,{eventKey:o,target:"parent"});i[o]=h!==void 0?Object.assign({},c,h):c}else{const u=_l(Object.keys(A).concat(Object.keys(c)));i[o]=u.reduce((h,d)=>{const f={eventKey:o,target:d,childName:s},g=Fk(e,A[d],c[d],f);return h[d]=g!==void 0?Object.assign({},c[d],g):c[d],_g(h,m=>!mn(m))},{})}return _g(i,u=>!mn(u))},{})}function Fk(e,n,r,s){const a=(A,u)=>typeof A[u]=="string"?A[u]==="all"||A[u]===s[u]:Array.isArray(A[u])?A[u].map(d=>`${d}`).includes(s[u]):!1;let i=Array.isArray(e)?e:[e];s.childName&&(i=e.filter(A=>a(A,"childName")));const o=i.filter(A=>a(A,"target"));if(mn(o))return;const c=o.filter(A=>a(A,"eventKey"));if(!mn(c))return c.reduce((A,u)=>{const d=(u&&Et(u.mutation)?u.mutation:()=>{})(Object.assign({},n,r));return Object.assign({},A,d)},{})}function f2(e,n){const r=Array.isArray(n)&&n.reduce((s,a)=>{const i=e[a],o=i&&i.type&&i.type.defaultEvents,c=Et(o)?o(i.props):o;return Array.isArray(c)?s.concat(...c):s},[]);return r&&r.length?r:void 0}function Cg(e){const n=e.match(h2);return n&&n[1]&&n[1].toLowerCase()}const hU=e=>_g(e,(n,r)=>h2.test(r)),fU=e=>iU(e,(n,r)=>h2.test(r)),gU=e=>Object.assign(e,{nativeEvent:e}),DBe=e=>!zd(e._x)&&!zd(e._y),RBe=[{name:"parent",index:"parent"},{name:"data"},{name:"labels"}];function Ch(e,n){n===void 0&&(n={});class r extends e{constructor(i){super(i);ve(this,"state",{});ve(this,"getEventState",uU.bind(this));ve(this,"getScopedEvents",cU.bind(this));ve(this,"getEvents",(i,o,c)=>lU.call(this,i,o,c,this.getScopedEvents));ve(this,"externalMutations",this.getExternalMutations(this.props));ve(this,"calculatedState",this.getStateChanges(this.props));ve(this,"globalEvents",{});ve(this,"prevGlobalEventKeys",[]);ve(this,"boundGlobalEvents",{});this.cacheValues(this.getCalculatedValues(i))}shouldComponentUpdate(i){const o=this.getExternalMutations(i),c=this.props.animating||this.props.animate,A=!cl(o,this.externalMutations);if(c||A)return this.cacheValues(this.getCalculatedValues(i)),this.externalMutations=o,this.applyExternalMutations(i,o),!0;const u=this.getStateChanges(i);return cl(this.calculatedState,u)?cl(this.props,i)?!1:(this.cacheValues(this.getCalculatedValues(i)),!0):(this.cacheValues(this.getCalculatedValues(i)),!0)}componentDidMount(){const i=Object.keys(this.globalEvents);i.forEach(o=>this.addGlobalListener(o)),this.prevGlobalEventKeys=i}componentDidUpdate(i){const o=this.getStateChanges(i);this.calculatedState=o;const c=Object.keys(this.globalEvents);bg(this.prevGlobalEventKeys,c).forEach(h=>this.removeGlobalListener(h)),bg(c,this.prevGlobalEventKeys).forEach(h=>this.addGlobalListener(h)),this.prevGlobalEventKeys=c}componentWillUnmount(){this.prevGlobalEventKeys.forEach(i=>this.removeGlobalListener(i))}addGlobalListener(i){const o=c=>{const A=this.globalEvents[i];return A&&A(gU(c))};this.boundGlobalEvents[i]=o,window.addEventListener(Cg(i),o)}removeGlobalListener(i){window.removeEventListener(Cg(i),this.boundGlobalEvents[i])}getStateChanges(i){if(!this.hasEvents)return{};const o=(u,h)=>{const d=Ve({},this.getEventState(u,h),this.getSharedEventState(u,h));return mn(d)?void 0:d};return(n.components||RBe).map(u=>{if(!(!i.standalone&&u.name==="parent"))return u.index!==void 0?o(u.index,u.name):this.dataKeys.map(h=>o(h,u.name)).filter(Boolean)}).filter(Boolean)}applyExternalMutations(i,o){if(!mn(o)){const c=i.externalEventMutations.reduce((u,h)=>Et(h.callback)?u.concat(h.callback):u,[]),A=c.length?()=>{c.forEach(u=>u())}:void 0;this.setState(o,A)}}getCalculatedValues(i){const{sharedEvents:o}=i,c=e.expectedComponents,A=f2(i,c),u=o&&Et(o.getEventState)?o.getEventState:()=>{},h=this.getBaseProps(i,u),d=Object.keys(h).filter(m=>m!=="parent"),f=i.events||i.sharedEvents||A,g=this.getAllEvents(i);return{componentEvents:A,getSharedEventState:u,baseProps:h,dataKeys:d,hasEvents:f,events:g}}getExternalMutations(i){const{sharedEvents:o,externalEventMutations:c}=i;return mn(c)||o?void 0:dU(c,this.baseProps,this.state)}cacheValues(i){Object.keys(i).forEach(o=>{this[o]=i[o]})}getBaseProps(i,o){const A=(o||this.getSharedEventState.bind(this))("parent","parent"),u=this.getEventState("parent","parent"),h=Ve({},u,A),d=h.parentControlledProps,f=d?xg(h,d):{},g=Ve({},f,i);return typeof e.getBaseProps=="function"?e.getBaseProps(g):{}}getAllEvents(i){return Array.isArray(this.componentEvents)?Array.isArray(i.events)?this.componentEvents.concat(...i.events):this.componentEvents:i.events}getComponentProps(i,o,c){const A=this.props.name||e.role,u=this.dataKeys&&this.dataKeys[c]||c,h=`${A}-${o}-${u}`,d=this.baseProps[u]&&this.baseProps[u][o]||this.baseProps[u];if(!d&&!this.hasEvents)return;const f=i&&typeof i=="object"&&"props"in i?i.props:void 0;if(this.hasEvents){const g=this.getEvents(this.props,o,u),m=Ve({index:c,key:h},this.getEventState(u,o),this.getSharedEventState(u,o),f,d,{id:h}),y=Ve({},AU(g,u,m),m.events);return Object.assign({},m,{events:y})}return Ve({index:c,key:h},f,d,{id:h})}renderContainer(i,o){const A=i.type&&i.type.role==="container"?this.getComponentProps(i,"parent","parent"):{};return A.events&&(this.globalEvents=hU(A.events),A.events=fU(A.events)),q.cloneElement(i,A,o)}animateComponent(i,o){var u;const c=typeof i.animate=="object"&&((u=i.animate)==null?void 0:u.animationWhitelist)||o,A=this.constructor;return q.createElement(T1,{animate:i.animate,animationWhitelist:c},q.createElement(A,i))}renderContinuousData(i){const{dataComponent:o,labelComponent:c,groupComponent:A}=i,h=this.dataKeys.filter(g=>g!=="all").reduce((g,m)=>{let y=g;const v=this.getComponentProps(c,"labels",m);return v&&v.text!==void 0&&v.text!==null&&(y=y.concat(q.cloneElement(c,v))),y},[]),d=this.getComponentProps(o,"data","all"),f=[q.cloneElement(o,d),...h];return this.renderContainer(A,f)}renderData(i,o){o===void 0&&(o=DBe);const{dataComponent:c,labelComponent:A,groupComponent:u}=i,h=this.dataKeys.reduce((g,m,y)=>{const v=this.getComponentProps(c,"data",y);return o(v.datum)&&g.push(q.cloneElement(c,v)),g},[]),d=this.dataKeys.map((g,m)=>{const y=this.getComponentProps(A,"labels",m);if(y.text!==void 0&&y.text!==null)return q.cloneElement(A,y)}).filter(Boolean),f=[...h,...d];return this.renderContainer(u,f)}}return r}function $Be(e){return n=>{e.forEach(r=>{Et(r)?r(n):r!=null&&(r.current=n)})}}var OBe=Pl,LBe=Ml,HBe="[object Date]";function zBe(e){return LBe(e)&&OBe(e)==HBe}var KBe=zBe,GBe=KBe,WBe=V_,Ik=xI,Uk=Ik&&Ik.isDate,VBe=Uk?WBe(Uk):GBe,qBe=VBe;const mU=en(qBe);var XBe=TA;function YBe(e,n){for(var r=-1,s=e.length,a=0,i=[];++r<s;){var o=e[r],c=n?n(o):o;if(!r||!XBe(c,A)){var A=c;i[a++]=o===0?0:o}}return i}var JBe=YBe,ZBe=JBe;function e5e(e){return e&&e.length?ZBe(e):[]}var t5e=e5e;const n5e=en(t5e);var r5e=J_;function s5e(e,n){return r5e(e,n)}var a5e=s5e;const i5e=en(a5e);function o5e(e){return e===void 0}var l5e=o5e;const c5e=en(l5e);function fo(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function A5e(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function g2(e){let n,r,s;e.length!==2?(n=fo,r=(c,A)=>fo(e(c),A),s=(c,A)=>e(c)-A):(n=e===fo||e===A5e?e:u5e,r=e,s=e);function a(c,A,u=0,h=c.length){if(u<h){if(n(A,A)!==0)return h;do{const d=u+h>>>1;r(c[d],A)<0?u=d+1:h=d}while(u<h)}return u}function i(c,A,u=0,h=c.length){if(u<h){if(n(A,A)!==0)return h;do{const d=u+h>>>1;r(c[d],A)<=0?u=d+1:h=d}while(u<h)}return u}function o(c,A,u=0,h=c.length){const d=a(c,A,u,h-1);return d>u&&s(c[d-1],A)>-s(c[d],A)?d-1:d}return{left:a,center:o,right:i}}function u5e(){return 0}function pU(e){return e===null?NaN:+e}function*d5e(e,n){if(n===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let s of e)(s=n(s,++r,e))!=null&&(s=+s)>=s&&(yield s)}}const h5e=g2(fo),f5e=h5e.right;g2(pU).center;const Bh=f5e;class Pk extends Map{constructor(n,r=p5e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[s,a]of n)this.set(s,a)}get(n){return super.get(Mk(this,n))}has(n){return super.has(Mk(this,n))}set(n,r){return super.set(g5e(this,n),r)}delete(n){return super.delete(m5e(this,n))}}function Mk({_intern:e,_key:n},r){const s=n(r);return e.has(s)?e.get(s):r}function g5e({_intern:e,_key:n},r){const s=n(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function m5e({_intern:e,_key:n},r){const s=n(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function p5e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function y5e(e=fo){if(e===fo)return yU;if(typeof e!="function")throw new TypeError("compare is not a function");return(n,r)=>{const s=e(n,r);return s||s===0?s:(e(r,r)===0)-(e(n,n)===0)}}function yU(e,n){return(e==null||!(e>=e))-(n==null||!(n>=n))||(e<n?-1:e>n?1:0)}const v5e=Math.sqrt(50),x5e=Math.sqrt(10),w5e=Math.sqrt(2);function Bg(e,n,r){const s=(n-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=v5e?10:i>=x5e?5:i>=w5e?2:1;let c,A,u;return a<0?(u=Math.pow(10,-a)/o,c=Math.round(e*u),A=Math.round(n*u),c/u<e&&++c,A/u>n&&--A,u=-u):(u=Math.pow(10,a)*o,c=Math.round(e/u),A=Math.round(n/u),c*u<e&&++c,A*u>n&&--A),A<c&&.5<=r&&r<2?Bg(e,n,r*2):[c,A,u]}function F1(e,n,r){if(n=+n,e=+e,r=+r,!(r>0))return[];if(e===n)return[e];const s=n<e,[a,i,o]=s?Bg(n,e,r):Bg(e,n,r);if(!(i>=a))return[];const c=i-a+1,A=new Array(c);if(s)if(o<0)for(let u=0;u<c;++u)A[u]=(i-u)/-o;else for(let u=0;u<c;++u)A[u]=(i-u)*o;else if(o<0)for(let u=0;u<c;++u)A[u]=(a+u)/-o;else for(let u=0;u<c;++u)A[u]=(a+u)*o;return A}function I1(e,n,r){return n=+n,e=+e,r=+r,Bg(e,n,r)[2]}function U1(e,n,r){n=+n,e=+e,r=+r;const s=n<e,a=s?I1(n,e,r):I1(e,n,r);return(s?-1:1)*(a<0?1/-a:a)}function Sg(e,n){let r;if(n===void 0)for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let a of e)(a=n(a,++s,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function kg(e,n){let r;if(n===void 0)for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let a of e)(a=n(a,++s,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function vU(e,n,r=0,s=1/0,a){if(n=Math.floor(n),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=n&&n<=s))return e;for(a=a===void 0?yU:y5e(a);s>r;){if(s-r>600){const A=s-r+1,u=n-r+1,h=Math.log(A),d=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*d*(A-d)/A)*(u-A/2<0?-1:1),g=Math.max(r,Math.floor(n-u*d/A+f)),m=Math.min(s,Math.floor(n+(A-u)*d/A+f));vU(e,n,g,m,a)}const i=e[n];let o=r,c=s;for(ru(e,r,n),a(e[s],i)>0&&ru(e,r,s);o<c;){for(ru(e,o,c),++o,--c;a(e[o],i)<0;)++o;for(;a(e[c],i)>0;)--c}a(e[r],i)===0?ru(e,r,c):(++c,ru(e,c,s)),c<=n&&(r=c+1),n<=c&&(s=c-1)}return e}function ru(e,n,r){const s=e[n];e[n]=e[r],e[r]=s}function b5e(e,n,r){if(e=Float64Array.from(d5e(e,r)),!(!(s=e.length)||isNaN(n=+n))){if(n<=0||s<2)return kg(e);if(n>=1)return Sg(e);var s,a=(s-1)*n,i=Math.floor(a),o=Sg(vU(e,i).subarray(0,i+1)),c=kg(e.subarray(i+1));return o+(c-o)*(a-i)}}function _5e(e,n,r=pU){if(!(!(s=e.length)||isNaN(n=+n))){if(n<=0||s<2)return+r(e[0],0,e);if(n>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*n,i=Math.floor(a),o=+r(e[i],i,e),c=+r(e[i+1],i+1,e);return o+(c-o)*(a-i)}}function C5e(e,n,r){e=+e,n=+n,r=(a=arguments.length)<2?(n=e,e=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((n-e)/r))|0,i=new Array(a);++s<a;)i[s]=e+s*r;return i}function B5e(e,n){let r=0;if(n===void 0)for(let s of e)(s=+s)&&(r+=s);else{let s=-1;for(let a of e)(a=+n(a,++s,e))&&(r+=a)}return r}function $s(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function Pi(e,n){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const P1=Symbol("implicit");function mp(){var e=new Pk,n=[],r=[],s=P1;function a(i){let o=e.get(i);if(o===void 0){if(s!==P1)return s;e.set(i,o=n.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return n.slice();n=[],e=new Pk;for(const o of i)e.has(o)||e.set(o,n.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return mp(n,r).unknown(s)},$s.apply(a,arguments),a}function m2(){var e=mp().unknown(void 0),n=e.domain,r=e.range,s=0,a=1,i,o,c=!1,A=0,u=0,h=.5;delete e.unknown;function d(){var f=n().length,g=a<s,m=g?a:s,y=g?s:a;i=(y-m)/Math.max(1,f-A+u*2),c&&(i=Math.floor(i)),m+=(y-m-i*(f-A))*h,o=i*(1-A),c&&(m=Math.round(m),o=Math.round(o));var v=C5e(f).map(function(p){return m+i*p});return r(g?v.reverse():v)}return e.domain=function(f){return arguments.length?(n(f),d()):n()},e.range=function(f){return arguments.length?([s,a]=f,s=+s,a=+a,d()):[s,a]},e.rangeRound=function(f){return[s,a]=f,s=+s,a=+a,c=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(c=!!f,d()):c},e.padding=function(f){return arguments.length?(A=Math.min(1,u=+f),d()):A},e.paddingInner=function(f){return arguments.length?(A=Math.min(1,f),d()):A},e.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},e.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),d()):h},e.copy=function(){return m2(n(),[s,a]).round(c).paddingInner(A).paddingOuter(u).align(h)},$s.apply(d(),arguments)}function xU(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return xU(n())},e}function S5e(){return xU(m2.apply(null,arguments).paddingInner(1))}function k5e(e){return function(){return e}}function jg(e){return+e}var Qk=[0,1];function wr(e){return e}function M1(e,n){return(n-=e=+e)?function(r){return(r-e)/n}:k5e(isNaN(n)?NaN:.5)}function j5e(e,n){var r;return e>n&&(r=e,e=n,n=r),function(s){return Math.max(e,Math.min(n,s))}}function N5e(e,n,r){var s=e[0],a=e[1],i=n[0],o=n[1];return a<s?(s=M1(a,s),i=r(o,i)):(s=M1(s,a),i=r(i,o)),function(c){return i(s(c))}}function E5e(e,n,r){var s=Math.min(e.length,n.length)-1,a=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++o<s;)a[o]=M1(e[o],e[o+1]),i[o]=r(n[o],n[o+1]);return function(c){var A=Bh(e,c,1,s)-1;return i[A](a[A](c))}}function Sh(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pp(){var e=Qk,n=Qk,r=$a,s,a,i,o=wr,c,A,u;function h(){var f=Math.min(e.length,n.length);return o!==wr&&(o=j5e(e[0],e[f-1])),c=f>2?E5e:N5e,A=u=null,d}function d(f){return f==null||isNaN(f=+f)?i:(A||(A=c(e.map(s),n,r)))(s(o(f)))}return d.invert=function(f){return o(a((u||(u=c(n,e.map(s),Zs)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,jg),h()):e.slice()},d.range=function(f){return arguments.length?(n=Array.from(f),h()):n.slice()},d.rangeRound=function(f){return n=Array.from(f),r=n2,h()},d.clamp=function(f){return arguments.length?(o=f?!0:wr,h()):o!==wr},d.interpolate=function(f){return arguments.length?(r=f,h()):r},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,g){return s=f,a=g,h()}}function p2(){return pp()(wr,wr)}function T5e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ng(e,n){if((r=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function hA(e){return e=Ng(Math.abs(e)),e?e[1]:NaN}function F5e(e,n){return function(r,s){for(var a=r.length,i=[],o=0,c=e[0],A=0;a>0&&c>0&&(A+c+1>s&&(c=Math.max(1,s-A)),i.push(r.substring(a-=c,a+c)),!((A+=c+1)>s));)c=e[o=(o+1)%e.length];return i.reverse().join(n)}}function I5e(e){return function(n){return n.replace(/[0-9]/g,function(r){return e[+r]})}}var U5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kd(e){if(!(n=U5e.exec(e)))throw new Error("invalid format: "+e);var n;return new y2({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Kd.prototype=y2.prototype;function y2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}y2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function P5e(e){e:for(var n=e.length,r=1,s=-1,a;r<n;++r)switch(e[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var wU;function M5e(e,n){var r=Ng(e,n);if(!r)return e+"";var s=r[0],a=r[1],i=a-(wU=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+Ng(e,Math.max(0,n+i-1))[0]}function Dk(e,n){var r=Ng(e,n);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const Rk={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:T5e,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>Dk(e*100,n),r:Dk,s:M5e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $k(e){return e}var Ok=Array.prototype.map,Lk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Q5e(e){var n=e.grouping===void 0||e.thousands===void 0?$k:F5e(Ok.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?$k:I5e(Ok.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",A=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Kd(d);var f=d.fill,g=d.align,m=d.sign,y=d.symbol,v=d.zero,p=d.width,x=d.comma,b=d.precision,w=d.trim,_=d.type;_==="n"?(x=!0,_="g"):Rk[_]||(b===void 0&&(b=12),w=!0,_="g"),(v||f==="0"&&g==="=")&&(v=!0,f="0",g="=");var B=y==="$"?r:y==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",k=y==="$"?s:/[%p]/.test(_)?o:"",N=Rk[_],C=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function j(E){var F=B,I=k,T,L,P;if(_==="c")I=N(E)+I,E="";else{E=+E;var O=E<0||1/E<0;if(E=isNaN(E)?A:N(Math.abs(E),b),w&&(E=P5e(E)),O&&+E==0&&m!=="+"&&(O=!1),F=(O?m==="("?m:c:m==="-"||m==="("?"":m)+F,I=(_==="s"?Lk[8+wU/3]:"")+I+(O&&m==="("?")":""),C){for(T=-1,L=E.length;++T<L;)if(P=E.charCodeAt(T),48>P||P>57){I=(P===46?a+E.slice(T+1):E.slice(T))+I,E=E.slice(0,T);break}}}x&&!v&&(E=n(E,1/0));var Q=F.length+E.length+I.length,R=Q<p?new Array(p-Q+1).join(f):"";switch(x&&v&&(E=n(R+E,R.length?p-I.length:1/0),R=""),g){case"<":E=F+E+I+R;break;case"=":E=F+R+E+I;break;case"^":E=R.slice(0,Q=R.length>>1)+F+E+I+R.slice(Q);break;default:E=R+F+E+I;break}return i(E)}return j.toString=function(){return d+""},j}function h(d,f){var g=u((d=Kd(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(hA(f)/3)))*3,y=Math.pow(10,-m),v=Lk[8+m/3];return function(p){return g(y*p)+v}}return{format:u,formatPrefix:h}}var vf,v2,bU;D5e({thousands:",",grouping:[3],currency:["$",""]});function D5e(e){return vf=Q5e(e),v2=vf.format,bU=vf.formatPrefix,vf}function R5e(e){return Math.max(0,-hA(Math.abs(e)))}function $5e(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hA(n)/3)))*3-hA(Math.abs(e)))}function O5e(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,hA(n)-hA(e))+1}function _U(e,n,r,s){var a=U1(e,n,r),i;switch(s=Kd(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(n));return s.precision==null&&!isNaN(i=$5e(a,o))&&(s.precision=i),bU(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=O5e(a,Math.max(Math.abs(e),Math.abs(n))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=R5e(a))&&(s.precision=i-(s.type==="%")*2);break}}return v2(s)}function Eo(e){var n=e.domain;return e.ticks=function(r){var s=n();return F1(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var a=n();return _U(a[0],a[a.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=n(),a=0,i=s.length-1,o=s[a],c=s[i],A,u,h=10;for(c<o&&(u=o,o=c,c=u,u=a,a=i,i=u);h-- >0;){if(u=I1(o,c,r),u===A)return s[a]=o,s[i]=c,n(s);if(u>0)o=Math.floor(o/u)*u,c=Math.ceil(c/u)*u;else if(u<0)o=Math.ceil(o*u)/u,c=Math.floor(c*u)/u;else break;A=u}return e},e}function x2(){var e=p2();return e.copy=function(){return Sh(e,x2())},$s.apply(e,arguments),Eo(e)}function CU(e){var n;function r(s){return s==null||isNaN(s=+s)?n:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,jg),r):e.slice()},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return CU(e).unknown(n)},e=arguments.length?Array.from(e,jg):[0,1],Eo(r)}function BU(e,n){e=e.slice();var r=0,s=e.length-1,a=e[r],i=e[s],o;return i<a&&(o=r,r=s,s=o,o=a,a=i,i=o),e[r]=n.floor(a),e[s]=n.ceil(i),e}function Hk(e){return Math.log(e)}function zk(e){return Math.exp(e)}function L5e(e){return-Math.log(-e)}function H5e(e){return-Math.exp(-e)}function z5e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function K5e(e){return e===10?z5e:e===Math.E?Math.exp:n=>Math.pow(e,n)}function G5e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),n=>Math.log(n)/e)}function Kk(e){return(n,r)=>-e(-n,r)}function w2(e){const n=e(Hk,zk),r=n.domain;let s=10,a,i;function o(){return a=G5e(s),i=K5e(s),r()[0]<0?(a=Kk(a),i=Kk(i),e(L5e,H5e)):e(Hk,zk),n}return n.base=function(c){return arguments.length?(s=+c,o()):s},n.domain=function(c){return arguments.length?(r(c),o()):r()},n.ticks=c=>{const A=r();let u=A[0],h=A[A.length-1];const d=h<u;d&&([u,h]=[h,u]);let f=a(u),g=a(h),m,y;const v=c==null?10:+c;let p=[];if(!(s%1)&&g-f<v){if(f=Math.floor(f),g=Math.ceil(g),u>0){for(;f<=g;++f)for(m=1;m<s;++m)if(y=f<0?m/i(-f):m*i(f),!(y<u)){if(y>h)break;p.push(y)}}else for(;f<=g;++f)for(m=s-1;m>=1;--m)if(y=f>0?m/i(-f):m*i(f),!(y<u)){if(y>h)break;p.push(y)}p.length*2<v&&(p=F1(u,h,v))}else p=F1(f,g,Math.min(g-f,v)).map(i);return d?p.reverse():p},n.tickFormat=(c,A)=>{if(c==null&&(c=10),A==null&&(A=s===10?"s":","),typeof A!="function"&&(!(s%1)&&(A=Kd(A)).precision==null&&(A.trim=!0),A=v2(A)),c===1/0)return A;const u=Math.max(1,s*c/n.ticks().length);return h=>{let d=h/i(Math.round(a(h)));return d*s<s-.5&&(d*=s),d<=u?A(h):""}},n.nice=()=>r(BU(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),n}function SU(){const e=w2(pp()).domain([1,10]);return e.copy=()=>Sh(e,SU()).base(e.base()),$s.apply(e,arguments),e}function Gk(e){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/e))}}function Wk(e){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*e}}function b2(e){var n=1,r=e(Gk(n),Wk(n));return r.constant=function(s){return arguments.length?e(Gk(n=+s),Wk(n)):n},Eo(r)}function kU(){var e=b2(pp());return e.copy=function(){return Sh(e,kU()).constant(e.constant())},$s.apply(e,arguments)}function Vk(e){return function(n){return n<0?-Math.pow(-n,e):Math.pow(n,e)}}function W5e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function V5e(e){return e<0?-e*e:e*e}function _2(e){var n=e(wr,wr),r=1;function s(){return r===1?e(wr,wr):r===.5?e(W5e,V5e):e(Vk(r),Vk(1/r))}return n.exponent=function(a){return arguments.length?(r=+a,s()):r},Eo(n)}function C2(){var e=_2(pp());return e.copy=function(){return Sh(e,C2()).exponent(e.exponent())},$s.apply(e,arguments),e}function q5e(){return C2.apply(null,arguments).exponent(.5)}function qk(e){return Math.sign(e)*e*e}function X5e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function jU(){var e=p2(),n=[0,1],r=!1,s;function a(i){var o=X5e(e(i));return isNaN(o)?s:r?Math.round(o):o}return a.invert=function(i){return e.invert(qk(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((n=Array.from(i,jg)).map(qk)),a):n.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return jU(e.domain(),n).round(r).clamp(e.clamp()).unknown(s)},$s.apply(a,arguments),Eo(a)}function NU(){var e=[],n=[],r=[],s;function a(){var o=0,c=Math.max(1,n.length);for(r=new Array(c-1);++o<c;)r[o-1]=_5e(e,o/c);return i}function i(o){return o==null||isNaN(o=+o)?s:n[Bh(r,o)]}return i.invertExtent=function(o){var c=n.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:e[0],c<r.length?r[c]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let c of o)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(fo),a()},i.range=function(o){return arguments.length?(n=Array.from(o),a()):n.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return NU().domain(e).range(n).unknown(s)},$s.apply(i,arguments)}function EU(){var e=0,n=1,r=1,s=[.5],a=[0,1],i;function o(A){return A!=null&&A<=A?a[Bh(s,A,0,r)]:i}function c(){var A=-1;for(s=new Array(r);++A<r;)s[A]=((A+1)*n-(A-r)*e)/(r+1);return o}return o.domain=function(A){return arguments.length?([e,n]=A,e=+e,n=+n,c()):[e,n]},o.range=function(A){return arguments.length?(r=(a=Array.from(A)).length-1,c()):a.slice()},o.invertExtent=function(A){var u=a.indexOf(A);return u<0?[NaN,NaN]:u<1?[e,s[0]]:u>=r?[s[r-1],n]:[s[u-1],s[u]]},o.unknown=function(A){return arguments.length&&(i=A),o},o.thresholds=function(){return s.slice()},o.copy=function(){return EU().domain([e,n]).range(a).unknown(i)},$s.apply(Eo(o),arguments)}function TU(){var e=[.5],n=[0,1],r,s=1;function a(i){return i!=null&&i<=i?n[Bh(e,i,0,s)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,n.length-1),a):e.slice()},a.range=function(i){return arguments.length?(n=Array.from(i),s=Math.min(e.length,n.length-1),a):n.slice()},a.invertExtent=function(i){var o=n.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return TU().domain(e).range(n).unknown(r)},$s.apply(a,arguments)}const av=new Date,iv=new Date;function Nn(e,n,r,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),n(i,1),e(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(n(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const A=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return A;let u;do A.push(u=new Date(+i)),n(i,c),e(i);while(u<i&&i<o);return A},a.filter=i=>Nn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;n(o,-1),!i(o););else for(;--c>=0;)for(;n(o,1),!i(o););}),r&&(a.count=(i,o)=>(av.setTime(+i),iv.setTime(+o),e(av),e(iv),Math.floor(r(av,iv))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Eg=Nn(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);Eg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Nn(n=>{n.setTime(Math.floor(n/e)*e)},(n,r)=>{n.setTime(+n+r*e)},(n,r)=>(r-n)/e):Eg);Eg.range;const ui=1e3,js=ui*60,di=js*60,_i=di*24,B2=_i*7,Xk=_i*30,ov=_i*365,nl=Nn(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*ui)},(e,n)=>(n-e)/ui,e=>e.getUTCSeconds());nl.range;const S2=Nn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ui)},(e,n)=>{e.setTime(+e+n*js)},(e,n)=>(n-e)/js,e=>e.getMinutes());S2.range;const k2=Nn(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*js)},(e,n)=>(n-e)/js,e=>e.getUTCMinutes());k2.range;const j2=Nn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ui-e.getMinutes()*js)},(e,n)=>{e.setTime(+e+n*di)},(e,n)=>(n-e)/di,e=>e.getHours());j2.range;const N2=Nn(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*di)},(e,n)=>(n-e)/di,e=>e.getUTCHours());N2.range;const kh=Nn(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*js)/_i,e=>e.getDate()-1);kh.range;const yp=Nn(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/_i,e=>e.getUTCDate()-1);yp.range;const FU=Nn(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/_i,e=>Math.floor(e/_i));FU.range;function Rl(e){return Nn(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,r)=>{n.setDate(n.getDate()+r*7)},(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*js)/B2)}const vp=Rl(0),Tg=Rl(1),Y5e=Rl(2),J5e=Rl(3),fA=Rl(4),Z5e=Rl(5),eSe=Rl(6);vp.range;Tg.range;Y5e.range;J5e.range;fA.range;Z5e.range;eSe.range;function $l(e){return Nn(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCDate(n.getUTCDate()+r*7)},(n,r)=>(r-n)/B2)}const xp=$l(0),Fg=$l(1),tSe=$l(2),nSe=$l(3),gA=$l(4),rSe=$l(5),sSe=$l(6);xp.range;Fg.range;tSe.range;nSe.range;gA.range;rSe.range;sSe.range;const E2=Nn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12,e=>e.getMonth());E2.range;const T2=Nn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());T2.range;const Ci=Nn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ci.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nn(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,r)=>{n.setFullYear(n.getFullYear()+r*e)});Ci.range;const Bi=Nn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Bi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nn(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCFullYear(n.getUTCFullYear()+r*e)});Bi.range;function IU(e,n,r,s,a,i){const o=[[nl,1,ui],[nl,5,5*ui],[nl,15,15*ui],[nl,30,30*ui],[i,1,js],[i,5,5*js],[i,15,15*js],[i,30,30*js],[a,1,di],[a,3,3*di],[a,6,6*di],[a,12,12*di],[s,1,_i],[s,2,2*_i],[r,1,B2],[n,1,Xk],[n,3,3*Xk],[e,1,ov]];function c(u,h,d){const f=h<u;f&&([u,h]=[h,u]);const g=d&&typeof d.range=="function"?d:A(u,h,d),m=g?g.range(u,+h+1):[];return f?m.reverse():m}function A(u,h,d){const f=Math.abs(h-u)/d,g=g2(([,,v])=>v).right(o,f);if(g===o.length)return e.every(U1(u/ov,h/ov,d));if(g===0)return Eg.every(Math.max(U1(u,h,d),1));const[m,y]=o[f/o[g-1][2]<o[g][2]/f?g-1:g];return m.every(y)}return[c,A]}const[aSe,iSe]=IU(Bi,T2,xp,FU,N2,k2),[oSe,lSe]=IU(Ci,E2,vp,kh,j2,S2);function lv(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cv(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function su(e,n,r){return{y:e,m:n,d:r,H:0,M:0,S:0,L:0}}function cSe(e){var n=e.dateTime,r=e.date,s=e.time,a=e.periods,i=e.days,o=e.shortDays,c=e.months,A=e.shortMonths,u=au(a),h=iu(a),d=au(i),f=iu(i),g=au(o),m=iu(o),y=au(c),v=iu(c),p=au(A),x=iu(A),b={a:O,A:Q,b:R,B:M,c:null,d:nj,e:nj,f:FSe,g:LSe,G:zSe,H:NSe,I:ESe,j:TSe,L:UU,m:ISe,M:USe,p:G,q:V,Q:aj,s:ij,S:PSe,u:MSe,U:QSe,V:DSe,w:RSe,W:$Se,x:null,X:null,y:OSe,Y:HSe,Z:KSe,"%":sj},w={a:K,A:se,b:de,B:ye,c:null,d:rj,e:rj,f:qSe,g:ake,G:oke,H:GSe,I:WSe,j:VSe,L:MU,m:XSe,M:YSe,p:W,q:U,Q:aj,s:ij,S:JSe,u:ZSe,U:eke,V:tke,w:nke,W:rke,x:null,X:null,y:ske,Y:ike,Z:lke,"%":sj},_={a:j,A:E,b:F,B:I,c:T,d:ej,e:ej,f:BSe,g:Zk,G:Jk,H:tj,I:tj,j:wSe,L:CSe,m:xSe,M:bSe,p:C,q:vSe,Q:kSe,s:jSe,S:_Se,u:fSe,U:gSe,V:mSe,w:hSe,W:pSe,x:L,X:P,y:Zk,Y:Jk,Z:ySe,"%":SSe};b.x=B(r,b),b.X=B(s,b),b.c=B(n,b),w.x=B(r,w),w.X=B(s,w),w.c=B(n,w);function B($,ne){return function(J){var z=[],oe=-1,Ce=0,Fe=$.length,Ne,Be,pe;for(J instanceof Date||(J=new Date(+J));++oe<Fe;)$.charCodeAt(oe)===37&&(z.push($.slice(Ce,oe)),(Be=Yk[Ne=$.charAt(++oe)])!=null?Ne=$.charAt(++oe):Be=Ne==="e"?" ":"0",(pe=ne[Ne])&&(Ne=pe(J,Be)),z.push(Ne),Ce=oe+1);return z.push($.slice(Ce,oe)),z.join("")}}function k($,ne){return function(J){var z=su(1900,void 0,1),oe=N(z,$,J+="",0),Ce,Fe;if(oe!=J.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(ne&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(Ce=cv(su(z.y,0,1)),Fe=Ce.getUTCDay(),Ce=Fe>4||Fe===0?Fg.ceil(Ce):Fg(Ce),Ce=yp.offset(Ce,(z.V-1)*7),z.y=Ce.getUTCFullYear(),z.m=Ce.getUTCMonth(),z.d=Ce.getUTCDate()+(z.w+6)%7):(Ce=lv(su(z.y,0,1)),Fe=Ce.getDay(),Ce=Fe>4||Fe===0?Tg.ceil(Ce):Tg(Ce),Ce=kh.offset(Ce,(z.V-1)*7),z.y=Ce.getFullYear(),z.m=Ce.getMonth(),z.d=Ce.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),Fe="Z"in z?cv(su(z.y,0,1)).getUTCDay():lv(su(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(Fe+5)%7:z.w+z.U*7-(Fe+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,cv(z)):lv(z)}}function N($,ne,J,z){for(var oe=0,Ce=ne.length,Fe=J.length,Ne,Be;oe<Ce;){if(z>=Fe)return-1;if(Ne=ne.charCodeAt(oe++),Ne===37){if(Ne=ne.charAt(oe++),Be=_[Ne in Yk?ne.charAt(oe++):Ne],!Be||(z=Be($,J,z))<0)return-1}else if(Ne!=J.charCodeAt(z++))return-1}return z}function C($,ne,J){var z=u.exec(ne.slice(J));return z?($.p=h.get(z[0].toLowerCase()),J+z[0].length):-1}function j($,ne,J){var z=g.exec(ne.slice(J));return z?($.w=m.get(z[0].toLowerCase()),J+z[0].length):-1}function E($,ne,J){var z=d.exec(ne.slice(J));return z?($.w=f.get(z[0].toLowerCase()),J+z[0].length):-1}function F($,ne,J){var z=p.exec(ne.slice(J));return z?($.m=x.get(z[0].toLowerCase()),J+z[0].length):-1}function I($,ne,J){var z=y.exec(ne.slice(J));return z?($.m=v.get(z[0].toLowerCase()),J+z[0].length):-1}function T($,ne,J){return N($,n,ne,J)}function L($,ne,J){return N($,r,ne,J)}function P($,ne,J){return N($,s,ne,J)}function O($){return o[$.getDay()]}function Q($){return i[$.getDay()]}function R($){return A[$.getMonth()]}function M($){return c[$.getMonth()]}function G($){return a[+($.getHours()>=12)]}function V($){return 1+~~($.getMonth()/3)}function K($){return o[$.getUTCDay()]}function se($){return i[$.getUTCDay()]}function de($){return A[$.getUTCMonth()]}function ye($){return c[$.getUTCMonth()]}function W($){return a[+($.getUTCHours()>=12)]}function U($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var ne=B($+="",b);return ne.toString=function(){return $},ne},parse:function($){var ne=k($+="",!1);return ne.toString=function(){return $},ne},utcFormat:function($){var ne=B($+="",w);return ne.toString=function(){return $},ne},utcParse:function($){var ne=k($+="",!0);return ne.toString=function(){return $},ne}}}var Yk={"-":"",_:" ",0:"0"},On=/^\s*\d+/,ASe=/^%/,uSe=/[\\^$*+?|[\]().{}]/g;function wt(e,n,r){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(n)+a:a)}function dSe(e){return e.replace(uSe,"\\$&")}function au(e){return new RegExp("^(?:"+e.map(dSe).join("|")+")","i")}function iu(e){return new Map(e.map((n,r)=>[n.toLowerCase(),r]))}function hSe(e,n,r){var s=On.exec(n.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function fSe(e,n,r){var s=On.exec(n.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function gSe(e,n,r){var s=On.exec(n.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function mSe(e,n,r){var s=On.exec(n.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function pSe(e,n,r){var s=On.exec(n.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function Jk(e,n,r){var s=On.exec(n.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function Zk(e,n,r){var s=On.exec(n.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function ySe(e,n,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function vSe(e,n,r){var s=On.exec(n.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function xSe(e,n,r){var s=On.exec(n.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function ej(e,n,r){var s=On.exec(n.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function wSe(e,n,r){var s=On.exec(n.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function tj(e,n,r){var s=On.exec(n.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function bSe(e,n,r){var s=On.exec(n.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function _Se(e,n,r){var s=On.exec(n.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function CSe(e,n,r){var s=On.exec(n.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function BSe(e,n,r){var s=On.exec(n.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function SSe(e,n,r){var s=ASe.exec(n.slice(r,r+1));return s?r+s[0].length:-1}function kSe(e,n,r){var s=On.exec(n.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function jSe(e,n,r){var s=On.exec(n.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function nj(e,n){return wt(e.getDate(),n,2)}function NSe(e,n){return wt(e.getHours(),n,2)}function ESe(e,n){return wt(e.getHours()%12||12,n,2)}function TSe(e,n){return wt(1+kh.count(Ci(e),e),n,3)}function UU(e,n){return wt(e.getMilliseconds(),n,3)}function FSe(e,n){return UU(e,n)+"000"}function ISe(e,n){return wt(e.getMonth()+1,n,2)}function USe(e,n){return wt(e.getMinutes(),n,2)}function PSe(e,n){return wt(e.getSeconds(),n,2)}function MSe(e){var n=e.getDay();return n===0?7:n}function QSe(e,n){return wt(vp.count(Ci(e)-1,e),n,2)}function PU(e){var n=e.getDay();return n>=4||n===0?fA(e):fA.ceil(e)}function DSe(e,n){return e=PU(e),wt(fA.count(Ci(e),e)+(Ci(e).getDay()===4),n,2)}function RSe(e){return e.getDay()}function $Se(e,n){return wt(Tg.count(Ci(e)-1,e),n,2)}function OSe(e,n){return wt(e.getFullYear()%100,n,2)}function LSe(e,n){return e=PU(e),wt(e.getFullYear()%100,n,2)}function HSe(e,n){return wt(e.getFullYear()%1e4,n,4)}function zSe(e,n){var r=e.getDay();return e=r>=4||r===0?fA(e):fA.ceil(e),wt(e.getFullYear()%1e4,n,4)}function KSe(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+wt(n/60|0,"0",2)+wt(n%60,"0",2)}function rj(e,n){return wt(e.getUTCDate(),n,2)}function GSe(e,n){return wt(e.getUTCHours(),n,2)}function WSe(e,n){return wt(e.getUTCHours()%12||12,n,2)}function VSe(e,n){return wt(1+yp.count(Bi(e),e),n,3)}function MU(e,n){return wt(e.getUTCMilliseconds(),n,3)}function qSe(e,n){return MU(e,n)+"000"}function XSe(e,n){return wt(e.getUTCMonth()+1,n,2)}function YSe(e,n){return wt(e.getUTCMinutes(),n,2)}function JSe(e,n){return wt(e.getUTCSeconds(),n,2)}function ZSe(e){var n=e.getUTCDay();return n===0?7:n}function eke(e,n){return wt(xp.count(Bi(e)-1,e),n,2)}function QU(e){var n=e.getUTCDay();return n>=4||n===0?gA(e):gA.ceil(e)}function tke(e,n){return e=QU(e),wt(gA.count(Bi(e),e)+(Bi(e).getUTCDay()===4),n,2)}function nke(e){return e.getUTCDay()}function rke(e,n){return wt(Fg.count(Bi(e)-1,e),n,2)}function ske(e,n){return wt(e.getUTCFullYear()%100,n,2)}function ake(e,n){return e=QU(e),wt(e.getUTCFullYear()%100,n,2)}function ike(e,n){return wt(e.getUTCFullYear()%1e4,n,4)}function oke(e,n){var r=e.getUTCDay();return e=r>=4||r===0?gA(e):gA.ceil(e),wt(e.getUTCFullYear()%1e4,n,4)}function lke(){return"+0000"}function sj(){return"%"}function aj(e){return+e}function ij(e){return Math.floor(+e/1e3)}var nc,DU,RU;cke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function cke(e){return nc=cSe(e),DU=nc.format,nc.parse,RU=nc.utcFormat,nc.utcParse,nc}function Ake(e){return new Date(e)}function uke(e){return e instanceof Date?+e:+new Date(+e)}function F2(e,n,r,s,a,i,o,c,A,u){var h=p2(),d=h.invert,f=h.domain,g=u(".%L"),m=u(":%S"),y=u("%I:%M"),v=u("%I %p"),p=u("%a %d"),x=u("%b %d"),b=u("%B"),w=u("%Y");function _(B){return(A(B)<B?g:c(B)<B?m:o(B)<B?y:i(B)<B?v:s(B)<B?a(B)<B?p:x:r(B)<B?b:w)(B)}return h.invert=function(B){return new Date(d(B))},h.domain=function(B){return arguments.length?f(Array.from(B,uke)):f().map(Ake)},h.ticks=function(B){var k=f();return e(k[0],k[k.length-1],B??10)},h.tickFormat=function(B,k){return k==null?_:u(k)},h.nice=function(B){var k=f();return(!B||typeof B.range!="function")&&(B=n(k[0],k[k.length-1],B??10)),B?f(BU(k,B)):h},h.copy=function(){return Sh(h,F2(e,n,r,s,a,i,o,c,A,u))},h}function dke(){return $s.apply(F2(oSe,lSe,Ci,E2,vp,kh,j2,S2,nl,DU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hke(){return $s.apply(F2(aSe,iSe,Bi,T2,xp,yp,N2,k2,nl,RU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wp(){var e=0,n=1,r,s,a,i,o=wr,c=!1,A;function u(d){return d==null||isNaN(d=+d)?A:o(a===0?.5:(d=(i(d)-r)*a,c?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,n]=d,r=i(e=+e),s=i(n=+n),a=r===s?0:1/(s-r),u):[e,n]},u.clamp=function(d){return arguments.length?(c=!!d,u):c},u.interpolator=function(d){return arguments.length?(o=d,u):o};function h(d){return function(f){var g,m;return arguments.length?([g,m]=f,o=d(g,m),u):[o(0),o(1)]}}return u.range=h($a),u.rangeRound=h(n2),u.unknown=function(d){return arguments.length?(A=d,u):A},function(d){return i=d,r=d(e),s=d(n),a=r===s?0:1/(s-r),u}}function To(e,n){return n.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function $U(){var e=Eo(wp()(wr));return e.copy=function(){return To(e,$U())},Pi.apply(e,arguments)}function OU(){var e=w2(wp()).domain([1,10]);return e.copy=function(){return To(e,OU()).base(e.base())},Pi.apply(e,arguments)}function LU(){var e=b2(wp());return e.copy=function(){return To(e,LU()).constant(e.constant())},Pi.apply(e,arguments)}function I2(){var e=_2(wp());return e.copy=function(){return To(e,I2()).exponent(e.exponent())},Pi.apply(e,arguments)}function fke(){return I2.apply(null,arguments).exponent(.5)}function HU(){var e=[],n=wr;function r(s){if(s!=null&&!isNaN(s=+s))return n((Bh(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(fo),r},r.interpolator=function(s){return arguments.length?(n=s,r):n},r.range=function(){return e.map((s,a)=>n(a/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>b5e(e,i/s))},r.copy=function(){return HU(n).domain(e)},Pi.apply(r,arguments)}function bp(){var e=0,n=.5,r=1,s=1,a,i,o,c,A,u=wr,h,d=!1,f;function g(y){return isNaN(y=+y)?f:(y=.5+((y=+h(y))-i)*(s*y<s*i?c:A),u(d?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,n,r]=y,a=h(e=+e),i=h(n=+n),o=h(r=+r),c=a===i?0:.5/(i-a),A=i===o?0:.5/(o-i),s=i<a?-1:1,g):[e,n,r]},g.clamp=function(y){return arguments.length?(d=!!y,g):d},g.interpolator=function(y){return arguments.length?(u=y,g):u};function m(y){return function(v){var p,x,b;return arguments.length?([p,x,b]=v,u=Jbe(y,[p,x,b]),g):[u(0),u(.5),u(1)]}}return g.range=m($a),g.rangeRound=m(n2),g.unknown=function(y){return arguments.length?(f=y,g):f},function(y){return h=y,a=y(e),i=y(n),o=y(r),c=a===i?0:.5/(i-a),A=i===o?0:.5/(o-i),s=i<a?-1:1,g}}function zU(){var e=Eo(bp()(wr));return e.copy=function(){return To(e,zU())},Pi.apply(e,arguments)}function KU(){var e=w2(bp()).domain([.1,1,10]);return e.copy=function(){return To(e,KU()).base(e.base())},Pi.apply(e,arguments)}function GU(){var e=b2(bp());return e.copy=function(){return To(e,GU()).constant(e.constant())},Pi.apply(e,arguments)}function U2(){var e=_2(bp());return e.copy=function(){return To(e,U2()).exponent(e.exponent())},Pi.apply(e,arguments)}function gke(){return U2.apply(null,arguments).exponent(.5)}const mke=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:m2,scaleDiverging:zU,scaleDivergingLog:KU,scaleDivergingPow:U2,scaleDivergingSqrt:gke,scaleDivergingSymlog:GU,scaleIdentity:CU,scaleImplicit:P1,scaleLinear:x2,scaleLog:SU,scaleOrdinal:mp,scalePoint:S5e,scalePow:C2,scaleQuantile:NU,scaleQuantize:EU,scaleRadial:jU,scaleSequential:$U,scaleSequentialLog:OU,scaleSequentialPow:I2,scaleSequentialQuantile:HU,scaleSequentialSqrt:fke,scaleSequentialSymlog:LU,scaleSqrt:q5e,scaleSymlog:kU,scaleThreshold:TU,scaleTime:dke,scaleUtc:hke,tickFormat:_U},Symbol.toStringTag,{value:"Module"})),pke=["linear","time","log","sqrt"];function yke(e){return`scale${(r=>r&&r[0].toUpperCase()+r.slice(1))(e)}`}function WU(e){return typeof e=="function"?Et(e.copy)&&Et(e.domain)&&Et(e.range):typeof e=="string"?pke.includes(e):!1}function VU(e,n){if(e.scale){if(e.scale.x||e.scale.y)return!!e.scale[n]}else return!1;return!0}function vke(e,n){if(!VU(e,n))return;const r=e.scale[n]||e.scale;return typeof r=="string"?r:XU(r)}function xke(e,n){let r;if(e.domain&&e.domain[n]?r=e.domain[n]:e.domain&&Array.isArray(e.domain)&&(r=e.domain),!!r)return bi(r)?"time":"linear"}function qU(e,n){if(!e.data)return"linear";const r=A2(e[n]),s=e.data.map(a=>{const i=Us(r(a))?r(a)[n]:r(a);return i!==void 0?i:a[n]});return bi(s)?"time":"linear"}function Gd(e){if(WU(e)){const n=yke(e);return mke[n]()}return x2()}function Ms(e,n){const r=Q1(e,n);if(r)return typeof r=="string"?Gd(r):r;const s=xke(e,n)||qU(e,n);return Gd(s)}function Q1(e,n){if(!VU(e,n))return;const r=e.scale[n]||e.scale;if(WU(r))return Et(r)?r:Gd(r)}function Ig(e,n){return vke(e,n)||qU(e,n)}const wke=[{name:"quantile",method:"quantiles"},{name:"log",method:"base"}];function XU(e){if(typeof e=="string")return e;const n=wke.filter(r=>e[r.method]!==void 0)[0];return n?n.name:void 0}const bke="@@__IMMUTABLE_ITERABLE__@@",_ke="@@__IMMUTABLE_RECORD__@@",Cke="@@__IMMUTABLE_LIST__@@";function jh(e){return!!(e&&e[bke])}function Bke(e){return!!(e&&e[_ke])}function Ske(e){return jh(e)||Bke(e)}function kke(e){return!!(e&&e[Cke])}function YU(e,n){return jh(e)?e.reduce((r,s,a)=>{let i=s;return n&&n[a]&&(i=YU(s)),r[a]=i,r},kke(e)?[]:{}):e}function D1(e){const n={errorX:!0,errorY:!0};return Ske(e)?YU(e,n):e}function jke(e){return jh(e)?e.size:e.length}function oj(e,n){const s=(Us(e.domain)?e.domain[n]:e.domain)||Ms(e,n).domain(),a=e.samples||1,i=Math.max(...s),o=Math.min(...s),c=(i-o)/a,A=u2(o,i,c);return A[A.length-1]===i?A:A.concat(i)}function JU(e,n,r){if(r===void 0&&(r="ascending"),!n)return e;let s=n;return(n==="x"||n==="y")&&(s=`_${n}`),Z_(e,s,r==="ascending"?"asc":"desc")}function Nke(e,n){const r=1/Number.MAX_SAFE_INTEGER,s={x:Ig(n,"x"),y:Ig(n,"y")};if(s.x!=="log"&&s.y!=="log")return e;const a=(o,c)=>s[c]==="log"?o[`_${c}`]!==0:!0,i=o=>{const c=a(o,"x")?o._x:r,A=a(o,"y")?o._y:r,u=a(o,"y0")?o._y0:r;return Object.assign({},o,{_x:c,_y:A,_y0:u})};return e.map(o=>a(o,"x")&&a(o,"y")&&a(o,"y0")?o:i(o))}function Eke(e){return Et(e)?e:e==null?()=>{}:TI(e)}function Tke(e,n){const r=!!e.eventKey,s=Eke(e.eventKey);return n.map((a,i)=>{if(a.eventKey!==void 0)return a;if(r){const o=s(a,i);return o!==void 0?Object.assign({eventKey:o},a):a}return a})}function Fke(e,n,r){const s=m=>m!==void 0,a=ua(n.x),i=Aa(n.x),o=ua(n.y),c=Aa(n.y),A=m=>y=>s(y)&&y<m,u=m=>y=>s(y)&&y>m,h=A(a),d=A(o),f=u(i),g=u(c);return e.map(m=>{let{_x:y,_y:v,_y0:p,_y1:x}=m;(h(y)||f(y))&&(y=null);const b=s(p)?p:r,w=s(x)?x:v;return s(w)?(!s(b)&&(d(w)||g(w))&&(v=null),(d(b)&&d(w)||g(b)&&g(w))&&(v=p=x=null),d(b)&&!d(w)&&(p=o),g(b)&&!g(w)&&(p=c),Object.assign({},m,iU({_x:y,_y:v,_y0:p,_y1:x},c5e))):m})}function Av(e,n){const r=ZU(e,n),s=mA(e,n),a=Uke(e,n),i=_l([...r,...s,...a]);return i.length===0?null:i.reduce((o,c,A)=>(o[c]=A+1,o),{})}function lj(e,n,r){if(!(Array.isArray(e)||jh(e))||jke(e)<1)return[];const a=["x","y","y0"];r=Array.isArray(r)?r:a;const i=f=>A2(n[f]!==void 0?n[f]:f),o=r.reduce((f,g)=>(f[g]=i(g),f),{}),c=i5e(r,a)&&n.x==="_x"&&n.y==="_y"&&n.y0==="_y0";let A;c===!1&&(A={x:r.indexOf("x")!==-1?Av(n,"x"):void 0,y:r.indexOf("y")!==-1?Av(n,"y"):void 0,y0:r.indexOf("y0")!==-1?Av(n,"y"):void 0});const u=c?e:e.reduce((f,g,m)=>{const y=D1(g),v={x:m,y},p=r.reduce((b,w)=>{const _=o[w](y),B=_!==void 0?_:v[w];return B!==void 0&&(typeof B=="string"&&A[w]?(b[`${w}Name`]=B,b[`_${w}`]=A[w][B]):b[`_${w}`]=B),b},{}),x=Object.assign({},p,y);return mn(x)||f.push(x),f},[]),h=JU(u,n.sortKey,n.sortOrder),d=Nke(h,n);return Tke(n,d)}function Ike(e){const n=oj(e,"x"),r=oj(e,"y");return n.map((a,i)=>({x:a,y:r[i]}))}function P2(e,n){return e.categories&&!Array.isArray(e.categories)?e.categories[n]:e.categories}function fa(e){return e.data?lj(e.data,e):lj(Ike(e),e)}function ZU(e,n){const{tickValues:r,tickFormat:s}=e;let a;return!r||!Array.isArray(r)&&!r[n]?a=s&&Array.isArray(s)?s:[]:a=r[n]||r,a.filter(i=>typeof i=="string")}function mA(e,n){if(!e.categories)return[];const r=P2(e,n),s=r&&r.filter(a=>typeof a=="string");return s?CCe(s):[]}function Uke(e,n){if(!(Array.isArray(e.data)||jh(e.data)))return[];const s=e[n]===void 0?n:e[n],a=A2(s),i=e.data.reduce((A,u)=>(A.push(D1(u)),A),[]);return JU(i,e.sortKey,e.sortOrder).reduce((A,u)=>{const h=D1(u);return A.push(a(h)),A},[]).filter(A=>typeof A=="string").reduce((A,u)=>(u!=null&&A.indexOf(u)===-1&&A.push(u),A),[])}function Pke(e){const n=a=>a&&a.type?a.type.role:"";let r=n(e);if(r==="portal"){const a=q.Children.toArray(e.props.children);r=a.length?n(a[0]):""}return["area","bar","boxplot","candlestick","errorbar","group","histogram","line","pie","scatter","stack","voronoi"].includes(r)}function Mke(e,n,r){return Ig(n,r)!=="log"?e:(i=>{const o=i[0]<0||i[1]<0?-1/Number.MAX_SAFE_INTEGER:1/Number.MAX_SAFE_INTEGER,c=i[0]===0?o:i[0],A=i[1]===0?o:i[1];return[c,A]})(e)}function Qke(e,n){const r=s=>Array.isArray(s)?{left:s[0],right:s[1]}:{left:s,right:s};return Us(e.domainPadding)?r(e.domainPadding[n]):r(e.domainPadding)}function Dke(e,n){const r=`_${n}`;return e.flat().map(s=>s[r]&&s[r][1]!==void 0?s[r][1]:s[r])}function cj(e,n,r){r===void 0&&(r="min");const s=c=>r==="max"?Math.max(...c):Math.min(...c),a=r==="max"?-1/0:1/0;let i=!1;const o=e.flat().reduce((c,A)=>{const u=A[`_${n}0`]!==void 0?A[`_${n}0`]:A[`_${n}`],h=A[`_${n}1`]!==void 0?A[`_${n}1`]:A[`_${n}`],d=s([u,h]);return i=i||u instanceof Date||h instanceof Date,s([c,d])},a);return i?new Date(o):o}function Rke(e,n,r){if(!n.domainPadding)return e;const s=Ll(n,r),a=Ol(n,r),i=Qke(n,r);if(!i.left&&!i.right)return e;const o=ua(e),c=Aa(e),A=Z2e(r,n.horizontal),u=Rn(n,A),h=Math.abs(u[0]-u[1]),d=Math.max(h-i.left-i.right,1),f=Math.abs(c.valueOf()-o.valueOf())/d*h,g={left:f*i.left/h,right:f*i.right/h};let m={min:o.valueOf()-g.left,max:c.valueOf()+g.right};const y=Us(n.singleQuadrantDomainPadding)?n.singleQuadrantDomainPadding[r]:n.singleQuadrantDomainPadding,v=o.valueOf()>=0&&m.min<=0||c.valueOf()<=0&&m.max>=0,p=(b,w)=>w==="min"&&o.valueOf()>=0&&b<=0||w==="max"&&c.valueOf()<=0&&b>=0?0:b;if(v&&y!==!1){const b={left:Math.abs(c-o)*i.left/h,right:Math.abs(c-o)*i.right/h},w={min:p(o.valueOf()-b.left,"min"),max:p(c.valueOf()+b.right,"max")},_={left:Math.abs(w.max-w.min)*i.left/h,right:Math.abs(w.max-w.min)*i.right/h};m={min:p(o.valueOf()-_.left,"min"),max:p(c.valueOf()+_.right,"max")}}const x={min:s!==void 0?s:m.min,max:a!==void 0?a:m.max};return o instanceof Date||c instanceof Date?Si(new Date(x.min),new Date(x.max)):Si(x.min,x.max)}function M2(e,n){const r=Et(e)?e:D2,s=Et(n)?n:Q2;return(a,i)=>{const o=R2(a,i);if(o)return s(o,a,i);const c=P2(a,i),A=c?$ke(a,i,c):r(a,i);return A?s(A,a,i):void 0}}function Q2(e,n,r){return Mke(Rke(e,n,r),n,r)}function Cl(e,n){return M2()(e,n)}function $ke(e,n,r){const s=r||P2(e,n),{polar:a,startAngle:i=0,endAngle:o=360}=e;if(!s)return;const c=Ll(e,n),A=Ol(e,n),u=wg(s)?mA(e,n):[],h=u.length===0?null:u.reduce((y,v,p)=>(y[v]=p+1,y),{}),d=h?s.map(y=>h[y]):s,f=c!==void 0?c:ua(d),g=A!==void 0?A:Aa(d),m=Si(f,g);return a&&n==="x"&&Math.abs(i-o)===360?$2(m,d):m}function D2(e,n,r){const s=r||fa(e),{polar:a,startAngle:i=0,endAngle:o=360}=e,c=Ll(e,n),A=Ol(e,n);if(s.length<1)return c!==void 0&&A!==void 0?Si(c,A):void 0;const u=c!==void 0?c:cj(s,n,"min"),h=A!==void 0?A:cj(s,n,"max"),d=Si(u,h);return a&&n==="x"&&Math.abs(i-o)===360?$2(d,Dke(s,n)):d}function Si(e,n){const r=s=>{const a=s===0?2*Math.pow(10,-10):Math.pow(10,-10),i=1,o=s instanceof Date?new Date(Number(s)-i):Number(s)-a,c=s instanceof Date?new Date(Number(s)+i):Number(s)+a;return s===0?[0,c]:[o,c]};return Number(e)===Number(n)?r(n):[e,n]}function R2(e,n){const r=Ll(e,n),s=Ol(e,n);if(Us(e.domain)&&e.domain[n])return e.domain[n];if(Array.isArray(e.domain))return e.domain;if(r!==void 0&&s!==void 0)return Si(r,s)}function R1(e,n){const r=R2(e,n);if(r)return r;const s=fa(e),a=s.reduce((A,u)=>u._y0<A?u._y0:A,1/0),i=A=>{if(n==="x")return A;const u=a!==1/0?a:0,h=Ol(e,n),d=Ll(e,n),f=h!==void 0?h:Aa(A,u),g=d!==void 0?d:ua(A,u);return Si(g,f)};return M2(()=>D2(e,n,s),A=>Q2(i(A),e,n))(e,n)}function Ol(e,n){return Us(e.maxDomain)&&e.maxDomain[n]!==void 0?e.maxDomain[n]:typeof e.maxDomain=="number"||mU(e.maxDomain)?e.maxDomain:void 0}function Ll(e,n){return Us(e.minDomain)&&e.minDomain[n]!==void 0?e.minDomain[n]:typeof e.minDomain=="number"||mU(e.minDomain)?e.minDomain:void 0}function $2(e,n){const r=n5e(n.sort((a,i)=>a-i)),s=r[1]-r[0];return[e[0],e[1]+s]}function eP(e){const n=a=>a&&a.type?a.type.role:"";let r=n(e);if(r==="portal"){const a=q.Children.toArray(e.props.children);r=a.length?n(a[0]):""}return["area","axis","bar","boxplot","candlestick","errorbar","group","histogram","line","pie","scatter","stack","voronoi"].includes(r)}function Oke(e){return e}function Os(e){const{dependentAxis:n}=e;return n?"y":"x"}function tP(e,n){const r=n||Oke,s=a=>a.reduce((i,o)=>o.type&&o.type.role==="axis"&&r(o)?i.concat(o):o.props&&o.props.children?i.concat(s(q.Children.toArray(o.props.children))):i,[]);return s(e)}function nP(e,n){return tP(e,s=>s.type.getAxis(s.props)===n)[0]}function Aj(e,n){const r=a=>n==="dependent"?a.props.dependentAxis:!a.props.dependentAxis,s=a=>a.reduce((i,o)=>o.type&&o.type.role==="axis"&&r(o)||o.props&&o.props.children&&s(q.Children.toArray(o.props.children)).length>0?i.concat(o):i,[]);return s(e)}function rP(e){const n=r=>{const s=Math.min(...r),a=Math.max(...r);return a<0?a:Math.max(0,s)};return{x:bi(e.x)?new Date(Math.min(...e.x)):n(e.x),y:bi(e.y)?new Date(Math.min(...e.y)):n(e.y)}}function uj(e,n){const r=()=>e<=0&&Math.max(...n)<=0?"negative":"positive";return bi(n)?"positive":r()}function _p(e){const n=e.orientation||(e.dependentAxis?"left":"bottom");return{top:!1,bottom:!1,left:!0,right:!0}[n]}function Cp(e){return e.tickValues!==void 0&&wg(e.tickValues)}function Lke(e){const{tickValues:n}=e,r=Os(e),s=e.stringMap&&e.stringMap[r],a=n&&!bi(n)?u=>u:void 0;if(!s)return Cp(e)?(u,h)=>n[h]:a;const i=s&&YI(s),A=["",...Z_(Object.values(s),u=>u).map(u=>i[u]),""];return u=>A[u]}function Hke(e){const n=Os(e),r=e.stringMap&&e.stringMap[n],s=Array.isArray(e.categories)?e.categories:e.categories&&e.categories[n],a=s&&_Ce(s)?s.map(o=>r[o]):void 0,i=r&&Object.values(r);return a&&a.length!==0?a:i}function O2(e){const{tickValues:n,tickFormat:r}=e;if((n==null?void 0:n.length)===0)return[];const s=Os(e),a=e.stringMap&&e.stringMap[s],i=()=>{if(!(!r||!Array.isArray(r)))return wg(r)?r.map((u,h)=>h):r};let o=n;a&&(o=Hke(e)),n&&wg(n)&&(o=a?n.map(u=>a[u]):u2(1,n.length+1));const c=o?_l(o):i(),A=u=>{const h=[],d=e.domain&&e.domain[s]||e.domain;if(u)return u.forEach((f,g)=>{Array.isArray(d)?f>=ua(d).valueOf()&&f<=Aa(d).valueOf()&&h.push({value:f,index:g}):h.push({value:f,index:g})}),h};return Array.isArray(c)&&c.length?A(c):void 0}function sP(e,n){const{tickFormat:r}=e,s=Os(e),a=e.stringMap&&e.stringMap[s];if(r){if(r&&Array.isArray(r)){const i=O2(e),o=i==null?void 0:i.map(A=>A.index),c=r.filter((A,u)=>o==null?void 0:o.includes(u));return(A,u)=>c[u]}else if(r&&Et(r))return a?(o,c,A)=>{const u=YI(a),h=A.map(d=>u[d]);return e.tickFormat(u[o],c,h)}:r}else{const i=Lke(e),o=n.tickFormat&&Et(n.tickFormat)?n.tickFormat():c=>c;return i||o}return i=>i}function dj(e,n){if(!n||!Array.isArray(e)||e.length<=n)return e;const r=Math.floor(e.length/n);return e.filter((s,a)=>a%r===0)}function aP(e,n,r){r===void 0&&(r=!1);const{tickCount:s}=e,a=O2(e);if((a==null?void 0:a.length)===0)return[""];const i=a?a.map(o=>o.value):void 0;if(i)return dj(i,s);if(n.ticks&&Et(n.ticks)){const o=s||5,c=n.ticks(o),A=Array.isArray(c)&&c.length?c:n.domain(),u=dj(A,s);if(r){const h=u.filter(d=>d!==0);return h.length?h:u}return u}return n.domain()}function zke(e,n){const{polar:r,startAngle:s=0,endAngle:a=360}=e,i=O2(e),o=i&&(i==null?void 0:i.length)!==0?i.map(p=>p.value):void 0;if(!Array.isArray(o))return;const c=Ll(e,n),A=Ol(e,n),u=Cp(e),h=o.map(p=>Number(p)),d=u?1:ua(h),f=u?o.length:Aa(h),y=Si(c!==void 0?c:d,A!==void 0?A:f),v=r&&n==="x"&&Math.abs(s-a)===360?$2(y,h):y;return _p(e)&&!r&&v.reverse(),v}function DA(e,n){const r=Os(e);if(!(n&&n!==r))return M2(zke)(e,r)}function iP(e,n){if(!e.axisValue)return;const r=n==="x"?"y":"x",s=p1(e.scale)&&Et(e.scale[r])?e.scale[r]:void 0;if(!s)return;const a=n==="x"?"y":"x",i=p1(e.stringMap)&&e.stringMap[a],o=i&&typeof e.axisValue=="string"?i[e.axisValue]:e.axisValue;return s(o)}function Bp(e,n){if(!p1(e.theme))return la(e,n,"axis");let r="axis";if(e.dependentAxis&&e.theme.dependentAxis?r="dependentAxis":!e.dependentAxis&&e.theme.independentAxis&&(r="independentAxis"),r==="axis")return la(e,n,"axis");const s=Ve({},e.theme[r],e.theme.axis),a=Object.assign({},e.theme,{axis:s});return la(Object.assign({},e,{theme:a}),n,"axis")}function oP(){return{onLoad:{duration:2e3},onExit:{duration:500},onEnter:{duration:500}}}function lP(){return{onLoad:{duration:2e3,before:()=>({_y:0,_y1:0,_y0:0}),after:e=>({_y:e._y,_y1:e._y1,_y0:e._y0})},onExit:{duration:500,before:(e,n,r)=>{const s=a=>(n===0?r[n+1]:r[n-1])[a];return{_x:s("_x"),_y:s("_y"),_y0:s("_y0")}}},onEnter:{duration:500,before:(e,n,r)=>{const s=a=>(n===0?r[n+1]:r[n-1])[a];return{_x:s("_x"),_y:s("_y"),_y0:s("_y0")}},after:e=>({_x:e._x,_y:e._y,_y1:e._y1,_y0:e._y0})}}}function Kke(){return{onLoad:{duration:2e3,before:()=>({opacity:0}),after:e=>e},onExit:{duration:600,before:()=>({opacity:0})},onEnter:{duration:600,before:()=>({opacity:0}),after:e=>e}}}function Gke(e){const n=q.useRef();return q.useEffect(()=>{n.current=e}),n.current}const Wke={nodesShouldLoad:!1,nodesDoneLoad:!1,animating:!0},Vke=function(e){e===void 0&&(e=Wke);const[n,r]=q.useState(e),s=q.useCallback(c=>{r(A=>({...A,...c}))},[r]),a=q.useCallback((c,A,u)=>{if(!(c!=null&&c.animate))return A.props.animate;const h=()=>{let m=n&&n.childrenTransitions;return m=Nk(m)?m[u]:m,Ve({childrenTransitions:m},n)};let d=c.animate&&c.animate.getTransitions;const f=h(),g=c.animate&&c.animate.parentState||f;if(!d){const m=sU(c,f,y=>s(y));d=y=>m(y,u)}return Ve({getTransitions:d,parentState:g},c.animate,A.props.animate)},[n,s]),i=q.useCallback((c,A)=>{if(c!=null&&c.animate)if(c.animate.parentState){const h=c.animate.parentState.nodesWillExit?c:null,d=Ve({oldProps:h,nextProps:A},c.animate.parentState);s(d)}else{const u=q.Children.toArray(c.children),h=q.Children.toArray(A.children),d=p=>{const x=b=>b.type&&b.type.continuous;return Array.isArray(p)?p.some(x):x(p)},f=!c.polar&&u.some(p=>{var x;return d(p)||((x=p==null?void 0:p.props)==null?void 0:x.children)&&d(p.props.children)}),{nodesWillExit:g,nodesWillEnter:m,childrenTransitions:y,nodesShouldEnter:v}=rU(u,h);s({nodesWillExit:g,nodesWillEnter:m,nodesShouldEnter:v,childrenTransitions:Nk(y)?y[0]:y,oldProps:g?c:void 0,nextProps:A,continuous:f})}},[s]),o=q.useCallback(c=>n&&n.nodesWillExit&&n.oldProps||c,[n]);return{state:n,setState:s,getAnimationProps:a,setAnimationState:i,getProps:o}};function qke(e,n){n===void 0&&(n={});const r=n._y>=0?1:-1,s=e.style&&e.style.labels||{};return n.verticalAnchor||s.verticalAnchor?n.verticalAnchor||s.verticalAnchor:e.horizontal?"middle":r>=0?"end":"start"}function Xke(e,n){n===void 0&&(n={});const{style:r,horizontal:s}=e,a=n._y>=0?1:-1,i=r&&r.labels||{};return n.verticalAnchor||i.verticalAnchor?n.verticalAnchor||i.verticalAnchor:s?a>=0?"start":"end":"middle"}function Yke(e,n){n===void 0&&(n={});const r=e.style&&e.style.labels||{};return n.angle===void 0?r.angle:n.angle}function Jke(e,n){n===void 0&&(n={});const{horizontal:r,style:s}=e,a=s.labels||{},i=Xe(a.padding,e)||0,o=n._y<0?-1:1;return{x:r?o*i:0,y:r?0:-1*o*i}}function Zke(e,n){if(e.polar)return{};const r=Jke(e,n);return{dx:r.x,dy:r.y}}function eje(e,n){const{polar:r}=e,{x:s,y:a}=i2(e,n);if(!r)return{x:s,y:a};const i=tje(e,n);return{x:s+i.x,y:a+i.y}}function tje(e,n){const{style:r}=e,s=K2(e,n),a=r.labels||{},i=Xe(a.padding,e)||0,o=Mn(s);return{x:i*Math.cos(o),y:-i*Math.sin(o)}}function L2(e){const{labelComponent:n,labelPlacement:r,polar:s}=e,a=s?"perpendicular":"vertical";return r||n.props&&n.props.labelPlacement||a}function nje(e){return e<45||e>315?"right":e>=45&&e<=135?"top":e>135&&e<225?"left":"bottom"}function Sp(e,n,r){return n===void 0&&(n={}),n.label!==void 0?n.label:Array.isArray(e.labels)?e.labels[r]:e.labels}function H2(e,n){const r=L2(e);return r==="perpendicular"||r==="vertical"&&(n===90||n===270)?"middle":n<=90||n>270?"start":"end"}function cP(e,n){const r=L2(e),s=nje(n);return r==="parallel"||s==="left"||s==="right"?"middle":s==="top"?"end":"start"}function z2(e,n){const{labelPlacement:r,datum:s}=e;if(!r||r==="vertical")return 0;const a=n!==void 0?n%360:K2(e,s),i=a>90&&a<180||a>270?1:-1;let o=0;return a===0||a===180?o=90:a>0&&a<180?o=90-a:a>180&&a<360&&(o=270-a),o+i*(r==="perpendicular"?0:90)}function K2(e,n){const{x:r}=JI(n);return c2(e.scale.x(r))%360}function G2(e,n){const{scale:r,data:s,style:a,horizontal:i,polar:o,width:c,height:A,theme:u,labelComponent:h,disableInlineStyles:d}=e,f=s[n],g=K2(e,f),m=o?H2(e,g):Xke(e,f),y=o?cP(e,g):qke(e,f),v=Yke(e,f),p=Sp(e,f,n),x=L2(e),{x:b,y:w}=eje(e,f),{dx:_,dy:B}=Zke(e,f),k={angle:v,data:s,datum:f,disableInlineStyles:d,horizontal:i,index:n,polar:o,scale:r,labelPlacement:x,text:p,textAnchor:m,verticalAnchor:y,x:b,y:w,dx:_,dy:B,width:c,height:A,style:a.labels};if(!ZI(h))return k;const N=u&&u.tooltip||{};return Ve({},k,a2(N,["style"]))}function ct(e){return function(){return e}}const hj=Math.abs,nr=Math.atan2,si=Math.cos,rje=Math.max,Vc=Math.min,Ir=Math.sin,Ht=Math.sqrt,sr=1e-12,_o=Math.PI,Ug=_o/2,go=2*_o;function sje(e){return e>1?0:e<-1?_o:Math.acos(e)}function fj(e){return e>=1?Ug:e<=-1?-Ug:Math.asin(e)}const $1=Math.PI,O1=2*$1,Ko=1e-6,aje=O1-Ko;function AP(e){this._+=e[0];for(let n=1,r=e.length;n<r;++n)this._+=arguments[n]+e[n]}function ije(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return AP;const r=10**n;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}let oje=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?AP:ije(n)}moveTo(n,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,r){this._append`L${this._x1=+n},${this._y1=+r}`}quadraticCurveTo(n,r,s,a){this._append`Q${+n},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(n,r,s,a,i,o){this._append`C${+n},${+r},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(n,r,s,a,i){if(n=+n,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,A=s-n,u=a-r,h=o-n,d=c-r,f=h*h+d*d;if(this._x1===null)this._append`M${this._x1=n},${this._y1=r}`;else if(f>Ko)if(!(Math.abs(d*A-u*h)>Ko)||!i)this._append`L${this._x1=n},${this._y1=r}`;else{let g=s-o,m=a-c,y=A*A+u*u,v=g*g+m*m,p=Math.sqrt(y),x=Math.sqrt(f),b=i*Math.tan(($1-Math.acos((y+f-v)/(2*p*x)))/2),w=b/x,_=b/p;Math.abs(w-1)>Ko&&this._append`L${n+w*h},${r+w*d}`,this._append`A${i},${i},0,0,${+(d*g>h*m)},${this._x1=n+_*A},${this._y1=r+_*u}`}}arc(n,r,s,a,i,o){if(n=+n,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let c=s*Math.cos(a),A=s*Math.sin(a),u=n+c,h=r+A,d=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Ko||Math.abs(this._y1-h)>Ko)&&this._append`L${u},${h}`,s&&(f<0&&(f=f%O1+O1),f>aje?this._append`A${s},${s},0,1,${d},${n-c},${r-A}A${s},${s},0,1,${d},${this._x1=u},${this._y1=h}`:f>Ko&&this._append`A${s},${s},0,${+(f>=$1)},${d},${this._x1=n+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(n,r,s,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}};function Nh(e){let n=3;return e.digits=function(r){if(!arguments.length)return n;if(r==null)n=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);n=s}return e},()=>new oje(n)}function lje(e){return e.innerRadius}function cje(e){return e.outerRadius}function Aje(e){return e.startAngle}function uje(e){return e.endAngle}function dje(e){return e&&e.padAngle}function hje(e,n,r,s,a,i,o,c){var A=r-e,u=s-n,h=o-a,d=c-i,f=d*A-h*u;if(!(f*f<sr))return f=(h*(n-i)-d*(e-a))/f,[e+f*A,n+f*u]}function xf(e,n,r,s,a,i,o){var c=e-r,A=n-s,u=(o?i:-i)/Ht(c*c+A*A),h=u*A,d=-u*c,f=e+h,g=n+d,m=r+h,y=s+d,v=(f+m)/2,p=(g+y)/2,x=m-f,b=y-g,w=x*x+b*b,_=a-i,B=f*y-m*g,k=(b<0?-1:1)*Ht(rje(0,_*_*w-B*B)),N=(B*b-x*k)/w,C=(-B*x-b*k)/w,j=(B*b+x*k)/w,E=(-B*x+b*k)/w,F=N-v,I=C-p,T=j-v,L=E-p;return F*F+I*I>T*T+L*L&&(N=j,C=E),{cx:N,cy:C,x01:-h,y01:-d,x11:N*(a/_-1),y11:C*(a/_-1)}}function fje(){var e=lje,n=cje,r=ct(0),s=null,a=Aje,i=uje,o=dje,c=null,A=Nh(u);function u(){var h,d,f=+e.apply(this,arguments),g=+n.apply(this,arguments),m=a.apply(this,arguments)-Ug,y=i.apply(this,arguments)-Ug,v=hj(y-m),p=y>m;if(c||(c=h=A()),g<f&&(d=g,g=f,f=d),!(g>sr))c.moveTo(0,0);else if(v>go-sr)c.moveTo(g*si(m),g*Ir(m)),c.arc(0,0,g,m,y,!p),f>sr&&(c.moveTo(f*si(y),f*Ir(y)),c.arc(0,0,f,y,m,p));else{var x=m,b=y,w=m,_=y,B=v,k=v,N=o.apply(this,arguments)/2,C=N>sr&&(s?+s.apply(this,arguments):Ht(f*f+g*g)),j=Vc(hj(g-f)/2,+r.apply(this,arguments)),E=j,F=j,I,T;if(C>sr){var L=fj(C/f*Ir(N)),P=fj(C/g*Ir(N));(B-=L*2)>sr?(L*=p?1:-1,w+=L,_-=L):(B=0,w=_=(m+y)/2),(k-=P*2)>sr?(P*=p?1:-1,x+=P,b-=P):(k=0,x=b=(m+y)/2)}var O=g*si(x),Q=g*Ir(x),R=f*si(_),M=f*Ir(_);if(j>sr){var G=g*si(b),V=g*Ir(b),K=f*si(w),se=f*Ir(w),de;if(v<_o)if(de=hje(O,Q,K,se,G,V,R,M)){var ye=O-de[0],W=Q-de[1],U=G-de[0],$=V-de[1],ne=1/Ir(sje((ye*U+W*$)/(Ht(ye*ye+W*W)*Ht(U*U+$*$)))/2),J=Ht(de[0]*de[0]+de[1]*de[1]);E=Vc(j,(f-J)/(ne-1)),F=Vc(j,(g-J)/(ne+1))}else E=F=0}k>sr?F>sr?(I=xf(K,se,O,Q,g,F,p),T=xf(G,V,R,M,g,F,p),c.moveTo(I.cx+I.x01,I.cy+I.y01),F<j?c.arc(I.cx,I.cy,F,nr(I.y01,I.x01),nr(T.y01,T.x01),!p):(c.arc(I.cx,I.cy,F,nr(I.y01,I.x01),nr(I.y11,I.x11),!p),c.arc(0,0,g,nr(I.cy+I.y11,I.cx+I.x11),nr(T.cy+T.y11,T.cx+T.x11),!p),c.arc(T.cx,T.cy,F,nr(T.y11,T.x11),nr(T.y01,T.x01),!p))):(c.moveTo(O,Q),c.arc(0,0,g,x,b,!p)):c.moveTo(O,Q),!(f>sr)||!(B>sr)?c.lineTo(R,M):E>sr?(I=xf(R,M,G,V,f,-E,p),T=xf(O,Q,K,se,f,-E,p),c.lineTo(I.cx+I.x01,I.cy+I.y01),E<j?c.arc(I.cx,I.cy,E,nr(I.y01,I.x01),nr(T.y01,T.x01),!p):(c.arc(I.cx,I.cy,E,nr(I.y01,I.x01),nr(I.y11,I.x11),!p),c.arc(0,0,f,nr(I.cy+I.y11,I.cx+I.x11),nr(T.cy+T.y11,T.cx+T.x11),p),c.arc(T.cx,T.cy,E,nr(T.y11,T.x11),nr(T.y01,T.x01),!p))):c.arc(0,0,f,_,w,p)}if(c.closePath(),h)return c=null,h+""||null}return u.centroid=function(){var h=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,d=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-_o/2;return[si(d)*h,Ir(d)*h]},u.innerRadius=function(h){return arguments.length?(e=typeof h=="function"?h:ct(+h),u):e},u.outerRadius=function(h){return arguments.length?(n=typeof h=="function"?h:ct(+h),u):n},u.cornerRadius=function(h){return arguments.length?(r=typeof h=="function"?h:ct(+h),u):r},u.padRadius=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:ct(+h),u):s},u.startAngle=function(h){return arguments.length?(a=typeof h=="function"?h:ct(+h),u):a},u.endAngle=function(h){return arguments.length?(i=typeof h=="function"?h:ct(+h),u):i},u.padAngle=function(h){return arguments.length?(o=typeof h=="function"?h:ct(+h),u):o},u.context=function(h){return arguments.length?(c=h??null,u):c},u}var gje=Array.prototype.slice;function kp(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uP(e){this._context=e}uP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function Eh(e){return new uP(e)}function W2(e){return e[0]}function V2(e){return e[1]}function jp(e,n){var r=ct(!0),s=null,a=Eh,i=null,o=Nh(c);e=typeof e=="function"?e:e===void 0?W2:ct(e),n=typeof n=="function"?n:n===void 0?V2:ct(n);function c(A){var u,h=(A=kp(A)).length,d,f=!1,g;for(s==null&&(i=a(g=o())),u=0;u<=h;++u)!(u<h&&r(d=A[u],u,A))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(d,u,A),+n(d,u,A));if(g)return i=null,g+""||null}return c.x=function(A){return arguments.length?(e=typeof A=="function"?A:ct(+A),c):e},c.y=function(A){return arguments.length?(n=typeof A=="function"?A:ct(+A),c):n},c.defined=function(A){return arguments.length?(r=typeof A=="function"?A:ct(!!A),c):r},c.curve=function(A){return arguments.length?(a=A,s!=null&&(i=a(s)),c):a},c.context=function(A){return arguments.length?(A==null?s=i=null:i=a(s=A),c):s},c}function Pg(e,n,r){var s=null,a=ct(!0),i=null,o=Eh,c=null,A=Nh(u);e=typeof e=="function"?e:e===void 0?W2:ct(+e),n=typeof n=="function"?n:ct(n===void 0?0:+n),r=typeof r=="function"?r:r===void 0?V2:ct(+r);function u(d){var f,g,m,y=(d=kp(d)).length,v,p=!1,x,b=new Array(y),w=new Array(y);for(i==null&&(c=o(x=A())),f=0;f<=y;++f){if(!(f<y&&a(v=d[f],f,d))===p)if(p=!p)g=f,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),m=f-1;m>=g;--m)c.point(b[m],w[m]);c.lineEnd(),c.areaEnd()}p&&(b[f]=+e(v,f,d),w[f]=+n(v,f,d),c.point(s?+s(v,f,d):b[f],r?+r(v,f,d):w[f]))}if(x)return c=null,x+""||null}function h(){return jp().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:ct(+d),s=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:ct(+d),u):e},u.x1=function(d){return arguments.length?(s=d==null?null:typeof d=="function"?d:ct(+d),u):s},u.y=function(d){return arguments.length?(n=typeof d=="function"?d:ct(+d),r=null,u):n},u.y0=function(d){return arguments.length?(n=typeof d=="function"?d:ct(+d),u):n},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:ct(+d),u):r},u.lineX0=u.lineY0=function(){return h().x(e).y(n)},u.lineY1=function(){return h().x(e).y(r)},u.lineX1=function(){return h().x(s).y(n)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:ct(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(c=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=c=null:c=o(i=d),u):i},u}function mje(e,n){return n<e?-1:n>e?1:n>=e?0:NaN}function pje(e){return e}function yje(){var e=pje,n=mje,r=null,s=ct(0),a=ct(go),i=ct(0);function o(c){var A,u=(c=kp(c)).length,h,d,f=0,g=new Array(u),m=new Array(u),y=+s.apply(this,arguments),v=Math.min(go,Math.max(-go,a.apply(this,arguments)-y)),p,x=Math.min(Math.abs(v)/u,i.apply(this,arguments)),b=x*(v<0?-1:1),w;for(A=0;A<u;++A)(w=m[g[A]=A]=+e(c[A],A,c))>0&&(f+=w);for(n!=null?g.sort(function(_,B){return n(m[_],m[B])}):r!=null&&g.sort(function(_,B){return r(c[_],c[B])}),A=0,d=f?(v-u*b)/f:0;A<u;++A,y=p)h=g[A],w=m[h],p=y+(w>0?w*d:0)+b,m[h]={data:c[h],index:A,value:w,startAngle:y,endAngle:p,padAngle:x};return m}return o.value=function(c){return arguments.length?(e=typeof c=="function"?c:ct(+c),o):e},o.sortValues=function(c){return arguments.length?(n=c,r=null,o):n},o.sort=function(c){return arguments.length?(r=c,n=null,o):r},o.startAngle=function(c){return arguments.length?(s=typeof c=="function"?c:ct(+c),o):s},o.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:ct(+c),o):a},o.padAngle=function(c){return arguments.length?(i=typeof c=="function"?c:ct(+c),o):i},o}var dP=q2(Eh);function hP(e){this._curve=e}hP.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,n){this._curve.point(n*Math.sin(e),n*-Math.cos(e))}};function q2(e){function n(r){return new hP(e(r))}return n._curve=e,n}function ju(e){var n=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(r){return arguments.length?n(q2(r)):n()._curve},e}function L1(){return ju(jp().curve(dP))}function H1(){var e=Pg().curve(dP),n=e.curve,r=e.lineX0,s=e.lineX1,a=e.lineY0,i=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return ju(r())},delete e.lineX0,e.lineEndAngle=function(){return ju(s())},delete e.lineX1,e.lineInnerRadius=function(){return ju(a())},delete e.lineY0,e.lineOuterRadius=function(){return ju(i())},delete e.lineY1,e.curve=function(o){return arguments.length?n(q2(o)):n()._curve},e}function Nu(e,n){return[(n=+n)*Math.cos(e-=Math.PI/2),n*Math.sin(e)]}class fP{constructor(n,r){this._context=n,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,r){switch(n=+n,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,r,n,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,n,this._y0,n,r);break}}this._x0=n,this._y0=r}}class vje{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,r){if(n=+n,r=+r,this._point===0)this._point=1;else{const s=Nu(this._x0,this._y0),a=Nu(this._x0,this._y0=(this._y0+r)/2),i=Nu(n,this._y0),o=Nu(n,r);this._context.moveTo(...s),this._context.bezierCurveTo(...a,...i,...o)}this._x0=n,this._y0=r}}function gP(e){return new fP(e,!0)}function mP(e){return new fP(e,!1)}function xje(e){return new vje(e)}function wje(e){return e.source}function bje(e){return e.target}function Np(e){let n=wje,r=bje,s=W2,a=V2,i=null,o=null,c=Nh(A);function A(){let u;const h=gje.call(arguments),d=n.apply(this,h),f=r.apply(this,h);if(i==null&&(o=e(u=c())),o.lineStart(),h[0]=d,o.point(+s.apply(this,h),+a.apply(this,h)),h[0]=f,o.point(+s.apply(this,h),+a.apply(this,h)),o.lineEnd(),u)return o=null,u+""||null}return A.source=function(u){return arguments.length?(n=u,A):n},A.target=function(u){return arguments.length?(r=u,A):r},A.x=function(u){return arguments.length?(s=typeof u=="function"?u:ct(+u),A):s},A.y=function(u){return arguments.length?(a=typeof u=="function"?u:ct(+u),A):a},A.context=function(u){return arguments.length?(u==null?i=o=null:o=e(i=u),A):i},A}function _je(){return Np(gP)}function Cje(){return Np(mP)}function Bje(){const e=Np(xje);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}const Sje=Ht(3),pP={draw(e,n){const r=Ht(n+Vc(n/28,.75))*.59436,s=r/2,a=s*Sje;e.moveTo(0,r),e.lineTo(0,-r),e.moveTo(-a,-s),e.lineTo(a,s),e.moveTo(-a,s),e.lineTo(a,-s)}},Ep={draw(e,n){const r=Ht(n/_o);e.moveTo(r,0),e.arc(0,0,r,0,go)}},yP={draw(e,n){const r=Ht(n/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},vP=Ht(1/3),kje=vP*2,xP={draw(e,n){const r=Ht(n/kje),s=r*vP;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},wP={draw(e,n){const r=Ht(n)*.62625;e.moveTo(0,-r),e.lineTo(r,0),e.lineTo(0,r),e.lineTo(-r,0),e.closePath()}},bP={draw(e,n){const r=Ht(n-Vc(n/7,2))*.87559;e.moveTo(-r,0),e.lineTo(r,0),e.moveTo(0,r),e.lineTo(0,-r)}},_P={draw(e,n){const r=Ht(n),s=-r/2;e.rect(s,s,r,r)}},CP={draw(e,n){const r=Ht(n)*.4431;e.moveTo(r,r),e.lineTo(r,-r),e.lineTo(-r,-r),e.lineTo(-r,r),e.closePath()}},jje=.8908130915292852,BP=Ir(_o/10)/Ir(7*_o/10),Nje=Ir(go/10)*BP,Eje=-si(go/10)*BP,SP={draw(e,n){const r=Ht(n*jje),s=Nje*r,a=Eje*r;e.moveTo(0,-r),e.lineTo(s,a);for(let i=1;i<5;++i){const o=go*i/5,c=si(o),A=Ir(o);e.lineTo(A*r,-c*r),e.lineTo(c*s-A*a,A*s+c*a)}e.closePath()}},uv=Ht(3),kP={draw(e,n){const r=-Ht(n/(uv*3));e.moveTo(0,r*2),e.lineTo(-uv*r,-r),e.lineTo(uv*r,-r),e.closePath()}},Tje=Ht(3),jP={draw(e,n){const r=Ht(n)*.6824,s=r/2,a=r*Tje/2;e.moveTo(0,-r),e.lineTo(a,s),e.lineTo(-a,s),e.closePath()}},gs=-.5,ms=Ht(3)/2,z1=1/Ht(12),Fje=(z1/2+1)*3,NP={draw(e,n){const r=Ht(n/Fje),s=r/2,a=r*z1,i=s,o=r*z1+r,c=-i,A=o;e.moveTo(s,a),e.lineTo(i,o),e.lineTo(c,A),e.lineTo(gs*s-ms*a,ms*s+gs*a),e.lineTo(gs*i-ms*o,ms*i+gs*o),e.lineTo(gs*c-ms*A,ms*c+gs*A),e.lineTo(gs*s+ms*a,gs*a-ms*s),e.lineTo(gs*i+ms*o,gs*o-ms*i),e.lineTo(gs*c+ms*A,gs*A-ms*c),e.closePath()}},K1={draw(e,n){const r=Ht(n-Vc(n/6,1.7))*.6189;e.moveTo(-r,-r),e.lineTo(r,r),e.moveTo(-r,r),e.lineTo(r,-r)}},gj=[Ep,yP,xP,_P,SP,kP,NP],Ije=[Ep,bP,K1,jP,pP,CP,wP];function Uje(e,n){let r=null,s=Nh(a);e=typeof e=="function"?e:ct(e||Ep),n=typeof n=="function"?n:ct(n===void 0?64:+n);function a(){let i;if(r||(r=i=s()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:ct(i),a):e},a.size=function(i){return arguments.length?(n=typeof i=="function"?i:ct(+i),a):n},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Co(){}function Mg(e,n,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+r)/6)}function Tp(e){this._context=e}Tp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mg(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function Pje(e){return new Tp(e)}function EP(e){this._context=e}EP.prototype={areaStart:Co,areaEnd:Co,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._x2=e,this._y2=n;break;case 1:this._point=2,this._x3=e,this._y3=n;break;case 2:this._point=3,this._x4=e,this._y4=n,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+n)/6);break;default:Mg(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function Mje(e){return new EP(e)}function TP(e){this._context=e}TP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:Mg(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function Qje(e){return new TP(e)}function FP(e,n){this._basis=new Tp(e),this._beta=n}FP.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,n=this._y,r=e.length-1;if(r>0)for(var s=e[0],a=n[0],i=e[r]-s,o=n[r]-a,c=-1,A;++c<=r;)A=c/r,this._basis.point(this._beta*e[c]+(1-this._beta)*(s+A*i),this._beta*n[c]+(1-this._beta)*(a+A*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,n){this._x.push(+e),this._y.push(+n)}};const Dje=function e(n){function r(s){return n===1?new Tp(s):new FP(s,n)}return r.beta=function(s){return e(+s)},r}(.85);function Qg(e,n,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-n),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function X2(e,n){this._context=e,this._k=(1-n)/6}X2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Qg(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2,this._x1=e,this._y1=n;break;case 2:this._point=3;default:Qg(this,e,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const Rje=function e(n){function r(s){return new X2(s,n)}return r.tension=function(s){return e(+s)},r}(0);function Y2(e,n){this._context=e,this._k=(1-n)/6}Y2.prototype={areaStart:Co,areaEnd:Co,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._x3=e,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=n);break;case 2:this._point=3,this._x5=e,this._y5=n;break;default:Qg(this,e,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const $je=function e(n){function r(s){return new Y2(s,n)}return r.tension=function(s){return e(+s)},r}(0);function J2(e,n){this._context=e,this._k=(1-n)/6}J2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qg(this,e,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const Oje=function e(n){function r(s){return new J2(s,n)}return r.tension=function(s){return e(+s)},r}(0);function Z2(e,n,r){var s=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>sr){var c=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,A=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*c-e._x0*e._l12_2a+e._x2*e._l01_2a)/A,a=(a*c-e._y0*e._l12_2a+e._y2*e._l01_2a)/A}if(e._l23_a>sr){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*u+e._x1*e._l23_2a-n*e._l12_2a)/h,o=(o*u+e._y1*e._l23_2a-r*e._l12_2a)/h}e._context.bezierCurveTo(s,a,i,o,e._x2,e._y2)}function IP(e,n){this._context=e,this._alpha=n}IP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){if(e=+e,n=+n,this._point){var r=this._x2-e,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Z2(this,e,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const Lje=function e(n){function r(s){return n?new IP(s,n):new X2(s,0)}return r.alpha=function(s){return e(+s)},r}(.5);function UP(e,n){this._context=e,this._alpha=n}UP.prototype={areaStart:Co,areaEnd:Co,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,n){if(e=+e,n=+n,this._point){var r=this._x2-e,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=n);break;case 2:this._point=3,this._x5=e,this._y5=n;break;default:Z2(this,e,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const Hje=function e(n){function r(s){return n?new UP(s,n):new Y2(s,0)}return r.alpha=function(s){return e(+s)},r}(.5);function PP(e,n){this._context=e,this._alpha=n}PP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){if(e=+e,n=+n,this._point){var r=this._x2-e,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Z2(this,e,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const zje=function e(n){function r(s){return n?new PP(s,n):new J2(s,0)}return r.alpha=function(s){return e(+s)},r}(.5);function MP(e){this._context=e}MP.prototype={areaStart:Co,areaEnd:Co,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,n){e=+e,n=+n,this._point?this._context.lineTo(e,n):(this._point=1,this._context.moveTo(e,n))}};function Kje(e){return new MP(e)}function mj(e){return e<0?-1:1}function pj(e,n,r){var s=e._x1-e._x0,a=n-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),o=(r-e._y1)/(a||s<0&&-0),c=(i*a+o*s)/(s+a);return(mj(i)+mj(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function yj(e,n){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-n)/2:n}function dv(e,n,r){var s=e._x0,a=e._y0,i=e._x1,o=e._y1,c=(i-s)/3;e._context.bezierCurveTo(s+c,a+c*n,i-c,o-c*r,i,o)}function Dg(e){this._context=e}Dg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dv(this,this._t0,yj(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){var r=NaN;if(e=+e,n=+n,!(e===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,dv(this,yj(this,r=pj(this,e,n)),r);break;default:dv(this,this._t0,r=pj(this,e,n));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n,this._t0=r}}};function QP(e){this._context=new DP(e)}(QP.prototype=Object.create(Dg.prototype)).point=function(e,n){Dg.prototype.point.call(this,n,e)};function DP(e){this._context=e}DP.prototype={moveTo:function(e,n){this._context.moveTo(n,e)},closePath:function(){this._context.closePath()},lineTo:function(e,n){this._context.lineTo(n,e)},bezierCurveTo:function(e,n,r,s,a,i){this._context.bezierCurveTo(n,e,s,r,i,a)}};function Gje(e){return new Dg(e)}function Wje(e){return new QP(e)}function RP(e){this._context=e}RP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,n=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],n[0]):this._context.moveTo(e[0],n[0]),r===2)this._context.lineTo(e[1],n[1]);else for(var s=vj(e),a=vj(n),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[o],n[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,n){this._x.push(+e),this._y.push(+n)}};function vj(e){var n,r=e.length-1,s,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],n=1;n<r-1;++n)a[n]=1,i[n]=4,o[n]=4*e[n]+2*e[n+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],n=1;n<r;++n)s=a[n]/i[n-1],i[n]-=s,o[n]-=s*o[n-1];for(a[r-1]=o[r-1]/i[r-1],n=r-2;n>=0;--n)a[n]=(o[n]-a[n+1])/i[n];for(i[r-1]=(e[r]+a[r-1])/2,n=0;n<r-1;++n)i[n]=2*e[n+1]-a[n+1];return[a,i]}function Vje(e){return new RP(e)}function Fp(e,n){this._context=e,this._t=n}Fp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,n)}break}}this._x=e,this._y=n}};function qje(e){return new Fp(e,.5)}function Xje(e){return new Fp(e,0)}function Yje(e){return new Fp(e,1)}function pA(e,n){if((o=e.length)>1)for(var r=1,s,a,i=e[n[0]],o,c=i.length;r<o;++r)for(a=i,i=e[n[r]],s=0;s<c;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function yA(e){for(var n=e.length,r=new Array(n);--n>=0;)r[n]=n;return r}function Jje(e,n){return e[n]}function Zje(e){const n=[];return n.key=e,n}function eNe(){var e=ct([]),n=yA,r=pA,s=Jje;function a(i){var o=Array.from(e.apply(this,arguments),Zje),c,A=o.length,u=-1,h;for(const d of i)for(c=0,++u;c<A;++c)(o[c][u]=[0,+s(d,o[c].key,u,i)]).data=d;for(c=0,h=kp(n(o));c<A;++c)o[h[c]].index=c;return r(o,h),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ct(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:ct(+i),a):s},a.order=function(i){return arguments.length?(n=i==null?yA:typeof i=="function"?i:ct(Array.from(i)),a):n},a.offset=function(i){return arguments.length?(r=i??pA,a):r},a}function tNe(e,n){if((s=e.length)>0){for(var r,s,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<s;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<s;++r)e[r][a][1]/=o}pA(e,n)}}function nNe(e,n){if((A=e.length)>0)for(var r,s=0,a,i,o,c,A,u=e[n[0]].length;s<u;++s)for(o=c=0,r=0;r<A;++r)(i=(a=e[n[r]][s])[1]-a[0])>0?(a[0]=o,a[1]=o+=i):i<0?(a[1]=c,a[0]=c+=i):(a[0]=0,a[1]=i)}function rNe(e,n){if((a=e.length)>0){for(var r=0,s=e[n[0]],a,i=s.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=e[o][r][1]||0;s[r][1]+=s[r][0]=-c/2}pA(e,n)}}function sNe(e,n){if(!(!((o=e.length)>0)||!((i=(a=e[n[0]]).length)>0))){for(var r=0,s=1,a,i,o;s<i;++s){for(var c=0,A=0,u=0;c<o;++c){for(var h=e[n[c]],d=h[s][1]||0,f=h[s-1][1]||0,g=(d-f)/2,m=0;m<c;++m){var y=e[n[m]],v=y[s][1]||0,p=y[s-1][1]||0;g+=v-p}A+=d,u+=g*d}a[s-1][1]+=a[s-1][0]=r,A&&(r-=u/A)}a[s-1][1]+=a[s-1][0]=r,pA(e,n)}}function $P(e){var n=e.map(aNe);return yA(e).sort(function(r,s){return n[r]-n[s]})}function aNe(e){for(var n=-1,r=0,s=e.length,a,i=-1/0;++n<s;)(a=+e[n][1])>i&&(i=a,r=n);return r}function OP(e){var n=e.map(LP);return yA(e).sort(function(r,s){return n[r]-n[s]})}function LP(e){for(var n=0,r=-1,s=e.length,a;++r<s;)(a=+e[r][1])&&(n+=a);return n}function iNe(e){return OP(e).reverse()}function oNe(e){var n=e.length,r,s,a=e.map(LP),i=$P(e),o=0,c=0,A=[],u=[];for(r=0;r<n;++r)s=i[r],o<c?(o+=a[s],A.push(s)):(c+=a[s],u.push(s));return u.reverse().concat(A)}function lNe(e){return yA(e).reverse()}const cNe=Object.freeze(Object.defineProperty({__proto__:null,arc:fje,area:Pg,areaRadial:H1,curveBasis:Pje,curveBasisClosed:Mje,curveBasisOpen:Qje,curveBumpX:gP,curveBumpY:mP,curveBundle:Dje,curveCardinal:Rje,curveCardinalClosed:$je,curveCardinalOpen:Oje,curveCatmullRom:Lje,curveCatmullRomClosed:Hje,curveCatmullRomOpen:zje,curveLinear:Eh,curveLinearClosed:Kje,curveMonotoneX:Gje,curveMonotoneY:Wje,curveNatural:Vje,curveStep:qje,curveStepAfter:Yje,curveStepBefore:Xje,line:jp,lineRadial:L1,link:Np,linkHorizontal:_je,linkRadial:Bje,linkVertical:Cje,pie:yje,pointRadial:Nu,radialArea:H1,radialLine:L1,stack:eNe,stackOffsetDiverging:nNe,stackOffsetExpand:tNe,stackOffsetNone:pA,stackOffsetSilhouette:rNe,stackOffsetWiggle:sNe,stackOrderAppearance:$P,stackOrderAscending:OP,stackOrderDescending:iNe,stackOrderInsideOut:oNe,stackOrderNone:yA,stackOrderReverse:lNe,symbol:Uje,symbolAsterisk:pP,symbolCircle:Ep,symbolCross:yP,symbolDiamond:xP,symbolDiamond2:wP,symbolPlus:bP,symbolSquare:_P,symbolSquare2:CP,symbolStar:SP,symbolTimes:K1,symbolTriangle:kP,symbolTriangle2:jP,symbolWye:NP,symbolX:K1,symbols:gj,symbolsFill:gj,symbolsStroke:Ije},Symbol.toStringTag,{value:"Module"})),xj=e=>{const n=e._y1!==void 0?e._y1:e._y;return n!=null&&e._y0!==null},wj=e=>n=>e.x(n._x1!==void 0?n._x1:n._x),hv=e=>n=>e.y(n._y1!==void 0?n._y1:n._y),ANe=e=>n=>-1*e.x(n._x1!==void 0?n._x1:n._x)+Math.PI/2,HP=e=>`curve${(r=>r&&r[0].toUpperCase()+r.slice(1))(e)}`,uNe=e=>`${HP(e)}Closed`,Rg=e=>{const{interpolation:n}=e;if(typeof n=="function")return n;if(typeof n=="string"){const{polar:r,openCurve:s=!r}=e,a=s?HP(n):uNe(n);return cNe[a]}return Eh},zP=e=>{const{polar:n,scale:r,horizontal:s}=e;return n?L1().defined(xj).curve(Rg(e)).angle(ANe(r)).radius(hv(r)):jp().defined(xj).curve(Rg(e)).x(s?hv(r):wj(r)).y(s?wj(r):hv(r))};function dNe(e,n,r){return`M ${e}, ${n}
      m ${-r}, 0
      a ${r}, ${r} 0 1,0 ${r*2},0
      a ${r}, ${r} 0 1,0 ${-r*2},0`}function hNe(e,n,r){const s=.87*r,a=e-s,i=n+s,o=e+s-a;return`M ${a}, ${i}
      h${o}
      v-${o}
      h-${o}
      z`}function fNe(e,n,r){const s=.87*r,a=Math.sqrt(2*(s*s));return`M ${e}, ${n+a}
      l ${a}, -${a}
      l -${a}, -${a}
      l -${a}, ${a}
      l ${a}, ${a}
      z`}function gNe(e,n,r){const s=r/2*Math.sqrt(3),a=e-r,i=e+r,o=n-r,c=n+s;return`M ${a}, ${o}
      L ${i}, ${o}
      L ${e}, ${c}
      z`}function mNe(e,n,r){const s=r/2*Math.sqrt(3),a=e-r,i=e+r,o=n-s,c=n+r;return`M ${a}, ${c}
      L ${i}, ${c}
      L ${e}, ${o}
      z`}function pNe(e,n,r){const s=1.1*r,a=s/1.5;return`
      M ${e-a/2}, ${n+s}
      v-${a}
      h-${a}
      v-${a}
      h${a}
      v-${a}
      h${a}
      v${a}
      h${a}
      v${a}
      h-${a}
      v${a}
      z`}function yNe(e,n,r){const s=.8*r,a=s/1.5;return`
      M ${e-a/2}, ${n+s+a}
      v-${a*2}
      h-${a}
      v-${a}
      h${a}
      v-${a}
      h${a}
      v${a}
      h${a}
      v${a}
      h-${a}
      v${a*2}
      z`}function vNe(e,n,r){const s=1.1*r,a=s-s*.3,i=e-s,o=n+a/2,c=e+s-i;return`M ${i}, ${o}
      h${c}
      v-${a}
      h-${c}
      z`}function xNe(e,n,r){const s=1.35*r,a=Math.PI/5;return`M ${u2(10).map(o=>{const c=o%2===0?s:s/2;return`${c*Math.sin(a*(o+1))+e},
        ${c*Math.cos(a*(o+1))+n}`}).join("L")} z`}const wNe=Object.freeze(Object.defineProperty({__proto__:null,circle:dNe,cross:yNe,diamond:fNe,minus:vNe,plus:pNe,square:hNe,star:xNe,triangleDown:gNe,triangleUp:mNe},Symbol.toStringTag,{value:"Module"})),bNe={blue:"#4F7DA1",pink:"#E2A37F",teal:"#00796B",purple:"#DF948A",green:"#8BC34A",orange:"#F4511E",cyan:"#006064",red:"#DF5A49",yellow:"#FFF59D"},yc=["#252525","#525252","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0"],hr="#252525",fv="#969696",_Ne=["#334D5C","#45B29D","#EFC94C","#E27A3F","#DF5A49","#4F7DA1","#55DBC1","#EFDA97","#E2A37F","#DF948A"],CNe=["#428517","#77D200","#D6D305","#EC8E19","#C92B05"],BNe=["#940031","#C43343","#DC5429","#FF821D","#FFAF55"],SNe=["#2746B9","#0B69D4","#2794DB","#31BB76","#60E83B"],kNe=["#FCAE91","#FB6A4A","#DE2D26","#A50F15","#750B0E"],jNe=["#354722","#466631","#649146","#8AB25C","#A9C97E"],NNe=["#002C61","#004B8F","#006BC9","#3795E5","#65B4F4"],ENe="'Gill Sans', 'Seravek', 'Trebuchet MS', sans-serif",TNe="normal",FNe=14,Wr={width:450,height:300,padding:50,colorScale:yc},xn={fontFamily:ENe,fontSize:FNe,letterSpacing:TNe,padding:10,fill:hr,stroke:"transparent"},INe=Object.assign({textAnchor:"middle"},xn),UNe="round",PNe="round",MNe={palette:{colors:bNe,grayscale:yc,qualitative:_Ne,heatmap:CNe,warm:BNe,cool:SNe,red:kNe,green:jNe,blue:NNe},area:Object.assign({style:{data:{fill:hr},labels:xn}},Wr),axis:Object.assign({style:{axis:{fill:"transparent",stroke:hr,strokeWidth:1,strokeLinecap:UNe,strokeLinejoin:PNe},axisLabel:Object.assign({},INe,{padding:25}),grid:{fill:"none",stroke:"none",pointerEvents:"painted"},ticks:{fill:"transparent",size:1,stroke:"transparent"},tickLabels:xn}},Wr),bar:Object.assign({style:{data:{fill:hr,padding:8,strokeWidth:0},labels:xn}},Wr),boxplot:Object.assign({style:{max:{padding:8,stroke:hr,strokeWidth:1},maxLabels:Object.assign({},xn,{padding:3}),median:{padding:8,stroke:hr,strokeWidth:1},medianLabels:Object.assign({},xn,{padding:3}),min:{padding:8,stroke:hr,strokeWidth:1},minLabels:Object.assign({},xn,{padding:3}),q1:{padding:8,fill:fv},q1Labels:Object.assign({},xn,{padding:3}),q3:{padding:8,fill:fv},q3Labels:Object.assign({},xn,{padding:3})},boxWidth:20},Wr),candlestick:Object.assign({style:{data:{stroke:hr,strokeWidth:1},labels:Object.assign({},xn,{padding:5})},candleColors:{positive:"#ffffff",negative:hr}},Wr),chart:Wr,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",stroke:hr,strokeWidth:2},labels:xn}},Wr),group:Object.assign({colorScale:yc},Wr),histogram:Object.assign({style:{data:{fill:fv,stroke:hr,strokeWidth:2},labels:xn}},Wr),legend:{colorScale:yc,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle"},labels:xn,title:Object.assign({},xn,{padding:5})}},line:Object.assign({style:{data:{fill:"transparent",stroke:hr,strokeWidth:2},labels:xn}},Wr),pie:{style:{data:{padding:10,stroke:"transparent",strokeWidth:1},labels:Object.assign({},xn,{padding:20})},colorScale:yc,width:400,height:400,padding:50},scatter:Object.assign({style:{data:{fill:hr,stroke:"transparent",strokeWidth:0},labels:xn}},Wr),stack:Object.assign({colorScale:yc},Wr),tooltip:{style:Object.assign({},xn,{padding:0,pointerEvents:"none"}),flyoutStyle:{stroke:hr,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},flyoutPadding:5,cornerRadius:5,pointerLength:10},voronoi:Object.assign({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:Object.assign({},xn,{padding:5,pointerEvents:"none"}),flyout:{stroke:hr,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},Wr)},KP="#FFF59D",GP="#F4511E",QNe="#DCE775",WP="#8BC34A",VP="#00796B",qP="#006064",wf=[GP,KP,QNe,WP,VP,qP],G1="#ECEFF1",W1="#90A4AE",fr="#455A64",Eu="#212121",DNe={blue:"#4F7DA1",pink:"#E2A37F",teal:VP,purple:"#DF948A",green:WP,orange:GP,cyan:qP,red:"#DF5A49",yellow:KP},RNe=[G1,W1,fr,Eu],$Ne=["#334D5C","#45B29D","#EFC94C","#E27A3F","#DF5A49","#4F7DA1","#55DBC1","#EFDA97","#E2A37F","#DF948A"],ONe=["#428517","#77D200","#D6D305","#EC8E19","#C92B05"],LNe=["#940031","#C43343","#DC5429","#FF821D","#FFAF55"],HNe=["#2746B9","#0B69D4","#2794DB","#31BB76","#60E83B"],zNe=["#FCAE91","#FB6A4A","#DE2D26","#A50F15","#750B0E"],KNe=["#354722","#466631","#649146","#8AB25C","#A9C97E"],GNe=["#002C61","#004B8F","#006BC9","#3795E5","#65B4F4"],WNe="'Helvetica Neue', 'Helvetica', sans-serif",VNe="normal",qNe=12,Ya=8,Er={width:350,height:350,padding:50},wn={fontFamily:WNe,fontSize:qNe,letterSpacing:VNe,padding:Ya,fill:fr,stroke:"transparent",strokeWidth:0},XNe=Object.assign({textAnchor:"middle"},wn),YNe="10, 5",gv="round",mv="round",JNe={palette:{colors:DNe,grayscale:RNe,qualitative:$Ne,heatmap:ONe,warm:LNe,cool:HNe,red:zNe,green:KNe,blue:GNe},area:Object.assign({style:{data:{fill:Eu},labels:wn}},Er),axis:Object.assign({style:{axis:{fill:"transparent",stroke:W1,strokeWidth:2,strokeLinecap:gv,strokeLinejoin:mv},axisLabel:Object.assign({},XNe,{padding:Ya,stroke:"transparent"}),grid:{fill:"none",stroke:G1,strokeDasharray:YNe,strokeLinecap:gv,strokeLinejoin:mv,pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:W1,strokeWidth:1,strokeLinecap:gv,strokeLinejoin:mv},tickLabels:Object.assign({},wn,{fill:fr})}},Er),polarDependentAxis:Object.assign({style:{ticks:{fill:"transparent",size:1,stroke:"transparent"}}}),bar:Object.assign({style:{data:{fill:fr,padding:Ya,strokeWidth:0},labels:wn}},Er),boxplot:Object.assign({style:{max:{padding:Ya,stroke:fr,strokeWidth:1},maxLabels:Object.assign({},wn,{padding:3}),median:{padding:Ya,stroke:fr,strokeWidth:1},medianLabels:Object.assign({},wn,{padding:3}),min:{padding:Ya,stroke:fr,strokeWidth:1},minLabels:Object.assign({},wn,{padding:3}),q1:{padding:Ya,fill:fr},q1Labels:Object.assign({},wn,{padding:3}),q3:{padding:Ya,fill:fr},q3Labels:Object.assign({},wn,{padding:3})},boxWidth:20},Er),candlestick:Object.assign({style:{data:{stroke:fr},labels:Object.assign({},wn,{padding:5})},candleColors:{positive:"#ffffff",negative:fr}},Er),chart:Er,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",opacity:1,stroke:fr,strokeWidth:2},labels:wn}},Er),group:Object.assign({colorScale:wf},Er),histogram:Object.assign({style:{data:{fill:fr,stroke:Eu,strokeWidth:2},labels:wn}},Er),legend:{colorScale:wf,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle"},labels:wn,title:Object.assign({},wn,{padding:5})}},line:Object.assign({style:{data:{fill:"transparent",opacity:1,stroke:fr,strokeWidth:2},labels:wn}},Er),pie:Object.assign({colorScale:wf,style:{data:{padding:Ya,stroke:G1,strokeWidth:1},labels:Object.assign({},wn,{padding:20})}},Er),scatter:Object.assign({style:{data:{fill:fr,opacity:1,stroke:"transparent",strokeWidth:0},labels:wn}},Er),stack:Object.assign({colorScale:wf},Er),tooltip:{style:Object.assign({},wn,{padding:0,pointerEvents:"none"}),flyoutStyle:{stroke:Eu,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},flyoutPadding:5,cornerRadius:5,pointerLength:10},voronoi:Object.assign({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:Object.assign({},wn,{padding:5,pointerEvents:"none"}),flyout:{stroke:Eu,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},Er)},Pt={white:"#FFFFFF",50:"#FAFAFA",100:"#F2F2F2",200:"#E8E8E8",300:"#E0E0E0",400:"#D1D1D1",500:"#757575",600:"#5C5C5C",700:"#424242",800:"#333333",900:"#292929",black:"#0F0F0F"},$g={100:"#FFEAB6",300:"#FFD66E",500:"#FCB400",900:"#B87503"},Og={100:"#FEE2D5",300:"#FFA981",500:"#FF6F2C",700:"#FF4E1B",900:"#D74D26"},Th={100:"#FFDCE5",300:"#FF9EB7",500:"#F82B60",700:"#D31A3D",900:"#BA1E45"},XP={100:"#EDE3FE",300:"#CDB0FF",500:"#8B46FF",900:"#6B1CB0"},Fh={100:"#CFDFFF",300:"#9CC7FF",500:"#2D7FF9",700:"#0056B3",900:"#2750AE"},eC={100:"#D0F0FD",300:"#77D1F3",500:"#18BFFF",900:"#0B76B7"},YP={100:"#C2F5E9",300:"#72DDC3",500:"#20D9D2",900:"#06A09B"},vA={100:"#D1F7C4",300:"#93E088",500:"#20C933",700:"#1B9B2A",900:"#338A17"},JP={blue:Fh[500],cyan:eC[500],green:vA[500],yellow:$g[500],orange:Og[500],red:Th[500],purple:XP[500],teal:YP[500]},Oi=Object.values(JP),ZNe=[Pt[100],Pt[300],Pt[500],Pt[700],Pt[900]],e4e=[$g[300],$g[500],Og[500],Og[900],Th[500]],t4e=[XP[500],Fh[500],eC[500],YP[500],vA[500]],n4e=[vA[900],vA[500],$g[500],Og[500],Th[500]],r4e=Object.values(Th),s4e=Object.values(vA),a4e=Object.values(Fh),ou=Fh[500],i4e="'Inter', 'Helvetica Neue', 'Seravek', 'Helvetica', sans-serif",o4e="normal",l4e=12,Ja=8,Tr={width:450,height:300,padding:60,colorScale:Oi},ln={fontFamily:i4e,fontSize:l4e,fontWeight:300,letterSpacing:o4e,padding:Ja,fill:Pt[900],stroke:"transparent"},c4e=Object.assign({textAnchor:"middle"},ln),bj="10, 5",Mo="round",rc="round",Qo=1,A4e={palette:{colors:JP,grayscale:ZNe,qualitative:Oi,heatmap:n4e,warm:e4e,cool:t4e,red:r4e,green:s4e,blue:a4e},area:Object.assign({style:{data:{fill:ou,strokeWidth:2,fillOpacity:.5},labels:ln}},Tr),axis:Object.assign({style:{axis:{fill:"transparent",stroke:Pt[500],strokeWidth:1,strokeLinecap:Mo,strokeLinejoin:rc},axisLabel:Object.assign({},c4e,{padding:35,stroke:"transparent"}),grid:{fill:"none",stroke:"none",painterEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:"transparent"},tickLabels:ln}},Tr),polarAxis:Object.assign({style:{axis:{stroke:Pt[500]},grid:{stroke:Pt[400],strokeDasharray:bj,strokeLinecap:Mo,strokeLinejoin:rc,pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:Pt[400],strokeWidth:1,strokeLinecap:Mo,strokeLinejoin:rc},tickLabels:ln}}),polarDependentAxis:Object.assign({style:{axis:{stroke:Pt[500]},grid:{stroke:Pt[400],strokeDasharray:bj,strokeLinecap:Mo,strokeLinejoin:rc,pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:Pt[300],strokeWidth:1,strokeLinecap:Mo,strokeLinejoin:rc},tickLabels:ln}}),bar:Object.assign({style:{data:{fill:ou,padding:Ja,strokeWidth:1,fillOpacity:.5},labels:ln},cornerRadius:{top:Qo}},Tr),boxplot:Object.assign({style:{max:{padding:Ja,stroke:Pt[400],strokeWidth:2},maxLabels:Object.assign({},ln,{padding:3}),median:{padding:Ja,stroke:Pt.white,strokeWidth:2},medianLabels:Object.assign({},ln,{padding:3}),min:{padding:Ja,stroke:Pt[400],strokeWidth:2},minLabels:Object.assign({},ln,{padding:3}),q1:{padding:Ja,fill:Oi[0],rx:Qo,strokeWidth:2},q1Labels:Object.assign({},ln,{padding:3}),q3:{padding:Ja,fill:Oi[1],rx:Qo},q3Labels:Object.assign({},ln,{padding:3})},boxWidth:20},Tr),candlestick:Object.assign({style:{data:{stroke:Pt[300],strokeWidth:0,rx:Qo},labels:Object.assign({},ln,{padding:5})},candleColors:{positive:vA[500],negative:Th[500]},wickStrokeWidth:2},Tr),chart:Tr,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",opacity:1,stroke:Pt[700],strokeWidth:2,strokeLinecap:Mo},labels:ln}},Tr),group:Object.assign({colorScale:Oi},Tr),histogram:Object.assign({style:{data:{fill:eC[500],fillOpacity:.5},labels:ln},binSpacing:4,cornerRadius:{top:Qo}},Tr),label:ln,legend:{colorScale:Oi,gutter:24,borderPadding:10,orientation:"horizontal",titleOrientation:"top",centerTitle:!0,style:{data:{type:"circle"},labels:{...ln,fontSize:12},title:Object.assign({},ln,{padding:Ja,fontSize:16}),border:{stroke:Pt[200],strokeWidth:2,padding:16}}},line:Object.assign({style:{data:{fill:"transparent",opacity:1,stroke:ou,strokeWidth:2,strokeLinecap:Mo,strokeLinejoin:rc},labels:ln}},Tr),pie:Object.assign({style:{parent:{backgroundColor:Pt.white},data:{padding:Ja,stroke:Pt.white,strokeWidth:1},labels:{...ln,padding:20,fill:Pt[600],fontSize:10}},colorScale:Oi,cornerRadius:Qo},Tr),scatter:Object.assign({style:{data:{fill:ou,opacity:1,stroke:"transparent",strokeWidth:0},labels:{...ln,padding:20}}},Tr),stack:Object.assign({colorScale:Oi},Tr),tooltip:{style:Object.assign({},ln,{padding:0,pointerEvents:"none"}),flyoutStyle:{stroke:Pt[300],strokeWidth:2,fill:Pt.white,pointerEvents:"none"},flyoutPadding:{top:8,bottom:8,left:16,right:16},cornerRadius:Qo,pointerLength:4},voronoi:Object.assign({style:{data:{fill:Fh[100],stroke:ou,strokeWidth:2},labels:Object.assign({},ln,{padding:5,pointerEvents:"none"}),flyout:{stroke:Pt[900],strokeWidth:1,fill:Pt[100],pointerEvents:"none"},padding:{left:2,bottom:2}}},Tr)},RA={grayscale:MNe,material:JNe,clean:A4e},V1=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(r.length>0)return r.reduce((i,o)=>[i,V1(o)].join(" "),V1(e)).trim();if(e==null||typeof e=="string")return e;const a=[];for(const i in e)if(e.hasOwnProperty(i)){const o=e[i];a.push(`${i}(${o})`)}return a.join(" ").trim()},_j={"American Typewriter":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.25,.4203125,.3296875,.6,.6375,.8015625,.8203125,.1875,.45625,.45625,.6375,.5,.2734375,.309375,.2734375,.4390625,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.2734375,.2734375,.5,.5,.5,.6,.6921875,.7640625,.6921875,.6375,.728125,.6734375,.6203125,.7109375,.784375,.3828125,.6421875,.7859375,.6375,.9484375,.7640625,.65625,.6375,.65625,.7296875,.6203125,.6375,.7109375,.740625,.940625,.784375,.7578125,.6203125,.4375,.5,.4375,.5,.5,.4921875,.5734375,.5890625,.5109375,.6,.528125,.43125,.5578125,.6375,.3109375,.40625,.6234375,.309375,.928125,.6375,.546875,.6,.58125,.4921875,.4921875,.4,.6203125,.625,.825,.6375,.640625,.528125,.5,.5,.5,.6671875],avg:.5793421052631578},Arial:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.278125,.35625,.55625,.55625,.890625,.6671875,.1921875,.334375,.334375,.390625,.584375,.278125,.334375,.278125,.278125,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.584375,.584375,.584375,.55625,1.015625,.6703125,.6671875,.7234375,.7234375,.6671875,.6109375,.778125,.7234375,.278125,.5,.6671875,.55625,.834375,.7234375,.778125,.6671875,.778125,.7234375,.6671875,.6109375,.7234375,.6671875,.9453125,.6671875,.6671875,.6109375,.278125,.278125,.278125,.4703125,.584375,.334375,.55625,.55625,.5,.55625,.55625,.3125,.55625,.55625,.2234375,.2703125,.5,.2234375,.834375,.55625,.55625,.55625,.55625,.346875,.5,.278125,.55625,.5,.7234375,.5,.5,.5,.334375,.2609375,.334375,.584375],avg:.528733552631579},"Arial Black":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.33125,.334375,.5,.6609375,.6671875,1,.890625,.278125,.390625,.390625,.55625,.6609375,.334375,.334375,.334375,.28125,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.334375,.334375,.6609375,.6609375,.6609375,.6109375,.7453125,.78125,.778125,.778125,.778125,.7234375,.6671875,.834375,.834375,.390625,.6671875,.834375,.6671875,.9453125,.834375,.834375,.7234375,.834375,.78125,.7234375,.7234375,.834375,.7796875,1.003125,.78125,.78125,.7234375,.390625,.28125,.390625,.6609375,.5125,.334375,.6671875,.6671875,.6671875,.6671875,.6671875,.41875,.6671875,.6671875,.334375,.384375,.6671875,.334375,1,.6671875,.6671875,.6671875,.6671875,.4703125,.6109375,.4453125,.6671875,.6140625,.946875,.6671875,.615625,.55625,.390625,.278125,.390625,.6609375],avg:.6213157894736842},Baskerville:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.25,.25,.40625,.6671875,.490625,.875,.7015625,.178125,.2453125,.246875,.4171875,.6671875,.25,.3125,.25,.521875,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.25,.25,.6671875,.6671875,.6671875,.396875,.9171875,.684375,.615625,.71875,.7609375,.625,.553125,.771875,.803125,.3546875,.515625,.78125,.6046875,.928125,.75,.8234375,.5625,.96875,.7296875,.5421875,.6984375,.771875,.7296875,.9484375,.771875,.678125,.6359375,.3640625,.521875,.3640625,.46875,.5125,.334375,.46875,.521875,.428125,.521875,.4375,.3890625,.4765625,.53125,.25,.359375,.4640625,.240625,.803125,.53125,.5,.521875,.521875,.365625,.334375,.2921875,.521875,.4640625,.678125,.4796875,.465625,.428125,.4796875,.5109375,.4796875,.6671875],avg:.5323519736842108},Courier:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5984375,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6078125,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.61875,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.615625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6140625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625],avg:.6020559210526316},"Courier New":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5984375,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625],avg:.6015296052631579},cursive:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.1921875,.24375,.40625,.5671875,.3984375,.721875,.909375,.2328125,.434375,.365625,.4734375,.5578125,.19375,.3484375,.19375,.7734375,.503125,.4171875,.5453125,.45,.6046875,.4703125,.5984375,.55625,.503125,.5546875,.20625,.2,.5625,.5546875,.546875,.403125,.70625,.734375,.7078125,.64375,.85,.753125,.75,.6484375,1.0765625,.44375,.5359375,.8359375,.653125,1.0109375,1.1515625,.6796875,.6984375,1.0625,.8234375,.5125,.9234375,.8546875,.70625,.9109375,.7421875,.715625,.6015625,.4640625,.3359375,.4109375,.5421875,.5421875,.4328125,.5125,.5,.3859375,.7375,.359375,.75625,.540625,.5328125,.3203125,.5296875,.5015625,.484375,.7890625,.5640625,.4203125,.703125,.471875,.4734375,.35,.4125,.5640625,.471875,.6484375,.5296875,.575,.4140625,.415625,.20625,.3796875,.5421875],avg:.5604440789473684},fantasy:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.215625,.2625,.3265625,.6109375,.534375,.7625,.7828125,.2,.4359375,.4359375,.3765625,.5109375,.2796875,.4609375,.2796875,.5296875,.6640625,.253125,.521875,.4765625,.6640625,.490625,.528125,.5546875,.496875,.5421875,.2796875,.2796875,.5625,.4609375,.5625,.4828125,.609375,.740625,.7234375,.740625,.8265625,.7234375,.6171875,.7359375,.765625,.240625,.5453125,.715625,.6078125,.8640625,.653125,.9125,.6484375,.946875,.6921875,.653125,.6953125,.8015625,.58125,.784375,.671875,.6265625,.690625,.4359375,.5296875,.4359375,.53125,.5,.2875,.5375,.603125,.4984375,.60625,.53125,.434375,.6421875,.56875,.209375,.4671875,.5484375,.2203125,.709375,.55,.5984375,.6140625,.5765625,.40625,.4734375,.3734375,.559375,.4421875,.6421875,.4890625,.578125,.4484375,.2546875,.2203125,.2546875,.55],avg:.536496710526316},Geneva:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3328125,.3046875,.5,.6671875,.6671875,.90625,.728125,.3046875,.446875,.446875,.5078125,.6671875,.3046875,.3796875,.3046875,.5390625,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.3046875,.3046875,.6671875,.6671875,.6671875,.56875,.871875,.728125,.6375,.6515625,.7015625,.5765625,.5546875,.675,.690625,.2421875,.4921875,.6640625,.584375,.7890625,.709375,.7359375,.584375,.78125,.60625,.60625,.640625,.6671875,.728125,.946875,.6109375,.6109375,.5765625,.446875,.5390625,.446875,.6671875,.6671875,.5921875,.5546875,.6109375,.546875,.603125,.5765625,.390625,.6109375,.584375,.2359375,.334375,.5390625,.2359375,.8953125,.584375,.60625,.603125,.603125,.3875,.509375,.44375,.584375,.565625,.78125,.53125,.571875,.5546875,.4515625,.246875,.4515625,.6671875],avg:.5762664473684211},Georgia:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2421875,.33125,.4125,.64375,.6109375,.81875,.7109375,.215625,.375,.375,.4734375,.64375,.2703125,.375,.2703125,.46875,.6140625,.4296875,.559375,.553125,.565625,.5296875,.5671875,.503125,.596875,.5671875,.3125,.3125,.64375,.64375,.64375,.4796875,.9296875,.715625,.6546875,.6421875,.75,.6546875,.6,.7265625,.815625,.390625,.51875,.7203125,.6046875,.928125,.7671875,.7453125,.6109375,.7453125,.7234375,.5625,.61875,.7578125,.70625,.99375,.7125,.6640625,.6015625,.375,.46875,.375,.64375,.65,.5,.5046875,.56875,.4546875,.575,.484375,.39375,.509375,.5828125,.29375,.3671875,.546875,.2875,.88125,.5921875,.5390625,.571875,.5640625,.4109375,.4328125,.3453125,.5765625,.5203125,.75625,.50625,.5171875,.4453125,.43125,.375,.43125,.64375],avg:.5551809210526316},"Gill Sans":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2765625,.271875,.3546875,.584375,.5421875,.6765625,.625,.1890625,.3234375,.3234375,.4171875,.584375,.2203125,.3234375,.2203125,.28125,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.2203125,.2296875,.584375,.584375,.584375,.334375,1.0109375,.6671875,.5640625,.709375,.75,.5,.4703125,.740625,.7296875,.25,.3125,.65625,.490625,.78125,.78125,.8234375,.5109375,.8234375,.6046875,.459375,.6046875,.709375,.6046875,1.0421875,.709375,.6046875,.646875,.334375,.28125,.334375,.4703125,.5828125,.334375,.428125,.5,.4390625,.5109375,.4796875,.296875,.428125,.5,.2203125,.2265625,.5,.2203125,.771875,.5,.553125,.5,.5,.3984375,.3859375,.334375,.5,.4390625,.7203125,.5,.4390625,.4171875,.334375,.2609375,.334375,.584375],avg:.4933717105263159},Helvetica:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625],avg:.5279276315789471},"Helvetica Neue":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.259375,.4265625,.55625,.55625,1,.6453125,.278125,.2703125,.26875,.353125,.6,.278125,.3890625,.278125,.36875,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.6,.6,.6,.55625,.8,.6625,.6859375,.7234375,.7046875,.6125,.575,.759375,.7234375,.259375,.5203125,.6703125,.55625,.871875,.7234375,.7609375,.6484375,.7609375,.6859375,.6484375,.575,.7234375,.6140625,.9265625,.6125,.6484375,.6125,.259375,.36875,.259375,.6,.5,.25625,.5375,.59375,.5375,.59375,.5375,.2984375,.575,.55625,.2234375,.2375,.5203125,.2234375,.853125,.55625,.575,.59375,.59375,.334375,.5,.315625,.55625,.5,.759375,.51875,.5,.48125,.334375,.2234375,.334375,.6],avg:.5279440789473684},"Hoefler Text":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2359375,.2234375,.3921875,.7125,.49375,.8859375,.771875,.2125,.3078125,.309375,.375,.4234375,.234375,.3125,.234375,.3,.5828125,.365625,.434375,.3921875,.5234375,.3984375,.5125,.4328125,.46875,.5125,.234375,.234375,.515625,.4234375,.515625,.340625,.7609375,.7359375,.6359375,.721875,.8125,.6375,.5875,.8078125,.853125,.4296875,.503125,.78125,.609375,.9609375,.8515625,.8140625,.6125,.8140625,.71875,.49375,.7125,.76875,.771875,1.125,.7765625,.7734375,.65625,.321875,.3078125,.321875,.3546875,.5,.3375,.446875,.5359375,.45,.5296875,.4546875,.425,.4921875,.54375,.2671875,.240625,.5390625,.25,.815625,.5375,.5234375,.5390625,.5421875,.365625,.36875,.35625,.5171875,.5015625,.75,.5,.509375,.44375,.2421875,.14375,.2421875,.35],avg:.5116447368421051},Inter:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2890625,.4671875,.634375,.6421875,.9828125,.6453125,.3,.365625,.365625,.5015625,.6625,.2890625,.4609375,.2890625,.3609375,.63125,.4078125,.6109375,.61875,.646875,.59375,.6203125,.5671875,.61875,.6203125,.2890625,.303125,.6625,.6625,.6625,.5125,.9671875,.690625,.6546875,.73125,.721875,.6015625,.590625,.746875,.74375,.26875,.571875,.671875,.565625,.9046875,.7546875,.765625,.6390625,.765625,.64375,.6421875,.646875,.7453125,.690625,.9859375,.6828125,.6796875,.6296875,.365625,.3609375,.365625,.471875,.45625,.3234375,.5625,.6125,.571875,.6125,.584375,.3703125,.6140625,.5921875,.2421875,.2548828125,.55,.2421875,.8765625,.5921875,.6,.6125,.6125,.3765625,.528125,.328125,.5921875,.5625,.81875,.546875,.5625,.553125,.4265625,.3328125,.4265625,.6625],avg:.5624362664473683},Montserrat:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2625,.2609375,.3734375,.696875,.615625,.8296875,.6703125,.203125,.3296875,.3296875,.3875,.575,.2125,.3828125,.2125,.3953125,.6625,.3625,.56875,.5640625,.6625,.5671875,.609375,.5890625,.6390625,.609375,.2125,.2125,.575,.575,.575,.5671875,1.034375,.7171875,.7546875,.7203125,.8265625,.6703125,.634375,.7734375,.8140625,.303125,.5078125,.7125,.5890625,.95625,.8140625,.8390625,.71875,.8390625,.7234375,.615625,.575,.7921875,.6984375,1.1125,.65625,.6359375,.6515625,.31875,.396875,.31875,.5765625,.5,.6,.590625,.678125,.5640625,.678125,.6046875,.375,.6875,.678125,.2703125,.365625,.6015625,.2703125,1.0625,.678125,.628125,.678125,.678125,.4015625,.4890625,.40625,.6734375,.5421875,.8796875,.534375,.5671875,.5125,.334375,.2953125,.334375,.575],avg:.571792763157895},monospace:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5984375,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6078125,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.61875,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.615625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6140625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625],avg:.6020559210526316},Overpass:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2296875,.2765625,.4203125,.68125,.584375,.8515625,.7015625,.2203125,.3453125,.3453125,.53125,.63125,.2234375,.3953125,.2234375,.509375,.65,.4046875,.6171875,.60625,.6484375,.60625,.6015625,.5375,.615625,.6015625,.2234375,.2234375,.63125,.63125,.63125,.5015625,.8203125,.696875,.6671875,.65,.6859375,.6015625,.559375,.690625,.7078125,.2953125,.565625,.678125,.58125,.8046875,.7109375,.740625,.6421875,.740625,.6765625,.6046875,.590625,.696875,.6640625,.853125,.65,.6671875,.6625,.3734375,.509375,.3734375,.63125,.5125,.4,.5328125,.5625,.51875,.5625,.546875,.3359375,.5625,.565625,.25625,.3203125,.55,.265625,.85,.565625,.5671875,.5625,.5625,.4046875,.4765625,.3796875,.565625,.521875,.7265625,.53125,.5390625,.5125,.3671875,.275,.3671875,.63125],avg:.5430756578947369},Palatino:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.25,.278125,.371875,.60625,.5,.840625,.778125,.209375,.334375,.334375,.390625,.60625,.2578125,.334375,.25,.60625,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.25,.25,.60625,.60625,.60625,.4453125,.7484375,.778125,.6109375,.709375,.775,.6109375,.55625,.7640625,.8328125,.3375,.346875,.7265625,.6109375,.946875,.83125,.7875,.6046875,.7875,.66875,.525,.6140625,.778125,.7234375,1,.6671875,.6671875,.6671875,.334375,.60625,.334375,.60625,.5,.334375,.5,.565625,.4453125,.6109375,.4796875,.340625,.55625,.5828125,.2921875,.2671875,.5640625,.2921875,.8828125,.5828125,.546875,.6015625,.5609375,.3953125,.425,.3265625,.603125,.565625,.834375,.5171875,.55625,.5,.334375,.60625,.334375,.60625],avg:.5408552631578947},RedHatText:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2328125,.2203125,.35625,.6890625,.55,.7390625,.6703125,.2140625,.4015625,.4015625,.4546875,.53125,.2203125,.45625,.2203125,.515625,.6609375,.3078125,.5484375,.5875,.61875,.5703125,.6203125,.559375,.6140625,.6203125,.2203125,.2234375,.465625,.534375,.465625,.5125,.7671875,.6609375,.6703125,.7265625,.728125,.6203125,.6109375,.8,.73125,.253125,.6,.6125,.6078125,.8625,.7390625,.8109375,.6546875,.809375,.6484375,.6234375,.6171875,.7125,.6609375,.8984375,.6546875,.646875,.60625,.3625,.5203125,.3625,.540625,.4609375,.5234375,.5265625,.584375,.509375,.5828125,.5578125,.3703125,.5828125,.553125,.2234375,.24375,.4890625,.2234375,.8453125,.553125,.58125,.584375,.5828125,.353125,.453125,.378125,.553125,.5015625,.6984375,.4875,.4984375,.459375,.3953125,.2921875,.3953125,.58125],avg:.5341940789473685},"sans-serif":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.278125,.35625,.55625,.55625,.890625,.6671875,.1921875,.334375,.334375,.390625,.584375,.278125,.334375,.278125,.303125,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.5859375,.584375,.5859375,.55625,1.015625,.6671875,.6671875,.7234375,.7234375,.6671875,.6109375,.778125,.7234375,.278125,.5,.6671875,.55625,.834375,.7234375,.778125,.6671875,.778125,.7234375,.6671875,.6109375,.7234375,.6671875,.9453125,.6671875,.6671875,.6109375,.278125,.35625,.278125,.478125,.55625,.334375,.55625,.55625,.5,.55625,.55625,.278125,.55625,.55625,.2234375,.2421875,.5,.2234375,.834375,.55625,.55625,.55625,.55625,.334375,.5,.278125,.55625,.5,.7234375,.5,.5,.5,.35625,.2609375,.3546875,.590625],avg:.5293256578947368},Seravek:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.215625,.296875,.4171875,.6734375,.4953125,.9125,.740625,.2421875,.3375,.3375,.409375,.60625,.2609375,.35625,.25625,.41875,.5921875,.3515625,.475,.4875,.5375,.509375,.5484375,.4546875,.5421875,.5484375,.25625,.2546875,.5875,.6171875,.5875,.4578125,.8140625,.6765625,.5703125,.6109375,.684375,.5109375,.4953125,.678125,.6859375,.2625,.2625,.5859375,.4734375,.846875,.709375,.740625,.509375,.740625,.584375,.5015625,.528125,.675,.5953125,.9453125,.596875,.540625,.540625,.359375,.4203125,.359375,.5109375,.421875,.4046875,.5015625,.5421875,.446875,.5453125,.484375,.38125,.5140625,.5546875,.240625,.2640625,.490625,.2765625,.8625,.5546875,.546875,.5453125,.5453125,.3625,.41875,.3890625,.5453125,.4703125,.7546875,.4921875,.4609375,.453125,.4015625,.2640625,.4015625,.58125],avg:.5044078947368421},serif:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2484375,.334375,.409375,.5,.5,.834375,.778125,.18125,.334375,.334375,.5,.5640625,.25,.334375,.25,.278125,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.278125,.278125,.5640625,.5640625,.5640625,.4453125,.921875,.7234375,.6671875,.6671875,.7234375,.6109375,.55625,.7234375,.7234375,.334375,.390625,.7234375,.6109375,.890625,.7234375,.7234375,.55625,.7234375,.6671875,.55625,.6109375,.7234375,.7234375,.9453125,.7234375,.7234375,.6109375,.334375,.340625,.334375,.4703125,.5,.3453125,.4453125,.5,.4453125,.5,.4453125,.3828125,.5,.5,.278125,.3359375,.5,.278125,.778125,.5,.5,.5,.5,.3375,.390625,.2796875,.5,.5,.7234375,.5,.5,.4453125,.48125,.2015625,.48125,.5421875],avg:.5126315789473684},Tahoma:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3109375,.3328125,.4015625,.728125,.546875,.9765625,.70625,.2109375,.3828125,.3828125,.546875,.728125,.303125,.3640625,.303125,.3953125,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.3546875,.3546875,.728125,.728125,.728125,.475,.909375,.6109375,.590625,.6015625,.6796875,.5625,.521875,.66875,.6765625,.3734375,.4171875,.6046875,.4984375,.771875,.66875,.7078125,.5515625,.7078125,.6375,.5578125,.5875,.65625,.60625,.903125,.58125,.5890625,.559375,.3828125,.39375,.3828125,.728125,.5625,.546875,.525,.553125,.4625,.553125,.5265625,.3546875,.553125,.5578125,.2296875,.328125,.51875,.2296875,.840625,.5578125,.54375,.553125,.553125,.3609375,.446875,.3359375,.5578125,.4984375,.7421875,.4953125,.4984375,.4453125,.48125,.3828125,.48125,.728125],avg:.5384374999999998},"Times New Roman":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2484375,.334375,.409375,.5,.5,.834375,.778125,.18125,.334375,.334375,.5,.5640625,.25,.334375,.25,.28125,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.278125,.278125,.5640625,.5640625,.5640625,.4453125,.921875,.7234375,.6671875,.6671875,.7234375,.6109375,.55625,.7234375,.7234375,.334375,.390625,.73125,.6109375,.890625,.7375,.7234375,.55625,.7234375,.6765625,.55625,.6109375,.7234375,.7234375,.9453125,.7234375,.7234375,.6109375,.334375,.28125,.334375,.4703125,.51875,.334375,.4453125,.503125,.4453125,.503125,.4453125,.4359375,.5,.5,.278125,.35625,.50625,.278125,.778125,.5,.5,.5046875,.5,.340625,.390625,.2796875,.5,.5,.7234375,.5,.5,.4453125,.48125,.2015625,.48125,.5421875],avg:.5134375},"Trebuchet MS":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3015625,.3671875,.325,.53125,.525,.6015625,.70625,.1609375,.3671875,.3671875,.3671875,.525,.3671875,.3671875,.3671875,.525,.525,.525,.525,.525,.525,.525,.525,.525,.525,.525,.3671875,.3671875,.525,.525,.525,.3671875,.771875,.590625,.5671875,.5984375,.6140625,.5359375,.525,.6765625,.6546875,.2796875,.4765625,.5765625,.5078125,.7109375,.6390625,.675,.5578125,.7421875,.5828125,.48125,.58125,.6484375,.5875,.853125,.5578125,.5703125,.5515625,.3671875,.3578125,.3671875,.525,.53125,.525,.5265625,.5578125,.4953125,.5578125,.546875,.375,.503125,.546875,.2859375,.3671875,.5046875,.2953125,.83125,.546875,.5375,.5578125,.5578125,.3890625,.40625,.396875,.546875,.490625,.7453125,.5015625,.49375,.475,.3671875,.525,.3671875,.525],avg:.5085197368421052},Verdana:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.35,.39375,.459375,.81875,.6359375,1.0765625,.759375,.26875,.4546875,.4546875,.6359375,.81875,.3640625,.4546875,.3640625,.4703125,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.4546875,.4546875,.81875,.81875,.81875,.546875,1,.684375,.6859375,.6984375,.771875,.6328125,.575,.7765625,.7515625,.421875,.4546875,.69375,.5578125,.84375,.7484375,.7875,.603125,.7875,.7,.684375,.6171875,.7328125,.684375,.9890625,.6859375,.615625,.6859375,.4546875,.46875,.4546875,.81875,.6421875,.6359375,.6015625,.6234375,.521875,.6234375,.596875,.384375,.6234375,.6328125,.275,.3765625,.5921875,.275,.9734375,.6328125,.6078125,.6234375,.6234375,.43125,.521875,.3953125,.6328125,.5921875,.81875,.5921875,.5921875,.5265625,.6359375,.4546875,.6359375,.81875],avg:.6171875000000003}},Cj={mm:3.8,sm:38,pt:1.33,pc:16,in:96,px:1},Bj={em:1,ex:.5},ZP={heightOverlapCoef:1.05,lineCapitalCoef:1.15},eM={lineHeight:1,letterSpacing:"0px",fontSize:0,angle:0,fontFamily:""},u4e=e=>e*Math.PI/180,d4e=e=>{const r=e.split(",").map(s=>s.replace(/'|"/g,"")).find(s=>_j[s])||"Helvetica";return _j[r]},tC=e=>Array.isArray(e)?e:e.toString().split(/\r\n|\r|\n/g),Lg=(e,n,r)=>{const s=u4e(r);return Math.abs(Math.cos(s)*e)+Math.abs(Math.sin(s)*n)},q1=(e,n)=>{var i;const r=(i=e.match(/[a-zA-Z%]+/))==null?void 0:i[0],s=Number(e.match(/[0-9.,]+/));let a;return r?Cj.hasOwnProperty(r)?a=s*Cj[r]:Bj.hasOwnProperty(r)?a=(n?s*n:s*eM.fontSize)*Bj[r]:a=s:a=s||0,a},nC=(e,n)=>{const r=Array.isArray(e)?e[n]:e,s=Ve({},r,eM);return Object.assign({},s,{fontFamily:s.fontFamily,letterSpacing:typeof s.letterSpacing=="number"?s.letterSpacing:q1(String(s.letterSpacing),s.fontSize),fontSize:typeof s.fontSize=="number"?s.fontSize:q1(String(s.fontSize))})},h4e=(e,n)=>{if(e===void 0||e===""||e===null)return 0;const r=tC(e).map((s,a)=>{const i=s.toString().length,{fontSize:o,letterSpacing:c,fontFamily:A}=nC(n,a),u=d4e(A);return s.toString().split("").map(d=>d.charCodeAt(0)<u.widths.length?u.widths[d.charCodeAt(0)]:u.avg).reduce((d,f)=>f+d,0)*o+c*Math.max(i-1,0)});return Math.max(...r)},f4e=(e,n)=>e===void 0||e===""||e===null?0:tC(e).reduce((r,s,a)=>{const i=nC(n,a),c=s.toString().match(/[(A-Z)(0-9)]/)?i.fontSize*ZP.lineCapitalCoef:i.fontSize;return r+i.lineHeight*c},0),g4e=(e,n)=>{const r=Array.isArray(n)?n[0]&&n[0].angle:n&&n.angle,s=f4e(e,n),a=h4e(e,n),i=r?Lg(a,s,r):a,o=r?Lg(s,a,r):s;return{width:i,height:o*ZP.heightOverlapCoef}},pv=cI(()=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width","300"),e.setAttribute("height","300"),e.setAttribute("viewBox","0 0 300 300"),e.setAttribute("aria-hidden","true");const n=document.createElementNS("http://www.w3.org/2000/svg","text");return e.appendChild(n),e.style.position="fixed",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e),n}),Sj=e=>e?`${e.angle}:${e.fontFamily}:${e.fontSize}:${e.letterSpacing}:${e.lineHeight}`:"null",m4e=cI((e,n)=>{var o,c;let r=pv();r.isConnected||((c=(o=pv.cache).clear)==null||c.call(o),r=pv());const s=tC(e);let a=0;for(const[A,u]of s.entries()){const h=document.createElementNS("http://www.w3.org/2000/svg","tspan"),d=nC(n,A);h.style.fontFamily=d.fontFamily,h.style.fontSize=`${d.fontSize}px`,h.style.lineHeight=d.lineHeight,h.style.fontFamily=d.fontFamily,h.style.letterSpacing=d.letterSpacing,h.textContent=u,h.setAttribute("x","0"),h.setAttribute("y",`${a}`),r.appendChild(h),a+=d.lineHeight*h.getBoundingClientRect().height}const{width:i}=r.getBoundingClientRect();return r.innerHTML="",{width:n!=null&&n.angle?Lg(i,a,n==null?void 0:n.angle):i,height:n!=null&&n.angle?Lg(a,i,n==null?void 0:n.angle):a}},(e,n)=>{const r=Array.isArray(e)?e.join():e,s=Array.isArray(n)?n.map(Sj).join():Sj(n);return`${r}::${s}`}),p4e={impl:function(e,n,r){return r===void 0&&(r=!1),!(typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u")||r?g4e(e,n):m4e(e,n)}},tM=(e,n)=>p4e.impl(e,n);var y4e=hp,v4e=oU;function x4e(e,n){return e&&e.length?v4e(e,y4e(n)):[]}var w4e=x4e;const b4e=en(w4e);function _4e(e,n,r){const{datasets:s,horizontal:a}=e,i=a?Rn(e,"y"):Rn(e,"x"),o=Math.abs(i[1]-i[0]),c=r!==void 0?r:Array.isArray(s[0])&&s[0].length||1,u=(n||s.length)*c;return Math.round(.5*o/u)}function C4e(e,n,r){if(e.polar||n!=="x")return;const s=r.filter(h=>h.type&&h.type.role&&h.type.role==="group");if(s.length<1)return;const{offset:a,children:i}=s[0].props;if(!a)return;const o=Array.isArray(i)&&i[0];if(!o)return;let c=o.props.barWidth,A=o.props.data&&o.props.data.length||1;if(o&&o.type.role==="stack"){const h=o.props.children&&o.props.children[0];if(!h)return;c=h.props.barWidth,A=o.props.children.length}const u=c||_4e(e,i.length,A);return{x:u*i.length/2+(a-u*((i.length-1)/2))}}function B4e(e,n,r){const s=r?r.slice(0):q.Children.toArray(e.children),a=e.data?fa(e):void 0,{polar:i,startAngle:o,endAngle:c,categories:A,minDomain:u,maxDomain:h,horizontal:d}=e,f={horizontal:d,polar:i,startAngle:o,endAngle:c,minDomain:u,maxDomain:h,categories:A},g=a?Object.assign(f,{data:a}):f,y=_h(s,x=>{const b=Object.assign({},x.props,g);if(eP(x)){if(x.type&&Et(x.type.getDomain))return x.props&&x.type.getDomain(b,n)}else return null;return Cl(b,n)},e),v=y.length===0?0:ua(y),p=y.length===0?1:Aa(y);return[v,p]}function S4e(e,n,r){const s=r||q.Children.toArray(e.children),a=R2(e,n),i=C4e(e,n,s);let o;if(a)o=a;else{const c=Ll(e,n),A=Ol(e,n),u=(e.data||e.y)&&fa(e),h=u?D2(e,n,u):[],d=B4e(e,n,s),f=c||ua([...h,...d]),g=A||Aa([...h,...d]);o=Si(f,g)}return Q2(o,Object.assign({domainPadding:i},e),n)}function kj(e,n,r){if(e.data)return Ms(e,n);const s=r?r.slice(0):q.Children.toArray(e.children),i=_l(_h(s,o=>{const c=Object.assign({},o.props,{horizontal:e.horizontal});return Ig(c,n)},e));return i.length>1?Gd("linear"):Gd(i[0])}function k4e(e){const r=f2(e,["groupComponent","containerComponent","labelComponent"]);let s=e.events;return Array.isArray(r)&&(s=Array.isArray(e.events)?r.concat(...e.events):r),s||[]}function j4e(e,n){const r=s=>{if(!eP(s))return null;const a=s.props||{};return mA(a,n)};return _h(e.slice(0),r)}function N4e(e){const n=a=>{const i=a.props||{};let o;if(Pke(a))a.type&&Et(a.type.getData)?o=a.type.getData(i):o=fa(i);else return null;return o.map(c=>({x:c.xName,y:c.yName}))},r={x:[],y:[]},s=(a,i)=>{const o=Array.isArray(i)?i.map(A=>A.x).filter(Boolean):i.x,c=Array.isArray(i)?i.map(A=>A.y).filter(Boolean):i.y;return{x:o!==void 0?a.x.concat(o):a.x,y:c!==void 0?a.y.concat(c):a.y}};return _h(e.slice(0),n,{},r,s)}function jj(e,n,r){const s=mA(e,n),a=nP(r,n),i=a?ZU(a.props,n):[],o=s.length?s:j4e(r,n);return _l([...o,...i].flat())}function nM(e,n){const r=n||q.Children.toArray(e.children),s=jj(e,"x",r),a=jj(e,"y",r),i=N4e(r);return{x:_l([...s,...i.x].flat()),y:_l([...a,...i.y].flat())}}function E4e(e,n,r){const s=e.categories&&mA(e,"x"),a=e.categories&&mA(e,"y"),o=!s||!a?r||nM(e,n):{},c=s||o.x,A=a||o.y;return{x:c.length>0?c:void 0,y:A.length>0?A:void 0}}const rC=q.createContext(void 0);rC.displayName="PortalContext";const rM=()=>q.useContext(rC),T4e=e=>{let{children:n}=e;const[r,s]=q.useState(new Map),a=q.useCallback((c,A)=>{s(u=>{const h=new Map(u);return h.set(c,A),h})},[s]),i=q.useCallback(c=>{s(A=>{const u=new Map(A);return u.delete(c),u})},[s]),o=q.useMemo(()=>({addChild:a,removeChild:i,children:r}),[a,i,r]);return q.createElement(rC.Provider,{value:o},n)},F4e=e=>{let{as:n,...r}=e;const s=rM();if(!s)return null;const a=Array.from(s.children.values());return q.cloneElement(n,r,a)};function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},X1.apply(this,arguments)}const I4e={className:"VictoryContainer",portalComponent:q.createElement(d_e,null),portalZIndex:99,responsive:!0,role:"img"};function U4e(e){const n={...I4e,...e},{title:r,desc:s,width:a,height:i,responsive:o}=n,c=S.useRef(null),A=S.useRef(s2("victory-container-")),u=n.containerId??A.current,h=b=>`${u}-${b}`,d=Ui(n),f=o?{width:"100%",height:"100%"}:{width:a,height:i},g=o?`0 0 ${a} ${i}`:void 0,m=o?n.preserveAspectRatio:void 0,y=[r&&h("title"),n["aria-labelledby"]].filter(Boolean).join(" ")||void 0,v=[s&&h("desc"),n["aria-describedby"]].filter(Boolean).join(" ")||void 0,p=h("title"),x=h("desc");return{...n,titleId:p,descId:x,dimensions:f,viewBox:g,preserveAspectRatio:m,ariaLabelledBy:y,ariaDescribedBy:v,userProps:d,localContainerRef:c}}const Hl=e=>{const{role:n,title:r,desc:s,children:a,className:i,portalZIndex:o,portalComponent:c,width:A,height:u,style:h,tabIndex:d,responsive:f,events:g,ouiaId:m,ouiaSafe:y,ouiaType:v,dimensions:p,ariaDescribedBy:x,ariaLabelledBy:b,viewBox:w,preserveAspectRatio:_,userProps:B,titleId:k,descId:N,containerRef:C,localContainerRef:j}=U4e(e);return q.useEffect(()=>{if(!(g!=null&&g.onWheel))return;const E=I=>I.preventDefault(),F=j==null?void 0:j.current;return F==null||F.addEventListener("wheel",E),()=>{F==null||F.removeEventListener("wheel",E)}},[]),q.createElement("div",{className:i,style:{...h,width:f?h==null?void 0:h.width:p.width,height:f?h==null?void 0:h.height:p.height,pointerEvents:(h==null?void 0:h.pointerEvents)??"none",touchAction:(h==null?void 0:h.touchAction)??"none",position:(h==null?void 0:h.position)??"relative"},"data-ouia-component-id":m,"data-ouia-component-type":v,"data-ouia-safe":y,ref:$Be([j,C])},q.createElement(T4e,null,q.createElement("svg",X1({width:A,height:u,tabIndex:d,role:n,"aria-labelledby":b,"aria-describedby":x,viewBox:w,preserveAspectRatio:_,style:{...p,pointerEvents:"all"}},B,g),r?q.createElement("title",{id:k},r):null,s?q.createElement("desc",{id:N},s):null,a),q.createElement("div",{style:{...p,zIndex:o,position:"absolute",top:0,left:0}},q.createElement(F4e,{as:c,width:A,height:u,viewBox:w,preserveAspectRatio:_,style:{...p,overflow:"visible"}}))))};Hl.role="container";const P4e={groupComponent:q.createElement("g",null)},Y1=e=>{const n={...P4e,...e},[r]=S.useState(s2()),s=rM(),a=Array.isArray(n.children)?n.children[0]:n.children,{groupComponent:i}=n,o=a&&a.props||{},c=o.groupComponent?{groupComponent:i,standalone:!1}:{},A=Ve(c,o,a2(n,["children","groupComponent"]),{key:o.key??r}),u=a&&q.cloneElement(a,A);return q.useEffect(()=>{s==null||s.addChild(r,u)},[n.children]),q.useEffect(()=>()=>s==null?void 0:s.removeChild(r),[]),s?null:u};Y1.role="portal";function Hg(){return Hg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Hg.apply(this,arguments)}const sC=S.forwardRef((e,n)=>{var A;const{desc:r,id:s,tabIndex:a,origin:i,...o}=e,c={vectorEffect:"non-scaling-stroke",id:(A=Xe(s,e))==null?void 0:A.toString(),tabIndex:Xe(a,e),...o};return r?q.createElement("rect",Hg({},c,{ref:n}),q.createElement("desc",null,r)):q.createElement("rect",Hg({},c,{ref:n}))}),M4e=e=>{var u;const{children:n,desc:r,id:s,origin:a,tabIndex:i,title:o,...c}=e,A={id:(u=Xe(s,e))==null?void 0:u.toString(),tabIndex:Xe(i,e),...c};return q.createElement("text",A,o&&q.createElement("title",null,o),r&&q.createElement("desc",null,r),n)},Q4e=e=>{var c;const{desc:n,id:r,tabIndex:s,origin:a,...i}=e,o={id:(c=Xe(r,e))==null?void 0:c.toString(),tabIndex:Xe(s,e),...i};return q.createElement("tspan",o)},Al={fill:"#252525",fontSize:14,fontFamily:"'Gill Sans', 'Gill Sans MT', 'Seravek', 'Trebuchet MS', sans-serif",stroke:"transparent"},Nj=(e,n)=>e.datum?i2(e,e.datum)[n]:0,Ej=e=>{const n=e&&e.fontSize;if(typeof n=="number")return n;if(n==null)return Al.fontSize;if(typeof n=="string"){const r=Number(n.replace("px",""));return isNaN(r)?Al.fontSize:r}return Al.fontSize},vr=function(e,n){return n===void 0&&(n=0),Array.isArray(e)?e[n]||e[0]:e},sM=e=>{const{backgroundStyle:n,backgroundPadding:r}=e;return Array.isArray(n)&&!mn(n)||Array.isArray(r)&&!mn(r)},D4e=(e,n)=>{if(n.disableInlineStyles){const s=cr(e,n);return{fontSize:Ej(s)}}const r=s=>{const a=cr(s?Ve({},s,Al):Al,n);return Object.assign({},a,{fontSize:Ej(a)})};return Array.isArray(e)&&!mn(e)?e.map(s=>r(s)):r(e)},R4e=(e,n)=>{if(e)return Array.isArray(e)&&!mn(e)?e.map(r=>cr(r,n)):cr(e,n)},$4e=e=>{if(e.backgroundPadding&&Array.isArray(e.backgroundPadding))return e.backgroundPadding.map(r=>{const s=Xe(r,e);return Ps(s)});const n=Xe(e.backgroundPadding,e);return Ps(n)},O4e=e=>{const n=Xe(e.lineHeight,e);return Array.isArray(n)&&mn(n)?[1]:n},L4e=(e,n)=>{if(e==null)return;if(Array.isArray(e))return e.map(s=>Xe(s,n));const r=Xe(e,n);if(r!=null)return Array.isArray(r)?r:`${r}`.split(`
`)},H4e=(e,n,r)=>{const s=e.dy?Xe(e.dy,e):0,a=e.inline?1:e.text.length,i=Xe(e.capHeight,e),o=n?Xe(n,e):"middle",c=[...Array(a).keys()].map(h=>vr(e.style,h).fontSize),A=[...Array(a).keys()].map(h=>vr(r,h));if(o==="start")return s+(i/2+A[0]/2)*c[0];if(e.inline)return o==="end"?s+(i/2-A[0]/2)*c[0]:s+i/2*c[0];if(a===1)return o==="end"?s+(i/2+(.5-a)*A[0])*c[0]:s+(i/2+(.5-a/2)*A[0])*c[0];const u=[...Array(a).keys()].reduce((h,d)=>h+(i/2+(.5-a)*A[d])*c[d]/a,0);return o==="end"?s+u:s+u/2+i/2*A[a-1]*c[a-1]},z4e=(e,n,r)=>{const{polar:s}=e,a=vr(e.style),i=s?z2(e):0,o=a.angle===void 0?Xe(e.angle,e):a.angle,c=o===void 0?i:o,A=e.transform||a.transform,u=A&&Xe(A,e);return u||c?V1(u,c&&{rotate:[c,n,r]}):void 0},aM=(e,n)=>{const{direction:r,textAnchor:s,x:a,dx:i}=e;if(r==="rtl")return a-n;switch(s){case"middle":return Math.round(a-n/2);case"end":return Math.round(a-n);default:return a+(i||0)}},iM=(e,n)=>{const{verticalAnchor:r,y:s,originalDy:a=0}=e,i=s+a;switch(r){case"start":return Math.floor(i);case"end":return Math.ceil(i-n);default:return Math.floor(i-n/2)}},K4e=(e,n)=>{const{dx:r=0,transform:s,backgroundComponent:a,backgroundStyle:i,inline:o,backgroundPadding:c,capHeight:A}=e,u=n.map(y=>y.textSize),h=o?Math.max(...u.map(y=>y.height)):u.reduce((y,v,p)=>{const x=p?0:A/2;return y+v.height*(n[p].lineHeight-x)},0),d=o?u.reduce((y,v,p)=>{const x=p?r:0;return y+v.width+x},0):Math.max(...u.map(y=>y.width)),f=aM(e,d),g=iM(e,h),m={key:"background",height:h+c.top+c.bottom,style:i,transform:s,width:d+c.left+c.right,x:o?f-c.left:f+r-c.left,y:g};return q.cloneElement(a,Ve({},a.props,m))},G4e=(e,n,r)=>{const{textAnchor:s}=e,a=n.map(c=>c.widthWithPadding),o=-a.reduce((c,A)=>c+A,0)/2;switch(s){case"start":return a.reduce((c,A,u)=>u<r?c+A:c,0);case"end":return a.reduce((c,A,u)=>u>r?c-A:c,0);default:return a.reduce((c,A,u)=>{const h=u<r?A:0;return u===r?c+A/2:c+h},o)}},W4e=(e,n)=>{const{dy:r,dx:s,transform:a,backgroundStyle:i,backgroundPadding:o,backgroundComponent:c,inline:A,y:u}=e,h=n.map((d,f)=>{const g=vr(n,f-1),m=d.textSize,y=d.fontSize*d.lineHeight,v=Math.ceil(y),p=vr(o,f),x=vr(o,f-1),b=A&&s||0,w=f&&!A?g.fontSize*g.lineHeight+x.top+x.bottom:r-y*.5-(d.fontSize-d.capHeight);return{textHeight:v,labelSize:m,heightWithPadding:v+p.top+p.bottom,widthWithPadding:m.width+p.left+p.right+b,y:u,fontSize:d.fontSize,dy:w}});return h.map((d,f)=>{const g=aM(e,d.labelSize.width),m=h.slice(0,f+1).reduce((w,_)=>w+_.dy,u),y=vr(o,f),v=d.heightWithPadding,p=A?G4e(e,h,f)+g-y.left:g,x=A?iM(e,v)-y.top:m,b={key:`tspan-background-${f}`,height:v,style:vr(i,f),width:d.widthWithPadding,transform:a,x:p-y.left,y:x};return q.cloneElement(c,Ve({},c.props,b))})},V4e=(e,n)=>sM(e)?W4e(e,n):K4e(e,n),q4e=(e,n,r)=>{const s=vr(e,n),a=vr(e,n-1),i=a.fontSize*a.lineHeight,o=s.fontSize*s.lineHeight,c=a.fontSize-a.capHeight,A=s.fontSize-s.capHeight,u=i-a.fontSize/2+s.fontSize/2-i/2+o/2-A/2+c/2;return sM(r)?u+s.backgroundPadding.top+a.backgroundPadding.bottom:u},X4e=(e,n,r)=>{const{inline:s}=n,a=vr(e,r);return r&&!s?q4e(e,r,n):s?r===0?a.backgroundPadding.top:void 0:a.backgroundPadding.top},Y4e=e=>{const n=L4e(e.text,e),r=D4e(e.style,Object.assign({},e,{text:n})),s=R4e(e.backgroundStyle,Object.assign({},e,{text:n,style:r})),a=$4e(Object.assign({},e,{text:n,style:r,backgroundStyle:s})),i=Xe(e.id,e);return Object.assign({},e,{backgroundStyle:s,backgroundPadding:a,style:r,text:n,id:i})},J4e=e=>{const n=Xe(e.ariaLabel,e),r=vr(e.style),s=O4e(e),a=e.direction?Xe(e.direction,e):"inherit",i=e.textAnchor?Xe(e.textAnchor,e):r.textAnchor||"start",o=e.verticalAnchor?Xe(e.verticalAnchor,e):r.verticalAnchor||"middle",c=e.dx?Xe(e.dx,e):0,A=H4e(e,o,s),u=e.x!==void 0?e.x:Nj(e,"x"),h=e.y!==void 0?e.y:Nj(e,"y"),d=z4e(e,u,h);return Object.assign({},e,{ariaLabel:n,lineHeight:s,direction:a,textAnchor:i,verticalAnchor:o,dx:c,dy:A,originalDy:Xe(e.dy,e),transform:d,x:u,y:h})},Z4e=(e,n)=>{const{ariaLabel:r,inline:s,className:a,title:i,events:o,direction:c,text:A,textAnchor:u,dx:h,dy:d,transform:f,x:g,y:m,desc:y,id:v,tabIndex:p,tspanComponent:x,textComponent:b}=e,w=Ui(e),_={"aria-label":r,key:"text",...o,direction:c,dx:h,x:g,y:m+d,transform:f,className:a,title:i,desc:Xe(y,e),tabIndex:Xe(p,e),id:v,...w},B=A.map((k,N)=>{const C=n[N].style,j={key:`${v}-key-${N}`,x:s?void 0:g,dx:s?h+n[N].backgroundPadding.left:h,dy:X4e(n,e,N),textAnchor:C.textAnchor||u,style:C,children:k};return q.cloneElement(x,j)});return q.cloneElement(b,_,B)},eEe={backgroundComponent:q.createElement(sC,null),groupComponent:q.createElement("g",null),direction:"inherit",textComponent:q.createElement(M4e,null),tspanComponent:q.createElement(Q4e,null),capHeight:.71,lineHeight:1},Ma=e=>{const n=Y4e(Ve({},e,eEe));if(n.text===null||n.text===void 0)return null;const r=J4e(n),{text:s,style:a,capHeight:i,backgroundPadding:o,lineHeight:c}=r,A=s.map((h,d)=>{const f=vr(a,d),g=q1(`${i}em`,f.fontSize),m=vr(c,d);return{style:f,fontSize:f.fontSize||Al.fontSize,capHeight:g,text:h,textSize:tM(h,f),lineHeight:m,backgroundPadding:vr(o,d)}}),u=Z4e(r,A);if(n.backgroundStyle){const d=[V4e(r,A),u],f=q.cloneElement(n.groupComponent,{},d);return n.renderInPortal?q.createElement(Y1,null,f):f}return n.renderInPortal?q.createElement(Y1,null,u):u};Ma.displayName="VictoryLabel";Ma.role="label";Ma.defaultStyles=Al;const tEe=e=>{var n;return q.createElement("defs",null,q.createElement("clipPath",{id:(n=e.clipId)==null?void 0:n.toString()},e.children))};function zg(){return zg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},zg.apply(this,arguments)}const oM=S.forwardRef((e,n)=>{var A;const{desc:r,id:s,tabIndex:a,origin:i,...o}=e,c={vectorEffect:"non-scaling-stroke",id:(A=Xe(s,e))==null?void 0:A.toString(),tabIndex:Xe(a,e),...o};return r?q.createElement("circle",zg({},c,{ref:n}),q.createElement("desc",null,r)):q.createElement("circle",zg({},c,{ref:n}))});class Zu extends q.Component{constructor(n){super(n),this.state={clipId:n==null?void 0:n.clipId}}componentDidMount(){this.state.clipId||this.setState({clipId:s2("victory-clip-")})}calculateAttributes(n){const{polar:r,origin:s,clipWidth:a=0,clipHeight:i=0,translateX:o=0,translateY:c=0}=n,A=Ps(n.clipPadding),u=n.radius||j1(n);return{x:(r?s.x:o)-A.left,y:(r?s.y:c)-A.top,width:Math.max((r?u:a)+A.left+A.right,0),height:Math.max((r?u:i)+A.top+A.bottom,0)}}renderClippedGroup(n,r){const s=Ui(n),{style:a,events:i,transform:o,children:c,className:A,groupComponent:u,tabIndex:h}=n,d=this.renderClipComponent(n,r),f=Object.assign({className:A,style:a,transform:o,key:`clipped-group-${r}`,clipPath:`url(#${r})`},i);return q.cloneElement(u,{...f,tabIndex:h,...s},[d,...q.Children.toArray(c)])}renderGroup(n){const{style:r,events:s,transform:a,children:i,className:o,groupComponent:c,tabIndex:A}=n;return q.cloneElement(c,Object.assign({className:o,style:r,transform:a,"aria-label":n["aria-label"],tabIndex:A},s),i)}renderClipComponent(n,r){const{polar:s,origin:a,clipWidth:i=0,clipHeight:o=0,translateX:c=0,translateY:A=0,circleComponent:u,rectComponent:h,clipPathComponent:d}=n,{top:f,bottom:g,left:m,right:y}=Ps(n.clipPadding);let v;if(s){const p=n.radius||j1(n),x={r:Math.max(p+m+y,p+f+g,0),cx:a.x-m,cy:a.y-f};v=q.cloneElement(u,x)}else{const p={x:c-m,y:A-f,width:Math.max(i+m+y,0),height:Math.max(o+f+g,0)};v=q.cloneElement(h,p)}return q.cloneElement(d,Object.assign({key:`clip-path-${r}`},n,{clipId:r}),v)}getClipValue(n,r){const s={x:n.clipWidth,y:n.clipHeight};if(s[r]!==void 0)return s[r];const a=Rn(n,r);return a&&Math.abs(a[0]-a[1])||void 0}getTranslateValue(n,r){const s={x:n.translateX,y:n.translateY};if(s[r]!==void 0)return s[r];const a=Rn(n,r);return a?Math.min(...a):void 0}render(){const n=this.getClipValue(this.props,"y"),r=this.getClipValue(this.props,"x");if(r===void 0||n===void 0)return this.renderGroup(this.props);const s=this.getTranslateValue(this.props,"x"),a=this.getTranslateValue(this.props,"y"),i=Ve({},this.props,{clipHeight:n,clipWidth:r,translateX:s,translateY:a});return this.renderClippedGroup(i,this.state.clipId)}}ve(Zu,"displayName","VictoryClipContainer"),ve(Zu,"role","container"),ve(Zu,"defaultProps",{circleComponent:q.createElement(oM,null),rectComponent:q.createElement(sC,null),clipPathComponent:q.createElement(tEe,null),groupComponent:q.createElement("g",null)});function Kg(){return Kg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Kg.apply(this,arguments)}const Ip=S.forwardRef((e,n)=>{var A;const{desc:r,id:s,tabIndex:a,origin:i,...o}=e,c={id:(A=Xe(s,e))==null?void 0:A.toString(),tabIndex:Xe(a,e),...o};return r?q.createElement("path",Kg({},c,{ref:n}),q.createElement("desc",null,r)):q.createElement("path",Kg({},c,{ref:n}))}),nEe=e=>{const{cx:n,cy:r,r:s,startAngle:a,endAngle:i,closedPath:o}=e,c=Math.abs(i-a)/2+a,A=n+s*Math.cos(Mn(a)),u=r-s*Math.sin(Mn(a)),h=n+s*Math.cos(Mn(c)),d=r-s*Math.sin(Mn(c)),f=n+s*Math.cos(Mn(i)),g=r-s*Math.sin(Mn(i)),m=c-a<=180?0:1,y=i-c<=180?0:1,v=o?` M ${n}, ${r} L ${A}, ${u}`:`M ${A}, ${u}`,p=`A ${s}, ${s}, 0, ${m}, 0, ${h}, ${d}`,x=`A ${s}, ${s}, 0, ${y}, 0, ${f}, ${g}`;return`${v} ${p} ${x} ${o?"Z":""}`},rEe=e=>{const n=Xe(e.ariaLabel,e),r=Xe(e.desc,e),s=Xe(e.id,e),a=cr(Object.assign({stroke:"black",fill:"none"},e.style),e),i=Xe(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,desc:r,id:s,style:a,tabIndex:i})},sEe={pathComponent:q.createElement(Ip,null),role:"presentation",shapeRendering:"auto"},Tj=e=>{const n=rEe(Ve({},e,sEe));return q.cloneElement(n.pathComponent,{...n.events,"aria-label":n.ariaLabel,d:nEe(n),style:n.style,desc:n.desc,tabIndex:n.tabIndex,className:n.className,role:n.role,shapeRendering:n.shapeRendering,transform:n.transform,clipPath:n.clipPath})},aEe=e=>{const n=Xe(e.id,e);return Object.assign({},e,{id:n})},iEe={circleComponent:q.createElement(oM,null),rectComponent:q.createElement(sC,null),role:"presentation",shapeRendering:"auto"},oEe=e=>{const n=aEe(Ve({},e,iEe));return n.polar?q.cloneElement(n.circleComponent,{...n.events,style:n.style,role:n.role,shapeRendering:n.shapeRendering,cx:n.x,cy:n.y,r:n.height,className:n.className}):q.cloneElement(n.rectComponent,{...n.events,style:n.style,role:n.role,shapeRendering:n.shapeRendering,x:n.x,y:n.y,rx:n.rx,ry:n.ry,width:n.width,height:n.height,className:n.className})};function Gg(){return Gg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Gg.apply(this,arguments)}const lEe=S.forwardRef((e,n)=>{var A;const{desc:r,id:s,tabIndex:a,origin:i,...o}=e,c={vectorEffect:"non-scaling-stroke",id:(A=Xe(s,e))==null?void 0:A.toString(),tabIndex:Xe(a,e),...o};return r?q.createElement("line",Gg({},c,{ref:n}),q.createElement("desc",null,r)):q.createElement("line",Gg({},c,{ref:n}))}),cEe=e=>{const n=Xe(e.ariaLabel,e),r=Xe(e.desc,e),s=Xe(e.id,e),a=cr(Object.assign({stroke:"black"},e.style),e),i=Xe(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,desc:r,id:s,style:a,tabIndex:i})},AEe={lineComponent:q.createElement(lEe,null),role:"presentation",shapeRendering:"auto"},qc=e=>{const n=cEe(Ve({},e,AEe));return q.cloneElement(n.lineComponent,{...n.events,"aria-label":n.ariaLabel,style:n.style,desc:n.desc,tabIndex:n.tabIndex,className:n.className,role:n.role,shapeRendering:n.shapeRendering,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2,transform:n.transform,clipPath:n.clipPath})},uEe=e=>{const{x:n,y:r,size:s,symbol:a}=e;if(e.getPath)return e.getPath(n,r,s);const i=wNe;return(typeof i[a]=="function"?i[a]:i.circle)(n,r,s)},dEe=e=>{const n=Xe(e.ariaLabel,e),r=Xe(e.desc,e),s=Xe(e.id,e),a=Xe(e.size,e),i=cr(e.style,e),o=Xe(e.symbol,e),c=Xe(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,desc:r,id:s,size:a,style:i,symbol:o,tabIndex:c})},hEe={pathComponent:q.createElement(Ip,null),role:"presentation",shapeRendering:"auto"},fEe=e=>{const n=dEe(Ve({},e,hEe)),r=Ui(n);return q.cloneElement(n.pathComponent,{...n.events,"aria-label":n.ariaLabel,d:uEe(n),style:n.style,desc:n.desc,tabIndex:n.tabIndex,role:n.role,shapeRendering:n.shapeRendering,className:n.className,transform:n.transform,clipPath:n.clipPath,...r})},gEe=(e,n)=>{let r=fa(e);r.length<2&&(r=[]);const s=a=>{const i=XU(n[a])==="log"?1/Number.MAX_SAFE_INTEGER:0,o=n[a].domain(),c=ua(o),A=Aa(o);let u=i;return c.valueOf()<0&&A.valueOf()<=0?u=A:c.valueOf()>=0&&A.valueOf()>0&&(u=c),bi(o)?new Date(u):u};return r.map(a=>{const i=a._y1!==void 0?a._y1:a._y,o=a._y0!==void 0?a._y0:s("y"),c=a._x1!==void 0?a._x1:a._x,A=a._x0!==void 0?a._x0:s("x");return Object.assign({},a,{_y0:o,_y1:i,_x0:A,_x1:c})})},mEe=e=>{const{polar:n}=e,r=o2(e,"area"),s=l2(e.style,r),a={x:Rn(e,"x"),y:Rn(e,"y")},i={x:R1(e,"x"),y:R1(e,"y")},o={x:Ms(e,"x").domain(i.x).range(e.horizontal?a.y:a.x),y:Ms(e,"y").domain(i.y).range(e.horizontal?a.x:a.y)},c=n?e.origin||bh(e):void 0,A=gEe(e,o);return{style:s,data:A,scale:o,domain:i,origin:c}},pEe=(e,n)=>{const r=la(e,n,"area"),s=Object.assign({},r,mEe(r)),{data:a,domain:i,events:o,groupComponent:c,height:A,horizontal:u,interpolation:h,origin:d,padding:f,polar:g,scale:m,sharedEvents:y,standalone:v,style:p,theme:x,width:b,labels:w,name:_,disableInlineStyles:B}=s,k={parent:{style:p.parent,width:b,height:A,scale:m,data:a,domain:i,standalone:v,theme:x,polar:g,origin:d,padding:f,name:_,horizontal:u},all:{data:{horizontal:u,polar:g,origin:d,scale:m,data:a,interpolation:h,groupComponent:c,style:B?{}:p.data,disableInlineStyles:B}}};return a.reduce((N,C,j)=>{const E=Sp(s,C,j);if(E!=null||w&&(o||y)){const F=zd(C.eventKey)?j:C.eventKey;N[F]={labels:G2(s,j)}}return N},k)},J1=e=>{const n=e._y1!==void 0?e._y1:e._y;return n!=null&&e._y0!==null},Fj=e=>n=>e.x(n._x1!==void 0?n._x1:n._x),Z1=e=>n=>e.y(n._y1!==void 0?n._y1:n._y),ew=e=>n=>e.y(n._y0),yEe=e=>n=>-1*e.x(n._x1!==void 0?n._x1:n._x)+Math.PI/2,vEe=e=>{const{horizontal:n,scale:r}=e,s=Rg(e);return n?Pg().defined(J1).curve(s).x0(ew(r)).x1(Z1(r)).y(Fj(r)):Pg().defined(J1).curve(s).x(Fj(r)).y1(Z1(r)).y0(ew(r))},xEe=e=>{const{polar:n,scale:r}=e,s=Rg(e);return n?H1().defined(J1).curve(s).angle(yEe(r)).outerRadius(Z1(r)).innerRadius(ew(r)):vEe(e)},wEe=e=>{const n=Xe(e.ariaLabel,e),r=Xe(e.desc,e),s=Xe(e.id,e),a=cr(Object.assign({fill:"black"},e.style),e),i=Xe(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,desc:r,id:s,style:a,tabIndex:i})},bEe={groupComponent:q.createElement("g",null),pathComponent:q.createElement(Ip,null),role:"presentation",shapeRendering:"auto"},_Ee=e=>{const n=wEe(Ve({},e,bEe)),{ariaLabel:r,role:s,shapeRendering:a,className:i,polar:o,origin:c,data:A,pathComponent:u,events:h,groupComponent:d,clipPath:f,id:g,style:m,desc:y,tabIndex:v}=n,p=Ui(n),x=o&&c?`translate(${c.x}, ${c.y})`:void 0,b=n.transform||x,w=m.stroke&&m.stroke!=="none"&&m.stroke!=="transparent",_=xEe(n),B=w&&zP(n),k=m.stroke?"none":m.fill,N={"aria-label":r,className:i,role:s,shapeRendering:a,transform:b,...h,clipPath:f,tabIndex:v},C=q.cloneElement(u,Object.assign({key:`${g}-area`,style:Object.assign({},m,{stroke:k}),d:_(A),desc:y,tabIndex:v},N,p)),j=w?q.cloneElement(u,Object.assign({key:`${g}-area-stroke`,style:Object.assign({},m,{fill:"none"}),d:B(A)},N)):null;return w?q.cloneElement(d,p,[C,j]):C},Ij={width:450,height:300,padding:50,interpolation:"linear"},CEe={components:[{name:"parent",index:"parent"},{name:"data",index:"all"},{name:"labels"}]},Zr=class Zr extends q.Component{static getBaseProps(n){return pEe(n,Ij)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n,role:r}=Zr,s=la(this.props,Ij,r);if(this.shouldAnimate())return this.animateComponent(s,n);const a=this.renderContinuousData(s),i=s.standalone?this.renderContainer(s.containerComponent,a):a;return d2(i,s)}};ve(Zr,"animationWhitelist",["data","domain","height","padding","style","width"]),ve(Zr,"defaultProps",{containerComponent:q.createElement(Hl,null),dataComponent:q.createElement(_Ee,null),groupComponent:q.createElement(Zu,null),labelComponent:q.createElement(Ma,{renderInPortal:!0}),samples:50,sortKey:"x",sortOrder:"ascending",standalone:!0,theme:RA.grayscale}),ve(Zr,"displayName","VictoryArea"),ve(Zr,"role","area"),ve(Zr,"continuous",!0),ve(Zr,"defaultTransitions",oP()),ve(Zr,"defaultPolarTransitions",lP()),ve(Zr,"getDomain",R1),ve(Zr,"getData",fa),ve(Zr,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);let tw=Zr;const bf=Ch(tw,CEe),aC={top:-1,left:-1,right:1,bottom:1},Wg=e=>e!=null,BEe=(e,n)=>{const{orientation:r,horizontal:s}=e;return r?{top:"x",bottom:"x",left:"y",right:"y"}[r]:s?n==="x"?"y":"x":n},SEe=e=>{const n=Os(e),r=BEe(e,n),s=Ms(e,n),i=e.domain&&e.domain[n]||DA(e)||s.domain();return s.range(Rn(e,r)),s.domain(i),s},kEe=e=>{const{theme:n,dependentAxis:r}=e,s=n&&n.axis&&n.axis.style,a=r?"dependentAxis":"independentAxis",i=n&&n[a]&&n[a].style;return s&&i?(()=>["axis","axisLabel","grid","parent","tickLabels","ticks"].reduce((A,u)=>(A[u]=Ve({},i[u],s[u]),A),{}))():i||s},lM=function(e,n){n===void 0&&(n={});const r=e.style||{},s={height:"100%",width:"100%"};return{parent:Ve(r.parent,n.parent,s),axis:Ve({},r.axis,n.axis),axisLabel:Ve({},r.axisLabel,n.axisLabel),grid:Ve({},r.grid,n.grid),ticks:Ve({},r.ticks,n.ticks),tickLabels:Ve({},r.tickLabels,n.tickLabels)}},jEe=(e,n,r)=>{const{position:s,transform:a}=e;return{x1:a.x,y1:a.y,x2:a.x+s.x2,y2:a.y+s.y2,style:n,datum:r}},NEe=(e,n,r,s,a)=>{const{position:i,transform:o}=e;return{style:n,x:o.x+i.x,y:o.y+i.y,verticalAnchor:r.verticalAnchor,textAnchor:r.textAnchor,angle:n.angle,text:a,datum:s}},EEe=(e,n,r)=>{const{edge:s,transform:a}=e;return{x1:a.x,y1:a.y,x2:s.x+a.x,y2:s.y+a.y,style:n,datum:r}},TEe=(e,n,r)=>{const{style:s,padding:a,isVertical:i}=n,{width:o,height:c}=e;return{style:s.axis,x1:i?r.x:a.left+r.x,x2:i?r.x:o-a.right+r.x,y1:i?a.top+r.y:r.y,y2:i?c-a.bottom+r.y:r.y}},FEe=(e,n)=>({tickStyle:cr(e.ticks,n),labelStyle:cr(e.tickLabels,n),gridStyle:cr(e.grid,n)}),IEe=(e,n,r)=>{const{style:s,orientation:a,padding:i,labelPadding:o,isVertical:c}=n,A=aC[a],u=i.left+i.right,h=i.top+i.bottom,d=A<0?"end":"start",f=s.axisLabel,g=c?-90:0,m=c?r.x+A*o:(e.width-u)/2+i.left+r.x,y=c?(e.height-h)/2+i.top+r.y:A*o+r.y;return{x:m,y,verticalAnchor:f.verticalAnchor||d,textAnchor:f.textAnchor||"middle",angle:f.angle===void 0?g:f.angle,style:f,text:e.label}},UEe=(e,n)=>{const s={top:"end",left:"end",right:"start",bottom:"start"}[e];return{textAnchor:n?s:"middle",verticalAnchor:n?"middle":s}},PEe=(e,n)=>{const r=n.axisLabel||{};if(r.padding!==void 0&&r.padding!==null)return r.padding;const s=_p(e),a=r.fontSize||14;return e.label?a*(s?2.3:1.6):0},Uj=(e,n,r)=>{const s=n||"positive";return r?{positive:{x:"left",y:"bottom"},negative:{x:"right",y:"top"}}[s][e]:{positive:{x:"bottom",y:"left"},negative:{x:"top",y:"right"}}[s][e]},MEe=(e,n)=>{const{style:r,scale:s,orientation:a,padding:i,axis:o,ticks:c,stringTicks:A,isVertical:u,labelPadding:h}=n,{polar:d,horizontal:f}=e,g={scale:{[o]:s},polar:d,horizontal:f,ticks:c,stringTicks:A},m=a==="right"?i.right:i.left,y=a==="top"?i.top:i.bottom,v=e.offsetX!==null&&e.offsetX!==void 0?e.offsetX:m,p=e.offsetY!==null&&e.offsetY!==void 0?e.offsetY:y,x=r.axisLabel.fontSize||14,b=c.map((N,C)=>{const j=A?e.tickValues[N-1]:N;return cr(r.ticks,Object.assign({},g,{tick:j,index:C})).size||0}),w=x+2*Math.max(...b)+h,_=1.2*x;return{x:v??(u?w:_),y:p??(u?_:w)}},eo=(e,n)=>e instanceof Date&&n instanceof Date?e.getTime()===n.getTime():e===n,QEe=(e,n)=>{const{scale:r,origin:s,orientation:a,orientations:i,domain:o,padding:c}=n,{top:A,bottom:u,left:h,right:d}=c,f={x:a==="bottom"||a==="top"?a:i.x,y:a==="left"||a==="right"?a:i.y},g={x:f.y==="left"?h:d,y:f.x==="bottom"?u:A},m={x:f.y==="left"?0:e.width,y:f.x==="bottom"?e.height:0},y={x:eo(s.x,o.x[0])||eo(s.x,o.x[1])?0:r.x(s.x),y:eo(s.y,o.y[0])||eo(s.y,o.y[1])?0:r.y(s.y)},v=y.x?Math.abs(m.x-y.x):g.x,p=y.y?Math.abs(m.y-y.y):g.y,x=Wg(e.offsetX)?e.offsetX:v,b=Wg(e.offsetY)?e.offsetY:p;return{x,y:b}},DEe=(e,n)=>{const{scale:r,origin:s,orientation:a,orientations:i,domain:o,padding:c}=n,{top:A,bottom:u,left:h,right:d}=c,f={y:a==="bottom"||a==="top"?a:i.x,x:a==="left"||a==="right"?a:i.y},g={x:f.y==="bottom"?u:A,y:f.x==="left"?h:d},m={y:f.x==="left"?0:e.width,x:f.y==="bottom"?e.height:0},y={x:eo(s.x,o.x[0])||eo(s.x,o.x[1])?0:r.x(s.x),y:eo(s.y,o.y[0])||eo(s.y,o.y[1])?0:r.y(s.y)},v=y.x?Math.abs(m.x-y.x):g.x,p=y.y?Math.abs(m.y-y.y):g.y,x=Wg(e.offsetX)?e.offsetX:p,b=Wg(e.offsetY)?e.offsetY:v;return{x,y:b}},REe=(e,n,r)=>{const{orientation:s,axis:a}=n,i=iP(e,a);return{top:{x:0,y:i!==void 0?i:r.y},bottom:{x:0,y:i!==void 0?i:e.height-r.y},left:{x:i!==void 0?i:r.x,y:0},right:{x:i!==void 0?i:e.width-r.x,y:0}}[s]},$Ee=(e,n,r)=>{const{tickStyle:s,labelStyle:a}=e,i=s.size||0,o=s.padding||0,c=a.padding||0,A=i+o+c,u=aC[n];return{x:r?u*A:0,x2:r?u*i:0,y:r?0:u*A,y2:r?0:u*i}},OEe=(e,n,r)=>({x:r?n.x:e+n.x,y:r?e+n.y:n.y}),LEe=(e,n)=>{const{orientation:r,padding:s,isVertical:a}=n,i=-aC[r],o=a?i*(e.width-(s.left+s.right)):0,c=a?0:i*(e.height-(s.top+s.bottom));return{x:o,y:c}},HEe=(e,n)=>{const{padding:r,orientation:s,crossAxis:a}=e,i=s==="right"?r.right:r.left,o=s==="top"?r.top:r.bottom;return{x:a?n.x-i:0,y:a?n.y-o:0}},zEe=(e,n)=>{let r;return n.domain.x&&n.domain.y?r=e.horizontal?DEe(e,n):QEe(e,n):r=MEe(e,n),{globalTransform:REe(e,n,r),gridOffset:HEe(n,r),gridEdge:LEe(e,n)}},KEe=e=>{if(e.orientation)return e.orientation;const n={dependent:e.horizontal?"bottom":"left",independent:e.horizontal?"left":"bottom"};return e.dependentAxis?n.dependent:n.independent},GEe=e=>{const n=kEe(e),r=lM(e,n),s=Ps(e.padding),a=PEe(e,r),i=Cp(e)?e.tickValues:void 0,o=Os(e),c=DA(e),A=SEe(e),u=o==="x"?c:void 0,h=o==="y"?c:void 0,d=o==="x"?A:void 0,f=o==="y"?A:void 0,g=!(e.crossAxis===!1||e.standalone===!0),m=aP(e,A,g),y=sP(e,A),v={x:Rn(e,"x"),y:Rn(e,"y")},p={x:e.domain&&e.domain.x?e.domain.x:u,y:e.domain&&e.domain.y?e.domain.y:h},x={x:e.domain&&e.domain.x?Ms(e,"x").domain(e.domain.x).range(e.horizontal?v.y:v.x):d,y:e.domain&&e.domain.y?Ms(e,"y").domain(e.domain.y).range(e.horizontal?v.x:v.y):f},b=p.x&&p.y?rP(p):void 0,w=b?{x:uj(b.x,p.x),y:uj(b.y,p.y)}:void 0,_=w?{x:Uj("x",w.y,e.horizontal),y:Uj("y",w.x,e.horizontal)}:void 0,B=_?e.orientation||_[o]:KEe(e),k=_p(Object.assign({},e,{orientation:B}));return{anchors:UEe(B,k),axis:o,crossAxis:g,domain:p,isVertical:k,labelPadding:a,orientation:B,orientations:_,origin:b,padding:s,scale:x,stringTicks:i,style:r,tickFormat:y,ticks:m}},WEe=(e,n)=>{const r=Bp(e,n),s=GEe(r),{axis:a,style:i,orientation:o,isVertical:c,scale:A,ticks:u,tickFormat:h,anchors:d,domain:f,stringTicks:g}=s,m=a==="x"?"y":"x",{width:y,height:v,standalone:p,theme:x,polar:b,padding:w,horizontal:_}=r,{globalTransform:B,gridOffset:k,gridEdge:N}=zEe(r,s),C={scale:{[a]:A[a]},polar:b,horizontal:_,ticks:u,stringTicks:g},j=TEe(r,s,B),E=IEe(r,s,B),F={parent:Object.assign({style:i.parent,ticks:u,standalone:p,theme:x,width:y,height:v,padding:w,domain:f},C)},I={dimension:m,range:{[m]:Rn(r,m)},scale:r.scale&&r.scale[m]?{[m]:r.scale[m]}:void 0};return u.reduce((T,L,P)=>{var V,K,se;const O=g?g[P]:L,Q=h(L,P,u),R=FEe(i,Object.assign({},C,{tick:O,tickValue:L,index:P,text:Q})),M={position:$Ee(R,o,c),transform:OEe((V=A[a])==null?void 0:V.call(A,L),B,c)},G={edge:N,transform:{x:c?-k.x+B.x:((K=A[a])==null?void 0:K.call(A,L))+B.x,y:c?((se=A[a])==null?void 0:se.call(A,L))+B.y:k.y+B.y}};return T[P]={axis:Object.assign({dimension:a},C,j),axisLabel:Object.assign({},C,E),ticks:Object.assign({},C,jEe(M,R.tickStyle,L)),tickLabels:Object.assign({},C,NEe(M,R.labelStyle,d,L,Q)),grid:Object.assign({},C,I,EEe(G,R.gridStyle,L))},T},F)},Pj={width:450,height:300,padding:50},VEe={components:[{name:"axis",index:0},{name:"axisLabel",index:0},{name:"grid"},{name:"parent",index:"parent"},{name:"ticks"},{name:"tickLabels"}]};class Za extends q.Component{static getStyles(n){return lM(n)}static getBaseProps(n){return WEe(n,Pj)}renderLine(n){const{axisComponent:r}=n,s=this.getComponentProps(r,"axis",0);return q.cloneElement(r,s)}renderLabel(n){const{axisLabelComponent:r,label:s}=n;if(!s)return null;const a=this.getComponentProps(r,"axisLabel",0);return q.cloneElement(r,a)}renderGridAndTicks(n){const{tickComponent:r,tickLabelComponent:s,gridComponent:a,name:i}=n,o=c=>{const{style:A={},events:u={}}=c;return A.stroke!=="transparent"&&A.stroke!=="none"&&A.strokeWidth!==0||!mn(u)};return this.dataKeys.map((c,A)=>{const u=this.getComponentProps(r,"ticks",A),h=q.cloneElement(r,u),d=o(h.props)?h:void 0,f=this.getComponentProps(a,"grid",A),g=q.cloneElement(a,f),m=o(g.props)?g:void 0,y=this.getComponentProps(s,"tickLabels",A),p=[m,d,q.cloneElement(s,y)].filter(Boolean);return q.cloneElement(n.groupComponent,{key:`${i}-tick-group-${c}`},p)})}fixLabelOverlap(n,r){const s=_p(r),a=s?r.height:r.width,i=g=>g.type&&g.type.role==="label",o=n.map(g=>g.props.children).reduce((g,m)=>g.concat(m),[]).filter(i).map(g=>g.props),c=g=>typeof g=="object"?Object.assign({},{top:0,right:0,bottom:0,left:0},g):{top:g,right:g,bottom:g,left:g},A=o.reduce((g,m)=>{const y=c(m.style.padding),v=tM(m.text,{angle:m.angle,fontSize:m.style.fontSize,letterSpacing:m.style.letterSpacing,fontFamily:m.style.fontFamily});return g+(s?v.height+y.top+y.bottom:v.width+y.right+y.left)},0),u=Math.floor(a*n.length/A),h=Math.ceil(n.length/u)||1,d=g=>g.props.children.filter(i).reduce((m,y)=>(s?y.props.y:y.props.x)||0,0);return n.sort((g,m)=>s?d(m)-d(g):d(g)-d(m)).filter((g,m)=>m%h===0)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n}=Pa,r=Bp(this.props,Pj),s=Ui(this.props);if(this.shouldAnimate())return this.animateComponent(r,n);const a=this.renderGridAndTicks(r),i=r.fixLabelOverlap?this.fixLabelOverlap(a,r):a,o=[this.renderLine(r),this.renderLabel(r),...i],c=q.cloneElement(r.containerComponent,s);return r.standalone?this.renderContainer(c,o):q.cloneElement(r.groupComponent,s,o)}}ve(Za,"animationWhitelist",["style","domain","range","tickCount","tickValues","offsetX","offsetY","padding","width","height"]),ve(Za,"displayName","VictoryAxis"),ve(Za,"role","axis"),ve(Za,"defaultTransitions",{onExit:{duration:500},onEnter:{duration:500}}),ve(Za,"defaultProps",{axisComponent:q.createElement(qc,null),axisLabelComponent:q.createElement(Ma,null),tickLabelComponent:q.createElement(Ma,null),tickComponent:q.createElement(qc,null),gridComponent:q.createElement(qc,null),standalone:!0,theme:RA.grayscale,containerComponent:q.createElement(Hl,null),groupComponent:q.createElement("g",{role:"presentation"}),fixLabelOverlap:!1}),ve(Za,"getDomain",DA),ve(Za,"getAxis",Os),ve(Za,"expectedComponents",["axisComponent","axisLabelComponent","groupComponent","containerComponent","tickComponent","tickLabelComponent","gridComponent"]);const Pa=Ch(Za,VEe);function qEe(e){for(var n=-1,r=e==null?0:e.length,s={};++n<r;){var a=e[n];s[a[0]]=a[1]}return s}var XEe=qEe;const YEe=en(XEe);var nw={exports:{}};(function(e,n){n=e.exports=r,n.getSerialize=s;function r(a,i,o,c){return JSON.stringify(a,s(i,c),o)}function s(a,i){var o=[],c=[];return i==null&&(i=function(A,u){return o[0]===u?"[Circular ~]":"[Circular ~."+c.slice(0,o.indexOf(u)).join(".")+"]"}),function(A,u){if(o.length>0){var h=o.indexOf(this);~h?o.splice(h+1):o.push(this),~h?c.splice(h,1/0,A):c.push(A),~o.indexOf(u)&&(u=i.call(this,A,u))}else o.push(u);return a==null?u:a.call(this,A,u)}}})(nw,nw.exports);var JEe=nw.exports;const ZEe=en(JEe);class Tu extends q.Component{constructor(n){super(n),this.getScopedEvents=cU.bind(this),this.getEventState=uU.bind(this),this.state=this.state||{},this.sharedEventsCache={},this.globalEvents={},this.prevGlobalEventKeys=[],this.boundGlobalEvents={},this.baseProps=this.getBaseProps(n)}shouldComponentUpdate(n){if(!cl(this.props,n)){this.baseProps=this.getBaseProps(n);const r=this.getExternalMutations(n,this.baseProps);this.applyExternalMutations(n,r)}return!0}componentDidMount(){const n=Object.keys(this.globalEvents);n.forEach(r=>this.addGlobalListener(r)),this.prevGlobalEventKeys=n}componentDidUpdate(){const n=Object.keys(this.globalEvents);bg(this.prevGlobalEventKeys,n).forEach(a=>this.removeGlobalListener(a)),bg(n,this.prevGlobalEventKeys).forEach(a=>this.addGlobalListener(a)),this.prevGlobalEventKeys=n}componentWillUnmount(){this.prevGlobalEventKeys.forEach(n=>this.removeGlobalListener(n))}addGlobalListener(n){const r=s=>{const a=this.globalEvents[n];return a&&a(gU(s))};this.boundGlobalEvents[n]=r,window.addEventListener(Cg(n),r)}removeGlobalListener(n){window.removeEventListener(Cg(n),this.boundGlobalEvents[n])}getAllEvents(n){const s=f2(n,["container","groupComponent"]);return Array.isArray(s)?Array.isArray(n.events)?s.concat(...n.events):s:n.events}applyExternalMutations(n,r){if(!mn(r)){const s=n.externalEventMutations.reduce((i,o)=>Et(o.callback)?i.concat(o.callback):i,[]),a=s.length?()=>{s.forEach(i=>i())}:void 0;this.setState(r,a)}}getExternalMutations(n,r){return mn(n.externalEventMutations)?void 0:QBe(n.externalEventMutations,r,this.state,Object.keys(r))}cacheSharedEvents(n,r,s){this.sharedEventsCache[n]=[r,s]}getCachedSharedEvents(n,r){const[s,a]=this.sharedEventsCache[n]||[];if(s&&cl(r,a))return s}getBaseProps(n){const{container:r}=n,s=q.Children.toArray(this.props.children),a=this.getBasePropsFromChildren(s),i=r?r.props:{};return Object.assign({},a,{parent:i})}getBasePropsFromChildren(n){const s=_h(n,(a,i)=>{if(a.type&&Et(a.type.getBaseProps)){const o=a.props&&a.type.getBaseProps(a.props);return o?[[i,o]]:null}return null});return YEe(s)}getNewChildren(n,r){const{events:s,eventKey:a}=n,i=(A,u)=>A.reduce((h,d,f)=>{if(d.props.children){const g=q.Children.toArray(d.props.children),m=u.slice(f,f+g.length),y=q.cloneElement(d,d.props,i(g,m));return h.concat(y)}else if(u[f]!=="parent"&&d.type&&Et(d.type.getBaseProps)){const g=d.props.name||u[f],m=Array.isArray(s)&&s.filter(p=>p.target==="parent"?!1:Array.isArray(p.childName)?p.childName.indexOf(g)>-1:p.childName===g||p.childName==="all"),y=[g,r,m,ZEe(this.state[g])],v=this.getCachedSharedEvents(g,y)||{events:m,getEvents:(p,x)=>this.getScopedEvents(p,x,g,r),getEventState:(p,x)=>this.getEventState(p,x,g)};return this.cacheSharedEvents(g,v,y),h.concat(q.cloneElement(d,Object.assign({key:`events-${g}`,sharedEvents:v,eventKey:a,name:g},d.props)))}return h.concat(d)},[]),o=Object.keys(r),c=q.Children.toArray(n.children);return i(c,o)}getContainer(n,r,s){const a=this.getNewChildren(n,r),i=Array.isArray(s)?s.filter(y=>y.target==="parent"):[],o=i.length>0?{events:i,getEvents:(y,v)=>this.getScopedEvents(y,v,null,r),getEventState:this.getEventState}:null,c=n.container||n.groupComponent,A=c.type&&c.type.role,u=c.props||{},h=lU.bind(this),d=o&&h({sharedEvents:o},"parent"),f=Ve({},this.getEventState("parent","parent"),u,r.parent,{children:a}),g=Ve({},AU(d,"parent",f),u.events);this.globalEvents=hU(g);const m=fU(g);return A==="container"?q.cloneElement(c,Object.assign({},f,{events:m})):q.cloneElement(c,m,a)}render(){const n=this.getAllEvents(this.props);return n?this.getContainer(this.props,this.baseProps,n):q.cloneElement(this.props.container,{children:this.props.children})}}ve(Tu,"displayName","VictorySharedEvents"),ve(Tu,"role","shared-event-wrapper"),ve(Tu,"contextType",r2),ve(Tu,"defaultProps",{groupComponent:q.createElement("g",null)});const Dr=(e,n,r)=>r==="x"?e*Math.cos(n):-e*Math.sin(n),cM=e=>{const n=e.dependentAxis?"radial":"angular",r=n==="angular"?"radial":"angular";return e.horizontal?r:n},e3e=(e,n)=>b4e(e,s=>n(s)%(2*Math.PI)),iC=(e,n)=>({tickStyle:cr(e.ticks,n),labelStyle:cr(e.tickLabels,n),gridStyle:cr(e.grid,n)}),t3e=e=>{var A,u;const{theme:n={},dependentAxis:r}=e,s=n.polarAxis&&n.polarAxis.style||n.axis&&n.axis.style,a=r?"polarDependentAxis":"polarIndependentAxis",i=r?"dependentAxis":"independentAxis",o=((A=n==null?void 0:n[a])==null?void 0:A.style)||((u=n==null?void 0:n[i])==null?void 0:u.style);return s&&o?(()=>["axis","axisLabel","grid","parent","tickLabels","ticks"].reduce((d,f)=>(d[f]=Ve({},o==null?void 0:o[f],s==null?void 0:s[f]),d),{}))():o||s},AM=e=>{const{left:n,right:r,top:s,bottom:a}=Ps(e.padding),{width:i,height:o}=e;if(i===void 0||o===void 0)throw new Error("VictoryPolarAxis: width and height properties are required for standalone axes.");return Math.min(i-n-r,o-s-a)/2},uM=(e,n)=>{if(e.range&&e.range[n])return e.range[n];if(e.range&&Array.isArray(e.range))return e.range;if(cM(e)==="angular"){const a=Mn(e.startAngle),i=Mn(e.endAngle);return[a,i]}const s=AM(e);return[e.innerRadius||0,s]},dM=e=>{const n=Os(e),r=Ms(e,n),s=DA(e,n)||r.domain(),a=uM(e,n);return r.range(a),r.domain(s),r},hM=function(e,n){if(n===void 0&&(n={}),e.disableInlineStyles)return{};const r=e.style||{};return{parent:Ve({height:"auto",width:"100%"},r.parent,n.parent),axis:Ve({},r.axis,n.axis),axisLabel:Ve({},r.axisLabel,n.axisLabel),grid:Ve({},r.grid,n.grid),ticks:Ve({},r.ticks,n.ticks),tickLabels:Ve({},r.tickLabels,n.tickLabels)}},Up=e=>{const{axisAngle:n,startAngle:r,dependentAxis:s}=e,a=Os(e),i=iP(e,a);return i===void 0||!s?n===void 0?r:n:c2(i)},n3e=(e,n,r,s)=>{const{axisType:a,radius:i,scale:o,style:c,stringTicks:A,ticks:u,tickFormat:h,origin:d}=n,f=h(r,s,u),g=A?A[s]:r,{tickStyle:m}=iC(c,{tick:g,tickValue:r,index:s,ticks:u,stringTicks:A,radius:i,scale:o,axisType:a,text:f}),y=a==="radial"?Up(e):void 0,v=m.padding||m.size||0,p=Mn(90-y),x=a==="angular"?o(r):Mn(-1*y),b=a==="angular"?i:o(r);return a==="angular"?{index:s,datum:g,style:m,x1:Dr(b,x,"x")+d.x,y1:Dr(b,x,"y")+d.y,x2:Dr(b+v,x,"x")+d.x,y2:Dr(b+v,x,"y")+d.y}:{index:s,datum:g,style:m,x1:b*Math.cos(x)+Math.cos(p)*v+d.x,x2:b*Math.cos(x)-Math.cos(p)*v+d.x,y1:b*Math.sin(x)+Math.sin(p)*v+d.y,y2:b*Math.sin(x)-Math.sin(p)*v+d.y}},r3e=(e,n,r,s)=>{const{axisType:a,radius:i,tickFormat:o,style:c,scale:A,ticks:u,stringTicks:h,origin:d}=n,f=o(r,s,u),g=h?h[s]:r,{labelStyle:m}=iC(c,{text:f,tick:g,tickValue:r,index:s,ticks:u,stringTicks:h,radius:i,scale:A,axisType:a}),{tickLabelComponent:y}=e,v=y!=null&&y.props.labelPlacement?y.props.labelPlacement:e.labelPlacement,p=m.padding||0,x=0,b=a==="radial"?Up(e):void 0,w=a==="angular"?c2(A(r)):b+x,_=m.angle===void 0?z2(Object.assign({},e,{labelPlacement:v}),w):m.angle,B=a==="angular"?i+p:A(r),k=m.textAnchor||H2(Object.assign({},e,{labelPlacement:v}),w);return{index:s,datum:g,style:m,angle:_,textAnchor:k,text:f,x:B*Math.cos(Mn(w))+d.x,y:-B*Math.sin(Mn(w))+d.y}},s3e=(e,n,r,s)=>{const{axisType:a,radius:i,style:o,scale:c,stringTicks:A,ticks:u,tickFormat:h,origin:d}=n,f=h(r,s,u),{startAngle:g,endAngle:m,innerRadius:y=0}=e,v=A?A[s]:r,{gridStyle:p}=iC(o,{tick:v,tickValue:r,index:s,ticks:u,stringTicks:A,radius:i,scale:c,axisType:a,text:f}),x=c(r);return a==="angular"?{index:s,datum:v,style:p,x1:Dr(i,x,"x")+d.x,y1:Dr(i,x,"y")+d.y,x2:Dr(y,x,"x")+d.x,y2:Dr(y,x,"y")+d.y}:{style:p,index:s,datum:v,cx:d.x,cy:d.y,r:c(r),startAngle:g,endAngle:m}},a3e=(e,n)=>{const{axisType:r,radius:s,style:a,origin:i}=n,{axisLabelComponent:o}=e;if(r!=="radial")return{};const c=o!=null&&o.props.labelPlacement?o.props.labelPlacement:e.labelPlacement,A=a&&a.axisLabel||{},u=r==="radial"?Up(e):void 0,h=A.angle===void 0?z2(Object.assign({},e,{labelPlacement:c}),u):A.angle,d=s+(A.padding||0),f=A.textAnchor||H2(Object.assign({},e,{labelPlacement:c}),u),g=A.verticalAnchor||cP(Object.assign({},e,{labelPlacement:c}),u);return{style:A,angle:h,textAnchor:f,verticalAnchor:g,text:e.label,x:Dr(d,Mn(u),"x")+i.x,y:Dr(d,Mn(u),"y")+i.y}},i3e=(e,n)=>{const{style:r,axisType:s,radius:a,origin:i}=n,{startAngle:o,endAngle:c,innerRadius:A=0}=e,u=s==="radial"?Mn(Up(e)):void 0;return s==="radial"?{style:r.axis,x1:Dr(A,u,"x")+i.x,x2:Dr(a,u,"x")+i.x,y1:Dr(A,u,"y")+i.y,y2:Dr(a,u,"y")+i.y}:{style:r.axis,cx:i.x,cy:i.y,r:a,startAngle:o,endAngle:c}},o3e=e=>{const n=Object.assign({polar:!0},e),r=t3e(n),s=hM(n,r),a=Ps(n.padding),i=Os(n),o=cM(n),c=Cp(n)?n.tickValues:void 0,A=DA(n,i),u=uM(n,i),h=dM(n),d=aP(n,h),f=o==="angular"?e3e(d,h):d,g=sP(n,h),m=AM(n),y=bh(n);return{axis:i,style:s,padding:a,stringTicks:c,axisType:o,scale:h,ticks:f,tickFormat:g,domain:A,range:u,radius:m,origin:y}},l3e=(e,n)=>{const r=Bp(e,n),s=o3e(r),{style:a,scale:i,ticks:o,domain:c}=s,{width:A,height:u,standalone:h,theme:d,name:f}=r,g=i3e(r,s),m=a3e(r,s),y={parent:{style:a.parent,ticks:o,scale:i,width:A,height:u,domain:c,standalone:h,theme:d,name:f}};return o.reduce((v,p,x)=>(v[x]={axis:g,axisLabel:m,ticks:n3e(r,s,p,x),tickLabels:r3e(r,s,p,x),grid:s3e(r,s,p,x)},v),y)},yv={width:450,height:300,padding:50};class ei extends q.Component{static getScale(n){return dM(n)}static getStyles(n){return hM(n,yv.style)}static getBaseProps(n){return l3e(n,yv)}renderAxisLine(n){const{dependentAxis:r}=n,s=r?n.axisComponent:n.circularAxisComponent,a=this.getComponentProps(s,"axis",0);return q.cloneElement(s,a)}renderLabel(n){const{axisLabelComponent:r,dependentAxis:s,label:a}=n;if(!a||!s)return null;const i=this.getComponentProps(r,"axisLabel",0);return q.cloneElement(r,i)}renderAxis(n){const{tickComponent:r,tickLabelComponent:s,name:a}=n,i=m=>{const{style:y={},events:v={}}=m;return y.stroke!=="transparent"&&y.stroke!=="none"&&y.strokeWidth!==0||!mn(v)},c=(n.dependentAxis?"radial":"angular")==="radial"?n.circularGridComponent:n.gridComponent,A=this.dataKeys.map((m,y)=>{const v=Object.assign({key:`${a}-tick-${m}`},this.getComponentProps(r,"ticks",y)),p=q.cloneElement(r,v);return i(p.props)?p:void 0}).filter(Boolean),u=this.dataKeys.map((m,y)=>{const v=Object.assign({key:`${a}-grid-${m}`},this.getComponentProps(c,"grid",y)),p=q.cloneElement(c,v);return i(p.props)?p:void 0}).filter(Boolean),h=this.dataKeys.map((m,y)=>{const v=Object.assign({key:`${a}-tick-${m}`},this.getComponentProps(s,"tickLabels",y));return q.cloneElement(s,v)}),d=this.renderAxisLine(n),f=this.renderLabel(n),g=[d,f,...A,...u,...h];return this.renderGroup(n,g)}renderGroup(n,r){const{groupComponent:s}=n;return q.cloneElement(s,{},r)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n}=rw,r=Bp(this.props,yv);if(this.shouldAnimate())return this.animateComponent(r,n);const s=this.renderAxis(r);return r.standalone?this.renderContainer(r.containerComponent,s):s}}ve(ei,"animationWhitelist",["style","domain","range","tickCount","tickValues","padding","width","height"]),ve(ei,"displayName","VictoryAxis"),ve(ei,"role","axis"),ve(ei,"defaultTransitions",{onExit:{duration:500},onEnter:{duration:500}}),ve(ei,"defaultProps",{axisComponent:q.createElement(qc,null),axisLabelComponent:q.createElement(Ma,null),circularAxisComponent:q.createElement(Tj,null),circularGridComponent:q.createElement(Tj,null),containerComponent:q.createElement(Hl,null),endAngle:360,gridComponent:q.createElement(qc,null),groupComponent:q.createElement("g",{role:"presentation"}),labelPlacement:"parallel",startAngle:0,standalone:!0,theme:RA.grayscale,tickComponent:q.createElement(qc,null),tickLabelComponent:q.createElement(Ma,null)}),ve(ei,"getDomain",DA),ve(ei,"getAxis",Os),ve(ei,"expectedComponents",["axisComponent","circularAxisComponent","groupComponent","containerComponent","tickComponent","tickLabelComponent","gridComponent","circularGridComponent"]);const c3e={components:[{name:"axis",index:0},{name:"axisLabel",index:0},{name:"grid"},{name:"parent",index:"parent"},{name:"ticks"},{name:"tickLabels"}]},rw=Ch(ei,c3e),A3e={width:450,height:300,padding:50};function u3e(e,n,r){const{domain:s,scale:a,stringMap:i,categories:o,horizontal:c}=r;return{stringMap:i,horizontal:c,categories:o,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,domain:s,scale:a}}function d3e(e,n){const r=e.backgroundComponent,s=e.polar?n.range.y[1]:n.range.y[0]-n.range.y[1],a=n.range.x[1]-n.range.x[0],i=e.horizontal?n.scale.y.range()[0]:n.scale.x.range()[0],o=e.horizontal?n.scale.x.range()[1]:n.scale.y.range()[1],c=e.polar?n.origin.x:i,A=e.polar?n.origin.y:o,u=e.name||"chart",h={height:s,polar:e.polar,scale:n.scale,style:e.style.background,x:c,y:A,key:`${u}-background`,width:a};return q.cloneElement(r,Ve({},r.props,h))}function h3e(e,n,r){const s=tP([e]);if(s.length>0)return u3e(s[0],n,r);const{categories:a,domain:i,range:o,scale:c,stringMap:A,horizontal:u}=r;return{categories:a,domain:i,range:o,scale:c,stringMap:A,horizontal:u}}function f3e(e){const n=e.style&&e.style.parent;return{parent:Ve({},n,{height:"100%",width:"100%",userSelect:"none"})}}function fM(e,n){const r=f3e(e),s=la(e,A3e,"chart"),{horizontal:a,polar:i}=s,o=nM(s,n),c=E4e(s,n,o),A=m3e(s,n,o),u={x:Mj(Object.assign({},s,{categories:c}),"x",n),y:Mj(Object.assign({},s,{categories:c}),"y",n)},h={x:Rn(s,"x"),y:Rn(s,"y")},d={x:Q1(s,"x")||kj(s,"x"),y:Q1(s,"y")||kj(s,"y")},f={x:d.x.domain(u.x).range(a?h.y:h.x),y:d.y.domain(u.y).range(a?h.x:h.y)},g=i?bh(s):rP(u),m=Ps(s.padding);return{categories:c,domain:u,range:h,horizontal:a,scale:f,stringMap:A,style:r,origin:g,padding:m}}function g3e(e,n,r){const s=n||gM(e),a=r||fM(e,s),i=a.style.parent,{height:o,polar:c,theme:A,width:u}=e,{origin:h,horizontal:d}=a,f=e.name||"chart";return s.filter(q.isValidElement).map((g,m)=>{const y=g.type&&g.type.role,v=Array.isArray(g.props.style)?g.props.style:Ve({},g.props.style,{parent:i}),p=h3e(g,e,a),x=g.props.name||`${f}-${y}-${m}`,b=Ve({horizontal:d,height:o,polar:c,theme:A,width:u,style:v,name:x,origin:c?h:void 0,padding:a.padding,key:`${x}-key-${m}`,standalone:!1},p);return q.cloneElement(g,b)})}const gM=(e,n)=>{let r=q.Children.toArray(e.children);if(r.length===0)r.push(n.independent,n.dependent);else{const s={dependent:Aj(r,"dependent"),independent:Aj(r,"independent")};s.dependent.length===0&&s.independent.length===0&&(r=e.prependDefaultAxes?[n.independent,n.dependent].concat(r):r.concat([n.independent,n.dependent]))}return r},Mj=(e,n,r)=>{const s=r||q.Children.toArray(e.children),a=S4e(e,n,s),i=nP(s,n);return i&&i.props&&i.props.invertAxis?a.concat().reverse():a},m3e=(e,n,r)=>{const s=!r.x||r.x.length===0?null:r.x.reduce((i,o,c)=>(i[o]=c+1,i),{}),a=!r.y||r.y.length===0?null:r.y.reduce((i,o,c)=>(i[o]=c+1,i),{});return{x:s,y:a}},p3e={width:450,height:300,padding:50},y3e={backgroundComponent:q.createElement(oEe,null),containerComponent:q.createElement(Hl,null),defaultAxes:{independent:q.createElement(Pa,null),dependent:q.createElement(Pa,{dependentAxis:!0})},defaultPolarAxes:{independent:q.createElement(rw,null),dependent:q.createElement(rw,{dependentAxis:!0})},groupComponent:q.createElement("g",null),standalone:!0,theme:RA.grayscale},v3e=e=>{const n=q.useMemo(()=>Ve({},e,y3e),[e]),r="chart",{getAnimationProps:s,setAnimationState:a,getProps:i}=Vke(),o=i(n),c=la(o,p3e,r),{desc:A,eventKey:u,containerComponent:h,standalone:d,groupComponent:f,externalEventMutations:g,width:m,height:y,theme:v,polar:p,name:x,title:b}=c,w=o.polar?c.defaultPolarAxes:c.defaultAxes,_=q.useMemo(()=>gM(c,w),[c,w]),B=q.useMemo(()=>fM(c,_),[c,_]),{domain:k,scale:N,style:C,origin:j,horizontal:E}=B,F=q.useMemo(()=>{const Q=g3e(o,_,B).map((R,M)=>{const G=Object.assign({animate:s(o,R,M)},R.props);return q.cloneElement(R,G)});if(o.style&&o.style.background){const R=d3e(o,B);Q.unshift(R)}return Q},[s,_,o,B]),I=q.useMemo(()=>d?{desc:A,domain:k,width:m,height:y,horizontal:E,name:x,origin:p?j:void 0,polar:p,theme:v,title:b,scale:N,standalone:d,style:C.parent}:{},[A,k,y,E,x,j,p,N,d,C,b,v,m]),T=q.useMemo(()=>{if(d){const O=Ve({},h.props,I,Ui(n));return q.cloneElement(h,O)}return f},[f,d,h,I,n]),L=q.useMemo(()=>k4e(o),[o]),P=Gke(n);return q.useEffect(()=>()=>{n.animate&&a(P,n)},[a,P,n]),mn(L)?q.cloneElement(T,T.props,F):q.createElement(Tu,{container:T,eventKey:u,events:L,externalEventMutations:g},F)},Ih=q.memo(v3e,cl);Ih.displayName="VictoryChart";Ih.expectedComponents=["groupComponent","containerComponent"];const x3e=e=>{let n=fa(e);n.length<2&&(n=[]);const r={x:Rn(e,"x"),y:Rn(e,"y")},s={x:Cl(e,"x"),y:Cl(e,"y")},a={x:Ms(e,"x").domain(s.x).range(e.horizontal?r.y:r.x),y:Ms(e,"y").domain(s.y).range(e.horizontal?r.x:r.y)},i=e.polar?e.origin||bh(e):void 0,o=o2(e,"line"),c=l2(e.style,o);return{domain:s,data:n,scale:a,style:c,origin:i}},w3e=(e,n)=>{const r=la(e,n,"line"),s=Object.assign({},r,x3e(r)),{data:a,domain:i,events:o,groupComponent:c,height:A,horizontal:u,interpolation:h,origin:d,padding:f,polar:g,scale:m,sharedEvents:y,standalone:v,style:p,theme:x,width:b,labels:w,name:_,disableInlineStyles:B}=s,k={parent:{style:p.parent,scale:m,data:a,height:A,width:b,name:_,domain:i,standalone:v,polar:g,origin:d,padding:f,horizontal:u},all:{data:{horizontal:u,polar:g,origin:d,scale:m,data:a,interpolation:h,groupComponent:c,style:B?{}:p.data,theme:x,disableInlineStyles:B}}};return a.reduce((N,C,j)=>{const E=Sp(s,C,j);if(E!=null||w&&(o||y)){const F=zd(C.eventKey)?j:C.eventKey;N[F]={labels:G2(s,j)}}return N},k)},b3e=e=>{const n=Xe(e.ariaLabel,e),r=Xe(e.id,e),s=cr(Object.assign({fill:"none",stroke:"black",pointerEvents:"stroke"},e.style),e),a=Xe(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,id:r,style:s,tabIndex:a})},_3e={pathComponent:q.createElement(Ip,null),role:"presentation",shapeRendering:"auto"},C3e=e=>{const n=b3e(Ve({},e,_3e)),r=Ui(n),{polar:s,origin:a}=n,i=zP(n),o=s&&a?`translate(${a.x}, ${a.y})`:void 0,c=i(n.data);return q.cloneElement(n.pathComponent,{...n.events,...r,"aria-label":n.ariaLabel,d:c,style:n.style,transform:n.transform||o,className:n.className,role:n.role,shapeRendering:n.shapeRendering,clipPath:n.clipPath,tabIndex:n.tabIndex})},Qj={width:450,height:300,padding:50,interpolation:"linear"},B3e={components:[{name:"parent",index:"parent"},{name:"data",index:"all"},{name:"labels"}]},es=class es extends q.Component{constructor(n){super(n)}static getBaseProps(n){return w3e(n,Qj)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n,role:r}=es,s=la(this.props,Qj,r);if(this.shouldAnimate())return this.animateComponent(s,n);const a=this.renderContinuousData(s),i=s.standalone?this.renderContainer(s.containerComponent,a):a;return d2(i,s)}};ve(es,"animationWhitelist",["data","domain","height","padding","samples","style","width"]),ve(es,"displayName","VictoryLine"),ve(es,"role","line"),ve(es,"defaultTransitions",oP()),ve(es,"defaultPolarTransitions",lP()),ve(es,"continuous",!0),ve(es,"defaultProps",{containerComponent:q.createElement(Hl,null),dataComponent:q.createElement(C3e,null),labelComponent:q.createElement(Ma,{renderInPortal:!0}),groupComponent:q.createElement(Zu,null),samples:50,sortKey:"x",sortOrder:"ascending",standalone:!0,theme:RA.grayscale}),ve(es,"getDomain",Cl),ve(es,"getData",fa),ve(es,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);let sw=es;const rl=Ch(sw,B3e),S3e=(e,n)=>n.bubbleProperty?"circle":e.symbol||n.symbol,k3e=(e,n)=>{const{data:r,z:s,maxBubbleSize:a,minBubbleSize:i}=n,o=r.map(p=>p[s]),c=Math.min(...o),A=Math.max(...o),h=a||(()=>{const p=Math.min(...Object.values(Ps(n.padding)));return Math.max(p,5)})(),d=i||h*.1;if(A===c)return Math.max(d,1);const f=Math.PI*Math.pow(h,2),g=Math.PI*Math.pow(d,2),m=(e[s]-c)/(A-c)*f,y=Math.max(m,g),v=Math.sqrt(y/Math.PI);return Math.max(v,1)},j3e=(e,n)=>{const{size:r,z:s}=n;return e.size?typeof e.size=="function"?e.size:Math.max(e.size,1):typeof n.size=="function"?r:e[s]?k3e(e,n):Math.max(r||0,1)},N3e=e=>{const n=o2(e,"scatter"),r=l2(e.style,n),s={x:Rn(e,"x"),y:Rn(e,"y")},a={x:Cl(e,"x"),y:Cl(e,"y")},i={x:Ms(e,"x").domain(a.x).range(e.horizontal?s.y:s.x),y:Ms(e,"y").domain(a.y).range(e.horizontal?s.x:s.y)},o=e.polar?e.origin||bh(e):void 0,c=e.bubbleProperty||"z";let A=fa(e);return A=Fke(A,a),{domain:a,data:A,scale:i,style:r,origin:o,z:c}},E3e=(e,n)=>{const r=la(e,n,"scatter"),s=Object.assign({},r,N3e(r)),{data:a,domain:i,events:o,height:c,origin:A,padding:u,polar:h,scale:d,name:f,sharedEvents:g,standalone:m,style:y,theme:v,width:p,labels:x,horizontal:b,disableInlineStyles:w}=s,_={parent:{style:y.parent,scale:d,domain:i,data:a,height:c,width:p,standalone:m,theme:v,origin:A,polar:h,padding:u,name:f,horizontal:b}};return a.reduce((B,k,N)=>{const C=zd(k.eventKey)?N:k.eventKey,{x:j,y:E}=i2(s,k),F={x:j,y:E,datum:k,data:a,index:N,scale:d,polar:h,origin:A,horizontal:b,size:j3e(k,s),symbol:S3e(k,s),style:w?{}:y.data,disableInlineStyles:w};B[C]={data:F};const I=Sp(s,k,N);return(I!=null||x&&(o||g))&&(B[C].labels=G2(s,N)),B},_)},Dj={width:450,height:300,padding:50,size:3,symbol:"circle"};class ti extends q.Component{static getBaseProps(n){return E3e(n,Dj)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n,role:r}=Pp,s=la(this.props,Dj,r);if(this.shouldAnimate())return this.animateComponent(s,n);const a=this.renderData(s),i=s.standalone?this.renderContainer(s.containerComponent,a):a;return d2(i,s)}}ve(ti,"animationWhitelist",["data","domain","height","maxBubbleSize","padding","samples","size","style","width"]),ve(ti,"displayName","VictoryScatter"),ve(ti,"role","scatter"),ve(ti,"defaultTransitions",Kke()),ve(ti,"defaultProps",{containerComponent:q.createElement(Hl,null),dataComponent:q.createElement(fEe,null),labelComponent:q.createElement(Ma,null),groupComponent:q.createElement("g",null),samples:50,sortOrder:"ascending",standalone:!0,theme:RA.grayscale}),ve(ti,"getDomain",Cl),ve(ti,"getData",fa),ve(ti,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);const Pp=Ch(ti),aw=25/6,iw=25/300;function T3e(e,n,r=1,s,a){let i=n;(s||a)&&(i=n.filter(d=>{const f=new Date(d.date);return!(s&&f<s||a&&f>a)}));const o=new Set(i.map(d=>d.id)),c=e.filter(d=>o.has(d.matchId)),A=new Map(i.map(d=>[d.id,d])),u=new Map;for(const d of c){const f=d.heroId;if(f==null)continue;u.has(f)||u.set(f,{heroId:f,heroName:d.heroName,icon:`heroes/${d.heroName.toLowerCase()}.png`,roles:d.heroRoles,complexity:1,expansion:"Unknown",totalGames:0,wins:0,losses:0,teammates:new Map,opponents:new Map,victoryTypeStats:{throne:{wins:0,total:0},wave:{wins:0,total:0},kills:{wins:0,total:0}}});const g=u.get(f);g.totalGames+=1;const m=A.get(d.matchId);if(!m)continue;const y=d.team===m.winningTeam;y?g.wins+=1:g.losses+=1;const v=m.victoryType;v&&g.victoryTypeStats[v]&&(g.victoryTypeStats[v].total+=1,y&&(g.victoryTypeStats[v].wins+=1))}for(const d of i){const f=c.filter(g=>g.matchId===d.id);for(const g of f){const m=g.heroId;if(m==null||!u.has(m))continue;const y=u.get(m),v=g.team,p=v===d.winningTeam,x=f.filter(w=>w.team===v&&w.heroId!==m),b=f.filter(w=>w.team!==v);for(const w of x){if(w.heroId===void 0||w.heroId===null)continue;let _=y.teammates.get(w.heroId);_||(_={wins:0,games:0},y.teammates.set(w.heroId,_)),_.games+=1,p&&(_.wins+=1)}for(const w of b){if(w.heroId===void 0||w.heroId===null)continue;let _=y.opponents.get(w.heroId);_||(_={wins:0,games:0},y.opponents.set(w.heroId,_)),_.games+=1,p&&(_.wins+=1)}}}const h=Array.from(u.values()).map(d=>{const f=d.totalGames>0?d.wins/d.totalGames*100:0,g=Array.from(d.teammates.entries()).filter(([,v])=>v.games>=r).map(([v,p])=>{const x=u.get(v);return x?{heroId:v,heroName:x.heroName,icon:x.icon,winRate:p.games>0?p.wins/p.games*100:0,gamesPlayed:p.games}:null}).filter(v=>v!==null).sort((v,p)=>p.winRate-v.winRate).slice(0,3),m=Array.from(d.opponents.entries()).filter(([,v])=>v.games>=r).map(([v,p])=>{const x=u.get(v);return x?{heroId:v,heroName:x.heroName,icon:x.icon,winRate:p.games>0?p.wins/p.games*100:0,gamesPlayed:p.games}:null}).filter(v=>v!==null).sort((v,p)=>p.winRate-v.winRate).slice(0,3),y=Array.from(d.opponents.entries()).filter(([,v])=>v.games>=r).map(([v,p])=>{const x=u.get(v);return x?{heroId:v,heroName:x.heroName,icon:x.icon,winRate:p.games>0?p.wins/p.games*100:0,gamesPlayed:p.games}:null}).filter(v=>v!==null).sort((v,p)=>v.winRate-p.winRate).slice(0,3);return{heroId:d.heroId,heroName:d.heroName,icon:d.icon,roles:d.roles,complexity:d.complexity,expansion:d.expansion,totalGames:d.totalGames,wins:d.wins,losses:d.losses,winRate:f,bestTeammates:g,bestAgainst:m,worstAgainst:y,victoryTypeStats:d.victoryTypeStats}});for(const d of h){const f=Pn.find(g=>g.name===d.heroName);f&&(d.complexity=f.complexity,d.expansion=f.expansion)}return h}function F3e(e,n,r,s,a=1,i,o){const c=new Map(r.map(g=>[g.id,g.name]));let A=n;if((i||o)&&(A=n.filter(g=>{const m=new Date(g.date);return!(i&&m<i||o&&m>o)})),A.length===0)return[];const u=new Set(A.map(g=>g.id)),h=e.filter(g=>u.has(g.matchId)),d=new Set(s),f=new Map;for(const g of A){const m=h.filter(y=>y.matchId===g.id);for(const y of m){if(!y.playerId||!d.has(y.playerId))continue;const v=y.team===g.winningTeam;for(const p of m){if(!p.playerId||y.playerId===p.playerId||!d.has(p.playerId))continue;const x=`${y.playerId}-${p.playerId}`;f.has(x)||f.set(x,{playerId:y.playerId,relatedPlayerId:p.playerId,relatedPlayerName:c.get(p.playerId)||p.playerId,teammateWins:0,teammateLosses:0,opponentWins:0,opponentLosses:0});const b=f.get(x);y.team===p.team?v?b.teammateWins++:b.teammateLosses++:v?b.opponentWins++:b.opponentLosses++}}}return Array.from(f.values()).filter(g=>g.teammateWins+g.teammateLosses+g.opponentWins+g.opponentLosses>=a)}async function Rj(e,n,r){const s=[...e].sort((c,A)=>{const u=new Date(c.date).getTime(),h=new Date(A.date).getTime();return u-h}),a={};for(const c of n)a[c.id]=ot.rating();const i=[],o={};for(const c in a){const A=a[c],u=ot.ordinal(A),h=Math.round((u+25)*40+200);o[c]=h}i.push({date:s.length>0?s[0].date.toString():new Date().toISOString(),matchNumber:0,ratings:o,participants:[]});for(let c=0;c<s.length;c++){const A=s[c],u=await r(A.id),h=[],d=[],f=[],g=[];for(const p of u)a[p.playerId]||(a[p.playerId]=ot.rating()),p.team==="titans"?(h.push(p.playerId),d.push(a[p.playerId])):(f.push(p.playerId),g.push(a[p.playerId]));if(d.length===0||g.length===0)continue;const m=A.winningTeam==="titans"?[1,2]:[2,1],y=ot.rate([d,g],{rank:m,beta:aw,tau:iw});for(let p=0;p<h.length;p++)a[h[p]]=y[0][p];for(let p=0;p<f.length;p++)a[f[p]]=y[1][p];const v={};for(const p in a){const x=a[p],b=ot.ordinal(x),w=Math.round((b+25)*40+200);v[p]=w}i.push({date:A.date.toString(),matchNumber:c+1,ratings:v,participants:[...h,...f]})}return i}function vv(e){if(e.ordinal!==void 0)return Math.round((e.ordinal+25)*40+200);const n=(e.mu||25)-3*(e.sigma||25/3);return Math.round((n+25)*40+200)}function I3e(e){return{id:e.local_id||e.name,name:e.name,totalGames:e.total_games,wins:e.wins,losses:e.losses,elo:e.elo,mu:e.mu,sigma:e.sigma,ordinal:e.ordinal,lastPlayed:e.last_played?new Date(e.last_played):new Date,dateCreated:new Date(e.date_created),deviceId:e.device_id||void 0,level:e.level||void 0}}function U3e(e){return{id:e.id,date:new Date(e.date),winningTeam:e.winning_team,gameLength:e.game_length,doubleLanes:e.double_lanes,titanPlayers:e.titan_players,atlanteanPlayers:e.atlantean_players,deviceId:e.device_id||void 0}}function P3e(e){return{id:e.id,matchId:e.match_id,playerId:e.player_id,team:e.team,heroId:e.hero_id,heroName:e.hero_name,heroRoles:e.hero_roles||[],kills:e.kills,deaths:e.deaths,assists:e.assists,goldEarned:e.gold_earned,minionKills:e.minion_kills,level:e.level,deviceId:e.device_id||void 0}}function Ls(){const{isViewMode:e,sharedData:n,isLoading:r}=ph(),s=S.useMemo(()=>!e||!(n!=null&&n.players)?null:n.players.map(I3e),[e,n==null?void 0:n.players]),a=S.useMemo(()=>!e||!(n!=null&&n.matches)?null:n.matches.map(U3e),[e,n==null?void 0:n.matches]),i=S.useMemo(()=>!e||!(n!=null&&n.matchPlayers)?null:n.matchPlayers.map(P3e),[e,n==null?void 0:n.matchPlayers]),o=S.useCallback(async()=>e&&s?s:Yr.getAllPlayers(),[e,s]),c=S.useCallback(async k=>e&&s?s.find(C=>C.id===k||C.name===k):await Yr.getPlayer(k)??void 0,[e,s]),A=S.useCallback(async()=>e&&a?a:Yr.getAllMatches(),[e,a]),u=S.useCallback(async k=>e&&i?i.filter(N=>N.matchId===k):Yr.getMatchPlayers(k),[e,i]),h=S.useCallback(async()=>{if(e&&i)return i;const k=await Yr.getAllMatches(),N=[];for(const C of k){const j=await Yr.getMatchPlayers(C.id);N.push(...j)}return N},[e,i]),d=S.useCallback(async k=>{if(e&&a&&i)return i.filter(E=>E.playerId===k).map(E=>{const F=a.find(I=>I.id===E.matchId);return F?{match:F,matchPlayer:E}:null}).filter(Boolean);const N=await Yr.getPlayerMatches(k),C=[];for(const j of N){const F=(await Yr.getAllMatches()).find(I=>I.id===j.matchId);F&&C.push({match:F,matchPlayer:j})}return C},[e,a,i]),f=S.useCallback(async(k=1,N,C)=>{const j=await h(),E=await A();return T3e(j,E,k,N,C)},[h,A]),g=S.useCallback(async(k,N=1,C,j)=>{const E=await h(),F=await A(),I=await o();return F3e(E,F,I,k,N,C,j)},[h,A,o]),m=S.useCallback(async()=>{const k=await A(),N=await o();return Rj(k,N,u)},[A,o,u]),y=S.useCallback(async()=>{const k=await o(),N={};for(const C of k)N[C.id]=vv(C);return N},[o]),v=S.useCallback(k=>vv(k),[]),p=S.useCallback(async k=>e&&a?a.find(C=>C.id===k):(await Yr.getAllMatches()).find(C=>C.id===k),[e,a]),x=S.useCallback(async k=>{const N=await A();return{matchesPlayed:(await h()).filter(F=>F.playerId===k).map(F=>{const I=N.find(T=>T.id===F.matchId);return I?{matchId:F.matchId,heroId:F.heroId,heroName:F.heroName,heroRoles:F.heroRoles,team:F.team,won:F.team===I.winningTeam,date:I.date,kills:F.kills,deaths:F.deaths,assists:F.assists,goldEarned:F.goldEarned,minionKills:F.minionKills,level:F.level}:null}).filter(F=>F!==null)}},[A,h]),b=S.useCallback(async(k,N,C=!1)=>{const j=await A(),E=await o();let F=j;if((k||N)&&(F=j.filter(O=>{const Q=new Date(O.date);return!(k&&Q<k||N&&Q>N)})),F.length===0)return[];const I=[...F].sort((O,Q)=>{const R=new Date(O.date).getTime(),M=new Date(Q.date).getTime();return R-M}),T={};if(C)for(const O of E)T[O.id]=ot.rating();else{for(const Q of E)Q.mu!==void 0&&Q.sigma!==void 0?T[Q.id]=ot.rating({mu:Q.mu,sigma:Q.sigma}):T[Q.id]=ot.rating();const O=await Rj(j,E,u);return!k&&!N?O:O.filter(Q=>{const R=new Date(Q.date);return!(k&&R<k||N&&R>N)})}const L=[],P={};for(const O in T){const Q=T[O],R=ot.ordinal(Q),M=Math.round((R+25)*40+200);P[O]=M}L.push({date:I[0].date.toString(),matchNumber:0,ratings:P,participants:[]});for(let O=0;O<I.length;O++){const Q=I[O],R=await u(Q.id),M=[],G=[],V=[],K=[];for(const W of R)T[W.playerId]||(T[W.playerId]=ot.rating()),W.team==="titans"?(M.push(W.playerId),G.push(T[W.playerId])):(V.push(W.playerId),K.push(T[W.playerId]));if(G.length===0||K.length===0)continue;const se=Q.winningTeam==="titans"?[1,2]:[2,1],de=ot.rate([G,K],{rank:se,beta:aw,tau:iw});for(let W=0;W<M.length;W++)T[M[W]]=de[0][W];for(let W=0;W<V.length;W++)T[V[W]]=de[1][W];const ye={};for(const W in T){const U=T[W],$=ot.ordinal(U),ne=Math.round(($+25)*40+200);ye[W]=ne}L.push({date:Q.date.toString(),matchNumber:O+1,ratings:ye,participants:[...M,...V]})}return L},[A,o,u]),w=S.useCallback(async(k,N=3,C,j)=>{if(e&&a&&i){let E=[...a];if(E.sort((R,M)=>new Date(R.date).getTime()-new Date(M.date).getTime()),(C||j)&&(E=E.filter(R=>{const M=new Date(R.date);return!(C&&M<C||j&&M>j)})),E.length===0)return{heroes:[],dateRange:null};const F=new Set(E.map(R=>R.id)),I=i.filter(R=>F.has(R.matchId)),T=new Map(E.map(R=>[R.id,R])),L=new Map;for(const R of I){const M=R.heroId;if(M==null||k&&k.length>0&&!k.includes(M))continue;const G=T.get(R.matchId);if(!G)continue;L.has(M)||L.set(M,{heroName:R.heroName,icon:`heroes/${R.heroName.toLowerCase().replace(/\s+/g,"")}.png`,matches:[]});const V=L.get(M),K=new Date(G.date).toISOString().split("T")[0],se=R.team===G.winningTeam;V.matches.push({date:K,won:se})}const P=[];for(const[R,M]of L.entries()){M.matches.sort((W,U)=>W.date.localeCompare(U.date));const G=new Map;for(const W of M.matches){G.has(W.date)||G.set(W.date,{wins:0,games:0});const U=G.get(W.date);U.games++,W.won&&U.wins++}const V=[];let K=0,se=0;const de=Array.from(G.keys()).sort();for(const W of de){const U=G.get(W);K+=U.games,se+=U.wins,V.push({date:W,gamesPlayedTotal:K,winsTotal:se,winRate:K>0?se/K*100:0,gamesPlayedOnDate:U.games})}const ye=V.filter(W=>W.gamesPlayedTotal>=N);ye.length>0&&P.push({heroId:R,heroName:M.heroName,icon:M.icon,totalGames:K,currentWinRate:K>0?se/K*100:0,dataPoints:ye})}P.sort((R,M)=>M.totalGames-R.totalGames);for(const R of P){const M=Pn.find(G=>G.name===R.heroName);M&&(R.icon=M.icon)}const O=P.flatMap(R=>R.dataPoints.map(M=>M.date)),Q=O.length>0?{firstMatch:O.reduce((R,M)=>M<R?M:R),lastMatch:O.reduce((R,M)=>M>R?M:R)}:null;return{heroes:P,dateRange:Q}}return Yr.getHeroWinRateOverTime(k,N,C,j)},[e,a,i]),_=S.useCallback(async(k,N=1,C,j)=>{if(e&&a&&i){let E=[...a];if((C||j)&&(E=E.filter(O=>{const Q=new Date(O.date);return!(C&&Q<C||j&&Q>j)})),E.length===0)return[];const F=new Set(E.map(O=>O.id)),I=i.filter(O=>F.has(O.matchId)),T=new Set(k),L=new Map;for(const O of E){const Q=I.filter(R=>R.matchId===O.id);for(const R of Q){if(R.heroId===void 0||R.heroId===null||!T.has(R.heroId))continue;const M=R.team===O.winningTeam;for(const G of Q){if(G.heroId===void 0||G.heroId===null||R.heroId===G.heroId||!T.has(G.heroId))continue;const V=`${R.heroId}-${G.heroId}`;L.has(V)||L.set(V,{heroId:R.heroId,relatedHeroId:G.heroId,teammateWins:0,teammateLosses:0,opponentWins:0,opponentLosses:0});const K=L.get(V);R.team===G.team?M?K.teammateWins++:K.teammateLosses++:M?K.opponentWins++:K.opponentLosses++}}}return Array.from(L.values()).filter(O=>O.teammateWins+O.teammateLosses+O.opponentWins+O.opponentLosses>=N)}return Yr.getHeroRelationshipNetwork(k,N,C,j)},[e,a,i]),B=S.useCallback(async(k,N,C=!1)=>{const j=await o();let E=await A();const F=await h();let I=null;(k||N)&&(I={start:k||new Date(0),end:N||new Date}),(k||N)&&(E=E.filter(R=>{const M=new Date(R.date);return!(k&&M<k||N&&M>N)}));const T=new Set(E.map(R=>R.id)),L=F.filter(R=>T.has(R.matchId)),P=new Map(E.map(R=>[R.id,R]));let O={};if(C){const R=[...E].sort((G,V)=>{const K=new Date(G.date).getTime(),se=new Date(V.date).getTime();return K-se}),M={};for(const G of j)M[G.id]=ot.rating();for(const G of R){const V=L.filter($=>$.matchId===G.id),K=[],se=[],de=[],ye=[];for(const $ of V)M[$.playerId]||(M[$.playerId]=ot.rating()),$.team==="titans"?(K.push($.playerId),se.push(M[$.playerId])):(de.push($.playerId),ye.push(M[$.playerId]));if(se.length===0||ye.length===0)continue;const W=G.winningTeam==="titans"?[1,2]:[2,1],U=ot.rate([se,ye],{rank:W,beta:aw,tau:iw});for(let $=0;$<K.length;$++)M[K[$]]=U[0][$];for(let $=0;$<de.length;$++)M[de[$]]=U[1][$]}for(const G in M){const V=M[G],K=ot.ordinal(V);O[G]=Math.round((K+25)*40+200)}}else for(const R of j)O[R.id]=vv(R);const Q=[];for(const R of j){const M=L.filter(Be=>Be.playerId===R.id);if(M.length===0)continue;let G=0,V=0,K=0,se=0,de=0,ye=0,W=0,U=!1,$=null;const ne=new Map,J=new Map;for(const Be of M){const pe=P.get(Be.matchId);if(!pe)continue;const he=new Date(pe.date);if((!$||he>$)&&($=he),Be.team===pe.winningTeam?G++:V++,Be.kills!==void 0&&(K+=Be.kills,U=!0),Be.deaths!==void 0&&(se+=Be.deaths),Be.assists!==void 0&&(de+=Be.assists),Be.goldEarned!==void 0&&(ye+=Be.goldEarned),Be.minionKills!==void 0&&(W+=Be.minionKills),Be.heroId!==void 0){const Re=ne.get(Be.heroId);Re?Re.count++:ne.set(Be.heroId,{heroId:Be.heroId,heroName:Be.heroName,count:1})}if(Be.heroRoles)for(const Re of Be.heroRoles)J.set(Re,(J.get(Re)||0)+1)}const z=M.length,oe=z>0?G/z*100:0,Ce=se>0?K/se:K,Fe=Array.from(ne.values()).sort((Be,pe)=>pe.count-Be.count).slice(0,3),Ne=Array.from(J.entries()).map(([Be,pe])=>({role:Be,count:pe})).sort((Be,pe)=>pe.count-Be.count).slice(0,3);Q.push({id:R.id,name:R.name,gamesPlayed:z,wins:G,losses:V,winRate:oe,kills:K,deaths:se,assists:de,kdRatio:Ce,totalGold:ye,totalMinionKills:W,averageGold:z>0?ye/z:0,averageMinionKills:z>0?W/z:0,hasCombatStats:U,favoriteHeroes:Fe,favoriteRoles:Ne,displayRating:O[R.id]||1200,lastPlayed:$})}return{players:Q,dateRange:I}},[o,A,h]);return{isViewMode:e,isViewModeLoading:r,getAllPlayers:o,getPlayer:c,getAllMatches:A,getMatch:p,getMatchPlayers:u,getAllMatchPlayers:h,getPlayerMatches:d,getPlayerStats:x,getHeroStats:f,getPlayerRelationshipNetwork:g,getHistoricalRatings:m,getHistoricalRatingsForPeriod:b,getCurrentTrueSkillRatings:y,getPlayerDisplayRating:v,getFilteredPlayerStats:B,getHeroWinRateOverTime:w,getHeroRelationshipNetwork:_}}const M3e=({onBack:e})=>{var ye,W;const{playSound:n}=gt(),{isViewModeLoading:r,getAllPlayers:s,getHistoricalRatings:a,getHistoricalRatingsForPeriod:i,getCurrentTrueSkillRatings:o}=Ls(),{playerStatsFilters:c}=U_(),[A,u]=S.useState(!0),[h,d]=S.useState([]),[f,g]=S.useState([]),[m,y]=S.useState(new Set),[v,p]=S.useState({}),[x,b]=S.useState(!1),[w,_]=S.useState(!1),[B,k]=S.useState(null),[N,C]=S.useState(()=>{const U=localStorage.getItem("skillOverTime_minGames");return U?parseInt(U,10):3}),j=S.useMemo(()=>{var U,$;return(U=c==null?void 0:c.dateRange)!=null&&U.startDate&&(($=c==null?void 0:c.dateRange)!=null&&$.endDate)?{start:c.dateRange.startDate.toISOString().split("T")[0],end:c.dateRange.endDate.toISOString().split("T")[0]}:{start:null,end:null}},[c==null?void 0:c.dateRange]),E=!!((ye=c==null?void 0:c.dateRange)!=null&&ye.startDate&&((W=c==null?void 0:c.dateRange)!=null&&W.endDate)),F=(c==null?void 0:c.recalculateTrueSkill)??!1;S.useEffect(()=>{const U=()=>{_(window.innerWidth<768)};return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),S.useEffect(()=>{if(r)return;(async()=>{u(!0);try{const $=j.start?new Date(j.start):void 0,ne=j.end?new Date(j.end+"T23:59:59"):void 0;let J;F&&($||ne)?J=await i($,ne,!0):$||ne?J=await i($,ne,!1):J=await a();const z=await o(),oe=await s(),Ce=new Map(oe.map(Le=>[Le.id,Le.name])),Fe=new Set;J.forEach(Le=>{Object.keys(Le.ratings).forEach(ze=>{Fe.add(ze)})});const Ne=J.map(Le=>{const ze={matchNumber:Le.matchNumber,date:Le.date};return Fe.forEach(Ae=>{const Me=Ce.get(Ae)||Ae;Le.ratings[Ae]!==void 0&&(ze[Me]=Le.ratings[Ae],ze[Me+"_participated"]=Le.participants.includes(Ae))}),ze});g(Ne);const Be=[];Fe.forEach(Le=>{const ze=Ce.get(Le)||Le,Ae=J.filter(Me=>Me.participants.includes(Le)).length;Ae>0&&Be.push({playerId:Le,playerName:ze,currentRating:z[Le]||1200,actualMatchCount:Ae})}),Be.sort((Le,ze)=>ze.currentRating-Le.currentRating),d(Be);const pe=Be.filter(Le=>Le.actualMatchCount>=5).slice(0,5).map(Le=>Le.playerId);y(new Set(pe));const he=G(Be.length),Re={};Be.forEach((Le,ze)=>{Re[Le.playerName]=he[ze]}),p(Re)}catch($){console.error("Error loading rating history:",$)}finally{u(!1)}})()},[r,a,i,o,s,j.start,j.end,F]);const I=S.useMemo(()=>!j.start&&!j.end?f:f.filter(U=>{const $=new Date(U.date);return!(j.start&&$<new Date(j.start)||j.end&&$>new Date(j.end+"T23:59:59"))}),[f,j]),T=S.useCallback(U=>{const $=I;if($.length<2)return{segments:[],participationPoints:[]};let ne=0,J=-1,z=-1;for(let Ne=0;Ne<$.length;Ne++)$[Ne][U+"_participated"]&&(ne++,ne===N&&J===-1&&(J=Ne),z=Ne);if(J===-1)return{segments:[],participationPoints:[]};const oe=[];for(let Ne=J;Ne<z;Ne++){const Be=$[Ne],pe=$[Ne+1],he=pe[U+"_participated"];oe.push({data:[{x:Be.matchNumber,y:Be[U]},{x:pe.matchNumber,y:pe[U]}],style:he?"solid":"dotted"})}let Ce=0;const Fe=$.filter(Ne=>Ne[U+"_participated"]?(Ce++,Ce>=N):!1).map(Ne=>({x:Ne.matchNumber,y:Ne[U],date:Ne.date}));return{segments:oe,participationPoints:Fe}},[I,N]),L=()=>{n("buttonClick"),e()},P=U=>{n("buttonClick");const $=new Set(m);$.has(U)?$.delete(U):$.add(U),y($)},O=()=>{n("buttonClick"),y(new Set(de.map(U=>U.playerId)))},Q=()=>{n("buttonClick"),y(new Set)},R=S.useCallback(()=>{n("buttonClick");const U=N+1;C(U),localStorage.setItem("skillOverTime_minGames",U.toString())},[n,N]),M=S.useCallback(()=>{if(n("buttonClick"),N>1){const U=N-1;C(U),localStorage.setItem("skillOverTime_minGames",U.toString())}},[n,N]),G=U=>{const $=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16","#06B6D4","#A855F7","#F43F5E","#0EA5E9","#22C55E"],ne=[];for(let J=0;J<U;J++)ne.push($[J%$.length]);return ne},V=()=>{n("buttonClick"),b(!x)},K=S.useMemo(()=>{let U=1/0,$=-1/0;return h.filter(ne=>m.has(ne.playerId)).forEach(ne=>{I.forEach(J=>{const z=J[ne.playerName];z!==void 0&&(U=Math.min(U,z),$=Math.max($,z))})}),U===1/0?[1e3,1400]:[Math.floor(U/50)*50-50,Math.ceil($/50)*50+50]},[I,h,m]),se=S.useMemo(()=>{if(I.length===0)return[0,10];const U=I.map($=>$.matchNumber);return[Math.min(...U),Math.max(...U)]},[I]),de=S.useMemo(()=>h.filter(U=>U.actualMatchCount>=N),[h,N]);return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:L,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back"})]}),l.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Skill Rating Over Time"})]}),E&&l.jsxs("div",{className:"mb-4 p-3 bg-purple-900/30 border border-purple-700/50 rounded-lg flex items-center flex-wrap gap-2",children:[l.jsx(os,{size:18,className:"mr-2 text-purple-400"}),l.jsxs("span",{className:"text-sm text-purple-200",children:["Using filters from Player Stats",(c==null?void 0:c.recencyMonths)&&`: Last ${c.recencyMonths} months`,F&&" (TrueSkill recalculated)"]})]}),A?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 sm:hidden no-screenshot",children:l.jsxs("button",{onClick:V,className:"w-full px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(os,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Player Selection (",m.size," selected)"]})]}),x?l.jsx(_r,{size:18}):l.jsx(Dn,{size:18})]})}),l.jsx("div",{className:`mb-4 no-screenshot ${!x&&w?"hidden":""}`,children:l.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(os,{size:18,className:"mr-2 text-blue-400"}),l.jsx("span",{className:"font-semibold",children:"Minimum Games to Show Player"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:M,disabled:N<=1,className:"w-8 h-8 rounded-lg bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-lg font-bold",children:""}),l.jsx("span",{className:"text-lg font-semibold w-8 text-center",children:N}),l.jsx("button",{onClick:R,className:"w-8 h-8 rounded-lg bg-gray-600 hover:bg-gray-500 flex items-center justify-center text-lg font-bold",children:"+"}),l.jsx("span",{className:"text-sm text-gray-400 ml-2",children:"games"})]})]})})}),l.jsx("div",{className:`mb-6 no-screenshot ${!x&&w?"hidden":""}`,children:l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2",children:[l.jsxs("h3",{className:"font-semibold flex items-center",children:[l.jsx(St,{size:18,className:"mr-2"}),"Select Players to Compare"]}),l.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[l.jsx("button",{onClick:O,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded text-sm flex-1 sm:flex-none",children:"Select All"}),l.jsx("button",{onClick:Q,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm flex-1 sm:flex-none",children:"Clear All"})]})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:de.map(U=>l.jsxs("button",{onClick:()=>P(U.playerId),className:`p-2 sm:p-3 rounded-lg text-left transition-all ${m.has(U.playerId)?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:[l.jsx("div",{className:"font-medium truncate",children:U.playerName}),l.jsxs("div",{className:"text-xs sm:text-sm opacity-80",children:["Rating: ",U.currentRating]}),l.jsxs("div",{className:"text-xs opacity-60",children:[U.actualMatchCount," matches played"]})]},U.playerId))}),de.length===0&&l.jsxs("div",{className:"text-center py-4 text-gray-400",children:["No players with ",N,"+ games. Try lowering the minimum."]})]})}),m.size>0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-2 sm:p-4",children:[l.jsx("div",{style:{width:"100%",height:w?400:600},children:l.jsxs(Ih,{width:w?380:1e3,height:w?380:580,domain:{x:se,y:K},padding:{top:60,bottom:60,left:70,right:30},children:[l.jsx(Pa,{orientation:"top",tickValues:I.filter(U=>U.matchNumber>0).map(U=>U.matchNumber),tickFormat:U=>{const $=I.find(J=>J.matchNumber===U);return $?new Date($.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}):""},style:{axis:{stroke:"#6B7280"},tickLabels:{fill:"#9CA3AF",fontSize:w?8:10,angle:-45,textAnchor:"start"},grid:{stroke:"transparent"}}}),l.jsx(Pa,{label:"Match Number",tickFormat:U=>Math.round(U),style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:w?12:14,padding:40},tickLabels:{fill:"#9CA3AF",fontSize:w?10:12},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(Pa,{dependentAxis:!0,label:"Skill Rating",style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:w?12:14,padding:50},tickLabels:{fill:"#9CA3AF",fontSize:w?10:12},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),h.filter(U=>m.has(U.playerId)).flatMap(U=>{const{segments:$}=T(U.playerName),ne=v[U.playerName],J=B===U.playerId,z=B!==null&&!J;return $.map((oe,Ce)=>l.jsx(rl,{data:oe.data,style:{data:{stroke:ne,strokeWidth:J?5:3,strokeOpacity:z?.3:1,strokeDasharray:oe.style==="dotted"?"8 4":void 0,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(k(U.playerId),[]),onMouseLeave:()=>(k(null),[])}}]},`${U.playerId}-seg-${Ce}`))}),h.filter(U=>m.has(U.playerId)).map(U=>{const{participationPoints:$}=T(U.playerName),ne=v[U.playerName],J=B===U.playerId,z=B!==null&&!J;return l.jsx(Pp,{data:$,size:J?8:5,symbol:"circle",style:{data:{fill:ne,fillOpacity:z?.3:1,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(k(U.playerId),[]),onMouseLeave:()=>(k(null),[])}}]},`${U.playerId}-scatter`)})]})}),l.jsx("div",{className:"flex flex-wrap gap-4 mt-4 justify-center p-3 bg-gray-800 rounded-lg",children:h.filter(U=>m.has(U.playerId)).map(U=>l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onMouseEnter:()=>k(U.playerId),onMouseLeave:()=>k(null),children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:v[U.playerName]}}),l.jsx("span",{className:`text-sm ${B===U.playerId?"text-white font-bold":"text-gray-300"}`,children:U.playerName})]},U.playerId))})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-8 text-center",children:[l.jsx(Hr,{size:48,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400",children:"Select players to view their rating progression"})]}),l.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Line Types:"})," Solid lines lead to matches where the player participated. Dotted lines show periods of inactivity (rating carried forward)."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Dot Markers:"})," Each dot marks a match where the player actually participated."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Legend Hover:"})," Hover over a player name in the legend to highlight their line."]}),l.jsx("p",{children:"Ratings use the TrueSkill system where new players start around 1200 and converge to their true skill level after ~20 matches."})]})]})})]})]})},Q3e=({player:e,onDelete:n,isDeleting:r})=>{const{playSound:s}=gt(),[a,i]=S.useState(!1),[o,c]=S.useState(!1),A=()=>{s("buttonClick"),i(!a)},u=()=>{if(s("buttonClick"),!o){c(!0);return}n(e.id),c(!1)},h=()=>{s("buttonClick"),c(!1)},d=f=>new Date(f).toLocaleDateString()+" "+new Date(f).toLocaleTimeString();return l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(St,{size:20,className:"mr-2 text-blue-400"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-lg",children:e.name}),l.jsxs("p",{className:"text-sm text-gray-400",children:["Created: ",d(e.dateCreated)]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(At,{text:"View player data in JSON format",children:l.jsxs("button",{onClick:A,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm flex items-center",children:[a?l.jsx(Dn,{size:16}):l.jsx(jd,{size:16}),l.jsx("span",{className:"ml-1",children:"JSON"})]})}),o?l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:u,disabled:r,className:"px-3 py-1 bg-red-500 hover:bg-red-400 rounded text-sm",children:"Confirm"}),l.jsx("button",{onClick:h,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Cancel"})]}):l.jsx(At,{text:"Delete this player (only available for players with no matches)",children:l.jsxs("button",{onClick:u,disabled:r,className:`px-3 py-1 bg-red-600 hover:bg-red-500 rounded text-sm flex items-center ${r?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx(ho,{size:16,className:"mr-1"}),r?"Deleting...":"Delete"]})})]})]}),l.jsx("div",{className:"text-sm text-gray-300 mb-2",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("span",{children:["Games: ",l.jsx("strong",{children:e.totalGames})]}),l.jsxs("span",{children:["ELO: ",l.jsx("strong",{children:e.elo})]}),l.jsxs("span",{children:["Device ID: ",l.jsx("strong",{children:e.deviceId||"N/A"})]}),l.jsxs("span",{children:["Level: ",l.jsx("strong",{children:e.level||1})]})]})}),o&&l.jsx("div",{className:"bg-red-900/30 border border-red-600 p-3 rounded-lg mt-3",children:l.jsxs("p",{className:"text-red-300 text-sm",children:[l.jsx("strong",{children:"Warning:"}),' This will permanently delete "',e.name,'" from your player database. This action cannot be undone.']})}),a&&l.jsx("div",{className:"mt-3 bg-gray-800 rounded-lg p-3",children:l.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto",children:JSON.stringify(e,null,2)})})]})},D3e=({isOpen:e,onClose:n,onPlayerDeleted:r})=>{const{playSound:s}=gt(),a=S.useRef(null),[i,o]=S.useState([]),[c,A]=S.useState(!1),[u,h]=S.useState(null),[d,f]=S.useState(new Set);S.useEffect(()=>{e&&g()},[e]);const g=async()=>{try{A(!0),h(null);const p=await Ct.getPlayersWithNoGames();o(p)}catch(p){console.error("Error loading zero-game players:",p),h("Failed to load player data")}finally{A(!1)}},m=async p=>{try{f(b=>new Set([...b,p])),await Ct.deletePlayer(p)?(o(b=>b.filter(w=>w.id!==p)),r(),s("phaseChange")):h(`Failed to delete player "${p}". They may have recorded matches.`)}catch(x){console.error("Error deleting player:",x),h(`Error deleting player "${p}"`)}finally{f(x=>{const b=new Set(x);return b.delete(p),b})}},y=p=>{a.current&&!a.current.contains(p.target)&&v()},v=()=>{s("buttonClick"),n()};return S.useEffect(()=>{const p=x=>{x.key==="Escape"&&e&&v()};return e&&(document.addEventListener("keydown",p),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",p),document.body.style.overflow=""}},[e]),e?l.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:y,children:l.jsxs("div",{ref:a,className:"max-w-4xl w-full max-h-[80vh] bg-gray-800 rounded-lg border border-gray-600 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold",children:"Edit Player Database"}),l.jsxs("p",{className:"text-gray-400 text-sm",children:["Players with no recorded matches (",i.length," found)"]})]}),l.jsx("button",{onClick:v,className:"text-gray-400 hover:text-white p-2",children:l.jsx(Jt,{size:24})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[c&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-400",children:"Loading players..."})}),u&&l.jsx("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300",children:u}),!c&&i.length===0&&!u&&l.jsxs("div",{className:"text-center py-8",children:[l.jsx(St,{size:48,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400",children:"No players with zero games found"}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"All players in your database have recorded match history."})]}),!c&&i.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-amber-900/30 border border-amber-600 p-3 rounded-lg mb-4",children:l.jsxs("p",{className:"text-amber-300 text-sm",children:[l.jsx("strong",{children:"Note:"})," Only players with no recorded matches can be deleted. This is a safety measure to prevent accidental data loss."]})}),i.map(p=>l.jsx(Q3e,{player:p,onDelete:m,isDeleting:d.has(p.id)},p.id))]})]}),l.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-700",children:l.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"Close"})})]})}):null},R3e=({onBack:e,onNavigate:n})=>{const{playSound:r}=gt(),{isViewMode:s,sharedData:a,isLoading:i}=ph(),[o,c]=S.useState(!1),[A,u]=S.useState(!1),[h,d]=S.useState(null),[f,g]=S.useState(!1),[m,y]=S.useState(!1),[v,p]=S.useState("replace"),[x,b]=S.useState(!1),[w,_]=S.useState(!1),B=async()=>{if(s&&a){const Q=a.matches&&a.matches.length>0;c(Q)}else if(!s){const Q=await Ct.hasMatchData();c(Q)}},k=async()=>{try{const Q=await Ct.getPlayersWithNoGames();_(Q.length>0)}catch(Q){console.error("Error checking for zero-game players:",Q),_(!1)}};S.useEffect(()=>{i||(B(),s||k())},[i,s,a]);const N=Q=>{r("buttonClick"),n(Q)},C=()=>{r("buttonClick"),e()},j=()=>{r("buttonClick"),b(!0)},E=()=>{b(!1)},F=()=>{k(),B()},I=async()=>{try{u(!0),r("buttonClick");const Q=await Ct.exportData(),R=JSON.stringify(Q,null,2),M=new Blob([R],{type:"application/json"}),G=URL.createObjectURL(M),V=document.createElement("a");V.href=G,V.download=`guards-of-atlantis-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(V),V.click(),setTimeout(()=>{document.body.removeChild(V),URL.revokeObjectURL(G),u(!1)},100)}catch(Q){console.error("Error exporting data:",Q),u(!1)}},T=()=>{if(!m){r("buttonClick"),y(!0);return}r("buttonClick");const Q=document.createElement("input");Q.type="file",Q.accept=".json",Q.onchange=async R=>{var G;const M=(G=R.target.files)==null?void 0:G[0];if(M)try{const V=await M.text(),K=JSON.parse(V);if(!K.players||!K.matches||!K.matchPlayers){d("Invalid data format");return}await Ct.importData(K,v)?(r("phaseChange"),await B(),d(null),y(!1)):d("Failed to import data")}catch(V){console.error("Error importing data:",V),d("Error importing data")}},Q.click()},L=()=>{r("buttonClick"),y(!1)},P=async()=>{if(!f){g(!0),r("buttonClick");return}try{r("buttonClick"),await Ct.clearAllData()&&(c(!1),g(!1))}catch(Q){console.error("Error deleting data:",Q)}},O={replace:"This will delete all your existing match history and player statistics and replace them with the imported data. Use this when setting up a new device or completely refreshing your data.",merge:"This will add new matches from the imported file while preserving your existing data. Any new match records will be added to your match records. Use this to synchronize data between devices."};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s?l.jsx("div",{}):l.jsxs("button",{onClick:C,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Setup"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Match Statistics"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-8",children:[l.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${o?"":"opacity-50 pointer-events-none"}`,onClick:()=>o&&N("player-stats"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(St,{size:24,className:"mr-3 text-blue-400"}),l.jsx("span",{children:"Player Stats"})]}),l.jsx("p",{className:"text-gray-300",children:"View detailed player performance statistics, favorite heroes, and ELO ratings."}),!o&&l.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[l.jsx(qt,{size:16,className:"mr-1"}),l.jsx("span",{children:"No match data available"})]})]}),l.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${o?"":"opacity-50 pointer-events-none"}`,onClick:()=>o&&N("hero-stats"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(Mt,{size:24,className:"mr-3 text-purple-400"}),l.jsx("span",{children:"Hero Stats"})]}),l.jsx("p",{className:"text-gray-300",children:"Analyze hero win rates, synergies, and counters based on your match history."}),!o&&l.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[l.jsx(qt,{size:16,className:"mr-1"}),l.jsx("span",{children:"No match data available"})]})]}),l.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${o?"":"opacity-50 pointer-events-none"}`,onClick:()=>o&&N("match-history"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(l8,{size:24,className:"mr-3 text-green-400"}),l.jsx("span",{children:"Match History"})]}),l.jsx("p",{className:"text-gray-300",children:"Browse past matches, view details, and manage your match history."}),!o&&l.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[l.jsx(qt,{size:16,className:"mr-1"}),l.jsx("span",{children:"No match data available"})]})]}),!s&&l.jsxs("div",{className:"bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors",onClick:()=>N("record-match"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(X$,{size:24,className:"mr-3 text-orange-400"}),l.jsx("span",{children:"Record Match"})]}),l.jsx("p",{className:"text-gray-300",children:"Manually log match results for games played outside the application."})]}),!s&&l.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${o?"":"opacity-50 pointer-events-none"}`,onClick:()=>o&&N("match-maker"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(Vb,{size:24,className:"mr-3 text-purple-400"}),l.jsx("span",{children:"Match Maker"})]}),l.jsx("p",{className:"text-gray-300",children:"Generate balanced teams based on player rankings or experience for fair matches."}),!o&&l.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[l.jsx(qt,{size:16,className:"mr-1"}),l.jsx("span",{children:"No match data available"})]})]}),l.jsxs("div",{className:"bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors",onClick:()=>N("hero-info"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(m$,{size:24,className:"mr-3 text-teal-400"}),l.jsx("span",{children:"Hero Guide"})]}),l.jsx("p",{className:"text-gray-300",children:"Browse complete information about all heroes, including stats, roles, and abilities."})]})]}),!s&&l.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-6",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold",children:"Data Management"}),l.jsx(At,{text:"Share, import, and export features allow you to transfer your match data between devices or merge game records from different devices.",position:"right",maxWidth:"max-w-md",children:l.jsx(qt,{size:16,className:"ml-2 text-blue-400 cursor-help"})})]}),l.jsx("div",{className:"bg-green-900/30 border border-green-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"mr-3 p-2 bg-green-800 rounded-full flex-shrink-0",children:l.jsx(J$,{size:24,className:"text-green-300"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h4",{className:"font-semibold text-lg text-green-300 mb-1",children:"Manual Data Sharing"}),l.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Manually import or export data files to share data between devices."}),m?l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg mb-4",children:[l.jsx("h4",{className:"font-semibold text-base mb-3",children:"Import Options"}),l.jsxs("div",{className:"mb-4 space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("input",{type:"radio",id:"replaceMode",name:"importMode",checked:v==="replace",onChange:()=>p("replace"),className:"mt-1 mr-3"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("label",{htmlFor:"replaceMode",className:"flex items-center font-medium cursor-pointer",children:["Replace all data",l.jsx(At,{text:O.replace,position:"right",maxWidth:"max-w-md",children:l.jsx(qt,{size:16,className:"ml-2 text-blue-400 cursor-help"})})]}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Delete all existing data and replace with imported data."})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("input",{type:"radio",id:"mergeMode",name:"importMode",checked:v==="merge",onChange:()=>p("merge"),className:"mt-1 mr-3"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("label",{htmlFor:"mergeMode",className:"flex items-center font-medium cursor-pointer",children:["Merge with existing data",l.jsx(At,{text:O.merge,position:"right",maxWidth:"max-w-md",children:l.jsx(qt,{size:16,className:"ml-2 text-blue-400 cursor-help"})})]}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add new data while preserving existing records."})]})]})]}),l.jsx("div",{className:"bg-amber-900/30 border border-amber-600 p-3 rounded-lg mb-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ai,{size:16,className:"mr-2 mt-0.5 flex-shrink-0 text-amber-400"}),l.jsx("div",{children:v==="replace"?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"font-semibold text-amber-400",children:"Warning: All existing data will be deleted!"}),l.jsx("p",{className:"mt-1 text-sm",children:"This action will permanently delete all your match history and player statistics and replace them with the imported data."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"font-semibold text-amber-400",children:"Merge Information:"}),l.jsx("p",{className:"mt-1 text-sm",children:"Player stats will be combined (wins, losses, ELO), and new matches will be added to your history. Matches with the same ID will be skipped to avoid duplicates."})]})})]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs("button",{onClick:T,className:"px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg flex items-center",children:[l.jsx(rg,{size:18,className:"mr-2"}),l.jsx("span",{children:"Proceed with Import"})]}),l.jsx("button",{onClick:L,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"Cancel"})]})]}):l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx(At,{text:"Export match statistics data to a file. Use this to backup your data or transfer it to another device.",children:l.jsxs("button",{onClick:I,disabled:!o||A,className:`px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg flex items-center ${!o||A?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx(J0,{size:18,className:"mr-2"}),l.jsx("span",{children:A?"Exporting...":"Export Data"})]})}),l.jsx(At,{text:"Import match statistics data from a previously exported file.",children:l.jsxs("button",{onClick:T,className:"px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg flex items-center",children:[l.jsx(rg,{size:18,className:"mr-2"}),l.jsx("span",{children:"Import Data"})]})}),w&&l.jsx(At,{text:"Manage players with no recorded matches. You can view their data and delete them if needed.",children:l.jsxs("button",{onClick:j,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 rounded-lg flex items-center",children:[l.jsx(rO,{size:18,className:"mr-2"}),l.jsx("span",{children:"Edit Player Data"})]})}),l.jsx(At,{text:"Delete all match statistics data permanently",children:l.jsxs("button",{onClick:P,disabled:!o,className:`px-4 py-2 ${f?"bg-red-500 hover:bg-red-400":"bg-red-700 hover:bg-red-600"} rounded-lg flex items-center ${o?"":"opacity-50 cursor-not-allowed"}`,children:[l.jsx(ho,{size:18,className:"mr-2"}),l.jsx("span",{children:f?"Confirm Delete":"Delete All Data"})]})})]})]})]})}),h&&l.jsx("div",{className:"mt-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300",children:h}),l.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"mb-2",children:"Match data is stored locally on this device using your browser's storage. It is recommended you back up your data locally with Export Data (in case your browser's storage gets cleared)."}),l.jsx("p",{children:"Use the Cloud Sync feature to share your stats publicly, or manually import and export data to transfer match records between devices or merge records from different devices (e.g. with friends)."})]})]})})]}),l.jsx(D3e,{isOpen:x,onClose:E,onPlayerDeleted:F})]})};function $3e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;A=!1}else for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function O3e(e,n,r){return n=q3e(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function $j(e,n){return z3e(e)||$3e(e,n)||mM(e,n)||W3e()}function L3e(e){return H3e(e)||K3e(e)||mM(e)||G3e()}function H3e(e){if(Array.isArray(e))return ow(e)}function z3e(e){if(Array.isArray(e))return e}function K3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mM(e,n){if(e){if(typeof e=="string")return ow(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ow(e,n)}}function ow(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function G3e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W3e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V3e(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function q3e(e){var n=V3e(e,"string");return typeof n=="symbol"?n:String(n)}var X3e=function(n,r){var s=new Set(r);return Object.assign.apply(Object,[{}].concat(L3e(Object.entries(n).filter(function(a){var i=$j(a,1),o=i[0];return!s.has(o)}).map(function(a){var i=$j(a,2),o=i[0],c=i[1];return O3e({},o,c)}))))};function lw(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function Y3e(e){if(Array.isArray(e))return e}function J3e(e){if(Array.isArray(e))return lw(e)}function Z3e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function e6e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function t6e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n6e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r6e(e,n){return Y3e(e)||e6e(e,n)||pM(e,n)||t6e()}function Oj(e){return J3e(e)||Z3e(e)||pM(e)||n6e()}function pM(e,n){if(e){if(typeof e=="string")return lw(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lw(e,n):void 0}}function s6e(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.wrapperElementType,s=r===void 0?"div":r,a=n.nodeMapper,i=a===void 0?function(h){return h}:a,o=n.methodNames,c=o===void 0?[]:o,A=n.initPropNames,u=A===void 0?[]:A;return S.forwardRef(function(h,d){var f=S.useRef(),g=S.useMemo(function(){var v=Object.fromEntries(u.filter(function(p){return h.hasOwnProperty(p)}).map(function(p){return[p,h[p]]}));return e(v)},[]);Lj(function(){g(i(f.current))},S.useLayoutEffect),Lj(function(){return g._destructor instanceof Function?g._destructor:void 0});var m=S.useCallback(function(v){for(var p=arguments.length,x=new Array(p>1?p-1:0),b=1;b<p;b++)x[b-1]=arguments[b];return g[v]instanceof Function?g[v].apply(g,x):void 0},[g]),y=S.useRef({});return Object.keys(X3e(h,[].concat(Oj(c),Oj(u)))).filter(function(v){return y.current[v]!==h[v]}).forEach(function(v){return m(v,h[v])}),y.current=h,S.useImperativeHandle(d,function(){return Object.fromEntries(c.map(function(v){return[v,function(){for(var p=arguments.length,x=new Array(p),b=0;b<p;b++)x[b]=arguments[b];return m.apply(void 0,[v].concat(x))}]}))},[m]),q.createElement(s,{ref:f})})}function Lj(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.useEffect,r=S.useRef(),s=S.useRef(!1),a=S.useRef(!1),i=S.useState(0),o=r6e(i,2);o[0];var c=o[1];s.current&&(a.current=!0),n(function(){return s.current||(r.current=e(),s.current=!0),c(function(A){return A+1}),function(){a.current&&r.current&&r.current()}},[])}var cw="http://www.w3.org/1999/xhtml";const Hj={svg:"http://www.w3.org/2000/svg",xhtml:cw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Mp(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Hj.hasOwnProperty(n)?{space:Hj[n],local:e}:e}function a6e(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===cw&&n.documentElement.namespaceURI===cw?n.createElement(e):n.createElementNS(r,e)}}function i6e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function yM(e){var n=Mp(e);return(n.local?i6e:a6e)(n)}function o6e(){}function oC(e){return e==null?o6e:function(){return this.querySelector(e)}}function l6e(e){typeof e!="function"&&(e=oC(e));for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a)for(var i=n[a],o=i.length,c=s[a]=new Array(o),A,u,h=0;h<o;++h)(A=i[h])&&(u=e.call(A,A.__data__,h,i))&&("__data__"in A&&(u.__data__=A.__data__),c[h]=u);return new cs(s,this._parents)}function c6e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function A6e(){return[]}function vM(e){return e==null?A6e:function(){return this.querySelectorAll(e)}}function u6e(e){return function(){return c6e(e.apply(this,arguments))}}function d6e(e){typeof e=="function"?e=u6e(e):e=vM(e);for(var n=this._groups,r=n.length,s=[],a=[],i=0;i<r;++i)for(var o=n[i],c=o.length,A,u=0;u<c;++u)(A=o[u])&&(s.push(e.call(A,A.__data__,u,o)),a.push(A));return new cs(s,a)}function xM(e){return function(){return this.matches(e)}}function wM(e){return function(n){return n.matches(e)}}var h6e=Array.prototype.find;function f6e(e){return function(){return h6e.call(this.children,e)}}function g6e(){return this.firstElementChild}function m6e(e){return this.select(e==null?g6e:f6e(typeof e=="function"?e:wM(e)))}var p6e=Array.prototype.filter;function y6e(){return Array.from(this.children)}function v6e(e){return function(){return p6e.call(this.children,e)}}function x6e(e){return this.selectAll(e==null?y6e:v6e(typeof e=="function"?e:wM(e)))}function w6e(e){typeof e!="function"&&(e=xM(e));for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a)for(var i=n[a],o=i.length,c=s[a]=[],A,u=0;u<o;++u)(A=i[u])&&e.call(A,A.__data__,u,i)&&c.push(A);return new cs(s,this._parents)}function bM(e){return new Array(e.length)}function b6e(){return new cs(this._enter||this._groups.map(bM),this._parents)}function Vg(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Vg.prototype={constructor:Vg,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _6e(e){return function(){return e}}function C6e(e,n,r,s,a,i){for(var o=0,c,A=n.length,u=i.length;o<u;++o)(c=n[o])?(c.__data__=i[o],s[o]=c):r[o]=new Vg(e,i[o]);for(;o<A;++o)(c=n[o])&&(a[o]=c)}function B6e(e,n,r,s,a,i,o){var c,A,u=new Map,h=n.length,d=i.length,f=new Array(h),g;for(c=0;c<h;++c)(A=n[c])&&(f[c]=g=o.call(A,A.__data__,c,n)+"",u.has(g)?a[c]=A:u.set(g,A));for(c=0;c<d;++c)g=o.call(e,i[c],c,i)+"",(A=u.get(g))?(s[c]=A,A.__data__=i[c],u.delete(g)):r[c]=new Vg(e,i[c]);for(c=0;c<h;++c)(A=n[c])&&u.get(f[c])===A&&(a[c]=A)}function S6e(e){return e.__data__}function k6e(e,n){if(!arguments.length)return Array.from(this,S6e);var r=n?B6e:C6e,s=this._parents,a=this._groups;typeof e!="function"&&(e=_6e(e));for(var i=a.length,o=new Array(i),c=new Array(i),A=new Array(i),u=0;u<i;++u){var h=s[u],d=a[u],f=d.length,g=j6e(e.call(h,h&&h.__data__,u,s)),m=g.length,y=c[u]=new Array(m),v=o[u]=new Array(m),p=A[u]=new Array(f);r(h,d,y,v,p,g,n);for(var x=0,b=0,w,_;x<m;++x)if(w=y[x]){for(x>=b&&(b=x+1);!(_=v[b])&&++b<m;);w._next=_||null}}return o=new cs(o,s),o._enter=c,o._exit=A,o}function j6e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function N6e(){return new cs(this._exit||this._groups.map(bM),this._parents)}function E6e(e,n,r){var s=this.enter(),a=this,i=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),n!=null&&(a=n(a),a&&(a=a.selection())),r==null?i.remove():r(i),s&&a?s.merge(a).order():a}function T6e(e){for(var n=e.selection?e.selection():e,r=this._groups,s=n._groups,a=r.length,i=s.length,o=Math.min(a,i),c=new Array(a),A=0;A<o;++A)for(var u=r[A],h=s[A],d=u.length,f=c[A]=new Array(d),g,m=0;m<d;++m)(g=u[m]||h[m])&&(f[m]=g);for(;A<a;++A)c[A]=r[A];return new cs(c,this._parents)}function F6e(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var s=e[n],a=s.length-1,i=s[a],o;--a>=0;)(o=s[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function I6e(e){e||(e=U6e);function n(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i){for(var o=r[i],c=o.length,A=a[i]=new Array(c),u,h=0;h<c;++h)(u=o[h])&&(A[h]=u);A.sort(n)}return new cs(a,this._parents).order()}function U6e(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function P6e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function M6e(){return Array.from(this)}function Q6e(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,i=s.length;a<i;++a){var o=s[a];if(o)return o}return null}function D6e(){let e=0;for(const n of this)++e;return e}function R6e(){return!this.node()}function $6e(e){for(var n=this._groups,r=0,s=n.length;r<s;++r)for(var a=n[r],i=0,o=a.length,c;i<o;++i)(c=a[i])&&e.call(c,c.__data__,i,a);return this}function O6e(e){return function(){this.removeAttribute(e)}}function L6e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function H6e(e,n){return function(){this.setAttribute(e,n)}}function z6e(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function K6e(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function G6e(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function W6e(e,n){var r=Mp(e);if(arguments.length<2){var s=this.node();return r.local?s.getAttributeNS(r.space,r.local):s.getAttribute(r)}return this.each((n==null?r.local?L6e:O6e:typeof n=="function"?r.local?G6e:K6e:r.local?z6e:H6e)(r,n))}function _M(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function V6e(e){return function(){this.style.removeProperty(e)}}function q6e(e,n,r){return function(){this.style.setProperty(e,n,r)}}function X6e(e,n,r){return function(){var s=n.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,r)}}function Y6e(e,n,r){return arguments.length>1?this.each((n==null?V6e:typeof n=="function"?X6e:q6e)(e,n,r??"")):xA(this.node(),e)}function xA(e,n){return e.style.getPropertyValue(n)||_M(e).getComputedStyle(e,null).getPropertyValue(n)}function J6e(e){return function(){delete this[e]}}function Z6e(e,n){return function(){this[e]=n}}function eTe(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function tTe(e,n){return arguments.length>1?this.each((n==null?J6e:typeof n=="function"?eTe:Z6e)(e,n)):this.node()[e]}function CM(e){return e.trim().split(/^|\s+/)}function lC(e){return e.classList||new BM(e)}function BM(e){this._node=e,this._names=CM(e.getAttribute("class")||"")}BM.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function SM(e,n){for(var r=lC(e),s=-1,a=n.length;++s<a;)r.add(n[s])}function kM(e,n){for(var r=lC(e),s=-1,a=n.length;++s<a;)r.remove(n[s])}function nTe(e){return function(){SM(this,e)}}function rTe(e){return function(){kM(this,e)}}function sTe(e,n){return function(){(n.apply(this,arguments)?SM:kM)(this,e)}}function aTe(e,n){var r=CM(e+"");if(arguments.length<2){for(var s=lC(this.node()),a=-1,i=r.length;++a<i;)if(!s.contains(r[a]))return!1;return!0}return this.each((typeof n=="function"?sTe:n?nTe:rTe)(r,n))}function iTe(){this.textContent=""}function oTe(e){return function(){this.textContent=e}}function lTe(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function cTe(e){return arguments.length?this.each(e==null?iTe:(typeof e=="function"?lTe:oTe)(e)):this.node().textContent}function ATe(){this.innerHTML=""}function uTe(e){return function(){this.innerHTML=e}}function dTe(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function hTe(e){return arguments.length?this.each(e==null?ATe:(typeof e=="function"?dTe:uTe)(e)):this.node().innerHTML}function fTe(){this.nextSibling&&this.parentNode.appendChild(this)}function gTe(){return this.each(fTe)}function mTe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pTe(){return this.each(mTe)}function yTe(e){var n=typeof e=="function"?e:yM(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function vTe(){return null}function xTe(e,n){var r=typeof e=="function"?e:yM(e),s=n==null?vTe:typeof n=="function"?n:oC(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),s.apply(this,arguments)||null)})}function wTe(){var e=this.parentNode;e&&e.removeChild(this)}function bTe(){return this.each(wTe)}function _Te(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function CTe(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function BTe(e){return this.select(e?CTe:_Te)}function STe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function kTe(e){return function(n){e.call(this,n,this.__data__)}}function jTe(e){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");return s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),{type:n,name:r}})}function NTe(e){return function(){var n=this.__on;if(n){for(var r=0,s=-1,a=n.length,i;r<a;++r)i=n[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):n[++s]=i;++s?n.length=s:delete this.__on}}}function ETe(e,n,r){return function(){var s=this.__on,a,i=kTe(n);if(s){for(var o=0,c=s.length;o<c;++o)if((a=s[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=r),a.value=n;return}}this.addEventListener(e.type,i,r),a={type:e.type,name:e.name,value:n,listener:i,options:r},s?s.push(a):this.__on=[a]}}function TTe(e,n,r){var s=jTe(e+""),a,i=s.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var A=0,u=c.length,h;A<u;++A)for(a=0,h=c[A];a<i;++a)if((o=s[a]).type===h.type&&o.name===h.name)return h.value}return}for(c=n?ETe:NTe,a=0;a<i;++a)this.each(c(s[a],n,r));return this}function jM(e,n,r){var s=_M(e),a=s.CustomEvent;typeof a=="function"?a=new a(n,r):(a=s.document.createEvent("Event"),r?(a.initEvent(n,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(n,!1,!1)),e.dispatchEvent(a)}function FTe(e,n){return function(){return jM(this,e,n)}}function ITe(e,n){return function(){return jM(this,e,n.apply(this,arguments))}}function UTe(e,n){return this.each((typeof n=="function"?ITe:FTe)(e,n))}function*PTe(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,i=s.length,o;a<i;++a)(o=s[a])&&(yield o)}var NM=[null];function cs(e,n){this._groups=e,this._parents=n}function Uh(){return new cs([[document.documentElement]],NM)}function MTe(){return this}cs.prototype=Uh.prototype={constructor:cs,select:l6e,selectAll:d6e,selectChild:m6e,selectChildren:x6e,filter:w6e,data:k6e,enter:b6e,exit:N6e,join:E6e,merge:T6e,selection:MTe,order:F6e,sort:I6e,call:P6e,nodes:M6e,node:Q6e,size:D6e,empty:R6e,each:$6e,attr:W6e,style:Y6e,property:tTe,classed:aTe,text:cTe,html:hTe,raise:gTe,lower:pTe,append:yTe,insert:xTe,remove:bTe,clone:BTe,datum:STe,on:TTe,dispatch:UTe,[Symbol.iterator]:PTe};function Cs(e){return typeof e=="string"?new cs([[document.querySelector(e)]],[document.documentElement]):new cs([[e]],NM)}function QTe(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Ba(e,n){if(e=QTe(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var s=r.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(n.getScreenCTM().inverse()),[s.x,s.y]}if(n.getBoundingClientRect){var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}}return[e.pageX,e.pageY]}var DTe={value:()=>{}};function Ph(){for(var e=0,n=arguments.length,r={},s;e<n;++e){if(!(s=arguments[e]+"")||s in r||/[\s.]/.test(s))throw new Error("illegal type: "+s);r[s]=[]}return new p0(r)}function p0(e){this._=e}function RTe(e,n){return e.trim().split(/^|\s+/).map(function(r){var s="",a=r.indexOf(".");if(a>=0&&(s=r.slice(a+1),r=r.slice(0,a)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:s}})}p0.prototype=Ph.prototype={constructor:p0,on:function(e,n){var r=this._,s=RTe(e+"",r),a,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((a=(e=s[i]).type)&&(a=$Te(r[a],e.name)))return a;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++i<o;)if(a=(e=s[i]).type)r[a]=zj(r[a],e.name,n);else if(n==null)for(a in r)r[a]=zj(r[a],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new p0(e)},call:function(e,n){if((a=arguments.length-2)>0)for(var r=new Array(a),s=0,a,i;s<a;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],s=0,a=i.length;s<a;++s)i[s].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],a=0,i=s.length;a<i;++a)s[a].value.apply(n,r)}};function $Te(e,n){for(var r=0,s=e.length,a;r<s;++r)if((a=e[r]).name===n)return a.value}function zj(e,n,r){for(var s=0,a=e.length;s<a;++s)if(e[s].name===n){e[s]=DTe,e=e.slice(0,s).concat(e.slice(s+1));break}return r!=null&&e.push({name:n,value:r}),e}const OTe={passive:!1},Wd={capture:!0,passive:!1};function xv(e){e.stopImmediatePropagation()}function Xc(e){e.preventDefault(),e.stopImmediatePropagation()}function EM(e){var n=e.document.documentElement,r=Cs(e).on("dragstart.drag",Xc,Wd);"onselectstart"in n?r.on("selectstart.drag",Xc,Wd):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function TM(e,n){var r=e.document.documentElement,s=Cs(e).on("dragstart.drag",null);n&&(s.on("click.drag",Xc,Wd),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in r?s.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const _f=e=>()=>e;function Aw(e,{sourceEvent:n,subject:r,target:s,identifier:a,active:i,x:o,y:c,dx:A,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:A,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}Aw.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function LTe(e){return!e.ctrlKey&&!e.button}function HTe(){return this.parentNode}function zTe(e,n){return n??{x:e.x,y:e.y}}function KTe(){return navigator.maxTouchPoints||"ontouchstart"in this}function GTe(){var e=LTe,n=HTe,r=zTe,s=KTe,a={},i=Ph("start","drag","end"),o=0,c,A,u,h,d=0;function f(w){w.on("mousedown.drag",g).filter(s).on("touchstart.drag",v).on("touchmove.drag",p,OTe).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(w,_){if(!(h||!e.call(this,w,_))){var B=b(this,n.call(this,w,_),w,_,"mouse");B&&(Cs(w.view).on("mousemove.drag",m,Wd).on("mouseup.drag",y,Wd),EM(w.view),xv(w),u=!1,c=w.clientX,A=w.clientY,B("start",w))}}function m(w){if(Xc(w),!u){var _=w.clientX-c,B=w.clientY-A;u=_*_+B*B>d}a.mouse("drag",w)}function y(w){Cs(w.view).on("mousemove.drag mouseup.drag",null),TM(w.view,u),Xc(w),a.mouse("end",w)}function v(w,_){if(e.call(this,w,_)){var B=w.changedTouches,k=n.call(this,w,_),N=B.length,C,j;for(C=0;C<N;++C)(j=b(this,k,w,_,B[C].identifier,B[C]))&&(xv(w),j("start",w,B[C]))}}function p(w){var _=w.changedTouches,B=_.length,k,N;for(k=0;k<B;++k)(N=a[_[k].identifier])&&(Xc(w),N("drag",w,_[k]))}function x(w){var _=w.changedTouches,B=_.length,k,N;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),k=0;k<B;++k)(N=a[_[k].identifier])&&(xv(w),N("end",w,_[k]))}function b(w,_,B,k,N,C){var j=i.copy(),E=Ba(C||B,_),F,I,T;if((T=r.call(w,new Aw("beforestart",{sourceEvent:B,target:f,identifier:N,active:o,x:E[0],y:E[1],dx:0,dy:0,dispatch:j}),k))!=null)return F=T.x-E[0]||0,I=T.y-E[1]||0,function L(P,O,Q){var R=E,M;switch(P){case"start":a[N]=L,M=o++;break;case"end":delete a[N],--o;case"drag":E=Ba(Q||O,_),M=o;break}j.call(P,w,new Aw(P,{sourceEvent:O,subject:T,target:f,identifier:N,active:M,x:E[0]+F,y:E[1]+I,dx:E[0]-R[0],dy:E[1]-R[1],dispatch:j}),k)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:_f(!!w),f):e},f.container=function(w){return arguments.length?(n=typeof w=="function"?w:_f(w),f):n},f.subject=function(w){return arguments.length?(r=typeof w=="function"?w:_f(w),f):r},f.touchable=function(w){return arguments.length?(s=typeof w=="function"?w:_f(!!w),f):s},f.on=function(){var w=i.on.apply(i,arguments);return w===i?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}var WTe=Ph("start","end","cancel","interrupt"),VTe=[],FM=0,Kj=1,uw=2,y0=3,Gj=4,dw=5,v0=6;function Qp(e,n,r,s,a,i){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;qTe(e,r,{name:n,index:s,group:a,on:WTe,tween:VTe,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:FM})}function cC(e,n){var r=ga(e,n);if(r.state>FM)throw new Error("too late; already scheduled");return r}function Oa(e,n){var r=ga(e,n);if(r.state>y0)throw new Error("too late; already running");return r}function ga(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function qTe(e,n,r){var s=e.__transition,a;s[n]=r,r.timer=gp(i,0,r.time);function i(u){r.state=Kj,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var h,d,f,g;if(r.state!==Kj)return A();for(h in s)if(g=s[h],g.name===r.name){if(g.state===y0)return wk(o);g.state===Gj?(g.state=v0,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete s[h]):+h<n&&(g.state=v0,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete s[h])}if(wk(function(){r.state===y0&&(r.state=Gj,r.timer.restart(c,r.delay,r.time),c(u))}),r.state=uw,r.on.call("start",e,e.__data__,r.index,r.group),r.state===uw){for(r.state=y0,a=new Array(f=r.tween.length),h=0,d=-1;h<f;++h)(g=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(a[++d]=g);a.length=d+1}}function c(u){for(var h=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(A),r.state=dw,1),d=-1,f=a.length;++d<f;)a[d].call(e,h);r.state===dw&&(r.on.call("end",e,e.__data__,r.index,r.group),A())}function A(){r.state=v0,r.timer.stop(),delete s[n];for(var u in s)return;delete e.__transition}}function x0(e,n){var r=e.__transition,s,a,i=!0,o;if(r){n=n==null?null:n+"";for(o in r){if((s=r[o]).name!==n){i=!1;continue}a=s.state>uw&&s.state<dw,s.state=v0,s.timer.stop(),s.on.call(a?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete r[o]}i&&delete e.__transition}}function XTe(e){return this.each(function(){x0(this,e)})}function YTe(e,n){var r,s;return function(){var a=Oa(this,e),i=a.tween;if(i!==r){s=r=i;for(var o=0,c=s.length;o<c;++o)if(s[o].name===n){s=s.slice(),s.splice(o,1);break}}a.tween=s}}function JTe(e,n,r){var s,a;if(typeof r!="function")throw new Error;return function(){var i=Oa(this,e),o=i.tween;if(o!==s){a=(s=o).slice();for(var c={name:n,value:r},A=0,u=a.length;A<u;++A)if(a[A].name===n){a[A]=c;break}A===u&&a.push(c)}i.tween=a}}function ZTe(e,n){var r=this._id;if(e+="",arguments.length<2){for(var s=ga(this.node(),r).tween,a=0,i=s.length,o;a<i;++a)if((o=s[a]).name===e)return o.value;return null}return this.each((n==null?YTe:JTe)(r,e,n))}function AC(e,n,r){var s=e._id;return e.each(function(){var a=Oa(this,s);(a.value||(a.value={}))[n]=r.apply(this,arguments)}),function(a){return ga(a,s).value[n]}}function IM(e,n){var r;return(typeof n=="number"?Zs:n instanceof wl?gg:(r=wl(n))?(n=r,gg):PI)(e,n)}function eFe(e){return function(){this.removeAttribute(e)}}function tFe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nFe(e,n,r){var s,a=r+"",i;return function(){var o=this.getAttribute(e);return o===a?null:o===s?i:i=n(s=o,r)}}function rFe(e,n,r){var s,a=r+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===s?i:i=n(s=o,r)}}function sFe(e,n,r){var s,a,i;return function(){var o,c=r(this),A;return c==null?void this.removeAttribute(e):(o=this.getAttribute(e),A=c+"",o===A?null:o===s&&A===a?i:(a=A,i=n(s=o,c)))}}function aFe(e,n,r){var s,a,i;return function(){var o,c=r(this),A;return c==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),A=c+"",o===A?null:o===s&&A===a?i:(a=A,i=n(s=o,c)))}}function iFe(e,n){var r=Mp(e),s=r==="transform"?Wbe:IM;return this.attrTween(e,typeof n=="function"?(r.local?aFe:sFe)(r,s,AC(this,"attr."+e,n)):n==null?(r.local?tFe:eFe)(r):(r.local?rFe:nFe)(r,s,n))}function oFe(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function lFe(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function cFe(e,n){var r,s;function a(){var i=n.apply(this,arguments);return i!==s&&(r=(s=i)&&lFe(e,i)),r}return a._value=n,a}function AFe(e,n){var r,s;function a(){var i=n.apply(this,arguments);return i!==s&&(r=(s=i)&&oFe(e,i)),r}return a._value=n,a}function uFe(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var s=Mp(e);return this.tween(r,(s.local?cFe:AFe)(s,n))}function dFe(e,n){return function(){cC(this,e).delay=+n.apply(this,arguments)}}function hFe(e,n){return n=+n,function(){cC(this,e).delay=n}}function fFe(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?dFe:hFe)(n,e)):ga(this.node(),n).delay}function gFe(e,n){return function(){Oa(this,e).duration=+n.apply(this,arguments)}}function mFe(e,n){return n=+n,function(){Oa(this,e).duration=n}}function pFe(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?gFe:mFe)(n,e)):ga(this.node(),n).duration}function yFe(e,n){if(typeof n!="function")throw new Error;return function(){Oa(this,e).ease=n}}function vFe(e){var n=this._id;return arguments.length?this.each(yFe(n,e)):ga(this.node(),n).ease}function xFe(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;Oa(this,e).ease=r}}function wFe(e){if(typeof e!="function")throw new Error;return this.each(xFe(this._id,e))}function bFe(e){typeof e!="function"&&(e=xM(e));for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a)for(var i=n[a],o=i.length,c=s[a]=[],A,u=0;u<o;++u)(A=i[u])&&e.call(A,A.__data__,u,i)&&c.push(A);return new ki(s,this._parents,this._name,this._id)}function _Fe(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,s=n.length,a=r.length,i=Math.min(s,a),o=new Array(s),c=0;c<i;++c)for(var A=n[c],u=r[c],h=A.length,d=o[c]=new Array(h),f,g=0;g<h;++g)(f=A[g]||u[g])&&(d[g]=f);for(;c<s;++c)o[c]=n[c];return new ki(o,this._parents,this._name,this._id)}function CFe(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function BFe(e,n,r){var s,a,i=CFe(n)?cC:Oa;return function(){var o=i(this,e),c=o.on;c!==s&&(a=(s=c).copy()).on(n,r),o.on=a}}function SFe(e,n){var r=this._id;return arguments.length<2?ga(this.node(),r).on.on(e):this.each(BFe(r,e,n))}function kFe(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function jFe(){return this.on("end.remove",kFe(this._id))}function NFe(e){var n=this._name,r=this._id;typeof e!="function"&&(e=oC(e));for(var s=this._groups,a=s.length,i=new Array(a),o=0;o<a;++o)for(var c=s[o],A=c.length,u=i[o]=new Array(A),h,d,f=0;f<A;++f)(h=c[f])&&(d=e.call(h,h.__data__,f,c))&&("__data__"in h&&(d.__data__=h.__data__),u[f]=d,Qp(u[f],n,r,f,u,ga(h,r)));return new ki(i,this._parents,n,r)}function EFe(e){var n=this._name,r=this._id;typeof e!="function"&&(e=vM(e));for(var s=this._groups,a=s.length,i=[],o=[],c=0;c<a;++c)for(var A=s[c],u=A.length,h,d=0;d<u;++d)if(h=A[d]){for(var f=e.call(h,h.__data__,d,A),g,m=ga(h,r),y=0,v=f.length;y<v;++y)(g=f[y])&&Qp(g,n,r,y,f,m);i.push(f),o.push(h)}return new ki(i,o,n,r)}var TFe=Uh.prototype.constructor;function FFe(){return new TFe(this._groups,this._parents)}function IFe(e,n){var r,s,a;return function(){var i=xA(this,e),o=(this.style.removeProperty(e),xA(this,e));return i===o?null:i===r&&o===s?a:a=n(r=i,s=o)}}function UM(e){return function(){this.style.removeProperty(e)}}function UFe(e,n,r){var s,a=r+"",i;return function(){var o=xA(this,e);return o===a?null:o===s?i:i=n(s=o,r)}}function PFe(e,n,r){var s,a,i;return function(){var o=xA(this,e),c=r(this),A=c+"";return c==null&&(A=c=(this.style.removeProperty(e),xA(this,e))),o===A?null:o===s&&A===a?i:(a=A,i=n(s=o,c))}}function MFe(e,n){var r,s,a,i="style."+n,o="end."+i,c;return function(){var A=Oa(this,e),u=A.on,h=A.value[i]==null?c||(c=UM(n)):void 0;(u!==r||a!==h)&&(s=(r=u).copy()).on(o,a=h),A.on=s}}function QFe(e,n,r){var s=(e+="")=="transform"?Gbe:IM;return n==null?this.styleTween(e,IFe(e,s)).on("end.style."+e,UM(e)):typeof n=="function"?this.styleTween(e,PFe(e,s,AC(this,"style."+e,n))).each(MFe(this._id,e)):this.styleTween(e,UFe(e,s,n),r).on("end.style."+e,null)}function DFe(e,n,r){return function(s){this.style.setProperty(e,n.call(this,s),r)}}function RFe(e,n,r){var s,a;function i(){var o=n.apply(this,arguments);return o!==a&&(s=(a=o)&&DFe(e,o,r)),s}return i._value=n,i}function $Fe(e,n,r){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(n==null)return this.tween(s,null);if(typeof n!="function")throw new Error;return this.tween(s,RFe(e,n,r??""))}function OFe(e){return function(){this.textContent=e}}function LFe(e){return function(){var n=e(this);this.textContent=n??""}}function HFe(e){return this.tween("text",typeof e=="function"?LFe(AC(this,"text",e)):OFe(e==null?"":e+""))}function zFe(e){return function(n){this.textContent=e.call(this,n)}}function KFe(e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&zFe(a)),n}return s._value=e,s}function GFe(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,KFe(e))}function WFe(){for(var e=this._name,n=this._id,r=PM(),s=this._groups,a=s.length,i=0;i<a;++i)for(var o=s[i],c=o.length,A,u=0;u<c;++u)if(A=o[u]){var h=ga(A,n);Qp(A,e,r,u,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ki(s,this._parents,e,r)}function VFe(){var e,n,r=this,s=r._id,a=r.size();return new Promise(function(i,o){var c={value:o},A={value:function(){--a===0&&i()}};r.each(function(){var u=Oa(this,s),h=u.on;h!==e&&(n=(e=h).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(A)),u.on=n}),a===0&&i()})}var qFe=0;function ki(e,n,r,s){this._groups=e,this._parents=n,this._name=r,this._id=s}function PM(){return++qFe}var Ka=Uh.prototype;ki.prototype={constructor:ki,select:NFe,selectAll:EFe,selectChild:Ka.selectChild,selectChildren:Ka.selectChildren,filter:bFe,merge:_Fe,selection:FFe,transition:WFe,call:Ka.call,nodes:Ka.nodes,node:Ka.node,size:Ka.size,empty:Ka.empty,each:Ka.each,on:SFe,attr:iFe,attrTween:uFe,style:QFe,styleTween:$Fe,text:HFe,textTween:GFe,remove:jFe,tween:ZTe,delay:fFe,duration:pFe,ease:vFe,easeVarying:wFe,end:VFe,[Symbol.iterator]:Ka[Symbol.iterator]};var XFe={time:null,delay:0,duration:250,ease:g1};function YFe(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function JFe(e){var n,r;e instanceof ki?(n=e._id,e=e._name):(n=PM(),(r=XFe).time=Hd(),e=e==null?null:e+"");for(var s=this._groups,a=s.length,i=0;i<a;++i)for(var o=s[i],c=o.length,A,u=0;u<c;++u)(A=o[u])&&Qp(A,e,n,u,o,r||YFe(A,n));return new ki(s,this._parents,e,n)}Uh.prototype.interrupt=XTe;Uh.prototype.transition=JFe;const Cf=e=>()=>e;function ZFe(e,{sourceEvent:n,target:r,transform:s,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:a}})}function hi(e,n,r){this.k=e,this.x=n,this.y=r}hi.prototype={constructor:hi,scale:function(e){return e===1?this:new hi(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new hi(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var uC=new hi(1,0,0);Ca.prototype=hi.prototype;function Ca(e){for(;!e.__zoom;)if(!(e=e.parentNode))return uC;return e.__zoom}function wv(e){e.stopImmediatePropagation()}function lu(e){e.preventDefault(),e.stopImmediatePropagation()}function eIe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function tIe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Wj(){return this.__zoom||uC}function nIe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rIe(){return navigator.maxTouchPoints||"ontouchstart"in this}function sIe(e,n,r){var s=e.invertX(n[0][0])-r[0][0],a=e.invertX(n[1][0])-r[1][0],i=e.invertY(n[0][1])-r[0][1],o=e.invertY(n[1][1])-r[1][1];return e.translate(a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function aIe(){var e=eIe,n=tIe,r=sIe,s=nIe,a=rIe,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,A=Ybe,u=Ph("start","zoom","end"),h,d,f,g=500,m=150,y=0,v=10;function p(T){T.property("__zoom",Wj).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",j).filter(a).on("touchstart.zoom",E).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(T,L,P,O){var Q=T.selection?T.selection():T;Q.property("__zoom",Wj),T!==Q?_(T,L,P,O):Q.interrupt().each(function(){B(this,arguments).event(O).start().zoom(null,typeof L=="function"?L.apply(this,arguments):L).end()})},p.scaleBy=function(T,L,P,O){p.scaleTo(T,function(){var Q=this.__zoom.k,R=typeof L=="function"?L.apply(this,arguments):L;return Q*R},P,O)},p.scaleTo=function(T,L,P,O){p.transform(T,function(){var Q=n.apply(this,arguments),R=this.__zoom,M=P==null?w(Q):typeof P=="function"?P.apply(this,arguments):P,G=R.invert(M),V=typeof L=="function"?L.apply(this,arguments):L;return r(b(x(R,V),M,G),Q,o)},P,O)},p.translateBy=function(T,L,P,O){p.transform(T,function(){return r(this.__zoom.translate(typeof L=="function"?L.apply(this,arguments):L,typeof P=="function"?P.apply(this,arguments):P),n.apply(this,arguments),o)},null,O)},p.translateTo=function(T,L,P,O,Q){p.transform(T,function(){var R=n.apply(this,arguments),M=this.__zoom,G=O==null?w(R):typeof O=="function"?O.apply(this,arguments):O;return r(uC.translate(G[0],G[1]).scale(M.k).translate(typeof L=="function"?-L.apply(this,arguments):-L,typeof P=="function"?-P.apply(this,arguments):-P),R,o)},O,Q)};function x(T,L){return L=Math.max(i[0],Math.min(i[1],L)),L===T.k?T:new hi(L,T.x,T.y)}function b(T,L,P){var O=L[0]-P[0]*T.k,Q=L[1]-P[1]*T.k;return O===T.x&&Q===T.y?T:new hi(T.k,O,Q)}function w(T){return[(+T[0][0]+ +T[1][0])/2,(+T[0][1]+ +T[1][1])/2]}function _(T,L,P,O){T.on("start.zoom",function(){B(this,arguments).event(O).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(O).end()}).tween("zoom",function(){var Q=this,R=arguments,M=B(Q,R).event(O),G=n.apply(Q,R),V=P==null?w(G):typeof P=="function"?P.apply(Q,R):P,K=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),se=Q.__zoom,de=typeof L=="function"?L.apply(Q,R):L,ye=A(se.invert(V).concat(K/se.k),de.invert(V).concat(K/de.k));return function(W){if(W===1)W=de;else{var U=ye(W),$=K/U[2];W=new hi($,V[0]-U[0]*$,V[1]-U[1]*$)}M.zoom(null,W)}})}function B(T,L,P){return!P&&T.__zooming||new k(T,L)}function k(T,L){this.that=T,this.args=L,this.active=0,this.sourceEvent=null,this.extent=n.apply(T,L),this.taps=0}k.prototype={event:function(T){return T&&(this.sourceEvent=T),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(T,L){return this.mouse&&T!=="mouse"&&(this.mouse[1]=L.invert(this.mouse[0])),this.touch0&&T!=="touch"&&(this.touch0[1]=L.invert(this.touch0[0])),this.touch1&&T!=="touch"&&(this.touch1[1]=L.invert(this.touch1[0])),this.that.__zoom=L,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(T){var L=Cs(this.that).datum();u.call(T,this.that,new ZFe(T,{sourceEvent:this.sourceEvent,target:p,type:T,transform:this.that.__zoom,dispatch:u}),L)}};function N(T,...L){if(!e.apply(this,arguments))return;var P=B(this,L).event(T),O=this.__zoom,Q=Math.max(i[0],Math.min(i[1],O.k*Math.pow(2,s.apply(this,arguments)))),R=Ba(T);if(P.wheel)(P.mouse[0][0]!==R[0]||P.mouse[0][1]!==R[1])&&(P.mouse[1]=O.invert(P.mouse[0]=R)),clearTimeout(P.wheel);else{if(O.k===Q)return;P.mouse=[R,O.invert(R)],x0(this),P.start()}lu(T),P.wheel=setTimeout(M,m),P.zoom("mouse",r(b(x(O,Q),P.mouse[0],P.mouse[1]),P.extent,o));function M(){P.wheel=null,P.end()}}function C(T,...L){if(f||!e.apply(this,arguments))return;var P=T.currentTarget,O=B(this,L,!0).event(T),Q=Cs(T.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",K,!0),R=Ba(T,P),M=T.clientX,G=T.clientY;EM(T.view),wv(T),O.mouse=[R,this.__zoom.invert(R)],x0(this),O.start();function V(se){if(lu(se),!O.moved){var de=se.clientX-M,ye=se.clientY-G;O.moved=de*de+ye*ye>y}O.event(se).zoom("mouse",r(b(O.that.__zoom,O.mouse[0]=Ba(se,P),O.mouse[1]),O.extent,o))}function K(se){Q.on("mousemove.zoom mouseup.zoom",null),TM(se.view,O.moved),lu(se),O.event(se).end()}}function j(T,...L){if(e.apply(this,arguments)){var P=this.__zoom,O=Ba(T.changedTouches?T.changedTouches[0]:T,this),Q=P.invert(O),R=P.k*(T.shiftKey?.5:2),M=r(b(x(P,R),O,Q),n.apply(this,L),o);lu(T),c>0?Cs(this).transition().duration(c).call(_,M,O,T):Cs(this).call(p.transform,M,O,T)}}function E(T,...L){if(e.apply(this,arguments)){var P=T.touches,O=P.length,Q=B(this,L,T.changedTouches.length===O).event(T),R,M,G,V;for(wv(T),M=0;M<O;++M)G=P[M],V=Ba(G,this),V=[V,this.__zoom.invert(V),G.identifier],Q.touch0?!Q.touch1&&Q.touch0[2]!==V[2]&&(Q.touch1=V,Q.taps=0):(Q.touch0=V,R=!0,Q.taps=1+!!h);h&&(h=clearTimeout(h)),R&&(Q.taps<2&&(d=V[0],h=setTimeout(function(){h=null},g)),x0(this),Q.start())}}function F(T,...L){if(this.__zooming){var P=B(this,L).event(T),O=T.changedTouches,Q=O.length,R,M,G,V;for(lu(T),R=0;R<Q;++R)M=O[R],G=Ba(M,this),P.touch0&&P.touch0[2]===M.identifier?P.touch0[0]=G:P.touch1&&P.touch1[2]===M.identifier&&(P.touch1[0]=G);if(M=P.that.__zoom,P.touch1){var K=P.touch0[0],se=P.touch0[1],de=P.touch1[0],ye=P.touch1[1],W=(W=de[0]-K[0])*W+(W=de[1]-K[1])*W,U=(U=ye[0]-se[0])*U+(U=ye[1]-se[1])*U;M=x(M,Math.sqrt(W/U)),G=[(K[0]+de[0])/2,(K[1]+de[1])/2],V=[(se[0]+ye[0])/2,(se[1]+ye[1])/2]}else if(P.touch0)G=P.touch0[0],V=P.touch0[1];else return;P.zoom("touch",r(b(M,G,V),P.extent,o))}}function I(T,...L){if(this.__zooming){var P=B(this,L).event(T),O=T.changedTouches,Q=O.length,R,M;for(wv(T),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),R=0;R<Q;++R)M=O[R],P.touch0&&P.touch0[2]===M.identifier?delete P.touch0:P.touch1&&P.touch1[2]===M.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(M=Ba(M,this),Math.hypot(d[0]-M[0],d[1]-M[1])<v)){var G=Cs(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return p.wheelDelta=function(T){return arguments.length?(s=typeof T=="function"?T:Cf(+T),p):s},p.filter=function(T){return arguments.length?(e=typeof T=="function"?T:Cf(!!T),p):e},p.touchable=function(T){return arguments.length?(a=typeof T=="function"?T:Cf(!!T),p):a},p.extent=function(T){return arguments.length?(n=typeof T=="function"?T:Cf([[+T[0][0],+T[0][1]],[+T[1][0],+T[1][1]]]),p):n},p.scaleExtent=function(T){return arguments.length?(i[0]=+T[0],i[1]=+T[1],p):[i[0],i[1]]},p.translateExtent=function(T){return arguments.length?(o[0][0]=+T[0][0],o[1][0]=+T[1][0],o[0][1]=+T[0][1],o[1][1]=+T[1][1],p):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},p.constrain=function(T){return arguments.length?(r=T,p):r},p.duration=function(T){return arguments.length?(c=+T,p):c},p.interpolate=function(T){return arguments.length?(A=T,p):A},p.on=function(){var T=u.on.apply(u,arguments);return T===u?p:T},p.clickDistance=function(T){return arguments.length?(y=(T=+T)*T,p):Math.sqrt(y)},p.tapDistance=function(T){return arguments.length?(v=+T,p):v},p}var iIe=typeof global=="object"&&global&&global.Object===Object&&global;const oIe=iIe;var lIe=typeof self=="object"&&self&&self.Object===Object&&self,cIe=oIe||lIe||Function("return this")();const MM=cIe;var AIe=MM.Symbol;const qg=AIe;var QM=Object.prototype,uIe=QM.hasOwnProperty,dIe=QM.toString,cu=qg?qg.toStringTag:void 0;function hIe(e){var n=uIe.call(e,cu),r=e[cu];try{e[cu]=void 0;var s=!0}catch{}var a=dIe.call(e);return s&&(n?e[cu]=r:delete e[cu]),a}var fIe=Object.prototype,gIe=fIe.toString;function mIe(e){return gIe.call(e)}var pIe="[object Null]",yIe="[object Undefined]",Vj=qg?qg.toStringTag:void 0;function vIe(e){return e==null?e===void 0?yIe:pIe:Vj&&Vj in Object(e)?hIe(e):mIe(e)}function xIe(e){return e!=null&&typeof e=="object"}var wIe="[object Symbol]";function bIe(e){return typeof e=="symbol"||xIe(e)&&vIe(e)==wIe}var _Ie=/\s/;function CIe(e){for(var n=e.length;n--&&_Ie.test(e.charAt(n)););return n}var BIe=/^\s+/;function SIe(e){return e&&e.slice(0,CIe(e)+1).replace(BIe,"")}function Xg(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var qj=0/0,kIe=/^[-+]0x[0-9a-f]+$/i,jIe=/^0b[01]+$/i,NIe=/^0o[0-7]+$/i,EIe=parseInt;function Xj(e){if(typeof e=="number")return e;if(bIe(e))return qj;if(Xg(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Xg(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=SIe(e);var r=jIe.test(e);return r||NIe.test(e)?EIe(e.slice(2),r?2:8):kIe.test(e)?qj:+e}var TIe=function(){return MM.Date.now()};const bv=TIe;var FIe="Expected a function",IIe=Math.max,UIe=Math.min;function DM(e,n,r){var s,a,i,o,c,A,u=0,h=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(FIe);n=Xj(n)||0,Xg(r)&&(h=!!r.leading,d="maxWait"in r,i=d?IIe(Xj(r.maxWait)||0,n):i,f="trailing"in r?!!r.trailing:f);function g(B){var k=s,N=a;return s=a=void 0,u=B,o=e.apply(N,k),o}function m(B){return u=B,c=setTimeout(p,n),h?g(B):o}function y(B){var k=B-A,N=B-u,C=n-k;return d?UIe(C,i-N):C}function v(B){var k=B-A,N=B-u;return A===void 0||k>=n||k<0||d&&N>=i}function p(){var B=bv();if(v(B))return x(B);c=setTimeout(p,y(B))}function x(B){return c=void 0,f&&s?g(B):(s=a=void 0,o)}function b(){c!==void 0&&clearTimeout(c),u=0,s=A=a=c=void 0}function w(){return c===void 0?o:x(bv())}function _(){var B=bv(),k=v(B);if(s=arguments,a=this,A=B,k){if(c===void 0)return m(A);if(d)return clearTimeout(c),c=setTimeout(p,n),g(A)}return c===void 0&&(c=setTimeout(p,n)),o}return _.cancel=b,_.flush=w,_}var PIe="Expected a function";function MIe(e,n,r){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(PIe);return Xg(r)&&(s="leading"in r?!!r.leading:s,a="trailing"in r?!!r.trailing:a),DM(e,n,{leading:s,maxWait:n,trailing:a})}var ul=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var n=1.70158;return e===1?1:e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return e===0?0:--e*e*((n+1)*e+n)+1},InOut:function(e){var n=2.5949095;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}}),Bounce:Object.freeze({In:function(e){return 1-ul.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?ul.Bounce.In(e*2)*.5:ul.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(n*2,e)/2:(1-Math.pow(2-n*2,e))/2+.5}}}}),Fu=function(){return performance.now()},RM=function(){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,n)}return e.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(r){return n._tweens[r]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var n,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];for(var a=0,i=r;a<i.length;a++){var o=i[a];(n=o._group)===null||n===void 0||n.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},e.prototype.remove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var s=0,a=n;s<a.length;s++){var i=a[s];i._group=void 0,delete this._tweens[i.getId()],delete this._tweensAddedDuringUpdate[i.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(n){return!n.isPlaying()})},e.prototype.update=function(n,r){n===void 0&&(n=Fu()),r===void 0&&(r=!0);var s=Object.keys(this._tweens);if(s.length!==0)for(;s.length>0;){this._tweensAddedDuringUpdate={};for(var a=0;a<s.length;a++){var i=this._tweens[s[a]],o=!r;i&&i.update(n,o)===!1&&!r&&this.remove(i)}s=Object.keys(this._tweensAddedDuringUpdate)}},e}(),Pc={Linear:function(e,n){var r=e.length-1,s=r*n,a=Math.floor(s),i=Pc.Utils.Linear;return n<0?i(e[0],e[1],s):n>1?i(e[r],e[r-1],r-s):i(e[a],e[a+1>r?r:a+1],s-a)},Bezier:function(e,n){for(var r=0,s=e.length-1,a=Math.pow,i=Pc.Utils.Bernstein,o=0;o<=s;o++)r+=a(1-n,s-o)*a(n,o)*e[o]*i(s,o);return r},CatmullRom:function(e,n){var r=e.length-1,s=r*n,a=Math.floor(s),i=Pc.Utils.CatmullRom;return e[0]===e[r]?(n<0&&(a=Math.floor(s=r*(1+n))),i(e[(a-1+r)%r],e[a],e[(a+1)%r],e[(a+2)%r],s-a)):n<0?e[0]-(i(e[0],e[0],e[1],e[1],-s)-e[0]):n>1?e[r]-(i(e[r],e[r],e[r-1],e[r-1],s-r)-e[r]):i(e[a?a-1:0],e[a],e[r<a+1?r:a+1],e[r<a+2?r:a+2],s-a)},Utils:{Linear:function(e,n,r){return(n-e)*r+e},Bernstein:function(e,n){var r=Pc.Utils.Factorial;return r(e)/r(n)/r(e-n)},Factorial:function(){var e=[1];return function(n){var r=1;if(e[n])return e[n];for(var s=n;s>1;s--)r*=s;return e[n]=r,r}}(),CatmullRom:function(e,n,r,s,a){var i=(r-e)*.5,o=(s-n)*.5,c=a*a,A=a*c;return(2*n-2*r+i+o)*A+(-3*n+3*r-2*i-o)*c+i*a+n}}},QIe=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),hw=new RM,Yj=function(){function e(n,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ul.Linear.None,this._interpolationFunction=Pc.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=QIe.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=n,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=hw,hw.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(n,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=n,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},e.prototype.duration=function(n){return n===void 0&&(n=1e3),this._duration=n<0?0:n,this},e.prototype.dynamic=function(n){return n===void 0&&(n=!1),this._isDynamic=n,this},e.prototype.start=function(n,r){if(n===void 0&&(n=Fu()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var s in this._valuesStartRepeat)this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var a={};for(var i in this._valuesEnd)a[i]=this._valuesEnd[i];this._valuesEnd=a}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},e.prototype.startFromCurrentValues=function(n){return this.start(n,!0)},e.prototype._setupProperties=function(n,r,s,a,i){for(var o in s){var c=n[o],A=Array.isArray(c),u=A?"array":typeof c,h=!A&&Array.isArray(s[o]);if(!(u==="undefined"||u==="function")){if(h){var d=s[o];if(d.length===0)continue;for(var f=[c],g=0,m=d.length;g<m;g+=1){var y=this._handleRelativeValue(c,d[g]);if(isNaN(y)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(y)}h&&(s[o]=f)}if((u==="object"||A)&&c&&!h){r[o]=A?[]:{};var v=c;for(var p in v)r[o][p]=v[p];a[o]=A?[]:{};var d=s[o];if(!this._isDynamic){var x={};for(var p in d)x[p]=d[p];s[o]=d=x}this._setupProperties(v,r[o],d,a[o],i)}else(typeof r[o]>"u"||i)&&(r[o]=c),A||(r[o]*=1),h?a[o]=s[o].slice().reverse():a[o]=r[o]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(n){return n===void 0&&(n=Fu()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this)},e.prototype.resume=function(n){return n===void 0&&(n=Fu()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var n=0,r=this._chainedTweens.length;n<r;n++)this._chainedTweens[n].stop();return this},e.prototype.group=function(n){return n?(n.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var n;return(n=this._group)===null||n===void 0||n.remove(this),this},e.prototype.delay=function(n){return n===void 0&&(n=0),this._delayTime=n,this},e.prototype.repeat=function(n){return n===void 0&&(n=0),this._initialRepeat=n,this._repeat=n,this},e.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},e.prototype.yoyo=function(n){return n===void 0&&(n=!1),this._yoyo=n,this},e.prototype.easing=function(n){return n===void 0&&(n=ul.Linear.None),this._easingFunction=n,this},e.prototype.interpolation=function(n){return n===void 0&&(n=Pc.Linear),this._interpolationFunction=n,this},e.prototype.chain=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this._chainedTweens=n,this},e.prototype.onStart=function(n){return this._onStartCallback=n,this},e.prototype.onEveryStart=function(n){return this._onEveryStartCallback=n,this},e.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},e.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},e.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},e.prototype.onStop=function(n){return this._onStopCallback=n,this},e.prototype.update=function(n,r){var s=this,a;if(n===void 0&&(n=Fu()),r===void 0&&(r=e.autoStartOnUpdate),this._isPaused)return!0;var i;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(n,!0);else return!1;if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=n-this._startTime,c=this._duration+((a=this._repeatDelayTime)!==null&&a!==void 0?a:this._delayTime),A=this._duration+this._repeat*c,u=function(){if(s._duration===0||o>A)return 1;var y=Math.trunc(o/c),v=o-y*c,p=Math.min(v/s._duration,1);return p===0&&o===s._duration?1:p},h=u(),d=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||o>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((o-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(i in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[i]=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var g=0,m=this._chainedTweens.length;g<m;g++)this._chainedTweens[g].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(n,r,s,a){for(var i in s)if(r[i]!==void 0){var o=r[i]||0,c=s[i],A=Array.isArray(n[i]),u=Array.isArray(c),h=!A&&u;h?n[i]=this._interpolationFunction(c,a):typeof c=="object"&&c?this._updateProperties(n[i],o,c,a):(c=this._handleRelativeValue(o,c),typeof c=="number"&&(n[i]=o+(c-o)*a))}},e.prototype._handleRelativeValue=function(n,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?n+parseFloat(r):parseFloat(r)},e.prototype._swapEndStartRepeatValues=function(n){var r=this._valuesStartRepeat[n],s=this._valuesEnd[n];typeof s=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(s):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=r},e.autoStartOnUpdate=!1,e}(),Qa=hw;Qa.getAll.bind(Qa);Qa.removeAll.bind(Qa);Qa.add.bind(Qa);Qa.remove.bind(Qa);Qa.update.bind(Qa);function Jj(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function DIe(e){if(Array.isArray(e))return e}function RIe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function $Ie(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function OIe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function LIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HIe(e,n){return DIe(e)||OIe(e,n)||zIe(e,n)||LIe()}function zIe(e,n){if(e){if(typeof e=="string")return Jj(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jj(e,n):void 0}}var KIe=$Ie(function e(n,r){var s=r.default,a=s===void 0?null:s,i=r.triggerUpdate,o=i===void 0?!0:i,c=r.onChange,A=c===void 0?function(u,h){}:c;RIe(this,e),this.name=n,this.defaultVal=a,this.triggerUpdate=o,this.onChange=A});function dC(e){var n=e.stateInit,r=n===void 0?function(){return{}}:n,s=e.props,a=s===void 0?{}:s,i=e.methods,o=i===void 0?{}:i,c=e.aliases,A=c===void 0?{}:c,u=e.init,h=u===void 0?function(){}:u,d=e.update,f=d===void 0?function(){}:d,g=Object.keys(a).map(function(m){return new KIe(m,a[m])});return function m(){for(var y=arguments.length,v=new Array(y),p=0;p<y;p++)v[p]=arguments[p];var x=!!(this instanceof m&&this.constructor),b=x?v.shift():void 0,w=v[0],_=w===void 0?{}:w,B=Object.assign({},r instanceof Function?r(_):r,{initialised:!1}),k={};function N(E){return C(E,_),j(),N}var C=function(F,I){h.call(N,F,B,I),B.initialised=!0},j=DM(function(){B.initialised&&(f.call(N,B,k),k={})},1);return g.forEach(function(E){N[E.name]=F(E);function F(I){var T=I.name,L=I.triggerUpdate,P=L===void 0?!1:L,O=I.onChange,Q=O===void 0?function(G,V){}:O,R=I.defaultVal,M=R===void 0?null:R;return function(G){var V=B[T];if(!arguments.length)return V;var K=G===void 0?M:G;return B[T]=K,Q.call(N,K,B,V),!k.hasOwnProperty(T)&&(k[T]=V),P&&j(),N}}}),Object.keys(o).forEach(function(E){N[E]=function(){for(var F,I=arguments.length,T=new Array(I),L=0;L<I;L++)T[L]=arguments[L];return(F=o[E]).call.apply(F,[N,B].concat(T))}}),Object.entries(A).forEach(function(E){var F=HIe(E,2),I=F[0],T=F[1];return N[I]=N[T]}),N.resetProps=function(){return g.forEach(function(E){N[E.name](E.defaultVal)}),N},N.resetProps(),B._rerender=j,x&&b&&N(b),N}}var jt=function(e){return typeof e=="function"?e:typeof e=="string"?function(n){return n[e]}:function(n){return e}};function Yg(e){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Yg(e)}var GIe=/^\s+/,WIe=/\s+$/;function Ye(e,n){if(e=e||"",n=n||{},e instanceof Ye)return e;if(!(this instanceof Ye))return new Ye(e,n);var r=VIe(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Ye.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),r,s,a,i,o,c;return r=n.r/255,s=n.g/255,a=n.b/255,r<=.03928?i=r/12.92:i=Math.pow((r+.055)/1.055,2.4),s<=.03928?o=s/12.92:o=Math.pow((s+.055)/1.055,2.4),a<=.03928?c=a/12.92:c=Math.pow((a+.055)/1.055,2.4),.2126*i+.7152*o+.0722*c},setAlpha:function(n){return this._a=$M(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=eN(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=eN(this._r,this._g,this._b),r=Math.round(n.h*360),s=Math.round(n.s*100),a=Math.round(n.v*100);return this._a==1?"hsv("+r+", "+s+"%, "+a+"%)":"hsva("+r+", "+s+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var n=Zj(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=Zj(this._r,this._g,this._b),r=Math.round(n.h*360),s=Math.round(n.s*100),a=Math.round(n.l*100);return this._a==1?"hsl("+r+", "+s+"%, "+a+"%)":"hsla("+r+", "+s+"%, "+a+"%, "+this._roundA+")"},toHex:function(n){return tN(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return JIe(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Vt(this._r,255)*100)+"%",g:Math.round(Vt(this._g,255)*100)+"%",b:Math.round(Vt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Vt(this._r,255)*100)+"%, "+Math.round(Vt(this._g,255)*100)+"%, "+Math.round(Vt(this._b,255)*100)+"%)":"rgba("+Math.round(Vt(this._r,255)*100)+"%, "+Math.round(Vt(this._g,255)*100)+"%, "+Math.round(Vt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:AUe[tN(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var r="#"+nN(this._r,this._g,this._b,this._a),s=r,a=this._gradientType?"GradientType = 1, ":"";if(n){var i=Ye(n);s="#"+nN(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+r+",endColorstr="+s+")"},toString:function(n){var r=!!n;n=n||this._format;var s=!1,a=this._a<1&&this._a>=0,i=!r&&a&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return i?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(s=this.toRgbString()),n==="prgb"&&(s=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(s=this.toHexString()),n==="hex3"&&(s=this.toHexString(!0)),n==="hex4"&&(s=this.toHex8String(!0)),n==="hex8"&&(s=this.toHex8String()),n==="name"&&(s=this.toName()),n==="hsl"&&(s=this.toHslString()),n==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},clone:function(){return Ye(this.toString())},_applyModification:function(n,r){var s=n.apply(null,[this].concat([].slice.call(r)));return this._r=s._r,this._g=s._g,this._b=s._b,this.setAlpha(s._a),this},lighten:function(){return this._applyModification(nUe,arguments)},brighten:function(){return this._applyModification(rUe,arguments)},darken:function(){return this._applyModification(sUe,arguments)},desaturate:function(){return this._applyModification(ZIe,arguments)},saturate:function(){return this._applyModification(eUe,arguments)},greyscale:function(){return this._applyModification(tUe,arguments)},spin:function(){return this._applyModification(aUe,arguments)},_applyCombination:function(n,r){return n.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(lUe,arguments)},complement:function(){return this._applyCombination(iUe,arguments)},monochromatic:function(){return this._applyCombination(cUe,arguments)},splitcomplement:function(){return this._applyCombination(oUe,arguments)},triad:function(){return this._applyCombination(rN,[3])},tetrad:function(){return this._applyCombination(rN,[4])}};Ye.fromRatio=function(e,n){if(Yg(e)=="object"){var r={};for(var s in e)e.hasOwnProperty(s)&&(s==="a"?r[s]=e[s]:r[s]=Iu(e[s]));e=r}return Ye(e,n)};function VIe(e){var n={r:0,g:0,b:0},r=1,s=null,a=null,i=null,o=!1,c=!1;return typeof e=="string"&&(e=fUe(e)),Yg(e)=="object"&&(Ga(e.r)&&Ga(e.g)&&Ga(e.b)?(n=qIe(e.r,e.g,e.b),o=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Ga(e.h)&&Ga(e.s)&&Ga(e.v)?(s=Iu(e.s),a=Iu(e.v),n=YIe(e.h,s,a),o=!0,c="hsv"):Ga(e.h)&&Ga(e.s)&&Ga(e.l)&&(s=Iu(e.s),i=Iu(e.l),n=XIe(e.h,s,i),o=!0,c="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=$M(r),{ok:o,format:e.format||c,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function qIe(e,n,r){return{r:Vt(e,255)*255,g:Vt(n,255)*255,b:Vt(r,255)*255}}function Zj(e,n,r){e=Vt(e,255),n=Vt(n,255),r=Vt(r,255);var s=Math.max(e,n,r),a=Math.min(e,n,r),i,o,c=(s+a)/2;if(s==a)i=o=0;else{var A=s-a;switch(o=c>.5?A/(2-s-a):A/(s+a),s){case e:i=(n-r)/A+(n<r?6:0);break;case n:i=(r-e)/A+2;break;case r:i=(e-n)/A+4;break}i/=6}return{h:i,s:o,l:c}}function XIe(e,n,r){var s,a,i;e=Vt(e,360),n=Vt(n,100),r=Vt(r,100);function o(u,h,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?u+(h-u)*6*d:d<1/2?h:d<2/3?u+(h-u)*(2/3-d)*6:u}if(n===0)s=a=i=r;else{var c=r<.5?r*(1+n):r+n-r*n,A=2*r-c;s=o(A,c,e+1/3),a=o(A,c,e),i=o(A,c,e-1/3)}return{r:s*255,g:a*255,b:i*255}}function eN(e,n,r){e=Vt(e,255),n=Vt(n,255),r=Vt(r,255);var s=Math.max(e,n,r),a=Math.min(e,n,r),i,o,c=s,A=s-a;if(o=s===0?0:A/s,s==a)i=0;else{switch(s){case e:i=(n-r)/A+(n<r?6:0);break;case n:i=(r-e)/A+2;break;case r:i=(e-n)/A+4;break}i/=6}return{h:i,s:o,v:c}}function YIe(e,n,r){e=Vt(e,360)*6,n=Vt(n,100),r=Vt(r,100);var s=Math.floor(e),a=e-s,i=r*(1-n),o=r*(1-a*n),c=r*(1-(1-a)*n),A=s%6,u=[r,o,i,i,c,r][A],h=[c,r,r,o,i,i][A],d=[i,i,c,r,r,o][A];return{r:u*255,g:h*255,b:d*255}}function tN(e,n,r,s){var a=[aa(Math.round(e).toString(16)),aa(Math.round(n).toString(16)),aa(Math.round(r).toString(16))];return s&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function JIe(e,n,r,s,a){var i=[aa(Math.round(e).toString(16)),aa(Math.round(n).toString(16)),aa(Math.round(r).toString(16)),aa(OM(s))];return a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function nN(e,n,r,s){var a=[aa(OM(s)),aa(Math.round(e).toString(16)),aa(Math.round(n).toString(16)),aa(Math.round(r).toString(16))];return a.join("")}Ye.equals=function(e,n){return!e||!n?!1:Ye(e).toRgbString()==Ye(n).toRgbString()};Ye.random=function(){return Ye.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function ZIe(e,n){n=n===0?0:n||10;var r=Ye(e).toHsl();return r.s-=n/100,r.s=Dp(r.s),Ye(r)}function eUe(e,n){n=n===0?0:n||10;var r=Ye(e).toHsl();return r.s+=n/100,r.s=Dp(r.s),Ye(r)}function tUe(e){return Ye(e).desaturate(100)}function nUe(e,n){n=n===0?0:n||10;var r=Ye(e).toHsl();return r.l+=n/100,r.l=Dp(r.l),Ye(r)}function rUe(e,n){n=n===0?0:n||10;var r=Ye(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),Ye(r)}function sUe(e,n){n=n===0?0:n||10;var r=Ye(e).toHsl();return r.l-=n/100,r.l=Dp(r.l),Ye(r)}function aUe(e,n){var r=Ye(e).toHsl(),s=(r.h+n)%360;return r.h=s<0?360+s:s,Ye(r)}function iUe(e){var n=Ye(e).toHsl();return n.h=(n.h+180)%360,Ye(n)}function rN(e,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Ye(e).toHsl(),s=[Ye(e)],a=360/n,i=1;i<n;i++)s.push(Ye({h:(r.h+i*a)%360,s:r.s,l:r.l}));return s}function oUe(e){var n=Ye(e).toHsl(),r=n.h;return[Ye(e),Ye({h:(r+72)%360,s:n.s,l:n.l}),Ye({h:(r+216)%360,s:n.s,l:n.l})]}function lUe(e,n,r){n=n||6,r=r||30;var s=Ye(e).toHsl(),a=360/r,i=[Ye(e)];for(s.h=(s.h-(a*n>>1)+720)%360;--n;)s.h=(s.h+a)%360,i.push(Ye(s));return i}function cUe(e,n){n=n||6;for(var r=Ye(e).toHsv(),s=r.h,a=r.s,i=r.v,o=[],c=1/n;n--;)o.push(Ye({h:s,s:a,v:i})),i=(i+c)%1;return o}Ye.mix=function(e,n,r){r=r===0?0:r||50;var s=Ye(e).toRgb(),a=Ye(n).toRgb(),i=r/100,o={r:(a.r-s.r)*i+s.r,g:(a.g-s.g)*i+s.g,b:(a.b-s.b)*i+s.b,a:(a.a-s.a)*i+s.a};return Ye(o)};Ye.readability=function(e,n){var r=Ye(e),s=Ye(n);return(Math.max(r.getLuminance(),s.getLuminance())+.05)/(Math.min(r.getLuminance(),s.getLuminance())+.05)};Ye.isReadable=function(e,n,r){var s=Ye.readability(e,n),a,i;switch(i=!1,a=gUe(r),a.level+a.size){case"AAsmall":case"AAAlarge":i=s>=4.5;break;case"AAlarge":i=s>=3;break;case"AAAsmall":i=s>=7;break}return i};Ye.mostReadable=function(e,n,r){var s=null,a=0,i,o,c,A;r=r||{},o=r.includeFallbackColors,c=r.level,A=r.size;for(var u=0;u<n.length;u++)i=Ye.readability(e,n[u]),i>a&&(a=i,s=Ye(n[u]));return Ye.isReadable(e,s,{level:c,size:A})||!o?s:(r.includeFallbackColors=!1,Ye.mostReadable(e,["#fff","#000"],r))};var fw=Ye.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},AUe=Ye.hexNames=uUe(fw);function uUe(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}function $M(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Vt(e,n){dUe(e)&&(e="100%");var r=hUe(e);return e=Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function Dp(e){return Math.min(1,Math.max(0,e))}function qr(e){return parseInt(e,16)}function dUe(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function hUe(e){return typeof e=="string"&&e.indexOf("%")!=-1}function aa(e){return e.length==1?"0"+e:""+e}function Iu(e){return e<=1&&(e=e*100+"%"),e}function OM(e){return Math.round(parseFloat(e)*255).toString(16)}function sN(e){return qr(e)/255}var Gs=function(){var e="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",r="(?:"+n+")|(?:"+e+")",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+s),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+s),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+s),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ga(e){return!!Gs.CSS_UNIT.exec(e)}function fUe(e){e=e.replace(GIe,"").replace(WIe,"").toLowerCase();var n=!1;if(fw[e])e=fw[e],n=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Gs.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=Gs.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Gs.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=Gs.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Gs.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=Gs.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Gs.hex8.exec(e))?{r:qr(r[1]),g:qr(r[2]),b:qr(r[3]),a:sN(r[4]),format:n?"name":"hex8"}:(r=Gs.hex6.exec(e))?{r:qr(r[1]),g:qr(r[2]),b:qr(r[3]),format:n?"name":"hex"}:(r=Gs.hex4.exec(e))?{r:qr(r[1]+""+r[1]),g:qr(r[2]+""+r[2]),b:qr(r[3]+""+r[3]),a:sN(r[4]+""+r[4]),format:n?"name":"hex8"}:(r=Gs.hex3.exec(e))?{r:qr(r[1]+""+r[1]),g:qr(r[2]+""+r[2]),b:qr(r[3]+""+r[3]),format:n?"name":"hex"}:!1}function gUe(e){var n,r;return e=e||{level:"AA",size:"small"},n=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:n,size:r}}function gw(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function mUe(e){if(Array.isArray(e))return gw(e)}function LM(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function pUe(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yUe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ps(e,n){return e.get(LM(e,n))}function aN(e,n,r){pUe(e,n),n.set(e,r)}function iN(e,n,r){return e.set(LM(e,n),r),r}function vUe(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,BUe(s.key),s)}}function xUe(e,n,r){return n&&vUe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wUe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ue(e){return mUe(e)||wUe(e)||SUe(e)||bUe()}function CUe(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function BUe(e){var n=CUe(e,"string");return typeof n=="symbol"?n:n+""}function SUe(e,n){if(e){if(typeof e=="string")return gw(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gw(e,n):void 0}}var kUe=123,jUe=function(n){return"#".concat(Math.min(n,Math.pow(2,24)).toString(16).padStart(6,"0"))},HM=function(n,r,s){return(n<<16)+(r<<8)+s},NUe=function(n){var r=Ye(n).toRgb(),s=r.r,a=r.g,i=r.b;return HM(s,a,i)},oN=function(n,r){return n*kUe%Math.pow(2,r)},Do=new WeakMap,Wa=new WeakMap,EUe=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;yUe(this,e),aN(this,Do,void 0),aN(this,Wa,void 0),iN(Wa,this,n),this.reset()}return xUe(e,[{key:"reset",value:function(){iN(Do,this,["__reserved for background__"])}},{key:"register",value:function(r){if(ps(Do,this).length>=Math.pow(2,24-ps(Wa,this)))return null;var s=ps(Do,this).length,a=oN(s,ps(Wa,this)),i=jUe(s+(a<<24-ps(Wa,this)));return ps(Do,this).push(r),i}},{key:"lookup",value:function(r){if(!r)return null;var s=typeof r=="string"?NUe(r):HM.apply(void 0,_Ue(r));if(!s)return null;var a=s&Math.pow(2,24-ps(Wa,this))-1,i=s>>24-ps(Wa,this)&Math.pow(2,ps(Wa,this))-1;return oN(a,ps(Wa,this))!==i||a>=ps(Do,this).length?null:ps(Do,this)[a]}}])}(),Mh,Zt,zM,KM,Vo,lN,GM,WM,VM,hC,mw,pw,Vd={},qM=[],TUe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Rp=Array.isArray;function Ea(e,n){for(var r in n)e[r]=n[r];return e}function fC(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function FUe(e,n,r){var s,a,i,o={};for(i in n)i=="key"?s=n[i]:i=="ref"?a=n[i]:o[i]=n[i];if(arguments.length>2&&(o.children=arguments.length>3?Mh.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return ed(e,o,s,a,null)}function ed(e,n,r,s,a){var i={type:e,props:n,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++zM,__i:-1,__u:0};return a==null&&Zt.vnode!=null&&Zt.vnode(i),i}function $p(e){return e.children}function w0(e,n){this.props=e,this.context=n}function wA(e,n){if(n==null)return e.__?wA(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?wA(e):null}function XM(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return XM(e)}}function cN(e){(!e.__d&&(e.__d=!0)&&Vo.push(e)&&!Jg.__r++||lN!=Zt.debounceRendering)&&((lN=Zt.debounceRendering)||GM)(Jg)}function Jg(){for(var e,n,r,s,a,i,o,c=1;Vo.length;)Vo.length>c&&Vo.sort(WM),e=Vo.shift(),c=Vo.length,e.__d&&(r=void 0,s=void 0,a=(s=(n=e).__v).__e,i=[],o=[],n.__P&&((r=Ea({},s)).__v=s.__v+1,Zt.vnode&&Zt.vnode(r),gC(n.__P,r,s,n.__n,n.__P.namespaceURI,32&s.__u?[a]:null,i,a??wA(s),!!(32&s.__u),o),r.__v=s.__v,r.__.__k[r.__i]=r,ZM(i,r,o),s.__e=s.__=null,r.__e!=a&&XM(r)));Jg.__r=0}function YM(e,n,r,s,a,i,o,c,A,u,h){var d,f,g,m,y,v,p,x=s&&s.__k||qM,b=n.length;for(A=IUe(r,n,x,A,b),d=0;d<b;d++)(g=r.__k[d])!=null&&(f=g.__i==-1?Vd:x[g.__i]||Vd,g.__i=d,v=gC(e,g,f,a,i,o,c,A,u,h),m=g.__e,g.ref&&f.ref!=g.ref&&(f.ref&&mC(f.ref,null,g),h.push(g.ref,g.__c||m,g)),y==null&&m!=null&&(y=m),(p=!!(4&g.__u))||f.__k===g.__k?A=JM(g,A,e,p):typeof g.type=="function"&&v!==void 0?A=v:m&&(A=m.nextSibling),g.__u&=-7);return r.__e=y,A}function IUe(e,n,r,s,a){var i,o,c,A,u,h=r.length,d=h,f=0;for(e.__k=new Array(a),i=0;i<a;i++)(o=n[i])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=e.__k[i]=ed(null,o,null,null,null):Rp(o)?o=e.__k[i]=ed($p,{children:o},null,null,null):o.constructor==null&&o.__b>0?o=e.__k[i]=ed(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):e.__k[i]=o,A=i+f,o.__=e,o.__b=e.__b+1,c=null,(u=o.__i=UUe(o,r,A,d))!=-1&&(d--,(c=r[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(a>h?f--:a<h&&f++),typeof o.type!="function"&&(o.__u|=4)):u!=A&&(u==A-1?f--:u==A+1?f++:(u>A?f--:f++,o.__u|=4))):e.__k[i]=null;if(d)for(i=0;i<h;i++)(c=r[i])!=null&&!(2&c.__u)&&(c.__e==s&&(s=wA(c)),tQ(c,c));return s}function JM(e,n,r,s){var a,i;if(typeof e.type=="function"){for(a=e.__k,i=0;a&&i<a.length;i++)a[i]&&(a[i].__=e,n=JM(a[i],n,r,s));return n}e.__e!=n&&(s&&(n&&e.type&&!n.parentNode&&(n=wA(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function UUe(e,n,r,s){var a,i,o,c=e.key,A=e.type,u=n[r],h=u!=null&&(2&u.__u)==0;if(u===null&&c==null||h&&c==u.key&&A==u.type)return r;if(s>(h?1:0)){for(a=r-1,i=r+1;a>=0||i<n.length;)if((u=n[o=a>=0?a--:i++])!=null&&!(2&u.__u)&&c==u.key&&A==u.type)return o}return-1}function AN(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||TUe.test(n)?r:r+"px"}function Bf(e,n,r,s,a){var i,o;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(n in s)r&&n in r||AN(e.style,n,"");if(r)for(n in r)s&&r[n]==s[n]||AN(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")i=n!=(n=n.replace(VM,"$1")),o=n.toLowerCase(),n=o in e||n=="onFocusOut"||n=="onFocusIn"?o.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+i]=r,r?s?r.u=s.u:(r.u=hC,e.addEventListener(n,i?pw:mw,i)):e.removeEventListener(n,i?pw:mw,i);else{if(a=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function uN(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=hC++;else if(n.t<r.u)return;return r(Zt.event?Zt.event(n):n)}}}function gC(e,n,r,s,a,i,o,c,A,u){var h,d,f,g,m,y,v,p,x,b,w,_,B,k,N,C,j,E=n.type;if(n.constructor!=null)return null;128&r.__u&&(A=!!(32&r.__u),i=[c=n.__e=r.__e]),(h=Zt.__b)&&h(n);e:if(typeof E=="function")try{if(p=n.props,x="prototype"in E&&E.prototype.render,b=(h=E.contextType)&&s[h.__c],w=h?b?b.props.value:h.__:s,r.__c?v=(d=n.__c=r.__c).__=d.__E:(x?n.__c=d=new E(p,w):(n.__c=d=new w0(p,w),d.constructor=E,d.render=MUe),b&&b.sub(d),d.state||(d.state={}),d.__n=s,f=d.__d=!0,d.__h=[],d._sb=[]),x&&d.__s==null&&(d.__s=d.state),x&&E.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ea({},d.__s)),Ea(d.__s,E.getDerivedStateFromProps(p,d.__s))),g=d.props,m=d.state,d.__v=n,f)x&&E.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),x&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(x&&E.getDerivedStateFromProps==null&&p!==g&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(p,w),n.__v==r.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(p,d.__s,w)===!1){for(n.__v!=r.__v&&(d.props=p,d.state=d.__s,d.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(F){F&&(F.__=n)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(p,d.__s,w),x&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(g,m,y)})}if(d.context=w,d.props=p,d.__P=e,d.__e=!1,B=Zt.__r,k=0,x){for(d.state=d.__s,d.__d=!1,B&&B(n),h=d.render(d.props,d.state,d.context),N=0;N<d._sb.length;N++)d.__h.push(d._sb[N]);d._sb=[]}else do d.__d=!1,B&&B(n),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++k<25);d.state=d.__s,d.getChildContext!=null&&(s=Ea(Ea({},s),d.getChildContext())),x&&!f&&d.getSnapshotBeforeUpdate!=null&&(y=d.getSnapshotBeforeUpdate(g,m)),C=h,h!=null&&h.type===$p&&h.key==null&&(C=eQ(h.props.children)),c=YM(e,Rp(C)?C:[C],n,r,s,a,i,o,c,A,u),d.base=n.__e,n.__u&=-161,d.__h.length&&o.push(d),v&&(d.__E=d.__=null)}catch(F){if(n.__v=null,A||i!=null)if(F.then){for(n.__u|=A?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,n.__e=c}else{for(j=i.length;j--;)fC(i[j]);yw(n)}else n.__e=r.__e,n.__k=r.__k,F.then||yw(n);Zt.__e(F,n,r)}else i==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):c=n.__e=PUe(r.__e,n,r,s,a,i,o,A,u);return(h=Zt.diffed)&&h(n),128&n.__u?void 0:c}function yw(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(yw)}function ZM(e,n,r){for(var s=0;s<r.length;s++)mC(r[s],r[++s],r[++s]);Zt.__c&&Zt.__c(n,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){Zt.__e(i,a.__v)}})}function eQ(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Rp(e)?e.map(eQ):Ea({},e)}function PUe(e,n,r,s,a,i,o,c,A){var u,h,d,f,g,m,y,v=r.props||Vd,p=n.props,x=n.type;if(x=="svg"?a="http://www.w3.org/2000/svg":x=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((g=i[u])&&"setAttribute"in g==!!x&&(x?g.localName==x:g.nodeType==3)){e=g,i[u]=null;break}}if(e==null){if(x==null)return document.createTextNode(p);e=document.createElementNS(a,x,p.is&&p),c&&(Zt.__m&&Zt.__m(n,i),c=!1),i=null}if(x==null)v===p||c&&e.data==p||(e.data=p);else{if(i=i&&Mh.call(e.childNodes),!c&&i!=null)for(v={},u=0;u<e.attributes.length;u++)v[(g=e.attributes[u]).name]=g.value;for(u in v)if(g=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=g;else if(!(u in p)){if(u=="value"&&"defaultValue"in p||u=="checked"&&"defaultChecked"in p)continue;Bf(e,u,null,g,a)}}for(u in p)g=p[u],u=="children"?f=g:u=="dangerouslySetInnerHTML"?h=g:u=="value"?m=g:u=="checked"?y=g:c&&typeof g!="function"||v[u]===g||Bf(e,u,g,v[u],a);if(h)c||d&&(h.__html==d.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),n.__k=[];else if(d&&(e.innerHTML=""),YM(n.type=="template"?e.content:e,Rp(f)?f:[f],n,r,s,x=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,o,i?i[0]:r.__k&&wA(r,0),c,A),i!=null)for(u=i.length;u--;)fC(i[u]);c||(u="value",x=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[u]||x=="progress"&&!m||x=="option"&&m!=v[u])&&Bf(e,u,m,v[u],a),u="checked",y!=null&&y!=e[u]&&Bf(e,u,y,v[u],a))}return e}function mC(e,n,r){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&n==null||(e.__u=e(n))}else e.current=n}catch(a){Zt.__e(a,r)}}function tQ(e,n,r){var s,a;if(Zt.unmount&&Zt.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||mC(s,null,n)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){Zt.__e(i,n)}s.base=s.__P=null}if(s=e.__k)for(a=0;a<s.length;a++)s[a]&&tQ(s[a],n,r||typeof e.type!="function");r||fC(e.__e),e.__c=e.__=e.__e=void 0}function MUe(e,n,r){return this.constructor(e,r)}function QUe(e,n,r){var s,a,i,o;n==document&&(n=document.documentElement),Zt.__&&Zt.__(e,n),a=(s=typeof r=="function")?null:r&&r.__k||n.__k,i=[],o=[],gC(n,e=(!s&&r||n).__k=FUe($p,null,[e]),a||Vd,Vd,n.namespaceURI,!s&&r?[r]:a?null:n.firstChild?Mh.call(n.childNodes):null,i,!s&&r?r:a?a.__e:n.firstChild,s,o),ZM(i,e,o)}function nQ(e,n,r){var s,a,i,o,c=Ea({},e.props);for(i in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),n)i=="key"?s=n[i]:i=="ref"?a=n[i]:c[i]=n[i]===void 0&&o!=null?o[i]:n[i];return arguments.length>2&&(c.children=arguments.length>3?Mh.call(arguments,2):r),ed(e.type,c,s||e.key,a||e.ref,null)}Mh=qM.slice,Zt={__e:function(e,n,r,s){for(var a,i,o;n=n.__;)if((a=n.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,s||{}),o=a.__d),o)return a.__E=a}catch(c){e=c}throw e}},zM=0,KM=function(e){return e!=null&&e.constructor==null},w0.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ea({},this.state),typeof e=="function"&&(e=e(Ea({},r),this.props)),e&&Ea(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),cN(this))},w0.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),cN(this))},w0.prototype.render=$p,Vo=[],GM=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,WM=function(e,n){return e.__v.__b-n.__v.__b},Jg.__r=0,VM=/(PointerCapture)$|Capture$/i,hC=0,mw=uN(!1),pw=uN(!0);function dN(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function DUe(e){if(Array.isArray(e))return e}function RUe(e,n,r){return(n=KUe(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function $Ue(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function OUe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hN(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function LUe(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?hN(Object(r),!0).forEach(function(s){RUe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function HUe(e,n){return DUe(e)||$Ue(e,n)||GUe(e,n)||OUe()}function zUe(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function KUe(e){var n=zUe(e,"string");return typeof n=="symbol"?n:n+""}function Zg(e){"@babel/helpers - typeof";return Zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Zg(e)}function GUe(e,n){if(e){if(typeof e=="string")return dN(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dN(e,n):void 0}}var vw=function(n){if(Zg(n)!=="object")return n;var r=nQ(n);if(r.props){var s;r.props=LUe({},r.props),r!=null&&(s=r.props)!==null&&s!==void 0&&s.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(vw):vw(r.props.children))}return r},WUe=function(n){return KM(nQ(n))},VUe=function(n,r){delete r.__k,QUe(vw(n),r)};function qUe(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var XUe=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;qUe(XUe);var YUe=dC({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.style,i=a===void 0?{}:a,o=!!n&&Zg(n)==="object"&&!!n.node&&typeof n.node=="function",c=Cs(o?n.node():n);c.style("position")==="static"&&c.style("position","relative"),r.tooltipEl=c.append("div").attr("class","float-tooltip-kap"),Object.entries(i).forEach(function(u){var h=HUe(u,2),d=h[0],f=h[1];return r.tooltipEl.style(d,f)}),r.tooltipEl.style("left","-10000px").style("display","none");var A="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,c.on("mousemove.".concat(A),function(u){r.mouseInside=!0;var h=Ba(u),d=c.node(),f=d.offsetWidth,g=d.offsetHeight,m=[r.offsetX===null||r.offsetX===void 0?"-".concat(h[0]/f*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?g>130&&g-h[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(m.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseover.".concat(A),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseout.".concat(A),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(n){n.tooltipEl.style("display",n.content&&n.mouseInside?"inline":"none"),n.content?n.content instanceof HTMLElement?(n.tooltipEl.text(""),n.tooltipEl.append(function(){return n.content})):typeof n.content=="string"?n.tooltipEl.html(n.content):WUe(n.content)?(n.tooltipEl.text(""),VUe(n.content,n.tooltipEl.node())):(n.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",n.content,n.content.toString())):n.tooltipEl.text("")}});function JUe(e,n,r){var s,a=1;e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function i(){var o,c=s.length,A,u=0,h=0,d=0;for(o=0;o<c;++o)A=s[o],u+=A.x||0,h+=A.y||0,d+=A.z||0;for(u=(u/c-e)*a,h=(h/c-n)*a,d=(d/c-r)*a,o=0;o<c;++o)A=s[o],u&&(A.x-=u),h&&(A.y-=h),d&&(A.z-=d)}return i.initialize=function(o){s=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(n=+o,i):n},i.z=function(o){return arguments.length?(r=+o,i):r},i.strength=function(o){return arguments.length?(a=+o,i):a},i}function ZUe(e){const n=+this._x.call(null,e);return rQ(this.cover(n),n,e)}function rQ(e,n,r){if(isNaN(n))return e;var s,a=e._root,i={data:r},o=e._x0,c=e._x1,A,u,h,d,f;if(!a)return e._root=i,e;for(;a.length;)if((h=n>=(A=(o+c)/2))?o=A:c=A,s=a,!(a=a[d=+h]))return s[d]=i,e;if(u=+e._x.call(null,a.data),n===u)return i.next=a,s?s[d]=i:e._root=i,e;do s=s?s[d]=new Array(2):e._root=new Array(2),(h=n>=(A=(o+c)/2))?o=A:c=A;while((d=+h)==(f=+(u>=A)));return s[f]=a,s[d]=i,e}function ePe(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n);let s=1/0,a=-1/0;for(let i=0,o;i<n;++i)isNaN(o=+this._x.call(null,e[i]))||(r[i]=o,o<s&&(s=o),o>a&&(a=o));if(s>a)return this;this.cover(s).cover(a);for(let i=0;i<n;++i)rQ(this,r[i],e[i]);return this}function tPe(e){if(isNaN(e=+e))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var s=r-n||1,a=this._root,i,o;n>e||e>=r;)switch(o=+(e<n),i=new Array(2),i[o]=a,a=i,s*=2,o){case 0:r=n+s;break;case 1:n=r-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._x1=r,this}function nPe(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function rPe(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function mi(e,n,r){this.node=e,this.x0=n,this.x1=r}function sPe(e,n){var r,s=this._x0,a,i,o=this._x1,c=[],A=this._root,u,h;for(A&&c.push(new mi(A,s,o)),n==null?n=1/0:(s=e-n,o=e+n);u=c.pop();)if(!(!(A=u.node)||(a=u.x0)>o||(i=u.x1)<s))if(A.length){var d=(a+i)/2;c.push(new mi(A[1],d,i),new mi(A[0],a,d)),(h=+(e>=d))&&(u=c[c.length-1],c[c.length-1]=c[c.length-1-h],c[c.length-1-h]=u)}else{var f=Math.abs(e-+this._x.call(null,A.data));f<n&&(n=f,s=e-f,o=e+f,r=A.data)}return r}function aPe(e){if(isNaN(A=+this._x.call(null,e)))return this;var n,r=this._root,s,a,i,o=this._x0,c=this._x1,A,u,h,d,f;if(!r)return this;if(r.length)for(;;){if((h=A>=(u=(o+c)/2))?o=u:c=u,n=r,!(r=r[d=+h]))return this;if(!r.length)break;n[d+1&1]&&(s=n,f=d)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,a?(i?a.next=i:delete a.next,this):n?(i?n[d]=i:delete n[d],(r=n[0]||n[1])&&r===(n[1]||n[0])&&!r.length&&(s?s[f]=r:this._root=r),this):(this._root=i,this)}function iPe(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function oPe(){return this._root}function lPe(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function cPe(e){var n=[],r,s=this._root,a,i,o;for(s&&n.push(new mi(s,this._x0,this._x1));r=n.pop();)if(!e(s=r.node,i=r.x0,o=r.x1)&&s.length){var c=(i+o)/2;(a=s[1])&&n.push(new mi(a,c,o)),(a=s[0])&&n.push(new mi(a,i,c))}return this}function APe(e){var n=[],r=[],s;for(this._root&&n.push(new mi(this._root,this._x0,this._x1));s=n.pop();){var a=s.node;if(a.length){var i,o=s.x0,c=s.x1,A=(o+c)/2;(i=a[0])&&n.push(new mi(i,o,A)),(i=a[1])&&n.push(new mi(i,A,c))}r.push(s)}for(;s=r.pop();)e(s.node,s.x0,s.x1);return this}function uPe(e){return e[0]}function dPe(e){return arguments.length?(this._x=e,this):this._x}function sQ(e,n){var r=new pC(n??uPe,NaN,NaN);return e==null?r:r.addAll(e)}function pC(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function fN(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var zr=sQ.prototype=pC.prototype;zr.copy=function(){var e=new pC(this._x,this._x0,this._x1),n=this._root,r,s;if(!n)return e;if(!n.length)return e._root=fN(n),e;for(r=[{source:n,target:e._root=new Array(2)}];n=r.pop();)for(var a=0;a<2;++a)(s=n.source[a])&&(s.length?r.push({source:s,target:n.target[a]=new Array(2)}):n.target[a]=fN(s));return e};zr.add=ZUe;zr.addAll=ePe;zr.cover=tPe;zr.data=nPe;zr.extent=rPe;zr.find=sPe;zr.remove=aPe;zr.removeAll=iPe;zr.root=oPe;zr.size=lPe;zr.visit=cPe;zr.visitAfter=APe;zr.x=dPe;function hPe(e){const n=+this._x.call(null,e),r=+this._y.call(null,e);return aQ(this.cover(n,r),n,r,e)}function aQ(e,n,r,s){if(isNaN(n)||isNaN(r))return e;var a,i=e._root,o={data:s},c=e._x0,A=e._y0,u=e._x1,h=e._y1,d,f,g,m,y,v,p,x;if(!i)return e._root=o,e;for(;i.length;)if((y=n>=(d=(c+u)/2))?c=d:u=d,(v=r>=(f=(A+h)/2))?A=f:h=f,a=i,!(i=i[p=v<<1|y]))return a[p]=o,e;if(g=+e._x.call(null,i.data),m=+e._y.call(null,i.data),n===g&&r===m)return o.next=i,a?a[p]=o:e._root=o,e;do a=a?a[p]=new Array(4):e._root=new Array(4),(y=n>=(d=(c+u)/2))?c=d:u=d,(v=r>=(f=(A+h)/2))?A=f:h=f;while((p=v<<1|y)===(x=(m>=f)<<1|g>=d));return a[x]=i,a[p]=o,e}function fPe(e){var n,r,s=e.length,a,i,o=new Array(s),c=new Array(s),A=1/0,u=1/0,h=-1/0,d=-1/0;for(r=0;r<s;++r)isNaN(a=+this._x.call(null,n=e[r]))||isNaN(i=+this._y.call(null,n))||(o[r]=a,c[r]=i,a<A&&(A=a),a>h&&(h=a),i<u&&(u=i),i>d&&(d=i));if(A>h||u>d)return this;for(this.cover(A,u).cover(h,d),r=0;r<s;++r)aQ(this,o[r],c[r],e[r]);return this}function gPe(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,s=this._y0,a=this._x1,i=this._y1;if(isNaN(r))a=(r=Math.floor(e))+1,i=(s=Math.floor(n))+1;else{for(var o=a-r||1,c=this._root,A,u;r>e||e>=a||s>n||n>=i;)switch(u=(n<s)<<1|e<r,A=new Array(4),A[u]=c,c=A,o*=2,u){case 0:a=r+o,i=s+o;break;case 1:r=a-o,i=s+o;break;case 2:a=r+o,s=i-o;break;case 3:r=a-o,s=i-o;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=s,this._x1=a,this._y1=i,this}function mPe(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function pPe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function xr(e,n,r,s,a){this.node=e,this.x0=n,this.y0=r,this.x1=s,this.y1=a}function yPe(e,n,r){var s,a=this._x0,i=this._y0,o,c,A,u,h=this._x1,d=this._y1,f=[],g=this._root,m,y;for(g&&f.push(new xr(g,a,i,h,d)),r==null?r=1/0:(a=e-r,i=n-r,h=e+r,d=n+r,r*=r);m=f.pop();)if(!(!(g=m.node)||(o=m.x0)>h||(c=m.y0)>d||(A=m.x1)<a||(u=m.y1)<i))if(g.length){var v=(o+A)/2,p=(c+u)/2;f.push(new xr(g[3],v,p,A,u),new xr(g[2],o,p,v,u),new xr(g[1],v,c,A,p),new xr(g[0],o,c,v,p)),(y=(n>=p)<<1|e>=v)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-y],f[f.length-1-y]=m)}else{var x=e-+this._x.call(null,g.data),b=n-+this._y.call(null,g.data),w=x*x+b*b;if(w<r){var _=Math.sqrt(r=w);a=e-_,i=n-_,h=e+_,d=n+_,s=g.data}}return s}function vPe(e){if(isNaN(h=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var n,r=this._root,s,a,i,o=this._x0,c=this._y0,A=this._x1,u=this._y1,h,d,f,g,m,y,v,p;if(!r)return this;if(r.length)for(;;){if((m=h>=(f=(o+A)/2))?o=f:A=f,(y=d>=(g=(c+u)/2))?c=g:u=g,n=r,!(r=r[v=y<<1|m]))return this;if(!r.length)break;(n[v+1&3]||n[v+2&3]||n[v+3&3])&&(s=n,p=v)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,a?(i?a.next=i:delete a.next,this):n?(i?n[v]=i:delete n[v],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(s?s[p]=r:this._root=r),this):(this._root=i,this)}function xPe(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function wPe(){return this._root}function bPe(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function _Pe(e){var n=[],r,s=this._root,a,i,o,c,A;for(s&&n.push(new xr(s,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(s=r.node,i=r.x0,o=r.y0,c=r.x1,A=r.y1)&&s.length){var u=(i+c)/2,h=(o+A)/2;(a=s[3])&&n.push(new xr(a,u,h,c,A)),(a=s[2])&&n.push(new xr(a,i,h,u,A)),(a=s[1])&&n.push(new xr(a,u,o,c,h)),(a=s[0])&&n.push(new xr(a,i,o,u,h))}return this}function CPe(e){var n=[],r=[],s;for(this._root&&n.push(new xr(this._root,this._x0,this._y0,this._x1,this._y1));s=n.pop();){var a=s.node;if(a.length){var i,o=s.x0,c=s.y0,A=s.x1,u=s.y1,h=(o+A)/2,d=(c+u)/2;(i=a[0])&&n.push(new xr(i,o,c,h,d)),(i=a[1])&&n.push(new xr(i,h,c,A,d)),(i=a[2])&&n.push(new xr(i,o,d,h,u)),(i=a[3])&&n.push(new xr(i,h,d,A,u))}r.push(s)}for(;s=r.pop();)e(s.node,s.x0,s.y0,s.x1,s.y1);return this}function BPe(e){return e[0]}function SPe(e){return arguments.length?(this._x=e,this):this._x}function kPe(e){return e[1]}function jPe(e){return arguments.length?(this._y=e,this):this._y}function Op(e,n,r){var s=new yC(n??BPe,r??kPe,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function yC(e,n,r,s,a,i){this._x=e,this._y=n,this._x0=r,this._y0=s,this._x1=a,this._y1=i,this._root=void 0}function gN(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var jr=Op.prototype=yC.prototype;jr.copy=function(){var e=new yC(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,s;if(!n)return e;if(!n.length)return e._root=gN(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var a=0;a<4;++a)(s=n.source[a])&&(s.length?r.push({source:s,target:n.target[a]=new Array(4)}):n.target[a]=gN(s));return e};jr.add=hPe;jr.addAll=fPe;jr.cover=gPe;jr.data=mPe;jr.extent=pPe;jr.find=yPe;jr.remove=vPe;jr.removeAll=xPe;jr.root=wPe;jr.size=bPe;jr.visit=_Pe;jr.visitAfter=CPe;jr.x=SPe;jr.y=jPe;function NPe(e){const n=+this._x.call(null,e),r=+this._y.call(null,e),s=+this._z.call(null,e);return iQ(this.cover(n,r,s),n,r,s,e)}function iQ(e,n,r,s,a){if(isNaN(n)||isNaN(r)||isNaN(s))return e;var i,o=e._root,c={data:a},A=e._x0,u=e._y0,h=e._z0,d=e._x1,f=e._y1,g=e._z1,m,y,v,p,x,b,w,_,B,k,N;if(!o)return e._root=c,e;for(;o.length;)if((w=n>=(m=(A+d)/2))?A=m:d=m,(_=r>=(y=(u+f)/2))?u=y:f=y,(B=s>=(v=(h+g)/2))?h=v:g=v,i=o,!(o=o[k=B<<2|_<<1|w]))return i[k]=c,e;if(p=+e._x.call(null,o.data),x=+e._y.call(null,o.data),b=+e._z.call(null,o.data),n===p&&r===x&&s===b)return c.next=o,i?i[k]=c:e._root=c,e;do i=i?i[k]=new Array(8):e._root=new Array(8),(w=n>=(m=(A+d)/2))?A=m:d=m,(_=r>=(y=(u+f)/2))?u=y:f=y,(B=s>=(v=(h+g)/2))?h=v:g=v;while((k=B<<2|_<<1|w)===(N=(b>=v)<<2|(x>=y)<<1|p>=m));return i[N]=o,i[k]=c,e}function EPe(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n),s=new Float64Array(n),a=new Float64Array(n);let i=1/0,o=1/0,c=1/0,A=-1/0,u=-1/0,h=-1/0;for(let d=0,f,g,m,y;d<n;++d)isNaN(g=+this._x.call(null,f=e[d]))||isNaN(m=+this._y.call(null,f))||isNaN(y=+this._z.call(null,f))||(r[d]=g,s[d]=m,a[d]=y,g<i&&(i=g),g>A&&(A=g),m<o&&(o=m),m>u&&(u=m),y<c&&(c=y),y>h&&(h=y));if(i>A||o>u||c>h)return this;this.cover(i,o,c).cover(A,u,h);for(let d=0;d<n;++d)iQ(this,r[d],s[d],a[d],e[d]);return this}function TPe(e,n,r){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(r=+r))return this;var s=this._x0,a=this._y0,i=this._z0,o=this._x1,c=this._y1,A=this._z1;if(isNaN(s))o=(s=Math.floor(e))+1,c=(a=Math.floor(n))+1,A=(i=Math.floor(r))+1;else{for(var u=o-s||1,h=this._root,d,f;s>e||e>=o||a>n||n>=c||i>r||r>=A;)switch(f=(r<i)<<2|(n<a)<<1|e<s,d=new Array(8),d[f]=h,h=d,u*=2,f){case 0:o=s+u,c=a+u,A=i+u;break;case 1:s=o-u,c=a+u,A=i+u;break;case 2:o=s+u,a=c-u,A=i+u;break;case 3:s=o-u,a=c-u,A=i+u;break;case 4:o=s+u,c=a+u,i=A-u;break;case 5:s=o-u,c=a+u,i=A-u;break;case 6:o=s+u,a=c-u,i=A-u;break;case 7:s=o-u,a=c-u,i=A-u;break}this._root&&this._root.length&&(this._root=h)}return this._x0=s,this._y0=a,this._z0=i,this._x1=o,this._y1=c,this._z1=A,this}function FPe(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function IPe(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Ft(e,n,r,s,a,i,o){this.node=e,this.x0=n,this.y0=r,this.z0=s,this.x1=a,this.y1=i,this.z1=o}function UPe(e,n,r,s){var a,i=this._x0,o=this._y0,c=this._z0,A,u,h,d,f,g,m=this._x1,y=this._y1,v=this._z1,p=[],x=this._root,b,w;for(x&&p.push(new Ft(x,i,o,c,m,y,v)),s==null?s=1/0:(i=e-s,o=n-s,c=r-s,m=e+s,y=n+s,v=r+s,s*=s);b=p.pop();)if(!(!(x=b.node)||(A=b.x0)>m||(u=b.y0)>y||(h=b.z0)>v||(d=b.x1)<i||(f=b.y1)<o||(g=b.z1)<c))if(x.length){var _=(A+d)/2,B=(u+f)/2,k=(h+g)/2;p.push(new Ft(x[7],_,B,k,d,f,g),new Ft(x[6],A,B,k,_,f,g),new Ft(x[5],_,u,k,d,B,g),new Ft(x[4],A,u,k,_,B,g),new Ft(x[3],_,B,h,d,f,k),new Ft(x[2],A,B,h,_,f,k),new Ft(x[1],_,u,h,d,B,k),new Ft(x[0],A,u,h,_,B,k)),(w=(r>=k)<<2|(n>=B)<<1|e>=_)&&(b=p[p.length-1],p[p.length-1]=p[p.length-1-w],p[p.length-1-w]=b)}else{var N=e-+this._x.call(null,x.data),C=n-+this._y.call(null,x.data),j=r-+this._z.call(null,x.data),E=N*N+C*C+j*j;if(E<s){var F=Math.sqrt(s=E);i=e-F,o=n-F,c=r-F,m=e+F,y=n+F,v=r+F,a=x.data}}return a}const PPe=(e,n,r,s,a,i)=>Math.sqrt((e-s)**2+(n-a)**2+(r-i)**2);function MPe(e,n,r,s){const a=[],i=e-s,o=n-s,c=r-s,A=e+s,u=n+s,h=r+s;return this.visit((d,f,g,m,y,v,p)=>{if(!d.length)do{const x=d.data;PPe(e,n,r,this._x(x),this._y(x),this._z(x))<=s&&a.push(x)}while(d=d.next);return f>A||g>u||m>h||y<i||v<o||p<c}),a}function QPe(e){if(isNaN(f=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e))||isNaN(m=+this._z.call(null,e)))return this;var n,r=this._root,s,a,i,o=this._x0,c=this._y0,A=this._z0,u=this._x1,h=this._y1,d=this._z1,f,g,m,y,v,p,x,b,w,_,B;if(!r)return this;if(r.length)for(;;){if((x=f>=(y=(o+u)/2))?o=y:u=y,(b=g>=(v=(c+h)/2))?c=v:h=v,(w=m>=(p=(A+d)/2))?A=p:d=p,n=r,!(r=r[_=w<<2|b<<1|x]))return this;if(!r.length)break;(n[_+1&7]||n[_+2&7]||n[_+3&7]||n[_+4&7]||n[_+5&7]||n[_+6&7]||n[_+7&7])&&(s=n,B=_)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,a?(i?a.next=i:delete a.next,this):n?(i?n[_]=i:delete n[_],(r=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&r===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!r.length&&(s?s[B]=r:this._root=r),this):(this._root=i,this)}function DPe(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function RPe(){return this._root}function $Pe(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function OPe(e){var n=[],r,s=this._root,a,i,o,c,A,u,h;for(s&&n.push(new Ft(s,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=n.pop();)if(!e(s=r.node,i=r.x0,o=r.y0,c=r.z0,A=r.x1,u=r.y1,h=r.z1)&&s.length){var d=(i+A)/2,f=(o+u)/2,g=(c+h)/2;(a=s[7])&&n.push(new Ft(a,d,f,g,A,u,h)),(a=s[6])&&n.push(new Ft(a,i,f,g,d,u,h)),(a=s[5])&&n.push(new Ft(a,d,o,g,A,f,h)),(a=s[4])&&n.push(new Ft(a,i,o,g,d,f,h)),(a=s[3])&&n.push(new Ft(a,d,f,c,A,u,g)),(a=s[2])&&n.push(new Ft(a,i,f,c,d,u,g)),(a=s[1])&&n.push(new Ft(a,d,o,c,A,f,g)),(a=s[0])&&n.push(new Ft(a,i,o,c,d,f,g))}return this}function LPe(e){var n=[],r=[],s;for(this._root&&n.push(new Ft(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));s=n.pop();){var a=s.node;if(a.length){var i,o=s.x0,c=s.y0,A=s.z0,u=s.x1,h=s.y1,d=s.z1,f=(o+u)/2,g=(c+h)/2,m=(A+d)/2;(i=a[0])&&n.push(new Ft(i,o,c,A,f,g,m)),(i=a[1])&&n.push(new Ft(i,f,c,A,u,g,m)),(i=a[2])&&n.push(new Ft(i,o,g,A,f,h,m)),(i=a[3])&&n.push(new Ft(i,f,g,A,u,h,m)),(i=a[4])&&n.push(new Ft(i,o,c,m,f,g,d)),(i=a[5])&&n.push(new Ft(i,f,c,m,u,g,d)),(i=a[6])&&n.push(new Ft(i,o,g,m,f,h,d)),(i=a[7])&&n.push(new Ft(i,f,g,m,u,h,d))}r.push(s)}for(;s=r.pop();)e(s.node,s.x0,s.y0,s.z0,s.x1,s.y1,s.z1);return this}function HPe(e){return e[0]}function zPe(e){return arguments.length?(this._x=e,this):this._x}function KPe(e){return e[1]}function GPe(e){return arguments.length?(this._y=e,this):this._y}function WPe(e){return e[2]}function VPe(e){return arguments.length?(this._z=e,this):this._z}function oQ(e,n,r,s){var a=new vC(n??HPe,r??KPe,s??WPe,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?a:a.addAll(e)}function vC(e,n,r,s,a,i,o,c,A){this._x=e,this._y=n,this._z=r,this._x0=s,this._y0=a,this._z0=i,this._x1=o,this._y1=c,this._z1=A,this._root=void 0}function mN(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var Zn=oQ.prototype=vC.prototype;Zn.copy=function(){var e=new vC(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root,r,s;if(!n)return e;if(!n.length)return e._root=mN(n),e;for(r=[{source:n,target:e._root=new Array(8)}];n=r.pop();)for(var a=0;a<8;++a)(s=n.source[a])&&(s.length?r.push({source:s,target:n.target[a]=new Array(8)}):n.target[a]=mN(s));return e};Zn.add=NPe;Zn.addAll=EPe;Zn.cover=TPe;Zn.data=FPe;Zn.extent=IPe;Zn.find=UPe;Zn.findAllWithinRadius=MPe;Zn.remove=QPe;Zn.removeAll=DPe;Zn.root=RPe;Zn.size=$Pe;Zn.visit=OPe;Zn.visitAfter=LPe;Zn.x=zPe;Zn.y=GPe;Zn.z=VPe;function fi(e){return function(){return e}}function ii(e){return(e()-.5)*1e-6}function qPe(e){return e.index}function pN(e,n){var r=e.get(n);if(!r)throw new Error("node not found: "+n);return r}function XPe(e){var n=qPe,r=f,s,a=fi(30),i,o,c,A,u,h,d=1;e==null&&(e=[]);function f(p){return 1/Math.min(A[p.source.index],A[p.target.index])}function g(p){for(var x=0,b=e.length;x<d;++x)for(var w=0,_,B,k,N=0,C=0,j=0,E,F;w<b;++w)_=e[w],B=_.source,k=_.target,N=k.x+k.vx-B.x-B.vx||ii(h),c>1&&(C=k.y+k.vy-B.y-B.vy||ii(h)),c>2&&(j=k.z+k.vz-B.z-B.vz||ii(h)),E=Math.sqrt(N*N+C*C+j*j),E=(E-i[w])/E*p*s[w],N*=E,C*=E,j*=E,k.vx-=N*(F=u[w]),c>1&&(k.vy-=C*F),c>2&&(k.vz-=j*F),B.vx+=N*(F=1-F),c>1&&(B.vy+=C*F),c>2&&(B.vz+=j*F)}function m(){if(o){var p,x=o.length,b=e.length,w=new Map(o.map((B,k)=>[n(B,k,o),B])),_;for(p=0,A=new Array(x);p<b;++p)_=e[p],_.index=p,typeof _.source!="object"&&(_.source=pN(w,_.source)),typeof _.target!="object"&&(_.target=pN(w,_.target)),A[_.source.index]=(A[_.source.index]||0)+1,A[_.target.index]=(A[_.target.index]||0)+1;for(p=0,u=new Array(b);p<b;++p)_=e[p],u[p]=A[_.source.index]/(A[_.source.index]+A[_.target.index]);s=new Array(b),y(),i=new Array(b),v()}}function y(){if(o)for(var p=0,x=e.length;p<x;++p)s[p]=+r(e[p],p,e)}function v(){if(o)for(var p=0,x=e.length;p<x;++p)i[p]=+a(e[p],p,e)}return g.initialize=function(p,...x){o=p,h=x.find(b=>typeof b=="function")||Math.random,c=x.find(b=>[1,2,3].includes(b))||2,m()},g.links=function(p){return arguments.length?(e=p,m(),g):e},g.id=function(p){return arguments.length?(n=p,g):n},g.iterations=function(p){return arguments.length?(d=+p,g):d},g.strength=function(p){return arguments.length?(r=typeof p=="function"?p:fi(+p),y(),g):r},g.distance=function(p){return arguments.length?(a=typeof p=="function"?p:fi(+p),v(),g):a},g}const YPe=1664525,JPe=1013904223,yN=4294967296;function ZPe(){let e=1;return()=>(e=(YPe*e+JPe)%yN)/yN}var vN=3;function _v(e){return e.x}function xN(e){return e.y}function eMe(e){return e.z}var tMe=10,nMe=Math.PI*(3-Math.sqrt(5)),rMe=Math.PI*20/(9+Math.sqrt(221));function sMe(e,n){n=n||2;var r=Math.min(vN,Math.max(1,Math.round(n))),s,a=1,i=.001,o=1-Math.pow(i,1/300),c=0,A=.6,u=new Map,h=gp(g),d=Ph("tick","end"),f=ZPe();e==null&&(e=[]);function g(){m(),d.call("tick",s),a<i&&(h.stop(),d.call("end",s))}function m(p){var x,b=e.length,w;p===void 0&&(p=1);for(var _=0;_<p;++_)for(a+=(c-a)*o,u.forEach(function(B){B(a)}),x=0;x<b;++x)w=e[x],w.fx==null?w.x+=w.vx*=A:(w.x=w.fx,w.vx=0),r>1&&(w.fy==null?w.y+=w.vy*=A:(w.y=w.fy,w.vy=0)),r>2&&(w.fz==null?w.z+=w.vz*=A:(w.z=w.fz,w.vz=0));return s}function y(){for(var p=0,x=e.length,b;p<x;++p){if(b=e[p],b.index=p,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),b.fz!=null&&(b.z=b.fz),isNaN(b.x)||r>1&&isNaN(b.y)||r>2&&isNaN(b.z)){var w=tMe*(r>2?Math.cbrt(.5+p):r>1?Math.sqrt(.5+p):p),_=p*nMe,B=p*rMe;r===1?b.x=w:r===2?(b.x=w*Math.cos(_),b.y=w*Math.sin(_)):(b.x=w*Math.sin(_)*Math.cos(B),b.y=w*Math.cos(_),b.z=w*Math.sin(_)*Math.sin(B))}(isNaN(b.vx)||r>1&&isNaN(b.vy)||r>2&&isNaN(b.vz))&&(b.vx=0,r>1&&(b.vy=0),r>2&&(b.vz=0))}}function v(p){return p.initialize&&p.initialize(e,f,r),p}return y(),s={tick:m,restart:function(){return h.restart(g),s},stop:function(){return h.stop(),s},numDimensions:function(p){return arguments.length?(r=Math.min(vN,Math.max(1,Math.round(p))),u.forEach(v),s):r},nodes:function(p){return arguments.length?(e=p,y(),u.forEach(v),s):e},alpha:function(p){return arguments.length?(a=+p,s):a},alphaMin:function(p){return arguments.length?(i=+p,s):i},alphaDecay:function(p){return arguments.length?(o=+p,s):+o},alphaTarget:function(p){return arguments.length?(c=+p,s):c},velocityDecay:function(p){return arguments.length?(A=1-p,s):1-A},randomSource:function(p){return arguments.length?(f=p,u.forEach(v),s):f},force:function(p,x){return arguments.length>1?(x==null?u.delete(p):u.set(p,v(x)),s):u.get(p)},find:function(){var p=Array.prototype.slice.call(arguments),x=p.shift()||0,b=(r>1?p.shift():null)||0,w=(r>2?p.shift():null)||0,_=p.shift()||1/0,B=0,k=e.length,N,C,j,E,F,I;for(_*=_,B=0;B<k;++B)F=e[B],N=x-F.x,C=b-(F.y||0),j=w-(F.z||0),E=N*N+C*C+j*j,E<_&&(I=F,_=E);return I},on:function(p,x){return arguments.length>1?(d.on(p,x),s):d.on(p)}}}function aMe(){var e,n,r,s,a,i=fi(-30),o,c=1,A=1/0,u=.81;function h(m){var y,v=e.length,p=(n===1?sQ(e,_v):n===2?Op(e,_v,xN):n===3?oQ(e,_v,xN,eMe):null).visitAfter(f);for(a=m,y=0;y<v;++y)r=e[y],p.visit(g)}function d(){if(e){var m,y=e.length,v;for(o=new Array(y),m=0;m<y;++m)v=e[m],o[v.index]=+i(v,m,e)}}function f(m){var y=0,v,p,x=0,b,w,_,B,k=m.length;if(k){for(b=w=_=B=0;B<k;++B)(v=m[B])&&(p=Math.abs(v.value))&&(y+=v.value,x+=p,b+=p*(v.x||0),w+=p*(v.y||0),_+=p*(v.z||0));y*=Math.sqrt(4/k),m.x=b/x,n>1&&(m.y=w/x),n>2&&(m.z=_/x)}else{v=m,v.x=v.data.x,n>1&&(v.y=v.data.y),n>2&&(v.z=v.data.z);do y+=o[v.data.index];while(v=v.next)}m.value=y}function g(m,y,v,p,x){if(!m.value)return!0;var b=[v,p,x][n-1],w=m.x-r.x,_=n>1?m.y-r.y:0,B=n>2?m.z-r.z:0,k=b-y,N=w*w+_*_+B*B;if(k*k/u<N)return N<A&&(w===0&&(w=ii(s),N+=w*w),n>1&&_===0&&(_=ii(s),N+=_*_),n>2&&B===0&&(B=ii(s),N+=B*B),N<c&&(N=Math.sqrt(c*N)),r.vx+=w*m.value*a/N,n>1&&(r.vy+=_*m.value*a/N),n>2&&(r.vz+=B*m.value*a/N)),!0;if(m.length||N>=A)return;(m.data!==r||m.next)&&(w===0&&(w=ii(s),N+=w*w),n>1&&_===0&&(_=ii(s),N+=_*_),n>2&&B===0&&(B=ii(s),N+=B*B),N<c&&(N=Math.sqrt(c*N)));do m.data!==r&&(k=o[m.data.index]*a/N,r.vx+=w*k,n>1&&(r.vy+=_*k),n>2&&(r.vz+=B*k));while(m=m.next)}return h.initialize=function(m,...y){e=m,s=y.find(v=>typeof v=="function")||Math.random,n=y.find(v=>[1,2,3].includes(v))||2,d()},h.strength=function(m){return arguments.length?(i=typeof m=="function"?m:fi(+m),d(),h):i},h.distanceMin=function(m){return arguments.length?(c=m*m,h):Math.sqrt(c)},h.distanceMax=function(m){return arguments.length?(A=m*m,h):Math.sqrt(A)},h.theta=function(m){return arguments.length?(u=m*m,h):Math.sqrt(u)},h}function iMe(e,n,r,s){var a,i,o=fi(.1),c,A;typeof e!="function"&&(e=fi(+e)),n==null&&(n=0),r==null&&(r=0),s==null&&(s=0);function u(d){for(var f=0,g=a.length;f<g;++f){var m=a[f],y=m.x-n||1e-6,v=(m.y||0)-r||1e-6,p=(m.z||0)-s||1e-6,x=Math.sqrt(y*y+v*v+p*p),b=(A[f]-x)*c[f]*d/x;m.vx+=y*b,i>1&&(m.vy+=v*b),i>2&&(m.vz+=p*b)}}function h(){if(a){var d,f=a.length;for(c=new Array(f),A=new Array(f),d=0;d<f;++d)A[d]=+e(a[d],d,a),c[d]=isNaN(A[d])?0:+o(a[d],d,a)}}return u.initialize=function(d,...f){a=d,i=f.find(g=>[1,2,3].includes(g))||2,h()},u.strength=function(d){return arguments.length?(o=typeof d=="function"?d:fi(+d),h(),u):o},u.radius=function(d){return arguments.length?(e=typeof d=="function"?d:fi(+d),h(),u):e},u.x=function(d){return arguments.length?(n=+d,u):n},u.y=function(d){return arguments.length?(r=+d,u):r},u.z=function(d){return arguments.length?(s=+d,u):s},u}const{abs:Au,cos:Va,sin:sc,acos:oMe,atan2:uu,sqrt:Ri,pow:ys}=Math;function du(e){return e<0?-ys(-e,1/3):ys(e,1/3)}const lQ=Math.PI,Sf=2*lQ,$i=lQ/2,lMe=1e-6,Cv=Number.MAX_SAFE_INTEGER||9007199254740991,Bv=Number.MIN_SAFE_INTEGER||-9007199254740991,cMe={x:0,y:0,z:0},Ue={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){const r=n(e);let s=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(s+=r.z*r.z),Ri(s)},compute:function(e,n,r){if(e===0)return n[0].t=0,n[0];const s=n.length-1;if(e===1)return n[s].t=1,n[s];const a=1-e;let i=n;if(s===0)return n[0].t=e,n[0];if(s===1){const c={x:a*i[0].x+e*i[1].x,y:a*i[0].y+e*i[1].y,t:e};return r&&(c.z=a*i[0].z+e*i[1].z),c}if(s<4){let c=a*a,A=e*e,u,h,d,f=0;s===2?(i=[i[0],i[1],i[2],cMe],u=c,h=a*e*2,d=A):s===3&&(u=c*a,h=c*e*3,d=a*A*3,f=e*A);const g={x:u*i[0].x+h*i[1].x+d*i[2].x+f*i[3].x,y:u*i[0].y+h*i[1].y+d*i[2].y+f*i[3].y,t:e};return r&&(g.z=u*i[0].z+h*i[1].z+d*i[2].z+f*i[3].z),g}const o=JSON.parse(JSON.stringify(n));for(;o.length>1;){for(let c=0;c<o.length-1;c++)o[c]={x:o[c].x+(o[c+1].x-o[c].x)*e,y:o[c].y+(o[c+1].y-o[c].y)*e},typeof o[c].z<"u"&&(o[c].z=o[c].z+(o[c+1].z-o[c].z)*e);o.splice(o.length-1,1)}return o[0].t=e,o[0]},computeWithRatios:function(e,n,r,s){const a=1-e,i=r,o=n;let c=i[0],A=i[1],u=i[2],h=i[3],d;if(c*=a,A*=e,o.length===2)return d=c+A,{x:(c*o[0].x+A*o[1].x)/d,y:(c*o[0].y+A*o[1].y)/d,z:s?(c*o[0].z+A*o[1].z)/d:!1,t:e};if(c*=a,A*=2*a,u*=e*e,o.length===3)return d=c+A+u,{x:(c*o[0].x+A*o[1].x+u*o[2].x)/d,y:(c*o[0].y+A*o[1].y+u*o[2].y)/d,z:s?(c*o[0].z+A*o[1].z+u*o[2].z)/d:!1,t:e};if(c*=a,A*=1.5*a,u*=3*a,h*=e*e*e,o.length===4)return d=c+A+u+h,{x:(c*o[0].x+A*o[1].x+u*o[2].x+h*o[3].x)/d,y:(c*o[0].y+A*o[1].y+u*o[2].y+h*o[3].y)/d,z:s?(c*o[0].z+A*o[1].z+u*o[2].z+h*o[3].z)/d:!1,t:e}},derive:function(e,n){const r=[];for(let s=e,a=s.length,i=a-1;a>1;a--,i--){const o=[];for(let c=0,A;c<i;c++)A={x:i*(s[c+1].x-s[c].x),y:i*(s[c+1].y-s[c].y)},n&&(A.z=i*(s[c+1].z-s[c].z)),o.push(A);r.push(o),s=o}return r},between:function(e,n,r){return n<=e&&e<=r||Ue.approximately(e,n)||Ue.approximately(e,r)},approximately:function(e,n,r){return Au(e-n)<=(r||lMe)},length:function(e){const r=Ue.Tvalues.length;let s=0;for(let a=0,i;a<r;a++)i=.5*Ue.Tvalues[a]+.5,s+=Ue.Cvalues[a]*Ue.arcfn(i,e);return .5*s},map:function(e,n,r,s,a){const i=r-n,o=a-s,c=e-n,A=c/i;return s+o*A},lerp:function(e,n,r){const s={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return n.z!==void 0&&r.z!==void 0&&(s.z=n.z+e*(r.z-n.z)),s},pointToString:function(e){let n=e.x+"/"+e.y;return typeof e.z<"u"&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(Ue.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){const s=n.x-e.x,a=n.y-e.y,i=r.x-e.x,o=r.y-e.y,c=s*o-a*i,A=s*i+a*o;return uu(c,A)},round:function(e,n){const r=""+e,s=r.indexOf(".");return parseFloat(r.substring(0,s+1+n))},dist:function(e,n){const r=e.x-n.x,s=e.y-n.y;return Ri(r*r+s*s)},closest:function(e,n){let r=ys(2,63),s,a;return e.forEach(function(i,o){a=Ue.dist(n,i),a<r&&(r=a,s=o)}),{mdist:r,mpos:s}},abcratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=ys(e,n)+ys(1-e,n),s=r-1;return Au(s/r)},projectionratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=ys(1-e,n),s=ys(e,n)+r;return r/s},lli8:function(e,n,r,s,a,i,o,c){const A=(e*s-n*r)*(a-o)-(e-r)*(a*c-i*o),u=(e*s-n*r)*(i-c)-(n-s)*(a*c-i*o),h=(e-r)*(i-c)-(n-s)*(a-o);return h==0?!1:{x:A/h,y:u/h}},lli4:function(e,n,r,s){const a=e.x,i=e.y,o=n.x,c=n.y,A=r.x,u=r.y,h=s.x,d=s.y;return Ue.lli8(a,i,o,c,A,u,h,d)},lli:function(e,n){return Ue.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new $t(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=Cv,r=Cv,s=Bv,a=Bv;return e.forEach(function(i){const o=i.bbox();n>o.x.min&&(n=o.x.min),r>o.y.min&&(r=o.y.min),s<o.x.max&&(s=o.x.max),a<o.y.max&&(a=o.y.max)}),{x:{min:n,mid:(n+s)/2,max:s,size:s-n},y:{min:r,mid:(r+a)/2,max:a,size:a-r}}},shapeintersections:function(e,n,r,s,a){if(!Ue.bboxoverlap(n,s))return[];const i=[],o=[e.startcap,e.forward,e.back,e.endcap],c=[r.startcap,r.forward,r.back,r.endcap];return o.forEach(function(A){A.virtual||c.forEach(function(u){if(u.virtual)return;const h=A.intersects(u,a);h.length>0&&(h.c1=A,h.c2=u,h.s1=e,h.s2=r,i.push(h))})}),i},makeshape:function(e,n,r){const s=n.points.length,a=e.points.length,i=Ue.makeline(n.points[s-1],e.points[0]),o=Ue.makeline(e.points[a-1],n.points[0]),c={startcap:i,forward:e,back:n,endcap:o,bbox:Ue.findbbox([i,e,n,o])};return c.intersections=function(A){return Ue.shapeintersections(c,c.bbox,A,A.bbox,r)},c},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let s=Cv,a=Bv,i,o;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let c=0,A=r.length;c<A;c++)i=r[c],o=e.get(i),o[n]<s&&(s=o[n]),o[n]>a&&(a=o[n]);return{min:s,mid:(s+a)/2,max:a,size:a-s}},align:function(e,n){const r=n.p1.x,s=n.p1.y,a=-uu(n.p2.y-s,n.p2.x-r),i=function(o){return{x:(o.x-r)*Va(a)-(o.y-s)*sc(a),y:(o.x-r)*sc(a)+(o.y-s)*Va(a)}};return e.map(i)},roots:function(e,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=e.length-1,s=Ue.align(e,n),a=function(k){return 0<=k&&k<=1};if(r===2){const k=s[0].y,N=s[1].y,C=s[2].y,j=k-2*N+C;if(j!==0){const E=-Ri(N*N-k*C),F=-k+N,I=-(E+F)/j,T=-(-E+F)/j;return[I,T].filter(a)}else if(N!==C&&j===0)return[(2*N-C)/(2*N-2*C)].filter(a);return[]}const i=s[0].y,o=s[1].y,c=s[2].y,A=s[3].y;let u=-i+3*o-3*c+A,h=3*i-6*o+3*c,d=-3*i+3*o,f=i;if(Ue.approximately(u,0)){if(Ue.approximately(h,0))return Ue.approximately(d,0)?[]:[-f/d].filter(a);const k=Ri(d*d-4*h*f),N=2*h;return[(k-d)/N,(-d-k)/N].filter(a)}h/=u,d/=u,f/=u;const g=(3*d-h*h)/3,m=g/3,y=(2*h*h*h-9*h*d+27*f)/27,v=y/2,p=v*v+m*m*m;let x,b,w,_,B;if(p<0){const k=-g/3,N=k*k*k,C=Ri(N),j=-y/(2*C),E=j<-1?-1:j>1?1:j,F=oMe(E),I=du(C),T=2*I;return w=T*Va(F/3)-h/3,_=T*Va((F+Sf)/3)-h/3,B=T*Va((F+2*Sf)/3)-h/3,[w,_,B].filter(a)}else{if(p===0)return x=v<0?du(-v):-du(v),w=2*x-h/3,_=-x-h/3,[w,_].filter(a);{const k=Ri(p);return x=du(-v+k),b=du(v+k),[x-b-h/3].filter(a)}}},droots:function(e){if(e.length===3){const n=e[0],r=e[1],s=e[2],a=n-2*r+s;if(a!==0){const i=-Ri(r*r-n*s),o=-n+r,c=-(i+o)/a,A=-(-i+o)/a;return[c,A]}else if(r!==s&&a===0)return[(2*r-s)/(2*(r-s))];return[]}if(e.length===2){const n=e[0],r=e[1];return n!==r?[n/(n-r)]:[]}return[]},curvature:function(e,n,r,s,a){let i,o,c,A,u=0,h=0;const d=Ue.compute(e,n),f=Ue.compute(e,r),g=d.x*d.x+d.y*d.y;if(s?(i=Ri(ys(d.y*f.z-f.y*d.z,2)+ys(d.z*f.x-f.z*d.x,2)+ys(d.x*f.y-f.x*d.y,2)),o=ys(g+d.z*d.z,3/2)):(i=d.x*f.y-d.y*f.x,o=ys(g,3/2)),i===0||o===0)return{k:0,r:0};if(u=i/o,h=o/i,!a){const m=Ue.curvature(e-.001,n,r,s,!0).k,y=Ue.curvature(e+.001,n,r,s,!0).k;A=(y-u+(u-m))/2,c=(Au(y-u)+Au(u-m))/2}return{k:u,r:h,dk:A,adk:c}},inflections:function(e){if(e.length<4)return[];const n=Ue.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,s=n[3].x*n[1].y,a=n[1].x*n[2].y,i=n[3].x*n[2].y,o=18*(-3*r+2*s+3*a-i),c=18*(3*r-s-3*a),A=18*(a-r);if(Ue.approximately(o,0)){if(!Ue.approximately(c,0)){let f=-A/c;if(0<=f&&f<=1)return[f]}return[]}const u=2*o;if(Ue.approximately(u,0))return[];const h=c*c-4*o*A;if(h<0)return[];const d=Math.sqrt(h);return[(d-c)/u,-(c+d)/u].filter(function(f){return 0<=f&&f<=1})},bboxoverlap:function(e,n){const r=["x","y"],s=r.length;for(let a=0,i,o,c,A;a<s;a++)if(i=r[a],o=e[i].mid,c=n[i].mid,A=(e[i].size+n[i].size)/2,Au(o-c)>=A)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){const s=e.bbox(),a=n.bbox(),i=1e5,o=r||.5;if(s.x.size+s.y.size<o&&a.x.size+a.y.size<o)return[(i*(e._t1+e._t2)/2|0)/i+"/"+(i*(n._t1+n._t2)/2|0)/i];let c=e.split(.5),A=n.split(.5),u=[{left:c.left,right:A.left},{left:c.left,right:A.right},{left:c.right,right:A.right},{left:c.right,right:A.left}];u=u.filter(function(d){return Ue.bboxoverlap(d.left.bbox(),d.right.bbox())});let h=[];return u.length===0||(u.forEach(function(d){h=h.concat(Ue.pairiteration(d.left,d.right,o))}),h=h.filter(function(d,f){return h.indexOf(d)===f})),h},getccenter:function(e,n,r){const s=n.x-e.x,a=n.y-e.y,i=r.x-n.x,o=r.y-n.y,c=s*Va($i)-a*sc($i),A=s*sc($i)+a*Va($i),u=i*Va($i)-o*sc($i),h=i*sc($i)+o*Va($i),d=(e.x+n.x)/2,f=(e.y+n.y)/2,g=(n.x+r.x)/2,m=(n.y+r.y)/2,y=d+c,v=f+A,p=g+u,x=m+h,b=Ue.lli8(d,f,y,v,g,m,p,x),w=Ue.dist(b,e);let _=uu(e.y-b.y,e.x-b.x),B=uu(n.y-b.y,n.x-b.x),k=uu(r.y-b.y,r.x-b.x),N;return _<k?((_>B||B>k)&&(_+=Sf),_>k&&(N=k,k=_,_=N)):k<B&&B<_?(N=k,k=_,_=N):k+=Sf,b.s=_,b.e=k,b.r=w,b},numberSort:function(e,n){return e-n}};class td{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return Ue.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var r=n[0].bbox(),s=1;s<n.length;s++)Ue.expandbox(r,n[s].bbox());return r}offset(n){const r=[];return this.curves.forEach(function(s){r.push(...s.offset(n))}),new td(r)}}const{abs:hu,min:wN,max:bN,cos:AMe,sin:uMe,acos:dMe,sqrt:fu}=Math,hMe=Math.PI;class $t{constructor(n){let r=n&&n.forEach?n:Array.from(arguments).slice(),s=!1;if(typeof r[0]=="object"){s=r.length;const g=[];r.forEach(function(m){["x","y","z"].forEach(function(y){typeof m[y]<"u"&&g.push(m[y])})}),r=g}let a=!1;const i=r.length;if(s){if(s>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(i!==6&&i!==8&&i!==9&&i!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!a&&(i===9||i===12)||n&&n[0]&&typeof n[0].z<"u",c=this.points=[];for(let g=0,m=o?3:2;g<i;g+=m){var A={x:r[g],y:r[g+1]};o&&(A.z=r[g+2]),c.push(A)}const u=this.order=c.length-1,h=this.dims=["x","y"];o&&h.push("z"),this.dimlen=h.length;const d=Ue.align(c,{p1:c[0],p2:c[u]}),f=Ue.dist(c[0],c[u]);this._linear=d.reduce((g,m)=>g+hu(m.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,r,s,a){if(typeof a>"u"&&(a=.5),a===0)return new $t(r,r,s);if(a===1)return new $t(n,r,r);const i=$t.getABC(2,n,r,s,a);return new $t(n,i.A,s)}static cubicFromPoints(n,r,s,a,i){typeof a>"u"&&(a=.5);const o=$t.getABC(3,n,r,s,a);typeof i>"u"&&(i=Ue.dist(r,o.C));const c=i*(1-a)/a,A=Ue.dist(n,s),u=(s.x-n.x)/A,h=(s.y-n.y)/A,d=i*u,f=i*h,g=c*u,m=c*h,y={x:r.x-d,y:r.y-f},v={x:r.x+g,y:r.y+m},p=o.A,x={x:p.x+(y.x-p.x)/(1-a),y:p.y+(y.y-p.y)/(1-a)},b={x:p.x+(v.x-p.x)/a,y:p.y+(v.y-p.y)/a},w={x:n.x+(x.x-n.x)/a,y:n.y+(x.y-n.y)/a},_={x:s.x+(b.x-s.x)/(1-a),y:s.y+(b.y-s.y)/(1-a)};return new $t(n,w,_,s)}static getUtils(){return Ue}getUtils(){return $t.getUtils()}static get PolyBezier(){return td}valueOf(){return this.toString()}toString(){return Ue.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,r=n[0].x,s=n[0].y,a=["M",r,s,this.order===2?"Q":"C"];for(let i=1,o=n.length;i<o;i++)a.push(n[i].x),a.push(n[i].y);return a.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,r){return""+r+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=Ue.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,r=Ue.angle(n[0],n[this.order],n[1]);this.clockwise=r>0}length(){return Ue.length(this.derivative.bind(this))}static getABC(n=2,r,s,a,i=.5){const o=Ue.projectionratio(i,n),c=1-o,A={x:o*r.x+c*a.x,y:o*r.y+c*a.y},u=Ue.abcratio(i,n);return{A:{x:s.x+(s.x-A.x)/u,y:s.y+(s.y-A.y)/u},B:s,C:A,S:r,E:a}}getABC(n,r){r=r||this.get(n);let s=this.points[0],a=this.points[this.order];return $t.getABC(this.order,s,r,a,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r=0,s,a;r<n;r++)a=r/(n-1),s=this.compute(a),s.t=a,this._lut.push(s);return this._lut}on(n,r){r=r||5;const s=this.getLUT(),a=[];for(let i=0,o,c=0;i<s.length;i++)o=s[i],Ue.dist(o,n)<r&&(a.push(o),c+=i/s.length);return a.length?t/=a.length:!1}project(n){const r=this.getLUT(),s=r.length-1,a=Ue.closest(r,n),i=a.mpos,o=(i-1)/s,c=(i+1)/s,A=.1/s;let u=a.mdist,h=o,d=h,f;u+=1;for(let g;h<c+A;h+=A)f=this.compute(h),g=Ue.dist(n,f),g<u&&(u=g,d=h);return d=d<0?0:d>1?1:d,f=this.compute(d),f.t=d,f.d=u,f}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?Ue.computeWithRatios(n,this.points,this.ratios,this._3d):Ue.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,r=[n[0]],s=n.length;for(let a=1,i,o;a<s;a++)i=n[a],o=n[a-1],r[a]={x:(s-a)/s*i.x+a/s*o.x,y:(s-a)/s*i.y+a/s*o.y};return r[s]=n[s-1],new $t(r)}derivative(n){return Ue.compute(n,this.dpoints[0],this._3d)}dderivative(n){return Ue.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new $t(Ue.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return Ue.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return Ue.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const r=this.derivative(n),s=fu(r.x*r.x+r.y*r.y);return{t:n,x:-r.y/s,y:r.x/s}}__normal3(n){const r=this.derivative(n),s=this.derivative(n+.01),a=fu(r.x*r.x+r.y*r.y+r.z*r.z),i=fu(s.x*s.x+s.y*s.y+s.z*s.z);r.x/=a,r.y/=a,r.z/=a,s.x/=i,s.y/=i,s.z/=i;const o={x:s.y*r.z-s.z*r.y,y:s.z*r.x-s.x*r.z,z:s.x*r.y-s.y*r.x},c=fu(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=c,o.y/=c,o.z/=c;const A=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:n,x:A[0]*r.x+A[1]*r.y+A[2]*r.z,y:A[3]*r.x+A[4]*r.y+A[5]*r.z,z:A[6]*r.x+A[7]*r.y+A[8]*r.z}}hull(n){let r=this.points,s=[],a=[],i=0;for(a[i++]=r[0],a[i++]=r[1],a[i++]=r[2],this.order===3&&(a[i++]=r[3]);r.length>1;){s=[];for(let o=0,c,A=r.length-1;o<A;o++)c=Ue.lerp(n,r[o],r[o+1]),a[i++]=c,s.push(c);r=s}return a}split(n,r){if(n===0&&r)return this.split(r).left;if(r===1)return this.split(n).right;const s=this.hull(n),a={left:this.order===2?new $t([s[0],s[3],s[5]]):new $t([s[0],s[4],s[7],s[9]]),right:this.order===2?new $t([s[5],s[4],s[2]]):new $t([s[9],s[8],s[6],s[3]]),span:s};return a.left._t1=Ue.map(0,0,1,this._t1,this._t2),a.left._t2=Ue.map(n,0,1,this._t1,this._t2),a.right._t1=Ue.map(n,0,1,this._t1,this._t2),a.right._t2=Ue.map(1,0,1,this._t1,this._t2),r?(r=Ue.map(r,n,1,0,1),a.right.split(r).left):a}extrema(){const n={};let r=[];return this.dims.forEach((function(s){let a=function(o){return o[s]},i=this.dpoints[0].map(a);n[s]=Ue.droots(i),this.order===3&&(i=this.dpoints[1].map(a),n[s]=n[s].concat(Ue.droots(i))),n[s]=n[s].filter(function(o){return o>=0&&o<=1}),r=r.concat(n[s].sort(Ue.numberSort))}).bind(this)),n.values=r.sort(Ue.numberSort).filter(function(s,a){return r.indexOf(s)===a}),n}bbox(){const n=this.extrema(),r={};return this.dims.forEach((function(s){r[s]=Ue.getminmax(this,s,n[s])}).bind(this)),r}overlaps(n){const r=this.bbox(),s=n.bbox();return Ue.bboxoverlap(r,s)}offset(n,r){if(typeof r<"u"){const s=this.get(n),a=this.normal(n),i={c:s,n:a,x:s.x+a.x*r,y:s.y+a.y*r};return this._3d&&(i.z=s.z+a.z*r),i}if(this._linear){const s=this.normal(0),a=this.points.map(function(i){const o={x:i.x+n*s.x,y:i.y+n*s.y};return i.z&&s.z&&(o.z=i.z+n*s.z),o});return[new $t(a)]}return this.reduce().map(function(s){return s._linear?s.offset(n)[0]:s.scale(n)})}simple(){if(this.order===3){const a=Ue.angle(this.points[0],this.points[3],this.points[1]),i=Ue.angle(this.points[0],this.points[3],this.points[2]);if(a>0&&i<0||a<0&&i>0)return!1}const n=this.normal(0),r=this.normal(1);let s=n.x*r.x+n.y*r.y;return this._3d&&(s+=n.z*r.z),hu(dMe(s))<hMe/3}reduce(){let n,r=0,s=0,a=.01,i,o=[],c=[],A=this.extrema().values;for(A.indexOf(0)===-1&&(A=[0].concat(A)),A.indexOf(1)===-1&&A.push(1),r=A[0],n=1;n<A.length;n++)s=A[n],i=this.split(r,s),i._t1=r,i._t2=s,o.push(i),r=s;return o.forEach(function(u){for(r=0,s=0;s<=1;)for(s=r+a;s<=1+a;s+=a)if(i=u.split(r,s),!i.simple()){if(s-=a,hu(r-s)<a)return[];i=u.split(r,s),i._t1=Ue.map(r,0,1,u._t1,u._t2),i._t2=Ue.map(s,0,1,u._t1,u._t2),c.push(i),r=s;break}r<1&&(i=u.split(r,1),i._t1=Ue.map(r,0,1,u._t1,u._t2),i._t2=u._t2,c.push(i))}),c}translate(n,r,s){s=typeof s=="number"?s:r;const a=this.order;let i=this.points.map((o,c)=>(1-c/a)*r+c/a*s);return new $t(this.points.map((o,c)=>({x:o.x+n.x*i[c],y:o.y+n.y*i[c]})))}scale(n){const r=this.order;let s=!1;if(typeof n=="function"&&(s=n),s&&r===2)return this.raise().scale(s);const a=this.clockwise,i=this.points;if(this._linear)return this.translate(this.normal(0),s?s(0):n,s?s(1):n);const o=s?s(0):n,c=s?s(1):n,A=[this.offset(0,10),this.offset(1,10)],u=[],h=Ue.lli4(A[0],A[0].c,A[1],A[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(d){const f=u[d*r]=Ue.copy(i[d*r]);f.x+=(d?c:o)*A[d].n.x,f.y+=(d?c:o)*A[d].n.y}),s?([0,1].forEach(function(d){if(!(r===2&&d)){var f=i[d+1],g={x:f.x-h.x,y:f.y-h.y},m=s?s((d+1)/r):n;s&&!a&&(m=-m);var y=fu(g.x*g.x+g.y*g.y);g.x/=y,g.y/=y,u[d+1]={x:f.x+m*g.x,y:f.y+m*g.y}}}),new $t(u)):([0,1].forEach(d=>{if(r===2&&d)return;const f=u[d*r],g=this.derivative(d),m={x:f.x+g.x,y:f.y+g.y};u[d+1]=Ue.lli4(f,m,h,i[d+1])}),new $t(u))}outline(n,r,s,a){if(r=r===void 0?n:r,this._linear){const _=this.normal(0),B=this.points[0],k=this.points[this.points.length-1];let N,C,j;s===void 0&&(s=n,a=r),N={x:B.x+_.x*n,y:B.y+_.y*n},j={x:k.x+_.x*s,y:k.y+_.y*s},C={x:(N.x+j.x)/2,y:(N.y+j.y)/2};const E=[N,C,j];N={x:B.x-_.x*r,y:B.y-_.y*r},j={x:k.x-_.x*a,y:k.y-_.y*a},C={x:(N.x+j.x)/2,y:(N.y+j.y)/2};const F=[j,C,N],I=Ue.makeline(F[2],E[0]),T=Ue.makeline(E[2],F[0]),L=[I,new $t(E),T,new $t(F)];return new td(L)}const i=this.reduce(),o=i.length,c=[];let A=[],u,h=0,d=this.length();const f=typeof s<"u"&&typeof a<"u";function g(_,B,k,N,C){return function(j){const E=N/k,F=(N+C)/k,I=B-_;return Ue.map(j,0,1,_+E*I,_+F*I)}}i.forEach(function(_){const B=_.length();f?(c.push(_.scale(g(n,s,d,h,B))),A.push(_.scale(g(-r,-a,d,h,B)))):(c.push(_.scale(n)),A.push(_.scale(-r))),h+=B}),A=A.map(function(_){return u=_.points,u[3]?_.points=[u[3],u[2],u[1],u[0]]:_.points=[u[2],u[1],u[0]],_}).reverse();const m=c[0].points[0],y=c[o-1].points[c[o-1].points.length-1],v=A[o-1].points[A[o-1].points.length-1],p=A[0].points[0],x=Ue.makeline(v,m),b=Ue.makeline(y,p),w=[x].concat(c).concat([b]).concat(A);return new td(w)}outlineshapes(n,r,s){r=r||n;const a=this.outline(n,r).curves,i=[];for(let o=1,c=a.length;o<c/2;o++){const A=Ue.makeshape(a[o],a[c-o],s);A.startcap.virtual=o>1,A.endcap.virtual=o<c/2-1,i.push(A)}return i}intersects(n,r){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof $t&&(n=n.reduce()),this.curveintersects(this.reduce(),n,r)):this.selfintersects(r)}lineIntersects(n){const r=wN(n.p1.x,n.p2.x),s=wN(n.p1.y,n.p2.y),a=bN(n.p1.x,n.p2.x),i=bN(n.p1.y,n.p2.y);return Ue.roots(this.points,n).filter(o=>{var c=this.get(o);return Ue.between(c.x,r,a)&&Ue.between(c.y,s,i)})}selfintersects(n){const r=this.reduce(),s=r.length-2,a=[];for(let i=0,o,c,A;i<s;i++)c=r.slice(i,i+1),A=r.slice(i+2),o=this.curveintersects(c,A,n),a.push(...o);return a}curveintersects(n,r,s){const a=[];n.forEach(function(o){r.forEach(function(c){o.overlaps(c)&&a.push({left:o,right:c})})});let i=[];return a.forEach(function(o){const c=Ue.pairiteration(o.left,o.right,s);c.length>0&&(i=i.concat(c))}),i}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,r,s,a){const i=(a-s)/4,o=this.get(s+i),c=this.get(a-i),A=Ue.dist(n,r),u=Ue.dist(n,o),h=Ue.dist(n,c);return hu(u-A)+hu(h-A)}_iterate(n,r){let s=0,a=1,i;do{i=0,a=1;let o=this.get(s),c,A,u,h,d=!1,f=!1,g,m=a,y=1;do if(f=d,h=u,m=(s+a)/2,c=this.get(m),A=this.get(a),u=Ue.getccenter(o,c,A),u.interval={start:s,end:a},d=this._error(u,o,s,a)<=n,g=f&&!d,g||(y=a),d){if(a>=1){if(u.interval.end=y=1,h=u,a>1){let p={x:u.x+u.r*AMe(u.e),y:u.y+u.r*uMe(u.e)};u.e+=Ue.angle({x:u.x,y:u.y},p,this.get(1))}break}a=a+(a-s)/2}else a=m;while(!g&&i++<100);if(i>=100)break;h=h||u,r.push(h),s=y}while(a<1);return r}}function xw(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function fMe(e){if(Array.isArray(e))return e}function gMe(e){if(Array.isArray(e))return xw(e)}function mMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pMe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function yMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xMe(e,n){if(e==null)return{};var r,s,a=wMe(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],n.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wMe(e,n){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(n.includes(s))continue;r[s]=e[s]}return r}function bMe(e,n){return fMe(e)||pMe(e,n)||cQ(e,n)||yMe()}function _Me(e){return gMe(e)||mMe(e)||cQ(e)||vMe()}function CMe(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function BMe(e){var n=CMe(e,"string");return typeof n=="symbol"?n:n+""}function cQ(e,n){if(e){if(typeof e=="string")return xw(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xw(e,n):void 0}}var SMe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(c){return{keyAccessor:c,isProp:!(c instanceof Function)}}),i=e.reduce(function(c,A){var u=c,h=A;return a.forEach(function(d,f){var g=d.keyAccessor,m=d.isProp,y;if(m){var v=h,p=v[g],x=xMe(v,[g].map(BMe));y=p,h=x}else y=g(h,f);f+1<a.length?(u.hasOwnProperty(y)||(u[y]={}),u=u[y]):r?(u.hasOwnProperty(y)||(u[y]=[]),u[y].push(h)):u[y]=h}),c},{});r instanceof Function&&function c(A){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===a.length?Object.keys(A).forEach(function(h){return A[h]=r(A[h])}):Object.values(A).forEach(function(h){return c(h,u+1)})}(i);var o=i;return s&&(o=[],function c(A){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===a.length?o.push({keys:u,vals:A}):Object.entries(A).forEach(function(h){var d=bMe(h,2),f=d[0],g=d[1];return c(g,[].concat(_Me(u),[f]))})}(i),n instanceof Array&&n.length===0&&o.length===1&&(o[0].keys=[])),o};function kMe(e){for(var n=e.length/6|0,r=new Array(n),s=0;s<n;)r[s]="#"+e.slice(s*6,++s*6);return r}const jMe=kMe("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function NMe(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var EMe=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;NMe(EMe);function ww(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function TMe(e){if(Array.isArray(e))return e}function FMe(e){if(Array.isArray(e))return ww(e)}function _N(e,n,r){if(AQ())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,n);var a=new(e.bind.apply(e,s));return a}function qd(e,n,r){return(n=DMe(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function AQ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AQ=function(){return!!e})()}function IMe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UMe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function PMe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MMe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CN(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ac(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?CN(Object(r),!0).forEach(function(s){qd(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CN(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function nd(e,n){return TMe(e)||UMe(e,n)||uQ(e,n)||PMe()}function Bs(e){return FMe(e)||IMe(e)||uQ(e)||MMe()}function QMe(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function DMe(e){var n=QMe(e,"string");return typeof n=="symbol"?n:n+""}function bw(e){"@babel/helpers - typeof";return bw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bw(e)}function uQ(e,n){if(e){if(typeof e=="string")return ww(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ww(e,n):void 0}}var RMe=mp(jMe);function BN(e,n,r){!n||typeof r!="string"||e.filter(function(s){return!s[r]}).forEach(function(s){s[r]=RMe(n(s))})}function $Me(e,n){var r=e.nodes,s=e.links,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=a.nodeFilter,o=i===void 0?function(){return!0}:i,c=a.onLoopError,A=c===void 0?function(g){throw"Invalid DAG structure! Found cycle in node path: ".concat(g.join(" -> "),".")}:c,u={};r.forEach(function(g){return u[n(g)]={data:g,out:[],depth:-1,skip:!o(g)}}),s.forEach(function(g){var m=g.source,y=g.target,v=w(m),p=w(y);if(!u.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!u.hasOwnProperty(p))throw"Missing target node with id: ".concat(p);var x=u[v],b=u[p];x.out.push(b);function w(_){return bw(_)==="object"?n(_):_}});var h=[];f(Object.values(u));var d=Object.assign.apply(Object,[{}].concat(Bs(Object.entries(u).filter(function(g){var m=nd(g,2),y=m[1];return!y.skip}).map(function(g){var m=nd(g,2),y=m[0],v=m[1];return qd({},y,v.depth)}))));return d;function f(g){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var w=g[p];if(m.indexOf(w)!==-1){var _=[].concat(Bs(m.slice(m.indexOf(w))),[w]).map(function(B){return n(B.data)});return h.some(function(B){return B.length===_.length&&B.every(function(k,N){return k===_[N]})})||(h.push(_),A(_)),1}y>w.depth&&(w.depth=y,f(w.out,[].concat(Bs(m),[w]),y+(w.skip?0:1)))},p=0,x=g.length;p<x;p++)v()}}var OMe=2,rr=function(n,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},SN=function(n,r){if(!r.isShadow){var s=jt(r.linkDirectionalParticles);r.graphData.links.forEach(function(a){var i=Math.round(Math.abs(s(a)));i?a.__photons=Bs(Array(i)).map(function(){return{}}):delete a.__photons})}},em=dC({props:{graphData:{default:{nodes:[],links:[]},onChange:function(n,r){r.engineRunning=!1,SN(n,r)}},dagMode:{onChange:function(n,r){!n&&(r.graphData.nodes||[]).forEach(function(s){return s.fx=s.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(n){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:rr},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:rr},nodeColor:{default:"color",triggerUpdate:!1,onChange:rr},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:rr},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:rr},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:rr},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:rr},linkColor:{default:"color",triggerUpdate:!1,onChange:rr},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:rr},linkWidth:{default:1,triggerUpdate:!1,onChange:rr},linkCurvature:{default:0,triggerUpdate:!1,onChange:rr},linkCanvasObject:{triggerUpdate:!1,onChange:rr},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:rr},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:rr},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:rr},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:rr},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:SN},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaDecay(n)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaTarget(n)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.velocityDecay(n)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(n,r,s){return s===void 0?n.forceLayout.force(r):(n.forceLayout.force(r,s),this)},d3ReheatSimulation:function(n){return n.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(n){return n.cntTicks=0,n.startTickTime=new Date,n.engineRunning=!0,this},isEngineRunning:function(n){return!!n.engineRunning},tickFrame:function(n){return!n.isShadow&&r(),a(),!n.isShadow&&i(),!n.isShadow&&o(),s(),this;function r(){n.engineRunning&&(++n.cntTicks>n.cooldownTicks||new Date-n.startTickTime>n.cooldownTime||n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin?(n.engineRunning=!1,n.onEngineStop()):(n.forceLayout.tick(),n.onEngineTick()))}function s(){var c=jt(n.nodeVisibility),A=jt(n.nodeVal),u=jt(n.nodeColor),h=jt(n.nodeCanvasObjectMode),d=n.ctx,f=n.isShadow/n.globalScale,g=n.graphData.nodes.filter(c);d.save(),g.forEach(function(m){var y=h(m);if(n.nodeCanvasObject&&(y==="before"||y==="replace")&&(n.nodeCanvasObject(m,d,n.globalScale),y==="replace")){d.restore();return}var v=Math.sqrt(Math.max(0,A(m)||1))*n.nodeRelSize+f;d.beginPath(),d.arc(m.x,m.y,v,0,2*Math.PI,!1),d.fillStyle=u(m)||"rgba(31, 120, 180, 0.92)",d.fill(),n.nodeCanvasObject&&y==="after"&&n.nodeCanvasObject(m,n.ctx,n.globalScale)}),d.restore()}function a(){var c=jt(n.linkVisibility),A=jt(n.linkColor),u=jt(n.linkWidth),h=jt(n.linkLineDash),d=jt(n.linkCurvature),f=jt(n.linkCanvasObjectMode),g=n.ctx,m=n.isShadow*2,y=n.graphData.links.filter(c);y.forEach(B);var v=[],p=[],x=y;if(n.linkCanvasObject){var b=[],w=[];y.forEach(function(k){return({before:v,after:p,replace:b}[f(k)]||w).push(k)}),x=[].concat(Bs(v),p,w),v=v.concat(b)}g.save(),v.forEach(function(k){return n.linkCanvasObject(k,g,n.globalScale)}),g.restore();var _=SMe(x,[A,u,h]);g.save(),Object.entries(_).forEach(function(k){var N=nd(k,2),C=N[0],j=N[1],E=!C||C==="undefined"?"rgba(0,0,0,0.15)":C;Object.entries(j).forEach(function(F){var I=nd(F,2),T=I[0],L=I[1],P=(T||1)/n.globalScale+m;Object.entries(L).forEach(function(O){var Q=nd(O,2);Q[0];var R=Q[1],M=h(R[0]);g.beginPath(),R.forEach(function(G){var V=G.source,K=G.target;if(!(!V||!K||!V.hasOwnProperty("x")||!K.hasOwnProperty("x"))){g.moveTo(V.x,V.y);var se=G.__controlPoints;se?g[se.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(g,Bs(se).concat([K.x,K.y])):g.lineTo(K.x,K.y)}}),g.strokeStyle=E,g.lineWidth=P,g.setLineDash(M||[]),g.stroke()})})}),g.restore(),g.save(),p.forEach(function(k){return n.linkCanvasObject(k,g,n.globalScale)}),g.restore();function B(k){var N=d(k);if(!N){k.__controlPoints=null;return}var C=k.source,j=k.target;if(!(!C||!j||!C.hasOwnProperty("x")||!j.hasOwnProperty("x"))){var E=Math.sqrt(Math.pow(j.x-C.x,2)+Math.pow(j.y-C.y,2));if(E>0){var F=Math.atan2(j.y-C.y,j.x-C.x),I=E*N,T={x:(C.x+j.x)/2+I*Math.cos(F-Math.PI/2),y:(C.y+j.y)/2+I*Math.sin(F-Math.PI/2)};k.__controlPoints=[T.x,T.y]}else{var L=N*70;k.__controlPoints=[j.x,j.y-L,j.x+L,j.y]}}}}function i(){var c=1.6,A=.2,u=jt(n.linkDirectionalArrowLength),h=jt(n.linkDirectionalArrowRelPos),d=jt(n.linkVisibility),f=jt(n.linkDirectionalArrowColor||n.linkColor),g=jt(n.nodeVal),m=n.ctx;m.save(),n.graphData.links.filter(d).forEach(function(y){var v=u(y);if(!(!v||v<0)){var p=y.source,x=y.target;if(!(!p||!x||!p.hasOwnProperty("x")||!x.hasOwnProperty("x"))){var b=Math.sqrt(Math.max(0,g(p)||1))*n.nodeRelSize,w=Math.sqrt(Math.max(0,g(x)||1))*n.nodeRelSize,_=Math.min(1,Math.max(0,h(y))),B=f(y)||"rgba(0,0,0,0.28)",k=v/c/2,N=y.__controlPoints&&_N($t,[p.x,p.y].concat(Bs(y.__controlPoints),[x.x,x.y])),C=N?function(P){return N.get(P)}:function(P){return{x:p.x+(x.x-p.x)*P||0,y:p.y+(x.y-p.y)*P||0}},j=N?N.length():Math.sqrt(Math.pow(x.x-p.x,2)+Math.pow(x.y-p.y,2)),E=b+v+(j-b-w-v)*_,F=C(E/j),I=C((E-v)/j),T=C((E-v*(1-A))/j),L=Math.atan2(F.y-I.y,F.x-I.x)-Math.PI/2;m.beginPath(),m.moveTo(F.x,F.y),m.lineTo(I.x+k*Math.cos(L),I.y+k*Math.sin(L)),m.lineTo(T.x,T.y),m.lineTo(I.x-k*Math.cos(L),I.y-k*Math.sin(L)),m.fillStyle=B,m.fill()}}}),m.restore()}function o(){var c=jt(n.linkDirectionalParticles),A=jt(n.linkDirectionalParticleSpeed),u=jt(n.linkDirectionalParticleOffset),h=jt(n.linkDirectionalParticleWidth),d=jt(n.linkVisibility),f=jt(n.linkDirectionalParticleColor||n.linkColor),g=n.ctx;g.save(),n.graphData.links.filter(d).forEach(function(m){var y=c(m);if(!(!m.hasOwnProperty("__photons")||!m.__photons.length)){var v=m.source,p=m.target;if(!(!v||!p||!v.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var x=A(m),b=Math.abs(u(m)),w=m.__photons||[],_=Math.max(0,h(m)/2)/Math.sqrt(n.globalScale),B=f(m)||"rgba(0,0,0,0.28)";g.fillStyle=B;var k=m.__controlPoints?_N($t,[v.x,v.y].concat(Bs(m.__controlPoints),[p.x,p.y])):null,N=0,C=!1;w.forEach(function(j){var E=!!j.__singleHop;if(j.hasOwnProperty("__progressRatio")||(j.__progressRatio=E?0:(N+b)/y),!E&&N++,j.__progressRatio+=x,j.__progressRatio>=1)if(!E)j.__progressRatio=j.__progressRatio%1;else{C=!0;return}var F=j.__progressRatio,I=k?k.get(F):{x:v.x+(p.x-v.x)*F||0,y:v.y+(p.y-v.y)*F||0};n.linkDirectionalParticleCanvasObject?n.linkDirectionalParticleCanvasObject(I.x,I.y,m,g,n.globalScale):(g.beginPath(),g.arc(I.x,I.y,_,0,2*Math.PI,!1),g.fill())}),C&&(m.__photons=m.__photons.filter(function(j){return!j.__singleHop||j.__progressRatio<=1}))}}}),g.restore()}},emitParticle:function(n,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:sMe().force("link",XPe()).force("charge",aMe()).force("center",JUe()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(n,r){r.ctx=n},update:function(n,r){n.engineRunning=!1,n.onUpdate(),n.nodeAutoColorBy!==null&&BN(n.graphData.nodes,jt(n.nodeAutoColorBy),n.nodeColor),n.linkAutoColorBy!==null&&BN(n.graphData.links,jt(n.linkAutoColorBy),n.linkColor),n.graphData.links.forEach(function(f){f.source=f[n.linkSource],f.target=f[n.linkTarget]}),n.forceLayout.stop().alpha(1).nodes(n.graphData.nodes);var s=n.forceLayout.force("link");s&&s.id(function(f){return f[n.nodeId]}).links(n.graphData.links);var a=n.dagMode&&$Me(n.graphData,function(f){return f[n.nodeId]},{nodeFilter:n.dagNodeFilter,onLoopError:n.onDagError||void 0}),i=Math.max.apply(Math,Bs(Object.values(a||[]))),o=n.dagLevelDistance||n.graphData.nodes.length/(i||1)*OMe*(["radialin","radialout"].indexOf(n.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var c=["lr","rl"].includes(r.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(f){return delete f[c]})}if(["lr","rl","td","bu"].includes(n.dagMode)){var A=["rl","bu"].includes(n.dagMode),u=function(g){return(a[g[n.nodeId]]-i/2)*o*(A?-1:1)},h=["lr","rl"].includes(n.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(f){return f[h]=u(f)})}n.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(n.dagMode)!==-1?iMe(function(f){var g=a[f[n.nodeId]]||-1;return(n.dagMode==="radialin"?i-g:g)*o}).strength(function(f){return n.dagNodeFilter(f)?1:0}):null);for(var d=0;d<n.warmupTicks&&!(n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin);d++)n.forceLayout.tick();this.resetCountdown(),n.onFinishUpdate()}});function dQ(e,n){var r=e instanceof Array?e:[e],s=new n;return s._destructor&&s._destructor(),{linkProp:function(i){return{default:s[i](),onChange:function(c,A){r.forEach(function(u){return A[u][i](c)})},triggerUpdate:!1}},linkMethod:function(i){return function(o){for(var c=arguments.length,A=new Array(c>1?c-1:0),u=1;u<c;u++)A[u-1]=arguments[u];var h=[];return r.forEach(function(d){var f=o[d],g=f[i].apply(f,A);g!==f&&h.push(g)}),h.length?h[0]:this}}}}var LMe=800,HMe=4,zMe=5,hQ=dQ("forceGraph",em),KMe=dQ(["forceGraph","shadowGraph"],em),GMe=Object.assign.apply(Object,Bs(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return qd({},e,hQ.linkProp(e))})).concat(Bs(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return qd({},e,KMe.linkProp(e))})))),WMe=Object.assign.apply(Object,Bs(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return qd({},e,hQ.linkMethod(e))})));function Sv(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;n===300&&r===150&&(n=r=0);var s=window.devicePixelRatio;n/=s,r/=s,[e.canvas,e.shadowCanvas].forEach(function(i){i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px"),i.width=e.width*s,i.height=e.height*s,!n&&!r&&i.getContext("2d").scale(s,s)});var a=Ca(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/a,(e.height-r)/2/a),e.needsRedraw=!0}}function fQ(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function kN(e,n,r){e.save(),fQ(e),e.clearRect(0,0,n,r),e.restore()}var VMe=dC({props:ac({width:{default:window.innerWidth,onChange:function(n,r){return Sv(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(n,r){return Sv(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(n,r){[n.nodes,n.links].every(function(a){return(a||[]).every(function(i){return!i.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:n.nodes},{type:"Link",objs:n.links}].forEach(s),r.forceGraph.graphData(n),r.shadowGraph.graphData(n);function s(a){var i=a.type,o=a.objs;o.filter(function(c){if(!c.hasOwnProperty("__indexColor"))return!0;var A=r.colorTracker.lookup(c.__indexColor);return!A||!A.hasOwnProperty("d")||A.d!==c}).forEach(function(c){c.__indexColor=r.colorTracker.register({type:i,d:c})})}},triggerUpdate:!1},backgroundColor:{onChange:function(n,r){r.canvas&&n&&(r.canvas.style.background=n)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(n,r){r.shadowGraph.nodeCanvasObject(n?function(s,a,i){return n(s,s.__indexColor,a,i)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(n,r){r.shadowGraph.linkCanvasObject(n?function(s,a,i){return n(s,s.__indexColor,a,i)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(n,r){r.zoom.scaleExtent([n,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(n,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],n])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(n,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},GMe),aliases:{stopAnimation:"pauseAnimation"},methods:ac({graph2ScreenCoords:function(n,r,s){var a=Ca(n.canvas);return{x:r*a.k+a.x,y:s*a.k+a.y}},screen2GraphCoords:function(n,r,s){var a=Ca(n.canvas);return{x:(r-a.x)/a.k,y:(s-a.y)/a.k}},centerAt:function(n,r,s,a){if(!n.canvas)return null;if(r!==void 0||s!==void 0){var i=Object.assign({},r!==void 0?{x:r}:{},s!==void 0?{y:s}:{});return a?n.tweenGroup.add(new Yj(o()).to(i,a).easing(ul.Quadratic.Out).onUpdate(c).start()):c(i),this}return o();function o(){var A=Ca(n.canvas);return{x:(n.width/2-A.x)/A.k,y:(n.height/2-A.y)/A.k}}function c(A){var u=A.x,h=A.y;n.zoom.translateTo(n.zoom.__baseElem,u===void 0?o().x:u,h===void 0?o().y:h),n.needsRedraw=!0}},zoom:function(n,r,s){if(!n.canvas)return null;if(r!==void 0)return s?n.tweenGroup.add(new Yj({k:a()}).to({k:r},s).easing(ul.Quadratic.Out).onUpdate(function(o){var c=o.k;return i(c)}).start()):i(r),this;return a();function a(){return Ca(n.canvas).k}function i(o){n.zoom.scaleTo(n.zoom.__baseElem,o),n.needsRedraw=!0}},zoomToFit:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,a=arguments.length,i=new Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];var c=this.getGraphBbox.apply(this,i);if(c){var A={x:(c.x[0]+c.x[1])/2,y:(c.y[0]+c.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(n.width-s*2)/(c.x[1]-c.x[0]),(n.height-s*2)/(c.y[1]-c.y[0])));this.centerAt(A.x,A.y,r),this.zoom(u,r)}return this},getGraphBbox:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},s=jt(n.nodeVal),a=function(c){return Math.sqrt(Math.max(0,s(c)||1))*n.nodeRelSize},i=n.graphData.nodes.filter(r).map(function(o){return{x:o.x,y:o.y,r:a(o)}});return i.length?{x:[kg(i,function(o){return o.x-o.r}),Sg(i,function(o){return o.x+o.r})],y:[kg(i,function(o){return o.y-o.r}),Sg(i,function(o){return o.y+o.r})]}:null},pauseAnimation:function(n){return n.animationFrameRequestId&&(cancelAnimationFrame(n.animationFrameRequestId),n.animationFrameRequestId=null),this},resumeAnimation:function(n){return n.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},WMe),stateInit:function(){return{lastSetZoom:1,zoom:aIe(),forceGraph:new em,shadowGraph:new em().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new EUe,tweenGroup:new RM}},init:function(n,r){var s=this;n.innerHTML="";var a=document.createElement("div");a.classList.add("force-graph-container"),a.style.position="relative",n.appendChild(a),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),a.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var i=r.canvas.getContext("2d"),o=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),c={x:-1e12,y:-1e12},A=function(){var d=null,f=window.devicePixelRatio,g=c.x>0&&c.y>0?o.getImageData(c.x*f,c.y*f,1,1):null;return g&&(d=r.colorTracker.lookup(g.data)),d};Cs(r.canvas).call(GTe().subject(function(){if(!r.enableNodeDrag)return null;var h=A();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var d=h.subject;d.__initialDragPos={x:d.x,y:d.y,fx:d.fx,fy:d.fy},h.active||(d.fx=d.x,d.fy=d.y),r.canvas.classList.add("grabbable")}).on("drag",function(h){var d=h.subject,f=d.__initialDragPos,g=h,m=Ca(r.canvas).k,y={x:f.x+(g.x-f.x)/m-d.x,y:f.y+(g.y-f.y)/m-d.y};["x","y"].forEach(function(v){return d["f".concat(v)]=d[v]=f[v]+(g[v]-f[v])/m}),!(!d.__dragged&&zMe>=Math.sqrt(B5e(["x","y"].map(function(v){return Math.pow(h[v]-f[v],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,d.__dragged=!0,r.onNodeDrag(d,y))}).on("end",function(h){var d=h.subject,f=d.__initialDragPos,g={x:d.x-f.x,y:d.y-f.y};f.fx===void 0&&(d.fx=void 0),f.fy===void 0&&(d.fy=void 0),delete d.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,d.__dragged&&(delete d.__dragged,r.onNodeDragEnd(d,g))})),r.zoom(r.zoom.__baseElem=Cs(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(h){return!h.button&&r.enableZoomPanInteraction&&(h.type!=="wheel"||jt(r.enableZoomInteraction)(h))&&(h.type==="wheel"||jt(r.enablePanInteraction)(h))}).on("zoom",function(h){var d=h.transform;[i,o].forEach(function(f){fQ(f),f.translate(d.x,d.y),f.scale(d.k,d.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(ac(ac({},d),s.centerAt())),r.needsRedraw=!0}).on("end",function(h){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(ac(ac({},h.transform),s.centerAt()))}),Sv(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){Ca(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=HMe/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new YUe(a),["pointermove","pointerdown"].forEach(function(h){return a.addEventListener(h,function(d){h==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=d),!r.isPointerDragging&&d.type==="pointermove"&&r.onBackgroundClick&&(d.pressure>0||r.isPointerPressed)&&(d.pointerType==="mouse"||d.movementX===void 0||[d.movementX,d.movementY].some(function(m){return Math.abs(m)>1}))&&(r.isPointerDragging=!0);var f=g(a);c.x=d.pageX-f.left,c.y=d.pageY-f.top;function g(m){var y=m.getBoundingClientRect(),v=window.pageXOffset||document.documentElement.scrollLeft,p=window.pageYOffset||document.documentElement.scrollTop;return{top:y.top+p,left:y.left+v}}},{passive:!0})}),a.addEventListener("pointerup",function(h){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var d=[h,r.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(r.hoverObj){var f=r["on".concat(r.hoverObj.type,"Click")];f&&f.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,d);if(h.button===2)if(r.hoverObj){var g=r["on".concat(r.hoverObj.type,"RightClick")];g&&g.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,d)})}},{passive:!0}),a.addEventListener("contextmenu",function(h){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(h.preventDefault(),!1)}),r.forceGraph(i),r.shadowGraph(o);var u=MIe(function(){kN(o,r.width,r.height),r.shadowGraph.linkWidth(function(d){return jt(r.linkWidth)(d)+r.linkHoverPrecision});var h=Ca(r.canvas);r.shadowGraph.globalScale(h.k).tickFrame()},LMe);r.flushShadowCanvas=u.flush,(this._animationCycle=function h(){var d=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(b){return b.__photons&&b.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var f=r.isPointerDragging?null:A();if(f!==r.hoverObj){var g=r.hoverObj,m=g?g.type:null,y=f?f.type:null;if(m&&m!==y){var v=r["on".concat(m,"Hover")];v&&v(null,g.d)}if(y){var p=r["on".concat(y,"Hover")];p&&p(f.d,m===y?g.d:null)}r.tooltip.content(f&&jt(r["".concat(f.type.toLowerCase(),"Label")])(f.d)||null),r.canvas.classList[(f&&r["on".concat(y,"Click")]||!f&&r.onBackgroundClick)&&jt(r.showPointerCursor)(f==null?void 0:f.d)?"add":"remove"]("clickable"),r.hoverObj=f}d&&u()}if(d){kN(i,r.width,r.height);var x=Ca(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(i,x),r.forceGraph.globalScale(x).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(i,x)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(n){}}),gQ={exports:{}},qMe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",XMe=qMe,YMe=XMe;function mQ(){}function pQ(){}pQ.resetWarningCache=mQ;var JMe=function(){function e(s,a,i,o,c,A){if(A!==YMe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function n(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:pQ,resetWarningCache:mQ};return r.PropTypes=r,r};gQ.exports=JMe();var ZMe=gQ.exports;const Z=en(ZMe),Lp={width:Z.number,height:Z.number,graphData:Z.shape({nodes:Z.arrayOf(Z.object).isRequired,links:Z.arrayOf(Z.object).isRequired}),backgroundColor:Z.string,nodeRelSize:Z.number,nodeId:Z.string,nodeLabel:Z.oneOfType([Z.string,Z.func]),nodeVal:Z.oneOfType([Z.number,Z.string,Z.func]),nodeVisibility:Z.oneOfType([Z.bool,Z.string,Z.func]),nodeColor:Z.oneOfType([Z.string,Z.func]),nodeAutoColorBy:Z.oneOfType([Z.string,Z.func]),onNodeHover:Z.func,onNodeClick:Z.func,linkSource:Z.string,linkTarget:Z.string,linkLabel:Z.oneOfType([Z.string,Z.func]),linkVisibility:Z.oneOfType([Z.bool,Z.string,Z.func]),linkColor:Z.oneOfType([Z.string,Z.func]),linkAutoColorBy:Z.oneOfType([Z.string,Z.func]),linkWidth:Z.oneOfType([Z.number,Z.string,Z.func]),linkCurvature:Z.oneOfType([Z.number,Z.string,Z.func]),linkDirectionalArrowLength:Z.oneOfType([Z.number,Z.string,Z.func]),linkDirectionalArrowColor:Z.oneOfType([Z.string,Z.func]),linkDirectionalArrowRelPos:Z.oneOfType([Z.number,Z.string,Z.func]),linkDirectionalParticles:Z.oneOfType([Z.number,Z.string,Z.func]),linkDirectionalParticleSpeed:Z.oneOfType([Z.number,Z.string,Z.func]),linkDirectionalParticleOffset:Z.oneOfType([Z.number,Z.string,Z.func]),linkDirectionalParticleWidth:Z.oneOfType([Z.number,Z.string,Z.func]),linkDirectionalParticleColor:Z.oneOfType([Z.string,Z.func]),onLinkHover:Z.func,onLinkClick:Z.func,dagMode:Z.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:Z.number,dagNodeFilter:Z.func,onDagError:Z.func,d3AlphaMin:Z.number,d3AlphaDecay:Z.number,d3VelocityDecay:Z.number,warmupTicks:Z.number,cooldownTicks:Z.number,cooldownTime:Z.number,onEngineTick:Z.func,onEngineStop:Z.func,getGraphBbox:Z.func},yQ={zoomToFit:Z.func,onNodeRightClick:Z.func,onNodeDrag:Z.func,onNodeDragEnd:Z.func,onLinkRightClick:Z.func,linkHoverPrecision:Z.number,onBackgroundClick:Z.func,onBackgroundRightClick:Z.func,showPointerCursor:Z.oneOfType([Z.bool,Z.func]),enablePointerInteraction:Z.bool,enableNodeDrag:Z.bool},xC={showNavInfo:Z.bool,nodeOpacity:Z.number,nodeResolution:Z.number,nodeThreeObject:Z.oneOfType([Z.object,Z.string,Z.func]),nodeThreeObjectExtend:Z.oneOfType([Z.bool,Z.string,Z.func]),nodePositionUpdate:Z.func,linkOpacity:Z.number,linkResolution:Z.number,linkCurveRotation:Z.oneOfType([Z.number,Z.string,Z.func]),linkMaterial:Z.oneOfType([Z.object,Z.string,Z.func]),linkThreeObject:Z.oneOfType([Z.object,Z.string,Z.func]),linkThreeObjectExtend:Z.oneOfType([Z.bool,Z.string,Z.func]),linkPositionUpdate:Z.func,linkDirectionalArrowResolution:Z.number,linkDirectionalParticleResolution:Z.number,linkDirectionalParticleThreeObject:Z.oneOfType([Z.object,Z.string,Z.func]),forceEngine:Z.oneOf(["d3","ngraph"]),ngraphPhysics:Z.object,numDimensions:Z.oneOf([1,2,3])},eQe=Object.assign({},Lp,yQ,{linkLineDash:Z.oneOfType([Z.arrayOf(Z.number),Z.string,Z.func]),nodeCanvasObjectMode:Z.oneOfType([Z.string,Z.func]),nodeCanvasObject:Z.func,nodePointerAreaPaint:Z.func,linkCanvasObjectMode:Z.oneOfType([Z.string,Z.func]),linkCanvasObject:Z.func,linkPointerAreaPaint:Z.func,linkDirectionalParticleCanvasObject:Z.func,autoPauseRedraw:Z.bool,minZoom:Z.number,maxZoom:Z.number,enableZoomInteraction:Z.oneOfType([Z.bool,Z.func]),enablePanInteraction:Z.oneOfType([Z.bool,Z.func]),onZoom:Z.func,onZoomEnd:Z.func,onRenderFramePre:Z.func,onRenderFramePost:Z.func});Object.assign({},Lp,yQ,xC,{enableNavigationControls:Z.bool,controlType:Z.oneOf(["trackball","orbit","fly"]),rendererConfig:Z.object,extraRenderers:Z.arrayOf(Z.shape({render:Z.func.isRequired}))});Object.assign({},Lp,xC,{nodeDesc:Z.oneOfType([Z.string,Z.func]),linkDesc:Z.oneOfType([Z.string,Z.func])});Object.assign({},Lp,xC,{markerAttrs:Z.object,yOffset:Z.number,glScale:Z.number});const Hp=s6e(VMe,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});Hp.displayName="ForceGraph2D";Hp.propTypes=eQe;function vQ(e,n){var r,s=1;e==null&&(e=0),n==null&&(n=0);function a(){var i,o=r.length,c,A=0,u=0;for(i=0;i<o;++i)c=r[i],A+=c.x,u+=c.y;for(A=(A/o-e)*s,u=(u/o-n)*s,i=0;i<o;++i)c=r[i],c.x-=A,c.y-=u}return a.initialize=function(i){r=i},a.x=function(i){return arguments.length?(e=+i,a):e},a.y=function(i){return arguments.length?(n=+i,a):n},a.strength=function(i){return arguments.length?(s=+i,a):s},a}function tm(e){return function(){return e}}function Mc(e){return(e()-.5)*1e-6}function tQe(e){return e.x+e.vx}function nQe(e){return e.y+e.vy}function xQ(e){var n,r,s,a=1,i=1;typeof e!="function"&&(e=tm(e==null?1:+e));function o(){for(var u,h=n.length,d,f,g,m,y,v,p=0;p<i;++p)for(d=Op(n,tQe,nQe).visitAfter(c),u=0;u<h;++u)f=n[u],y=r[f.index],v=y*y,g=f.x+f.vx,m=f.y+f.vy,d.visit(x);function x(b,w,_,B,k){var N=b.data,C=b.r,j=y+C;if(N){if(N.index>f.index){var E=g-N.x-N.vx,F=m-N.y-N.vy,I=E*E+F*F;I<j*j&&(E===0&&(E=Mc(s),I+=E*E),F===0&&(F=Mc(s),I+=F*F),I=(j-(I=Math.sqrt(I)))/I*a,f.vx+=(E*=I)*(j=(C*=C)/(v+C)),f.vy+=(F*=I)*j,N.vx-=E*(j=1-j),N.vy-=F*j)}return}return w>g+j||B<g-j||_>m+j||k<m-j}}function c(u){if(u.data)return u.r=r[u.data.index];for(var h=u.r=0;h<4;++h)u[h]&&u[h].r>u.r&&(u.r=u[h].r)}function A(){if(n){var u,h=n.length,d;for(r=new Array(h),u=0;u<h;++u)d=n[u],r[d.index]=+e(d,u,n)}}return o.initialize=function(u,h){n=u,s=h,A()},o.iterations=function(u){return arguments.length?(i=+u,o):i},o.strength=function(u){return arguments.length?(a=+u,o):a},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:tm(+u),A(),o):e},o}function rQe(e){return e.x}function sQe(e){return e.y}function wQ(){var e,n,r,s,a=tm(-30),i,o=1,c=1/0,A=.81;function u(g){var m,y=e.length,v=Op(e,rQe,sQe).visitAfter(d);for(s=g,m=0;m<y;++m)n=e[m],v.visit(f)}function h(){if(e){var g,m=e.length,y;for(i=new Array(m),g=0;g<m;++g)y=e[g],i[y.index]=+a(y,g,e)}}function d(g){var m=0,y,v,p=0,x,b,w;if(g.length){for(x=b=w=0;w<4;++w)(y=g[w])&&(v=Math.abs(y.value))&&(m+=y.value,p+=v,x+=v*y.x,b+=v*y.y);g.x=x/p,g.y=b/p}else{y=g,y.x=y.data.x,y.y=y.data.y;do m+=i[y.data.index];while(y=y.next)}g.value=m}function f(g,m,y,v){if(!g.value)return!0;var p=g.x-n.x,x=g.y-n.y,b=v-m,w=p*p+x*x;if(b*b/A<w)return w<c&&(p===0&&(p=Mc(r),w+=p*p),x===0&&(x=Mc(r),w+=x*x),w<o&&(w=Math.sqrt(o*w)),n.vx+=p*g.value*s/w,n.vy+=x*g.value*s/w),!0;if(g.length||w>=c)return;(g.data!==n||g.next)&&(p===0&&(p=Mc(r),w+=p*p),x===0&&(x=Mc(r),w+=x*x),w<o&&(w=Math.sqrt(o*w)));do g.data!==n&&(b=i[g.data.index]*s/w,n.vx+=p*b,n.vy+=x*b);while(g=g.next)}return u.initialize=function(g,m){e=g,r=m,h()},u.strength=function(g){return arguments.length?(a=typeof g=="function"?g:tm(+g),h(),u):a},u.distanceMin=function(g){return arguments.length?(o=g*g,u):Math.sqrt(o)},u.distanceMax=function(g){return arguments.length?(c=g*g,u):Math.sqrt(c)},u.theta=function(g){return arguments.length?(A=g*g,u):Math.sqrt(A)},u}const kv={teammate_won:"#3B82F6",teammate_lost:"#A855F7",opponent_won:"#22C55E",opponent_lost:"#EF4444"},jN={teammate_won:"Won together",teammate_lost:"Lost together",opponent_won:"Beat",opponent_lost:"Lost to"},aQe=(e,n,r)=>{const s=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),o=parseInt(n.slice(1,3),16),c=parseInt(n.slice(3,5),16),A=parseInt(n.slice(5,7),16),u=Math.round(s+(o-s)*r),h=Math.round(a+(c-a)*r),d=Math.round(i+(A-i)*r);return`#${u.toString(16).padStart(2,"0")}${h.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`},NN=e=>{const n=Math.max(0,Math.min(1,e)),r=[{stop:0,color:"#EF4444"},{stop:.33,color:"#F97316"},{stop:.66,color:"#EAB308"},{stop:1,color:"#22C55E"}];for(let s=0;s<r.length-1;s++)if(n<=r[s+1].stop){const a=r[s+1].stop-r[s].stop,i=(n-r[s].stop)/a;return aQe(r[s].color,r[s+1].color,i)}return r[r.length-1].color},iQe=(e,n)=>{if(n.length<=1)return .5;const r=[...n].sort((i,o)=>i-o),s=r[0],a=r[r.length-1];return a===s?.5:(e-s)/(a-s)},oQe=({onBack:e,inheritedMinGames:n=1,inheritedDateRange:r,recalculateTrueSkill:s=!1})=>{const{playSound:a}=gt(),{isViewModeLoading:i,getAllPlayers:o,getPlayerRelationshipNetwork:c,getPlayerDisplayRating:A,getFilteredPlayerStats:u}=Ls(),[h,d]=S.useState(!1),[f,g]=S.useState(new Set),[m,y]=S.useState({nodes:[],links:[]}),[v,p]=S.useState(!1),[x,b]=S.useState(!1),[w,_]=S.useState(null),[B,k]=S.useState([]),[N,C]=S.useState(!0),j=n,[E,F]=S.useState(!!(n>1||r!=null&&r.startDate&&(r!=null&&r.endDate))),[I,T]=S.useState(()=>r!=null&&r.startDate&&(r!=null&&r.endDate)?{start:r.startDate.toISOString().split("T")[0],end:r.endDate.toISOString().split("T")[0]}:{start:null,end:null}),[L,P]=S.useState({teammate_won:!0,teammate_lost:!0,opponent_won:!0,opponent_lost:!0}),O=S.useRef(),Q=S.useRef(null),[R,M]=S.useState({width:800,height:600}),G=S.useRef(!1),V=S.useRef(new Map),K=S.useRef(null),se=S.useRef(!1),de=S.useCallback(le=>{if(Q.current=le,le){const te=le.clientWidth||800;M({width:te,height:x?450:600})}},[x]);S.useEffect(()=>{const le=()=>b(window.innerWidth<768);return le(),window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]),S.useEffect(()=>{const le=()=>{if(Q.current){const Ge=Q.current.getBoundingClientRect(),D=Q.current.clientWidth||Math.floor(Ge.width)||800,X=x?450:600;M(re=>re.width!==D||re.height!==X?{width:D,height:X}:re)}},te=[setTimeout(le,0),setTimeout(le,100),setTimeout(le,300)],ge=new ResizeObserver(le);return Q.current&&ge.observe(Q.current),window.addEventListener("resize",le),()=>{te.forEach(Ge=>clearTimeout(Ge)),ge.disconnect(),window.removeEventListener("resize",le)}},[x,f.size]),S.useEffect(()=>{if(i)return;(async()=>{C(!0);try{const ge=(await o()).filter(ee=>ee.totalGames>0),Ge=ge.map(ee=>ee.id),D=I.start?new Date(I.start):void 0,X=I.end?new Date(I.end+"T23:59:59"):void 0,re=await c(Ge,j,D,X),xe=new Set;re.forEach(ee=>{xe.add(ee.playerId),xe.add(ee.relatedPlayerId)});let me={};s&&D?me=(await u(D,X,!0)).players.reduce((ae,Se)=>(ae[Se.id]=Se.displayRating,ae),{}):ge.forEach(ee=>{me[ee.id]=A(ee)});const Pe=ge.filter(ee=>xe.has(ee.id)).map(ee=>({...ee,winRate:ee.totalGames>0?ee.wins/ee.totalGames*100:0,displayRating:me[ee.id]??A(ee),skillPercentile:0})),Ie=Pe.map(ee=>ee.displayRating),Y=Pe.map(ee=>({...ee,skillPercentile:iQe(ee.displayRating,Ie)}));Y.sort((ee,ae)=>ee.name.localeCompare(ae.name)),k(Y)}catch(te){console.error("Error loading available players:",te),k([])}finally{C(!1)}})()},[i,o,c,A,u,j,I,s]),S.useEffect(()=>{if(O.current&&m.nodes.length>0){const le=O.current;le.d3Force("center",vQ(R.width/2,R.height/2));const te=wQ().strength(-300).distanceMax(300);le.d3Force("charge",te);const ge=xQ().radius(50).strength(1);le.d3Force("collision",ge);const Ge=le.d3Force("link");Ge&&Ge.distance(120).strength(.3);const D=60,X=()=>{for(const re of m.nodes)if(re.x!==void 0&&re.y!==void 0){const xe=D,me=R.width-D,Pe=D,Ie=R.height-D;re.x<xe?re.vx=(re.vx||0)+(xe-re.x)*.1:re.x>me&&(re.vx=(re.vx||0)+(me-re.x)*.1),re.y<Pe?re.vy=(re.vy||0)+(Pe-re.y)*.1:re.y>Ie&&(re.vy=(re.vy||0)+(Ie-re.y)*.1)}};if(le.d3Force("boundary",X),le.d3ReheatSimulation(),!G.current&&m.nodes.length>=2)G.current=!0,setTimeout(()=>{O.current&&(O.current.zoomToFit(400,80),setTimeout(()=>{if(O.current){const re=O.current.zoom(),xe=1.5;re>xe&&O.current.zoom(xe,300)}},450))},600);else if(se.current&&K.current){se.current=!1;const{x:re,y:xe,k:me}=K.current;setTimeout(()=>{O.current&&(O.current.centerAt(re,xe,0),O.current.zoom(me,0))},50)}}},[m.nodes.length,R.width,R.height]),S.useEffect(()=>{(async()=>{if(f.size<2){y({nodes:[],links:[]});return}const te=Array.from(f);G.current&&V.current.size>0&&(se.current=!0),d(!0);try{const ge=I.start?new Date(I.start):void 0,Ge=I.end?new Date(I.end+"T23:59:59"):void 0,D=await c(te,j,ge,Ge),X=ye(te,D);y(X)}catch(ge){console.error("Error loading relationship data:",ge)}finally{d(!1)}})()},[f,c,j,I]);const ye=S.useCallback((le,te)=>{const ge=V.current;let Ge=R.width/2,D=R.height/2;if(ge.size>0){let Y=0,ee=0;ge.forEach(ae=>{Y+=ae.x,ee+=ae.y}),Ge=Y/ge.size,D=ee/ge.size}const X=le.length,re=Math.min(R.width,R.height)*.25,xe=ge.size===0,me=le.map((Y,ee)=>{const ae=B.find(Qe=>Qe.id===Y),Se=ge.get(Y);let we,ke;if(Se)we=Se.x,ke=Se.y;else if(xe){const Qe=2*Math.PI*ee/X-Math.PI/2;we=R.width/2+re*Math.cos(Qe),ke=R.height/2+re*Math.sin(Qe)}else{const Qe=Math.random()*2*Math.PI,Te=50+Math.random()*50;we=Ge+Te*Math.cos(Qe),ke=D+Te*Math.sin(Qe)}return{id:Y,playerName:(ae==null?void 0:ae.name)||Y,totalGames:(ae==null?void 0:ae.totalGames)||0,winRate:(ae==null?void 0:ae.winRate)||0,displayRating:(ae==null?void 0:ae.displayRating)||0,skillPercentile:(ae==null?void 0:ae.skillPercentile)||.5,x:we,y:ke}}),Pe=[],Ie=new Set;for(const Y of te){const ee=Y.playerId,ae=Y.relatedPlayerId,Se=[Y.playerId,Y.relatedPlayerId].sort().join("-"),we=Y.teammateWins+Y.teammateLosses,ke=Y.opponentWins+Y.opponentLosses;Y.teammateWins>0&&!Ie.has(`${Se}-won`)&&(Ie.add(`${Se}-won`),Pe.push({source:ee,target:ae,type:"teammate_won",count:Y.teammateWins,percentage:we>0?Y.teammateWins/we:0,curvature:.15})),Y.teammateLosses>0&&!Ie.has(`${Se}-lost`)&&(Ie.add(`${Se}-lost`),Pe.push({source:ee,target:ae,type:"teammate_lost",count:Y.teammateLosses,percentage:we>0?Y.teammateLosses/we:0,curvature:-.15})),Y.opponentWins>0&&Pe.push({source:ee,target:ae,type:"opponent_won",count:Y.opponentWins,percentage:ke>0?Y.opponentWins/ke:0,curvature:.25}),Y.opponentLosses>0&&Pe.push({source:ee,target:ae,type:"opponent_lost",count:Y.opponentLosses,percentage:ke>0?Y.opponentLosses/ke:0,curvature:-.25})}return{nodes:me,links:Pe}},[R.width,R.height,B]),W=S.useCallback(le=>{if(!w)return!1;const te=typeof le.source=="object"?le.source.id:le.source,ge=typeof le.target=="object"?le.target.id:le.target;return L[le.type]?le.type.startsWith("teammate")?te===w||ge===w:te===w:!1},[w,L]),U=S.useMemo(()=>{if(!w)return null;const le=B.find(te=>te.id===w);return(le==null?void 0:le.name)||null},[w,B]),$=S.useCallback(()=>{a("buttonClick"),e()},[a,e]),ne=S.useCallback(le=>{a("buttonClick"),g(te=>{const ge=new Set(te);return ge.has(le)?ge.delete(le):ge.add(le),ge})},[a]),J=S.useCallback(()=>{a("buttonClick"),g(new Set(B.map(le=>le.id)))},[a,B]),z=S.useCallback(()=>{a("buttonClick"),g(new Set),G.current=!1,V.current.clear()},[a]),oe=S.useCallback(le=>{a("buttonClick"),P(te=>({...te,[le]:!te[le]}))},[a]),Ce=()=>{a("buttonClick"),p(!v)},Fe=()=>{a("buttonClick"),F(!1),T({start:null,end:null})},Ne=S.useCallback((le,te,ge)=>{const D=w===le.id,X=w&&m.links.some(me=>{const Pe=typeof me.source=="object"?me.source.id:me.source,Ie=typeof me.target=="object"?me.target.id:me.target;return W(me)&&(Pe===le.id||Ie===le.id)}),re=D||X;re&&(te.beginPath(),te.arc(le.x||0,le.y||0,40/2+8,0,2*Math.PI),te.fillStyle=D?"rgba(96, 165, 250, 0.4)":"rgba(96, 165, 250, 0.2)",te.fill()),te.beginPath(),te.arc(le.x||0,le.y||0,40/2,0,2*Math.PI),te.fillStyle=NN(le.skillPercentile),te.fill(),te.strokeStyle=re?"#60A5FA":"#6B7280",te.lineWidth=re?3:2,te.stroke(),te.fillStyle="#fff",te.font="bold 18px Sans-Serif",te.textAlign="center",te.textBaseline="middle",te.fillText(le.playerName.charAt(0).toUpperCase(),le.x||0,le.y||0);const xe=re?13:11;te.font=`${re?"bold ":""}${xe}px Sans-Serif`,te.textAlign="center",te.textBaseline="top",te.fillStyle=re?"#fff":"#9CA3AF",te.fillText(le.playerName,le.x||0,(le.y||0)+40/2+5)},[w,m.links,W]),Be=S.useCallback((le,te,ge)=>{ge.beginPath(),ge.arc(le.x||0,le.y||0,28,0,2*Math.PI),ge.fillStyle=te,ge.fill()},[]),pe=S.useCallback(le=>W(le)?kv[le.type]:"rgba(0,0,0,0)",[W]),he=S.useCallback(le=>{if(!W(le))return 0;const te=1;return te+(10-te)*le.percentage},[W]),Re=S.useCallback(()=>0,[]),Le=S.useCallback(()=>{},[]),ze=S.useCallback(()=>{},[]),Ae=S.useCallback(le=>{const te=(R.width/2-le.x)/le.k,ge=(R.height/2-le.y)/le.k;K.current={x:te,y:ge,k:le.k}},[R.width,R.height]),Me=S.useCallback(()=>{if(!O.current)return;const le=60;for(const te of m.nodes)if(te.x!==void 0&&te.y!==void 0){const ge=le,Ge=R.width-le,D=le,X=R.height-le;te.x<ge&&(te.x=ge),te.x>Ge&&(te.x=Ge),te.y<D&&(te.y=D),te.y>X&&(te.y=X),V.current.set(te.id,{x:te.x,y:te.y})}},[m.nodes,R.width,R.height]);return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:$,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back"})]}),l.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center",children:[l.jsx(lA,{size:24,className:"mr-2"}),"Player Relationship Network"]})]}),E&&l.jsxs("div",{className:"mb-4 p-3 bg-purple-900/30 border border-purple-700/50 rounded-lg flex items-center justify-between flex-wrap gap-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(os,{size:18,className:"mr-2 text-purple-400"}),l.jsxs("span",{className:"text-sm text-purple-200",children:["Using filters from Player Stats:",n>1&&` Min ${n} games per relationship`,n>1&&I.start&&" | ",I.start&&I.end&&`${I.start} to ${I.end}`,s&&" | TrueSkill recalculated"]})]}),l.jsx("button",{onClick:Fe,className:"text-sm text-purple-400 hover:text-purple-300 underline",children:"Reset to Defaults"})]}),l.jsx("div",{className:"mb-4 sm:hidden no-screenshot",children:l.jsxs("button",{onClick:Ce,className:"w-full px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(os,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Settings (",f.size," players)"]})]}),v?l.jsx(_r,{size:18}):l.jsx(Dn,{size:18})]})}),l.jsx("div",{className:`${x&&!v?"hidden":""} mb-4 no-screenshot`,children:l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"font-medium",children:"Select Players"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:J,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"All"}),l.jsx("button",{onClick:z,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Clear"})]})]}),N?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx(Bt,{size:24,className:"animate-spin text-blue-400 mr-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading players..."})]}):B.length===0?l.jsx("div",{className:"text-center py-8 text-gray-400",children:"No players with recorded relationships found"}):l.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 xl:grid-cols-12 gap-2 mb-4",children:B.map(le=>l.jsxs("button",{onClick:()=>ne(le.id),className:`p-2 rounded-lg transition-all flex flex-col items-center ${f.has(le.id)?"bg-blue-600 hover:bg-blue-500 ring-2 ring-blue-400":"bg-gray-600 hover:bg-gray-500"}`,title:`${le.name} - Skill: ${le.displayRating}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg",style:{backgroundColor:NN(le.skillPercentile)},children:le.name.charAt(0).toUpperCase()}),l.jsx("span",{className:"text-[10px] mt-1 truncate w-full text-center leading-tight",children:le.name})]},le.id))}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(kv).map(le=>l.jsxs("button",{onClick:()=>oe(le),className:`flex items-center px-2 py-1 rounded transition-colors text-xs ${L[le]?"bg-gray-600":"bg-gray-800 opacity-40"}`,title:jN[le],children:[l.jsx("div",{className:"w-3 h-3 rounded-sm mr-1.5",style:{backgroundColor:kv[le]}}),l.jsx("span",{className:"hidden sm:inline",children:jN[le]})]},le))})]})}),h?l.jsx("div",{className:"flex justify-center items-center h-96",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Bt,{size:32,className:"animate-spin text-blue-400 mb-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading relationship data..."})]})}):f.size<2?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-12 text-center",children:[l.jsx(lA,{size:64,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400 text-lg",children:"Select at least 2 players to visualize their relationships"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-2 px-3 py-2 bg-gray-700/50 rounded-lg text-center",children:U?l.jsxs("span",{className:"text-white",children:[l.jsx("span",{className:"font-bold text-blue-400",children:U}),l.jsx("span",{className:"text-gray-300",children:"'s relationships:"}),l.jsx("span",{className:"ml-2 text-blue-400",children:" Won with"}),l.jsx("span",{className:"mx-1 text-purple-400",children:" Lost with"}),l.jsx("span",{className:"mx-1 text-green-400",children:" Beat"}),l.jsx("span",{className:"ml-1 text-red-400",children:" Lost to"})]}):l.jsx("span",{className:"text-gray-400",children:"Hover over a player to see their relationships"})}),l.jsx("div",{ref:de,className:"bg-gray-900 rounded-lg overflow-hidden border border-gray-700 w-full",style:{height:x?450:600},children:l.jsx(Hp,{ref:O,graphData:m,width:R.width,height:R.height,backgroundColor:"#111827",nodeCanvasObject:Ne,nodePointerAreaPaint:Be,linkColor:pe,linkWidth:he,linkCurvature:le=>le.curvature,linkDirectionalArrowLength:Re,linkDirectionalArrowRelPos:.85,linkDirectionalArrowColor:pe,linkCanvasObjectMode:Le,linkCanvasObject:ze,onNodeHover:le=>_(le?le.id:null),onEngineTick:Me,onZoom:Ae,d3AlphaDecay:.02,d3VelocityDecay:.3,cooldownTime:3e3,warmupTicks:50,enableNodeDrag:!0,enableZoomInteraction:!0,enablePanInteraction:!0,minZoom:.5,maxZoom:3})})]}),f.size>=2&&!h&&l.jsx("div",{className:"mt-4 p-4 bg-gray-700/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-1",children:[l.jsx("strong",{children:"Hover"})," over any player to reveal their relationships with other selected players."]}),l.jsxs("p",{className:"mb-1",children:[l.jsx("span",{className:"text-blue-400 font-medium",children:"Blue"})," = won together,",l.jsx("span",{className:"text-purple-400 font-medium ml-2",children:"Purple"})," = lost together,",l.jsx("span",{className:"text-green-400 font-medium ml-2",children:"Green"})," = beat opponent,",l.jsx("span",{className:"text-red-400 font-medium ml-2",children:"Red"})," = lost to opponent."]}),l.jsxs("p",{className:"text-gray-400",children:[l.jsx("strong",{children:"Node color"})," = TrueSkill ranking (green = highest, yellow/orange = middle, red = lowest). ",l.jsx("strong",{children:"Edge thickness"})," = win/loss rate."]})]})]})})]})},lQe=({isOpen:e,onClose:n})=>{const[r,s]=S.useState("simple"),{playSound:a}=gt();if(!e)return null;const i=()=>{a("buttonClick"),n()},o=c=>{a("buttonClick"),s(c)};return l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"p-4 bg-gray-700 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[l.jsx(iA,{size:24,className:"mr-2 text-blue-400"}),"Understanding Skill Ratings"]}),l.jsx("button",{onClick:i,className:"p-1 bg-gray-600 hover:bg-gray-500 rounded-full","aria-label":"Close modal",children:l.jsx(Jt,{size:20})})]}),l.jsxs("div",{className:"flex border-b border-gray-700",children:[l.jsx("button",{onClick:()=>o("simple"),className:`flex-1 px-4 py-3 font-medium transition-colors ${r==="simple"?"bg-gray-700 text-white border-b-2 border-blue-500":"bg-gray-800 text-gray-400 hover:text-white"}`,children:"Simple Explanation"}),l.jsx("button",{onClick:()=>o("technical"),className:`flex-1 px-4 py-3 font-medium transition-colors ${r==="technical"?"bg-gray-700 text-white border-b-2 border-blue-500":"bg-gray-800 text-gray-400 hover:text-white"}`,children:"Technical Details"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r==="simple"?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"What is a Skill Rating?"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"Your skill rating is a number that represents how good you are at the game compared to other players. It goes up when you win and down when you lose, but there's more to it than that!"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Why Start Low?"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"New players start with a lower visible rating even if they win their first few games. This is because the system needs to be confident about your skill level. Think of it like this:"}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg mb-4",children:[l.jsxs("p",{className:"text-sm mb-2",children:[l.jsx("strong",{className:"text-yellow-400",children:"After 1 game:"}),' "This player might be good, but it could be luck"']}),l.jsxs("p",{className:"text-sm mb-2",children:[l.jsx("strong",{className:"text-yellow-400",children:"After 10 games:"}),` "Now I'm getting a clearer picture"`]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{className:"text-yellow-400",children:"After 20+ games:"}),` "I'm confident about this player's skill level"`]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"How Rankings Work"}),l.jsxs("ul",{className:"space-y-3 text-gray-300",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Beat stronger teams = bigger rating increase"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Lose to weaker teams = bigger rating decrease"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Play more games = more accurate rating"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Consistent performance = higher rating"})]})]})]}),l.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm text-blue-300",children:[l.jsx("strong",{children:"Pro tip:"})," Don't worry if your rating seems low at first. Play more games and the system will quickly figure out your true skill level. It typically takes about 20 games for ratings to stabilize."]})})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"TrueSkill Rating System"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"Guards of Atlantis uses the TrueSkill algorithm, a Bayesian skill rating system developed by Microsoft Research. Unlike traditional Elo systems, TrueSkill models both skill and uncertainty."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Mathematical Model"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"Each player's skill is modeled as a normal distribution:"}),l.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4",children:[l.jsx("p",{className:"text-green-400 mb-2",children:"skill ~ N(, )"}),l.jsx("p",{className:"text-gray-400",children:"where:"}),l.jsx("p",{className:"text-gray-300 ml-4",children:" (mu) = mean skill estimate"}),l.jsx("p",{className:"text-gray-300 ml-4",children:" (sigma) = standard deviation (uncertainty)"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Conservative Skill Estimate"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"The displayed rating uses the conservative skill estimate (ordinal):"}),l.jsx("div",{className:"bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4",children:l.jsx("p",{className:"text-green-400",children:"ordinal =  - 3"})}),l.jsx("p",{className:"text-gray-300 mb-4",children:"This represents the skill level we're 99.7% confident the player exceeds (3-sigma confidence interval). The display rating is then scaled to a familiar range:"}),l.jsx("div",{className:"bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4",children:l.jsx("p",{className:"text-green-400",children:"displayRating = (ordinal + 25)  40 + 200"})})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Update Dynamics"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"After each match, the system updates beliefs using Bayes' theorem:"}),l.jsxs("ul",{className:"space-y-2 text-gray-300 ml-4",children:[l.jsx("li",{children:" Prior: Current skill distribution"}),l.jsx("li",{children:" Likelihood: Match outcome probability"}),l.jsx("li",{children:" Posterior: Updated skill distribution"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Key Parameters"}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg space-y-2",children:[l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{className:"text-yellow-400",children:" (beta) = 25/6:"})," Performance variance parameter"]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{className:"text-yellow-400",children:" (tau) = 25/300:"})," Dynamics factor (skill change rate)"]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{className:"text-yellow-400",children:"Initial values:"}),"  = 25,  = 25/3"]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Advantages over Elo"}),l.jsxs("ul",{className:"space-y-2 text-gray-300",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Handles uncertainty explicitly (new vs experienced players)"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Better team balance predictions"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Faster convergence to true skill"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Natural handling of returning players"})]})]})]}),l.jsx("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm text-gray-400",children:[l.jsx("strong",{children:"Reference:"})," Herbrich, R., Minka, T., & Graepel, T. (2007). TrueSkill: A Bayesian skill rating system. In Advances in Neural Information Processing Systems 19."]})})]})})]})})},cQe=({rank:e,skill:n})=>{let r,s;return e===1?(r=l.jsx(SA,{size:18,className:"mr-2 text-yellow-300"}),s="text-yellow-300 font-bold"):e===2?(r=l.jsx($B,{size:18,className:"mr-2 text-gray-300"}),s="text-gray-300 font-bold"):e===3?(r=l.jsx($B,{size:18,className:"mr-2 text-amber-600"}),s="text-amber-600 font-bold"):(r=l.jsx(Z0,{size:18,className:"mr-2 text-blue-400"}),s="text-blue-400 font-medium"),l.jsxs("div",{className:"flex items-center",children:[r,l.jsxs("span",{className:s,children:["#",e," ",l.jsxs("span",{className:"ml-1 text-sm text-gray-400",children:["(",n,")"]})]})]})},AQe=({onBack:e,onViewSkillOverTime:n,onViewPlayerDetails:r})=>{const{playSound:s}=gt(),{isViewMode:a,isViewModeLoading:i,getAllPlayers:o,getAllMatchPlayers:c,getAllMatches:A,getFilteredPlayerStats:u}=Ls(),{setPlayerStatsFilters:h}=U_(),[d,f]=S.useState([]),[g,m]=S.useState(""),[y,v]=S.useState(!0),[p,x]=S.useState("skill"),[b,w]=S.useState("desc"),[_,B]=S.useState(!1),[k,N]=S.useState(!1),[C,j]=S.useState(()=>{const K=localStorage.getItem("playerStats_minGames");return K?parseInt(K,10):3}),[E,F]=S.useState(()=>{const K=localStorage.getItem("playerStats_recencyMonths");return K?parseInt(K,10):null}),[I,T]=S.useState(()=>localStorage.getItem("playerStats_recalculateTrueSkill")==="true"),[L,P]=S.useState(!1);S.useEffect(()=>{localStorage.setItem("playerStats_minGames",C.toString())},[C]),S.useEffect(()=>{E===null?localStorage.removeItem("playerStats_recencyMonths"):localStorage.setItem("playerStats_recencyMonths",E.toString())},[E]),S.useEffect(()=>{localStorage.setItem("playerStats_recalculateTrueSkill",I.toString())},[I]);const O=S.useMemo(()=>{if(E===null)return{startDate:void 0,endDate:void 0};const K=new Date,se=new Date;return se.setMonth(se.getMonth()-E),{startDate:se,endDate:K}},[E]);S.useEffect(()=>{h({recencyMonths:E,minGamesRelationship:C,recalculateTrueSkill:I,dateRange:O})},[E,C,I,O,h]),S.useEffect(()=>{const K=async()=>{v(!0);try{let se;const de=await A(),ye=new Map;de.forEach(Fe=>ye.set(Fe.id,Fe));const W=(Fe,Ne)=>{const Be={throne:{wins:0,total:0},wave:{wins:0,total:0},kills:{wins:0,total:0}};return Fe.forEach(pe=>{const he=ye.get(pe);if(he!=null&&he.victoryType){const Le=Ne.get(pe)===he.winningTeam,ze=he.victoryType;Be[ze].total++,Le&&Be[ze].wins++}}),Be},U=(Fe,Ne)=>{const Be=Fe.map(ze=>({matchId:ze,match:ye.get(ze)})).filter(ze=>ze.match!==void 0).sort((ze,Ae)=>new Date(Ae.match.date).getTime()-new Date(ze.match.date).getTime());let pe=0,he=0,Re=0,Le=!0;for(const{matchId:ze,match:Ae}of Be)Ne.get(ze)===Ae.winningTeam?(Re++,Le&&pe++,he=Math.max(he,Re)):(Re=0,Le=!1);return{currentStreak:pe,bestStreak:he}};if(O.startDate&&O.endDate){const Fe=await u(O.startDate,O.endDate,I),Ne=await c();se=Fe.players.map(Be=>{const pe=Ne.filter(ze=>ze.playerId===Be.id||ze.playerId===Be.name),he=pe.map(ze=>ze.matchId),Re=new Map;pe.forEach(ze=>Re.set(ze.matchId,ze.team));const Le=U(he,Re);return{id:Be.id,name:Be.name,totalGames:Be.gamesPlayed,wins:Be.wins,losses:Be.losses,mu:0,sigma:0,elo:0,lastPlayed:Be.lastPlayed||new Date,dateCreated:new Date,favoriteHeroes:Be.favoriteHeroes,favoriteRoles:Be.favoriteRoles,winRate:Be.winRate,kills:Be.kills,deaths:Be.deaths,assists:Be.assists,kdRatio:Be.kdRatio,averageGold:Be.averageGold,averageMinionKills:Be.averageMinionKills,hasCombatStats:Be.hasCombatStats,displayRating:Be.displayRating,rank:0,victoryTypeStats:W(he,Re),currentStreak:Le.currentStreak,bestStreak:Le.bestStreak}})}else{const Fe=await o(),Ne=await c(),Be=a?{}:await Ct.getCurrentTrueSkillRatings();se=await Promise.all(Fe.map(async pe=>{const he=Ne.filter(ee=>ee.playerId===pe.id||ee.playerId===pe.name),Re={},Le={};let ze=0,Ae=0,Me=0,le=0,te=0;he.forEach(ee=>{ze+=ee.kills||0,Ae+=ee.deaths||0,Me+=ee.assists||0,le+=ee.goldEarned||0,te+=ee.minionKills||0,Re[ee.heroId]||(Re[ee.heroId]={heroId:ee.heroId,heroName:ee.heroName,count:0}),Re[ee.heroId].count++,(ee.heroRoles||[]).forEach(ae=>{Le[ae]=(Le[ae]||0)+1})});const ge=Object.values(Re).sort((ee,ae)=>ae.count-ee.count).slice(0,3),Ge=Object.entries(Le).map(([ee,ae])=>({role:ee,count:ae})).sort((ee,ae)=>ae.count-ee.count).slice(0,3),D=Ae===0?ze:ze/Ae,X=pe.totalGames>0?pe.wins/pe.totalGames*100:0,re=ze>0||Ae>0||Me>0||le>0,xe=Be[pe.id]||Whe(pe),me=he.map(ee=>ee.matchId),Pe=new Map;he.forEach(ee=>Pe.set(ee.matchId,ee.team));const Ie=W(me,Pe),Y=U(me,Pe);return{...pe,favoriteHeroes:ge,favoriteRoles:Ge,winRate:X,kills:ze,deaths:Ae,assists:Me,kdRatio:parseFloat(D.toFixed(2)),averageGold:pe.totalGames>0?Math.round(le/pe.totalGames):0,averageMinionKills:pe.totalGames>0?Math.round(te/pe.totalGames):0,hasCombatStats:re,displayRating:xe,rank:0,victoryTypeStats:Ie,currentStreak:Y.currentStreak,bestStreak:Y.bestStreak}}))}const ne=[...se.filter(Fe=>Fe.totalGames>0)].sort((Fe,Ne)=>Ne.displayRating-Fe.displayRating);let J=1,z=ne.length>0?ne[0].displayRating:0,oe=0;const Ce=ne.map((Fe,Ne)=>(Fe.displayRating!==z?(J=Ne+1,z=Fe.displayRating,oe=0):oe++,{...Fe,rank:J}));f(Ce)}catch(se){console.error("Error loading player stats:",se)}finally{v(!1)}};i||K()},[i,O.startDate,O.endDate,I,a,o,c,A,u]);const Q=()=>{s("buttonClick"),e()},R=()=>{s("buttonClick"),B(!0)},G=[...d.filter(K=>K.name.toLowerCase().includes(g.toLowerCase()))].sort((K,se)=>{let de=0;switch(p){case"name":de=K.name.localeCompare(se.name);break;case"skill":de=K.displayRating-se.displayRating;break;case"games":de=K.totalGames-se.totalGames;break;case"winRate":de=K.winRate-se.winRate;break;case"kdRatio":de=K.kdRatio-se.kdRatio;break;default:de=0}return b==="asc"?de:-de}),V=K=>{s("buttonClick"),K===p?w(b==="asc"?"desc":"asc"):(x(K),w("desc"))};return S.useEffect(()=>{const K=document.createElement("style");return K.type="text/css",K.innerHTML=`
      .taking-screenshot {
        background-color: #1F2937 !important;
        padding: 2rem !important;
        width: 1400px !important;
        position: relative !important;
        overflow: visible !important;
      }
      
      .screenshot-title {
        color: white;
        margin-bottom: 2rem;
      }
      
      .screenshot-footer {
        color: #9CA3AF;
        margin-top: 2rem;
        border-top: 1px solid #4B5563;
        padding-top: 1rem;
      }
      
      .taking-screenshot .no-screenshot {
        display: none !important;
      }
      
      .taking-screenshot .grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 2rem !important;
      }
      
      .taking-screenshot .bg-gray-700 {
        padding: 1.5rem !important;
      }
      
      .taking-screenshot h3.text-xl.font-bold {
        white-space: normal !important;
        max-width: 100% !important;
        overflow: visible !important; 
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
      }
      
      .taking-screenshot .px-5.py-4.bg-gray-800 {
        padding: 1.25rem !important;
        display: flex !important;
        justify-content: space-between !important;
        flex-wrap: wrap !important;
      }
      
      .taking-screenshot .text-sm,
      .taking-screenshot .text-xs {
        overflow: visible !important;
        white-space: normal !important;
      }
      
      .taking-screenshot .flex-wrap {
        margin-bottom: 0.5rem !important;
      }
    `,document.head.appendChild(K),()=>{document.head.removeChild(K)}},[]),L?l.jsx(oQe,{onBack:()=>P(!1),inheritedMinGames:C,inheritedDateRange:O.startDate?{startDate:O.startDate,endDate:O.endDate}:void 0,recalculateTrueSkill:I}):l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:Q,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold text-center sm:text-left",children:"Player Statistics"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[l.jsx(At,{text:"View skill rating progression over time",position:"left",children:l.jsxs("button",{onClick:()=>{s("buttonClick"),n()},className:"flex items-center justify-center px-3 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg w-full sm:w-auto",children:[l.jsx(Hr,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:"View Over Time"})]})}),l.jsx(At,{text:"View player relationship network graph",position:"left",children:l.jsxs("button",{onClick:()=>{s("buttonClick"),P(!0)},className:"flex items-center justify-center px-3 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg w-full sm:w-auto",children:[l.jsx(lA,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:"Relationships"})]})})]})]}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 no-screenshot",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:g,onChange:K=>m(K.target.value),placeholder:"Search players...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx(kl,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:()=>V("skill"),className:`px-3 py-1 rounded text-sm ${p==="skill"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Skill ",p==="skill"&&(b==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>V("games"),className:`px-3 py-1 rounded text-sm ${p==="games"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Games ",p==="games"&&(b==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>V("winRate"),className:`px-3 py-1 rounded text-sm ${p==="winRate"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Win% ",p==="winRate"&&(b==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>V("kdRatio"),className:`px-3 py-1 rounded text-sm ${p==="kdRatio"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["KD ",p==="kdRatio"&&(b==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>V("name"),className:`px-3 py-1 rounded text-sm ${p==="name"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Name ",p==="name"&&(b==="asc"?"":"")]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>{s("buttonClick"),N(!k)},className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(os,{size:18,className:"mr-2"}),l.jsx("span",{children:"Filters"}),(C!==3||E!==null)&&l.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(C!==3?1:0)+(E!==null?1:0)}),k?l.jsx(_r,{size:16,className:"ml-2"}):l.jsx(Dn,{size:16,className:"ml-2"})]}),k&&l.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-72",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Time Period"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"playerTimePeriod",checked:E===null,onChange:()=>F(null),className:"mr-2 accent-blue-500"}),l.jsx("span",{className:"text-sm",children:"All Time"})]}),l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"playerTimePeriod",checked:E!==null,onChange:()=>F(E||6),className:"mr-2 accent-blue-500"}),l.jsx("span",{className:"text-sm mr-2",children:"Last"}),l.jsx("input",{type:"number",min:"1",max:"24",value:E||6,onChange:K=>{const se=parseInt(K.target.value,10);!isNaN(se)&&se>=1&&se<=24&&F(se)},disabled:E===null,className:"w-16 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),l.jsx("span",{className:"text-sm ml-2",children:"months"})]})]})]}),E!==null&&l.jsx("div",{className:"mb-4 p-3 bg-gray-700/50 rounded-lg",children:l.jsxs("label",{className:"flex items-start cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:I,onChange:K=>T(K.target.checked),className:"mr-2 mt-0.5 accent-blue-500"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm",children:"Recalculate skill for period only"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When checked, skill ratings are calculated using only matches in the selected period. Otherwise, current cumulative ratings are shown."})]})]})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Min games for relationships"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>j(K=>Math.max(1,K-1)),disabled:C<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:""}),l.jsx("div",{className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-center font-medium",children:C}),l.jsx("button",{onClick:()=>j(K=>Math.min(20,K+1)),disabled:C>=20,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:"+"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For BFF/Nemesis calculations in player details"})]}),l.jsx("button",{onClick:()=>{s("buttonClick"),j(3),F(null),T(!1),N(!1)},className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),g!==""&&l.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg screenshot-info",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Search Results:"}),l.jsxs("p",{className:"text-sm",children:['Showing players matching: "',g,'"']})]}),E!==null&&O.startDate&&O.endDate&&l.jsxs("div",{className:"mb-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center flex-wrap gap-2",children:[l.jsx(ks,{size:18,className:"text-blue-400 flex-shrink-0"}),l.jsxs("span",{className:"text-sm text-blue-200",children:["Showing stats from"," ",l.jsx("span",{className:"font-medium",children:O.startDate.toLocaleDateString()})," ","to"," ",l.jsx("span",{className:"font-medium",children:O.endDate.toLocaleDateString()})," ","(",E," month",E!==1?"s":"",")"]}),I&&l.jsx("span",{className:"text-xs bg-purple-600/50 text-purple-200 px-2 py-0.5 rounded",children:"Skill recalculated for period"})]}),y?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsx("div",{children:G.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:G.map(K=>l.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md relative",children:[l.jsxs("div",{className:"px-5 py-4 bg-gray-800 flex justify-between items-center relative",children:[l.jsx("h3",{className:`text-xl font-bold truncate ${K.rank<=3?"ml-10":""}`,children:K.name}),l.jsx("div",{className:"flex items-center",children:l.jsx("div",{children:l.jsx(cQe,{rank:K.rank,skill:K.displayRating})})})]}),K.rank<=3&&l.jsx("div",{className:`absolute top-0 left-0 w-0 h-0 z-10
                        border-t-[50px] border-r-[50px] 
                        ${K.rank===1?"border-t-yellow-500 border-r-transparent":K.rank===2?"border-t-gray-400 border-r-transparent":"border-t-amber-600 border-r-transparent"}`,children:l.jsx("span",{className:"absolute top-[-45px] left-[5px] font-bold text-black",children:K.rank})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Win Rate"}),l.jsxs("div",{className:"font-medium",children:[K.winRate.toFixed(1),"%"]})]}),l.jsx("div",{className:"h-2 bg-red-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${K.winRate}%`}})}),l.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-400",children:[l.jsxs("span",{children:["Wins: ",K.wins]}),l.jsxs("span",{children:["Losses: ",K.losses]}),l.jsxs("span",{children:["Total: ",K.totalGames]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Win Streaks"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center text-orange-400 text-sm mb-1",children:[l.jsx(t8,{size:14,className:"mr-1"}),l.jsx("span",{children:"Current"})]}),l.jsx("div",{className:"font-medium text-center",children:K.currentStreak})]}),l.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center text-yellow-400 text-sm mb-1",children:[l.jsx(SA,{size:14,className:"mr-1"}),l.jsx("span",{children:"Best"})]}),l.jsx("div",{className:"font-medium text-center",children:K.bestStreak})]})]})]}),(()=>{const se=K.victoryTypeStats,de=se.throne.total+se.wave.total+se.kills.total,ye=se.throne.wins+se.wave.wins+se.kills.wins;if(de===0)return null;const W=[{key:"throne",label:"Throne",Icon:Kb,bgColor:"bg-yellow-500",data:se.throne},{key:"wave",label:"Wave",Icon:Gb,bgColor:"bg-blue-500",data:se.wave},{key:"kills",label:"Kills",Icon:na,bgColor:"bg-red-500",data:se.kills}],U=($,ne,J)=>{const z=W.filter(oe=>$(oe)>0);return z.length===0?null:l.jsxs("div",{className:"mb-2",children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:J}),l.jsx("div",{className:"flex h-6 rounded overflow-hidden bg-gray-800",children:z.map(oe=>{const Ce=$(oe),Fe=Ce/ne*100,Ne=oe.Icon;return l.jsxs("div",{className:`${oe.bgColor} h-full flex items-center justify-center gap-1 text-white text-xs font-medium`,style:{width:`${Fe}%`},title:`${oe.label}: ${Ce} (${Math.round(Fe)}%)`,children:[l.jsx(Ne,{size:12}),Fe>=20&&l.jsx("span",{children:Ce}),Fe>=35&&l.jsxs("span",{className:"text-white/70",children:["(",Math.round(Fe),"%)"]})]},oe.key)})})]})};return l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Victory Types"}),l.jsxs("div",{className:"text-xs text-gray-500",children:[de," of ",K.totalGames," games"]})]}),U($=>$.data.total,de,"Games by Type"),U($=>$.data.wins,ye,"Wins by Type")]})})(),K.hasCombatStats&&l.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[l.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center text-blue-400 text-sm mb-1",children:[l.jsx(yr,{size:14,className:"mr-1"}),l.jsx("span",{children:"K/D/A"})]}),l.jsxs("div",{className:"font-medium text-center",children:[K.kills,"/",K.deaths,"/",K.assists]})]}),l.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center text-yellow-400 text-sm mb-1",children:[l.jsx(Hr,{size:14,className:"mr-1"}),l.jsx("span",{children:"KD Ratio"})]}),l.jsx("div",{className:"font-medium text-center",children:K.kdRatio})]}),l.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center text-green-400 text-sm mb-1",children:[l.jsx(St,{size:14,className:"mr-1"}),l.jsx("span",{children:"Avg Gold"})]}),l.jsx("div",{className:"font-medium text-center",children:K.averageGold})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Favorite Heroes"}),K.favoriteHeroes.length>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:K.favoriteHeroes.map(se=>l.jsxs("div",{className:"bg-gray-800 px-3 py-1 rounded-full text-sm",children:[se.heroName," (",se.count,")"]},se.heroId))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No heroes played"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Favorite Roles"}),K.favoriteRoles.length>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:K.favoriteRoles.map(se=>l.jsxs("div",{className:"bg-gray-800 px-3 py-1 rounded-full text-sm",children:[se.role," (",se.count,")"]},se.role))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No roles data"})]}),l.jsxs("button",{onClick:()=>{s("buttonClick"),r(K.id)},className:`w-full mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 
                                   rounded-lg flex items-center justify-center transition-colors`,children:[l.jsx(wo,{size:18,className:"mr-2"}),l.jsx("span",{children:"View Details"})]})]})]},K.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(St,{size:48,className:"text-gray-500 mb-4"}),l.jsx("p",{className:"text-xl text-gray-400",children:g?"No players found matching your search":"No player data available"}),g&&l.jsx("button",{onClick:()=>m(""),className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg no-screenshot",children:"Clear Search"})]})}),l.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:[l.jsxs("h4",{className:"font-medium mb-2 flex items-center justify-between",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400"}),"About Player Rankings"]}),l.jsxs("button",{onClick:R,className:"text-blue-400 hover:text-blue-300 flex items-center no-screenshot",children:[l.jsx(iA,{size:16,className:"mr-1"}),l.jsx("span",{children:"Learn More"})]})]}),l.jsx("p",{children:"Players are ranked based on their skill rating, which reflects their performance against other players using the TrueSkill rating system. It takes roughly 20 matches for ratings to stabilise. Rankings are calculated based on match wins and losses, with players winning more points if their team beat higher ranked teams, and losing more points if they lose to lower ranked teams."})]}),l.jsx(lQe,{isOpen:_,onClose:()=>B(!1)})]})},uQe=({kills:e,deaths:n,assists:r,kdRatio:s,averageKills:a,averageDeaths:i,averageAssists:o,gamesWithCombatData:c,gamesWithGoldData:A,gamesWithMinionData:u,averageGold:h,averageMinionKills:d,averageLevel:f,totalGames:g,hasCombatStats:m})=>m?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(yr,{size:20,className:"mr-2 text-blue-400"}),"Detailed Combat Statistics"]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Total K/D/A"}),l.jsx(yr,{size:16,className:"text-red-400"})]}),l.jsxs("div",{className:"text-lg font-bold text-white",children:[e,"/",n,"/",r]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[g," games played"]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"K/D Ratio"}),l.jsx(ng,{size:16,className:"text-yellow-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:s.toFixed(2)}),l.jsx("div",{className:"text-xs text-gray-500",children:n===0?"Perfect":"kill/death ratio"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Avg Level"}),l.jsx(Hr,{size:16,className:"text-purple-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-purple-400",children:f.toFixed(1)}),l.jsx("div",{className:"text-xs text-gray-500",children:"end of game"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Avg Gold"}),l.jsx(ea,{size:16,className:"text-yellow-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:h.toLocaleString()}),l.jsx("div",{className:"text-xs text-gray-500",children:"per game"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Avg Minions"}),l.jsx(St,{size:16,className:"text-green-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-green-400",children:d.toFixed(1)}),l.jsx("div",{className:"text-xs text-gray-500",children:"per game"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Kill Participation"}),l.jsx(ng,{size:16,className:"text-blue-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(a+o).toFixed(1)}),l.jsxs("div",{className:"text-xs text-gray-500",children:["(K+A) per game (",c," games)"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Combat Performance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Kills per Game"}),l.jsxs("span",{className:"font-medium",children:[a.toFixed(1)," (",c," games)"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Deaths per Game"}),l.jsxs("span",{className:"font-medium",children:[i.toFixed(1)," (",c," games)"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Assists per Game"}),l.jsxs("span",{className:"font-medium",children:[o.toFixed(1)," (",c," games)"]})]})]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Economic Performance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Total Gold Earned"}),l.jsx("span",{className:"font-medium",children:A>0?(h*A).toLocaleString():"N/A"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Farming Efficiency"}),l.jsx("span",{className:"font-medium",children:u>0?`${d.toFixed(1)} minions/game (${u} games)`:"N/A"})]})]})]})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(yr,{size:20,className:"mr-2 text-blue-400"}),"Detailed Combat Statistics"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(yr,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"No Combat Data Available"}),l.jsx("p",{className:"text-sm text-gray-500",children:"This player hasn't recorded any matches with detailed combat statistics yet."})]})]});function ic(e,n=.4){const r=e.length;if(r===0)return[];if(r===1)return[...e];const s=[],a=Math.max(Math.floor(r*n),2);for(let i=0;i<r;i++){let o=0,c=0;for(let A=0;A<r;A++){const u=Math.abs(i-A)/a;if(u<1){const h=Math.pow(1-Math.pow(u,3),3);o+=h,c+=h*e[A]}}s.push(o>0?c/o:e[i])}return s}function gu(e,n){if(e.length===0)return 0;if(e.length===1)return e[0];const r=n/100*(e.length-1),s=Math.floor(r),a=Math.ceil(r),i=r-s;return s===a?e[s]:e[s]*(1-i)+e[a]*i}const dQe=(e,n)=>{if(n.length===0)return{category:"Average",color:"text-blue-400",description:"similar to",percentile:50};const r=[...n].sort((i,o)=>i-o),s=r.findIndex(i=>i>=e),a=s===-1?100:Math.round(s/r.length*100);return a>=95?{category:"Top 5%",color:"text-green-500",description:"in top 5% of",percentile:a}:a>=80?{category:"Top 20%",color:"text-green-400",description:"in top 20% of",percentile:a}:a>=60?{category:"Above Average",color:"text-blue-400",description:"above average of",percentile:a}:a>=40?{category:"Average",color:"text-gray-400",description:"average among",percentile:a}:a>=20?{category:"Below Average",color:"text-orange-400",description:"below average of",percentile:a}:{category:"Bottom 20%",color:"text-red-400",description:"in bottom 20% of",percentile:a}},hQe=e=>e>150?{category:"Rapidly Improving",color:"text-green-500"}:e>40?{category:"Improving",color:"text-green-400"}:e>-40?{category:"Stable",color:"text-blue-400"}:e>-150?{category:"Declining",color:"text-orange-400"}:{category:"Rapidly Declining",color:"text-red-400"},fQe=e=>e<10?{level:"Very Low",description:"Extremely consistent performance"}:e<20?{level:"Low",description:"Predictable results"}:e<35?{level:"Medium",description:"Typical variation"}:e<60?{level:"High",description:"Noticeable swings"}:{level:"Very High",description:"Highly unpredictable"},gQe=({playerId:e,playerName:n,dateRange:r,recalculateTrueSkill:s=!1})=>{const[a,i]=S.useState(!0),[o,c]=S.useState([]),[A,u]=S.useState([]),[h,d]=S.useState(!1),{isViewModeLoading:f,getHistoricalRatings:g,getHistoricalRatingsForPeriod:m,getCurrentTrueSkillRatings:y}=Ls();S.useEffect(()=>{const b=()=>d(window.innerWidth<768);return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),S.useEffect(()=>{f||(async()=>{if(!f)try{i(!0);let w;r!=null&&r.startDate||r!=null&&r.endDate||s?w=await m(r==null?void 0:r.startDate,r==null?void 0:r.endDate,s):w=await g();const _=await y();u(Object.values(_));const B=[];for(const V of w)if(V.participants.includes(e)&&V.matchNumber>0){const K=Object.values(V.ratings).sort((se,de)=>se-de);B.push({matchNumber:V.matchNumber,date:V.date,playerRating:V.ratings[e],allRatings:K})}if(B.length===0){c([]),i(!1);return}const k=B[0].date,N=B[0].allRatings.map(()=>1200);B.unshift({matchNumber:0,date:k,playerRating:1200,allRatings:N});const C=B.map(V=>gu(V.allRatings,10)),j=B.map(V=>gu(V.allRatings,25)),E=B.map(V=>gu(V.allRatings,50)),F=B.map(V=>gu(V.allRatings,75)),I=B.map(V=>gu(V.allRatings,90)),T=B.map(V=>V.allRatings.reduce((K,se)=>K+se,0)/V.allRatings.length),L=ic(C),P=ic(j),O=ic(E),Q=ic(F),R=ic(I),M=ic(T),G=B.map((V,K)=>({matchNumber:V.matchNumber,date:V.date,playerRating:V.playerRating,p10:Math.round(L[K]),p25:Math.round(P[K]),p50:Math.round(O[K]),p75:Math.round(Q[K]),p90:Math.round(R[K]),mean:Math.round(M[K])}));c(G)}catch(w){console.error("Error loading skill progression:",w)}finally{i(!1)}})()},[e,f,g,m,y,r==null?void 0:r.startDate,r==null?void 0:r.endDate,s]);const v=S.useMemo(()=>{var Q,R;if(o.length===0)return null;const b=1200,w=((Q=o[o.length-1])==null?void 0:Q.playerRating)||0,_=((R=o[o.length-1])==null?void 0:R.p50)||0,B=w-b,k=_-b,N=B-k,C=w-_,j=C>0,E=o.slice(1).map((M,G)=>M.playerRating-o[G].playerRating),F=E.length>0?E.reduce((M,G)=>M+G,0)/E.length:0,I=E.length>0?Math.sqrt(E.reduce((M,G)=>M+Math.pow(G-F,2),0)/E.length):0;let T=0;if(o.length>=2){const M=o.slice(-Math.min(5,o.length));if(M.length>=2){const G=M[0];T=(M[M.length-1].playerRating-G.playerRating)/(M.length-1)}}const L=dQe(w,A),P=hQe(T),O=fQe(Math.round(I));return{startRating:b,endRating:w,playerChange:B,groupChange:k,relativeToGroup:N,isAboveAverage:j,currentDifference:Math.abs(C),volatility:Math.round(I),totalMatches:o.length-1,trend:B>=0?"up":"down",positionCategory:L,trendCategory:P,volatilityInfo:O,recentSlope:T,lastMedian:_}},[o,A]),p=S.useMemo(()=>{if(o.length===0)return[1e3,1400];const b=o.flatMap(B=>[B.playerRating,B.p10,B.p90,1200]),w=Math.min(...b),_=Math.max(...b);return[Math.floor(w/50)*50-50,Math.ceil(_/50)*50+50]},[o]),x=S.useMemo(()=>{if(o.length===0)return[0,10];const b=o.map(w=>w.matchNumber);return[Math.min(...b)-.5,Math.max(...b)+.5]},[o]);return a||f?l.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-600 rounded"})]})}):o.length===0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(Hr,{size:20,className:"mr-2 text-blue-400"}),"Skill Progression Over Time"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Hr,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"No Progression Data Available"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Not enough match history to show skill progression."})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[l.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[l.jsx(Hr,{size:20,className:"mr-2 text-blue-400"}),"Skill Progression vs Group"]}),v&&l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`text-lg font-semibold flex items-center ${v.trend==="up"?"text-green-400":"text-red-400"}`,children:[v.trend==="up"?l.jsx(Y0,{size:16,className:"mr-1"}):l.jsx(X0,{size:16,className:"mr-1"}),v.playerChange>=0?"+":"",v.playerChange]}),l.jsx("div",{className:"text-sm text-gray-400",children:"Total change"})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`text-lg font-semibold flex items-center ${v.isAboveAverage?"text-green-400":"text-orange-400"}`,children:[v.isAboveAverage?l.jsx(Y0,{size:16,className:"mr-1"}):l.jsx(X0,{size:16,className:"mr-1"}),v.currentDifference]}),l.jsx("div",{className:"text-sm text-gray-400",children:"vs median"})]})]})]}),l.jsx("div",{style:{width:"100%",height:h?400:550},children:l.jsxs(Ih,{width:h?400:1e3,height:h?380:530,domain:{x,y:p},padding:{top:30,bottom:60,left:70,right:30},children:[l.jsx(Pa,{label:"Match Number",tickValues:o.map(b=>b.matchNumber),tickFormat:b=>Math.round(b),style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:h?12:16,padding:40},tickLabels:{fill:"#9CA3AF",fontSize:h?10:14},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(Pa,{dependentAxis:!0,label:"Skill Rating",style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:h?12:16,padding:50},tickLabels:{fill:"#9CA3AF",fontSize:h?10:14},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(bf,{data:o,x:"matchNumber",y:"p25",y0:"p10",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.15,stroke:"none"}}}),l.jsx(bf,{data:o,x:"matchNumber",y:"p50",y0:"p25",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.25,stroke:"none"}}}),l.jsx(bf,{data:o,x:"matchNumber",y:"p75",y0:"p50",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.25,stroke:"none"}}}),l.jsx(bf,{data:o,x:"matchNumber",y:"p90",y0:"p75",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.15,stroke:"none"}}}),l.jsx(rl,{data:[{x:x[0],y:1200},{x:x[1],y:1200}],style:{data:{stroke:"#6B7280",strokeWidth:2,strokeDasharray:"10 5"}}}),l.jsx(rl,{data:o,x:"matchNumber",y:"mean",interpolation:"monotoneX",style:{data:{stroke:"#EF4444",strokeWidth:2.5,strokeDasharray:"8 4"}}}),l.jsx(rl,{data:o,x:"matchNumber",y:"p50",interpolation:"monotoneX",style:{data:{stroke:"#EF4444",strokeWidth:2.5}}}),l.jsx(rl,{data:o,x:"matchNumber",y:"playerRating",interpolation:"linear",style:{data:{stroke:"#3B82F6",strokeWidth:4}}}),l.jsx(Pp,{data:o,x:"matchNumber",y:"playerRating",size:7,style:{data:{fill:"#3B82F6"}}})]})}),l.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 justify-center p-3 bg-gray-800 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),l.jsx("span",{className:"text-sm text-gray-300",children:n})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-6 h-0.5 bg-red-500"}),l.jsx("span",{className:"text-sm text-gray-300",children:"Group Median"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("svg",{width:"24",height:"8",className:"flex-shrink-0",children:l.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"6 3"})}),l.jsx("span",{className:"text-sm text-gray-300",children:"Group Mean"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-5 h-3 rounded",style:{backgroundColor:"rgba(239,68,68,0.25)"}}),l.jsx("span",{className:"text-sm text-gray-300",children:"25th-75th %ile"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-5 h-3 rounded",style:{backgroundColor:"rgba(239,68,68,0.15)"}}),l.jsx("span",{className:"text-sm text-gray-300",children:"10th-90th %ile"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("svg",{width:"24",height:"8",className:"flex-shrink-0",children:l.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#6B7280",strokeWidth:"1.5",strokeDasharray:"8 4"})}),l.jsx("span",{className:"text-sm text-gray-300",children:"Starting (1200)"})]})]}),v&&l.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-2 text-gray-300",children:"Performance vs Group"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx(At,{text:`Shows where you rank compared to all players.

${v.positionCategory.category}: You are ${v.positionCategory.description} all players.

Your rating: ${v.endRating} points
Percentile rank: ${v.positionCategory.percentile}th percentile`,position:"right",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Position"})}),l.jsx("span",{className:`font-medium ${v.positionCategory.color}`,children:v.positionCategory.category})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(At,{text:`Gap between your rating and group median.

${Math.abs(v.currentDifference)} points ${v.isAboveAverage?"above":"below"} median.

Larger gaps = more distinctive skill level.`,position:"right",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Difference"})}),l.jsxs("span",{className:"font-medium",children:[v.currentDifference," pts"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(At,{text:`Your improvement vs everyone else's.

You: ${v.playerChange>=0?"+":""}${v.playerChange} points since start
Group: ${v.groupChange>=0?"+":""}${v.groupChange} points median change

Positive = improved faster than median
Negative = improved slower than median`,position:"right",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Relative Gain"})}),l.jsxs("span",{className:`font-medium ${v.relativeToGroup>=0?"text-green-400":"text-red-400"}`,children:[v.relativeToGroup>=0?"+":"",v.relativeToGroup]})]})]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-2 text-gray-300",children:"Rating Journey"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Starting Rating"}),l.jsx("span",{className:"font-medium",children:v.startRating})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Current Rating"}),l.jsx("span",{className:"font-medium",children:v.endRating})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Matches Played"}),l.jsx("span",{className:"font-medium",children:v.totalMatches})]})]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-2 text-gray-300",children:"Consistency"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx(At,{text:`How much your rating varies between games.

${v.volatilityInfo.level} volatility (${v.volatility} points)

${v.volatilityInfo.description} - consistent players are easier to balance teams with.`,position:"left",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Volatility"})}),l.jsx("span",{className:"font-medium",children:v.volatilityInfo.level})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(At,{text:`Recent performance trajectory (last 5 games).

${v.trendCategory.category}: ${v.recentSlope>=0?"+":""}${v.recentSlope.toFixed(1)} pts/game

Recent trends show current form better than overall stats.`,position:"left",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Trend"})}),l.jsx("span",{className:`font-medium ${v.trendCategory.color}`,children:v.trendCategory.category})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(At,{text:`How predictable your performance is.

Based on your volatility (${v.volatility} pts).

High stability = consistent results
Low stability = unpredictable swings`,position:"left",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Stability"})}),l.jsx("span",{className:"font-medium",children:v.volatility<10?"Very High":v.volatility<20?"High":v.volatility<35?"Medium":v.volatility<60?"Low":"Very Low"})]})]})]})]}),l.jsx("div",{className:"mt-6 p-4 bg-gray-800/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Your Rating (Blue Line):"})," Shows your skill rating at each match you played."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Group Median (Solid Red):"})," The smoothed median (50th percentile) of all player ratings."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Group Mean (Dashed Red):"})," The smoothed average rating of all players."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Shaded Bands:"})," Show the distribution of player ratings. Darker = 25th-75th percentile (middle 50%). Lighter = 10th-90th percentile."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Starting Line (Dashed Grey at 1200):"})," The default skill rating all players begin with."]}),l.jsx("p",{children:"Being above the median means you're better than half the group. The higher in the shaded region, the better your relative performance."})]})]})})]})},mQe=({playerId:e})=>{const[n,r]=S.useState(!0),[s,a]=S.useState(null),{isViewModeLoading:i,getPlayerStats:o,getAllMatches:c,getMatchPlayers:A}=Ls(),u=(()=>{const f=localStorage.getItem("playerStats_minGames");return f?parseInt(f,10):3})(),h=(()=>{const f=localStorage.getItem("playerStats_recencyMonths");return f?parseInt(f,10):null})(),d=S.useMemo(()=>{if(h===null)return{startDate:null,endDate:null};const f=new Date,g=new Date;return g.setMonth(g.getMonth()-h),{startDate:g,endDate:f}},[h]);return S.useEffect(()=>{i||(async()=>{if(!i)try{r(!0);const[g,m]=await Promise.all([o(e),c()]);let y=m;d.startDate&&d.endDate&&(y=m.filter(E=>{const F=new Date(E.date);return F>=d.startDate&&F<=d.endDate}));const v=new Set(y.map(E=>E.id)),p=g.matchesPlayed.filter(E=>v.has(E.matchId)),x=new Map;for(const E of p)if(!x.has(E.matchId)){const F=await A(E.matchId);x.set(E.matchId,F)}const b=new Map,w=new Map;for(const[E,F]of x){const I=F.find(P=>P.playerId===e);if(!I)continue;const T=y.find(P=>P.id===E);if(!T)continue;const L=I.team===T.winningTeam;F.forEach(P=>{if(P.playerId!==e)if(P.team===I.team){b.has(P.playerId)||b.set(P.playerId,{wins:0,total:0,name:P.playerId});const O=b.get(P.playerId);O.total++,L&&O.wins++}else{w.has(P.playerId)||w.set(P.playerId,{wins:0,total:0,name:P.playerId});const O=w.get(P.playerId);O.total++,L&&O.wins++}})}const _=Array.from(b.entries()).map(([E,F])=>({playerId:E,playerName:F.name,gamesPlayed:F.total,winRate:F.wins/F.total*100,isSignificant:F.total>=u})).filter(E=>E.isSignificant).sort((E,F)=>F.winRate-E.winRate),B=Array.from(w.entries()).map(([E,F])=>({playerId:E,playerName:F.name,gamesPlayed:F.total,winRate:F.wins/F.total*100,isSignificant:F.total>=u})).filter(E=>E.isSignificant).sort((E,F)=>E.winRate-F.winRate),k=E=>{if(E.length===0)return[];const F=E[0].winRate;return E.filter(I=>I.winRate===F)},N=E=>{if(E.length===0)return[];const F=E[0].winRate;return E.filter(I=>I.winRate===F)},C=k(_),j=N(B);a({bestTeammates:C,nemeses:j})}catch(g){console.error("Error calculating relationship stats:",g)}finally{r(!1)}})()},[e,d.startDate,d.endDate,i,o,c,A,u]),n||i?l.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("div",{className:"h-32 bg-gray-600 rounded"}),l.jsx("div",{className:"h-32 bg-gray-600 rounded"})]})]})}):!s||s.bestTeammates.length===0&&s.nemeses.length===0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(St,{size:20,className:"mr-2 text-blue-400"}),"Player Relationships"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(St,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"Not Enough Data"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Need at least ",u," game",u!==1?"s":""," with the same players to calculate meaningful relationships."]})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(St,{size:20,className:"mr-2 text-blue-400"}),"Player Relationships"]}),h!==null&&d.startDate&&d.endDate&&l.jsxs("div",{className:"mb-4 p-2 bg-blue-900/30 border border-blue-700/50 rounded text-sm flex items-center",children:[l.jsx(ks,{size:14,className:"mr-2 text-blue-400"}),l.jsxs("span",{className:"text-blue-200",children:["Showing relationships from last ",h," month",h!==1?"s":""]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Wb,{size:20,className:"mr-2 text-green-400"}),l.jsx("h4",{className:"font-semibold text-green-400",children:"Best Teammate (BFF)"})]})}),s.bestTeammates.length>0?l.jsx("div",{children:s.bestTeammates.map((f,g)=>l.jsxs("div",{className:g>0?"mt-3 pt-3 border-t border-gray-600":"",children:[l.jsxs("div",{className:"text-lg font-bold text-white mb-1",children:[f.playerName,s.bestTeammates.length>1&&l.jsx("span",{className:"text-sm text-gray-400 ml-2",children:"(tied)"})]}),l.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-2",children:[f.winRate.toFixed(1),"% Win Rate"]}),l.jsxs("div",{className:"text-sm text-gray-400",children:[f.gamesPlayed," games together"]}),l.jsx("div",{className:"mt-3 h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${f.winRate}%`}})})]},f.playerId))}):l.jsx("div",{className:"text-center py-4",children:l.jsx("p",{className:"text-gray-400",children:"No significant teammate relationships yet"})})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(mO,{size:20,className:"mr-2 text-red-400"}),l.jsx("h4",{className:"font-semibold text-red-400",children:"Nemesis"})]})}),s.nemeses.length>0?l.jsx("div",{children:s.nemeses.map((f,g)=>l.jsxs("div",{className:g>0?"mt-3 pt-3 border-t border-gray-600":"",children:[l.jsxs("div",{className:"text-lg font-bold text-white mb-1",children:[f.playerName,s.nemeses.length>1&&l.jsx("span",{className:"text-sm text-gray-400 ml-2",children:"(tied)"})]}),l.jsxs("div",{className:"text-2xl font-bold text-red-400 mb-2",children:[f.winRate.toFixed(1),"% Win Rate"]}),l.jsxs("div",{className:"text-sm text-gray-400",children:[f.gamesPlayed," games against"]}),l.jsx("div",{className:"mt-3 h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-red-500",style:{width:`${f.winRate}%`}})})]},f.playerId))}):l.jsx("div",{className:"text-center py-4",children:l.jsx("p",{className:"text-gray-400",children:"No significant opponent relationships yet"})})]})]}),l.jsx("div",{className:"mt-6 p-4 bg-gray-800/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Best Teammate (BFF):"})," The player you have the highest win rate with (minimum ",u," game",u!==1?"s":"",")."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Nemesis:"})," The opponent you struggle against most (lowest win rate, minimum ",u," game",u!==1?"s":"",")."]}),l.jsxs("p",{children:["These statistics help identify which players complement your playstyle best and which opponents present the greatest challenge. Relationships require at least ",u," game",u!==1?"s":""," for statistical significance."]})]})]})})]})},pQe={guardian:{name:"Guardian",description:"Tanky defenders who protect allies and control space on the battlefield",shortDescription:"Protects allies from damage and controls battlefield positioning"},durable:{name:"Durable",description:"Tough heroes with high survivability and defensive capabilities",shortDescription:"Survives extended fights and outlasts enemies with defensive abilities"},slayer:{name:"Slayer",description:"High damage dealers who excel at eliminating enemy heroes",shortDescription:"Eliminates enemy heroes quickly with high damage output and burst"},tactician:{name:"Tactician",description:"Strategic heroes with strong positioning and battlefield control",shortDescription:"Controls battles through strategic positioning and tactical battlefield awareness"},support:{name:"Support",description:"Team utility specialists who heal, buff allies, and provide assistance",shortDescription:"Heals allies and provides team utility through buffs and assistance"},sorcerer:{name:"Sorcerer",description:"Magic damage dealers with powerful spells and area control",shortDescription:"Casts powerful magic spells for damage and area battlefield control"},disabler:{name:"Disabler",description:"Heroes who control enemies through stuns, roots, and debuffs",shortDescription:"Disrupts enemies with stuns, roots, and debuffs to control fights"},pusher:{name:"Pusher",description:"Heroes who excel at destroying structures and advancing lanes",shortDescription:"Destroys enemy structures and advances lanes to gain map control"},farming:{name:"Farming",description:"Heroes who efficiently gather resources and scale into late game",shortDescription:"Gathers resources efficiently to become powerful in late game scenarios"}},bQ=e=>{const n=e.toLowerCase(),r=pQe[n];return r?`${r.name}: ${r.shortDescription}`:e.charAt(0).toUpperCase()+e.slice(1)},yQe=({favoriteHeroes:e,allHeroesPlayed:n,favoriteRoles:r,allRolesPlayed:s,totalGames:a,matches:i})=>{const[o,c]=S.useState([]),[A,u]=S.useState(!0);S.useEffect(()=>{const f=async()=>{try{u(!0);const g=[];for(const m of e){const y=i.filter(b=>b.heroId===m.heroId||b.heroName===m.heroName);let v=0,p=0;for(const b of y)try{const w=await Ct.getMatch(b.matchId);w&&(p++,b.team===w.winningTeam&&v++)}catch(w){console.warn(`Failed to load match ${b.matchId}:`,w)}const x=p>0?v/p*100:0;g.push({heroName:m.heroName,gamesPlayed:m.count,winRate:x,percentage:a>0?m.count/a*100:0})}c(g)}catch(g){console.error("Error calculating hero win rates:",g);const m=e.map(y=>({heroName:y.heroName,gamesPlayed:y.count,winRate:0,percentage:a>0?y.count/a*100:0}));c(m)}finally{u(!1)}};e.length>0?f():(c([]),u(!1))},[e,i,a]);const h=f=>{switch(f.toLowerCase()){case"guardian":case"durable":return l.jsx(Mt,{size:16,className:"text-blue-400"});case"slayer":case"tactician":return l.jsx(yr,{size:16,className:"text-red-400"});case"support":return l.jsx(St,{size:16,className:"text-green-400"});case"sorcerer":return l.jsx(vl,{size:16,className:"text-purple-400"});default:return l.jsx(Z0,{size:16,className:"text-gray-400"})}},d=f=>{switch(f.toLowerCase()){case"guardian":case"durable":return"text-blue-400";case"slayer":case"tactician":return"text-red-400";case"support":return"text-green-400";case"sorcerer":return"text-purple-400";default:return"text-gray-400"}};return A?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(Mt,{size:20,className:"mr-2 text-blue-400"}),"Hero Performance Analytics"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-400",children:"Calculating hero win rates..."})]})]}):e.length===0||o.length===0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(Mt,{size:20,className:"mr-2 text-blue-400"}),"Hero Performance Analytics"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Mt,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"No Hero Data Available"}),l.jsx("p",{className:"text-sm text-gray-500",children:"This player hasn't recorded any matches with hero selection yet."})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(Mt,{size:20,className:"mr-2 text-blue-400"}),"Hero Performance Analytics"]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Most Played Heroes"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:o.slice(0,6).map(f=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-white truncate",children:f.heroName}),l.jsxs("div",{className:"text-xs text-gray-400",children:[f.gamesPlayed," games"]})]}),l.jsxs("div",{className:"text-right ml-2",children:[l.jsxs("div",{className:"text-sm font-semibold text-green-400",children:[f.winRate.toFixed(0),"%"]}),l.jsx("div",{className:"text-xs text-gray-500",children:"win rate"})]})]}),l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[l.jsx("span",{children:"Usage"}),l.jsxs("span",{children:[f.percentage.toFixed(1),"%"]})]}),l.jsx("div",{className:"h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-500",style:{width:`${f.percentage}%`}})})]}),l.jsx("div",{children:l.jsx("div",{className:"h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${f.winRate}%`}})})})]},f.heroName))})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Role Preferences"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:r.map(f=>{const g=a>0?f.count/a*100:0;return l.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsx(At,{text:bQ(f.role),position:"top",maxWidth:"max-w-sm",children:l.jsxs("div",{className:"flex items-center cursor-help",children:[h(f.role),l.jsx("span",{className:`ml-2 font-medium ${d(f.role)}`,children:f.role})]})})}),l.jsx("div",{className:"text-lg font-bold text-white",children:f.count}),l.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[g.toFixed(1),"% of games"]}),l.jsx("div",{className:"h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-500",style:{width:`${g}%`}})})]},f.role)})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-semibold mb-2 text-gray-300 flex items-center",children:[l.jsx(Hr,{size:16,className:"mr-2 text-blue-400"}),"Hero Diversity"]}),l.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:n.length}),l.jsx("div",{className:"text-sm text-gray-400",children:"Different heroes played"}),l.jsx("div",{className:"mt-2 text-xs text-gray-500",children:a>0&&n.length>0?`Avg ${(a/n.length).toFixed(1)} games per hero`:"No data"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-semibold mb-2 text-gray-300 flex items-center",children:[l.jsx(vl,{size:16,className:"mr-2 text-yellow-400"}),"Main Hero"]}),e[0]&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-lg font-bold text-white mb-1",children:e[0].heroName}),l.jsxs("div",{className:"text-sm text-gray-400",children:[e[0].count," games played"]}),l.jsx("div",{className:"mt-2 text-xs text-gray-500",children:a>0?`${(e[0].count/a*100).toFixed(1)}% of all games`:""})]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-semibold mb-2 text-gray-300 flex items-center",children:[l.jsx(St,{size:16,className:"mr-2 text-green-400"}),"Favorite Role"]}),r[0]&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-lg font-bold text-white mb-1 flex items-center",children:[h(r[0].role),l.jsx("span",{className:"ml-2",children:r[0].role})]}),l.jsxs("div",{className:"text-sm text-gray-400",children:[r[0].count," games played"]}),l.jsx("div",{className:"mt-2 text-xs text-gray-500",children:a>0?`${(r[0].count/a*100).toFixed(1)}% preference`:""})]})]})]})]})},vQe=({playerId:e})=>{const[n,r]=S.useState(!0),[s,a]=S.useState([]),[i,o]=S.useState(1),[c,A]=S.useState(null),{isViewModeLoading:u,getPlayerStats:h,getAllMatches:d,getMatch:f,getMatchPlayers:g}=Ls(),m=10,y=(()=>{const k=localStorage.getItem("playerStats_recencyMonths");return k?parseInt(k,10):null})(),v=S.useMemo(()=>{if(y===null)return{startDate:null,endDate:null};const k=new Date,N=new Date;return N.setMonth(N.getMonth()-y),{startDate:N,endDate:k}},[y]);S.useEffect(()=>{u||(async()=>{if(!u)try{r(!0),A(null);let C=(await h(e)).matchesPlayed;if(v.startDate&&v.endDate){const E=await d(),F=new Set(E.filter(I=>{const T=new Date(I.date);return T>=v.startDate&&T<=v.endDate}).map(I=>I.id));C=C.filter(I=>F.has(I.matchId))}const j=[];for(const E of C)try{const[F,I]=await Promise.all([f(E.matchId),g(E.matchId)]);if(F&&I.length>0){const T=I.find(Q=>Q.playerId===e);if(!T)continue;const L=I.filter(Q=>Q.playerId!==e&&Q.team===T.team),P=I.filter(Q=>Q.team!==T.team),O=T.team===F.winningTeam;j.push({match:F,playerData:T,teammates:L,opponents:P,won:O})}}catch(F){console.warn(`Failed to load match ${E.matchId}:`,F)}j.sort((E,F)=>new Date(F.match.date).getTime()-new Date(E.match.date).getTime()),a(j)}catch(N){console.error("Error loading match history:",N),A("Failed to load match history")}finally{r(!1)}})()},[e,v.startDate,v.endDate,u,h,d,f,g]);const p=k=>{if(!k)return l.jsx(At,{text:"Unknown role",position:"top",maxWidth:"max-w-sm",children:l.jsx(Z0,{size:16,className:"text-gray-400"})});const N=bQ(k);let C;switch(k.toLowerCase()){case"guardian":case"durable":C=l.jsx(Mt,{size:16,className:"text-blue-400"});break;case"slayer":case"tactician":C=l.jsx(yr,{size:16,className:"text-red-400"});break;case"support":C=l.jsx(St,{size:16,className:"text-green-400"});break;case"sorcerer":C=l.jsx(vl,{size:16,className:"text-purple-400"});break;default:C=l.jsx(Z0,{size:16,className:"text-gray-400"});break}return l.jsx(At,{text:N,position:"top",maxWidth:"max-w-sm",children:C})},x=Math.ceil(s.length/m),b=(i-1)*m,w=b+m,_=s.slice(b,w),B=k=>{o(Math.max(1,Math.min(k,x)))};return n||u?l.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((k,N)=>l.jsx("div",{className:"h-16 bg-gray-600 rounded"},N))})]})}):c||s.length===0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(ks,{size:20,className:"mr-2 text-blue-400"}),"Match History"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ks,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:c?"Error Loading History":"No Match History Available"}),l.jsx("p",{className:"text-sm text-gray-500",children:c||"This player hasn't recorded any matches yet."})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[l.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[l.jsx(ks,{size:20,className:"mr-2 text-blue-400"}),"Match History"]}),x>1&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>B(i-1),disabled:i===1,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(jn,{size:16})}),l.jsxs("span",{className:"text-sm text-gray-400 px-3",children:["Page ",i," of ",x]}),l.jsx("button",{onClick:()=>B(i+1),disabled:i===x,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(jd,{size:16})})]})]}),y!==null&&v.startDate&&v.endDate&&l.jsxs("div",{className:"mb-4 p-2 bg-blue-900/30 border border-blue-700/50 rounded text-sm flex items-center",children:[l.jsx(ks,{size:14,className:"mr-2 text-blue-400"}),l.jsxs("span",{className:"text-blue-200",children:["Showing matches from last ",y," month",y!==1?"s":""]})]}),l.jsx("div",{className:"space-y-4",children:_.map(k=>{var N,C;return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsxs("div",{className:"block lg:hidden",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${k.won?"bg-green-500":"bg-red-500"}`}),l.jsx("span",{className:`font-semibold ${k.won?"text-green-400":"text-red-400"}`,children:k.won?"Victory":"Defeat"})]}),l.jsx("div",{className:"text-right text-sm text-gray-400",children:l.jsx("div",{children:new Date(k.match.date).toLocaleDateString()})})]}),l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center",children:[p((N=k.playerData.heroRoles)==null?void 0:N[0]),l.jsx("span",{className:"ml-2 font-medium text-white",children:k.playerData.heroName||"Unknown Hero"})]}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Team ",k.playerData.team]})]}),(k.playerData.kills!==void 0||k.playerData.deaths!==void 0||k.playerData.assists!==void 0)&&l.jsxs("div",{className:"text-sm text-gray-300",children:["KDA: ",k.playerData.kills??0,"/",k.playerData.deaths??0,"/",k.playerData.assists??0,k.playerData.level&&`  Level ${k.playerData.level}`,k.playerData.goldEarned&&`  ${k.playerData.goldEarned.toLocaleString()} gold`]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-green-400 mb-1",children:"Teammates"}),l.jsx("div",{className:"space-y-1",children:k.teammates.map((j,E)=>{var F;return l.jsxs("div",{className:"flex items-center",children:[p((F=j.heroRoles)==null?void 0:F[0]),l.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[l.jsx("div",{className:"font-medium",children:j.playerId}),j.heroName&&l.jsx("div",{className:"text-xs text-gray-500",children:j.heroName})]})]},E)})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-red-400 mb-1",children:"Opponents"}),l.jsx("div",{className:"space-y-1",children:k.opponents.map((j,E)=>{var F;return l.jsxs("div",{className:"flex items-center",children:[p((F=j.heroRoles)==null?void 0:F[0]),l.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[l.jsx("div",{className:"font-medium",children:j.playerId}),j.heroName&&l.jsx("div",{className:"text-xs text-gray-500",children:j.heroName})]})]},E)})})]})]})]}),l.jsx("div",{className:"hidden lg:block",children:l.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[l.jsx("div",{className:"col-span-1",children:l.jsx("div",{className:`w-4 h-4 rounded-full ${k.won?"bg-green-500":"bg-red-500"}`})}),l.jsx("div",{className:"col-span-2 text-sm text-gray-400",children:l.jsx("div",{children:new Date(k.match.date).toLocaleDateString()})}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("div",{className:"flex items-center mb-1",children:[p((C=k.playerData.heroRoles)==null?void 0:C[0]),l.jsx("span",{className:"ml-2 font-medium text-white",children:k.playerData.heroName||"Unknown Hero"})]}),(k.playerData.kills!==void 0||k.playerData.deaths!==void 0||k.playerData.assists!==void 0)&&l.jsxs("div",{className:"text-sm text-gray-400",children:[k.playerData.kills??0,"/",k.playerData.deaths??0,"/",k.playerData.assists??0,k.playerData.level&&`  Lv.${k.playerData.level}`]})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("div",{className:"text-xs text-green-400 mb-1",children:"Teammates"}),l.jsx("div",{className:"space-y-1",children:k.teammates.map((j,E)=>{var F;return l.jsxs("div",{className:"flex items-center text-xs",children:[p((F=j.heroRoles)==null?void 0:F[0]),l.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[l.jsx("div",{children:j.playerId}),j.heroName&&l.jsx("div",{className:"text-xs text-gray-500",children:j.heroName})]})]},E)})})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("div",{className:"text-xs text-red-400 mb-1",children:"Opponents"}),l.jsx("div",{className:"space-y-1",children:k.opponents.map((j,E)=>{var F;return l.jsxs("div",{className:"flex items-center text-xs",children:[p((F=j.heroRoles)==null?void 0:F[0]),l.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[l.jsx("div",{children:j.playerId}),j.heroName&&l.jsx("div",{className:"text-xs text-gray-500",children:j.heroName})]})]},E)})})]})]})})]},k.match.id)})}),x>1&&l.jsxs("div",{className:"mt-6 flex justify-center items-center gap-2",children:[l.jsx("button",{onClick:()=>B(1),disabled:i===1,className:"px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),l.jsx("button",{onClick:()=>B(i-1),disabled:i===1,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(jn,{size:16})}),l.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,x)},(k,N)=>{const C=Math.max(1,Math.min(x-4,i-2))+N;return C<=x?l.jsx("button",{onClick:()=>B(C),className:`px-3 py-2 text-sm rounded-lg ${C===i?"bg-blue-600 text-white":"bg-gray-800 hover:bg-gray-600"}`,children:C},C):null})}),l.jsx("button",{onClick:()=>B(i+1),disabled:i===x,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(jd,{size:16})}),l.jsx("button",{onClick:()=>B(x),disabled:i===x,className:"px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:l.jsxs("div",{className:"text-center text-sm text-gray-400",children:["Showing ",b+1,"-",Math.min(w,s.length)," of ",s.length," matches",l.jsx("span",{className:"mx-2",children:""}),s.filter(k=>k.won).length," wins, ",s.filter(k=>!k.won).length," losses",l.jsx("span",{className:"mx-2",children:""}),s.length>0?(s.filter(k=>k.won).length/s.length*100).toFixed(1):"0.0","% win rate"]})})]})},xQe=({playerId:e,onBack:n})=>{const{playSound:r}=gt(),[s,a]=S.useState(null),[i,o]=S.useState(!0),[c,A]=S.useState(null),{isViewModeLoading:u,getPlayer:h,getAllPlayers:d,getAllMatches:f,getCurrentTrueSkillRatings:g,getPlayerStats:m}=Ls(),{playerStatsFilters:y}=U_(),v=(y==null?void 0:y.recencyMonths)??(()=>{const C=localStorage.getItem("playerStats_recencyMonths");return C?parseInt(C,10):null})(),p=(y==null?void 0:y.recalculateTrueSkill)??localStorage.getItem("playerStats_recalculateTrueSkill")==="true",x=S.useMemo(()=>{if(v===null)return{startDate:null,endDate:null};const C=new Date,j=new Date;return j.setMonth(j.getMonth()-v),{startDate:j,endDate:C}},[v]);S.useEffect(()=>{e&&!u&&(async()=>{if(!u)try{o(!0),A(null);const[j,E,F,I]=await Promise.all([h(e),m(e),g(),d()]);if(!j)throw new Error("Player not found");const L=I.map(Ae=>({...Ae,rating:F[Ae.id]||0})).filter(Ae=>Ae.totalGames>0).sort((Ae,Me)=>Me.rating-Ae.rating).findIndex(Ae=>Ae.id===e)+1;let P=await f(),O=null;x.startDate&&x.endDate&&(O=new Set(P.filter(Ae=>{const Me=new Date(Ae.date);return Me>=x.startDate&&Me<=x.endDate}).map(Ae=>Ae.id)));let Q=E.matchesPlayed;O&&(Q=Q.filter(Ae=>O.has(Ae.matchId)));const R=Q.reduce((Ae,Me)=>Ae+(Me.kills??0),0),M=Q.reduce((Ae,Me)=>Ae+(Me.deaths??0),0),G=Q.reduce((Ae,Me)=>Ae+(Me.assists??0),0),V=Q.reduce((Ae,Me)=>Ae+(Me.goldEarned??0),0),K=Q.reduce((Ae,Me)=>Ae+(Me.minionKills??0),0),se=Q.reduce((Ae,Me)=>Ae+(Me.level??0),0),de=Q.filter(Ae=>Ae.kills!==void 0||Ae.deaths!==void 0||Ae.assists!==void 0).length,ye=Q.filter(Ae=>Ae.goldEarned!==void 0).length,W=Q.filter(Ae=>Ae.minionKills!==void 0).length,U=Q.filter(Ae=>Ae.level!==void 0).length,$=M===0?R:R/M,ne=de>0?R/de:0,J=de>0?M/de:0,z=de>0?G/de:0,oe=ye>0?Math.round(V/ye):0,Ce=W>0?K/W:0,Fe=U>0?se/U:0,Ne=R>0||M>0||G>0||V>0,Be=new Map,pe=new Map;for(const Ae of Q){if(Ae.heroId){const Me=Be.get(Ae.heroId);Me?Me.count++:Be.set(Ae.heroId,{heroId:Ae.heroId,heroName:Ae.heroName||`Hero ${Ae.heroId}`,count:1})}if(Ae.heroRoles)for(const Me of Ae.heroRoles)pe.set(Me,(pe.get(Me)||0)+1)}const he=Array.from(Be.values()).sort((Ae,Me)=>Me.count-Ae.count).slice(0,5),Re=Array.from(pe.entries()).map(([Ae,Me])=>({role:Ae,count:Me})).sort((Ae,Me)=>Me.count-Ae.count),Le=Array.from(Be.values()).sort((Ae,Me)=>Me.count-Ae.count),ze={...E,favoriteHeroes:he,favoriteRoles:Re,allHeroesPlayed:Le,allRolesPlayed:Re};a({player:j,stats:ze,matches:Q,currentRating:F[e]||0,rank:L,combatStats:{kills:R,deaths:M,assists:G,kdRatio:parseFloat($.toFixed(2)),averageKills:ne,averageDeaths:J,averageAssists:z,gamesWithCombatData:de,gamesWithGoldData:ye,gamesWithMinionData:W,averageGold:oe,averageMinionKills:Ce,averageLevel:Fe,hasCombatStats:Ne}})}catch(j){A(j instanceof Error?j.message:"Failed to load player details")}finally{o(!1)}})()},[e,x.startDate,x.endDate,u,h,m,g,d,f]);const b=()=>{r("buttonClick"),n()};if(i||u)return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsxs("button",{onClick:b,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Player Stats"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Player Details"})]}),l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(m8,{size:24,className:"animate-spin text-blue-500 mr-3"}),l.jsx("span",{className:"text-gray-300",children:"Loading player details..."})]})})]});if(c||!s)return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsxs("button",{onClick:b,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Player Stats"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Player Details"})]}),l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(wo,{size:48,className:"text-red-500 mb-4"}),l.jsx("p",{className:"text-xl text-red-400 mb-2",children:"Error Loading Player"}),l.jsx("p",{className:"text-gray-400",children:c||"Player not found"}),l.jsx("button",{onClick:b,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Go Back"})]})]});const{player:w,stats:_,currentRating:B,rank:k,combatStats:N}=s;return w?l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsxs("button",{onClick:b,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Player Stats"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Detailed Player Statistics"})]}),v!==null&&x.startDate&&x.endDate&&l.jsxs("div",{className:"mb-6 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center",children:[l.jsx(ks,{size:18,className:"mr-2 text-blue-400 flex-shrink-0"}),l.jsxs("span",{className:"text-sm text-blue-200",children:["Showing stats from"," ",l.jsx("span",{className:"font-medium",children:x.startDate.toLocaleDateString()})," ","to"," ",l.jsx("span",{className:"font-medium",children:x.endDate.toLocaleDateString()})," ","(",v," month",v!==1?"s":"",")"]})]}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-2xl font-bold text-gray-300",children:w.name.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-white",children:w.name}),l.jsxs("div",{className:"flex items-center gap-2 mt-1 text-blue-400",children:[l.jsx(Hr,{size:20}),l.jsxs("span",{className:"text-lg font-semibold",children:["Rank #",k]})]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-400",children:B}),l.jsx("div",{className:"text-sm text-gray-400",children:"TrueSkill Rating"}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[w.totalGames," games  Last played ",new Date(w.lastPlayed).toLocaleDateString()]})]})]})}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Quick Overview"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:w.wins}),l.jsx("div",{className:"text-sm text-gray-400",children:"Wins"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-400",children:w.losses}),l.jsx("div",{className:"text-sm text-gray-400",children:"Losses"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[w.totalGames>0?(w.wins/w.totalGames*100).toFixed(1):"0.0","%"]}),l.jsx("div",{className:"text-sm text-gray-400",children:"Win Rate"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:_.allHeroesPlayed.length}),l.jsx("div",{className:"text-sm text-gray-400",children:"Heroes Played"})]})]})]}),l.jsx(uQe,{kills:N.kills,deaths:N.deaths,assists:N.assists,kdRatio:N.kdRatio,averageKills:N.averageKills,averageDeaths:N.averageDeaths,averageAssists:N.averageAssists,gamesWithCombatData:N.gamesWithCombatData,gamesWithGoldData:N.gamesWithGoldData,gamesWithMinionData:N.gamesWithMinionData,averageGold:N.averageGold,averageMinionKills:N.averageMinionKills,averageLevel:N.averageLevel,totalGames:s.matches.length,hasCombatStats:N.hasCombatStats}),l.jsx(gQe,{playerId:w.id,playerName:w.name,dateRange:x.startDate?{startDate:x.startDate,endDate:x.endDate??void 0}:void 0,recalculateTrueSkill:p}),l.jsx(mQe,{playerId:w.id,playerName:w.name}),l.jsx(yQe,{favoriteHeroes:_.favoriteHeroes,allHeroesPlayed:_.allHeroesPlayed,favoriteRoles:_.favoriteRoles,allRolesPlayed:_.allRolesPlayed,totalGames:s.matches.length,matches:s.matches}),l.jsx(vQe,{playerId:w.id,playerName:w.name})]}):l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsxs("button",{onClick:b,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Player Stats"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Player Details"})]}),l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(wo,{size:48,className:"text-red-500 mb-4"}),l.jsx("p",{className:"text-xl text-red-400 mb-2",children:"Player Not Found"}),l.jsx("p",{className:"text-gray-400",children:"Unable to load player data"}),l.jsx("button",{onClick:b,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Go Back"})]})]})},wQe=({selectedHeroId:e,onHeroChange:n,disabled:r=!1,className:s=""})=>{const[a,i]=S.useState(!1),[o,c]=S.useState(""),A=S.useRef(null),u=S.useRef(null),h=Pn.find(p=>p.id===e);S.useEffect(()=>{const p=x=>{A.current&&!A.current.contains(x.target)&&(i(!1),c(""))};return a&&(document.addEventListener("mousedown",p),setTimeout(()=>{var x;(x=u.current)==null||x.focus()},0)),()=>{document.removeEventListener("mousedown",p)}},[a]);const d=Pn.filter(p=>{var x;return p.name.toLowerCase().includes(o.toLowerCase())||p.roles.some(b=>b.toLowerCase().includes(o.toLowerCase()))||((x=p.additionalRoles)==null?void 0:x.some(b=>b.toLowerCase().includes(o.toLowerCase())))}),f=new Map;d.forEach(p=>{const x=p.roles[0]||"Unknown";f.has(x)||f.set(x,[]),f.get(x).push(p)});const g=Array.from(f.entries()).sort(([p],[x])=>{const b=["Durable","Tactician","Pusher","Disabler","Farming"],w=b.indexOf(p),_=b.indexOf(x);return w===-1&&_===-1?p.localeCompare(x):w===-1?1:_===-1?-1:w-_}),m=p=>{n(p.id,p),i(!1),c("")},y=()=>{r||(i(!a),c(""))},v=p=>Array.from({length:5},(x,b)=>l.jsx("span",{className:`text-sm ${b<p?"text-yellow-400":"text-gray-600"}`,children:""},b));return l.jsxs("div",{ref:A,className:`relative ${s}`,children:[l.jsxs("button",{type:"button",onClick:y,disabled:r,className:`w-full px-3 py-2 text-left bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center justify-between ${r?"opacity-50 cursor-not-allowed":"hover:bg-gray-600"}`,children:[l.jsx("div",{className:"flex items-center",children:h?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-8 h-8 bg-gray-800 rounded mr-3 flex items-center justify-center text-xs",children:""}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:h.name}),l.jsx("div",{className:"text-xs text-gray-400",children:h.roles.join(", ")})]})]}):l.jsx("span",{className:"text-gray-400",children:"Select a hero..."})}),l.jsx(Dn,{size:20,className:`transition-transform ${a?"rotate-180":""}`})]}),a&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-50 max-h-96 overflow-hidden",children:[l.jsx("div",{className:"p-3 border-b border-gray-700",children:l.jsxs("div",{className:"relative",children:[l.jsx(kl,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{ref:u,type:"text",value:o,onChange:p=>c(p.target.value),placeholder:"Search heroes...",className:"w-full pl-10 pr-3 py-2 bg-gray-700 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),l.jsx("div",{className:"max-h-80 overflow-y-auto",children:g.length>0?g.map(([p,x])=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-2 bg-gray-700/50 border-b border-gray-700 text-sm font-medium text-gray-300",children:p.toUpperCase()}),x.sort((b,w)=>b.name.localeCompare(w.name)).map(b=>l.jsxs("button",{type:"button",onClick:()=>m(b),className:`w-full px-3 py-3 text-left hover:bg-gray-700 flex items-center justify-between border-b border-gray-800 last:border-b-0 ${e===b.id?"bg-blue-900/30 ring-1 ring-blue-500":""}`,children:[l.jsxs("div",{className:"flex items-center flex-1",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded mr-3 flex items-center justify-center",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:b.name}),l.jsx("div",{className:"text-xs text-gray-400",children:b.roles.concat(b.additionalRoles||[]).join(", ")}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:b.expansion})]})]}),l.jsx("div",{className:"flex items-center ml-2",children:v(b.complexity)})]},b.id))]},p)):l.jsxs("div",{className:"px-3 py-6 text-center text-gray-400",children:['No heroes found matching "',o,'"']})}),h&&l.jsx("div",{className:"p-3 bg-gray-700/30 border-t border-gray-700",children:l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-400",children:"Current Selection: "}),l.jsx("span",{className:"font-medium",children:h.name}),l.jsxs("span",{className:"text-gray-400",children:[" - ",h.roles.join(", ")]})]})})]})]})},bQe=({isOpen:e,matchId:n,onClose:r,onSaveComplete:s})=>{const{playSound:a}=gt(),i=S.useRef(null),[o,c]=S.useState(null),[A,u]=S.useState(null),[h,d]=S.useState([]),[f,g]=S.useState(!1),[m,y]=S.useState(!1),[v,p]=S.useState(null),[x,b]=S.useState({isValid:!0,errors:[],warnings:[]}),[w,_]=S.useState(!1);S.useEffect(()=>{e&&n?N():k()},[e,n]),S.useEffect(()=>{A&&h.length>0&&(C(),j())},[A,h]);const B=M=>{i.current&&!i.current.contains(M.target)&&E()};S.useEffect(()=>{const M=G=>{G.key==="Escape"&&e&&E()};return e&&(document.addEventListener("keydown",M),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",M),document.body.style.overflow=""}},[e]);const k=()=>{c(null),u(null),d([]),g(!1),y(!1),p(null),b({isValid:!0,errors:[],warnings:[]}),_(!1)},N=async()=>{g(!0),p(null);try{const M=await Ct.getEditableMatch(n);if(!M)throw new Error("Match not found");const G=await Ct.canEditMatch(n);if(!G.canEdit)throw new Error(G.reason||"Cannot edit this match");c(M),u({...M.match}),d(M.players.map(V=>({...V})))}catch(M){console.error("Error loading match data:",M),p(M instanceof Error?M.message:"Failed to load match data")}finally{g(!1)}},C=()=>{if(!A||!h)return;const M=Ct.validateMatchEdit(A,h);b(M)},j=()=>{if(!o||!A){_(!1);return}const M=JSON.stringify(o.match)!==JSON.stringify(A),G=JSON.stringify(o.players)!==JSON.stringify(h);_(M||G)},E=()=>{w&&!window.confirm("You have unsaved changes. Are you sure you want to close without saving?")||(a("buttonClick"),r())},F=async()=>{if(!(!A||!h||!x.isValid)){y(!0),p(null);try{const M={};o&&Object.keys(A).forEach(V=>{const K=V;o.match[K]!==A[K]&&(M[K]=A[K])});const G=h.filter(V=>{const K=o==null?void 0:o.players.find(se=>se.id===V.id);return K&&JSON.stringify(K)!==JSON.stringify(V)}).map(V=>({id:V.id,updates:{heroId:V.heroId,heroName:V.heroName,heroRoles:V.heroRoles,kills:V.kills,deaths:V.deaths,assists:V.assists,goldEarned:V.goldEarned,minionKills:V.minionKills,level:V.level,team:V.team}}));if(Object.keys(M).length===0&&G.length===0){a("buttonClick"),s();return}await Ct.editMatch(n,M,G),a("phaseChange"),s()}catch(M){console.error("Error saving match:",M),p(M instanceof Error?M.message:"Failed to save match")}finally{y(!1)}}},I=()=>{o&&window.confirm("Reset all changes to original values?")&&(a("buttonClick"),u({...o.match}),d(o.players.map(M=>({...M}))))},T=(M,G)=>{A&&u({...A,[M]:G})},L=(M,G,V)=>{d(K=>K.map(se=>se.id===M?{...se,[G]:V}:se))},P=(M,G)=>{const V=Pn.find(K=>K.id===G);V&&d(K=>K.map(se=>se.id===M?{...se,heroId:V.id,heroName:V.name,heroRoles:[...V.roles,...V.additionalRoles||[]]}:se))},O=M=>new Date(M).toISOString().split("T")[0],Q=M=>{const G=new Date(M);return`${G.getHours().toString().padStart(2,"0")}:${G.getMinutes().toString().padStart(2,"0")}`},R=(M,G)=>{const[V,K]=G.split(":"),se=new Date(M);se.setHours(parseInt(V),parseInt(K)),T("date",se)};return e?l.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:B,children:l.jsxs("div",{ref:i,className:"max-w-6xl w-full max-h-[90vh] bg-gray-800 rounded-lg border border-gray-600 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[" Edit Match",A&&l.jsx("span",{className:"ml-3 text-base text-gray-400",children:new Date(A.date).toLocaleDateString()})]}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Changes will recalculate all player ratings from this match forward"})]}),l.jsx("button",{onClick:E,className:"text-gray-400 hover:text-white p-2",children:l.jsx(Jt,{size:24})})]}),l.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-180px)]",children:f?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Bt,{size:24,className:"animate-spin mr-3"}),l.jsx("span",{className:"text-gray-400",children:"Loading match data..."})]})}):v?l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"bg-red-900/30 border border-red-600 p-4 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Ai,{size:20,className:"mr-3 text-red-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-red-300",children:"Error Loading Match"}),l.jsx("p",{className:"text-red-200 mt-1",children:v})]})]})})}):A&&h?l.jsxs("div",{className:"p-6",children:[(x.errors.length>0||x.warnings.length>0)&&l.jsxs("div",{className:"mb-6",children:[x.errors.length>0&&l.jsxs("div",{className:"bg-red-900/30 border border-red-600 p-4 rounded-lg mb-4",children:[l.jsxs("h3",{className:"font-semibold text-red-300 mb-2 flex items-center",children:[l.jsx(Ai,{size:18,className:"mr-2"}),"Validation Errors"]}),l.jsx("ul",{className:"text-red-200 text-sm space-y-1",children:x.errors.map((M,G)=>l.jsxs("li",{children:[" ",M.message]},G))})]}),x.warnings.length>0&&l.jsxs("div",{className:"bg-amber-900/30 border border-amber-600 p-4 rounded-lg mb-4",children:[l.jsxs("h3",{className:"font-semibold text-amber-300 mb-2 flex items-center",children:[l.jsx(Ai,{size:18,className:"mr-2"}),"Warnings"]}),l.jsx("ul",{className:"text-amber-200 text-sm space-y-1",children:x.warnings.map((M,G)=>l.jsxs("li",{children:[" ",M.message]},G))})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-200",children:"Match Details"}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date"}),l.jsx("input",{type:"date",value:O(A.date),onChange:M=>R(M.target.value,Q(A.date)),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Time"}),l.jsx("input",{type:"time",value:Q(A.date),onChange:M=>R(O(A.date),M.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Winner"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"winner",checked:A.winningTeam===ie.Titans,onChange:()=>T("winningTeam",ie.Titans),className:"mr-2"}),l.jsx("span",{className:"text-blue-400",children:"Titans"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"winner",checked:A.winningTeam===ie.Atlanteans,onChange:()=>T("winningTeam",ie.Atlanteans),className:"mr-2"}),l.jsx("span",{className:"text-red-400",children:"Atlanteans"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Length"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"gameLength",checked:A.gameLength===dt.Quick,onChange:()=>T("gameLength",dt.Quick),className:"mr-2"}),l.jsx("span",{children:"Quick"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"gameLength",checked:A.gameLength===dt.Long,onChange:()=>T("gameLength",dt.Long),className:"mr-2"}),l.jsx("span",{children:"Long"})]})]})]})]}),l.jsx("div",{className:"mt-4",children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:A.doubleLanes,onChange:M=>T("doubleLanes",M.target.checked),className:"mr-2"}),l.jsx("span",{className:"text-gray-300",children:"Double Lanes"})]})}),l.jsx("div",{className:"mt-4",children:l.jsx(j_,{value:A.victoryType,onChange:M=>T("victoryType",M),showNotRecorded:!0})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-200",children:"Teams"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium mb-3 text-blue-400 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans (",h.filter(M=>M.team===ie.Titans).length," players)"]}),l.jsx("div",{className:"space-y-4",children:h.filter(M=>M.team===ie.Titans).map(M=>l.jsx(EN,{player:M,onHeroChange:G=>P(M.id,G),onFieldChange:(G,V)=>L(M.id,G,V),validation:x},M.id))})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium mb-3 text-red-400 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans (",h.filter(M=>M.team===ie.Atlanteans).length," players)"]}),l.jsx("div",{className:"space-y-4",children:h.filter(M=>M.team===ie.Atlanteans).map(M=>l.jsx(EN,{player:M,onHeroChange:G=>P(M.id,G),onFieldChange:(G,V)=>L(M.id,G,V),validation:x},M.id))})]})]})]})]}):null}),l.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-700",children:[l.jsx("div",{className:"flex items-center space-x-4",children:w&&l.jsxs("div",{className:"flex items-center text-amber-400 text-sm",children:[l.jsx(Ai,{size:16,className:"mr-1"}),l.jsx("span",{children:"Unsaved changes"})]})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(At,{text:"Reset all changes to original values",children:l.jsxs("button",{onClick:I,disabled:m||!w,className:`px-4 py-2 rounded-lg flex items-center ${w?"bg-gray-600 hover:bg-gray-500":"bg-gray-700 cursor-not-allowed opacity-50"}`,children:[l.jsx(zc,{size:18,className:"mr-2"}),"Reset"]})}),l.jsx("button",{onClick:E,disabled:m,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"Cancel"}),l.jsx(At,{text:x.isValid?w?"Save all changes and recalculate ratings":"No changes to save":"Fix validation errors before saving",children:l.jsx("button",{onClick:F,disabled:m||!x.isValid||!w,className:`px-4 py-2 rounded-lg flex items-center ${x.isValid&&w?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 cursor-not-allowed opacity-50"}`,children:m?l.jsxs(l.Fragment,{children:[l.jsx(Bt,{size:18,className:"mr-2 animate-spin"}),"Saving..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Nm,{size:18,className:"mr-2"}),"Save Changes"]})})})]})]})]})}):null},EN=({player:e,onHeroChange:n,onFieldChange:r,validation:s})=>{var u;const[a,i]=S.useState(!1),o=h=>s.errors.find(d=>d.field===h&&d.playerId===e.playerId),c=h=>s.warnings.find(d=>d.field===h&&d.playerId===e.playerId),A=(h,d,f)=>{var v;const g=o(h),m=c(h),y=g||m;return l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:d}),l.jsx("input",{type:"number",min:"0",value:f||"",onChange:p=>r(h,p.target.value?parseInt(p.target.value):void 0),className:`w-full px-2 py-1 text-sm bg-gray-800 border rounded focus:outline-none focus:ring-1 ${g?"border-red-500 focus:ring-red-500":m?"border-amber-500 focus:ring-amber-500":"border-gray-600 focus:ring-blue-500"}`}),y&&l.jsx("div",{className:`text-xs mt-1 ${g?"text-red-400":"text-amber-400"}`,children:(v=g||m)==null?void 0:v.message})]})};return l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg border border-gray-600",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"mr-3 bg-gray-800 p-2 rounded-full",children:""}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium",children:e.playerName}),l.jsxs("p",{className:"text-xs text-gray-400",children:["Player ID: ",e.playerId]})]})]}),l.jsx("button",{onClick:()=>i(!a),className:"px-3 py-1 text-xs bg-gray-600 hover:bg-gray-500 rounded",children:a?"Hide Stats":"Show Stats"})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hero"}),l.jsx(wQe,{selectedHeroId:e.heroId,onHeroChange:n,className:"w-full"}),o("hero")&&l.jsx("div",{className:"text-xs text-red-400 mt-1",children:(u=o("hero"))==null?void 0:u.message})]}),a&&l.jsxs("div",{className:"bg-gray-800/50 p-3 rounded",children:[l.jsx("h6",{className:"text-sm font-medium text-gray-300 mb-3",children:"Statistics (Optional)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[A("kills","Kills",e.kills),A("deaths","Deaths",e.deaths),A("assists","Assists",e.assists),A("goldEarned","Gold",e.goldEarned),A("minionKills","Minions",e.minionKills),A("level","Level",e.level)]})]})]})},_Qe=({onBack:e})=>{const{playSound:n}=gt(),{isViewMode:r,isViewModeLoading:s,getAllMatches:a,getMatchPlayers:i,getPlayer:o}=Ls(),[c,A]=S.useState([]),[u,h]=S.useState(!0),[d,f]=S.useState(""),[g,m]=S.useState("all"),[y,v]=S.useState("all"),[p,x]=S.useState("all"),[b,w]=S.useState("desc"),[_,B]=S.useState(!1),[k,N]=S.useState(null),[C,j]=S.useState(null),[E,F]=S.useState(!1),I=async()=>{h(!0);try{const W=await a();W.sort(($,ne)=>{const J=new Date($.date).getTime();return new Date(ne.date).getTime()-J});const U=await Promise.all(W.map(async $=>{const ne=await i($.id),J=await Promise.all(ne.map(async z=>{const oe=await o(z.playerId);return{...z,playerName:(oe==null?void 0:oe.name)||"Unknown Player"}}));return{...$,players:J,expanded:!1}}));A(U)}catch(W){console.error("Error loading match history:",W)}finally{h(!1)}};S.useEffect(()=>{s||I()},[s,a,i,o]);const T=()=>{n("buttonClick"),e()},L=W=>{n("buttonClick"),A(c.map(U=>U.id===W?{...U,expanded:!U.expanded}:U))},P=async W=>{if(k!==W){n("buttonClick"),N(W);return}try{n("buttonClick"),await Ct.deleteMatch(W),A(c.filter(U=>U.id!==W)),N(null)}catch(U){console.error("Error deleting match:",U)}},O=W=>{n("buttonClick"),j(W),F(!0)},Q=()=>{n("buttonClick"),F(!1),j(null)},R=async()=>{n("phaseChange"),F(!1),j(null);try{await I()}catch(W){console.error("Error reloading matches after edit:",W)}},M=()=>{n("buttonClick"),w(b==="asc"?"desc":"asc")},G=()=>{n("buttonClick"),B(!_)},V=()=>{n("buttonClick"),f(""),m("all"),v("all"),x("all"),B(!1)},K=W=>new Date(W).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),se=W=>W.players.some(U=>U.kills&&U.kills>0||U.deaths&&U.deaths>0||U.assists&&U.assists>0),de=W=>W.players.some(U=>U.goldEarned&&U.goldEarned>0),ye=c.filter(W=>{if(g!=="all"&&W.winningTeam!==g||y!=="all"&&W.gameLength!==y)return!1;if(p!=="all"){if(p==="not-recorded"){if(W.victoryType!==void 0)return!1}else if(W.victoryType!==p)return!1}if(d){const U=d.toLowerCase();return W.players.some($=>$.playerName.toLowerCase().includes(U)||$.heroName.toLowerCase().includes(U))}return!0}).sort((W,U)=>{const $=new Date(W.date).getTime(),ne=new Date(U.date).getTime();return b==="asc"?$-ne:ne-$});return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("button",{onClick:T,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Match History"})]}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:d,onChange:W=>f(W.target.value),placeholder:"Search players or heroes...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx(kl,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("button",{onClick:M,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(ks,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Date ",b==="asc"?"(Oldest)":"(Newest)"]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:G,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(os,{size:18,className:"mr-2"}),l.jsx("span",{children:"Filters"}),(g!=="all"||y!=="all"||p!=="all")&&l.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(g!=="all"?1:0)+(y!=="all"?1:0)+(p!=="all"?1:0)}),_?l.jsx(_r,{size:16,className:"ml-2"}):l.jsx(Dn,{size:16,className:"ml-2"})]}),_&&l.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-64",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Winning Team"}),l.jsxs("select",{value:g,onChange:W=>m(W.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Teams"}),l.jsx("option",{value:ie.Titans,children:"Titans"}),l.jsx("option",{value:ie.Atlanteans,children:"Atlanteans"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Game Length"}),l.jsxs("select",{value:y,onChange:W=>v(W.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Lengths"}),l.jsx("option",{value:dt.Quick,children:"Quick"}),l.jsx("option",{value:dt.Long,children:"Long"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Victory Type"}),l.jsxs("select",{value:p,onChange:W=>x(W.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Types"}),l.jsx("option",{value:"throne",children:"Throne"}),l.jsx("option",{value:"wave",children:"Wave"}),l.jsx("option",{value:"kills",children:"Kills"}),l.jsx("option",{value:"not-recorded",children:"Not Recorded"})]})]}),l.jsx("button",{onClick:V,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),u?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsx("div",{children:ye.length>0?l.jsx("div",{className:"space-y-4",children:ye.map(W=>l.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md",children:[l.jsxs("div",{className:`px-5 py-4 ${W.winningTeam===ie.Titans?"bg-blue-900/50":"bg-red-900/50"} flex justify-between items-center cursor-pointer`,onClick:()=>L(W.id),children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(kd,{size:18,className:"mr-2"}),l.jsx("span",{className:"font-bold",children:W.winningTeam===ie.Titans?"Titans Victory":"Atlanteans Victory"}),W.victoryType&&(()=>{const U=lfe(W.victoryType);if(U){const $=U.icon;return l.jsxs("span",{className:`ml-3 flex items-center text-sm ${U.color}`,title:U.description,children:[l.jsx($,{size:14,className:"mr-1"}),U.label]})}return null})()]}),l.jsx("div",{className:"text-sm text-gray-300 mt-1",children:K(W.date)})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"bg-gray-800 px-2 py-1 rounded",children:W.gameLength===dt.Quick?"Quick":"Long"}),W.doubleLanes&&l.jsx("span",{className:"ml-2 bg-gray-800 px-2 py-1 rounded",children:"Double Lane"})]}),l.jsx("div",{children:W.expanded?l.jsx(_r,{size:20}):l.jsx(Dn,{size:20})})]})]}),W.expanded&&l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-3 rounded-lg ${W.winningTeam===ie.Titans?"bg-blue-900/30 ring-2 ring-blue-500":"bg-blue-900/20"}`,children:[l.jsxs("h4",{className:"font-bold mb-2 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans Team",W.winningTeam===ie.Titans&&l.jsx("span",{className:"ml-2 text-xs bg-blue-600 px-2 py-0.5 rounded-full",children:"Winner"})]}),l.jsx("div",{className:"space-y-2",children:W.players.filter(U=>U.team===ie.Titans).map(U=>l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/30 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"mr-2 bg-gray-800 p-1 rounded-full",children:l.jsx(Mt,{size:16})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:U.playerName}),l.jsxs("div",{className:"text-xs text-gray-300",children:[U.heroName,"  ",U.heroRoles.join(", ")]})]})]}),(se(W)||de(W))&&l.jsxs("div",{className:"flex items-center space-x-2 text-xs bg-gray-800 px-2 py-1 rounded",children:[se(W)&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(yr,{size:12,className:"text-blue-400 mr-1"}),U.kills||0]}),l.jsx("span",{children:"/"}),l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(na,{size:12,className:"text-red-400 mr-1"}),U.deaths||0]}),l.jsx("span",{children:"/"}),l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(St,{size:12,className:"text-green-400 mr-1"}),U.assists||0]})]}),de(W)&&l.jsxs("div",{className:"flex items-center ml-2",title:"Gold",children:[l.jsx(ea,{size:12,className:"text-yellow-400 mr-1"}),U.goldEarned||0]})]})]},U.id))})]}),l.jsxs("div",{className:`p-3 rounded-lg ${W.winningTeam===ie.Atlanteans?"bg-red-900/30 ring-2 ring-red-500":"bg-red-900/20"}`,children:[l.jsxs("h4",{className:"font-bold mb-2 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans Team",W.winningTeam===ie.Atlanteans&&l.jsx("span",{className:"ml-2 text-xs bg-red-600 px-2 py-0.5 rounded-full",children:"Winner"})]}),l.jsx("div",{className:"space-y-2",children:W.players.filter(U=>U.team===ie.Atlanteans).map(U=>l.jsxs("div",{className:"flex justify-between items-center bg-red-900/30 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"mr-2 bg-gray-800 p-1 rounded-full",children:l.jsx(Mt,{size:16})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:U.playerName}),l.jsxs("div",{className:"text-xs text-gray-300",children:[U.heroName,"  ",U.heroRoles.join(", ")]})]})]}),(se(W)||de(W))&&l.jsxs("div",{className:"flex items-center space-x-2 text-xs bg-gray-800 px-2 py-1 rounded",children:[se(W)&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(yr,{size:12,className:"text-blue-400 mr-1"}),U.kills||0]}),l.jsx("span",{children:"/"}),l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(na,{size:12,className:"text-red-400 mr-1"}),U.deaths||0]}),l.jsx("span",{children:"/"}),l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(St,{size:12,className:"text-green-400 mr-1"}),U.assists||0]})]}),de(W)&&l.jsxs("div",{className:"flex items-center ml-2",title:"Gold",children:[l.jsx(ea,{size:12,className:"text-yellow-400 mr-1"}),U.goldEarned||0]})]})]},U.id))})]})]}),!r&&l.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[l.jsx(At,{text:"Edit this match data",children:l.jsxs("button",{onClick:U=>{U.stopPropagation(),O(W.id)},className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 rounded-lg flex items-center",children:[l.jsx(G8,{size:16,className:"mr-2"}),l.jsx("span",{children:"Edit Match"})]})}),l.jsx(At,{text:"Delete this match and its data",children:l.jsxs("button",{onClick:U=>{U.stopPropagation(),P(W.id)},className:`px-3 py-1 rounded-lg flex items-center ${k===W.id?"bg-red-500 hover:bg-red-400":"bg-red-700 hover:bg-red-600"}`,children:[l.jsx(ho,{size:16,className:"mr-2"}),l.jsx("span",{children:k===W.id?"Confirm Delete":"Delete Match"})]})})]})]})]},W.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(ks,{size:48,className:"text-gray-500 mb-4"}),l.jsx("p",{className:"text-xl text-gray-400",children:d||g!=="all"||y!=="all"||p!=="all"?"No matches found matching your filters":"No match history available"}),(d||g!=="all"||y!=="all"||p!=="all")&&l.jsx("button",{onClick:V,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Clear Filters"})]})}),E&&C&&l.jsx(bQe,{isOpen:E,matchId:C,onClose:Q,onSaveComplete:R})]})},CQe={Trophy:l.jsx(SA,{size:18}),Clock:l.jsx(Lr,{size:18}),Sparkles:l.jsx(tg,{size:18}),Clock3:l.jsx(Hx,{size:18}),TrendingUp:l.jsx(Hr,{size:18}),Shuffle:l.jsx(Vb,{size:18})},BQe=({factor:e,value:n,remaining:r,onChange:s,disabled:a=!1})=>{const i=h=>{const d=n+h;d<0||h>0&&h>r||s(d)},o=h=>n>=h&&!a,c=h=>r>=h&&!a,A={blue:{bg:"bg-blue-900/30",text:"text-blue-400",bar:"bg-blue-500"},green:{bg:"bg-green-900/30",text:"text-green-400",bar:"bg-green-500"},amber:{bg:"bg-amber-900/30",text:"text-amber-400",bar:"bg-amber-500"},indigo:{bg:"bg-indigo-900/30",text:"text-indigo-400",bar:"bg-indigo-500"},rose:{bg:"bg-rose-900/30",text:"text-rose-400",bar:"bg-rose-500"},purple:{bg:"bg-purple-900/30",text:"text-purple-400",bar:"bg-purple-500"}},u=A[e.colorClass]||A.blue;return l.jsxs("div",{className:`p-3 rounded-lg ${u.bg} ${a?"opacity-50":""}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:u.text,children:CQe[e.icon]}),l.jsx("span",{className:"font-medium text-white",children:e.label})]}),l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"flex-1 h-2 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full ${u.bar} transition-all duration-150`,style:{width:`${n}%`}})}),l.jsxs("span",{className:"text-white font-bold w-12 text-right",children:[n,"%"]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-1",children:[l.jsx("button",{onClick:()=>i(-10),disabled:!o(10),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${o(10)?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,title:"Decrease by 10",children:l.jsxs("span",{className:"flex items-center gap-0.5",children:[l.jsx(ta,{size:10}),"10"]})}),l.jsx("button",{onClick:()=>i(-5),disabled:!o(5),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${o(5)?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,title:"Decrease by 5",children:l.jsxs("span",{className:"flex items-center gap-0.5",children:[l.jsx(ta,{size:10}),"5"]})}),l.jsx("button",{onClick:()=>i(-1),disabled:!o(1),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${o(1)?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,title:"Decrease by 1",children:l.jsxs("span",{className:"flex items-center gap-0.5",children:[l.jsx(ta,{size:10}),"1"]})}),l.jsx("div",{className:"w-2"})," ",l.jsx("button",{onClick:()=>i(1),disabled:!c(1),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${c(1)?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,title:"Increase by 1",children:l.jsxs("span",{className:"flex items-center gap-0.5",children:[l.jsx(ns,{size:10}),"1"]})}),l.jsx("button",{onClick:()=>i(5),disabled:!c(5),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${c(5)?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,title:"Increase by 5",children:l.jsxs("span",{className:"flex items-center gap-0.5",children:[l.jsx(ns,{size:10}),"5"]})}),l.jsx("button",{onClick:()=>i(10),disabled:!c(10),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${c(10)?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-800 text-gray-600 cursor-not-allowed"}`,title:"Increase by 10",children:l.jsxs("span",{className:"flex items-center gap-0.5",children:[l.jsx(ns,{size:10}),"10"]})})]})]})},SQe=({presets:e,selectedPresetId:n,onSelectPreset:r,onSaveClick:s,onDeletePreset:a,onRenamePreset:i,hasUnsavedChanges:o,existingNames:c})=>{const[A,u]=S.useState(!1),[h,d]=S.useState(!1),[f,g]=S.useState(""),[m,y]=S.useState(null),v=S.useRef(null),p=e.find(N=>N.id===n),x=p&&!p.isBuiltIn;S.useEffect(()=>{h&&v.current&&(v.current.focus(),v.current.select())},[h]);const b=()=>{p&&x&&(g(p.name),y(null),d(!0),u(!1))},w=()=>{d(!1),g(""),y(null)},_=()=>{const N=f.trim();if(!N){y("Name cannot be empty");return}if(c.some(j=>j.toLowerCase()===N.toLowerCase()&&j.toLowerCase()!==(p==null?void 0:p.name.toLowerCase()))){y("A preset with this name already exists");return}n&&(i(n,N),d(!1),g(""),y(null))},B=N=>{N.key==="Enter"?(N.preventDefault(),_()):N.key==="Escape"&&w()},k=()=>{n&&x&&(a(n),u(!1))};return l.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsxs("select",{value:n||"custom",onChange:N=>{if(N.target.value==="custom")r(null);else{const C=e.find(j=>j.id===N.target.value);C&&r(C)}},className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white appearance-none cursor-pointer focus:outline-none focus:border-cyan-500 pr-10",children:[l.jsx("option",{value:"custom",children:o?"* Custom (unsaved)":"Custom"}),e.map(N=>l.jsxs("option",{value:N.id,children:[N.name,N.isBuiltIn?" (built-in)":""]},N.id))]}),l.jsx(Dn,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:s,className:"px-3 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-white transition-colors flex items-center gap-2",title:"Save as new preset",children:[l.jsx(Nm,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Save As..."})]}),x&&!h&&!A&&l.jsxs("button",{onClick:b,className:"px-3 py-2 bg-amber-700 hover:bg-amber-600 rounded-lg text-white transition-colors flex items-center gap-2",title:"Rename selected preset",children:[l.jsx(S8,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Rename"})]}),x&&!h&&!A&&l.jsxs("button",{onClick:()=>u(!0),className:"px-3 py-2 bg-red-700 hover:bg-red-600 rounded-lg text-white transition-colors flex items-center gap-2",title:"Delete selected preset",children:[l.jsx(ho,{size:16}),l.jsx("span",{className:"hidden sm:inline",children:"Delete"})]}),A&&l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:k,className:"px-3 py-2 bg-red-600 hover:bg-red-500 rounded-lg text-white text-sm transition-colors",children:"Confirm"}),l.jsx("button",{onClick:()=>u(!1),className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white text-sm transition-colors",children:"Cancel"})]})]}),h&&l.jsxs("div",{className:"w-full flex flex-col gap-1",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{ref:v,type:"text",value:f,onChange:N=>{g(N.target.value),y(null)},onKeyDown:B,className:`flex-1 px-3 py-2 bg-gray-700 border rounded-lg text-white focus:outline-none ${m?"border-red-500":"border-gray-600 focus:border-cyan-500"}`,placeholder:"Enter new name"}),l.jsx("button",{onClick:_,className:"px-3 py-2 bg-green-600 hover:bg-green-500 rounded-lg text-white transition-colors",title:"Confirm rename",children:l.jsx(lr,{size:16})}),l.jsx("button",{onClick:w,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",title:"Cancel rename",children:l.jsx(Jt,{size:16})})]}),m&&l.jsx("p",{className:"text-sm text-red-400",children:m})]})]})},kQe=({isOpen:e,onClose:n,onSave:r,existingNames:s})=>{const[a,i]=S.useState(""),[o,c]=S.useState(null);if(!e)return null;const A=()=>{const h=a.trim();if(!h){c("Please enter a name");return}if(s.includes(h)){c("A preset with this name already exists");return}r(h),i(""),c(null),n()},u=h=>{h.key==="Enter"?A():h.key==="Escape"&&n()};return l.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-[60]",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:"Save Preset"}),l.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-white transition-colors",children:l.jsx(Jt,{size:20})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Preset Name"}),l.jsx("input",{type:"text",value:a,onChange:h=>{i(h.target.value),c(null)},onKeyDown:u,placeholder:"Enter preset name...",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-cyan-500",autoFocus:!0}),o&&l.jsx("p",{className:"mt-2 text-sm text-red-400",children:o})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",children:"Cancel"}),l.jsxs("button",{onClick:A,className:"px-4 py-2 bg-cyan-600 hover:bg-cyan-500 rounded-lg text-white transition-colors flex items-center gap-2",children:[l.jsx(Nm,{size:16}),"Save"]})]})]})})},jQe=[{id:"ranking",label:"Skill Balance",description:"Minimize skill difference between teams",icon:"Trophy",colorClass:"blue"},{id:"experience",label:"Experience",description:"Balance by total games played",icon:"Clock",colorClass:"green"},{id:"novel",label:"Novel Pairings",description:"Pair players who rarely team up",icon:"Sparkles",colorClass:"amber"},{id:"reunion",label:"Reunion",description:"Pair players who haven't teamed recently",icon:"Clock3",colorClass:"indigo"},{id:"winRate",label:"Win Rate",description:"Balance by player win rates",icon:"TrendingUp",colorClass:"rose"},{id:"random",label:"Randomness",description:"Add unpredictability to team selection",icon:"Shuffle",colorClass:"purple"}],NQe=[{id:"balanced",name:"Balanced",weights:{ranking:20,experience:20,novel:20,reunion:20,winRate:20,random:0},isBuiltIn:!0},{id:"competitive",name:"Competitive",weights:{ranking:40,experience:15,novel:10,reunion:10,winRate:15,random:10},isBuiltIn:!0},{id:"social",name:"Social",weights:{ranking:10,experience:10,novel:35,reunion:35,winRate:10,random:0},isBuiltIn:!0}],TN={ranking:17,experience:17,novel:17,reunion:17,winRate:16,random:16},FN="matchmaker_presets",EQe=({isOpen:e,onClose:n,onGenerate:r,disabled:s=!1,isGenerating:a=!1})=>{const[i,o]=S.useState(()=>{const E=localStorage.getItem(FN),F=E?JSON.parse(E):[],I=NQe.map(L=>({...L,createdAt:new Date})),T=F.filter(L=>!I.some(P=>P.id===L.id));return[...I,...T]}),[c,A]=S.useState(TN),[u,h]=S.useState(null),[d,f]=S.useState(!1),[g,m]=S.useState(!1);S.useEffect(()=>{const E=i.filter(F=>!F.isBuiltIn);localStorage.setItem(FN,JSON.stringify(E))},[i]);const y=Object.values(c).reduce((E,F)=>E+F,0),v=100-y,p=y===100,x=(E,F)=>{A(I=>({...I,[E]:F})),m(!0),h(null)},b=()=>{A(TN),m(!1),h(null)},w=()=>{A({ranking:0,experience:0,novel:0,reunion:0,winRate:0,random:0}),m(!0),h(null)},_=E=>{E?(A(E.weights),h(E.id),m(!1)):h(null)},B=E=>{const F={id:`user-${Date.now()}`,name:E,weights:{...c},createdAt:new Date,isBuiltIn:!1};o(I=>[...I,F]),h(F.id),m(!1)},k=E=>{o(F=>F.filter(I=>I.id!==E)),u===E&&h(null)},N=(E,F)=>{o(I=>I.map(T=>T.id===E?{...T,name:F}:T))},C=()=>{p&&!s&&!a&&r(c)};if(!e)return null;const j=i.map(E=>E.name);return l.jsxs("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-lg mx-4 shadow-xl max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Kx,{size:20,className:"text-cyan-400"}),l.jsx("h2",{className:"text-xl font-bold text-white",children:"Custom Match Maker"})]}),l.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-white transition-colors",children:l.jsx(Jt,{size:24})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"text-gray-300",children:"Total Allocation"}),l.jsxs("span",{className:`font-bold ${p?"text-green-400":"text-gray-400"}`,children:[y,"/100"]})]}),l.jsx("div",{className:"h-3 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full transition-all duration-150 ${p?"bg-green-500":y>100?"bg-red-500":"bg-gray-500"}`,style:{width:`${Math.min(y,100)}%`}})}),!p&&l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:v>0?`${v} point${v!==1?"s":""} remaining`:`${-v} point${-v!==1?"s":""} over budget`})]}),l.jsx("div",{className:"space-y-3 mb-6",children:jQe.map(E=>l.jsx(BQe,{factor:E,value:c[E.id],remaining:v,onChange:F=>x(E.id,F),disabled:s||a},E.id))}),l.jsxs("div",{className:"flex gap-2 mb-6",children:[l.jsxs("button",{onClick:b,disabled:s||a,className:"flex-1 px-3 py-2 bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white transition-colors flex items-center justify-center gap-2",children:[l.jsx(zc,{size:16}),"Reset (20 each)"]}),l.jsxs("button",{onClick:w,disabled:s||a,className:"flex-1 px-3 py-2 bg-gray-700 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-white transition-colors flex items-center justify-center gap-2",children:[l.jsx(G$,{size:16}),"Clear All"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-2",children:"Presets"}),l.jsx(SQe,{presets:i,selectedPresetId:u,onSelectPreset:_,onSaveClick:()=>f(!0),onDeletePreset:k,onRenamePreset:N,hasUnsavedChanges:g,existingNames:j})]})]}),l.jsxs("div",{className:"p-4 border-t border-gray-700",children:[l.jsx("button",{onClick:C,disabled:!p||s||a,className:`w-full py-3 rounded-lg font-semibold text-white transition-colors flex items-center justify-center gap-2 ${p&&!s&&!a?"bg-cyan-600 hover:bg-cyan-500":"bg-gray-700 cursor-not-allowed opacity-50"}`,children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Generating..."]}):l.jsxs(l.Fragment,{children:[l.jsx(jm,{size:20}),"Generate Teams"]})}),!p&&l.jsx("p",{className:"text-center text-sm text-gray-400 mt-2",children:"Allocate exactly 100 points to generate teams"})]})]}),l.jsx(kQe,{isOpen:d,onClose:()=>f(!1),onSave:B,existingNames:j})]})},TQe=({probability:e,team1Name:n,team2Name:r})=>l.jsxs("div",{className:"space-y-6 bg-gray-800 p-8 rounded-lg text-white",children:[l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-between items-center mb-2 text-sm",children:l.jsx("span",{className:"text-gray-400",children:"Win Probability Scale"})}),l.jsxs("div",{className:"relative h-8 bg-gray-700 rounded-lg",children:[l.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-1 pointer-events-none",children:[l.jsx("span",{className:"text-xs text-gray-400",children:"0%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"20%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"40%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"60%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"80%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"100%"})]}),[20,40,60,80].map(s=>l.jsx("div",{className:"absolute top-0 bottom-0 border-l border-gray-600/50",style:{left:`${s}%`}},s))]})]}),l.jsxs("div",{className:"mt-16",children:[l.jsx("div",{className:"flex items-center mb-3",children:l.jsx("span",{className:"text-blue-400 font-medium relative -top-4",children:n})}),l.jsxs("div",{className:"relative h-8 bg-gray-700 rounded-lg overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 bottom-0 bg-blue-500/30",style:{left:`${e.team1Lower}%`,width:`${e.team1Upper-e.team1Lower}%`}}),l.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 z-10",style:{left:`${e.team1Probability}%`},children:l.jsxs("div",{className:"relative",children:[l.jsxs("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-sm font-bold text-white whitespace-nowrap",children:[e.team1Probability,"% (",e.team1Lower,"-",e.team1Upper,"%)"]}),l.jsx("div",{className:"w-4 h-4 bg-blue-500 transform rotate-45 -translate-x-1/2"})]})})]})]}),l.jsxs("div",{className:"mt-16",children:[l.jsx("div",{className:"flex items-center mb-3",children:l.jsx("span",{className:"text-red-400 font-medium relative -top-4",children:r})}),l.jsxs("div",{className:"relative h-8 bg-gray-700 rounded-lg overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 bottom-0 bg-red-500/30",style:{left:`${e.team2Lower}%`,width:`${e.team2Upper-e.team2Lower}%`}}),l.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 z-10",style:{left:`${e.team2Probability}%`},children:l.jsxs("div",{className:"relative",children:[l.jsxs("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-sm font-bold text-white whitespace-nowrap",children:[e.team2Probability,"% (",e.team2Lower,"-",e.team2Upper,"%)"]}),l.jsx("div",{className:"w-4 h-4 bg-red-500 transform rotate-45 -translate-x-1/2"})]})})]})]})]}),FQe=({onBack:e,onUseTeams:n})=>{const{playSound:r}=gt(),{isViewMode:s,getAllPlayers:a,getAllMatches:i,getMatchPlayers:o,getPlayerDisplayRating:c}=Ls(),[A,u]=S.useState([]),[h,d]=S.useState([]),[f,g]=S.useState([]),[m,y]=S.useState([]),[v,p]=S.useState(!0),[x,b]=S.useState(!1),[w,_]=S.useState(!1),[B,k]=S.useState(null),[N,C]=S.useState(!1),[j,E]=S.useState(null),[F,I]=S.useState(null),[T,L]=S.useState(null),[P,O]=S.useState(!1),[Q,R]=S.useState(null),[M,G]=S.useState(null);S.useEffect(()=>{(async()=>{p(!0);try{const re=(await a()).filter(xe=>xe.totalGames>0);re.sort((xe,me)=>xe.name.localeCompare(me.name)),u(re)}catch(X){console.error("Error loading players:",X)}finally{p(!1)}})()},[a]),S.useEffect(()=>{(async()=>{if(s){k(null);return}if(f.length>0&&m.length>0)try{const X=f.map(me=>me.id),re=m.map(me=>me.id),xe=await Ct.calculateWinProbabilityWithCI(X,re);k(xe)}catch(X){console.error("Error calculating win probability:",X),k(null)}else k(null)})()},[f,m,s]);const V=()=>{r("buttonClick"),e()},K=D=>{r("buttonClick"),h.some(X=>X.id===D.id)?(d(h.filter(X=>X.id!==D.id)),w&&(g(f.filter(X=>X.id!==D.id)),y(m.filter(X=>X.id!==D.id)))):d([...h,D])},se=(D,X)=>{const re=D.length;if(re<2)return{team1:[...D],team2:[]};const xe=[...D].sort((Qe,Te)=>{const at=X(Te)-X(Qe);return at!==0?at:Qe.id.localeCompare(Te.id)}),me=Math.ceil(re/2),Pe=re-me,Y=(Qe=>{const Te=[],at=(mt,bt)=>{if(bt.length===Qe){Te.push([...bt]);return}for(let ht=mt;ht<=re-(Qe-bt.length);ht++)bt.push(ht),at(ht+1,bt),bt.pop()};return at(0,[]),Te})(me);let ee=[],ae=1/0;for(const Qe of Y){let Te=0,at=0;const mt=new Set(Qe);for(let Kt=0;Kt<re;Kt++){const Ln=X(xe[Kt]);mt.has(Kt)?Te+=Ln:at+=Ln}const bt=Te/me,ht=at/Pe,vt=Math.abs(bt-ht);vt<ae&&(ae=vt,ee=Qe)}const Se=new Set(ee),we=ee.map(Qe=>xe[Qe]),ke=xe.filter((Qe,Te)=>!Se.has(Te));return{team1:we,team2:ke}},de=async D=>{var me,Pe,Ie,Y;const X=new Map,re=new Set(D);for(const ee of D){X.set(ee,new Map);for(const ae of D)ee!==ae&&X.get(ee).set(ae,0)}const xe=await i();for(const ee of xe){const ae=await o(ee.id),Se=ae.filter(ke=>ke.team==="titans"&&re.has(ke.playerId)).map(ke=>ke.playerId),we=ae.filter(ke=>ke.team==="atlanteans"&&re.has(ke.playerId)).map(ke=>ke.playerId);for(let ke=0;ke<Se.length;ke++)for(let Qe=ke+1;Qe<Se.length;Qe++){const Te=Se[ke],at=Se[Qe];X.get(Te).set(at,(((me=X.get(Te))==null?void 0:me.get(at))??0)+1),X.get(at).set(Te,(((Pe=X.get(at))==null?void 0:Pe.get(Te))??0)+1)}for(let ke=0;ke<we.length;ke++)for(let Qe=ke+1;Qe<we.length;Qe++){const Te=we[ke],at=we[Qe];X.get(Te).set(at,(((Ie=X.get(Te))==null?void 0:Ie.get(at))??0)+1),X.get(at).set(Te,(((Y=X.get(at))==null?void 0:Y.get(Te))??0)+1)}}return X},ye=(D,X)=>{var xe;let re=0;for(let me=0;me<D.length;me++)for(let Pe=me+1;Pe<D.length;Pe++)re+=((xe=X.get(D[me].id))==null?void 0:xe.get(D[Pe].id))??0;return re},W=(D,X)=>{const re=D.length;if(re<2)return{team1:[...D],team2:[],team1Familiarity:0,team2Familiarity:0,avgFamiliarity:0};const xe=[...D].sort((ht,vt)=>ht.id.localeCompare(vt.id)),me=Math.ceil(re/2),Ie=(ht=>{const vt=[],Kt=(Ln,Hn)=>{if(Hn.length===ht){vt.push([...Hn]);return}for(let dn=Ln;dn<=re-(ht-Hn.length);dn++)Hn.push(dn),Kt(dn+1,Hn),Hn.pop()};return Kt(0,[]),vt})(me);let Y=[],ee=1/0;for(const ht of Ie){const vt=new Set(ht),Kt=ht.map(pa=>xe[pa]),Ln=xe.filter((pa,Ze)=>!vt.has(Ze)),Hn=ye(Kt,X),dn=ye(Ln,X),Nr=Hn+dn;Nr<ee&&(ee=Nr,Y=ht)}const ae=new Set(Y),Se=Y.map(ht=>xe[ht]),we=xe.filter((ht,vt)=>!ae.has(vt)),ke=ye(Se,X),Qe=ye(we,X),Te=Se.length*(Se.length-1)/2,at=we.length*(we.length-1)/2,mt=Te+at,bt=mt>0?(ke+Qe)/mt:0;return{team1:Se,team2:we,team1Familiarity:ke,team2Familiarity:Qe,avgFamiliarity:bt}},U=async()=>{if(!(h.length<4)){b(!0),r("phaseChange");try{const D=h.map(xe=>xe.id),X=await de(D),re=W(h,X);g(re.team1),y(re.team2),E("novel"),I({team1Familiarity:re.team1Familiarity,team2Familiarity:re.team2Familiarity,avgFamiliarity:re.avgFamiliarity}),L(null),R(null),G(null),C(!1)}catch(D){console.error("Error balancing teams by novelty:",D)}finally{b(!1)}}},$=3650,ne=async D=>{var me,Pe;const X=new Map,re=new Set(D);for(const Ie of D){X.set(Ie,new Map);for(const Y of D)Ie!==Y&&X.get(Ie).set(Y,null)}const xe=await i();xe.sort((Ie,Y)=>new Date(Y.date).getTime()-new Date(Ie.date).getTime());for(const Ie of xe){const Y=await o(Ie.id),ee=new Date(Ie.date),ae=Y.filter(we=>we.team==="titans"&&re.has(we.playerId)).map(we=>we.playerId),Se=Y.filter(we=>we.team==="atlanteans"&&re.has(we.playerId)).map(we=>we.playerId);for(let we=0;we<ae.length;we++)for(let ke=we+1;ke<ae.length;ke++){const Qe=ae[we],Te=ae[ke];((me=X.get(Qe))==null?void 0:me.get(Te))===null&&(X.get(Qe).set(Te,ee),X.get(Te).set(Qe,ee))}for(let we=0;we<Se.length;we++)for(let ke=we+1;ke<Se.length;ke++){const Qe=Se[we],Te=Se[ke];((Pe=X.get(Qe))==null?void 0:Pe.get(Te))===null&&(X.get(Qe).set(Te,ee),X.get(Te).set(Qe,ee))}}return X},J=(D,X,re)=>{var me;let xe=0;for(let Pe=0;Pe<D.length;Pe++)for(let Ie=Pe+1;Ie<D.length;Ie++){const Y=(me=X.get(D[Pe].id))==null?void 0:me.get(D[Ie].id);if(Y==null)xe+=$;else{const ee=re.getTime()-Y.getTime(),ae=Math.floor(ee/(1e3*60*60*24));xe+=ae}}return xe},z=(D,X,re)=>{const xe=D.length;if(xe<2)return{team1:[...D],team2:[],team1Recency:0,team2Recency:0,avgDaysSinceTeamed:0};const me=[...D].sort((vt,Kt)=>vt.id.localeCompare(Kt.id)),Pe=Math.ceil(xe/2),Y=(vt=>{const Kt=[],Ln=(Hn,dn)=>{if(dn.length===vt){Kt.push([...dn]);return}for(let Nr=Hn;Nr<=xe-(vt-dn.length);Nr++)dn.push(Nr),Ln(Nr+1,dn),dn.pop()};return Ln(0,[]),Kt})(Pe);let ee=[],ae=-1/0;for(const vt of Y){const Kt=new Set(vt),Ln=vt.map(Ze=>me[Ze]),Hn=me.filter((Ze,ya)=>!Kt.has(ya)),dn=J(Ln,X,re),Nr=J(Hn,X,re),pa=dn+Nr;pa>ae&&(ae=pa,ee=vt)}const Se=new Set(ee),we=ee.map(vt=>me[vt]),ke=me.filter((vt,Kt)=>!Se.has(Kt)),Qe=J(we,X,re),Te=J(ke,X,re),at=we.length*(we.length-1)/2,mt=ke.length*(ke.length-1)/2,bt=at+mt,ht=bt>0?(Qe+Te)/bt:0;return{team1:we,team2:ke,team1Recency:Qe,team2Recency:Te,avgDaysSinceTeamed:ht}},oe=async()=>{if(!(h.length<4)){b(!0),r("phaseChange");try{const D=h.map(me=>me.id),X=await ne(D),xe=z(h,X,new Date);g(xe.team1),y(xe.team2),E("reunion"),L({team1Recency:xe.team1Recency,team2Recency:xe.team2Recency,avgDaysSinceTeamed:xe.avgDaysSinceTeamed}),I(null),R(null),G(null),C(!1)}catch(D){console.error("Error balancing teams by reunion:",D)}finally{b(!1)}}},Ce=async()=>{if(!(h.length<4)){b(!0),r("phaseChange");try{const{team1:D,team2:X}=se(h,me=>me.totalGames>0?me.wins/me.totalGames:.5),re=D.reduce((me,Pe)=>me+(Pe.totalGames>0?Pe.wins/Pe.totalGames:.5),0)/D.length,xe=X.reduce((me,Pe)=>me+(Pe.totalGames>0?Pe.wins/Pe.totalGames:.5),0)/X.length;g(D),y(X),E("winRate"),I(null),L(null),R(null),G({team1AvgWinRate:re,team2AvgWinRate:xe,difference:Math.abs(re-xe)}),C(!1)}catch(D){console.error("Error balancing teams by win rate:",D)}finally{b(!1)}}},Fe=D=>D>=$?"Never teamed!":D>=365?`${(D/365).toFixed(1)} years`:D>=30?`${(D/30).toFixed(1)} months`:`${Math.round(D)} days`,Ne=async()=>{if(!(h.length<4)){b(!0),r("phaseChange");try{const{team1:D,team2:X}=se(h,re=>c(re));g(D),y(X),E("ranking"),I(null),L(null),R(null),G(null),C(!1)}catch(D){console.error("Error balancing teams:",D)}finally{b(!1)}}},Be=async()=>{if(!(h.length<4)){b(!0),r("phaseChange");try{const{team1:D,team2:X}=se(h,re=>re.totalGames);g(D),y(X),E("experience"),I(null),L(null),R(null),G(null),C(!1)}catch(D){console.error("Error balancing teams by experience:",D)}finally{b(!1)}}},pe=()=>{if(h.length<4)return;r("phaseChange");const D=[...h];for(let re=D.length-1;re>0;re--){const xe=Math.floor(Math.random()*(re+1));[D[re],D[xe]]=[D[xe],D[re]]}const X=Math.ceil(D.length/2);g(D.slice(0,X)),y(D.slice(X)),E("random"),I(null),L(null),R(null),G(null),C(!1)},he=async(D,X,re)=>{var Hn,dn,Nr,pa;const xe=D.length;if(xe<4)return[];const me=[...D].sort((Ze,ya)=>Ze.id.localeCompare(ya.id)),Pe=Math.ceil(xe/2),Ie=new Date,ee=(Ze=>{const ya=[],Fo=(En,tn)=>{if(tn.length===Ze){ya.push([...tn]);return}for(let Mi=En;Mi<=xe-(Ze-tn.length);Mi++)tn.push(Mi),Fo(Mi+1,tn),tn.pop()};return Fo(0,[]),ya})(Pe),ae=[];for(const Ze of ee){const ya=new Set(Ze),Fo=me.map((fe,_e)=>_e).filter(fe=>!ya.has(fe)),En=Ze.map(fe=>me[fe]),tn=Fo.map(fe=>me[fe]),Mi=En.reduce((fe,_e)=>fe+c(_e),0)/En.length,ey=tn.reduce((fe,_e)=>fe+c(_e),0)/tn.length,ty=Math.abs(Mi-ey),ny=En.reduce((fe,_e)=>fe+_e.totalGames,0)/En.length,ry=tn.reduce((fe,_e)=>fe+_e.totalGames,0)/tn.length,Rh=Math.abs(ny-ry);let zl=0;for(let fe=0;fe<En.length;fe++)for(let _e=fe+1;_e<En.length;_e++)zl+=((Hn=X.get(En[fe].id))==null?void 0:Hn.get(En[_e].id))??0;for(let fe=0;fe<tn.length;fe++)for(let _e=fe+1;_e<tn.length;_e++)zl+=((dn=X.get(tn[fe].id))==null?void 0:dn.get(tn[_e].id))??0;let Io=0;for(let fe=0;fe<En.length;fe++)for(let _e=fe+1;_e<En.length;_e++){const $e=(Nr=re.get(En[fe].id))==null?void 0:Nr.get(En[_e].id);$e==null?Io+=$:Io+=Math.floor((Ie.getTime()-$e.getTime())/(1e3*60*60*24))}for(let fe=0;fe<tn.length;fe++)for(let _e=fe+1;_e<tn.length;_e++){const $e=(pa=re.get(tn[fe].id))==null?void 0:pa.get(tn[_e].id);$e==null?Io+=$:Io+=Math.floor((Ie.getTime()-$e.getTime())/(1e3*60*60*24))}const Kr=En.reduce((fe,_e)=>fe+(_e.totalGames>0?_e.wins/_e.totalGames:.5),0)/En.length,sy=tn.reduce((fe,_e)=>fe+(_e.totalGames>0?_e.wins/_e.totalGames:.5),0)/tn.length,be=Math.abs(Kr-sy);ae.push({team1Indices:Ze,team2Indices:Fo,rawScores:{ranking:ty,experience:Rh,novel:zl,reunion:Io,winRate:be},normalizedScores:{ranking:0,experience:0,novel:0,reunion:0,winRate:0,random:Math.random()}})}const Se=Math.min(...ae.map(Ze=>Ze.rawScores.ranking)),we=Math.max(...ae.map(Ze=>Ze.rawScores.ranking)),ke=Math.min(...ae.map(Ze=>Ze.rawScores.experience)),Qe=Math.max(...ae.map(Ze=>Ze.rawScores.experience)),Te=Math.min(...ae.map(Ze=>Ze.rawScores.novel)),at=Math.max(...ae.map(Ze=>Ze.rawScores.novel)),mt=Math.min(...ae.map(Ze=>Ze.rawScores.reunion)),bt=Math.max(...ae.map(Ze=>Ze.rawScores.reunion)),ht=Math.min(...ae.map(Ze=>Ze.rawScores.winRate)),vt=Math.max(...ae.map(Ze=>Ze.rawScores.winRate));for(const Ze of ae)Ze.normalizedScores.ranking=we===Se?1:(we-Ze.rawScores.ranking)/(we-Se),Ze.normalizedScores.experience=Qe===ke?1:(Qe-Ze.rawScores.experience)/(Qe-ke),Ze.normalizedScores.novel=at===Te?1:(at-Ze.rawScores.novel)/(at-Te),Ze.normalizedScores.winRate=vt===ht?1:(vt-Ze.rawScores.winRate)/(vt-ht),Ze.normalizedScores.reunion=bt===mt?1:(Ze.rawScores.reunion-mt)/(bt-mt);const Kt=Math.min(...ae.map(Ze=>Ze.normalizedScores.random)),Ln=Math.max(...ae.map(Ze=>Ze.normalizedScores.random));for(const Ze of ae)Ze.normalizedScores.random=Ln===Kt?1:(Ze.normalizedScores.random-Kt)/(Ln-Kt);return ae},Re=async D=>{if(!(h.length<4)){b(!0),r("phaseChange");try{const X=h.map(Se=>Se.id),re=await de(X),xe=await ne(X),me=await he(h,re,xe);if(me.length===0){console.error("No configurations generated");return}const Pe=D.ranking+D.experience+D.novel+D.reunion+D.winRate+D.random,Ie=Pe>0?{ranking:D.ranking/Pe,experience:D.experience/Pe,novel:D.novel/Pe,reunion:D.reunion/Pe,winRate:D.winRate/Pe,random:D.random/Pe}:{ranking:1/6,experience:1/6,novel:1/6,reunion:1/6,winRate:1/6,random:1/6};let Y=me[0],ee=-1/0;for(const Se of me){const we=Ie.ranking*Se.normalizedScores.ranking+Ie.experience*Se.normalizedScores.experience+Ie.novel*Se.normalizedScores.novel+Ie.reunion*Se.normalizedScores.reunion+Ie.winRate*Se.normalizedScores.winRate+Ie.random*Se.normalizedScores.random;we>ee&&(ee=we,Y=Se)}const ae=[...h].sort((Se,we)=>Se.id.localeCompare(we.id));g(Y.team1Indices.map(Se=>ae[Se])),y(Y.team2Indices.map(Se=>ae[Se])),E(null),I(null),L(null),G(null),R({weights:D,score:ee}),O(!1),C(!1)}catch(X){console.error("Error balancing teams by custom:",X)}finally{b(!1)}}},Le=()=>{r("buttonClick"),g([]),y([]),C(!1),E(null),I(null),L(null),R(null),G(null)},ze=()=>{r("buttonClick"),d([]),g([]),y([]),C(!1),E(null),I(null),L(null),R(null),G(null)},Ae=()=>{r("toggleSwitch"),w&&(g([]),y([]),C(!1),E(null),I(null),L(null),R(null),G(null)),_(!w)},Me=()=>{r("buttonClick"),C(!N)},le=(D,X)=>{w&&(r("buttonClick"),X===1?(y(m.filter(re=>re.id!==D.id)),f.some(re=>re.id===D.id)||g([...f,D])):(g(f.filter(re=>re.id!==D.id)),m.some(re=>re.id===D.id)||y([...m,D])),(f.length>0||X===1)&&(m.length>0||X===2)&&C(!1))},te=()=>{if(n&&f.length>0&&m.length>0){r("phaseChange");const D=f.map(re=>re.id),X=m.map(re=>re.id);n(D,X)}},ge=({title:D,description:X,icon:re,colorClass:xe,onClick:me,disabled:Pe,isActive:Ie})=>l.jsx("button",{onClick:()=>{Pe||(r("buttonClick"),me())},disabled:Pe,className:`p-4 rounded-lg border-2 text-left transition-all w-full ${Pe?"opacity-50 cursor-not-allowed border-gray-600 bg-gray-700/30":Ie?`border-${xe}-500 bg-${xe}-900/40 ring-2 ring-${xe}-500`:`border-gray-600 hover:border-${xe}-500 hover:bg-${xe}-900/20 bg-gray-700/50`}`,children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:`text-${xe}-400 flex-shrink-0 mt-0.5`,children:re}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h4",{className:"font-semibold text-white",children:D}),l.jsx("p",{className:"text-sm text-gray-300 mt-1",children:X})]})]})}),Ge=[{id:"ranking",title:"Ranking",description:"Minimize skill difference between teams",icon:l.jsx(SA,{size:22}),colorClass:"blue",onClick:Ne,disabledInManual:!0},{id:"experience",title:"Experience",description:"Balance by total games played",icon:l.jsx(Lr,{size:22}),colorClass:"green",onClick:Be,disabledInManual:!0},{id:"novel",title:"Novel",description:"Pair players who rarely team up together",icon:l.jsx(tg,{size:22}),colorClass:"amber",onClick:U,disabledInManual:!0},{id:"reunion",title:"Reunion",description:"Pair players who haven't teamed recently",icon:l.jsx(Hx,{size:22}),colorClass:"indigo",onClick:oe,disabledInManual:!0},{id:"winRate",title:"Win Rate",description:"Balance teams by average player win rates",icon:l.jsx(Hr,{size:22}),colorClass:"rose",onClick:Ce,disabledInManual:!0},{id:"random",title:"Random",description:"Completely random team assignment",icon:l.jsx(Vb,{size:22}),colorClass:"purple",onClick:pe,disabledInManual:!0},{id:"custom",title:"Custom",description:"Blend multiple factors with your own weights",icon:l.jsx(Kx,{size:22}),colorClass:"cyan",onClick:()=>O(!0),disabledInManual:!0},{id:"manual",title:"Manual",description:"Assign players to teams yourself",icon:l.jsx(St,{size:22}),colorClass:"gray",onClick:Ae,disabledInManual:!1}];return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("button",{onClick:V,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Match Maker"})]}),v?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsxs("div",{children:[l.jsx("div",{className:"bg-gray-700/50 p-4 rounded-lg mb-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(qt,{size:20,className:"mr-3 text-blue-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-1",children:"How Match Maker Works"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Select players to include, then balance teams based on player skill or experience (games played)."})]})]})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-xl font-semibold",children:["Select Players (",h.length," selected)"]}),h.length>0&&l.jsx("button",{onClick:ze,className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm",children:"Reset Selection"})]}),A.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:A.map(D=>{const X=h.some(re=>re.id===D.id);return l.jsxs("div",{className:`relative p-3 rounded-lg cursor-pointer transition-all ${X?"bg-blue-900/50 ring-2 ring-blue-500":"bg-gray-700 hover:bg-gray-600"}`,onClick:()=>K(D),children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"font-medium mb-1 truncate w-full text-center",children:D.name}),l.jsxs("div",{className:"text-sm mb-1",children:["(",c(D),")"]}),l.jsxs("div",{className:"text-xs text-gray-400",children:["W: ",D.wins," L: ",D.losses]})]}),X&&l.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 rounded-full p-1",children:l.jsx(ns,{size:14,className:"transform rotate-45"})})]},D.id)})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-center",children:[l.jsx(St,{size:32,className:"text-gray-500 mb-2"}),l.jsx("p",{className:"text-gray-400",children:"No players available"})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center justify-center mb-4",children:[l.jsx(kd,{size:20,className:"mr-2 text-blue-400"}),l.jsx("h3",{className:"text-lg font-semibold",children:"Balance Teams"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-w-4xl mx-auto",children:Ge.map(D=>l.jsx(ge,{title:D.title,description:D.description,icon:D.icon,colorClass:D.colorClass,onClick:D.onClick,disabled:h.length<4||x||D.disabledInManual&&w,isActive:D.id==="manual"&&w},D.id))}),(f.length>0||m.length>0)&&l.jsx("div",{className:"flex justify-center mt-4",children:l.jsxs("button",{onClick:Le,className:"px-4 py-3 bg-red-700 hover:bg-red-600 rounded-lg flex items-center justify-center",children:[l.jsx(xo,{size:18,className:"mr-2"}),l.jsx("span",{children:"Reset Teams"})]})})]}),(f.length>0||m.length>0)&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 rounded-lg p-4",children:[l.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans Team",f.length>0&&l.jsx("span",{className:"ml-3 text-sm font-normal",children:j==="novel"&&F?l.jsxs(l.Fragment,{children:["Avg Familiarity: ",F.avgFamiliarity.toFixed(1)]}):j==="reunion"&&T?l.jsxs(l.Fragment,{children:["Avg Days Apart: ",Fe(T.avgDaysSinceTeamed)]}):j==="winRate"&&M?l.jsxs(l.Fragment,{children:["Avg Win Rate: ",(M.team1AvgWinRate*100).toFixed(1),"%"]}):l.jsxs(l.Fragment,{children:["Avg Skill: ",Math.round(f.reduce((D,X)=>D+c(X),0)/f.length)]})})]}),l.jsx("div",{className:"space-y-2",children:f.map(D=>l.jsxs("div",{className:"bg-blue-900/50 rounded-lg p-3 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:D.name}),l.jsxs("div",{className:"text-sm text-gray-300",children:["(",c(D),")"]})]}),w&&l.jsx("button",{onClick:()=>le(D,2),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-red-400 hover:text-red-300","aria-label":"Move to Atlanteans",title:"Move to Atlanteans",children:l.jsx(A$,{size:16})})]},D.id))})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 rounded-lg p-4",children:[l.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans Team",m.length>0&&l.jsx("span",{className:"ml-3 text-sm font-normal",children:j==="novel"&&F?l.jsxs(l.Fragment,{children:["Avg Familiarity: ",F.avgFamiliarity.toFixed(1)]}):j==="reunion"&&T?l.jsxs(l.Fragment,{children:["Avg Days Apart: ",Fe(T.avgDaysSinceTeamed)]}):j==="winRate"&&M?l.jsxs(l.Fragment,{children:["Avg Win Rate: ",(M.team2AvgWinRate*100).toFixed(1),"%"]}):l.jsxs(l.Fragment,{children:["Avg Skill: ",Math.round(m.reduce((D,X)=>D+c(X),0)/m.length)]})})]}),l.jsx("div",{className:"space-y-2",children:m.map(D=>l.jsxs("div",{className:"bg-red-900/50 rounded-lg p-3 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:D.name}),l.jsxs("div",{className:"text-sm text-gray-300",children:["(",c(D),")"]})]}),w&&l.jsx("button",{onClick:()=>le(D,1),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-blue-400 hover:text-blue-300","aria-label":"Move to Titans",title:"Move to Titans",children:l.jsx(q3,{size:16})})]},D.id))})]})]}),j==="novel"&&F&&f.length>0&&m.length>0&&l.jsx("div",{className:"mt-4 p-4 bg-amber-900/30 border border-amber-700 rounded-lg",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(tg,{size:18,className:"mr-2 text-amber-400"}),l.jsxs("span",{className:"text-amber-200",children:["Novel Match: Avg ",F.avgFamiliarity.toFixed(1)," games together per pair",F.avgFamiliarity===0&&" (Perfect novelty - no repeat teammates!)"]})]})}),j==="reunion"&&T&&f.length>0&&m.length>0&&l.jsx("div",{className:"mt-4 p-4 bg-indigo-900/30 border border-indigo-700 rounded-lg",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Hx,{size:18,className:"mr-2 text-indigo-400"}),l.jsxs("span",{className:"text-indigo-200",children:["Reunion Match: Avg ",Fe(T.avgDaysSinceTeamed)," since teammates last played together",T.avgDaysSinceTeamed>=$&&" (All new teammate pairings!)"]})]})}),j==="winRate"&&M&&f.length>0&&m.length>0&&l.jsx("div",{className:"mt-4 p-4 bg-rose-900/30 border border-rose-700 rounded-lg",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Hr,{size:18,className:"mr-2 text-rose-400"}),l.jsxs("span",{className:"text-rose-200",children:["Win Rate Match: Titans ",(M.team1AvgWinRate*100).toFixed(1),"% vs Atlanteans ",(M.team2AvgWinRate*100).toFixed(1),"%",M.difference<.01&&" (Perfect balance!)"]})]})}),Q&&f.length>0&&m.length>0&&l.jsx("div",{className:"mt-4 p-4 bg-cyan-900/30 border border-cyan-700 rounded-lg",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Kx,{size:18,className:"mr-2 text-cyan-400"}),l.jsxs("span",{className:"text-cyan-200",children:["Custom Match: Weighted score ",(Q.score*100).toFixed(1),"%"," ","(",Q.weights.ranking>0&&`Skill ${Q.weights.ranking}%`,Q.weights.experience>0&&`${Q.weights.ranking>0?", ":""}Exp ${Q.weights.experience}%`,Q.weights.novel>0&&`${Q.weights.ranking>0||Q.weights.experience>0?", ":""}Novel ${Q.weights.novel}%`,Q.weights.reunion>0&&`${Q.weights.ranking>0||Q.weights.experience>0||Q.weights.novel>0?", ":""}Reunion ${Q.weights.reunion}%`,Q.weights.winRate>0&&`${Q.weights.ranking>0||Q.weights.experience>0||Q.weights.novel>0||Q.weights.reunion>0?", ":""}WinRate ${Q.weights.winRate}%`,Q.weights.random>0&&`${Q.weights.ranking>0||Q.weights.experience>0||Q.weights.novel>0||Q.weights.reunion>0||Q.weights.winRate>0?", ":""}Random ${Q.weights.random}%`,")"]})]})}),f.length>0&&m.length>0&&n&&l.jsx("div",{className:"mt-6 flex justify-center",children:l.jsxs("button",{onClick:te,className:"px-8 py-4 bg-green-600 hover:bg-green-500 rounded-lg flex items-center text-xl",children:[l.jsx(jm,{size:24,className:"mr-3"}),"Use These Teams in Game Setup"]})})]}),w&&h.length>0&&l.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg p-4",children:[l.jsx("h3",{className:"font-bold text-lg mb-3",children:"Unassigned Players"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:h.filter(D=>!f.some(X=>X.id===D.id)&&!m.some(X=>X.id===D.id)).map(D=>l.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:D.name}),l.jsxs("div",{className:"text-sm text-gray-300",children:["(",c(D),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>le(D,1),className:"px-2 py-1 bg-blue-700 hover:bg-blue-600 rounded-md text-xs",children:"Titans"}),l.jsx("button",{onClick:()=>le(D,2),className:"px-2 py-1 bg-red-700 hover:bg-red-600 rounded-md text-xs",children:"Atlanteans"})]})]},D.id))})]}),B!==null&&f.length>0&&m.length>0&&l.jsxs("div",{className:"mt-8 bg-gray-700 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"p-4 bg-gray-700 cursor-pointer flex justify-between items-center",onClick:Me,children:[l.jsxs("h3",{className:"font-semibold flex items-center",children:[l.jsx(kd,{size:16,className:"mr-2 text-yellow-400"}),"Predicted Win Probability"]}),N?l.jsx(_r,{size:18}):l.jsx(Dn,{size:18})]}),N&&l.jsxs("div",{className:"p-6 pb-4 border-t border-gray-600",children:[l.jsx(TQe,{probability:B,team1Name:"Titans",team2Name:"Atlanteans"}),l.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[l.jsx("p",{className:"mb-2",children:"Prediction based on TrueSkill ratings. The diamond shows the point estimate, and the shaded region shows the 95% confidence interval."}),l.jsxs("p",{children:[l.jsx("strong",{children:"Wider bands"})," indicate less certainty (teams with newer players). ",l.jsx("strong",{children:"Narrow bands"})," indicate high confidence in the prediction."]})]})]})]}),w&&l.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:l.jsxs("p",{className:"flex items-start",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"Manual Mode allows you to assign players to teams directly. Use the arrow buttons to move players between teams or the team buttons for unassigned players."})]})})]}),l.jsx(EQe,{isOpen:P,onClose:()=>O(!1),onGenerate:Re,disabled:h.length<4,isGenerating:x})]})},IN=5*60*1e3;class IQe{constructor(){ve(this,"cache",null)}isCacheValid(n,r){if(!this.cache)return!1;const a=Date.now()-this.cache.timestamp>IN,i=this.cache.minGamesHero===n&&this.cache.minGamesRelationship===r;return!a&&i}getCacheAge(){return this.cache?Math.floor((Date.now()-this.cache.timestamp)/1e3):null}isCached(){return this.cache!==null&&Date.now()-this.cache.timestamp<=IN}clearCache(){this.cache=null,console.log("[GlobalStatsService] Cache cleared")}transformRelationship(n){const r=Pn.find(s=>s.id===n.related_hero_id);return{heroId:n.related_hero_id,heroName:n.related_hero_name,icon:(r==null?void 0:r.icon)||`heroes/${n.related_hero_name.toLowerCase().replace(/\s+/g,"")}.png`,winRate:n.win_rate,gamesPlayed:n.games_played}}transformHeroStats(n){var s,a,i,o,c,A;const r=Pn.find(u=>u.id===n.hero_id);return{heroId:n.hero_id,heroName:n.hero_name,icon:(r==null?void 0:r.icon)||`heroes/${n.hero_name.toLowerCase().replace(/\s+/g,"")}.png`,totalGames:n.total_games,wins:n.wins,losses:n.losses,winRate:n.win_rate,complexity:(r==null?void 0:r.complexity)||1,roles:(r==null?void 0:r.roles)||[],expansion:(r==null?void 0:r.expansion)||"Unknown",bestTeammates:(n.best_teammates||[]).map(u=>this.transformRelationship(u)),bestAgainst:(n.best_against||[]).map(u=>this.transformRelationship(u)),worstAgainst:(n.worst_against||[]).map(u=>this.transformRelationship(u)),victoryTypeStats:n.victory_type_stats?{throne:{wins:((s=n.victory_type_stats.throne)==null?void 0:s.wins)||0,total:((a=n.victory_type_stats.throne)==null?void 0:a.total)||0},wave:{wins:((i=n.victory_type_stats.wave)==null?void 0:i.wins)||0,total:((o=n.victory_type_stats.wave)==null?void 0:o.total)||0},kills:{wins:((c=n.victory_type_stats.kills)==null?void 0:c.wins)||0,total:((A=n.victory_type_stats.kills)==null?void 0:A.total)||0}}:void 0}}async getGlobalHeroStats(n=1,r=3,s=!1){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured. Please set up Supabase environment variables."};if(!s&&this.isCacheValid(n,r))return console.log("[GlobalStatsService] Returning cached data"),{success:!0,data:this.cache.data};try{console.log("[GlobalStatsService] Fetching global stats from Supabase...");const{data:a,error:i}=await ce.rpc("get_global_hero_stats_full",{min_games_hero:n,min_games_relationship:r});if(i)return console.error("[GlobalStatsService] RPC error:",i),{success:!1,error:`Failed to fetch global stats: ${i.message}`};if(!a||!Array.isArray(a))return console.log("[GlobalStatsService] No data returned or empty array"),{success:!0,data:[]};const o=a.map(c=>this.transformHeroStats(c));return this.cache={data:o,timestamp:Date.now(),minGamesHero:n,minGamesRelationship:r},console.log(`[GlobalStatsService] Fetched ${o.length} hero stats`),{success:!0,data:o}}catch(a){return console.error("[GlobalStatsService] Unexpected error:",a),{success:!1,error:a instanceof Error?a.message:"An unexpected error occurred"}}}async getGlobalMatchCount(){if(!st()||!ce)return{success:!1,error:"Cloud features not configured"};try{const{data:n,error:r}=await ce.from("global_hero_stats").select("total_games");if(r||!n)return{success:!0,count:0};const s=n.reduce((i,o)=>i+(o.total_games||0),0);return{success:!0,count:Math.round(s/10)}}catch{return{success:!0,count:0}}}async getGlobalHeroStatsOverTime(n,r=3,s,a){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured. Please set up Supabase environment variables."};try{console.log("[GlobalStatsService] Fetching global hero stats over time...");const i=s?s.toISOString().split("T")[0]:null,o=a?a.toISOString().split("T")[0]:null,{data:c,error:A}=await ce.rpc("get_global_hero_stats_over_time",{p_hero_ids:n&&n.length>0?n:null,p_min_games:r,p_start_date:i,p_end_date:o});if(A)return console.error("[GlobalStatsService] RPC error:",A),{success:!1,error:`Failed to fetch global hero stats over time: ${A.message}`};if(!c)return{success:!0,data:{heroes:[],dateRange:null}};const u=c,h=u.heroes.map(d=>{const f=Pn.find(m=>m.id===d.heroId),g=d.dataPoints.filter(m=>m.gamesPlayedTotal>=r);return{...d,icon:(f==null?void 0:f.icon)||`heroes/${d.heroName.toLowerCase().replace(/\s+/g,"")}.png`,dataPoints:g}}).filter(d=>d.dataPoints.length>0);return console.log(`[GlobalStatsService] Fetched ${h.length} heroes over time`),{success:!0,data:{heroes:h,dateRange:u.dateRange}}}catch(i){return console.error("[GlobalStatsService] Unexpected error:",i),{success:!1,error:i instanceof Error?i.message:"An unexpected error occurred"}}}async getHeroRelationshipNetwork(n,r=1){if(!st()||!ce)return{success:!1,error:"Cloud features are not configured. Please set up Supabase environment variables."};try{console.log("[GlobalStatsService] Fetching hero relationship network...");const{data:s,error:a}=await ce.from("global_hero_relationships").select("hero_id, related_hero_id, relationship_type, games_played, wins").in("hero_id",n).in("related_hero_id",n).gte("games_played",r);if(a)return console.error("[GlobalStatsService] Query error:",a),{success:!1,error:`Failed to fetch relationship data: ${a.message}`};if(!s||s.length===0)return{success:!0,data:[]};const i=new Map;for(const c of s){const A=`${c.hero_id}-${c.related_hero_id}`;i.has(A)||i.set(A,{heroId:c.hero_id,relatedHeroId:c.related_hero_id,teammateWins:0,teammateLosses:0,opponentWins:0,opponentLosses:0});const u=i.get(A);c.relationship_type==="teammate"?(u.teammateWins=c.wins,u.teammateLosses=c.games_played-c.wins):c.relationship_type==="opponent"&&(u.opponentWins=c.wins,u.opponentLosses=c.games_played-c.wins)}const o=Array.from(i.values());return console.log(`[GlobalStatsService] Fetched ${o.length} hero relationships`),{success:!0,data:o}}catch(s){return console.error("[GlobalStatsService] Unexpected error:",s),{success:!1,error:s instanceof Error?s.message:"An unexpected error occurred"}}}}const Yi=new IQe,UQe=({onBack:e,initialStatsMode:n="local",inheritedMinGames:r,inheritedDateRange:s})=>{var ye,W;const{playSound:a}=gt(),{isViewModeLoading:i,getHeroWinRateOverTime:o}=Ls(),[c,A]=S.useState(!0),[u,h]=S.useState(null),[d,f]=S.useState(new Set),[g,m]=S.useState({}),[y,v]=S.useState(!1),[p,x]=S.useState(!1),[b,w]=S.useState(null),[_,B]=S.useState(n),[k,N]=S.useState(!1),[C,j]=S.useState(null),E=st(),[F,I]=S.useState(()=>{if(r!==void 0)return r;const U=localStorage.getItem("heroWinRateOverTime_minGames");return U?parseInt(U,10):3}),T=S.useMemo(()=>s!=null&&s.startDate&&(s!=null&&s.endDate)?{start:s.startDate.toISOString().split("T")[0],end:s.endDate.toISOString().split("T")[0]}:{start:null,end:null},[s]),L=!!(s!=null&&s.startDate&&(s!=null&&s.endDate));S.useEffect(()=>{const U=()=>x(window.innerWidth<768);return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),S.useEffect(()=>{localStorage.setItem("heroWinRateOverTime_minGames",F.toString())},[F]),S.useEffect(()=>{if(i)return;(async()=>{if(_==="local"){A(!0);try{const $=T.start?new Date(T.start):void 0,ne=T.end?new Date(T.end+"T23:59:59"):void 0,J=await o(void 0,F,$,ne);if(h(J),d.size===0&&J.heroes.length>0){const Ce=J.heroes.slice(0,5).map(Fe=>Fe.heroId);f(new Set(Ce))}const z=O(J.heroes.length),oe={};J.heroes.forEach((Ce,Fe)=>{oe[Ce.heroId]=z[Fe]}),m(oe)}catch($){console.error("Error loading hero win rate data:",$)}finally{A(!1)}}else{N(!0),j(null);try{const $=T.start?new Date(T.start):null,ne=T.end?new Date(T.end+"T23:59:59"):null,J=await Yi.getGlobalHeroStatsOverTime(void 0,F,$,ne);if(J.success&&J.data){if(h(J.data),d.size===0&&J.data.heroes.length>0){const Ce=J.data.heroes.slice(0,5).map(Fe=>Fe.heroId);f(new Set(Ce))}const z=O(J.data.heroes.length),oe={};J.data.heroes.forEach((Ce,Fe)=>{oe[Ce.heroId]=z[Fe]}),m(oe)}else j(J.error||"Failed to load global data")}catch($){console.error("Error loading global hero win rate data:",$),j($ instanceof Error?$.message:"An unexpected error occurred")}finally{N(!1),A(!1)}}})()},[_,F,T.start,T.end,i,o]);const P=S.useCallback(()=>{a("buttonClick"),e()},[a,e]),O=U=>{const $=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16","#06B6D4","#A855F7","#F43F5E","#0EA5E9","#22C55E"],ne=[];for(let J=0;J<U;J++)ne.push($[J%$.length]);return ne},Q=S.useCallback(U=>{a("buttonClick"),f($=>{const ne=new Set($);return ne.has(U)?ne.delete(U):ne.add(U),ne})},[a]),R=S.useCallback(()=>{a("buttonClick"),u&&f(new Set(u.heroes.map(U=>U.heroId)))},[a,u]),M=S.useCallback(()=>{a("buttonClick"),f(new Set)},[a]),G=()=>{a("buttonClick"),v(!y)},V=S.useCallback(U=>{const $=u==null?void 0:u.heroes.find(z=>z.heroId===U);if(!$||$.dataPoints.length===0)return{lineData:[],scatterData:[]};const ne=$.dataPoints.map(z=>({x:new Date(z.date).getTime(),y:z.winRate})),J=$.dataPoints.map(z=>({x:new Date(z.date).getTime(),y:z.winRate,gamesOnDate:z.gamesPlayedOnDate}));return{lineData:ne,scatterData:J}},[u]),K=S.useMemo(()=>{if(!u)return[0,100];let U=100,$=0;if(u.heroes.filter(J=>d.has(J.heroId)).forEach(J=>{J.dataPoints.forEach(z=>{U=Math.min(U,z.winRate),$=Math.max($,z.winRate)})}),U===100&&$===0)return[0,100];const ne=10;return[Math.max(0,Math.floor(U/10)*10-ne),Math.min(100,Math.ceil($/10)*10+ne)]},[u,d]),se=S.useMemo(()=>{if(!u)return[Date.now()-864e5*30,Date.now()];const U=[];if(u.heroes.filter(z=>d.has(z.heroId)).forEach(z=>{z.dataPoints.forEach(oe=>{U.push(new Date(oe.date).getTime())})}),U.length===0)return[Date.now()-864e5*30,Date.now()];const $=Math.min(...U),ne=Math.max(...U),J=864e5;return[$-J,ne+J]},[u,d]),de=c||k||i;return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:P,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back"})]}),l.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Hero Win Rate Over Time"})]}),E&&l.jsx("div",{className:"mb-4 no-screenshot",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsxs("button",{onClick:()=>{a("buttonClick"),B("local")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${_==="local"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(St,{size:18,className:"mr-2"}),"Play Group"]}),l.jsxs("button",{onClick:()=>{a("buttonClick"),B("global")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${_==="global"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(oA,{size:18,className:"mr-2"}),"Global"]})]})}),_==="global"&&l.jsx("div",{className:"mb-4 p-3 bg-green-900/30 border border-green-700/50 rounded-lg no-screenshot",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(oA,{size:18,className:"mr-2 text-green-400 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-green-200",children:"Viewing global statistics from all players"})]})}),_==="global"&&C&&l.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-700/50 rounded-lg no-screenshot",children:l.jsx("p",{className:"text-sm text-red-200",children:C})}),L&&l.jsxs("div",{className:"mb-4 p-3 bg-purple-900/30 border border-purple-700/50 rounded-lg flex items-center flex-wrap gap-2 no-screenshot",children:[l.jsx(os,{size:18,className:"mr-2 text-purple-400"}),l.jsxs("span",{className:"text-sm text-purple-200",children:["Using date filter from Hero Stats: ",(ye=s==null?void 0:s.startDate)==null?void 0:ye.toLocaleDateString()," - ",(W=s==null?void 0:s.endDate)==null?void 0:W.toLocaleDateString()]})]}),de?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Bt,{size:32,className:"animate-spin text-blue-400 mb-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading hero data..."})]})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 sm:hidden no-screenshot",children:l.jsxs("button",{onClick:G,className:"w-full px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(os,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Hero Selection (",d.size," selected)"]})]}),y?l.jsx(_r,{size:18}):l.jsx(Dn,{size:18})]})}),l.jsxs("div",{className:`${p&&!y?"hidden":""} mb-6 space-y-4 no-screenshot`,children:[l.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Minimum Games"}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Heroes must have at least this many games to appear"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{a("buttonClick"),I(U=>Math.max(1,U-1))},disabled:F<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:""}),l.jsx("div",{className:"w-12 h-10 flex items-center justify-center bg-gray-800 border border-gray-600 rounded-lg font-medium",children:F}),l.jsx("button",{onClick:()=>{a("buttonClick"),I(U=>Math.min(50,U+1))},disabled:F>=50,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:"+"})]})]})}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"font-medium",children:"Hero Selection"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:R,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Select All"}),l.jsx("button",{onClick:M,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Clear"})]})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 max-h-64 overflow-y-auto",children:u==null?void 0:u.heroes.map(U=>l.jsx("button",{onClick:()=>Q(U.heroId),className:`p-2 rounded-lg text-left transition-all ${d.has(U.heroId)?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("img",{src:U.icon,alt:U.heroName,className:"w-8 h-8 rounded-full object-cover",onError:$=>{$.target.src="https://via.placeholder.com/32?text=H"}}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium text-sm truncate",children:U.heroName}),l.jsxs("div",{className:"text-xs opacity-70",children:[U.totalGames,"g  ",U.currentWinRate.toFixed(0),"%"]})]})]})},U.heroId))})]})]}),d.size>0&&u&&u.heroes.some(U=>d.has(U.heroId))?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-2 sm:p-4",children:[l.jsx("div",{style:{width:"100%",height:p?400:500},children:l.jsxs(Ih,{width:p?380:1e3,height:p?380:480,domain:{x:se,y:K},padding:{top:40,bottom:60,left:60,right:30},scale:{x:"time"},children:[l.jsx(Pa,{label:"Date",tickFormat:U=>new Date(U).toLocaleDateString("en-US",{month:"short",day:"numeric"}),style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:p?12:14,padding:40},tickLabels:{fill:"#9CA3AF",fontSize:p?9:11,angle:-45,textAnchor:"end"},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(Pa,{dependentAxis:!0,label:"Win Rate %",tickFormat:U=>`${U}%`,style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:p?12:14,padding:45},tickLabels:{fill:"#9CA3AF",fontSize:p?10:12},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(rl,{data:[{x:se[0],y:50},{x:se[1],y:50}],style:{data:{stroke:"#6B7280",strokeWidth:1,strokeDasharray:"5,5"}}}),u.heroes.filter(U=>d.has(U.heroId)).map(U=>{const{lineData:$}=V(U.heroId),ne=g[U.heroId],J=b===U.heroId,z=b!==null&&!J;return l.jsx(rl,{data:$,style:{data:{stroke:ne,strokeWidth:J?4:2,strokeOpacity:z?.2:1,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(w(U.heroId),[]),onMouseLeave:()=>(w(null),[])}}]},`line-${U.heroId}`)}),u.heroes.filter(U=>d.has(U.heroId)).map(U=>{const{scatterData:$}=V(U.heroId),ne=g[U.heroId],J=b===U.heroId,z=b!==null&&!J;return l.jsx(Pp,{data:$,size:J?6:4,symbol:"circle",style:{data:{fill:ne,fillOpacity:z?.2:1,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(w(U.heroId),[]),onMouseLeave:()=>(w(null),[])}}]},`scatter-${U.heroId}`)})]})}),l.jsx("div",{className:"flex flex-wrap gap-3 mt-4 justify-center p-3 bg-gray-800 rounded-lg",children:u.heroes.filter(U=>d.has(U.heroId)).map(U=>l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer px-2 py-1 rounded hover:bg-gray-700",onMouseEnter:()=>w(U.heroId),onMouseLeave:()=>w(null),children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:g[U.heroId]}}),l.jsx("img",{src:U.icon,alt:U.heroName,className:"w-5 h-5 rounded-full object-cover",onError:$=>{$.target.style.display="none"}}),l.jsx("span",{className:`text-sm ${b===U.heroId?"text-white font-bold":"text-gray-300"}`,children:U.heroName})]},U.heroId))})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-8 text-center",children:[l.jsx(Hr,{size:48,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400",children:(u==null?void 0:u.heroes.length)===0?`No heroes found with at least ${F} games`:"Select heroes to view their win rate progression"})]}),l.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Lines:"})," Show cumulative win rate from first match to last match for each hero. The line connects data points at each date where matches occurred."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Dots:"})," Mark dates where the hero was played. Multiple games on the same day are combined."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Legend:"})," Hover over a hero name to highlight their line."]}),l.jsxs("p",{children:[l.jsx("strong",{children:"50% Line:"})," Dashed line shows the 50% win rate baseline."]})]})]})})]})]})},jv={teammate_won:"#3B82F6",teammate_lost:"#A855F7",opponent_won:"#22C55E",opponent_lost:"#EF4444"},UN={teammate_won:"Won together",teammate_lost:"Lost together",opponent_won:"Beat",opponent_lost:"Lost to"},PQe=({onBack:e,initialStatsMode:n="local",inheritedMinGames:r=1,inheritedDateRange:s})=>{const{playSound:a}=gt(),{isViewModeLoading:i,getHeroRelationshipNetwork:o}=Ls(),[c,A]=S.useState(!1),[u,h]=S.useState(new Set),[d,f]=S.useState({nodes:[],links:[]}),[g,m]=S.useState(!1),[y,v]=S.useState(!1),[p,x]=S.useState(null),[b,w]=S.useState(n),[_,B]=S.useState(!1),[k,N]=S.useState(null),C=st(),j=r,E=S.useMemo(()=>s!=null&&s.startDate&&(s!=null&&s.endDate)?{startDate:s.startDate,endDate:s.endDate}:{startDate:void 0,endDate:void 0},[s]),F=!!(r>1||s!=null&&s.startDate&&(s!=null&&s.endDate)),[I,T]=S.useState([]),[L,P]=S.useState(!0),[O,Q]=S.useState({teammate_won:!0,teammate_lost:!0,opponent_won:!0,opponent_lost:!0}),[R,M]=S.useState({}),G=S.useRef(),V=S.useRef(null),[K,se]=S.useState({width:800,height:600}),de=S.useRef(!1),ye=S.useRef(new Map),W=S.useRef(null),U=S.useRef(!1),$=S.useCallback(D=>{if(V.current=D,D){const X=D.clientWidth||800;se({width:X,height:y?450:600})}},[y]);S.useEffect(()=>{const D=()=>v(window.innerWidth<768);return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),S.useEffect(()=>{const D=()=>{if(V.current){const xe=V.current.getBoundingClientRect(),me=V.current.clientWidth||Math.floor(xe.width)||800,Pe=y?450:600;se(Ie=>Ie.width!==me||Ie.height!==Pe?{width:me,height:Pe}:Ie)}},X=[setTimeout(D,0),setTimeout(D,100),setTimeout(D,300)],re=new ResizeObserver(D);return V.current&&re.observe(V.current),window.addEventListener("resize",D),()=>{X.forEach(xe=>clearTimeout(xe)),re.disconnect(),window.removeEventListener("resize",D)}},[y,u.size]),S.useEffect(()=>{if(i)return;(async()=>{P(!0);try{const X=Pn.map(me=>me.id);let re=new Set;if(b==="local")(await o(X,j,E.startDate,E.endDate)).forEach(Pe=>{re.add(Pe.heroId),re.add(Pe.relatedHeroId)});else{const me=await Yi.getHeroRelationshipNetwork(X,j);me.success&&me.data&&me.data.forEach(Pe=>{re.add(Pe.heroId),re.add(Pe.relatedHeroId)})}const xe=Pn.filter(me=>re.has(me.id));T(xe)}catch(X){console.error("Error loading available heroes:",X),T(Pn)}finally{P(!1)}})()},[b,j,E.startDate,E.endDate,i,o]),S.useEffect(()=>{(async()=>{const X={};for(const re of Pn){const xe=new Image;xe.crossOrigin="anonymous",xe.src=re.icon,await new Promise(me=>{xe.onload=()=>me(),xe.onerror=()=>me()}),X[String(re.id)]=xe}M(X)})()},[]),S.useEffect(()=>{if(G.current&&d.nodes.length>0){const D=G.current;D.d3Force("center",vQ(K.width/2,K.height/2));const X=wQ().strength(-300).distanceMax(300);D.d3Force("charge",X);const re=xQ().radius(50).strength(1);D.d3Force("collision",re);const xe=D.d3Force("link");xe&&xe.distance(120).strength(.3);const me=60,Pe=()=>{for(const Ie of d.nodes)if(Ie.x!==void 0&&Ie.y!==void 0){const Y=me,ee=K.width-me,ae=me,Se=K.height-me;Ie.x<Y?Ie.vx=(Ie.vx||0)+(Y-Ie.x)*.1:Ie.x>ee&&(Ie.vx=(Ie.vx||0)+(ee-Ie.x)*.1),Ie.y<ae?Ie.vy=(Ie.vy||0)+(ae-Ie.y)*.1:Ie.y>Se&&(Ie.vy=(Ie.vy||0)+(Se-Ie.y)*.1)}};if(D.d3Force("boundary",Pe),D.d3ReheatSimulation(),!de.current&&d.nodes.length>=2)de.current=!0,setTimeout(()=>{G.current&&(G.current.zoomToFit(400,80),setTimeout(()=>{if(G.current){const Ie=G.current.zoom(),Y=1.5;Ie>Y&&G.current.zoom(Y,300)}},450))},600);else if(U.current&&W.current){U.current=!1;const{x:Ie,y:Y,k:ee}=W.current;setTimeout(()=>{G.current&&(G.current.centerAt(Ie,Y,0),G.current.zoom(ee,0))},50)}}},[d.nodes.length,K.width,K.height]),S.useEffect(()=>{if(i)return;(async()=>{if(u.size<2){f({nodes:[],links:[]});return}const X=Array.from(u);if(de.current&&ye.current.size>0&&(U.current=!0),b==="local"){A(!0);try{const re=await o(X,j,E.startDate,E.endDate),xe=ne(X,re);f(xe)}catch(re){console.error("Error loading relationship data:",re)}finally{A(!1)}}else{B(!0),N(null);try{const re=await Yi.getHeroRelationshipNetwork(X,j);if(re.success&&re.data){const xe=ne(X,re.data);f(xe)}else N(re.error||"Failed to load global data")}catch(re){console.error("Error loading global relationship data:",re),N(re instanceof Error?re.message:"An unexpected error occurred")}finally{B(!1)}}})()},[u,b,j,E.startDate,E.endDate,i,o]);const ne=S.useCallback((D,X)=>{const re=ye.current;let xe=K.width/2,me=K.height/2;if(re.size>0){let we=0,ke=0;re.forEach(Qe=>{we+=Qe.x,ke+=Qe.y}),xe=we/re.size,me=ke/re.size}const Pe=D.length,Ie=Math.min(K.width,K.height)*.25,Y=re.size===0,ee=D.map((we,ke)=>{const Qe=Pn.find(ht=>ht.id===we),Te=String(we),at=re.get(Te);let mt,bt;if(at)mt=at.x,bt=at.y;else if(Y){const ht=2*Math.PI*ke/Pe-Math.PI/2;mt=K.width/2+Ie*Math.cos(ht),bt=K.height/2+Ie*Math.sin(ht)}else{const ht=Math.random()*2*Math.PI,vt=50+Math.random()*50;mt=xe+vt*Math.cos(ht),bt=me+vt*Math.sin(ht)}return{id:Te,heroId:we,heroName:(Qe==null?void 0:Qe.name)||`Hero ${we}`,icon:(Qe==null?void 0:Qe.icon)||"",totalGames:0,winRate:0,x:mt,y:bt}}),ae=[],Se=new Set;for(const we of X){const ke=String(we.heroId),Qe=String(we.relatedHeroId),Te=[we.heroId,we.relatedHeroId].sort().join("-"),at=we.teammateWins+we.teammateLosses,mt=we.opponentWins+we.opponentLosses;we.teammateWins>0&&!Se.has(`${Te}-won`)&&(Se.add(`${Te}-won`),ae.push({source:ke,target:Qe,type:"teammate_won",count:we.teammateWins,percentage:at>0?we.teammateWins/at:0,curvature:.15})),we.teammateLosses>0&&!Se.has(`${Te}-lost`)&&(Se.add(`${Te}-lost`),ae.push({source:ke,target:Qe,type:"teammate_lost",count:we.teammateLosses,percentage:at>0?we.teammateLosses/at:0,curvature:-.15})),we.opponentWins>0&&ae.push({source:ke,target:Qe,type:"opponent_won",count:we.opponentWins,percentage:mt>0?we.opponentWins/mt:0,curvature:.25}),we.opponentLosses>0&&ae.push({source:ke,target:Qe,type:"opponent_lost",count:we.opponentLosses,percentage:mt>0?we.opponentLosses/mt:0,curvature:-.25})}return{nodes:ee,links:ae}},[K.width,K.height]),J=S.useCallback(D=>{if(!p)return!1;const X=typeof D.source=="object"?D.source.id:D.source,re=typeof D.target=="object"?D.target.id:D.target;return O[D.type]?D.type.startsWith("teammate")?X===p||re===p:X===p:!1},[p,O]),z=S.useMemo(()=>{if(!p)return null;const D=Pn.find(X=>String(X.id)===p);return(D==null?void 0:D.name)||null},[p]),oe=S.useCallback(()=>{a("buttonClick"),e()},[a,e]),Ce=S.useCallback(D=>{a("buttonClick"),h(X=>{const re=new Set(X);return re.has(D)?re.delete(D):re.add(D),re})},[a]),Fe=S.useCallback(()=>{a("buttonClick"),h(new Set(I.map(D=>D.id)))},[a,I]),Ne=S.useCallback(()=>{a("buttonClick"),h(new Set),de.current=!1,ye.current.clear()},[a]),Be=S.useCallback(D=>{a("buttonClick"),Q(X=>({...X,[D]:!X[D]}))},[a]),pe=()=>{a("buttonClick"),m(!g)},he=S.useCallback((D,X,re)=>{const me=R[D.id],Pe=p===D.id,Ie=p&&d.links.some(ae=>{const Se=typeof ae.source=="object"?ae.source.id:ae.source,we=typeof ae.target=="object"?ae.target.id:ae.target;return J(ae)&&(Se===D.id||we===D.id)}),Y=Pe||Ie;Y&&(X.beginPath(),X.arc(D.x||0,D.y||0,40/2+8,0,2*Math.PI),X.fillStyle=Pe?"rgba(96, 165, 250, 0.4)":"rgba(96, 165, 250, 0.2)",X.fill()),X.save(),X.beginPath(),X.arc(D.x||0,D.y||0,40/2,0,2*Math.PI),X.closePath(),X.fillStyle="#1F2937",X.fill(),X.clip(),me&&me.complete&&me.naturalWidth>0?X.drawImage(me,(D.x||0)-40/2,(D.y||0)-40/2,40,40):(X.fillStyle="#4B5563",X.fill(),X.fillStyle="#fff",X.font="bold 16px Sans-Serif",X.textAlign="center",X.textBaseline="middle",X.fillText(D.heroName.charAt(0),D.x||0,D.y||0)),X.restore(),X.beginPath(),X.arc(D.x||0,D.y||0,40/2,0,2*Math.PI),X.strokeStyle=Y?"#60A5FA":"#6B7280",X.lineWidth=Y?3:2,X.stroke();const ee=Y?13:11;X.font=`${Y?"bold ":""}${ee}px Sans-Serif`,X.textAlign="center",X.textBaseline="top",X.fillStyle=Y?"#fff":"#9CA3AF",X.fillText(D.heroName,D.x||0,(D.y||0)+40/2+5)},[R,p,d.links,J]),Re=S.useCallback((D,X,re)=>{re.beginPath(),re.arc(D.x||0,D.y||0,28,0,2*Math.PI),re.fillStyle=X,re.fill()},[]),Le=S.useCallback(D=>J(D)?jv[D.type]:"rgba(0,0,0,0)",[J]),ze=S.useCallback(D=>{if(!J(D))return 0;const X=1;return X+(10-X)*D.percentage},[J]),Ae=S.useCallback(()=>0,[]),Me=S.useCallback(()=>{},[]),le=S.useCallback(()=>{},[]),te=S.useCallback(D=>{const X=(K.width/2-D.x)/D.k,re=(K.height/2-D.y)/D.k;W.current={x:X,y:re,k:D.k}},[K.width,K.height]),ge=S.useCallback(()=>{if(!G.current)return;const D=60;for(const X of d.nodes)if(X.x!==void 0&&X.y!==void 0){const re=D,xe=K.width-D,me=D,Pe=K.height-D;X.x<re&&(X.x=re),X.x>xe&&(X.x=xe),X.y<me&&(X.y=me),X.y>Pe&&(X.y=Pe),ye.current.set(X.id,{x:X.x,y:X.y})}},[d.nodes,K.width,K.height]),Ge=c||_||i;return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:oe,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back"})]}),l.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center",children:[l.jsx(lA,{size:24,className:"mr-2"}),"Hero Relationship Network"]})]}),C&&l.jsx("div",{className:"mb-4 no-screenshot",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsxs("button",{onClick:()=>{a("buttonClick"),w("local")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${b==="local"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(St,{size:18,className:"mr-2"}),"Play Group"]}),l.jsxs("button",{onClick:()=>{a("buttonClick"),w("global")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${b==="global"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(oA,{size:18,className:"mr-2"}),"Global"]})]})}),b==="global"&&l.jsx("div",{className:"mb-4 p-3 bg-green-900/30 border border-green-700/50 rounded-lg no-screenshot",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(oA,{size:18,className:"mr-2 text-green-400 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-green-200",children:"Viewing global statistics from all players"})]})}),b==="global"&&k&&l.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-700/50 rounded-lg no-screenshot",children:l.jsx("p",{className:"text-sm text-red-200",children:k})}),F&&l.jsxs("div",{className:"mb-4 p-3 bg-purple-900/30 border border-purple-700/50 rounded-lg flex items-center flex-wrap gap-2 no-screenshot",children:[l.jsx(os,{size:18,className:"mr-2 text-purple-400"}),l.jsxs("span",{className:"text-sm text-purple-200",children:["Using filters from Hero Stats:",r>1&&` Min ${r} games per relationship`,r>1&&(s==null?void 0:s.startDate)&&" | ",(s==null?void 0:s.startDate)&&(s==null?void 0:s.endDate)&&`${s.startDate.toLocaleDateString()} - ${s.endDate.toLocaleDateString()}`]})]}),l.jsx("div",{className:"mb-4 sm:hidden no-screenshot",children:l.jsxs("button",{onClick:pe,className:"w-full px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(os,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Settings (",u.size," heroes)"]})]}),g?l.jsx(_r,{size:18}):l.jsx(Dn,{size:18})]})}),l.jsx("div",{className:`${y&&!g?"hidden":""} mb-4 space-y-4 no-screenshot`,children:l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"font-medium",children:"Select Heroes"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:Fe,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"All"}),l.jsx("button",{onClick:Ne,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Clear"})]})]}),L?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx(Bt,{size:24,className:"animate-spin text-blue-400 mr-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading heroes..."})]}):I.length===0?l.jsx("div",{className:"text-center py-8 text-gray-400",children:"No heroes with recorded relationships found"}):l.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 xl:grid-cols-12 gap-2 mb-4",children:I.map(D=>l.jsxs("button",{onClick:()=>Ce(D.id),className:`p-2 rounded-lg transition-all flex flex-col items-center ${u.has(D.id)?"bg-blue-600 hover:bg-blue-500 ring-2 ring-blue-400":"bg-gray-600 hover:bg-gray-500"}`,title:D.name,children:[l.jsx("img",{src:D.icon,alt:D.name,className:"w-10 h-10 rounded-full object-cover",onError:X=>{X.target.src="https://via.placeholder.com/40?text=H"}}),l.jsx("span",{className:"text-[10px] mt-1 truncate w-full text-center leading-tight",children:D.name})]},D.id))}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(jv).map(D=>l.jsxs("button",{onClick:()=>Be(D),className:`flex items-center px-2 py-1 rounded transition-colors text-xs ${O[D]?"bg-gray-600":"bg-gray-800 opacity-40"}`,title:UN[D],children:[l.jsx("div",{className:"w-3 h-3 rounded-sm mr-1.5",style:{backgroundColor:jv[D]}}),l.jsx("span",{className:"hidden sm:inline",children:UN[D]})]},D))})]})}),Ge?l.jsx("div",{className:"flex justify-center items-center h-96",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Bt,{size:32,className:"animate-spin text-blue-400 mb-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading relationship data..."})]})}):u.size<2?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-12 text-center",children:[l.jsx(lA,{size:64,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400 text-lg",children:"Select at least 2 heroes to visualize their relationships"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-2 px-3 py-2 bg-gray-700/50 rounded-lg text-center",children:z?l.jsxs("span",{className:"text-white",children:[l.jsx("span",{className:"font-bold text-blue-400",children:z}),l.jsx("span",{className:"text-gray-300",children:"'s relationships:"}),l.jsx("span",{className:"ml-2 text-blue-400",children:" Won with"}),l.jsx("span",{className:"mx-1 text-purple-400",children:" Lost with"}),l.jsx("span",{className:"mx-1 text-green-400",children:" Beat"}),l.jsx("span",{className:"ml-1 text-red-400",children:" Lost to"})]}):l.jsx("span",{className:"text-gray-400",children:"Hover over a hero to see their relationships"})}),l.jsx("div",{ref:$,className:"bg-gray-900 rounded-lg overflow-hidden border border-gray-700 w-full",style:{height:y?450:600},children:l.jsx(Hp,{ref:G,graphData:d,width:K.width,height:K.height,backgroundColor:"#111827",nodeCanvasObject:he,nodePointerAreaPaint:Re,linkColor:Le,linkWidth:ze,linkCurvature:D=>D.curvature,linkDirectionalArrowLength:Ae,linkDirectionalArrowRelPos:.85,linkDirectionalArrowColor:Le,linkCanvasObjectMode:Me,linkCanvasObject:le,onNodeHover:D=>x(D?D.id:null),onEngineTick:ge,onZoom:te,d3AlphaDecay:.02,d3VelocityDecay:.3,cooldownTime:3e3,warmupTicks:50,enableNodeDrag:!0,enableZoomInteraction:!0,enablePanInteraction:!0,minZoom:.5,maxZoom:3})})]}),u.size>=2&&!Ge&&l.jsx("div",{className:"mt-4 p-4 bg-gray-700/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-1",children:[l.jsx("strong",{children:"Hover"})," over any hero to reveal their relationships with other selected heroes."]}),l.jsxs("p",{className:"mb-1",children:[l.jsx("span",{className:"text-blue-400 font-medium",children:"Blue"})," = won together,",l.jsx("span",{className:"text-purple-400 font-medium ml-2",children:"Purple"})," = lost together,",l.jsx("span",{className:"text-green-400 font-medium ml-2",children:"Green"})," = beat opponent,",l.jsx("span",{className:"text-red-400 font-medium ml-2",children:"Red"})," = lost to opponent."]}),l.jsxs("p",{className:"text-gray-400",children:[l.jsx("strong",{children:"Edge thickness"})," = win/loss rate (thicker = higher % of games with that outcome)."]})]})]})})]})},MQe=({onBack:e})=>{const{playSound:n}=gt(),{isViewMode:r,isViewModeLoading:s,getHeroStats:a}=Ls(),[i,o]=S.useState([]),[c,A]=S.useState(!0),[u,h]=S.useState(""),[d,f]=S.useState("games"),[g,m]=S.useState("desc"),[y,v]=S.useState("all"),[p,x]=S.useState("all"),[b,w]=S.useState(!1),[_,B]=S.useState(()=>{const te=localStorage.getItem("heroStats_minGames");return te?parseInt(te,10):1}),[k,N]=S.useState(()=>{const te=localStorage.getItem("heroStats_recencyMonths");return te?parseInt(te,10):null}),[C,j]=S.useState("local"),[E,F]=S.useState([]),[I,T]=S.useState(!1),[L,P]=S.useState(null),[O,Q]=S.useState(null),[R,M]=S.useState(!1),[G,V]=S.useState(!1),K=st(),[se,de]=S.useState(null),[ye,W]=S.useState(!1),[U,$]=S.useState(void 0),ne=S.useMemo(()=>{if(k===null)return{startDate:void 0,endDate:void 0};const te=new Date,ge=new Date;return ge.setMonth(ge.getMonth()-k),{startDate:ge,endDate:te}},[k]),J=S.useCallback(async(te=!1)=>{T(!0),P(null);try{const ge=await Yi.getGlobalHeroStats(1,_,te);ge.success&&ge.data?(F(ge.data),Q(Yi.getCacheAge())):P(ge.error||"Failed to load global statistics")}catch(ge){console.error("Error loading global stats:",ge),P(ge instanceof Error?ge.message:"An unexpected error occurred")}finally{T(!1)}},[_]);S.useEffect(()=>{s||C==="local"&&(async()=>{A(!0);try{const ge=await a(_,ne.startDate,ne.endDate);o(ge)}catch(ge){console.error("Error loading hero stats:",ge)}finally{A(!1)}})()},[C,_,ne.startDate,ne.endDate,s,a]),S.useEffect(()=>{C==="global"&&E.length===0&&!I&&J()},[C,E.length,I,J]);const z=S.useRef(_);S.useEffect(()=>{C==="global"&&z.current!==_&&(Yi.clearCache(),J(!0)),z.current=_},[C,_,J]),S.useEffect(()=>{if(C==="global"){const te=setInterval(()=>{Q(Yi.getCacheAge())},1e4);return()=>clearInterval(te)}},[C]),S.useEffect(()=>{localStorage.setItem("heroStats_minGames",_.toString())},[_]),S.useEffect(()=>{k===null?localStorage.removeItem("heroStats_recencyMonths"):localStorage.setItem("heroStats_recencyMonths",k.toString())},[k]);const oe=()=>{n("buttonClick"),e()},Ce=te=>{n("buttonClick"),te===d?m(g==="asc"?"desc":"asc"):(f(te),m("desc"))},Fe=()=>{n("buttonClick"),w(!b)},Ne=()=>{n("buttonClick"),h(""),v("all"),x("all"),B(1),N(null),w(!1)},Be=(te,ge)=>{const Ge=ge.currentTarget.getBoundingClientRect();$({x:Ge.x,y:Ge.y,width:Ge.width,height:Ge.height}),de(te),W(!0)},pe=()=>{W(!1)},he=(te,ge)=>{const Ge=ge.currentTarget.getBoundingClientRect();$({x:Ge.x,y:Ge.y,width:Ge.width,height:Ge.height}),(se==null?void 0:se.id)===te.id&&ye?W(!1):(de(te),W(!0))},Re=S.useMemo(()=>C==="local"?i:E,[C,i,E]),Le=q.useMemo(()=>{const te=new Set;return Re.forEach(ge=>{ge.roles.forEach(Ge=>te.add(Ge))}),Array.from(te).sort()},[Re]),ze=q.useMemo(()=>{const te=new Set;return Re.forEach(ge=>{te.add(ge.expansion)}),Array.from(te).sort()},[Re]),Ae=Re.filter(te=>{if(u){const ge=u.toLowerCase();return te.heroName.toLowerCase().includes(ge)||te.roles.some(Ge=>Ge.toLowerCase().includes(ge))}return!(y!=="all"&&te.expansion!==y||p!=="all"&&!te.roles.includes(p))}).sort((te,ge)=>{let Ge=0;switch(d){case"name":Ge=te.heroName.localeCompare(ge.heroName);break;case"games":Ge=te.totalGames-ge.totalGames;break;case"winRate":Ge=te.winRate-ge.winRate;break;case"complexity":Ge=te.complexity-ge.complexity;break;default:Ge=0}return g==="asc"?Ge:-Ge}),Me=te=>Pn.find(ge=>ge.id===te),le=te=>{const ge=Me(te.heroId);return ge?l.jsxs("div",{className:"flex flex-col items-center p-1 bg-gray-800 rounded-lg hover:bg-gray-700 cursor-pointer relative",onMouseEnter:Ge=>Be(ge,Ge),onMouseLeave:pe,onClick:Ge=>he(ge,Ge),children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mb-1",children:l.jsx("img",{src:ge.icon,alt:ge.name,className:"w-full h-full object-cover",onError:Ge=>{Ge.target.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsx("div",{className:"text-xs text-center truncate w-full",children:te.heroName}),l.jsxs("div",{className:"text-xs text-gray-400",children:[te.winRate.toFixed(0),"% (",te.gamesPlayed,")"]})]},te.heroId):null};return S.useEffect(()=>{const te=document.createElement("style");return te.type="text/css",te.innerHTML=`
      /* Styles applied during screenshot taking */
      .taking-screenshot {
        background-color: #1F2937 !important;
        padding: 2rem !important;
        width: 1400px !important; /* Increased width for more space */
        position: relative !important;
        overflow: visible !important;
      }
      
      .screenshot-title {
        color: white;
        margin-bottom: 2rem;
      }
      
      .screenshot-footer {
        color: #9CA3AF;
        margin-top: 2rem;
        border-top: 1px solid #4B5563;
        padding-top: 1rem;
      }
      
      /* Hide elements with no-screenshot class */
      .taking-screenshot .no-screenshot {
        display: none !important;
      }
      
      /* Make all hero cards look good in screenshot */
      .taking-screenshot .bg-gray-700 {
        background-color: rgba(55, 65, 81, 0.8) !important;
        padding: 1.5rem !important; /* More padding in cards */
      }
      
      .taking-screenshot .bg-gray-800 {
        background-color: rgba(31, 41, 55, 0.9) !important;
        padding: 1.25rem !important; /* More padding in card headers */
      }
      
      /* Adjust grid layout for screenshots */
      .taking-screenshot .grid {
        grid-template-columns: repeat(2, 1fr) !important; /* Force 2 columns for more space */
        gap: 2rem !important; /* Increase gap between cards */
      }
      
      /* Fix nested grids (like teammate grids) */
      .taking-screenshot .grid .grid {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 0.75rem !important;
      }
      
      /* Ensure text doesn't get cut off */
      .taking-screenshot .text-sm,
      .taking-screenshot .text-xs {
        overflow: visible !important;
        white-space: normal !important;
        line-height: 1.4 !important;
      }
      
      /* Fix for tooltip icons - ensure they're visible */
      .taking-screenshot .flex.items-center {
        display: flex !important;
        align-items: center !important;
        margin-bottom: 0.5rem !important;
      }
      
      .taking-screenshot .flex.items-center svg {
        margin-left: 0.5rem !important;
        visibility: visible !important;
        display: inline-block !important;
      }
      
      /* Make sure section headers have proper spacing */
      .taking-screenshot h4.font-semibold {
        display: inline-block !important;
        margin-right: 0.5rem !important;
      }
      
      /* Make sure progress bars show up correctly */
      .taking-screenshot .bg-red-600 {
        background-color: rgba(220, 38, 38, 0.9) !important;
      }
      
      .taking-screenshot .bg-green-500 {
        background-color: rgba(34, 197, 94, 0.9) !important;
      }
      
      /* Space out section titles */
      .taking-screenshot h4 {
        margin-top: 1rem !important;
        margin-bottom: 0.75rem !important;
      }
    `,document.head.appendChild(te),()=>{document.head.removeChild(te)}},[]),R?l.jsx(UQe,{onBack:()=>M(!1),initialStatsMode:C,inheritedMinGames:_,inheritedDateRange:ne.startDate?{startDate:ne.startDate,endDate:ne.endDate}:void 0}):G?l.jsx(PQe,{onBack:()=>V(!1),initialStatsMode:C,inheritedMinGames:_,inheritedDateRange:ne.startDate?{startDate:ne.startDate,endDate:ne.endDate}:void 0}):l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:oe,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold text-center sm:text-left",children:"Hero Statistics"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[l.jsx(At,{text:"View hero win rate progression over time",position:"left",children:l.jsxs("button",{onClick:()=>{n("buttonClick"),M(!0)},className:"flex items-center justify-center px-3 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg w-full sm:w-auto",children:[l.jsx(Hr,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:"View Over Time"})]})}),l.jsx(At,{text:"View hero relationships as a network graph",position:"left",children:l.jsxs("button",{onClick:()=>{n("buttonClick"),V(!0)},className:"flex items-center justify-center px-3 py-2 bg-teal-600 hover:bg-teal-500 rounded-lg w-full sm:w-auto",children:[l.jsx(lA,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:"Relationships"})]})})]})]}),K&&l.jsxs("div",{className:"mb-4 no-screenshot",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsxs("button",{onClick:()=>{n("buttonClick"),j("local")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${C==="local"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(St,{size:18,className:"mr-2"}),"Play Group"]}),l.jsxs("button",{onClick:()=>{n("buttonClick"),j("global")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${C==="global"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(oA,{size:18,className:"mr-2"}),"Global"]})]}),l.jsx("p",{className:"text-center text-xs text-gray-500 mt-2",children:C==="local"?r?"Showing statistics from the shared match history":"Showing statistics from your match history":"Showing aggregated statistics from all players"})]}),C==="global"&&l.jsxs("div",{className:"mb-4 p-3 bg-green-900/30 border border-green-700/50 rounded-lg no-screenshot",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(oA,{size:18,className:"mr-2 text-green-400 flex-shrink-0"}),l.jsxs("span",{className:"text-sm text-green-200",children:["Viewing global statistics from all players who have uploaded data via Cloud Sync",O!==null&&l.jsxs("span",{className:"ml-2 text-green-400/70",children:["(cached ",O<60?`${O}s`:`${Math.floor(O/60)}m`," ago)"]})]})]}),l.jsxs("button",{onClick:()=>{n("buttonClick"),Yi.clearCache(),J(!0)},disabled:I,className:"flex items-center px-2 py-1 text-sm bg-green-700 hover:bg-green-600 rounded transition-colors disabled:opacity-50",title:"Refresh global data",children:[I?l.jsx(Bt,{size:14,className:"animate-spin"}):l.jsx(xo,{size:14}),l.jsx("span",{className:"ml-1",children:"Refresh"})]})]}),l.jsx("p",{className:"text-xs text-green-200/60 mt-2",children:"Global stats update hourly. Time period filter is not available. Data is not saved locally."})]}),C==="global"&&L&&l.jsxs("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-700/50 rounded-lg no-screenshot",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(_s,{size:18,className:"mr-2 text-red-400 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-red-200",children:L})]}),l.jsx("button",{onClick:()=>{n("buttonClick"),J(!0)},className:"mt-2 text-sm text-red-400 hover:text-red-300 underline",children:"Try again"})]}),C==="global"&&I&&E.length===0&&l.jsx("div",{className:"flex justify-center items-center h-32 no-screenshot",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Bt,{size:32,className:"animate-spin text-green-400 mb-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading global statistics..."})]})}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 no-screenshot",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:u,onChange:te=>h(te.target.value),placeholder:"Search heroes or roles...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx(kl,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:()=>Ce("games"),className:`px-3 py-1 rounded ${d==="games"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Games ",d==="games"&&(g==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>Ce("winRate"),className:`px-3 py-1 rounded ${d==="winRate"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Win Rate ",d==="winRate"&&(g==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>Ce("complexity"),className:`px-3 py-1 rounded ${d==="complexity"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Complexity ",d==="complexity"&&(g==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>Ce("name"),className:`px-3 py-1 rounded ${d==="name"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Name ",d==="name"&&(g==="asc"?"":"")]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:Fe,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(os,{size:18,className:"mr-2"}),l.jsx("span",{children:"Filters"}),(y!=="all"||p!=="all"||_!==1||k!==null)&&l.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(y!=="all"?1:0)+(p!=="all"?1:0)+(_!==1?1:0)+(k!==null?1:0)}),b?l.jsx(_r,{size:16,className:"ml-2"}):l.jsx(Dn,{size:16,className:"ml-2"})]}),b&&l.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-72",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),l.jsxs("div",{className:`mb-4 ${C==="global"?"opacity-50":""}`,children:[l.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:["Time Period",C==="global"&&l.jsx("span",{className:"ml-2 text-xs text-yellow-500",children:"(not available for global stats)"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:`flex items-center ${C==="global"?"cursor-not-allowed":"cursor-pointer"}`,children:[l.jsx("input",{type:"radio",name:"timePeriod",checked:k===null,onChange:()=>N(null),disabled:C==="global",className:"mr-2 accent-blue-500"}),l.jsx("span",{className:"text-sm",children:"All Time"})]}),l.jsxs("label",{className:`flex items-center ${C==="global"?"cursor-not-allowed":"cursor-pointer"}`,children:[l.jsx("input",{type:"radio",name:"timePeriod",checked:k!==null,onChange:()=>N(k||6),disabled:C==="global",className:"mr-2 accent-blue-500"}),l.jsx("span",{className:"text-sm mr-2",children:"Last"}),l.jsx("input",{type:"number",min:"1",max:"24",value:k||6,onChange:te=>{const ge=parseInt(te.target.value,10);!isNaN(ge)&&ge>=1&&ge<=24&&N(ge)},disabled:k===null||C==="global",className:"w-16 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),l.jsx("span",{className:"text-sm ml-2",children:"months"})]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Expansion"}),l.jsxs("select",{value:y,onChange:te=>v(te.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Expansions"}),ze.map(te=>l.jsx("option",{value:te,children:te},te))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Role"}),l.jsxs("select",{value:p,onChange:te=>x(te.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Roles"}),Le.map(te=>l.jsx("option",{value:te,children:te},te))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Min games for relationships"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>B(te=>Math.max(1,te-1)),disabled:_<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:""}),l.jsx("div",{className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-center font-medium",children:_}),l.jsx("button",{onClick:()=>B(te=>Math.min(20,te+1)),disabled:_>=20,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:"+"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only show teammate/opponent stats with at least this many shared games"})]}),l.jsx("button",{onClick:Ne,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),(y!=="all"||p!=="all"||u!=="")&&l.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg screenshot-info",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Filtered View:"}),l.jsxs("ul",{className:"text-sm space-y-1",children:[y!=="all"&&l.jsxs("li",{children:["Expansion: ",y]}),p!=="all"&&l.jsxs("li",{children:["Role: ",p]}),u!==""&&l.jsxs("li",{children:['Search Term: "',u,'"']})]})]}),C==="local"&&k!==null&&ne.startDate&&ne.endDate&&l.jsxs("div",{className:"mb-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center",children:[l.jsx(ks,{size:18,className:"mr-2 text-blue-400 flex-shrink-0"}),l.jsxs("span",{className:"text-sm text-blue-200",children:["Showing stats from"," ",l.jsx("span",{className:"font-medium",children:ne.startDate.toLocaleDateString()})," ","to"," ",l.jsx("span",{className:"font-medium",children:ne.endDate.toLocaleDateString()})," ","(",k," month",k!==1?"s":"",")"]})]}),(C==="local"?c:I&&E.length===0)?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsx("div",{children:Ae.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Ae.map(te=>{const ge=Me(te.heroId),Ge=(ge==null?void 0:ge.icon)||te.icon||`heroes/${te.heroName.toLowerCase().replace(/\s+/g,"")}.png`;return l.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md",children:[l.jsxs("div",{className:"px-5 py-4 bg-gray-800 flex items-center cursor-pointer",onMouseEnter:D=>Be(Me(te.heroId),D),onMouseLeave:pe,onClick:D=>he(Me(te.heroId),D),children:[l.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-full overflow-hidden mr-4 flex-shrink-0",children:l.jsx("img",{src:Ge,alt:te.heroName,className:"w-full h-full object-cover",onError:D=>{D.target.src="https://via.placeholder.com/64?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold",children:te.heroName}),l.jsx("div",{className:"text-sm text-gray-300",children:te.roles.join("  ")}),l.jsxs("div",{className:"text-xs text-blue-400 mt-1",children:[te.expansion,"  Complexity: ",te.complexity]})]})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("div",{className:"text-sm text-gray-400 flex items-center",children:[l.jsx("span",{children:"Win Rate"}),l.jsx(qt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),l.jsxs("div",{className:"font-medium",children:[te.winRate.toFixed(1),"%"]})]}),l.jsx("div",{className:"h-2 bg-red-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${te.winRate}%`}})}),l.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-400",children:[l.jsxs("span",{children:["Wins: ",te.wins]}),l.jsxs("span",{children:["Losses: ",te.losses]}),l.jsxs("span",{children:["Total: ",te.totalGames]})]})]}),te.victoryTypeStats&&(()=>{const D=te.victoryTypeStats,X=D.throne.total+D.wave.total+D.kills.total,re=D.throne.wins+D.wave.wins+D.kills.wins;if(X===0)return null;const xe=[{key:"throne",label:"Throne",Icon:Kb,bgColor:"bg-yellow-500",data:D.throne},{key:"wave",label:"Wave",Icon:Gb,bgColor:"bg-blue-500",data:D.wave},{key:"kills",label:"Kills",Icon:na,bgColor:"bg-red-500",data:D.kills}],me=(Pe,Ie,Y)=>{const ee=xe.filter(ae=>Pe(ae)>0);return ee.length===0?null:l.jsxs("div",{className:"mb-2",children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:Y}),l.jsx("div",{className:"flex h-5 rounded overflow-hidden bg-gray-800",children:ee.map(ae=>{const Se=Pe(ae),we=Se/Ie*100,ke=ae.Icon;return l.jsxs("div",{className:`${ae.bgColor} h-full flex items-center justify-center gap-1 text-white text-xs font-medium`,style:{width:`${we}%`},title:`${ae.label}: ${Se} (${Math.round(we)}%)`,children:[l.jsx(ke,{size:10}),we>=25&&l.jsx("span",{children:Se})]},ae.key)})})]})};return l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Victory Types"}),l.jsxs("div",{className:"text-xs text-gray-500",children:[X," of ",te.totalGames," games"]})]}),me(Pe=>Pe.data.total,X,"Games by Type"),me(Pe=>Pe.data.wins,re,"Wins by Type")]})})(),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("h4",{className:"font-semibold text-sm",children:"Best Teammates"}),l.jsx(qt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),te.bestTeammates.length>0?l.jsx("div",{className:"grid grid-cols-3 gap-2",children:te.bestTeammates.map(D=>le(D))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No data available"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("h4",{className:"font-semibold text-sm",children:"Best Against"}),l.jsx(qt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),te.bestAgainst.length>0?l.jsx("div",{className:"grid grid-cols-3 gap-2",children:te.bestAgainst.map(D=>le(D))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No data available"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("h4",{className:"font-semibold text-sm",children:"Countered By"}),l.jsx(qt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),te.worstAgainst.length>0?l.jsx("div",{className:"grid grid-cols-3 gap-2",children:te.worstAgainst.map(D=>le(D))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No data available"})]})]})]},te.heroId)})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(Mt,{size:48,className:"text-gray-500 mb-4"}),l.jsx("p",{className:"text-xl text-gray-400",children:u||y!=="all"||p!=="all"?"No heroes found matching your filters":"No hero data available"}),(u||y!=="all"||p!=="all")&&l.jsx("button",{onClick:Ne,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg no-screenshot",children:"Clear Filters"})]})}),se&&l.jsx(sF,{hero:se,isVisible:ye,onClose:()=>W(!1),cardPosition:U}),l.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:[l.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[l.jsx(qt,{size:16,className:"mr-2 text-blue-400"}),"About Hero Statistics"]}),C==="local"?l.jsx("p",{className:"mb-2",children:"These statistics show hero performance based on your match history. Win rates and synergies are calculated from your recorded matches, so they reflect your play group's style and may differ from global statistics."}):l.jsx("p",{className:"mb-2",children:"These are aggregated statistics from all players who have uploaded their matches to the cloud. Win rates and synergies reflect the global community's experience. This data is downloaded fresh each session and is not stored locally."})]})]})},QQe=({onBack:e})=>{const{playSound:n}=gt(),[r,s]=S.useState(!1),[a,i]=S.useState(null),[o,c]=S.useState(null),[A,u]=S.useState(new Date().toISOString().split("T")[0]),[h,d]=S.useState(new Date().toTimeString().split(" ")[0].substring(0,5)),[f,g]=S.useState(dt.Long),[m,y]=S.useState(!1),[v,p]=S.useState(ie.Titans),[x,b]=S.useState(void 0),[w,_]=S.useState([]),[B,k]=S.useState(!1),[N,C]=S.useState(-1),[j,E]=S.useState(aA()),[F,I]=S.useState(""),[T,L]=S.useState(4),[P,O]=S.useState("name"),[Q,R]=S.useState("asc"),[M,G]=S.useState({}),[V,K]=S.useState([]),[se,de]=S.useState([]),[ye,W]=S.useState(!1),[U,$]=S.useState(new Map),[ne,J]=S.useState(new Map),[z,oe]=S.useState({kills:!1,deaths:!1,assists:!1,goldEarned:!1,minionKills:!1,level:!1}),[Ce,Fe]=S.useState([]);S.useEffect(()=>{(async()=>{try{const ae=(await Ct.getAllPlayers()).map(Se=>Se.name);Fe(ae)}catch(ee){console.error("Error loading player names:",ee)}})(),w.length>0&&ge()},[]);const Ne=()=>{n("buttonClick"),e()},Be=()=>{const Y={};return z.kills&&(Y.kills=0),z.deaths&&(Y.deaths=0),z.assists&&(Y.assists=0),z.goldEarned&&(Y.goldEarned=0),z.minionKills&&(Y.minionKills=0),z.level&&(Y.level=1),Y},pe=Y=>{n("buttonClick");const ee={...z,[Y]:!z[Y]};if(oe(ee),ye){const ae=new Map;w.forEach((Se,we)=>{const ke=U.get(we)||{},Qe={};ee.kills&&(Qe.kills=ke.kills??0),ee.deaths&&(Qe.deaths=ke.deaths??0),ee.assists&&(Qe.assists=ke.assists??0),ee.goldEarned&&(Qe.goldEarned=ke.goldEarned??0),ee.minionKills&&(Qe.minionKills=ke.minionKills??0),ee.level&&(Qe.level=ke.level??1),ae.set(we,Qe)}),$(ae),J(new Map)}},he=()=>{if(n("buttonClick"),W(!ye),!ye){const Y=new Map;w.forEach((ee,ae)=>{Y.set(ae,Be())}),$(Y)}},Re=(Y,ee)=>{const ae=[];return z.kills&&ee.kills!==void 0&&(ee.kills<0||ee.kills>50)&&ae.push("Kills must be between 0 and 50"),z.deaths&&ee.deaths!==void 0&&(ee.deaths<0||ee.deaths>20)&&ae.push("Deaths must be between 0 and 20"),z.assists&&ee.assists!==void 0&&(ee.assists<0||ee.assists>100)&&ae.push("Assists must be between 0 and 100"),z.goldEarned&&ee.goldEarned!==void 0&&(ee.goldEarned<0||ee.goldEarned>1e4)&&ae.push("Gold earned must be between 0 and 10,000"),z.minionKills&&ee.minionKills!==void 0&&(ee.minionKills<0||ee.minionKills>200)&&ae.push("Minion kills must be between 0 and 200"),z.level&&ee.level!==void 0&&(ee.level<1||ee.level>8)&&ae.push("Level must be between 1 and 8"),ae},Le=(Y,ee)=>{const ae=new Map(U);ae.set(Y,ee),$(ae);const Se=Re(Y,ee),we=new Map(ne);Se.length>0?we.set(Y,Se):we.delete(Y),J(we)},ze=Y=>{n("buttonClick");const ee=new Map(U);ee.set(Y,Be()),$(ee);const ae=new Map(ne);ae.delete(Y),J(ae)},Ae=()=>{n("buttonClick");const Y=new Map;w.forEach((ee,ae)=>{Y.set(ae,Be())}),$(Y),J(new Map)},Me=Y=>{if(w.length>=10){G({...M,maxPlayers:"Maximum 10 players allowed"});return}n("buttonClick");const ee={id:"",name:"",team:Y,heroId:null,heroName:"",heroRoles:[]},ae=w.length;if(_([...w,ee]),ye){const Se=new Map(U);Se.set(ae,Be()),$(Se)}G({...M,players:void 0,maxPlayers:void 0})},le=Y=>{n("buttonClick");const ee=[...w];if(ee.splice(Y,1),_(ee),ye){const ae=new Map,Se=new Map;ee.forEach((we,ke)=>{const Qe=ke>=Y?ke+1:ke;U.has(Qe)&&ae.set(ke,U.get(Qe)),ne.has(Qe)&&Se.set(ke,ne.get(Qe))}),$(ae),J(Se)}ge(ee)},te=(Y,ee)=>{const ae=[...w];ae[Y].id=ee,ae[Y].name=ee,_(ae),ge(ae)},ge=(Y=w)=>{const ee=Y.map(Te=>Te.id.trim()).filter(Te=>Te!==""),ae={},Se=[];ee.forEach(Te=>{ae[Te]=(ae[Te]||0)+1,ae[Te]>1&&!Se.includes(Te)&&Se.push(Te)}),K(Se);const we=Y.map(Te=>Te.heroId).filter(Te=>Te!==null),ke={},Qe=[];we.forEach(Te=>{ke[Te]=(ke[Te]||0)+1,ke[Te]>1&&!Qe.includes(Te)&&Qe.push(Te)}),de(Qe)},Ge=Y=>{n("buttonClick"),C(Y),k(!0)},D=Y=>{if(n("heroSelect"),N===-1)return;const ee=[...w];ee[N].heroId=Y.id,ee[N].heroName=Y.name,ee[N].heroRoles=Y.roles,_(ee),ge(ee),k(!1),G({...M,heroes:void 0,heroDuplicates:void 0})},X=Y=>{n("buttonClick"),j.includes(Y)?E(j.filter(ee=>ee!==Y)):E([...j,Y])},re=Y=>{n("buttonClick"),P===Y?R(Q==="asc"?"desc":"asc"):(O(Y),R("asc"))},xe=()=>{const Y={};x||(Y.victoryType="Please select how the match was won"),A||(Y.date="Match date is required"),w.length<4&&(Y.players="At least 4 players are required (2 per team)"),w.length>10&&(Y.maxPlayers="Maximum 10 players allowed"),w.some(Te=>!Te.id.trim())&&(Y.players="All players must have names");const ee=w.map(Te=>Te.id.trim());if(new Set(ee).size!==ee.length){const Te=ee.filter((at,mt)=>at&&ee.indexOf(at)!==mt);Y.players=`Duplicate player names found: ${[...new Set(Te)].join(", ")}`}const Se=w.filter(Te=>Te.team===ie.Titans),we=w.filter(Te=>Te.team===ie.Atlanteans);(Se.length<2||we.length<2)&&(Y.teams="Each team must have at least 2 players"),Math.abs(Se.length-we.length)>1&&(Y.teamBalance="Teams must be balanced (equal count or differ by at most 1 player)"),w.some(Te=>Te.heroId===null)&&(Y.heroes="All players must select a hero");const ke=w.map(Te=>Te.heroId).filter(Te=>Te!==null);if(new Set(ke).size!==ke.length){const Te=ke.filter((mt,bt)=>mt!==null&&ke.indexOf(mt)!==bt),at=w.filter(mt=>mt.heroId!==null&&Te.includes(mt.heroId)).map(mt=>mt.heroName).filter((mt,bt,ht)=>ht.indexOf(mt)===bt);Y.heroDuplicates=`Duplicate heroes selected: ${at.join(", ")}`}if(ye){let Te=!1;const at=new Map;w.forEach((mt,bt)=>{const ht=U.get(bt);if(ht){const vt=Re(bt,ht);vt.length>0&&(at.set(bt,vt),Te=!0)}}),Te&&(Y.stats="Please fix player statistics errors before submitting",J(at))}return G(Y),Object.keys(Y).length===0},me=async()=>{if(!xe()){n("buttonClick");return}s(!0),i(null),c(null);try{const Y={date:new Date(`${A}T${h||"00:00"}`),winningTeam:v,gameLength:f,doubleLanes:m,victoryType:x},ee=w.map((ae,Se)=>{const we={id:ae.id,team:ae.team,heroId:ae.heroId,heroName:ae.heroName,heroRoles:ae.heroRoles};if(ye&&U.has(Se)){const ke=U.get(Se);return{...we,kills:z.kills?ke.kills:void 0,deaths:z.deaths?ke.deaths:void 0,assists:z.assists?ke.assists:void 0,goldEarned:z.goldEarned?ke.goldEarned:void 0,minionKills:z.minionKills?ke.minionKills:void 0,level:z.level?ke.level:void 0}}return{...we,kills:void 0,deaths:void 0,assists:void 0,goldEarned:void 0,minionKills:void 0,level:void 0}});await Ct.recordMatch(Y,ee),n("phaseChange"),i("Match successfully recorded!"),_([]),u(new Date().toISOString().split("T")[0]),d(new Date().toTimeString().split(" ")[0].substring(0,5)),b(void 0)}catch(Y){console.error("Error recording match:",Y),c("Failed to record match. Please try again.")}finally{s(!1)}},Ie=(()=>{let Y=zb(j).filter(ee=>ee.complexity<=T);if(F){const ee=F.toLowerCase();Y=Y.filter(ae=>ae.name.toLowerCase().includes(ee)||ae.roles.some(Se=>Se.toLowerCase().includes(ee)))}return Y.sort((ee,ae)=>{let Se=0;return P==="name"?Se=ee.name.localeCompare(ae.name):Se=ee.complexity-ae.complexity,Q==="asc"?Se:-Se}),Y})();return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("button",{onClick:Ne,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Record Match"})]}),l.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(iA,{size:20,className:"text-blue-400 mr-3 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-blue-300 mb-1",children:"Manual Match Recording"}),l.jsx("p",{className:"text-sm",children:"Use this form to record matches played outside the timer app. Note that matches played using the drafting system and timer are automatically recorded."})]})]})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(ks,{size:18,className:"mr-2 text-blue-400"}),"Match Details"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Match Date"}),l.jsx("input",{type:"date",value:A,onChange:Y=>u(Y.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),M.date&&l.jsx("div",{className:"text-red-400 text-sm mt-1",children:M.date})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Match Time (optional)"}),l.jsx("input",{type:"time",value:h,onChange:Y=>d(Y.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Game Type"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gameLength",value:dt.Quick,checked:f===dt.Quick,onChange:()=>g(dt.Quick),className:"form-radio h-5 w-5 text-blue-600"}),l.jsx("span",{className:"ml-2",children:"Quick"})]}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gameLength",value:dt.Long,checked:f===dt.Long,onChange:()=>g(dt.Long),className:"form-radio h-5 w-5 text-blue-600"}),l.jsx("span",{className:"ml-2",children:"Long"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Lane Configuration"}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:m,onChange:()=>y(!m),className:"form-checkbox h-5 w-5 text-blue-600"}),l.jsx("span",{className:"ml-2",children:"Double Lanes (2 Lanes)"})]})]})]})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(St,{size:18,className:"mr-2 text-blue-400"}),"Teams and Players"]}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[l.jsxs("button",{onClick:()=>Me(ie.Titans),className:`flex-1 flex items-center justify-center ${w.length>=10?"bg-gray-700 cursor-not-allowed":"bg-blue-700 hover:bg-blue-600"} px-4 py-2 rounded-lg`,disabled:w.length>=10,children:[l.jsx(ns,{size:18,className:"mr-2"}),l.jsx("span",{children:"Add Titan Player"})]}),l.jsxs("button",{onClick:()=>Me(ie.Atlanteans),className:`flex-1 flex items-center justify-center ${w.length>=10?"bg-gray-700 cursor-not-allowed":"bg-red-700 hover:bg-red-600"} px-4 py-2 rounded-lg`,disabled:w.length>=10,children:[l.jsx(ns,{size:18,className:"mr-2"}),l.jsx("span",{children:"Add Atlantean Player"})]})]}),w.length>0?l.jsx("div",{className:"space-y-2",children:w.map((Y,ee)=>l.jsxs("div",{className:`p-3 rounded-lg ${Y.team===ie.Titans?"bg-blue-900/30":"bg-red-900/30"} flex flex-col sm:flex-row items-start sm:items-center gap-2`,children:[l.jsx("div",{className:"w-full sm:w-1/3",children:l.jsx(t6,{player:{id:ee,team:Y.team,hero:null,name:Y.name},onNameChange:ae=>te(ee,ae),onRemove:()=>le(ee),isDuplicate:V.includes(Y.name.trim())&&Y.name.trim()!=="",suggestedNames:Ce})}),l.jsx("div",{className:"flex-1 flex items-center",children:l.jsx("button",{onClick:()=>Ge(ee),className:`flex-1 px-3 py-2 ${Y.heroId!==null?se.includes(Y.heroId)?"bg-amber-900/30 border border-amber-500":"bg-gray-700":"bg-gray-800 border border-dashed border-gray-600"} rounded-lg hover:bg-gray-600 transition-colors`,children:Y.heroId!==null?l.jsxs("div",{className:"flex items-center",children:[l.jsx(Mt,{size:16,className:"mr-2"}),l.jsx("span",{children:Y.heroName})]}):l.jsx("span",{className:"text-gray-400",children:"Select Hero"})})})]},ee))}):l.jsx("div",{className:"text-center p-4 border border-dashed border-gray-600 rounded-lg text-gray-400",children:"Add players to both teams using the buttons above"}),M.players&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:M.players}),M.teams&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:M.teams}),M.teamBalance&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:M.teamBalance}),M.heroes&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:M.heroes}),M.heroDuplicates&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:M.heroDuplicates}),M.maxPlayers&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:M.maxPlayers}),M.stats&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:M.stats}),w.length>0&&l.jsxs("div",{className:"mt-3 flex justify-between text-sm",children:[l.jsxs("div",{children:["Titans: ",w.filter(Y=>Y.team===ie.Titans).length," players",w.filter(Y=>Y.team===ie.Titans).length<2&&l.jsx("span",{className:"ml-2 text-amber-400",children:"Minimum 2 required"})]}),l.jsxs("div",{children:["Atlanteans: ",w.filter(Y=>Y.team===ie.Atlanteans).length," players",w.filter(Y=>Y.team===ie.Atlanteans).length<2&&l.jsx("span",{className:"ml-2 text-amber-400",children:"Minimum 2 required"})]})]}),w.length>0&&Math.abs(w.filter(Y=>Y.team===ie.Titans).length-w.filter(Y=>Y.team===ie.Atlanteans).length)>1&&l.jsx("div",{className:"mt-1 text-amber-400 text-sm text-center",children:"Teams are unbalanced! Teams should have equal player counts or differ by at most 1."}),w.length>10&&l.jsx("div",{className:"mt-1 text-red-400 text-sm text-center",children:"Too many players! Maximum 10 players allowed."})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(l0,{size:18,className:"mr-2 text-green-400"}),"Recording Mode"]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("button",{onClick:he,className:`flex-1 p-4 rounded-lg border-2 transition-all ${ye?"border-gray-600 bg-gray-800 hover:bg-gray-700":"border-blue-500 bg-blue-900/50"}`,children:l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-lg mb-1",children:"Basic Recording"}),l.jsx("div",{className:"text-sm text-gray-300",children:"Record match results with player names, heroes, and winner only"})]})}),l.jsx("button",{onClick:he,className:`flex-1 p-4 rounded-lg border-2 transition-all ${ye?"border-green-500 bg-green-900/50":"border-gray-600 bg-gray-800 hover:bg-gray-700"}`,children:l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-lg mb-1",children:"Detailed Recording"}),l.jsx("div",{className:"text-sm text-gray-300",children:"Record complete player statistics: kills, deaths, assists, gold, level"})]})})]}),ye&&l.jsx("div",{className:"mt-3 p-3 bg-green-900/20 border border-green-500/30 rounded-lg",children:l.jsxs("p",{className:"text-sm text-green-200 flex items-center",children:[l.jsx(iA,{size:16,className:"mr-2"}),"Detailed mode allows you to record comprehensive player statistics for more accurate match analysis."]})})]}),ye&&l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(St,{size:18,className:"mr-2 text-green-400"}),"Player Statistics"]}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-600",children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center",children:[l.jsx(lr,{size:16,className:"mr-2"}),"Select Statistics to Track"]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:z.kills,onChange:()=>pe("kills"),className:"form-checkbox h-4 w-4 text-red-600 bg-gray-800 border-gray-600 rounded focus:ring-red-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(J3,{size:14,className:"mr-1"}),"Kills"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:z.deaths,onChange:()=>pe("deaths"),className:"form-checkbox h-4 w-4 text-red-600 bg-gray-800 border-gray-600 rounded focus:ring-red-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(Wb,{size:14,className:"mr-1"}),"Deaths"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:z.assists,onChange:()=>pe("assists"),className:"form-checkbox h-4 w-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(X3,{size:14,className:"mr-1"}),"Assists"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:z.goldEarned,onChange:()=>pe("goldEarned"),className:"form-checkbox h-4 w-4 text-yellow-600 bg-gray-800 border-gray-600 rounded focus:ring-yellow-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(ea,{size:14,className:"mr-1"}),"Gold"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:z.minionKills,onChange:()=>pe("minionKills"),className:"form-checkbox h-4 w-4 text-green-600 bg-gray-800 border-gray-600 rounded focus:ring-green-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(ng,{size:14,className:"mr-1"}),"Minions"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:z.level,onChange:()=>pe("level"),className:"form-checkbox h-4 w-4 text-purple-600 bg-gray-800 border-gray-600 rounded focus:ring-purple-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(vl,{size:14,className:"mr-1"}),"Level"]})]})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-3",children:" Only checked statistics will be tracked."})]}),l.jsx($Qe,{players:w,playerStats:U,statsErrors:ne,enabledStats:z,onStatsChange:Le,onResetPlayerStats:ze,onResetAllStats:Ae})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(SA,{size:18,className:"mr-2 text-yellow-400"}),"Match Winner"]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("button",{onClick:()=>p(ie.Titans),className:`p-4 rounded-lg border-2 ${v===ie.Titans?"border-blue-500 bg-blue-900/50":"border-gray-600 bg-gray-800 hover:bg-gray-700"} flex items-center`,children:[v===ie.Titans&&l.jsx(lr,{size:18,className:"mr-2 text-blue-400"}),l.jsx("span",{className:"text-lg font-medium",children:"Titans Victory"})]}),l.jsxs("button",{onClick:()=>p(ie.Atlanteans),className:`p-4 rounded-lg border-2 ${v===ie.Atlanteans?"border-red-500 bg-red-900/50":"border-gray-600 bg-gray-800 hover:bg-gray-700"} flex items-center`,children:[v===ie.Atlanteans&&l.jsx(lr,{size:18,className:"mr-2 text-red-400"}),l.jsx("span",{className:"text-lg font-medium",children:"Atlanteans Victory"})]})]})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsx(j_,{value:x,onChange:Y=>{n("buttonClick"),b(Y),G({...M,victoryType:void 0})},required:!0}),M.victoryType&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:M.victoryType})]}),l.jsx("div",{className:"flex justify-center mt-6",children:l.jsx("button",{onClick:me,disabled:r,className:`px-6 py-3 bg-green-600 hover:bg-green-500 rounded-lg flex items-center text-xl ${r?"opacity-70 cursor-not-allowed":""}`,children:r?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),l.jsx("span",{children:"Recording..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(Nm,{size:20,className:"mr-3"}),l.jsx("span",{children:"Record Match"})]})})}),a&&l.jsx("div",{className:"mt-4 p-3 bg-green-900/50 border border-green-500 rounded-lg text-green-300 text-center",children:a}),o&&l.jsx("div",{className:"mt-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300 text-center",children:o})]}),B&&l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"p-4 bg-gray-700 flex justify-between items-center",children:[l.jsx("h3",{className:"text-xl font-bold",children:"Select Hero"}),l.jsx("button",{onClick:()=>k(!1),className:"p-1 bg-gray-600 hover:bg-gray-500 rounded-full",children:l.jsx(RQe,{size:20})})]}),l.jsxs("div",{className:"p-4 border-b border-gray-700",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:F,onChange:Y=>I(Y.target.value),placeholder:"Search heroes or roles...",className:"w-full px-4 py-2 pl-10 bg-gray-700 border border-gray-600 rounded-lg"}),l.jsx(DQe,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm whitespace-nowrap",children:"Max Complexity:"}),l.jsxs("select",{value:T,onChange:Y=>L(Number(Y.target.value)),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"1",children:"1"}),l.jsx("option",{value:"2",children:"2"}),l.jsx("option",{value:"3",children:"3"}),l.jsx("option",{value:"4",children:"4"})]})]})]}),l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:aA().map(Y=>l.jsx("button",{onClick:()=>X(Y),className:`px-3 py-1 text-sm rounded ${j.includes(Y)?"bg-blue-700 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:Y},Y))}),l.jsxs("div",{className:"mt-3 border-t border-gray-600 pt-3 flex items-center",children:[l.jsx("span",{className:"text-sm mr-2",children:"Sort by:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>re("name"),className:`px-3 py-1 text-sm rounded flex items-center ${P==="name"?"bg-blue-700 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:[l.jsx("span",{children:"Name"}),P==="name"&&(Q==="asc"?l.jsx(Y0,{size:14,className:"ml-1"}):l.jsx(X0,{size:14,className:"ml-1"}))]}),l.jsxs("button",{onClick:()=>re("complexity"),className:`px-3 py-1 text-sm rounded flex items-center ${P==="complexity"?"bg-blue-700 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:[l.jsx("span",{children:"Complexity"}),P==="complexity"&&(Q==="asc"?l.jsx(Y0,{size:14,className:"ml-1"}):l.jsx(X0,{size:14,className:"ml-1"}))]})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[Ie.map(Y=>l.jsxs("div",{onClick:()=>D(Y),className:"bg-gray-700 hover:bg-gray-600 rounded-lg p-3 cursor-pointer transition-colors flex flex-col items-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full overflow-hidden mb-2",children:l.jsx("img",{src:Y.icon,alt:Y.name,className:"w-full h-full object-cover",onError:ee=>{ee.target.src="https://via.placeholder.com/64?text=Hero"}})}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"font-medium",children:Y.name}),l.jsx("div",{className:"text-xs text-gray-400",children:Y.roles.join("  ")}),l.jsx("div",{className:"text-xs",children:[...Array(Y.complexity)].map((ee,ae)=>l.jsx("span",{className:"text-yellow-500",children:""},ae))})]})]},Y.id)),Ie.length===0&&l.jsx("div",{className:"col-span-full text-center p-8 text-gray-400",children:"No heroes match your search criteria. Try adjusting your filters."})]})})]})})]})},DQe=({size:e,className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("path",{d:"m21 21-4.3-4.3"})]}),RQe=({size:e})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M18 6 6 18"}),l.jsx("path",{d:"m6 6 12 12"})]}),$Qe=({players:e,playerStats:n,statsErrors:r,enabledStats:s,onStatsChange:a,onResetPlayerStats:i,onResetAllStats:o})=>{const c=e.map((u,h)=>({player:u,index:h})).filter(({player:u})=>u.team===ie.Titans),A=e.map((u,h)=>({player:u,index:h})).filter(({player:u})=>u.team===ie.Atlanteans);return l.jsxs("div",{className:"space-y-6",children:[e.length>0&&o&&l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{type:"button",onClick:o,className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg flex items-center text-sm transition-colors",children:[l.jsx(ta,{size:16,className:"mr-2"}),"Reset All Stats"]})}),c.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"text-lg font-medium flex items-center text-blue-300",children:[l.jsx(Mt,{size:18,className:"mr-2"}),"Titans (",c.length," players)"]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:c.map(({player:u,index:h})=>l.jsx(PN,{player:u,playerIndex:h,stats:n.get(h),errors:r.get(h),enabledStats:s,onStatsChange:d=>a(h,d),onResetStats:i},h))})]}),A.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"text-lg font-medium flex items-center text-red-300",children:[l.jsx(Mt,{size:18,className:"mr-2"}),"Atlanteans (",A.length," players)"]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:A.map(({player:u,index:h})=>l.jsx(PN,{player:u,playerIndex:h,stats:n.get(h),errors:r.get(h),enabledStats:s,onStatsChange:d=>a(h,d),onResetStats:i},h))})]}),e.length===0&&l.jsxs("div",{className:"text-center text-gray-400 py-8",children:[l.jsx(St,{size:48,className:"mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"Add players to both teams to enter statistics"})]})]})},PN=({player:e,playerIndex:n,onStatsChange:r,stats:s,errors:a=[],enabledStats:i,onResetStats:o})=>{const c=s||{},A=(g,m)=>{const y={...c,[g]:m};r(y)},u=Object.values(i).some(Boolean),h=Object.values(i).filter(Boolean).length,d=e.team===ie.Titans?"border-blue-500":"border-red-500",f=e.team===ie.Titans?"bg-blue-900/20":"bg-red-900/20";return l.jsxs("div",{className:`bg-gray-800 rounded-lg p-4 border-2 ${d} ${f}`,children:[l.jsxs("div",{className:"flex items-center mb-4 pb-3 border-b border-gray-600",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-lg",children:e.name||"Unnamed Player"}),l.jsxs("div",{className:"text-sm text-gray-300 flex items-center",children:[l.jsx(Mt,{size:14,className:"mr-1"}),e.heroName||"No Hero Selected"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[o&&l.jsxs("button",{type:"button",onClick:()=>o(n),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded text-xs flex items-center transition-colors",title:"Reset this player's stats",children:[l.jsx(ta,{size:12,className:"mr-1"}),"Reset"]}),a.length>0&&l.jsx("div",{className:"text-red-400 text-sm",title:a.join(", "),children:l.jsx(iA,{size:16})})]})]}),u?l.jsxs("div",{className:`grid gap-4 ${h<=3?`grid-cols-${h}`:"grid-cols-3"}`,children:[i.kills&&l.jsx(oc,{label:"Kills",value:c.kills??0,onChange:g=>A("kills",g),min:0,max:50,enabled:!0,icon:l.jsx(J3,{size:14})}),i.deaths&&l.jsx(oc,{label:"Deaths",value:c.deaths??0,onChange:g=>A("deaths",g),min:0,max:20,enabled:!0,icon:l.jsx(Wb,{size:14})}),i.assists&&l.jsx(oc,{label:"Assists",value:c.assists??0,onChange:g=>A("assists",g),min:0,max:100,enabled:!0,icon:l.jsx(X3,{size:14})}),i.goldEarned&&l.jsx(oc,{label:"Gold",value:c.goldEarned??0,onChange:g=>A("goldEarned",g),min:0,max:1e4,enabled:!0,icon:l.jsx(ea,{size:14})}),i.minionKills&&l.jsx(oc,{label:"Minions",value:c.minionKills??0,onChange:g=>A("minionKills",g),min:0,max:200,enabled:!0,icon:l.jsx(ng,{size:14})}),i.level&&l.jsx(oc,{label:"Level",value:c.level??1,onChange:g=>A("level",g),min:1,max:8,enabled:!0,icon:l.jsx(vl,{size:14})})]}):l.jsxs("div",{className:"text-center p-6 border border-dashed border-gray-600 rounded-lg text-gray-400",children:[l.jsx("p",{className:"text-sm",children:"No statistics selected for tracking"}),l.jsx("p",{className:"text-xs mt-1",children:"Enable stat categories above to start recording"})]}),a.length>0&&l.jsx("div",{className:"mt-3 space-y-1",children:a.map((g,m)=>l.jsxs("div",{className:"text-red-400 text-xs flex items-center",children:[l.jsx(iA,{size:12,className:"mr-1"}),g]},m))})]})},oc=({label:e,value:n,onChange:r,min:s=0,max:a=999,disabled:i=!1,icon:o,enabled:c=!0})=>{const A=n??0,u=()=>{A<a&&r(A+1)},h=()=>{A>s&&r(A-1)},d=f=>{const g=parseInt(f.target.value)||0;g>=s&&g<=a&&r(g)};return c?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[o&&l.jsx("span",{className:"mr-1",children:o}),l.jsx("span",{children:e})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{type:"button",onClick:h,disabled:i||A<=s,className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:l.jsx(ta,{size:14})}),l.jsx("input",{type:"number",value:A,onChange:d,disabled:i,min:s,max:a,className:"w-16 h-8 text-center bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white"}),l.jsx("button",{type:"button",onClick:u,disabled:i||A>=a,className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:l.jsx(ns,{size:14})})]})]}):l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o&&l.jsx("span",{className:"mr-1 opacity-50",children:o}),l.jsx("span",{children:e})]}),l.jsx("div",{className:"flex items-center justify-center w-16 h-8 bg-gray-800 border border-gray-600 rounded-lg text-gray-500 text-sm",children:"N/A"})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _w=function(e,n){return _w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},_w(e,n)};function ma(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");_w(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var Cw=function(){return Cw=Object.assign||function(n){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Cw.apply(this,arguments)};function gr(e,n,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(h){try{u(s.next(h))}catch(d){o(d)}}function A(h){try{u(s.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):a(h.value).then(c,A)}u((s=s.apply(e,n||[])).next())})}function ar(e,n){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,a,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(h){return A([u,h])}}function A(u){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=n.call(e,r)}catch(h){u=[6,h],a=0}finally{s=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function kf(e,n,r){if(r||arguments.length===2)for(var s=0,a=n.length,i;s<a;s++)(i||!(s in n))&&(i||(i=Array.prototype.slice.call(n,0,s)),i[s]=n[s]);return e.concat(i||n)}var ji=function(){function e(n,r,s,a){this.left=n,this.top=r,this.width=s,this.height=a}return e.prototype.add=function(n,r,s,a){return new e(this.left+n,this.top+r,this.width+s,this.height+a)},e.fromClientRect=function(n,r){return new e(r.left+n.windowBounds.left,r.top+n.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(n,r){var s=Array.from(r).find(function(a){return a.width!==0});return s?new e(s.left+n.windowBounds.left,s.top+n.windowBounds.top,s.width,s.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),zp=function(e,n){return ji.fromClientRect(e,n.getBoundingClientRect())},OQe=function(e){var n=e.body,r=e.documentElement;if(!n||!r)throw new Error("Unable to get document size");var s=Math.max(Math.max(n.scrollWidth,r.scrollWidth),Math.max(n.offsetWidth,r.offsetWidth),Math.max(n.clientWidth,r.clientWidth)),a=Math.max(Math.max(n.scrollHeight,r.scrollHeight),Math.max(n.offsetHeight,r.offsetHeight),Math.max(n.clientHeight,r.clientHeight));return new ji(0,0,s,a)},Kp=function(e){for(var n=[],r=0,s=e.length;r<s;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<s){var i=e.charCodeAt(r++);(i&64512)===56320?n.push(((a&1023)<<10)+(i&1023)+65536):(n.push(a),r--)}else n.push(a)}return n},fn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var s=[],a=-1,i="";++a<r;){var o=e[a];o<=65535?s.push(o):(o-=65536,s.push((o>>10)+55296,o%1024+56320)),(a+1===r||s.length>16384)&&(i+=String.fromCharCode.apply(String,s),s.length=0)}return i},MN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",LQe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var jf=0;jf<MN.length;jf++)LQe[MN.charCodeAt(jf)]=jf;var QN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Nf=0;Nf<QN.length;Nf++)Uu[QN.charCodeAt(Nf)]=Nf;var HQe=function(e){var n=e.length*.75,r=e.length,s,a=0,i,o,c,A;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),h=Array.isArray(u)?u:new Uint8Array(u);for(s=0;s<r;s+=4)i=Uu[e.charCodeAt(s)],o=Uu[e.charCodeAt(s+1)],c=Uu[e.charCodeAt(s+2)],A=Uu[e.charCodeAt(s+3)],h[a++]=i<<2|o>>4,h[a++]=(o&15)<<4|c>>2,h[a++]=(c&3)<<6|A&63;return u},zQe=function(e){for(var n=e.length,r=[],s=0;s<n;s+=2)r.push(e[s+1]<<8|e[s]);return r},KQe=function(e){for(var n=e.length,r=[],s=0;s<n;s+=4)r.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return r},dl=5,wC=6+5,Nv=2,GQe=wC-dl,_Q=65536>>dl,WQe=1<<dl,Ev=WQe-1,VQe=1024>>dl,qQe=_Q+VQe,XQe=qQe,YQe=32,JQe=XQe+YQe,ZQe=65536>>wC,eDe=1<<GQe,tDe=eDe-1,DN=function(e,n,r){return e.slice?e.slice(n,r):new Uint16Array(Array.prototype.slice.call(e,n,r))},nDe=function(e,n,r){return e.slice?e.slice(n,r):new Uint32Array(Array.prototype.slice.call(e,n,r))},rDe=function(e,n){var r=HQe(e),s=Array.isArray(r)?KQe(r):new Uint32Array(r),a=Array.isArray(r)?zQe(r):new Uint16Array(r),i=24,o=DN(a,i/2,s[4]/2),c=s[5]===2?DN(a,(i+s[4])/2):nDe(s,Math.ceil((i+s[4])/4));return new sDe(s[0],s[1],s[2],s[3],o,c)},sDe=function(){function e(n,r,s,a,i,o){this.initialValue=n,this.errorValue=r,this.highStart=s,this.highValueIndex=a,this.index=i,this.data=o}return e.prototype.get=function(n){var r;if(n>=0){if(n<55296||n>56319&&n<=65535)return r=this.index[n>>dl],r=(r<<Nv)+(n&Ev),this.data[r];if(n<=65535)return r=this.index[_Q+(n-55296>>dl)],r=(r<<Nv)+(n&Ev),this.data[r];if(n<this.highStart)return r=JQe-ZQe+(n>>wC),r=this.index[r],r+=n>>dl&tDe,r=this.index[r],r=(r<<Nv)+(n&Ev),this.data[r];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),RN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",aDe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ef=0;Ef<RN.length;Ef++)aDe[RN.charCodeAt(Ef)]=Ef;var iDe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",$N=50,oDe=1,CQ=2,BQ=3,lDe=4,cDe=5,ON=7,SQ=8,LN=9,to=10,Bw=11,HN=12,Sw=13,ADe=14,Pu=15,kw=16,Tf=17,mu=18,uDe=19,zN=20,jw=21,pu=22,Tv=23,lc=24,Xr=25,Mu=26,Qu=27,cc=28,dDe=29,qo=30,hDe=31,Ff=32,If=33,Nw=34,Ew=35,Tw=36,Xd=37,Fw=38,b0=39,_0=40,Fv=41,kQ=42,fDe=43,gDe=[9001,65288],jQ="!",yt="",Uf="",Iw=rDe(iDe),qa=[qo,Tw],Uw=[oDe,CQ,BQ,cDe],NQ=[to,SQ],KN=[Qu,Mu],mDe=Uw.concat(NQ),GN=[Fw,b0,_0,Nw,Ew],pDe=[Pu,Sw],yDe=function(e,n){n===void 0&&(n="strict");var r=[],s=[],a=[];return e.forEach(function(i,o){var c=Iw.get(i);if(c>$N?(a.push(!0),c-=$N):a.push(!1),["normal","auto","loose"].indexOf(n)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return s.push(o),r.push(kw);if(c===lDe||c===Bw){if(o===0)return s.push(o),r.push(qo);var A=r[o-1];return mDe.indexOf(A)===-1?(s.push(s[o-1]),r.push(A)):(s.push(o),r.push(qo))}if(s.push(o),c===hDe)return r.push(n==="strict"?jw:Xd);if(c===kQ||c===dDe)return r.push(qo);if(c===fDe)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(Xd):r.push(qo);r.push(c)}),[s,r,a]},Iv=function(e,n,r,s){var a=s[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var i=r;i<=s.length;){i++;var o=s[i];if(o===n)return!0;if(o!==to)break}if(a===to)for(var i=r;i>0;){i--;var c=s[i];if(Array.isArray(e)?e.indexOf(c)!==-1:e===c)for(var A=r;A<=s.length;){A++;var o=s[A];if(o===n)return!0;if(o!==to)break}if(c!==to)break}return!1},WN=function(e,n){for(var r=e;r>=0;){var s=n[r];if(s===to)r--;else return s}return 0},vDe=function(e,n,r,s,a){if(r[s]===0)return yt;var i=s-1;if(Array.isArray(a)&&a[i]===!0)return yt;var o=i-1,c=i+1,A=n[i],u=o>=0?n[o]:0,h=n[c];if(A===CQ&&h===BQ)return yt;if(Uw.indexOf(A)!==-1)return jQ;if(Uw.indexOf(h)!==-1||NQ.indexOf(h)!==-1)return yt;if(WN(i,n)===SQ)return Uf;if(Iw.get(e[i])===Bw||(A===Ff||A===If)&&Iw.get(e[c])===Bw||A===ON||h===ON||A===LN||[to,Sw,Pu].indexOf(A)===-1&&h===LN||[Tf,mu,uDe,lc,cc].indexOf(h)!==-1||WN(i,n)===pu||Iv(Tv,pu,i,n)||Iv([Tf,mu],jw,i,n)||Iv(HN,HN,i,n))return yt;if(A===to)return Uf;if(A===Tv||h===Tv)return yt;if(h===kw||A===kw)return Uf;if([Sw,Pu,jw].indexOf(h)!==-1||A===ADe||u===Tw&&pDe.indexOf(A)!==-1||A===cc&&h===Tw||h===zN||qa.indexOf(h)!==-1&&A===Xr||qa.indexOf(A)!==-1&&h===Xr||A===Qu&&[Xd,Ff,If].indexOf(h)!==-1||[Xd,Ff,If].indexOf(A)!==-1&&h===Mu||qa.indexOf(A)!==-1&&KN.indexOf(h)!==-1||KN.indexOf(A)!==-1&&qa.indexOf(h)!==-1||[Qu,Mu].indexOf(A)!==-1&&(h===Xr||[pu,Pu].indexOf(h)!==-1&&n[c+1]===Xr)||[pu,Pu].indexOf(A)!==-1&&h===Xr||A===Xr&&[Xr,cc,lc].indexOf(h)!==-1)return yt;if([Xr,cc,lc,Tf,mu].indexOf(h)!==-1)for(var d=i;d>=0;){var f=n[d];if(f===Xr)return yt;if([cc,lc].indexOf(f)!==-1)d--;else break}if([Qu,Mu].indexOf(h)!==-1)for(var d=[Tf,mu].indexOf(A)!==-1?o:i;d>=0;){var f=n[d];if(f===Xr)return yt;if([cc,lc].indexOf(f)!==-1)d--;else break}if(Fw===A&&[Fw,b0,Nw,Ew].indexOf(h)!==-1||[b0,Nw].indexOf(A)!==-1&&[b0,_0].indexOf(h)!==-1||[_0,Ew].indexOf(A)!==-1&&h===_0||GN.indexOf(A)!==-1&&[zN,Mu].indexOf(h)!==-1||GN.indexOf(h)!==-1&&A===Qu||qa.indexOf(A)!==-1&&qa.indexOf(h)!==-1||A===lc&&qa.indexOf(h)!==-1||qa.concat(Xr).indexOf(A)!==-1&&h===pu&&gDe.indexOf(e[c])===-1||qa.concat(Xr).indexOf(h)!==-1&&A===mu)return yt;if(A===Fv&&h===Fv){for(var g=r[i],m=1;g>0&&(g--,n[g]===Fv);)m++;if(m%2!==0)return yt}return A===Ff&&h===If?yt:Uf},xDe=function(e,n){n||(n={lineBreak:"normal",wordBreak:"normal"});var r=yDe(e,n.lineBreak),s=r[0],a=r[1],i=r[2];(n.wordBreak==="break-all"||n.wordBreak==="break-word")&&(a=a.map(function(c){return[Xr,qo,kQ].indexOf(c)!==-1?Xd:c}));var o=n.wordBreak==="keep-all"?i.map(function(c,A){return c&&e[A]>=19968&&e[A]<=40959}):void 0;return[s,a,o]},wDe=function(){function e(n,r,s,a){this.codePoints=n,this.required=r===jQ,this.start=s,this.end=a}return e.prototype.slice=function(){return fn.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),bDe=function(e,n){var r=Kp(e),s=xDe(r,n),a=s[0],i=s[1],o=s[2],c=r.length,A=0,u=0;return{next:function(){if(u>=c)return{done:!0,value:null};for(var h=yt;u<c&&(h=vDe(r,i,a,++u,o))===yt;);if(h!==yt||u===c){var d=new wDe(r,h,A,u);return A=u,{value:d,done:!1}}return{done:!0,value:null}}}},_De=1,CDe=2,Qh=4,VN=8,nm=10,qN=47,rd=92,BDe=9,SDe=32,Pf=34,yu=61,kDe=35,jDe=36,NDe=37,Mf=39,Qf=40,vu=41,EDe=95,Ur=45,TDe=33,FDe=60,IDe=62,UDe=64,PDe=91,MDe=93,QDe=61,DDe=123,Df=63,RDe=125,XN=124,$De=126,ODe=128,YN=65533,Uv=42,sl=43,LDe=44,HDe=58,zDe=59,Yd=46,KDe=0,GDe=8,WDe=11,VDe=14,qDe=31,XDe=127,ba=-1,EQ=48,TQ=97,FQ=101,YDe=102,JDe=117,ZDe=122,IQ=65,UQ=69,PQ=70,e7e=85,t7e=90,ir=function(e){return e>=EQ&&e<=57},n7e=function(e){return e>=55296&&e<=57343},Ac=function(e){return ir(e)||e>=IQ&&e<=PQ||e>=TQ&&e<=YDe},r7e=function(e){return e>=TQ&&e<=ZDe},s7e=function(e){return e>=IQ&&e<=t7e},a7e=function(e){return r7e(e)||s7e(e)},i7e=function(e){return e>=ODe},Rf=function(e){return e===nm||e===BDe||e===SDe},rm=function(e){return a7e(e)||i7e(e)||e===EDe},JN=function(e){return rm(e)||ir(e)||e===Ur},o7e=function(e){return e>=KDe&&e<=GDe||e===WDe||e>=VDe&&e<=qDe||e===XDe},Wi=function(e,n){return e!==rd?!1:n!==nm},$f=function(e,n,r){return e===Ur?rm(n)||Wi(n,r):rm(e)?!0:!!(e===rd&&Wi(e,n))},Pv=function(e,n,r){return e===sl||e===Ur?ir(n)?!0:n===Yd&&ir(r):ir(e===Yd?n:e)},l7e=function(e){var n=0,r=1;(e[n]===sl||e[n]===Ur)&&(e[n]===Ur&&(r=-1),n++);for(var s=[];ir(e[n]);)s.push(e[n++]);var a=s.length?parseInt(fn.apply(void 0,s),10):0;e[n]===Yd&&n++;for(var i=[];ir(e[n]);)i.push(e[n++]);var o=i.length,c=o?parseInt(fn.apply(void 0,i),10):0;(e[n]===UQ||e[n]===FQ)&&n++;var A=1;(e[n]===sl||e[n]===Ur)&&(e[n]===Ur&&(A=-1),n++);for(var u=[];ir(e[n]);)u.push(e[n++]);var h=u.length?parseInt(fn.apply(void 0,u),10):0;return r*(a+c*Math.pow(10,-o))*Math.pow(10,A*h)},c7e={type:2},A7e={type:3},u7e={type:4},d7e={type:13},h7e={type:8},f7e={type:21},g7e={type:9},m7e={type:10},p7e={type:11},y7e={type:12},v7e={type:14},Of={type:23},x7e={type:1},w7e={type:25},b7e={type:24},_7e={type:26},C7e={type:27},B7e={type:28},S7e={type:29},k7e={type:31},Pw={type:32},MQ=function(){function e(){this._value=[]}return e.prototype.write=function(n){this._value=this._value.concat(Kp(n))},e.prototype.read=function(){for(var n=[],r=this.consumeToken();r!==Pw;)n.push(r),r=this.consumeToken();return n},e.prototype.consumeToken=function(){var n=this.consumeCodePoint();switch(n){case Pf:return this.consumeStringToken(Pf);case kDe:var r=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(JN(r)||Wi(s,a)){var i=$f(r,s,a)?CDe:_De,o=this.consumeName();return{type:5,value:o,flags:i}}break;case jDe:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),d7e;break;case Mf:return this.consumeStringToken(Mf);case Qf:return c7e;case vu:return A7e;case Uv:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),v7e;break;case sl:if(Pv(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case LDe:return u7e;case Ur:var c=n,A=this.peekCodePoint(0),u=this.peekCodePoint(1);if(Pv(c,A,u))return this.reconsumeCodePoint(n),this.consumeNumericToken();if($f(c,A,u))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();if(A===Ur&&u===IDe)return this.consumeCodePoint(),this.consumeCodePoint(),b7e;break;case Yd:if(Pv(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case qN:if(this.peekCodePoint(0)===Uv)for(this.consumeCodePoint();;){var h=this.consumeCodePoint();if(h===Uv&&(h=this.consumeCodePoint(),h===qN))return this.consumeToken();if(h===ba)return this.consumeToken()}break;case HDe:return _7e;case zDe:return C7e;case FDe:if(this.peekCodePoint(0)===TDe&&this.peekCodePoint(1)===Ur&&this.peekCodePoint(2)===Ur)return this.consumeCodePoint(),this.consumeCodePoint(),w7e;break;case UDe:var d=this.peekCodePoint(0),f=this.peekCodePoint(1),g=this.peekCodePoint(2);if($f(d,f,g)){var o=this.consumeName();return{type:7,value:o}}break;case PDe:return B7e;case rd:if(Wi(n,this.peekCodePoint(0)))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();break;case MDe:return S7e;case QDe:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),h7e;break;case DDe:return p7e;case RDe:return y7e;case JDe:case e7e:var m=this.peekCodePoint(0),y=this.peekCodePoint(1);return m===sl&&(Ac(y)||y===Df)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(n),this.consumeIdentLikeToken();case XN:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),g7e;if(this.peekCodePoint(0)===XN)return this.consumeCodePoint(),f7e;break;case $De:if(this.peekCodePoint(0)===yu)return this.consumeCodePoint(),m7e;break;case ba:return Pw}return Rf(n)?(this.consumeWhiteSpace(),k7e):ir(n)?(this.reconsumeCodePoint(n),this.consumeNumericToken()):rm(n)?(this.reconsumeCodePoint(n),this.consumeIdentLikeToken()):{type:6,value:fn(n)}},e.prototype.consumeCodePoint=function(){var n=this._value.shift();return typeof n>"u"?-1:n},e.prototype.reconsumeCodePoint=function(n){this._value.unshift(n)},e.prototype.peekCodePoint=function(n){return n>=this._value.length?-1:this._value[n]},e.prototype.consumeUnicodeRangeToken=function(){for(var n=[],r=this.consumeCodePoint();Ac(r)&&n.length<6;)n.push(r),r=this.consumeCodePoint();for(var s=!1;r===Df&&n.length<6;)n.push(r),r=this.consumeCodePoint(),s=!0;if(s){var a=parseInt(fn.apply(void 0,n.map(function(A){return A===Df?EQ:A})),16),i=parseInt(fn.apply(void 0,n.map(function(A){return A===Df?PQ:A})),16);return{type:30,start:a,end:i}}var o=parseInt(fn.apply(void 0,n),16);if(this.peekCodePoint(0)===Ur&&Ac(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var c=[];Ac(r)&&c.length<6;)c.push(r),r=this.consumeCodePoint();var i=parseInt(fn.apply(void 0,c),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var n=this.consumeName();return n.toLowerCase()==="url"&&this.peekCodePoint(0)===Qf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Qf?(this.consumeCodePoint(),{type:19,value:n}):{type:20,value:n}},e.prototype.consumeUrlToken=function(){var n=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ba)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Mf||r===Pf){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ba||this.peekCodePoint(0)===vu)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),Of)}for(;;){var a=this.consumeCodePoint();if(a===ba||a===vu)return{type:22,value:fn.apply(void 0,n)};if(Rf(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ba||this.peekCodePoint(0)===vu?(this.consumeCodePoint(),{type:22,value:fn.apply(void 0,n)}):(this.consumeBadUrlRemnants(),Of);if(a===Pf||a===Mf||a===Qf||o7e(a))return this.consumeBadUrlRemnants(),Of;if(a===rd)if(Wi(a,this.peekCodePoint(0)))n.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Of;else n.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;Rf(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var n=this.consumeCodePoint();if(n===vu||n===ba)return;Wi(n,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(n){for(var r=5e4,s="";n>0;){var a=Math.min(r,n);s+=fn.apply(void 0,this._value.splice(0,a)),n-=a}return this._value.shift(),s},e.prototype.consumeStringToken=function(n){var r="",s=0;do{var a=this._value[s];if(a===ba||a===void 0||a===n)return r+=this.consumeStringSlice(s),{type:0,value:r};if(a===nm)return this._value.splice(0,s),x7e;if(a===rd){var i=this._value[s+1];i!==ba&&i!==void 0&&(i===nm?(r+=this.consumeStringSlice(s),s=-1,this._value.shift()):Wi(a,i)&&(r+=this.consumeStringSlice(s),r+=fn(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},e.prototype.consumeNumber=function(){var n=[],r=Qh,s=this.peekCodePoint(0);for((s===sl||s===Ur)&&n.push(this.consumeCodePoint());ir(this.peekCodePoint(0));)n.push(this.consumeCodePoint());s=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(s===Yd&&ir(a))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),r=VN;ir(this.peekCodePoint(0));)n.push(this.consumeCodePoint());s=this.peekCodePoint(0),a=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((s===UQ||s===FQ)&&((a===sl||a===Ur)&&ir(i)||ir(a)))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),r=VN;ir(this.peekCodePoint(0));)n.push(this.consumeCodePoint());return[l7e(n),r]},e.prototype.consumeNumericToken=function(){var n=this.consumeNumber(),r=n[0],s=n[1],a=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if($f(a,i,o)){var c=this.consumeName();return{type:15,number:r,flags:s,unit:c}}return a===NDe?(this.consumeCodePoint(),{type:16,number:r,flags:s}):{type:17,number:r,flags:s}},e.prototype.consumeEscapedCodePoint=function(){var n=this.consumeCodePoint();if(Ac(n)){for(var r=fn(n);Ac(this.peekCodePoint(0))&&r.length<6;)r+=fn(this.consumeCodePoint());Rf(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(r,16);return s===0||n7e(s)||s>1114111?YN:s}return n===ba?YN:n},e.prototype.consumeName=function(){for(var n="";;){var r=this.consumeCodePoint();if(JN(r))n+=fn(r);else if(Wi(r,this.peekCodePoint(0)))n+=fn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),n}},e}(),QQ=function(){function e(n){this._tokens=n}return e.create=function(n){var r=new MQ;return r.write(n),new e(r.read())},e.parseValue=function(n){return e.create(n).parseComponentValue()},e.parseValues=function(n){return e.create(n).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var n=this.consumeToken();n.type===31;)n=this.consumeToken();if(n.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(n);var r=this.consumeComponentValue();do n=this.consumeToken();while(n.type===31);if(n.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var n=[];;){var r=this.consumeComponentValue();if(r.type===32)return n;n.push(r),n.push()}},e.prototype.consumeComponentValue=function(){var n=this.consumeToken();switch(n.type){case 11:case 28:case 2:return this.consumeSimpleBlock(n.type);case 19:return this.consumeFunction(n)}return n},e.prototype.consumeSimpleBlock=function(n){for(var r={type:n,values:[]},s=this.consumeToken();;){if(s.type===32||N7e(s,n))return r;this.reconsumeToken(s),r.values.push(this.consumeComponentValue()),s=this.consumeToken()}},e.prototype.consumeFunction=function(n){for(var r={name:n.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return r;this.reconsumeToken(s),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var n=this._tokens.shift();return typeof n>"u"?Pw:n},e.prototype.reconsumeToken=function(n){this._tokens.unshift(n)},e}(),Dh=function(e){return e.type===15},$A=function(e){return e.type===17},Tt=function(e){return e.type===20},j7e=function(e){return e.type===0},Mw=function(e,n){return Tt(e)&&e.value===n},DQ=function(e){return e.type!==31},bA=function(e){return e.type!==31&&e.type!==4},La=function(e){var n=[],r=[];return e.forEach(function(s){if(s.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");n.push(r),r=[];return}s.type!==31&&r.push(s)}),r.length&&n.push(r),n},N7e=function(e,n){return n===11&&e.type===12||n===28&&e.type===29?!0:n===2&&e.type===3},Bo=function(e){return e.type===17||e.type===15},yn=function(e){return e.type===16||Bo(e)},RQ=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Xn={type:17,number:0,flags:Qh},bC={type:16,number:50,flags:Qh},no={type:16,number:100,flags:Qh},Du=function(e,n,r){var s=e[0],a=e[1];return[Qt(s,n),Qt(typeof a<"u"?a:s,r)]},Qt=function(e,n){if(e.type===16)return e.number/100*n;if(Dh(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},$Q="deg",OQ="grad",LQ="rad",HQ="turn",Gp={name:"angle",parse:function(e,n){if(n.type===15)switch(n.unit){case $Q:return Math.PI*n.number/180;case OQ:return Math.PI/200*n.number;case LQ:return n.number;case HQ:return Math.PI*2*n.number}throw new Error("Unsupported angle type")}},zQ=function(e){return e.type===15&&(e.unit===$Q||e.unit===OQ||e.unit===LQ||e.unit===HQ)},KQ=function(e){var n=e.filter(Tt).map(function(r){return r.value}).join(" ");switch(n){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Xn,Xn];case"to top":case"bottom":return Ns(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Xn,no];case"to right":case"left":return Ns(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[no,no];case"to bottom":case"top":return Ns(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[no,Xn];case"to left":case"right":return Ns(270)}return 0},Ns=function(e){return Math.PI*e/180},mo={name:"color",parse:function(e,n){if(n.type===18){var r=E7e[n.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+n.name+'"');return r(e,n.values)}if(n.type===5){if(n.value.length===3){var s=n.value.substring(0,1),a=n.value.substring(1,2),i=n.value.substring(2,3);return ro(parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16),1)}if(n.value.length===4){var s=n.value.substring(0,1),a=n.value.substring(1,2),i=n.value.substring(2,3),o=n.value.substring(3,4);return ro(parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(n.value.length===6){var s=n.value.substring(0,2),a=n.value.substring(2,4),i=n.value.substring(4,6);return ro(parseInt(s,16),parseInt(a,16),parseInt(i,16),1)}if(n.value.length===8){var s=n.value.substring(0,2),a=n.value.substring(2,4),i=n.value.substring(4,6),o=n.value.substring(6,8);return ro(parseInt(s,16),parseInt(a,16),parseInt(i,16),parseInt(o,16)/255)}}if(n.type===20){var c=pi[n.value.toUpperCase()];if(typeof c<"u")return c}return pi.TRANSPARENT}},po=function(e){return(255&e)===0},Fn=function(e){var n=255&e,r=255&e>>8,s=255&e>>16,a=255&e>>24;return n<255?"rgba("+a+","+s+","+r+","+n/255+")":"rgb("+a+","+s+","+r+")"},ro=function(e,n,r,s){return(e<<24|n<<16|r<<8|Math.round(s*255)<<0)>>>0},ZN=function(e,n){if(e.type===17)return e.number;if(e.type===16){var r=n===3?1:255;return n===3?e.number/100*r:Math.round(e.number/100*r)}return 0},e4=function(e,n){var r=n.filter(bA);if(r.length===3){var s=r.map(ZN),a=s[0],i=s[1],o=s[2];return ro(a,i,o,1)}if(r.length===4){var c=r.map(ZN),a=c[0],i=c[1],o=c[2],A=c[3];return ro(a,i,o,A)}return 0};function Mv(e,n,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(n-e)*r*6+e:r<1/2?n:r<2/3?(n-e)*6*(2/3-r)+e:e}var t4=function(e,n){var r=n.filter(bA),s=r[0],a=r[1],i=r[2],o=r[3],c=(s.type===17?Ns(s.number):Gp.parse(e,s))/(Math.PI*2),A=yn(a)?a.number/100:0,u=yn(i)?i.number/100:0,h=typeof o<"u"&&yn(o)?Qt(o,1):1;if(A===0)return ro(u*255,u*255,u*255,1);var d=u<=.5?u*(A+1):u+A-u*A,f=u*2-d,g=Mv(f,d,c+1/3),m=Mv(f,d,c),y=Mv(f,d,c-1/3);return ro(g*255,m*255,y*255,h)},E7e={hsl:t4,hsla:t4,rgb:e4,rgba:e4},sd=function(e,n){return mo.parse(e,QQ.create(n).parseComponentValue())},pi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},T7e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(r){if(Tt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},F7e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Wp=function(e,n){var r=mo.parse(e,n[0]),s=n[1];return s&&yn(s)?{color:r,stop:s}:{color:r,stop:null}},n4=function(e,n){var r=e[0],s=e[e.length-1];r.stop===null&&(r.stop=Xn),s.stop===null&&(s.stop=no);for(var a=[],i=0,o=0;o<e.length;o++){var c=e[o].stop;if(c!==null){var A=Qt(c,n);A>i?a.push(A):a.push(i),i=A}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var h=a[o];if(h===null)u===null&&(u=o);else if(u!==null){for(var d=o-u,f=a[u-1],g=(h-f)/(d+1),m=1;m<=d;m++)a[u+m-1]=g*m;u=null}}return e.map(function(y,v){var p=y.color;return{color:p,stop:Math.max(Math.min(1,a[v]/n),0)}})},I7e=function(e,n,r){var s=n/2,a=r/2,i=Qt(e[0],n)-s,o=a-Qt(e[1],r);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},U7e=function(e,n,r){var s=typeof e=="number"?e:I7e(e,n,r),a=Math.abs(n*Math.sin(s))+Math.abs(r*Math.cos(s)),i=n/2,o=r/2,c=a/2,A=Math.sin(s-Math.PI/2)*c,u=Math.cos(s-Math.PI/2)*c;return[a,i-u,i+u,o-A,o+A]},Ws=function(e,n){return Math.sqrt(e*e+n*n)},r4=function(e,n,r,s,a){var i=[[0,0],[0,n],[e,0],[e,n]];return i.reduce(function(o,c){var A=c[0],u=c[1],h=Ws(r-A,s-u);return(a?h<o.optimumDistance:h>o.optimumDistance)?{optimumCorner:c,optimumDistance:h}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},P7e=function(e,n,r,s,a){var i=0,o=0;switch(e.size){case 0:e.shape===0?i=o=Math.min(Math.abs(n),Math.abs(n-s),Math.abs(r),Math.abs(r-a)):e.shape===1&&(i=Math.min(Math.abs(n),Math.abs(n-s)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)i=o=Math.min(Ws(n,r),Ws(n,r-a),Ws(n-s,r),Ws(n-s,r-a));else if(e.shape===1){var c=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(n),Math.abs(n-s)),A=r4(s,a,n,r,!0),u=A[0],h=A[1];i=Ws(u-n,(h-r)/c),o=c*i}break;case 1:e.shape===0?i=o=Math.max(Math.abs(n),Math.abs(n-s),Math.abs(r),Math.abs(r-a)):e.shape===1&&(i=Math.max(Math.abs(n),Math.abs(n-s)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)i=o=Math.max(Ws(n,r),Ws(n,r-a),Ws(n-s,r),Ws(n-s,r-a));else if(e.shape===1){var c=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(n),Math.abs(n-s)),d=r4(s,a,n,r,!1),u=d[0],h=d[1];i=Ws(u-n,(h-r)/c),o=c*i}break}return Array.isArray(e.size)&&(i=Qt(e.size[0],s),o=e.size.length===2?Qt(e.size[1],a):i),[i,o]},M7e=function(e,n){var r=Ns(180),s=[];return La(n).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&o.value==="to"){r=KQ(a);return}else if(zQ(o)){r=Gp.parse(e,o);return}}var c=Wp(e,a);s.push(c)}),{angle:r,stops:s,type:1}},Lf=function(e,n){var r=Ns(180),s=[];return La(n).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=KQ(a);return}else if(zQ(o)){r=(Gp.parse(e,o)+Ns(270))%Ns(360);return}}var c=Wp(e,a);s.push(c)}),{angle:r,stops:s,type:1}},Q7e=function(e,n){var r=Ns(180),s=[],a=1,i=0,o=3,c=[];return La(n).forEach(function(A,u){var h=A[0];if(u===0){if(Tt(h)&&h.value==="linear"){a=1;return}else if(Tt(h)&&h.value==="radial"){a=2;return}}if(h.type===18){if(h.name==="from"){var d=mo.parse(e,h.values[0]);s.push({stop:Xn,color:d})}else if(h.name==="to"){var d=mo.parse(e,h.values[0]);s.push({stop:no,color:d})}else if(h.name==="color-stop"){var f=h.values.filter(bA);if(f.length===2){var d=mo.parse(e,f[1]),g=f[0];$A(g)&&s.push({stop:{type:16,number:g.number*100,flags:g.flags},color:d})}}}}),a===1?{angle:(r+Ns(180))%Ns(360),stops:s,type:a}:{size:o,shape:i,stops:s,position:c,type:a}},GQ="closest-side",WQ="farthest-side",VQ="closest-corner",qQ="farthest-corner",XQ="circle",YQ="ellipse",JQ="cover",ZQ="contain",D7e=function(e,n){var r=0,s=3,a=[],i=[];return La(n).forEach(function(o,c){var A=!0;if(c===0){var u=!1;A=o.reduce(function(d,f){if(u)if(Tt(f))switch(f.value){case"center":return i.push(bC),d;case"top":case"left":return i.push(Xn),d;case"right":case"bottom":return i.push(no),d}else(yn(f)||Bo(f))&&i.push(f);else if(Tt(f))switch(f.value){case XQ:return r=0,!1;case YQ:return r=1,!1;case"at":return u=!0,!1;case GQ:return s=0,!1;case JQ:case WQ:return s=1,!1;case ZQ:case VQ:return s=2,!1;case qQ:return s=3,!1}else if(Bo(f)||yn(f))return Array.isArray(s)||(s=[]),s.push(f),!1;return d},A)}if(A){var h=Wp(e,o);a.push(h)}}),{size:s,shape:r,stops:a,position:i,type:2}},Hf=function(e,n){var r=0,s=3,a=[],i=[];return La(n).forEach(function(o,c){var A=!0;if(c===0?A=o.reduce(function(h,d){if(Tt(d))switch(d.value){case"center":return i.push(bC),!1;case"top":case"left":return i.push(Xn),!1;case"right":case"bottom":return i.push(no),!1}else if(yn(d)||Bo(d))return i.push(d),!1;return h},A):c===1&&(A=o.reduce(function(h,d){if(Tt(d))switch(d.value){case XQ:return r=0,!1;case YQ:return r=1,!1;case ZQ:case GQ:return s=0,!1;case WQ:return s=1,!1;case VQ:return s=2,!1;case JQ:case qQ:return s=3,!1}else if(Bo(d)||yn(d))return Array.isArray(s)||(s=[]),s.push(d),!1;return h},A)),A){var u=Wp(e,o);a.push(u)}}),{size:s,shape:r,stops:a,position:i,type:2}},R7e=function(e){return e.type===1},$7e=function(e){return e.type===2},_C={name:"image",parse:function(e,n){if(n.type===22){var r={url:n.value,type:0};return e.cache.addImage(n.value),r}if(n.type===18){var s=eD[n.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+n.name+'"');return s(e,n.values)}throw new Error("Unsupported image type "+n.type)}};function O7e(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!eD[e.name])}var eD={"linear-gradient":M7e,"-moz-linear-gradient":Lf,"-ms-linear-gradient":Lf,"-o-linear-gradient":Lf,"-webkit-linear-gradient":Lf,"radial-gradient":D7e,"-moz-radial-gradient":Hf,"-ms-radial-gradient":Hf,"-o-radial-gradient":Hf,"-webkit-radial-gradient":Hf,"-webkit-gradient":Q7e},L7e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var r=n[0];return r.type===20&&r.value==="none"?[]:n.filter(function(s){return bA(s)&&O7e(s)}).map(function(s){return _C.parse(e,s)})}},H7e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(r){if(Tt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},z7e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,n){return La(n).map(function(r){return r.filter(yn)}).map(RQ)}},K7e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,n){return La(n).map(function(r){return r.filter(Tt).map(function(s){return s.value}).join(" ")}).map(G7e)}},G7e=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Yc;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Yc||(Yc={}));var W7e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,n){return La(n).map(function(r){return r.filter(V7e)})}},V7e=function(e){return Tt(e)||yn(e)},Vp=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},q7e=Vp("top"),X7e=Vp("right"),Y7e=Vp("bottom"),J7e=Vp("left"),qp=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(n,r){return RQ(r.filter(yn))}}},Z7e=qp("top-left"),eRe=qp("top-right"),tRe=qp("bottom-right"),nRe=qp("bottom-left"),Xp=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(n,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},rRe=Xp("top"),sRe=Xp("right"),aRe=Xp("bottom"),iRe=Xp("left"),Yp=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(n,r){return Dh(r)?r.number:0}}},oRe=Yp("top"),lRe=Yp("right"),cRe=Yp("bottom"),ARe=Yp("left"),uRe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dRe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,n){switch(n){case"rtl":return 1;case"ltr":default:return 0}}},hRe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,n){return n.filter(Tt).reduce(function(r,s){return r|fRe(s.value)},0)}},fRe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gRe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},mRe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,n){return n.type===20&&n.value==="normal"?0:n.type===17||n.type===15?n.number:0}},sm;(function(e){e.NORMAL="normal",e.STRICT="strict"})(sm||(sm={}));var pRe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"strict":return sm.STRICT;case"normal":default:return sm.NORMAL}}},yRe={name:"line-height",initialValue:"normal",prefix:!1,type:4},s4=function(e,n){return Tt(e)&&e.value==="normal"?1.2*n:e.type===17?n*e.number:yn(e)?Qt(e,n):n},vRe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,n){return n.type===20&&n.value==="none"?null:_C.parse(e,n)}},xRe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,n){switch(n){case"inside":return 0;case"outside":default:return 1}}},Qw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Jp=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},wRe=Jp("top"),bRe=Jp("right"),_Re=Jp("bottom"),CRe=Jp("left"),BRe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,n){return n.filter(Tt).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},SRe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-word":return"break-word";case"normal":default:return"normal"}}},Zp=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},kRe=Zp("top"),jRe=Zp("right"),NRe=Zp("bottom"),ERe=Zp("left"),TRe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,n){switch(n){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},FRe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,n){switch(n){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},IRe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&Mw(n[0],"none")?[]:La(n).map(function(r){for(var s={color:pi.TRANSPARENT,offsetX:Xn,offsetY:Xn,blur:Xn},a=0,i=0;i<r.length;i++){var o=r[i];Bo(o)?(a===0?s.offsetX=o:a===1?s.offsetY=o:s.blur=o,a++):s.color=mo.parse(e,o)}return s})}},URe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},PRe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,n){if(n.type===20&&n.value==="none")return null;if(n.type===18){var r=DRe[n.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+n.name+'"');return r(n.values)}return null}},MRe=function(e){var n=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return n.length===6?n:null},QRe=function(e){var n=e.filter(function(A){return A.type===17}).map(function(A){return A.number}),r=n[0],s=n[1];n[2],n[3];var a=n[4],i=n[5];n[6],n[7],n[8],n[9],n[10],n[11];var o=n[12],c=n[13];return n[14],n[15],n.length===16?[r,s,a,i,o,c]:null},DRe={matrix:MRe,matrix3d:QRe},a4={type:16,number:50,flags:Qh},RRe=[a4,a4],$Re={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,n){var r=n.filter(yn);return r.length!==2?RRe:[r[0],r[1]]}},ORe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ad;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(ad||(ad={}));var LRe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-all":return ad.BREAK_ALL;case"keep-all":return ad.KEEP_ALL;case"normal":default:return ad.NORMAL}}},HRe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,n){if(n.type===20)return{auto:!0,order:0};if($A(n))return{auto:!1,order:n.number};throw new Error("Invalid z-index number parsed")}},tD={name:"time",parse:function(e,n){if(n.type===15)switch(n.unit.toLowerCase()){case"s":return 1e3*n.number;case"ms":return n.number}throw new Error("Unsupported time type")}},zRe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,n){return $A(n)?n.number:1}},KRe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},GRe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,n){return n.filter(Tt).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},WRe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,n){var r=[],s=[];return n.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:s.push(r.join(" ")),r.length=0;break}}),r.length&&s.push(r.join(" ")),s.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},VRe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},qRe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,n){if($A(n))return n.number;if(Tt(n))switch(n.value){case"bold":return 700;case"normal":default:return 400}return 400}},XRe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.filter(Tt).map(function(r){return r.value})}},YRe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Sn=function(e,n){return(e&n)!==0},JRe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var r=n[0];return r.type===20&&r.value==="none"?[]:n}},ZRe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var r=n[0];if(r.type===20&&r.value==="none")return null;for(var s=[],a=n.filter(DQ),i=0;i<a.length;i++){var o=a[i],c=a[i+1];if(o.type===20){var A=c&&$A(c)?c.number:1;s.push({counter:o.value,increment:A})}}return s}},e$e={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return[];for(var r=[],s=n.filter(DQ),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(Tt(i)&&i.value!=="none"){var c=o&&$A(o)?o.number:0;r.push({counter:i.value,reset:c})}}return r}},t$e={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,n){return n.filter(Dh).map(function(r){return tD.parse(e,r)})}},n$e={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var r=n[0];if(r.type===20&&r.value==="none")return null;var s=[],a=n.filter(j7e);if(a.length%2!==0)return null;for(var i=0;i<a.length;i+=2){var o=a[i].value,c=a[i+1].value;s.push({open:o,close:c})}return s}},i4=function(e,n,r){if(!e)return"";var s=e[Math.min(n,e.length-1)];return s?r?s.open:s.close:""},r$e={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&Mw(n[0],"none")?[]:La(n).map(function(r){for(var s={color:255,offsetX:Xn,offsetY:Xn,blur:Xn,spread:Xn,inset:!1},a=0,i=0;i<r.length;i++){var o=r[i];Mw(o,"inset")?s.inset=!0:Bo(o)?(a===0?s.offsetX=o:a===1?s.offsetY=o:a===2?s.blur=o:s.spread=o,a++):s.color=mo.parse(e,o)}return s})}},s$e={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,n){var r=[0,1,2],s=[];return n.filter(Tt).forEach(function(a){switch(a.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),r.forEach(function(a){s.indexOf(a)===-1&&s.push(a)}),s}},a$e={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},i$e={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return Dh(n)?n.number:0}},o$e=function(){function e(n,r){var s,a;this.animationDuration=He(n,t$e,r.animationDuration),this.backgroundClip=He(n,T7e,r.backgroundClip),this.backgroundColor=He(n,F7e,r.backgroundColor),this.backgroundImage=He(n,L7e,r.backgroundImage),this.backgroundOrigin=He(n,H7e,r.backgroundOrigin),this.backgroundPosition=He(n,z7e,r.backgroundPosition),this.backgroundRepeat=He(n,K7e,r.backgroundRepeat),this.backgroundSize=He(n,W7e,r.backgroundSize),this.borderTopColor=He(n,q7e,r.borderTopColor),this.borderRightColor=He(n,X7e,r.borderRightColor),this.borderBottomColor=He(n,Y7e,r.borderBottomColor),this.borderLeftColor=He(n,J7e,r.borderLeftColor),this.borderTopLeftRadius=He(n,Z7e,r.borderTopLeftRadius),this.borderTopRightRadius=He(n,eRe,r.borderTopRightRadius),this.borderBottomRightRadius=He(n,tRe,r.borderBottomRightRadius),this.borderBottomLeftRadius=He(n,nRe,r.borderBottomLeftRadius),this.borderTopStyle=He(n,rRe,r.borderTopStyle),this.borderRightStyle=He(n,sRe,r.borderRightStyle),this.borderBottomStyle=He(n,aRe,r.borderBottomStyle),this.borderLeftStyle=He(n,iRe,r.borderLeftStyle),this.borderTopWidth=He(n,oRe,r.borderTopWidth),this.borderRightWidth=He(n,lRe,r.borderRightWidth),this.borderBottomWidth=He(n,cRe,r.borderBottomWidth),this.borderLeftWidth=He(n,ARe,r.borderLeftWidth),this.boxShadow=He(n,r$e,r.boxShadow),this.color=He(n,uRe,r.color),this.direction=He(n,dRe,r.direction),this.display=He(n,hRe,r.display),this.float=He(n,gRe,r.cssFloat),this.fontFamily=He(n,WRe,r.fontFamily),this.fontSize=He(n,VRe,r.fontSize),this.fontStyle=He(n,YRe,r.fontStyle),this.fontVariant=He(n,XRe,r.fontVariant),this.fontWeight=He(n,qRe,r.fontWeight),this.letterSpacing=He(n,mRe,r.letterSpacing),this.lineBreak=He(n,pRe,r.lineBreak),this.lineHeight=He(n,yRe,r.lineHeight),this.listStyleImage=He(n,vRe,r.listStyleImage),this.listStylePosition=He(n,xRe,r.listStylePosition),this.listStyleType=He(n,Qw,r.listStyleType),this.marginTop=He(n,wRe,r.marginTop),this.marginRight=He(n,bRe,r.marginRight),this.marginBottom=He(n,_Re,r.marginBottom),this.marginLeft=He(n,CRe,r.marginLeft),this.opacity=He(n,zRe,r.opacity);var i=He(n,BRe,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=He(n,SRe,r.overflowWrap),this.paddingTop=He(n,kRe,r.paddingTop),this.paddingRight=He(n,jRe,r.paddingRight),this.paddingBottom=He(n,NRe,r.paddingBottom),this.paddingLeft=He(n,ERe,r.paddingLeft),this.paintOrder=He(n,s$e,r.paintOrder),this.position=He(n,FRe,r.position),this.textAlign=He(n,TRe,r.textAlign),this.textDecorationColor=He(n,KRe,(s=r.textDecorationColor)!==null&&s!==void 0?s:r.color),this.textDecorationLine=He(n,GRe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=He(n,IRe,r.textShadow),this.textTransform=He(n,URe,r.textTransform),this.transform=He(n,PRe,r.transform),this.transformOrigin=He(n,$Re,r.transformOrigin),this.visibility=He(n,ORe,r.visibility),this.webkitTextStrokeColor=He(n,a$e,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=He(n,i$e,r.webkitTextStrokeWidth),this.wordBreak=He(n,LRe,r.wordBreak),this.zIndex=He(n,HRe,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return po(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Sn(this.display,4)||Sn(this.display,33554432)||Sn(this.display,268435456)||Sn(this.display,536870912)||Sn(this.display,67108864)||Sn(this.display,134217728)},e}(),l$e=function(){function e(n,r){this.content=He(n,JRe,r.content),this.quotes=He(n,n$e,r.quotes)}return e}(),o4=function(){function e(n,r){this.counterIncrement=He(n,ZRe,r.counterIncrement),this.counterReset=He(n,e$e,r.counterReset)}return e}(),He=function(e,n,r){var s=new MQ,a=r!==null&&typeof r<"u"?r.toString():n.initialValue;s.write(a);var i=new QQ(s.read());switch(n.type){case 2:var o=i.parseComponentValue();return n.parse(e,Tt(o)?o.value:n.initialValue);case 0:return n.parse(e,i.parseComponentValue());case 1:return n.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(n.format){case"angle":return Gp.parse(e,i.parseComponentValue());case"color":return mo.parse(e,i.parseComponentValue());case"image":return _C.parse(e,i.parseComponentValue());case"length":var c=i.parseComponentValue();return Bo(c)?c:Xn;case"length-percentage":var A=i.parseComponentValue();return yn(A)?A:Xn;case"time":return tD.parse(e,i.parseComponentValue())}break}},c$e="data-html2canvas-debug",A$e=function(e){var n=e.getAttribute(c$e);switch(n){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Dw=function(e,n){var r=A$e(e);return r===1||n===r},Ha=function(){function e(n,r){if(this.context=n,this.textNodes=[],this.elements=[],this.flags=0,Dw(r,3))debugger;this.styles=new o$e(n,window.getComputedStyle(r,null)),Ow(r)&&(this.styles.animationDuration.some(function(s){return s>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=zp(this.context,r),Dw(r,4)&&(this.flags|=16)}return e}(),u$e="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",l4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ru=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zf=0;zf<l4.length;zf++)Ru[l4.charCodeAt(zf)]=zf;var d$e=function(e){var n=e.length*.75,r=e.length,s,a=0,i,o,c,A;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),h=Array.isArray(u)?u:new Uint8Array(u);for(s=0;s<r;s+=4)i=Ru[e.charCodeAt(s)],o=Ru[e.charCodeAt(s+1)],c=Ru[e.charCodeAt(s+2)],A=Ru[e.charCodeAt(s+3)],h[a++]=i<<2|o>>4,h[a++]=(o&15)<<4|c>>2,h[a++]=(c&3)<<6|A&63;return u},h$e=function(e){for(var n=e.length,r=[],s=0;s<n;s+=2)r.push(e[s+1]<<8|e[s]);return r},f$e=function(e){for(var n=e.length,r=[],s=0;s<n;s+=4)r.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return r},hl=5,CC=6+5,Qv=2,g$e=CC-hl,nD=65536>>hl,m$e=1<<hl,Dv=m$e-1,p$e=1024>>hl,y$e=nD+p$e,v$e=y$e,x$e=32,w$e=v$e+x$e,b$e=65536>>CC,_$e=1<<g$e,C$e=_$e-1,c4=function(e,n,r){return e.slice?e.slice(n,r):new Uint16Array(Array.prototype.slice.call(e,n,r))},B$e=function(e,n,r){return e.slice?e.slice(n,r):new Uint32Array(Array.prototype.slice.call(e,n,r))},S$e=function(e,n){var r=d$e(e),s=Array.isArray(r)?f$e(r):new Uint32Array(r),a=Array.isArray(r)?h$e(r):new Uint16Array(r),i=24,o=c4(a,i/2,s[4]/2),c=s[5]===2?c4(a,(i+s[4])/2):B$e(s,Math.ceil((i+s[4])/4));return new k$e(s[0],s[1],s[2],s[3],o,c)},k$e=function(){function e(n,r,s,a,i,o){this.initialValue=n,this.errorValue=r,this.highStart=s,this.highValueIndex=a,this.index=i,this.data=o}return e.prototype.get=function(n){var r;if(n>=0){if(n<55296||n>56319&&n<=65535)return r=this.index[n>>hl],r=(r<<Qv)+(n&Dv),this.data[r];if(n<=65535)return r=this.index[nD+(n-55296>>hl)],r=(r<<Qv)+(n&Dv),this.data[r];if(n<this.highStart)return r=w$e-b$e+(n>>CC),r=this.index[r],r+=n>>hl&C$e,r=this.index[r],r=(r<<Qv)+(n&Dv),this.data[r];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),A4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j$e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Kf=0;Kf<A4.length;Kf++)j$e[A4.charCodeAt(Kf)]=Kf;var N$e=1,Rv=2,$v=3,u4=4,d4=5,E$e=7,h4=8,Ov=9,Lv=10,f4=11,g4=12,m4=13,p4=14,Hv=15,T$e=function(e){for(var n=[],r=0,s=e.length;r<s;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<s){var i=e.charCodeAt(r++);(i&64512)===56320?n.push(((a&1023)<<10)+(i&1023)+65536):(n.push(a),r--)}else n.push(a)}return n},F$e=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var s=[],a=-1,i="";++a<r;){var o=e[a];o<=65535?s.push(o):(o-=65536,s.push((o>>10)+55296,o%1024+56320)),(a+1===r||s.length>16384)&&(i+=String.fromCharCode.apply(String,s),s.length=0)}return i},I$e=S$e(u$e),vs="",zv="",U$e=function(e){return I$e.get(e)},P$e=function(e,n,r){var s=r-2,a=n[s],i=n[r-1],o=n[r];if(i===Rv&&o===$v)return vs;if(i===Rv||i===$v||i===u4||o===Rv||o===$v||o===u4)return zv;if(i===h4&&[h4,Ov,f4,g4].indexOf(o)!==-1||(i===f4||i===Ov)&&(o===Ov||o===Lv)||(i===g4||i===Lv)&&o===Lv||o===m4||o===d4||o===E$e||i===N$e)return vs;if(i===m4&&o===p4){for(;a===d4;)a=n[--s];if(a===p4)return vs}if(i===Hv&&o===Hv){for(var c=0;a===Hv;)c++,a=n[--s];if(c%2===0)return vs}return zv},M$e=function(e){var n=T$e(e),r=n.length,s=0,a=0,i=n.map(U$e);return{next:function(){if(s>=r)return{done:!0,value:null};for(var o=vs;s<r&&(o=P$e(n,i,++s))===vs;);if(o!==vs||s===r){var c=F$e.apply(null,n.slice(a,s));return a=s,{value:c,done:!1}}return{done:!0,value:null}}}},Q$e=function(e){for(var n=M$e(e),r=[],s;!(s=n.next()).done;)s.value&&r.push(s.value.slice());return r},D$e=function(e){var n=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var s=e.createElement("boundtest");s.style.height=n+"px",s.style.display="block",e.body.appendChild(s),r.selectNode(s);var a=r.getBoundingClientRect(),i=Math.round(a.height);if(e.body.removeChild(s),i===n)return!0}}return!1},R$e=function(e){var n=e.createElement("boundtest");n.style.width="50px",n.style.display="block",n.style.fontSize="12px",n.style.letterSpacing="0px",n.style.wordSpacing="0px",e.body.appendChild(n);var r=e.createRange();n.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=n.firstChild,a=Kp(s.data).map(function(A){return fn(A)}),i=0,o={},c=a.every(function(A,u){r.setStart(s,i),r.setEnd(s,i+A.length);var h=r.getBoundingClientRect();i+=A.length;var d=h.x>o.x||h.y>o.y;return o=h,u===0?!0:d});return e.body.removeChild(n),c},$$e=function(){return typeof new Image().crossOrigin<"u"},O$e=function(){return typeof new XMLHttpRequest().responseType=="string"},L$e=function(e){var n=new Image,r=e.createElement("canvas"),s=r.getContext("2d");if(!s)return!1;n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(n,0,0),r.toDataURL()}catch{return!1}return!0},y4=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},H$e=function(e){var n=e.createElement("canvas"),r=100;n.width=r,n.height=r;var s=n.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,r,r);var a=new Image,i=n.toDataURL();a.src=i;var o=Rw(r,r,0,0,a);return s.fillStyle="red",s.fillRect(0,0,r,r),v4(o).then(function(c){s.drawImage(c,0,0);var A=s.getImageData(0,0,r,r).data;s.fillStyle="red",s.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+i+")",u.style.height=r+"px",y4(A)?v4(Rw(r,r,0,0,u)):Promise.reject(!1)}).then(function(c){return s.drawImage(c,0,0),y4(s.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Rw=function(e,n,r,s,a){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),c=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",n.toString()),c.setAttributeNS(null,"width","100%"),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"x",r.toString()),c.setAttributeNS(null,"y",s.toString()),c.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(c),c.appendChild(a),o},v4=function(e){return new Promise(function(n,r){var s=new Image;s.onload=function(){return n(s)},s.onerror=r,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},qn={get SUPPORT_RANGE_BOUNDS(){var e=D$e(document);return Object.defineProperty(qn,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=qn.SUPPORT_RANGE_BOUNDS&&R$e(document);return Object.defineProperty(qn,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=L$e(document);return Object.defineProperty(qn,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?H$e(document):Promise.resolve(!1);return Object.defineProperty(qn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=$$e();return Object.defineProperty(qn,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=O$e();return Object.defineProperty(qn,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(qn,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(qn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},id=function(){function e(n,r){this.text=n,this.bounds=r}return e}(),z$e=function(e,n,r,s){var a=W$e(n,r),i=[],o=0;return a.forEach(function(c){if(r.textDecorationLine.length||c.trim().length>0)if(qn.SUPPORT_RANGE_BOUNDS){var A=x4(s,o,c.length).getClientRects();if(A.length>1){var u=BC(c),h=0;u.forEach(function(f){i.push(new id(f,ji.fromDOMRectList(e,x4(s,h+o,f.length).getClientRects()))),h+=f.length})}else i.push(new id(c,ji.fromDOMRectList(e,A)))}else{var d=s.splitText(c.length);i.push(new id(c,K$e(e,s))),s=d}else qn.SUPPORT_RANGE_BOUNDS||(s=s.splitText(c.length));o+=c.length}),i},K$e=function(e,n){var r=n.ownerDocument;if(r){var s=r.createElement("html2canvaswrapper");s.appendChild(n.cloneNode(!0));var a=n.parentNode;if(a){a.replaceChild(s,n);var i=zp(e,s);return s.firstChild&&a.replaceChild(s.firstChild,s),i}}return ji.EMPTY},x4=function(e,n,r){var s=e.ownerDocument;if(!s)throw new Error("Node has no owner document");var a=s.createRange();return a.setStart(e,n),a.setEnd(e,n+r),a},BC=function(e){if(qn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(n.segment(e)).map(function(r){return r.segment})}return Q$e(e)},G$e=function(e,n){if(qn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(s){return s.segment})}return q$e(e,n)},W$e=function(e,n){return n.letterSpacing!==0?BC(e):G$e(e,n)},V$e=[32,160,4961,65792,65793,4153,4241],q$e=function(e,n){for(var r=bDe(e,{lineBreak:n.lineBreak,wordBreak:n.overflowWrap==="break-word"?"break-word":n.wordBreak}),s=[],a,i=function(){if(a.value){var o=a.value.slice(),c=Kp(o),A="";c.forEach(function(u){V$e.indexOf(u)===-1?A+=fn(u):(A.length&&s.push(A),s.push(fn(u)),A="")}),A.length&&s.push(A)}};!(a=r.next()).done;)i();return s},X$e=function(){function e(n,r,s){this.text=Y$e(r.data,s.textTransform),this.textBounds=z$e(n,this.text,s,r)}return e}(),Y$e=function(e,n){switch(n){case 1:return e.toLowerCase();case 3:return e.replace(J$e,Z$e);case 2:return e.toUpperCase();default:return e}},J$e=/(^|\s|:|-|\(|\))([a-z])/g,Z$e=function(e,n,r){return e.length>0?n+r.toUpperCase():e},rD=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.src=s.currentSrc||s.src,a.intrinsicWidth=s.naturalWidth,a.intrinsicHeight=s.naturalHeight,a.context.cache.addImage(a.src),a}return n}(Ha),sD=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.canvas=s,a.intrinsicWidth=s.width,a.intrinsicHeight=s.height,a}return n}(Ha),aD=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this,i=new XMLSerializer,o=zp(r,s);return s.setAttribute("width",o.width+"px"),s.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(s)),a.intrinsicWidth=s.width.baseVal.value,a.intrinsicHeight=s.height.baseVal.value,a.context.cache.addImage(a.svg),a}return n}(Ha),iD=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.value=s.value,a}return n}(Ha),$w=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.start=s.start,a.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,a}return n}(Ha),e8e=[{type:15,flags:0,unit:"px",number:3}],t8e=[{type:16,flags:0,number:50}],n8e=function(e){return e.width>e.height?new ji(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new ji(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},r8e=function(e){var n=e.type===s8e?new Array(e.value.length+1).join(""):e.value;return n.length===0?e.placeholder||"":n},am="checkbox",im="radio",s8e="password",w4=707406591,SC=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this;switch(a.type=s.type.toLowerCase(),a.checked=s.checked,a.value=r8e(s),(a.type===am||a.type===im)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=n8e(a.bounds)),a.type){case am:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=e8e;break;case im:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=t8e;break}return a}return n}(Ha),oD=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this,i=s.options[s.selectedIndex||0];return a.value=i&&i.text||"",a}return n}(Ha),lD=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.value=s.value,a}return n}(Ha),cD=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this;a.src=s.src,a.width=parseInt(s.width,10)||0,a.height=parseInt(s.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){a.tree=uD(r,s.contentWindow.document.documentElement);var i=s.contentWindow.document.documentElement?sd(r,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):pi.TRANSPARENT,o=s.contentWindow.document.body?sd(r,getComputedStyle(s.contentWindow.document.body).backgroundColor):pi.TRANSPARENT;a.backgroundColor=po(i)?po(o)?a.styles.backgroundColor:o:i}}catch{}return a}return n}(Ha),a8e=["OL","UL","MENU"],C0=function(e,n,r,s){for(var a=n.firstChild,i=void 0;a;a=i)if(i=a.nextSibling,dD(a)&&a.data.trim().length>0)r.textNodes.push(new X$e(e,a,r.styles));else if(Qc(a))if(mD(a)&&a.assignedNodes)a.assignedNodes().forEach(function(c){return C0(e,c,r,s)});else{var o=AD(e,a);o.styles.isVisible()&&(i8e(a,o,s)?o.flags|=4:o8e(o.styles)&&(o.flags|=2),a8e.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?C0(e,a.shadowRoot,o,s):!om(a)&&!hD(a)&&!lm(a)&&C0(e,a,o,s))}},AD=function(e,n){return Lw(n)?new rD(e,n):fD(n)?new sD(e,n):hD(n)?new aD(e,n):l8e(n)?new iD(e,n):c8e(n)?new $w(e,n):A8e(n)?new SC(e,n):lm(n)?new oD(e,n):om(n)?new lD(e,n):gD(n)?new cD(e,n):new Ha(e,n)},uD=function(e,n){var r=AD(e,n);return r.flags|=4,C0(e,n,r,r),r},i8e=function(e,n,r){return n.styles.isPositionedWithZIndex()||n.styles.opacity<1||n.styles.isTransformed()||kC(e)&&r.styles.isTransparent()},o8e=function(e){return e.isPositioned()||e.isFloating()},dD=function(e){return e.nodeType===Node.TEXT_NODE},Qc=function(e){return e.nodeType===Node.ELEMENT_NODE},Ow=function(e){return Qc(e)&&typeof e.style<"u"&&!B0(e)},B0=function(e){return typeof e.className=="object"},l8e=function(e){return e.tagName==="LI"},c8e=function(e){return e.tagName==="OL"},A8e=function(e){return e.tagName==="INPUT"},u8e=function(e){return e.tagName==="HTML"},hD=function(e){return e.tagName==="svg"},kC=function(e){return e.tagName==="BODY"},fD=function(e){return e.tagName==="CANVAS"},b4=function(e){return e.tagName==="VIDEO"},Lw=function(e){return e.tagName==="IMG"},gD=function(e){return e.tagName==="IFRAME"},_4=function(e){return e.tagName==="STYLE"},d8e=function(e){return e.tagName==="SCRIPT"},om=function(e){return e.tagName==="TEXTAREA"},lm=function(e){return e.tagName==="SELECT"},mD=function(e){return e.tagName==="SLOT"},C4=function(e){return e.tagName.indexOf("-")>0},h8e=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(n){var r=this.counters[n];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(n){var r=this.counters[n];return r||[]},e.prototype.pop=function(n){var r=this;n.forEach(function(s){return r.counters[s].pop()})},e.prototype.parse=function(n){var r=this,s=n.counterIncrement,a=n.counterReset,i=!0;s!==null&&s.forEach(function(c){var A=r.counters[c.counter];A&&c.increment!==0&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=c.increment)});var o=[];return i&&a.forEach(function(c){var A=r.counters[c.counter];o.push(c.counter),A||(A=r.counters[c.counter]=[]),A.push(c.reset)}),o},e}(),B4={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},S4={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},f8e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},g8e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},uc=function(e,n,r,s,a,i){return e<n||e>r?Jd(e,a,i.length>0):s.integers.reduce(function(o,c,A){for(;e>=c;)e-=c,o+=s.values[A];return o},"")+i},pD=function(e,n,r,s){var a="";do r||e--,a=s(e)+a,e/=n;while(e*n>=n);return a},hn=function(e,n,r,s,a){var i=r-n+1;return(e<0?"-":"")+(pD(Math.abs(e),i,s,function(o){return fn(Math.floor(o%i)+n)})+a)},Ro=function(e,n,r){r===void 0&&(r=". ");var s=n.length;return pD(Math.abs(e),s,!1,function(a){return n[Math.floor(a%s)]})+r},vc=1,Li=2,Hi=4,$u=8,Xa=function(e,n,r,s,a,i){if(e<-9999||e>9999)return Jd(e,4,a.length>0);var o=Math.abs(e),c=a;if(o===0)return n[0]+c;for(var A=0;o>0&&A<=4;A++){var u=o%10;u===0&&Sn(i,vc)&&c!==""?c=n[u]+c:u>1||u===1&&A===0||u===1&&A===1&&Sn(i,Li)||u===1&&A===1&&Sn(i,Hi)&&e>100||u===1&&A>1&&Sn(i,$u)?c=n[u]+(A>0?r[A-1]:"")+c:u===1&&A>0&&(c=r[A-1]+c),o=Math.floor(o/10)}return(e<0?s:"")+c},k4="",j4="",N4="",Kv="",Jd=function(e,n,r){var s=r?". ":"",a=r?"":"",i=r?", ":"",o=r?" ":"";switch(n){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var c=hn(e,48,57,!0,s);return c.length<4?"0"+c:c;case 4:return Ro(e,"",a);case 6:return uc(e,1,3999,B4,3,s).toLowerCase();case 7:return uc(e,1,3999,B4,3,s);case 8:return hn(e,945,969,!1,s);case 9:return hn(e,97,122,!1,s);case 10:return hn(e,65,90,!1,s);case 11:return hn(e,1632,1641,!0,s);case 12:case 49:return uc(e,1,9999,S4,3,s);case 35:return uc(e,1,9999,S4,3,s).toLowerCase();case 13:return hn(e,2534,2543,!0,s);case 14:case 30:return hn(e,6112,6121,!0,s);case 15:return Ro(e,"",a);case 16:return Ro(e,"",a);case 17:case 48:return Xa(e,"",k4,"",a,Li|Hi|$u);case 47:return Xa(e,"",j4,"",a,vc|Li|Hi|$u);case 42:return Xa(e,"",k4,"",a,Li|Hi|$u);case 41:return Xa(e,"",j4,"",a,vc|Li|Hi|$u);case 26:return Xa(e,"","",N4,a,0);case 25:return Xa(e,"","",N4,a,vc|Li|Hi);case 31:return Xa(e,"","",Kv,i,vc|Li|Hi);case 33:return Xa(e,"","",Kv,i,0);case 32:return Xa(e,"","",Kv,i,vc|Li|Hi);case 18:return hn(e,2406,2415,!0,s);case 20:return uc(e,1,19999,g8e,3,s);case 21:return hn(e,2790,2799,!0,s);case 22:return hn(e,2662,2671,!0,s);case 22:return uc(e,1,10999,f8e,3,s);case 23:return Ro(e,"");case 24:return Ro(e,"");case 27:return hn(e,3302,3311,!0,s);case 28:return Ro(e,"",a);case 29:return Ro(e,"",a);case 34:return hn(e,3792,3801,!0,s);case 37:return hn(e,6160,6169,!0,s);case 38:return hn(e,4160,4169,!0,s);case 39:return hn(e,2918,2927,!0,s);case 40:return hn(e,1776,1785,!0,s);case 43:return hn(e,3046,3055,!0,s);case 44:return hn(e,3174,3183,!0,s);case 45:return hn(e,3664,3673,!0,s);case 46:return hn(e,3872,3881,!0,s);case 3:default:return hn(e,48,57,!0,s)}},yD="data-html2canvas-ignore",E4=function(){function e(n,r,s){if(this.context=n,this.options=s,this.scrolledElements=[],this.referenceElement=r,this.counters=new h8e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(n,r){var s=this,a=m8e(n,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=n.defaultView.pageXOffset,o=n.defaultView.pageYOffset,c=a.contentWindow,A=c.document,u=v8e(a).then(function(){return gr(s,void 0,void 0,function(){var h,d;return ar(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(_8e),c&&(c.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.scrollY!==r.top||c.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(c.scrollX-r.left,c.scrollY-r.top,0,0))),h=this.options.onclone,d=this.clonedReferenceElement,typeof d>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,y8e(A)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof h=="function"?[2,Promise.resolve().then(function(){return h(A,d)}).then(function(){return a})]:[2,a]}})})});return A.open(),A.write(w8e(document.doctype)+"<html></html>"),b8e(this.referenceElement.ownerDocument,i,o),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),u},e.prototype.createElementClone=function(n){if(Dw(n,2))debugger;if(fD(n))return this.createCanvasClone(n);if(b4(n))return this.createVideoClone(n);if(_4(n))return this.createStyleClone(n);var r=n.cloneNode(!1);return Lw(r)&&(Lw(n)&&n.currentSrc&&n.currentSrc!==n.src&&(r.src=n.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),C4(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(n){var r=document.createElement("html2canvascustomelement");return Gv(n.style,r),r},e.prototype.createStyleClone=function(n){try{var r=n.sheet;if(r&&r.cssRules){var s=[].slice.call(r.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),a=n.cloneNode(!1);return a.textContent=s,a}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return n.cloneNode(!1)},e.prototype.createCanvasClone=function(n){var r;if(this.options.inlineImages&&n.ownerDocument){var s=n.ownerDocument.createElement("img");try{return s.src=n.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",n)}}var a=n.cloneNode(!1);try{a.width=n.width,a.height=n.height;var i=n.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,n.width,n.height),0,0);else{var c=(r=n.getContext("webgl2"))!==null&&r!==void 0?r:n.getContext("webgl");if(c){var A=c.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",n)}o.drawImage(n,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",n)}return a},e.prototype.createVideoClone=function(n){var r=n.ownerDocument.createElement("canvas");r.width=n.offsetWidth,r.height=n.offsetHeight;var s=r.getContext("2d");try{return s&&(s.drawImage(n,0,0,r.width,r.height),this.options.allowTaint||s.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",n)}var a=n.ownerDocument.createElement("canvas");return a.width=n.offsetWidth,a.height=n.offsetHeight,a},e.prototype.appendChildNode=function(n,r,s){(!Qc(r)||!d8e(r)&&!r.hasAttribute(yD)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Qc(r)||!_4(r))&&n.appendChild(this.cloneNode(r,s))},e.prototype.cloneChildNodes=function(n,r,s){for(var a=this,i=n.shadowRoot?n.shadowRoot.firstChild:n.firstChild;i;i=i.nextSibling)if(Qc(i)&&mD(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(c){return a.appendChildNode(r,c,s)})}else this.appendChildNode(r,i,s)},e.prototype.cloneNode=function(n,r){if(dD(n))return document.createTextNode(n.data);if(!n.ownerDocument)return n.cloneNode(!1);var s=n.ownerDocument.defaultView;if(s&&Qc(n)&&(Ow(n)||B0(n))){var a=this.createElementClone(n);a.style.transitionProperty="none";var i=s.getComputedStyle(n),o=s.getComputedStyle(n,":before"),c=s.getComputedStyle(n,":after");this.referenceElement===n&&Ow(a)&&(this.clonedReferenceElement=a),kC(a)&&S8e(a);var A=this.counters.parse(new o4(this.context,i)),u=this.resolvePseudoContent(n,a,o,od.BEFORE);C4(n)&&(r=!0),b4(n)||this.cloneChildNodes(n,a,r),u&&a.insertBefore(u,a.firstChild);var h=this.resolvePseudoContent(n,a,c,od.AFTER);return h&&a.appendChild(h),this.counters.pop(A),(i&&(this.options.copyStyles||B0(n))&&!gD(n)||r)&&Gv(i,a),(n.scrollTop!==0||n.scrollLeft!==0)&&this.scrolledElements.push([a,n.scrollLeft,n.scrollTop]),(om(n)||lm(n))&&(om(a)||lm(a))&&(a.value=n.value),a}return n.cloneNode(!1)},e.prototype.resolvePseudoContent=function(n,r,s,a){var i=this;if(s){var o=s.content,c=r.ownerDocument;if(!(!c||!o||o==="none"||o==="-moz-alt-content"||s.display==="none")){this.counters.parse(new o4(this.context,s));var A=new l$e(this.context,s),u=c.createElement("html2canvaspseudoelement");Gv(s,u),A.content.forEach(function(d){if(d.type===0)u.appendChild(c.createTextNode(d.value));else if(d.type===22){var f=c.createElement("img");f.src=d.value,f.style.opacity="1",u.appendChild(f)}else if(d.type===18){if(d.name==="attr"){var g=d.values.filter(Tt);g.length&&u.appendChild(c.createTextNode(n.getAttribute(g[0].value)||""))}else if(d.name==="counter"){var m=d.values.filter(bA),y=m[0],v=m[1];if(y&&Tt(y)){var p=i.counters.getCounterValue(y.value),x=v&&Tt(v)?Qw.parse(i.context,v.value):3;u.appendChild(c.createTextNode(Jd(p,x,!1)))}}else if(d.name==="counters"){var b=d.values.filter(bA),y=b[0],w=b[1],v=b[2];if(y&&Tt(y)){var _=i.counters.getCounterValues(y.value),B=v&&Tt(v)?Qw.parse(i.context,v.value):3,k=w&&w.type===0?w.value:"",N=_.map(function(E){return Jd(E,B,!1)}).join(k);u.appendChild(c.createTextNode(N))}}}else if(d.type===20)switch(d.value){case"open-quote":u.appendChild(c.createTextNode(i4(A.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(c.createTextNode(i4(A.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(c.createTextNode(d.value))}}),u.className=Hw+" "+zw;var h=a===od.BEFORE?" "+Hw:" "+zw;return B0(r)?r.className.baseValue+=h:r.className+=h,u}}},e.destroy=function(n){return n.parentNode?(n.parentNode.removeChild(n),!0):!1},e}(),od;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(od||(od={}));var m8e=function(e,n){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=n.width.toString(),r.height=n.height.toString(),r.scrolling="no",r.setAttribute(yD,"true"),e.body.appendChild(r),r},p8e=function(e){return new Promise(function(n){if(e.complete){n();return}if(!e.src){n();return}e.onload=n,e.onerror=n})},y8e=function(e){return Promise.all([].slice.call(e.images,0).map(p8e))},v8e=function(e){return new Promise(function(n,r){var s=e.contentWindow;if(!s)return r("No window assigned for iframe");var a=s.document;s.onload=e.onload=function(){s.onload=e.onload=null;var i=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(i),n(e))},50)}})},x8e=["all","d","content"],Gv=function(e,n){for(var r=e.length-1;r>=0;r--){var s=e.item(r);x8e.indexOf(s)===-1&&n.style.setProperty(s,e.getPropertyValue(s))}return n},w8e=function(e){var n="";return e&&(n+="<!DOCTYPE ",e.name&&(n+=e.name),e.internalSubset&&(n+=e.internalSubset),e.publicId&&(n+='"'+e.publicId+'"'),e.systemId&&(n+='"'+e.systemId+'"'),n+=">"),n},b8e=function(e,n,r){e&&e.defaultView&&(n!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(n,r)},_8e=function(e){var n=e[0],r=e[1],s=e[2];n.scrollLeft=r,n.scrollTop=s},C8e=":before",B8e=":after",Hw="___html2canvas___pseudoelement_before",zw="___html2canvas___pseudoelement_after",T4=`{
    content: "" !important;
    display: none !important;
}`,S8e=function(e){k8e(e,"."+Hw+C8e+T4+`
         .`+zw+B8e+T4)},k8e=function(e,n){var r=e.ownerDocument;if(r){var s=r.createElement("style");s.textContent=n,e.appendChild(s)}},vD=function(){function e(){}return e.getOrigin=function(n){var r=e._link;return r?(r.href=n,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(n){return e.getOrigin(n)===e._origin},e.setContext=function(n){e._link=n.document.createElement("a"),e._origin=e.getOrigin(n.location.href)},e._origin="about:blank",e}(),j8e=function(){function e(n,r){this.context=n,this._options=r,this._cache={}}return e.prototype.addImage=function(n){var r=Promise.resolve();return this.has(n)||(Vv(n)||F8e(n))&&(this._cache[n]=this.loadImage(n)).catch(function(){}),r},e.prototype.match=function(n){return this._cache[n]},e.prototype.loadImage=function(n){return gr(this,void 0,void 0,function(){var r,s,a,i,o=this;return ar(this,function(c){switch(c.label){case 0:return r=vD.isSameOrigin(n),s=!Wv(n)&&this._options.useCORS===!0&&qn.SUPPORT_CORS_IMAGES&&!r,a=!Wv(n)&&!r&&!Vv(n)&&typeof this._options.proxy=="string"&&qn.SUPPORT_CORS_XHR&&!s,!r&&this._options.allowTaint===!1&&!Wv(n)&&!Vv(n)&&!a&&!s?[2]:(i=n,a?[4,this.proxy(i)]:[3,2]);case 1:i=c.sent(),c.label=2;case 2:return this.context.logger.debug("Added image "+n.substring(0,256)),[4,new Promise(function(A,u){var h=new Image;h.onload=function(){return A(h)},h.onerror=u,(I8e(i)||s)&&(h.crossOrigin="anonymous"),h.src=i,h.complete===!0&&setTimeout(function(){return A(h)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,c.sent()]}})})},e.prototype.has=function(n){return typeof this._cache[n]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(n){var r=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var a=n.substring(0,256);return new Promise(function(i,o){var c=qn.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(c==="text")i(A.response);else{var d=new FileReader;d.addEventListener("load",function(){return i(d.result)},!1),d.addEventListener("error",function(f){return o(f)},!1),d.readAsDataURL(A.response)}else o("Failed to proxy resource "+a+" with status code "+A.status)},A.onerror=o;var u=s.indexOf("?")>-1?"&":"?";if(A.open("GET",""+s+u+"url="+encodeURIComponent(n)+"&responseType="+c),c!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=c),r._options.imageTimeout){var h=r._options.imageTimeout;A.timeout=h,A.ontimeout=function(){return o("Timed out ("+h+"ms) proxying "+a)}}A.send()})},e}(),N8e=/^data:image\/svg\+xml/i,E8e=/^data:image\/.*;base64,/i,T8e=/^data:image\/.*/i,F8e=function(e){return qn.SUPPORT_SVG_DRAWING||!U8e(e)},Wv=function(e){return T8e.test(e)},I8e=function(e){return E8e.test(e)},Vv=function(e){return e.substr(0,4)==="blob"},U8e=function(e){return e.substr(-3).toLowerCase()==="svg"||N8e.test(e)},Oe=function(){function e(n,r){this.type=0,this.x=n,this.y=r}return e.prototype.add=function(n,r){return new e(this.x+n,this.y+r)},e}(),dc=function(e,n,r){return new Oe(e.x+(n.x-e.x)*r,e.y+(n.y-e.y)*r)},Gf=function(){function e(n,r,s,a){this.type=1,this.start=n,this.startControl=r,this.endControl=s,this.end=a}return e.prototype.subdivide=function(n,r){var s=dc(this.start,this.startControl,n),a=dc(this.startControl,this.endControl,n),i=dc(this.endControl,this.end,n),o=dc(s,a,n),c=dc(a,i,n),A=dc(o,c,n);return r?new e(this.start,s,o,A):new e(A,c,i,this.end)},e.prototype.add=function(n,r){return new e(this.start.add(n,r),this.startControl.add(n,r),this.endControl.add(n,r),this.end.add(n,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),bs=function(e){return e.type===1},P8e=function(){function e(n){var r=n.styles,s=n.bounds,a=Du(r.borderTopLeftRadius,s.width,s.height),i=a[0],o=a[1],c=Du(r.borderTopRightRadius,s.width,s.height),A=c[0],u=c[1],h=Du(r.borderBottomRightRadius,s.width,s.height),d=h[0],f=h[1],g=Du(r.borderBottomLeftRadius,s.width,s.height),m=g[0],y=g[1],v=[];v.push((i+A)/s.width),v.push((m+d)/s.width),v.push((o+y)/s.height),v.push((u+f)/s.height);var p=Math.max.apply(Math,v);p>1&&(i/=p,o/=p,A/=p,u/=p,d/=p,f/=p,m/=p,y/=p);var x=s.width-A,b=s.height-f,w=s.width-d,_=s.height-y,B=r.borderTopWidth,k=r.borderRightWidth,N=r.borderBottomWidth,C=r.borderLeftWidth,j=Qt(r.paddingTop,n.bounds.width),E=Qt(r.paddingRight,n.bounds.width),F=Qt(r.paddingBottom,n.bounds.width),I=Qt(r.paddingLeft,n.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Wt(s.left+C/3,s.top+B/3,i-C/3,o-B/3,kt.TOP_LEFT):new Oe(s.left+C/3,s.top+B/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Wt(s.left+x,s.top+B/3,A-k/3,u-B/3,kt.TOP_RIGHT):new Oe(s.left+s.width-k/3,s.top+B/3),this.bottomRightBorderDoubleOuterBox=d>0||f>0?Wt(s.left+w,s.top+b,d-k/3,f-N/3,kt.BOTTOM_RIGHT):new Oe(s.left+s.width-k/3,s.top+s.height-N/3),this.bottomLeftBorderDoubleOuterBox=m>0||y>0?Wt(s.left+C/3,s.top+_,m-C/3,y-N/3,kt.BOTTOM_LEFT):new Oe(s.left+C/3,s.top+s.height-N/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Wt(s.left+C*2/3,s.top+B*2/3,i-C*2/3,o-B*2/3,kt.TOP_LEFT):new Oe(s.left+C*2/3,s.top+B*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Wt(s.left+x,s.top+B*2/3,A-k*2/3,u-B*2/3,kt.TOP_RIGHT):new Oe(s.left+s.width-k*2/3,s.top+B*2/3),this.bottomRightBorderDoubleInnerBox=d>0||f>0?Wt(s.left+w,s.top+b,d-k*2/3,f-N*2/3,kt.BOTTOM_RIGHT):new Oe(s.left+s.width-k*2/3,s.top+s.height-N*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||y>0?Wt(s.left+C*2/3,s.top+_,m-C*2/3,y-N*2/3,kt.BOTTOM_LEFT):new Oe(s.left+C*2/3,s.top+s.height-N*2/3),this.topLeftBorderStroke=i>0||o>0?Wt(s.left+C/2,s.top+B/2,i-C/2,o-B/2,kt.TOP_LEFT):new Oe(s.left+C/2,s.top+B/2),this.topRightBorderStroke=i>0||o>0?Wt(s.left+x,s.top+B/2,A-k/2,u-B/2,kt.TOP_RIGHT):new Oe(s.left+s.width-k/2,s.top+B/2),this.bottomRightBorderStroke=d>0||f>0?Wt(s.left+w,s.top+b,d-k/2,f-N/2,kt.BOTTOM_RIGHT):new Oe(s.left+s.width-k/2,s.top+s.height-N/2),this.bottomLeftBorderStroke=m>0||y>0?Wt(s.left+C/2,s.top+_,m-C/2,y-N/2,kt.BOTTOM_LEFT):new Oe(s.left+C/2,s.top+s.height-N/2),this.topLeftBorderBox=i>0||o>0?Wt(s.left,s.top,i,o,kt.TOP_LEFT):new Oe(s.left,s.top),this.topRightBorderBox=A>0||u>0?Wt(s.left+x,s.top,A,u,kt.TOP_RIGHT):new Oe(s.left+s.width,s.top),this.bottomRightBorderBox=d>0||f>0?Wt(s.left+w,s.top+b,d,f,kt.BOTTOM_RIGHT):new Oe(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=m>0||y>0?Wt(s.left,s.top+_,m,y,kt.BOTTOM_LEFT):new Oe(s.left,s.top+s.height),this.topLeftPaddingBox=i>0||o>0?Wt(s.left+C,s.top+B,Math.max(0,i-C),Math.max(0,o-B),kt.TOP_LEFT):new Oe(s.left+C,s.top+B),this.topRightPaddingBox=A>0||u>0?Wt(s.left+Math.min(x,s.width-k),s.top+B,x>s.width+k?0:Math.max(0,A-k),Math.max(0,u-B),kt.TOP_RIGHT):new Oe(s.left+s.width-k,s.top+B),this.bottomRightPaddingBox=d>0||f>0?Wt(s.left+Math.min(w,s.width-C),s.top+Math.min(b,s.height-N),Math.max(0,d-k),Math.max(0,f-N),kt.BOTTOM_RIGHT):new Oe(s.left+s.width-k,s.top+s.height-N),this.bottomLeftPaddingBox=m>0||y>0?Wt(s.left+C,s.top+Math.min(_,s.height-N),Math.max(0,m-C),Math.max(0,y-N),kt.BOTTOM_LEFT):new Oe(s.left+C,s.top+s.height-N),this.topLeftContentBox=i>0||o>0?Wt(s.left+C+I,s.top+B+j,Math.max(0,i-(C+I)),Math.max(0,o-(B+j)),kt.TOP_LEFT):new Oe(s.left+C+I,s.top+B+j),this.topRightContentBox=A>0||u>0?Wt(s.left+Math.min(x,s.width+C+I),s.top+B+j,x>s.width+C+I?0:A-C+I,u-(B+j),kt.TOP_RIGHT):new Oe(s.left+s.width-(k+E),s.top+B+j),this.bottomRightContentBox=d>0||f>0?Wt(s.left+Math.min(w,s.width-(C+I)),s.top+Math.min(b,s.height+B+j),Math.max(0,d-(k+E)),f-(N+F),kt.BOTTOM_RIGHT):new Oe(s.left+s.width-(k+E),s.top+s.height-(N+F)),this.bottomLeftContentBox=m>0||y>0?Wt(s.left+C+I,s.top+_,Math.max(0,m-(C+I)),y-(N+F),kt.BOTTOM_LEFT):new Oe(s.left+C+I,s.top+s.height-(N+F))}return e}(),kt;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(kt||(kt={}));var Wt=function(e,n,r,s,a){var i=4*((Math.sqrt(2)-1)/3),o=r*i,c=s*i,A=e+r,u=n+s;switch(a){case kt.TOP_LEFT:return new Gf(new Oe(e,u),new Oe(e,u-c),new Oe(A-o,n),new Oe(A,n));case kt.TOP_RIGHT:return new Gf(new Oe(e,n),new Oe(e+o,n),new Oe(A,u-c),new Oe(A,u));case kt.BOTTOM_RIGHT:return new Gf(new Oe(A,n),new Oe(A,n+c),new Oe(e+o,u),new Oe(e,u));case kt.BOTTOM_LEFT:default:return new Gf(new Oe(A,u),new Oe(A-o,u),new Oe(e,n+c),new Oe(e,n))}},cm=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},M8e=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Am=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Q8e=function(){function e(n,r,s){this.offsetX=n,this.offsetY=r,this.matrix=s,this.type=0,this.target=6}return e}(),Wf=function(){function e(n,r){this.path=n,this.target=r,this.type=1}return e}(),D8e=function(){function e(n){this.opacity=n,this.type=2,this.target=6}return e}(),R8e=function(e){return e.type===0},xD=function(e){return e.type===1},$8e=function(e){return e.type===2},F4=function(e,n){return e.length===n.length?e.some(function(r,s){return r===n[s]}):!1},O8e=function(e,n,r,s,a){return e.map(function(i,o){switch(o){case 0:return i.add(n,r);case 1:return i.add(n+s,r);case 2:return i.add(n+s,r+a);case 3:return i.add(n,r+a)}return i})},wD=function(){function e(n){this.element=n,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),bD=function(){function e(n,r){if(this.container=n,this.parent=r,this.effects=[],this.curves=new P8e(this.container),this.container.styles.opacity<1&&this.effects.push(new D8e(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new Q8e(s,a,i))}if(this.container.styles.overflowX!==0){var o=cm(this.curves),c=Am(this.curves);F4(o,c)?this.effects.push(new Wf(o,6)):(this.effects.push(new Wf(o,2)),this.effects.push(new Wf(c,4)))}}return e.prototype.getEffects=function(n){for(var r=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,a=this.effects.slice(0);s;){var i=s.effects.filter(function(A){return!xD(A)});if(r||s.container.styles.position!==0||!s.parent){if(a.unshift.apply(a,i),r=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var o=cm(s.curves),c=Am(s.curves);F4(o,c)||a.unshift(new Wf(c,6))}}else a.unshift.apply(a,i);s=s.parent}return a.filter(function(A){return Sn(A.target,n)})},e}(),Kw=function(e,n,r,s){e.container.elements.forEach(function(a){var i=Sn(a.flags,4),o=Sn(a.flags,2),c=new bD(a,e);Sn(a.styles.display,2048)&&s.push(c);var A=Sn(a.flags,8)?[]:s;if(i||o){var u=i||a.styles.isPositioned()?r:n,h=new wD(c);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var d=a.styles.zIndex.order;if(d<0){var f=0;u.negativeZIndex.some(function(m,y){return d>m.element.container.styles.zIndex.order?(f=y,!1):f>0}),u.negativeZIndex.splice(f,0,h)}else if(d>0){var g=0;u.positiveZIndex.some(function(m,y){return d>=m.element.container.styles.zIndex.order?(g=y+1,!1):g>0}),u.positiveZIndex.splice(g,0,h)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(h)}else a.styles.isFloating()?u.nonPositionedFloats.push(h):u.nonPositionedInlineLevel.push(h);Kw(c,h,i?h:r,A)}else a.styles.isInlineLevel()?n.inlineLevel.push(c):n.nonInlineLevel.push(c),Kw(c,n,r,A);Sn(a.flags,8)&&_D(a,A)})},_D=function(e,n){for(var r=e instanceof $w?e.start:1,s=e instanceof $w?e.reversed:!1,a=0;a<n.length;a++){var i=n[a];i.container instanceof iD&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=Jd(r,i.container.styles.listStyleType,!0),r+=s?-1:1}},L8e=function(e){var n=new bD(e,null),r=new wD(n),s=[];return Kw(n,r,r,s),_D(n.container,s),r},I4=function(e,n){switch(n){case 0:return Es(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Es(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Es(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Es(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},H8e=function(e,n){switch(n){case 0:return Es(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Es(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Es(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Es(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},z8e=function(e,n){switch(n){case 0:return Es(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Es(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Es(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Es(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},K8e=function(e,n){switch(n){case 0:return Vf(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Vf(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Vf(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Vf(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Vf=function(e,n){var r=[];return bs(e)?r.push(e.subdivide(.5,!1)):r.push(e),bs(n)?r.push(n.subdivide(.5,!0)):r.push(n),r},Es=function(e,n,r,s){var a=[];return bs(e)?a.push(e.subdivide(.5,!1)):a.push(e),bs(r)?a.push(r.subdivide(.5,!0)):a.push(r),bs(s)?a.push(s.subdivide(.5,!0).reverse()):a.push(s),bs(n)?a.push(n.subdivide(.5,!1).reverse()):a.push(n),a},CD=function(e){var n=e.bounds,r=e.styles;return n.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},um=function(e){var n=e.styles,r=e.bounds,s=Qt(n.paddingLeft,r.width),a=Qt(n.paddingRight,r.width),i=Qt(n.paddingTop,r.width),o=Qt(n.paddingBottom,r.width);return r.add(s+n.borderLeftWidth,i+n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth+s+a),-(n.borderTopWidth+n.borderBottomWidth+i+o))},G8e=function(e,n){return e===0?n.bounds:e===2?um(n):CD(n)},W8e=function(e,n){return e===0?n.bounds:e===2?um(n):CD(n)},qv=function(e,n,r){var s=G8e(xc(e.styles.backgroundOrigin,n),e),a=W8e(xc(e.styles.backgroundClip,n),e),i=V8e(xc(e.styles.backgroundSize,n),r,s),o=i[0],c=i[1],A=Du(xc(e.styles.backgroundPosition,n),s.width-o,s.height-c),u=q8e(xc(e.styles.backgroundRepeat,n),A,i,s,a),h=Math.round(s.left+A[0]),d=Math.round(s.top+A[1]);return[u,h,d,o,c]},hc=function(e){return Tt(e)&&e.value===Yc.AUTO},qf=function(e){return typeof e=="number"},V8e=function(e,n,r){var s=n[0],a=n[1],i=n[2],o=e[0],c=e[1];if(!o)return[0,0];if(yn(o)&&c&&yn(c))return[Qt(o,r.width),Qt(c,r.height)];var A=qf(i);if(Tt(o)&&(o.value===Yc.CONTAIN||o.value===Yc.COVER)){if(qf(i)){var u=r.width/r.height;return u<i!=(o.value===Yc.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var h=qf(s),d=qf(a),f=h||d;if(hc(o)&&(!c||hc(c))){if(h&&d)return[s,a];if(!A&&!f)return[r.width,r.height];if(f&&A){var g=h?s:a*i,m=d?a:s/i;return[g,m]}var y=h?s:r.width,v=d?a:r.height;return[y,v]}if(A){var p=0,x=0;return yn(o)?p=Qt(o,r.width):yn(c)&&(x=Qt(c,r.height)),hc(o)?p=x*i:(!c||hc(c))&&(x=p/i),[p,x]}var b=null,w=null;if(yn(o)?b=Qt(o,r.width):c&&yn(c)&&(w=Qt(c,r.height)),b!==null&&(!c||hc(c))&&(w=h&&d?b/s*a:r.height),w!==null&&hc(o)&&(b=h&&d?w/a*s:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},xc=function(e,n){var r=e[n];return typeof r>"u"?e[0]:r},q8e=function(e,n,r,s,a){var i=n[0],o=n[1],c=r[0],A=r[1];switch(e){case 2:return[new Oe(Math.round(s.left),Math.round(s.top+o)),new Oe(Math.round(s.left+s.width),Math.round(s.top+o)),new Oe(Math.round(s.left+s.width),Math.round(A+s.top+o)),new Oe(Math.round(s.left),Math.round(A+s.top+o))];case 3:return[new Oe(Math.round(s.left+i),Math.round(s.top)),new Oe(Math.round(s.left+i+c),Math.round(s.top)),new Oe(Math.round(s.left+i+c),Math.round(s.height+s.top)),new Oe(Math.round(s.left+i),Math.round(s.height+s.top))];case 1:return[new Oe(Math.round(s.left+i),Math.round(s.top+o)),new Oe(Math.round(s.left+i+c),Math.round(s.top+o)),new Oe(Math.round(s.left+i+c),Math.round(s.top+o+A)),new Oe(Math.round(s.left+i),Math.round(s.top+o+A))];default:return[new Oe(Math.round(a.left),Math.round(a.top)),new Oe(Math.round(a.left+a.width),Math.round(a.top)),new Oe(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Oe(Math.round(a.left),Math.round(a.height+a.top))]}},X8e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",U4="Hidden Text",Y8e=function(){function e(n){this._data={},this._document=n}return e.prototype.parseMetrics=function(n,r){var s=this._document.createElement("div"),a=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;s.style.visibility="hidden",s.style.fontFamily=n,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",o.appendChild(s),a.src=X8e,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",i.style.fontFamily=n,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(U4)),s.appendChild(i),s.appendChild(a);var c=a.offsetTop-i.offsetTop+2;s.removeChild(i),s.appendChild(this._document.createTextNode(U4)),s.style.lineHeight="normal",a.style.verticalAlign="super";var A=a.offsetTop-s.offsetTop+2;return o.removeChild(s),{baseline:c,middle:A}},e.prototype.getMetrics=function(n,r){var s=n+" "+r;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(n,r)),this._data[s]},e}(),BD=function(){function e(n,r){this.context=n,this.options=r}return e}(),J8e=1e4,Z8e=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a._activeEffects=[],a.canvas=s.canvas?s.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),s.canvas||(a.canvas.width=Math.floor(s.width*s.scale),a.canvas.height=Math.floor(s.height*s.scale),a.canvas.style.width=s.width+"px",a.canvas.style.height=s.height+"px"),a.fontMetrics=new Y8e(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-s.x,-s.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),a}return n.prototype.applyEffects=function(r){for(var s=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return s.applyEffect(a)})},n.prototype.applyEffect=function(r){this.ctx.save(),$8e(r)&&(this.ctx.globalAlpha=r.opacity),R8e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),xD(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(r){return gr(this,void 0,void 0,function(){var s;return ar(this,function(a){switch(a.label){case 0:return s=r.element.container.styles,s.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(r){return gr(this,void 0,void 0,function(){return ar(this,function(s){switch(s.label){case 0:if(Sn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(r)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(r,s,a){var i=this;if(s===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=BC(r.text);o.reduce(function(c,A){return i.ctx.fillText(A,c,r.bounds.top+a),c+i.ctx.measureText(A).width},r.bounds.left)}},n.prototype.createFontStyle=function(r){var s=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=sOe(r.fontFamily).join(", "),i=Dh(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,s,r.fontWeight,i,a].join(" "),a,i]},n.prototype.renderTextNode=function(r,s){return gr(this,void 0,void 0,function(){var a,i,o,c,A,u,h,d,f=this;return ar(this,function(g){return a=this.createFontStyle(s),i=a[0],o=a[1],c=a[2],this.ctx.font=i,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(o,c),u=A.baseline,h=A.middle,d=s.paintOrder,r.textBounds.forEach(function(m){d.forEach(function(y){switch(y){case 0:f.ctx.fillStyle=Fn(s.color),f.renderTextWithLetterSpacing(m,s.letterSpacing,u);var v=s.textShadow;v.length&&m.text.trim().length&&(v.slice(0).reverse().forEach(function(p){f.ctx.shadowColor=Fn(p.color),f.ctx.shadowOffsetX=p.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=p.offsetY.number*f.options.scale,f.ctx.shadowBlur=p.blur.number,f.renderTextWithLetterSpacing(m,s.letterSpacing,u)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),s.textDecorationLine.length&&(f.ctx.fillStyle=Fn(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(p){switch(p){case 1:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:f.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+h),m.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&m.text.trim().length&&(f.ctx.strokeStyle=Fn(s.webkitTextStrokeColor),f.ctx.lineWidth=s.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},n.prototype.renderReplacedElement=function(r,s,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=um(r),o=Am(s);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(r){return gr(this,void 0,void 0,function(){var s,a,i,o,c,A,x,x,u,h,d,f,w,g,m,_,y,v,p,x,b,w,_;return ar(this,function(B){switch(B.label){case 0:this.applyEffects(r.getEffects(4)),s=r.container,a=r.curves,i=s.styles,o=0,c=s.textNodes,B.label=1;case 1:return o<c.length?(A=c[o],[4,this.renderTextNode(A,i)]):[3,4];case 2:B.sent(),B.label=3;case 3:return o++,[3,1];case 4:if(!(s instanceof rD))return[3,8];B.label=5;case 5:return B.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return x=B.sent(),this.renderReplacedElement(s,a,x),[3,8];case 7:return B.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof sD&&this.renderReplacedElement(s,a,s.canvas),!(s instanceof aD))return[3,12];B.label=9;case 9:return B.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return x=B.sent(),this.renderReplacedElement(s,a,x),[3,12];case 11:return B.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof cD&&s.tree?(u=new n(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,u.render(s.tree)]):[3,14];case 13:h=B.sent(),s.width&&s.height&&this.ctx.drawImage(h,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),B.label=14;case 14:if(s instanceof SC&&(d=Math.min(s.bounds.width,s.bounds.height),s.type===am?s.checked&&(this.ctx.save(),this.path([new Oe(s.bounds.left+d*.39363,s.bounds.top+d*.79),new Oe(s.bounds.left+d*.16,s.bounds.top+d*.5549),new Oe(s.bounds.left+d*.27347,s.bounds.top+d*.44071),new Oe(s.bounds.left+d*.39694,s.bounds.top+d*.5649),new Oe(s.bounds.left+d*.72983,s.bounds.top+d*.23),new Oe(s.bounds.left+d*.84,s.bounds.top+d*.34085),new Oe(s.bounds.left+d*.39363,s.bounds.top+d*.79)]),this.ctx.fillStyle=Fn(w4),this.ctx.fill(),this.ctx.restore()):s.type===im&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+d/2,s.bounds.top+d/2,d/4,0,Math.PI*2,!0),this.ctx.fillStyle=Fn(w4),this.ctx.fill(),this.ctx.restore())),eOe(s)&&s.value.length){switch(f=this.createFontStyle(i),w=f[0],g=f[1],m=this.fontMetrics.getMetrics(w,g).baseline,this.ctx.font=w,this.ctx.fillStyle=Fn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=nOe(s.styles.textAlign),_=um(s),y=0,s.styles.textAlign){case 1:y+=_.width/2;break;case 2:y+=_.width;break}v=_.add(y,0,0,-_.height/2+1),this.ctx.save(),this.path([new Oe(_.left,_.top),new Oe(_.left+_.width,_.top),new Oe(_.left+_.width,_.top+_.height),new Oe(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new id(s.value,v),i.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Sn(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(p=s.styles.listStyleImage,p.type!==0)return[3,18];x=void 0,b=p.url,B.label=15;case 15:return B.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return x=B.sent(),this.ctx.drawImage(x,s.bounds.left-(x.width+10),s.bounds.top),[3,18];case 17:return B.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&s.styles.listStyleType!==-1&&(w=this.createFontStyle(i)[0],this.ctx.font=w,this.ctx.fillStyle=Fn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new ji(s.bounds.left,s.bounds.top+Qt(s.styles.paddingTop,s.bounds.width),s.bounds.width,s4(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new id(r.listValue,_),i.letterSpacing,s4(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),B.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(r){return gr(this,void 0,void 0,function(){var s,a,p,i,o,p,c,A,p,u,h,p,d,f,p,g,m,p,y,v,p;return ar(this,function(x){switch(x.label){case 0:if(Sn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:x.sent(),s=0,a=r.negativeZIndex,x.label=2;case 2:return s<a.length?(p=a[s],[4,this.renderStack(p)]):[3,5];case 3:x.sent(),x.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:x.sent(),i=0,o=r.nonInlineLevel,x.label=7;case 7:return i<o.length?(p=o[i],[4,this.renderNode(p)]):[3,10];case 8:x.sent(),x.label=9;case 9:return i++,[3,7];case 10:c=0,A=r.nonPositionedFloats,x.label=11;case 11:return c<A.length?(p=A[c],[4,this.renderStack(p)]):[3,14];case 12:x.sent(),x.label=13;case 13:return c++,[3,11];case 14:u=0,h=r.nonPositionedInlineLevel,x.label=15;case 15:return u<h.length?(p=h[u],[4,this.renderStack(p)]):[3,18];case 16:x.sent(),x.label=17;case 17:return u++,[3,15];case 18:d=0,f=r.inlineLevel,x.label=19;case 19:return d<f.length?(p=f[d],[4,this.renderNode(p)]):[3,22];case 20:x.sent(),x.label=21;case 21:return d++,[3,19];case 22:g=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,x.label=23;case 23:return g<m.length?(p=m[g],[4,this.renderStack(p)]):[3,26];case 24:x.sent(),x.label=25;case 25:return g++,[3,23];case 26:y=0,v=r.positiveZIndex,x.label=27;case 27:return y<v.length?(p=v[y],[4,this.renderStack(p)]):[3,30];case 28:x.sent(),x.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},n.prototype.formatPath=function(r){var s=this;r.forEach(function(a,i){var o=bs(a)?a.start:a;i===0?s.ctx.moveTo(o.x,o.y):s.ctx.lineTo(o.x,o.y),bs(a)&&s.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},n.prototype.renderRepeat=function(r,s,a,i){this.path(r),this.ctx.fillStyle=s,this.ctx.translate(a,i),this.ctx.fill(),this.ctx.translate(-a,-i)},n.prototype.resizeImage=function(r,s,a){var i;if(r.width===s&&r.height===a)return r;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,c=o.createElement("canvas");c.width=Math.max(1,s),c.height=Math.max(1,a);var A=c.getContext("2d");return A.drawImage(r,0,0,r.width,r.height,0,0,s,a),c},n.prototype.renderBackgroundImage=function(r){return gr(this,void 0,void 0,function(){var s,a,i,o,c,A;return ar(this,function(u){switch(u.label){case 0:s=r.styles.backgroundImage.length-1,a=function(h){var d,f,g,j,P,O,I,T,N,m,j,P,O,I,T,y,v,p,x,b,w,_,B,k,N,C,j,E,F,I,T,L,P,O,Q,R,M,G,V,K,se,de;return ar(this,function(ye){switch(ye.label){case 0:if(h.type!==0)return[3,5];d=void 0,f=h.url,ye.label=1;case 1:return ye.trys.push([1,3,,4]),[4,i.context.cache.match(f)];case 2:return d=ye.sent(),[3,4];case 3:return ye.sent(),i.context.logger.error("Error loading background-image "+f),[3,4];case 4:return d&&(g=qv(r,s,[d.width,d.height,d.width/d.height]),j=g[0],P=g[1],O=g[2],I=g[3],T=g[4],N=i.ctx.createPattern(i.resizeImage(d,I,T),"repeat"),i.renderRepeat(j,N,P,O)),[3,6];case 5:R7e(h)?(m=qv(r,s,[null,null,null]),j=m[0],P=m[1],O=m[2],I=m[3],T=m[4],y=U7e(h.angle,I,T),v=y[0],p=y[1],x=y[2],b=y[3],w=y[4],_=document.createElement("canvas"),_.width=I,_.height=T,B=_.getContext("2d"),k=B.createLinearGradient(p,b,x,w),n4(h.stops,v).forEach(function(W){return k.addColorStop(W.stop,Fn(W.color))}),B.fillStyle=k,B.fillRect(0,0,I,T),I>0&&T>0&&(N=i.ctx.createPattern(_,"repeat"),i.renderRepeat(j,N,P,O))):$7e(h)&&(C=qv(r,s,[null,null,null]),j=C[0],E=C[1],F=C[2],I=C[3],T=C[4],L=h.position.length===0?[bC]:h.position,P=Qt(L[0],I),O=Qt(L[L.length-1],T),Q=P7e(h,P,O,I,T),R=Q[0],M=Q[1],R>0&&M>0&&(G=i.ctx.createRadialGradient(E+P,F+O,0,E+P,F+O,R),n4(h.stops,R*2).forEach(function(W){return G.addColorStop(W.stop,Fn(W.color))}),i.path(j),i.ctx.fillStyle=G,R!==M?(V=r.bounds.left+.5*r.bounds.width,K=r.bounds.top+.5*r.bounds.height,se=M/R,de=1/se,i.ctx.save(),i.ctx.translate(V,K),i.ctx.transform(1,0,0,se,0,0),i.ctx.translate(-V,-K),i.ctx.fillRect(E,de*(F-K)+K,I,T*de),i.ctx.restore()):i.ctx.fill())),ye.label=6;case 6:return s--,[2]}})},i=this,o=0,c=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<c.length?(A=c[o],[5,a(A)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(r,s,a){return gr(this,void 0,void 0,function(){return ar(this,function(i){return this.path(I4(a,s)),this.ctx.fillStyle=Fn(r),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(r,s,a,i){return gr(this,void 0,void 0,function(){var o,c;return ar(this,function(A){switch(A.label){case 0:return s<3?[4,this.renderSolidBorder(r,a,i)]:[3,2];case 1:return A.sent(),[2];case 2:return o=H8e(i,a),this.path(o),this.ctx.fillStyle=Fn(r),this.ctx.fill(),c=z8e(i,a),this.path(c),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(r){return gr(this,void 0,void 0,function(){var s,a,i,o,c,A,u,h,d=this;return ar(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),s=r.container.styles,a=!po(s.backgroundColor)||s.backgroundImage.length,i=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],o=tOe(xc(s.backgroundClip,0),r.curves),a||s.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),po(s.backgroundColor)||(this.ctx.fillStyle=Fn(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(g){d.ctx.save();var m=cm(r.curves),y=g.inset?0:J8e,v=O8e(m,-y+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(d.path(m),d.ctx.clip(),d.mask(v)):(d.mask(m),d.ctx.clip(),d.path(v)),d.ctx.shadowOffsetX=g.offsetX.number+y,d.ctx.shadowOffsetY=g.offsetY.number,d.ctx.shadowColor=Fn(g.color),d.ctx.shadowBlur=g.blur.number,d.ctx.fillStyle=g.inset?Fn(g.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),f.label=2;case 2:c=0,A=0,u=i,f.label=3;case 3:return A<u.length?(h=u[A],h.style!==0&&!po(h.color)&&h.width>0?h.style!==2?[3,5]:[4,this.renderDashedDottedBorder(h.color,h.width,c,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return h.style!==3?[3,7]:[4,this.renderDashedDottedBorder(h.color,h.width,c,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return h.style!==4?[3,9]:[4,this.renderDoubleBorder(h.color,h.width,c,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(h.color,c,r.curves)];case 10:f.sent(),f.label=11;case 11:c++,f.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(r,s,a,i,o){return gr(this,void 0,void 0,function(){var c,A,u,h,d,f,g,m,y,v,p,x,b,w,_,B,_,B;return ar(this,function(k){return this.ctx.save(),c=K8e(i,a),A=I4(i,a),o===2&&(this.path(A),this.ctx.clip()),bs(A[0])?(u=A[0].start.x,h=A[0].start.y):(u=A[0].x,h=A[0].y),bs(A[1])?(d=A[1].end.x,f=A[1].end.y):(d=A[1].x,f=A[1].y),a===0||a===2?g=Math.abs(u-d):g=Math.abs(h-f),this.ctx.beginPath(),o===3?this.formatPath(c):this.formatPath(A.slice(0,2)),m=s<3?s*3:s*2,y=s<3?s*2:s,o===3&&(m=s,y=s),v=!0,g<=m*2?v=!1:g<=m*2+y?(p=g/(2*m+y),m*=p,y*=p):(x=Math.floor((g+y)/(m+y)),b=(g-x*m)/(x-1),w=(g-(x+1)*m)/x,y=w<=0||Math.abs(y-b)<Math.abs(y-w)?b:w),v&&(o===3?this.ctx.setLineDash([0,m+y]):this.ctx.setLineDash([m,y])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=Fn(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(bs(A[0])&&(_=A[3],B=A[0],this.ctx.beginPath(),this.formatPath([new Oe(_.end.x,_.end.y),new Oe(B.start.x,B.start.y)]),this.ctx.stroke()),bs(A[1])&&(_=A[1],B=A[2],this.ctx.beginPath(),this.formatPath([new Oe(_.end.x,_.end.y),new Oe(B.start.x,B.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(r){return gr(this,void 0,void 0,function(){var s;return ar(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Fn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=L8e(r),[4,this.renderStack(s)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(BD),eOe=function(e){return e instanceof lD||e instanceof oD?!0:e instanceof SC&&e.type!==im&&e.type!==am},tOe=function(e,n){switch(e){case 0:return cm(n);case 2:return M8e(n);case 1:default:return Am(n)}},nOe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},rOe=["-apple-system","system-ui"],sOe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(n){return rOe.indexOf(n)===-1}):e},aOe=function(e){ma(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.canvas=s.canvas?s.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=s,a.canvas.width=Math.floor(s.width*s.scale),a.canvas.height=Math.floor(s.height*s.scale),a.canvas.style.width=s.width+"px",a.canvas.style.height=s.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-s.x,-s.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),a}return n.prototype.render=function(r){return gr(this,void 0,void 0,function(){var s,a;return ar(this,function(i){switch(i.label){case 0:return s=Rw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,iOe(s)];case 1:return a=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Fn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(BD),iOe=function(e){return new Promise(function(n,r){var s=new Image;s.onload=function(){n(s)},s.onerror=r,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},oOe=function(){function e(n){var r=n.id,s=n.enabled;this.id=r,this.enabled=s,this.start=Date.now()}return e.prototype.debug=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,kf([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,kf([this.id,this.getTime()+"ms"],n))},e.prototype.warn=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,kf([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.error=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,kf([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.instances={},e}(),lOe=function(){function e(n,r){var s;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new oOe({id:this.instanceName,enabled:n.logging}),this.cache=(s=n.cache)!==null&&s!==void 0?s:new j8e(this,n)}return e.instanceCount=1,e}(),cOe=function(e,n){return n===void 0&&(n={}),AOe(e,n)};typeof window<"u"&&vD.setContext(window);var AOe=function(e,n){return gr(void 0,void 0,void 0,function(){var r,s,a,i,o,c,A,u,h,d,f,g,m,y,v,p,x,b,w,_,k,B,k,N,C,j,E,F,I,T,L,P,O,Q,R,M,G,V,K,se;return ar(this,function(de){switch(de.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(s=r.defaultView,!s)throw new Error("Document is not attached to a Window");return a={allowTaint:(N=n.allowTaint)!==null&&N!==void 0?N:!1,imageTimeout:(C=n.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:n.proxy,useCORS:(j=n.useCORS)!==null&&j!==void 0?j:!1},i=Cw({logging:(E=n.logging)!==null&&E!==void 0?E:!0,cache:n.cache},a),o={windowWidth:(F=n.windowWidth)!==null&&F!==void 0?F:s.innerWidth,windowHeight:(I=n.windowHeight)!==null&&I!==void 0?I:s.innerHeight,scrollX:(T=n.scrollX)!==null&&T!==void 0?T:s.pageXOffset,scrollY:(L=n.scrollY)!==null&&L!==void 0?L:s.pageYOffset},c=new ji(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),A=new lOe(i,c),u=(P=n.foreignObjectRendering)!==null&&P!==void 0?P:!1,h={allowTaint:(O=n.allowTaint)!==null&&O!==void 0?O:!1,onclone:n.onclone,ignoreElements:n.ignoreElements,inlineImages:u,copyStyles:u},A.logger.debug("Starting document clone with size "+c.width+"x"+c.height+" scrolled to "+-c.left+","+-c.top),d=new E4(A,e,h),f=d.clonedReferenceElement,f?[4,d.toIFrame(r,c)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=de.sent(),m=kC(f)||u8e(f)?OQe(f.ownerDocument):zp(A,f),y=m.width,v=m.height,p=m.left,x=m.top,b=uOe(A,f,n.backgroundColor),w={canvas:n.canvas,backgroundColor:b,scale:(R=(Q=n.scale)!==null&&Q!==void 0?Q:s.devicePixelRatio)!==null&&R!==void 0?R:1,x:((M=n.x)!==null&&M!==void 0?M:0)+p,y:((G=n.y)!==null&&G!==void 0?G:0)+x,width:(V=n.width)!==null&&V!==void 0?V:Math.ceil(y),height:(K=n.height)!==null&&K!==void 0?K:Math.ceil(v)},u?(A.logger.debug("Document cloned, using foreign object rendering"),k=new aOe(A,w),[4,k.render(f)]):[3,3];case 2:return _=de.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+p+","+x+" with size "+y+"x"+v+" using computed rendering"),A.logger.debug("Starting DOM parsing"),B=uD(A,f),b===B.styles.backgroundColor&&(B.styles.backgroundColor=pi.TRANSPARENT),A.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),k=new Z8e(A,w),[4,k.render(B)];case 4:_=de.sent(),de.label=5;case 5:return(!((se=n.removeContainer)!==null&&se!==void 0)||se)&&(E4.destroy(g)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,_]}})})},uOe=function(e,n,r){var s=n.ownerDocument,a=s.documentElement?sd(e,getComputedStyle(s.documentElement).backgroundColor):pi.TRANSPARENT,i=s.body?sd(e,getComputedStyle(s.body).backgroundColor):pi.TRANSPARENT,o=typeof r=="string"?sd(e,r):r===null?pi.TRANSPARENT:4294967295;return n===s.documentElement?po(a)?po(i)?o:i:a:o};const dOe=({onBack:e})=>{const{playSound:n}=gt(),[r,s]=S.useState([]),[a,i]=S.useState(!0),[o,c]=S.useState(""),[A,u]=S.useState("name"),[h,d]=S.useState("asc"),[f,g]=S.useState("all"),[m,y]=S.useState("all"),[v,p]=S.useState("all"),[x,b]=S.useState(!1),[w,_]=S.useState(!1),B=q.useRef(null);S.useEffect(()=>{const P=document.createElement("style");return P.type="text/css",P.innerHTML=`
      /* Styles applied during screenshot taking */
      .taking-screenshot {
        background-color: #1F2937 !important;
        padding: 2rem !important;
        width: 1400px !important; /* Increased width for more space */
        position: relative !important;
        overflow: visible !important;
      }
      
      .screenshot-title {
        color: white;
        margin-bottom: 2rem;
      }
      
      .screenshot-footer {
        color: #9CA3AF;
        margin-top: 2rem;
        border-top: 1px solid #4B5563;
        padding-top: 1rem;
      }
      
      /* Hide elements with no-screenshot class */
      .taking-screenshot .no-screenshot {
        display: none !important;
      }
      
      /* Adjust card spacing and layout for screenshots */
      .taking-screenshot .grid {
        grid-template-columns: repeat(2, 1fr) !important; /* Force 2 columns for readability */
        gap: 2rem !important; /* Increase gap between cards */
      }
      
      .taking-screenshot .bg-gray-700 {
        padding: 1.5rem !important; /* More padding inside cards */
      }
      
      /* Fix stat bar display */
      .taking-screenshot .transform.skew-x-12 {
        height: 20px !important;
        width: 20px !important; 
      }
      
      /* Make text more readable */
      .taking-screenshot .text-sm {
        font-size: 14px !important;
        line-height: 1.5 !important;
      }
      
      .taking-screenshot .leading-relaxed {
        line-height: 1.7 !important;
      }
      
      /* Fix hero header display */
      .taking-screenshot .px-5.py-4.bg-gray-800 {
        padding: 1.25rem !important;
      }
      
      /* Enhance hero images */
      .taking-screenshot .rounded-full.overflow-hidden {
        border: 2px solid #4B5563 !important;
      }
      
      /* Make role explanations visible in screenshots */
      .taking-screenshot .bg-gray-700.rounded-lg.mb-4.overflow-hidden {
        margin-bottom: 2rem !important;
      }
      
      /* Make sure role explanation grid looks good */
      .taking-screenshot .grid.grid-cols-1.md\\:grid-cols-2.gap-4 {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 1rem !important;
      }
      
      /* Ensure role text is properly visible */
      .taking-screenshot .text-xs.text-gray-400 {
        font-size: 0.85rem !important;
        margin-top: 0.25rem !important;
        color: #9CA3AF !important;
      }
    `,document.head.appendChild(P),()=>{document.head.removeChild(P)}},[]),S.useEffect(()=>{i(!0);try{s(Pn)}catch(P){console.error("Error loading heroes:",P)}finally{i(!1)}},[]);const k=()=>{n("buttonClick"),e()},N=async()=>{if(B.current){n("buttonClick"),_(!0);try{B.current.classList.add("taking-screenshot");const P=document.createElement("div");P.className="screenshot-title text-center mb-6",P.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Hero Reference Guide</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,B.current.insertBefore(P,B.current.firstChild);const O=document.createElement("div");O.className="screenshot-footer text-center mt-8 text-sm text-gray-400",O.innerHTML=`
        <p>Generated by Guards of Atlantis II Timer App</p>
      `,B.current.appendChild(O);const Q=B.current.querySelectorAll(".no-screenshot");Q.forEach(V=>{V.style.display="none"});const M=(await cOe(B.current,{backgroundColor:"#1F2937",windowWidth:1400,scrollX:0,scrollY:0,scale:window.devicePixelRatio||1,logging:!1,allowTaint:!0,useCORS:!0,onclone:V=>{const K=V.querySelector("#screenshotContent");K&&(K.scrollTop=0)}})).toDataURL("image/png"),G=document.createElement("a");G.download=`guards-of-atlantis-hero-guide-${new Date().toISOString().slice(0,10)}.png`,G.href=M,G.click(),B.current.removeChild(P),B.current.removeChild(O),B.current.classList.remove("taking-screenshot"),Q.forEach(V=>{V.style.display=""})}catch(P){console.error("Error creating screenshot:",P)}finally{_(!1)}}},C=P=>{n("buttonClick"),P===A?d(h==="asc"?"desc":"asc"):(u(P),d(P==="name"?"asc":"desc"))},j=()=>{n("buttonClick"),b(!x)},E=()=>{n("buttonClick"),c(""),g("all"),y("all"),p("all"),b(!1)},F=q.useMemo(()=>{const P=new Set;return r.forEach(O=>{O.roles.forEach(Q=>P.add(Q)),O.additionalRoles&&O.additionalRoles.forEach(Q=>P.add(Q))}),Array.from(P).sort()},[r]),I=q.useMemo(()=>aA(),[]),T=r.filter(P=>{if(o){const O=o.toLowerCase();return!!(P.name.toLowerCase().includes(O)||P.roles.some(Q=>Q.toLowerCase().includes(O))||P.additionalRoles&&P.additionalRoles.some(Q=>Q.toLowerCase().includes(O))||P.description&&P.description.toLowerCase().includes(O))}if(f!=="all"&&P.expansion!==f)return!1;if(m!=="all"){const O=P.roles.includes(m),Q=P.additionalRoles?P.additionalRoles.includes(m):!1;if(!O&&!Q)return!1}return!(v!=="all"&&P.complexity!==v)}).sort((P,O)=>{let Q=0;switch(A){case"name":Q=P.name.localeCompare(O.name);break;case"complexity":Q=P.complexity-O.complexity;break;case"attack":Q=(P.attack||0)-(O.attack||0);break;case"defence":Q=(P.defence||0)-(O.defence||0);break;case"initiative":Q=(P.initiative||0)-(O.initiative||0);break;case"movement":Q=(P.movement||0)-(O.movement||0);break;case"expansion":Q=(P.expansion||"").localeCompare(O.expansion||"");break;default:Q=0}return h==="asc"?Q:-Q}),L=(P,O=0,Q=0)=>l.jsxs("div",{className:"mb-2",children:[l.jsx("div",{className:"text-sm font-medium mb-1",children:P}),l.jsx("div",{className:"flex",children:Array.from({length:8}).map((R,M)=>l.jsx("div",{className:`h-5 w-5 transform skew-x-12 mr-0.5 flex-shrink-0 ${M<O?"bg-blue-600":M<Q?"bg-blue-200":"bg-gray-700"}`},M))})]});return l.jsxs("div",{ref:B,id:"screenshotContent",className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 no-screenshot",children:[l.jsxs("button",{onClick:k,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(jn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Hero Information"}),l.jsx(At,{text:"Take a screenshot of all hero information",position:"left",children:l.jsxs("button",{onClick:N,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",disabled:w,children:[l.jsx(x$,{size:18,className:"mr-2"}),l.jsx("span",{children:w?"Capturing...":"Share Guide"})]})})]}),l.jsx("div",{className:"mb-4 p-3 bg-gray-700/30 rounded-lg text-xs text-gray-400 border-t border-gray-600",children:l.jsxs("p",{className:"text-center leading-relaxed",children:["Many thanks to the various authors of Hero Guide's on BoardGameGeek who's work aided in the creation of this page, notably: ",l.jsx("span",{className:"text-gray-300",children:"Mad_Mike"})," and ",l.jsx("span",{className:"text-gray-300",children:"TheTomTraveller"}),", but also ",l.jsx("span",{className:"text-gray-300",children:"CCplusplus"}),", ",l.jsx("span",{className:"text-gray-300",children:"Eric_McClain"}),", ",l.jsx("span",{className:"text-gray-300",children:"Drakonis1"}),", ",l.jsx("span",{className:"text-gray-300",children:"bcsj"}),", ",l.jsx("span",{className:"text-gray-300",children:"Deiflex"}),", ",l.jsx("span",{className:"text-gray-300",children:"Ramsar"}),", ",l.jsx("span",{className:"text-gray-300",children:"GoatRogan"}),", and ",l.jsx("span",{className:"text-gray-300",children:"NullEnvoy"}),"."]})}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 no-screenshot",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:o,onChange:P=>c(P.target.value),placeholder:"Search heroes, roles, or descriptions...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx(kl,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:()=>C("name"),className:`px-3 py-1 rounded ${A==="name"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Name ",A==="name"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>C("complexity"),className:`px-3 py-1 rounded ${A==="complexity"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Complexity ",A==="complexity"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>C("attack"),className:`px-3 py-1 rounded ${A==="attack"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Attack ",A==="attack"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>C("initiative"),className:`px-3 py-1 rounded ${A==="initiative"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Initiative ",A==="initiative"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>C("defence"),className:`px-3 py-1 rounded ${A==="defence"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Defence ",A==="defence"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>C("movement"),className:`px-3 py-1 rounded ${A==="movement"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Movement ",A==="movement"&&(h==="asc"?"":"")]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:j,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(os,{size:18,className:"mr-2"}),l.jsx("span",{children:"Filters"}),(f!=="all"||m!=="all"||v!=="all")&&l.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(f!=="all"?1:0)+(m!=="all"?1:0)+(v!=="all"?1:0)}),x?l.jsx(_r,{size:16,className:"ml-2"}):l.jsx(Dn,{size:16,className:"ml-2"})]}),x&&l.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-72",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Expansion"}),l.jsxs("select",{value:f,onChange:P=>g(P.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Expansions"}),I.map(P=>l.jsx("option",{value:P,children:P},P))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Role"}),l.jsxs("select",{value:m,onChange:P=>y(P.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Roles"}),F.map(P=>l.jsx("option",{value:P,children:P},P))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Complexity"}),l.jsxs("select",{value:v,onChange:P=>p(P.target.value==="all"?"all":parseInt(P.target.value)),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Complexity"}),l.jsx("option",{value:"1",children:" (Beginner)"}),l.jsx("option",{value:"2",children:" (Intermediate)"}),l.jsx("option",{value:"3",children:" (Advanced)"}),l.jsx("option",{value:"4",children:" (Expert)"})]})]}),l.jsx("button",{onClick:E,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),(f!=="all"||m!=="all"||v!=="all"||o!=="")&&l.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg screenshot-info",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Filtered View:"}),l.jsxs("ul",{className:"text-sm space-y-1",children:[f!=="all"&&l.jsxs("li",{children:["Expansion: ",f]}),m!=="all"&&l.jsxs("li",{children:["Role: ",m]}),v!=="all"&&l.jsxs("li",{children:["Complexity: ",v===1?"":v===2?"":v===3?"":""]}),o!==""&&l.jsxs("li",{children:['Search Term: "',o,'"']})]})]}),a?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsxs("div",{children:[l.jsx("div",{className:"mb-6",children:l.jsx(rF,{})}),T.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:T.map(P=>{const O=P.name||"Unknown Hero",Q=P.roles||[],R=P.additionalRoles||[],M=P.expansion||"Unknown",G=P.complexity||1,V=P.description||"This hero's abilities and playstyle are shrouded in mystery.";return l.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md",children:[l.jsxs("div",{className:"px-5 py-4 bg-gray-800 flex items-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-full overflow-hidden mr-4 flex-shrink-0",children:l.jsx("img",{src:P.icon,alt:O,className:"w-full h-full object-cover",onError:K=>{K.target.src="https://via.placeholder.com/64?text=Hero"}})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold",children:O}),l.jsx("div",{className:"text-sm text-gray-300",children:Q.join("  ")}),R.length>0&&l.jsx("div",{className:"text-xs text-gray-400 mt-1",children:R.join("  ")}),l.jsxs("div",{className:"text-xs mt-2 flex items-center",children:[l.jsxs("span",{className:"text-blue-400",children:["Expansion: ",M]}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"text-blue-400",children:"Complexity: "}),l.jsx("span",{className:"text-yellow-400 ml-1",children:[...Array(G)].map(K=>"").join("")}),l.jsx("span",{className:"text-gray-600",children:[...Array(4-G)].map(K=>"").join("")})]})]})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[L("Attack",P.attack||0,P.attack_upgraded||P.attack||0),L("Initiative",P.initiative||0,P.initiative_upgraded||P.initiative||0),L("Defence",P.defence||0,P.defence_upgraded||P.defence||0),L("Movement",P.movement||0,P.movement_upgraded||P.movement||0)]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Description"}),l.jsx("p",{className:"text-sm leading-relaxed",children:V})]})]})]},P.id)})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(Mt,{size:48,className:"text-gray-500 mb-4"}),l.jsx("p",{className:"text-xl text-gray-400",children:o||f!=="all"||m!=="all"||v!=="all"?"No heroes found matching your filters":"No hero data available"}),(o||f!=="all"||m!=="all"||v!=="all")&&l.jsx("button",{onClick:E,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg no-screenshot",children:"Clear Filters"})]})]}),l.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:[l.jsx("h4",{className:"font-bold mb-2",children:"How to Read the Stats"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Attack:"})," Higher values mean the hero deals more damage and has stronger offensive abilities."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Initiative:"})," Determines when a hero acts in combat. Higher values let heroes move earlier."]})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Defence:"})," Higher values give the hero better survivability and ability to withstand attacks."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Movement:"})," Determines how far a hero can travel each turn. Higher values give more mobility."]})]})]}),l.jsxs("p",{className:"mt-2",children:[l.jsx("strong",{children:"Upgrade Potential:"})," Light blue segments show stats that can be improved through upgrades."]})]})]})},hOe=(e,n,r)=>n>=7||n===6&&r&&e===dt.Long?{top:{currentWave:1,totalWaves:7},bottom:{currentWave:1,totalWaves:7},hasMultipleLanes:!0}:{single:{currentWave:1,totalWaves:e===dt.Quick?3:5},hasMultipleLanes:!1},fOe=(e,n,r)=>e===dt.Quick?n<=5?4:5:n===6&&!r?8:n<=5||n===6&&r||n<=8?6:7,P4=e=>{const n=[],r=e%2===1?e+1:e;return n.push({team:"A",action:"ban",round:1}),n.push({team:"B",action:"ban",round:1}),n.push({team:"A",action:"pick",round:1}),n.push({team:"B",action:"pick",round:1}),n.push({team:"B",action:"ban",round:2}),n.push({team:"A",action:"ban",round:2}),n.push({team:"B",action:"pick",round:2}),n.push({team:"A",action:"pick",round:2}),r>=6&&(n.push({team:"A",action:"ban",round:3}),n.push({team:"B",action:"ban",round:3}),n.push({team:"B",action:"pick",round:3}),n.push({team:"A",action:"pick",round:3})),r>=8&&(n.push({team:"B",action:"ban",round:4}),n.push({team:"A",action:"ban",round:4}),n.push({team:"A",action:"pick",round:4}),n.push({team:"B",action:"pick",round:4})),r>=10&&(n.push({team:"B",action:"ban",round:5}),n.push({team:"A",action:"ban",round:5}),n.push({team:"B",action:"pick",round:5}),n.push({team:"A",action:"pick",round:5})),n},SD=()=>({round:1,turn:1,gameLength:dt.Quick,waves:{[nt.Single]:{currentWave:1,totalWaves:3}},teamLives:{[ie.Titans]:4,[ie.Atlanteans]:4},currentPhase:"setup",activeHeroIndex:-1,coinSide:Math.random()>.5?ie.Titans:ie.Atlanteans,hasMultipleLanes:!1,completedTurns:[],allPlayersMoved:!1}),gOe=(e,n)=>{switch(n.type){case"START_GAME":return n.payload;case"START_STRATEGY":return{...e,currentPhase:"strategy",activeHeroIndex:-1};case"END_STRATEGY":return{...e,currentPhase:"move",activeHeroIndex:-1,completedTurns:[]};case"SELECT_PLAYER":return e.completedTurns.includes(n.playerIndex)?e:{...e,activeHeroIndex:n.playerIndex};case"MARK_PLAYER_COMPLETE":{const r=[...e.completedTurns,n.playerIndex];return r.length===wc.length?{...e,completedTurns:r,activeHeroIndex:-1,currentPhase:"turn-end",allPlayersMoved:!0}:{...e,completedTurns:r,activeHeroIndex:-1}}case"START_NEXT_TURN":{const r=e.turn+1;return r>4?{...e,round:e.round+1,turn:1,currentPhase:"strategy",completedTurns:[],allPlayersMoved:!1}:{...e,turn:r,currentPhase:"strategy",completedTurns:[],allPlayersMoved:!1}}case"ADJUST_TEAM_LIFE":return{...e,teamLives:{...e.teamLives,[n.team]:Math.max(0,e.teamLives[n.team]+n.delta)}};case"INCREMENT_WAVE":{if(n.lane===nt.Single&&!e.hasMultipleLanes){const r=e.waves[nt.Single];if(r)return{...e,waves:{...e.waves,[nt.Single]:{...r,currentWave:Math.min(r.currentWave+1,r.totalWaves)}}}}else if(e.hasMultipleLanes&&(n.lane===nt.Top||n.lane===nt.Bottom)){const r=e.waves[n.lane];if(r)return{...e,waves:{...e.waves,[n.lane]:{...r,currentWave:Math.min(r.currentWave+1,r.totalWaves)}}}}return e}case"DECREMENT_WAVE":{if(n.lane===nt.Single&&!e.hasMultipleLanes){const r=e.waves[nt.Single];if(r)return{...e,waves:{...e.waves,[nt.Single]:{...r,currentWave:Math.max(1,r.currentWave-1)}}}}else if(e.hasMultipleLanes&&(n.lane===nt.Top||n.lane===nt.Bottom)){const r=e.waves[n.lane];if(r)return{...e,waves:{...e.waves,[n.lane]:{...r,currentWave:Math.max(1,r.currentWave-1)}}}}return e}case"ADJUST_ROUND":{const r=Math.max(1,e.round+n.delta);return{...e,round:r}}case"ADJUST_TURN":{const r=Math.max(1,Math.min(4,e.turn+n.delta));return{...e,turn:r}}case"DECLARE_VICTORY":return{...e,currentPhase:"victory",victorTeam:n.team};case"RESET_GAME":return SD();case"FLIP_COIN":return{...e,coinSide:e.coinSide===ie.Titans?ie.Atlanteans:ie.Titans};default:return e}};let wc=[];function mOe(){const{playSound:e,unlockAudio:n,isAudioReady:r}=gt(),{isViewMode:s,isLoading:a,error:i}=ph(),[o,c]=S.useState(!1),[A,u]=S.useState(90),[h,d]=S.useState(30),[f,g]=S.useState(!0),[m,y]=S.useState(!0),[v,p]=S.useState(dt.Quick),[x,b]=S.useState(!1),[w,_]=S.useState([]),[B,k]=S.useState(()=>{const be=localStorage.getItem("goa-selected-expansions");if(be)try{const fe=JSON.parse(be);if(Array.isArray(fe)&&fe.every(_e=>typeof _e=="string"))return fe}catch{}return aA()}),[N,C]=S.useState(4),[j,E]=S.useState(!1),[F,I]=S.useState(!1),[T,L]=S.useState({mode:De.None,currentTeam:ie.Titans,availableHeroes:[],assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1}),[P,O]=S.useState([]),[Q,R]=S.useState(!1),[M,G]=S.useState(!1),[V,K]=S.useState(null),[se,de]=S.useState(!1),[ye,W]=S.useState("menu"),[U,$]=S.useState(null);S.useEffect(()=>{s&&!se&&(de(!0),W("menu"))},[s,se]);const[ne,J]=S.useState(!1),[z,oe]=S.useState(null),[Ce,Fe]=S.useState(""),Ne=zb(B).filter(be=>be.complexity<=N);wc=w;const Be=S.useRef(!1),pe=SD(),[he,Re]=S.useReducer(gOe,pe),[Le,ze]=S.useState(!1),[Ae,Me]=S.useState(!1),[le,te]=S.useState(A),[ge,Ge]=S.useState(h);S.useEffect(()=>{o&&!M&&(async()=>{try{await tc.saveGame({gameState:he,players:w,strategyTimeRemaining:le,moveTimeRemaining:ge,strategyTimerActive:Le,moveTimerActive:Ae,strategyTimerEnabled:f,moveTimerEnabled:m})}catch(fe){console.error("Error saving game state:",fe)}})()},[o,he.round,he.turn,he.currentPhase,he.teamLives,Le,Ae,M]),S.useEffect(()=>{!o&&!j&&(async()=>{try{const fe=await dfe.runMigrations();console.log(" Migration completed:",fe);const _e=await tc.loadGame();if(_e){const ut=new Date(_e.timestamp).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});oe(_e),Fe(ut),J(!0)}}catch(fe){console.error("App initialization error:",fe)}})()},[o,j]),S.useEffect(()=>{localStorage.setItem("goa-selected-expansions",JSON.stringify(B))},[B]),S.useEffect(()=>{const be=()=>{console.log("First interaction detected, unlocking audio"),n(),document.removeEventListener("click",be,!0),document.removeEventListener("keydown",be,!0),document.removeEventListener("touchstart",be,!0)};return document.addEventListener("click",be,!0),document.addEventListener("keydown",be,!0),document.addEventListener("touchstart",be,!0),()=>{document.removeEventListener("click",be,!0),document.removeEventListener("keydown",be,!0),document.removeEventListener("touchstart",be,!0)}},[n]);const D=()=>{const be=w.map(_e=>_e.name.trim()).filter(_e=>_e!=="");if(new Set(be).size!==be.length){const _e=[],$e=new Set;for(const ut of be)$e.has(ut)?_e.push(ut):$e.add(ut);return[...new Set(_e)]}return[]},X=be=>{if(w.length>=10)return;e("buttonClick");let fe;if(w.length>=7||w.length===5&&x&&v===dt.Long){if(w.length===6){const ut=w.map((it,ft)=>({...it,lane:ft<3?nt.Top:nt.Bottom}));_(ut)}w.length===5&&x&&v===dt.Long||w.length===6?fe=nt.Top:w.length===7?fe=nt.Bottom:w.length>=8&&(fe=w.length%2===0?nt.Top:nt.Bottom)}const $e={id:w.length+1,team:be,hero:null,lane:fe,name:""};_([...w,$e]),w.length>=7&&v===dt.Quick&&p(dt.Long)},re=be=>{if(!w.find(it=>it.id===be))return;e("buttonClick");const $e=w.filter(it=>it.id!==be).map((it,ft)=>({...it,id:ft+1}));if(_($e),!($e.length>=7||$e.length===6&&x&&v===dt.Long)){const it=$e.map(ft=>({...ft,lane:void 0}));_(it)}},xe=be=>{if(be===dt.Quick&&w.length>6){alert("Quick game is only available for 6 or fewer players");return}if(e("toggleSwitch"),be===dt.Long&&w.length===6&&x){const fe=w.map(_e=>({..._e,lane:void 0}));_(fe),b(!1)}p(be)},me=be=>{e("toggleSwitch"),B.includes(be)?k(B.filter(fe=>fe!==be)):k([...B,be])},Pe=(be,fe)=>{const _e=w.map($e=>$e.id===be?{...$e,name:fe}:$e);_(_e),Be.current=!1},Ie=be=>{const fe=w.length,_e=Ne.length;switch(be){case De.AllPick:return _e>=fe;case De.Single:return _e>=fe*3;case De.Random:return _e>=fe+2;case De.PickAndBan:return _e>=fe*2;default:return!1}},[Y,ee]=S.useState(null),ae=()=>{n();const be=D();if(be.length>0){alert(`Players must have unique names. Duplicates found: ${be.join(", ")}`);return}e("buttonClick");const fe=w.filter(it=>it.team===ie.Titans),_e=w.filter(it=>it.team===ie.Atlanteans);if(Math.abs(fe.length-_e.length)>1){alert("Teams must have equal player counts or differ by only 1 player");return}if(fe.length!==_e.length){const it=fe.length>_e.length?ie.Titans:ie.Atlanteans;ee(it)}else ee(null);if(fe.length<2||_e.length<2){alert("Each team must have at least 2 players");return}if(w.filter(it=>!it.name.trim()).length>0){alert("All players must enter their names");return}if(!Ie(De.AllPick)){alert("Not enough heroes in selected expansions. Please select more expansions, increase complexity, or reduce player count.");return}const ut=Math.random()>.5?ie.Titans:ie.Atlanteans;Re({type:"START_GAME",payload:{...pe,coinSide:ut}}),e("coinFlip"),R(!0)},Se=be=>{let fe;const _e=w.length;e("buttonClick");const $e=[...Ne],ut=he.coinSide,it=zl([...$e]);switch(be){case De.AllPick:fe={mode:be,currentTeam:ut,availableHeroes:it,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};break;case De.Single:const ft=[...it],Gt=w.map(Hs=>{const hs=[];for(let fs=0;fs<3;fs++)if(ft.length>0){const _t=Math.floor(Math.random()*ft.length);hs.push(ft[_t]),ft.splice(_t,1)}return{playerId:Hs.id,heroOptions:hs}});fe={mode:be,currentTeam:ut,availableHeroes:[],assignedHeroes:Gt,selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};break;case De.Random:const ds=it.slice(0,Math.min(_e+2,it.length));fe={mode:be,currentTeam:ut,availableHeroes:ds,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};break;case De.PickAndBan:const va=P4(_e);fe={mode:be,currentTeam:ut,availableHeroes:it,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:va,isComplete:!1};break;default:fe={mode:De.None,currentTeam:ut,availableHeroes:[],assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1}}L(fe),O([]),I(!1),E(!0)},we=(be,fe)=>{if(O(_t=>[..._t,{...T}]),e("heroSelect"),!w.find(_t=>_t.id===fe))return;const $e=[...T.selectedHeroes,{playerId:fe,hero:be}],ut=T.availableHeroes.filter(_t=>_t.id!==be.id),it=T.mode===De.Single?T.assignedHeroes.map(_t=>_t.playerId===fe?{..._t,heroOptions:[]}:_t):T.assignedHeroes;let ft=T.currentTeam,Gt=T.currentStep,ds=!1;const va=w.filter(_t=>_t.team===ie.Titans),Hs=w.filter(_t=>_t.team===ie.Atlanteans),hs=$e.filter(_t=>{var zn;return((zn=w.find(Tn=>Tn.id===_t.playerId))==null?void 0:zn.team)===ie.Titans}).length,fs=$e.filter(_t=>{var zn;return((zn=w.find(Tn=>Tn.id===_t.playerId))==null?void 0:zn.team)===ie.Atlanteans}).length;if(hs>=va.length&&fs>=Hs.length&&(ds=!0),T.mode===De.Single||T.mode===De.AllPick||T.mode===De.Random){const _t=hs>=va.length,zn=fs>=Hs.length;_t&&!zn?ft=ie.Atlanteans:zn&&!_t?ft=ie.Titans:ft=T.currentTeam===ie.Titans?ie.Atlanteans:ie.Titans}else if(T.mode===De.PickAndBan)if(Gt=T.currentStep+1,Gt>=T.pickBanSequence.length)ds=!0;else{let _t=!1;do{const zn=T.pickBanSequence[Gt];if(zn&&zn.action==="pick"){const Tn=he.coinSide===ie.Titans;if((zn.team==="A"?Tn?ie.Titans:ie.Atlanteans:Tn?ie.Atlanteans:ie.Titans)===ie.Titans?hs>=va.length:fs>=Hs.length){if(_t=!0,Gt++,Gt>=T.pickBanSequence.length){ds=!0;break}}else _t=!1}else _t=!1}while(_t&&Gt<T.pickBanSequence.length);if(!ds&&Gt<T.pickBanSequence.length){const zn=T.pickBanSequence[Gt].team,Tn=he.coinSide===ie.Titans;zn==="A"?ft=Tn?ie.Titans:ie.Atlanteans:ft=Tn?ie.Atlanteans:ie.Titans}}L({...T,currentTeam:ft,availableHeroes:ut,assignedHeroes:it,selectedHeroes:$e,currentStep:Gt,isComplete:ds})},ke=be=>{if(O(ft=>[...ft,{...T}]),e("heroBan"),T.mode!==De.PickAndBan)return;const fe=[...T.bannedHeroes,be],_e=T.availableHeroes.filter(ft=>ft.id!==be.id),$e=T.currentStep+1;let ut=T.currentTeam,it=T.isComplete;if($e>=T.pickBanSequence.length)it=!0;else{const ft=T.pickBanSequence[$e].team,Gt=he.coinSide===ie.Titans;ft==="A"?ut=Gt?ie.Titans:ie.Atlanteans:ut=Gt?ie.Atlanteans:ie.Titans}L({...T,currentTeam:ut,availableHeroes:_e,bannedHeroes:fe,currentStep:$e,isComplete:it})},Qe=()=>{if(P.length>0){e("buttonClick");const be=P[P.length-1];O(fe=>fe.slice(0,-1)),L(be)}},Te=be=>{const fe=w.length,_e=[...Ne],$e=he.coinSide,ut=zl([..._e]);switch(be){case De.AllPick:return{mode:be,currentTeam:$e,availableHeroes:ut,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};case De.Single:const it=[...ut],ft=w.map(va=>{const Hs=[];for(let hs=0;hs<3;hs++)if(it.length>0){const fs=Math.floor(Math.random()*it.length);Hs.push(it[fs]),it.splice(fs,1)}return{playerId:va.id,heroOptions:Hs}});return{mode:be,currentTeam:$e,availableHeroes:[],assignedHeroes:ft,selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};case De.Random:const Gt=ut.slice(0,Math.min(fe+2,ut.length));return{mode:be,currentTeam:$e,availableHeroes:Gt,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};case De.PickAndBan:const ds=P4(fe);return{mode:be,currentTeam:$e,availableHeroes:ut,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:ds,isComplete:!1};default:return{mode:De.None,currentTeam:$e,availableHeroes:[],assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1}}},at=()=>{e("buttonClick");const be=Te(T.mode);L(be),O([])},mt=()=>{e("buttonClick"),E(!1),I(!0),O([])},bt=()=>{const be=w.map(fe=>{const _e=T.selectedHeroes.find($e=>$e.playerId===fe.id);return _e?{...fe,hero:_e.hero}:fe});e("phaseChange"),_(be),wc=be,ht(be)},ht=be=>{const fe=be.length,_e=be.map(ft=>{var Gt;return{...ft,stats:(Gt=ft.stats)!=null&&Gt.level?{level:ft.stats.level}:void 0}});_(_e),wc=_e;const $e=hOe(v,fe,x),ut=fOe(v,fe,x),it={round:1,turn:1,gameLength:v,waves:$e.hasMultipleLanes?{[nt.Top]:$e.top,[nt.Bottom]:$e.bottom}:{[nt.Single]:$e.single},teamLives:{[ie.Titans]:ut,[ie.Atlanteans]:ut},currentPhase:"strategy",activeHeroIndex:-1,coinSide:he.coinSide,hasMultipleLanes:$e.hasMultipleLanes,completedTurns:[],allPlayersMoved:!1};Re({type:"START_GAME",payload:it}),c(!0),ze(!0),te(A),E(!1),tc.clearGame().catch(console.error),e("turnStart")},vt=()=>{e("buttonClick"),E(!1),I(!1)},Kt=be=>{he.activeHeroIndex===-1&&!he.completedTurns.includes(be)&&(e("heroSelect"),Re({type:"SELECT_PLAYER",playerIndex:be}),Me(!0),Ge(h))},Ln=()=>{he.activeHeroIndex>=0&&(e("turnComplete"),Me(!1),Re({type:"MARK_PLAYER_COMPLETE",playerIndex:he.activeHeroIndex}))},Hn=()=>{e("turnStart"),Re({type:"START_NEXT_TURN"}),ze(!0),te(A)},dn=()=>{e("phaseChange"),ze(!1),Re({type:"END_STRATEGY"})},Nr=()=>{e("buttonClick"),te(A)},pa=()=>{e("buttonClick"),Ge(h)},Ze=(be,fe)=>{e("lifeChange"),Re({type:"ADJUST_TEAM_LIFE",team:be,delta:fe})},ya=be=>{e("buttonClick"),Re({type:"INCREMENT_WAVE",lane:be})},Fo=be=>{e("buttonClick"),Re({type:"DECREMENT_WAVE",lane:be})},En=be=>{e("buttonClick"),Re({type:"ADJUST_ROUND",delta:be})},tn=be=>{e("buttonClick"),Re({type:"ADJUST_TURN",delta:be})},Mi=be=>{e("victory"),ze(!1),Me(!1),K(be),G(!0),tc.clearGame().catch(console.error)},ey=()=>{e("buttonClick"),ze(!1),Me(!1),te(A),Ge(h),G(!1),K(null),c(!1),E(!1),I(!1),Re({type:"RESET_GAME"}),tc.clearGame().catch(console.error)},ty=()=>{e("coinFlip"),Re({type:"FLIP_COIN"})},ny=()=>{if(!z)return;e("buttonClick");const{gameState:be,players:fe,strategyTimeRemaining:_e,moveTimeRemaining:$e,strategyTimerActive:ut,moveTimerActive:it,strategyTimerEnabled:ft,moveTimerEnabled:Gt}=z;Re({type:"START_GAME",payload:be}),_(fe),wc=fe,te(_e),Ge($e),ze(ut),Me(it),g(ft),y(Gt),c(!0),J(!1)},ry=()=>{e("buttonClick"),tc.clearGame().catch(console.error),J(!1)},Rh=be=>{const fe=w.map(_e=>{var ut,it,ft,Gt,ds,va,Hs,hs,fs,_t,zn;const $e=be[_e.id];if($e&&(($e.kills??0)>0||($e.deaths??0)>0||($e.assists??0)>0||($e.goldCollected??0)>0||($e.minionKills??0)>0||$e.level)){const Tn={};return(($e.kills??0)>0||(ut=_e.stats)!=null&&ut.totalKills)&&(Tn.totalKills=(((it=_e.stats)==null?void 0:it.totalKills)||0)+($e.kills??0)),(($e.deaths??0)>0||(ft=_e.stats)!=null&&ft.totalDeaths)&&(Tn.totalDeaths=(((Gt=_e.stats)==null?void 0:Gt.totalDeaths)||0)+($e.deaths??0)),(($e.assists??0)>0||(ds=_e.stats)!=null&&ds.totalAssists)&&(Tn.totalAssists=(((va=_e.stats)==null?void 0:va.totalAssists)||0)+($e.assists??0)),(($e.goldCollected??0)>0||(Hs=_e.stats)!=null&&Hs.totalGoldEarned)&&(Tn.totalGoldEarned=(((hs=_e.stats)==null?void 0:hs.totalGoldEarned)||0)+($e.goldCollected??0)),(($e.minionKills??0)>0||(fs=_e.stats)!=null&&fs.totalMinionKills)&&(Tn.totalMinionKills=(((_t=_e.stats)==null?void 0:_t.totalMinionKills)||0)+($e.minionKills??0)),$e.level?Tn.level=$e.level:(zn=_e.stats)!=null&&zn.level&&(Tn.level=_e.stats.level),{..._e,stats:Tn}}return _e});_(fe),wc=fe};S.useEffect(()=>{let be;return Le&&le>0?be=setTimeout(()=>{le===11&&e("timerWarning"),r&&e("timerTick"),te(le-1)},1e3):Le&&le===0&&(e("timerComplete"),ze(!1),dn()),()=>clearTimeout(be)},[Le,le,e,r]),S.useEffect(()=>{let be;return Ae&&ge>0?be=setTimeout(()=>{ge===11&&e("timerWarning"),r&&e("timerTick"),Ge(ge-1)},1e3):Ae&&ge===0&&(e("timerComplete"),Me(!1),Ln()),()=>clearTimeout(be)},[Ae,ge,e,r]);const zl=be=>{const fe=[...be];for(let _e=fe.length-1;_e>0;_e--){const $e=Math.floor(Math.random()*(_e+1));[fe[_e],fe[$e]]=[fe[$e],fe[_e]]}if(fe.length>3){const _e=Math.floor(fe.length/2),$e=fe.slice(0,_e);return[...fe.slice(_e),...$e]}return fe},Io=()=>{e("buttonClick"),de(!0),W("menu")},Kr=be=>{s&&be==="record-match"||W(be)},sy=()=>{s||de(!1)};return l.jsxs("div",{className:"App min-h-screen bg-gradient-to-b from-blue-400 to-orange-300 text-white p-6",children:[l.jsx(ofe,{}),l.jsx(e0e,{}),l.jsx("header",{className:`App-header mb-8 ${s||a||i?"mt-12":""}`,children:l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Guards of Atlantis II Timer"})}),ne&&z&&l.jsx(Afe,{gameState:z.gameState,players:z.players,onResume:ny,onDiscard:ry,savedTime:Ce}),Q&&l.jsx(Jhe,{result:he.coinSide,onComplete:()=>{R(!1),I(!0)}}),se?l.jsxs(Lfe,{children:[ye==="menu"&&l.jsx(R3e,{onBack:sy,onNavigate:Kr}),ye==="skill-over-time"&&l.jsx(M3e,{onBack:()=>Kr("player-stats")}),ye==="player-stats"&&l.jsx(AQe,{onBack:()=>Kr("menu"),onViewSkillOverTime:()=>Kr("skill-over-time"),onViewPlayerDetails:be=>{$(be),Kr("detailed-player-stats")}}),ye==="detailed-player-stats"&&U&&l.jsx(xQe,{playerId:U,onBack:()=>{$(null),Kr("player-stats")}}),ye==="hero-stats"&&l.jsx(MQe,{onBack:()=>Kr("menu")}),ye==="match-history"&&l.jsx(_Qe,{onBack:()=>Kr("menu")}),ye==="hero-info"&&l.jsx(dOe,{onBack:()=>Kr("menu")}),ye==="record-match"&&l.jsx(QQe,{onBack:()=>Kr("menu")}),ye==="match-maker"&&l.jsx(FQe,{onBack:()=>Kr("menu"),onUseTeams:s?void 0:(be,fe)=>{_([]);const _e=be.map((it,ft)=>({id:ft+1,team:ie.Titans,hero:null,name:it})),$e=fe.map((it,ft)=>({id:be.length+ft+1,team:ie.Atlanteans,hero:null,name:it})),ut=[..._e,...$e];_(ut),de(!1),e("phaseChange")}})]}):o?l.jsx(Xhe,{gameState:he,players:w,strategyTimeRemaining:le,moveTimeRemaining:ge,strategyTimerEnabled:f,moveTimerEnabled:m,strategyTimerActive:Le,moveTimerActive:Ae,onStartStrategyTimer:()=>ze(!0),onPauseStrategyTimer:()=>ze(!1),onResetStrategyTimer:Nr,onEndStrategyPhase:dn,onStartMoveTimer:()=>Me(!0),onPauseMoveTimer:()=>Me(!1),onResetMoveTimer:pa,onSelectPlayer:Kt,onCompletePlayerTurn:Ln,onStartNextTurn:Hn,onAdjustTeamLife:Ze,onIncrementWave:ya,onDecrementWave:Fo,onAdjustRound:En,onAdjustTurn:tn,onDeclareVictory:Mi,onFlipCoin:ty,onSavePlayerStats:Rh}):l.jsx("div",{className:"game-setup-container",children:F?l.jsx(Zhe,{onSelectMode:Se,onCancel:()=>I(!1),playerCount:w.length,availableDraftModes:{[De.AllPick]:Ie(De.AllPick),[De.Single]:Ie(De.Single),[De.Random]:Ie(De.Random),[De.PickAndBan]:Ie(De.PickAndBan)},heroCount:Ne.length,handicapTeam:Y}):j?l.jsx(Yhe,{players:w,availableHeroes:Ne,draftingState:T,onHeroSelect:we,onHeroBan:ke,onFinishDrafting:bt,onCancelDrafting:vt,onUndoLastAction:Qe,onResetDraft:at,onBackToDraftSelection:mt,canUndo:P.length>0}):l.jsx(Vhe,{strategyTime:A,moveTime:h,gameLength:v,strategyTimerEnabled:f,moveTimerEnabled:m,onStrategyTimeChange:u,onMoveTimeChange:d,onGameLengthChange:xe,onStrategyTimerEnabledChange:g,onMoveTimerEnabledChange:y,players:w,onAddPlayer:X,onRemovePlayer:re,onDraftHeroes:ae,selectedExpansions:B,onToggleExpansion:me,onPlayerNameChange:Pe,duplicateNames:D(),canStartDrafting:Ie(De.AllPick),heroCount:Ne.length,maxComplexity:N,onMaxComplexityChange:C,useDoubleLaneFor6Players:x,onUseDoubleLaneFor6PlayersChange:b,onViewMatches:Io})}),M&&V&&l.jsx(cfe,{winningTeam:V,onReturnToSetup:ey,players:w,gameLength:v,doubleLanes:he.hasMultipleLanes,onUpdatePlayerStats:Rh}),l.jsx(efe,{feedbackUrl:"https://forms.gle/dsjjDSbqhTn3hATt6"}),l.jsx(tfe,{}),!s&&l.jsx(Jfe,{}),l.jsx(ife,{id:"cloud-sync-v1",title:"New: Cloud Sync!",description:l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"mb-2",children:"You can now sync your match data across devices and with friends!"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-400",children:[l.jsx("li",{children:"Create an account to back up your data"}),l.jsx("li",{children:"Sync matches across your own devices"}),l.jsx("li",{children:"Share match data with friends"})]}),l.jsxs("p",{className:"mt-3 text-orange-400",children:["Look for the ",l.jsx("strong",{children:"orange arrow"})," in the top-right corner to get started."]})]})})]})}function pOe(){return l.jsx(yO,{children:l.jsx(Rfe,{children:l.jsx(Ofe,{children:l.jsx(rfe,{children:l.jsx(mOe,{})})})})})}Xv.createRoot(document.getElementById("root")).render(l.jsx(q.StrictMode,{children:l.jsx(pOe,{})}));
