var NU=Object.defineProperty;var FU=(t,e,r)=>e in t?NU(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Z=(t,e,r)=>(FU(t,typeof e!="symbol"?e+"":e,r),r);var mA=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)};function TU(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function St(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var TS={exports:{}},i0={},US={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fu=Symbol.for("react.element"),UU=Symbol.for("react.portal"),QU=Symbol.for("react.fragment"),IU=Symbol.for("react.strict_mode"),PU=Symbol.for("react.profiler"),DU=Symbol.for("react.provider"),MU=Symbol.for("react.context"),RU=Symbol.for("react.forward_ref"),$U=Symbol.for("react.suspense"),OU=Symbol.for("react.memo"),LU=Symbol.for("react.lazy"),yb=Symbol.iterator;function HU(t){return t===null||typeof t!="object"?null:(t=yb&&t[yb]||t["@@iterator"],typeof t=="function"?t:null)}var QS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IS=Object.assign,PS={};function Zl(t,e,r){this.props=t,this.context=e,this.refs=PS,this.updater=r||QS}Zl.prototype.isReactComponent={};Zl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DS(){}DS.prototype=Zl.prototype;function Zv(t,e,r){this.props=t,this.context=e,this.refs=PS,this.updater=r||QS}var ex=Zv.prototype=new DS;ex.constructor=Zv;IS(ex,Zl.prototype);ex.isPureReactComponent=!0;var vb=Array.isArray,MS=Object.prototype.hasOwnProperty,tx={current:null},RS={key:!0,ref:!0,__self:!0,__source:!0};function $S(t,e,r){var n,s={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)MS.call(e,n)&&!RS.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var A=Array(l),u=0;u<l;u++)A[u]=arguments[u+2];s.children=A}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:fu,type:t,key:a,ref:o,props:s,_owner:tx.current}}function KU(t,e){return{$$typeof:fu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function rx(t){return typeof t=="object"&&t!==null&&t.$$typeof===fu}function zU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var xb=/\/+/g;function Mg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zU(""+t.key):e.toString(36)}function th(t,e,r,n,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case fu:case UU:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Mg(o,0):n,vb(s)?(r="",t!=null&&(r=t.replace(xb,"$&/")+"/"),th(s,e,r,"",function(u){return u})):s!=null&&(rx(s)&&(s=KU(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(xb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",vb(t))for(var l=0;l<t.length;l++){a=t[l];var A=n+Mg(a,l);o+=th(a,e,r,A,s)}else if(A=HU(t),typeof A=="function")for(t=A.call(t),l=0;!(a=t.next()).done;)a=a.value,A=n+Mg(a,l++),o+=th(a,e,r,A,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ju(t,e,r){if(t==null)return t;var n=[],s=0;return th(t,n,"","",function(a){return e.call(r,a,s++)}),n}function GU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Or={current:null},rh={transition:null},WU={ReactCurrentDispatcher:Or,ReactCurrentBatchConfig:rh,ReactCurrentOwner:tx};function OS(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Ju,forEach:function(t,e,r){Ju(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Ju(t,function(){e++}),e},toArray:function(t){return Ju(t,function(e){return e})||[]},only:function(t){if(!rx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=Zl;He.Fragment=QU;He.Profiler=PU;He.PureComponent=Zv;He.StrictMode=IU;He.Suspense=$U;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WU;He.act=OS;He.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=IS({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=tx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(A in e)MS.call(e,A)&&!RS.hasOwnProperty(A)&&(n[A]=e[A]===void 0&&l!==void 0?l[A]:e[A])}var A=arguments.length-2;if(A===1)n.children=r;else if(1<A){l=Array(A);for(var u=0;u<A;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:fu,type:t.type,key:s,ref:a,props:n,_owner:o}};He.createContext=function(t){return t={$$typeof:MU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:DU,_context:t},t.Consumer=t};He.createElement=$S;He.createFactory=function(t){var e=$S.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:RU,render:t}};He.isValidElement=rx;He.lazy=function(t){return{$$typeof:LU,_payload:{_status:-1,_result:t},_init:GU}};He.memo=function(t,e){return{$$typeof:OU,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=rh.transition;rh.transition={};try{t()}finally{rh.transition=e}};He.unstable_act=OS;He.useCallback=function(t,e){return Or.current.useCallback(t,e)};He.useContext=function(t){return Or.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return Or.current.useDeferredValue(t)};He.useEffect=function(t,e){return Or.current.useEffect(t,e)};He.useId=function(){return Or.current.useId()};He.useImperativeHandle=function(t,e,r){return Or.current.useImperativeHandle(t,e,r)};He.useInsertionEffect=function(t,e){return Or.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return Or.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return Or.current.useMemo(t,e)};He.useReducer=function(t,e,r){return Or.current.useReducer(t,e,r)};He.useRef=function(t){return Or.current.useRef(t)};He.useState=function(t){return Or.current.useState(t)};He.useSyncExternalStore=function(t,e,r){return Or.current.useSyncExternalStore(t,e,r)};He.useTransition=function(){return Or.current.useTransition()};He.version="18.3.1";US.exports=He;var B=US.exports;const R=St(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VU=B,qU=Symbol.for("react.element"),XU=Symbol.for("react.fragment"),JU=Object.prototype.hasOwnProperty,YU=VU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZU={key:!0,ref:!0,__self:!0,__source:!0};function LS(t,e,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)JU.call(e,n)&&!ZU.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:qU,type:t,key:a,ref:o,props:s,_owner:YU.current}}i0.Fragment=XU;i0.jsx=LS;i0.jsxs=LS;TS.exports=i0;var i=TS.exports,vp={},HS={exports:{}},yn={},KS={exports:{}},zS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,M){var j=k.length;k.push(M);e:for(;0<j;){var I=j-1>>>1,G=k[I];if(0<s(G,M))k[I]=M,k[j]=G,j=I;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var M=k[0],j=k.pop();if(j!==M){k[0]=j;e:for(var I=0,G=k.length,X=G>>>1;I<X;){var te=2*(I+1)-1,Ae=k[te],ie=te+1,V=k[ie];if(0>s(Ae,j))ie<G&&0>s(V,Ae)?(k[I]=V,k[ie]=j,I=ie):(k[I]=Ae,k[te]=j,I=te);else if(ie<G&&0>s(V,j))k[I]=V,k[ie]=j,I=ie;else break e}}return M}function s(k,M){var j=k.sortIndex-M.sortIndex;return j!==0?j:k.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var A=[],u=[],h=1,c=null,d=3,f=!1,g=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(k){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=k)n(u),M.sortIndex=M.expirationTime,e(A,M);else break;M=r(u)}}function w(k){if(y=!1,x(k),!g)if(r(A)!==null)g=!0,D(_);else{var M=r(u);M!==null&&z(w,M.startTime-k)}}function _(k,M){g=!1,y&&(y=!1,m(E),E=-1),f=!0;var j=d;try{for(x(M),c=r(A);c!==null&&(!(c.expirationTime>M)||k&&!Q());){var I=c.callback;if(typeof I=="function"){c.callback=null,d=c.priorityLevel;var G=I(c.expirationTime<=M);M=t.unstable_now(),typeof G=="function"?c.callback=G:c===r(A)&&n(A),x(M)}else n(A);c=r(A)}if(c!==null)var X=!0;else{var te=r(u);te!==null&&z(w,te.startTime-M),X=!1}return X}finally{c=null,d=j,f=!1}}var b=!1,S=null,E=-1,C=5,N=-1;function Q(){return!(t.unstable_now()-N<C)}function P(){if(S!==null){var k=t.unstable_now();N=k;var M=!0;try{M=S(!0,k)}finally{M?F():(b=!1,S=null)}}else b=!1}var F;if(typeof p=="function")F=function(){p(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,L=$.port2;$.port1.onmessage=P,F=function(){L.postMessage(null)}}else F=function(){v(P,0)};function D(k){S=k,b||(b=!0,F())}function z(k,M){E=v(function(){k(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,D(_))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(A)},t.unstable_next=function(k){switch(d){case 1:case 2:case 3:var M=3;break;default:M=d}var j=d;d=M;try{return k()}finally{d=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var j=d;d=k;try{return M()}finally{d=j}},t.unstable_scheduleCallback=function(k,M,j){var I=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?I+j:I):j=I,k){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=j+G,k={id:h++,callback:M,priorityLevel:k,startTime:j,expirationTime:G,sortIndex:-1},j>I?(k.sortIndex=j,e(u,k),r(A)===null&&k===r(u)&&(y?(m(E),E=-1):y=!0,z(w,j-I))):(k.sortIndex=G,e(A,k),g||f||(g=!0,D(_))),k},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(k){var M=d;return function(){var j=d;d=M;try{return k.apply(this,arguments)}finally{d=j}}}})(zS);KS.exports=zS;var eQ=KS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tQ=B,mn=eQ;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GS=new Set,kc={};function io(t,e){Ul(t,e),Ul(t+"Capture",e)}function Ul(t,e){for(kc[t]=e,t=0;t<e.length;t++)GS.add(e[t])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xp=Object.prototype.hasOwnProperty,rQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wb={},bb={};function nQ(t){return xp.call(bb,t)?!0:xp.call(wb,t)?!1:rQ.test(t)?bb[t]=!0:(wb[t]=!0,!1)}function sQ(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aQ(t,e,r,n){if(e===null||typeof e>"u"||sQ(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lr(t,e,r,n,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fr[t]=new Lr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fr[e]=new Lr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fr[t]=new Lr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fr[t]=new Lr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fr[t]=new Lr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fr[t]=new Lr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fr[t]=new Lr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fr[t]=new Lr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fr[t]=new Lr(t,5,!1,t.toLowerCase(),null,!1,!1)});var nx=/[\-:]([a-z])/g;function sx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nx,sx);fr[e]=new Lr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nx,sx);fr[e]=new Lr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nx,sx);fr[e]=new Lr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fr[t]=new Lr(t,1,!1,t.toLowerCase(),null,!1,!1)});fr.xlinkHref=new Lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fr[t]=new Lr(t,1,!1,t.toLowerCase(),null,!0,!0)});function ax(t,e,r,n){var s=fr.hasOwnProperty(e)?fr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aQ(e,r,s,n)&&(r=null),n||s===null?nQ(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var pa=tQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yu=Symbol.for("react.element"),il=Symbol.for("react.portal"),ol=Symbol.for("react.fragment"),ix=Symbol.for("react.strict_mode"),wp=Symbol.for("react.profiler"),WS=Symbol.for("react.provider"),VS=Symbol.for("react.context"),ox=Symbol.for("react.forward_ref"),bp=Symbol.for("react.suspense"),_p=Symbol.for("react.suspense_list"),lx=Symbol.for("react.memo"),Na=Symbol.for("react.lazy"),qS=Symbol.for("react.offscreen"),_b=Symbol.iterator;function pA(t){return t===null||typeof t!="object"?null:(t=_b&&t[_b]||t["@@iterator"],typeof t=="function"?t:null)}var Bt=Object.assign,Rg;function LA(t){if(Rg===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Rg=e&&e[1]||""}return`
`+Rg+t}var $g=!1;function Og(t,e){if(!t||$g)return"";$g=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var A=`
`+s[o].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=o&&0<=l);break}}}finally{$g=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?LA(t):""}function iQ(t){switch(t.tag){case 5:return LA(t.type);case 16:return LA("Lazy");case 13:return LA("Suspense");case 19:return LA("SuspenseList");case 0:case 2:case 15:return t=Og(t.type,!1),t;case 11:return t=Og(t.type.render,!1),t;case 1:return t=Og(t.type,!0),t;default:return""}}function Cp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ol:return"Fragment";case il:return"Portal";case wp:return"Profiler";case ix:return"StrictMode";case bp:return"Suspense";case _p:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VS:return(t.displayName||"Context")+".Consumer";case WS:return(t._context.displayName||"Context")+".Provider";case ox:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lx:return e=t.displayName||null,e!==null?e:Cp(t.type)||"Memo";case Na:e=t._payload,t=t._init;try{return Cp(t(e))}catch{}}return null}function oQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cp(e);case 8:return e===ix?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function XS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lQ(t){var e=XS(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zu(t){t._valueTracker||(t._valueTracker=lQ(t))}function JS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=XS(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function kh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bp(t,e){var r=e.checked;return Bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Cb(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=si(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YS(t,e){e=e.checked,e!=null&&ax(t,"checked",e,!1)}function Sp(t,e){YS(t,e);var r=si(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jp(t,e.type,r):e.hasOwnProperty("defaultValue")&&jp(t,e.type,si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bb(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function jp(t,e,r){(e!=="number"||kh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var HA=Array.isArray;function xl(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+si(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function kp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sb(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ae(92));if(HA(r)){if(1<r.length)throw Error(ae(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:si(r)}}function ZS(t,e){var r=si(e.value),n=si(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function jb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ej(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ep(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ej(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ed,tj=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ed=ed||document.createElement("div"),ed.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ed.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ec(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var lc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AQ=["Webkit","ms","Moz","O"];Object.keys(lc).forEach(function(t){AQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),lc[e]=lc[t]})});function rj(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||lc.hasOwnProperty(t)&&lc[t]?(""+e).trim():e+"px"}function nj(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=rj(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var cQ=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Np(t,e){if(e){if(cQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Fp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tp=null;function Ax(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Up=null,wl=null,bl=null;function kb(t){if(t=pu(t)){if(typeof Up!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=u0(e),Up(t.stateNode,t.type,e))}}function sj(t){wl?bl?bl.push(t):bl=[t]:wl=t}function aj(){if(wl){var t=wl,e=bl;if(bl=wl=null,kb(t),e)for(t=0;t<e.length;t++)kb(e[t])}}function ij(t,e){return t(e)}function oj(){}var Lg=!1;function lj(t,e,r){if(Lg)return t(e,r);Lg=!0;try{return ij(t,e,r)}finally{Lg=!1,(wl!==null||bl!==null)&&(oj(),aj())}}function Nc(t,e){var r=t.stateNode;if(r===null)return null;var n=u0(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ae(231,e,typeof r));return r}var Qp=!1;if(ia)try{var yA={};Object.defineProperty(yA,"passive",{get:function(){Qp=!0}}),window.addEventListener("test",yA,yA),window.removeEventListener("test",yA,yA)}catch{Qp=!1}function uQ(t,e,r,n,s,a,o,l,A){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Ac=!1,Eh=null,Nh=!1,Ip=null,dQ={onError:function(t){Ac=!0,Eh=t}};function hQ(t,e,r,n,s,a,o,l,A){Ac=!1,Eh=null,uQ.apply(dQ,arguments)}function fQ(t,e,r,n,s,a,o,l,A){if(hQ.apply(this,arguments),Ac){if(Ac){var u=Eh;Ac=!1,Eh=null}else throw Error(ae(198));Nh||(Nh=!0,Ip=u)}}function oo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Aj(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Eb(t){if(oo(t)!==t)throw Error(ae(188))}function gQ(t){var e=t.alternate;if(!e){if(e=oo(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Eb(s),t;if(a===n)return Eb(s),e;a=a.sibling}throw Error(ae(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(ae(189))}}if(r.alternate!==n)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?t:e}function cj(t){return t=gQ(t),t!==null?uj(t):null}function uj(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uj(t);if(e!==null)return e;t=t.sibling}return null}var dj=mn.unstable_scheduleCallback,Nb=mn.unstable_cancelCallback,mQ=mn.unstable_shouldYield,pQ=mn.unstable_requestPaint,Qt=mn.unstable_now,yQ=mn.unstable_getCurrentPriorityLevel,cx=mn.unstable_ImmediatePriority,hj=mn.unstable_UserBlockingPriority,Fh=mn.unstable_NormalPriority,vQ=mn.unstable_LowPriority,fj=mn.unstable_IdlePriority,o0=null,Cs=null;function xQ(t){if(Cs&&typeof Cs.onCommitFiberRoot=="function")try{Cs.onCommitFiberRoot(o0,t,void 0,(t.current.flags&128)===128)}catch{}}var ns=Math.clz32?Math.clz32:_Q,wQ=Math.log,bQ=Math.LN2;function _Q(t){return t>>>=0,t===0?32:31-(wQ(t)/bQ|0)|0}var td=64,rd=4194304;function KA(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Th(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=KA(l):(a&=o,a!==0&&(n=KA(a)))}else o=r&~s,o!==0?n=KA(o):a!==0&&(n=KA(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ns(e),s=1<<r,n|=t[r],e&=~s;return n}function CQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BQ(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-ns(a),l=1<<o,A=s[o];A===-1?(!(l&r)||l&n)&&(s[o]=CQ(l,e)):A<=e&&(t.expiredLanes|=l),a&=~l}}function Pp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gj(){var t=td;return td<<=1,!(td&4194240)&&(td=64),t}function Hg(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function gu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ns(e),t[e]=r}function SQ(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-ns(r),a=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~a}}function ux(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ns(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var tt=0;function mj(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pj,dx,yj,vj,xj,Dp=!1,nd=[],za=null,Ga=null,Wa=null,Fc=new Map,Tc=new Map,Qa=[],jQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fb(t,e){switch(t){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":Fc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(e.pointerId)}}function vA(t,e,r,n,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},e!==null&&(e=pu(e),e!==null&&dx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function kQ(t,e,r,n,s){switch(e){case"focusin":return za=vA(za,t,e,r,n,s),!0;case"dragenter":return Ga=vA(Ga,t,e,r,n,s),!0;case"mouseover":return Wa=vA(Wa,t,e,r,n,s),!0;case"pointerover":var a=s.pointerId;return Fc.set(a,vA(Fc.get(a)||null,t,e,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Tc.set(a,vA(Tc.get(a)||null,t,e,r,n,s)),!0}return!1}function wj(t){var e=Qi(t.target);if(e!==null){var r=oo(e);if(r!==null){if(e=r.tag,e===13){if(e=Aj(r),e!==null){t.blockedOn=e,xj(t.priority,function(){yj(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Mp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Tp=n,r.target.dispatchEvent(n),Tp=null}else return e=pu(r),e!==null&&dx(e),t.blockedOn=r,!1;e.shift()}return!0}function Tb(t,e,r){nh(t)&&r.delete(e)}function EQ(){Dp=!1,za!==null&&nh(za)&&(za=null),Ga!==null&&nh(Ga)&&(Ga=null),Wa!==null&&nh(Wa)&&(Wa=null),Fc.forEach(Tb),Tc.forEach(Tb)}function xA(t,e){t.blockedOn===e&&(t.blockedOn=null,Dp||(Dp=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,EQ)))}function Uc(t){function e(s){return xA(s,t)}if(0<nd.length){xA(nd[0],t);for(var r=1;r<nd.length;r++){var n=nd[r];n.blockedOn===t&&(n.blockedOn=null)}}for(za!==null&&xA(za,t),Ga!==null&&xA(Ga,t),Wa!==null&&xA(Wa,t),Fc.forEach(e),Tc.forEach(e),r=0;r<Qa.length;r++)n=Qa[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Qa.length&&(r=Qa[0],r.blockedOn===null);)wj(r),r.blockedOn===null&&Qa.shift()}var _l=pa.ReactCurrentBatchConfig,Uh=!0;function NQ(t,e,r,n){var s=tt,a=_l.transition;_l.transition=null;try{tt=1,hx(t,e,r,n)}finally{tt=s,_l.transition=a}}function FQ(t,e,r,n){var s=tt,a=_l.transition;_l.transition=null;try{tt=4,hx(t,e,r,n)}finally{tt=s,_l.transition=a}}function hx(t,e,r,n){if(Uh){var s=Mp(t,e,r,n);if(s===null)Zg(t,e,n,Qh,r),Fb(t,n);else if(kQ(s,t,e,r,n))n.stopPropagation();else if(Fb(t,n),e&4&&-1<jQ.indexOf(t)){for(;s!==null;){var a=pu(s);if(a!==null&&pj(a),a=Mp(t,e,r,n),a===null&&Zg(t,e,n,Qh,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Zg(t,e,n,null,r)}}var Qh=null;function Mp(t,e,r,n){if(Qh=null,t=Ax(n),t=Qi(t),t!==null)if(e=oo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Aj(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qh=t,null}function bj(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yQ()){case cx:return 1;case hj:return 4;case Fh:case vQ:return 16;case fj:return 536870912;default:return 16}default:return 16}}var Ra=null,fx=null,sh=null;function _j(){if(sh)return sh;var t,e=fx,r=e.length,n,s="value"in Ra?Ra.value:Ra.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[a-n];n++);return sh=s.slice(t,1<n?1-n:void 0)}function ah(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sd(){return!0}function Ub(){return!1}function vn(t){function e(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?sd:Ub,this.isPropagationStopped=Ub,this}return Bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=sd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=sd)},persist:function(){},isPersistent:sd}),e}var eA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gx=vn(eA),mu=Bt({},eA,{view:0,detail:0}),TQ=vn(mu),Kg,zg,wA,l0=Bt({},mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wA&&(wA&&t.type==="mousemove"?(Kg=t.screenX-wA.screenX,zg=t.screenY-wA.screenY):zg=Kg=0,wA=t),Kg)},movementY:function(t){return"movementY"in t?t.movementY:zg}}),Qb=vn(l0),UQ=Bt({},l0,{dataTransfer:0}),QQ=vn(UQ),IQ=Bt({},mu,{relatedTarget:0}),Gg=vn(IQ),PQ=Bt({},eA,{animationName:0,elapsedTime:0,pseudoElement:0}),DQ=vn(PQ),MQ=Bt({},eA,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RQ=vn(MQ),$Q=Bt({},eA,{data:0}),Ib=vn($Q),OQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HQ[t])?!!e[t]:!1}function mx(){return KQ}var zQ=Bt({},mu,{key:function(t){if(t.key){var e=OQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ah(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mx,charCode:function(t){return t.type==="keypress"?ah(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ah(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GQ=vn(zQ),WQ=Bt({},l0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pb=vn(WQ),VQ=Bt({},mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mx}),qQ=vn(VQ),XQ=Bt({},eA,{propertyName:0,elapsedTime:0,pseudoElement:0}),JQ=vn(XQ),YQ=Bt({},l0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZQ=vn(YQ),eI=[9,13,27,32],px=ia&&"CompositionEvent"in window,cc=null;ia&&"documentMode"in document&&(cc=document.documentMode);var tI=ia&&"TextEvent"in window&&!cc,Cj=ia&&(!px||cc&&8<cc&&11>=cc),Db=String.fromCharCode(32),Mb=!1;function Bj(t,e){switch(t){case"keyup":return eI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sj(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ll=!1;function rI(t,e){switch(t){case"compositionend":return Sj(e);case"keypress":return e.which!==32?null:(Mb=!0,Db);case"textInput":return t=e.data,t===Db&&Mb?null:t;default:return null}}function nI(t,e){if(ll)return t==="compositionend"||!px&&Bj(t,e)?(t=_j(),sh=fx=Ra=null,ll=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cj&&e.locale!=="ko"?null:e.data;default:return null}}var sI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!sI[t.type]:e==="textarea"}function jj(t,e,r,n){sj(n),e=Ih(e,"onChange"),0<e.length&&(r=new gx("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var uc=null,Qc=null;function aI(t){Mj(t,0)}function A0(t){var e=ul(t);if(JS(e))return t}function iI(t,e){if(t==="change")return e}var kj=!1;if(ia){var Wg;if(ia){var Vg="oninput"in document;if(!Vg){var $b=document.createElement("div");$b.setAttribute("oninput","return;"),Vg=typeof $b.oninput=="function"}Wg=Vg}else Wg=!1;kj=Wg&&(!document.documentMode||9<document.documentMode)}function Ob(){uc&&(uc.detachEvent("onpropertychange",Ej),Qc=uc=null)}function Ej(t){if(t.propertyName==="value"&&A0(Qc)){var e=[];jj(e,Qc,t,Ax(t)),lj(aI,e)}}function oI(t,e,r){t==="focusin"?(Ob(),uc=e,Qc=r,uc.attachEvent("onpropertychange",Ej)):t==="focusout"&&Ob()}function lI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return A0(Qc)}function AI(t,e){if(t==="click")return A0(e)}function cI(t,e){if(t==="input"||t==="change")return A0(e)}function uI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var os=typeof Object.is=="function"?Object.is:uI;function Ic(t,e){if(os(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!xp.call(e,s)||!os(t[s],e[s]))return!1}return!0}function Lb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hb(t,e){var r=Lb(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Lb(r)}}function Nj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Fj(){for(var t=window,e=kh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=kh(t.document)}return e}function yx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function dI(t){var e=Fj(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Nj(r.ownerDocument.documentElement,r)){if(n!==null&&yx(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!t.extend&&a>n&&(s=n,n=a,a=s),s=Hb(r,a);var o=Hb(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hI=ia&&"documentMode"in document&&11>=document.documentMode,Al=null,Rp=null,dc=null,$p=!1;function Kb(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;$p||Al==null||Al!==kh(n)||(n=Al,"selectionStart"in n&&yx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dc&&Ic(dc,n)||(dc=n,n=Ih(Rp,"onSelect"),0<n.length&&(e=new gx("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Al)))}function ad(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var cl={animationend:ad("Animation","AnimationEnd"),animationiteration:ad("Animation","AnimationIteration"),animationstart:ad("Animation","AnimationStart"),transitionend:ad("Transition","TransitionEnd")},qg={},Tj={};ia&&(Tj=document.createElement("div").style,"AnimationEvent"in window||(delete cl.animationend.animation,delete cl.animationiteration.animation,delete cl.animationstart.animation),"TransitionEvent"in window||delete cl.transitionend.transition);function c0(t){if(qg[t])return qg[t];if(!cl[t])return t;var e=cl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Tj)return qg[t]=e[r];return t}var Uj=c0("animationend"),Qj=c0("animationiteration"),Ij=c0("animationstart"),Pj=c0("transitionend"),Dj=new Map,zb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(t,e){Dj.set(t,e),io(e,[t])}for(var Xg=0;Xg<zb.length;Xg++){var Jg=zb[Xg],fI=Jg.toLowerCase(),gI=Jg[0].toUpperCase()+Jg.slice(1);ui(fI,"on"+gI)}ui(Uj,"onAnimationEnd");ui(Qj,"onAnimationIteration");ui(Ij,"onAnimationStart");ui("dblclick","onDoubleClick");ui("focusin","onFocus");ui("focusout","onBlur");ui(Pj,"onTransitionEnd");Ul("onMouseEnter",["mouseout","mouseover"]);Ul("onMouseLeave",["mouseout","mouseover"]);Ul("onPointerEnter",["pointerout","pointerover"]);Ul("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mI=new Set("cancel close invalid load scroll toggle".split(" ").concat(zA));function Gb(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,fQ(n,e,void 0,t),t.currentTarget=null}function Mj(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],A=l.instance,u=l.currentTarget;if(l=l.listener,A!==a&&s.isPropagationStopped())break e;Gb(s,l,u),a=A}else for(o=0;o<n.length;o++){if(l=n[o],A=l.instance,u=l.currentTarget,l=l.listener,A!==a&&s.isPropagationStopped())break e;Gb(s,l,u),a=A}}}if(Nh)throw t=Ip,Nh=!1,Ip=null,t}function dt(t,e){var r=e[zp];r===void 0&&(r=e[zp]=new Set);var n=t+"__bubble";r.has(n)||(Rj(e,t,2,!1),r.add(n))}function Yg(t,e,r){var n=0;e&&(n|=4),Rj(r,t,n,e)}var id="_reactListening"+Math.random().toString(36).slice(2);function Pc(t){if(!t[id]){t[id]=!0,GS.forEach(function(r){r!=="selectionchange"&&(mI.has(r)||Yg(r,!1,t),Yg(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[id]||(e[id]=!0,Yg("selectionchange",!1,e))}}function Rj(t,e,r,n){switch(bj(e)){case 1:var s=NQ;break;case 4:s=FQ;break;default:s=hx}r=s.bind(null,e,r,t),s=void 0,!Qp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Zg(t,e,r,n,s){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var A=o.tag;if((A===3||A===4)&&(A=o.stateNode.containerInfo,A===s||A.nodeType===8&&A.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Qi(l),o===null)return;if(A=o.tag,A===5||A===6){n=a=o;continue e}l=l.parentNode}}n=n.return}lj(function(){var u=a,h=Ax(r),c=[];e:{var d=Dj.get(t);if(d!==void 0){var f=gx,g=t;switch(t){case"keypress":if(ah(r)===0)break e;case"keydown":case"keyup":f=GQ;break;case"focusin":g="focus",f=Gg;break;case"focusout":g="blur",f=Gg;break;case"beforeblur":case"afterblur":f=Gg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Qb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=QQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=qQ;break;case Uj:case Qj:case Ij:f=DQ;break;case Pj:f=JQ;break;case"scroll":f=TQ;break;case"wheel":f=ZQ;break;case"copy":case"cut":case"paste":f=RQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Pb}var y=(e&4)!==0,v=!y&&t==="scroll",m=y?d!==null?d+"Capture":null:d;y=[];for(var p=u,x;p!==null;){x=p;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,m!==null&&(w=Nc(p,m),w!=null&&y.push(Dc(p,w,x)))),v)break;p=p.return}0<y.length&&(d=new f(d,g,null,r,h),c.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&r!==Tp&&(g=r.relatedTarget||r.fromElement)&&(Qi(g)||g[oa]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=r.relatedTarget||r.toElement,f=u,g=g?Qi(g):null,g!==null&&(v=oo(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(y=Qb,w="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=Pb,w="onPointerLeave",m="onPointerEnter",p="pointer"),v=f==null?d:ul(f),x=g==null?d:ul(g),d=new y(w,p+"leave",f,r,h),d.target=v,d.relatedTarget=x,w=null,Qi(h)===u&&(y=new y(m,p+"enter",g,r,h),y.target=x,y.relatedTarget=v,w=y),v=w,f&&g)t:{for(y=f,m=g,p=0,x=y;x;x=Fo(x))p++;for(x=0,w=m;w;w=Fo(w))x++;for(;0<p-x;)y=Fo(y),p--;for(;0<x-p;)m=Fo(m),x--;for(;p--;){if(y===m||m!==null&&y===m.alternate)break t;y=Fo(y),m=Fo(m)}y=null}else y=null;f!==null&&Wb(c,d,f,y,!1),g!==null&&v!==null&&Wb(c,v,g,y,!0)}}e:{if(d=u?ul(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var _=iI;else if(Rb(d))if(kj)_=cI;else{_=lI;var b=oI}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=AI);if(_&&(_=_(t,u))){jj(c,_,r,h);break e}b&&b(t,d,u),t==="focusout"&&(b=d._wrapperState)&&b.controlled&&d.type==="number"&&jp(d,"number",d.value)}switch(b=u?ul(u):window,t){case"focusin":(Rb(b)||b.contentEditable==="true")&&(Al=b,Rp=u,dc=null);break;case"focusout":dc=Rp=Al=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":$p=!1,Kb(c,r,h);break;case"selectionchange":if(hI)break;case"keydown":case"keyup":Kb(c,r,h)}var S;if(px)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ll?Bj(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Cj&&r.locale!=="ko"&&(ll||E!=="onCompositionStart"?E==="onCompositionEnd"&&ll&&(S=_j()):(Ra=h,fx="value"in Ra?Ra.value:Ra.textContent,ll=!0)),b=Ih(u,E),0<b.length&&(E=new Ib(E,t,null,r,h),c.push({event:E,listeners:b}),S?E.data=S:(S=Sj(r),S!==null&&(E.data=S)))),(S=tI?rI(t,r):nI(t,r))&&(u=Ih(u,"onBeforeInput"),0<u.length&&(h=new Ib("onBeforeInput","beforeinput",null,r,h),c.push({event:h,listeners:u}),h.data=S))}Mj(c,e)})}function Dc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ih(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Nc(t,r),a!=null&&n.unshift(Dc(t,a,s)),a=Nc(t,e),a!=null&&n.push(Dc(t,a,s))),t=t.return}return n}function Fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wb(t,e,r,n,s){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,A=l.alternate,u=l.stateNode;if(A!==null&&A===n)break;l.tag===5&&u!==null&&(l=u,s?(A=Nc(r,a),A!=null&&o.unshift(Dc(r,A,l))):s||(A=Nc(r,a),A!=null&&o.push(Dc(r,A,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var pI=/\r\n?/g,yI=/\u0000|\uFFFD/g;function Vb(t){return(typeof t=="string"?t:""+t).replace(pI,`
`).replace(yI,"")}function od(t,e,r){if(e=Vb(e),Vb(t)!==e&&r)throw Error(ae(425))}function Ph(){}var Op=null,Lp=null;function Hp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kp=typeof setTimeout=="function"?setTimeout:void 0,vI=typeof clearTimeout=="function"?clearTimeout:void 0,qb=typeof Promise=="function"?Promise:void 0,xI=typeof queueMicrotask=="function"?queueMicrotask:typeof qb<"u"?function(t){return qb.resolve(null).then(t).catch(wI)}:Kp;function wI(t){setTimeout(function(){throw t})}function em(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Uc(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Uc(e)}function Va(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var tA=Math.random().toString(36).slice(2),ws="__reactFiber$"+tA,Mc="__reactProps$"+tA,oa="__reactContainer$"+tA,zp="__reactEvents$"+tA,bI="__reactListeners$"+tA,_I="__reactHandles$"+tA;function Qi(t){var e=t[ws];if(e)return e;for(var r=t.parentNode;r;){if(e=r[oa]||r[ws]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Xb(t);t!==null;){if(r=t[ws])return r;t=Xb(t)}return e}t=r,r=t.parentNode}return null}function pu(t){return t=t[ws]||t[oa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ul(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function u0(t){return t[Mc]||null}var Gp=[],dl=-1;function di(t){return{current:t}}function gt(t){0>dl||(t.current=Gp[dl],Gp[dl]=null,dl--)}function ut(t,e){dl++,Gp[dl]=t.current,t.current=e}var ai={},Sr=di(ai),en=di(!1),Vi=ai;function Ql(t,e){var r=t.type.contextTypes;if(!r)return ai;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function tn(t){return t=t.childContextTypes,t!=null}function Dh(){gt(en),gt(Sr)}function Jb(t,e,r){if(Sr.current!==ai)throw Error(ae(168));ut(Sr,e),ut(en,r)}function $j(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ae(108,oQ(t)||"Unknown",s));return Bt({},r,n)}function Mh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,Vi=Sr.current,ut(Sr,t),ut(en,en.current),!0}function Yb(t,e,r){var n=t.stateNode;if(!n)throw Error(ae(169));r?(t=$j(t,e,Vi),n.__reactInternalMemoizedMergedChildContext=t,gt(en),gt(Sr),ut(Sr,t)):gt(en),ut(en,r)}var qs=null,d0=!1,tm=!1;function Oj(t){qs===null?qs=[t]:qs.push(t)}function CI(t){d0=!0,Oj(t)}function hi(){if(!tm&&qs!==null){tm=!0;var t=0,e=tt;try{var r=qs;for(tt=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}qs=null,d0=!1}catch(s){throw qs!==null&&(qs=qs.slice(t+1)),dj(cx,hi),s}finally{tt=e,tm=!1}}return null}var hl=[],fl=0,Rh=null,$h=0,Sn=[],jn=0,qi=null,Ys=1,Zs="";function _i(t,e){hl[fl++]=$h,hl[fl++]=Rh,Rh=t,$h=e}function Lj(t,e,r){Sn[jn++]=Ys,Sn[jn++]=Zs,Sn[jn++]=qi,qi=t;var n=Ys;t=Zs;var s=32-ns(n)-1;n&=~(1<<s),r+=1;var a=32-ns(e)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ys=1<<32-ns(e)+s|r<<s|n,Zs=a+t}else Ys=1<<a|r<<s|n,Zs=t}function vx(t){t.return!==null&&(_i(t,1),Lj(t,1,0))}function xx(t){for(;t===Rh;)Rh=hl[--fl],hl[fl]=null,$h=hl[--fl],hl[fl]=null;for(;t===qi;)qi=Sn[--jn],Sn[jn]=null,Zs=Sn[--jn],Sn[jn]=null,Ys=Sn[--jn],Sn[jn]=null}var gn=null,fn=null,wt=!1,es=null;function Hj(t,e){var r=En(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Zb(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,gn=t,fn=Va(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,gn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=qi!==null?{id:Ys,overflow:Zs}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=En(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,gn=t,fn=null,!0):!1;default:return!1}}function Wp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vp(t){if(wt){var e=fn;if(e){var r=e;if(!Zb(t,e)){if(Wp(t))throw Error(ae(418));e=Va(r.nextSibling);var n=gn;e&&Zb(t,e)?Hj(n,r):(t.flags=t.flags&-4097|2,wt=!1,gn=t)}}else{if(Wp(t))throw Error(ae(418));t.flags=t.flags&-4097|2,wt=!1,gn=t}}}function e_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;gn=t}function ld(t){if(t!==gn)return!1;if(!wt)return e_(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hp(t.type,t.memoizedProps)),e&&(e=fn)){if(Wp(t))throw Kj(),Error(ae(418));for(;e;)Hj(t,e),e=Va(e.nextSibling)}if(e_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){fn=Va(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=gn?Va(t.stateNode.nextSibling):null;return!0}function Kj(){for(var t=fn;t;)t=Va(t.nextSibling)}function Il(){fn=gn=null,wt=!1}function wx(t){es===null?es=[t]:es.push(t)}var BI=pa.ReactCurrentBatchConfig;function bA(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var n=r.stateNode}if(!n)throw Error(ae(147,t));var s=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,t))}return t}function Ad(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function t_(t){var e=t._init;return e(t._payload)}function zj(t){function e(m,p){if(t){var x=m.deletions;x===null?(m.deletions=[p],m.flags|=16):x.push(p)}}function r(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function n(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=Ya(m,p),m.index=0,m.sibling=null,m}function a(m,p,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<p?(m.flags|=2,p):x):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,x,w){return p===null||p.tag!==6?(p=lm(x,m.mode,w),p.return=m,p):(p=s(p,x),p.return=m,p)}function A(m,p,x,w){var _=x.type;return _===ol?h(m,p,x.props.children,w,x.key):p!==null&&(p.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Na&&t_(_)===p.type)?(w=s(p,x.props),w.ref=bA(m,p,x),w.return=m,w):(w=dh(x.type,x.key,x.props,null,m.mode,w),w.ref=bA(m,p,x),w.return=m,w)}function u(m,p,x,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=Am(x,m.mode,w),p.return=m,p):(p=s(p,x.children||[]),p.return=m,p)}function h(m,p,x,w,_){return p===null||p.tag!==7?(p=Li(x,m.mode,w,_),p.return=m,p):(p=s(p,x),p.return=m,p)}function c(m,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=lm(""+p,m.mode,x),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Yu:return x=dh(p.type,p.key,p.props,null,m.mode,x),x.ref=bA(m,null,p),x.return=m,x;case il:return p=Am(p,m.mode,x),p.return=m,p;case Na:var w=p._init;return c(m,w(p._payload),x)}if(HA(p)||pA(p))return p=Li(p,m.mode,x,null),p.return=m,p;Ad(m,p)}return null}function d(m,p,x,w){var _=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:l(m,p,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Yu:return x.key===_?A(m,p,x,w):null;case il:return x.key===_?u(m,p,x,w):null;case Na:return _=x._init,d(m,p,_(x._payload),w)}if(HA(x)||pA(x))return _!==null?null:h(m,p,x,w,null);Ad(m,x)}return null}function f(m,p,x,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(x)||null,l(p,m,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Yu:return m=m.get(w.key===null?x:w.key)||null,A(p,m,w,_);case il:return m=m.get(w.key===null?x:w.key)||null,u(p,m,w,_);case Na:var b=w._init;return f(m,p,x,b(w._payload),_)}if(HA(w)||pA(w))return m=m.get(x)||null,h(p,m,w,_,null);Ad(p,w)}return null}function g(m,p,x,w){for(var _=null,b=null,S=p,E=p=0,C=null;S!==null&&E<x.length;E++){S.index>E?(C=S,S=null):C=S.sibling;var N=d(m,S,x[E],w);if(N===null){S===null&&(S=C);break}t&&S&&N.alternate===null&&e(m,S),p=a(N,p,E),b===null?_=N:b.sibling=N,b=N,S=C}if(E===x.length)return r(m,S),wt&&_i(m,E),_;if(S===null){for(;E<x.length;E++)S=c(m,x[E],w),S!==null&&(p=a(S,p,E),b===null?_=S:b.sibling=S,b=S);return wt&&_i(m,E),_}for(S=n(m,S);E<x.length;E++)C=f(S,m,E,x[E],w),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?E:C.key),p=a(C,p,E),b===null?_=C:b.sibling=C,b=C);return t&&S.forEach(function(Q){return e(m,Q)}),wt&&_i(m,E),_}function y(m,p,x,w){var _=pA(x);if(typeof _!="function")throw Error(ae(150));if(x=_.call(x),x==null)throw Error(ae(151));for(var b=_=null,S=p,E=p=0,C=null,N=x.next();S!==null&&!N.done;E++,N=x.next()){S.index>E?(C=S,S=null):C=S.sibling;var Q=d(m,S,N.value,w);if(Q===null){S===null&&(S=C);break}t&&S&&Q.alternate===null&&e(m,S),p=a(Q,p,E),b===null?_=Q:b.sibling=Q,b=Q,S=C}if(N.done)return r(m,S),wt&&_i(m,E),_;if(S===null){for(;!N.done;E++,N=x.next())N=c(m,N.value,w),N!==null&&(p=a(N,p,E),b===null?_=N:b.sibling=N,b=N);return wt&&_i(m,E),_}for(S=n(m,S);!N.done;E++,N=x.next())N=f(S,m,E,N.value,w),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?E:N.key),p=a(N,p,E),b===null?_=N:b.sibling=N,b=N);return t&&S.forEach(function(P){return e(m,P)}),wt&&_i(m,E),_}function v(m,p,x,w){if(typeof x=="object"&&x!==null&&x.type===ol&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Yu:e:{for(var _=x.key,b=p;b!==null;){if(b.key===_){if(_=x.type,_===ol){if(b.tag===7){r(m,b.sibling),p=s(b,x.props.children),p.return=m,m=p;break e}}else if(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Na&&t_(_)===b.type){r(m,b.sibling),p=s(b,x.props),p.ref=bA(m,b,x),p.return=m,m=p;break e}r(m,b);break}else e(m,b);b=b.sibling}x.type===ol?(p=Li(x.props.children,m.mode,w,x.key),p.return=m,m=p):(w=dh(x.type,x.key,x.props,null,m.mode,w),w.ref=bA(m,p,x),w.return=m,m=w)}return o(m);case il:e:{for(b=x.key;p!==null;){if(p.key===b)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){r(m,p.sibling),p=s(p,x.children||[]),p.return=m,m=p;break e}else{r(m,p);break}else e(m,p);p=p.sibling}p=Am(x,m.mode,w),p.return=m,m=p}return o(m);case Na:return b=x._init,v(m,p,b(x._payload),w)}if(HA(x))return g(m,p,x,w);if(pA(x))return y(m,p,x,w);Ad(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(r(m,p.sibling),p=s(p,x),p.return=m,m=p):(r(m,p),p=lm(x,m.mode,w),p.return=m,m=p),o(m)):r(m,p)}return v}var Pl=zj(!0),Gj=zj(!1),Oh=di(null),Lh=null,gl=null,bx=null;function _x(){bx=gl=Lh=null}function Cx(t){var e=Oh.current;gt(Oh),t._currentValue=e}function qp(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Cl(t,e){Lh=t,bx=gl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jr=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(bx!==t)if(t={context:t,memoizedValue:e,next:null},gl===null){if(Lh===null)throw Error(ae(308));gl=t,Lh.dependencies={lanes:0,firstContext:t}}else gl=gl.next=t;return e}var Ii=null;function Bx(t){Ii===null?Ii=[t]:Ii.push(t)}function Wj(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Bx(e)):(r.next=s.next,s.next=r),e.interleaved=r,la(t,n)}function la(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Fa=!1;function Sx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function na(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function qa(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,We&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,la(t,r)}return s=n.interleaved,s===null?(e.next=e,Bx(n)):(e.next=s.next,s.next=e),n.interleaved=e,la(t,r)}function ih(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ux(t,r)}}function r_(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Hh(t,e,r,n){var s=t.updateQueue;Fa=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var A=l,u=A.next;A.next=null,o===null?a=u:o.next=u,o=A;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=A))}if(a!==null){var c=s.baseState;o=0,h=u=A=null,l=a;do{var d=l.lane,f=l.eventTime;if((n&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,y=l;switch(d=e,f=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){c=g.call(f,c,d);break e}c=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,d=typeof g=="function"?g.call(f,c,d):g,d==null)break e;c=Bt({},c,d);break e;case 2:Fa=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[l]:d.push(l))}else f={eventTime:f,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=f,A=c):h=h.next=f,o|=d;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;d=l,l=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(h===null&&(A=c),s.baseState=A,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Ji|=o,t.lanes=o,t.memoizedState=c}}function n_(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ae(191,s));s.call(n)}}}var yu={},Bs=di(yu),Rc=di(yu),$c=di(yu);function Pi(t){if(t===yu)throw Error(ae(174));return t}function jx(t,e){switch(ut($c,e),ut(Rc,t),ut(Bs,yu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ep(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ep(e,t)}gt(Bs),ut(Bs,e)}function Dl(){gt(Bs),gt(Rc),gt($c)}function qj(t){Pi($c.current);var e=Pi(Bs.current),r=Ep(e,t.type);e!==r&&(ut(Rc,t),ut(Bs,r))}function kx(t){Rc.current===t&&(gt(Bs),gt(Rc))}var _t=di(0);function Kh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rm=[];function Ex(){for(var t=0;t<rm.length;t++)rm[t]._workInProgressVersionPrimary=null;rm.length=0}var oh=pa.ReactCurrentDispatcher,nm=pa.ReactCurrentBatchConfig,Xi=0,Ct=null,zt=null,Yt=null,zh=!1,hc=!1,Oc=0,SI=0;function mr(){throw Error(ae(321))}function Nx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!os(t[r],e[r]))return!1;return!0}function Fx(t,e,r,n,s,a){if(Xi=a,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,oh.current=t===null||t.memoizedState===null?NI:FI,t=r(n,s),hc){a=0;do{if(hc=!1,Oc=0,25<=a)throw Error(ae(301));a+=1,Yt=zt=null,e.updateQueue=null,oh.current=TI,t=r(n,s)}while(hc)}if(oh.current=Gh,e=zt!==null&&zt.next!==null,Xi=0,Yt=zt=Ct=null,zh=!1,e)throw Error(ae(300));return t}function Tx(){var t=Oc!==0;return Oc=0,t}function vs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Ct.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Pn(){if(zt===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=zt.next;var e=Yt===null?Ct.memoizedState:Yt.next;if(e!==null)Yt=e,zt=t;else{if(t===null)throw Error(ae(310));zt=t,t={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Yt===null?Ct.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function Lc(t,e){return typeof e=="function"?e(t):e}function sm(t){var e=Pn(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var n=zt,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,A=null,u=a;do{var h=u.lane;if((Xi&h)===h)A!==null&&(A=A.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};A===null?(l=A=c,o=n):A=A.next=c,Ct.lanes|=h,Ji|=h}u=u.next}while(u!==null&&u!==a);A===null?o=n:A.next=l,os(n,e.memoizedState)||(Jr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=A,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do a=s.lane,Ct.lanes|=a,Ji|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function am(t){var e=Pn(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);os(a,e.memoizedState)||(Jr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function Xj(){}function Jj(t,e){var r=Ct,n=Pn(),s=e(),a=!os(n.memoizedState,s);if(a&&(n.memoizedState=s,Jr=!0),n=n.queue,Ux(ek.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||Yt!==null&&Yt.memoizedState.tag&1){if(r.flags|=2048,Hc(9,Zj.bind(null,r,n,s,e),void 0,null),tr===null)throw Error(ae(349));Xi&30||Yj(r,e,s)}return s}function Yj(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Zj(t,e,r,n){e.value=r,e.getSnapshot=n,tk(e)&&rk(t)}function ek(t,e,r){return r(function(){tk(e)&&rk(t)})}function tk(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!os(t,r)}catch{return!0}}function rk(t){var e=la(t,1);e!==null&&ss(e,t,1,-1)}function s_(t){var e=vs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:t},e.queue=t,t=t.dispatch=EI.bind(null,Ct,t),[e.memoizedState,t]}function Hc(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function nk(){return Pn().memoizedState}function lh(t,e,r,n){var s=vs();Ct.flags|=t,s.memoizedState=Hc(1|e,r,void 0,n===void 0?null:n)}function h0(t,e,r,n){var s=Pn();n=n===void 0?null:n;var a=void 0;if(zt!==null){var o=zt.memoizedState;if(a=o.destroy,n!==null&&Nx(n,o.deps)){s.memoizedState=Hc(e,r,a,n);return}}Ct.flags|=t,s.memoizedState=Hc(1|e,r,a,n)}function a_(t,e){return lh(8390656,8,t,e)}function Ux(t,e){return h0(2048,8,t,e)}function sk(t,e){return h0(4,2,t,e)}function ak(t,e){return h0(4,4,t,e)}function ik(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ok(t,e,r){return r=r!=null?r.concat([t]):null,h0(4,4,ik.bind(null,e,t),r)}function Qx(){}function lk(t,e){var r=Pn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Nx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Ak(t,e){var r=Pn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Nx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function ck(t,e,r){return Xi&21?(os(r,e)||(r=gj(),Ct.lanes|=r,Ji|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jr=!0),t.memoizedState=r)}function jI(t,e){var r=tt;tt=r!==0&&4>r?r:4,t(!0);var n=nm.transition;nm.transition={};try{t(!1),e()}finally{tt=r,nm.transition=n}}function uk(){return Pn().memoizedState}function kI(t,e,r){var n=Ja(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},dk(t))hk(e,r);else if(r=Wj(t,e,r,n),r!==null){var s=Mr();ss(r,t,n,s),fk(r,e,n)}}function EI(t,e,r){var n=Ja(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(dk(t))hk(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,os(l,o)){var A=e.interleaved;A===null?(s.next=s,Bx(e)):(s.next=A.next,A.next=s),e.interleaved=s;return}}catch{}finally{}r=Wj(t,e,s,n),r!==null&&(s=Mr(),ss(r,t,n,s),fk(r,e,n))}}function dk(t){var e=t.alternate;return t===Ct||e!==null&&e===Ct}function hk(t,e){hc=zh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function fk(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,ux(t,r)}}var Gh={readContext:In,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},NI={readContext:In,useCallback:function(t,e){return vs().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:a_,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,lh(4194308,4,ik.bind(null,e,t),r)},useLayoutEffect:function(t,e){return lh(4194308,4,t,e)},useInsertionEffect:function(t,e){return lh(4,2,t,e)},useMemo:function(t,e){var r=vs();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=vs();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=kI.bind(null,Ct,t),[n.memoizedState,t]},useRef:function(t){var e=vs();return t={current:t},e.memoizedState=t},useState:s_,useDebugValue:Qx,useDeferredValue:function(t){return vs().memoizedState=t},useTransition:function(){var t=s_(!1),e=t[0];return t=jI.bind(null,t[1]),vs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Ct,s=vs();if(wt){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=e(),tr===null)throw Error(ae(349));Xi&30||Yj(n,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,a_(ek.bind(null,n,a,t),[t]),n.flags|=2048,Hc(9,Zj.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=vs(),e=tr.identifierPrefix;if(wt){var r=Zs,n=Ys;r=(n&~(1<<32-ns(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Oc++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=SI++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FI={readContext:In,useCallback:lk,useContext:In,useEffect:Ux,useImperativeHandle:ok,useInsertionEffect:sk,useLayoutEffect:ak,useMemo:Ak,useReducer:sm,useRef:nk,useState:function(){return sm(Lc)},useDebugValue:Qx,useDeferredValue:function(t){var e=Pn();return ck(e,zt.memoizedState,t)},useTransition:function(){var t=sm(Lc)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:Xj,useSyncExternalStore:Jj,useId:uk,unstable_isNewReconciler:!1},TI={readContext:In,useCallback:lk,useContext:In,useEffect:Ux,useImperativeHandle:ok,useInsertionEffect:sk,useLayoutEffect:ak,useMemo:Ak,useReducer:am,useRef:nk,useState:function(){return am(Lc)},useDebugValue:Qx,useDeferredValue:function(t){var e=Pn();return zt===null?e.memoizedState=t:ck(e,zt.memoizedState,t)},useTransition:function(){var t=am(Lc)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:Xj,useSyncExternalStore:Jj,useId:uk,unstable_isNewReconciler:!1};function Xn(t,e){if(t&&t.defaultProps){e=Bt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Xp(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Bt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var f0={isMounted:function(t){return(t=t._reactInternals)?oo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Mr(),s=Ja(t),a=na(n,s);a.payload=e,r!=null&&(a.callback=r),e=qa(t,a,s),e!==null&&(ss(e,t,s,n),ih(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Mr(),s=Ja(t),a=na(n,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=qa(t,a,s),e!==null&&(ss(e,t,s,n),ih(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Mr(),n=Ja(t),s=na(r,n);s.tag=2,e!=null&&(s.callback=e),e=qa(t,s,n),e!==null&&(ss(e,t,n,r),ih(e,t,n))}};function i_(t,e,r,n,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Ic(r,n)||!Ic(s,a):!0}function gk(t,e,r){var n=!1,s=ai,a=e.contextType;return typeof a=="object"&&a!==null?a=In(a):(s=tn(e)?Vi:Sr.current,n=e.contextTypes,a=(n=n!=null)?Ql(t,s):ai),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=f0,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function o_(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&f0.enqueueReplaceState(e,e.state,null)}function Jp(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Sx(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=In(a):(a=tn(e)?Vi:Sr.current,s.context=Ql(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Xp(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&f0.enqueueReplaceState(s,s.state,null),Hh(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ml(t,e){try{var r="",n=e;do r+=iQ(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function im(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Yp(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var UI=typeof WeakMap=="function"?WeakMap:Map;function mk(t,e,r){r=na(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Vh||(Vh=!0,ly=n),Yp(t,e)},r}function pk(t,e,r){r=na(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Yp(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Yp(t,e),typeof n!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function l_(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new UI;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=WI.bind(null,t,e,r),e.then(t,t))}function A_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function c_(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=na(-1,1),e.tag=2,qa(r,e,1))),r.lanes|=1),t)}var QI=pa.ReactCurrentOwner,Jr=!1;function Qr(t,e,r,n){e.child=t===null?Gj(e,null,r,n):Pl(e,t.child,r,n)}function u_(t,e,r,n,s){r=r.render;var a=e.ref;return Cl(e,s),n=Fx(t,e,r,n,a,s),r=Tx(),t!==null&&!Jr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Aa(t,e,s)):(wt&&r&&vx(e),e.flags|=1,Qr(t,e,n,s),e.child)}function d_(t,e,r,n,s){if(t===null){var a=r.type;return typeof a=="function"&&!Lx(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,yk(t,e,a,n,s)):(t=dh(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Ic,r(o,n)&&t.ref===e.ref)return Aa(t,e,s)}return e.flags|=1,t=Ya(a,n),t.ref=e.ref,t.return=e,e.child=t}function yk(t,e,r,n,s){if(t!==null){var a=t.memoizedProps;if(Ic(a,n)&&t.ref===e.ref)if(Jr=!1,e.pendingProps=n=a,(t.lanes&s)!==0)t.flags&131072&&(Jr=!0);else return e.lanes=t.lanes,Aa(t,e,s)}return Zp(t,e,r,n,s)}function vk(t,e,r){var n=e.pendingProps,s=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(pl,un),un|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(pl,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,ut(pl,un),un|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,ut(pl,un),un|=n;return Qr(t,e,s,r),e.child}function xk(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Zp(t,e,r,n,s){var a=tn(r)?Vi:Sr.current;return a=Ql(e,a),Cl(e,s),r=Fx(t,e,r,n,a,s),n=Tx(),t!==null&&!Jr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Aa(t,e,s)):(wt&&n&&vx(e),e.flags|=1,Qr(t,e,r,s),e.child)}function h_(t,e,r,n,s){if(tn(r)){var a=!0;Mh(e)}else a=!1;if(Cl(e,s),e.stateNode===null)Ah(t,e),gk(e,r,n),Jp(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var A=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=In(u):(u=tn(r)?Vi:Sr.current,u=Ql(e,u));var h=r.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||A!==u)&&o_(e,o,n,u),Fa=!1;var d=e.memoizedState;o.state=d,Hh(e,n,o,s),A=e.memoizedState,l!==n||d!==A||en.current||Fa?(typeof h=="function"&&(Xp(e,r,h,n),A=e.memoizedState),(l=Fa||i_(e,r,l,n,d,A,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=A),o.props=n,o.state=A,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Vj(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Xn(e.type,l),o.props=u,c=e.pendingProps,d=o.context,A=r.contextType,typeof A=="object"&&A!==null?A=In(A):(A=tn(r)?Vi:Sr.current,A=Ql(e,A));var f=r.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==c||d!==A)&&o_(e,o,n,A),Fa=!1,d=e.memoizedState,o.state=d,Hh(e,n,o,s);var g=e.memoizedState;l!==c||d!==g||en.current||Fa?(typeof f=="function"&&(Xp(e,r,f,n),g=e.memoizedState),(u=Fa||i_(e,r,u,n,d,g,A)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,A),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,A)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=A,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return ey(t,e,r,n,a,s)}function ey(t,e,r,n,s,a){xk(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Yb(e,r,!1),Aa(t,e,a);n=e.stateNode,QI.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Pl(e,t.child,null,a),e.child=Pl(e,null,l,a)):Qr(t,e,l,a),e.memoizedState=n.state,s&&Yb(e,r,!0),e.child}function wk(t){var e=t.stateNode;e.pendingContext?Jb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jb(t,e.context,!1),jx(t,e.containerInfo)}function f_(t,e,r,n,s){return Il(),wx(s),e.flags|=256,Qr(t,e,r,n),e.child}var ty={dehydrated:null,treeContext:null,retryLane:0};function ry(t){return{baseLanes:t,cachePool:null,transitions:null}}function bk(t,e,r){var n=e.pendingProps,s=_t.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ut(_t,s&1),t===null)return Vp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=p0(o,n,0,null),t=Li(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=ry(r),e.memoizedState=ty,t):Ix(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return II(t,e,o,n,l,s,r);if(a){a=n.fallback,o=e.mode,s=t.child,l=s.sibling;var A={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=A,e.deletions=null):(n=Ya(s,A),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Ya(l,a):(a=Li(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?ry(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=ty,n}return a=t.child,t=a.sibling,n=Ya(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Ix(t,e){return e=p0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cd(t,e,r,n){return n!==null&&wx(n),Pl(e,t.child,null,r),t=Ix(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function II(t,e,r,n,s,a,o){if(r)return e.flags&256?(e.flags&=-257,n=im(Error(ae(422))),cd(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,s=e.mode,n=p0({mode:"visible",children:n.children},s,0,null),a=Li(a,s,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Pl(e,t.child,null,o),e.child.memoizedState=ry(o),e.memoizedState=ty,a);if(!(e.mode&1))return cd(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ae(419)),n=im(a,n,void 0),cd(t,e,o,n)}if(l=(o&t.childLanes)!==0,Jr||l){if(n=tr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,la(t,s),ss(n,t,s,-1))}return Ox(),n=im(Error(ae(421))),cd(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=VI.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,fn=Va(s.nextSibling),gn=e,wt=!0,es=null,t!==null&&(Sn[jn++]=Ys,Sn[jn++]=Zs,Sn[jn++]=qi,Ys=t.id,Zs=t.overflow,qi=e),e=Ix(e,n.children),e.flags|=4096,e)}function g_(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),qp(t.return,e,r)}function om(t,e,r,n,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function _k(t,e,r){var n=e.pendingProps,s=n.revealOrder,a=n.tail;if(Qr(t,e,n.children,r),n=_t.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g_(t,r,e);else if(t.tag===19)g_(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ut(_t,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Kh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),om(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}om(e,!0,r,null,a);break;case"together":om(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ah(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Aa(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ji|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,r=Ya(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ya(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function PI(t,e,r){switch(e.tag){case 3:wk(e),Il();break;case 5:qj(e);break;case 1:tn(e.type)&&Mh(e);break;case 4:jx(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ut(Oh,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ut(_t,_t.current&1),e.flags|=128,null):r&e.child.childLanes?bk(t,e,r):(ut(_t,_t.current&1),t=Aa(t,e,r),t!==null?t.sibling:null);ut(_t,_t.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return _k(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ut(_t,_t.current),n)break;return null;case 22:case 23:return e.lanes=0,vk(t,e,r)}return Aa(t,e,r)}var Ck,ny,Bk,Sk;Ck=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ny=function(){};Bk=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Pi(Bs.current);var a=null;switch(r){case"input":s=Bp(t,s),n=Bp(t,n),a=[];break;case"select":s=Bt({},s,{value:void 0}),n=Bt({},n,{value:void 0}),a=[];break;case"textarea":s=kp(t,s),n=kp(t,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Ph)}Np(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(kc.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var A=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&A!==l&&(A!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||A&&A.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in A)A.hasOwnProperty(o)&&l[o]!==A[o]&&(r||(r={}),r[o]=A[o])}else r||(a||(a=[]),a.push(u,r)),r=A;else u==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,l=l?l.__html:void 0,A!=null&&l!==A&&(a=a||[]).push(u,A)):u==="children"?typeof A!="string"&&typeof A!="number"||(a=a||[]).push(u,""+A):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(kc.hasOwnProperty(u)?(A!=null&&u==="onScroll"&&dt("scroll",t),a||l===A||(a=[])):(a=a||[]).push(u,A))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Sk=function(t,e,r,n){r!==n&&(e.flags|=4)};function _A(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function pr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function DI(t,e,r){var n=e.pendingProps;switch(xx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(e),null;case 1:return tn(e.type)&&Dh(),pr(e),null;case 3:return n=e.stateNode,Dl(),gt(en),gt(Sr),Ex(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ld(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,es!==null&&(uy(es),es=null))),ny(t,e),pr(e),null;case 5:kx(e);var s=Pi($c.current);if(r=e.type,t!==null&&e.stateNode!=null)Bk(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ae(166));return pr(e),null}if(t=Pi(Bs.current),ld(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[ws]=e,n[Mc]=a,t=(e.mode&1)!==0,r){case"dialog":dt("cancel",n),dt("close",n);break;case"iframe":case"object":case"embed":dt("load",n);break;case"video":case"audio":for(s=0;s<zA.length;s++)dt(zA[s],n);break;case"source":dt("error",n);break;case"img":case"image":case"link":dt("error",n),dt("load",n);break;case"details":dt("toggle",n);break;case"input":Cb(n,a),dt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},dt("invalid",n);break;case"textarea":Sb(n,a),dt("invalid",n)}Np(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&od(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&od(n.textContent,l,t),s=["children",""+l]):kc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&dt("scroll",n)}switch(r){case"input":Zu(n),Bb(n,a,!0);break;case"textarea":Zu(n),jb(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ph)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ej(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[ws]=e,t[Mc]=n,Ck(t,e,!1,!1),e.stateNode=t;e:{switch(o=Fp(r,n),r){case"dialog":dt("cancel",t),dt("close",t),s=n;break;case"iframe":case"object":case"embed":dt("load",t),s=n;break;case"video":case"audio":for(s=0;s<zA.length;s++)dt(zA[s],t);s=n;break;case"source":dt("error",t),s=n;break;case"img":case"image":case"link":dt("error",t),dt("load",t),s=n;break;case"details":dt("toggle",t),s=n;break;case"input":Cb(t,n),s=Bp(t,n),dt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Bt({},n,{value:void 0}),dt("invalid",t);break;case"textarea":Sb(t,n),s=kp(t,n),dt("invalid",t);break;default:s=n}Np(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var A=l[a];a==="style"?nj(t,A):a==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&tj(t,A)):a==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&Ec(t,A):typeof A=="number"&&Ec(t,""+A):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(kc.hasOwnProperty(a)?A!=null&&a==="onScroll"&&dt("scroll",t):A!=null&&ax(t,a,A,o))}switch(r){case"input":Zu(t),Bb(t,n,!1);break;case"textarea":Zu(t),jb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+si(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?xl(t,!!n.multiple,a,!1):n.defaultValue!=null&&xl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ph)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pr(e),null;case 6:if(t&&e.stateNode!=null)Sk(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ae(166));if(r=Pi($c.current),Pi(Bs.current),ld(e)){if(n=e.stateNode,r=e.memoizedProps,n[ws]=e,(a=n.nodeValue!==r)&&(t=gn,t!==null))switch(t.tag){case 3:od(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&od(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ws]=e,e.stateNode=n}return pr(e),null;case 13:if(gt(_t),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&fn!==null&&e.mode&1&&!(e.flags&128))Kj(),Il(),e.flags|=98560,a=!1;else if(a=ld(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ae(317));a[ws]=e}else Il(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pr(e),a=!1}else es!==null&&(uy(es),es=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Vt===0&&(Vt=3):Ox())),e.updateQueue!==null&&(e.flags|=4),pr(e),null);case 4:return Dl(),ny(t,e),t===null&&Pc(e.stateNode.containerInfo),pr(e),null;case 10:return Cx(e.type._context),pr(e),null;case 17:return tn(e.type)&&Dh(),pr(e),null;case 19:if(gt(_t),a=e.memoizedState,a===null)return pr(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)_A(a,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kh(t),o!==null){for(e.flags|=128,_A(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ut(_t,_t.current&1|2),e.child}t=t.sibling}a.tail!==null&&Qt()>Rl&&(e.flags|=128,n=!0,_A(a,!1),e.lanes=4194304)}else{if(!n)if(t=Kh(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_A(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!wt)return pr(e),null}else 2*Qt()-a.renderingStartTime>Rl&&r!==1073741824&&(e.flags|=128,n=!0,_A(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Qt(),e.sibling=null,r=_t.current,ut(_t,n?r&1|2:r&1),e):(pr(e),null);case 22:case 23:return $x(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?un&1073741824&&(pr(e),e.subtreeFlags&6&&(e.flags|=8192)):pr(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function MI(t,e){switch(xx(e),e.tag){case 1:return tn(e.type)&&Dh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dl(),gt(en),gt(Sr),Ex(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kx(e),null;case 13:if(gt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));Il()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(_t),null;case 4:return Dl(),null;case 10:return Cx(e.type._context),null;case 22:case 23:return $x(),null;case 24:return null;default:return null}}var ud=!1,_r=!1,RI=typeof WeakSet=="function"?WeakSet:Set,xe=null;function ml(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ft(t,e,n)}else r.current=null}function sy(t,e,r){try{r()}catch(n){Ft(t,e,n)}}var m_=!1;function $I(t,e){if(Op=Uh,t=Fj(),yx(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,A=-1,u=0,h=0,c=t,d=null;t:for(;;){for(var f;c!==r||s!==0&&c.nodeType!==3||(l=o+s),c!==a||n!==0&&c.nodeType!==3||(A=o+n),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===t)break t;if(d===r&&++u===s&&(l=o),d===a&&++h===n&&(A=o),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}r=l===-1||A===-1?null:{start:l,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(Lp={focusedElem:t,selectionRange:r},Uh=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,v=g.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:Xn(e.type,y),v);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(w){Ft(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return g=m_,m_=!1,g}function fc(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&sy(e,r,a)}s=s.next}while(s!==n)}}function g0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function ay(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function jk(t){var e=t.alternate;e!==null&&(t.alternate=null,jk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ws],delete e[Mc],delete e[zp],delete e[bI],delete e[_I])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kk(t){return t.tag===5||t.tag===3||t.tag===4}function p_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function iy(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ph));else if(n!==4&&(t=t.child,t!==null))for(iy(t,e,r),t=t.sibling;t!==null;)iy(t,e,r),t=t.sibling}function oy(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(oy(t,e,r),t=t.sibling;t!==null;)oy(t,e,r),t=t.sibling}var cr=null,Yn=!1;function Ba(t,e,r){for(r=r.child;r!==null;)Ek(t,e,r),r=r.sibling}function Ek(t,e,r){if(Cs&&typeof Cs.onCommitFiberUnmount=="function")try{Cs.onCommitFiberUnmount(o0,r)}catch{}switch(r.tag){case 5:_r||ml(r,e);case 6:var n=cr,s=Yn;cr=null,Ba(t,e,r),cr=n,Yn=s,cr!==null&&(Yn?(t=cr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):cr.removeChild(r.stateNode));break;case 18:cr!==null&&(Yn?(t=cr,r=r.stateNode,t.nodeType===8?em(t.parentNode,r):t.nodeType===1&&em(t,r),Uc(t)):em(cr,r.stateNode));break;case 4:n=cr,s=Yn,cr=r.stateNode.containerInfo,Yn=!0,Ba(t,e,r),cr=n,Yn=s;break;case 0:case 11:case 14:case 15:if(!_r&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&sy(r,e,o),s=s.next}while(s!==n)}Ba(t,e,r);break;case 1:if(!_r&&(ml(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ft(r,e,l)}Ba(t,e,r);break;case 21:Ba(t,e,r);break;case 22:r.mode&1?(_r=(n=_r)||r.memoizedState!==null,Ba(t,e,r),_r=n):Ba(t,e,r);break;default:Ba(t,e,r)}}function y_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new RI),e.forEach(function(n){var s=qI.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Wn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:cr=l.stateNode,Yn=!1;break e;case 3:cr=l.stateNode.containerInfo,Yn=!0;break e;case 4:cr=l.stateNode.containerInfo,Yn=!0;break e}l=l.return}if(cr===null)throw Error(ae(160));Ek(a,o,s),cr=null,Yn=!1;var A=s.alternate;A!==null&&(A.return=null),s.return=null}catch(u){Ft(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Nk(e,t),e=e.sibling}function Nk(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),ms(t),n&4){try{fc(3,t,t.return),g0(3,t)}catch(y){Ft(t,t.return,y)}try{fc(5,t,t.return)}catch(y){Ft(t,t.return,y)}}break;case 1:Wn(e,t),ms(t),n&512&&r!==null&&ml(r,r.return);break;case 5:if(Wn(e,t),ms(t),n&512&&r!==null&&ml(r,r.return),t.flags&32){var s=t.stateNode;try{Ec(s,"")}catch(y){Ft(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&YS(s,a),Fp(l,o);var u=Fp(l,a);for(o=0;o<A.length;o+=2){var h=A[o],c=A[o+1];h==="style"?nj(s,c):h==="dangerouslySetInnerHTML"?tj(s,c):h==="children"?Ec(s,c):ax(s,h,c,u)}switch(l){case"input":Sp(s,a);break;case"textarea":ZS(s,a);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?xl(s,!!a.multiple,f,!1):d!==!!a.multiple&&(a.defaultValue!=null?xl(s,!!a.multiple,a.defaultValue,!0):xl(s,!!a.multiple,a.multiple?[]:"",!1))}s[Mc]=a}catch(y){Ft(t,t.return,y)}}break;case 6:if(Wn(e,t),ms(t),n&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(y){Ft(t,t.return,y)}}break;case 3:if(Wn(e,t),ms(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Uc(e.containerInfo)}catch(y){Ft(t,t.return,y)}break;case 4:Wn(e,t),ms(t);break;case 13:Wn(e,t),ms(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Mx=Qt())),n&4&&y_(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(_r=(u=_r)||h,Wn(e,t),_r=u):Wn(e,t),ms(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(xe=t,h=t.child;h!==null;){for(c=xe=h;xe!==null;){switch(d=xe,f=d.child,d.tag){case 0:case 11:case 14:case 15:fc(4,d,d.return);break;case 1:ml(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(y){Ft(n,r,y)}}break;case 5:ml(d,d.return);break;case 22:if(d.memoizedState!==null){x_(c);continue}}f!==null?(f.return=d,xe=f):x_(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{s=c.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=c.stateNode,A=c.memoizedProps.style,o=A!=null&&A.hasOwnProperty("display")?A.display:null,l.style.display=rj("display",o))}catch(y){Ft(t,t.return,y)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(y){Ft(t,t.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Wn(e,t),ms(t),n&4&&y_(t);break;case 21:break;default:Wn(e,t),ms(t)}}function ms(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(kk(r)){var n=r;break e}r=r.return}throw Error(ae(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ec(s,""),n.flags&=-33);var a=p_(t);oy(t,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=p_(t);iy(t,l,o);break;default:throw Error(ae(161))}}catch(A){Ft(t,t.return,A)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OI(t,e,r){xe=t,Fk(t)}function Fk(t,e,r){for(var n=(t.mode&1)!==0;xe!==null;){var s=xe,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ud;if(!o){var l=s.alternate,A=l!==null&&l.memoizedState!==null||_r;l=ud;var u=_r;if(ud=o,(_r=A)&&!u)for(xe=s;xe!==null;)o=xe,A=o.child,o.tag===22&&o.memoizedState!==null?w_(s):A!==null?(A.return=o,xe=A):w_(s);for(;a!==null;)xe=a,Fk(a),a=a.sibling;xe=s,ud=l,_r=u}v_(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,xe=a):v_(t)}}function v_(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_r||g0(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!_r)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Xn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&n_(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}n_(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var A=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Uc(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}_r||e.flags&512&&ay(e)}catch(d){Ft(e,e.return,d)}}if(e===t){xe=null;break}if(r=e.sibling,r!==null){r.return=e.return,xe=r;break}xe=e.return}}function x_(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,xe=r;break}xe=e.return}}function w_(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{g0(4,e)}catch(A){Ft(e,r,A)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(A){Ft(e,s,A)}}var a=e.return;try{ay(e)}catch(A){Ft(e,a,A)}break;case 5:var o=e.return;try{ay(e)}catch(A){Ft(e,o,A)}}}catch(A){Ft(e,e.return,A)}if(e===t){xe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,xe=l;break}xe=e.return}}var LI=Math.ceil,Wh=pa.ReactCurrentDispatcher,Px=pa.ReactCurrentOwner,Qn=pa.ReactCurrentBatchConfig,We=0,tr=null,Rt=null,hr=0,un=0,pl=di(0),Vt=0,Kc=null,Ji=0,m0=0,Dx=0,gc=null,Xr=null,Mx=0,Rl=1/0,Gs=null,Vh=!1,ly=null,Xa=null,dd=!1,$a=null,qh=0,mc=0,Ay=null,ch=-1,uh=0;function Mr(){return We&6?Qt():ch!==-1?ch:ch=Qt()}function Ja(t){return t.mode&1?We&2&&hr!==0?hr&-hr:BI.transition!==null?(uh===0&&(uh=gj()),uh):(t=tt,t!==0||(t=window.event,t=t===void 0?16:bj(t.type)),t):1}function ss(t,e,r,n){if(50<mc)throw mc=0,Ay=null,Error(ae(185));gu(t,r,n),(!(We&2)||t!==tr)&&(t===tr&&(!(We&2)&&(m0|=r),Vt===4&&Ia(t,hr)),rn(t,n),r===1&&We===0&&!(e.mode&1)&&(Rl=Qt()+500,d0&&hi()))}function rn(t,e){var r=t.callbackNode;BQ(t,e);var n=Th(t,t===tr?hr:0);if(n===0)r!==null&&Nb(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Nb(r),e===1)t.tag===0?CI(b_.bind(null,t)):Oj(b_.bind(null,t)),xI(function(){!(We&6)&&hi()}),r=null;else{switch(mj(n)){case 1:r=cx;break;case 4:r=hj;break;case 16:r=Fh;break;case 536870912:r=fj;break;default:r=Fh}r=Rk(r,Tk.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Tk(t,e){if(ch=-1,uh=0,We&6)throw Error(ae(327));var r=t.callbackNode;if(Bl()&&t.callbackNode!==r)return null;var n=Th(t,t===tr?hr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xh(t,n);else{e=n;var s=We;We|=2;var a=Qk();(tr!==t||hr!==e)&&(Gs=null,Rl=Qt()+500,Oi(t,e));do try{zI();break}catch(l){Uk(t,l)}while(1);_x(),Wh.current=a,We=s,Rt!==null?e=0:(tr=null,hr=0,e=Vt)}if(e!==0){if(e===2&&(s=Pp(t),s!==0&&(n=s,e=cy(t,s))),e===1)throw r=Kc,Oi(t,0),Ia(t,n),rn(t,Qt()),r;if(e===6)Ia(t,n);else{if(s=t.current.alternate,!(n&30)&&!HI(s)&&(e=Xh(t,n),e===2&&(a=Pp(t),a!==0&&(n=a,e=cy(t,a))),e===1))throw r=Kc,Oi(t,0),Ia(t,n),rn(t,Qt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ae(345));case 2:Ci(t,Xr,Gs);break;case 3:if(Ia(t,n),(n&130023424)===n&&(e=Mx+500-Qt(),10<e)){if(Th(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Mr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Kp(Ci.bind(null,t,Xr,Gs),e);break}Ci(t,Xr,Gs);break;case 4:if(Ia(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-ns(n);a=1<<o,o=e[o],o>s&&(s=o),n&=~a}if(n=s,n=Qt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*LI(n/1960))-n,10<n){t.timeoutHandle=Kp(Ci.bind(null,t,Xr,Gs),n);break}Ci(t,Xr,Gs);break;case 5:Ci(t,Xr,Gs);break;default:throw Error(ae(329))}}}return rn(t,Qt()),t.callbackNode===r?Tk.bind(null,t):null}function cy(t,e){var r=gc;return t.current.memoizedState.isDehydrated&&(Oi(t,e).flags|=256),t=Xh(t,e),t!==2&&(e=Xr,Xr=r,e!==null&&uy(e)),t}function uy(t){Xr===null?Xr=t:Xr.push.apply(Xr,t)}function HI(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!os(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ia(t,e){for(e&=~Dx,e&=~m0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ns(e),n=1<<r;t[r]=-1,e&=~n}}function b_(t){if(We&6)throw Error(ae(327));Bl();var e=Th(t,0);if(!(e&1))return rn(t,Qt()),null;var r=Xh(t,e);if(t.tag!==0&&r===2){var n=Pp(t);n!==0&&(e=n,r=cy(t,n))}if(r===1)throw r=Kc,Oi(t,0),Ia(t,e),rn(t,Qt()),r;if(r===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ci(t,Xr,Gs),rn(t,Qt()),null}function Rx(t,e){var r=We;We|=1;try{return t(e)}finally{We=r,We===0&&(Rl=Qt()+500,d0&&hi())}}function Yi(t){$a!==null&&$a.tag===0&&!(We&6)&&Bl();var e=We;We|=1;var r=Qn.transition,n=tt;try{if(Qn.transition=null,tt=1,t)return t()}finally{tt=n,Qn.transition=r,We=e,!(We&6)&&hi()}}function $x(){un=pl.current,gt(pl)}function Oi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,vI(r)),Rt!==null)for(r=Rt.return;r!==null;){var n=r;switch(xx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Dh();break;case 3:Dl(),gt(en),gt(Sr),Ex();break;case 5:kx(n);break;case 4:Dl();break;case 13:gt(_t);break;case 19:gt(_t);break;case 10:Cx(n.type._context);break;case 22:case 23:$x()}r=r.return}if(tr=t,Rt=t=Ya(t.current,null),hr=un=e,Vt=0,Kc=null,Dx=m0=Ji=0,Xr=gc=null,Ii!==null){for(e=0;e<Ii.length;e++)if(r=Ii[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}Ii=null}return t}function Uk(t,e){do{var r=Rt;try{if(_x(),oh.current=Gh,zh){for(var n=Ct.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}zh=!1}if(Xi=0,Yt=zt=Ct=null,hc=!1,Oc=0,Px.current=null,r===null||r.return===null){Vt=1,Kc=e,Rt=null;break}e:{var a=t,o=r.return,l=r,A=e;if(e=hr,l.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var u=A,h=l,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=A_(o);if(f!==null){f.flags&=-257,c_(f,o,l,a,e),f.mode&1&&l_(a,u,e),e=f,A=u;var g=e.updateQueue;if(g===null){var y=new Set;y.add(A),e.updateQueue=y}else g.add(A);break e}else{if(!(e&1)){l_(a,u,e),Ox();break e}A=Error(ae(426))}}else if(wt&&l.mode&1){var v=A_(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),c_(v,o,l,a,e),wx(Ml(A,l));break e}}a=A=Ml(A,l),Vt!==4&&(Vt=2),gc===null?gc=[a]:gc.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=mk(a,A,e);r_(a,m);break e;case 1:l=A;var p=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Xa===null||!Xa.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=pk(a,l,e);r_(a,w);break e}}a=a.return}while(a!==null)}Pk(r)}catch(_){e=_,Rt===r&&r!==null&&(Rt=r=r.return);continue}break}while(1)}function Qk(){var t=Wh.current;return Wh.current=Gh,t===null?Gh:t}function Ox(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),tr===null||!(Ji&268435455)&&!(m0&268435455)||Ia(tr,hr)}function Xh(t,e){var r=We;We|=2;var n=Qk();(tr!==t||hr!==e)&&(Gs=null,Oi(t,e));do try{KI();break}catch(s){Uk(t,s)}while(1);if(_x(),We=r,Wh.current=n,Rt!==null)throw Error(ae(261));return tr=null,hr=0,Vt}function KI(){for(;Rt!==null;)Ik(Rt)}function zI(){for(;Rt!==null&&!mQ();)Ik(Rt)}function Ik(t){var e=Mk(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?Pk(t):Rt=e,Px.current=null}function Pk(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=MI(r,e),r!==null){r.flags&=32767,Rt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Rt=null;return}}else if(r=DI(r,e,un),r!==null){Rt=r;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Vt===0&&(Vt=5)}function Ci(t,e,r){var n=tt,s=Qn.transition;try{Qn.transition=null,tt=1,GI(t,e,r,n)}finally{Qn.transition=s,tt=n}return null}function GI(t,e,r,n){do Bl();while($a!==null);if(We&6)throw Error(ae(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(SQ(t,a),t===tr&&(Rt=tr=null,hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||dd||(dd=!0,Rk(Fh,function(){return Bl(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Qn.transition,Qn.transition=null;var o=tt;tt=1;var l=We;We|=4,Px.current=null,$I(t,r),Nk(r,t),dI(Lp),Uh=!!Op,Lp=Op=null,t.current=r,OI(r),pQ(),We=l,tt=o,Qn.transition=a}else t.current=r;if(dd&&(dd=!1,$a=t,qh=s),a=t.pendingLanes,a===0&&(Xa=null),xQ(r.stateNode),rn(t,Qt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Vh)throw Vh=!1,t=ly,ly=null,t;return qh&1&&t.tag!==0&&Bl(),a=t.pendingLanes,a&1?t===Ay?mc++:(mc=0,Ay=t):mc=0,hi(),null}function Bl(){if($a!==null){var t=mj(qh),e=Qn.transition,r=tt;try{if(Qn.transition=null,tt=16>t?16:t,$a===null)var n=!1;else{if(t=$a,$a=null,qh=0,We&6)throw Error(ae(331));var s=We;for(We|=4,xe=t.current;xe!==null;){var a=xe,o=a.child;if(xe.flags&16){var l=a.deletions;if(l!==null){for(var A=0;A<l.length;A++){var u=l[A];for(xe=u;xe!==null;){var h=xe;switch(h.tag){case 0:case 11:case 15:fc(8,h,a)}var c=h.child;if(c!==null)c.return=h,xe=c;else for(;xe!==null;){h=xe;var d=h.sibling,f=h.return;if(jk(h),h===u){xe=null;break}if(d!==null){d.return=f,xe=d;break}xe=f}}}var g=a.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}xe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,xe=o;else e:for(;xe!==null;){if(a=xe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fc(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,xe=m;break e}xe=a.return}}var p=t.current;for(xe=p;xe!==null;){o=xe;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,xe=x;else e:for(o=p;xe!==null;){if(l=xe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:g0(9,l)}}catch(_){Ft(l,l.return,_)}if(l===o){xe=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,xe=w;break e}xe=l.return}}if(We=s,hi(),Cs&&typeof Cs.onPostCommitFiberRoot=="function")try{Cs.onPostCommitFiberRoot(o0,t)}catch{}n=!0}return n}finally{tt=r,Qn.transition=e}}return!1}function __(t,e,r){e=Ml(r,e),e=mk(t,e,1),t=qa(t,e,1),e=Mr(),t!==null&&(gu(t,1,e),rn(t,e))}function Ft(t,e,r){if(t.tag===3)__(t,t,r);else for(;e!==null;){if(e.tag===3){__(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xa===null||!Xa.has(n))){t=Ml(r,t),t=pk(e,t,1),e=qa(e,t,1),t=Mr(),e!==null&&(gu(e,1,t),rn(e,t));break}}e=e.return}}function WI(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Mr(),t.pingedLanes|=t.suspendedLanes&r,tr===t&&(hr&r)===r&&(Vt===4||Vt===3&&(hr&130023424)===hr&&500>Qt()-Mx?Oi(t,0):Dx|=r),rn(t,e)}function Dk(t,e){e===0&&(t.mode&1?(e=rd,rd<<=1,!(rd&130023424)&&(rd=4194304)):e=1);var r=Mr();t=la(t,e),t!==null&&(gu(t,e,r),rn(t,r))}function VI(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Dk(t,r)}function qI(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ae(314))}n!==null&&n.delete(e),Dk(t,r)}var Mk;Mk=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Jr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Jr=!1,PI(t,e,r);Jr=!!(t.flags&131072)}else Jr=!1,wt&&e.flags&1048576&&Lj(e,$h,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ah(t,e),t=e.pendingProps;var s=Ql(e,Sr.current);Cl(e,r),s=Fx(null,e,n,t,s,r);var a=Tx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(n)?(a=!0,Mh(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sx(e),s.updater=f0,e.stateNode=s,s._reactInternals=e,Jp(e,n,t,r),e=ey(null,e,n,!0,a,r)):(e.tag=0,wt&&a&&vx(e),Qr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ah(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=JI(n),t=Xn(n,t),s){case 0:e=Zp(null,e,n,t,r);break e;case 1:e=h_(null,e,n,t,r);break e;case 11:e=u_(null,e,n,t,r);break e;case 14:e=d_(null,e,n,Xn(n.type,t),r);break e}throw Error(ae(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Xn(n,s),Zp(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Xn(n,s),h_(t,e,n,s,r);case 3:e:{if(wk(e),t===null)throw Error(ae(387));n=e.pendingProps,a=e.memoizedState,s=a.element,Vj(t,e),Hh(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Ml(Error(ae(423)),e),e=f_(t,e,n,r,s);break e}else if(n!==s){s=Ml(Error(ae(424)),e),e=f_(t,e,n,r,s);break e}else for(fn=Va(e.stateNode.containerInfo.firstChild),gn=e,wt=!0,es=null,r=Gj(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Il(),n===s){e=Aa(t,e,r);break e}Qr(t,e,n,r)}e=e.child}return e;case 5:return qj(e),t===null&&Vp(e),n=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Hp(n,s)?o=null:a!==null&&Hp(n,a)&&(e.flags|=32),xk(t,e),Qr(t,e,o,r),e.child;case 6:return t===null&&Vp(e),null;case 13:return bk(t,e,r);case 4:return jx(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Pl(e,null,n,r):Qr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Xn(n,s),u_(t,e,n,s,r);case 7:return Qr(t,e,e.pendingProps,r),e.child;case 8:return Qr(t,e,e.pendingProps.children,r),e.child;case 12:return Qr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,ut(Oh,n._currentValue),n._currentValue=o,a!==null)if(os(a.value,o)){if(a.children===s.children&&!en.current){e=Aa(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var A=l.firstContext;A!==null;){if(A.context===n){if(a.tag===1){A=na(-1,r&-r),A.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?A.next=A:(A.next=h.next,h.next=A),u.pending=A}}a.lanes|=r,A=a.alternate,A!==null&&(A.lanes|=r),qp(a.return,r,e),l.lanes|=r;break}A=A.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ae(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),qp(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Qr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Cl(e,r),s=In(s),n=n(s),e.flags|=1,Qr(t,e,n,r),e.child;case 14:return n=e.type,s=Xn(n,e.pendingProps),s=Xn(n.type,s),d_(t,e,n,s,r);case 15:return yk(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Xn(n,s),Ah(t,e),e.tag=1,tn(n)?(t=!0,Mh(e)):t=!1,Cl(e,r),gk(e,n,s),Jp(e,n,s,r),ey(null,e,n,!0,t,r);case 19:return _k(t,e,r);case 22:return vk(t,e,r)}throw Error(ae(156,e.tag))};function Rk(t,e){return dj(t,e)}function XI(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,r,n){return new XI(t,e,r,n)}function Lx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function JI(t){if(typeof t=="function")return Lx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ox)return 11;if(t===lx)return 14}return 2}function Ya(t,e){var r=t.alternate;return r===null?(r=En(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function dh(t,e,r,n,s,a){var o=2;if(n=t,typeof t=="function")Lx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ol:return Li(r.children,s,a,e);case ix:o=8,s|=8;break;case wp:return t=En(12,r,e,s|2),t.elementType=wp,t.lanes=a,t;case bp:return t=En(13,r,e,s),t.elementType=bp,t.lanes=a,t;case _p:return t=En(19,r,e,s),t.elementType=_p,t.lanes=a,t;case qS:return p0(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case WS:o=10;break e;case VS:o=9;break e;case ox:o=11;break e;case lx:o=14;break e;case Na:o=16,n=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=En(o,r,e,s),e.elementType=t,e.type=n,e.lanes=a,e}function Li(t,e,r,n){return t=En(7,t,n,e),t.lanes=r,t}function p0(t,e,r,n){return t=En(22,t,n,e),t.elementType=qS,t.lanes=r,t.stateNode={isHidden:!1},t}function lm(t,e,r){return t=En(6,t,null,e),t.lanes=r,t}function Am(t,e,r){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YI(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hg(0),this.expirationTimes=Hg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hx(t,e,r,n,s,a,o,l,A){return t=new YI(t,e,r,l,A),e===1?(e=1,a===!0&&(e|=8)):e=0,a=En(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sx(a),t}function ZI(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:il,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function $k(t){if(!t)return ai;t=t._reactInternals;e:{if(oo(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var r=t.type;if(tn(r))return $j(t,r,e)}return e}function Ok(t,e,r,n,s,a,o,l,A){return t=Hx(r,n,!0,t,s,a,o,l,A),t.context=$k(null),r=t.current,n=Mr(),s=Ja(r),a=na(n,s),a.callback=e??null,qa(r,a,s),t.current.lanes=s,gu(t,s,n),rn(t,n),t}function y0(t,e,r,n){var s=e.current,a=Mr(),o=Ja(s);return r=$k(r),e.context===null?e.context=r:e.pendingContext=r,e=na(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=qa(s,e,o),t!==null&&(ss(t,s,o,a),ih(t,s,o)),o}function Jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Kx(t,e){C_(t,e),(t=t.alternate)&&C_(t,e)}function eP(){return null}var Lk=typeof reportError=="function"?reportError:function(t){console.error(t)};function zx(t){this._internalRoot=t}v0.prototype.render=zx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));y0(t,e,null,null)};v0.prototype.unmount=zx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yi(function(){y0(null,t,null,null)}),e[oa]=null}};function v0(t){this._internalRoot=t}v0.prototype.unstable_scheduleHydration=function(t){if(t){var e=vj();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Qa.length&&e!==0&&e<Qa[r].priority;r++);Qa.splice(r,0,t),r===0&&wj(t)}};function Gx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function x0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function B_(){}function tP(t,e,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Jh(o);a.call(u)}}var o=Ok(e,n,t,0,null,!1,!1,"",B_);return t._reactRootContainer=o,t[oa]=o.current,Pc(t.nodeType===8?t.parentNode:t),Yi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Jh(A);l.call(u)}}var A=Hx(t,0,!1,null,null,!1,!1,"",B_);return t._reactRootContainer=A,t[oa]=A.current,Pc(t.nodeType===8?t.parentNode:t),Yi(function(){y0(e,A,r,n)}),A}function w0(t,e,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var A=Jh(o);l.call(A)}}y0(e,o,t,s)}else o=tP(r,e,t,s,n);return Jh(o)}pj=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=KA(e.pendingLanes);r!==0&&(ux(e,r|1),rn(e,Qt()),!(We&6)&&(Rl=Qt()+500,hi()))}break;case 13:Yi(function(){var n=la(t,1);if(n!==null){var s=Mr();ss(n,t,1,s)}}),Kx(t,1)}};dx=function(t){if(t.tag===13){var e=la(t,134217728);if(e!==null){var r=Mr();ss(e,t,134217728,r)}Kx(t,134217728)}};yj=function(t){if(t.tag===13){var e=Ja(t),r=la(t,e);if(r!==null){var n=Mr();ss(r,t,e,n)}Kx(t,e)}};vj=function(){return tt};xj=function(t,e){var r=tt;try{return tt=t,e()}finally{tt=r}};Up=function(t,e,r){switch(e){case"input":if(Sp(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=u0(n);if(!s)throw Error(ae(90));JS(n),Sp(n,s)}}}break;case"textarea":ZS(t,r);break;case"select":e=r.value,e!=null&&xl(t,!!r.multiple,e,!1)}};ij=Rx;oj=Yi;var rP={usingClientEntryPoint:!1,Events:[pu,ul,u0,sj,aj,Rx]},CA={findFiberByHostInstance:Qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nP={bundleType:CA.bundleType,version:CA.version,rendererPackageName:CA.rendererPackageName,rendererConfig:CA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cj(t),t===null?null:t.stateNode},findFiberByHostInstance:CA.findFiberByHostInstance||eP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{o0=hd.inject(nP),Cs=hd}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rP;yn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gx(e))throw Error(ae(200));return ZI(t,e,null,r)};yn.createRoot=function(t,e){if(!Gx(t))throw Error(ae(299));var r=!1,n="",s=Lk;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hx(t,1,!1,null,null,r,!1,n,s),t[oa]=e.current,Pc(t.nodeType===8?t.parentNode:t),new zx(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=cj(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return Yi(t)};yn.hydrate=function(t,e,r){if(!x0(e))throw Error(ae(200));return w0(null,t,e,!0,r)};yn.hydrateRoot=function(t,e,r){if(!Gx(t))throw Error(ae(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=Lk;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Ok(e,null,t,1,r??null,s,!1,a,o),t[oa]=e.current,Pc(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new v0(e)};yn.render=function(t,e,r){if(!x0(e))throw Error(ae(200));return w0(null,t,e,!1,r)};yn.unmountComponentAtNode=function(t){if(!x0(t))throw Error(ae(40));return t._reactRootContainer?(Yi(function(){w0(null,null,t,!1,function(){t._reactRootContainer=null,t[oa]=null})}),!0):!1};yn.unstable_batchedUpdates=Rx;yn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!x0(r))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return w0(t,e,r,!1,n)};yn.version="18.3.1-next-f1338f8080-20240426";function Hk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hk)}catch(t){console.error(t)}}Hk(),HS.exports=yn;var sP=HS.exports,S_=sP;vp.createRoot=S_.createRoot,vp.hydrateRoot=S_.hydrateRoot;var W=(t=>(t.Titans="titans",t.Atlanteans="atlanteans",t))(W||{}),$e=(t=>(t.Quick="quick",t.Long="long",t))($e||{}),Fe=(t=>(t.Top="top",t.Bottom="bottom",t.Single="single",t))(Fe||{}),ue=(t=>(t.None="none",t.AllPick="allpick",t.Single="single",t.Random="random",t.PickAndBan="pickandban",t))(ue||{});const Zi=[{id:0,name:"Arien",icon:"heroes/arien.png",complexity:1,roles:["Tactician","Disabler"],additionalRoles:["Durable","Pusher"],expansion:"Core",description:"Arien is a master duelist who boasts the some of the strongest attacks and disruption on the roster. He is relatively sturdy and presents some interesting positional puzzles.",attack:8,initiative:4,defence:5,defence_upgraded:6,movement:5,movement_upgraded:6},{id:1,name:"Brogan",icon:"heroes/brogan.png",complexity:1,roles:["Durable","Disabler"],additionalRoles:["Pusher","Farming"],expansion:"Core",description:"Brogan is a great starting tank, nigh-unkillable and great at applying pressure in an area. More mobile than you might expect, but quite predictable.",attack:7,initiative:1,defence:8,movement:2,movement_upgraded:4},{id:2,name:"Tigerclaw",icon:"heroes/tigerclaw.png",complexity:1,roles:["Melee","Disabler"],additionalRoles:["Farming"],expansion:"Core",description:"Tigerclaw is an evasive hero capable of dodging attacks, debilitating enemy heroes and stealing their gold.",attack:4,attack_upgraded:8,initiative:8,defence:1,defence_upgraded:4,movement:7,movement_upgraded:8},{id:3,name:"Wasp",icon:"heroes/wasp.png",complexity:1,roles:["Disabler","Tactician"],additionalRoles:["Sniper"],expansion:"Core",description:"Wasp is a crowd control specialist, with area control abilities.",attack:5,initiative:6,defence:4,defence_upgraded:5,movement:5},{id:4,name:"Sabina",icon:"heroes/sabina.png",complexity:1,roles:["Tactician","Pusher"],expansion:"Core",description:"Sabina is a pusher who works best surrounded by friendly minions, or in one-on-one duels.",attack:1,attack_upgraded:8,initiative:5,defence:3,movement:5,movement_upgraded:6},{id:5,name:"Xargatha",icon:"heroes/xargatha.png",complexity:1,roles:["Tactician","Pusher"],additionalRoles:["Disabler","Durable","Sniper"],expansion:"Core",description:"Xargartha is a powerful brawler and zoner, who performs best when up and close against enemy minions.",attack:5,attack_upgraded:8,initiative:3,defence:6,movement:6},{id:6,name:"Dodger",icon:"heroes/dodger.png",complexity:1,roles:["Damager","Sniper"],additionalRoles:["Pusher","Farming","Disabler"],expansion:"Core",description:"Dodger is damaging hero who becomes more powerful as her enemies become weaker.",attack:3,initiative:7,defence:2,defence_upgraded:5,movement:5},{id:7,name:"Rowenna",icon:"heroes/rowenna.png",complexity:2,roles:["Melee","Durable"],additionalRoles:["Healer","Farming","Pusher","Tactician"],expansion:"Arcane",description:"Rowenna is a front-line tank and battlefield support who excels at surviving in contested areas.",attack:8,initiative:4,defence:7,movement:3,movement_upgraded:5},{id:8,name:"Garrus",icon:"heroes/garrus.png",complexity:2,roles:["Disabler","Durable"],additionalRoles:["Tactician"],expansion:"Defiant",description:"Garrus dominates the battlefield as a melee brawler who thrives on intimidation and control.",attack:8,initiative:3,defence:7,movement:5,movement_upgraded:6},{id:9,name:"Bain",icon:"heroes/bain.png",complexity:2,roles:["Tactician","Sniper"],additionalRoles:["Healer","Farming","Durable"],expansion:"Defiant",description:"Bain is a ranged initiator who specializes in marking targets, forcing discards, and setting up kills.",attack:5,initiative:4,defence:4,defence_upgraded:6,movement:5,movement_upgraded:6},{id:10,name:"Whisper",icon:"heroes/whisper.png",complexity:2,roles:["Damager","Durable"],additionalRoles:["Tactician","Pusher"],expansion:"Devoted",description:"Whisper is an adaptive support fighter whose power scales with battlefield clearing, gaining strength as minion spawns empty.",attack:7,initiative:7,defence:4,movement:3,movement_upgraded:5},{id:11,name:"Misa",icon:"heroes/misa.png",complexity:2,roles:["Tactician","Durable"],additionalRoles:["Damager"],expansion:"Devoted",description:"Misa is an elite mobility assassin and disruptor who controls engagements through superior positioning and unpredictable movement.",attack:6,initiative:7,defence:5,movement:1,movement_upgraded:8},{id:12,name:"Ursafar",icon:"heroes/ursafar.png",complexity:2,roles:["Durable","Pusher"],additionalRoles:["Farming","Melee"],expansion:"Devoted",description:'Ursafar is a momentum-based melee brawler who transforms from adequate to overwhelming once his "enraged" state activates.',attack:6,initiative:5,defence:6,movement:1,movement_upgraded:5},{id:13,name:"Silverarrow",icon:"heroes/silverarrow.png",complexity:2,roles:["Sniper","Damager"],additionalRoles:["Disabler","Healer","Farming"],expansion:"Devoted",description:"Silverarrow is a long-range zone controller and initiator who dominates through superior positioning and keeping her distance.",attack:2,initiative:7,defence:1,movement:6,movement_upgraded:7},{id:14,name:"Min",icon:"heroes/min.png",complexity:2,roles:["Tokens","Disabler"],additionalRoles:["Damager","Melee"],expansion:"Renowned",description:"Min strikes with lightning speed as one of the game's fastest initiators, wielding ancient dragon-inspired martial arts",attack:4,attack_upgraded:8,initiative:8,defence:3,defence_upgraded:8,movement:6},{id:15,name:"Mrak",icon:"heroes/mrak.png",complexity:3,roles:["Melee","Tokens"],additionalRoles:["Durable","Disabler","Tactician"],expansion:"Arcane",description:"Mrak is a heavyweight disrupter, commanding powers of rock and stone. Slow and immobile, he is at his best when the action comes to him.",attack:8,initiative:1,defence:8,movement:2,movement_upgraded:4},{id:16,name:"Cutter",icon:"heroes/cutter.png",complexity:3,roles:["Tactician","Disabler"],additionalRoles:["Farming"],expansion:"Defiant",description:"Cutter dances across the battlefield, striking precisely when opportunity presents itself. Her grappling hook allows last-second positioning, while her fork-creating attacks force impossible decisions upon enemies.",attack:4,attack_upgraded:8,initiative:6,defence:4,movement:4,movement_upgraded:8},{id:17,name:"Trinkets",icon:"heroes/trinkets.png",complexity:3,roles:["Sniper","Damager"],additionalRoles:["Pusher"],expansion:"Defiant",description:"Trinkets is a light-weight, fast, highly-mobile, ranged killer who presents an enormous danger zone in the Venn Diagram between himself and his Turret.",attack:3,attack_upgraded:5,initiative:6,defence:2,defence_upgraded:4,movement:7,movement_upgraded:8},{id:18,name:"Tali",icon:"heroes/tali.png",complexity:3,roles:["Damager","Pusher"],additionalRoles:["Healer","Durable","Tokens"],expansion:"Devoted",description:"Tali commands the spirit world as a great support hero, manipulating the battlefield with ice tokens and healing totems.",attack:4,attack_upgraded:6,initiative:5,initiative_upgraded:8,defence:4,movement:5},{id:19,name:"Swift",icon:"heroes/swift.png",complexity:3,roles:["Sniper","Farming"],additionalRoles:["Tactician"],expansion:"Renowned",description:"Swift dominates from the shadows with the extremely long attack range, but presents a complex positional puzzle due to straight line restrictions.",attack:5,initiative:4,defence:2,movement:7},{id:20,name:"Wuk",icon:"heroes/wuk.png",complexity:3,roles:["Tokens","Pusher"],additionalRoles:["Durable","Sniper","Tactician","Healer"],expansion:"Renowned",description:"With Wuk at the table, nobody needs to be reminded about the thousand pound gorilla in the room. Everyone's watching to see where Wuk puts down his trees and defines his turf. He exerts great area control, but requires good planning.",attack:5,initiative:1,defence:8,movement:3,movement_upgraded:4},{id:21,name:"Hanu",icon:"heroes/hanu.png",complexity:3,roles:["Tactician","Sniper"],additionalRoles:["Pusher"],expansion:"Renowned",description:"Hanu the Trickster is a great support hero. His cards allow for shenanigans, bamboozling, knavery, and outright mischief.",attack:4,initiative:8,defence:1,movement:7,movement_upgraded:8},{id:22,name:"Brynn",icon:"heroes/brynn.png",complexity:3,roles:["Tactician","Damager"],additionalRoles:["Durable"],expansion:"Wayward",description:"Brynn is a tactical battlefield manipulator who creates and exploits positioning traps, gaining powerful bonuses when enemies are surrounded by three or more obstacles.",attack:4,attack_upgraded:8,initiative:7,defence:4,movement:5,movement_upgraded:6},{id:23,name:"Mortimer",icon:"heroes/mortimer.png",complexity:3,roles:["Melee","Tokens"],additionalRoles:["Farming","Durable","Pusher"],expansion:"Wayward",description:"Mortimer is a battlefield controller who compensates for his limited mobility by commanding persistent zombie tokens that remain on the board between rounds.",attack:8,initiative:2,defence:7,movement:4},{id:24,name:"Widget and Pyro",icon:"heroes/widget.png",complexity:3,roles:["Melee","Tokens"],additionalRoles:["Damager"],expansion:"Wayward",description:"Widget is a kobold tactician who operates as a dual-unit fighter alongside her emotional support dragon, Pyro, allowing her to control two points on the battlefield simultaneously.",attack:5,initiative:4,defence:4,movement:5,movement_upgraded:6},{id:25,name:"Snorri",icon:"heroes/snorri.png",complexity:4,roles:["Sniper","Farming"],additionalRoles:["Durable","Damager","Pusher","Healer"],expansion:"Arcane",description:"Snorri is a traditional dwarf who wields the power of four distinct runes to transform how each of his cards functions.",attack:5,attack_upgraded:6,initiative:2,defence:5,defence_upgraded:6,movement:4,movement_upgraded:5},{id:26,name:"Razzle",icon:"heroes/razzle.png",complexity:4,roles:["Tactician","Melee"],expansion:"Arcane",description:"Razzle is a fractured fey who multiplies across the battlefield, controlling up to four separate copies of herself simultaneously.",attack:3,initiative:8,defence:1,defence_upgraded:4,movement:5,movement_upgraded:6},{id:27,name:"Gydion",icon:"heroes/gydion.png",complexity:4,roles:["Sniper","Tactician"],additionalRoles:["Farming","Damager","Pusher","Tokens"],expansion:"Arcane",description:"Gydion is an absent-minded archwizard who manages two separate handshis action cards and a unique spellbook deck. He prepares spells that are consumed upon casting, requiring careful resource management to maximize his arcane potential.",attack:5,attack_upgraded:6,initiative:3,defence:3,defence_upgraded:5,movement:1,movement_upgraded:4},{id:28,name:"Nebkher",icon:"heroes/nebkher.png",complexity:4,roles:["Disabler","Tokens"],additionalRoles:["Sniper"],expansion:"Defiant",description:"NebKher is a space-bending undead mastermind who manipulates both the battlefield and enemy minds with equal malevolence. His ability to copy enemy actions, create illusion tokens for strategic teleportation, and control minions transforms him into a terrifying disruptor.",attack:2,attack_upgraded:3,initiative:1,defence:5,defence_upgraded:6,movement:2,movement_upgraded:5},{id:29,name:"Ignatia",icon:"heroes/ignatia.png",complexity:4,roles:["Sniper","Damager"],additionalRoles:["Tokens","Tactician","Pusher"],expansion:"Renowned",description:"Ignatia is a dual-natured elementalist whose abilities shift dramatically based on which team controls the tiebreaker coin.",attack:5,initiative:2,defence:6,movement:4,movement_upgraded:5},{id:30,name:"Takahide",icon:"heroes/takahide.png",complexity:4,roles:["Durable","Sniper"],additionalRoles:["Tactician","Damager","Farming"],expansion:"Wayward",description:"Takahide is a masterful battlefield commander who cycles between three distinct combat styles.",attack:5,attack_upgraded:7,initiative:3,initiative_upgraded:5,defence:4,defence_upgraded:7,movement:1,movement_upgraded:4},{id:31,name:"Emmitt",icon:"heroes/emmitt.png",complexity:4,roles:["Melee","Tactician"],additionalRoles:["Durable","Disabler","Tokens"],expansion:"Wayward",description:"Emmitt is a chronological disruptor who bends the very rules of initiative, causing heroes with lower values to act before those with higher in a complete reversal of time's normal flow.",attack:5,attack_upgraded:8,initiative:1,defence:6,movement:2,movement_upgraded:4}],$l=()=>["Core","Devoted","Defiant","Wayward","Renowned","Arcane"],Wx=t=>Zi.filter(e=>t.includes(e.expansion)),aP=Object.freeze(Object.defineProperty({__proto__:null,filterHeroesByExpansions:Wx,getAllExpansions:$l,heroes:Zi},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),j_=t=>{const e=oP(t);return e.charAt(0).toUpperCase()+e.slice(1)},Kk=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),lP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=B.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...l},A)=>B.createElement("svg",{ref:A,...AP,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Kk("lucide",s),...!a&&!lP(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,h])=>B.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(t,e)=>{const r=B.forwardRef(({className:n,...s},a)=>B.createElement(cP,{ref:a,iconNode:e,className:Kk(`lucide-${iP(j_(t))}`,`lucide-${t}`,n),...s}));return r.displayName=j_(t),r};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Yh=le("arrow-down",uP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],dy=le("arrow-left",dP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],k_=le("arrow-right",hP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],Zh=le("arrow-up",fP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],zc=le("award",gP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],pP=le("bell",mP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],vP=le("book",yP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Yo=le("bot",xP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wP=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Nn=le("calendar",wP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bP=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],b0=le("camera",bP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],CP=le("chart-no-axes-column-increasing",_P);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Rr=le("check",BP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],pn=le("chevron-down",SP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cr=le("chevron-left",jP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gc=le("chevron-right",kP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ls=le("chevron-up",EP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ei=le("circle-alert",NP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],TP=le("circle-arrow-down",FP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],QP=le("circle-arrow-up",UP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bi=le("circle-check-big",IP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eo=le("circle-help",PP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],ps=le("circle-minus",DP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Sa=le("circle-plus",MP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],as=le("clock",RP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],OP=le("cloud",$P);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],ts=le("coins",LP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],E_=le("copy",HP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],hh=le("database",KP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ef=le("download",zP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fh=le("eye-off",GP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],gh=le("eye",WP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qP=le("file-text",VP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],JP=le("file",XP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vu=le("funnel",YP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=[["path",{d:"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14",key:"1j4xps"}],["path",{d:"m7 18 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"uospg8"}],["path",{d:"m2 13 6 6",key:"16e5sb"}]],zk=le("hand-helping",ZP);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Vx=le("heart",eD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],tf=le("hexagon",tD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],nD=le("history",rD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],aD=le("house",sD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],rf=le("infinity",iD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Dt=le("info",oD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],N_=le("link",lD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ft=le("loader-circle",AD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],uD=le("loader",cD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hD=le("lock",dD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],gD=le("log-out",fD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],pD=le("mail",mD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],F_=le("medal",yD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M5 12h14",key:"1ays0h"}]],Pa=le("minus",vD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],qx=le("play",xD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Js=le("plus",wD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ca=le("refresh-cw",bD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],pc=le("rotate-ccw",_D);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Gk=le("save",CD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],lo=le("search",BD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],jD=le("send",SD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ED=le("settings",kD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],nf=le("share-2",ND);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],At=le("shield",FD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],hy=le("shuffle",TD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Da=le("skull",UD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],ID=le("sparkles",QD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],DD=le("square-check-big",PD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],RD=le("square-pen",MD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],to=le("star",$D);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],Wk=le("sword",OD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],Ir=le("swords",LD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],sf=le("target",HD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Sl=le("trash-2",KD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],sa=le("trending-up",zD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ea=le("triangle-alert",GD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],af=le("trophy",WD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],of=le("upload",VD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],XD=le("user-check",qD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],YD=le("user-minus",JD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Vk=le("user-plus",ZD);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ii=le("user",e7);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],et=le("users",t7);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],n7=le("volume-2",r7);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],a7=le("volume-x",s7);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],o7=le("wifi-off",i7);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],qk=le("wifi",l7);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],jr=le("x",A7);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],u7=le("zap",c7);function Xx(){const[t,e]=B.useState({isMobile:!1,isTablet:!1,isDesktop:!0});return B.useEffect(()=>{const r=()=>{const n=window.innerWidth;e({isMobile:n<=768,isTablet:n>768&&n<=1024,isDesktop:n>1024})};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),t}const Ue=({text:t,children:e,position:r="top",className:n="",maxWidth:s="max-w-xs",disableMobileTooltip:a=!1})=>{const{isMobile:o}=Xx(),[l,A]=B.useState(!1),[u,h]=B.useState(r),c=B.useRef(null),d=B.useRef(null),f=B.useRef(null),g=B.useCallback(()=>{if(!l||!d.current||!f.current)return;const w=d.current.getBoundingClientRect(),_=f.current.getBoundingClientRect(),b=window.innerWidth,S=window.innerHeight;let E=r;(r==="left"&&_.left<w.width+10||r==="right"&&_.right+w.width+10>b)&&(E=r==="left"?"right":"left"),(r==="top"&&_.top<w.height+10||r==="bottom"&&_.bottom+w.height+10>S)&&(E=r==="top"?"bottom":"top"),h(E)},[l,r]);B.useEffect(()=>{l&&setTimeout(g,0)},[l,g]);const y=B.useCallback(w=>{a||(w.stopPropagation(),A(!l))},[l,a]),v=B.useCallback(()=>{o||(c.current=setTimeout(()=>{A(!0)},300))},[o]),m=B.useCallback(()=>{o||(c.current&&clearTimeout(c.current),A(!1))},[o]);B.useEffect(()=>{if(!o||!l)return;const w=_=>{f.current&&!f.current.contains(_.target)&&A(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[o,l]);const p={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"},x={top:"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-r-4 border-l-4 border-transparent border-t-gray-900",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-4 border-r-4 border-l-4 border-transparent border-b-gray-900",left:"left-full top-1/2 transform -translate-y-1/2 border-l-4 border-t-4 border-b-4 border-transparent border-l-gray-900",right:"right-full top-1/2 transform -translate-y-1/2 border-r-4 border-t-4 border-b-4 border-transparent border-r-gray-900"};return i.jsxs("div",{ref:f,className:`relative inline-block ${n}`,onMouseEnter:v,onMouseLeave:m,onClick:o&&!a?y:void 0,children:[e,l&&i.jsxs("div",{ref:d,className:`absolute z-50 px-3 py-2 text-sm bg-gray-900 text-white rounded shadow-lg w-auto min-w-[160px] ${p[u]} ${s}`,onClick:w=>o&&!a&&w.stopPropagation(),children:[t,i.jsx("div",{className:`absolute w-0 h-0 ${x[u]}`})]})]})};var xs={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var c=this||r;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var d=this||r;if(c=parseFloat(c),d.ctx||h(),typeof c<"u"&&c>=0&&c<=1){if(d._volume=c,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var g=d._howls[f]._getSoundIds(),y=0;y<g.length;y++){var v=d._howls[f]._soundById(g[y]);v&&v._node&&(v._node.volume=v._volume*c)}return d}return d._volume},mute:function(c){var d=this||r;d.ctx||h(),d._muted=c,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c?0:d._volume,r.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var g=d._howls[f]._getSoundIds(),y=0;y<g.length;y++){var v=d._howls[f]._soundById(g[y]);v&&v._node&&(v._node.muted=c?!0:v._muted)}return d},stop:function(){for(var c=this||r,d=0;d<c._howls.length;d++)c._howls[d].stop();return c},unload:function(){for(var c=this||r,d=c._howls.length-1;d>=0;d--)c._howls[d].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,h()),c},codecs:function(c){return(this||r)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||r;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var d=new Audio;d.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||r,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return c}if(!d||typeof d.canPlayType!="function")return c;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),g=c._navigator?c._navigator.userAgent:"",y=g.match(/OPR\/(\d+)/g),v=y&&parseInt(y[0].split("/")[1],10)<33,m=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,p=g.match(/Version\/(.*?) /),x=m&&p&&parseInt(p[1],10)<15;return c._codecs={mp3:!!(!v&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||r;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var d=function(f){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,c._releaseHtml5Audio(g)}catch{c.noAudio=!0;break}for(var y=0;y<c._howls.length;y++)if(!c._howls[y]._webAudio)for(var v=c._howls[y]._getSoundIds(),m=0;m<v.length;m++){var p=c._howls[y]._soundById(v[m]);p&&p._node&&!p._node._unlocked&&(p._node._unlocked=!0,p._node.load())}c._autoResume();var x=c.ctx.createBufferSource();x.buffer=c._scratchBuffer,x.connect(c.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),x.onended=function(){x.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var w=0;w<c._howls.length;w++)c._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),c}},_obtainHtml5Audio:function(){var c=this||r;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var d=this||r;return c._unlocked&&d._html5AudioPool.push(c),d},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!r.usingWebAudio)){for(var d=0;d<c._howls.length;d++)if(c._howls[d]._webAudio){for(var f=0;f<c._howls[d]._sounds.length;f++)if(!c._howls[d]._sounds[f]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var g=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(g,g)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!r.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var d=0;d<c._howls.length;d++)c._howls[d]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var r=new e,n=function(c){var d=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(c)};n.prototype={init:function(c){var d=this;return r.ctx||h(),d._autoplay=c.autoplay||!1,d._format=typeof c.format!="string"?c.format:[c.format],d._html5=c.html5||!1,d._muted=c.mute||!1,d._loop=c.loop||!1,d._pool=c.pool||5,d._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,d._rate=c.rate||1,d._sprite=c.sprite||{},d._src=typeof c.src!="string"?c.src:[c.src],d._volume=c.volume!==void 0?c.volume:1,d._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=c.onend?[{fn:c.onend}]:[],d._onfade=c.onfade?[{fn:c.onfade}]:[],d._onload=c.onload?[{fn:c.onload}]:[],d._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],d._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],d._onpause=c.onpause?[{fn:c.onpause}]:[],d._onplay=c.onplay?[{fn:c.onplay}]:[],d._onstop=c.onstop?[{fn:c.onstop}]:[],d._onmute=c.onmute?[{fn:c.onmute}]:[],d._onvolume=c.onvolume?[{fn:c.onvolume}]:[],d._onrate=c.onrate?[{fn:c.onrate}]:[],d._onseek=c.onseek?[{fn:c.onseek}]:[],d._onunlock=c.onunlock?[{fn:c.onunlock}]:[],d._onresume=[],d._webAudio=r.usingWebAudio&&!d._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var c=this,d=null;if(r.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var f=0;f<c._src.length;f++){var g,y;if(c._format&&c._format[f])g=c._format[f];else{if(y=c._src[f],typeof y!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(y),g||(g=/\.([^.]+)$/.exec(y.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&r.codecs(g)){d=c._src[f];break}}if(!d){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=d,c._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new s(c),c._webAudio&&o(c),c},play:function(c,d){var f=this,g=null;if(typeof c=="number")g=c,c=null;else{if(typeof c=="string"&&f._state==="loaded"&&!f._sprite[c])return null;if(typeof c>"u"&&(c="__default",!f._playLock)){for(var y=0,v=0;v<f._sounds.length;v++)f._sounds[v]._paused&&!f._sounds[v]._ended&&(y++,g=f._sounds[v]._id);y===1?c=null:g=null}}var m=g?f._soundById(g):f._inactiveSound();if(!m)return null;if(g&&!c&&(c=m._sprite||"__default"),f._state!=="loaded"){m._sprite=c,m._ended=!1;var p=m._id;return f._queue.push({event:"play",action:function(){f.play(p)}}),p}if(g&&!m._paused)return d||f._loadQueue("play"),m._id;f._webAudio&&r._autoResume();var x=Math.max(0,m._seek>0?m._seek:f._sprite[c][0]/1e3),w=Math.max(0,(f._sprite[c][0]+f._sprite[c][1])/1e3-x),_=w*1e3/Math.abs(m._rate),b=f._sprite[c][0]/1e3,S=(f._sprite[c][0]+f._sprite[c][1])/1e3;m._sprite=c,m._ended=!1;var E=function(){m._paused=!1,m._seek=x,m._start=b,m._stop=S,m._loop=!!(m._loop||f._sprite[c][2])};if(x>=S){f._ended(m);return}var C=m._node;if(f._webAudio){var N=function(){f._playLock=!1,E(),f._refreshBuffer(m);var $=m._muted||f._muted?0:m._volume;C.gain.setValueAtTime($,r.ctx.currentTime),m._playStart=r.ctx.currentTime,typeof C.bufferSource.start>"u"?m._loop?C.bufferSource.noteGrainOn(0,x,86400):C.bufferSource.noteGrainOn(0,x,w):m._loop?C.bufferSource.start(0,x,86400):C.bufferSource.start(0,x,w),_!==1/0&&(f._endTimers[m._id]=setTimeout(f._ended.bind(f,m),_)),d||setTimeout(function(){f._emit("play",m._id),f._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?N():(f._playLock=!0,f.once("resume",N),f._clearTimer(m._id))}else{var Q=function(){C.currentTime=x,C.muted=m._muted||f._muted||r._muted||C.muted,C.volume=m._volume*r.volume(),C.playbackRate=m._rate;try{var $=C.play();if($&&typeof Promise<"u"&&($ instanceof Promise||typeof $.then=="function")?(f._playLock=!0,E(),$.then(function(){f._playLock=!1,C._unlocked=!0,d?f._loadQueue():f._emit("play",m._id)}).catch(function(){f._playLock=!1,f._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),m._ended=!0,m._paused=!0})):d||(f._playLock=!1,E(),f._emit("play",m._id)),C.playbackRate=m._rate,C.paused){f._emit("playerror",m._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||m._loop?f._endTimers[m._id]=setTimeout(f._ended.bind(f,m),_):(f._endTimers[m._id]=function(){f._ended(m),C.removeEventListener("ended",f._endTimers[m._id],!1)},C.addEventListener("ended",f._endTimers[m._id],!1))}catch(L){f._emit("playerror",m._id,L)}};C.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(C.src=f._src,C.load());var P=window&&window.ejecta||!C.readyState&&r._navigator.isCocoonJS;if(C.readyState>=3||P)Q();else{f._playLock=!0,f._state="loading";var F=function(){f._state="loaded",Q(),C.removeEventListener(r._canPlayEvent,F,!1)};C.addEventListener(r._canPlayEvent,F,!1),f._clearTimer(m._id)}}return m._id},pause:function(c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(c)}}),d;for(var f=d._getSoundIds(c),g=0;g<f.length;g++){d._clearTimer(f[g]);var y=d._soundById(f[g]);if(y&&!y._paused&&(y._seek=d.seek(f[g]),y._rateSeek=0,y._paused=!0,d._stopFade(f[g]),y._node))if(d._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),d._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||d._emit("pause",y?y._id:null)}return d},stop:function(c,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(c)}}),f;for(var g=f._getSoundIds(c),y=0;y<g.length;y++){f._clearTimer(g[y]);var v=f._soundById(g[y]);v&&(v._seek=v._start||0,v._rateSeek=0,v._paused=!0,v._ended=!0,f._stopFade(g[y]),v._node&&(f._webAudio?v._node.bufferSource&&(typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),f._cleanBuffer(v._node)):(!isNaN(v._node.duration)||v._node.duration===1/0)&&(v._node.currentTime=v._start||0,v._node.pause(),v._node.duration===1/0&&f._clearSound(v._node))),d||f._emit("stop",v._id))}return f},mute:function(c,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(c,d)}}),f;if(typeof d>"u")if(typeof c=="boolean")f._muted=c;else return f._muted;for(var g=f._getSoundIds(d),y=0;y<g.length;y++){var v=f._soundById(g[y]);v&&(v._muted=c,v._interval&&f._stopFade(v._id),f._webAudio&&v._node?v._node.gain.setValueAtTime(c?0:v._volume,r.ctx.currentTime):v._node&&(v._node.muted=r._muted?!0:c),f._emit("mute",v._id))}return f},volume:function(){var c=this,d=arguments,f,g;if(d.length===0)return c._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var y=c._getSoundIds(),v=y.indexOf(d[0]);v>=0?g=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),g=parseInt(d[1],10));var m;if(typeof f<"u"&&f>=0&&f<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,d)}}),c;typeof g>"u"&&(c._volume=f),g=c._getSoundIds(g);for(var p=0;p<g.length;p++)m=c._soundById(g[p]),m&&(m._volume=f,d[2]||c._stopFade(g[p]),c._webAudio&&m._node&&!m._muted?m._node.gain.setValueAtTime(f,r.ctx.currentTime):m._node&&!m._muted&&(m._node.volume=f*r.volume()),c._emit("volume",m._id))}else return m=g?c._soundById(g):c._sounds[0],m?m._volume:0;return c},fade:function(c,d,f,g){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(c,d,f,g)}}),y;c=Math.min(Math.max(0,parseFloat(c)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),y.volume(c,g);for(var v=y._getSoundIds(g),m=0;m<v.length;m++){var p=y._soundById(v[m]);if(p){if(g||y._stopFade(v[m]),y._webAudio&&!p._muted){var x=r.ctx.currentTime,w=x+f/1e3;p._volume=c,p._node.gain.setValueAtTime(c,x),p._node.gain.linearRampToValueAtTime(d,w)}y._startFadeInterval(p,c,d,f,v[m],typeof g>"u")}}return y},_startFadeInterval:function(c,d,f,g,y,v){var m=this,p=d,x=f-d,w=Math.abs(x/.01),_=Math.max(4,w>0?g/w:g),b=Date.now();c._fadeTo=f,c._interval=setInterval(function(){var S=(Date.now()-b)/g;b=Date.now(),p+=x*S,p=Math.round(p*100)/100,x<0?p=Math.max(f,p):p=Math.min(f,p),m._webAudio?c._volume=p:m.volume(p,c._id,!0),v&&(m._volume=p),(f<d&&p<=f||f>d&&p>=f)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,m.volume(f,c._id),m._emit("fade",c._id))},_)},_stopFade:function(c){var d=this,f=d._soundById(c);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,c),f._fadeTo=null,d._emit("fade",c)),d},loop:function(){var c=this,d=arguments,f,g,y;if(d.length===0)return c._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],c._loop=f;else return y=c._soundById(parseInt(d[0],10)),y?y._loop:!1;else d.length===2&&(f=d[0],g=parseInt(d[1],10));for(var v=c._getSoundIds(g),m=0;m<v.length;m++)y=c._soundById(v[m]),y&&(y._loop=f,c._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=f,f&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,c.playing(v[m])&&(c.pause(v[m],!0),c.play(v[m],!0)))));return c},rate:function(){var c=this,d=arguments,f,g;if(d.length===0)g=c._sounds[0]._id;else if(d.length===1){var y=c._getSoundIds(),v=y.indexOf(d[0]);v>=0?g=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),g=parseInt(d[1],10));var m;if(typeof f=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,d)}}),c;typeof g>"u"&&(c._rate=f),g=c._getSoundIds(g);for(var p=0;p<g.length;p++)if(m=c._soundById(g[p]),m){c.playing(g[p])&&(m._rateSeek=c.seek(g[p]),m._playStart=c._webAudio?r.ctx.currentTime:m._playStart),m._rate=f,c._webAudio&&m._node&&m._node.bufferSource?m._node.bufferSource.playbackRate.setValueAtTime(f,r.ctx.currentTime):m._node&&(m._node.playbackRate=f);var x=c.seek(g[p]),w=(c._sprite[m._sprite][0]+c._sprite[m._sprite][1])/1e3-x,_=w*1e3/Math.abs(m._rate);(c._endTimers[g[p]]||!m._paused)&&(c._clearTimer(g[p]),c._endTimers[g[p]]=setTimeout(c._ended.bind(c,m),_)),c._emit("rate",m._id)}}else return m=c._soundById(g),m?m._rate:c._rate;return c},seek:function(){var c=this,d=arguments,f,g;if(d.length===0)c._sounds.length&&(g=c._sounds[0]._id);else if(d.length===1){var y=c._getSoundIds(),v=y.indexOf(d[0]);v>=0?g=parseInt(d[0],10):c._sounds.length&&(g=c._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),g=parseInt(d[1],10));if(typeof g>"u")return 0;if(typeof f=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,d)}}),c;var m=c._soundById(g);if(m)if(typeof f=="number"&&f>=0){var p=c.playing(g);p&&c.pause(g,!0),m._seek=f,m._ended=!1,c._clearTimer(g),!c._webAudio&&m._node&&!isNaN(m._node.duration)&&(m._node.currentTime=f);var x=function(){p&&c.play(g,!0),c._emit("seek",g)};if(p&&!c._webAudio){var w=function(){c._playLock?setTimeout(w,0):x()};setTimeout(w,0)}else x()}else if(c._webAudio){var _=c.playing(g)?r.ctx.currentTime-m._playStart:0,b=m._rateSeek?m._rateSeek-m._seek:0;return m._seek+(b+_*Math.abs(m._rate))}else return m._node.currentTime;return c},playing:function(c){var d=this;if(typeof c=="number"){var f=d._soundById(c);return f?!f._paused:!1}for(var g=0;g<d._sounds.length;g++)if(!d._sounds[g]._paused)return!0;return!1},duration:function(c){var d=this,f=d._duration,g=d._soundById(c);return g&&(f=d._sprite[g._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var c=this,d=c._sounds,f=0;f<d.length;f++)d[f]._paused||c.stop(d[f]._id),c._webAudio||(c._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(r._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),r._releaseHtml5Audio(d[f]._node)),delete d[f]._node,c._clearTimer(d[f]._id);var g=r._howls.indexOf(c);g>=0&&r._howls.splice(g,1);var y=!0;for(f=0;f<r._howls.length;f++)if(r._howls[f]._src===c._src||c._src.indexOf(r._howls[f]._src)>=0){y=!1;break}return a&&y&&delete a[c._src],r.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,d,f,g){var y=this,v=y["_on"+c];return typeof d=="function"&&v.push(g?{id:f,fn:d,once:g}:{id:f,fn:d}),y},off:function(c,d,f){var g=this,y=g["_on"+c],v=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(v=0;v<y.length;v++){var m=f===y[v].id;if(d===y[v].fn&&m||!d&&m){y.splice(v,1);break}}else if(c)g["_on"+c]=[];else{var p=Object.keys(g);for(v=0;v<p.length;v++)p[v].indexOf("_on")===0&&Array.isArray(g[p[v]])&&(g[p[v]]=[])}return g},once:function(c,d,f){var g=this;return g.on(c,d,f,1),g},_emit:function(c,d,f){for(var g=this,y=g["_on"+c],v=y.length-1;v>=0;v--)(!y[v].id||y[v].id===d||c==="load")&&(setTimeout((function(m){m.call(this,d,f)}).bind(g,y[v].fn),0),y[v].once&&g.off(c,y[v].fn,y[v].id));return g._loadQueue(c),g},_loadQueue:function(c){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===c&&(d._queue.shift(),d._loadQueue()),c||f.action()}return d},_ended:function(c){var d=this,f=c._sprite;if(!d._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(d._ended.bind(d,c),100),d;var g=!!(c._loop||d._sprite[f][2]);if(d._emit("end",c._id),!d._webAudio&&g&&d.stop(c._id,!0).play(c._id),d._webAudio&&g){d._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=r.ctx.currentTime;var y=(c._stop-c._start)*1e3/Math.abs(c._rate);d._endTimers[c._id]=setTimeout(d._ended.bind(d,c),y)}return d._webAudio&&!g&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,d._clearTimer(c._id),d._cleanBuffer(c._node),r._autoSuspend()),!d._webAudio&&!g&&d.stop(c._id,!0),d},_clearTimer:function(c){var d=this;if(d._endTimers[c]){if(typeof d._endTimers[c]!="function")clearTimeout(d._endTimers[c]);else{var f=d._soundById(c);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[c],!1)}delete d._endTimers[c]}return d},_soundById:function(c){for(var d=this,f=0;f<d._sounds.length;f++)if(c===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var c=this;c._drain();for(var d=0;d<c._sounds.length;d++)if(c._sounds[d]._ended)return c._sounds[d].reset();return new s(c)},_drain:function(){var c=this,d=c._pool,f=0,g=0;if(!(c._sounds.length<d)){for(g=0;g<c._sounds.length;g++)c._sounds[g]._ended&&f++;for(g=c._sounds.length-1;g>=0;g--){if(f<=d)return;c._sounds[g]._ended&&(c._webAudio&&c._sounds[g]._node&&c._sounds[g]._node.disconnect(0),c._sounds.splice(g,1),f--)}}},_getSoundIds:function(c){var d=this;if(typeof c>"u"){for(var f=[],g=0;g<d._sounds.length;g++)f.push(d._sounds[g]._id);return f}else return[c]},_refreshBuffer:function(c){var d=this;return c._node.bufferSource=r.ctx.createBufferSource(),c._node.bufferSource.buffer=a[d._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,r.ctx.currentTime),d},_cleanBuffer:function(c){var d=this,f=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!c.bufferSource)return d;if(r._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),f))try{c.bufferSource.buffer=r._scratchBuffer}catch{}return c.bufferSource=null,d},_clearSound:function(c){var d=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);d||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(c){this._parent=c,this.init()};s.prototype={init:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,d._sounds.push(c),c.create(),c},create:function(){var c=this,d=c._parent,f=r._muted||c._muted||c._parent._muted?0:c._volume;return d._webAudio?(c._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),c._node.gain.setValueAtTime(f,r.ctx.currentTime),c._node.paused=!0,c._node.connect(r.masterGain)):r.noAudio||(c._node=r._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(r._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=d._src,c._node.preload=d._preload===!0?"auto":d._preload,c._node.volume=f*r.volume(),c._node.load()),c},reset:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++r._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,d=c._parent;d._duration=Math.ceil(c._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),c._node.removeEventListener(r._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,d=c._parent;d._duration===1/0&&(d._duration=Math.ceil(c._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var a={},o=function(c){var d=c._src;if(a[d]){c._duration=a[d].duration,u(c);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),g=new Uint8Array(f.length),y=0;y<f.length;++y)g[y]=f.charCodeAt(y);A(g.buffer,c)}else{var v=new XMLHttpRequest;v.open(c._xhr.method,d,!0),v.withCredentials=c._xhr.withCredentials,v.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(m){v.setRequestHeader(m,c._xhr.headers[m])}),v.onload=function(){var m=(v.status+"")[0];if(m!=="0"&&m!=="2"&&m!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+v.status+".");return}A(v.response,c)},v.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete a[d],c.load())},l(v)}},l=function(c){try{c.send()}catch{c.onerror()}},A=function(c,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},g=function(y){y&&d._sounds.length>0?(a[d._src]=y,u(d,y)):f()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(c).then(g).catch(f):r.ctx.decodeAudioData(c,g,f)},u=function(c,d){d&&!c._duration&&(c._duration=d.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},h=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),d=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(c&&f&&f<9){var g=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!g&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};t.Howler=r,t.Howl=n,typeof Xs<"u"?(Xs.HowlerGlobal=e,Xs.Howler=r,Xs.Howl=n,Xs.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=r,window.Howl=n,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var s=n._howls.length-1;s>=0;s--)n._howls[s].stereo(r);return n},HowlerGlobal.prototype.pos=function(r,n,s){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(n=typeof n!="number"?a._pos[1]:n,s=typeof s!="number"?a._pos[2]:s,typeof r=="number")a._pos=[r,n,s],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(r,n,s,a,o,l){var A=this;if(!A.ctx||!A.ctx.listener)return A;var u=A._orientation;if(n=typeof n!="number"?u[1]:n,s=typeof s!="number"?u[2]:s,a=typeof a!="number"?u[3]:a,o=typeof o!="number"?u[4]:o,l=typeof l!="number"?u[5]:l,typeof r=="number")A._orientation=[r,n,s,a,o,l],typeof A.ctx.listener.forwardX<"u"?(A.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),A.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),A.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),A.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),A.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),A.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):A.ctx.listener.setOrientation(r,n,s,a,o,l);else return u;return A},Howl.prototype.init=function(r){return function(n){var s=this;return s._orientation=n.orientation||[1,0,0],s._stereo=n.stereo||null,s._pos=n.pos||null,s._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},s._onstereo=n.onstereo?[{fn:n.onstereo}]:[],s._onpos=n.onpos?[{fn:n.onpos}]:[],s._onorientation=n.onorientation?[{fn:n.onorientation}]:[],r.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,n){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(r,n)}}),s;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof r=="number")s._stereo=r,s._pos=[r,0,0];else return s._stereo;for(var o=s._getSoundIds(n),l=0;l<o.length;l++){var A=s._soundById(o[l]);if(A)if(typeof r=="number")A._stereo=r,A._pos=[r,0,0],A._node&&(A._pannerAttr.panningModel="equalpower",(!A._panner||!A._panner.pan)&&e(A,a),a==="spatial"?typeof A._panner.positionX<"u"?(A._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),A._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),A._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):A._panner.setPosition(r,0,0):A._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),s._emit("stereo",A._id);else return A._stereo}return s},Howl.prototype.pos=function(r,n,s,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,n,s,a)}}),o;if(n=typeof n!="number"?0:n,s=typeof s!="number"?-.5:s,typeof a>"u")if(typeof r=="number")o._pos=[r,n,s];else return o._pos;for(var l=o._getSoundIds(a),A=0;A<l.length;A++){var u=o._soundById(l[A]);if(u)if(typeof r=="number")u._pos=[r,n,s],u._node&&((!u._panner||u._panner.pan)&&e(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):u._panner.setPosition(r,n,s)),o._emit("pos",u._id);else return u._pos}return o},Howl.prototype.orientation=function(r,n,s,a){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,n,s,a)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,s=typeof s!="number"?o._orientation[2]:s,typeof a>"u")if(typeof r=="number")o._orientation=[r,n,s];else return o._orientation;for(var l=o._getSoundIds(a),A=0;A<l.length;A++){var u=o._soundById(l[A]);if(u)if(typeof r=="number")u._orientation=[r,n,s],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),e(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):u._panner.setOrientation(r,n,s)),o._emit("orientation",u._id);else return u._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,n=arguments,s,a,o;if(!r._webAudio)return r;if(n.length===0)return r._pannerAttr;if(n.length===1)if(typeof n[0]=="object")s=n[0],typeof a>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),r._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(n[0],10)),o?o._pannerAttr:r._pannerAttr;else n.length===2&&(s=n[0],a=parseInt(n[1],10));for(var l=r._getSoundIds(a),A=0;A<l.length;A++)if(o=r._soundById(l[A]),o){var u=o._pannerAttr;u={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:u.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:u.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:u.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:u.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:u.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:u.panningModel};var h=o._panner;h||(o._pos||(o._pos=r._pos||[0,0,-.5]),e(o,"spatial"),h=o._panner),h.coneInnerAngle=u.coneInnerAngle,h.coneOuterAngle=u.coneOuterAngle,h.coneOuterGain=u.coneOuterGain,h.distanceModel=u.distanceModel,h.maxDistance=u.maxDistance,h.refDistance=u.refDistance,h.rolloffFactor=u.rolloffFactor,h.panningModel=u.panningModel}return r},Sound.prototype.init=function(r){return function(){var n=this,s=n._parent;n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,r.call(this),n._stereo?s.stereo(n._stereo):n._pos&&s.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var n=this,s=n._parent;return n._orientation=s._orientation,n._stereo=s._stereo,n._pos=s._pos,n._pannerAttr=s._pannerAttr,n._stereo?s.stereo(n._stereo):n._pos?s.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,s._refreshBuffer(n)),r.call(this)}}(Sound.prototype.reset);var e=function(r,n){n=n||"spatial",n==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(xs);const Xk=B.createContext({isSoundEnabled:!0,toggleSound:()=>{},playSound:()=>{},unlockAudio:()=>{},isAudioReady:!1}),d7=()=>typeof import.meta<"u"&&{VITE_SUPABASE_URL:"https://vldqocgemjqtmjvxhozj.supabase.co",VITE_SUPABASE_ANON_KEY:"sb_publishable_doGcbZ1R6TOC1hBHRFu2BA_zzBpPiSZ",BASE_URL:"/GoA-Timer/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}?"/GoA-Timer/":"",nn=d7(),fd={buttonClick:`${nn}sounds/ui/button-click.mp3`,timerWarning:`${nn}sounds/timer/timer-warning.mp3`,timerComplete:`${nn}sounds/timer/timer-complete.mp3`,timerTick:`${nn}sounds/timer/timer-tick.mp3`,heroSelect:`${nn}sounds/game/hero-select.mp3`,heroBan:`${nn}sounds/game/hero-ban.mp3`,coinFlip:`${nn}sounds/game/coin-flip.mp3`,victory:`${nn}sounds/victory/victory.mp3`,phaseChange:`${nn}sounds/game/phase-change.mp3`,turnStart:`${nn}sounds/game/turn-start.mp3`,turnComplete:`${nn}sounds/game/turn-complete.mp3`,lifeChange:`${nn}sounds/game/life-change.mp3`,toggleSwitch:`${nn}sounds/ui/toggle-switch.mp3`},To={},h7=({children:t})=>{const[e,r]=B.useState(()=>{const A=localStorage.getItem("atlantis-sound-enabled");return A!==null?A==="true":!0}),[n,s]=B.useState(!1),a=()=>{console.log("Attempting to unlock audio context..."),xs.Howler.ctx&&xs.Howler.ctx.state!=="running"?xs.Howler.ctx.resume().then(()=>{console.log("AudioContext resumed successfully!"),s(!0),new xs.Howl({src:[fd.buttonClick],volume:.01}).play()}).catch(A=>{console.error("Failed to resume AudioContext:",A)}):(console.log("AudioContext already running or not available"),s(!0))};B.useEffect(()=>(n&&(console.log("Audio is ready, preloading essential sounds"),["buttonClick","timerComplete","heroSelect","timerTick"].forEach(u=>{To[u]||(console.log(`Preloading sound: ${u}`),To[u]=new xs.Howl({src:[fd[u]],preload:!0,volume:u==="timerTick"?.2:.5,onload:()=>console.log(`Successfully loaded: ${u}`),onloaderror:h=>console.error(`Error loading ${u}:`,h)}))})),()=>{console.log("Cleaning up sound cache"),Object.values(To).forEach(A=>A.unload())}),[n]),B.useEffect(()=>{localStorage.setItem("atlantis-sound-enabled",e.toString())},[e]);const o=()=>{r(A=>!A)},l=A=>{if(console.log(`Attempting to play sound: ${A}`),!e){console.log("Sound is disabled, not playing");return}if(!n){console.log("Audio context not ready, trying to unlock..."),a();return}if(To[A]){console.log(`Playing cached sound: ${A}`),To[A].play();return}console.log(`Loading new sound: ${A} from ${fd[A]}`);try{const u=new xs.Howl({src:[fd[A]],volume:A==="timerTick"?.2:.5,onload:()=>console.log(`Successfully loaded: ${A}`),onloaderror:h=>console.error(`Error loading ${A}:`,h),onplay:()=>console.log(`Started playing: ${A}`),onplayerror:h=>console.error(`Error playing ${A}:`,h)});To[A]=u,u.play()}catch(u){console.error(`Exception when trying to play ${A}:`,u)}};return i.jsx(Xk.Provider,{value:{isSoundEnabled:e,toggleSound:o,playSound:l,unlockAudio:a,isAudioReady:n},children:t})},Ge=()=>B.useContext(Xk),T_=({value:t,onChange:e,tooltip:r,minValue:n=10,maxValue:s=600,step:a=10,disabled:o=!1})=>{const[l,A]=B.useState(h(t)),{playSound:u}=Ge();function h(v){const m=Math.floor(v/60),p=v%60;return`${m}:${p.toString().padStart(2,"0")}`}function c(v){if(!v.trim())return t;const m=v.split(":");if(m.length===2){const x=parseInt(m[0],10),w=parseInt(m[1],10);if(!isNaN(x)&&!isNaN(w))return Math.min(s,Math.max(n,x*60+w))}const p=parseInt(v,10);return isNaN(p)?t:Math.min(s,Math.max(n,p))}const d=v=>{if(o)return;u("buttonClick");const m=Math.min(s,Math.max(n,t+v));e(m)};B.useEffect(()=>{A(h(t))},[t]);const f=v=>{o||A(v.target.value)},g=()=>{if(o)return;u("buttonClick");const v=c(l);e(v),A(h(v))},y=v=>{if(!o&&v.key==="Enter"){u("buttonClick");const m=c(l);e(m),A(h(m)),v.currentTarget.blur()}};return i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"flex",children:[i.jsx("input",{type:"text",value:l,onChange:f,onBlur:g,onKeyDown:y,className:`w-20 bg-gray-700 text-center text-xl font-mono py-2 px-3 rounded-l-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o?"cursor-not-allowed opacity-60":""}`,"aria-label":"Timer duration",disabled:o}),i.jsxs("div",{className:"flex flex-col border-y border-r border-gray-600 rounded-r-md",children:[i.jsx("button",{className:`bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded-tr-md border-b border-gray-600 ${o?"cursor-not-allowed opacity-60":""}`,onClick:()=>d(a),"aria-label":"Increase time",disabled:o,children:i.jsx(ls,{size:16})}),i.jsx("button",{className:`bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded-br-md ${o?"cursor-not-allowed opacity-60":""}`,onClick:()=>d(-a),"aria-label":"Decrease time",disabled:o,children:i.jsx(pn,{size:16})})]}),i.jsx(Ue,{text:r,position:"right",maxWidth:"max-w-xs",children:i.jsx("div",{className:"ml-2 cursor-help",children:i.jsx(Dt,{size:18,className:"text-gray-400 hover:text-gray-200"})})})]})})},Jk=({player:t,onNameChange:e,onRemove:r,isDuplicate:n=!1,suggestedNames:s=[],disableRemove:a=!1,autoFocus:o=!1})=>{const{playSound:l}=Ge(),[A,u]=B.useState(t.name),[h,c]=B.useState(!1),[d,f]=B.useState([]),[g,y]=B.useState(!1),[v,m]=B.useState(-1),p=B.useRef(null),x=B.useRef(null),w=B.useId();B.useEffect(()=>{u(t.name)},[t.name]),B.useEffect(()=>{o&&p.current&&p.current.focus()},[o]),B.useEffect(()=>{if(A.trim()){const P=s.filter(F=>F.toLowerCase().includes(A.toLowerCase()));f(P.slice(0,5)),m(-1)}else f([]),m(-1)},[A,s]);const _=P=>/^[a-zA-Z0-9 .-]*$/.test(P),b=P=>{const F=P.target.value;_(F)?(u(F),c(!!F&&s.length>0)):(y(!0),l("buttonClick"),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{y(!1),x.current=null},3e3))},S=()=>{setTimeout(()=>{c(!1),m(-1);const P=A.trim();P!==A&&u(P),e(P)},200)},E=()=>{A&&s.length>0&&c(!0)},C=P=>{var F,$;if(!(!h||d.length===0))switch(P.key){case"ArrowDown":P.preventDefault(),m(L=>L<d.length-1?L+1:0);break;case"ArrowUp":P.preventDefault(),m(L=>L>0?L-1:d.length-1);break;case"Enter":if(P.preventDefault(),v>=0&&v<d.length)N(d[v],"keyboard");else{const L=A.trim();u(L),e(L),c(!1),m(-1),(F=p.current)==null||F.blur()}break;case"Escape":P.preventDefault(),c(!1),m(-1),($=p.current)==null||$.blur();break;case"Tab":h&&(c(!1),m(-1));break}},N=(P,F="mouse")=>{var $;u(P),e(P),c(!1),m(-1),l("buttonClick"),F==="keyboard"&&(($=p.current)==null||$.blur())},Q=()=>{r&&(l("buttonClick"),r())};return B.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]),i.jsxs("div",{className:"relative w-full",children:[i.jsxs("div",{className:`flex border ${n?"border-red-500 bg-red-900/20":g?"border-amber-500 bg-amber-900/20":t.team===W.Titans?"border-blue-600 bg-blue-900/30":"border-red-600 bg-red-900/30"} rounded-lg overflow-hidden focus-within:ring-2 ${t.team===W.Titans?"focus-within:ring-blue-500":"focus-within:ring-red-500"}`,children:[i.jsx("input",{ref:p,type:"text",value:A,onChange:b,onBlur:S,onFocus:E,onKeyDown:C,role:"combobox","aria-autocomplete":"list","aria-expanded":h,"aria-controls":h?w:void 0,"aria-activedescendant":v>=0?`${w}-option-${v}`:void 0,autoComplete:"off",placeholder:"Player name",className:`px-3 py-2 flex-grow bg-transparent outline-none text-sm ${t.team===W.Titans?"text-blue-100 placeholder-blue-300":"text-red-100 placeholder-red-300"}`}),n&&i.jsx("div",{className:"flex items-center pr-2",children:i.jsx(Ei,{size:16,className:"text-red-500"})}),g&&i.jsx("div",{className:"flex items-center pr-2",children:i.jsx(ea,{size:16,className:"text-amber-500"})}),r&&!a&&i.jsx("button",{onClick:Q,className:"px-2 text-gray-400 hover:text-white focus:outline-none","aria-label":"Remove player",children:i.jsx(jr,{size:16})})]}),n&&i.jsx("div",{className:"text-red-500 text-xs mt-1",children:"Duplicate name"}),g&&i.jsx("div",{className:"text-amber-500 text-xs mt-1",children:"Only letters, numbers, spaces, periods, and hyphens are allowed"}),h&&d.length>0&&i.jsx("ul",{id:w,role:"listbox","aria-label":"Player name suggestions",className:"absolute z-10 w-full mt-1 bg-gray-700 rounded-md shadow-lg max-h-60 overflow-auto",children:d.map((P,F)=>i.jsx("li",{id:`${w}-option-${F}`,role:"option","aria-selected":F===v,onMouseDown:$=>{$.preventDefault(),N(P,"mouse")},onMouseEnter:()=>m(F),className:`px-4 py-2 cursor-pointer text-sm min-h-[44px] flex items-center ${F===v?"bg-blue-600 text-white":"hover:bg-gray-600"}`,children:P},F))})]})},f7="modulepreload",g7=function(t){return"/GoA-Timer/"+t},U_={},m7=function(e,r,n){if(!r||r.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=g7(a),a in U_)return;U_[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let h=s.length-1;h>=0;h--){const c=s[h];if(c.href===a&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":f7,o||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),o)return new Promise((h,c)=>{u.addEventListener("load",h),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};var st={},_0={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.z=it.tau=it.sigma=it.mu=it.epsilon=it.default=it.betaSq=it.beta=void 0;const Jx=t=>(t==null?void 0:t.z)??3;it.z=Jx;const Yx=t=>(t==null?void 0:t.mu)??25;it.mu=Yx;const Yk=t=>(t==null?void 0:t.tau)??Yx(t)/300;it.tau=Yk;const Zk=t=>(t==null?void 0:t.sigma)??Yx(t)/Jx(t);it.sigma=Zk;const e4=t=>(t==null?void 0:t.epsilon)??1e-4;it.epsilon=e4;const Zx=t=>(t==null?void 0:t.beta)??Zk(t)/2;it.beta=Zx;const fy=t=>Zx(t)**2;it.betaSq=fy;var p7=t=>({EPSILON:e4(t),TWOBETASQ:2*fy(t),BETA:Zx(t),BETASQ:fy(t),Z:Jx(t),TAU:Yk(t)});it.default=p7;Object.defineProperty(_0,"__esModule",{value:!0});_0.default=void 0;var Q_=it;const y7=(t,e={})=>({mu:(t==null?void 0:t.mu)??(0,Q_.mu)(e),sigma:(t==null?void 0:t.sigma)??(0,Q_.sigma)({...e,mu:t==null?void 0:t.mu})});var v7=y7;_0.default=v7;var C0={},T={exports:{}},x7=function(){return!1},w7=x7,b7=function(){return!0},_7=b7,C7={"@@functional/placeholder":!0};function B7(t){return t!=null&&typeof t=="object"&&t["@@functional/placeholder"]===!0}var B0=B7,S7=B0;function j7(t){return function e(r){return arguments.length===0||S7(r)?e:t.apply(this,arguments)}}var Se=j7,cm=Se,BA=B0;function k7(t){return function e(r,n){switch(arguments.length){case 0:return e;case 1:return BA(r)?e:cm(function(s){return t(r,s)});default:return BA(r)&&BA(n)?e:BA(r)?cm(function(s){return t(s,n)}):BA(n)?cm(function(s){return t(r,s)}):t(r,n)}}}var q=k7,E7=q,N7=E7(function(e,r){return Number(e)+Number(r)}),S0=N7;function F7(t,e){t=t||[],e=e||[];var r,n=t.length,s=e.length,a=[];for(r=0;r<n;)a[a.length]=t[r],r+=1;for(r=0;r<s;)a[a.length]=e[r],r+=1;return a}var $n=F7;function T7(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(r){return e.apply(this,arguments)};case 2:return function(r,n){return e.apply(this,arguments)};case 3:return function(r,n,s){return e.apply(this,arguments)};case 4:return function(r,n,s,a){return e.apply(this,arguments)};case 5:return function(r,n,s,a,o){return e.apply(this,arguments)};case 6:return function(r,n,s,a,o,l){return e.apply(this,arguments)};case 7:return function(r,n,s,a,o,l,A){return e.apply(this,arguments)};case 8:return function(r,n,s,a,o,l,A,u){return e.apply(this,arguments)};case 9:return function(r,n,s,a,o,l,A,u,h){return e.apply(this,arguments)};case 10:return function(r,n,s,a,o,l,A,u,h,c){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var Es=T7,U7=Es,I_=B0;function t4(t,e,r){return function(){for(var n=[],s=0,a=t,o=0;o<e.length||s<arguments.length;){var l;o<e.length&&(!I_(e[o])||s>=arguments.length)?l=e[o]:(l=arguments[s],s+=1),n[o]=l,I_(l)||(a-=1),o+=1}return a<=0?r.apply(this,n):U7(a,t4(t,n,r))}}var xu=t4,Q7=Es,I7=Se,P7=q,D7=xu,M7=P7(function(e,r){return e===1?I7(r):Q7(e,D7(e,[],r))}),nr=M7,R7=$n,$7=Se,O7=nr,L7=$7(function(e){return O7(e.length,function(){var r=0,n=arguments[0],s=arguments[arguments.length-1],a=Array.prototype.slice.call(arguments,0);return a[0]=function(){var o=n.apply(this,R7(arguments,[r,s]));return r+=1,o},e.apply(this,a)})}),H7=L7,K7=$n,z7=Se,G7=nr,W7=z7(function(e){return G7(e.length,function(){var r=arguments[0],n=arguments[arguments.length-1],s=n.length-1,a=Array.prototype.slice.call(arguments,0);return a[0]=function(){var o=r.apply(this,K7(arguments,[s,n]));return s-=1,o},e.apply(this,a)})}),V7=W7,gd=Se,Uo=q,or=B0;function q7(t){return function e(r,n,s){switch(arguments.length){case 0:return e;case 1:return or(r)?e:Uo(function(a,o){return t(r,a,o)});case 2:return or(r)&&or(n)?e:or(r)?Uo(function(a,o){return t(a,n,o)}):or(n)?Uo(function(a,o){return t(r,a,o)}):gd(function(a){return t(r,n,a)});default:return or(r)&&or(n)&&or(s)?e:or(r)&&or(n)?Uo(function(a,o){return t(a,o,s)}):or(r)&&or(s)?Uo(function(a,o){return t(a,n,o)}):or(n)&&or(s)?Uo(function(a,o){return t(r,a,o)}):or(r)?gd(function(a){return t(a,n,s)}):or(n)?gd(function(a){return t(r,a,s)}):or(s)?gd(function(a){return t(r,n,a)}):t(r,n,s)}}}var ke=q7,X7=$n,J7=ke,Y7=J7(function(e,r,n){var s=n.length;if(e>=s||e<-s)return n;var a=(s+e)%s,o=X7(n);return o[a]=r(n[a]),o}),r4=Y7,Er=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function Z7(t){return t!=null&&typeof t["@@transducer/step"]=="function"}var ew=Z7,eM=Er,tM=ew;function rM(t,e,r){return function(){if(arguments.length===0)return r();var n=arguments[arguments.length-1];if(!eM(n)){for(var s=0;s<t.length;){if(typeof n[t[s]]=="function")return n[t[s]].apply(n,Array.prototype.slice.call(arguments,0,-1));s+=1}if(tM(n)){var a=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return a(n)}}return r.apply(this,arguments)}}var pt=rM;function nM(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var ya=nM,jt={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},sM=ya,aM=jt,iM=function(){function t(e,r){this.xf=r,this.f=e,this.all=!0}return t.prototype["@@transducer/init"]=aM.init,t.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,r){return this.f(r)||(this.all=!1,e=sM(this.xf["@@transducer/step"](e,!1))),e},t}();function oM(t){return function(e){return new iM(t,e)}}var lM=oM,AM=q,cM=pt,uM=lM,dM=AM(cM(["all"],uM,function(e,r){for(var n=0;n<r.length;){if(!e(r[n]))return!1;n+=1}return!0})),n4=dM;function hM(t){for(var e=[],r;!(r=t.next()).done;)e.push(r.value);return e}var fM=hM;function gM(t,e,r){for(var n=0,s=r.length;n<s;){if(t(e,r[n]))return!0;n+=1}return!1}var wu=gM;function mM(t){var e=String(t).match(/^function (\w*)/);return e==null?"":e[1]}var pM=mM;function yM(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var Hr=yM;function vM(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var s4=typeof Object.is=="function"?Object.is:vM,xM=Hr,P_=Object.prototype.toString,wM=function(){return P_.call(arguments)==="[object Arguments]"?function(e){return P_.call(e)==="[object Arguments]"}:function(e){return xM("callee",e)}}(),a4=wM,D_=Se,M_=Hr,bM=a4,_M=!{toString:null}.propertyIsEnumerable("toString"),R_=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],$_=function(){return arguments.propertyIsEnumerable("length")}(),CM=function(e,r){for(var n=0;n<e.length;){if(e[n]===r)return!0;n+=1}return!1},BM=D_(typeof Object.keys=="function"&&!$_?function(e){return Object(e)!==e?[]:Object.keys(e)}:function(e){if(Object(e)!==e)return[];var r,n,s=[],a=$_&&bM(e);for(r in e)M_(r,e)&&(!a||r!=="length")&&(s[s.length]=r);if(_M)for(n=R_.length-1;n>=0;)r=R_[n],M_(r,e)&&!CM(s,r)&&(s[s.length]=r),n-=1;return s}),us=BM,SM=Se,jM=SM(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),tw=jM,O_=fM,L_=wu,kM=pM,EM=Hr,um=s4,H_=us,K_=tw;function z_(t,e,r,n){var s=O_(t),a=O_(e);function o(l,A){return rw(l,A,r.slice(),n.slice())}return!L_(function(l,A){return!L_(o,A,l)},a,s)}function rw(t,e,r,n){if(um(t,e))return!0;var s=K_(t);if(s!==K_(e))return!1;if(typeof t["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof t["fantasy-land/equals"]=="function"&&t["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](t);if(typeof t.equals=="function"||typeof e.equals=="function")return typeof t.equals=="function"&&t.equals(e)&&typeof e.equals=="function"&&e.equals(t);switch(s){case"Arguments":case"Array":case"Object":if(typeof t.constructor=="function"&&kM(t.constructor)==="Promise")return t===e;break;case"Boolean":case"Number":case"String":if(!(typeof t==typeof e&&um(t.valueOf(),e.valueOf())))return!1;break;case"Date":if(!um(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(!(t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode))return!1;break}for(var a=r.length-1;a>=0;){if(r[a]===t)return n[a]===e;a-=1}switch(s){case"Map":return t.size!==e.size?!1:z_(t.entries(),e.entries(),r.concat([t]),n.concat([e]));case"Set":return t.size!==e.size?!1:z_(t.values(),e.values(),r.concat([t]),n.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=H_(t);if(o.length!==H_(e).length)return!1;var l=r.concat([t]),A=n.concat([e]);for(a=o.length-1;a>=0;){var u=o[a];if(!(EM(u,e)&&rw(e[u],t[u],l,A)))return!1;a-=1}return!0}var NM=rw,FM=q,TM=NM,UM=FM(function(e,r){return TM(e,r,[],[])}),On=UM,QM=On;function IM(t,e,r){var n,s;if(typeof t.indexOf=="function")switch(typeof e){case"number":if(e===0){for(n=1/e;r<t.length;){if(s=t[r],s===0&&1/s===n)return r;r+=1}return-1}else if(e!==e){for(;r<t.length;){if(s=t[r],typeof s=="number"&&s!==s)return r;r+=1}return-1}return t.indexOf(e,r);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,r);case"object":if(e===null)return t.indexOf(e,r)}for(;r<t.length;){if(QM(t[r],e))return r;r+=1}return-1}var i4=IM,PM=i4;function DM(t,e){return PM(e,t,0)>=0}var nw=DM;function MM(t,e){for(var r=0,n=e.length,s=Array(n);r<n;)s[r]=t(e[r]),r+=1;return s}var bu=MM;function RM(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var $M=RM,SA=function(e){return(e<10?"0":"")+e},OM=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+SA(e.getUTCMonth()+1)+"-"+SA(e.getUTCDate())+"T"+SA(e.getUTCHours())+":"+SA(e.getUTCMinutes())+":"+SA(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},LM=OM;function HM(t){return function(){return!t.apply(this,arguments)}}var o4=HM;function KM(t,e,r){for(var n=0,s=r.length;n<s;)e=t(e,r[n]),n+=1;return e}var _u=KM;function zM(t,e){for(var r=0,n=e.length,s=[];r<n;)t(e[r])&&(s[s.length]=e[r]),r+=1;return s}var sw=zM;function GM(t){return Object.prototype.toString.call(t)==="[object Object]"}var Cu=GM,G_=jt,WM=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=G_.init,t.prototype["@@transducer/result"]=G_.result,t.prototype["@@transducer/step"]=function(e,r){return this.f(r)?this.xf["@@transducer/step"](e,r):e},t}();function VM(t){return function(e){return new WM(t,e)}}var qM=VM,XM=_u,JM=q,YM=pt,ZM=sw,eR=Cu,tR=qM,rR=us,nR=JM(YM(["fantasy-land/filter","filter"],tR,function(t,e){return eR(e)?XM(function(r,n){return t(e[n])&&(r[n]=e[n]),r},{},rR(e)):ZM(t,e)})),aw=nR,sR=o4,aR=q,iR=aw,oR=aR(function(e,r){return iR(sR(e),r)}),j0=oR,lR=nw,dm=bu,hm=$M,AR=LM,W_=us,cR=j0;function l4(t,e){var r=function(o){var l=e.concat([t]);return lR(o,l)?"<Circular>":l4(o,l)},n=function(a,o){return dm(function(l){return hm(l)+": "+r(a[l])},o.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+dm(r,t).join(", ")+"))";case"[object Array]":return"["+dm(r,t).concat(n(t,cR(function(a){return/^\d+$/.test(a)},W_(t)))).join(", ")+"]";case"[object Boolean]":return typeof t=="object"?"new Boolean("+r(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?r(NaN):hm(AR(t)))+")";case"[object Map]":return"new Map("+r(Array.from(t))+")";case"[object Null]":return"null";case"[object Number]":return typeof t=="object"?"new Number("+r(t.valueOf())+")":1/t===-1/0?"-0":t.toString(10);case"[object Set]":return"new Set("+r(Array.from(t).sort())+")";case"[object String]":return typeof t=="object"?"new String("+r(t.valueOf())+")":hm(t);case"[object Undefined]":return"undefined";default:if(typeof t.toString=="function"){var s=t.toString();if(s!=="[object Object]")return s}return"{"+n(t,W_(t)).join(", ")+"}"}}var A4=l4,uR=Se,dR=A4,hR=uR(function(e){return dR(e,[])}),rA=hR,fR=q,V_=rA,gR=fR(function(e,r){if(e===r)return r;function n(A,u){if(A>u!=u>A)return u>A?u:A}var s=n(e,r);if(s!==void 0)return s;var a=n(typeof e,typeof r);if(a!==void 0)return a===typeof e?e:r;var o=V_(e),l=n(o,V_(r));return l!==void 0&&l===o?e:r}),Ao=gR,q_=jt,mR=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=q_.init,t.prototype["@@transducer/result"]=q_.result,t.prototype["@@transducer/step"]=function(e,r){return this.xf["@@transducer/step"](e,this.f(r))},t}(),pR=function(e){return function(r){return new mR(e,r)}},c4=pR,yR=_u,vR=q,xR=pt,wR=bu,bR=c4,_R=nr,CR=us,BR=vR(xR(["fantasy-land/map","map"],bR,function(e,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return _R(r.length,function(){return e.call(this,r.apply(this,arguments))});case"[object Object]":return yR(function(n,s){return n[s]=e(r[s]),n},{},CR(r));default:return wR(e,r)}})),Ns=BR,fi=Number.isInteger||function(e){return e<<0===e};function SR(t){return Object.prototype.toString.call(t)==="[object String]"}var nA=SR,jR=q,kR=nA,ER=jR(function(e,r){var n=e<0?r.length+e:e;return kR(r)?r.charAt(n):r[n]}),co=ER,NR=q,FR=fi,TR=co,UR=NR(function(e,r){if(r!=null)return FR(e)?TR(e,r):r[e]}),uo=UR,QR=q,IR=Ns,PR=uo,DR=QR(function(e,r){return IR(PR(e),r)}),Bu=DR,MR=Se,RR=Er,$R=nA,OR=MR(function(e){return RR(e)?!0:!e||typeof e!="object"||$R(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),k0=OR,LR=k0,X_=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function HR(t,e,r){return function(s,a,o){if(LR(o))return t(s,a,o);if(o==null)return a;if(typeof o["fantasy-land/reduce"]=="function")return e(s,a,o,"fantasy-land/reduce");if(o[X_]!=null)return r(s,a,o[X_]());if(typeof o.next=="function")return r(s,a,o);if(typeof o.reduce=="function")return e(s,a,o,"reduce");throw new TypeError("reduce: list must be array or iterable")}}var u4=HR;function KR(t,e,r){for(var n=0,s=r.length;n<s;){if(e=t["@@transducer/step"](e,r[n]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n+=1}return t["@@transducer/result"](e)}var d4=KR,zR=Es,GR=q,WR=GR(function(e,r){return zR(e.length,function(){return e.apply(r,arguments)})}),h4=WR,VR=u4,qR=d4,XR=h4;function JR(t,e,r){for(var n=r.next();!n.done;){if(e=t["@@transducer/step"](e,n.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}n=r.next()}return t["@@transducer/result"](e)}function YR(t,e,r,n){return t["@@transducer/result"](r[n](XR(t["@@transducer/step"],t),e))}var ZR=VR(qR,YR,JR),ho=ZR,e$=function(){function t(e){this.f=e}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(e){return e},t.prototype["@@transducer/step"]=function(e,r){return this.f(e,r)},t}();function t$(t){return new e$(t)}var E0=t$,r$=ke,n$=ho,s$=E0,a$=r$(function(t,e,r){return n$(typeof t=="function"?s$(t):t,e,r)}),va=a$,i$=Se,o$=nr,l$=Ao,A$=Bu,c$=va,u$=i$(function(e){return o$(c$(l$,0,A$("length",e)),function(){for(var r=0,n=e.length;r<n;){if(!e[r].apply(this,arguments))return!1;r+=1}return!0})}),d$=u$,h$=Se,f$=h$(function(e){return function(){return e}}),N0=f$,g$=q,m$=g$(function(e,r){return e&&r}),f4=m$,p$=ya,y$=jt,v$=function(){function t(e,r){this.xf=r,this.f=e,this.any=!1}return t.prototype["@@transducer/init"]=y$.init,t.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,r){return this.f(r)&&(this.any=!0,e=p$(this.xf["@@transducer/step"](e,!0))),e},t}();function x$(t){return function(e){return new v$(t,e)}}var w$=x$,b$=q,_$=pt,C$=w$,B$=b$(_$(["any"],C$,function(e,r){for(var n=0;n<r.length;){if(e(r[n]))return!0;n+=1}return!1})),S$=B$,j$=Se,k$=nr,E$=Ao,N$=Bu,F$=va,T$=j$(function(e){return k$(F$(E$,0,N$("length",e)),function(){for(var r=0,n=e.length;r<n;){if(e[r].apply(this,arguments))return!0;r+=1}return!1})}),U$=T$,Q$=_u,I$=u4;function P$(t,e,r){for(var n=r.next();!n.done;)e=t(e,n.value),n=r.next();return e}function D$(t,e,r,n){return r[n](t,e)}var M$=I$(Q$,D$,P$),F0=M$,R$=$n,$$=q,O$=F0,L$=Ns,H$=$$(function(e,r){return typeof r["fantasy-land/ap"]=="function"?r["fantasy-land/ap"](e):typeof e.ap=="function"?e.ap(r):typeof e=="function"?function(n){return e(n)(r(n))}:O$(function(n,s){return R$(n,L$(s,r))},[],e)}),iw=H$;function K$(t,e){for(var r=0,n=e.length-(t-1),s=new Array(n>=0?n:0);r<n;)s[r]=Array.prototype.slice.call(e,r,r+t),r+=1;return s}var z$=K$,G$=$n,W$=jt,V$=function(){function t(e,r){this.xf=r,this.pos=0,this.full=!1,this.acc=new Array(e)}return t.prototype["@@transducer/init"]=W$.init,t.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,r){return this.store(r),this.full?this.xf["@@transducer/step"](e,this.getCopy()):e},t.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return G$(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},t}();function q$(t){return function(e){return new V$(t,e)}}var X$=q$,J$=z$,Y$=q,Z$=pt,e8=X$,t8=Y$(Z$([],e8,J$)),r8=t8,n8=$n,s8=q,a8=s8(function(e,r){return n8(r,[e])}),i8=a8,o8=q,l8=o8(function(e,r){return e.apply(this,r)}),g4=l8,A8=Se,c8=us,u8=A8(function(e){for(var r=c8(e),n=r.length,s=[],a=0;a<n;)s[a]=e[r[a]],a+=1;return s}),m4=u8,d8=Se,h8=Er,f8=g4,g8=nr,m8=Ao,p8=Bu,y8=va,v8=us,x8=m4;function J_(t,e){return h8(e)?e.map(t):v8(e).reduce(function(r,n){return r[n]=t(e[n]),r},{})}var w8=d8(function t(e){return e=J_(function(r){return typeof r=="function"?r:t(r)},e),g8(y8(m8,0,p8("length",x8(e))),function(){var r=arguments;return J_(function(n){return f8(n,r)},e)})}),b8=w8,_8=q,C8=_8(function(e,r){return r(e)}),B8=C8,S8=ke,j8=S8(function(e,r,n){var s=e(r),a=e(n);return s<a?-1:s>a?1:0}),k8=j8,E8=Er,N8=fi;function F8(t,e,r){if(N8(t)&&E8(r)){var n=[].concat(r);return n[t]=e,n}var s={};for(var a in r)s[a]=r[a];return s[t]=e,s}var ow=F8,T8=Se,U8=T8(function(e){return e==null}),Su=U8,Q8=ke,I8=Hr,P8=fi,D8=ow,M8=Su,R8=Q8(function t(e,r,n){if(e.length===0)return r;var s=e[0];if(e.length>1){var a=!M8(n)&&I8(s,n)&&typeof n[s]=="object"?n[s]:P8(e[1])?[]:{};r=t(Array.prototype.slice.call(e,1),r,a)}return D8(s,r,n)}),lw=R8,$8=ke,O8=lw,L8=$8(function(e,r,n){return O8([e],r,n)}),Aw=L8,H8=q,K8=H8(function(e,r){switch(e){case 0:return function(){return r.call(this)};case 1:return function(n){return r.call(this,n)};case 2:return function(n,s){return r.call(this,n,s)};case 3:return function(n,s,a){return r.call(this,n,s,a)};case 4:return function(n,s,a,o){return r.call(this,n,s,a,o)};case 5:return function(n,s,a,o,l){return r.call(this,n,s,a,o,l)};case 6:return function(n,s,a,o,l,A){return r.call(this,n,s,a,o,l,A)};case 7:return function(n,s,a,o,l,A,u){return r.call(this,n,s,a,o,l,A,u)};case 8:return function(n,s,a,o,l,A,u,h){return r.call(this,n,s,a,o,l,A,u,h)};case 9:return function(n,s,a,o,l,A,u,h,c){return r.call(this,n,s,a,o,l,A,u,h,c)};case 10:return function(n,s,a,o,l,A,u,h,c,d){return r.call(this,n,s,a,o,l,A,u,h,c,d)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),T0=K8,z8=Se,G8=T0,W8=z8(function(e){return G8(2,e)}),V8=W8;function q8(t){var e=Object.prototype.toString.call(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}var ju=q8,X8=q,J8=_u,Y8=iw,Y_=nr,Z8=Ns,eO=X8(function(e,r){var n=Y_(e,r);return Y_(e,function(){return J8(Y8,Z8(n,arguments[0]),Array.prototype.slice.call(arguments,1))})}),p4=eO,tO=Se,rO=p4,nO=tO(function(e){return rO(e.length,e)}),U0=nO,sO=q,aO=ju,iO=f4,oO=U0,lO=sO(function(e,r){return aO(e)?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:oO(iO)(e,r)}),AO=lO,cO=Se,uO=cO(function(e){return e.apply(this,Array.prototype.slice.call(arguments,1))}),dO=uO,hO=k0;function fO(t){return function e(r){for(var n,s,a,o=[],l=0,A=r.length;l<A;){if(hO(r[l]))for(n=t?e(r[l]):r[l],a=0,s=n.length;a<s;)o[o.length]=n[a],a+=1;else o[o.length]=r[l];l+=1}return o}}var y4=fO;function gO(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}}var mO=gO,pO=mO,yO=k0,vO=d4,xO=ho,lf=jt,v4="@@transducer/init",gy="@@transducer/step",x4="@@transducer/result",wO=function(){function t(e){this.xf=e}return t.prototype[v4]=lf.init,t.prototype[x4]=lf.result,t.prototype[gy]=function(e,r){var n=this.xf[gy](e,r);return n["@@transducer/reduced"]?pO(n):n},t}(),bO=function(){function t(e){this.xf=new wO(e)}return t.prototype[v4]=lf.init,t.prototype[x4]=lf.result,t.prototype[gy]=function(e,r){return yO(r)?xO(this.xf,e,r):vO(this.xf,e,[r])},t}(),_O=function(e){return new bO(e)},CO=_O,BO=CO,SO=c4;function jO(t){return function(e){return SO(t)(BO(e))}}var kO=jO,EO=q,NO=pt,FO=y4,TO=kO,UO=Ns,QO=EO(NO(["fantasy-land/chain","chain"],TO,function(e,r){return typeof r=="function"?function(n){return e(r(n))(n)}:FO(!1)(UO(e,r))})),w4=QO,IO=ke,PO=IO(function(e,r,n){if(e>r)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<e?e:n>r?r:n}),DO=PO;function MO(t){return new RegExp(t.source,t.flags?t.flags:(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":"")+(t.dotAll?"s":""))}var b4=MO,RO=b4,$O=tw;function _4(t,e,r){if(r||(r=new LO),OO(t))return t;var n=function(a){var o=r.get(t);if(o)return o;r.set(t,a);for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(a[l]=e?_4(t[l],!0,r):t[l]);return a};switch($O(t)){case"Object":return n(Object.create(Object.getPrototypeOf(t)));case"Array":return n([]);case"Date":return new Date(t.valueOf());case"RegExp":return RO(t);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return t.slice();default:return t}}var cw=_4;function OO(t){var e=typeof t;return t==null||e!="object"&&e!="function"}var LO=function(){function t(){this.map={},this.length=0}return t.prototype.set=function(e,r){const n=this.hash(e);let s=this.map[n];s||(this.map[n]=s=[]),s.push([e,r]),this.length+=1},t.prototype.hash=function(e){let r=[];for(var n in e)r.push(Object.prototype.toString.call(e[n]));return r.join()},t.prototype.get=function(e){if(this.length<=180){for(const s in this.map){const a=this.map[s];for(let o=0;o<a.length;o+=1){const l=a[o];if(l[0]===e)return l[1]}}return}const r=this.hash(e),n=this.map[r];if(n)for(let s=0;s<n.length;s+=1){const a=n[s];if(a[0]===e)return a[1]}},t}(),HO=cw,KO=Se,zO=KO(function(e){return e!=null&&typeof e.clone=="function"?e.clone():HO(e,!0)}),C4=zO,GO=q,WO=F0,VO=GO(function(e,r){var n=WO(function(o,l){var A=e(l);return o[A]===void 0&&(o[A]=[]),o[A].push(l),o},{},r),s=[];for(var a in n)s.push(n[a]);return s}),qO=VO,XO=Se,JO=XO(function(e){return function(r,n){return e(r,n)?-1:e(n,r)?1:0}}),YO=JO,ZO=Se,eL=ZO(function(e){return!e}),B4=eL,tL=U0,rL=B4,nL=tL(rL),sL=nL;function aL(t,e){return function(){return e.call(this,t.apply(this,arguments))}}var iL=aL,oL=Er;function lL(t,e){return function(){var r=arguments.length;if(r===0)return e();var n=arguments[r-1];return oL(n)||typeof n[t]!="function"?e.apply(this,arguments):n[t].apply(n,Array.prototype.slice.call(arguments,0,r-1))}}var ku=lL,AL=ku,cL=ke,uL=cL(AL("slice",function(e,r,n){return Array.prototype.slice.call(n,e,r)})),ds=uL,dL=ku,hL=Se,fL=ds,gL=hL(dL("tail",fL(1,1/0))),uw=gL,mL=Es,pL=iL,yL=va,vL=uw;function xL(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return mL(arguments[0].length,yL(pL,arguments[0],vL(arguments)))}var S4=xL,wL=Se,bL=nA,_L=wL(function(e){return bL(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()}),dw=_L,CL=S4,BL=dw;function SL(){if(arguments.length===0)throw new Error("compose requires at least one argument");return CL.apply(this,BL(arguments))}var j4=SL,jL=co,kL=jL(0),k4=kL;function EL(t){return t}var Q0=EL,NL=Se,FL=Q0,TL=NL(FL),I0=TL,UL=Es,QL=q,IL=k4,PL=F0,DL=uw,ML=I0,RL=QL(function(e,r){if(r.length<=0)return ML;var n=IL(r),s=DL(r);return UL(n.length,function(){return PL(function(a,o){return e.call(this,o,a)},n.apply(this,arguments),s)})}),E4=RL,$L=q,OL=E4,LL=dw,HL=$L(function(e,r){return OL.apply(this,[e,LL(r)])}),KL=HL,zL=q,Z_=Er,eC=ju,tC=nA,fm=rA,GL=zL(function(e,r){if(Z_(e)){if(Z_(r))return e.concat(r);throw new TypeError(fm(r)+" is not an array")}if(tC(e)){if(tC(r))return e+r;throw new TypeError(fm(r)+" is not a string")}if(e!=null&&eC(e["fantasy-land/concat"]))return e["fantasy-land/concat"](r);if(e!=null&&eC(e.concat))return e.concat(r);throw new TypeError(fm(e)+' does not have a method named "concat" or "fantasy-land/concat"')}),hw=GL,WL=Es,VL=Se,qL=Ns,XL=Ao,JL=va,YL=VL(function(e){var r=JL(XL,0,qL(function(n){return n[0].length},e));return WL(r,function(){for(var n=0;n<e.length;){if(e[n][0].apply(this,arguments))return e[n][1].apply(this,arguments);n+=1}})}),ZL=YL,eH=Se,tH=nr,rH=eH(function(e){return tH(e.length,e)}),fw=rH,nH=q,sH=fw,aH=T0,iH=nH(function(e,r){if(e>10)throw new Error("Constructor with greater than ten arguments");return e===0?function(){return new r}:sH(aH(e,function(n,s,a,o,l,A,u,h,c,d){switch(e){case 1:return new r(n);case 2:return new r(n,s);case 3:return new r(n,s,a);case 4:return new r(n,s,a,o);case 5:return new r(n,s,a,o,l);case 6:return new r(n,s,a,o,l,A);case 7:return new r(n,s,a,o,l,A,u);case 8:return new r(n,s,a,o,l,A,u,h);case 9:return new r(n,s,a,o,l,A,u,h,c);case 10:return new r(n,s,a,o,l,A,u,h,c,d)}}))}),N4=iH,oH=Se,lH=N4,AH=oH(function(e){return lH(e.length,e)}),cH=AH,uH=q,dH=bu,hH=nr,fH=Ao,gH=Bu,mH=va,pH=uH(function(e,r){return hH(mH(fH,0,gH("length",r)),function(){var n=arguments,s=this;return e.apply(s,dH(function(a){return a.apply(s,n)},r))})}),F4=pH,yH=F0,vH=fw,xH=vH(function(t,e){return yH(function(r,n){return t(n)?r+1:r},0,e)}),wH=xH,bH=cw,_H=Hr,CH=jt,BH=function(){function t(e,r,n,s){this.valueFn=e,this.valueAcc=r,this.keyFn=n,this.xf=s,this.inputs={}}return t.prototype["@@transducer/init"]=CH.init,t.prototype["@@transducer/result"]=function(e){var r;for(r in this.inputs)if(_H(r,this.inputs)&&(e=this.xf["@@transducer/step"](e,this.inputs[r]),e["@@transducer/reduced"])){e=e["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,r){var n=this.keyFn(r);return this.inputs[n]=this.inputs[n]||[n,bH(this.valueAcc,!1)],this.inputs[n][1]=this.valueFn(this.inputs[n][1],r),e},t}();function SH(t,e,r){return function(n){return new BH(t,e,r,n)}}var jH=SH,kH=cw,EH=xu,NH=pt,FH=Hr,TH=ya,UH=ho,QH=jH,IH=E0,PH=EH(4,[],NH([],QH,function(e,r,n,s){var a=IH(function(o,l){var A=n(l),u=e(FH(A,o)?o[A]:kH(r,!1),l);return u&&u["@@transducer/reduced"]?TH(o):(o[A]=u,o)});return UH(a,{},s)})),P0=PH,DH=P0,MH=DH(function(t,e){return t+1},0),RH=MH,$H=S0,OH=$H(-1),LH=OH,HH=q,KH=HH(function(e,r){return r==null||r!==r?e:r}),gw=KH,zH=ke,GH=zH(function(e,r,n){var s=e(r),a=e(n);return s>a?-1:s<a?1:0}),WH=GH,rC=nw,VH=function(){function t(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return t.prototype.add=function(e){return!nC(e,!0,this)},t.prototype.has=function(e){return nC(e,!1,this)},t}();function nC(t,e,r){var n=typeof t,s,a;switch(n){case"string":case"number":return t===0&&1/t===-1/0?r._items["-0"]?!0:(e&&(r._items["-0"]=!0),!1):r._nativeSet!==null?e?(s=r._nativeSet.size,r._nativeSet.add(t),a=r._nativeSet.size,a===s):r._nativeSet.has(t):n in r._items?t in r._items[n]?!0:(e&&(r._items[n][t]=!0),!1):(e&&(r._items[n]={},r._items[n][t]=!0),!1);case"boolean":if(n in r._items){var o=t?1:0;return r._items[n][o]?!0:(e&&(r._items[n][o]=!0),!1)}else return e&&(r._items[n]=t?[!1,!0]:[!0,!1]),!1;case"function":return r._nativeSet!==null?e?(s=r._nativeSet.size,r._nativeSet.add(t),a=r._nativeSet.size,a===s):r._nativeSet.has(t):n in r._items?rC(t,r._items[n])?!0:(e&&r._items[n].push(t),!1):(e&&(r._items[n]=[t]),!1);case"undefined":return r._items[n]?!0:(e&&(r._items[n]=!0),!1);case"object":if(t===null)return r._items.null?!0:(e&&(r._items.null=!0),!1);default:return n=Object.prototype.toString.call(t),n in r._items?rC(t,r._items[n])?!0:(e&&r._items[n].push(t),!1):(e&&(r._items[n]=[t]),!1)}}var Eu=VH,qH=q,XH=Eu,JH=qH(function(e,r){for(var n=[],s=0,a=e.length,o=r.length,l=new XH,A=0;A<o;A+=1)l.add(r[A]);for(;s<a;)l.add(e[s])&&(n[n.length]=e[s]),s+=1;return n}),T4=JH,sC=wu,YH=ke,ZH=YH(function(e,r,n){for(var s=[],a=0,o=r.length;a<o;)!sC(e,r[a],n)&&!sC(e,r[a],s)&&s.push(r[a]),a+=1;return s}),U4=ZH,e9=ke,t9=e9(function(e,r,n){var s=Array.prototype.slice.call(n,0);return s.splice(e,r),s}),Q4=t9,r9=fi,n9=Er,s9=Q4;function a9(t,e){if(e==null)return e;if(r9(t)&&n9(e))return s9(t,1,e);var r={};for(var n in e)r[n]=e[n];return delete r[t],r}var i9=a9,o9=q,l9=i9,A9=fi,c9=Er,u9=Aw;function d9(t,e){if(A9(t)&&c9(e))return[].concat(e);var r={};for(var n in e)r[n]=e[n];return r}var h9=o9(function t(e,r){if(r==null)return r;switch(e.length){case 0:return r;case 1:return l9(e[0],r);default:var n=e[0],s=Array.prototype.slice.call(e,1);return r[n]==null?d9(n,r):u9(n,t(s,r[n]),r)}}),I4=h9,f9=q,g9=I4,m9=f9(function(e,r){return g9([e],r)}),p9=m9,y9=q,v9=y9(function(e,r){return e/r}),x9=v9,aC=jt,w9=function(){function t(e,r){this.xf=r,this.n=e}return t.prototype["@@transducer/init"]=aC.init,t.prototype["@@transducer/result"]=aC.result,t.prototype["@@transducer/step"]=function(e,r){return this.n>0?(this.n-=1,e):this.xf["@@transducer/step"](e,r)},t}();function b9(t){return function(e){return new w9(t,e)}}var _9=b9,C9=q,B9=pt,S9=_9,j9=ds,k9=C9(B9(["drop"],S9,function(e,r){return j9(Math.max(0,e),1/0,r)})),P4=k9,E9=ya,iC=jt,N9=function(){function t(e,r){this.xf=r,this.n=e,this.i=0}return t.prototype["@@transducer/init"]=iC.init,t.prototype["@@transducer/result"]=iC.result,t.prototype["@@transducer/step"]=function(e,r){this.i+=1;var n=this.n===0?e:this.xf["@@transducer/step"](e,r);return this.n>=0&&this.i>=this.n?E9(n):n},t}();function F9(t){return function(e){return new N9(t,e)}}var T9=F9,U9=q,Q9=pt,I9=T9,P9=ds,D9=U9(Q9(["take"],I9,function(e,r){return P9(0,e<0?1/0:e,r)})),mw=D9,M9=mw;function R9(t,e){return M9(t<e.length?e.length-t:0,e)}var $9=R9,O9=jt,L9=function(){function t(e,r){if(e<=0)return r;this.xf=r,this.pos=0,this.full=!1,this.acc=new Array(e)}return t.prototype["@@transducer/init"]=O9.init,t.prototype["@@transducer/result"]=function(e){return this.acc=null,this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,r){return this.full&&(e=this.xf["@@transducer/step"](e,this.acc[this.pos])),this.store(r),e},t.prototype.store=function(e){this.acc[this.pos]=e,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t}();function H9(t){return function(e){return new L9(t,e)}}var K9=H9,z9=q,G9=pt,W9=$9,V9=K9,q9=z9(G9([],V9,W9)),X9=q9,J9=ds;function Y9(t,e){for(var r=e.length-1;r>=0&&t(e[r]);)r-=1;return J9(0,r+1,e)}var Z9=Y9,eK=jt,tK=ho,rK=function(){function t(e,r){this.f=e,this.retained=[],this.xf=r}return t.prototype["@@transducer/init"]=eK.init,t.prototype["@@transducer/result"]=function(e){return this.retained=null,this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,r){return this.f(r)?this.retain(e,r):this.flush(e,r)},t.prototype.flush=function(e,r){return e=tK(this.xf,e,this.retained),this.retained=[],this.xf["@@transducer/step"](e,r)},t.prototype.retain=function(e,r){return this.retained.push(r),e},t}();function nK(t){return function(e){return new rK(t,e)}}var sK=nK,aK=q,iK=pt,oK=Z9,lK=sK,AK=aK(iK([],lK,oK)),cK=AK,oC=jt,uK=function(){function t(e,r){this.xf=r,this.pred=e,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=oC.init,t.prototype["@@transducer/result"]=oC.result,t.prototype["@@transducer/step"]=function(e,r){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,r)&&(n=!0):this.seenFirstValue=!0,this.lastValue=r,n?e:this.xf["@@transducer/step"](e,r)},t}();function dK(t){return function(e){return new uK(t,e)}}var pw=dK,hK=co,fK=hK(-1),D4=fK,gK=q,mK=pt,pK=pw,yK=D4,vK=gK(mK([],pK,function(e,r){var n=[],s=1,a=r.length;if(a!==0)for(n[0]=r[0];s<a;)e(yK(n),r[s])||(n[n.length]=r[s]),s+=1;return n})),yw=vK,xK=Se,wK=pt,bK=pw,_K=yw,lC=On,CK=xK(wK([],function(){return bK(lC)},_K(lC))),BK=CK,SK=ke,jK=On,kK=SK(function(e,r,n){return jK(e(r),e(n))}),M4=kK,EK=q,NK=pt,FK=pw,TK=yw,AC=M4,UK=EK(function(t,e){return NK([],function(){return FK(AC(t))},TK(AC(t)))(e)}),QK=UK,cC=jt,IK=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=cC.init,t.prototype["@@transducer/result"]=cC.result,t.prototype["@@transducer/step"]=function(e,r){if(this.f){if(this.f(r))return e;this.f=null}return this.xf["@@transducer/step"](e,r)},t}();function PK(t){return function(e){return new IK(t,e)}}var DK=PK,MK=q,RK=pt,$K=DK,OK=ds,LK=MK(RK(["dropWhile"],$K,function(e,r){for(var n=0,s=r.length;n<s&&e(r[n]);)n+=1;return OK(n,1/0,r)})),HK=LK,KK=q,zK=KK(function(e,r){return e||r}),R4=zK,GK=q,WK=ju,VK=U0,qK=R4,XK=GK(function(e,r){return WK(e)?function(){return e.apply(this,arguments)||r.apply(this,arguments)}:VK(qK)(e,r)}),JK=XK;function YK(t){var e=Object.prototype.toString.call(t);return e==="[object Uint8ClampedArray]"||e==="[object Int8Array]"||e==="[object Uint8Array]"||e==="[object Int16Array]"||e==="[object Uint16Array]"||e==="[object Int32Array]"||e==="[object Uint32Array]"||e==="[object Float32Array]"||e==="[object Float64Array]"||e==="[object BigInt64Array]"||e==="[object BigUint64Array]"}var ZK=YK,ez=Se,tz=a4,rz=Er,nz=Cu,sz=nA,az=ZK,iz=ez(function(e){return e!=null&&typeof e["fantasy-land/empty"]=="function"?e["fantasy-land/empty"]():e!=null&&e.constructor!=null&&typeof e.constructor["fantasy-land/empty"]=="function"?e.constructor["fantasy-land/empty"]():e!=null&&typeof e.empty=="function"?e.empty():e!=null&&e.constructor!=null&&typeof e.constructor.empty=="function"?e.constructor.empty():rz(e)?[]:sz(e)?"":nz(e)?{}:tz(e)?function(){return arguments}():az(e)?e.constructor.from(""):void 0}),$4=iz,oz=q,lz=P4,Az=oz(function(e,r){return lz(e>=0?r.length-e:0,r)}),O4=Az,cz=q,uz=On,dz=O4,hz=cz(function(t,e){return uz(dz(t.length,e),t)}),fz=hz,gz=ke,mz=On,pz=gz(function(e,r,n){return mz(r[e],n[e])}),yz=pz,vz=q,xz=Er,wz=Cu,bz=vz(function t(e,r){if(!wz(r)&&!xz(r))return r;var n=r instanceof Array?[]:{},s,a,o;for(a in r)s=e[a],o=typeof s,n[a]=o==="function"?s(r[a]):s&&o==="object"?t(s,r[a]):r[a];return n}),_z=bz,Cz=ya,Bz=jt,Sz=function(){function t(e,r){this.xf=r,this.f=e,this.found=!1}return t.prototype["@@transducer/init"]=Bz.init,t.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,r){return this.f(r)&&(this.found=!0,e=Cz(this.xf["@@transducer/step"](e,r))),e},t}();function jz(t){return function(e){return new Sz(t,e)}}var kz=jz,Ez=q,Nz=pt,Fz=kz,Tz=Ez(Nz(["find"],Fz,function(e,r){for(var n=0,s=r.length;n<s;){if(e(r[n]))return r[n];n+=1}})),Uz=Tz,Qz=ya,Iz=jt,Pz=function(){function t(e,r){this.xf=r,this.f=e,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=Iz.init,t.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},t.prototype["@@transducer/step"]=function(e,r){return this.idx+=1,this.f(r)&&(this.found=!0,e=Qz(this.xf["@@transducer/step"](e,this.idx))),e},t}();function Dz(t){return function(e){return new Pz(t,e)}}var Mz=Dz,Rz=q,$z=pt,Oz=Mz,Lz=Rz($z([],Oz,function(e,r){for(var n=0,s=r.length;n<s;){if(e(r[n]))return n;n+=1}return-1})),Hz=Lz,Kz=jt,zz=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=Kz.init,t.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.last))},t.prototype["@@transducer/step"]=function(e,r){return this.f(r)&&(this.last=r),e},t}();function Gz(t){return function(e){return new zz(t,e)}}var Wz=Gz,Vz=q,qz=pt,Xz=Wz,Jz=Vz(qz([],Xz,function(e,r){for(var n=r.length-1;n>=0;){if(e(r[n]))return r[n];n-=1}})),Yz=Jz,Zz=jt,eG=function(){function t(e,r){this.xf=r,this.f=e,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=Zz.init,t.prototype["@@transducer/result"]=function(e){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](e,this.lastIdx))},t.prototype["@@transducer/step"]=function(e,r){return this.idx+=1,this.f(r)&&(this.lastIdx=this.idx),e},t}();function tG(t){return function(e){return new eG(t,e)}}var rG=tG,nG=q,sG=pt,aG=rG,iG=nG(sG([],aG,function(e,r){for(var n=r.length-1;n>=0;){if(e(r[n]))return n;n-=1}return-1})),oG=iG,lG=Se,AG=y4,cG=lG(AG(!0)),uG=cG,dG=Se,hG=nr,fG=dG(function(e){return hG(e.length,function(r,n){var s=Array.prototype.slice.call(arguments,0);return s[0]=n,s[1]=r,e.apply(this,s)})}),L4=fG,gG=ku,mG=q,pG=mG(gG("forEach",function(e,r){for(var n=r.length,s=0;s<n;)e(r[s]),s+=1;return r})),yG=pG,vG=q,xG=us,wG=vG(function(e,r){for(var n=xG(r),s=0;s<n.length;){var a=n[s];e(r[a],a,r),s+=1}return r}),bG=wG,_G=Se,CG=_G(function(e){for(var r={},n=0;n<e.length;)r[e[n][0]]=e[n][1],n+=1;return r}),BG=CG,SG=ku,jG=q,kG=P0,EG=jG(SG("groupBy",kG(function(t,e){return t.push(e),t},[]))),NG=EG,FG=q,TG=FG(function(t,e){for(var r=[],n=0,s=e.length;n<s;){for(var a=n+1;a<s&&t(e[a-1],e[a]);)a+=1;r.push(e.slice(n,a)),n=a}return r}),UG=TG,QG=q,IG=QG(function(e,r){return e>r}),PG=IG,DG=q,MG=DG(function(e,r){return e>=r}),RG=MG,$G=q,OG=Hr,uC=Su,LG=$G(function(e,r){if(e.length===0||uC(r))return!1;for(var n=r,s=0;s<e.length;)if(!uC(n)&&OG(e[s],n))n=n[e[s]],s+=1;else return!1;return!0}),H4=LG,HG=q,KG=H4,zG=HG(function(e,r){return KG([e],r)}),GG=zG,WG=q,VG=Su,qG=WG(function(e,r){return VG(r)?!1:e in r}),XG=qG,dC=s4,K4=function(t,e){switch(arguments.length){case 0:return K4;case 1:return function(){return function r(n){switch(arguments.length){case 0:return r;default:return dC(t,n)}}}();default:return dC(t,e)}},JG=K4,YG=ke,ZG=nr,eW=YG(function(e,r,n){return ZG(Math.max(e.length,r.length,n.length),function(){return e.apply(this,arguments)?r.apply(this,arguments):n.apply(this,arguments)})}),tW=eW,rW=S0,nW=rW(1),sW=nW,aW=nw,iW=q,oW=iW(aW),lW=oW,AW=P0,cW=AW(function(t,e){return e},null),uW=cW,dW=q,hW=i4,fW=Er,gW=dW(function(e,r){return typeof r.indexOf=="function"&&!fW(r)?r.indexOf(e):hW(r,e,0)}),mW=gW,pW=ds,yW=pW(0,-1),vW=yW,xW=wu,wW=ke,bW=sw,_W=wW(function(e,r,n){return bW(function(s){return xW(e,s,n)},r)}),CW=_W,BW=ke,SW=BW(function(e,r,n){e=e<n.length&&e>=0?e:n.length;var s=Array.prototype.slice.call(n,0);return s.splice(e,0,r),s}),jW=SW,kW=ke,EW=kW(function(e,r,n){return e=e<n.length&&e>=0?e:n.length,[].concat(Array.prototype.slice.call(n,0,e),r,Array.prototype.slice.call(n,e))}),NW=EW,FW=Eu,hC=jt,TW=function(){function t(e,r){this.xf=r,this.f=e,this.set=new FW}return t.prototype["@@transducer/init"]=hC.init,t.prototype["@@transducer/result"]=hC.result,t.prototype["@@transducer/step"]=function(e,r){return this.set.add(this.f(r))?this.xf["@@transducer/step"](e,r):e},t}();function UW(t){return function(e){return new TW(t,e)}}var QW=UW,IW=Eu,PW=q,DW=pt,MW=QW,RW=PW(DW([],MW,function(t,e){for(var r=new IW,n=[],s=0,a,o;s<e.length;)o=e[s],a=t(o),r.add(a)&&n.push(o),s+=1;return n})),z4=RW,$W=I0,OW=z4,LW=OW($W),vw=LW,HW=q,KW=sw,zW=Eu,GW=vw,WW=HW(function(e,r){for(var n=new zW,s=0;s<e.length;s+=1)n.add(e[s]);return GW(KW(n.has.bind(n),r))}),VW=WW,qW=ku,XW=q,JW=XW(qW("intersperse",function(e,r){for(var n=[],s=0,a=r.length;s<a;)s===a-1?n.push(r[s]):n.push(r[s],e),s+=1;return n})),YW=JW,ZW=Hr;function eV(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1,n=arguments.length;r<n;){var s=arguments[r];if(s!=null)for(var a in s)ZW(a,s)&&(e[a]=s[a]);r+=1}return e}var D0=typeof Object.assign=="function"?Object.assign:eV,tV=q,rV=tV(function(e,r){var n={};return n[e]=r,n}),G4=rV,nV=D0,xw=Q0,W4=k0,sV=ew,aV=G4,iV={"@@transducer/init":Array,"@@transducer/step":function(t,e){return t.push(e),t},"@@transducer/result":xw},oV={"@@transducer/init":String,"@@transducer/step":function(t,e){return t+e},"@@transducer/result":xw},lV={"@@transducer/init":Object,"@@transducer/step":function(t,e){return nV(t,W4(e)?aV(e[0],e[1]):e)},"@@transducer/result":xw};function AV(t){if(sV(t))return t;if(W4(t))return iV;if(typeof t=="string")return oV;if(typeof t=="object")return lV;throw new Error("Cannot create transformer for "+t)}var cV=AV,uV=ke,dV=ew,hV=ho,fV=cV,gV=uV(function(e,r,n){var s=r(dV(e)?e:fV(e));return hV(s,s["@@transducer/init"](),n)}),mV=gV,pV=Se,yV=Hr,vV=us,xV=pV(function(e){for(var r=vV(e),n=r.length,s=0,a={};s<n;){var o=r[s],l=e[o],A=yV(l,a)?a[l]:a[l]=[];A[A.length]=o,s+=1}return a}),wV=xV,bV=Se,_V=us,CV=bV(function(e){for(var r=_V(e),n=r.length,s=0,a={};s<n;){var o=r[s];a[e[o]]=o,s+=1}return a}),BV=CV,SV=q,jV=ju,kV=nr,EV=rA,NV=SV(function(e,r){return kV(e+1,function(){var n=arguments[e];if(n!=null&&jV(n[r]))return n[r].apply(n,Array.prototype.slice.call(arguments,0,e));throw new TypeError(EV(n)+' does not have a method named "'+r+'"')})}),Nu=NV,FV=q,TV=FV(function(e,r){return r instanceof e||r!=null&&(r.constructor===e||e.name==="Object"&&typeof r=="object")}),V4=TV,UV=Se,QV=$4,IV=On,PV=UV(function(e){return e!=null&&IV(e,QV(e))}),DV=PV,MV=Su,RV=Se,$V=RV(function(e){return!MV(e)}),OV=$V,LV=Nu,HV=LV(1,"join"),KV=HV,zV=Se,GV=F4,WV=zV(function(e){return GV(function(){return Array.prototype.slice.call(arguments,0)},e)}),q4=WV,VV=Se,qV=VV(function(e){var r,n=[];for(r in e)n[n.length]=r;return n}),XV=qV,JV=q,YV=Er,ZV=On,eq=JV(function(e,r){if(typeof r.lastIndexOf=="function"&&!YV(r))return r.lastIndexOf(e);for(var n=r.length-1;n>=0;){if(ZV(r[n],e))return n;n-=1}return-1}),tq=eq;function rq(t){return Object.prototype.toString.call(t)==="[object Number]"}var X4=rq,nq=Se,sq=X4,aq=nq(function(e){return e!=null&&sq(e.length)?e.length:NaN}),J4=aq,iq=q,oq=Ns,lq=iq(function(e,r){return function(n){return function(s){return oq(function(a){return r(a,s)},n(e(s)))}}}),M0=lq,Aq=ke,cq=r4,uq=N0,dq=Aq(function(e,r,n){return cq(e,uq(r),n)}),Y4=dq,hq=Se,fq=M0,gq=co,mq=Y4,pq=hq(function(e){return fq(gq(e),mq(e))}),yq=pq,vq=q,xq=fi,wq=co,bq=vq(function(e,r){return e.map(function(n){for(var s=r,a=0,o;a<n.length;){if(s==null)return;o=n[a],s=xq(o)?wq(o,s):s[o],a+=1}return s})}),Z4=bq,_q=q,Cq=Z4,Bq=_q(function(e,r){return Cq([e],r)[0]}),sA=Bq,Sq=Se,jq=lw,kq=M0,Eq=sA,Nq=Sq(function(e){return kq(Eq(e),jq(e))}),Fq=Nq,Tq=Se,Uq=Aw,Qq=M0,Iq=uo,Pq=Tq(function(e){return Qq(Iq(e),Uq(e))}),Dq=Pq,Mq=q,Rq=Mq(function(e,r){return e<r}),$q=Rq,Oq=q,Lq=Oq(function(e,r){return e<=r}),Hq=Lq,Kq=ke,zq=Kq(function(e,r,n){for(var s=0,a=n.length,o=[],l=[r];s<a;)l=e(l[0],n[s]),o[s]=l[1],s+=1;return[l[0],o]}),Gq=zq,Wq=ke,Vq=Wq(function(e,r,n){for(var s=n.length-1,a=[],o=[r];s>=0;)o=e(o[0],n[s]),a[s]=o[1],s-=1;return[o[0],a]}),qq=Vq,Xq=_u,Jq=q,Yq=us,Zq=Jq(function(e,r){return Xq(function(n,s){return n[s]=e(r[s],s,r),n},{},Yq(r))}),eX=Zq,tX=q,rX=tX(function(e,r){return r.match(e)||[]}),nX=rX,sX=q,fC=fi,aX=sX(function(e,r){return fC(e)?!fC(r)||r<1?NaN:(e%r+r)%r:NaN}),iX=aX,oX=ke,lX=Ao,AX=oX(function(e,r,n){var s=e(n);return lX(e(r),s)===s?n:r}),cX=AX,uX=S0,dX=va,hX=dX(uX,0),eE=hX,fX=Se,gX=eE,mX=fX(function(e){return gX(e)/e.length}),tE=mX,pX=Se,yX=tE,vX=pX(function(e){var r=e.length;if(r===0)return NaN;var n=2-r%2,s=(r-n)/2;return yX(Array.prototype.slice.call(e,0).sort(function(a,o){return a<o?-1:a>o?1:0}).slice(s,s+n))}),xX=vX,wX=Es,bX=q,_X=Hr,CX=bX(function(e,r){var n={};return wX(r.length,function(){var s=e.apply(this,arguments);return _X(s,n)||(n[s]=r.apply(this,arguments)),n[s]})}),BX=CX,SX=D0,jX=Se,kX=jX(function(e){return SX.apply(null,[{}].concat(e))}),EX=kX,NX=ke,md=Hr,FX=NX(function(e,r,n){var s={},a;r=r||{},n=n||{};for(a in r)md(a,r)&&(s[a]=md(a,n)?e(a,r[a],n[a]):r[a]);for(a in n)md(a,n)&&!md(a,s)&&(s[a]=n[a]);return s}),ww=FX,TX=ke,gC=Cu,UX=ww,QX=TX(function t(e,r,n){return UX(function(s,a,o){return gC(a)&&gC(o)?t(e,a,o):e(s,a,o)},r,n)}),R0=QX,IX=q,PX=R0,DX=IX(function(e,r){return PX(function(n,s,a){return s},e,r)}),MX=DX,RX=q,$X=R0,OX=RX(function(e,r){return $X(function(n,s,a){return a},e,r)}),rE=OX,LX=ke,HX=R0,KX=LX(function(e,r,n){return HX(function(s,a,o){return e(a,o)},r,n)}),zX=KX,GX=D0,WX=q,VX=WX(function(e,r){return GX({},r,e)}),qX=VX,XX=D0,JX=q,YX=JX(function(e,r){return XX({},e,r)}),ZX=YX,eJ=ke,tJ=ww,rJ=eJ(function(e,r,n){return tJ(function(s,a,o){return e(a,o)},r,n)}),nJ=rJ,sJ=q,mC=rA,aJ=sJ(function(e,r){if(e===r)return e;function n(A,u){if(A<u!=u<A)return u<A?u:A}var s=n(e,r);if(s!==void 0)return s;var a=n(typeof e,typeof r);if(a!==void 0)return a===typeof e?e:r;var o=mC(e),l=n(o,mC(r));return l!==void 0?l===o?e:r:e}),nE=aJ,iJ=ke,oJ=nE,lJ=iJ(function(e,r,n){var s=e(n);return oJ(e(r),s)===s?n:r}),AJ=lJ,cJ=Er,uJ=fi;function dJ(t,e,r){if(uJ(t)&&cJ(r)){var n=[].concat(r);return n[t]=e(n[t]),n}var s={};for(var a in r)s[a]=r[a];return s[t]=e(s[t]),s}var hJ=dJ,fJ=ke,gJ=Er,mJ=Cu,pJ=Hr,yJ=ow,vJ=hJ,xJ=fJ(function t(e,r,n){if(!mJ(n)&&!gJ(n)||e.length===0)return n;var s=e[0];if(!pJ(s,n))return n;if(e.length===1)return vJ(s,r,n);var a=t(Array.prototype.slice.call(e,1),r,n[s]);return a===n[s]?n:yJ(s,a,n)}),sE=xJ,wJ=ke,bJ=sE,_J=wJ(function(e,r,n){return bJ([e],r,n)}),CJ=_J,BJ=q,SJ=BJ(function(e,r){return e%r}),jJ=SJ,kJ=ke,EJ=kJ(function(t,e,r){var n=r.length,s=r.slice(),a=t<0?n+t:t,o=e<0?n+e:e,l=s.splice(a,1);return a<0||a>=r.length||o<0||o>=r.length?r:[].concat(s.slice(0,o)).concat(l).concat(s.slice(o,r.length))}),NJ=EJ,FJ=q,TJ=FJ(function(e,r){return e*r}),aE=TJ,UJ=rE,QJ=q,IJ=QJ((t,e)=>r=>t.call(globalThis,UJ(e,r))),PJ=IJ,DJ=Se,MJ=DJ(function(e){return-e}),RJ=MJ,$J=o4,OJ=q,LJ=n4,HJ=OJ(function(e,r){return LJ($J(e),r)}),KJ=HJ,zJ=Se,GJ=nr,WJ=co,VJ=zJ(function(e){var r=e<0?1:e+1;return GJ(r,function(){return WJ(e,arguments)})}),qJ=VJ,XJ=ke,JJ=XJ(function(e,r,n){return e(r(n))}),YJ=JJ,ZJ=q,eY=ZJ(function(e,r){return typeof e["fantasy-land/of"]=="function"?e["fantasy-land/of"](r):typeof e.of=="function"?e.of(r):[r]}),tY=eY,rY=q,nY=rY(function(e,r){for(var n={},s={},a=0,o=e.length;a<o;)s[e[a]]=1,a+=1;for(var l in r)s.hasOwnProperty(l)||(n[l]=r[l]);return n}),sY=nY,aY=xu,iY=aY(4,[],function(e,r,n,s){return e(r(n),r(s))}),oY=iY,lY=Es,AY=Se,cY=AY(function(e){var r=!1,n;return lY(e.length,function(){return r||(r=!0,n=e.apply(this,arguments)),n})}),uY=cY,dY=ju,hY=A4;function fY(t,e){if(e==null||!dY(e.then))throw new TypeError("`"+t+"` expected a Promise, received "+hY(e,[]))}var iE=fY,gY=q,mY=iE,pY=gY(function(e,r){return mY("otherwise",r),r.then(null,e)}),yY=pY,vY=ke,oE=function(t){return{value:t,map:function(e){return oE(e(t))}}},xY=vY(function(e,r,n){return e(function(s){return oE(r(s))})(n).value}),lE=xY,wY=q,bY=wY(function(e,r){return[e,r]}),_Y=bY,CY=Es,BY=q;function SY(t){return BY(function(e,r){return CY(Math.max(0,e.length-r.length),function(){return e.apply(this,t(r,arguments))})})}var AE=SY,jY=$n,kY=AE,EY=kY(jY),NY=EY,FY=$n,TY=AE,UY=L4,QY=TY(UY(FY)),IY=QY,PY=aw,DY=q4,MY=j0,RY=DY([PY,MY]),$Y=RY,OY=ke,LY=On,HY=sA,KY=OY(function(e,r,n){return LY(HY(r,n),e)}),zY=KY,GY=ke,WY=gw,VY=sA,qY=GY(function(e,r,n){return WY(e,VY(r,n))}),XY=qY,JY=ke,YY=sA,ZY=JY(function(e,r,n){return e(YY(r,n))}),eZ=ZY,tZ=q,rZ=tZ(function(e,r){for(var n={},s=0;s<e.length;)e[s]in r&&(n[e[s]]=r[e[s]]),s+=1;return n}),nZ=rZ,sZ=q,aZ=sZ(function(e,r){for(var n={},s=0,a=e.length;s<a;){var o=e[s];n[o]=r[o],s+=1}return n}),cE=aZ,iZ=q,oZ=iZ(function(e,r){var n={};for(var s in r)e(r[s],s,r)&&(n[s]=r[s]);return n}),lZ=oZ,AZ=$n,cZ=q,uZ=cZ(function(e,r){return AZ([e],r)}),uE=uZ,dZ=aE,hZ=va,fZ=hZ(dZ,1),gZ=fZ,mZ=q,pZ=nr,yZ=mZ(function(e,r){return pZ(r.length,function(){for(var n=[],s=0;s<r.length;)n.push(r[s].call(this,arguments[s])),s+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,r.length)))})}),dE=yZ,vZ=bu,xZ=I0,wZ=cE,bZ=dE,_Z=bZ(vZ,[wZ,xZ]),CZ=_Z;function BZ(t,e,r){return function(n){return e(r(t(n)))}}var hE=BZ,pC=jt,SZ=hE,jZ=function(){function t(e,r,n){this.xf=n,this.f=e,this.g=r}return t.prototype["@@transducer/init"]=pC.init,t.prototype["@@transducer/result"]=pC.result,t.prototype["@@transducer/step"]=function(e,r){return this.xf["@@transducer/step"](e,SZ(this.f,this.g,r))},t}();function kZ(t,e){return function(r){return new jZ(t,e,r)}}var EZ=kZ,NZ=ke,FZ=pt,TZ=hE,UZ=EZ,QZ=NZ(FZ(["fantasy-land/promap","promap"],UZ,TZ)),IZ=QZ,PZ=ke,DZ=uo,MZ=On,RZ=PZ(function(e,r,n){return MZ(e,DZ(r,n))}),$Z=RZ,OZ=ke,LZ=uo,HZ=V4,KZ=OZ(function(e,r,n){return HZ(e,LZ(r,n))}),zZ=KZ,GZ=ke,WZ=gw,VZ=uo,qZ=GZ(function(e,r,n){return WZ(e,VZ(r,n))}),XZ=qZ,JZ=ke,YZ=uo,ZZ=JZ(function(e,r,n){return e(YZ(r,n))}),eee=ZZ,tee=q,ree=sA,nee=tee(function(e,r){return e.map(function(n){return ree([n],r)})}),see=nee,aee=q,yC=X4,iee=aee(function(e,r){if(!(yC(e)&&yC(r)))throw new TypeError("Both arguments to range must be numbers");for(var n=[],s=e;s<r;)n.push(s),s+=1;return n}),oee=iee,lee=ke,Aee=lee(function(e,r,n){for(var s=n.length-1;s>=0;){if(r=e(n[s],r),r&&r["@@transducer/reduced"]){r=r["@@transducer/value"];break}s-=1}return r}),fE=Aee,cee=xu,uee=ho,dee=E0,hee=ya,fee=cee(4,[],function(e,r,n,s){var a=dee(function(o,l){return e(o,l)?r(o,l):hee(o)});return uee(a,n,s)}),gee=fee,mee=Se,pee=ya,yee=mee(pee),vee=yee,xee=q,wee=xee(function(e,r){var n=Number(r),s=0,a;if(n<0||isNaN(n))throw new RangeError("n must be a non-negative number");for(a=[];s<n;)a.push(e(s)),s+=1;return a}),gE=wee,bee=q,_ee=N0,Cee=gE,Bee=bee(function(e,r){return Cee(_ee(e),r)}),See=Bee,jee=ke,kee=jee(function(e,r,n){return n.replace(e,r)}),Eee=kee,Nee=ke,Fee=jt,vC="@@transducer/init",gm="@@transducer/step",Tee=function(){function t(e,r,n){this.xf=n,this.f=e,this.acc=r}return t.prototype[vC]=function(){return this.xf[gm](this.xf[vC](),this.acc)},t.prototype["@@transducer/result"]=Fee.result,t.prototype[gm]=function(e,r){return e["@@transducer/reduced"]?e:(this.acc=this.f(this.acc,r),this.xf[gm](e,this.acc))},t}(),Uee=Nee(function(e,r,n){return new Tee(e,r,n)}),Qee=Uee,Iee=ke,Pee=pt,Dee=Qee,Mee=Iee(Pee([],Dee,function(e,r,n){for(var s=0,a=n.length,o=[r];s<a;)r=e(r,n[s]),o[s+1]=r,s+=1;return o})),Ree=Mee,$ee=q,Oee=iw,Lee=Ns,Hee=uE,Kee=fE,xC=Q0,zee=$ee(function(e,r){var n=typeof e["fantasy-land/of"]=="function"?e["fantasy-land/of"]:typeof e.of=="function"?e.of:e,s={"fantasy-land/of":n};return typeof r["fantasy-land/traverse"]=="function"?r["fantasy-land/traverse"](s,xC):typeof r.traverse=="function"?r.traverse(s,xC):Kee(function(a,o){return Oee(Lee(Hee,a),o)},n([]),r)}),mE=zee,Gee=ke,Wee=N0,Vee=lE,qee=Gee(function(e,r,n){return Vee(e,Wee(r),n)}),Xee=qee,Jee=q,Yee=Jee(function(e,r){return Array.prototype.slice.call(r,0).sort(e)}),Zee=Yee,ete=q,tte=ete(function(e,r){return Array.prototype.slice.call(r,0).sort(function(n,s){var a=e(n),o=e(s);return a<o?-1:a>o?1:0})}),rte=tte,nte=q,ste=nte(function(e,r){return Array.prototype.slice.call(r,0).sort(function(n,s){for(var a=0,o=0;a===0&&o<e.length;)a=e[o](n,s),o+=1;return a})}),ate=ste,ite=Nu,ote=ite(1,"split"),lte=ote,Ate=q,cte=J4,wC=ds,ute=Ate(function(e,r){return[wC(0,e,r),wC(e,cte(r),r)]}),dte=ute,hte=q,fte=ds,gte=hte(function(e,r){if(e<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],s=0;s<r.length;)n.push(fte(s,s+=e,r));return n}),mte=gte,pte=q,yte=pte(function(e,r){for(var n=0,s=r.length,a=[];n<s&&!e(r[n]);)a.push(r[n]),n+=1;return[a,Array.prototype.slice.call(r,n)]}),vte=yte,xte=xu,wte=xte(2,[],function(e,r){for(var n=[],s=[],a=0;a<r.length;a=a+1)e(r[a])||s.push(r[a]),(a<r.length-1&&e(r[a+1])||a===r.length-1)&&s.length>0&&(n.push(s),s=[]);return n}),bte=wte,_te=q,Cte=On,Bte=mw,Ste=_te(function(t,e){return Cte(Bte(t.length,e),t)}),jte=Ste,kte=q,Ete=kte(function(e,r){return Number(e)-Number(r)}),Nte=Ete,Fte=ke,pE=Er,Tte=nA,Ute=C4,Qte=function(t,e,r){var n=Ute(r),s=Object.getOwnPropertyNames(n);if(s.includes(t)&&s.includes(e)){var a=n[t];n[t]=n[e],n[e]=a}return n},yE=function(t,e,r){var n=r.length,s=r.slice(),a=t<0?n+t:t,o=e<0?n+e:e,l=Math.min(a,o),A=Math.max(a,o);return a<0||a>n||o<0||o>n||a===o||(s=[].concat(s.slice(0,l)).concat(s[A]).concat(s.slice(l+1,A)).concat(s[l]).concat(s.slice(A+1,n))),s},Ite=function(t,e,r){var n=yE(t,e,r);return pE(n)?n.join(""):n},Pte=Fte(function(t,e,r){return pE(r)?yE(t,e,r):Tte(r)?Ite(t,e,r):Qte(t,e,r)}),Dte=Pte,Mte=q,Rte=hw,bC=T4,$te=Mte(function(e,r){return Rte(bC(e,r),bC(r,e))}),Ote=$te,Lte=ke,Hte=hw,_C=U4,Kte=Lte(function(e,r,n){return Hte(_C(e,r,n),_C(e,n,r))}),zte=Kte,Gte=q,Wte=ds,Vte=Gte(function(e,r){for(var n=r.length-1;n>=0&&e(r[n]);)n-=1;return Wte(n+1,1/0,r)}),qte=Vte,Xte=ya,CC=jt,Jte=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=CC.init,t.prototype["@@transducer/result"]=CC.result,t.prototype["@@transducer/step"]=function(e,r){return this.f(r)?this.xf["@@transducer/step"](e,r):Xte(e)},t}();function Yte(t){return function(e){return new Jte(t,e)}}var Zte=Yte,ere=q,tre=pt,rre=Zte,nre=ds,sre=ere(tre(["takeWhile"],rre,function(e,r){for(var n=0,s=r.length;n<s&&e(r[n]);)n+=1;return nre(0,n,r)})),are=sre,BC=jt,ire=function(){function t(e,r){this.xf=r,this.f=e}return t.prototype["@@transducer/init"]=BC.init,t.prototype["@@transducer/result"]=BC.result,t.prototype["@@transducer/step"]=function(e,r){return this.f(r),this.xf["@@transducer/step"](e,r)},t}();function ore(t){return function(e){return new ire(t,e)}}var lre=ore,Are=q,cre=pt,ure=lre,dre=Are(cre([],ure,function(e,r){return e(r),r})),hre=dre;function fre(t){return Object.prototype.toString.call(t)==="[object RegExp]"}var gre=fre,mre=b4,pre=q,yre=gre,vre=rA,xre=pre(function(e,r){if(!yre(e))throw new TypeError("test requires a value of type RegExp as its first argument; received "+vre(e));return mre(e).test(r)}),wre=xre,bre=q,_re=iE,Cre=bre(function(e,r){return _re("andThen",r),r.then(e)}),Bre=Cre,Sre=Nu,jre=Sre(0,"toLowerCase"),kre=jre,Ere=Se,Nre=Hr,Fre=Ere(function(e){var r=[];for(var n in e)Nre(n,e)&&(r[r.length]=[n,e[n]]);return r}),Tre=Fre,Ure=Se,Qre=Ure(function(e){var r=[];for(var n in e)r[r.length]=[n,e[n]];return r}),Ire=Qre,Pre=Nu,Dre=Pre(0,"toUpperCase"),Mre=Dre,Rre=ho,$re=E0,Ore=nr,Lre=Ore(4,function(e,r,n,s){return Rre(e(typeof r=="function"?$re(r):r),n,s)}),Hre=Lre,Kre=Se,zre=Kre(function(e){for(var r=0,n=[];r<e.length;){for(var s=e[r],a=0;a<s.length;)typeof n[a]>"u"&&(n[a]=[]),n[a].push(s[a]),a+=1;r+=1}return n}),Gre=zre,Wre=ke,Vre=Ns,qre=mE,Xre=Wre(function(e,r,n){var s=typeof e["fantasy-land/of"]=="function"?e["fantasy-land/of"]:typeof e.of=="function"?e.of:e,a={"fantasy-land/of":s};return typeof n["fantasy-land/traverse"]=="function"?n["fantasy-land/traverse"](a,r):typeof n.traverse=="function"?n.traverse(a,r):qre(a,Vre(r,n))}),Jre=Xre,SC=Se,jA=`	
\v\f\r \u2028\u2029\uFEFF`,Yre="",Zre=typeof String.prototype.trim=="function",ene=SC(!Zre||jA.trim()||!Yre.trim()?function(e){var r=new RegExp("^["+jA+"]["+jA+"]*"),n=new RegExp("["+jA+"]["+jA+"]*$");return e.replace(r,"").replace(n,"")}:function(e){return e.trim()}),tne=ene,rne=Es,nne=$n,sne=q,ane=sne(function(e,r){return rne(e.length,function(){try{return e.apply(this,arguments)}catch(n){return r.apply(this,nne([n],arguments))}})}),ine=ane,one=Se,lne=one(function(e){return function(){return e(Array.prototype.slice.call(arguments,0))}}),Ane=lne,cne=Se,une=T0,dne=cne(function(e){return une(1,e)}),hne=dne,fne=q,gne=nr,mne=fne(function(e,r){return gne(e,function(){for(var n=1,s=r,a=0,o;n<=e&&typeof s=="function";)o=n===e?arguments.length:a+s.length,s=s.apply(this,Array.prototype.slice.call(arguments,a,o)),n+=1,a=o;return s})}),pne=mne,yne=q,vne=yne(function(e,r){for(var n=e(r),s=[];n&&n.length;)s[s.length]=n[0],n=e(n[1]);return s}),xne=vne,wne=$n,bne=q,_ne=j4,Cne=vw,Bne=bne(_ne(Cne,wne)),Sne=Bne,jne=wu,jC=jt,kne=function(){function t(e,r){this.xf=r,this.pred=e,this.items=[]}return t.prototype["@@transducer/init"]=jC.init,t.prototype["@@transducer/result"]=jC.result,t.prototype["@@transducer/step"]=function(e,r){return jne(this.pred,r,this.items)?e:(this.items.push(r),this.xf["@@transducer/step"](e,r))},t}();function Ene(t){return function(e){return new kne(t,e)}}var Nne=Ene,Fne=q,Tne=pt,Une=wu,Qne=Nne,Ine=Fne(Tne([],Qne,function(t,e){for(var r=0,n=e.length,s=[],a;r<n;)a=e[r],Une(t,a,s)||(s[s.length]=a),r+=1;return s})),vE=Ine,Pne=$n,Dne=ke,Mne=vE,Rne=Dne(function(e,r,n){return Mne(e,Pne(r,n))}),$ne=Rne,One=ke,Lne=One(function(e,r,n){return e(n)?n:r(n)}),Hne=Lne,Kne=Q0,zne=w4,Gne=zne(Kne),Wne=Gne,Vne=ke,qne=Vne(function(e,r,n){for(var s=n;!e(s);)s=r(s);return s}),Xne=qne,Jne=q,Yne=Er,Zne=bu,ese=ow,tse=Jne(function(t,e){return t in e&&Yne(e[t])?Zne(function(r){return ese(t,r,e)},e[t]):[e]}),rse=tse,nse=Se,sse=nse(function(e){var r,n=[];for(r in e)n[n.length]=e[r];return n}),ase=sse,ise=q,ose=function(t){return{value:t,"fantasy-land/map":function(){return this}}},lse=ise(function(e,r){return e(ose)(r).value}),Ase=lse,cse=ke,use=cse(function(e,r,n){return e(n)?r(n):n}),dse=use,hse=q,fse=Hr,gse=hse(function(e,r){for(var n in e)if(fse(n,e)&&!e[n](r[n]))return!1;return!0}),xE=gse,mse=q,pse=Hr,yse=mse(function(e,r){for(var n in e)if(pse(n,e)&&e[n](r[n]))return!0;return!1}),vse=yse,xse=q,wse=On,bse=Ns,_se=xE,Cse=xse(function(e,r){return _se(bse(wse,e),r)}),Bse=Cse,Sse=q,jse=Eu,kse=j0,Ese=Sse(function(e,r){for(var n=new jse,s=0;s<e.length;s+=1)n.add(e[s]);return kse(n.has.bind(n),r)}),Nse=Ese,Fse=q,Tse=Fse(function(e,r){return!!(!e^!r)}),Use=Tse,Qse=q,Ise=Qse(function(e,r){for(var n=0,s=e.length,a,o=r.length,l=[];n<s;){for(a=0;a<o;)l[l.length]=[e[n],r[a]],a+=1;n+=1}return l}),Pse=Ise,Dse=q,Mse=Dse(function(e,r){for(var n=[],s=0,a=Math.min(e.length,r.length);s<a;)n[s]=[e[s],r[s]],s+=1;return n}),Rse=Mse,$se=q,Ose=$se(function(e,r){for(var n=0,s=Math.min(e.length,r.length),a={};n<s;)a[e[n]]=r[n],n+=1;return a}),Lse=Ose,Hse=ke,Kse=Hse(function(e,r,n){for(var s=[],a=0,o=Math.min(r.length,n.length);a<o;)s[a]=e(r[a],n[a]),a+=1;return s}),zse=Kse,Gse=nr,Wse=Se,Vse=Wse(function(e){return Gse(e.length,function(){var n=arguments;return function(){return e.apply(this,n)}})}),qse=Vse;T.exports={};T.exports.F=w7;T.exports.T=_7;T.exports.__=C7;T.exports.add=S0;T.exports.addIndex=H7;T.exports.addIndexRight=V7;T.exports.adjust=r4;T.exports.all=n4;T.exports.allPass=d$;T.exports.always=N0;T.exports.and=f4;T.exports.any=S$;T.exports.anyPass=U$;T.exports.ap=iw;T.exports.aperture=r8;T.exports.append=i8;T.exports.apply=g4;T.exports.applySpec=b8;T.exports.applyTo=B8;T.exports.ascend=k8;T.exports.assoc=Aw;T.exports.assocPath=lw;T.exports.binary=V8;T.exports.bind=h4;T.exports.both=AO;T.exports.call=dO;T.exports.chain=w4;T.exports.clamp=DO;T.exports.clone=C4;T.exports.collectBy=qO;T.exports.comparator=YO;T.exports.complement=sL;T.exports.compose=j4;T.exports.composeWith=KL;T.exports.concat=hw;T.exports.cond=ZL;T.exports.construct=cH;T.exports.constructN=N4;T.exports.converge=F4;T.exports.count=wH;T.exports.countBy=RH;T.exports.curry=fw;T.exports.curryN=nr;T.exports.dec=LH;T.exports.defaultTo=gw;T.exports.descend=WH;T.exports.difference=T4;T.exports.differenceWith=U4;T.exports.dissoc=p9;T.exports.dissocPath=I4;T.exports.divide=x9;T.exports.drop=P4;T.exports.dropLast=X9;T.exports.dropLastWhile=cK;T.exports.dropRepeats=BK;T.exports.dropRepeatsBy=QK;T.exports.dropRepeatsWith=yw;T.exports.dropWhile=HK;T.exports.either=JK;T.exports.empty=$4;T.exports.endsWith=fz;T.exports.eqBy=M4;T.exports.eqProps=yz;T.exports.equals=On;T.exports.evolve=_z;T.exports.filter=aw;T.exports.find=Uz;T.exports.findIndex=Hz;T.exports.findLast=Yz;T.exports.findLastIndex=oG;T.exports.flatten=uG;T.exports.flip=L4;T.exports.forEach=yG;T.exports.forEachObjIndexed=bG;T.exports.fromPairs=BG;T.exports.groupBy=NG;T.exports.groupWith=UG;T.exports.gt=PG;T.exports.gte=RG;T.exports.has=GG;T.exports.hasIn=XG;T.exports.hasPath=H4;T.exports.head=k4;T.exports.identical=JG;T.exports.identity=I0;T.exports.ifElse=tW;T.exports.inc=sW;T.exports.includes=lW;T.exports.indexBy=uW;T.exports.indexOf=mW;T.exports.init=vW;T.exports.innerJoin=CW;T.exports.insert=jW;T.exports.insertAll=NW;T.exports.intersection=VW;T.exports.intersperse=YW;T.exports.into=mV;T.exports.invert=wV;T.exports.invertObj=BV;T.exports.invoker=Nu;T.exports.is=V4;T.exports.isEmpty=DV;T.exports.isNil=Su;T.exports.isNotNil=OV;T.exports.join=KV;T.exports.juxt=q4;T.exports.keys=us;T.exports.keysIn=XV;T.exports.last=D4;T.exports.lastIndexOf=tq;T.exports.length=J4;T.exports.lens=M0;T.exports.lensIndex=yq;T.exports.lensPath=Fq;T.exports.lensProp=Dq;T.exports.lift=U0;T.exports.liftN=p4;T.exports.lt=$q;T.exports.lte=Hq;T.exports.map=Ns;T.exports.mapAccum=Gq;T.exports.mapAccumRight=qq;T.exports.mapObjIndexed=eX;T.exports.match=nX;T.exports.mathMod=iX;T.exports.max=Ao;T.exports.maxBy=cX;T.exports.mean=tE;T.exports.median=xX;T.exports.memoizeWith=BX;T.exports.mergeAll=EX;T.exports.mergeDeepLeft=MX;T.exports.mergeDeepRight=rE;T.exports.mergeDeepWith=zX;T.exports.mergeDeepWithKey=R0;T.exports.mergeLeft=qX;T.exports.mergeRight=ZX;T.exports.mergeWith=nJ;T.exports.mergeWithKey=ww;T.exports.min=nE;T.exports.minBy=AJ;T.exports.modify=CJ;T.exports.modifyPath=sE;T.exports.modulo=jJ;T.exports.move=NJ;T.exports.multiply=aE;T.exports.nAry=T0;T.exports.partialObject=PJ;T.exports.negate=RJ;T.exports.none=KJ;T.exports.not=B4;T.exports.nth=co;T.exports.nthArg=qJ;T.exports.o=YJ;T.exports.objOf=G4;T.exports.of=tY;T.exports.omit=sY;T.exports.on=oY;T.exports.once=uY;T.exports.or=R4;T.exports.otherwise=yY;T.exports.over=lE;T.exports.pair=_Y;T.exports.partial=NY;T.exports.partialRight=IY;T.exports.partition=$Y;T.exports.path=sA;T.exports.paths=Z4;T.exports.pathEq=zY;T.exports.pathOr=XY;T.exports.pathSatisfies=eZ;T.exports.pick=nZ;T.exports.pickAll=cE;T.exports.pickBy=lZ;T.exports.pipe=S4;T.exports.pipeWith=E4;T.exports.pluck=Bu;T.exports.prepend=uE;T.exports.product=gZ;T.exports.project=CZ;T.exports.promap=IZ;T.exports.prop=uo;T.exports.propEq=$Z;T.exports.propIs=zZ;T.exports.propOr=XZ;T.exports.propSatisfies=eee;T.exports.props=see;T.exports.range=oee;T.exports.reduce=va;T.exports.reduceBy=P0;T.exports.reduceRight=fE;T.exports.reduceWhile=gee;T.exports.reduced=vee;T.exports.reject=j0;T.exports.remove=Q4;T.exports.repeat=See;T.exports.replace=Eee;T.exports.reverse=dw;T.exports.scan=Ree;T.exports.sequence=mE;T.exports.set=Xee;T.exports.slice=ds;T.exports.sort=Zee;T.exports.sortBy=rte;T.exports.sortWith=ate;T.exports.split=lte;T.exports.splitAt=dte;T.exports.splitEvery=mte;T.exports.splitWhen=vte;T.exports.splitWhenever=bte;T.exports.startsWith=jte;T.exports.subtract=Nte;T.exports.sum=eE;T.exports.swap=Dte;T.exports.symmetricDifference=Ote;T.exports.symmetricDifferenceWith=zte;T.exports.tail=uw;T.exports.take=mw;T.exports.takeLast=O4;T.exports.takeLastWhile=qte;T.exports.takeWhile=are;T.exports.tap=hre;T.exports.test=wre;T.exports.andThen=Bre;T.exports.times=gE;T.exports.toLower=kre;T.exports.toPairs=Tre;T.exports.toPairsIn=Ire;T.exports.toString=rA;T.exports.toUpper=Mre;T.exports.transduce=Hre;T.exports.transpose=Gre;T.exports.traverse=Jre;T.exports.trim=tne;T.exports.tryCatch=ine;T.exports.type=tw;T.exports.unapply=Ane;T.exports.unary=hne;T.exports.uncurryN=pne;T.exports.unfold=xne;T.exports.union=Sne;T.exports.unionWith=$ne;T.exports.uniq=vw;T.exports.uniqBy=z4;T.exports.uniqWith=vE;T.exports.unless=Hne;T.exports.unnest=Wne;T.exports.until=Xne;T.exports.unwind=rse;T.exports.update=Y4;T.exports.useWith=dE;T.exports.values=m4;T.exports.valuesIn=ase;T.exports.view=Ase;T.exports.when=dse;T.exports.where=xE;T.exports.whereAny=vse;T.exports.whereEq=Bse;T.exports.without=Nse;T.exports.xor=Use;T.exports.xprod=Pse;T.exports.zip=Rse;T.exports.zipObj=Lse;T.exports.zipWith=zse;T.exports.thunkify=qse;var Fu=T.exports,wE={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.curried=void 0;const e=r=>n=>{if(n.length===0)return[[],[]];const s=[];n.forEach((l,A)=>{s.push([r[A],A,n[A]])}),s.sort(([l],[A])=>l-A);const a=[],o=[];return s.forEach(([l,A,u])=>{o.push(A),a.push(u)}),[a,o]};t.curried=e,t.default=(r,n)=>(0,t.curried)(r)(n)})(wE);var bE={},$0={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.utilSumQ=xt.utilA=xt.sum=xt.score=xt.rankings=xt.ladderPairs=xt.gamma=xt.default=void 0;var Xse=Fu,Jse=Yse(it);function Yse(t){return t&&t.__esModule?t:{default:t}}const Wc=(t,e)=>t+e;xt.sum=Wc;const Zse=(t,e)=>t<e?0:t>e?1:.5;xt.score=Zse;const _E=(t,e=[])=>{const r=t.map((a,o)=>e[o]||o),n=new Array(t.length);let s=0;for(let a=0;a<r.length;a+=1)a>0&&r[a-1]<r[a]&&(s=a),n[a]=s;return n};xt.rankings=_E;const eae=t=>e=>{const r=_E(e,t.rank);return e.map((n,s)=>[n.map(({mu:a})=>a).reduce(Wc,0),n.map(({sigma:a})=>a*a).reduce(Wc,0),n,r[s]])},tae=t=>{const e=t.length,r=[void 0,...t.slice(0,e-1)],n=[...t.slice(1),void 0];return(0,Xse.zip)(r,n).map(([s,a])=>s!==void 0&&a!==void 0?[s,a]:s!==void 0&&a===void 0?[s]:s===void 0&&a!==void 0?[a]:[])};xt.ladderPairs=tae;const rae=t=>{const{BETASQ:e}=(0,Jse.default)(t);return r=>Math.sqrt(r.map(([n,s,a,o])=>s+e).reduce(Wc,0))},nae=(t,e)=>t.map(([r,n,s,a])=>t.filter(([o,l,A,u])=>u>=a).map(([o,l,A,u])=>Math.exp(o/e)).reduce(Wc,0));xt.utilSumQ=nae;const sae=t=>t.map(([e,r,n,s])=>t.filter(([a,o,l,A])=>s===A).length);xt.utilA=sae;const CE=t=>t.gamma??((e,r,n,s,a,o)=>Math.sqrt(s)/e);xt.gamma=CE;var aae=t=>({utilC:rae(t),teamRating:eae(t),gamma:CE(t)});xt.default=aae;Object.defineProperty($0,"__esModule",{value:!0});$0.default=void 0;var mm=lae(xt),iae=oae(it);function oae(t){return t&&t.__esModule?t:{default:t}}function BE(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(BE=function(n){return n?r:e})(t)}function lae(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=BE(e);if(r&&r.has(t))return r.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=s?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}const Aae=(t,e={})=>{const{EPSILON:r}=(0,iae.default)(e),{utilC:n,teamRating:s,gamma:a}=(0,mm.default)(e),o=s(t),l=n(o),A=(0,mm.utilSumQ)(o,l),u=(0,mm.utilA)(o);return o.map((h,c)=>{const[d,f,g,y]=h,v=Math.exp(d/l),[m,p]=o.filter(([b,S,E,C])=>C<=y).reduce(([b,S],[E],C)=>{const N=v/A[C];return[b+(c===C?1-N:-N)/u[C],S+N*(1-N)/u[C]]},[0,0]),x=a(l,o.length,...h),w=m*(f/l),_=x*p*(f/l**2);return g.map(({mu:b,sigma:S})=>({mu:b+S**2/f*w,sigma:S*Math.sqrt(Math.max(1-S**2/f*_,r))}))})};var cae=Aae;$0.default=cae;var O0={};Object.defineProperty(O0,"__esModule",{value:!0});O0.default=void 0;var kC=hae(xt),uae=dae(it);function dae(t){return t&&t.__esModule?t:{default:t}}function SE(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(SE=function(n){return n?r:e})(t)}function hae(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=SE(e);if(r&&r.has(t))return r.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=s?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}const fae=(t,e={})=>{const{TWOBETASQ:r,EPSILON:n}=(0,uae.default)(e),{teamRating:s,gamma:a}=(0,kC.default)(e),o=s(t);return o.map((l,A)=>{const[u,h,c,d]=l,[f,g]=o.filter((y,v)=>v!==A).reduce(([y,v],[m,p,x,w])=>{const _=Math.sqrt(h+p+r),b=1/(1+Math.exp((m-u)/_)),S=h/_,E=a(_,o.length,...l);return[y+S*((0,kC.score)(w,d)-b),v+E*S/_*b*(1-b)]},[0,0]);return c.map(({mu:y,sigma:v})=>{const m=v*v;return{mu:y+m/h*f,sigma:v*Math.sqrt(Math.max(1-m/h*g,n))}})})};var gae=fae;O0.default=gae;var L0={};Object.defineProperty(L0,"__esModule",{value:!0});L0.default=void 0;var mae=Fu,pm=vae(xt),pae=yae(it);function yae(t){return t&&t.__esModule?t:{default:t}}function jE(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(jE=function(n){return n?r:e})(t)}function vae(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=jE(e);if(r&&r.has(t))return r.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=s?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}const xae=(t,e={})=>{const{TWOBETASQ:r,EPSILON:n}=(0,pae.default)(e),{teamRating:s,gamma:a}=(0,pm.default)(e),o=s(t),l=(0,pm.ladderPairs)(o);return(0,mae.zip)(o,l).map(([A,u])=>{const[h,c,d,f]=A,[g,y]=u.reduce(([v,m],[p,x,w,_])=>{const b=Math.sqrt(c+x+r),S=1/(1+Math.exp((p-h)/b)),E=c/b,C=a(b,o.length,...A);return[v+E*((0,pm.score)(_,f)-S),m+C*E/b*S*(1-S)]},[0,0]);return d.map(({mu:v,sigma:m})=>{const p=m*m;return{mu:v+p/c*g,sigma:m*Math.sqrt(Math.max(1-p/c*y,n))}})})};var wae=xae;L0.default=wae;var H0={},Gt={},kE={exports:{}},EE={exports:{}};(function(t,e){(function(r){const n=Math.PI*2;function s(a,o,l=null){var A,u;l?(A=l(),u=l()):(A=Math.random(),u=Math.random());var h=Math.sqrt(-2*Math.log(A))*Math.cos(n*u);return h*o+a}r(s)})(function(r){t.exports=r})})(EE);var bae=EE.exports;(function(t,e){(function(r){const n=bae;var s=function(u){var h=Math.abs(u),c=1/(1+h/2),d=c*Math.exp(-h*h-1.26551223+c*(1.00002368+c*(.37409196+c*(.09678418+c*(-.18628806+c*(.27886807+c*(-1.13520398+c*(1.48851587+c*(-.82215223+c*.17087277)))))))));return u>=0?d:2-d},a=function(u){if(u>=2)return-100;if(u<=0)return 100;for(var h=u<1?u:2-u,c=Math.sqrt(-2*Math.log(h/2)),d=-.70711*((2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c),f=0;f<2;f++){var g=s(d)-h;d+=g/(1.1283791670955126*Math.exp(-(d*d))-d*g)}return u<1?d:-d},o=function(u,h){if(h<=0)throw new Error("Variance must be > 0 (but was "+h+")");this.mean=u,this.variance=h,this.standardDeviation=Math.sqrt(h)};o.prototype.pdf=function(u){var h=this.standardDeviation*Math.sqrt(2*Math.PI),c=Math.exp(-Math.pow(u-this.mean,2)/(2*this.variance));return c/h},o.prototype.cdf=function(u){return .5*s(-(u-this.mean)/(this.standardDeviation*Math.sqrt(2)))},o.prototype.ppf=function(u){return this.mean-this.standardDeviation*Math.sqrt(2)*a(2*u)},o.prototype.mul=function(u){if(typeof u=="number")return this.scale(u);var h=1/this.variance,c=1/u.variance;return A(h+c,h*this.mean+c*u.mean)},o.prototype.div=function(u){if(typeof u=="number")return this.scale(1/u);var h=1/this.variance,c=1/u.variance;return A(h-c,h*this.mean-c*u.mean)},o.prototype.add=function(u){return l(this.mean+u.mean,this.variance+u.variance)},o.prototype.sub=function(u){return l(this.mean-u.mean,this.variance+u.variance)},o.prototype.scale=function(u){return l(this.mean*u,this.variance*u*u)},o.prototype.random=function(u,h=null){let c=this.mean,d=this.standardDeviation;return Array(u).fill(0).map(()=>n(c,d,h))};var l=function(u,h){return new o(u,h)},A=function(u,h){return l(h/u,1/u)};r(l)})(function(r){t.exports=r})})(kE);var _ae=kE.exports;Object.defineProperty(Gt,"__esModule",{value:!0});Gt.wt=Gt.w=Gt.vt=Gt.v=Gt.phiMinor=Gt.phiMajorInverse=Gt.phiMajor=void 0;var Cae=Bae(_ae);function Bae(t){return t&&t.__esModule?t:{default:t}}const bw=(0,Cae.default)(0,1),ro=t=>bw.cdf(t);Gt.phiMajor=ro;const Sae=t=>bw.ppf(t);Gt.phiMajorInverse=Sae;const Ol=t=>bw.pdf(t);Gt.phiMinor=Ol;const my=(t,e)=>{const r=t-e,n=ro(r);return n<Number.EPSILON?-r:Ol(r)/n};Gt.v=my;const jae=(t,e)=>{const r=t-e;return ro(r)<Number.EPSILON?t<0?1:0:my(t,e)*(my(t,e)+r)};Gt.w=jae;const py=(t,e)=>{const r=Math.abs(t),n=ro(e-r)-ro(-e-r);if(n<1e-5)return t<0?-t-e:-t+e;const s=Ol(-e-r)-Ol(e-r);return(t<0?-s:s)/n};Gt.vt=py;const kae=(t,e)=>{const r=Math.abs(t),n=ro(e-r)-ro(-e-r);return n<Number.EPSILON?1:((e-r)*Ol(e-r)+(e+r)*Ol(-e-r))/n+py(t,e)*py(t,e)};Gt.wt=kae;Object.defineProperty(H0,"__esModule",{value:!0});H0.default=void 0;var Eae=NE(xt),Nae=NE(it),pd=Gt;function NE(t){return t&&t.__esModule?t:{default:t}}const Fae=(t,e={})=>{const{TWOBETASQ:r,EPSILON:n}=(0,Nae.default)(e),{teamRating:s,gamma:a}=(0,Eae.default)(e),o=s(t);return o.map((l,A)=>{const[u,h,c,d]=l,[f,g]=o.filter((y,v)=>A!==v).reduce(([y,v],[m,p,x,w])=>{const _=Math.sqrt(h+p+r),b=(u-m)/_,S=h/_,E=a(_,o.length,...l);if(w===d)return[y+S*(0,pd.vt)(b,n/_),v+E*S/_*(0,pd.wt)(b,n/_)];const C=w>d?1:-1;return[y+C*S*(0,pd.v)(C*b,n/_),v+E*S/_*(0,pd.w)(C*b,n/_)]},[0,0]);return c.map(({mu:y,sigma:v})=>{const m=v*v;return{mu:y+m/h*f,sigma:v*Math.sqrt(Math.max(1-m/h*g,n))}})})};var Tae=Fae;H0.default=Tae;var K0={};Object.defineProperty(K0,"__esModule",{value:!0});K0.default=void 0;var Uae=Fu,EC=Pae(xt),yd=Gt,Qae=Iae(it);function Iae(t){return t&&t.__esModule?t:{default:t}}function FE(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(FE=function(n){return n?r:e})(t)}function Pae(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=FE(e);if(r&&r.has(t))return r.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=s?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}const Dae=(t,e={})=>{const{TWOBETASQ:r,EPSILON:n}=(0,Qae.default)(e),{teamRating:s,gamma:a}=(0,EC.default)(e),o=s(t),l=(0,EC.ladderPairs)(o);return(0,Uae.zip)(o,l).map(([A,u])=>{const[h,c,d,f]=A,[g,y]=u.reduce(([v,m],[p,x,w,_])=>{const b=2*Math.sqrt(c+x+r),S=(h-p)/b,E=c/b,C=a(b,o.length,...A);if(_===f)return[v+E*(0,yd.vt)(S,n/b),m+C*E/b*(0,yd.wt)(S,n/b)];const N=_>f?1:-1;return[v+N*E*(0,yd.v)(N*S,n/b),m+C*E/b*(0,yd.w)(N*S,n/b)]},[0,0]);return d.map(({mu:v,sigma:m})=>{const p=m*m;return{mu:v+p/c*g,sigma:m*Math.sqrt(Math.max(1-p/c*y,n))}})})};var Mae=Dae;K0.default=Mae;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"bradleyTerryFull",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"bradleyTerryPart",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"plackettLuce",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"thurstoneMostellerFull",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"thurstoneMostellerPart",{enumerable:!0,get:function(){return a.default}});var e=o($0),r=o(O0),n=o(L0),s=o(H0),a=o(K0);function o(l){return l&&l.__esModule?l:{default:l}}})(bE);Object.defineProperty(C0,"__esModule",{value:!0});C0.default=void 0;var ym=Fu,NC=$ae(wE),Rae=bE;function $ae(t){return t&&t.__esModule?t:{default:t}}const Oae=(t,e={})=>{var u;const r=e.model??Rae.plackettLuce;let n=t;if(e.tau){const h=e.tau*e.tau;n=t.map(c=>c.map(d=>({...d,sigma:Math.sqrt(d.sigma*d.sigma+h)})))}const s=e.rank??((u=e.score)==null?void 0:u.map(h=>-h))??(0,ym.range)(1,t.length+1),[a,o]=(0,NC.default)(s,n),l=r(a,{...e,rank:(0,ym.sortBy)(ym.identity,s)});let[A]=(0,NC.default)(o,l);return e.tau&&e.preventSigmaIncrease&&(A=A.map((h,c)=>h.map((d,f)=>({...d,sigma:Math.min(d.sigma,t[c][f].sigma)})))),A};var Lae=Oae;C0.default=Lae;var z0={};Object.defineProperty(z0,"__esModule",{value:!0});z0.default=void 0;var Hae=Kae(it);function Kae(t){return t&&t.__esModule?t:{default:t}}const zae=(t,e={})=>{const{sigma:r,mu:n}=t,{Z:s}=(0,Hae.default)(e);return n-s*r};var Gae=zae;z0.default=Gae;var G0={};Object.defineProperty(G0,"__esModule",{value:!0});G0.default=void 0;var Wae=Xae(it),FC=qae(xt),Vae=Gt;function TE(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(TE=function(n){return n?r:e})(t)}function qae(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=TE(e);if(r&&r.has(t))return r.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=s?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function Xae(t){return t&&t.__esModule?t:{default:t}}const Jae=(t,e={})=>{const{teamRating:r}=(0,FC.default)(e),{BETASQ:n}=(0,Wae.default)(e),s=r(t),a=t.length,o=a*(a-1)/2;return s.map(([l,A],u)=>s.filter((h,c)=>u!==c).map(([h,c])=>(0,Vae.phiMajor)((l-h)/Math.sqrt(a*n+A**2+c**2))).reduce(FC.sum,0)/o)};var Yae=Jae;G0.default=Yae;var W0={};Object.defineProperty(W0,"__esModule",{value:!0});W0.default=void 0;var Zae=Fu,eie=rie(it),TC=tie(xt),vm=Gt;function UE(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,r=new WeakMap;return(UE=function(n){return n?r:e})(t)}function tie(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var r=UE(e);if(r&&r.has(t))return r.get(t);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(a!=="default"&&Object.prototype.hasOwnProperty.call(t,a)){var o=s?Object.getOwnPropertyDescriptor(t,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=t[a]}return n.default=t,r&&r.set(t,n),n}function rie(t){return t&&t.__esModule?t:{default:t}}const nie=(t,e={})=>{const{teamRating:r}=(0,TC.default)(e),{BETASQ:n,BETA:s}=(0,eie.default)(e),a=t.length;if(a===0)return;if(a===1)return 1;const o=a*(a-1)/(a>2?1:2),l=r(t),A=Math.sqrt((0,Zae.flatten)(t).length)*s*(0,vm.phiMajorInverse)((1+1/a)/2);return Math.abs(l.map(([u,h],c)=>l.filter((d,f)=>c!==f).map(([d,f])=>{const g=Math.sqrt(a*n+h**2+f**2);return(0,vm.phiMajor)((A-u+d)/g)-(0,vm.phiMajor)((u-d-A)/g)})).flat().reduce(TC.sum,0))/o};var sie=nie;W0.default=sie;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ordinal",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"predictDraw",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"predictWin",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"rate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"rating",{enumerable:!0,get:function(){return e.default}});var e=o(_0),r=o(C0),n=o(z0),s=o(G0),a=o(W0);function o(l){return l&&l.__esModule?l:{default:l}}})(st);var QE={};Object.defineProperty(QE,"__esModule",{value:!0});var UC=function(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r},aie=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=1),this.mean=e,this.standardDeviation=r}return t.prototype.zScore=function(e){return(e-this.mean)/this.standardDeviation},t.prototype.pdf=function(e){var r=Math.pow(Math.E,-(Math.pow(e-this.mean,2)/(2*Math.pow(this.standardDeviation,2)))),n=this.standardDeviation*Math.sqrt(2*Math.PI);return r/n},t.prototype.cdf=function(e){var r=this.zScore(e);if(r=UC(r,2),r===0)return .5;if(r<=-3.5)return 0;if(r>=3.5)return 1;var n=t.zTable,s=Math.abs(r),a=Math.floor(s*10)/10,o=UC(Math.round(s*100)%10/100,2),l=n.z.indexOf(o),A=n[a][l];return r<0?1-A:A},t.prototype.probabilityBetween=function(e,r){return Math.abs(this.cdf(e)-this.cdf(r))},Object.defineProperty(t,"zTable",{get:function(){return{z:[0,.01,.02,.03,.04,.05,.06,.07,.08,.09],0:[.5,.504,.508,.512,.516,.5199,.5239,.5279,.5319,.5359],"0.1":[.5398,.5438,.5478,.5517,.5557,.5596,.5636,.5675,.5714,.5753],"0.2":[.5793,.5832,.5871,.591,.5948,.5987,.6026,.6064,.6103,.6141],"0.3":[.6179,.6217,.6255,.6293,.6331,.6368,.6406,.6443,.648,.6517],"0.4":[.6554,.6591,.6628,.6664,.67,.6736,.6772,.6808,.6844,.6879],"0.5":[.6915,.695,.6985,.7019,.7054,.7088,.7123,.7157,.719,.7224],"0.6":[.7257,.7291,.7324,.7357,.7389,.7422,.7454,.7486,.7517,.7549],"0.7":[.758,.7611,.7642,.7673,.7704,.7734,.7764,.7794,.7823,.7852],"0.8":[.7881,.791,.7939,.7967,.7995,.8023,.8051,.8078,.8106,.8133],"0.9":[.8159,.8186,.8212,.8238,.8264,.8289,.8315,.834,.8365,.8389],1:[.8413,.8438,.8461,.8485,.8508,.8531,.8554,.8577,.8599,.8621],"1.1":[.8643,.8665,.8686,.8708,.8729,.8749,.877,.879,.881,.883],"1.2":[.8849,.8869,.8888,.8907,.8925,.8944,.8962,.898,.8997,.9015],"1.3":[.9032,.9049,.9066,.9082,.9099,.9115,.9131,.9147,.9162,.9177],"1.4":[.9192,.9207,.9222,.9236,.9251,.9265,.9279,.9292,.9306,.9319],"1.5":[.9332,.9345,.9357,.937,.9382,.9394,.9406,.9418,.9429,.9441],"1.6":[.9452,.9463,.9474,.9484,.9495,.9505,.9515,.9525,.9535,.9545],"1.7":[.9554,.9564,.9573,.9582,.9591,.9599,.9608,.9616,.9625,.9633],"1.8":[.9641,.9649,.9656,.9664,.9671,.9678,.9686,.9693,.9699,.9706],"1.9":[.9713,.9719,.9726,.9732,.9738,.9744,.975,.9756,.9761,.9767],2:[.9772,.9778,.9783,.9788,.9793,.9798,.9803,.9808,.9812,.9817],"2.1":[.9821,.9826,.983,.9834,.9838,.9842,.9846,.985,.9854,.9857],"2.2":[.9861,.9864,.9868,.9871,.9875,.9878,.9881,.9884,.9887,.989],"2.3":[.9893,.9896,.9898,.9901,.9904,.9906,.9909,.9911,.9913,.9916],"2.4":[.9918,.992,.9922,.9925,.9927,.9929,.9931,.9932,.9934,.9936],"2.5":[.9938,.994,.9941,.9943,.9945,.9946,.9948,.9949,.9951,.9952],"2.6":[.9953,.9955,.9956,.9957,.9959,.996,.9961,.9962,.9963,.9964],"2.7":[.9965,.9966,.9967,.9968,.9969,.997,.9971,.9972,.9973,.9974],"2.8":[.9974,.9975,.9976,.9977,.9977,.9978,.9979,.9979,.998,.9981],"2.9":[.9981,.9982,.9982,.9983,.9984,.9984,.9985,.9985,.9986,.9986],3:[.9987,.9987,.9987,.9988,.9988,.9989,.9989,.9989,.999,.999],"3.1":[.999,.9991,.9991,.9991,.9992,.9992,.9992,.9992,.9993,.9993],"3.2":[.9993,.9993,.9994,.9994,.9994,.9994,.9994,.9995,.9995,.9995],"3.3":[.9995,.9995,.9995,.9996,.9996,.9996,.9996,.9996,.9996,.9997],"3.4":[.9997,.9997,.9997,.9997,.9997,.9997,.9997,.9997,.9997,.9998]}},enumerable:!1,configurable:!0}),t}(),QC=QE.default=aie;function V0(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function iie(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(c){o(c)}}function A(h){try{u(n.throw(h))}catch(c){o(c)}}function u(h){h.done?a(h.value):s(h.value).then(l,A)}u((n=n.apply(t,e||[])).next())})}const oie=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class _w extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class lie extends _w{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class IC extends _w{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class PC extends _w{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var yy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(yy||(yy={}));class Aie{constructor(e,{headers:r={},customFetch:n,region:s=yy.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=oie(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return iie(this,arguments,void 0,function*(r,n={}){var s;let a,o;try{const{headers:l,method:A,body:u,signal:h,timeout:c}=n;let d={},{region:f}=n;f||(f=this.region);const g=new URL(`${this.url}/${r}`);f&&f!=="any"&&(d["x-region"]=f,g.searchParams.set("forceFunctionRegion",f));let y;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(d["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(d["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let v=h;c&&(o=new AbortController,a=setTimeout(()=>o.abort(),c),h?(v=o.signal,h.addEventListener("abort",()=>o.abort())):v=o.signal);const m=yield this.fetch(g.toString(),{method:A||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),l),body:y,signal:v}).catch(_=>{throw new lie(_)}),p=m.headers.get("x-relay-error");if(p&&p==="true")throw new IC(m);if(!m.ok)throw new PC(m);let x=((s=m.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return x==="application/json"?w=yield m.json():x==="application/octet-stream"||x==="application/pdf"?w=yield m.blob():x==="text/event-stream"?w=m:x==="multipart/form-data"?w=yield m.formData():w=yield m.text(),{data:w,error:null,response:m}}catch(l){return{data:null,error:l,response:l instanceof PC||l instanceof IC?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var cie=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},uie=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let o=null,l=null,A=null,u=a.status,h=a.statusText;if(a.ok){var c,d;if(r.method!=="HEAD"){var f;const m=await a.text();m===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((f=r.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?l=m:l=JSON.parse(m))}const y=(c=r.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),v=(d=a.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");y&&v&&v.length>1&&(A=parseInt(v[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,A=null,u=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var g;const y=await a.text();try{o=JSON.parse(y),Array.isArray(o)&&a.status===404&&(l=[],o=null,u=200,h="OK")}catch{a.status===404&&y===""?(u=204,h="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(g=o.details)===null||g===void 0)&&g.includes("0 rows"))&&(o=null,u=200,h="OK"),o&&r.shouldThrowOnError)throw new cie(o)}return{error:o,data:l,count:A,status:u,statusText:h}});return this.shouldThrowOnError||(s=s.catch(a=>{var o;let l="";const A=a==null?void 0:a.cause;if(A){var u,h,c,d;const g=(u=A==null?void 0:A.message)!==null&&u!==void 0?u:"",y=(h=A==null?void 0:A.code)!==null&&h!==void 0?h:"";l=`${(c=a==null?void 0:a.name)!==null&&c!==void 0?c:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(d=A==null?void 0:A.name)!==null&&d!==void 0?d:"Error"}: ${g}`,y&&(l+=` (${y})`),A!=null&&A.stack&&(l+=`
${A.stack}`)}else{var f;l=(f=a==null?void 0:a.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},die=class extends uie{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(a,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var o;const l=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),A=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${A}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const DC=new RegExp("[,()]");var Zo=class extends die{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&DC.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&DC.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${a}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},hie=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}select(t,e){const{head:r=!1,count:n}=e??{},s=r?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Zo({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Zo({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((A,u)=>A.concat(Object.keys(u)),[]);if(l.length>0){const A=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",A.join(","))}}return new Zo({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:e}={}){var r;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Zo({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Zo({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},fie=class IE{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new hie(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new IE(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:a}={}){var o;let l;const A=new URL(`${this.url}/rpc/${e}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{A.searchParams.append(c,d)})):(l="POST",u=r);const h=new Headers(this.headers);return a&&h.set("Prefer",`count=${a}`),new Zo({method:l,url:A,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class gie{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const mie="2.89.0",pie=`realtime-js/${mie}`,PE="1.0.0",yie="2.0.0",MC=PE,vy=1e4,vie=1e3,xie=100;var Ta;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ta||(Ta={}));var Kt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Kt||(Kt={}));var Zn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Zn||(Zn={}));var xy;(function(t){t.websocket="websocket"})(xy||(xy={}));var Ni;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ni||(Ni={}));class wie{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var s,a;const o=e.topic,l=(s=e.ref)!==null&&s!==void 0?s:"",A=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},c=Object.keys(h).length===0?"":JSON.stringify(h);if(A.length>255)throw new Error(`joinRef length ${A.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`metadata length ${c.length} exceeds maximum of 255`);const d=this.USER_BROADCAST_PUSH_META_LENGTH+A.length+l.length+o.length+u.length+c.length,f=new ArrayBuffer(this.HEADER_LENGTH+d);let g=new DataView(f),y=0;g.setUint8(y++,this.KINDS.userBroadcastPush),g.setUint8(y++,A.length),g.setUint8(y++,l.length),g.setUint8(y++,o.length),g.setUint8(y++,u.length),g.setUint8(y++,c.length),g.setUint8(y++,r),Array.from(A,m=>g.setUint8(y++,m.charCodeAt(0))),Array.from(l,m=>g.setUint8(y++,m.charCodeAt(0))),Array.from(o,m=>g.setUint8(y++,m.charCodeAt(0))),Array.from(u,m=>g.setUint8(y++,m.charCodeAt(0))),Array.from(c,m=>g.setUint8(y++,m.charCodeAt(0)));var v=new Uint8Array(f.byteLength+n.byteLength);return v.set(new Uint8Array(f),0),v.set(new Uint8Array(n),f.byteLength),v.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,a,o,l,A]=n;return r({join_ref:s,ref:a,topic:o,event:l,payload:A})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),a=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let A=this.HEADER_LENGTH+4;const u=n.decode(e.slice(A,A+s));A=A+s;const h=n.decode(e.slice(A,A+a));A=A+a;const c=n.decode(e.slice(A,A+o));A=A+o;const d=e.slice(A,e.byteLength),f=l===this.JSON_ENCODING?JSON.parse(n.decode(d)):d,g={type:this.BROADCAST_EVENT,event:h,payload:f};return o>0&&(g.meta=JSON.parse(c)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:g}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}let DE=class{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ot||(ot={}));const RC=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((a,o)=>(a[o]=bie(o,t,e,s),a),{}):{}},bie=(t,e,r,n)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,o=r[t];return a&&!n.includes(a)?ME(a,o):wy(o)},ME=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return Sie(e,r)}switch(t){case ot.bool:return _ie(e);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return Cie(e);case ot.json:case ot.jsonb:return Bie(e);case ot.timestamp:return jie(e);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return wy(e);default:return wy(e)}},wy=t=>t,_ie=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Cie=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Bie=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},Sie=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>ME(e,l))}return t},jie=t=>typeof t=="string"?t.replace(" ","T"):t,RE=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class xm{constructor(e,r,n={},s=vy){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $C;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})($C||($C={}));class yc{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yc.syncState(this.state,s,a,o),this.pendingDiffs.forEach(A=>{this.state=yc.syncDiff(this.state,A,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=yc.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const a=this.cloneDeep(e),o=this.transformState(r),l={},A={};return this.map(a,(u,h)=>{o[u]||(A[u]=h)}),this.map(o,(u,h)=>{const c=a[u];if(c){const d=h.map(v=>v.presence_ref),f=c.map(v=>v.presence_ref),g=h.filter(v=>f.indexOf(v.presence_ref)<0),y=c.filter(v=>d.indexOf(v.presence_ref)<0);g.length>0&&(l[u]=g),y.length>0&&(A[u]=y)}else l[u]=h}),this.syncDiff(a,{joins:l,leaves:A},n,s)}static syncDiff(e,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,A)=>{var u;const h=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(A),h.length>0){const c=e[l].map(f=>f.presence_ref),d=h.filter(f=>c.indexOf(f.presence_ref)<0);e[l].unshift(...d)}n(l,h,A)}),this.map(o,(l,A)=>{let u=e[l];if(!u)return;const h=A.map(c=>c.presence_ref);u=u.filter(c=>h.indexOf(c.presence_ref)<0),e[l]=u,s(l,u,A),u.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var OC;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(OC||(OC={}));var vc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(vc||(vc={}));var Ws;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ws||(Ws={}));class yl{constructor(e,r={config:{}},n){var s,a;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Kt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xm(this,Zn.join,this.params,this.timeout),this.rejoinTimer=new DE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Kt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Kt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Kt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new yc(this),this.broadcastEndpointURL=RE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Kt.closed){const{config:{broadcast:o,presence:l,private:A}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[vc.PRESENCE]&&this.bindings[vc.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,c={},d={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:A};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Ws.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Ws.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){e==null||e(Ws.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,m=[];for(let p=0;p<v;p++){const x=y[p],{filter:{event:w,schema:_,table:b,filter:S}}=x,E=f&&f[p];if(E&&E.event===w&&yl.isFilterValueEqual(E.schema,_)&&yl.isFilterValueEqual(E.table,b)&&yl.isFilterValueEqual(E.filter,S))m.push(Object.assign(Object.assign({},x),{id:E.id}));else{this.unsubscribe(),this.state=Kt.errored,e==null||e(Ws.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,e&&e(Ws.SUBSCRIBED);return}}).receive("error",f=>{this.state=Kt.errored,e==null||e(Ws.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ws.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Kt.joined&&e===vc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let A=l.statusText;try{const u=await l.json();A=u.error||u.message||A}catch{}return Promise.reject(new Error(A))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const A={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,A;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((A=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||A===void 0)&&A.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Kt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new xm(this,Zn.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Kt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new xm(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>xie){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:A,leave:u,join:h}=Zn;if(n&&[l,A,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let d=this._onMessage(o,r,n);if(r&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var g,y,v;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(y=f.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(d,n)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var g,y,v,m,p,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const w=f.id,_=(g=f.filter)===null||g===void 0?void 0:g.event;return w&&((y=r.ids)===null||y===void 0?void 0:y.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const w=(p=(m=f==null?void 0:f.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return w==="*"||w===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof d=="object"&&"ids"in d){const g=d.data,{schema:y,table:v,commit_timestamp:m,type:p,errors:x}=g;d=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:m,eventType:p,new:{},old:{},errors:x}),this._getPayloadRecords(g))}f.callback(d,n)})}_isClosed(){return this.state===Kt.closed}_isJoined(){return this.state===Kt.joined}_isJoining(){return this.state===Kt.joining}_isLeaving(){return this.state===Kt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&yl.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Zn.close,{},e)}_onError(e){this._on(Zn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Kt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=RC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=RC(e.columns,e.old_record)),r}}const wm=()=>{},vd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},kie=[1e3,2e3,5e3,1e4],Eie=1e4,Nie=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Fie{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vy,this.transport=null,this.heartbeatIntervalMs=vd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wm,this.ref=0,this.reconnectTimer=null,this.vsn=MC,this.logger=wm,this.conn=null,this.sendBuffer=[],this.serializer=new wie,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${xy.websocket}`,this.httpEndpoint=RE(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gie.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ta.connecting:return Ni.Connecting;case Ta.open:return Ni.Open;case Ta.closing:return Ni.Closing;default:return Ni.Closed}}isConnected(){return this.connectionState()===Ni.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new yl(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:n,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var A;(A=this.conn)===null||A===void 0||A.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(vie,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},vd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:o}=r,l=o?`(${o})`:"",A=a.status||"";this.log("receive",`${A} ${n} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ta.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ta.open||this.conn.readyState===Ta.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Zn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Nie],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const a={access_token:r,version:pie};r&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(Zn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new DE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,a,o,l,A,u,h,c,d,f;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:vy,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:vd.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:wm,this.vsn=(A=e==null?void 0:e.vsn)!==null&&A!==void 0?A:MC,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:g=>kie[g-1]||Eie,this.vsn){case PE:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(g,y)=>y(JSON.stringify(g)),this.decode=(c=e==null?void 0:e.decode)!==null&&c!==void 0?c:(g,y)=>y(JSON.parse(g));break;case yie:this.encode=(d=e==null?void 0:e.encode)!==null&&d!==void 0?d:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Vc=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Tie(t,e,r){const n=new URL(e,t);if(r)for(const[s,a]of Object.entries(r))a!==void 0&&n.searchParams.set(s,a);return n.toString()}async function Uie(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Qie(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:a,headers:o}){const l=Tie(t.baseUrl,n,s),A=await Uie(t.auth),u=await e(l,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...A,...o},body:a?JSON.stringify(a):void 0}),h=await u.text(),c=(u.headers.get("content-type")||"").includes("application/json"),d=c&&h?JSON.parse(h):h;if(!u.ok){const f=c?d:void 0,g=f==null?void 0:f.error;throw new Vc((g==null?void 0:g.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:g==null?void 0:g.type,icebergCode:g==null?void 0:g.code,details:f})}return{status:u.status,headers:u.headers,data:d}}}}function xd(t){return t.join("")}var Iie=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:xd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xd(t.namespace)}`}),!0}catch(e){if(e instanceof Vc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Vc&&r.status===409)return;throw r}}};function Qo(t){return t.join("")}var Pie=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Qo(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Qo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Qo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Qo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Vc&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Vc&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Die=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Qie({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new Iie(this.client,e),this.tableOps=new Pie(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},q0=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Mie=class extends q0{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},by=class extends q0{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Cw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Rie=()=>Response,_y=t=>{if(Array.isArray(t))return t.map(r=>_y(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=_y(n)}),e},$ie=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Oie=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function qc(t){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(t)}function Lie(t,e){if(qc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(qc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hie(t){var e=Lie(t,"string");return qc(e)=="symbol"?e:e+""}function Kie(t,e,r){return(e=Hie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Te(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LC(Object(r),!0).forEach(function(n){Kie(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const bm=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},zie=async(t,e,r)=>{t instanceof await Rie()&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const s=t.status||500,a=(n==null?void 0:n.statusCode)||s+"";e(new Mie(bm(n),s,a))}).catch(n=>{e(new by(bm(n),n))}):e(new by(bm(t),t))},Gie=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:($ie(n)?(s.headers=Te({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Te(Te({},s),r))};async function Tu(t,e,r,n,s,a){return new Promise((o,l)=>{t(r,Gie(e,n,s,a)).then(A=>{if(!A.ok)throw A;return n!=null&&n.noResolveJson?A:A.json()}).then(A=>o(A)).catch(A=>zie(A,l,n))})}async function Xc(t,e,r,n){return Tu(t,"GET",e,r,n)}async function Jn(t,e,r,n,s){return Tu(t,"POST",e,n,s,r)}async function Cy(t,e,r,n,s){return Tu(t,"PUT",e,n,s,r)}async function Wie(t,e,r,n){return Tu(t,"HEAD",e,Te(Te({},r),{},{noResolveJson:!0}),n)}async function Bw(t,e,r,n,s){return Tu(t,"DELETE",e,n,s,r)}var Vie=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(bt(e))return{data:null,error:e};throw e}}};let $E;$E=Symbol.toStringTag;var qie=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[$E]="BlobDownloadBuilder",this.promise=null}asStream(){return new Vie(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(bt(e))return{data:null,error:e};throw e}}};const Xie={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},HC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Jie=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Cw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var s=this;try{let a;const o=Te(Te({},HC),n);let l=Te(Te({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const A=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),A&&a.append("metadata",s.encodeMetadata(A)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),A&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(A))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,A&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(A))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=Te(Te({},l),n.headers));const u=s._removeEmptyFolders(e),h=s._getFinalPath(u),c=await(t=="PUT"?Cy:Jn)(s.fetch,`${s.url}/object/${h}`,a,Te({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:c.Id,fullPath:c.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(bt(a))return{data:null,error:a};throw a}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var s=this;const a=s._removeEmptyFolders(t),o=s._getFinalPath(a),l=new URL(s.url+`/object/upload/sign/${o}`);l.searchParams.set("token",e);try{let A;const u=Te({upsert:HC.upsert},n),h=Te(Te({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(A=new FormData,A.append("cacheControl",u.cacheControl),A.append("",r)):typeof FormData<"u"&&r instanceof FormData?(A=r,A.append("cacheControl",u.cacheControl)):(A=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:a,fullPath:(await Cy(s.fetch,l.toString(),A,{headers:h})).Key},error:null}}catch(A){if(s.shouldThrowOnError)throw A;if(bt(A))return{data:null,error:A};throw A}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const s=Te({},r.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const a=await Jn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+a.url),l=o.searchParams.get("token");if(!l)throw new q0("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await Jn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}async copy(t,e,r){var n=this;try{return{data:{path:(await Jn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,r){var n=this;try{let s=n._getFinalPath(t),a=await Jn(n.fetch,`${n.url}/object/sign/${s}`,Te({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${n.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,r){var n=this;try{const s=await Jn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Te(Te({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=n?`?${n}`:"",a=this._getFinalPath(t),o=()=>Xc(this.fetch,`${this.url}/${r}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new qie(o,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:_y(await Xc(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await Wie(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(bt(n)&&n instanceof by){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}async remove(t){var e=this;try{return{data:await Bw(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const s=Te(Te(Te({},Xie),e),{},{prefix:t||""});return{data:await Jn(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(bt(s))return{data:null,error:s};throw s}}async listV2(t,e){var r=this;try{const n=Te({},t);return{data:await Jn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const OE="2.89.0",LE={"X-Client-Info":`storage-js/${OE}`};var Yie=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const s=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Te(Te({},LE),e),this.fetch=Cw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await Xc(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Xc(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await Jn(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await Cy(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(bt(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await Jn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Bw(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},Zie=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},LE),e),this.fetch=Cw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Jn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await Xc(e.fetch,s,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Bw(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(bt(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!Oie(t))throw new q0("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Die({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,a){const o=s[a];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(s,l),error:null}}catch(A){if(n)throw A;return{data:null,error:A}}}}})}};const Sw={"X-Client-Info":`storage-js/${OE}`,"Content-Type":"application/json"};var HE=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function dn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var _m=class extends HE{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},eoe=class extends HE{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const jw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),toe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},KC=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),roe=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const o=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||n+"";e(new _m(KC(a),n,o))}).catch(()=>{const a=n+"";e(new _m(s.statusText||`HTTP ${n} error`,n,a))});else{const a=n+"";e(new _m(s.statusText||`HTTP ${n} error`,n,a))}}else e(new eoe(KC(t),t))},noe=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(toe(n)?(s.headers=Te({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Te(Te({},s),r))};async function soe(t,e,r,n,s,a){return new Promise((o,l)=>{t(r,noe(e,n,s,a)).then(A=>{if(!A.ok)throw A;if(n!=null&&n.noResolveJson)return A;const u=A.headers.get("content-type");return!u||!u.includes("application/json")?{}:A.json()}).then(A=>o(A)).catch(A=>roe(A,l,n))})}async function hn(t,e,r,n,s){return soe(t,"POST",e,n,s,r)}var aoe=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},Sw),e),this.fetch=jw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await hn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await hn(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await hn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await hn(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(dn(n))return{data:null,error:n};throw n}}},ioe=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},Sw),e),this.fetch=jw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await hn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await hn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await hn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await hn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await hn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}},ooe=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},Sw),e),this.fetch=jw(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await hn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await hn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await hn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await hn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(dn(r))return{data:null,error:r};throw r}}},loe=class extends ooe{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new Aoe(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},Aoe=class extends aoe{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,Te(Te({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,Te(Te({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new coe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},coe=class extends ioe{constructor(t,e,r,n,s){super(t,e,s),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,Te(Te({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,Te(Te({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,Te(Te({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,Te(Te({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,Te(Te({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},uoe=class extends Yie{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new Jie(this.url,this.headers,t,this.fetch)}get vectors(){return new loe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Zie(this.url+"/iceberg",this.headers,this.fetch)}};const KE="2.89.0",el=30*1e3,By=3,Cm=By*el,doe="http://localhost:9999",hoe="supabase.auth.token",foe={"X-Client-Info":`gotrue-js/${KE}`},Sy="X-Supabase-Api-Version",zE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},goe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,moe=10*60*1e3;class Jc extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class poe extends Jc{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function yoe(t){return Ce(t)&&t.name==="AuthApiError"}class Fi extends Jc{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class xa extends Jc{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class an extends xa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function voe(t){return Ce(t)&&t.name==="AuthSessionMissingError"}class Io extends xa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wd extends xa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class bd extends xa{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function xoe(t){return Ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class zC extends xa{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class woe extends xa{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class jy extends xa{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Bm(t){return Ce(t)&&t.name==="AuthRetryableFetchError"}class GC extends xa{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class ky extends xa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Af="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),WC=` 	
\r=`.split(""),boe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<WC.length;e+=1)t[WC[e].charCodeAt(0)]=-2;for(let e=0;e<Af.length;e+=1)t[Af[e].charCodeAt(0)]=e;return t})();function VC(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Af[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Af[n]),e.queuedBits-=6}}function GE(t,e,r){const n=boe[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function qC(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{Boe(o,n,r)};for(let o=0;o<t.length;o+=1)GE(t.charCodeAt(o),s,a);return e.join("")}function _oe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Coe(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}_oe(n,e)}}function Boe(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function jl(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)GE(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Soe(t){const e=[];return Coe(t,r=>e.push(r)),new Uint8Array(e)}function Di(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>VC(s,r,n)),VC(null,r,n),e.join("")}function joe(t){return Math.round(Date.now()/1e3)+t}function koe(){return Symbol("auth-callback")}const Ar=()=>typeof window<"u"&&typeof document<"u",yi={tested:!1,writable:!1},WE=()=>{if(!Ar())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yi.tested)return yi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yi.tested=!0,yi.writable=!0}catch{yi.tested=!0,yi.writable=!1}return yi.writable};function Eoe(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const VE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Noe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",tl=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},vi=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},lr=async(t,e)=>{await t.removeItem(e)};class X0{constructor(){this.promise=new X0.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}X0.promiseConstructor=Promise;function Sm(t){const e=t.split(".");if(e.length!==3)throw new ky("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!goe.test(e[n]))throw new ky("JWT not in base64url format");return{header:JSON.parse(qC(e[0])),payload:JSON.parse(qC(e[1])),signature:jl(e[2]),raw:{header:e[0],payload:e[1]}}}async function Foe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Toe(t,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function Uoe(t){return("0"+t.toString(16)).substr(-2)}function Qoe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Uoe).join("")}async function Ioe(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function Poe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Ioe(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Po(t,e,r=!1){const n=Qoe();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await tl(t,`${e}-code-verifier`,s);const a=await Poe(n);return[a,n===a?"plain":"s256"]}const Doe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Moe(t){const e=t.headers.get(Sy);if(!e||!e.match(Doe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Roe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function $oe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ooe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Do(t){if(!Ooe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function jm(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Loe(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function XC(t){return JSON.parse(JSON.stringify(t))}const Si=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Hoe=[502,503,504];async function JC(t){var e;if(!Noe(t))throw new jy(Si(t),0);if(Hoe.includes(t.status))throw new jy(Si(t),t.status);let r;try{r=await t.json()}catch(a){throw new Fi(Si(a),a)}let n;const s=Moe(t);if(s&&s.getTime()>=zE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new GC(Si(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new an}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new GC(Si(r),t.status,r.weak_password.reasons);throw new poe(Si(r),t.status||500,n)}const Koe=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Ne(t,e,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[Sy]||(a[Sy]=zE["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",A=await zoe(t,e,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(A):{data:Object.assign({},A),error:null}}async function zoe(t,e,r,n,s,a){const o=Koe(e,n,s,a);let l;try{l=await t(r,Object.assign({},o))}catch(A){throw console.error(A),new jy(Si(A),0)}if(l.ok||await JC(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(A){await JC(A)}}function Vn(t){var e;let r=null;Voe(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=joe(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function YC(t){const e=Vn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ma(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Goe(t){return{data:t,error:null}}function Woe(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=t,o=V0(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},A=Object.assign({},o);return{data:{properties:l,user:A},error:null}}function ZC(t){return t}function Voe(t){return t.access_token&&t.refresh_token&&t.expires_in}const km=["global","local","others"];class qoe{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=VE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=km[0]){if(km.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${km.join(", ")}`);try{return await Ne(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ma})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=V0(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Woe,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ce(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ma})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,a,o,l,A;try{const u={nextPage:null,lastPage:0,total:0},h=await Ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:ZC});if(h.error)throw h.error;const c=await h.json(),d=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(A=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&A!==void 0?A:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(Ce(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Do(e);try{return await Ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ma})}catch(r){if(Ce(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Do(e);try{return await Ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Ma})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Do(e);try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ma})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Do(e.userId);try{const{data:r,error:n}=await Ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Do(e.userId),Do(e.id);try{return{data:await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,a,o,l,A;try{const u={nextPage:null,lastPage:0,total:0},h=await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:ZC});if(h.error)throw h.error;const c=await h.json(),d=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(A=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&A!==void 0?A:[];return f.length>0&&(f.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=y}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(Ce(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ce(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ce(r))return{data:null,error:r};throw r}}}function e2(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Mo={debug:!!(globalThis&&WE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Xoe extends qE{}async function Joe(t,e,r){Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Xoe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Mo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Yoe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function XE(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Zoe(t){return parseInt(t,16)}function ele(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function tle(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:A,resources:u,scheme:h,uri:c,version:d}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(d!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=XE(t.address),g=h?`${h}://${n}`:n,y=t.statement?`${t.statement}
`:"",v=`${g} wants you to sign in with your Ethereum account:
${f}

${y}`;let m=`URI: ${c}
Version: ${d}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(s&&(m+=`
Expiration Time: ${s.toISOString()}`),l&&(m+=`
Not Before: ${l.toISOString()}`),A&&(m+=`
Request ID: ${A}`),u){let p=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);p+=`
- ${x}`}m+=p}return`${v}
${m}`}class Pt extends Error{constructor({message:e,code:r,cause:n,name:s}){var a;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class cf extends Pt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function rle({error:t,options:e}){var r,n,s;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(JE(o)){if(a.rp.id!==o)return new Pt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function nle({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Pt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(JE(n)){if(r.rpId!==n)return new Pt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class sle{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ale=new sle;function ile(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=V0(t,["challenge","user","excludeCredentials"]),a=jl(e).buffer,o=Object.assign(Object.assign({},r),{id:jl(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let A=0;A<n.length;A++){const u=n[A];l.excludeCredentials[A]=Object.assign(Object.assign({},u),{id:jl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function ole(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=V0(t,["challenge","allowCredentials"]),s=jl(e).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:jl(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function lle(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Di(new Uint8Array(t.response.attestationObject)),clientDataJSON:Di(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Ale(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Di(new Uint8Array(s.authenticatorData)),clientDataJSON:Di(new Uint8Array(s.clientDataJSON)),signature:Di(new Uint8Array(s.signature)),userHandle:s.userHandle?Di(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function JE(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function t2(){var t,e;return!!(Ar()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function cle(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cf("Browser returned unexpected credential type",e)}:{data:null,error:new cf("Empty credential response",e)}}catch(e){return{data:null,error:rle({error:e,options:t})}}}async function ule(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new cf("Browser returned unexpected credential type",e)}:{data:null,error:new cf("Empty credential response",e)}}catch(e){return{data:null,error:nle({error:e,options:t})}}}const dle={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},hle={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function uf(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const a in s){const o=s[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(e(o)){const l=n[a];e(l)?n[a]=uf(l,o):n[a]=uf(o)}else n[a]=o}return n}function fle(t,e){return uf(dle,t,e||{})}function gle(t,e){return uf(hle,t,e||{})}class mle{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!o)return{data:null,error:l};const A=s??ale.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=fle(o.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:c}=await cle({publicKey:u,signal:A});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:c}}case"request":{const u=gle(o.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:c}=await ule(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:A}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:c}}}}catch(o){return Ce(o)?{data:null,error:o}:{data:null,error:new Fi("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new Jc("rpId is required for WebAuthn authentication")};try{if(!t2())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!o)return{data:null,error:l};const{webauthn:A}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:A.type,rpId:r,rpOrigins:n,credential_response:A.credential_response}})}catch(o){return Ce(o)?{data:null,error:o}:{data:null,error:new Fi("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!r)return{data:null,error:new Jc("rpId is required for WebAuthn registration")};try{if(!t2())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var c;return(c=h.data)===null||c===void 0?void 0:c.all.find(d=>d.factor_type==="webauthn"&&d.friendly_name===e&&d.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:A,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return A?this._verify({factorId:o.id,challengeId:A.challengeId,webauthn:{rpId:r,rpOrigins:n,type:A.webauthn.type,credential_response:A.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Ce(o)?{data:null,error:o}:{data:null,error:new Fi("Unexpected error in register",o)}}}}Yoe();const ple={url:doe,storageKey:hoe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:foe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function r2(t,e,r){return await r()}const Ro={};class Yc{get jwks(){var e,r;return(r=(e=Ro[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Ro[this.storageKey]=Object.assign(Object.assign({},Ro[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Ro[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ro[this.storageKey]=Object.assign(Object.assign({},Ro[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},ple),e);if(this.storageKey=a.storageKey,this.instanceID=(r=Yc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Yc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Ar()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new qoe({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=VE(a.fetch),this.lock=a.lock||r2,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:this.persistSession&&Ar()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Joe:this.lock=r2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new mle(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:WE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=e2(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=e2(this.memoryStorage)),Ar()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${KE}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Ar()&&(r=Eoe(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ar()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),xoe(a)){const A=(e=a.details)===null||e===void 0?void 0:e.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ce(r)?this._returnResult({error:r}):this._returnResult({error:new Fi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const a=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Vn}),{data:o,error:l}=a;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const A=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:u,session:A},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,n,s;try{let a;if("email"in e){const{email:h,password:c,options:d}=e;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Po(this.storage,this.storageKey)),a=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:h,password:c,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:f,code_challenge_method:g},xform:Vn})}else if("phone"in e){const{phone:h,password:c,options:d}=e;a=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:c,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},channel:(s=d==null?void 0:d.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Vn})}else throw new wd("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return await lr(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const A=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:u,session:A},error:null})}catch(a){if(await lr(this.storage,`${this.storageKey}-code-verifier`),Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:o,options:l}=e;r=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:YC})}else if("phone"in e){const{phone:a,password:o,options:l}=e;r=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:YC})}else throw new wd("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const a=new Io;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,a,o,l,A,u,h,c,d;let f,g;if("message"in e)f=e.message,g=e.signature;else{const{chain:y,wallet:v,statement:m,options:p}=e;let x;if(Ar())if(typeof v=="object")x=v;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")x=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=v}const w=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),_=await x.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const b=XE(_[0]);let S=(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const C=await x.request({method:"eth_chainId"});S=Zoe(C)}const E={domain:w.host,address:b,statement:m,uri:w.href,version:"1",chainId:S,nonce:(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(a=p==null?void 0:p.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=p==null?void 0:p.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(A=p==null?void 0:p.signInWithEthereum)===null||A===void 0?void 0:A.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=p==null?void 0:p.signInWithEthereum)===null||h===void 0?void 0:h.resources};f=tle(E),g=await x.request({method:"personal_sign",params:[ele(f),b]})}try{const{data:y,error:v}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:g},!((c=e.options)===null||c===void 0)&&c.captchaToken?{gotrue_meta_security:{captcha_token:(d=e.options)===null||d===void 0?void 0:d.captchaToken}}:null),xform:Vn});if(v)throw v;if(!y||!y.session||!y.user){const m=new Io;return this._returnResult({data:{user:null,session:null},error:m})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(Ce(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var r,n,s,a,o,l,A,u,h,c,d,f;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:v,wallet:m,statement:p,options:x}=e;let w;if(Ar())if(typeof m=="object")w=m;else{const b=window;if("solana"in b&&typeof b.solana=="object"&&("signIn"in b.solana&&typeof b.solana.signIn=="function"||"signMessage"in b.solana&&typeof b.solana.signMessage=="function"))w=b.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const _=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const b=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),p?{statement:p}:null));let S;if(Array.isArray(b)&&b[0]&&typeof b[0]=="object")S=b[0];else if(b&&typeof b=="object"&&"signedMessage"in b&&"signature"in b)S=b;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((A=x==null?void 0:x.signInWithSolana)===null||A===void 0)&&A.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((c=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||c===void 0)&&c.length?["Resources",...x.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const b=await w.signMessage(new TextEncoder().encode(g),"utf8");if(!b||!(b instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=b}}try{const{data:v,error:m}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Di(y)},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Vn});if(m)throw m;if(!v||!v.session||!v.user){const p=new Io;return this._returnResult({data:{user:null,session:null},error:p})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:m})}catch(v){if(Ce(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const r=await vi(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new woe;const{data:a,error:o}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Vn});if(await lr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!a||!a.session||!a.user){const l=new Io;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(await lr(this.storage,`${this.storageKey}-code-verifier`),Ce(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=e,l=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Vn}),{data:A,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!A||!A.session||!A.user){const h=new Io;return this._returnResult({data:{user:null,session:null},error:h})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:A,error:u})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,a,o;try{if("email"in e){const{email:l,options:A}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Po(this.storage,this.storageKey));const{error:c}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},create_user:(n=A==null?void 0:A.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:A==null?void 0:A.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}if("phone"in e){const{phone:l,options:A}=e,{data:u,error:h}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=A==null?void 0:A.data)!==null&&s!==void 0?s:{},create_user:(a=A==null?void 0:A.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(o=A==null?void 0:A.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new wd("You must provide either an email or phone number.")}catch(l){if(await lr(this.storage,`${this.storageKey}-code-verifier`),Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var r,n;try{let s,a;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Vn});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const A=o.session,u=o.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),this._returnResult({data:{user:u,session:A},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,a,o;try{let l=null,A=null;this.flowType==="pkce"&&([l,A]=await Po(this.storage,this.storageKey));const u=await Ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:A}),headers:this.headers,xform:Goe});return!((a=u.data)===null||a===void 0)&&a.url&&Ar()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await lr(this.storage,`${this.storageKey}-code-verifier`),Ce(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new an;const{error:s}=await Ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Ce(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:o}=await Ne(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:o,error:l}=await Ne(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new wd("You must provide either an email or phone number and a type")}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await vi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Cm:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await vi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=jm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=Loe(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ma}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new an}:await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Ma})})}catch(r){if(Ce(r))return voe(r)&&(await this._removeSession(),await lr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new an;const o=s.session;let l=null,A=null;this.flowType==="pkce"&&e.email!=null&&([l,A]=await Po(this.storage,this.storageKey));const{data:u,error:h}=await Ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:A}),jwt:o.access_token,xform:Ma});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await lr(this.storage,`${this.storageKey}-code-verifier`),Ce(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new an;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=Sm(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:A}=await this._callRefreshToken(e.refresh_token);if(A)return this._returnResult({data:{user:null,session:null},error:A});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:A}=await this._getUser(e.access_token);if(A)throw A;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(Ce(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new an;const{data:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Ce(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Ar())throw new bd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new bd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new zC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new bd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zC("No code detected.");const{data:p,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:A,token_type:u}=e;if(!a||!l||!o||!u)throw new bd("No session defined in URL");const h=Math.round(Date.now()/1e3),c=parseInt(l);let d=h+c;A&&(d=parseInt(A));const f=d-h;f*1e3<=el&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${c}s`);const g=d-c;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,d,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,d,h);const{data:y,error:v}=await this._getUser(a);if(v)throw v;const m={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:c,expires_at:d,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:m,redirectType:e.type},error:null})}catch(n){if(Ce(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await vi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({error:a});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(yoe(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await lr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=koe(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Po(this.storage,this.storageKey,!0));try{return await Ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(await lr(this.storage,`${this.storageKey}-code-verifier`),Ce(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,A,u,h;const{data:c,error:d}=a;if(d)throw d;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(A=e.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await Ne(this.fetch,"GET",f,{headers:this.headers,jwt:(h=(u=c.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return Ar()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Ce(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:o,provider:l,token:A,access_token:u,nonce:h}=e,c=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:A,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Vn}),{data:d,error:f}=c;return f?this._returnResult({data:{user:null,session:null},error:f}):!d||!d.session||!d.user?this._returnResult({data:{user:null,session:null},error:new Io}):(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:f}))}catch(s){if(await lr(this.storage,`${this.storageKey}-code-verifier`),Ce(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await Ne(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Toe(async s=>(s>0&&await Foe(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vn})),(s,a)=>{const o=200*Math.pow(2,s);return a&&Bm(a)&&Date.now()+o-n<el})}catch(n){if(this._debug(r,"error",n),Ce(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Ar()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await vi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await vi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await tl(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:jm()}else if(s&&!s.user&&!s.user){const o=await vi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await lr(this.storage,this.storageKey+"-user"),await tl(this.storage,this.storageKey,s)):s.user=jm()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Cm;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Cm}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Bm(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new an;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new X0;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new an;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Ce(a)){const o={data:null,error:a};return Bm(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(A){a.push(A)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await lr(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await tl(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=XC(s);await tl(this.storage,this.storageKey,a)}else{const s=XC(r);await tl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await lr(this.storage,this.storageKey),await lr(this.storage,this.storageKey+"-code-verifier"),await lr(this.storage,this.storageKey+"-user"),this.userStorage&&await lr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ar()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),el);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/el);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${el}ms, refresh threshold is ${By} ticks`),s<=By&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof qE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ar()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Po(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?this._returnResult({data:null,error:a}):await Ne(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:A,error:u}=await Ne(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&A.type==="totp"&&(!((s=A==null?void 0:A.totp)===null||s===void 0)&&s.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),this._returnResult({data:A,error:null}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?lle(e.webauthn.credential_response):Ale(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:A}=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return A?this._returnResult({data:null,error:A}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:A}))})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ile(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ole(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Sm(n.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await Ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new an})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new an});const o=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ar()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new an});const o=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Ar()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await Ne(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new an})})}catch(e){if(Ce(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await Ne(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new an})})}catch(r){if(Ce(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(l=>l.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+moe>s)return n;const{data:a,error:o}=await Ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:f,error:g}=await this.getSession();if(g||!f.session)return this._returnResult({data:null,error:g});n=f.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:A}}=Sm(n);r!=null&&r.allowExpired||Roe(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:a,header:s,signature:o},error:null}}const h=$oe(s.alg),c=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,c,o,Soe(`${l}.${A}`)))throw new ky("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}}Yc.nextInstanceID={};const yle=Yc,vle="2.89.0";let GA="";typeof Deno<"u"?GA="deno":typeof document<"u"?GA="web":typeof navigator<"u"&&navigator.product==="ReactNative"?GA="react-native":GA="node";const xle={"X-Client-Info":`supabase-js-${GA}/${vle}`},wle={headers:xle},ble={schema:"public"},_le={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Cle={};function Zc(t){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(t)}function Ble(t,e){if(Zc(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Zc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sle(t){var e=Ble(t,"string");return Zc(e)=="symbol"?e:e+""}function jle(t,e,r){return(e=Sle(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Nt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?n2(Object(r),!0).forEach(function(n){jle(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const kle=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ele=()=>Headers,Nle=(t,e,r)=>{const n=kle(r),s=Ele();return async(a,o)=>{var l;const A=(l=await e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${A}`),n(a,Nt(Nt({},o),{},{headers:u}))}};function Fle(t){return t.endsWith("/")?t:t+"/"}function Tle(t,e){var r,n;const{db:s,auth:a,realtime:o,global:l}=t,{db:A,auth:u,realtime:h,global:c}=e,d={db:Nt(Nt({},A),s),auth:Nt(Nt({},u),a),realtime:Nt(Nt({},h),o),storage:{},global:Nt(Nt(Nt({},c),l),{},{headers:Nt(Nt({},(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?d.accessToken=t.accessToken:delete d.accessToken,d}function Ule(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Fle(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Qle=class extends yle{constructor(t){super(t)}},Ile=class{constructor(t,e,r){var n,s;this.supabaseUrl=t,this.supabaseKey=e;const a=Ule(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:ble,realtime:Cle,auth:Nt(Nt({},_le),{},{storageKey:o}),global:wle},A=Tle(r??{},l);if(this.storageKey=(n=A.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=A.global.headers)!==null&&s!==void 0?s:{},A.accessToken)this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(h,c)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(c)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=A.auth)!==null&&u!==void 0?u:{},this.headers,A.global.fetch)}this.fetch=Nle(e,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Nt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new fie(new URL("rest/v1",a).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new uoe(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new Aie(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:a,flowType:o,lock:l,debug:A,throwOnError:u},h,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Qle({url:this.authUrl.href,headers:Nt(Nt({},d),h),storageKey:a,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:l,debug:A,throwOnError:u,fetch:c,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Fie(this.realtimeUrl.href,Nt(Nt({},t),{},{params:Nt(Nt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ple=(t,e,r)=>new Ile(t,e,r);function Dle(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Dle()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Mle="https://vldqocgemjqtmjvxhozj.supabase.co",Rle="sb_publishable_doGcbZ1R6TOC1hBHRFu2BA_zzBpPiSZ",ee=Ple(Mle,Rle,{auth:{autoRefreshToken:!0,persistSession:!0,storageKey:"goa-timer-auth",storage:localStorage},realtime:{params:{eventsPerSecond:10}}}),Ve=()=>ee!==null;class $le{constructor(){Z(this,"syncStatusListeners",new Set);Z(this,"currentStatus",{status:"idle",progress:0,message:"Ready to sync"});Z(this,"realtimeChannels",[]);Z(this,"syncInProgress",!1);Z(this,"autoSyncEnabled",!1);Z(this,"autoSyncUnsubscribe",null);Z(this,"autoUploadEnabled",!0);Z(this,"autoUploadTimeout",null);Z(this,"autoUploadDebounceMs",3e3);Z(this,"autoSyncOwnDevicesEnabled",!1);Z(this,"autoSyncOwnDevicesUnsubscribe",null);Z(this,"ownDevicesRealtimeChannel",null);Z(this,"FRIEND_PREFS_KEY","cloudSync_friendPreferences");const e=localStorage.getItem("cloudSync_autoEnabled");this.autoSyncEnabled=e==="true";const r=localStorage.getItem("cloudSync_autoUploadEnabled");this.autoUploadEnabled=r!=="false";const n=localStorage.getItem("cloudSync_autoSyncOwnDevices");this.autoSyncOwnDevicesEnabled=n!=="false"}async uploadLocalData(){if(!Ve()||!ee)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Cloud features not configured"};if(this.syncInProgress)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Sync already in progress"};this.syncInProgress=!0,this.updateStatus({status:"uploading",progress:0,message:"Preparing local data..."});try{const{data:{user:e}}=await ee.auth.getUser();if(!e)throw new Error("Not authenticated");const r=await be.exportData();this.updateStatus({status:"uploading",progress:5,message:"Exporting local database..."}),this.updateStatus({status:"uploading",progress:10,message:"Checking for deleted matches..."});const n=await this.getOwnTombstones(),s=new Set(n),a=r.matches.filter(c=>!s.has(c.id)),o=new Set(a.map(c=>c.id)),l=r.matchPlayers.filter(c=>o.has(c.matchId));n.length>0&&console.log(`[CloudSyncService] Skipping ${r.matches.length-a.length} tombstoned matches`);const A=this.getDeviceId();let u=0;this.updateStatus({status:"uploading",progress:20,message:`Uploading ${r.players.length} players...`});for(let c=0;c<r.players.length;c++){const d=r.players[c],{error:f}=await ee.from("cloud_players").upsert({owner_id:e.id,local_id:d.id,name:d.name,total_games:d.totalGames,wins:d.wins,losses:d.losses,elo:d.elo,mu:d.mu,sigma:d.sigma,ordinal:d.ordinal,last_played:d.lastPlayed,date_created:d.dateCreated,device_id:d.deviceId||A,level:d.level,sync_source:"local",synced_at:new Date().toISOString()},{onConflict:"owner_id,local_id"});f||u++,this.updateStatus({status:"uploading",progress:20+Math.floor(c/r.players.length*20),message:`Uploading players (${c+1}/${r.players.length})...`})}this.updateStatus({status:"uploading",progress:40,message:`Uploading ${a.length} matches...`});for(let c=0;c<a.length;c++){const d=a[c],{error:f}=await ee.from("cloud_matches").upsert({id:d.id,owner_id:e.id,date:d.date,winning_team:d.winningTeam.toLowerCase(),game_length:d.gameLength.toLowerCase(),double_lanes:d.doubleLanes,titan_players:d.titanPlayers,atlantean_players:d.atlanteanPlayers,device_id:d.deviceId||A,sync_source:"local",synced_at:new Date().toISOString()},{onConflict:"owner_id,id"});f||u++,this.updateStatus({status:"uploading",progress:40+Math.floor(c/Math.max(a.length,1)*30),message:`Uploading matches (${c+1}/${a.length})...`})}this.updateStatus({status:"uploading",progress:70,message:`Uploading ${l.length} match details...`});for(let c=0;c<l.length;c++){const d=l[c],{error:f}=await ee.from("cloud_match_players").upsert({id:d.id,owner_id:e.id,match_id:d.matchId,player_id:d.playerId,team:d.team.toLowerCase(),hero_id:d.heroId,hero_name:d.heroName,hero_roles:d.heroRoles,kills:d.kills,deaths:d.deaths,assists:d.assists,gold_earned:d.goldEarned,minion_kills:d.minionKills,level:d.level,device_id:d.deviceId||A,sync_source:"local",synced_at:new Date().toISOString()},{onConflict:"owner_id,id"});f||u++,this.updateStatus({status:"uploading",progress:70+Math.floor(c/Math.max(l.length,1)*25),message:`Uploading match details (${c+1}/${l.length})...`})}await ee.from("profiles").update({last_sync_at:new Date().toISOString()}).eq("id",e.id);const h=new Date;return localStorage.setItem("cloudSync_lastSync",h.toISOString()),this.updateStatus({status:"complete",progress:100,message:`Upload complete! ${u} records synced.`,lastSyncAt:h}),this.syncInProgress=!1,{success:!0,recordsAdded:u,recordsUpdated:0}}catch(e){return console.error("[CloudSyncService] Upload error:",e),this.updateStatus({status:"error",progress:0,message:"Upload failed",error:e instanceof Error?e.message:"Unknown error"}),this.syncInProgress=!1,{success:!1,recordsAdded:0,recordsUpdated:0,error:String(e)}}}async syncFromFriends(e){if(!Ve()||!ee)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Cloud features not configured"};if(this.syncInProgress)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Sync already in progress"};this.syncInProgress=!0,this.updateStatus({status:"downloading",progress:0,message:"Fetching friend data..."});try{const{data:{user:r}}=await ee.auth.getUser();if(!r)throw new Error("Not authenticated");let n;if(e&&e.length>0)n=e;else{const{data:h}=await ee.from("friends").select("friend_id").eq("user_id",r.id);n=(h||[]).map(c=>c.friend_id)}if(n.length===0)return this.updateStatus({status:"complete",progress:100,message:"No friends to sync from",lastSyncAt:new Date}),this.syncInProgress=!1,{success:!0,recordsAdded:0,recordsUpdated:0};this.updateStatus({status:"downloading",progress:20,message:`Downloading from ${n.length} friend${n.length===1?"":"s"}...`});const{data:s}=await ee.from("cloud_players").select("*").in("owner_id",n);this.updateStatus({status:"downloading",progress:40,message:"Downloading matches..."});const{data:a}=await ee.from("cloud_matches").select("*").in("owner_id",n);this.updateStatus({status:"downloading",progress:60,message:"Downloading match details..."});const{data:o}=await ee.from("cloud_match_players").select("*").in("owner_id",n);this.updateStatus({status:"merging",progress:70,message:"Merging data..."});const l={players:(s||[]).map(h=>this.cloudPlayerToLocal(h)),matches:(a||[]).map(h=>this.cloudMatchToLocal(h)),matchPlayers:(o||[]).map(h=>this.cloudMatchPlayerToLocal(h)),exportDate:new Date,version:4},A=await be.mergeData(l),u=new Date;return localStorage.setItem("cloudSync_lastSync",u.toISOString()),this.updateStatus({status:"complete",progress:100,message:`Sync complete! Merged data from ${n.length} friends.`,lastSyncAt:u}),this.syncInProgress=!1,{success:A,recordsAdded:l.players.length+l.matches.length,recordsUpdated:0}}catch(r){return console.error("[CloudSyncService] Sync error:",r),this.updateStatus({status:"error",progress:0,message:"Sync failed",error:r instanceof Error?r.message:"Unknown error"}),this.syncInProgress=!1,{success:!1,recordsAdded:0,recordsUpdated:0,error:String(r)}}}subscribeToFriendUpdates(e){if(!Ve()||!ee)return()=>{};const r=ee.channel("friend_matches").on("postgres_changes",{event:"*",schema:"public",table:"cloud_matches"},()=>{console.log("[CloudSyncService] Friend match update detected"),e()}).subscribe();return this.realtimeChannels.push(r),()=>{this.realtimeChannels.forEach(n=>{ee==null||ee.removeChannel(n)}),this.realtimeChannels=[]}}setAutoSync(e){this.autoSyncEnabled=e,localStorage.setItem("cloudSync_autoEnabled",String(e)),e?this.startAutoSync():this.stopAutoSync()}isAutoSyncEnabled(){return this.autoSyncEnabled}setAutoUpload(e){this.autoUploadEnabled=e,localStorage.setItem("cloudSync_autoUploadEnabled",String(e))}isAutoUploadEnabled(){return this.autoUploadEnabled}getFriendSyncPreferences(){const e=localStorage.getItem(this.FRIEND_PREFS_KEY);if(!e)return{};try{return JSON.parse(e)}catch{return{}}}setFriendSyncPreference(e,r){const n=this.getFriendSyncPreferences();n[e]={autoSync:r},localStorage.setItem(this.FRIEND_PREFS_KEY,JSON.stringify(n))}isFriendAutoSyncEnabled(e){var n;return((n=this.getFriendSyncPreferences()[e])==null?void 0:n.autoSync)??!0}getAutoSyncFriendIds(e){const r=this.getFriendSyncPreferences();return e.filter(n=>{var s;return((s=r[n])==null?void 0:s.autoSync)??!0})}triggerAutoUpload(){this.autoUploadEnabled&&(!Ve()||!ee||(this.autoUploadTimeout&&clearTimeout(this.autoUploadTimeout),this.autoUploadTimeout=setTimeout(async()=>{if(!ee)return;const{data:{user:e}}=await ee.auth.getUser();e&&!this.syncInProgress&&(console.log("[CloudSyncService] Auto-uploading data..."),await this.uploadLocalData())},this.autoUploadDebounceMs)))}async downloadOwnCloudData(){if(!Ve()||!ee)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Cloud features not configured"};if(this.syncInProgress)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Sync already in progress"};this.syncInProgress=!0,this.updateStatus({status:"downloading",progress:0,message:"Downloading your data from cloud..."});try{const{data:{user:e}}=await ee.auth.getUser();if(!e)throw new Error("Not authenticated");const r=this.getDeviceId();this.updateStatus({status:"downloading",progress:10,message:"Checking for deleted matches..."});const n=await this.getOwnTombstones(),s=new Set(n);this.updateStatus({status:"downloading",progress:20,message:"Downloading players from other devices..."});const{data:a}=await ee.from("cloud_players").select("*").eq("owner_id",e.id).neq("device_id",r);this.updateStatus({status:"downloading",progress:40,message:"Downloading matches from other devices..."});const{data:o}=await ee.from("cloud_matches").select("*").eq("owner_id",e.id).neq("device_id",r);this.updateStatus({status:"downloading",progress:60,message:"Downloading match details from other devices..."});const{data:l}=await ee.from("cloud_match_players").select("*").eq("owner_id",e.id).neq("device_id",r);this.updateStatus({status:"merging",progress:70,message:"Applying deletions..."});const A=await this.applyTombstonesToLocal(n);A>0&&console.log(`[CloudSyncService] Applied ${A} tombstones`),this.updateStatus({status:"merging",progress:80,message:"Merging data..."});const u=(o||[]).filter(v=>!s.has(v.id)),h=new Set(u.map(v=>v.id)),c=(l||[]).filter(v=>h.has(v.match_id)),d={players:(a||[]).map(v=>this.cloudPlayerToLocal(v)),matches:u.map(v=>this.cloudMatchToLocal(v)),matchPlayers:c.map(v=>this.cloudMatchPlayerToLocal(v)),exportDate:new Date,version:4},f=await be.mergeData(d),g=new Date;localStorage.setItem("cloudSync_lastOwnSync",g.toISOString());const y=d.players.length+d.matches.length+d.matchPlayers.length;return this.updateStatus({status:"complete",progress:100,message:y>0||A>0?`Synced: ${y} records downloaded${A>0?`, ${A} deleted`:""}.`:"No new data found from other devices.",lastSyncAt:g}),this.syncInProgress=!1,{success:f,recordsAdded:y,recordsUpdated:A}}catch(e){return console.error("[CloudSyncService] Download own data error:",e),this.updateStatus({status:"error",progress:0,message:"Download failed",error:e instanceof Error?e.message:"Unknown error"}),this.syncInProgress=!1,{success:!1,recordsAdded:0,recordsUpdated:0,error:String(e)}}}subscribeToOwnDeviceUpdates(e){return!Ve()||!ee?()=>{}:(this.ownDevicesRealtimeChannel=ee.channel("own_device_sync").on("postgres_changes",{event:"INSERT",schema:"public",table:"cloud_matches"},async r=>{if(!ee)return;const{data:{user:n}}=await ee.auth.getUser();if(!n)return;const s=r.new,a=s.owner_id,o=s.device_id,l=this.getDeviceId();a===n.id&&o!==l&&(console.log("[CloudSyncService] Own data change detected from device:",o),e(o))}).subscribe(),()=>{this.ownDevicesRealtimeChannel&&(ee==null||ee.removeChannel(this.ownDevicesRealtimeChannel),this.ownDevicesRealtimeChannel=null)})}setAutoSyncOwnDevices(e){this.autoSyncOwnDevicesEnabled=e,localStorage.setItem("cloudSync_autoSyncOwnDevices",String(e)),e?this.startAutoSyncOwnDevices():this.stopAutoSyncOwnDevices()}isAutoSyncOwnDevicesEnabled(){return this.autoSyncOwnDevicesEnabled}getLastOwnSyncTime(){const e=localStorage.getItem("cloudSync_lastOwnSync");return e?new Date(e):null}async getOwnTombstones(){if(!Ve()||!ee)return[];try{const{data:{user:e}}=await ee.auth.getUser();if(!e)return[];const{data:r}=await ee.from("deleted_matches").select("match_id").eq("owner_id",e.id);return(r||[]).map(n=>n.match_id)}catch(e){return console.error("[CloudSyncService] Error fetching tombstones:",e),[]}}async deleteMatchFromCloud(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features not configured"};try{const{data:{user:r}}=await ee.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const n=this.getDeviceId();await ee.from("cloud_match_players").delete().eq("owner_id",r.id).eq("match_id",e),await ee.from("cloud_matches").delete().eq("owner_id",r.id).eq("id",e);const{error:s}=await ee.from("deleted_matches").upsert({owner_id:r.id,match_id:e,deleted_at:new Date().toISOString(),device_id:n},{onConflict:"owner_id,match_id"});return s&&console.error("[CloudSyncService] Tombstone insert error:",s),console.log("[CloudSyncService] Match deleted from cloud:",e),{success:!0}}catch(r){return console.error("[CloudSyncService] Delete from cloud error:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async applyTombstonesToLocal(e){if(e.length===0)return 0;let r=0;for(const n of e)await be.getMatch(n)&&(await be.deleteMatchAndPlayersOnly(n),r++,console.log("[CloudSyncService] Applied tombstone - deleted local match:",n));return r>0&&await be.recalculatePlayerStats(),r}startAutoSyncOwnDevices(){this.autoSyncOwnDevicesUnsubscribe||(this.autoSyncOwnDevicesUnsubscribe=this.subscribeToOwnDeviceUpdates(async e=>{setTimeout(async()=>{this.autoSyncOwnDevicesEnabled&&!this.syncInProgress&&(console.log("[CloudSyncService] Auto-syncing from device:",e),await this.downloadOwnCloudData())},2e3)}))}stopAutoSyncOwnDevices(){this.autoSyncOwnDevicesUnsubscribe&&(this.autoSyncOwnDevicesUnsubscribe(),this.autoSyncOwnDevicesUnsubscribe=null)}startAutoSync(){this.autoSyncUnsubscribe||(this.autoSyncUnsubscribe=this.subscribeToFriendUpdates(async()=>{setTimeout(async()=>{if(this.autoSyncEnabled&&!this.syncInProgress&&ee){const{data:{user:e}}=await ee.auth.getUser();if(!e)return;const{data:r}=await ee.from("friends").select("friend_id").eq("user_id",e.id),n=(r||[]).map(a=>a.friend_id),s=this.getAutoSyncFriendIds(n);s.length>0&&this.syncFromFriends(s)}},2e3)}))}stopAutoSync(){this.autoSyncUnsubscribe&&(this.autoSyncUnsubscribe(),this.autoSyncUnsubscribe=null)}onStatusChange(e){return this.syncStatusListeners.add(e),e(this.currentStatus),()=>this.syncStatusListeners.delete(e)}getStatus(){return{...this.currentStatus}}getLastSyncTime(){const e=localStorage.getItem("cloudSync_lastSync");return e?new Date(e):null}updateStatus(e){this.currentStatus={...this.currentStatus,...e},this.syncStatusListeners.forEach(r=>r(this.currentStatus))}getDeviceId(){const e="guards-of-atlantis-device-id";return localStorage.getItem(e)||"unknown"}cloudPlayerToLocal(e){return{id:e.local_id,name:e.name,totalGames:e.total_games,wins:e.wins,losses:e.losses,elo:e.elo,mu:e.mu,sigma:e.sigma,ordinal:e.ordinal,lastPlayed:new Date(e.last_played),dateCreated:new Date(e.date_created),deviceId:e.device_id,level:e.level}}cloudMatchToLocal(e){const r=e.winning_team.toLowerCase(),n=e.game_length.toLowerCase();return{id:e.id,date:new Date(e.date),winningTeam:r,gameLength:n,doubleLanes:e.double_lanes,titanPlayers:e.titan_players,atlanteanPlayers:e.atlantean_players,deviceId:e.device_id}}cloudMatchPlayerToLocal(e){const r=e.team.toLowerCase();return{id:e.id,matchId:e.match_id,playerId:e.player_id,team:r,heroId:e.hero_id,heroName:e.hero_name,heroRoles:e.hero_roles,kills:e.kills,deaths:e.deaths,assists:e.assists,goldEarned:e.gold_earned,minionKills:e.minion_kills,level:e.level,deviceId:e.device_id}}}const Ur=new $le,Ole="GuardsOfAtlantisStats",s2=4,Ie={PLAYERS:"players",MATCHES:"matches",MATCH_PLAYERS:"matchPlayers"},a2=1200,Ms=25/6,kA=25/300;function _d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}class Lle{constructor(){Z(this,"db",null);Z(this,"playerRatings",{})}async initialize(){try{return this.db=await this.openDatabase(),await this.checkAndMigrateRatings(),!0}catch(e){return console.error("Failed to initialize database:",e),!1}}async checkAndMigrateRatings(){try{(await this.getAllPlayers()).some(n=>n.totalGames>0&&(n.mu===void 0||n.sigma===void 0||n.ordinal===void 0))&&(console.log("Migrating player ratings to TrueSkill system..."),await this.recalculatePlayerStats(),console.log("Migration complete!"))}catch(e){console.error("Error checking rating migration:",e)}}openDatabase(){return new Promise((e,r)=>{const n=indexedDB.open(Ole,s2);n.onupgradeneeded=s=>{const a=s.target.result;if(a.objectStoreNames.contains(Ie.PLAYERS)){const o=s.target.transaction;if(o){const l=o.objectStore(Ie.PLAYERS);l.indexNames.contains("ordinal")||l.createIndex("ordinal","ordinal",{unique:!1})}}else{const o=a.createObjectStore(Ie.PLAYERS,{keyPath:"id"});o.createIndex("name","name",{unique:!0}),o.createIndex("elo","elo",{unique:!1}),o.createIndex("ordinal","ordinal",{unique:!1})}if(!a.objectStoreNames.contains(Ie.MATCHES)){const o=a.createObjectStore(Ie.MATCHES,{keyPath:"id"});o.createIndex("date","date",{unique:!1}),o.createIndex("winningTeam","winningTeam",{unique:!1})}if(!a.objectStoreNames.contains(Ie.MATCH_PLAYERS)){const o=a.createObjectStore(Ie.MATCH_PLAYERS,{keyPath:"id"});o.createIndex("matchId","matchId",{unique:!1}),o.createIndex("playerId","playerId",{unique:!1}),o.createIndex("heroId","heroId",{unique:!1}),o.createIndex("heroName","heroName",{unique:!1}),o.createIndex("playerMatch",["playerId","matchId"],{unique:!0})}},n.onsuccess=s=>{const a=s.target.result;e(a)},n.onerror=s=>{r(s.target.error)}})}getDisplayRating(e){return e.ordinal!==void 0?Math.round((e.ordinal+25)*40+200):e.elo}getDeviceId(){const e="guards-of-atlantis-device-id";let r=localStorage.getItem(e);if(!r){const n=Date.now().toString(36),s=Math.random().toString(36).substring(2,10);r=`device_${n}_${s}`,localStorage.setItem(e,r)}return r}async getPlayer(e){return this.db||await this.initialize(),this.db?new Promise((r,n)=>{const o=this.db.transaction([Ie.PLAYERS],"readonly").objectStore(Ie.PLAYERS).get(e);o.onsuccess=()=>{r(o.result||null)},o.onerror=()=>{n(o.error)}}):null}async savePlayer(e){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return e.deviceId||(e.deviceId=this.getDeviceId()),new Promise((r,n)=>{const o=this.db.transaction([Ie.PLAYERS],"readwrite").objectStore(Ie.PLAYERS).put(e);o.onsuccess=()=>{r()},o.onerror=()=>{n(o.error)}})}async getAllPlayers(){return this.db||await this.initialize(),this.db?new Promise((e,r)=>{const a=this.db.transaction([Ie.PLAYERS],"readonly").objectStore(Ie.PLAYERS).getAll();a.onsuccess=()=>{e(a.result||[])},a.onerror=()=>{r(a.error)}}):[]}async getHeroStats(e=1,r,n){try{const s=await this.getAllMatchPlayers();let a=await this.getAllMatches();(r||n)&&(a=a.filter(c=>{const d=new Date(c.date);return!(r&&d<r||n&&d>n)}));const o=new Set(a.map(c=>c.id)),l=s.filter(c=>o.has(c.matchId)),A=new Map(a.map(c=>[c.id,c])),u=new Map;for(const c of l){const d=c.heroId;if(d==null)continue;u.has(d)||u.set(d,{heroId:d,heroName:c.heroName,icon:`heroes/${c.heroName.toLowerCase()}.png`,roles:c.heroRoles,complexity:1,expansion:"Unknown",totalGames:0,wins:0,losses:0,teammates:new Map,opponents:new Map});const f=u.get(d);f.totalGames+=1;const g=A.get(c.matchId);if(!g)continue;c.team===g.winningTeam?f.wins+=1:f.losses+=1}for(const c of a){const d=l.filter(f=>f.matchId===c.id);for(const f of d){const g=f.heroId;if(g==null||!u.has(g))continue;const y=u.get(g),v=f.team,m=v===c.winningTeam,p=d.filter(w=>w.team===v&&w.heroId!==g),x=d.filter(w=>w.team!==v);for(const w of p){if(w.heroId===void 0||w.heroId===null)continue;let _=y.teammates.get(w.heroId);_||(_={wins:0,games:0},y.teammates.set(w.heroId,_)),_.games+=1,m&&(_.wins+=1)}for(const w of x){if(w.heroId===void 0||w.heroId===null)continue;let _=y.opponents.get(w.heroId);_||(_={wins:0,games:0},y.opponents.set(w.heroId,_)),_.games+=1,m&&(_.wins+=1)}}}const h=Array.from(u.values()).map(c=>{const d=c.totalGames>0?c.wins/c.totalGames*100:0,f=Array.from(c.teammates.entries()).filter(([v,m])=>m.games>=e).map(([v,m])=>{const p=u.get(v);return p?{heroId:v,heroName:p.heroName,icon:p.icon,winRate:m.games>0?m.wins/m.games*100:0,gamesPlayed:m.games}:null}).filter(v=>v!==null).sort((v,m)=>m.winRate-v.winRate).slice(0,3),g=Array.from(c.opponents.entries()).filter(([v,m])=>m.games>=e).map(([v,m])=>{const p=u.get(v);return p?{heroId:v,heroName:p.heroName,icon:p.icon,winRate:m.games>0?m.wins/m.games*100:0,gamesPlayed:m.games}:null}).filter(v=>v!==null).sort((v,m)=>m.winRate-v.winRate).slice(0,3),y=Array.from(c.opponents.entries()).filter(([v,m])=>m.games>=e).map(([v,m])=>{const p=u.get(v);return p?{heroId:v,heroName:p.heroName,icon:p.icon,winRate:m.games>0?m.wins/m.games*100:0,gamesPlayed:m.games}:null}).filter(v=>v!==null).sort((v,m)=>v.winRate-m.winRate).slice(0,3);return{...c,winRate:d,bestTeammates:f,bestAgainst:g,worstAgainst:y,teammates:void 0,opponents:void 0}});try{const{heroes:c}=await m7(()=>Promise.resolve().then(()=>aP),void 0);for(const d of h){const f=c.find(g=>g.name===d.heroName);f&&(d.complexity=f.complexity,d.expansion=f.expansion)}}catch(c){console.error("Error enriching hero stats with heroes.ts data:",c)}return h}catch(s){return console.error("Error getting hero stats:",s),[]}}async getFilteredPlayerStats(e,r,n=!1){try{const s=await this.getAllPlayers();let a=await this.getAllMatches();const o=await this.getAllMatchPlayers();let l=null;(e||r)&&(l={start:e||new Date(0),end:r||new Date}),(e||r)&&(a=a.filter(f=>{const g=new Date(f.date);return!(e&&g<e||r&&g>r)}));const A=new Set(a.map(f=>f.id)),u=o.filter(f=>A.has(f.matchId)),h=new Map(a.map(f=>[f.id,f]));let c={};n?c=await this.calculateTrueSkillForMatches(a):c=await this.getCurrentTrueSkillRatings();const d=[];for(const f of s){const g=u.filter(L=>L.playerId===f.id);if(g.length===0)continue;let y=0,v=0,m=0,p=0,x=0,w=0,_=0,b=!1,S=null;const E=new Map,C=new Map;for(const L of g){const D=h.get(L.matchId);if(!D)continue;const z=new Date(D.date);if((!S||z>S)&&(S=z),L.team===D.winningTeam?y++:v++,L.kills!==void 0&&(m+=L.kills,b=!0),L.deaths!==void 0&&(p+=L.deaths),L.assists!==void 0&&(x+=L.assists),L.goldEarned!==void 0&&(w+=L.goldEarned),L.minionKills!==void 0&&(_+=L.minionKills),L.heroId!==void 0){const k=E.get(L.heroId);k?k.count++:E.set(L.heroId,{heroId:L.heroId,heroName:L.heroName,count:1})}if(L.heroRoles)for(const k of L.heroRoles)C.set(k,(C.get(k)||0)+1)}const N=g.length,Q=N>0?y/N*100:0,P=p>0?m/p:m,F=Array.from(E.values()).sort((L,D)=>D.count-L.count).slice(0,3),$=Array.from(C.entries()).map(([L,D])=>({role:L,count:D})).sort((L,D)=>D.count-L.count).slice(0,3);d.push({id:f.id,name:f.name,gamesPlayed:N,wins:y,losses:v,winRate:Q,kills:m,deaths:p,assists:x,kdRatio:P,totalGold:w,totalMinionKills:_,averageGold:N>0?w/N:0,averageMinionKills:N>0?_/N:0,hasCombatStats:b,favoriteHeroes:F,favoriteRoles:$,displayRating:c[f.id]||1200,lastPlayed:S})}return{players:d,dateRange:l}}catch(s){return console.error("Error getting filtered player stats:",s),{players:[],dateRange:null}}}async calculateTrueSkillForMatches(e){try{const r=[...e].sort((o,l)=>{const A=new Date(o.date).getTime(),u=new Date(l.date).getTime();return A-u}),n=await this.getAllPlayers(),s={};for(const o of n)s[o.id]=st.rating();for(const o of r){const l=await this.getMatchPlayers(o.id),A=[],u=[],h=[],c=[];for(const g of l)g.team===W.Titans?(A.push(g.playerId),u.push(s[g.playerId]||st.rating())):(h.push(g.playerId),c.push(s[g.playerId]||st.rating()));if(u.length===0||c.length===0)continue;let d;o.winningTeam===W.Titans?d=[1,2]:d=[2,1];const f=st.rate([u,c],{rank:d,beta:Ms,tau:kA});for(let g=0;g<A.length;g++)s[A[g]]=f[0][g];for(let g=0;g<h.length;g++)s[h[g]]=f[1][g]}const a={};for(const o in s){const l=s[o],A=st.ordinal(l);a[o]=Math.round((A+25)*40+200)}return a}catch(r){return console.error("Error calculating TrueSkill for matches:",r),{}}}async getAllMatchPlayers(){return this.db||await this.initialize(),this.db?new Promise((e,r)=>{const a=this.db.transaction([Ie.MATCH_PLAYERS],"readonly").objectStore(Ie.MATCH_PLAYERS).getAll();a.onsuccess=()=>{e(a.result||[])},a.onerror=()=>{r(a.error)}}):[]}async getAllMatches(){return this.db||await this.initialize(),this.db?new Promise((e,r)=>{const a=this.db.transaction([Ie.MATCHES],"readonly").objectStore(Ie.MATCHES).getAll();a.onsuccess=()=>{e(a.result||[])},a.onerror=()=>{r(a.error)}}):[]}async getMatch(e){return this.db||await this.initialize(),this.db?new Promise((r,n)=>{const o=this.db.transaction([Ie.MATCHES],"readonly").objectStore(Ie.MATCHES).get(e);o.onsuccess=()=>{r(o.result||null)},o.onerror=()=>{n(o.error)}}):null}async saveMatch(e){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return e.id||(e.id=_d()),e.deviceId||(e.deviceId=this.getDeviceId()),new Promise((r,n)=>{const o=this.db.transaction([Ie.MATCHES],"readwrite").objectStore(Ie.MATCHES).put(e);o.onsuccess=()=>{r(e.id)},o.onerror=()=>{n(o.error)}})}async deleteMatch(e){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{if(!await this.getMatch(e))throw new Error("Match not found");const n=await this.getMatchPlayers(e);await this.deleteMatchAndPlayers(e,n),await this.recalculatePlayerStats(),Ur.deleteMatchFromCloud(e).catch(s=>{console.error("[DatabaseService] Cloud deletion failed:",s)})}catch(r){throw console.error("Error deleting match:",r),r}}async deleteMatchAndPlayers(e,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return new Promise((n,s)=>{const a=this.db.transaction([Ie.MATCHES,Ie.MATCH_PLAYERS],"readwrite"),o=a.objectStore(Ie.MATCH_PLAYERS);r.forEach(A=>{o.delete(A.id)}),a.objectStore(Ie.MATCHES).delete(e),a.oncomplete=()=>{n()},a.onerror=()=>{s(a.error)}})}async deleteMatchAndPlayersOnly(e){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{if(!await this.getMatch(e))return!1;const n=await this.getMatchPlayers(e);return await this.deleteMatchAndPlayers(e,n),!0}catch(r){return console.error("Error deleting match locally:",r),!1}}initializeTrueSkillRatings(e){this.playerRatings={};for(const r of e)r.mu!==void 0&&r.sigma!==void 0?this.playerRatings[r.id]={mu:r.mu,sigma:r.sigma}:this.playerRatings[r.id]=st.rating()}async recalculatePlayerStats(){try{console.log("Starting player statistics recalculation with TrueSkill...");const e=await this.getAllPlayers();console.log(`Found ${e.length} players for recalculation`);const r=new Map;for(const s of e)r.set(s.id,{totalGames:0,wins:0,losses:0});this.playerRatings={};for(const s of e)this.playerRatings[s.id]=st.rating();let n=await this.getAllMatches();n.sort((s,a)=>{const o=new Date(s.date).getTime(),l=new Date(a.date).getTime();return o-l}),console.log(`Processing ${n.length} matches in chronological order`);for(const s of n){const a=await this.getMatchPlayers(s.id),o=[],l=[],A=[],u=[];for(const d of a)d.team===W.Titans?(o.push(d.playerId),A.push(this.playerRatings[d.playerId])):(l.push(d.playerId),u.push(this.playerRatings[d.playerId]));if(A.length===0||u.length===0){console.warn(`Skipping match ${s.id} due to empty team`);continue}let h;s.winningTeam===W.Titans?h=[1,2]:h=[2,1];const c=st.rate([A,u],{rank:h,beta:Ms,tau:kA});for(let d=0;d<o.length;d++)this.playerRatings[o[d]]=c[0][d];for(let d=0;d<l.length;d++)this.playerRatings[l[d]]=c[1][d];for(const d of a){const f=r.get(d.playerId);f&&(f.totalGames+=1,d.team===s.winningTeam?f.wins+=1:f.losses+=1)}}for(const s of e){const a=r.get(s.id),o=this.playerRatings[s.id],l={...s,totalGames:a.totalGames,wins:a.wins,losses:a.losses,mu:o.mu,sigma:o.sigma,ordinal:st.ordinal(o),elo:Math.round((st.ordinal(o)+25)*40+200),lastPlayed:a.totalGames>0?new Date:s.lastPlayed};await this.savePlayer(l)}console.log("Player statistics recalculation completed successfully")}catch(e){throw console.error("Error recalculating player stats:",e),e}}calculateNewELO(e,r,n,s,a=.7,o=32){return e}async saveMatchPlayer(e){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return e.id||(e.id=_d()),e.deviceId||(e.deviceId=this.getDeviceId()),new Promise((r,n)=>{const o=this.db.transaction([Ie.MATCH_PLAYERS],"readwrite").objectStore(Ie.MATCH_PLAYERS).put(e);o.onsuccess=()=>{r(e.id)},o.onerror=()=>{n(o.error)}})}async getMatchPlayers(e){return this.db||await this.initialize(),this.db?new Promise((r,n)=>{const l=this.db.transaction([Ie.MATCH_PLAYERS],"readonly").objectStore(Ie.MATCH_PLAYERS).index("matchId").getAll(e);l.onsuccess=()=>{r(l.result||[])},l.onerror=()=>{n(l.error)}}):[]}async getPlayerMatches(e){return this.db||await this.initialize(),this.db?new Promise((r,n)=>{const l=this.db.transaction([Ie.MATCH_PLAYERS],"readonly").objectStore(Ie.MATCH_PLAYERS).index("playerId").getAll(e);l.onsuccess=()=>{r(l.result||[])},l.onerror=()=>{n(l.error)}}):[]}async recordMatch(e,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");if(Object.keys(this.playerRatings).length===0){const f=await this.getAllPlayers();this.initializeTrueSkillRatings(f)}const n=r.map(async f=>{const g=await this.getPlayer(f.id);if(!g){const y=st.rating(),v={id:f.id,name:f.id,totalGames:0,wins:0,losses:0,elo:a2,mu:y.mu,sigma:y.sigma,ordinal:st.ordinal(y),lastPlayed:new Date,dateCreated:new Date,deviceId:this.getDeviceId(),level:f.level||1};return await this.savePlayer(v),this.playerRatings[f.id]=y,v}return this.playerRatings[f.id]||(g.mu!==void 0&&g.sigma!==void 0?this.playerRatings[f.id]={mu:g.mu,sigma:g.sigma}:this.playerRatings[f.id]=st.rating()),f.level!==void 0&&(g.level===void 0||f.level>g.level)&&(g.level=f.level,await this.savePlayer(g)),g}),s=await Promise.all(n),a=[],o=[],l=[],A=[];for(let f=0;f<r.length;f++)r[f].team===W.Titans?(a.push(r[f].id),o.push(this.playerRatings[r[f].id])):(l.push(r[f].id),A.push(this.playerRatings[r[f].id]));const u={id:_d(),date:e.date,winningTeam:e.winningTeam,gameLength:e.gameLength,doubleLanes:e.doubleLanes,titanPlayers:a.length,atlanteanPlayers:l.length,deviceId:this.getDeviceId()};await this.saveMatch(u);let h;e.winningTeam===W.Titans?h=[1,2]:h=[2,1];const c=st.rate([o,A],{rank:h,beta:Ms,tau:kA}),d=r.map(async(f,g)=>{const y=s[g],v=f.team===e.winningTeam;let m;if(f.team===W.Titans){const w=a.indexOf(f.id);m=c[0][w]}else{const w=l.indexOf(f.id);m=c[1][w]}this.playerRatings[f.id]=m;const p={...y,totalGames:y.totalGames+1,wins:y.wins+(v?1:0),losses:y.losses+(v?0:1),mu:m.mu,sigma:m.sigma,ordinal:st.ordinal(m),elo:Math.round((st.ordinal(m)+25)*40+200),lastPlayed:new Date,level:f.level||y.level};await this.savePlayer(p);const x={id:_d(),matchId:u.id,playerId:y.id,team:f.team,heroId:f.heroId,heroName:f.heroName,heroRoles:f.heroRoles,kills:f.kills,deaths:f.deaths,assists:f.assists,goldEarned:f.goldEarned,minionKills:f.minionKills,level:f.level,deviceId:this.getDeviceId()};await this.saveMatchPlayer(x)});return await Promise.all(d),Ur.triggerAutoUpload(),u.id}async getPlayerStats(e){const r=await this.getPlayer(e);if(!r)return{player:null,favoriteHeroes:[],allHeroesPlayed:[],favoriteRoles:[],allRolesPlayed:[],matchesPlayed:[]};const n=await this.getPlayerMatches(e),s=new Map;n.forEach(h=>{const c=s.get(h.heroId);c?c.count+=1:s.set(h.heroId,{heroId:h.heroId,heroName:h.heroName,count:1})});const a=Array.from(s.values()).sort((h,c)=>c.count-h.count).slice(0,3),o=Array.from(s.values()).sort((h,c)=>c.count-h.count),l=new Map;n.forEach(h=>{h.heroRoles.forEach(c=>{const d=l.get(c);d?d.count+=1:l.set(c,{role:c,count:1})})});const A=Array.from(l.values()).sort((h,c)=>c.count-h.count).slice(0,3),u=Array.from(l.values()).sort((h,c)=>c.count-h.count);return{player:r,favoriteHeroes:a,allHeroesPlayed:o,favoriteRoles:A,allRolesPlayed:u,matchesPlayed:n}}async calculateWinProbability(e,r){if(Object.keys(this.playerRatings).length===0){const f=await this.getAllPlayers();this.initializeTrueSkillRatings(f)}const n=[],s=[];for(const f of e)this.playerRatings[f]?n.push(this.playerRatings[f]):n.push(st.rating());for(const f of r)this.playerRatings[f]?s.push(this.playerRatings[f]):s.push(st.rating());const a=n.reduce((f,g)=>f+g.mu,0),o=n.reduce((f,g)=>f+g.sigma**2,0)+n.length*Ms**2,l=s.reduce((f,g)=>f+g.mu,0),A=s.reduce((f,g)=>f+g.sigma**2,0)+s.length*Ms**2,u=Math.sqrt(o+A),h=a-l,d=new QC(0,u).cdf(h);return Math.round(d*100)}async calculateWinProbabilityWithCI(e,r){if(Object.keys(this.playerRatings).length===0){const S=await this.getAllPlayers();this.initializeTrueSkillRatings(S)}const n=[],s=[];for(const S of e)this.playerRatings[S]?n.push(this.playerRatings[S]):n.push(st.rating());for(const S of r)this.playerRatings[S]?s.push(this.playerRatings[S]):s.push(st.rating());const a=n.reduce((S,E)=>S+E.mu,0),o=n.reduce((S,E)=>S+E.sigma**2,0),l=o+n.length*Ms**2,A=s.reduce((S,E)=>S+E.mu,0),u=s.reduce((S,E)=>S+E.sigma**2,0),h=u+s.length*Ms**2,c=a-A,d=l+h,f=Math.sqrt(d),g=new QC(0,f),y=g.cdf(c),v=o+u,p=1.96*Math.sqrt(v),x=c-p,w=g.cdf(x),_=c+p,b=g.cdf(_);return{team1Probability:Math.round(y*100),team1Lower:Math.round(w*100),team1Upper:Math.round(b*100),team2Probability:Math.round((1-y)*100),team2Lower:Math.round((1-b)*100),team2Upper:Math.round((1-w)*100)}}async generateBalancedTeams(e){const r=await this.getAllPlayers(),n=r.filter(o=>e.includes(o.id));if(n.length<4)return{team1:[],team2:[]};Object.keys(this.playerRatings).length===0&&this.initializeTrueSkillRatings(r),n.sort((o,l)=>{const A=this.getDisplayRating(o);return this.getDisplayRating(l)-A});const s=[],a=[];return n.forEach(o=>{const l=s.reduce((u,h)=>u+this.getDisplayRating(h),0),A=a.reduce((u,h)=>u+this.getDisplayRating(h),0);l<=A?s.push(o):a.push(o)}),{team1:s.map(o=>o.id),team2:a.map(o=>o.id)}}async generateBalancedTeamsByExperience(e){return this.getAllPlayers().then(r=>{const n=r.filter(o=>e.includes(o.id));if(n.length<4)return{team1:[],team2:[]};n.sort((o,l)=>l.totalGames-o.totalGames);const s=[],a=[];return n.forEach(o=>{const l=s.reduce((u,h)=>u+h.totalGames,0),A=a.reduce((u,h)=>u+h.totalGames,0);l<=A?s.push(o):a.push(o)}),{team1:s.map(o=>o.id),team2:a.map(o=>o.id)}})}async exportData(){const e=await this.getAllPlayers(),r=await this.getAllMatches(),n=[];for(const s of r){const a=await this.getMatchPlayers(s.id);n.push(...a)}return{players:e,matches:r,matchPlayers:n,exportDate:new Date,version:s2}}async importData(e,r="replace"){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{if(r==="replace"){await this.clearAllData();for(const n of e.players)await this.savePlayer(n);for(const n of e.matches)await this.saveMatch(n);for(const n of e.matchPlayers)await this.saveMatchPlayer(n)}else await this.mergeData(e);return await this.recalculatePlayerStats(),!0}catch(n){return console.error("Error importing data:",n),!1}}async mergeData(e){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{const r=this.getDeviceId(),n=await this.getAllPlayers(),s=new Set(n.map(A=>A.id));for(const A of e.players)if(!s.has(A.id)){const u={id:A.id,name:A.name,totalGames:0,wins:0,losses:0,elo:a2,mu:void 0,sigma:void 0,ordinal:void 0,lastPlayed:new Date,dateCreated:new Date,deviceId:`imported_${r}`,level:A.level||1};await this.savePlayer(u),s.add(A.id)}const a=await this.getAllMatches(),o=new Set(a.map(A=>A.id)),l=new Map;for(const A of e.matchPlayers)l.has(A.matchId)||l.set(A.matchId,[]),l.get(A.matchId).push(A);for(const A of e.matches){if(o.has(A.id))continue;A.deviceId||(A.deviceId=`imported_${r}`),await this.saveMatch(A);const u=l.get(A.id)||[];for(const h of u)h.deviceId||(h.deviceId=`imported_${r}`),await this.saveMatchPlayer(h)}return await this.recalculatePlayerStats(),!0}catch(r){return console.error("Error merging data:",r),!1}}async clearAllData(){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{const e=this.db.transaction([Ie.PLAYERS,Ie.MATCHES,Ie.MATCH_PLAYERS],"readwrite");return e.objectStore(Ie.PLAYERS).clear(),e.objectStore(Ie.MATCHES).clear(),e.objectStore(Ie.MATCH_PLAYERS).clear(),this.playerRatings={},new Promise((r,n)=>{e.oncomplete=()=>r(!0),e.onerror=()=>n(e.error)})}catch(e){return console.error("Error clearing database:",e),!1}}async getCurrentTrueSkillRatings(){try{let e=await this.getAllMatches();e.sort((a,o)=>{const l=new Date(a.date).getTime(),A=new Date(o.date).getTime();return l-A});const r=await this.getAllPlayers(),n={};for(const a of r)n[a.id]=st.rating();for(let a=0;a<e.length;a++){const o=e[a],l=await this.getMatchPlayers(o.id),A=[],u=[],h=[],c=[];for(const g of l)g.team===W.Titans?(A.push(g.playerId),u.push(n[g.playerId])):(h.push(g.playerId),c.push(n[g.playerId]));if(u.length===0||c.length===0)continue;let d;o.winningTeam===W.Titans?d=[1,2]:d=[2,1];const f=st.rate([u,c],{rank:d,beta:Ms,tau:kA});for(let g=0;g<A.length;g++)n[A[g]]=f[0][g];for(let g=0;g<h.length;g++)n[h[g]]=f[1][g]}const s={};for(const a in n){const o=n[a],l=st.ordinal(o);s[a]=Math.round((l+25)*40+200)}return s}catch(e){return console.error("Error getting current TrueSkill ratings:",e),{}}}async getHistoricalRatings(){try{let e=await this.getAllMatches();e.sort((o,l)=>{const A=new Date(o.date).getTime(),u=new Date(l.date).getTime();return A-u});const r=await this.getAllPlayers(),n={};for(const o of r)n[o.id]=st.rating();const s=[],a={};for(const o in n){const l=n[o],A=st.ordinal(l),u=Math.round((A+25)*40+200);a[o]=u}s.push({date:e.length>0?e[0].date.toString():new Date().toISOString(),matchNumber:0,ratings:a,participants:[]});for(let o=0;o<e.length;o++){const l=e[o],A=await this.getMatchPlayers(l.id),u=[],h=[],c=[],d=[];for(const v of A)v.team===W.Titans?(u.push(v.playerId),h.push(n[v.playerId])):(c.push(v.playerId),d.push(n[v.playerId]));if(h.length===0||d.length===0)continue;let f;l.winningTeam===W.Titans?f=[1,2]:f=[2,1];const g=st.rate([h,d],{rank:f,beta:Ms,tau:kA});for(let v=0;v<u.length;v++)n[u[v]]=g[0][v];for(let v=0;v<c.length;v++)n[c[v]]=g[1][v];const y={};for(const v in n){const m=n[v],p=st.ordinal(m),x=Math.round((p+25)*40+200);y[v]=x}s.push({date:l.date.toString(),matchNumber:o+1,ratings:y,participants:A.map(v=>v.playerId)})}return s}catch(e){return console.error("Error getting historical ratings:",e),[]}}async hasMatchData(){return(await this.getAllMatches()).length>0}async updateMatchPlayer(e,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");const s=this.db.transaction(["matchPlayers"],"readwrite").objectStore("matchPlayers"),a=await s.get(e);if(a){const o={...a,...r};await s.put(o)}}async getPlayersWithNoGames(){return this.db||await this.initialize(),this.db?(await this.getAllPlayers()).filter(r=>r.totalGames===0):[]}async deletePlayer(e){if(this.db||await this.initialize(),!this.db)return!1;try{const r=await this.getPlayer(e);if(!r)return console.warn(`Player with ID ${e} not found`),!1;if(r.totalGames!==0)return console.warn(`Cannot delete player ${e}: has ${r.totalGames} games recorded`),!1;const n=await this.getPlayerMatches(e);return n.length>0?(console.warn(`Cannot delete player ${e}: has ${n.length} match records`),!1):new Promise((s,a)=>{const A=this.db.transaction([Ie.PLAYERS],"readwrite").objectStore(Ie.PLAYERS).delete(e);A.onsuccess=()=>{console.log(`Successfully deleted player ${e}`),s(!0)},A.onerror=()=>{console.error(`Error deleting player ${e}:`,A.error),a(A.error)}})}catch(r){return console.error(`Error deleting player ${e}:`,r),!1}}async updateMatch(e,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return new Promise((n,s)=>{const o=this.db.transaction([Ie.MATCHES],"readwrite").objectStore(Ie.MATCHES),l=o.get(e);l.onsuccess=()=>{const A=l.result;if(!A){s(new Error(`Match with ID ${e} not found`));return}const u={...A,...r},h=o.put(u);h.onsuccess=()=>n(),h.onerror=()=>s(h.error)},l.onerror=()=>s(l.error)})}async updateMatchPlayers(e){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return new Promise((r,n)=>{const a=this.db.transaction([Ie.MATCH_PLAYERS],"readwrite").objectStore(Ie.MATCH_PLAYERS);let o=e.length,l=!1;if(o===0){r();return}e.forEach(A=>{const u=a.get(A.id);u.onsuccess=()=>{if(l)return;const h=u.result;if(!h){l=!0,n(new Error(`Match player with ID ${A.id} not found`));return}const c={...h,...A.updates},d=a.put(c);d.onsuccess=()=>{o--,o===0&&r()},d.onerror=()=>{l=!0,n(d.error)}},u.onerror=()=>{l=!0,n(u.error)}})})}validateMatchEdit(e,r){const n=[],s=[],a=r.filter(d=>d.team===W.Titans),o=r.filter(d=>d.team===W.Atlanteans);a.length===0&&n.push({field:"teams",message:"Titans team cannot be empty",severity:"error"}),o.length===0&&n.push({field:"teams",message:"Atlanteans team cannot be empty",severity:"error"}),Math.abs(a.length-o.length)>1&&s.push({field:"teams",message:`Team sizes are unbalanced (Titans: ${a.length}, Atlanteans: ${o.length})`,severity:"warning"});const A=new Map;r.forEach(d=>{A.has(d.heroId)||A.set(d.heroId,[]),A.get(d.heroId).push(d.playerId)}),A.forEach((d,f)=>{d.length>1&&n.push({field:"hero",message:`Hero ID ${f} is assigned to multiple players: ${d.join(", ")}`,severity:"error"})}),r.forEach(d=>{if(d.kills&&d.kills>0){const y=e.gameLength===$e.Quick?10:20;d.kills>y&&s.push({field:"kills",playerId:d.playerId,message:`${d.kills} kills seems high for ${e.gameLength} match`,severity:"warning"})}d.deaths&&d.deaths>15&&s.push({field:"deaths",playerId:d.playerId,message:`${d.deaths} deaths seems very high`,severity:"warning"}),["kills","deaths","assists","goldEarned","minionKills"].forEach(f=>{const g=d[f];g!==void 0&&g<0&&n.push({field:f,playerId:d.playerId,message:`${f} cannot be negative`,severity:"error"})}),d.level!==void 0&&(d.level<1||d.level>10)&&n.push({field:"level",playerId:d.playerId,message:"Level must be between 1 and 10",severity:"error"})});const u=new Date(e.date);u>new Date&&s.push({field:"date",message:"Match date is in the future",severity:"warning"});const c=new Date;return c.setFullYear(c.getFullYear()-1),u<c&&s.push({field:"date",message:"Match date is more than a year old",severity:"warning"}),{isValid:n.length===0,errors:n,warnings:s}}async editMatch(e,r,n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");const s=await this.getMatch(e);if(!s)throw new Error(`Match with ID ${e} not found`);const a=await this.getMatchPlayers(e),o={...s,...r},l=a.map(u=>{const h=n.find(c=>c.id===u.id);return h?{...u,...h.updates}:u}),A=this.validateMatchEdit(o,l);if(!A.isValid)throw new Error(`Validation failed: ${A.errors.map(u=>u.message).join(", ")}`);try{await Promise.all([this.updateMatch(e,r),this.updateMatchPlayers(n)]),await this.recalculatePlayerStats(),console.log(`Successfully edited match ${e}`)}catch(u){throw console.error(`Error editing match ${e}:`,u),new Error(`Failed to edit match: ${u.message}`)}}async getEditableMatch(e){try{const r=await this.getMatch(e);if(!r)return null;const n=await this.getMatchPlayers(e),s=await Promise.all(n.map(async a=>{const o=await this.getPlayer(a.playerId);return{...a,playerName:(o==null?void 0:o.name)||"Unknown Player"}}));return{match:r,players:s}}catch(r){return console.error(`Error getting editable match ${e}:`,r),null}}async canEditMatch(e){try{if(!await this.getMatch(e))return{canEdit:!1,reason:"Match not found"};const n=await this.getMatchPlayers(e);if(n.length===0)return{canEdit:!1,reason:"Match has no player data"};for(const s of n)if(!await this.getPlayer(s.playerId))return{canEdit:!1,reason:`Player ${s.playerId} no longer exists`};return{canEdit:!0}}catch(r){return console.error(`Error checking if match ${e} can be edited:`,r),{canEdit:!1,reason:"Error checking match editability"}}}}const YE=new Lle,be=YE,Hle=t=>YE.getDisplayRating(t),Kle=({strategyTime:t,moveTime:e,gameLength:r,onStrategyTimeChange:n,onMoveTimeChange:s,onGameLengthChange:a,players:o,onAddPlayer:l,onRemovePlayer:A,onDraftHeroes:u,selectedExpansions:h,onToggleExpansion:c,onPlayerNameChange:d,duplicateNames:f,canStartDrafting:g,heroCount:y,maxComplexity:v,onMaxComplexityChange:m,strategyTimerEnabled:p,moveTimerEnabled:x,onStrategyTimerEnabledChange:w,onMoveTimerEnabledChange:_,useDoubleLaneFor6Players:b,onUseDoubleLaneFor6PlayersChange:S,onViewMatches:E})=>{const{playSound:C}=Ge(),[N,Q]=B.useState([]),[P,F]=B.useState({timers:!0,"game-length":!0,complexity:!0,players:!0,names:!0,expansions:!1}),$=$l();B.useEffect(()=>{t!==90&&n(90),e!==30&&s(30),be.hasMatchData(),(async()=>{try{const Me=(await be.getAllPlayers()).filter(ze=>ze.totalGames>0).map(ze=>ze.name).filter((ze,$t,Ee)=>Ee.indexOf(ze)===$t).sort();Q(Me)}catch(de){console.error("Error loading player names:",de)}})()},[]);const L=o.filter(ve=>ve.team===W.Titans).length,D=o.filter(ve=>ve.team===W.Atlanteans).length,z=L+D,M=o.filter(ve=>ve.name.trim()!=="").length===z&&z>0,j=f.length===0,I=z<=6,G=z<10,X=L<5,te=D<5,Ae=L>=2&&D>=2,ie=L>0&&D>0&&Math.abs(L-D)<=1&&Ae,V=z===6&&r===$e.Long,Y=ie&&M&&j&&g,U=ve=>{C("buttonClick"),F({...P,[ve]:!P[ve]})},H=ve=>{G&&(ve===W.Titans?X:te)&&(C("buttonClick"),l(ve))},K=ve=>{C("toggleSwitch"),ve?w(!p):_(!x)},O=ve=>{ve===$e.Quick&&!I||(C("buttonClick"),a(ve))},oe=ve=>{C("toggleSwitch"),c(ve)},me=ve=>{C("buttonClick"),m(ve)},se=()=>{C("toggleSwitch"),S(!b)},re=()=>{Y&&(C("buttonClick"),u())},Le=()=>{C("buttonClick"),E()};return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Game Setup"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>U("timers"),children:[i.jsx("span",{className:"mr-2",children:P.timers?"":""}),"Timer Settings"]}),P.timers&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("label",{className:"flex-grow",children:"Strategy Timer"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ue,{text:p?"Disable timer (unlimited time)":"Enable timer (timed phase)",position:"top",children:i.jsx("div",{className:`w-12 h-6 rounded-full flex items-center p-1 cursor-pointer transition-colors ${p?"bg-green-600 justify-end":"bg-gray-600 justify-start"}`,onClick:()=>K(!0),children:i.jsx("div",{className:"bg-white w-4 h-4 rounded-full"})})}),i.jsx("div",{className:"ml-2",children:p?i.jsx(as,{size:16}):i.jsx(rf,{size:16})})]})]}),i.jsx("div",{className:p?"":"opacity-50",children:i.jsx(T_,{value:t,onChange:n,tooltip:"This is the amount of time teams will have to publicly discuss what cards to play",minValue:30,maxValue:300,step:10,disabled:!p})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("label",{className:"flex-grow",children:"Action Timer"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ue,{text:x?"Disable timer (unlimited time)":"Enable timer (timed phase)",position:"top",children:i.jsx("div",{className:`w-12 h-6 rounded-full flex items-center p-1 cursor-pointer transition-colors ${x?"bg-green-600 justify-end":"bg-gray-600 justify-start"}`,onClick:()=>K(!1),children:i.jsx("div",{className:"bg-white w-4 h-4 rounded-full"})})}),i.jsx("div",{className:"ml-2",children:x?i.jsx(as,{size:16}):i.jsx(rf,{size:16})})]})]}),i.jsx("div",{className:x?"":"opacity-50",children:i.jsx(T_,{value:e,onChange:s,tooltip:"This is the time each player will have to resolve their cards once revealed",minValue:10,maxValue:120,step:10,disabled:!x})})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>U("game-length"),children:[i.jsx("span",{className:"mr-2",children:P["game-length"]?"":""}),"Game Length"]}),P["game-length"]&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[i.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"radio",name:"gameLength",value:$e.Quick,checked:r===$e.Quick,onChange:()=>O($e.Quick),disabled:!I,className:"form-radio h-5 w-5 text-blue-600"}),i.jsxs("span",{className:`ml-2 ${I?"":"text-gray-500"}`,children:["Quick",!I&&i.jsx("span",{className:"ml-2 text-red-400 text-sm",children:"(Max 6 players)"})]})]}),i.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"radio",name:"gameLength",value:$e.Long,checked:r===$e.Long,onChange:()=>O($e.Long),className:"form-radio h-5 w-5 text-blue-600"}),i.jsx("span",{className:"ml-2",children:"Long"})]})]}),V&&i.jsxs("div",{className:"mt-4 mb-4 bg-blue-900/30 p-3 rounded",children:[i.jsxs("label",{className:"flex items-center cursor-pointer mb-1",children:[i.jsx("input",{type:"checkbox",checked:b,onChange:se,className:"form-checkbox h-5 w-5 text-blue-600 mr-2"}),i.jsx("span",{className:"font-medium",children:"Use Double Lane Map"})]}),i.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Enable this option to use two lanes (top and bottom) for 6 player games"})]}),i.jsxs("div",{className:"mt-4 bg-gray-700 p-3 rounded-md text-sm",children:[i.jsx("h4",{className:"font-semibold mb-1",children:"Current Configuration:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:[i.jsx("li",{children:r===$e.Quick?"3 waves, single lane":z<=5||z===6&&!b?"5 waves, single lane":"7 waves per lane, two lanes"}),i.jsx("li",{children:r===$e.Quick?z<=5?"4 lives per team":"5 lives per team":z===6&&!b?"8 lives per team":z<=8?"6 lives per team":"7 lives per team"}),(z>=7||z===6&&b&&r===$e.Long)&&i.jsx("li",{className:"text-amber-300",children:"Using two separate lanes (top and bottom)"})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>U("complexity"),children:[i.jsx("span",{className:"mr-2",children:P.complexity?"":""}),"Max Complexity"]}),P.complexity&&i.jsx(i.Fragment,{children:i.jsx("div",{className:"flex flex-col gap-3 mb-4",children:[1,2,3,4].map(ve=>i.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"radio",name:"complexity",value:ve,checked:v===ve,onChange:()=>me(ve),className:"form-radio h-5 w-5 text-blue-600"}),i.jsxs("span",{className:"ml-2",children:[ve," ",ve===1?"(Simplest)":ve===4?"(Most Complex)":""]})]},ve))})})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>U("players"),children:[i.jsx("span",{className:"mr-2",children:P.players?"":""}),"Players"]}),P.players&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between mb-2",children:[i.jsxs("span",{children:["Titans: ",L," players"]}),i.jsx("button",{className:`px-3 py-1 rounded text-sm ${G&&X?"bg-blue-700 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,onClick:()=>H(W.Titans),disabled:!G||!X,children:"Add Player"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Atlanteans: ",D," players"]}),i.jsx("button",{className:`px-3 py-1 rounded text-sm ${G&&te?"bg-red-700 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,onClick:()=>H(W.Atlanteans),disabled:!G||!te,children:"Add Player"})]})]}),!G&&i.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Maximum 10 players allowed"}),!X&&L>=5&&i.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Maximum 5 Titans players allowed"}),!te&&D>=5&&i.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Maximum 5 Atlanteans players allowed"}),L!==D&&i.jsx("div",{className:`text-amber-400 text-sm mt-2 ${Math.abs(L-D)>1?"text-red-400":""}`,children:Math.abs(L-D)>1?"Teams must have equal player counts or differ by only 1 player":"Teams are uneven. The team with more players will need to use handicap cards."}),z>0&&!Ae&&i.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Each team must have at least 2 players"}),z>0&&!M&&i.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"All players must enter their names"}),f.length>0&&i.jsxs("div",{className:"text-red-400 text-sm mt-2",children:["Duplicate names found: ",f.join(", ")]}),z>0&&!g&&i.jsxs("div",{className:"text-red-400 text-sm mt-2",children:["Not enough heroes (",y,") for ",z," players. Select more expansions or increase complexity."]}),L>0&&L===D&&M&&Ae&&f.length===0&&i.jsxs("div",{className:"text-emerald-400 text-sm mt-2",children:["Teams are balanced with ",L," players each"]}),L>0&&D>0&&L!==D&&Math.abs(L-D)===1&&M&&Ae&&f.length===0&&i.jsxs("div",{className:"text-emerald-400 text-sm mt-2",children:["Teams are valid: ",L," Titans vs ",D," Atlanteans"]})]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>U("expansions"),children:[i.jsx("span",{className:"mr-2",children:P.expansions?"":""}),"Expansions"]}),P.expansions&&i.jsx(i.Fragment,{children:i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:$.map(ve=>i.jsxs("label",{className:"flex items-center bg-gray-700 p-3 rounded-lg cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:h.includes(ve),onChange:()=>oe(ve),className:"mr-2 h-5 w-5"}),i.jsx("span",{children:ve})]},ve))})})]}),o.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>U("names"),children:[i.jsx("span",{className:"mr-2",children:P.names?"":""}),"Player Names"]}),P.names&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(ve=>{const de=ve.name.trim()!==""&&f.includes(ve.name.trim());return i.jsx(Jk,{player:ve,onNameChange:Me=>d(ve.id,Me),onRemove:()=>{C("buttonClick"),A(ve.id)},isDuplicate:de,suggestedNames:N},ve.id)})})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[i.jsx("div",{className:"relative",children:i.jsx(Ue,{text:"View match statistics and player records",position:"top",disableMobileTooltip:!0,children:i.jsx("button",{className:"px-6 py-3 rounded-lg font-medium text-white bg-green-600 hover:bg-green-500",onClick:Le,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(CP,{size:20,className:"mr-2"}),"View Matches"]})})})}),i.jsx("div",{className:"relative",children:i.jsx(Ue,{text:"Click to select heroes for each player and start the game.",position:"top",disableMobileTooltip:!0,children:i.jsx("button",{className:`px-6 py-3 rounded-lg font-medium text-white ${Y?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 cursor-not-allowed"}`,onClick:re,disabled:!Y,children:"Draft Heroes"})})})]}),i.jsx("div",{className:"text-sm text-center w-full mt-4",children:i.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[i.jsxs("span",{className:"text-blue-300",children:["Available heroes: ",y]}),z>0&&i.jsx("span",{className:"text-yellow-300",children:g?" Enough heroes for drafting":" Not enough heroes for drafting"})]})}),i.jsx("p",{className:"mt-4 text-xs text-gray-300 text-center mb-2",children:"Disclaimer: This is not a professional product and it is always recommended you back up your data (View Matches>Export Data). This is not an official product and has not been approved by Wolff Designa. All game content is the sole property of Wolff Designa."})]})},zle={kills:!1,deaths:!1,assists:!1,goldEarned:!1,minionKills:!1,level:!1},ZE=({players:t,onComplete:e,isVisible:r})=>{const{playSound:n}=Ge(),[s,a]=B.useState(!1),[o,l]=B.useState(zle),[A,u]=B.useState({}),[h,c]=B.useState(0),[d,f]=B.useState({minionBattle:!1,pushLane:!1,removeTokens:!1,retrieveCards:!1,levelUp:!1,pityCoins:!1});B.useEffect(()=>{if(r){const C={};t.forEach(N=>{var Q;C[N.id]={goldCollected:0,kills:0,assists:0,deaths:0,minionKills:0,level:((Q=N.stats)==null?void 0:Q.level)||1}}),u(C),f({minionBattle:!1,pushLane:!1,removeTokens:!1,retrieveCards:!1,levelUp:!1,pityCoins:!1}),c(0),n("phaseChange")}},[t,r,n]);const g=(C,N,Q)=>{n("buttonClick"),u(P=>{var L;const F=((L=P[C])==null?void 0:L[N])||0;if(N==="level"){const D=Math.max(1,Math.min(10,F+Q));return{...P,[C]:{...P[C],[N]:D}}}const $=Math.max(0,F+Q);return{...P,[C]:{...P[C],[N]:$}}})},y=C=>{n("buttonClick"),f(N=>({...N,[C]:!N[C]}))},v=(C,N)=>{n("toggleSwitch"),l(Q=>({...Q,[C]:N}))},m=()=>{n("phaseChange"),f({minionBattle:!0,pushLane:!0,removeTokens:!0,retrieveCards:!0,levelUp:!0,pityCoins:!0})},p=()=>{if(n("phaseChange"),s){const C={};Object.entries(A).forEach(([N,Q])=>{const P=parseInt(N),F={goldCollected:o.goldEarned?Q.goldCollected:void 0,kills:o.kills?Q.kills:void 0,assists:o.assists?Q.assists:void 0,deaths:o.deaths?Q.deaths:void 0,minionKills:o.minionKills?Q.minionKills:void 0,level:o.level?Q.level:void 0};C[P]=F}),e(C)}else e()},x=C=>{n("buttonClick"),g(C,"kills",1);const N=t.find(Q=>Q.id===C);N&&t.forEach(Q=>{Q.id!==C&&Q.team===N.team&&g(Q.id,"assists",1)})},w=C=>{n("buttonClick"),c(C)},_=[{tab:0,enabled:o.kills,icon:i.jsx(Ir,{size:16}),label:"Kills"},{tab:1,enabled:o.deaths,icon:i.jsx(Da,{size:16}),label:"Deaths"},{tab:2,enabled:o.minionKills,icon:i.jsx(Yo,{size:16}),label:"Minions"},{tab:3,enabled:o.goldEarned,icon:i.jsx(ts,{size:16}),label:"Gold"},{tab:4,enabled:o.level,icon:i.jsx(At,{size:16}),label:"Level"}].filter(C=>C.enabled);if(B.useEffect(()=>{s&&_.length>0&&!_.find(C=>C.tab===h)&&c(_[0].tab)},[o,h,_,s]),!r)return null;const b=Object.values(d).every(C=>C),S=t.filter(C=>C.team===W.Titans),E=t.filter(C=>C.team===W.Atlanteans);return i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"End of Round Assistant"}),i.jsx("button",{onClick:()=>e(),className:"p-1 bg-gray-700 hover:bg-gray-600 rounded-full","aria-label":"Close",children:i.jsx(jr,{size:24})})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("h3",{className:"text-xl font-semibold",children:"End of Round Checklist"}),i.jsxs("button",{onClick:m,className:"px-4 py-1 bg-green-600 hover:bg-green-500 rounded-lg flex items-center text-sm",children:[i.jsx(DD,{size:16,className:"mr-2"}),"Check All Items"]})]}),i.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg space-y-3",children:[i.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${d.minionBattle?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("minionBattle"),children:[i.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${d.minionBattle?"bg-green-600":"bg-gray-600"}`,children:d.minionBattle?i.jsx(Bi,{size:16}):i.jsx("span",{children:"1"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Minion Battle"}),i.jsx("p",{className:"text-sm text-gray-300",children:"Count minions in Battle Zone. Team with fewer minions removes the difference."})]})]}),i.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${d.pushLane?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("pushLane"),children:[i.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${d.pushLane?"bg-green-600":"bg-gray-600"}`,children:d.pushLane?i.jsx(Bi,{size:16}):i.jsx("span",{children:"2"})}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:["Push the Lane ",i.jsx("span",{className:"text-gray-400 font-normal",children:"(if applicable)"})]}),i.jsx("p",{className:"text-sm text-gray-300",children:"Flip Wave counter, move Battle Zone, respawn minions."})]})]}),i.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${d.removeTokens?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("removeTokens"),children:[i.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${d.removeTokens?"bg-green-600":"bg-gray-600"}`,children:d.removeTokens?i.jsx(Bi,{size:16}):i.jsx("span",{children:"3"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Remove Tokens, Return Markers"}),i.jsx("p",{className:"text-sm text-gray-300",children:"Clear the board of all tokens and return markers."})]})]}),i.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${d.retrieveCards?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("retrieveCards"),children:[i.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${d.retrieveCards?"bg-green-600":"bg-gray-600"}`,children:d.retrieveCards?i.jsx(Bi,{size:16}):i.jsx("span",{children:"4"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Retrieve Cards"}),i.jsx("p",{className:"text-sm text-gray-300",children:"Take back all resolved and discarded cards into hand."})]})]}),i.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${d.levelUp?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("levelUp"),children:[i.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${d.levelUp?"bg-green-600":"bg-gray-600"}`,children:d.levelUp?i.jsx(Bi,{size:16}):i.jsx("span",{children:"5"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Level Up"}),i.jsx("p",{className:"text-sm text-gray-300",children:"If you have enough coins, purchase level up(s). This is mandatory!"})]})]}),i.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${d.pityCoins?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("pityCoins"),children:[i.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${d.pityCoins?"bg-green-600":"bg-gray-600"}`,children:d.pityCoins?i.jsx(Bi,{size:16}):i.jsx("span",{children:"6"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"Collect Pity Coin"}),i.jsx("p",{className:"text-sm text-gray-300",children:"Players who did NOT level up collect 1 coin."})]})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("input",{type:"checkbox",id:"enableLogging",checked:s,onChange:C=>{n("toggleSwitch"),a(C.target.checked)},className:"mr-3 h-5 w-5"}),i.jsx("label",{htmlFor:"enableLogging",className:"text-xl font-medium",children:"Log Player Stats (Optional)"})]}),s&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-gray-300 italic",children:"Enter stats for this round only. You only need to enter the stats you are interested in tracking."}),i.jsxs("div",{className:"mb-4 p-3 bg-gray-700/50 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Select Stats to Track"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[i.jsx($o,{icon:i.jsx(Ir,{size:16}),label:"Kills",enabled:o.kills,onChange:C=>v("kills",C)}),i.jsx($o,{icon:i.jsx(Da,{size:16}),label:"Deaths",enabled:o.deaths,onChange:C=>v("deaths",C)}),i.jsx($o,{icon:i.jsx(et,{size:16}),label:"Assists",enabled:o.assists,onChange:C=>v("assists",C)}),i.jsx($o,{icon:i.jsx(ts,{size:16}),label:"Gold Earned",enabled:o.goldEarned,onChange:C=>v("goldEarned",C)}),i.jsx($o,{icon:i.jsx(Yo,{size:16}),label:"Minion Kills",enabled:o.minionKills,onChange:C=>v("minionKills",C)}),i.jsx($o,{icon:i.jsx(At,{size:16}),label:"Level",enabled:o.level,onChange:C=>v("level",C)})]})]}),_.length>0?i.jsx("div",{className:"flex border-b border-gray-700 flex-wrap",children:_.map(C=>i.jsxs("button",{className:`px-4 py-2 flex items-center ${h===C.tab?"border-b-2 border-blue-500 text-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>w(C.tab),children:[C.icon," ",i.jsx("span",{className:"ml-2",children:C.label})]},C.tab))}):i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx("p",{className:"mb-2",children:"No stats selected for tracking"}),i.jsx("p",{className:"text-sm",children:"Enable stat categories above to begin tracking data"})]}),i.jsxs("div",{className:"mt-4",children:[h===0&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-4 text-sm text-gray-300",children:i.jsx("p",{children:"When a player gets a kill, their teammates automatically receive an assist. Click on the player who got the kill."})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),i.jsx("div",{className:"space-y-2",children:S.map(C=>{var N,Q,P,F,$;return i.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:L=>{const D=L.target;D.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium flex items-center",children:[C.name,i.jsx(to,{size:14,className:"ml-1 text-yellow-500"}),((N=C.hero)==null?void 0:N.complexity)||1,((Q=C.stats)==null?void 0:Q.level)&&i.jsxs("span",{className:"ml-1 flex items-center",children:[i.jsx(At,{size:14,className:"text-blue-300"})," ",C.stats.level]})]}),i.jsxs("div",{className:"text-xs flex space-x-2",children:[i.jsxs("span",{className:"flex items-center",title:"Kills",children:[i.jsx(Ir,{size:12,className:"mr-1"}),((P=A[C.id])==null?void 0:P.kills)||0]}),i.jsxs("span",{className:"flex items-center",title:"Assists",children:[i.jsx(et,{size:12,className:"mr-1"}),((F=A[C.id])==null?void 0:F.assists)||0]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-blue-700 hover:bg-blue-600 px-3 py-1 rounded text-sm",onClick:()=>x(C.id),children:"Got Kill"}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"kills",-1),disabled:!(($=A[C.id])!=null&&$.kills),children:i.jsx(ps,{size:16})})]})]},C.id)})})]}),i.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),i.jsx("div",{className:"space-y-2",children:E.map(C=>{var N,Q,P,F,$;return i.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:L=>{const D=L.target;D.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium flex items-center",children:[C.name,i.jsx(to,{size:14,className:"ml-1 text-yellow-500"}),((N=C.hero)==null?void 0:N.complexity)||1,((Q=C.stats)==null?void 0:Q.level)&&i.jsxs("span",{className:"ml-1 flex items-center",children:[i.jsx(At,{size:14,className:"text-red-300"})," ",C.stats.level]})]}),i.jsxs("div",{className:"text-xs flex space-x-2",children:[i.jsxs("span",{className:"flex items-center",title:"Kills",children:[i.jsx(Ir,{size:12,className:"mr-1"}),((P=A[C.id])==null?void 0:P.kills)||0]}),i.jsxs("span",{className:"flex items-center",title:"Assists",children:[i.jsx(et,{size:12,className:"mr-1"}),((F=A[C.id])==null?void 0:F.assists)||0]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-red-700 hover:bg-red-600 px-3 py-1 rounded text-sm",onClick:()=>x(C.id),children:"Got Kill"}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"kills",-1),disabled:!(($=A[C.id])!=null&&$.kills),children:i.jsx(ps,{size:16})})]})]},C.id)})})]})]})]}),h===1&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-4 text-sm text-gray-300",children:i.jsx("p",{children:"Record player deaths."})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),i.jsx("div",{className:"space-y-2",children:S.map(C=>{var N,Q,P;return i.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:F=>{const $=F.target;$.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium flex items-center",children:C.name}),i.jsx("div",{className:"text-xs flex items-center",children:i.jsxs("span",{className:"flex items-center",title:"Deaths",children:[i.jsx(Da,{size:12,className:"mr-1"}),((N=A[C.id])==null?void 0:N.deaths)||0]})})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"deaths",-1),disabled:!((Q=A[C.id])!=null&&Q.deaths),children:i.jsx(ps,{size:16})}),i.jsx("div",{className:"w-8 text-center font-bold",children:((P=A[C.id])==null?void 0:P.deaths)||0}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"deaths",1),children:i.jsx(Sa,{size:16})})]})]},C.id)})})]}),i.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),i.jsx("div",{className:"space-y-2",children:E.map(C=>{var N,Q,P;return i.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:F=>{const $=F.target;$.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium flex items-center",children:C.name}),i.jsx("div",{className:"text-xs flex items-center",children:i.jsxs("span",{className:"flex items-center",title:"Deaths",children:[i.jsx(Da,{size:12,className:"mr-1"}),((N=A[C.id])==null?void 0:N.deaths)||0]})})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"deaths",-1),disabled:!((Q=A[C.id])!=null&&Q.deaths),children:i.jsx(ps,{size:16})}),i.jsx("div",{className:"w-8 text-center font-bold",children:((P=A[C.id])==null?void 0:P.deaths)||0}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"deaths",1),children:i.jsx(Sa,{size:16})})]})]},C.id)})})]})]})]}),h===2&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-4 text-sm text-gray-300",children:i.jsx("p",{children:"Record minion kills."})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),i.jsx("div",{className:"space-y-2",children:S.map(C=>{var N,Q,P;return i.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:F=>{const $=F.target;$.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium flex items-center",children:C.name}),i.jsx("div",{className:"text-xs flex items-center",children:i.jsxs("span",{className:"flex items-center",title:"Minion Kills",children:[i.jsx(Yo,{size:12,className:"mr-1"}),((N=A[C.id])==null?void 0:N.minionKills)||0]})})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"minionKills",-1),disabled:!((Q=A[C.id])!=null&&Q.minionKills),children:i.jsx(ps,{size:16})}),i.jsx("div",{className:"w-8 text-center font-bold",children:((P=A[C.id])==null?void 0:P.minionKills)||0}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"minionKills",1),children:i.jsx(Sa,{size:16})})]})]},C.id)})})]}),i.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),i.jsx("div",{className:"space-y-2",children:E.map(C=>{var N,Q,P;return i.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:F=>{const $=F.target;$.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium flex items-center",children:C.name}),i.jsx("div",{className:"text-xs flex items-center",children:i.jsxs("span",{className:"flex items-center",title:"Minion Kills",children:[i.jsx(Yo,{size:12,className:"mr-1"}),((N=A[C.id])==null?void 0:N.minionKills)||0]})})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"minionKills",-1),disabled:!((Q=A[C.id])!=null&&Q.minionKills),children:i.jsx(ps,{size:16})}),i.jsx("div",{className:"w-8 text-center font-bold",children:((P=A[C.id])==null?void 0:P.minionKills)||0}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"minionKills",1),children:i.jsx(Sa,{size:16})})]})]},C.id)})})]})]})]}),h===3&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-4 text-sm text-gray-300",children:i.jsx("p",{children:"Record gold collected this round (before spending on level-ups and including pity coins)."})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),i.jsx("div",{className:"space-y-2",children:S.map(C=>{var N,Q,P;return i.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:F=>{const $=F.target;$.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium flex items-center",children:C.name}),i.jsx("div",{className:"text-xs flex items-center",children:i.jsxs("span",{className:"flex items-center",title:"Gold Collected",children:[i.jsx(ts,{size:12,className:"mr-1"}),((N=A[C.id])==null?void 0:N.goldCollected)||0]})})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"goldCollected",-1),disabled:!((Q=A[C.id])!=null&&Q.goldCollected),children:i.jsx(ps,{size:16})}),i.jsx("div",{className:"w-8 text-center font-bold",children:((P=A[C.id])==null?void 0:P.goldCollected)||0}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"goldCollected",1),children:i.jsx(Sa,{size:16})})]})]},C.id)})})]}),i.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),i.jsx("div",{className:"space-y-2",children:E.map(C=>{var N,Q,P;return i.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:F=>{const $=F.target;$.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium flex items-center",children:C.name}),i.jsx("div",{className:"text-xs flex items-center",children:i.jsxs("span",{className:"flex items-center",title:"Gold Collected",children:[i.jsx(ts,{size:12,className:"mr-1"}),((N=A[C.id])==null?void 0:N.goldCollected)||0]})})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"goldCollected",-1),disabled:!((Q=A[C.id])!=null&&Q.goldCollected),children:i.jsx(ps,{size:16})}),i.jsx("div",{className:"w-8 text-center font-bold",children:((P=A[C.id])==null?void 0:P.goldCollected)||0}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"goldCollected",1),children:i.jsx(Sa,{size:16})})]})]},C.id)})})]})]})]}),h===4&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-4 text-sm text-gray-300",children:i.jsx("p",{children:"Record player level after purchasing any level ups with gold."})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),i.jsx("div",{className:"space-y-2",children:S.map(C=>{var N,Q,P,F;return i.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:$=>{const L=$.target;L.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium flex items-center",children:C.name}),i.jsx("div",{className:"text-xs flex items-center",children:i.jsxs("span",{className:"flex items-center",title:"Player Level",children:[i.jsx(At,{size:14,className:"mr-1 text-blue-300"}),"Current Level: ",((N=C.stats)==null?void 0:N.level)||1]})})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"level",-1),disabled:((Q=A[C.id])==null?void 0:Q.level)===1,children:i.jsx(ps,{size:16})}),i.jsx("div",{className:"w-8 text-center font-bold",children:((P=A[C.id])==null?void 0:P.level)||1}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"level",1),disabled:((F=A[C.id])==null?void 0:F.level)===10,children:i.jsx(Sa,{size:16})})]})]},C.id)})})]}),i.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),i.jsx("div",{className:"space-y-2",children:E.map(C=>{var N,Q,P,F;return i.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:C.hero&&i.jsx("img",{src:C.hero.icon,alt:C.hero.name,className:"w-full h-full object-cover",onError:$=>{const L=$.target;L.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium flex items-center",children:C.name}),i.jsx("div",{className:"text-xs flex items-center",children:i.jsxs("span",{className:"flex items-center",title:"Player Level",children:[i.jsx(At,{size:14,className:"mr-1 text-red-300"}),"Current Level: ",((N=C.stats)==null?void 0:N.level)||1]})})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"level",-1),disabled:((Q=A[C.id])==null?void 0:Q.level)===1,children:i.jsx(ps,{size:16})}),i.jsx("div",{className:"w-8 text-center font-bold",children:((P=A[C.id])==null?void 0:P.level)||1}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>g(C.id,"level",1),disabled:((F=A[C.id])==null?void 0:F.level)===10,children:i.jsx(Sa,{size:16})})]})]},C.id)})})]})]})]}),_.length>1&&i.jsxs("div",{className:"flex justify-between mt-4",children:[i.jsxs("button",{className:"flex items-center px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>{const C=_.findIndex(Q=>Q.tab===h),N=Math.max(0,C-1);w(_[N].tab)},disabled:_.findIndex(C=>C.tab===h)===0,children:[i.jsx(Cr,{size:16,className:"mr-1"})," Previous"]}),i.jsxs("button",{className:"flex items-center px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>{const C=_.findIndex(Q=>Q.tab===h),N=Math.min(_.length-1,C+1);w(_[N].tab)},disabled:_.findIndex(C=>C.tab===h)===_.length-1,children:["Next ",i.jsx(Gc,{size:16,className:"ml-1"})]})]})]}),i.jsxs("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2",children:"Stats Being Tracked This Round"}),Object.values(o).some(Boolean)?i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[o.kills&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-blue-300",children:[i.jsx(Ir,{size:16,className:"mr-2"})," Total Kills"]}),i.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,N)=>C+(N.kills||0),0)})]}),o.deaths&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-red-300",children:[i.jsx(Da,{size:16,className:"mr-2"})," Total Deaths"]}),i.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,N)=>C+(N.deaths||0),0)})]}),o.assists&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-purple-300",children:[i.jsx(et,{size:16,className:"mr-2"})," Total Assists"]}),i.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,N)=>C+(N.assists||0),0)})]}),o.goldEarned&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-yellow-300",children:[i.jsx(ts,{size:16,className:"mr-2"})," Gold Collected"]}),i.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,N)=>C+(N.goldCollected||0),0)})]}),o.minionKills&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-green-300",children:[i.jsx(Yo,{size:16,className:"mr-2"})," Minion Kills"]}),i.jsx("div",{className:"text-xl",children:Object.values(A).reduce((C,N)=>C+(N.minionKills||0),0)})]}),o.level&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-indigo-300",children:[i.jsx(At,{size:16,className:"mr-2"})," Levels"]}),i.jsx("div",{className:"text-sm",children:t.map(C=>{var N;return`${C.name}: ${((N=A[C.id])==null?void 0:N.level)||1}`}).join(", ")})]})]}):i.jsxs("div",{className:"text-center py-4 text-gray-400",children:[i.jsx("p",{children:"No statistics will be tracked this round."}),i.jsx("p",{className:"text-sm",children:"Enable stat categories above to begin tracking."})]})]})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:`text-${b?"green":"yellow"}-400 font-medium`,children:b?"All steps completed!":"Please complete all steps"}),i.jsx("button",{onClick:p,className:`px-6 py-3 rounded-lg text-white font-medium ${b?"bg-green-600 hover:bg-green-500":"bg-blue-600 hover:bg-blue-500"}`,children:s?"Save Stats & Continue":"Continue"})]})]})})},$o=({icon:t,label:e,enabled:r,onChange:n})=>i.jsxs("div",{className:`flex items-center p-2 rounded cursor-pointer transition-colors ${r?"bg-blue-900/30 border border-blue-500/50":"bg-gray-600 border border-gray-500"}`,onClick:()=>n(!r),children:[i.jsx("div",{className:`mr-2 ${r?"text-blue-400":"text-gray-400"}`,children:t}),i.jsx("span",{className:`text-sm flex-grow ${r?"text-blue-200":"text-gray-400"}`,children:e}),i.jsx("div",{className:"ml-auto",children:i.jsx("div",{className:`w-4 h-4 rounded-full ${r?"bg-blue-500":"bg-gray-500"}`})})]}),Gle=({gameState:t,players:e,strategyTimeRemaining:r,moveTimeRemaining:n,strategyTimerActive:s,moveTimerActive:a,onStartStrategyTimer:o,onPauseStrategyTimer:l,onResetStrategyTimer:A,onEndStrategyPhase:u,onStartMoveTimer:h,onPauseMoveTimer:c,onResetMoveTimer:d,onSelectPlayer:f,onCompletePlayerTurn:g,onStartNextTurn:y,onAdjustTeamLife:v,onIncrementWave:m,onDecrementWave:p,onAdjustRound:x,onAdjustTurn:w,onDeclareVictory:_,onFlipCoin:b,strategyTimerEnabled:S,moveTimerEnabled:E,onSavePlayerStats:C})=>{var O,oe,me,se,re,Le,ve;const{playSound:N}=Ge(),[Q,P]=B.useState(!1),F=de=>{const Me=Math.floor(de/60),ze=de%60;return`${Me}:${ze.toString().padStart(2,"0")}`},$=t.activeHeroIndex>=0?e[t.activeHeroIndex]:null;B.useEffect(()=>{s&&S&&(r===10&&N("timerWarning"),r>0&&N("timerTick"))},[r,s,S,N]),B.useEffect(()=>{a&&E&&(n===10&&N("timerWarning"),n>0&&N("timerTick"))},[n,a,E,N]);const L=()=>e.some(de=>de.stats&&((de.stats.totalKills??0)>0||(de.stats.totalAssists??0)>0||(de.stats.totalDeaths??0)>0||(de.stats.totalMinionKills??0)>0||(de.stats.totalGoldEarned??0)>0||de.stats.level!==void 0)),D=de=>e.some(Me=>Me.stats&&(de==="level"?Me.stats[de]!==void 0:(Me.stats[de]??0)>0)),z=()=>{N("buttonClick")},k=()=>{N("buttonClick"),o()},M=()=>{N("buttonClick"),l()},j=()=>{N("phaseChange"),u()},I=()=>{N("buttonClick"),h()},G=()=>{N("buttonClick"),c()},X=()=>{N("buttonClick"),A()},te=()=>{N("buttonClick"),d()},Ae=()=>{N("turnComplete"),g()},ie=()=>{t.turn===4?P(!0):(N("turnStart"),y())},V=de=>{de&&C&&C(de),P(!1),N("turnStart"),y()},Y=de=>{N("victory"),_(de)},U=()=>{N("coinFlip"),b()},H=(de,Me)=>{N("lifeChange"),v(de,Me)};return i.jsxs("div",{className:"game-timer",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-blue-900/50 rounded-lg p-4 text-center",children:[i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Titans Lives"}),i.jsxs("div",{className:"flex justify-center items-center gap-4",children:[i.jsx("button",{className:"bg-blue-700 hover:bg-blue-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>H(W.Titans,-1),children:"-"}),i.jsx("span",{className:"text-4xl font-bold",children:t.teamLives[W.Titans]}),i.jsx("button",{className:"bg-blue-700 hover:bg-blue-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>H(W.Titans,1),children:"+"})]}),i.jsxs("button",{className:"mt-4 w-full bg-blue-700 hover:bg-blue-600 rounded-lg py-2 px-4 flex items-center justify-center",onClick:()=>Y(W.Titans),children:[i.jsx(zc,{size:18,className:"mr-2"}),i.jsx("span",{children:"Declare Titan Victory"})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[i.jsxs("div",{className:"flex justify-between mb-4",children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"Round"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center mr-2",onClick:()=>{z(),x(-1)},children:i.jsx(Pa,{size:14})}),i.jsx("div",{className:"text-2xl font-bold",children:t.round}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center ml-2",onClick:()=>{z(),x(1)},children:i.jsx(Js,{size:14})})]})]}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"Turn"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center mr-2",onClick:()=>{z(),w(-1)},children:i.jsx(Pa,{size:14})}),i.jsxs("div",{className:"text-2xl font-bold",children:[t.turn,"/4"]}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center ml-2",onClick:()=>{z(),w(1)},children:i.jsx(Js,{size:14})})]})]}),!t.hasMultipleLanes&&i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"Wave"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center mr-2",onClick:()=>{z(),p(Fe.Single)},disabled:!t.waves[Fe.Single]||t.waves[Fe.Single].currentWave<=1,children:i.jsx(Pa,{size:14})}),i.jsxs("div",{className:"text-2xl font-bold",children:[((O=t.waves[Fe.Single])==null?void 0:O.currentWave)||1,"/",((oe=t.waves[Fe.Single])==null?void 0:oe.totalWaves)||3]}),i.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center ml-2",onClick:()=>{z(),m(Fe.Single)},disabled:!t.waves[Fe.Single]||t.waves[Fe.Single].currentWave>=t.waves[Fe.Single].totalWaves,children:i.jsx(Js,{size:14})})]})]})]}),i.jsx("div",{className:"mt-2 mb-4",children:i.jsxs("span",{className:"px-3 py-1 rounded-full bg-gray-700 text-sm",children:[t.currentPhase==="strategy"&&"Strategy Phase",t.currentPhase==="move"&&"Action Phase",t.currentPhase==="turn-end"&&"Turn Complete"]})}),t.hasMultipleLanes&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[i.jsx("h4",{className:"text-lg font-bold mb-2",children:"Wave Counters"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"relative bg-gray-700/50 p-2 rounded",children:[i.jsx("span",{className:"text-sm text-gray-300",children:"Top Lane"}),i.jsxs("div",{className:"flex items-center justify-center mt-1",children:[i.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center mr-2",onClick:()=>{z(),p(Fe.Top)},disabled:!t.waves[Fe.Top]||t.waves[Fe.Top].currentWave<=1,children:i.jsx(Pa,{size:12})}),i.jsxs("div",{className:"text-xl font-bold",children:[((me=t.waves[Fe.Top])==null?void 0:me.currentWave)||1,"/",((se=t.waves[Fe.Top])==null?void 0:se.totalWaves)||7]}),i.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center ml-2",onClick:()=>{z(),m(Fe.Top)},disabled:!t.waves[Fe.Top]||t.waves[Fe.Top].currentWave>=t.waves[Fe.Top].totalWaves,children:i.jsx(Js,{size:12})})]})]}),i.jsxs("div",{className:"relative bg-gray-700/50 p-2 rounded",children:[i.jsx("span",{className:"text-sm text-gray-300",children:"Bottom Lane"}),i.jsxs("div",{className:"flex items-center justify-center mt-1",children:[i.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center mr-2",onClick:()=>{z(),p(Fe.Bottom)},disabled:!t.waves[Fe.Bottom]||t.waves[Fe.Bottom].currentWave<=1,children:i.jsx(Pa,{size:12})}),i.jsxs("div",{className:"text-xl font-bold",children:[((re=t.waves[Fe.Bottom])==null?void 0:re.currentWave)||1,"/",((Le=t.waves[Fe.Bottom])==null?void 0:Le.totalWaves)||7]}),i.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center ml-2",onClick:()=>{z(),m(Fe.Bottom)},disabled:!t.waves[Fe.Bottom]||t.waves[Fe.Bottom].currentWave>=t.waves[Fe.Bottom].totalWaves,children:i.jsx(Js,{size:12})})]})]})]})]}),i.jsx("div",{className:"mt-3",children:i.jsx(Ue,{text:"Click to flip the tie-breaker coin",children:i.jsxs("button",{className:`flex items-center justify-center px-4 py-2 rounded-lg text-white ${t.coinSide===W.Titans?"bg-blue-700 hover:bg-blue-600":"bg-orange-600 hover:bg-orange-500"}`,onClick:U,children:[i.jsx("span",{className:"mr-2",children:"Tiebreaker:"}),i.jsx("span",{className:"font-bold",children:t.coinSide===W.Titans?"Titans":"Atlanteans"})]})})})]}),i.jsxs("div",{className:"bg-red-900/50 rounded-lg p-4 text-center",children:[i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Atlanteans Lives"}),i.jsxs("div",{className:"flex justify-center items-center gap-4",children:[i.jsx("button",{className:"bg-red-700 hover:bg-red-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>H(W.Atlanteans,-1),children:"-"}),i.jsx("span",{className:"text-4xl font-bold",children:t.teamLives[W.Atlanteans]}),i.jsx("button",{className:"bg-red-700 hover:bg-red-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>H(W.Atlanteans,1),children:"+"})]}),i.jsxs("button",{className:"mt-4 w-full bg-red-700 hover:bg-red-600 rounded-lg py-2 px-4 flex items-center justify-center",onClick:()=>Y(W.Atlanteans),children:[i.jsx(zc,{size:18,className:"mr-2"}),i.jsx("span",{children:"Declare Atlantean Victory"})]})]})]}),i.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:t.currentPhase==="strategy"?i.jsxs("div",{className:"text-center",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Strategy Phase - Turn ",t.turn]}),i.jsx("div",{className:`text-6xl font-bold mb-6 flex justify-center items-center ${S&&r<=10?"text-red-500 animate-pulse":""}`,children:S?F(r):i.jsx(rf,{size:64,className:"text-gray-300"})}),i.jsxs("div",{className:"flex justify-center gap-4",children:[S&&(s?i.jsx("button",{className:"bg-amber-600 hover:bg-amber-500 px-6 py-3 rounded-lg text-white font-medium",onClick:M,children:"Pause"}):i.jsx("button",{className:"bg-green-600 hover:bg-green-500 px-6 py-3 rounded-lg text-white font-medium",onClick:k,children:"Resume"})),S&&i.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-6 py-3 rounded-lg text-white font-medium flex items-center",onClick:X,children:[i.jsx(pc,{size:18,className:"mr-2"}),"Reset Timer"]}),i.jsx("button",{className:"bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-lg text-white font-medium",onClick:j,children:"End Strategy Phase"})]})]}):t.currentPhase==="move"?i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Action Phase"}),$&&$.hero?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:`inline-block py-2 px-4 rounded-lg text-white font-medium ${$.team===W.Titans?"bg-blue-700":"bg-red-700"}`,children:$.team===W.Titans?"Titans":"Atlanteans"}),i.jsxs("div",{className:"flex items-center justify-center mt-2",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full overflow-hidden mr-3",children:i.jsx("img",{src:$.hero.icon,alt:$.hero.name,className:"w-full h-full object-cover",onError:de=>{const Me=de.target;Me.src="https://via.placeholder.com/64?text=Hero"}})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-2xl font-bold",children:[$.hero.name,((ve=$.stats)==null?void 0:ve.level)&&i.jsxs("span",{className:"ml-2 flex items-center",title:"Player Level",children:[i.jsx(At,{size:18,className:`${$.team===W.Titans?"text-blue-300":"text-red-300"} mr-1`}),$.stats.level]})]}),i.jsx("div",{className:"text-lg text-gray-300",children:$.name})]})]}),i.jsx("div",{className:`text-6xl font-bold my-6 flex justify-center items-center ${E&&n<=10?"text-red-500 animate-pulse":""}`,children:E?F(n):i.jsx(rf,{size:64,className:"text-gray-300"})}),i.jsxs("div",{className:"flex justify-center gap-4",children:[E&&(a?i.jsx("button",{className:"bg-amber-600 hover:bg-amber-500 px-6 py-3 rounded-lg text-white font-medium",onClick:G,children:"Pause"}):i.jsx("button",{className:"bg-green-600 hover:bg-green-500 px-6 py-3 rounded-lg text-white font-medium",onClick:I,children:"Resume"})),E&&i.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-6 py-3 rounded-lg text-white font-medium flex items-center",onClick:te,children:[i.jsx(pc,{size:18,className:"mr-2"}),"Reset Timer"]}),i.jsxs("button",{className:"bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-lg text-white font-medium flex items-center",onClick:Ae,children:[i.jsx(Rr,{size:18,className:"mr-2"}),"Complete Turn"]})]})]})}):i.jsx("div",{className:"py-6 text-xl text-amber-300",children:"Select a player to start their action timer"})]}):i.jsxs("div",{className:"text-center",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Turn ",t.turn," Complete"]}),i.jsx("p",{className:"text-lg mb-6",children:"All players have completed their actions"}),i.jsxs("button",{className:"bg-green-600 hover:bg-green-500 px-8 py-4 rounded-lg text-white font-medium text-xl flex items-center mx-auto",onClick:ie,children:[i.jsx(pc,{size:20,className:"mr-2"}),t.turn===4?"End Round":"Start Next Turn"]})]})}),t.currentPhase!=="turn-end"&&i.jsxs("div",{className:"mt-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-3",children:t.currentPhase==="strategy"?"Players (waiting for strategy phase to end)":"Select Player"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((de,Me)=>de.hero&&K(de,Me))})]}),i.jsx(ZE,{players:e,onComplete:V,isVisible:Q})]});function K(de,Me){var gr,Qs,Ca,So,pi,jo,ko;const ze=t.activeHeroIndex===Me,$t=t.completedTurns.includes(Me),Ee=t.currentPhase==="move"&&!$t&&!ze,nt=de.stats&&((de.stats.totalKills??0)>0||(de.stats.totalAssists??0)>0||(de.stats.totalDeaths??0)>0||(de.stats.totalMinionKills??0)>0||(de.stats.totalGoldEarned??0)>0||de.stats.level!==void 0);return i.jsx("div",{className:`p-5 rounded-lg transition-all relative shadow-md ${ze?de.team===W.Titans?"bg-blue-700 ring-4 ring-white":"bg-red-700 ring-4 ring-white":$t?"bg-gray-700/90 opacity-60":de.team===W.Titans?"bg-blue-900/70 hover:bg-blue-800":"bg-red-900/70 hover:bg-red-800"} ${Ee?"cursor-pointer transform hover:scale-[1.02] hover:shadow-lg":""}`,onClick:()=>{Ee&&(N("heroSelect"),f(Me))},children:i.jsxs("div",{className:"flex items-start",children:[de.hero&&i.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full overflow-hidden mr-4 flex-shrink-0 border-2 border-gray-600",children:i.jsx("img",{src:de.hero.icon,alt:de.hero.name,className:"w-full h-full object-cover",onError:Is=>{const Eo=Is.target;Eo.src="https://via.placeholder.com/96?text=Hero"}})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"text-xl font-bold mb-1 flex items-center",children:[((gr=de.hero)==null?void 0:gr.name)||"Unknown Hero",((Qs=de.stats)==null?void 0:Qs.level)&&i.jsxs("span",{className:"ml-2 flex items-center",title:`Level ${de.stats.level}`,children:[i.jsx(At,{size:16,className:`${de.team===W.Titans?"text-blue-300":"text-red-300"} mr-1`}),de.stats.level]})]}),$t&&i.jsx("div",{className:"bg-green-600 rounded-full p-1.5 ml-2",title:"Completed",children:i.jsx(Rr,{size:20})}),ze&&i.jsx("div",{className:"bg-yellow-500 rounded-full p-1.5 ml-2 animate-pulse",title:"Active",children:i.jsx(as,{size:20})})]}),i.jsx("div",{className:"text-lg font-medium text-gray-100 mb-2",children:de.name||`Player ${de.id}`}),de.lane&&i.jsx("div",{className:"text-base text-gray-300 mb-2",children:de.lane===Fe.Top?"Top Lane":"Bottom Lane"}),nt&&L()&&i.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-2 text-base bg-black/20 p-2 rounded",children:[D("totalKills")&&i.jsxs("span",{className:"flex items-center",title:"Kills",children:[i.jsx(Ir,{size:18,className:"mr-2 text-blue-400"}),i.jsx("span",{className:"font-bold",children:((Ca=de.stats)==null?void 0:Ca.totalKills)||0})]}),D("totalDeaths")&&i.jsxs("span",{className:"flex items-center",title:"Deaths",children:[i.jsx(Da,{size:18,className:"mr-2 text-red-400"}),i.jsx("span",{className:"font-bold",children:((So=de.stats)==null?void 0:So.totalDeaths)||0})]}),D("totalAssists")&&i.jsxs("span",{className:"flex items-center",title:"Assists",children:[i.jsx(et,{size:18,className:"mr-2 text-green-400"}),i.jsx("span",{className:"font-bold",children:((pi=de.stats)==null?void 0:pi.totalAssists)||0})]}),D("totalMinionKills")&&i.jsxs("span",{className:"flex items-center",title:"Minion Kills",children:[i.jsx(Yo,{size:18,className:"mr-2 text-yellow-400"}),i.jsx("span",{className:"font-bold",children:((jo=de.stats)==null?void 0:jo.totalMinionKills)||0})]}),D("totalGoldEarned")&&i.jsxs("span",{className:"flex items-center col-span-2 mt-1 justify-center bg-amber-900/30 py-1 px-2 rounded",title:"Total Gold Earned",children:[i.jsx(ts,{size:18,className:"mr-2 text-amber-400"}),i.jsx("span",{className:"font-bold",children:((ko=de.stats)==null?void 0:ko.totalGoldEarned)||0})]})]})]})]})},de.id)}},eN=()=>{const[t,e]=B.useState(!1),r=[{role:"Damager",description:"Damagers are heroes adept at forcing their opponents to discard cards. This weakens enemy heroes, making it easier for your allies to take them down."},{role:"Disabler",description:"Disablers possess the power to weaken enemy heroes by preventing or limiting their ability to perform certain actions."},{role:"Durable",description:"Durable heroes are best equipped to withstand the heat of battle and survive, usually achieve this through a combination of a high defense stat and self-healing abilities."},{role:"Farming",description:"Heroes with farming abilities can generate extra coins for themselves or their allies, enabling faster leveling and setting up stronger late game."},{role:"Healer",description:"Healers help their allies by letting them retrieve discarded cards, greatly increasing their chances of surviving the fight."},{role:"Melee",description:"These heroes are focused on attacking in close quarters. A team composed entirely of melee fighters is formidable in a brawl, but may struggle against fast ranged heroes and heroes capable of placing tokens."},{role:"Pusher",description:"These heroes are able to deal with more than two enemy minions each round, or protect and respawn their own minions, giving them an edge at pushing the lane."},{role:"Sniper",description:"Most heroes have access to some form of ranged attacks, while Snipers are capable of attacking enemy heroes and minions at a much longer range."},{role:"Tactician",description:"Tacticians specialize in controlling the battlefield by moving, pushing, or repositioning units. Their versatile abilities allow them to support allies and hinder enemies."},{role:"Tokens",description:"These heroes are capable of placing tokens  temporary obstacles with special qualities. Each such hero uses their own type of tokens and the icon will correspond to the ones used by this particular hero."}];return i.jsxs("div",{className:"bg-gray-700 rounded-lg mb-4 overflow-hidden",children:[i.jsxs("button",{className:"w-full px-4 py-3 flex items-center justify-between bg-gray-800 hover:bg-gray-700 transition-colors text-left",onClick:()=>e(!t),"aria-expanded":t,children:[i.jsxs("span",{className:"font-semibold flex items-center",children:[i.jsx("span",{className:"mr-2 text-yellow-400",children:""}),"Hero Role Explanations"]}),t?i.jsx(ls,{size:18}):i.jsx(pn,{size:18})]}),t&&i.jsx("div",{className:"p-4",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(n=>i.jsxs("div",{className:"bg-gray-800 p-3 rounded",children:[i.jsx("h4",{className:"text-yellow-400 font-semibold mb-1",children:n.role}),i.jsx("p",{className:"text-sm text-gray-300",children:n.description})]},n.role))})})]})},tN=({hero:t,onClose:e,isVisible:r,cardPosition:n})=>{const{isMobile:s}=Xx(),a=B.useRef(null),o=B.useRef(null),[l,A]=B.useState({left:8,bottom:8,right:"auto",top:"auto"});if(B.useEffect(()=>{if(!s&&r&&o.current&&n){const c=o.current.getBoundingClientRect(),d=window.innerWidth,f=window.innerHeight;let g={left:8,bottom:8,right:"auto",top:"auto"};n.x<d/2?g={left:Math.min(n.x+n.width+20,d-c.width-8),top:Math.min(n.y,f-c.height-8),right:"auto",bottom:"auto"}:g={right:Math.min(d-n.x+20,d-8),top:Math.min(n.y,f-c.height-8),left:"auto",bottom:"auto"},n.y+c.height>f-20&&(g.top=Math.max(8,f-c.height-20)),A(g)}},[s,r,n]),!t||!r)return null;const u=c=>{a.current&&!a.current.contains(c.target)&&e()},h=(c,d=0,f=0)=>i.jsxs("div",{className:"mb-2",children:[i.jsx("div",{className:"text-sm font-medium mb-1",children:c}),i.jsx("div",{className:"flex",children:Array.from({length:8}).map((g,y)=>i.jsx("div",{className:`h-5 w-5 transform skew-x-12 mr-0.5 flex-shrink-0 ${y<d?"bg-blue-600":y<f?"bg-blue-200":"bg-gray-700"}`},y))})]});return s?i.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:u,children:i.jsxs("div",{ref:a,className:"bg-gray-900 rounded-lg w-full max-w-md p-4 relative",onClick:c=>c.stopPropagation(),children:[i.jsx("button",{className:"absolute top-2 right-2 p-1 bg-gray-800 rounded-full",onClick:e,"aria-label":"Close hero information",children:i.jsx(jr,{size:18})}),i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full overflow-hidden mb-3",children:i.jsx("img",{src:t.icon,alt:t.name,className:"w-full h-full object-cover",onError:c=>{c.target.src="https://via.placeholder.com/96?text=Hero"}})}),i.jsx("h3",{className:"text-xl font-bold mb-1",children:t.name}),i.jsx("div",{className:"text-sm text-gray-300 mb-1",children:t.roles.join("  ")}),t.additionalRoles&&t.additionalRoles.length>0&&i.jsx("div",{className:"text-xs text-gray-400 mb-2",children:t.additionalRoles.join("  ")}),i.jsxs("div",{className:"flex mb-3",children:[[...Array(t.complexity)].map((c,d)=>i.jsx("span",{className:"text-yellow-400 text-lg",children:""},d)),[...Array(4-t.complexity)].map((c,d)=>i.jsx("span",{className:"text-gray-600 text-lg",children:""},d+t.complexity))]}),i.jsxs("div",{className:"w-full mb-4 grid grid-cols-2 gap-3",children:[h("Attack",t.attack,t.attack_upgraded),h("Initiative",t.initiative,t.initiative_upgraded),h("Defence",t.defence,t.defence_upgraded),h("Movement",t.movement,t.movement_upgraded)]}),i.jsx("p",{className:"text-sm leading-relaxed",children:t.description||"This hero's abilities and playstyle are shrouded in mystery."})]})]})}):i.jsx("div",{ref:o,className:"fixed bg-gray-900/95 p-6 rounded-lg shadow-lg max-w-2xl z-50",style:{left:l.left!=="auto"?`${l.left}px`:"auto",right:l.right!=="auto"?`${l.right}px`:"auto",top:l.top!=="auto"?`${l.top}px`:"auto",bottom:l.bottom!=="auto"?`${l.bottom}px`:"auto"},children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"w-28 h-28 bg-gray-300 rounded-full overflow-hidden mr-6 flex-shrink-0",children:i.jsx("img",{src:t.icon,alt:t.name,className:"w-full h-full object-cover",onError:c=>{c.target.src="https://via.placeholder.com/192?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),i.jsx("div",{className:"text-lg text-gray-300 mb-1",children:t.roles.join("  ")}),t.additionalRoles&&t.additionalRoles.length>0&&i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:t.additionalRoles.join("  ")}),i.jsxs("div",{className:"flex mb-3",children:[[...Array(t.complexity)].map((c,d)=>i.jsx("span",{className:"text-yellow-400 text-xl",children:""},d)),[...Array(4-t.complexity)].map((c,d)=>i.jsx("span",{className:"text-gray-600 text-xl",children:""},d+t.complexity))]}),i.jsxs("div",{className:"w-full mb-4 grid grid-cols-2 gap-4",children:[h("Attack",t.attack,t.attack_upgraded),h("Initiative",t.initiative,t.initiative_upgraded),h("Defence",t.defence,t.defence_upgraded),h("Movement",t.movement,t.movement_upgraded)]}),i.jsx("p",{className:"text-base leading-relaxed",children:t.description||"This hero's abilities and playstyle are shrouded in mystery."})]})]})})},Wle=({players:t,draftingState:e,onHeroSelect:r,onHeroBan:n,onFinishDrafting:s,onCancelDrafting:a,onUndoLastAction:o,onResetDraft:l,onBackToDraftSelection:A,canUndo:u})=>{const{isMobile:h}=Xx(),{playSound:c}=Ge(),[d,f]=B.useState(null),[g,y]=B.useState(!1),[v,m]=B.useState(void 0),p=B.useRef(null),x=B.useRef(null),w=t.filter(V=>V.team===e.currentTeam&&!e.selectedHeroes.some(Y=>Y.playerId===V.id)),_=t.every(V=>e.selectedHeroes.some(Y=>Y.playerId===V.id)),b=V=>V===W.Titans?"Titans":"Atlanteans",S=()=>{if(e.mode!==ue.PickAndBan)return"Invalid Mode";if(e.currentStep>=e.pickBanSequence.length)return t.every(K=>e.selectedHeroes.some(O=>O.playerId===K.id))?"Draft Complete":"Drafting Paused/Error";const V=e.pickBanSequence[e.currentStep],Y=b(e.currentTeam),U=V.action==="ban"?"Ban":"Pick";return`${Y} ${U} - Round ${V.round}`},E=V=>[...V].sort((Y,U)=>Y.complexity!==U.complexity?Y.complexity-U.complexity:Y.name.localeCompare(U.name)),C=(V,Y)=>{c("heroSelect"),r(V,Y)},N=V=>{c("heroBan"),n(V)},Q=()=>{c("phaseChange"),s()},P=()=>{c("buttonClick"),a()},F=()=>{u&&(c("buttonClick"),o())},$=()=>{c("buttonClick"),l()},L=()=>{c("buttonClick"),A()},D=V=>{h&&!_&&(c("buttonClick"),f(V),y(!0))},z=()=>{c("buttonClick"),y(!1)},k=(V,Y)=>{if(!h){f(V);const H=Y.currentTarget.getBoundingClientRect();m({x:H.left,y:H.top,width:H.width,height:H.height})}},M=()=>{h||(f(null),m(void 0))},j=(V,Y,U)=>{var de,Me,ze,$t;const H=Y==="available",K=Y==="assigned",O=Y==="selected",oe=Y==="banned",me=t.filter(Ee=>Ee.team===e.currentTeam&&!e.selectedHeroes.some(nt=>nt.playerId===Ee.id)),se=_&&(H||K),re=U?((de=t.find(Ee=>Ee.id===U))==null?void 0:de.name)||`Player ${U}`:"",Le=U?(Me=t.find(Ee=>Ee.id===U))==null?void 0:Me.team:void 0,ve=`
      relative p-5 rounded-lg transition-all
      ${se?"opacity-40 pointer-events-none":""}
      ${H?"bg-gray-800 hover:bg-gray-700":""}
      ${K?"bg-amber-900/30 hover:bg-amber-800/40":""}
      ${O?Le===W.Titans?"bg-blue-900/30":"bg-red-900/30":""}
      ${oe?"bg-red-900/30 opacity-70":""}
    `;return i.jsxs("div",{className:ve,onClick:()=>D(V),onMouseEnter:Ee=>k(V,Ee),onMouseLeave:M,children:[oe&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:i.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[i.jsx("div",{className:"absolute w-3/4 h-0.5 bg-red-500 transform rotate-45"}),i.jsx("div",{className:"absolute w-3/4 h-0.5 bg-red-500 transform -rotate-45"})]})}),i.jsxs("div",{className:"text-center mb-3",children:[i.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 bg-gray-300 rounded-full mx-auto overflow-hidden",children:i.jsx("img",{src:V.icon,alt:V.name,className:"w-full h-full object-cover",onError:Ee=>{const nt=Ee.target;nt.src="https://via.placeholder.com/112?text=Hero"}})}),i.jsx("div",{className:"mt-3 font-medium text-xl",children:V.name}),O&&re&&i.jsx("div",{className:"mt-1 text-sm text-gray-300",children:re})]}),i.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(V.complexity)].map((Ee,nt)=>i.jsx("span",{className:"text-yellow-400 text-lg sm:text-xl",children:""},nt)),[...Array(4-V.complexity)].map((Ee,nt)=>i.jsx("span",{className:"text-gray-600 text-lg sm:text-xl",children:""},nt+V.complexity))]}),i.jsx("div",{className:"text-sm sm:text-base text-center text-gray-300 mb-3",children:V.roles.join(", ")}),H&&e.mode===ue.PickAndBan&&i.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2",onClick:Ee=>Ee.stopPropagation(),children:[((ze=e.pickBanSequence[e.currentStep])==null?void 0:ze.action)==="ban"&&i.jsx("button",{className:"w-full px-3 py-2 bg-red-700 hover:bg-red-600 rounded text-sm flex items-center justify-center",onClick:Ee=>{Ee.stopPropagation(),N(V)},children:"Ban Hero"}),(($t=e.pickBanSequence[e.currentStep])==null?void 0:$t.action)==="pick"&&me.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-1",children:me.map(Ee=>i.jsxs("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:nt=>{nt.stopPropagation(),C(V,Ee.id)},children:[i.jsx("span",{className:"mr-1",children:"Pick for"}),i.jsx("span",{className:"font-bold",children:Ee.name})]},Ee.id))})]}),H&&e.mode===ue.AllPick&&i.jsx("div",{className:"mt-3",onClick:Ee=>Ee.stopPropagation(),children:me.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-1",children:me.map(Ee=>i.jsxs("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:nt=>{nt.stopPropagation(),C(V,Ee.id)},children:[i.jsx("span",{className:"mr-1",children:"Pick for"}),i.jsx("span",{className:"font-bold",children:Ee.name})]},Ee.id))})}),H&&e.mode===ue.Random&&i.jsx("div",{className:"mt-3",onClick:Ee=>Ee.stopPropagation(),children:me.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-1",children:me.map(Ee=>i.jsxs("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:nt=>{nt.stopPropagation(),C(V,Ee.id)},children:[i.jsx("span",{className:"mr-1",children:"Pick for"}),i.jsx("span",{className:"font-bold",children:Ee.name})]},Ee.id))})}),K&&i.jsx("div",{className:"mt-3",onClick:Ee=>Ee.stopPropagation(),children:i.jsx("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:Ee=>{var gr;Ee.stopPropagation();const nt=(gr=e.assignedHeroes.find(Qs=>Qs.heroOptions.some(Ca=>Ca.id===V.id)))==null?void 0:gr.playerId;nt&&C(V,nt)},children:"Select Hero"})})]},`${V.id}-${Y}-${U||0}`)},I=()=>{const V=E(e.availableHeroes);return i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"All Pick"}),i.jsx("div",{className:"mb-6",children:_?i.jsxs("div",{className:"p-3 rounded-lg bg-green-900/50 border-2 border-green-400",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Start Game"}),i.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):i.jsxs("div",{className:`p-3 rounded-lg ${e.currentTeam===W.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[i.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[b(e.currentTeam)," Turn"]}),w.length>0?i.jsxs("div",{className:"text-md mb-3",children:["Select any hero for: ",w.map(Y=>Y.name).join(", ")]}):i.jsxs("div",{className:"text-md mb-3",children:["All ",b(e.currentTeam)," players have selected heroes"]})]})}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:V.map(Y=>j(Y,"available"))})]})},G=()=>i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Single Draft"}),i.jsx("div",{className:"mb-6",children:_?i.jsxs("div",{className:"p-3 rounded-lg bg-green-900/50 border-2 border-green-400",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Start Game"}),i.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):i.jsxs("div",{className:`p-3 rounded-lg ${e.currentTeam===W.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[i.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[b(e.currentTeam)," Turn"]}),w.length>0?i.jsxs("div",{className:"text-md mb-3",children:["Any ",b(e.currentTeam)," player can select a hero from their options"]}):i.jsxs("div",{className:"text-md mb-3",children:["All ",b(e.currentTeam)," players have selected heroes"]})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h4",{className:"text-lg font-medium mb-3 bg-blue-900/50 p-2 rounded flex items-center",children:[i.jsx("div",{className:"bg-blue-700 rounded-full p-1 mr-2",children:i.jsx(ii,{size:16})}),"Titans Team"]}),i.jsx("div",{ref:p,className:"max-h-96 overflow-y-auto pr-2 space-y-4 custom-scrollbar",children:e.assignedHeroes.filter(V=>{const Y=t.find(U=>U.id===V.playerId);return Y&&Y.team===W.Titans}).map(V=>{const Y=t.find(K=>K.id===V.playerId);if(!Y)return null;const U=e.selectedHeroes.some(K=>K.playerId===Y.id),H=E(V.heroOptions);return i.jsxs("div",{className:`bg-gray-800 p-4 rounded-lg ${U?"opacity-60":""}`,children:[i.jsxs("h5",{className:"text-lg font-medium mb-3 flex items-center",children:[Y.name,U&&i.jsx("span",{className:"ml-2 bg-green-600 text-white text-xs px-2 py-1 rounded",children:"Selected"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:H.map(K=>i.jsxs("div",{className:`relative p-4 rounded-lg ${_?"opacity-40 pointer-events-none":e.currentTeam===W.Titans&&!U?"bg-blue-900/30 hover:bg-blue-800/40 cursor-pointer":"bg-gray-800"}`,onClick:O=>{e.currentTeam===W.Titans&&!U&&!_?(O.stopPropagation(),C(K,Y.id)):D(K)},onMouseEnter:O=>k(K,O),onMouseLeave:M,children:[i.jsxs("div",{className:"text-center mb-3",children:[i.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:i.jsx("img",{src:K.icon,alt:K.name,className:"w-full h-full object-cover",onError:O=>{const oe=O.target;oe.src="https://via.placeholder.com/96?text=Hero"}})}),i.jsx("div",{className:"mt-2 font-medium text-lg",children:K.name})]}),i.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(K.complexity)].map((O,oe)=>i.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},oe)),[...Array(4-K.complexity)].map((O,oe)=>i.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},oe+K.complexity))]}),i.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-2",children:K.roles.join(", ")}),e.currentTeam===W.Titans&&!U&&!_&&i.jsx("button",{className:"w-full mt-2 px-3 py-2 bg-blue-700 hover:bg-blue-600 rounded text-sm",onClick:O=>{O.stopPropagation(),C(K,Y.id)},children:"Select This Hero"})]},K.id))})]},Y.id)})})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-lg font-medium mb-3 bg-red-900/50 p-2 rounded flex items-center",children:[i.jsx("div",{className:"bg-red-700 rounded-full p-1 mr-2",children:i.jsx(ii,{size:16})}),"Atlanteans Team"]}),i.jsx("div",{ref:x,className:"max-h-96 overflow-y-auto pr-2 space-y-4 custom-scrollbar",children:e.assignedHeroes.filter(V=>{const Y=t.find(U=>U.id===V.playerId);return Y&&Y.team===W.Atlanteans}).map(V=>{const Y=t.find(K=>K.id===V.playerId);if(!Y)return null;const U=e.selectedHeroes.some(K=>K.playerId===Y.id),H=E(V.heroOptions);return i.jsxs("div",{className:`bg-gray-800 p-4 rounded-lg ${U?"opacity-60":""}`,children:[i.jsxs("h5",{className:"text-lg font-medium mb-3 flex items-center",children:[Y.name,U&&i.jsx("span",{className:"ml-2 bg-green-600 text-white text-xs px-2 py-1 rounded",children:"Selected"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:H.map(K=>i.jsxs("div",{className:`relative p-4 rounded-lg ${_?"opacity-40 pointer-events-none":e.currentTeam===W.Atlanteans&&!U?"bg-red-900/30 hover:bg-red-800/40 cursor-pointer":"bg-gray-800"}`,onClick:O=>{e.currentTeam===W.Atlanteans&&!U&&!_?(O.stopPropagation(),C(K,Y.id)):D(K)},onMouseEnter:O=>k(K,O),onMouseLeave:M,children:[i.jsxs("div",{className:"text-center mb-3",children:[i.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:i.jsx("img",{src:K.icon,alt:K.name,className:"w-full h-full object-cover",onError:O=>{const oe=O.target;oe.src="https://via.placeholder.com/96?text=Hero"}})}),i.jsx("div",{className:"mt-2 font-medium text-lg",children:K.name})]}),i.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(K.complexity)].map((O,oe)=>i.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},oe)),[...Array(4-K.complexity)].map((O,oe)=>i.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},oe+K.complexity))]}),i.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-2",children:K.roles.join(", ")}),e.currentTeam===W.Atlanteans&&!U&&!_&&i.jsx("button",{className:"w-full mt-2 px-3 py-2 bg-red-700 hover:bg-red-600 rounded text-sm",onClick:O=>{O.stopPropagation(),C(K,Y.id)},children:"Select This Hero"})]},K.id))})]},Y.id)})})]})]}),X=()=>{const V=E(e.availableHeroes);return i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Random Draft"}),i.jsx("div",{className:"mb-6",children:_?i.jsxs("div",{className:"p-3 rounded-lg bg-green-900/50 border-2 border-green-400",children:[i.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Start Game"}),i.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):i.jsxs("div",{className:`p-3 rounded-lg ${e.currentTeam===W.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[i.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[b(e.currentTeam)," Turn"]}),w.length>0?i.jsxs("div",{className:"text-md mb-3",children:[w.map(Y=>Y.name).join(", ")," need to select a hero"]}):i.jsxs("div",{className:"text-md mb-3",children:["All ",b(e.currentTeam)," players have selected heroes"]})]})}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:V.map(Y=>i.jsxs("div",{className:`relative p-4 rounded-lg transition-all ${_?"opacity-40 pointer-events-none":e.currentTeam===W.Titans?"bg-blue-900/30 hover:bg-blue-800/40":"bg-red-900/30 hover:bg-red-800/40"}`,onClick:()=>D(Y),onMouseEnter:U=>k(Y,U),onMouseLeave:M,children:[i.jsxs("div",{className:"text-center mb-3",children:[i.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:i.jsx("img",{src:Y.icon,alt:Y.name,className:"w-full h-full object-cover",onError:U=>{const H=U.target;H.src="https://via.placeholder.com/96?text=Hero"}})}),i.jsx("div",{className:"mt-2 font-medium text-lg",children:Y.name})]}),i.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(Y.complexity)].map((U,H)=>i.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},H)),[...Array(4-Y.complexity)].map((U,H)=>i.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},H+Y.complexity))]}),i.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-3",children:Y.roles.join(", ")}),w.length>0&&!_&&i.jsx("div",{className:"grid grid-cols-1 gap-1 mt-2",onClick:U=>U.stopPropagation(),children:w.map(U=>i.jsxs("button",{className:"w-full px-3 py-2 rounded text-sm bg-green-600 hover:bg-green-500 flex items-center justify-center",onClick:H=>{H.stopPropagation(),C(Y,U.id)},children:[i.jsx("span",{className:"mr-1",children:"Pick for"}),i.jsx("span",{className:"font-bold",children:U.name})]},U.id))})]},Y.id))})]})},te=()=>{if(e.mode!==ue.PickAndBan)return null;const V=E(e.availableHeroes),Y=E(e.bannedHeroes),U=e.currentStep<e.pickBanSequence.length?e.pickBanSequence[e.currentStep]:null;if(!U&&!_)return i.jsx("div",{children:"Draft complete"});const H=(U==null?void 0:U.action)==="pick",K=(U==null?void 0:U.action)==="ban";return i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Pick and Ban"}),i.jsx("div",{className:"mb-6",children:_?i.jsxs("div",{className:"p-4 rounded-lg bg-green-900/50 border-2 border-green-400",children:[i.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Start Game"}),i.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):i.jsxs("div",{className:`p-4 rounded-lg ${e.currentTeam===W.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[i.jsx("h4",{className:"text-xl font-semibold mb-2",children:S()}),i.jsxs("div",{className:"text-md mb-3",children:[K&&"Select a hero to ban from the pool",H&&w.length>0&&`${w.map(O=>O.name).join(", ")} need to pick a hero`,H&&w.length===0&&"All players on this team have selected heroes"]})]})}),Y.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"text-lg font-medium mb-3 bg-red-900/30 p-2 rounded",children:"Banned Heroes"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Y.map(O=>j(O,"banned"))})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:V.map(O=>i.jsxs("div",{className:`relative p-4 rounded-lg transition-all ${_?"opacity-40 pointer-events-none":e.currentTeam===W.Titans?"bg-blue-900/30 hover:bg-blue-800/40":"bg-red-900/30 hover:bg-red-800/40"} cursor-pointer`,onClick:()=>D(O),onMouseEnter:oe=>k(O,oe),onMouseLeave:M,children:[i.jsxs("div",{className:"text-center mb-3",children:[i.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:i.jsx("img",{src:O.icon,alt:O.name,className:"w-full h-full object-cover",onError:oe=>{const me=oe.target;me.src="https://via.placeholder.com/96?text=Hero"}})}),i.jsx("div",{className:"mt-2 font-medium text-lg",children:O.name})]}),i.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(O.complexity)].map((oe,me)=>i.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},me)),[...Array(4-O.complexity)].map((oe,me)=>i.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},me+O.complexity))]}),i.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-3",children:O.roles.join(", ")}),!_&&i.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2",onClick:oe=>oe.stopPropagation(),children:[K&&i.jsx("button",{className:"w-full px-3 py-2 bg-red-600 hover:bg-red-500 rounded text-sm flex items-center justify-center",onClick:oe=>{oe.stopPropagation(),N(O)},children:"Ban Hero"}),H&&w.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-1",children:w.map(oe=>i.jsxs("button",{className:"w-full px-3 py-2 bg-green-600 hover:bg-green-500 rounded text-sm flex items-center justify-center",onClick:me=>{me.stopPropagation(),C(O,oe.id)},children:[i.jsx("span",{className:"mr-1",children:"Pick for"}),i.jsx("span",{className:"font-bold",children:oe.name})]},oe.id))})]})]},O.id))})]})},Ae=()=>{switch(e.mode){case ue.AllPick:return I();case ue.Single:return G();case ue.Random:return X();case ue.PickAndBan:return te();default:return i.jsx("div",{children:"Invalid drafting mode"})}},ie=()=>{if(e.selectedHeroes.length===0)return null;const V=e.selectedHeroes.filter(U=>{var H;return((H=t.find(K=>K.id===U.playerId))==null?void 0:H.team)===W.Titans}),Y=e.selectedHeroes.filter(U=>{var H;return((H=t.find(K=>K.id===U.playerId))==null?void 0:H.team)===W.Atlanteans});return i.jsxs("div",{className:"mb-8 bg-gray-800 p-6 rounded-lg",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Selected Heroes"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-lg",children:[i.jsx("h4",{className:"text-lg font-medium mb-3 border-b border-blue-700 pb-2",children:"Titans"}),V.length>0?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:V.map(U=>j(U.hero,"selected",U.playerId))}):i.jsx("p",{className:"text-gray-400 italic",children:"No heroes selected yet"})]}),i.jsxs("div",{className:"bg-red-900/30 p-4 rounded-lg",children:[i.jsx("h4",{className:"text-lg font-medium mb-3 border-b border-red-700 pb-2",children:"Atlanteans"}),Y.length>0?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Y.map(U=>j(U.hero,"selected",U.playerId))}):i.jsx("p",{className:"text-gray-400 italic",children:"No heroes selected yet"})]})]})]})};return i.jsxs("div",{className:"drafting-system",children:[i.jsx("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 mb-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center",children:[i.jsx("h2",{className:"text-2xl font-bold mb-3 sm:mb-0",children:e.mode===ue.AllPick?"All Pick":e.mode===ue.Single?"Single Draft":e.mode===ue.Random?"Random Draft":"Pick and Ban Draft"}),i.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[i.jsx(Ue,{text:"Undo the last hero selection",children:i.jsxs("button",{className:`px-3 py-2 ${u?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 opacity-50 cursor-not-allowed"} rounded-lg flex items-center`,onClick:F,disabled:!u,children:[i.jsx(pc,{size:16,className:"mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Undo"})]})}),i.jsx(Ue,{text:"Reset all selections and restart with the same draft mode",children:i.jsxs("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center",onClick:$,children:[i.jsx(ca,{size:16,className:"mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})}),i.jsx(Ue,{text:"Go back to draft mode selection without rerolling tiebreaker",children:i.jsxs("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center",onClick:L,children:[i.jsx(dy,{size:16,className:"mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Back"})]})}),i.jsx(Ue,{text:"Return to game setup screen",children:i.jsxs("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center",onClick:P,children:[i.jsx(jr,{size:16,className:"mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Cancel"})]})}),(e.isComplete||_)&&i.jsx(Ue,{text:"Finish drafting and start the game",children:i.jsxs("button",{className:"px-3 py-2 bg-green-700 hover:bg-green-600 rounded-lg flex items-center",onClick:Q,children:[i.jsx(qx,{size:16,className:"mr-1 sm:mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Start Game"})]})})]})]})}),i.jsx(eN,{}),e.selectedHeroes.length>0&&ie(),i.jsx("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:Ae()}),i.jsx(tN,{hero:d,onClose:z,isVisible:(h?g:!!d)&&!_,cardPosition:v}),i.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(0, 0, 0, 0.2);
          border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(255, 255, 255, 0.3);
          border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background-color: rgba(255, 255, 255, 0.5);
        }
        
        /* Add smooth height transitions */
        .transition-height {
          transition: max-height 0.3s ease-in-out;
        }
      `})]})},Vle=({result:t,onComplete:e})=>{const[r,n]=B.useState(!1),[s,a]=B.useState(!1),{playSound:o}=Ge();B.useEffect(()=>{n(!0),o("coinFlip");const A=setTimeout(()=>{a(!0),o("buttonClick")},3e3);return()=>clearTimeout(A)},[]);const l=()=>{o("buttonClick"),e()};return i.jsxs("div",{className:"fixed top-0 left-0 w-full h-full bg-black/80 flex flex-col items-center justify-center z-50",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-3xl font-bold mb-8 text-white",children:"Randomizing Tiebreaker"}),i.jsx("div",{className:"coin-flip-container",children:i.jsxs("div",{className:`coin ${r?"flipping":""} ${t===W.Titans?"flip-titans":"flip-atlanteans"}`,children:[i.jsxs("div",{className:"coin-face heads",children:[i.jsx("div",{className:"coin-emblem",children:"Titans"}),i.jsx("div",{className:"coin-shine"})]}),i.jsxs("div",{className:"coin-face tails",children:[i.jsx("div",{className:"coin-emblem",children:"Atlanteans"}),i.jsx("div",{className:"coin-shine"})]})]})}),i.jsx("div",{className:"text-2xl font-bold mt-8 text-white",children:t===W.Titans?"Titans go first!":"Atlanteans go first!"}),i.jsx("button",{className:`continue-button ${s?"visible":""}`,onClick:l,children:"Continue to Draft"})]}),i.jsx("style",{children:`
        .coin.flipping.flip-titans {
          animation: flipCoinTitans 3s ease-out forwards;
        }
        
        .coin.flipping.flip-atlanteans {
          animation: flipCoinAtlanteans 3s ease-out forwards;
        }
        
        @keyframes flipCoinTitans {
          0% { transform: rotateY(0) rotateX(0); }
          20% { transform: rotateY(180deg) rotateX(10deg); }
          40% { transform: rotateY(360deg) rotateX(-10deg); }
          60% { transform: rotateY(540deg) rotateX(10deg); }
          80% { transform: rotateY(720deg) rotateX(-10deg); }
          100% { transform: rotateY(0deg) rotateX(10deg); } /* End on Titans side (heads) */
        }
        
        @keyframes flipCoinAtlanteans {
          0% { transform: rotateY(0) rotateX(0); }
          20% { transform: rotateY(180deg) rotateX(10deg); }
          40% { transform: rotateY(360deg) rotateX(-10deg); }
          60% { transform: rotateY(540deg) rotateX(10deg); }
          80% { transform: rotateY(720deg) rotateX(-10deg); }
          100% { transform: rotateY(180deg) rotateX(10deg); } /* End on Atlanteans side (tails) */
        }
        
 
      `})]})},qle=({onSelectMode:t,onCancel:e,playerCount:r,availableDraftModes:n,heroCount:s,handicapTeam:a})=>{const{playSound:o}=Ge(),l={[ue.AllPick]:"Teams take turns selecting any available hero for their players.",[ue.Single]:"Randomly deal 3 unique heroes to each player. Teams alternate selections.",[ue.Random]:`Randomly select ${r+2} heroes from the pool. Teams alternate picks from this pool.`,[ue.PickAndBan]:"Full drafting experience with pick and ban phases. The draft sequence varies based on the number of players."},A={[ue.AllPick]:r,[ue.Single]:r*3,[ue.Random]:r+2,[ue.PickAndBan]:r*2},u={[ue.AllPick]:"Default draft",[ue.Single]:"Forces players to try new heroes",[ue.Random]:"Good for balanced hero selection",[ue.PickAndBan]:"Best for competitive play"},h=d=>{n[d]&&(o("buttonClick"),t(d))},c=()=>{o("buttonClick"),e()};return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Select Draft Mode"}),a&&i.jsx("div",{className:"bg-amber-900/30 border border-amber-600 p-4 rounded-lg mb-6",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ei,{size:20,className:"text-amber-400 mr-2 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-amber-400",children:"Warning: Uneven Teams"}),i.jsxs("p",{className:"text-sm text-gray-300",children:["All players on the ",a===W.Titans?"Titans":"Atlanteans"," team must replace one of their basic cards with a handicap card."]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:`relative ${n[ue.AllPick]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(ue.AllPick),children:[i.jsx("h3",{className:"text-xl font-semibold mb-3",children:"All Pick"}),i.jsx("p",{className:"text-gray-300 mb-4",children:l[ue.AllPick]}),i.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[ue.AllPick]}),!n[ue.AllPick]&&i.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[i.jsx(Ei,{size:16,className:"mr-1"}),i.jsxs("span",{className:"text-xs",children:["Requires ",A[ue.AllPick]," heroes"]})]})]}),i.jsxs("div",{className:`relative ${n[ue.Single]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(ue.Single),children:[i.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Single Draft"}),i.jsx("p",{className:"text-gray-300 mb-4",children:l[ue.Single]}),i.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[ue.Single]}),!n[ue.Single]&&i.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[i.jsx(Ei,{size:16,className:"mr-1"}),i.jsxs("span",{className:"text-xs",children:["Requires ",A[ue.Single]," heroes"]})]})]}),i.jsxs("div",{className:`relative ${n[ue.Random]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(ue.Random),children:[i.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Random Draft"}),i.jsx("p",{className:"text-gray-300 mb-4",children:l[ue.Random]}),i.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[ue.Random]}),!n[ue.Random]&&i.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[i.jsx(Ei,{size:16,className:"mr-1"}),i.jsxs("span",{className:"text-xs",children:["Requires ",A[ue.Random]," heroes"]})]})]}),i.jsxs("div",{className:`relative ${n[ue.PickAndBan]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(ue.PickAndBan),children:[i.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Pick and Ban"}),i.jsx("p",{className:"text-gray-300 mb-4",children:l[ue.PickAndBan]}),i.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[ue.PickAndBan]}),!n[ue.PickAndBan]&&i.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[i.jsx(Ei,{size:16,className:"mr-1"}),i.jsxs("span",{className:"text-xs",children:["Requires ",A[ue.PickAndBan]," heroes"]})]})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-sm text-gray-400",children:["Available heroes: ",s]}),i.jsx("button",{className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",onClick:c,children:"Cancel"})]})]})},Xle=({feedbackUrl:t})=>{const[e,r]=B.useState(()=>{const s=localStorage.getItem("feedbackBar_expanded");return s!==null?s==="true":!0}),n=()=>{r(s=>{const a=!s;return localStorage.setItem("feedbackBar_expanded",String(a)),a})};return i.jsx("div",{className:"fixed bottom-0 left-0 z-50 transition-all duration-300",children:e?i.jsxs("div",{className:"w-full bg-gray-800 bg-opacity-90 backdrop-blur-sm text-center text-base text-white py-3 px-4 flex items-center justify-between shadow-lg",children:[i.jsx("div",{className:"flex-1"}),i.jsx("div",{className:"flex-1 text-center",children:i.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-300",children:"Share Feedback"})}),i.jsx("div",{className:"flex-1 flex justify-end",children:i.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-white/10 transition-colors","aria-label":"Collapse feedback bar",children:i.jsx(pn,{size:16})})})]}):i.jsx("button",{onClick:n,className:"fixed bottom-2 left-2 bg-blue-600 hover:bg-blue-500 p-2 rounded-full shadow-lg","aria-label":"Expand feedback bar",children:i.jsx(ls,{size:20,className:"text-white"})})})},Jle=()=>{const{isSoundEnabled:t,toggleSound:e,playSound:r}=Ge(),n=()=>{e(),r("toggleSwitch")};return i.jsx("button",{onClick:n,className:`fixed bottom-2 right-2 z-50 p-2 rounded-full shadow-lg transition-colors ${t?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,"aria-label":t?"Mute sound":"Unmute sound",title:t?"Mute sound":"Unmute sound",children:t?i.jsx(n7,{size:20,className:"text-white"}):i.jsx(a7,{size:20,className:"text-white"})})},rN="dismissedFeatureAnnouncements";function nN(){const t=localStorage.getItem(rN);if(!t)return[];try{return JSON.parse(t)}catch{return[]}}function Yle(t){return nN().includes(t)}function Zle(t){const e=nN();e.includes(t)||(e.push(t),localStorage.setItem(rN,JSON.stringify(e)))}const eAe=({id:t,title:e,description:r,icon:n,buttonText:s="Got it!"})=>{const{playSound:a}=Ge(),[o,l]=R.useState(()=>!Yle(t)),A=()=>{a("buttonClick"),Zle(t),l(!1)};return o?i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-900 rounded-lg w-full max-w-md border border-orange-600/50 shadow-xl shadow-orange-600/20",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[n||i.jsx(ID,{size:24,className:"text-orange-400"}),i.jsx("h3",{className:"text-lg font-semibold text-white",children:e})]}),i.jsx("button",{onClick:A,className:"text-gray-400 hover:text-white p-1 transition-colors",children:i.jsx(jr,{size:20})})]}),i.jsx("div",{className:"p-4",children:i.jsx("div",{className:"text-gray-300 text-sm leading-relaxed",children:r})}),i.jsx("div",{className:"p-4 border-t border-gray-700",children:i.jsx("button",{onClick:A,className:"w-full bg-orange-600 hover:bg-orange-500 text-white font-medium py-3 px-4 rounded transition-colors",children:s})})]})}):null},tAe=()=>(B.useEffect(()=>{const t=()=>{xs.Howler.ctx&&xs.Howler.ctx.state!=="running"&&xs.Howler.ctx.resume().then(()=>{console.log("AudioContext resumed successfully on user interaction")}).catch(e=>{console.error("Failed to resume AudioContext:",e)}),document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)};return document.addEventListener("click",t),document.addEventListener("keydown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)}},[]),null),rAe=({winningTeam:t,onReturnToSetup:e,players:r,gameLength:n,doubleLanes:s,onUpdatePlayerStats:a})=>{const[o,l]=B.useState(!1),[A,u]=B.useState(!1),[h,c]=B.useState(!1),[d,f]=B.useState(null),[g,y]=B.useState(!1),[v,m]=B.useState(!1),{playSound:p}=Ge();B.useEffect(()=>{p("victory");const b=setTimeout(()=>{l(!0),p("buttonClick")},3e3);return()=>clearTimeout(b)},[]);const x=()=>{p("buttonClick"),e()},w=async()=>{u(!0),f(null);try{p("buttonClick");const b={date:new Date,winningTeam:t,gameLength:n,doubleLanes:s},S=r.map(E=>{var C,N,Q,P,F,$,L,D,z;return{id:E.name,team:E.team,heroId:((C=E.hero)==null?void 0:C.id)||0,heroName:((N=E.hero)==null?void 0:N.name)||"Unknown Hero",heroRoles:((Q=E.hero)==null?void 0:Q.roles)||[],kills:(P=E.stats)==null?void 0:P.totalKills,deaths:(F=E.stats)==null?void 0:F.totalDeaths,assists:($=E.stats)==null?void 0:$.totalAssists,goldEarned:(L=E.stats)==null?void 0:L.totalGoldEarned,minionKills:(D=E.stats)==null?void 0:D.totalMinionKills,level:(z=E.stats)==null?void 0:z.level}});await be.recordMatch(b,S),c(!0),p("phaseChange")}catch(b){console.error("Error saving match data:",b),f("Failed to save match data. Please try again.")}finally{u(!1)}},_=b=>{p("buttonClick"),b&&a&&a(b),m(!0),y(!1),p("phaseChange")};return i.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center",children:[i.jsx("div",{className:`absolute inset-0 ${t===W.Titans?"bg-blue-900 bg-opacity-95":"bg-red-900 bg-opacity-95"}`}),i.jsxs("div",{className:"relative z-10 text-center",children:[i.jsx("div",{className:"mb-8 transform scale-100 animate-bounce",children:i.jsx(af,{size:120,className:`${t===W.Titans?"text-blue-300":"text-red-300"}`})}),i.jsxs("h1",{className:"text-6xl font-bold mb-4 animate-in fade-in",children:[t===W.Titans?"Titan":"Atlantean"," Victory!"]}),i.jsxs("p",{className:"text-2xl mb-12 opacity-75",children:["The ",t===W.Titans?"Titan":"Atlantean","s have emerged victorious!"]}),i.jsx("div",{className:"victory-stars",children:[...Array(20)].map((b,S)=>i.jsx("div",{className:`absolute star-${S} text-${t===W.Titans?"blue":"red"}-200`,style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,opacity:Math.random()*.5+.5,animation:`twinkle ${Math.random()*2+1}s infinite alternate`},children:""},S))}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center mt-4",children:[i.jsxs("button",{onClick:x,className:`px-6 py-3 rounded-lg text-white font-medium flex items-center mx-auto ${o?"opacity-100":"opacity-0"} transition-opacity duration-500 ${t===W.Titans?"bg-blue-600 hover:bg-blue-500":"bg-red-600 hover:bg-red-500"}`,children:[i.jsx(aD,{size:20,className:"mr-2"}),"Return to Setup"]}),!v&&o&&i.jsx(Ue,{text:"Record statistics for the final round before saving",children:i.jsxs("button",{onClick:()=>{p("buttonClick"),y(!0)},className:`px-6 py-3 rounded-lg text-white font-medium flex items-center mx-auto ${t===W.Titans?"bg-blue-700 hover:bg-blue-600":"bg-red-700 hover:bg-red-600"}`,children:[i.jsx(hh,{size:20,className:"mr-2"}),"Record Final Round Stats"]})}),o&&i.jsx(Ue,{text:h?"Match data saved successfully":"Save match results to your statistics",children:i.jsx("button",{onClick:w,disabled:A||h,className:`px-6 py-3 rounded-lg text-white font-medium flex items-center mx-auto
                  ${h?"bg-green-600 cursor-default":t===W.Titans?"bg-blue-700 hover:bg-blue-600":"bg-red-700 hover:bg-red-600"} ${A?"opacity-70 cursor-wait":"opacity-100"}`,children:A?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):h?i.jsxs(i.Fragment,{children:[i.jsx(hh,{size:20,className:"mr-2"}),"Saved Successfully"]}):i.jsxs(i.Fragment,{children:[i.jsx(hh,{size:20,className:"mr-2"}),"Save Match Data"]})})})]}),v&&o&&i.jsx("div",{className:"mt-4 px-5 py-3 bg-green-800/70 rounded-lg inline-block",children:i.jsxs("p",{className:"flex items-center text-green-200",children:[i.jsx(Bi,{size:16,className:"mr-2"}),"Final round statistics recorded"]})}),d&&i.jsx("div",{className:"mt-4 px-5 py-3 bg-red-800/70 rounded-lg inline-block",children:i.jsxs("p",{className:"flex items-center text-red-200",children:[i.jsx(ea,{size:16,className:"mr-2"}),d]})})]}),i.jsx(ZE,{players:r,onComplete:_,isVisible:g}),i.jsx("style",{children:`
        @keyframes twinkle {
          0% { transform: scale(0.5); opacity: 0.3; }
          100% { transform: scale(1.5); opacity: 0.9; }
        }
        
        .animate-in {
          animation: fadeIn 1s ease-out forwards;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        .victory-stars div {
          position: absolute;
          font-size: 1.5rem;
        }
      `})]})},nAe=({gameState:t,players:e,onResume:r,onDiscard:n,savedTime:s})=>{const{playSound:a}=Ge(),o=()=>{a("buttonClick"),r()},l=()=>{a("buttonClick"),n()},A=e.filter(c=>c.team===W.Titans).length,u=e.filter(c=>c.team===W.Atlanteans).length,h=c=>{switch(c){case"strategy":return"Strategy Phase";case"move":return"Action Phase";case"turn-end":return"Turn Complete";default:return c}};return i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full shadow-lg border border-blue-500",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center",children:[i.jsx(as,{size:24,className:"mr-2 text-blue-400"}),"Resume Previous Game?"]}),i.jsxs("p",{className:"mb-4",children:["You have an ongoing game session from ",i.jsx("span",{className:"font-medium text-blue-300",children:s}),". Would you like to resume where you left off?"]}),i.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg mb-6",children:[i.jsx("h3",{className:"font-semibold mb-2 text-blue-200",children:"Game Summary:"}),i.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[i.jsxs("li",{className:"flex items-center",children:[i.jsx(At,{size:16,className:"mr-2 text-yellow-400"}),i.jsxs("span",{children:["Round ",t.round,", Turn ",t.turn,"/4"]})]}),i.jsxs("li",{className:"flex items-center",children:[i.jsx(ii,{size:16,className:"mr-2 text-green-400"}),i.jsxs("span",{children:[A," Titans vs ",u," Atlanteans"]})]}),i.jsxs("li",{className:"flex justify-between",children:[i.jsxs("span",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),"Titans: ",t.teamLives.titans," lives"]}),i.jsxs("span",{className:"flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),"Atlanteans: ",t.teamLives.atlanteans," lives"]})]}),i.jsxs("li",{children:["Current Phase: ",i.jsx("span",{className:"text-yellow-300",children:h(t.currentPhase)})]})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{className:"flex-1 bg-green-600 hover:bg-green-500 px-4 py-3 rounded-lg text-white font-medium flex items-center justify-center shadow-md",onClick:o,children:[i.jsx(qx,{size:18,className:"mr-2"})," Resume Game"]}),i.jsxs("button",{className:"flex-1 bg-gray-600 hover:bg-gray-500 px-4 py-3 rounded-lg text-white font-medium flex items-center justify-center shadow-md",onClick:l,children:[i.jsx(jr,{size:18,className:"mr-2"})," New Game"]})]})]})})};class sAe{constructor(){Z(this,"dbName","guards-of-atlantis-timer");Z(this,"storeName","game-state");Z(this,"version",1);Z(this,"dbPromise",null);this.initDB()}initDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((e,r)=>{const n=indexedDB.open(this.dbName,this.version);n.onerror=s=>{console.error("IndexedDB error:",s),r(s)},n.onsuccess=s=>{e(s.target.result)},n.onupgradeneeded=s=>{const a=s.target.result;a.objectStoreNames.contains(this.storeName)||a.createObjectStore(this.storeName,{keyPath:"id"})}}),this.dbPromise)}async saveGame(e){try{const n=(await this.initDB()).transaction(this.storeName,"readwrite"),s=n.objectStore(this.storeName),a={...e,timestamp:Date.now()};return s.put({id:"current",...a}),new Promise((o,l)=>{n.oncomplete=()=>o(),n.onerror=A=>l(A)})}catch(r){throw console.error("Error saving game:",r),r}}async loadGame(){try{const s=(await this.initDB()).transaction(this.storeName,"readonly").objectStore(this.storeName).get("current");return new Promise((a,o)=>{s.onsuccess=()=>{const l=s.result;if(l){const{id:A,...u}=l;a(u)}else a(null)},s.onerror=l=>o(l)})}catch(e){return console.error("Error loading game:",e),null}}async clearGame(){try{const r=(await this.initDB()).transaction(this.storeName,"readwrite");return r.objectStore(this.storeName).delete("current"),new Promise((s,a)=>{r.oncomplete=()=>s(),r.onerror=o=>a(o)})}catch(e){throw console.error("Error clearing game:",e),e}}isSupported(){return!!window.indexedDB}}const Oo=new sAe,ln=class ln{async runMigrations(){const e=Date.now();try{const r=this.getLastMigrationVersion();if(r>=ln.CURRENT_VERSION)return{success:!0,version:r,matchesAnalyzed:0,statsConverted:0,playersAffected:0,duration:Date.now()-e};const n=this.runLegacyStatsMigration(),s=new Promise((o,l)=>{setTimeout(()=>l(new Error("Migration timeout")),ln.TIMEOUT_MS)}),a=await Promise.race([n,s]);return this.setMigrationVersion(ln.CURRENT_VERSION),{success:!0,version:ln.CURRENT_VERSION,duration:Date.now()-e,...a}}catch(r){return console.error("Migration failed:",r),{success:!1,version:this.getLastMigrationVersion(),matchesAnalyzed:0,statsConverted:0,playersAffected:0,error:r instanceof Error?r.message:"Unknown migration error",duration:Date.now()-e}}}async runLegacyStatsMigration(){console.log(" Starting legacy stats migration...");const e=await be.getAllMatches();console.log(` Found ${e.length} matches to analyze`);let r=0;const n=new Set;for(const a of e){const o=await be.getMatchPlayers(a.id),l=["kills","deaths","assists","goldEarned","minionKills","level"];for(const A of l){const u=o.map(f=>f[A]),h=u.every(f=>f===0),c=u.some(f=>f==null),d=u.some(f=>f!==0&&f!==void 0&&f!==null);if(h&&!c&&!d)for(const f of o)await be.updateMatchPlayer(f.id,{...f,[A]:void 0}),r++,n.add(f.playerId)}}const s={matchesAnalyzed:e.length,statsConverted:r,playersAffected:n.size};return console.log(" Legacy stats migration completed:",s),s}getLastMigrationVersion(){try{const e=localStorage.getItem(ln.MIGRATION_VERSION_KEY);return parseInt(e||"0")}catch(e){return console.warn("Failed to read migration version:",e),0}}setMigrationVersion(e){try{localStorage.setItem(ln.MIGRATION_VERSION_KEY,e.toString())}catch(r){console.warn("Failed to save migration version:",r)}}isMigrationNeeded(){return this.getLastMigrationVersion()<ln.CURRENT_VERSION}resetMigrationVersion(){try{localStorage.removeItem(ln.MIGRATION_VERSION_KEY)}catch(e){console.warn("Failed to reset migration version:",e)}}};Z(ln,"MIGRATION_VERSION_KEY","goa_migration_version"),Z(ln,"CURRENT_VERSION",1),Z(ln,"TIMEOUT_MS",3e4);let Ey=ln;const aAe=new Ey;class iAe{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const r of this._parts)e.push(r);return oAe(e).buffer}}function oAe(t){let e=0;for(const s of t)e+=s.byteLength;const r=new Uint8Array(e);let n=0;for(const s of t){const a=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);r.set(a,n),n+=s.byteLength}return r}function sN(t){return new lAe(t).unpack()}function aN(t){const e=new AAe,r=e.pack(t);return r instanceof Promise?r.then(()=>e.getBuffer()):e.getBuffer()}class lAe{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let r;if((r=e^160)<=15)return this.unpack_raw(r);if((r=e^176)<=15)return this.unpack_string(r);if((r=e^144)<=15)return this.unpack_array(r);if((r=e^128)<=15)return this.unpack_map(r);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),r=(e[0]&255)*256+(e[1]&255);return this.index+=2,r}unpack_uint32(){const e=this.read(4),r=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,r}unpack_uint64(){const e=this.read(8),r=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,r}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const r=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,r}unpack_string(e){const r=this.read(e);let n=0,s="",a,o;for(;n<e;)a=r[n],a<160?(o=a,n++):(a^192)<32?(o=(a&31)<<6|r[n+1]&63,n+=2):(a^224)<16?(o=(a&15)<<12|(r[n+1]&63)<<6|r[n+2]&63,n+=3):(o=(a&7)<<18|(r[n+1]&63)<<12|(r[n+2]&63)<<6|r[n+3]&63,n+=4),s+=String.fromCodePoint(o);return this.index+=e,s}unpack_array(e){const r=new Array(e);for(let n=0;n<e;n++)r[n]=this.unpack();return r}unpack_map(e){const r={};for(let n=0;n<e;n++){const s=this.unpack();r[s]=this.unpack()}return r}unpack_float(){const e=this.unpack_uint32(),r=e>>31,n=(e>>23&255)-127,s=e&8388607|8388608;return(r===0?1:-1)*s*2**(n-23)}unpack_double(){const e=this.unpack_uint32(),r=this.unpack_uint32(),n=e>>31,s=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(s-20)+r*2**(s-52);return(n===0?1:-1)*o}read(e){const r=this.index;if(r+e<=this.length)return this.dataView.subarray(r,r+e);throw new Error("BinaryPackFailure: read index out of range")}}class AAe{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const r=e.constructor;if(e instanceof Array){const n=this.pack_array(e);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const n=e;this.pack_bin(new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(n=>{this.pack_bin(new Uint8Array(n)),this._bufferBuilder.flush()});if(r==Object||r.toString().startsWith("class")){const n=this.pack_object(e);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${r.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const r=e.length;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this._bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const r=this._textEncoder.encode(e),n=r.length;if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this._bufferBuilder.append(216),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_array(e){const r=e.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this._bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");const n=s=>{if(s<r){const a=this.pack(e[s]);return a instanceof Promise?a.then(()=>n(s+1)):n(s+1)}};return n(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let r=0;e<0&&(r=1,e=-e);const n=Math.floor(Math.log(e)/Math.LN2),s=e/2**n-1,a=Math.floor(s*2**52),o=2**32,l=r<<31|n+1023<<20|a/o&1048575,A=a%o;this._bufferBuilder.append(203),this.pack_int32(l),this.pack_int32(A)}pack_object(e){const r=Object.keys(e),n=r.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this._bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");const s=a=>{if(a<r.length){const o=r[a];if(e.hasOwnProperty(o)){this.pack(o);const l=this.pack(e[o]);if(l instanceof Promise)return l.then(()=>s(a+1))}return s(a+1)}};return s(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const r=e&4294967295;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_uint64(e){const r=e/4294967296,n=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const r=Math.floor(e/4294967296),n=e%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}constructor(){this._bufferBuilder=new iAe,this._textEncoder=new TextEncoder}}let iN=!0,oN=!0;function WA(t,e,r){const n=t.match(e);return n&&n.length>=r&&parseFloat(n[r],10)}function fo(t,e,r){if(!t.RTCPeerConnection)return;const n=t.RTCPeerConnection.prototype,s=n.addEventListener;n.addEventListener=function(o,l){if(o!==e)return s.apply(this,arguments);const A=u=>{const h=r(u);h&&(l.handleEvent?l.handleEvent(h):l(h))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,A),s.apply(this,[o,A])};const a=n.removeEventListener;n.removeEventListener=function(o,l){if(o!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(l))return a.apply(this,arguments);const A=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[o,A])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function cAe(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(iN=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function uAe(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(oN=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function lN(){if(typeof window=="object"){if(iN)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function kw(t,e){oN&&console.warn(t+" is deprecated, please use "+e+" instead.")}function dAe(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:r}=t;if(r.userAgentData&&r.userAgentData.brands){const n=r.userAgentData.brands.find(s=>s.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(r.mozGetUserMedia)e.browser="firefox",e.version=parseInt(WA(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(WA(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(WA(r.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=WA(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function i2(t){return Object.prototype.toString.call(t)==="[object Object]"}function AN(t){return i2(t)?Object.keys(t).reduce(function(e,r){const n=i2(t[r]),s=n?AN(t[r]):t[r],a=n&&!Object.keys(s).length;return s===void 0||a?e:Object.assign(e,{[r]:s})},{}):t}function Ny(t,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?Ny(t,t.get(e[n]),r):n.endsWith("Ids")&&e[n].forEach(s=>{Ny(t,t.get(s),r)})}))}function o2(t,e,r){const n=r?"outbound-rtp":"inbound-rtp",s=new Map;if(e===null)return s;const a=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&a.push(o)}),a.forEach(o=>{t.forEach(l=>{l.type===n&&l.trackId===o.id&&Ny(t,l,s)})}),s}const l2=lN;function cN(t,e){const r=t&&t.navigator;if(!r.mediaDevices)return;const n=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const A={};return Object.keys(l).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const h=typeof l[u]=="object"?l[u]:{ideal:l[u]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const c=function(d,f){return d?d+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(h.ideal!==void 0){A.optional=A.optional||[];let d={};typeof h.ideal=="number"?(d[c("min",u)]=h.ideal,A.optional.push(d),d={},d[c("max",u)]=h.ideal,A.optional.push(d)):(d[c("",u)]=h.ideal,A.optional.push(d))}h.exact!==void 0&&typeof h.exact!="number"?(A.mandatory=A.mandatory||{},A.mandatory[c("",u)]=h.exact):["min","max"].forEach(d=>{h[d]!==void 0&&(A.mandatory=A.mandatory||{},A.mandatory[c(d,u)]=h[d])})}),l.advanced&&(A.optional=(A.optional||[]).concat(l.advanced)),A},s=function(l,A){if(e.version>=61)return A(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const u=function(h,c,d){c in h&&!(d in h)&&(h[d]=h[c],delete h[c])};l=JSON.parse(JSON.stringify(l)),u(l.audio,"autoGainControl","googAutoGainControl"),u(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=n(l.audio)}if(l&&typeof l.video=="object"){let u=l.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const h=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete l.video.facingMode;let c;if(u.exact==="environment"||u.ideal==="environment"?c=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(c=["front"]),c)return r.mediaDevices.enumerateDevices().then(d=>{d=d.filter(g=>g.kind==="videoinput");let f=d.find(g=>c.some(y=>g.label.toLowerCase().includes(y)));return!f&&d.length&&c.includes("back")&&(f=d[d.length-1]),f&&(l.video.deviceId=u.exact?{exact:f.deviceId}:{ideal:f.deviceId}),l.video=n(l.video),l2("chrome: "+JSON.stringify(l)),A(l)})}l.video=n(l.video)}return l2("chrome: "+JSON.stringify(l)),A(l)},a=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,A,u){s(l,h=>{r.webkitGetUserMedia(h,A,c=>{u&&u(a(c))})})};if(r.getUserMedia=o.bind(r),r.mediaDevices.getUserMedia){const l=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(A){return s(A,u=>l(u).then(h=>{if(u.audio&&!h.getAudioTracks().length||u.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(c=>{c.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(a(h))))}}}function uN(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function dN(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",s=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===s.track.id):a={track:s.track};const o=new Event("track");o.track=s.track,o.receiver=a,o.transceiver={receiver:a},o.streams=[n.stream],this.dispatchEvent(o)}),n.stream.getTracks().forEach(s=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===s.id):a={track:s};const o=new Event("track");o.track=s,o.receiver=a,o.transceiver={receiver:a},o.streams=[n.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else fo(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function hN(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(s,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=s.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:s}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const s=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,A){let u=s.apply(this,arguments);return u||(u=e(this,l),this._senders.push(u)),u};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const A=this._senders.indexOf(l);A!==-1&&this._senders.splice(A,1)}}const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],r.apply(this,[a]),a.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(o=>{const l=this._senders.find(A=>A.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function fN(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const r=t.RTCPeerConnection.prototype.getSenders;r&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=r.apply(this,[]);return a.forEach(o=>o._pc=this),a});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=n.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>o2(o,a.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const r=t.RTCPeerConnection.prototype.getReceivers;r&&(t.RTCPeerConnection.prototype.getReceivers=function(){const s=r.apply(this,[]);return s.forEach(a=>a._pc=this),s}),fo(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>o2(a,s.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const n=arguments[0];let s,a,o;return this.getSenders().forEach(l=>{l.track===n&&(s?o=!0:s=l)}),this.getReceivers().forEach(l=>(l.track===n&&(a?o=!0:a=l),l.track===n)),o||s&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):s?s.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function gN(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const A=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(A)===-1&&this._shimmedLocalStreams[l.id].push(A):this._shimmedLocalStreams[l.id]=[l,A],A};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(c=>c.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();r.apply(this,arguments);const A=this.getSenders().filter(u=>l.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(A)};const n=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],n.apply(this,arguments)};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const A=this._shimmedLocalStreams[l].indexOf(o);A!==-1&&this._shimmedLocalStreams[l].splice(A,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),s.apply(this,arguments)}}function mN(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return gN(t);const r=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const h=r.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(c=>this._reverseStreams[c.id])};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(c=>{if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const c=new t.MediaStream(h.getTracks());this._streams[h.id]=c,this._reverseStreams[c.id]=h,h=c}n.apply(this,[h])};const s=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},s.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},t.RTCPeerConnection.prototype.addTrack=function(h,c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const d=[].slice.call(arguments,1);if(d.length!==1||!d[0].getTracks().find(y=>y===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[c.id];if(g)g.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new t.MediaStream([h]);this._streams[c.id]=y,this._reverseStreams[y.id]=c,this.addStream(y)}return this.getSenders().find(y=>y.track===h)};function a(u,h){let c=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(d=>{const f=u._reverseStreams[d],g=u._streams[f.id];c=c.replace(new RegExp(g.id,"g"),f.id)}),new RTCSessionDescription({type:h.type,sdp:c})}function o(u,h){let c=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(d=>{const f=u._reverseStreams[d],g=u._streams[f.id];c=c.replace(new RegExp(f.id,"g"),g.id)}),new RTCSessionDescription({type:h.type,sdp:c})}["createOffer","createAnswer"].forEach(function(u){const h=t.RTCPeerConnection.prototype[u],c={[u](){const d=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[g=>{const y=a(this,g);d[0].apply(null,[y])},g=>{d[1]&&d[1].apply(null,g)},arguments[2]]):h.apply(this,arguments).then(g=>a(this,g))}};t.RTCPeerConnection.prototype[u]=c[u]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const A=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=A.get.apply(this);return u.type===""?u:a(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let d;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(y=>h.track===y)&&(d=this._streams[f])}),d&&(d.getTracks().length===1?this.removeStream(this._reverseStreams[d.id]):d.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Fy(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const n=t.RTCPeerConnection.prototype[r],s={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=s[r]})}function pN(t,e){fo(t,"negotiationneeded",r=>{const n=r.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return r})}const A2=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:pN,shimAddTrackRemoveTrack:mN,shimAddTrackRemoveTrackWithNative:gN,shimGetSendersWithDtmf:hN,shimGetUserMedia:cN,shimMediaStream:uN,shimOnTrack:dN,shimPeerConnection:Fy,shimSenderReceiverGetStats:fN},Symbol.toStringTag,{value:"Module"}));function yN(t,e){const r=t&&t.navigator,n=t&&t.MediaStreamTrack;if(r.getUserMedia=function(s,a,o){kw("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(s).then(a,o)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const s=function(o,l,A){l in o&&!(A in o)&&(o[A]=o[l],delete o[l])},a=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),s(o.audio,"autoGainControl","mozAutoGainControl"),s(o.audio,"noiseSuppression","mozNoiseSuppression")),a(o)},n&&n.prototype.getSettings){const o=n.prototype.getSettings;n.prototype.getSettings=function(){const l=o.apply(this,arguments);return s(l,"mozAutoGainControl","autoGainControl"),s(l,"mozNoiseSuppression","noiseSuppression"),l}}if(n&&n.prototype.applyConstraints){const o=n.prototype.applyConstraints;n.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),s(l,"autoGainControl","mozAutoGainControl"),s(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function hAe(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const s=new DOMException("getDisplayMedia without video constraints is undefined");return s.name="NotFoundError",s.code=8,Promise.reject(s)}return n.video===!0?n.video={mediaSource:e}:n.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(n)})}function vN(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ty(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(s){const a=t.RTCPeerConnection.prototype[s],o={[s](){return arguments[0]=new(s==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[s]=o[s]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[a,o,l]=arguments;return n.apply(this,[a||null]).then(A=>{if(e.version<53&&!o)try{A.forEach(u=>{u.type=r[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;A.forEach((h,c)=>{A.set(c,Object.assign({},h,{type:r[h.type]||h.type}))})}return A}).then(o,l)}}function xN(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=e.apply(this,[]);return s.forEach(a=>a._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function wN(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n}),fo(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function bN(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){kw("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&r.getTracks().includes(n.track)&&this.removeTrack(n)})})}function _N(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function CN(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const s=n.length>0;s&&n.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(s){const{sender:o}=a,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=n,o.sendEncodings=n,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return a})}function BN(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const n=e.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function SN(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function jN(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const c2=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:CN,shimCreateAnswer:jN,shimCreateOffer:SN,shimGetDisplayMedia:hAe,shimGetParameters:BN,shimGetUserMedia:yN,shimOnTrack:vN,shimPeerConnection:Ty,shimRTCDataChannel:_N,shimReceiverGetStats:wN,shimRemoveStream:bN,shimSenderGetStats:xN},Symbol.toStringTag,{value:"Module"}));function kN(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(s=>e.call(this,s,n)),n.getVideoTracks().forEach(s=>e.call(this,s,n))},t.RTCPeerConnection.prototype.addTrack=function(n,...s){return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(r);if(n===-1)return;this._localStreams.splice(n,1);const s=r.getTracks();this.getSenders().forEach(a=>{s.includes(a.track)&&this.removeTrack(a)})})}}function EN(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(s=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(s))return;this._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,this.dispatchEvent(a)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(s){s.streams.forEach(a=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(a)>=0)return;n._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,n.dispatchEvent(o)})}),e.apply(n,arguments)}}}function NN(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,r=e.createOffer,n=e.createAnswer,s=e.setLocalDescription,a=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,h){const c=arguments.length>=2?arguments[2]:arguments[0],d=r.apply(this,[c]);return h?(d.then(u,h),Promise.resolve()):d},e.createAnswer=function(u,h){const c=arguments.length>=2?arguments[2]:arguments[0],d=n.apply(this,[c]);return h?(d.then(u,h),Promise.resolve()):d};let l=function(A,u,h){const c=s.apply(this,[A]);return h?(c.then(u,h),Promise.resolve()):c};e.setLocalDescription=l,l=function(A,u,h){const c=a.apply(this,[A]);return h?(c.then(u,h),Promise.resolve()):c},e.setRemoteDescription=l,l=function(A,u,h){const c=o.apply(this,[A]);return h?(c.then(u,h),Promise.resolve()):c},e.addIceCandidate=l}function FN(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,n=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=s=>n(TN(s))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(n,s,a){e.mediaDevices.getUserMedia(n).then(s,a)}).bind(e))}function TN(t){return t&&t.video!==void 0?Object.assign({},t,{video:AN(t.video)}):t}function UN(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(n,s){if(n&&n.iceServers){const a=[];for(let o=0;o<n.iceServers.length;o++){let l=n.iceServers[o];l.urls===void 0&&l.url?(kw("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(n.iceServers[o])}n.iceServers=a}return new e(n,s)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function QN(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function IN(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveAudio===!0&&!s&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const a=this.getTransceivers().find(o=>o.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function PN(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const u2=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:PN,shimCallbacksAPI:NN,shimConstraints:TN,shimCreateOfferLegacy:IN,shimGetUserMedia:FN,shimLocalStreamsAPI:kN,shimRTCIceServerUrls:UN,shimRemoteStreamsAPI:EN,shimTrackEventTransceiver:QN},Symbol.toStringTag,{value:"Module"}));var DN={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(r){return r.split(`
m=`).map((s,a)=>(a>0?"m="+s:s).trim()+`\r
`)},e.getDescription=function(r){const n=e.splitSections(r);return n&&n[0]},e.getMediaSections=function(r){const n=e.splitSections(r);return n.shift(),n},e.matchPrefix=function(r,n){return e.splitLines(r).filter(s=>s.indexOf(n)===0)},e.parseCandidate=function(r){let n;r.indexOf("a=candidate:")===0?n=r.substring(12).split(" "):n=r.substring(10).split(" ");const s={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let a=8;a<n.length;a+=2)switch(n[a]){case"raddr":s.relatedAddress=n[a+1];break;case"rport":s.relatedPort=parseInt(n[a+1],10);break;case"tcptype":s.tcpType=n[a+1];break;case"ufrag":s.ufrag=n[a+1],s.usernameFragment=n[a+1];break;default:s[n[a]]===void 0&&(s[n[a]]=n[a+1]);break}return s},e.writeCandidate=function(r){const n=[];n.push(r.foundation);const s=r.component;s==="rtp"?n.push(1):s==="rtcp"?n.push(2):n.push(s),n.push(r.protocol.toUpperCase()),n.push(r.priority),n.push(r.address||r.ip),n.push(r.port);const a=r.type;return n.push("typ"),n.push(a),a!=="host"&&r.relatedAddress&&r.relatedPort&&(n.push("raddr"),n.push(r.relatedAddress),n.push("rport"),n.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(n.push("ufrag"),n.push(r.usernameFragment||r.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(r){return r.substring(14).split(" ")},e.parseRtpMap=function(r){let n=r.substring(9).split(" ");const s={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),s.name=n[0],s.clockRate=parseInt(n[1],10),s.channels=n.length===3?parseInt(n[2],10):1,s.numChannels=s.channels,s},e.writeRtpMap=function(r){let n=r.payloadType;r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType);const s=r.channels||r.numChannels||1;return"a=rtpmap:"+n+" "+r.name+"/"+r.clockRate+(s!==1?"/"+s:"")+`\r
`},e.parseExtmap=function(r){const n=r.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},e.parseFmtp=function(r){const n={};let s;const a=r.substring(r.indexOf(" ")+1).split(";");for(let o=0;o<a.length;o++)s=a[o].trim().split("="),n[s[0].trim()]=s[1];return n},e.writeFmtp=function(r){let n="",s=r.payloadType;if(r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const a=[];Object.keys(r.parameters).forEach(o=>{r.parameters[o]!==void 0?a.push(o+"="+r.parameters[o]):a.push(o)}),n+="a=fmtp:"+s+" "+a.join(";")+`\r
`}return n},e.parseRtcpFb=function(r){const n=r.substring(r.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(r){let n="",s=r.payloadType;return r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(a=>{n+="a=rtcp-fb:"+s+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(r){const n=r.indexOf(" "),s={ssrc:parseInt(r.substring(7,n),10)},a=r.indexOf(":",n);return a>-1?(s.attribute=r.substring(n+1,a),s.value=r.substring(a+1)):s.attribute=r.substring(n+1),s},e.parseSsrcGroup=function(r){const n=r.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(s=>parseInt(s,10))}},e.getMid=function(r){const n=e.matchPrefix(r,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(r){const n=r.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(r,n){return{role:"auto",fingerprints:e.matchPrefix(r+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,n){let s="a=setup:"+n+`\r
`;return r.fingerprints.forEach(a=>{s+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),s},e.parseCryptoLine=function(r){const n=r.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const n=r.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,n){return e.matchPrefix(r+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(r,n){const s=e.matchPrefix(r+n,"a=ice-ufrag:")[0],a=e.matchPrefix(r+n,"a=ice-pwd:")[0];return s&&a?{usernameFragment:s.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(r){let n="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(r){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(r)[0].split(" ");n.profile=a[2];for(let l=3;l<a.length;l++){const A=a[l],u=e.matchPrefix(r,"a=rtpmap:"+A+" ")[0];if(u){const h=e.parseRtpMap(u),c=e.matchPrefix(r,"a=fmtp:"+A+" ");switch(h.parameters=c.length?e.parseFmtp(c[0]):{},h.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+A+" ").map(e.parseRtcpFb),n.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(h.name.toUpperCase());break}}}e.matchPrefix(r,"a=extmap:").forEach(l=>{n.headerExtensions.push(e.parseExtmap(l))});const o=e.matchPrefix(r,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(l=>{o.forEach(A=>{l.rtcpFeedback.find(h=>h.type===A.type&&h.parameter===A.parameter)||l.rtcpFeedback.push(A)})}),n},e.writeRtpDescription=function(r,n){let s="";s+="m="+r+" ",s+=n.codecs.length>0?"9":"0",s+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",s+=n.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,s+=`c=IN IP4 0.0.0.0\r
`,s+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(o=>{s+=e.writeRtpMap(o),s+=e.writeFmtp(o),s+=e.writeRtcpFb(o)});let a=0;return n.codecs.forEach(o=>{o.maxptime>a&&(a=o.maxptime)}),a>0&&(s+="a=maxptime:"+a+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(o=>{s+=e.writeExtmap(o)}),s},e.parseRtpEncodingParameters=function(r){const n=[],s=e.parseRtpParameters(r),a=s.fecMechanisms.indexOf("RED")!==-1,o=s.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(r,"a=ssrc:").map(d=>e.parseSsrcMedia(d)).filter(d=>d.attribute==="cname"),A=l.length>0&&l[0].ssrc;let u;const h=e.matchPrefix(r,"a=ssrc-group:FID").map(d=>d.substring(17).split(" ").map(g=>parseInt(g,10)));h.length>0&&h[0].length>1&&h[0][0]===A&&(u=h[0][1]),s.codecs.forEach(d=>{if(d.name.toUpperCase()==="RTX"&&d.parameters.apt){let f={ssrc:A,codecPayloadType:parseInt(d.parameters.apt,10)};A&&u&&(f.rtx={ssrc:u}),n.push(f),a&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:A,mechanism:o?"red+ulpfec":"red"},n.push(f))}}),n.length===0&&A&&n.push({ssrc:A});let c=e.matchPrefix(r,"b=");return c.length&&(c[0].indexOf("b=TIAS:")===0?c=parseInt(c[0].substring(7),10):c[0].indexOf("b=AS:")===0?c=parseInt(c[0].substring(5),10)*1e3*.95-50*40*8:c=void 0,n.forEach(d=>{d.maxBitrate=c})),n},e.parseRtcpParameters=function(r){const n={},s=e.matchPrefix(r,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];s&&(n.cname=s.value,n.ssrc=s.ssrc);const a=e.matchPrefix(r,"a=rtcp-rsize");n.reducedSize=a.length>0,n.compound=a.length===0;const o=e.matchPrefix(r,"a=rtcp-mux");return n.mux=o.length>0,n},e.writeRtcpParameters=function(r){let n="";return r.reducedSize&&(n+=`a=rtcp-rsize\r
`),r.mux&&(n+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(n+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),n},e.parseMsid=function(r){let n;const s=e.matchPrefix(r,"a=msid:");if(s.length===1)return n=s[0].substring(7).split(" "),{stream:n[0],track:n[1]};const a=e.matchPrefix(r,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(a.length>0)return n=a[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(r){const n=e.parseMLine(r),s=e.matchPrefix(r,"a=max-message-size:");let a;s.length>0&&(a=parseInt(s[0].substring(19),10)),isNaN(a)&&(a=65536);const o=e.matchPrefix(r,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:a};const l=e.matchPrefix(r,"a=sctpmap:");if(l.length>0){const A=l[0].substring(10).split(" ");return{port:parseInt(A[0],10),protocol:A[1],maxMessageSize:a}}},e.writeSctpDescription=function(r,n){let s=[];return r.protocol!=="DTLS/SCTP"?s=["m="+r.kind+" 9 "+r.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:s=["m="+r.kind+" 9 "+r.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&s.push("a=max-message-size:"+n.maxMessageSize+`\r
`),s.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(r,n,s){let a;const o=n!==void 0?n:2;return r?a=r:a=e.generateSessionId(),`v=0\r
o=`+(s||"thisisadapterortc")+" "+a+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(r,n){const s=e.splitLines(r);for(let a=0;a<s.length;a++)switch(s[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return s[a].substring(2)}return n?e.getDirection(n):"sendrecv"},e.getKind=function(r){return e.splitLines(r)[0].split(" ")[0].substring(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){const s=e.splitLines(r)[0].substring(2).split(" ");return{kind:s[0],port:parseInt(s[1],10),protocol:s[2],fmt:s.slice(3).join(" ")}},e.parseOLine=function(r){const s=e.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:s[0],sessionId:s[1],sessionVersion:parseInt(s[2],10),netType:s[3],addressType:s[4],address:s[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const n=e.splitLines(r);for(let s=0;s<n.length;s++)if(n[s].length<2||n[s].charAt(1)!=="=")return!1;return!0},t.exports=e})(DN);var MN=DN.exports;const kl=St(MN),fAe=TU({__proto__:null,default:kl},[MN]);function mh(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const s=new e(n),a=kl.parseCandidate(n.candidate);for(const o in a)o in s||Object.defineProperty(s,o,{value:a[o]});return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(n)},t.RTCIceCandidate.prototype=e.prototype,fo(t,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new t.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Uy(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||fo(t,"icecandidate",e=>{if(e.candidate){const r=kl.parseCandidate(e.candidate.candidate);r.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return e})}function ph(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(l){if(!l||!l.sdp)return!1;const A=kl.splitSections(l.sdp);return A.shift(),A.some(u=>{const h=kl.parseMLine(u);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},n=function(l){const A=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(A===null||A.length<2)return-1;const u=parseInt(A[1],10);return u!==u?-1:u},s=function(l){let A=65536;return e.browser==="firefox"&&(e.version<57?l===-1?A=16384:A=2147483637:e.version<60?A=e.version===57?65535:65536:A=2147483637),A},a=function(l,A){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const h=kl.matchPrefix(l.sdp,"a=max-message-size:");return h.length>0?u=parseInt(h[0].substring(19),10):e.browser==="firefox"&&A!==-1&&(u=2147483637),u},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:A}=this.getConfiguration();A==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const A=n(arguments[0]),u=s(A),h=a(arguments[0],A);let c;u===0&&h===0?c=Number.POSITIVE_INFINITY:u===0||h===0?c=Math.max(u,h):c=Math.min(u,h);const d={};Object.defineProperty(d,"maxMessageSize",{get(){return c}}),this._sctp=d}return o.apply(this,arguments)}}function yh(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(n,s){const a=n.send;n.send=function(){const l=arguments[0],A=l.length||l.size||l.byteLength;if(n.readyState==="open"&&s.sctp&&A>s.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+s.sctp.maxMessageSize+" bytes)");return a.apply(n,arguments)}}const r=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const s=r.apply(this,arguments);return e(s,this),s},fo(t,"datachannel",n=>(e(n.channel,n.target),n))}function Qy(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const n=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=s=>{const a=s.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const o=new Event("connectionstatechange",s);a.dispatchEvent(o)}return s},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Iy(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const r=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(s){if(s&&s.sdp&&s.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=s.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&s instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:s.type,sdp:a}):s.sdp=a}return r.apply(this,arguments)}}function vh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function xh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const r=t.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let s=arguments[0]||{};if(typeof s!="object"||s.type&&s.sdp)return r.apply(this,arguments);if(s={type:s.type,sdp:s.sdp},!s.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":s.type="offer";break;default:s.type="answer";break}return s.sdp||s.type!=="offer"&&s.type!=="answer"?r.apply(this,[s]):(s.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>r.apply(this,[o]))})}const gAe=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Iy,shimAddIceCandidateNullOrEmpty:vh,shimConnectionState:Qy,shimMaxMessageSize:ph,shimParameterlessSetLocalDescription:xh,shimRTCIceCandidate:mh,shimRTCIceCandidateRelayProtocol:Uy,shimSendThrowTypeError:yh},Symbol.toStringTag,{value:"Module"}));function mAe({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=lN,n=dAe(t),s={browserDetails:n,commonShim:gAe,extractVersion:WA,disableLog:cAe,disableWarnings:uAe,sdp:fAe};switch(n.browser){case"chrome":if(!A2||!Fy||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),s;if(n.version===null)return r("Chrome shim can not determine version, not shimming."),s;r("adapter.js shimming chrome."),s.browserShim=A2,vh(t,n),xh(t),cN(t,n),uN(t),Fy(t,n),dN(t),mN(t,n),hN(t),fN(t),pN(t,n),mh(t),Uy(t),Qy(t),ph(t,n),yh(t),Iy(t,n);break;case"firefox":if(!c2||!Ty||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),s;r("adapter.js shimming firefox."),s.browserShim=c2,vh(t,n),xh(t),yN(t,n),Ty(t,n),vN(t),bN(t),xN(t),wN(t),_N(t),CN(t),BN(t),SN(t),jN(t),mh(t),Qy(t),ph(t,n),yh(t);break;case"safari":if(!u2||!e.shimSafari)return r("Safari shim is not included in this adapter release."),s;r("adapter.js shimming safari."),s.browserShim=u2,vh(t,n),xh(t),UN(t),IN(t),NN(t),kN(t),EN(t),QN(t),FN(t),PN(t),mh(t),Uy(t),ph(t,n),yh(t),Iy(t,n);break;default:r("Unsupported browser!");break}return s}const d2=mAe({window:typeof window>"u"?void 0:window});function go(t,e,r,n){Object.defineProperty(t,e,{get:r,set:n,enumerable:!0,configurable:!0})}class RN{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const r=[],n=e.byteLength,s=Math.ceil(n/this.chunkedMTU);let a=0,o=0;for(;o<n;){const l=Math.min(n,o+this.chunkedMTU),A=e.slice(o,l),u={__peerData:this._dataCount,n:a,data:A,total:s};r.push(u),o=l,a++}return this._dataCount++,r}}}function pAe(t){let e=0;for(const s of t)e+=s.byteLength;const r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.byteLength;return r}const Em=d2.default||d2,EA=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Em.browserDetails.browser}getVersion(){return Em.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Em.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,n=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),n=!0}catch{}finally{r&&r.close()}return n}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},yAe=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),$N=()=>Math.random().toString(36).slice(2),h2={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class vAe extends RN{noop(){}blobToArrayBuffer(e,r){const n=new FileReader;return n.onload=function(s){s.target&&r(s.target.result)},n.readAsArrayBuffer(e),n}binaryStringToArrayBuffer(e){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n)&255;return r.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=h2,this.browser=EA.getBrowser(),this.browserVersion=EA.getVersion(),this.pack=aN,this.unpack=sN,this.supports=function(){const r={browser:EA.isBrowserSupported(),webRTC:EA.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;let n;try{n=new RTCPeerConnection(h2),r.audioVideo=!0;let s;try{s=n.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!s.ordered;try{s.binaryType="blob",r.binaryBlob=!EA.isIOS}catch{}}catch{}finally{s&&s.close()}}catch{}finally{n&&n.close()}return r}(),this.validateId=yAe,this.randomToken=$N}}const Wr=new vAe,xAe="PeerJS: ";var f2;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(f2||(f2={}));class wAe{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...r){const n=[xAe,...r];for(const s in n)n[s]instanceof Error&&(n[s]="("+n[s].name+") "+n[s].message);e>=3?console.log(...n):e>=2?console.warn("WARNING",...n):e>=1&&console.error("ERROR",...n)}constructor(){this._logLevel=0}}var we=new wAe,Ew={},bAe=Object.prototype.hasOwnProperty,$r="~";function eu(){}Object.create&&(eu.prototype=Object.create(null),new eu().__proto__||($r=!1));function _Ae(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function ON(t,e,r,n,s){if(typeof r!="function")throw new TypeError("The listener must be a function");var a=new _Ae(r,n||t,s),o=$r?$r+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],a]:t._events[o].push(a):(t._events[o]=a,t._eventsCount++),t}function wh(t,e){--t._eventsCount===0?t._events=new eu:delete t._events[e]}function kr(){this._events=new eu,this._eventsCount=0}kr.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)bAe.call(r,n)&&e.push($r?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};kr.prototype.listeners=function(e){var r=$r?$r+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,a=n.length,o=new Array(a);s<a;s++)o[s]=n[s].fn;return o};kr.prototype.listenerCount=function(e){var r=$r?$r+e:e,n=this._events[r];return n?n.fn?1:n.length:0};kr.prototype.emit=function(e,r,n,s,a,o){var l=$r?$r+e:e;if(!this._events[l])return!1;var A=this._events[l],u=arguments.length,h,c;if(A.fn){switch(A.once&&this.removeListener(e,A.fn,void 0,!0),u){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,r),!0;case 3:return A.fn.call(A.context,r,n),!0;case 4:return A.fn.call(A.context,r,n,s),!0;case 5:return A.fn.call(A.context,r,n,s,a),!0;case 6:return A.fn.call(A.context,r,n,s,a,o),!0}for(c=1,h=new Array(u-1);c<u;c++)h[c-1]=arguments[c];A.fn.apply(A.context,h)}else{var d=A.length,f;for(c=0;c<d;c++)switch(A[c].once&&this.removeListener(e,A[c].fn,void 0,!0),u){case 1:A[c].fn.call(A[c].context);break;case 2:A[c].fn.call(A[c].context,r);break;case 3:A[c].fn.call(A[c].context,r,n);break;case 4:A[c].fn.call(A[c].context,r,n,s);break;default:if(!h)for(f=1,h=new Array(u-1);f<u;f++)h[f-1]=arguments[f];A[c].fn.apply(A[c].context,h)}}return!0};kr.prototype.on=function(e,r,n){return ON(this,e,r,n,!1)};kr.prototype.once=function(e,r,n){return ON(this,e,r,n,!0)};kr.prototype.removeListener=function(e,r,n,s){var a=$r?$r+e:e;if(!this._events[a])return this;if(!r)return wh(this,a),this;var o=this._events[a];if(o.fn)o.fn===r&&(!s||o.once)&&(!n||o.context===n)&&wh(this,a);else{for(var l=0,A=[],u=o.length;l<u;l++)(o[l].fn!==r||s&&!o[l].once||n&&o[l].context!==n)&&A.push(o[l]);A.length?this._events[a]=A.length===1?A[0]:A:wh(this,a)}return this};kr.prototype.removeAllListeners=function(e){var r;return e?(r=$r?$r+e:e,this._events[r]&&wh(this,r)):(this._events=new eu,this._eventsCount=0),this};kr.prototype.off=kr.prototype.removeListener;kr.prototype.addListener=kr.prototype.on;kr.prefixed=$r;kr.EventEmitter=kr;Ew=kr;var mo={};go(mo,"ConnectionType",()=>Ss);go(mo,"PeerErrorType",()=>Et);go(mo,"BaseConnectionErrorType",()=>tu);go(mo,"DataConnectionErrorType",()=>ru);go(mo,"SerializationType",()=>Ll);go(mo,"SocketEventType",()=>_s);go(mo,"ServerMessageType",()=>Zt);var Ss;(function(t){t.Data="data",t.Media="media"})(Ss||(Ss={}));var Et;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(Et||(Et={}));var tu;(function(t){t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed"})(tu||(tu={}));var ru;(function(t){t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big"})(ru||(ru={}));var Ll;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw"})(Ll||(Ll={}));var _s;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(_s||(_s={}));var Zt;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(Zt||(Zt={}));var Nw={};Nw=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class CAe extends Ew.EventEmitter{constructor(e,r,n,s,a,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const l=e?"wss://":"ws://";this._baseUrl=l+r+":"+n+s+"peerjs?key="+a}start(e,r){this._id=e;const n=`${this._baseUrl}&id=${e}&token=${r}`;this._socket||!this._disconnected||(this._socket=new WebSocket(n+"&version="+Nw.version),this._disconnected=!1,this._socket.onmessage=s=>{let a;try{a=JSON.parse(s.data),we.log("Server message received:",a)}catch{we.log("Invalid server message",s.data);return}this.emit(_s.Message,a)},this._socket.onclose=s=>{this._disconnected||(we.log("Socket closed.",s),this._cleanup(),this._disconnected=!0,this.emit(_s.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),we.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){we.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Zt.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const r of e)this.send(r)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(_s.Error,"Invalid message");return}if(!this._wsOpen())return;const r=JSON.stringify(e);this._socket.send(r)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class LN{constructor(e){this.connection=e}startConnection(e){const r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===Ss.Media&&e._stream&&this._addTracksToConnection(e._stream,r),e.originator){const n=this.connection,s={ordered:!!e.reliable},a=r.createDataChannel(n.label,s);n._initializeDataChannel(a),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){we.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const r=this.connection.peer,n=this.connection.connectionId,s=this.connection.type,a=this.connection.provider;we.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(we.log(`Received ICE candidates for ${r}:`,o.candidate),a.socket.send({type:Zt.Candidate,payload:{candidate:o.candidate,type:s,connectionId:n},dst:r}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":we.log("iceConnectionState is failed, closing connections to "+r),this.connection.emitError(tu.NegotiationFailed,"Negotiation of connection to "+r+" failed."),this.connection.close();break;case"closed":we.log("iceConnectionState is closed, closing connections to "+r),this.connection.emitError(tu.ConnectionClosed,"Connection to "+r+" closed."),this.connection.close();break;case"disconnected":we.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},we.log("Listening for data channel"),e.ondatachannel=o=>{we.log("Received data channel");const l=o.channel;a.getConnection(r,n)._initializeDataChannel(l)},we.log("Listening for remote stream"),e.ontrack=o=>{we.log("Received remote stream");const l=o.streams[0],A=a.getConnection(r,n);if(A.type===Ss.Media){const u=A;this._addStreamToMediaConnection(l,u)}}}cleanup(){we.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const r=e.signalingState!=="closed";let n=!1;const s=this.connection.dataChannel;s&&(n=!!s.readyState&&s.readyState!=="closed"),(r||n)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const n=await e.createOffer(this.connection.options.constraints);we.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),we.log("Set localDescription:",n,`for:${this.connection.peer}`);let s={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Ss.Data){const a=this.connection;s={...s,label:a.label,reliable:a.reliable,serialization:a.serialization}}r.socket.send({type:Zt.Offer,payload:s,dst:this.connection.peer})}catch(s){s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(Et.WebRTC,s),we.log("Failed to setLocalDescription, ",s))}}catch(n){r.emitError(Et.WebRTC,n),we.log("Failed to createOffer, ",n)}}async _makeAnswer(){const e=this.connection.peerConnection,r=this.connection.provider;try{const n=await e.createAnswer();we.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),we.log("Set localDescription:",n,`for:${this.connection.peer}`),r.socket.send({type:Zt.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(s){r.emitError(Et.WebRTC,s),we.log("Failed to setLocalDescription, ",s)}}catch(n){r.emitError(Et.WebRTC,n),we.log("Failed to create answer, ",n)}}async handleSDP(e,r){r=new RTCSessionDescription(r);const n=this.connection.peerConnection,s=this.connection.provider;we.log("Setting remote description",r);const a=this;try{await n.setRemoteDescription(r),we.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await a._makeAnswer()}catch(o){s.emitError(Et.WebRTC,o),we.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){we.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),we.log(`Added ICE candidate for:${this.connection.peer}`)}catch(r){this.connection.provider.emitError(Et.WebRTC,r),we.log("Failed to handleCandidate, ",r)}}_addTracksToConnection(e,r){if(we.log(`add tracks from stream ${e.id} to peer connection`),!r.addTrack)return we.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(n=>{r.addTrack(n,e)})}_addStreamToMediaConnection(e,r){we.log(`add stream ${e.id} to media connection ${r.connectionId}`),r.addStream(e)}}class HN extends Ew.EventEmitter{emitError(e,r){we.error("Error:",r),this.emit("error",new BAe(`${e}`,r))}}class BAe extends Error{constructor(e,r){typeof r=="string"?super(r):(super(),Object.assign(this,r)),this.type=e}}class KN extends HN{get open(){return this._open}constructor(e,r,n){super(),this.peer=e,this.provider=r,this.options=n,this._open=!1,this.metadata=n.metadata}}var qv;const Sc=class Sc extends KN{get type(){return Ss.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,r,n){super(e,r,n),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Sc.ID_PREFIX+Wr.randomToken(),this._negotiator=new LN(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){we.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const r=e.type,n=e.payload;switch(e.type){case Zt.Answer:this._negotiator.handleSDP(r,n.sdp),this._open=!0;break;case Zt.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:we.warn(`Unrecognized message type:${r} from peer:${this.peer}`);break}}answer(e,r={}){if(this._localStream){we.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const n=this.provider._getMessages(this.connectionId);for(const s of n)this.handleMessage(s);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};qv=new WeakMap,mA(Sc,qv,Sc.ID_PREFIX="mc_");let df=Sc;class SAe{constructor(e){this._options=e}_buildRequest(e){const r=this._options.secure?"https":"http",{host:n,port:s,path:a,key:o}=this._options,l=new URL(`${r}://${n}:${s}${a}${o}/${e}`);return l.searchParams.set("ts",`${Date.now()}${Math.random()}`),l.searchParams.set("version",Nw.version),fetch(l.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){we.error("Error retrieving ID",e);let r="";throw this._options.path==="/"&&this._options.host!==Wr.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let r="";throw this._options.host===Wr.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw we.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var Xv,Jv;const Ui=class Ui extends KN{get type(){return Ss.Data}constructor(e,r,n){super(e,r,n),this.connectionId=this.options.connectionId||Ui.ID_PREFIX+$N(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new LN(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{we.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=r=>{we.log(`DC#${this.connectionId} dc onmessage:`,r.data)},this.dataChannel.onclose=()=>{we.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,r=!1){if(!this.open){this.emitError(ru.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,r)}async handleMessage(e){const r=e.payload;switch(e.type){case Zt.Answer:await this._negotiator.handleSDP(e.type,r.sdp);break;case Zt.Candidate:await this._negotiator.handleCandidate(r.candidate);break;default:we.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};Xv=new WeakMap,Jv=new WeakMap,mA(Ui,Xv,Ui.ID_PREFIX="dc_"),mA(Ui,Jv,Ui.MAX_BUFFERED_AMOUNT=8388608);let hf=Ui;class Fw extends hf{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",r=>this._handleDataMessage(r))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>hf.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(r){return we.error(`DC#:${this.connectionId} Error when sending:`,r),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Nm extends Fw{close(e){super.close(e),this._chunkedData={}}constructor(e,r,n){super(e,r,n),this.chunker=new RN,this.serialization=Ll.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const r=sN(e),n=r.__peerData;if(n){if(n.type==="close"){this.close();return}this._handleChunk(r);return}this.emit("data",r)}_handleChunk(e){const r=e.__peerData,n=this._chunkedData[r]||{data:[],count:0,total:e.total};if(n.data[e.n]=new Uint8Array(e.data),n.count++,this._chunkedData[r]=n,n.total===n.count){delete this._chunkedData[r];const s=pAe(n.data);this._handleDataMessage({data:s})}}_send(e,r){const n=aN(e);if(n instanceof Promise)return this._send_blob(n);if(!r&&n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}async _send_blob(e){const r=await e;if(r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}_sendChunks(e){const r=this.chunker.chunk(e);we.log(`DC#${this.connectionId} Try to send ${r.length} chunks...`);for(const n of r)this.send(n,!0)}}class jAe extends Fw{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,r){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Ll.None}}class kAe extends Fw{_handleDataMessage({data:e}){const r=this.parse(this.decoder.decode(e)),n=r.__peerData;if(n&&n.type==="close"){this.close();return}this.emit("data",r)}_send(e,r){const n=this.encoder.encode(this.stringify(e));if(n.byteLength>=Wr.chunkedMTU){this.emitError(ru.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(n)}constructor(...e){super(...e),this.serialization=Ll.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Yv;const jc=class jc extends HN{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[r,n]of this._connections)e[r]=n;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,r){super(),this._serializers={raw:jAe,json:kAe,binary:Nm,"binary-utf8":Nm,default:Nm},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let n;if(e&&e.constructor==Object?r=e:e&&(n=e.toString()),r={debug:0,host:Wr.CLOUD_HOST,port:Wr.CLOUD_PORT,path:"/",key:jc.DEFAULT_KEY,token:Wr.randomToken(),config:Wr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...r},this._options=r,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Wr.CLOUD_HOST?this._options.secure=Wr.isSecure():this._options.host==Wr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&we.setLogFunction(this._options.logFunction),we.logLevel=this._options.debug||0,this._api=new SAe(r),this._socket=this._createServerConnection(),!Wr.supports.audioVideo&&!Wr.supports.data){this._delayedAbort(Et.BrowserIncompatible,"The current browser does not support WebRTC");return}if(n&&!Wr.validateId(n)){this._delayedAbort(Et.InvalidID,`ID "${n}" is invalid`);return}n?this._initialize(n):this._api.retrieveId().then(s=>this._initialize(s)).catch(s=>this._abort(Et.ServerError,s))}_createServerConnection(){const e=new CAe(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(_s.Message,r=>{this._handleMessage(r)}),e.on(_s.Error,r=>{this._abort(Et.SocketError,r)}),e.on(_s.Disconnected,()=>{this.disconnected||(this.emitError(Et.Network,"Lost connection to server."),this.disconnect())}),e.on(_s.Close,()=>{this.disconnected||this._abort(Et.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const r=e.type,n=e.payload,s=e.src;switch(r){case Zt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Zt.Error:this._abort(Et.ServerError,n.msg);break;case Zt.IdTaken:this._abort(Et.UnavailableID,`ID "${this.id}" is taken`);break;case Zt.InvalidKey:this._abort(Et.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Zt.Leave:we.log(`Received leave message from ${s}`),this._cleanupPeer(s),this._connections.delete(s);break;case Zt.Expire:this.emitError(Et.PeerUnavailable,`Could not connect to peer ${s}`);break;case Zt.Offer:{const a=n.connectionId;let o=this.getConnection(s,a);if(o&&(o.close(),we.warn(`Offer received for existing Connection ID:${a}`)),n.type===Ss.Media){const A=new df(s,this,{connectionId:a,_payload:n,metadata:n.metadata});o=A,this._addConnection(s,o),this.emit("call",A)}else if(n.type===Ss.Data){const A=new this._serializers[n.serialization](s,this,{connectionId:a,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable});o=A,this._addConnection(s,o),this.emit("connection",A)}else{we.warn(`Received malformed connection type:${n.type}`);return}const l=this._getMessages(a);for(const A of l)o.handleMessage(A);break}default:{if(!n){we.warn(`You received a malformed message from ${s} of type ${r}`);return}const a=n.connectionId,o=this.getConnection(s,a);o&&o.peerConnection?o.handleMessage(e):a?this._storeMessage(a,e):we.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,r){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(r)}_getMessages(e){const r=this._lostMessages.get(e);return r?(this._lostMessages.delete(e),r):[]}connect(e,r={}){if(r={serialization:"default",...r},this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Et.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const n=new this._serializers[r.serialization](e,this,r);return this._addConnection(e,n),n}call(e,r,n={}){if(this.disconnected){we.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Et.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){we.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const s=new df(e,this,{...n,_stream:r});return this._addConnection(e,s),s}_addConnection(e,r){we.log(`add connection ${r.type}:${r.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(r)}_removeConnection(e){const r=this._connections.get(e.peer);if(r){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,r){const n=this._connections.get(e);if(!n)return null;for(const s of n)if(s.connectionId===r)return s;return null}_delayedAbort(e,r){setTimeout(()=>{this._abort(e,r)},0)}_abort(e,r){we.error("Aborting!"),this.emitError(e,r),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(we.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const r=this._connections.get(e);if(r)for(const n of r)n.close()}disconnect(){if(this.disconnected)return;const e=this.id;we.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)we.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)we.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=r=>{}){this._api.listAllPeers().then(r=>e(r)).catch(r=>this._abort(Et.ServerError,r))}};Yv=new WeakMap,mA(jc,Yv,jc.DEFAULT_KEY="peerjs");let Py=jc;var g2=Py;class EAe{constructor(e={}){Z(this,"peer",null);Z(this,"connections",new Map);Z(this,"dataListeners",new Set);Z(this,"connectionStateChangeHandler",null);Z(this,"connectionState",{isConnecting:!1,isConnected:!1,error:null,connectionCode:null,isHost:!1,peerCount:0,detailedStatus:"Initialized"});Z(this,"options");Z(this,"reconnectAttempts",0);Z(this,"maxReconnectAttempts",3);this.options={debug:!1,...e},e.onData&&this.dataListeners.add(e.onData),this.logConnectionStatus("P2PService initialized")}async initAsHost(){const e=this.generateConnectionCode();return this.updateState({isHost:!0,isConnecting:!0,connectionCode:e,detailedStatus:"Initializing as host"}),this.log("Generated connection code:",e),new Promise((r,n)=>{try{this.cleanupPeer();const s=setTimeout(()=>{n(new Error("PeerJS initialization timeout"))},15e3);this.peer=new g2(e,{debug:this.options.debug?2:0}),this.peer.on("open",a=>{clearTimeout(s),this.log("Host initialized with ID:",a),this.logConnectionStatus("Host peer opened, waiting for connections"),this.setupPeerListeners(),r(a)}),this.peer.on("error",a=>{if(clearTimeout(s),a.type==="unavailable-id"){this.log("Connection code already in use, generating new one"),this.logConnectionStatus("Connection code in use, retrying"),this.initAsHost().then(r).catch(n);return}this.handleError("Failed to initialize as host",a),n(a)})}catch(s){this.handleError("Failed to initialize as host",s),n(s)}})}async connect(e){if(!e)throw new Error("Connection code is required");if(e=e.trim().toUpperCase(),this.connectionState.isConnected&&this.connectionState.connectionCode===e&&this.connections.size>0)if(console.log("Already connected to",e),await this.checkConnectionHealth()){console.log("Connection is healthy, no need to reconnect");return}else console.log("Connection is not healthy despite appearing connected, will reconnect"),this.cleanupPeer();return this.updateState({isHost:!1,isConnecting:!0,connectionCode:e,detailedStatus:`Connecting to host: ${e}`}),new Promise((r,n)=>{try{this.cleanupPeer();const s=setTimeout(()=>{n(new Error("PeerJS initialization timeout")),this.updateState({isConnecting:!1,error:"Connection timed out. Please try again.",detailedStatus:"Connection timeout"})},15e3);this.peer=new g2({debug:this.options.debug?2:0}),this.peer.on("open",a=>{if(this.log("Initialized with ID:",a),this.logConnectionStatus(`Client peer opened with ID ${a}, connecting to ${e}`),this.setupPeerListeners(),!this.peer){clearTimeout(s),n(new Error("Peer connection was lost"));return}try{this.log(`Attempting to connect to host ${e}`);const o=this.peer.connect(e,{reliable:!0,serialization:"json"});this.handleOutgoingConnection(o,()=>{clearTimeout(s),r()},l=>{clearTimeout(s),n(l)})}catch(o){clearTimeout(s),this.handleError("Failed to connect to peer",o),n(o)}}),this.peer.on("error",a=>{clearTimeout(s),this.handleError("Connection error",a),n(a)})}catch(s){this.handleError("Failed to connect",s),n(s)}})}async checkConnectionHealth(){if(this.connections.size===0)return!1;try{return new Promise(e=>{const r=setTimeout(()=>{this.log("Health check timed out"),e(!1)},3e3),n=a=>{a&&a.type==="health-check-response"&&(clearTimeout(r),this.removeDataListener(n),e(!0))};this.onData(n),this.send({type:"health-check-request",timestamp:Date.now()})||(clearTimeout(r),this.removeDataListener(n),e(!1))})}catch(e){return this.log("Error during health check:",e),!1}}send(e){if(this.logConnectionStatus(`Attempting to send data, connections: ${this.connections.size}`),!this.validateConnections())return this.updateState({error:"Cannot send data: not connected to any peers",detailedStatus:"No active connections for sending"}),!1;try{let r=0;for(const n of this.connections.values())n.open?(this.log(`Sending data to peer: ${n.peer}`),n.send(e),r++):this.log(`Connection to ${n.peer} exists but is not open, skipping`);return r===0?(this.updateState({error:"Cannot send data: all connections are closed",detailedStatus:"All connections closed"}),!1):(this.log(`Successfully sent data to ${r} peer(s)`),!0)}catch(r){return this.handleError("Failed to send data",r),!1}}getState(){return{...this.connectionState}}onData(e){this.dataListeners.add(e)}removeDataListener(e){this.dataListeners.delete(e)}disconnect(){this.log("Disconnecting from all peers"),this.cleanupPeer(),this.updateState({isConnecting:!1,isConnected:!1,connectionCode:null,error:null,peerCount:0,detailedStatus:"Disconnected"})}validateConnections(){if(this.connections.size===0)return this.log("No connections in the connections map"),!1;let e=!1;for(const r of this.connections.values())if(r.open){e=!0;break}return e||this.log("No open connections found despite having connection objects"),e}setupPeerListeners(){this.peer&&(this.peer.on("connection",e=>{this.log("Incoming connection from peer:",e.peer),this.logConnectionStatus(`Incoming connection from: ${e.peer}`),this.handleIncomingConnection(e)}),this.peer.on("disconnected",()=>{this.log("Disconnected from PeerJS server"),this.logConnectionStatus("Disconnected from signaling server, attempting reconnect"),this.peer&&this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,this.log(`Attempting reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.peer.reconnect()):this.reconnectAttempts>=this.maxReconnectAttempts&&(this.log("Max reconnect attempts reached, giving up"),this.updateState({isConnected:!1,isConnecting:!1,error:"Connection lost and could not reconnect automatically",detailedStatus:"Max reconnect attempts reached"}))}),this.peer.on("close",()=>{this.log("Peer connection closed"),this.logConnectionStatus("Peer closed"),this.updateState({isConnected:!1,isConnecting:!1,peerCount:0,detailedStatus:"Peer connection closed"})}),this.peer.on("error",e=>{this.handleError("Peer error",e)}))}handleIncomingConnection(e){this.log(`Handling incoming connection from ${e.peer}`),this.connections.set(e.peer,e),this.log(`Added connection to map, current size: ${this.connections.size}`),e.on("open",()=>{this.log("Connection opened to peer:",e.peer),this.logConnectionStatus(`Connection opened with peer: ${e.peer}`),this.updateConnectionStateFromMap()}),e.on("data",r=>{this.log("Received data from peer:",e.peer),this.notifyDataListeners(r)}),e.on("close",()=>{this.log("Connection closed from peer:",e.peer),this.logConnectionStatus(`Connection closed from peer: ${e.peer}`),this.connections.delete(e.peer),this.log(`Removed connection from map, current size: ${this.connections.size}`),this.updateConnectionStateFromMap()}),e.on("error",r=>{this.handleError(`Connection error with peer ${e.peer}`,r),this.connections.delete(e.peer),this.log(`Removed errored connection, current size: ${this.connections.size}`),this.updateConnectionStateFromMap()})}updateConnectionStateFromMap(){const e=[...this.connections.values()].filter(r=>r.open).length;this.log(`Updating connection state based on map: ${e} open connections`),this.updateState({isConnected:e>0,isConnecting:!1,error:null,peerCount:e,detailedStatus:e>0?`Connected with ${e} peer(s)`:"No active connections"})}handleOutgoingConnection(e,r,n){const s=setTimeout(()=>{n(new Error("Connection timeout"))},15e3);this.log(`Attempting outgoing connection to ${e.peer}`),e.on("open",()=>{clearTimeout(s),this.log("Connection opened to host:",e.peer),this.logConnectionStatus(`Connection opened to host: ${e.peer}`),this.connections.set(e.peer,e),this.log(`Added connection to map, current size: ${this.connections.size}`),this.updateConnectionStateFromMap(),r()}),e.on("data",a=>{this.log("Received data from host:",e.peer),this.notifyDataListeners(a)}),e.on("close",()=>{this.log("Connection closed from host:",e.peer),this.logConnectionStatus(`Connection closed from host: ${e.peer}`),this.connections.delete(e.peer),this.log(`Removed connection from map, current size: ${this.connections.size}`),this.updateConnectionStateFromMap()}),e.on("error",a=>{clearTimeout(s),this.handleError(`Connection error with host ${e.peer}`,a),this.connections.delete(e.peer),this.log(`Removed errored connection, current size: ${this.connections.size}`),this.updateConnectionStateFromMap(),n(a instanceof Error?a:new Error(String(a)))})}cleanupPeer(){this.log(`Cleaning up peer and ${this.connections.size} connections`);for(const e of this.connections.values())try{this.log(`Closing connection to ${e.peer}`),e.close()}catch(r){this.log(`Error closing connection: ${r}`)}if(this.connections.clear(),this.log("Cleared all connections from map"),this.peer){try{this.log("Destroying peer instance"),this.peer.destroy()}catch(e){this.log(`Error destroying peer: ${e}`)}this.peer=null}this.reconnectAttempts=0}handleError(e,r){let n,s;if(r&&typeof r=="object"&&r.type)switch(r.type){case"peer-unavailable":n=`${e}: The connection code is invalid or the host is no longer available`,s="Host unavailable";break;case"disconnected":n=`${e}: Connection to signaling server lost`,s="Signaling server disconnected";break;case"server-error":n=`${e}: WebRTC server error`,s="WebRTC server error";break;case"socket-error":n=`${e}: Network connection issue`,s="Network connection issue";break;case"socket-closed":n=`${e}: Connection closed unexpectedly`,s="Connection closed unexpectedly";break;default:n=`${e}: ${r.type||r.message||"Unknown error"}`,s=`Error: ${r.type||"Unknown"}`}else n=`${e}: ${(r==null?void 0:r.message)||r||"Unknown error"}`,s="Unknown error occurred";this.log("ERROR:",n,r),this.updateState({isConnecting:!1,error:n,detailedStatus:s})}set onConnectionStateChange(e){this.connectionStateChangeHandler=e}updateState(e){this.connectionState={...this.connectionState,...e},(e.isConnected!==void 0||e.isConnecting!==void 0||e.error!==void 0||e.peerCount!==void 0)&&this.log(`State updated: connected=${this.connectionState.isConnected}, connecting=${this.connectionState.isConnecting}, peers=${this.connectionState.peerCount}, error=${this.connectionState.error?"yes":"no"}`),this.options.onConnectionStateChange&&this.options.onConnectionStateChange(this.connectionState),this.connectionStateChangeHandler&&this.connectionStateChangeHandler(this.connectionState)}notifyDataListeners(e){this.dataListeners.forEach(r=>{try{r(e)}catch(n){this.log("Error in data listener:",n)}})}generateConnectionCode(e=6){const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let n="";for(let s=0;s<e;s++){const a=Math.floor(Math.random()*r.length);n+=r[a]}return n}logConnectionStatus(e){this.log(`CONNECTION STATUS: ${e} (connections: ${this.connections.size}, connected: ${this.connectionState.isConnected})`)}log(...e){(e[0]==="ERROR:"||this.options.debug)&&console.log("[P2PService]",...e)}}class NAe{constructor(e){Z(this,"p2pService");Z(this,"onProgressCallback",null);Z(this,"chunkSize",10*1024);Z(this,"syncInProgress",!1);Z(this,"receivedChunks",new Map);Z(this,"totalExpectedChunks",0);Z(this,"transferStartTime",0);Z(this,"currentOperationId",null);Z(this,"currentProgress",{percent:0,status:"idle",message:"Ready to sync"});Z(this,"retryCount",0);Z(this,"maxRetries",5);Z(this,"chunkRetryCount",new Map);Z(this,"maxChunkRetries",3);Z(this,"healthcheckInterval",null);this.p2pService=e,console.log("[DatabaseSyncService] Initialized"),this.p2pService.onData(this.handleSyncMessage.bind(this))}async requestData(){console.log("[DatabaseSyncService] requestData called");const e=this.p2pService.getState();if(console.log("[DatabaseSyncService] Current connection state:",e.isConnected?"connected":"disconnected","peers:",e.peerCount),!e.isConnected)throw console.error("[DatabaseSyncService] Not connected to any peers"),this.updateProgress({percent:0,status:"error",message:"Not connected to any peers",error:"Connection is not active"}),new Error("Not connected to any peers");if(this.syncInProgress)throw console.error("[DatabaseSyncService] Sync already in progress"),this.updateProgress({percent:0,status:"error",message:"Sync already in progress",error:"Sync operation is already running"}),new Error("Sync already in progress");if(!await this.performConnectionHealthCheck())throw console.error("[DatabaseSyncService] Connection health check failed"),this.updateProgress({percent:0,status:"error",message:"Connection health check failed. Try disconnecting and reconnecting.",error:"Connection health check failed"}),new Error("Connection health check failed");if(this.syncInProgress=!0,this.currentOperationId=this.generateOperationId(),this.retryCount=0,console.log("[DatabaseSyncService] Starting data request with operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"awaiting-confirmation",message:"Waiting for the other device to approve data request",isDataRequest:!0}),!this.p2pService.send({type:"db-sync-request-data",payload:{operationId:this.currentOperationId}}))throw console.error("[DatabaseSyncService] Failed to send data request"),this.syncInProgress=!1,this.currentOperationId=null,this.updateProgress({percent:0,status:"error",message:"Failed to send data request. Try reconnecting.",error:"Message sending failed"}),new Error("Failed to send data request");this.startHealthcheckInterval()}async sendData(){console.log("[DatabaseSyncService] sendData called");const e=this.p2pService.getState();if(console.log("[DatabaseSyncService] Current connection state:",e.isConnected?"connected":"disconnected","peers:",e.peerCount),!e.isConnected)throw console.error("[DatabaseSyncService] Not connected to any peers"),this.updateProgress({percent:0,status:"error",message:"Not connected to any peers",error:"Connection is not active"}),new Error("Not connected to any peers");if(this.syncInProgress)throw console.error("[DatabaseSyncService] Sync already in progress"),this.updateProgress({percent:0,status:"error",message:"Sync already in progress",error:"Sync operation is already running"}),new Error("Sync already in progress");if(!await this.performConnectionHealthCheck())throw console.error("[DatabaseSyncService] Connection health check failed"),this.updateProgress({percent:0,status:"error",message:"Connection health check failed. Try disconnecting and reconnecting.",error:"Connection health check failed"}),new Error("Connection health check failed");if(this.syncInProgress=!0,this.currentOperationId=this.generateOperationId(),this.retryCount=0,this.chunkRetryCount.clear(),console.log("[DatabaseSyncService] Starting data send with operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"awaiting-confirmation",message:"Waiting for the other device to accept data",isDataRequest:!1}),!this.p2pService.send({type:"db-sync-send-data-request",payload:{operationId:this.currentOperationId}}))throw console.error("[DatabaseSyncService] Failed to send data request"),this.syncInProgress=!1,this.currentOperationId=null,this.updateProgress({percent:0,status:"error",message:"Failed to send data request. Try reconnecting.",error:"Message sending failed"}),new Error("Failed to send data request");this.startHealthcheckInterval()}async performConnectionHealthCheck(){return new Promise(e=>{console.log("[DatabaseSyncService] Performing connection health check");const r=setTimeout(()=>{console.error("[DatabaseSyncService] Health check timed out"),this.p2pService.removeDataListener(n),e(!1)},8e3),n=a=>{a&&a.type==="db-sync-healthcheck-response"&&(console.log("[DatabaseSyncService] Received health check response in listener"),clearTimeout(r),this.p2pService.removeDataListener(n),e(!0))};this.p2pService.onData(n),this.p2pService.send({type:"db-sync-healthcheck"})||(console.error("[DatabaseSyncService] Failed to send health check"),clearTimeout(r),this.p2pService.removeDataListener(n),e(!1))})}startHealthcheckInterval(){this.stopHealthcheckInterval(),this.healthcheckInterval=setInterval(()=>{this.syncInProgress&&(this.currentProgress.status==="awaiting-confirmation"||this.currentProgress.status==="pending-confirmation")?(console.log("[DatabaseSyncService] Performing periodic health check"),this.performConnectionHealthCheck().then(e=>{if(e)this.retryCount=0;else{if(console.error("[DatabaseSyncService] Periodic health check failed"),this.retryCount<this.maxRetries){this.retryCount++,console.log(`[DatabaseSyncService] Retrying health check (${this.retryCount}/${this.maxRetries})`),this.updateProgress({percent:0,status:"reconnecting",message:`Connection issue detected, retrying (${this.retryCount}/${this.maxRetries})...`,isDataRequest:this.currentProgress.isDataRequest});return}(this.currentProgress.status==="awaiting-confirmation"||this.currentProgress.status==="pending-confirmation")&&(this.updateProgress({percent:0,status:"error",message:"Connection was lost while waiting for confirmation",error:"Connection health check failed after multiple attempts"}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval())}})):this.stopHealthcheckInterval()},2e4)}stopHealthcheckInterval(){this.healthcheckInterval&&(clearInterval(this.healthcheckInterval),this.healthcheckInterval=null)}confirmDataOperation(){if(console.log("[DatabaseSyncService] confirmDataOperation called, current status:",this.currentProgress.status),this.currentProgress.status==="pending-confirmation"){const e=this.p2pService.getState();if(!e.isConnected||e.peerCount===0){console.error("[DatabaseSyncService] Cannot confirm - connection lost");const n=e.connectionCode;n?this.attemptReconnection(n).then(s=>{s?(console.log("[DatabaseSyncService] Reconnection successful, retrying confirm"),setTimeout(()=>this.confirmDataOperation(),1e3)):(this.updateProgress({percent:0,status:"error",message:"Connection lost and reconnection failed. Please try again.",error:"Reconnection failed"}),this.syncInProgress=!1,this.currentOperationId=null)}):(this.updateProgress({percent:0,status:"error",message:"Connection lost. Please reconnect and try again.",error:"Connection lost"}),this.syncInProgress=!1,this.currentOperationId=null);return}if(this.currentProgress.isDataRequest)console.log("[DatabaseSyncService] Confirming data request, sending data"),this.handleSendDataAfterConfirmation();else{if(console.log("[DatabaseSyncService] Confirming data send request, ready to receive"),!this.p2pService.send({type:"db-sync-send-data-confirm",payload:{operationId:this.currentOperationId}})){console.error("[DatabaseSyncService] Failed to send confirmation");const s=this.p2pService.getState().connectionCode;if(s){this.attemptReconnection(s).then(a=>{a?(console.log("[DatabaseSyncService] Reconnection successful, retrying confirm"),setTimeout(()=>this.confirmDataOperation(),1e3)):(this.updateProgress({percent:0,status:"error",message:"Failed to send confirmation and reconnection failed. Please try again.",error:"Confirmation failed"}),this.syncInProgress=!1,this.currentOperationId=null)});return}this.updateProgress({percent:0,status:"error",message:"Failed to send confirmation. Try reconnecting.",error:"Message sending failed"}),this.syncInProgress=!1,this.currentOperationId=null;return}this.updateProgress({percent:0,status:"preparing",message:"Preparing to receive data"})}}else console.warn("[DatabaseSyncService] confirmDataOperation called when not in pending-confirmation state")}async attemptReconnection(e){this.updateProgress({percent:0,status:"reconnecting",message:"Connection lost - attempting to reconnect..."}),console.log(`[DatabaseSyncService] Attempting to reconnect with code: ${e}`);try{const r=this.p2pService.getState();if(r.isConnected&&r.peerCount>0)return console.log("[DatabaseSyncService] Already connected, no need to reconnect"),!0;for(let n=1;n<=3;n++){console.log(`[DatabaseSyncService] Reconnection attempt ${n}/3`),n>1&&await new Promise(s=>setTimeout(s,1e3*n));try{await this.p2pService.connect(e);const s=this.p2pService.getState();if(s.isConnected&&s.peerCount>0)return console.log("[DatabaseSyncService] Reconnection successful"),!0}catch(s){console.error(`[DatabaseSyncService] Reconnection attempt ${n} failed:`,s)}}return console.error("[DatabaseSyncService] All reconnection attempts failed"),!1}catch(r){return console.error("[DatabaseSyncService] Error during reconnection:",r),!1}}rejectDataOperation(){console.log("[DatabaseSyncService] rejectDataOperation called, current status:",this.currentProgress.status),this.currentProgress.status==="pending-confirmation"?this.currentProgress.isDataRequest?(console.log("[DatabaseSyncService] Rejecting data request"),this.p2pService.send({type:"db-sync-request-reject",payload:{operationId:this.currentOperationId}})||console.warn("[DatabaseSyncService] Failed to send rejection, but continuing with local state reset")):(console.log("[DatabaseSyncService] Rejecting data send request"),this.p2pService.send({type:"db-sync-send-data-reject",payload:{operationId:this.currentOperationId}})||console.warn("[DatabaseSyncService] Failed to send rejection, but continuing with local state reset")):this.currentProgress.status==="awaiting-confirmation"?console.log("[DatabaseSyncService] Cancelling our own operation while awaiting confirmation"):console.warn("[DatabaseSyncService] rejectDataOperation called when not in expected state"),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"idle",message:"Ready to sync"})}onProgress(e){this.onProgressCallback=e}handleSyncMessage(e){var r,n,s;if(!e||!e.type){console.warn("[DatabaseSyncService] Received malformed message:",e);return}switch(console.log("[DatabaseSyncService] Received message type:",e.type),e.type){case"db-sync-healthcheck":console.log("[DatabaseSyncService] Responding to health check"),this.p2pService.send({type:"db-sync-healthcheck-response"});break;case"db-sync-healthcheck-response":console.log("[DatabaseSyncService] Received health check response");break;case"db-sync-request-data":this.handleDataRequest(e.payload);break;case"db-sync-request-confirm":this.handleDataRequestConfirmation(e.payload);break;case"db-sync-request-reject":this.handleDataRequestRejection(e.payload);break;case"db-sync-send-data-request":this.handleSendDataRequest(e.payload);break;case"db-sync-send-data-confirm":this.handleSendDataConfirmation(e.payload);break;case"db-sync-send-data-reject":this.handleSendDataRejection(e.payload);break;case"db-sync-data":this.handleDirectData(e.payload);break;case"db-sync-chunk":this.handleDataChunk(e);break;case"db-sync-chunk-ack":console.log("[DatabaseSyncService] Received chunk acknowledgment");break;case"db-sync-error":console.error("[DatabaseSyncService] Received error from peer:",(r=e.payload)==null?void 0:r.message),this.updateProgress({percent:0,status:"error",message:`Peer error: ${((n=e.payload)==null?void 0:n.message)||"Unknown error"}`,error:(s=e.payload)==null?void 0:s.message}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval();break;case"db-sync-info":console.log("[DatabaseSyncService] Info from peer:",e.payload);break;default:console.warn("[DatabaseSyncService] Received unknown message type:",e.type)}}handleDataRequest(e){if(console.log("[DatabaseSyncService] Handling data request:",e),this.syncInProgress){console.warn("[DatabaseSyncService] Rejecting data request because sync is already in progress"),this.p2pService.send({type:"db-sync-request-reject",payload:{operationId:e==null?void 0:e.operationId,message:"Sync already in progress"}});return}this.syncInProgress=!0,this.currentOperationId=e==null?void 0:e.operationId,console.log("[DatabaseSyncService] Set up for data request, operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"pending-confirmation",message:"The connected device is requesting your match data",isDataRequest:!0})}handleDataRequestConfirmation(e){if(console.log("[DatabaseSyncService] Handling data request confirmation:",e),(e==null?void 0:e.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received confirmation for unknown operation:",e==null?void 0:e.operationId);return}this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"preparing",message:"Request approved, receiving data..."})}handleDataRequestRejection(e){if(console.log("[DatabaseSyncService] Handling data request rejection:",e),(e==null?void 0:e.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received rejection for unknown operation:",e==null?void 0:e.operationId);return}this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"error",message:"Data request was declined by the other device",error:"Request rejected by peer"}),this.syncInProgress=!1,this.currentOperationId=null}handleSendDataRequest(e){if(console.log("[DatabaseSyncService] Handling send data request:",e),this.syncInProgress){console.warn("[DatabaseSyncService] Rejecting send data request because sync is already in progress"),this.p2pService.send({type:"db-sync-send-data-reject",payload:{operationId:e==null?void 0:e.operationId,message:"Sync already in progress"}});return}this.syncInProgress=!0,this.currentOperationId=e==null?void 0:e.operationId,console.log("[DatabaseSyncService] Set up for send data request, operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"pending-confirmation",message:"The connected device wants to send you match data",isDataRequest:!1})}handleSendDataConfirmation(e){if(console.log("[DatabaseSyncService] Handling send data confirmation:",e),(e==null?void 0:e.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received confirmation for unknown operation:",e==null?void 0:e.operationId);return}this.stopHealthcheckInterval(),this.handleSendDataAfterConfirmation()}handleSendDataRejection(e){if(console.log("[DatabaseSyncService] Handling send data rejection:",e),(e==null?void 0:e.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received rejection for unknown operation:",e==null?void 0:e.operationId);return}this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"error",message:"Your data send was declined by the other device",error:"Send request rejected by peer"}),this.syncInProgress=!1,this.currentOperationId=null}async handleSendDataAfterConfirmation(){console.log("[DatabaseSyncService] Handling send data after confirmation"),this.transferStartTime=Date.now(),this.updateProgress({percent:0,status:"preparing",message:"Preparing database for export"});try{this.chunkRetryCount.clear(),console.log("[DatabaseSyncService] Exporting database data");const e=await be.exportData(),r=JSON.stringify(e);console.log(`[DatabaseSyncService] Exported data size: ${this.formatDataSize(r.length)}`),console.log("[DatabaseSyncService] Using chunked transfer for data sending"),await this.sendLargeData(r),setTimeout(()=>{this.syncInProgress=!1,this.currentOperationId=null},3e3)}catch(e){if(console.error("[DatabaseSyncService] Error handling data send:",e),this.p2pService.send({type:"db-sync-error",payload:{message:`Export error: ${e}`}}),this.retryCount<this.maxRetries)if(this.retryCount++,console.log(`[DatabaseSyncService] Retrying entire send operation (${this.retryCount}/${this.maxRetries})`),this.updateProgress({percent:0,status:"reconnecting",message:`Connection issue, retrying entire operation (${this.retryCount}/${this.maxRetries})...`}),await this.performConnectionHealthCheck()){setTimeout(()=>{this.handleSendDataAfterConfirmation()},2e3);return}else console.error("[DatabaseSyncService] Connection health check failed before retry");this.updateProgress({percent:0,status:"error",message:`Error preparing or sending data: ${e}`,error:String(e)}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval()}}async sendLargeData(e){try{const r=Math.ceil(e.length/this.chunkSize);let n=0;console.log(`[DatabaseSyncService] Preparing to send data in ${r} chunks (${this.formatDataSize(e.length)})`),this.updateProgress({percent:10,status:"sending",message:`Preparing to send data in ${r} chunks (${this.formatDataSize(e.length)})`});for(let s=0;s<r;s++){const a=s*this.chunkSize,o=Math.min(e.length,a+this.chunkSize),l=e.substring(a,o);let A=this.chunkRetryCount.get(s)||0,u=!1;for(;!u&&A<this.maxChunkRetries;){console.log(`[DatabaseSyncService] Sending chunk ${s+1}/${r} (attempt ${A+1}/${this.maxChunkRetries})`);try{if(A>0&&!await this.performConnectionHealthCheck())throw console.error(`[DatabaseSyncService] Connection health check failed before sending chunk ${s+1}`),new Error("Connection health check failed");if(!this.p2pService.send({type:"db-sync-chunk",chunkId:s,totalChunks:r,payload:l,isLast:s===r-1}))throw console.error(`[DatabaseSyncService] Failed to send chunk ${s+1}/${r}`),new Error(`Failed to send chunk ${s+1}/${r}`);u=!0,n++,this.updateProgress({percent:10+Math.floor(n/r*80),status:"sending",message:`Sending data: chunk ${n}/${r}`})}catch(h){if(A++,this.chunkRetryCount.set(s,A),console.error(`[DatabaseSyncService] Error sending chunk ${s+1}, attempt ${A}:`,h),A<this.maxChunkRetries){this.updateProgress({percent:10+Math.floor(n/r*80),status:"reconnecting",message:`Retrying chunk ${s+1}/${r} (attempt ${A}/${this.maxChunkRetries})...`});const c=500*A;console.log(`[DatabaseSyncService] Waiting ${c}ms before retry...`),await new Promise(d=>setTimeout(d,c))}else throw console.error(`[DatabaseSyncService] Max retries exceeded for chunk ${s+1}`),new Error(`Failed to send chunk ${s+1} after ${A} attempts`)}}s<r-1&&await new Promise(h=>setTimeout(h,200))}console.log(`[DatabaseSyncService] Successfully sent all ${n} chunks`),this.updateProgress({percent:100,status:"complete",message:`Data sent successfully in ${n} chunks (${this.formatDataSize(e.length)})`})}catch(r){console.error("[DatabaseSyncService] Error sending large data:",r);try{this.p2pService.send({type:"db-sync-error",payload:{message:`Send error: ${r}`}})}catch{}throw r}}async handleDirectData(e){console.log("[DatabaseSyncService] Handling direct data transfer"),this.updateProgress({percent:50,status:"receiving",message:"Received data, processing..."});try{await this.importAndMergeData(e),this.updateProgress({percent:100,status:"complete",message:"Data received and merged successfully"}),setTimeout(()=>{this.syncInProgress=!1,this.currentOperationId=null},3e3)}catch(r){console.error("[DatabaseSyncService] Error handling direct data:",r),this.updateProgress({percent:0,status:"error",message:`Error importing data: ${r}`,error:String(r)}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval()}}handleDataChunk(e){if(e.chunkId===void 0||e.totalChunks===void 0||!e.payload){console.warn("[DatabaseSyncService] Received malformed chunk message");return}console.log(`[DatabaseSyncService] Received chunk ${e.chunkId+1}/${e.totalChunks}`),this.totalExpectedChunks=e.totalChunks,this.receivedChunks.set(e.chunkId,e.payload);const r=Math.floor(this.receivedChunks.size/this.totalExpectedChunks*100);this.updateProgress({percent:r*.8,status:"receiving",message:`Receiving data: ${this.receivedChunks.size}/${this.totalExpectedChunks} chunks`}),this.receivedChunks.size===this.totalExpectedChunks&&(console.log("[DatabaseSyncService] All chunks received, reassembling"),this.reassembleAndProcessChunks())}async reassembleAndProcessChunks(){try{this.updateProgress({percent:80,status:"processing",message:"Reassembling data chunks..."});let e="";for(let n=0;n<this.totalExpectedChunks;n++){const s=this.receivedChunks.get(n);if(!s)throw new Error(`Missing chunk ${n}`);e+=s}console.log(`[DatabaseSyncService] Reassembled data size: ${this.formatDataSize(e.length)}`),console.log("[DatabaseSyncService] Parsing JSON data");const r=JSON.parse(e);this.updateProgress({percent:85,status:"processing",message:"Processing and merging data..."}),await this.importAndMergeData(r),this.updateProgress({percent:100,status:"complete",message:`Data received and merged successfully (${this.formatDataSize(e.length)})`}),this.receivedChunks.clear(),this.totalExpectedChunks=0,setTimeout(()=>{this.syncInProgress=!1,this.currentOperationId=null},3e3)}catch(e){console.error("[DatabaseSyncService] Error reassembling chunks:",e),this.updateProgress({percent:0,status:"error",message:`Error processing received data: ${e}`,error:String(e)}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval(),this.receivedChunks.clear(),this.totalExpectedChunks=0}}async importAndMergeData(e){try{this.validateExportData(e),console.log("[DatabaseSyncService] Importing data with merge mode"),await be.importData(e,"merge");const r=((Date.now()-this.transferStartTime)/1e3).toFixed(1);console.log(`[DatabaseSyncService] Data merged successfully in ${r}s`),this.updateProgress({percent:100,status:"complete",message:`Data successfully merged in ${r}s`})}catch(r){throw console.error("[DatabaseSyncService] Error importing data:",r),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval(),r}}validateExportData(e){if(!e)throw new Error("No data received");if(console.log("[DatabaseSyncService] Validating export data structure"),!e.players||!Array.isArray(e.players)||!e.matches||!Array.isArray(e.matches)||!e.matchPlayers||!Array.isArray(e.matchPlayers))throw new Error("Invalid data format: missing required collections");console.log("[DatabaseSyncService] Export data validation passed"),console.log(`[DatabaseSyncService] Data contains: ${e.players.length} players, ${e.matches.length} matches, ${e.matchPlayers.length} match players`)}formatDataSize(e){return e<1024?`${e} bytes`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}updateProgress(e){console.log(`[DatabaseSyncService] Progress update: ${e.status} - ${e.message}`),this.currentProgress=e,this.onProgressCallback&&this.onProgressCallback(e)}generateOperationId(){return"op_"+Date.now().toString(36)+Math.random().toString(36).substring(2,7)}}const bh={percent:0,status:"idle",message:"Ready to sync"},zN=B.createContext({connectionState:{isConnecting:!1,isConnected:!1,error:null,connectionCode:null,isHost:!1,peerCount:0},syncProgress:bh,initAsHost:async()=>"",connect:async()=>{},disconnect:()=>{},sendData:async()=>{},requestData:async()=>{},confirmDataOperation:()=>{},rejectDataOperation:()=>{}}),GN=()=>B.useContext(zN),FAe=({children:t,onDataReceived:e,onSyncCompleted:r,debug:n=!1})=>{const[s]=B.useState(()=>(console.log("[ConnectionContext] Initializing P2PService"),new EAe({debug:n,onData:p=>{console.log("[ConnectionContext] Data received from peer"),e&&e(p)}}))),[a]=B.useState(()=>(console.log("[ConnectionContext] Initializing DatabaseSyncService"),new NAe(s))),[o,l]=B.useState(s.getState()),[A,u]=B.useState(bh),h=B.useCallback(p=>{console.log("[ConnectionContext] Data handler called"),e&&e(p)},[e]);B.useEffect(()=>{console.log("[ConnectionContext] Setting up event handlers");const p=_=>{console.log("[ConnectionContext] Connection state changed:",_.isConnected?"connected":"disconnected",_.isHost?"(host)":"(client)","peers:",_.peerCount),l(_),!_.isConnected&&A.status!=="idle"&&A.status!=="pending-confirmation"&&A.status!=="awaiting-confirmation"&&(console.log("[ConnectionContext] Resetting sync progress due to disconnection"),u(bh))},x=_=>{console.log("[ConnectionContext] Sync progress:",_.status,_.message),u(_)};return s.onConnectionStateChange=p,a.onProgress(x),(()=>{const b=new URLSearchParams(window.location.search).get("connect");if(b){console.log("[ConnectionContext] Found connection code in URL:",b),d(b).catch(E=>{console.error("[ConnectionContext] Failed to connect with URL code:",E)});const S=new URL(window.location.href);S.searchParams.delete("connect"),window.history.replaceState({},document.title,S.toString())}})(),()=>{console.log("[ConnectionContext] Cleanup - removing event handlers"),s&&(s.onConnectionStateChange=null,s.disconnect())}},[s,a,r,h]),B.useEffect(()=>{A.status==="complete"&&r&&(console.log("[ConnectionContext] Sync completed, triggering callback"),setTimeout(()=>{r()},500))},[A.status,r]);const c=async()=>{try{console.log("[ConnectionContext] Initializing as host");const p=await s.initAsHost();return console.log("[ConnectionContext] Host initialized with code:",p),p}catch(p){throw console.error("[ConnectionContext] Error initializing as host:",p),l({...o,isConnecting:!1,error:p instanceof Error?p.message:String(p)}),p}},d=async p=>{try{console.log("[ConnectionContext] Connecting to:",p),await s.connect(p),console.log("[ConnectionContext] Connected successfully")}catch(x){throw console.error("[ConnectionContext] Error connecting:",x),l({...o,isConnecting:!1,error:x instanceof Error?x.message:String(x)}),x}},f=()=>{console.log("[ConnectionContext] Disconnecting"),s.disconnect(),u(bh)},g=async()=>{try{if(console.log("[ConnectionContext] Sending data, connection state:",o.isConnected?"connected":"disconnected","peers:",o.peerCount),!o.isConnected||o.peerCount===0)throw console.error("[ConnectionContext] Cannot send data - not connected or no peers"),new Error("Not connected to any peers. Please reconnect and try again.");await a.sendData()}catch(p){throw console.error("[ConnectionContext] Send data error:",p),u({percent:0,status:"error",message:`Failed to send data: ${p instanceof Error?p.message:String(p)}`,error:String(p)}),p}},y=async()=>{try{if(console.log("[ConnectionContext] Requesting data, connection state:",o.isConnected?"connected":"disconnected","peers:",o.peerCount),!o.isConnected||o.peerCount===0)throw console.error("[ConnectionContext] Cannot request data - not connected or no peers"),new Error("Not connected to any peers. Please reconnect and try again.");await a.requestData()}catch(p){throw console.error("[ConnectionContext] Request data error:",p),u({percent:0,status:"error",message:`Failed to request data: ${p instanceof Error?p.message:String(p)}`,error:String(p)}),p}},v=()=>{if(console.log("[ConnectionContext] Confirming data operation"),!o.isConnected){console.error("[ConnectionContext] Cannot confirm operation - not connected"),u({percent:0,status:"error",message:"Cannot confirm - connection lost. Please reconnect and try again.",error:"Connection lost"});return}a.confirmDataOperation()},m=()=>{console.log("[ConnectionContext] Rejecting data operation"),a.rejectDataOperation()};return i.jsx(zN.Provider,{value:{connectionState:o,syncProgress:A,initAsHost:c,connect:d,disconnect:f,sendData:g,requestData:y,confirmDataOperation:v,rejectDataOperation:m},children:t})};class TAe{async signUp(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:n}=await ee.rpc("check_username_available",{check_username:e.username});if(n)return{success:!1,error:"Failed to check username availability"};if(!r)return{success:!1,error:"Username is already taken"};const s=this.validatePassword(e.password);if(s)return{success:!1,error:s};const a=this.validateUsername(e.username);if(a)return{success:!1,error:a};const o=window.location.origin+"/GoA-Timer/",{data:l,error:A}=await ee.auth.signUp({email:e.email,password:e.password,options:{emailRedirectTo:o,data:{username:e.username,display_name:e.displayName||e.username}}});if(A)return{success:!1,error:A.message};if(!l.user)return{success:!1,error:"Failed to create user account"};if(l.user.identities&&l.user.identities.length===0)return{success:!1,error:"An account with this email already exists. Please sign in instead."};const{error:u}=await ee.from("profiles").insert({id:l.user.id,username:e.username,display_name:e.displayName||e.username,device_id:this.getDeviceId()});return u&&console.error("[AuthService] Failed to create profile:",u),{success:!0,user:l.user,session:l.session||void 0}}catch(r){return console.error("[AuthService] Sign up error:",r),{success:!1,error:"An unexpected error occurred"}}}async login(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:n}=await ee.auth.signInWithPassword({email:e.email,password:e.password});return n?{success:!1,error:n.message}:{success:!0,user:r.user,session:r.session}}catch(r){return console.error("[AuthService] Login error:",r),{success:!1,error:"An unexpected error occurred"}}}async logout(){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const{error:e}=await ee.auth.signOut();return e?{success:!1,error:e.message}:{success:!0}}catch(e){return console.error("[AuthService] Logout error:",e),{success:!1,error:"An unexpected error occurred"}}}async changePassword(e,r){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const n=await this.getUser();if(!(n!=null&&n.email))return{success:!1,error:"No user logged in"};const s=this.validatePassword(r);if(s)return{success:!1,error:s};const{error:a}=await ee.auth.signInWithPassword({email:n.email,password:e});if(a)return{success:!1,error:"Current password is incorrect"};const{error:o}=await ee.auth.updateUser({password:r});return o?{success:!1,error:o.message}:{success:!0}}catch(n){return console.error("[AuthService] Change password error:",n),{success:!1,error:"An unexpected error occurred"}}}async getSession(){if(!Ve()||!ee)return null;const{data:e}=await ee.auth.getSession();return e.session}async getUser(){if(!Ve()||!ee)return null;const{data:e}=await ee.auth.getUser();return e.user}async getProfile(){var s,a,o;if(!Ve()||!ee)return null;const e=await this.getUser();if(!e)return null;const{data:r,error:n}=await ee.from("profiles").select("id, username, display_name, avatar_url, share_stats_with_friends, share_match_history_with_friends").eq("id",e.id).single();if(n||!r){if(console.error("[AuthService] Failed to get profile:",n),(n==null?void 0:n.code)==="PGRST116"){const l=((s=e.user_metadata)==null?void 0:s.username)||((a=e.email)==null?void 0:a.split("@")[0])||"user",{data:A,error:u}=await ee.from("profiles").insert({id:e.id,username:l,display_name:((o=e.user_metadata)==null?void 0:o.display_name)||l,device_id:this.getDeviceId()}).select().single();if(u)return console.error("[AuthService] Failed to create profile:",u),null;if(A)return{id:A.id,username:A.username,displayName:A.display_name,avatarUrl:A.avatar_url,shareStatsWithFriends:A.share_stats_with_friends??!0,shareMatchHistoryWithFriends:A.share_match_history_with_friends??!0}}return null}return{id:r.id,username:r.username,displayName:r.display_name,avatarUrl:r.avatar_url,shareStatsWithFriends:r.share_stats_with_friends,shareMatchHistoryWithFriends:r.share_match_history_with_friends}}async updateProfile(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};const r=await this.getUser();if(!r)return{success:!1,error:"Not authenticated"};const n={};e.displayName!==void 0&&(n.display_name=e.displayName),e.shareStatsWithFriends!==void 0&&(n.share_stats_with_friends=e.shareStatsWithFriends),e.shareMatchHistoryWithFriends!==void 0&&(n.share_match_history_with_friends=e.shareMatchHistoryWithFriends);const{error:s}=await ee.from("profiles").update(n).eq("id",r.id);return s?{success:!1,error:s.message}:{success:!0}}onAuthStateChange(e){if(!Ve()||!ee)return()=>{};const{data:{subscription:r}}=ee.auth.onAuthStateChange((n,s)=>{e((s==null?void 0:s.user)||null)});return()=>r.unsubscribe()}async isUsernameAvailable(e){if(!Ve()||!ee)return!1;const{data:r,error:n}=await ee.rpc("check_username_available",{check_username:e});return n?(console.error("[AuthService] Username check error:",n),!1):r===!0}validatePassword(e){return e.length<8?"Password must be at least 8 characters long":/[A-Z]/.test(e)?/[a-z]/.test(e)?/[0-9]/.test(e)?null:"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter"}validateUsername(e){return e.length<3?"Username must be at least 3 characters long":e.length>30?"Username must be at most 30 characters long":/^[a-zA-Z0-9_-]+$/.test(e)?null:"Username can only contain letters, numbers, underscores, and hyphens"}async resendConfirmationEmail(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const{error:r}=await ee.auth.resend({type:"signup",email:e});return r?{success:!1,error:r.message}:{success:!0}}catch(r){return console.error("[AuthService] Resend confirmation error:",r),{success:!1,error:"An unexpected error occurred"}}}async deleteCloudData(){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};if(!await this.getUser())return{success:!1,error:"Not authenticated"};try{const{data:r,error:n}=await ee.rpc("delete_own_cloud_data");return n?(console.error("[AuthService] Failed to delete cloud data:",n),{success:!1,error:n.message}):r!==!0?{success:!1,error:"Failed to delete cloud data"}:(localStorage.removeItem("cloudSync_lastSync"),{success:!0})}catch(r){return console.error("[AuthService] Delete cloud data error:",r),{success:!1,error:"An unexpected error occurred"}}}async deleteAccount(){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};if(!await this.getUser())return{success:!1,error:"Not authenticated"};try{const{data:r,error:n}=await ee.rpc("delete_own_account");return n?(console.error("[AuthService] Failed to delete account:",n),{success:!1,error:n.message}):r!==!0?{success:!1,error:"Failed to delete account"}:(await ee.auth.signOut(),localStorage.removeItem("cloudSync_lastSync"),localStorage.removeItem("cloudSync_autoEnabled"),{success:!0})}catch(r){return console.error("[AuthService] Delete account error:",r),{success:!1,error:"An unexpected error occurred"}}}getDeviceId(){const e="guards-of-atlantis-device-id";let r=localStorage.getItem(e);if(!r){const n=Date.now().toString(36),s=Math.random().toString(36).substring(2,10);r=`device_${n}_${s}`,localStorage.setItem(e,r)}return r}}const wr=new TAe,WN=B.createContext({user:null,profile:null,isLoading:!0,isConfigured:!1,error:null,signUp:async()=>({success:!1}),login:async()=>({success:!1}),logout:async()=>{},clearError:()=>{},checkUsernameAvailable:async()=>!1,refreshProfile:async()=>{},updateProfile:async()=>({success:!1}),deleteCloudData:async()=>({success:!1}),deleteAccount:async()=>({success:!1}),changePassword:async()=>({success:!1})}),Tw=()=>B.useContext(WN),UAe=({children:t})=>{const[e,r]=B.useState(null),[n,s]=B.useState(null),[a,o]=B.useState(!0),[l,A]=B.useState(null),u=Ve(),h=B.useCallback(async()=>{if(!u)return;const w=await wr.getProfile();s(w)},[u]);B.useEffect(()=>((async()=>{if(!u){o(!1);return}const b=await wr.getUser();r(b),b&&await h(),o(!1)})(),wr.onAuthStateChange(async b=>{r(b),b?await h():s(null)})),[u,h]);const c=B.useCallback(async w=>{A(null);const _=await wr.signUp(w);return!_.success&&_.error?A(_.error):_.success&&await h(),_},[h]),d=B.useCallback(async w=>{A(null);const _=await wr.login(w);return!_.success&&_.error?A(_.error):_.success&&await h(),_},[h]),f=B.useCallback(async()=>{A(null);const w=await wr.logout();!w.success&&w.error?A(w.error):s(null)},[]),g=B.useCallback(()=>A(null),[]),y=B.useCallback(w=>wr.isUsernameAvailable(w),[]),v=B.useCallback(async w=>{const _=await wr.updateProfile(w);return _.success&&await h(),_},[h]),m=B.useCallback(async()=>{A(null);const w=await wr.deleteCloudData();return!w.success&&w.error&&A(w.error),w},[]),p=B.useCallback(async()=>{A(null);const w=await wr.deleteAccount();return!w.success&&w.error?A(w.error):(r(null),s(null)),w},[]),x=B.useCallback(async(w,_)=>{A(null);const b=await wr.changePassword(w,_);return!b.success&&b.error&&A(b.error),b},[]);return i.jsx(WN.Provider,{value:{user:e,profile:n,isLoading:a,isConfigured:u,error:l,signUp:c,login:d,logout:f,clearError:g,checkUsernameAvailable:y,refreshProfile:h,updateProfile:v,deleteCloudData:m,deleteAccount:p,changePassword:x},children:t})},QAe=()=>{const{login:t,signUp:e,error:r,clearError:n}=Tw(),{playSound:s}=Ge(),[a,o]=B.useState("login"),[l,A]=B.useState(""),[u,h]=B.useState(""),[c,d]=B.useState(""),[f,g]=B.useState(!1),[y,v]=B.useState(!1),[m,p]=B.useState(null),[x,w]=B.useState(!1),[_,b]=B.useState(null),[S,E]=B.useState(!1),[C,N]=B.useState(!1),[Q,P]=B.useState(!1);B.useEffect(()=>{if(a!=="signup"||c.length<3){p(null);return}if(wr.validateUsername(c)){p(null);return}w(!0);const j=setTimeout(async()=>{const I=await wr.isUsernameAvailable(c);p(I),w(!1)},500);return()=>clearTimeout(j)},[c,a]);const F=()=>{s("buttonClick"),o(a==="login"?"signup":"login"),n(),b(null),p(null),E(!1),P(!1)},$=async()=>{s("buttonClick"),N(!0),P(!1),b(null);try{const M=await wr.resendConfirmationEmail(l);M.success?P(!0):M.error&&b(M.error)}finally{N(!1)}},L=B.useCallback(()=>{if(!l.trim())return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l))return"Invalid email format";if(!u)return"Password is required";if(a==="signup"){if(!c.trim())return"Username is required";const M=wr.validateUsername(c);if(M)return M;const j=wr.validatePassword(u);if(j)return j;if(m===!1)return"Username is already taken"}return null},[l,u,c,a,m]),D=async M=>{M.preventDefault(),s("buttonClick");const j=L();if(j){b(j);return}b(null),v(!0);try{if(a==="login")(await t({email:l,password:u})).success&&s("phaseChange");else{const I=await e({email:l,password:u,username:c});I.success?(s("phaseChange"),E(!0)):I.error&&(I.error.toLowerCase().includes("already registered")||I.error.toLowerCase().includes("already been registered")||I.error.toLowerCase().includes("user already registered"))&&b("An account with this email already exists. Please sign in instead.")}}finally{v(!1)}},z=[{label:"8+ characters",met:u.length>=8},{label:"Uppercase letter",met:/[A-Z]/.test(u)},{label:"Lowercase letter",met:/[a-z]/.test(u)},{label:"Number",met:/[0-9]/.test(u)}],k=_||r;return S?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(pD,{size:32,className:"text-white"})}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Check Your Email"}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"We've sent a confirmation link to:"}),i.jsx("p",{className:"text-orange-400 font-medium mb-4",children:l}),i.jsx("p",{className:"text-gray-500 text-xs",children:"Click the link in the email to activate your account. If you don't see it, check your spam folder."})]}),Q&&i.jsx("div",{className:"bg-green-900/50 border border-green-700 rounded p-2 text-green-300 text-sm text-center",children:"Confirmation email resent!"}),_&&i.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded p-2 text-red-300 text-sm text-center",children:_}),i.jsx("button",{onClick:$,disabled:C,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 text-white font-medium py-2 px-4 rounded transition-colors flex items-center justify-center",children:C?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:18,className:"animate-spin mr-2"}),"Sending..."]}):"Resend Confirmation Email"}),i.jsx("button",{onClick:F,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded transition-colors",children:"Back to Sign In"})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:a==="login"?"Welcome Back":"Create Account"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:a==="login"?"Sign in to sync your data":"Join to sync with friends"})]}),i.jsxs("form",{onSubmit:D,className:"space-y-4",children:[a==="signup"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Username"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:c,onChange:M=>d(M.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500 pr-8",placeholder:"Choose a username",disabled:y}),c.length>=3&&i.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:x?i.jsx(ft,{size:16,className:"animate-spin text-gray-400"}):m===!0?i.jsx(Rr,{size:16,className:"text-green-500"}):m===!1?i.jsx(jr,{size:16,className:"text-red-500"}):null})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"3-30 characters, letters, numbers, _ and - only"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:l,onChange:M=>A(M.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"you@example.com",disabled:y})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:f?"text":"password",value:u,onChange:M=>h(M.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500 pr-10",placeholder:a==="signup"?"Create a strong password":"Enter your password",disabled:y}),i.jsx("button",{type:"button",onClick:()=>g(!f),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:f?i.jsx(fh,{size:18}):i.jsx(gh,{size:18})})]})]}),a==="signup"&&u.length>0&&i.jsx("div",{className:"grid grid-cols-2 gap-1 text-xs",children:z.map(M=>i.jsxs("div",{className:`flex items-center ${M.met?"text-green-500":"text-gray-500"}`,children:[M.met?i.jsx(Rr,{size:12,className:"mr-1"}):i.jsx(jr,{size:12,className:"mr-1"}),M.label]},M.label))}),k&&i.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded p-2 text-red-300 text-sm",children:k}),i.jsx("button",{type:"submit",disabled:y||a==="signup"&&m===!1,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded transition-colors flex items-center justify-center",children:y?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:18,className:"animate-spin mr-2"}),a==="login"?"Signing in...":"Creating account..."]}):a==="login"?"Sign In":"Create Account"})]}),i.jsx("div",{className:"text-center text-sm text-gray-400",children:a==="login"?i.jsxs(i.Fragment,{children:["Don't have an account?"," ",i.jsx("button",{onClick:F,className:"text-orange-400 hover:text-orange-300",disabled:y,children:"Sign up"})]}):i.jsxs(i.Fragment,{children:["Already have an account?"," ",i.jsx("button",{onClick:F,className:"text-orange-400 hover:text-orange-300",disabled:y,children:"Sign in"})]})})]})},IAe=()=>{const{user:t,profile:e,logout:r,updateProfile:n,deleteCloudData:s,deleteAccount:a,changePassword:o}=Tw(),{playSound:l}=Ge(),[A,u]=B.useState(!1),[h,c]=B.useState(!1),[d,f]=B.useState(!1),[g,y]=B.useState(!1),[v,m]=B.useState(!1),[p,x]=B.useState(!1),[w,_]=B.useState(!1),[b,S]=B.useState(!1),[E,C]=B.useState(!1),[N,Q]=B.useState(null),[P,F]=B.useState(""),[$,L]=B.useState(""),[D,z]=B.useState(""),[k,M]=B.useState(!1),[j,I]=B.useState(!1),[G,X]=B.useState(!1),[te,Ae]=B.useState(null),[ie,V]=B.useState(!1),Y=async()=>{l("buttonClick"),y(!0),await r(),y(!1)},U=async()=>{e&&(l("toggleSwitch"),m(!0),await n({shareStatsWithFriends:!e.shareStatsWithFriends}),m(!1))},H=async()=>{e&&(l("toggleSwitch"),m(!0),await n({shareMatchHistoryWithFriends:!e.shareMatchHistoryWithFriends}),m(!1))},K=async()=>{if(!b){S(!0);return}l("buttonClick"),Q(null),x(!0);const re=await s();x(!1),S(!1),re.success||Q(re.error||"Failed to delete cloud data")},O=async()=>{if(!E){C(!0);return}l("buttonClick"),Q(null),_(!0);const re=await a();_(!1),C(!1),re.success||Q(re.error||"Failed to delete account")},oe=()=>{S(!1),C(!1),Q(null)},me=async()=>{if(Ae(null),V(!1),$!==D){Ae("New passwords do not match");return}if(P===$){Ae("New password must be different from current password");return}l("buttonClick"),X(!0);const re=await o(P,$);X(!1),re.success?(V(!0),F(""),L(""),z(""),setTimeout(()=>V(!1),3e3)):Ae(re.error||"Failed to change password")},se=()=>{F(""),L(""),z(""),Ae(null),V(!1)};return!t||!e?i.jsx("div",{className:"flex items-center justify-center h-32",children:i.jsx(ft,{size:24,className:"animate-spin text-orange-400"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center",children:e.avatarUrl?i.jsx("img",{src:e.avatarUrl,alt:e.username,className:"w-full h-full rounded-full object-cover"}):i.jsx(ii,{size:32,className:"text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:e.displayName||e.username}),i.jsxs("p",{className:"text-sm text-gray-400",children:["@",e.username]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.email})]})]})}),i.jsxs("button",{onClick:()=>{l("buttonClick"),u(!A)},className:"w-full flex items-center justify-between bg-gray-800 hover:bg-gray-750 rounded-lg p-3 transition-colors",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ED,{size:18,className:"text-gray-400 mr-3"}),i.jsx("span",{className:"text-white",children:"Privacy Settings"})]}),i.jsx("span",{className:"text-gray-400",children:A?"":""})]}),A&&i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(At,{size:16,className:"text-gray-400 mr-2"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm",children:"Share Stats"}),i.jsx("p",{className:"text-gray-500 text-xs",children:"Friends can see your player stats"})]})]}),i.jsx("button",{onClick:U,disabled:v,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${e.shareStatsWithFriends?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:i.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[e.shareMatchHistoryWithFriends?i.jsx(gh,{size:16,className:"text-gray-400 mr-2"}):i.jsx(fh,{size:16,className:"text-gray-400 mr-2"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm",children:"Share Match History"}),i.jsx("p",{className:"text-gray-500 text-xs",children:"Friends can see your matches"})]})]}),i.jsx("button",{onClick:H,disabled:v,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${e.shareMatchHistoryWithFriends?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:i.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})]}),i.jsxs("button",{onClick:()=>{l("buttonClick"),c(!h),h||se()},className:"w-full flex items-center justify-between bg-gray-800 hover:bg-gray-750 rounded-lg p-3 transition-colors",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(hD,{size:18,className:"text-gray-400 mr-3"}),i.jsx("span",{className:"text-white",children:"Security"})]}),i.jsx("span",{className:"text-gray-400",children:h?"":""})]}),h&&i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Change Password"}),ie&&i.jsxs("div",{className:"bg-green-900/30 border border-green-700 text-green-300 text-sm p-3 rounded flex items-center",children:[i.jsx(Rr,{size:16,className:"mr-2"}),"Password changed successfully!"]}),te&&i.jsx("div",{className:"bg-red-900/30 border border-red-700 text-red-300 text-sm p-3 rounded",children:te}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Current Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:k?"text":"password",value:P,onChange:re=>F(re.target.value),disabled:G,className:"w-full bg-gray-700 text-white px-3 py-2 rounded pr-10 text-sm",placeholder:"Enter current password"}),i.jsx("button",{type:"button",onClick:()=>M(!k),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:k?i.jsx(fh,{size:16}):i.jsx(gh,{size:16})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:j?"text":"password",value:$,onChange:re=>L(re.target.value),disabled:G,className:"w-full bg-gray-700 text-white px-3 py-2 rounded pr-10 text-sm",placeholder:"Enter new password"}),i.jsx("button",{type:"button",onClick:()=>I(!j),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:j?i.jsx(fh,{size:16}):i.jsx(gh,{size:16})})]}),i.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Minimum 6 characters"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Confirm New Password"}),i.jsx("input",{type:j?"text":"password",value:D,onChange:re=>z(re.target.value),disabled:G,className:"w-full bg-gray-700 text-white px-3 py-2 rounded text-sm",placeholder:"Confirm new password"})]}),i.jsx("button",{onClick:me,disabled:G||!P||!$||!D,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded transition-colors text-sm",children:G?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:14,className:"animate-spin inline mr-2"}),"Changing Password..."]}):"Change Password"})]})]}),i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Account"}),i.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[i.jsxs("p",{children:["User ID: ",t.id.substring(0,8),"..."]}),i.jsxs("p",{children:["Created: ",new Date(t.created_at).toLocaleDateString()]})]})]}),i.jsxs("button",{onClick:()=>{l("buttonClick"),f(!d),oe()},className:"w-full flex items-center justify-between bg-gray-800 hover:bg-gray-750 rounded-lg p-3 transition-colors",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Sl,{size:18,className:"text-gray-400 mr-3"}),i.jsx("span",{className:"text-white",children:"Account Management"})]}),i.jsx("span",{className:"text-gray-400",children:d?"":""})]}),d&&i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4 border border-red-900/30",children:[N&&i.jsx("div",{className:"bg-red-900/30 border border-red-700 text-red-300 text-sm p-3 rounded",children:N}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx(Sl,{size:16,className:"text-red-500 mr-2 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white text-sm font-medium",children:"Delete Cloud Data"}),i.jsx("p",{className:"text-gray-500 text-xs",children:"Remove all your synced players, matches, and stats from the cloud. Your local data will remain intact. Anyone who has already synced your data will still retain their copy."})]})]}),b?i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:K,disabled:p,className:"flex-1 bg-red-700 hover:bg-red-600 disabled:bg-gray-600 text-white text-sm py-2 px-3 rounded transition-colors",children:p?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:14,className:"animate-spin inline mr-1"}),"Deleting..."]}):"Yes, Delete My Data"}),i.jsx("button",{onClick:oe,disabled:p,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:"Cancel"})]}):i.jsx("button",{onClick:K,className:"w-full bg-gray-700 hover:bg-red-700 text-red-400 hover:text-white text-sm py-2 px-3 rounded transition-colors",children:"Delete Cloud Data"})]}),i.jsx("div",{className:"border-t border-gray-700 my-2"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx(Sl,{size:16,className:"text-red-500 mr-2 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white text-sm font-medium",children:"Delete Account"}),i.jsx("p",{className:"text-gray-500 text-xs",children:"Permanently delete your account, all cloud data, and friend connections. This action cannot be undone."})]})]}),E?i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:O,disabled:w,className:"flex-1 bg-red-700 hover:bg-red-600 disabled:bg-gray-600 text-white text-sm py-2 px-3 rounded transition-colors",children:w?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:14,className:"animate-spin inline mr-1"}),"Deleting..."]}):"Yes, Delete My Account"}),i.jsx("button",{onClick:oe,disabled:w,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:"Cancel"})]}):i.jsx("button",{onClick:O,className:"w-full bg-gray-700 hover:bg-red-700 text-red-400 hover:text-white text-sm py-2 px-3 rounded transition-colors",children:"Delete Account"})]})]}),i.jsx("button",{onClick:Y,disabled:g,className:"w-full flex items-center justify-center bg-red-700 hover:bg-red-600 disabled:bg-gray-600 text-white font-medium py-2 px-4 rounded transition-colors",children:g?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:18,className:"animate-spin mr-2"}),"Signing out..."]}):i.jsxs(i.Fragment,{children:[i.jsx(gD,{size:18,className:"mr-2"}),"Sign Out"]})})]})};class PAe{constructor(){Z(this,"realtimeChannel",null)}async searchUsers(e){if(!Ve()||!ee||e.length<2)return[];try{const{data:r,error:n}=await ee.rpc("search_users",{search_query:e});return n?(console.error("[FriendService] Search error:",n),[]):(r||[]).map(s=>({id:s.id,username:s.username,displayName:s.display_name,avatarUrl:s.avatar_url}))}catch(r){return console.error("[FriendService] Search error:",r),[]}}async sendFriendRequest(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ee.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{data:n}=await ee.from("friends").select("id").eq("user_id",r.id).eq("friend_id",e).single();if(n)return{success:!1,error:"Already friends with this user"};const{error:s}=await ee.from("friend_requests").insert({from_user_id:r.id,to_user_id:e,status:"pending"});return s?s.code==="23505"?{success:!1,error:"Friend request already sent"}:{success:!1,error:s.message}:{success:!0}}catch(r){return console.error("[FriendService] Send request error:",r),{success:!1,error:"An unexpected error occurred"}}}async getPendingRequests(){if(!Ve()||!ee)return[];try{const{data:{user:e}}=await ee.auth.getUser();if(!e)return[];const{data:r,error:n}=await ee.from("friend_requests").select(`
          id,
          from_user_id,
          to_user_id,
          status,
          created_at,
          from_user:profiles!friend_requests_from_user_id_fkey (
            id, username, display_name, avatar_url
          )
        `).eq("to_user_id",e.id).eq("status","pending").order("created_at",{ascending:!1});return n?(console.error("[FriendService] Get requests error:",n),[]):(r||[]).map(s=>{const a=Array.isArray(s.from_user)?s.from_user[0]:s.from_user;return{id:s.id,fromUserId:s.from_user_id,toUserId:s.to_user_id,status:s.status,createdAt:new Date(s.created_at),fromUser:a?{id:a.id,username:a.username,displayName:a.display_name,avatarUrl:a.avatar_url}:void 0}})}catch(e){return console.error("[FriendService] Get requests error:",e),[]}}async getSentRequests(){if(!Ve()||!ee)return[];try{const{data:{user:e}}=await ee.auth.getUser();if(!e)return[];const{data:r,error:n}=await ee.from("friend_requests").select(`
          id,
          from_user_id,
          to_user_id,
          status,
          created_at,
          to_user:profiles!friend_requests_to_user_id_fkey (
            id, username, display_name, avatar_url
          )
        `).eq("from_user_id",e.id).eq("status","pending").order("created_at",{ascending:!1});return n?(console.error("[FriendService] Get sent requests error:",n),[]):(r||[]).map(s=>{const a=Array.isArray(s.to_user)?s.to_user[0]:s.to_user;return{id:s.id,fromUserId:s.from_user_id,toUserId:s.to_user_id,status:s.status,createdAt:new Date(s.created_at),toUser:a?{id:a.id,username:a.username,displayName:a.display_name,avatarUrl:a.avatar_url}:void 0}})}catch(e){return console.error("[FriendService] Get sent requests error:",e),[]}}async acceptRequest(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:n}=await ee.rpc("accept_friend_request",{request_id:e});return n?{success:!1,error:n.message}:{success:r===!0}}catch(r){return console.error("[FriendService] Accept request error:",r),{success:!1,error:"An unexpected error occurred"}}}async rejectRequest(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ee.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:n}=await ee.from("friend_requests").update({status:"rejected",responded_at:new Date().toISOString()}).eq("id",e).eq("to_user_id",r.id);return n?{success:!1,error:n.message}:{success:!0}}catch(r){return console.error("[FriendService] Reject request error:",r),{success:!1,error:"An unexpected error occurred"}}}async cancelRequest(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ee.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:n}=await ee.from("friend_requests").delete().eq("id",e).eq("from_user_id",r.id);return n?{success:!1,error:n.message}:{success:!0}}catch(r){return console.error("[FriendService] Cancel request error:",r),{success:!1,error:"An unexpected error occurred"}}}async getFriends(){if(!Ve()||!ee)return[];try{const{data:{user:e}}=await ee.auth.getUser();if(!e)return[];const{data:r,error:n}=await ee.from("friends").select(`
          id,
          created_at,
          friend:profiles!friends_friend_id_fkey (
            id, username, display_name, avatar_url
          )
        `).eq("user_id",e.id).order("created_at",{ascending:!1});return n?(console.error("[FriendService] Get friends error:",n),[]):(r||[]).map(s=>{const a=Array.isArray(s.friend)?s.friend[0]:s.friend;return{id:s.id,createdAt:new Date(s.created_at),friendProfile:{id:a.id,username:a.username,displayName:a.display_name,avatarUrl:a.avatar_url}}})}catch(e){return console.error("[FriendService] Get friends error:",e),[]}}async removeFriend(e){if(!Ve()||!ee)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ee.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:n}=await ee.from("friends").delete().eq("user_id",r.id).eq("friend_id",e),{error:s}=await ee.from("friends").delete().eq("user_id",e).eq("friend_id",r.id);return n||s?{success:!1,error:(n==null?void 0:n.message)||(s==null?void 0:s.message)}:{success:!0}}catch(r){return console.error("[FriendService] Remove friend error:",r),{success:!1,error:"An unexpected error occurred"}}}subscribeToRequests(e,r){return!Ve()||!ee?()=>{}:(this.realtimeChannel=ee.channel("friend_requests_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"friend_requests"},n=>{const s=this.mapRequestFromPayload(n.new);s&&e(s)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"friend_requests"},n=>{const s=this.mapRequestFromPayload(n.new);s&&r(s)}).subscribe(),()=>{this.realtimeChannel&&(ee==null||ee.removeChannel(this.realtimeChannel),this.realtimeChannel=null)})}mapRequestFromPayload(e){return e?{id:e.id,fromUserId:e.from_user_id,toUserId:e.to_user_id,status:e.status,createdAt:new Date(e.created_at)}:null}}const bs=new PAe,DAe=({pendingRequests:t,sentRequests:e,onAction:r})=>{const{playSound:n}=Ge(),[s,a]=B.useState(null),o=async h=>{n("buttonClick"),a(h),(await bs.acceptRequest(h)).success&&(n("phaseChange"),r()),a(null)},l=async h=>{n("buttonClick"),a(h),await bs.rejectRequest(h),r(),a(null)},A=async h=>{n("buttonClick"),a(h),await bs.cancelRequest(h),r(),a(null)},u=h=>{const c=Math.floor((Date.now()-h.getTime())/1e3);if(c<60)return"just now";const d=Math.floor(c/60);if(d<60)return`${d}m ago`;const f=Math.floor(d/60);return f<24?`${f}h ago`:`${Math.floor(f/24)}d ago`};return i.jsxs("div",{className:"space-y-4 bg-gray-800 rounded-lg p-3",children:[t.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2 flex items-center",children:[i.jsx(as,{size:14,className:"mr-1"}),"Received (",t.length,")"]}),i.jsx("div",{className:"space-y-2",children:t.map(h=>{var c,d,f;return i.jsxs("div",{className:"flex items-center justify-between bg-gray-900 rounded p-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-semibold text-gray-400",children:((c=h.fromUser)==null?void 0:c.username.charAt(0).toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm",children:((d=h.fromUser)==null?void 0:d.displayName)||((f=h.fromUser)==null?void 0:f.username)||"Unknown"}),i.jsx("p",{className:"text-gray-500 text-xs",children:u(h.createdAt)})]})]}),i.jsx("div",{className:"flex space-x-1",children:s===h.id?i.jsx(ft,{size:16,className:"animate-spin text-gray-400"}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>o(h.id),className:"p-1.5 bg-green-600 hover:bg-green-500 text-white rounded transition-colors",title:"Accept",children:i.jsx(Rr,{size:14})}),i.jsx("button",{onClick:()=>l(h.id),className:"p-1.5 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",title:"Reject",children:i.jsx(jr,{size:14})})]})})]},h.id)})})]}),e.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2 flex items-center",children:[i.jsx(jD,{size:14,className:"mr-1"}),"Sent (",e.length,")"]}),i.jsx("div",{className:"space-y-2",children:e.map(h=>{var c,d,f;return i.jsxs("div",{className:"flex items-center justify-between bg-gray-900 rounded p-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-sm font-semibold text-gray-400",children:((c=h.toUser)==null?void 0:c.username.charAt(0).toUpperCase())||"?"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm",children:((d=h.toUser)==null?void 0:d.displayName)||((f=h.toUser)==null?void 0:f.username)||"Unknown"}),i.jsxs("p",{className:"text-gray-500 text-xs flex items-center",children:[i.jsx(as,{size:10,className:"mr-1"}),"Pending - ",u(h.createdAt)]})]})]}),s===h.id?i.jsx(ft,{size:16,className:"animate-spin text-gray-400"}):i.jsx("button",{onClick:()=>A(h.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-gray-800 rounded transition-colors",title:"Cancel request",children:i.jsx(jr,{size:14})})]},h.id)})})]}),t.length===0&&e.length===0&&i.jsx("p",{className:"text-gray-500 text-sm text-center py-2",children:"No pending requests"})]})},MAe=({onClose:t,onRequestSent:e,existingFriendIds:r,pendingRequestIds:n})=>{const{playSound:s}=Ge(),a=B.useRef(null),o=B.useRef(null),[l,A]=B.useState(""),[u,h]=B.useState([]),[c,d]=B.useState(!1),[f,g]=B.useState(null),[y,v]=B.useState(new Set),[m,p]=B.useState(null);B.useEffect(()=>{var _;(_=o.current)==null||_.focus()},[]),B.useEffect(()=>{const _=b=>{a.current&&!a.current.contains(b.target)&&t()};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[t]),B.useEffect(()=>{const _=b=>{b.key==="Escape"&&t()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[t]),B.useEffect(()=>{if(l.length<2){h([]);return}d(!0);const _=setTimeout(async()=>{const b=await bs.searchUsers(l);h(b),d(!1)},300);return()=>clearTimeout(_)},[l]);const x=async _=>{s("buttonClick"),p(null),g(_);const b=await bs.sendFriendRequest(_);b.success?(s("phaseChange"),v(new Set([...y,_])),e()):p(b.error||"Failed to send request"),g(null)},w=_=>{const b=r.includes(_.id),S=n.includes(_.id),E=y.has(_.id),C=f===_.id;return b?i.jsxs("span",{className:"text-green-500 text-xs flex items-center",children:[i.jsx(Rr,{size:14,className:"mr-1"}),"Friends"]}):S||E?i.jsxs("span",{className:"text-orange-400 text-xs flex items-center",children:[i.jsx(Rr,{size:14,className:"mr-1"}),"Pending"]}):C?i.jsx(ft,{size:16,className:"animate-spin text-orange-400"}):i.jsx("button",{onClick:()=>x(_.id),className:"p-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded transition-colors",title:"Send friend request",children:i.jsx(Vk,{size:16})})};return i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:i.jsxs("div",{ref:a,className:"bg-gray-900 rounded-lg w-full max-w-md shadow-xl",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Find Friends"}),i.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-800 rounded transition-colors",children:i.jsx(jr,{size:20,className:"text-gray-400"})})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(lo,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),i.jsx("input",{ref:o,type:"text",value:l,onChange:_=>A(_.target.value),placeholder:"Search by username...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white focus:outline-none focus:border-orange-500"}),c&&i.jsx(ft,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin text-orange-400"})]}),m&&i.jsx("div",{className:"mt-2 bg-red-900/50 border border-red-700 rounded p-2",children:i.jsx("p",{className:"text-red-300 text-sm",children:m})})]}),i.jsx("div",{className:"max-h-64 overflow-y-auto",children:l.length<2?i.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"Type at least 2 characters to search"}):u.length===0&&!c?i.jsxs("p",{className:"text-gray-500 text-sm text-center py-8",children:['No users found matching "',l,'"']}):i.jsx("div",{className:"px-4 pb-4 space-y-2",children:u.map(_=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-800 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center",children:_.avatarUrl?i.jsx("img",{src:_.avatarUrl,alt:_.username,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-lg font-semibold text-gray-400",children:_.username.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:_.displayName||_.username}),i.jsxs("p",{className:"text-gray-500 text-xs",children:["@",_.username]})]})]}),w(_)]},_.id))})}),i.jsx("div",{className:"p-4 border-t border-gray-800",children:i.jsx("button",{onClick:t,className:"w-full bg-gray-700 hover:bg-gray-600 text-white py-2 rounded transition-colors",children:"Close"})})]})})},RAe=({onPendingCountChange:t})=>{const{playSound:e}=Ge(),[r,n]=B.useState([]),[s,a]=B.useState([]),[o,l]=B.useState([]),[A,u]=B.useState(!0),[h,c]=B.useState(!1),[d,f]=B.useState(!1),[g,y]=B.useState(""),[v,m]=B.useState(null),[p,x]=B.useState(null),[w,_]=B.useState(Ur.getFriendSyncPreferences()),b=B.useCallback(async()=>{u(!0);try{const[F,$,L]=await Promise.all([bs.getFriends(),bs.getPendingRequests(),bs.getSentRequests()]);n(F),a($),l(L),t==null||t($.length)}catch(F){console.error("[FriendsPanel] Load error:",F)}finally{u(!1)}},[t]);B.useEffect(()=>(b(),bs.subscribeToRequests(()=>b(),()=>b())),[b]);const S=async F=>{e("buttonClick"),m(F),(await bs.removeFriend(F)).success&&n(r.filter(L=>L.friendProfile.id!==F)),m(null)},E=F=>{var D;e("toggleSwitch");const L=!(((D=w[F])==null?void 0:D.autoSync)??!0);Ur.setFriendSyncPreference(F,L),_({...w,[F]:{autoSync:L}})},C=F=>{var $;return(($=w[F])==null?void 0:$.autoSync)??!0},N=async F=>{e("buttonClick"),x(F),await Ur.syncFromFriends([F]),x(null)},Q=async()=>{await b()},P=r.filter(F=>{var $;return F.friendProfile.username.toLowerCase().includes(g.toLowerCase())||(($=F.friendProfile.displayName)==null?void 0:$.toLowerCase().includes(g.toLowerCase()))});return A?i.jsx("div",{className:"flex items-center justify-center h-32",children:i.jsx(ft,{size:24,className:"animate-spin text-orange-400"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[i.jsx(et,{size:20,className:"mr-2"}),"Friends (",r.length,")"]}),i.jsx("button",{onClick:()=>{e("buttonClick"),c(!0)},className:"bg-orange-600 hover:bg-orange-500 text-white p-2 rounded transition-colors",title:"Add Friend",children:i.jsx(Vk,{size:18})})]}),(s.length>0||o.length>0)&&i.jsxs("button",{onClick:()=>{e("buttonClick"),f(!d)},className:"w-full flex items-center justify-between bg-orange-900/50 hover:bg-orange-900/70 border border-orange-700 rounded-lg p-3 transition-colors",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(pP,{size:18,className:"text-orange-400 mr-2"}),i.jsxs("span",{className:"text-white",children:["Friend Requests",s.length>0&&i.jsxs("span",{className:"ml-2 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:[s.length," new"]})]})]}),d?i.jsx(ls,{size:18,className:"text-gray-400"}):i.jsx(pn,{size:18,className:"text-gray-400"})]}),d&&i.jsx(DAe,{pendingRequests:s,sentRequests:o,onAction:Q}),r.length>3&&i.jsxs("div",{className:"relative",children:[i.jsx(lo,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),i.jsx("input",{type:"text",value:g,onChange:F=>y(F.target.value),placeholder:"Search friends...",className:"w-full bg-gray-800 border border-gray-700 rounded pl-9 pr-3 py-2 text-white text-sm focus:outline-none focus:border-orange-500"})]}),i.jsx("div",{className:"space-y-2",children:P.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(et,{size:48,className:"mx-auto text-gray-600 mb-3"}),i.jsx("p",{className:"text-gray-400",children:r.length===0?"No friends yet":"No friends match your search"}),r.length===0&&i.jsx("button",{onClick:()=>{e("buttonClick"),c(!0)},className:"mt-3 text-orange-400 hover:text-orange-300 text-sm",children:"Add your first friend"})]}):P.map(F=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-800 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center",children:F.friendProfile.avatarUrl?i.jsx("img",{src:F.friendProfile.avatarUrl,alt:F.friendProfile.username,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-lg font-semibold text-gray-400",children:F.friendProfile.username.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:F.friendProfile.displayName||F.friendProfile.username}),i.jsxs("p",{className:"text-gray-500 text-xs",children:["@",F.friendProfile.username]})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{onClick:()=>N(F.friendProfile.id),disabled:p===F.friendProfile.id,className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-gray-700 rounded transition-colors disabled:opacity-50",title:"Sync from this friend",children:p===F.friendProfile.id?i.jsx(ft,{size:16,className:"animate-spin"}):i.jsx(ef,{size:16})}),i.jsx("button",{onClick:()=>E(F.friendProfile.id),className:`p-2 rounded transition-colors ${C(F.friendProfile.id)?"text-orange-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-700 hover:text-gray-400"}`,title:C(F.friendProfile.id)?"Auto-sync enabled (click to disable)":"Auto-sync disabled (click to enable)",children:i.jsx(ca,{size:16})}),i.jsx("button",{onClick:()=>S(F.friendProfile.id),disabled:v===F.friendProfile.id,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-gray-700 rounded transition-colors",title:"Remove friend",children:v===F.friendProfile.id?i.jsx(ft,{size:16,className:"animate-spin"}):i.jsx(YD,{size:16})})]})]},F.id))}),h&&i.jsx(MAe,{onClose:()=>c(!1),onRequestSent:b,existingFriendIds:r.map(F=>F.friendProfile.id),pendingRequestIds:[...s.map(F=>F.fromUserId),...o.map(F=>F.toUserId)]})]})},$Ae=()=>{const{playSound:t}=Ge(),[e,r]=B.useState(Ur.getStatus()),[n,s]=B.useState(Ur.isAutoUploadEnabled()),[a,o]=B.useState(Ur.isAutoSyncOwnDevicesEnabled()),[l,A]=B.useState(Ur.getLastSyncTime()),[u,h]=B.useState(Ur.getLastOwnSyncTime());B.useEffect(()=>Ur.onStatusChange(w=>{r(w),w.lastSyncAt&&A(w.lastSyncAt)}),[]);const c=async()=>{t("buttonClick"),await Ur.uploadLocalData()},d=async()=>{t("buttonClick"),(await Ur.downloadOwnCloudData()).success&&h(new Date)},f=()=>{t("toggleSwitch");const x=!n;s(x),Ur.setAutoUpload(x)},g=()=>{t("toggleSwitch");const x=!a;o(x),Ur.setAutoSyncOwnDevices(x)},y=x=>{if(!x)return"Never";const w=Math.floor((Date.now()-x.getTime())/1e3);if(w<60)return"Just now";const _=Math.floor(w/60);if(_<60)return`${_} min ago`;const b=Math.floor(_/60);return b<24?`${b} hours ago`:x.toLocaleDateString()},v=["uploading","downloading","merging"].includes(e.status),m=()=>{switch(e.status){case"uploading":return i.jsx(of,{size:18,className:"animate-pulse text-orange-400"});case"downloading":return i.jsx(ef,{size:18,className:"animate-pulse text-orange-400"});case"merging":return i.jsx(ca,{size:18,className:"animate-spin text-orange-400"});case"complete":return i.jsx(Rr,{size:18,className:"text-green-500"});case"error":return i.jsx(Ei,{size:18,className:"text-red-500"});default:return i.jsx(as,{size:18,className:"text-gray-400"})}},p=()=>{switch(e.status){case"uploading":case"downloading":case"merging":return"text-orange-400";case"complete":return"text-green-500";case"error":return"text-red-500";default:return"text-gray-400"}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Sync Status"}),m()]}),i.jsx("p",{className:`text-sm font-medium ${p()}`,children:e.message}),v&&i.jsxs("div",{className:"mt-3",children:[i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:i.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[e.progress,"%"]})]}),e.error&&i.jsx("div",{className:"mt-3 bg-red-900/50 border border-red-700 rounded p-2",children:i.jsx("p",{className:"text-red-300 text-xs",children:e.error})}),i.jsxs("div",{className:"mt-3 flex items-center text-xs text-gray-500",children:[i.jsx(as,{size:12,className:"mr-1"}),"Last sync: ",y(l)]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{onClick:c,disabled:v,className:"w-full flex items-center justify-center bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded transition-colors",children:e.status==="uploading"?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:18,className:"animate-spin mr-2"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(of,{size:18,className:"mr-2"}),"Upload My Data"]})}),i.jsx("button",{onClick:d,disabled:v,className:"w-full flex items-center justify-center bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded transition-colors",children:e.status==="downloading"?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:18,className:"animate-spin mr-2"}),"Downloading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ef,{size:18,className:"mr-2"}),"Download My Data"]})}),i.jsxs("div",{className:"flex items-center text-xs text-gray-500 px-1",children:[i.jsx(as,{size:12,className:"mr-1"}),"Last download from other devices: ",y(u)]})]}),i.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm font-medium",children:"Auto-Upload"}),i.jsx("p",{className:"text-gray-500 text-xs",children:"Automatically upload data when you record matches"})]}),i.jsx("button",{onClick:f,disabled:v,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${n?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:i.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})}),i.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm font-medium",children:"Auto-Sync Devices"}),i.jsx("p",{className:"text-gray-500 text-xs",children:"Automatically download data from your other devices"})]}),i.jsx("button",{onClick:g,disabled:v,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${a?"bg-blue-600 justify-end":"bg-gray-600 justify-start"}`,children:i.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})}),i.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Upload:"})," Sends your local match data to the cloud."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Download:"})," Gets your data from other devices you own."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Auto-Upload:"})," Uploads after recording matches."]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Auto-Sync Devices:"})," Downloads when other devices upload."]}),i.jsx("p",{className:"text-gray-600 mt-2",children:"To sync from friends, go to the Friends tab."})]})]})},OAe=()=>{const{user:t,isConfigured:e,isLoading:r}=Tw(),{playSound:n}=Ge(),[s,a]=B.useState(()=>{const d=localStorage.getItem("cloudSidebar_collapsed");return d!==null?d==="true":!0}),[o,l]=B.useState("login"),[A,u]=B.useState(0);B.useEffect(()=>{localStorage.setItem("cloudSidebar_collapsed",String(s))},[s]),B.useEffect(()=>{t&&o==="login"?l("profile"):!t&&o!=="login"&&l("login")},[t,o]);const h=()=>{n("buttonClick"),a(!s)},c=d=>{n("buttonClick"),l(d)};return e?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:h,className:`fixed top-20 z-40 p-2 rounded-l-lg transition-all duration-300 ${s?"right-0":"right-80"} bg-orange-600 hover:bg-orange-500 text-white shadow-lg`,"aria-label":s?"Open cloud panel":"Close cloud panel",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Cr,{size:20}),A>0&&i.jsx("span",{className:"absolute -top-1 -left-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center font-bold",children:A>9?"9+":A})]}):i.jsx(Gc,{size:20})}),i.jsxs("div",{className:`fixed top-0 right-0 h-full w-80 bg-gray-900 shadow-xl z-40 transform transition-transform duration-300 flex flex-col ${s?"translate-x-full":"translate-x-0"}`,children:[i.jsxs("div",{className:"bg-orange-600 p-4 flex items-center justify-between flex-shrink-0",children:[i.jsxs("h2",{className:"text-lg font-bold text-white flex items-center",children:[i.jsx(OP,{size:20,className:"mr-2"}),"Cloud Sync"]}),i.jsx("button",{onClick:h,className:"p-1 hover:bg-orange-500 rounded transition-colors","aria-label":"Close panel",children:i.jsx(jr,{size:20,className:"text-white"})})]}),t&&!r&&i.jsxs("div",{className:"flex border-b border-gray-700 flex-shrink-0",children:[i.jsx("button",{onClick:()=>c("profile"),className:`flex-1 p-3 flex items-center justify-center transition-colors ${o==="profile"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Profile",children:i.jsx(ii,{size:18})}),i.jsxs("button",{onClick:()=>c("friends"),className:`flex-1 p-3 flex items-center justify-center relative transition-colors ${o==="friends"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Friends",children:[i.jsx(et,{size:18}),A>0&&i.jsx("span",{className:"absolute top-1 right-4 w-4 h-4 bg-red-500 rounded-full text-xs flex items-center justify-center font-bold",children:A>9?"9+":A})]}),i.jsx("button",{onClick:()=>c("sync"),className:`flex-1 p-3 flex items-center justify-center transition-colors ${o==="sync"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Sync",children:i.jsx(ca,{size:18})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r?i.jsx("div",{className:"flex items-center justify-center h-32",children:i.jsx(ca,{size:24,className:"animate-spin text-orange-400"})}):t?i.jsxs(i.Fragment,{children:[o==="profile"&&i.jsx(IAe,{}),o==="friends"&&i.jsx(RAe,{onPendingCountChange:u}),o==="sync"&&i.jsx($Ae,{})]}):i.jsx(QAe,{})})]})]}):null},LAe=t=>+t;function HAe(t){return t*t}function KAe(t){return t*(2-t)}function m2(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function zAe(t){return t*t*t}function GAe(t){return--t*t*t+1}function p2(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Uw=3,WAe=function t(e){e=+e;function r(n){return Math.pow(n,e)}return r.exponent=t,r}(Uw),VAe=function t(e){e=+e;function r(n){return 1-Math.pow(1-n,e)}return r.exponent=t,r}(Uw),y2=function t(e){e=+e;function r(n){return((n*=2)<=1?Math.pow(n,e):2-Math.pow(2-n,e))/2}return r.exponent=t,r}(Uw),VN=Math.PI,qN=VN/2;function qAe(t){return+t==1?1:1-Math.cos(t*qN)}function XAe(t){return Math.sin(t*qN)}function v2(t){return(1-Math.cos(VN*t))/2}function oi(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function JAe(t){return oi(1-+t)}function YAe(t){return 1-oi(t)}function x2(t){return((t*=2)<=1?oi(1-t):2-oi(t-1))/2}function ZAe(t){return 1-Math.sqrt(1-t*t)}function ece(t){return Math.sqrt(1- --t*t)}function w2(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Dy=4/11,tce=6/11,rce=8/11,nce=3/4,sce=9/11,ace=10/11,ice=15/16,oce=21/22,lce=63/64,Cd=1/Dy/Dy;function Ace(t){return 1-nu(1-t)}function nu(t){return(t=+t)<Dy?Cd*t*t:t<rce?Cd*(t-=tce)*t+nce:t<ace?Cd*(t-=sce)*t+ice:Cd*(t-=oce)*t+lce}function cce(t){return((t*=2)<=1?1-nu(1-t):nu(t-1)+1)/2}var Qw=1.70158,uce=function t(e){e=+e;function r(n){return(n=+n)*n*(e*(n-1)+n)}return r.overshoot=t,r}(Qw),dce=function t(e){e=+e;function r(n){return--n*n*((n+1)*e+n)+1}return r.overshoot=t,r}(Qw),b2=function t(e){e=+e;function r(n){return((n*=2)<1?n*n*((e+1)*n-e):(n-=2)*n*((e+1)*n+e)+2)/2}return r.overshoot=t,r}(Qw),Hl=2*Math.PI,Iw=1,Pw=.3,hce=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=Hl);function s(a){return e*oi(- --a)*Math.sin((n-a)/r)}return s.amplitude=function(a){return t(a,r*Hl)},s.period=function(a){return t(e,a)},s}(Iw,Pw),_2=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=Hl);function s(a){return 1-e*oi(a=+a)*Math.sin((a+n)/r)}return s.amplitude=function(a){return t(a,r*Hl)},s.period=function(a){return t(e,a)},s}(Iw,Pw),fce=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=Hl);function s(a){return((a=a*2-1)<0?e*oi(-a)*Math.sin((n-a)/r):2-e*oi(a)*Math.sin((n+a)/r))/2}return s.amplitude=function(a){return t(a,r*Hl)},s.period=function(a){return t(e,a)},s}(Iw,Pw);const gce=Object.freeze(Object.defineProperty({__proto__:null,easeBack:b2,easeBackIn:uce,easeBackInOut:b2,easeBackOut:dce,easeBounce:nu,easeBounceIn:Ace,easeBounceInOut:cce,easeBounceOut:nu,easeCircle:w2,easeCircleIn:ZAe,easeCircleInOut:w2,easeCircleOut:ece,easeCubic:p2,easeCubicIn:zAe,easeCubicInOut:p2,easeCubicOut:GAe,easeElastic:_2,easeElasticIn:hce,easeElasticInOut:fce,easeElasticOut:_2,easeExp:x2,easeExpIn:JAe,easeExpInOut:x2,easeExpOut:YAe,easeLinear:LAe,easePoly:y2,easePolyIn:WAe,easePolyInOut:y2,easePolyOut:VAe,easeQuad:m2,easeQuadIn:HAe,easeQuadInOut:m2,easeQuadOut:KAe,easeSin:v2,easeSinIn:qAe,easeSinInOut:v2,easeSinOut:XAe},Symbol.toStringTag,{value:"Module"}));var mce=typeof Xs=="object"&&Xs&&Xs.Object===Object&&Xs,XN=mce,pce=XN,yce=typeof self=="object"&&self&&self.Object===Object&&self,vce=pce||yce||Function("return this")(),wa=vce,xce=wa,wce=xce.Symbol,Uu=wce,C2=Uu,JN=Object.prototype,bce=JN.hasOwnProperty,_ce=JN.toString,NA=C2?C2.toStringTag:void 0;function Cce(t){var e=bce.call(t,NA),r=t[NA];try{t[NA]=void 0;var n=!0}catch{}var s=_ce.call(t);return n&&(e?t[NA]=r:delete t[NA]),s}var Bce=Cce,Sce=Object.prototype,jce=Sce.toString;function kce(t){return jce.call(t)}var Ece=kce,B2=Uu,Nce=Bce,Fce=Ece,Tce="[object Null]",Uce="[object Undefined]",S2=B2?B2.toStringTag:void 0;function Qce(t){return t==null?t===void 0?Uce:Tce:S2&&S2 in Object(t)?Nce(t):Fce(t)}var po=Qce;function Ice(t,e){return function(r){return t(e(r))}}var YN=Ice,Pce=YN,Dce=Pce(Object.getPrototypeOf,Object),ZN=Dce;function Mce(t){return t!=null&&typeof t=="object"}var yo=Mce,Rce=po,$ce=ZN,Oce=yo,Lce="[object Object]",Hce=Function.prototype,Kce=Object.prototype,e6=Hce.toString,zce=Kce.hasOwnProperty,Gce=e6.call(Object);function Wce(t){if(!Oce(t)||Rce(t)!=Lce)return!1;var e=$ce(t);if(e===null)return!0;var r=zce.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&e6.call(r)==Gce}var Vce=Wce;const Dn=St(Vce);function qce(t,e){for(var r=-1,n=t==null?0:t.length,s=Array(n);++r<n;)s[r]=e(t[r],r,t);return s}var Dw=qce,Xce=Array.isArray,Ln=Xce,Jce=po,Yce=yo,Zce="[object Symbol]";function eue(t){return typeof t=="symbol"||Yce(t)&&Jce(t)==Zce}var J0=eue,tue=Ln,rue=J0,nue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sue=/^\w*$/;function aue(t,e){if(tue(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||rue(t)?!0:sue.test(t)||!nue.test(t)||e!=null&&t in Object(e)}var Mw=aue;function iue(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var vo=iue;const My=St(vo);var oue=po,lue=vo,Aue="[object AsyncFunction]",cue="[object Function]",uue="[object GeneratorFunction]",due="[object Proxy]";function hue(t){if(!lue(t))return!1;var e=oue(t);return e==cue||e==uue||e==Aue||e==due}var t6=hue,fue=wa,gue=fue["__core-js_shared__"],mue=gue,Fm=mue,j2=function(){var t=/[^.]+$/.exec(Fm&&Fm.keys&&Fm.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function pue(t){return!!j2&&j2 in t}var yue=pue,vue=Function.prototype,xue=vue.toString;function wue(t){if(t!=null){try{return xue.call(t)}catch{}try{return t+""}catch{}}return""}var r6=wue,bue=t6,_ue=yue,Cue=vo,Bue=r6,Sue=/[\\^$.*+?()[\]{}|]/g,jue=/^\[object .+?Constructor\]$/,kue=Function.prototype,Eue=Object.prototype,Nue=kue.toString,Fue=Eue.hasOwnProperty,Tue=RegExp("^"+Nue.call(Fue).replace(Sue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Uue(t){if(!Cue(t)||_ue(t))return!1;var e=bue(t)?Tue:jue;return e.test(Bue(t))}var Que=Uue;function Iue(t,e){return t==null?void 0:t[e]}var Pue=Iue,Due=Que,Mue=Pue;function Rue(t,e){var r=Mue(t,e);return Due(r)?r:void 0}var xo=Rue,$ue=xo,Oue=$ue(Object,"create"),Y0=Oue,k2=Y0;function Lue(){this.__data__=k2?k2(null):{},this.size=0}var Hue=Lue;function Kue(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var zue=Kue,Gue=Y0,Wue="__lodash_hash_undefined__",Vue=Object.prototype,que=Vue.hasOwnProperty;function Xue(t){var e=this.__data__;if(Gue){var r=e[t];return r===Wue?void 0:r}return que.call(e,t)?e[t]:void 0}var Jue=Xue,Yue=Y0,Zue=Object.prototype,ede=Zue.hasOwnProperty;function tde(t){var e=this.__data__;return Yue?e[t]!==void 0:ede.call(e,t)}var rde=tde,nde=Y0,sde="__lodash_hash_undefined__";function ade(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=nde&&e===void 0?sde:e,this}var ide=ade,ode=Hue,lde=zue,Ade=Jue,cde=rde,ude=ide;function aA(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}aA.prototype.clear=ode;aA.prototype.delete=lde;aA.prototype.get=Ade;aA.prototype.has=cde;aA.prototype.set=ude;var dde=aA;function hde(){this.__data__=[],this.size=0}var fde=hde;function gde(t,e){return t===e||t!==t&&e!==e}var iA=gde,mde=iA;function pde(t,e){for(var r=t.length;r--;)if(mde(t[r][0],e))return r;return-1}var Z0=pde,yde=Z0,vde=Array.prototype,xde=vde.splice;function wde(t){var e=this.__data__,r=yde(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():xde.call(e,r,1),--this.size,!0}var bde=wde,_de=Z0;function Cde(t){var e=this.__data__,r=_de(e,t);return r<0?void 0:e[r][1]}var Bde=Cde,Sde=Z0;function jde(t){return Sde(this.__data__,t)>-1}var kde=jde,Ede=Z0;function Nde(t,e){var r=this.__data__,n=Ede(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var Fde=Nde,Tde=fde,Ude=bde,Qde=Bde,Ide=kde,Pde=Fde;function oA(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}oA.prototype.clear=Tde;oA.prototype.delete=Ude;oA.prototype.get=Qde;oA.prototype.has=Ide;oA.prototype.set=Pde;var eg=oA,Dde=xo,Mde=wa,Rde=Dde(Mde,"Map"),Rw=Rde,E2=dde,$de=eg,Ode=Rw;function Lde(){this.size=0,this.__data__={hash:new E2,map:new(Ode||$de),string:new E2}}var Hde=Lde;function Kde(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var zde=Kde,Gde=zde;function Wde(t,e){var r=t.__data__;return Gde(e)?r[typeof e=="string"?"string":"hash"]:r.map}var tg=Wde,Vde=tg;function qde(t){var e=Vde(this,t).delete(t);return this.size-=e?1:0,e}var Xde=qde,Jde=tg;function Yde(t){return Jde(this,t).get(t)}var Zde=Yde,ehe=tg;function the(t){return ehe(this,t).has(t)}var rhe=the,nhe=tg;function she(t,e){var r=nhe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var ahe=she,ihe=Hde,ohe=Xde,lhe=Zde,Ahe=rhe,che=ahe;function lA(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}lA.prototype.clear=ihe;lA.prototype.delete=ohe;lA.prototype.get=lhe;lA.prototype.has=Ahe;lA.prototype.set=che;var $w=lA,n6=$w,uhe="Expected a function";function Ow(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(uhe);var r=function(){var n=arguments,s=e?e.apply(this,n):n[0],a=r.cache;if(a.has(s))return a.get(s);var o=t.apply(this,n);return r.cache=a.set(s,o)||a,o};return r.cache=new(Ow.Cache||n6),r}Ow.Cache=n6;var s6=Ow;const a6=St(s6);var dhe=s6,hhe=500;function fhe(t){var e=dhe(t,function(n){return r.size===hhe&&r.clear(),n}),r=e.cache;return e}var ghe=fhe,mhe=ghe,phe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yhe=/\\(\\)?/g,vhe=mhe(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(phe,function(r,n,s,a){e.push(s?a.replace(yhe,"$1"):n||r)}),e}),xhe=vhe,N2=Uu,whe=Dw,bhe=Ln,_he=J0,Che=1/0,F2=N2?N2.prototype:void 0,T2=F2?F2.toString:void 0;function i6(t){if(typeof t=="string")return t;if(bhe(t))return whe(t,i6)+"";if(_he(t))return T2?T2.call(t):"";var e=t+"";return e=="0"&&1/t==-Che?"-0":e}var Bhe=i6,She=Bhe;function jhe(t){return t==null?"":She(t)}var o6=jhe,khe=Ln,Ehe=Mw,Nhe=xhe,Fhe=o6;function The(t,e){return khe(t)?t:Ehe(t,e)?[t]:Nhe(Fhe(t))}var rg=The,Uhe=J0,Qhe=1/0;function Ihe(t){if(typeof t=="string"||Uhe(t))return t;var e=t+"";return e=="0"&&1/t==-Qhe?"-0":e}var Qu=Ihe,Phe=rg,Dhe=Qu;function Mhe(t,e){e=Phe(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Dhe(e[r++])];return r&&r==n?t:void 0}var ng=Mhe,Rhe=eg;function $he(){this.__data__=new Rhe,this.size=0}var Ohe=$he;function Lhe(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Hhe=Lhe;function Khe(t){return this.__data__.get(t)}var zhe=Khe;function Ghe(t){return this.__data__.has(t)}var Whe=Ghe,Vhe=eg,qhe=Rw,Xhe=$w,Jhe=200;function Yhe(t,e){var r=this.__data__;if(r instanceof Vhe){var n=r.__data__;if(!qhe||n.length<Jhe-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Xhe(n)}return r.set(t,e),this.size=r.size,this}var Zhe=Yhe,efe=eg,tfe=Ohe,rfe=Hhe,nfe=zhe,sfe=Whe,afe=Zhe;function AA(t){var e=this.__data__=new efe(t);this.size=e.size}AA.prototype.clear=tfe;AA.prototype.delete=rfe;AA.prototype.get=nfe;AA.prototype.has=sfe;AA.prototype.set=afe;var l6=AA,ife="__lodash_hash_undefined__";function ofe(t){return this.__data__.set(t,ife),this}var lfe=ofe;function Afe(t){return this.__data__.has(t)}var cfe=Afe,ufe=$w,dfe=lfe,hfe=cfe;function ff(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new ufe;++e<r;)this.add(t[e])}ff.prototype.add=ff.prototype.push=dfe;ff.prototype.has=hfe;var A6=ff;function ffe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var gfe=ffe;function mfe(t,e){return t.has(e)}var c6=mfe,pfe=A6,yfe=gfe,vfe=c6,xfe=1,wfe=2;function bfe(t,e,r,n,s,a){var o=r&xfe,l=t.length,A=e.length;if(l!=A&&!(o&&A>l))return!1;var u=a.get(t),h=a.get(e);if(u&&h)return u==e&&h==t;var c=-1,d=!0,f=r&wfe?new pfe:void 0;for(a.set(t,e),a.set(e,t);++c<l;){var g=t[c],y=e[c];if(n)var v=o?n(y,g,c,e,t,a):n(g,y,c,t,e,a);if(v!==void 0){if(v)continue;d=!1;break}if(f){if(!yfe(e,function(m,p){if(!vfe(f,p)&&(g===m||s(g,m,r,n,a)))return f.push(p)})){d=!1;break}}else if(!(g===y||s(g,y,r,n,a))){d=!1;break}}return a.delete(t),a.delete(e),d}var u6=bfe,_fe=wa,Cfe=_fe.Uint8Array,Bfe=Cfe;function Sfe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,s){r[++e]=[s,n]}),r}var jfe=Sfe;function kfe(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Lw=kfe,U2=Uu,Q2=Bfe,Efe=iA,Nfe=u6,Ffe=jfe,Tfe=Lw,Ufe=1,Qfe=2,Ife="[object Boolean]",Pfe="[object Date]",Dfe="[object Error]",Mfe="[object Map]",Rfe="[object Number]",$fe="[object RegExp]",Ofe="[object Set]",Lfe="[object String]",Hfe="[object Symbol]",Kfe="[object ArrayBuffer]",zfe="[object DataView]",I2=U2?U2.prototype:void 0,Tm=I2?I2.valueOf:void 0;function Gfe(t,e,r,n,s,a,o){switch(r){case zfe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Kfe:return!(t.byteLength!=e.byteLength||!a(new Q2(t),new Q2(e)));case Ife:case Pfe:case Rfe:return Efe(+t,+e);case Dfe:return t.name==e.name&&t.message==e.message;case $fe:case Lfe:return t==e+"";case Mfe:var l=Ffe;case Ofe:var A=n&Ufe;if(l||(l=Tfe),t.size!=e.size&&!A)return!1;var u=o.get(t);if(u)return u==e;n|=Qfe,o.set(t,e);var h=Nfe(l(t),l(e),n,s,a,o);return o.delete(t),h;case Hfe:if(Tm)return Tm.call(t)==Tm.call(e)}return!1}var Wfe=Gfe;function Vfe(t,e){for(var r=-1,n=e.length,s=t.length;++r<n;)t[s+r]=e[r];return t}var Hw=Vfe,qfe=Hw,Xfe=Ln;function Jfe(t,e,r){var n=e(t);return Xfe(t)?n:qfe(n,r(t))}var d6=Jfe;function Yfe(t,e){for(var r=-1,n=t==null?0:t.length,s=0,a=[];++r<n;){var o=t[r];e(o,r,t)&&(a[s++]=o)}return a}var Zfe=Yfe;function e0e(){return[]}var h6=e0e,t0e=Zfe,r0e=h6,n0e=Object.prototype,s0e=n0e.propertyIsEnumerable,P2=Object.getOwnPropertySymbols,a0e=P2?function(t){return t==null?[]:(t=Object(t),t0e(P2(t),function(e){return s0e.call(t,e)}))}:r0e,f6=a0e;function i0e(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var o0e=i0e,l0e=po,A0e=yo,c0e="[object Arguments]";function u0e(t){return A0e(t)&&l0e(t)==c0e}var d0e=u0e,D2=d0e,h0e=yo,g6=Object.prototype,f0e=g6.hasOwnProperty,g0e=g6.propertyIsEnumerable,m0e=D2(function(){return arguments}())?D2:function(t){return h0e(t)&&f0e.call(t,"callee")&&!g0e.call(t,"callee")},sg=m0e,gf={exports:{}};function p0e(){return!1}var y0e=p0e;gf.exports;(function(t,e){var r=wa,n=y0e,s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o?r.Buffer:void 0,A=l?l.isBuffer:void 0,u=A||n;t.exports=u})(gf,gf.exports);var Kw=gf.exports,v0e=9007199254740991,x0e=/^(?:0|[1-9]\d*)$/;function w0e(t,e){var r=typeof t;return e=e??v0e,!!e&&(r=="number"||r!="symbol"&&x0e.test(t))&&t>-1&&t%1==0&&t<e}var ag=w0e,b0e=9007199254740991;function _0e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=b0e}var zw=_0e,C0e=po,B0e=zw,S0e=yo,j0e="[object Arguments]",k0e="[object Array]",E0e="[object Boolean]",N0e="[object Date]",F0e="[object Error]",T0e="[object Function]",U0e="[object Map]",Q0e="[object Number]",I0e="[object Object]",P0e="[object RegExp]",D0e="[object Set]",M0e="[object String]",R0e="[object WeakMap]",$0e="[object ArrayBuffer]",O0e="[object DataView]",L0e="[object Float32Array]",H0e="[object Float64Array]",K0e="[object Int8Array]",z0e="[object Int16Array]",G0e="[object Int32Array]",W0e="[object Uint8Array]",V0e="[object Uint8ClampedArray]",q0e="[object Uint16Array]",X0e="[object Uint32Array]",ht={};ht[L0e]=ht[H0e]=ht[K0e]=ht[z0e]=ht[G0e]=ht[W0e]=ht[V0e]=ht[q0e]=ht[X0e]=!0;ht[j0e]=ht[k0e]=ht[$0e]=ht[E0e]=ht[O0e]=ht[N0e]=ht[F0e]=ht[T0e]=ht[U0e]=ht[Q0e]=ht[I0e]=ht[P0e]=ht[D0e]=ht[M0e]=ht[R0e]=!1;function J0e(t){return S0e(t)&&B0e(t.length)&&!!ht[C0e(t)]}var Y0e=J0e;function Z0e(t){return function(e){return t(e)}}var Gw=Z0e,mf={exports:{}};mf.exports;(function(t,e){var r=XN,n=e&&!e.nodeType&&e,s=n&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===n,o=a&&r.process,l=function(){try{var A=s&&s.require&&s.require("util").types;return A||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(mf,mf.exports);var m6=mf.exports,ege=Y0e,tge=Gw,M2=m6,R2=M2&&M2.isTypedArray,rge=R2?tge(R2):ege,Ww=rge,nge=o0e,sge=sg,age=Ln,ige=Kw,oge=ag,lge=Ww,Age=Object.prototype,cge=Age.hasOwnProperty;function uge(t,e){var r=age(t),n=!r&&sge(t),s=!r&&!n&&ige(t),a=!r&&!n&&!s&&lge(t),o=r||n||s||a,l=o?nge(t.length,String):[],A=l.length;for(var u in t)(e||cge.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||oge(u,A)))&&l.push(u);return l}var p6=uge,dge=Object.prototype;function hge(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||dge;return t===r}var Vw=hge,fge=YN,gge=fge(Object.keys,Object),mge=gge,pge=Vw,yge=mge,vge=Object.prototype,xge=vge.hasOwnProperty;function wge(t){if(!pge(t))return yge(t);var e=[];for(var r in Object(t))xge.call(t,r)&&r!="constructor"&&e.push(r);return e}var y6=wge,bge=t6,_ge=zw;function Cge(t){return t!=null&&_ge(t.length)&&!bge(t)}var cA=Cge,Bge=p6,Sge=y6,jge=cA;function kge(t){return jge(t)?Bge(t):Sge(t)}var qw=kge,Ege=d6,Nge=f6,Fge=qw;function Tge(t){return Ege(t,Fge,Nge)}var Uge=Tge,$2=Uge,Qge=1,Ige=Object.prototype,Pge=Ige.hasOwnProperty;function Dge(t,e,r,n,s,a){var o=r&Qge,l=$2(t),A=l.length,u=$2(e),h=u.length;if(A!=h&&!o)return!1;for(var c=A;c--;){var d=l[c];if(!(o?d in e:Pge.call(e,d)))return!1}var f=a.get(t),g=a.get(e);if(f&&g)return f==e&&g==t;var y=!0;a.set(t,e),a.set(e,t);for(var v=o;++c<A;){d=l[c];var m=t[d],p=e[d];if(n)var x=o?n(p,m,d,e,t,a):n(m,p,d,t,e,a);if(!(x===void 0?m===p||s(m,p,r,n,a):x)){y=!1;break}v||(v=d=="constructor")}if(y&&!v){var w=t.constructor,_=e.constructor;w!=_&&"constructor"in t&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return a.delete(t),a.delete(e),y}var Mge=Dge,Rge=xo,$ge=wa,Oge=Rge($ge,"DataView"),Lge=Oge,Hge=xo,Kge=wa,zge=Hge(Kge,"Promise"),Gge=zge,Wge=xo,Vge=wa,qge=Wge(Vge,"Set"),v6=qge,Xge=xo,Jge=wa,Yge=Xge(Jge,"WeakMap"),Zge=Yge,Ry=Lge,$y=Rw,Oy=Gge,Ly=v6,Hy=Zge,x6=po,uA=r6,O2="[object Map]",eme="[object Object]",L2="[object Promise]",H2="[object Set]",K2="[object WeakMap]",z2="[object DataView]",tme=uA(Ry),rme=uA($y),nme=uA(Oy),sme=uA(Ly),ame=uA(Hy),ji=x6;(Ry&&ji(new Ry(new ArrayBuffer(1)))!=z2||$y&&ji(new $y)!=O2||Oy&&ji(Oy.resolve())!=L2||Ly&&ji(new Ly)!=H2||Hy&&ji(new Hy)!=K2)&&(ji=function(t){var e=x6(t),r=e==eme?t.constructor:void 0,n=r?uA(r):"";if(n)switch(n){case tme:return z2;case rme:return O2;case nme:return L2;case sme:return H2;case ame:return K2}return e});var w6=ji,Um=l6,ime=u6,ome=Wfe,lme=Mge,G2=w6,W2=Ln,V2=Kw,Ame=Ww,cme=1,q2="[object Arguments]",X2="[object Array]",Bd="[object Object]",ume=Object.prototype,J2=ume.hasOwnProperty;function dme(t,e,r,n,s,a){var o=W2(t),l=W2(e),A=o?X2:G2(t),u=l?X2:G2(e);A=A==q2?Bd:A,u=u==q2?Bd:u;var h=A==Bd,c=u==Bd,d=A==u;if(d&&V2(t)){if(!V2(e))return!1;o=!0,h=!1}if(d&&!h)return a||(a=new Um),o||Ame(t)?ime(t,e,r,n,s,a):ome(t,e,A,r,n,s,a);if(!(r&cme)){var f=h&&J2.call(t,"__wrapped__"),g=c&&J2.call(e,"__wrapped__");if(f||g){var y=f?t.value():t,v=g?e.value():e;return a||(a=new Um),s(y,v,r,n,a)}}return d?(a||(a=new Um),lme(t,e,r,n,s,a)):!1}var hme=dme,fme=hme,Y2=yo;function b6(t,e,r,n,s){return t===e?!0:t==null||e==null||!Y2(t)&&!Y2(e)?t!==t&&e!==e:fme(t,e,r,n,b6,s)}var Xw=b6,gme=l6,mme=Xw,pme=1,yme=2;function vme(t,e,r,n){var s=r.length,a=s,o=!n;if(t==null)return!a;for(t=Object(t);s--;){var l=r[s];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){l=r[s];var A=l[0],u=t[A],h=l[1];if(o&&l[2]){if(u===void 0&&!(A in t))return!1}else{var c=new gme;if(n)var d=n(u,h,A,t,e,c);if(!(d===void 0?mme(h,u,pme|yme,n,c):d))return!1}}return!0}var xme=vme,wme=vo;function bme(t){return t===t&&!wme(t)}var _6=bme,_me=_6,Cme=qw;function Bme(t){for(var e=Cme(t),r=e.length;r--;){var n=e[r],s=t[n];e[r]=[n,s,_me(s)]}return e}var Sme=Bme;function jme(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var C6=jme,kme=xme,Eme=Sme,Nme=C6;function Fme(t){var e=Eme(t);return e.length==1&&e[0][2]?Nme(e[0][0],e[0][1]):function(r){return r===t||kme(r,t,e)}}var Tme=Fme,Ume=ng;function Qme(t,e,r){var n=t==null?void 0:Ume(t,e);return n===void 0?r:n}var Ime=Qme;function Pme(t,e){return t!=null&&e in Object(t)}var Dme=Pme,Mme=rg,Rme=sg,$me=Ln,Ome=ag,Lme=zw,Hme=Qu;function Kme(t,e,r){e=Mme(e,t);for(var n=-1,s=e.length,a=!1;++n<s;){var o=Hme(e[n]);if(!(a=t!=null&&r(t,o)))break;t=t[o]}return a||++n!=s?a:(s=t==null?0:t.length,!!s&&Lme(s)&&Ome(o,s)&&($me(t)||Rme(t)))}var zme=Kme,Gme=Dme,Wme=zme;function Vme(t,e){return t!=null&&Wme(t,e,Gme)}var B6=Vme,qme=Xw,Xme=Ime,Jme=B6,Yme=Mw,Zme=_6,epe=C6,tpe=Qu,rpe=1,npe=2;function spe(t,e){return Yme(t)&&Zme(e)?epe(tpe(t),e):function(r){var n=Xme(r,t);return n===void 0&&n===e?Jme(r,t):qme(e,n,rpe|npe)}}var ape=spe;function ipe(t){return t}var Iu=ipe;const dA=St(Iu);function ope(t){return function(e){return e==null?void 0:e[t]}}var lpe=ope,Ape=ng;function cpe(t){return function(e){return Ape(e,t)}}var upe=cpe,dpe=lpe,hpe=upe,fpe=Mw,gpe=Qu;function mpe(t){return fpe(t)?dpe(gpe(t)):hpe(t)}var S6=mpe;const j6=St(S6);var ppe=Tme,ype=ape,vpe=Iu,xpe=Ln,wpe=S6;function bpe(t){return typeof t=="function"?t:t==null?vpe:typeof t=="object"?xpe(t)?ype(t[0],t[1]):ppe(t):wpe(t)}var ig=bpe;function _pe(t){return function(e,r,n){for(var s=-1,a=Object(e),o=n(e),l=o.length;l--;){var A=o[t?l:++s];if(r(a[A],A,a)===!1)break}return e}}var Cpe=_pe,Bpe=Cpe,Spe=Bpe(),jpe=Spe,kpe=jpe,Epe=qw;function Npe(t,e){return t&&kpe(t,e,Epe)}var Fpe=Npe,Tpe=cA;function Upe(t,e){return function(r,n){if(r==null)return r;if(!Tpe(r))return t(r,n);for(var s=r.length,a=e?s:-1,o=Object(r);(e?a--:++a<s)&&n(o[a],a,o)!==!1;);return r}}var Qpe=Upe,Ipe=Fpe,Ppe=Qpe,Dpe=Ppe(Ipe),Mpe=Dpe,Rpe=Mpe,$pe=cA;function Ope(t,e){var r=-1,n=$pe(t)?Array(t.length):[];return Rpe(t,function(s,a,o){n[++r]=e(s,a,o)}),n}var Lpe=Ope;function Hpe(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Kpe=Hpe,Z2=J0;function zpe(t,e){if(t!==e){var r=t!==void 0,n=t===null,s=t===t,a=Z2(t),o=e!==void 0,l=e===null,A=e===e,u=Z2(e);if(!l&&!u&&!a&&t>e||a&&o&&A&&!l&&!u||n&&o&&A||!r&&A||!s)return 1;if(!n&&!a&&!u&&t<e||u&&r&&s&&!n&&!a||l&&r&&s||!o&&s||!A)return-1}return 0}var Gpe=zpe,Wpe=Gpe;function Vpe(t,e,r){for(var n=-1,s=t.criteria,a=e.criteria,o=s.length,l=r.length;++n<o;){var A=Wpe(s[n],a[n]);if(A){if(n>=l)return A;var u=r[n];return A*(u=="desc"?-1:1)}}return t.index-e.index}var qpe=Vpe,Qm=Dw,Xpe=ng,Jpe=ig,Ype=Lpe,Zpe=Kpe,eye=Gw,tye=qpe,rye=Iu,nye=Ln;function sye(t,e,r){e.length?e=Qm(e,function(a){return nye(a)?function(o){return Xpe(o,a.length===1?a[0]:a)}:a}):e=[rye];var n=-1;e=Qm(e,eye(Jpe));var s=Ype(t,function(a,o,l){var A=Qm(e,function(u){return u(a)});return{criteria:A,index:++n,value:a}});return Zpe(s,function(a,o){return tye(a,o,r)})}var aye=sye,iye=aye,eB=Ln;function oye(t,e,r,n){return t==null?[]:(eB(e)||(e=e==null?[]:[e]),r=n?void 0:r,eB(r)||(r=r==null?[]:[r]),iye(t,e,r))}var lye=oye;const Jw=St(lye);function Yw(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function k6(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Pu(){}var su=.7,pf=1/su,El="\\s*([+-]?\\d+)\\s*",au="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",js="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Aye=/^#([0-9a-f]{3,8})$/,cye=new RegExp(`^rgb\\(${El},${El},${El}\\)$`),uye=new RegExp(`^rgb\\(${js},${js},${js}\\)$`),dye=new RegExp(`^rgba\\(${El},${El},${El},${au}\\)$`),hye=new RegExp(`^rgba\\(${js},${js},${js},${au}\\)$`),fye=new RegExp(`^hsl\\(${au},${js},${js}\\)$`),gye=new RegExp(`^hsla\\(${au},${js},${js},${au}\\)$`),tB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yw(Pu,iu,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rB,formatHex:rB,formatHex8:mye,formatHsl:pye,formatRgb:nB,toString:nB});function rB(){return this.rgb().formatHex()}function mye(){return this.rgb().formatHex8()}function pye(){return E6(this).formatHsl()}function nB(){return this.rgb().formatRgb()}function iu(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Aye.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?sB(e):r===3?new Yr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Sd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Sd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cye.exec(t))?new Yr(e[1],e[2],e[3],1):(e=uye.exec(t))?new Yr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=dye.exec(t))?Sd(e[1],e[2],e[3],e[4]):(e=hye.exec(t))?Sd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=fye.exec(t))?oB(e[1],e[2]/100,e[3]/100,1):(e=gye.exec(t))?oB(e[1],e[2]/100,e[3]/100,e[4]):tB.hasOwnProperty(t)?sB(tB[t]):t==="transparent"?new Yr(NaN,NaN,NaN,0):null}function sB(t){return new Yr(t>>16&255,t>>8&255,t&255,1)}function Sd(t,e,r,n){return n<=0&&(t=e=r=NaN),new Yr(t,e,r,n)}function yye(t){return t instanceof Pu||(t=iu(t)),t?(t=t.rgb(),new Yr(t.r,t.g,t.b,t.opacity)):new Yr}function Ky(t,e,r,n){return arguments.length===1?yye(t):new Yr(t,e,r,n??1)}function Yr(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}Yw(Yr,Ky,k6(Pu,{brighter(t){return t=t==null?pf:Math.pow(pf,t),new Yr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?su:Math.pow(su,t),new Yr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Yr(Hi(this.r),Hi(this.g),Hi(this.b),yf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aB,formatHex:aB,formatHex8:vye,formatRgb:iB,toString:iB}));function aB(){return`#${Mi(this.r)}${Mi(this.g)}${Mi(this.b)}`}function vye(){return`#${Mi(this.r)}${Mi(this.g)}${Mi(this.b)}${Mi((isNaN(this.opacity)?1:this.opacity)*255)}`}function iB(){const t=yf(this.opacity);return`${t===1?"rgb(":"rgba("}${Hi(this.r)}, ${Hi(this.g)}, ${Hi(this.b)}${t===1?")":`, ${t})`}`}function yf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Hi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mi(t){return t=Hi(t),(t<16?"0":"")+t.toString(16)}function oB(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new rs(t,e,r,n)}function E6(t){if(t instanceof rs)return new rs(t.h,t.s,t.l,t.opacity);if(t instanceof Pu||(t=iu(t)),!t)return new rs;if(t instanceof rs)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,s=Math.min(e,r,n),a=Math.max(e,r,n),o=NaN,l=a-s,A=(a+s)/2;return l?(e===a?o=(r-n)/l+(r<n)*6:r===a?o=(n-e)/l+2:o=(e-r)/l+4,l/=A<.5?a+s:2-a-s,o*=60):l=A>0&&A<1?0:o,new rs(o,l,A,t.opacity)}function xye(t,e,r,n){return arguments.length===1?E6(t):new rs(t,e,r,n??1)}function rs(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}Yw(rs,xye,k6(Pu,{brighter(t){return t=t==null?pf:Math.pow(pf,t),new rs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?su:Math.pow(su,t),new rs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,s=2*r-n;return new Yr(Im(t>=240?t-240:t+120,s,n),Im(t,s,n),Im(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new rs(lB(this.h),jd(this.s),jd(this.l),yf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=yf(this.opacity);return`${t===1?"hsl(":"hsla("}${lB(this.h)}, ${jd(this.s)*100}%, ${jd(this.l)*100}%${t===1?")":`, ${t})`}`}}));function lB(t){return t=(t||0)%360,t<0?t+360:t}function jd(t){return Math.max(0,Math.min(1,t||0))}function Im(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Zw=t=>()=>t;function wye(t,e){return function(r){return t+r*e}}function bye(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function _ye(t){return(t=+t)==1?N6:function(e,r){return r-e?bye(e,r,t):Zw(isNaN(e)?r:e)}}function N6(t,e){var r=e-t;return r?wye(t,r):Zw(isNaN(t)?e:t)}const AB=function t(e){var r=_ye(e);function n(s,a){var o=r((s=Ky(s)).r,(a=Ky(a)).r),l=r(s.g,a.g),A=r(s.b,a.b),u=N6(s.opacity,a.opacity);return function(h){return s.r=o(h),s.g=l(h),s.b=A(h),s.opacity=u(h),s+""}}return n.gamma=t,n}(1);function Cye(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=t[s]*(1-a)+e[s]*a;return n}}function Bye(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sye(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,s=new Array(n),a=new Array(r),o;for(o=0;o<n;++o)s[o]=Fs(t[o],e[o]);for(;o<r;++o)a[o]=e[o];return function(l){for(o=0;o<n;++o)a[o]=s[o](l);return a}}function jye(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function vf(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function kye(t,e){var r={},n={},s;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(s in e)s in t?r[s]=Fs(t[s],e[s]):n[s]=e[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var zy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pm=new RegExp(zy.source,"g");function Eye(t){return function(){return t}}function Nye(t){return function(e){return t(e)+""}}function Fye(t,e){var r=zy.lastIndex=Pm.lastIndex=0,n,s,a,o=-1,l=[],A=[];for(t=t+"",e=e+"";(n=zy.exec(t))&&(s=Pm.exec(e));)(a=s.index)>r&&(a=e.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,A.push({i:o,x:vf(n,s)})),r=Pm.lastIndex;return r<e.length&&(a=e.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?A[0]?Nye(A[0].x):Eye(e):(e=A.length,function(u){for(var h=0,c;h<e;++h)l[(c=A[h]).i]=c.x(u);return l.join("")})}function Fs(t,e){var r=typeof e,n;return e==null||r==="boolean"?Zw(e):(r==="number"?vf:r==="string"?(n=iu(e))?(e=n,AB):Fye:e instanceof iu?AB:e instanceof Date?jye:Bye(e)?Cye:Array.isArray(e)?Sye:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?kye:vf)(t,e)}function e1(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Tye(t,e){e===void 0&&(e=t,t=Fs);for(var r=0,n=e.length-1,s=e[0],a=new Array(n<0?0:n);r<n;)a[r]=t(s,s=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return a[l](o-l)}}const xf=function(t){if(t!==null)switch(typeof t){case"undefined":return!1;case"number":return!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY;case"string":return!0;case"boolean":return!1;case"object":return t instanceof Date||Array.isArray(t)||Dn(t);case"function":return!0}return!1},F6=function(t,e,r){return r===void 0&&(r=0),function(n){return n<r?t:e}},T6=function(t,e){return function(r){return r>=1?e:function(){const n=typeof t=="function"?t.apply(this,arguments):t,s=typeof e=="function"?e.apply(this,arguments):e;return Fs(n,s)(r)}}},U6=function(t,e){const r=(u,h)=>u===h||!xf(u)||!xf(h)?F6(u,h):typeof u=="function"||typeof h=="function"?T6(u,h):typeof u=="object"&&Dn(u)||typeof h=="object"&&Dn(h)?U6(u,h):Fs(u,h),n=u=>Array.isArray(u)?Jw(u,"key"):u,s={},a={};let o=t,l=e,A;(o===null||typeof o!="object")&&(o={}),(l===null||typeof l!="object")&&(l={});for(A in l)A in o?s[A]=r(n(o[A]),n(l[A])):a[A]=l[A];return function(u){for(A in s)a[A]=s[A](u);return a}},Uye=function(t,e){const r=n=>typeof n=="string"?n.replace(/,/g,""):n;return Fs(r(t),r(e))},Qye=function(t,e){return t===e||!xf(t)||!xf(e)?F6(t,e):typeof t=="function"||typeof e=="function"?T6(t,e):Dn(t)||Dn(e)?U6(t,e):typeof t=="string"||typeof e=="string"?Uye(t,e):Fs(t,e)};var Kl=0,VA=0,FA=0,Q6=1e3,wf,qA,bf=0,no=0,og=0,ou=typeof performance=="object"&&performance.now?performance:Date,I6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _f(){return no||(I6(Iye),no=ou.now()+og)}function Iye(){no=0}function Gy(){this._call=this._time=this._next=null}Gy.prototype=P6.prototype={constructor:Gy,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?_f():+r)+(e==null?0:+e),!this._next&&qA!==this&&(qA?qA._next=this:wf=this,qA=this),this._call=t,this._time=r,Wy()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wy())}};function P6(t,e,r){var n=new Gy;return n.restart(t,e,r),n}function Pye(){_f(),++Kl;for(var t=wf,e;t;)(e=no-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Kl}function cB(){no=(bf=ou.now())+og,Kl=VA=0;try{Pye()}finally{Kl=0,Mye(),no=0}}function Dye(){var t=ou.now(),e=t-bf;e>Q6&&(og-=e,bf=t)}function Mye(){for(var t,e=wf,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:wf=r);qA=t,Wy(n)}function Wy(t){if(!Kl){VA&&(VA=clearTimeout(VA));var e=t-no;e>24?(t<1/0&&(VA=setTimeout(cB,t-ou.now()-og)),FA&&(FA=clearInterval(FA))):(FA||(bf=ou.now(),FA=setInterval(Dye,Q6)),Kl=1,I6(cB))}}class uB{constructor(){Z(this,"loop",()=>{this.subscribers.forEach(e=>{e.callback(_f()-e.startTime,e.duration)})});this.shouldAnimate=!0,this.subscribers=[],this.timer=null,this.activeSubscriptions=0}bypassAnimation(){this.shouldAnimate=!1}resumeAnimation(){this.shouldAnimate=!0}start(){this.timer||(this.timer=P6(this.loop))}stop(){this.timer&&(this.timer.stop(),this.timer=null)}subscribe(e,r){const n=this.subscribers.push({startTime:_f(),callback:e,duration:this.shouldAnimate?r:0});return this.activeSubscriptions++,this.start(),n}unsubscribe(e){e!==null&&this.subscribers[e-1]&&(delete this.subscribers[e-1],this.activeSubscriptions--),this.activeSubscriptions===0&&this.stop()}}const D6=R.createContext({transitionTimer:new uB,animationTimer:new uB});D6.displayName="TimerContext";const t1=D6,Rye=t=>`ease${t.charAt(0).toUpperCase()+t.slice(1)}`,$ye=1e3,Oye=t=>{let{duration:e=$ye,easing:r="quadInOut",delay:n=0,data:s,children:a,onEnd:o}=t;const[l,A]=R.useState({data:Array.isArray(s)?s[0]:s,animationInfo:{progress:0,animating:!1}}),u=R.useContext(t1).animationTimer,h=R.useRef(Array.isArray(s)?s.slice(1):[]),c=R.useRef(null),d=R.useRef(void 0),f=gce[Rye(r)];R.useEffect(()=>(h.current.length&&g(),()=>{d.current?u.unsubscribe(d.current):u.stop()}),[]),R.useEffect(()=>{c.current&&l.animationInfo&&l.animationInfo.progress<1?A({data:c.current(1),animationInfo:{progress:1,animating:!1,terminating:!0}}):(u.unsubscribe(d.current),h.current=Array.isArray(s)?s:[s],g())},[s]);const g=()=>{if(h.current.length){const v=h.current[0];c.current=Qye(l.data,v),n?setTimeout(()=>{d.current=u.subscribe(y,e)},n):d.current=u.subscribe(y,e)}else o&&o()},y=v=>{if(!c.current)return;const m=e?v/e:1;if(m>=1){A({data:c.current(1),animationInfo:{progress:1,animating:!1,terminating:!0}}),d.current&&u.unsubscribe(d.current),h.current.shift(),g();return}A({data:c.current(f(m)),animationInfo:{progress:m,animating:m<1}})};return a(l.data,l.animationInfo)};var Lye=o6,Hye=0;function Kye(t){var e=++Hye;return Lye(t)+e}var zye=Kye;const r1=St(zye);function Vy(){return Vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vy.apply(this,arguments)}const Gye=R.forwardRef((t,e)=>R.createElement("svg",Vy({ref:e},t)));function Wye(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Vye=Wye,qye=Vye,dB=Math.max;function Xye(t,e,r){return e=dB(e===void 0?t.length-1:e,0),function(){for(var n=arguments,s=-1,a=dB(n.length-e,0),o=Array(a);++s<a;)o[s]=n[e+s];s=-1;for(var l=Array(e+1);++s<e;)l[s]=n[s];return l[e]=r(o),qye(t,this,l)}}var M6=Xye;function Jye(t){return function(){return t}}var Yye=Jye,Zye=xo,eve=function(){try{var t=Zye(Object,"defineProperty");return t({},"",{}),t}catch{}}(),R6=eve,tve=Yye,hB=R6,rve=Iu,nve=hB?function(t,e){return hB(t,"toString",{configurable:!0,enumerable:!1,value:tve(e),writable:!0})}:rve,sve=nve,ave=800,ive=16,ove=Date.now;function lve(t){var e=0,r=0;return function(){var n=ove(),s=ive-(n-r);if(r=n,s>0){if(++e>=ave)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Ave=lve,cve=sve,uve=Ave,dve=uve(cve),$6=dve,hve=Iu,fve=M6,gve=$6;function mve(t,e){return gve(fve(t,e,hve),t+"")}var pve=mve,yve=iA,vve=cA,xve=ag,wve=vo;function bve(t,e,r){if(!wve(r))return!1;var n=typeof e;return(n=="number"?vve(r)&&xve(e,r.length):n=="string"&&e in r)?yve(r[e],t):!1}var _ve=bve;function Cve(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Bve=Cve,Sve=vo,jve=Vw,kve=Bve,Eve=Object.prototype,Nve=Eve.hasOwnProperty;function Fve(t){if(!Sve(t))return kve(t);var e=jve(t),r=[];for(var n in t)n=="constructor"&&(e||!Nve.call(t,n))||r.push(n);return r}var Tve=Fve,Uve=p6,Qve=Tve,Ive=cA;function Pve(t){return Ive(t)?Uve(t,!0):Qve(t)}var O6=Pve,Dve=pve,Mve=iA,Rve=_ve,$ve=O6,L6=Object.prototype,Ove=L6.hasOwnProperty,Lve=Dve(function(t,e){t=Object(t);var r=-1,n=e.length,s=n>2?e[2]:void 0;for(s&&Rve(e[0],e[1],s)&&(n=1);++r<n;)for(var a=e[r],o=$ve(a),l=-1,A=o.length;++l<A;){var u=o[l],h=t[u];(h===void 0||Mve(h,L6[u])&&!Ove.call(t,u))&&(t[u]=a[u])}return t}),Hve=Lve;const _e=St(Hve);var fB=R6;function Kve(t,e,r){e=="__proto__"&&fB?fB(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var zve=Kve,Gve=zve,Wve=iA,Vve=Object.prototype,qve=Vve.hasOwnProperty;function Xve(t,e,r){var n=t[e];(!(qve.call(t,e)&&Wve(n,r))||r===void 0&&!(e in t))&&Gve(t,e,r)}var Jve=Xve,Yve=Jve,Zve=rg,exe=ag,gB=vo,txe=Qu;function rxe(t,e,r,n){if(!gB(t))return t;e=Zve(e,t);for(var s=-1,a=e.length,o=a-1,l=t;l!=null&&++s<a;){var A=txe(e[s]),u=r;if(A==="__proto__"||A==="constructor"||A==="prototype")return t;if(s!=o){var h=l[A];u=n?n(h,A,l):void 0,u===void 0&&(u=gB(h)?h:exe(e[s+1])?[]:{})}Yve(l,A,u),l=l[A]}return t}var nxe=rxe,sxe=ng,axe=nxe,ixe=rg;function oxe(t,e,r){for(var n=-1,s=e.length,a={};++n<s;){var o=e[n],l=sxe(t,o);r(l,o)&&axe(a,ixe(o,t),l)}return a}var H6=oxe,lxe=H6,Axe=B6;function cxe(t,e){return lxe(t,e,function(r,n){return Axe(t,n)})}var uxe=cxe,mB=Uu,dxe=sg,hxe=Ln,pB=mB?mB.isConcatSpreadable:void 0;function fxe(t){return hxe(t)||dxe(t)||!!(pB&&t&&t[pB])}var gxe=fxe,mxe=Hw,pxe=gxe;function K6(t,e,r,n,s){var a=-1,o=t.length;for(r||(r=pxe),s||(s=[]);++a<o;){var l=t[a];e>0&&r(l)?e>1?K6(l,e-1,r,n,s):mxe(s,l):n||(s[s.length]=l)}return s}var yxe=K6,vxe=yxe;function xxe(t){var e=t==null?0:t.length;return e?vxe(t,1):[]}var wxe=xxe,bxe=wxe,_xe=M6,Cxe=$6;function Bxe(t){return Cxe(_xe(t,void 0,bxe),t+"")}var Sxe=Bxe,jxe=uxe,kxe=Sxe,Exe=kxe(function(t,e){return t==null?{}:jxe(t,e)}),Nxe=Exe;const Cf=St(Nxe);function Fxe(t){return t.axis!=="x"?[t.height-t.padding.bottom,t.padding.top]:[t.padding.left,t.width-t.padding.right]}function Txe(t){if(t.axis==="x"){const e=er(t.startAngle||0),r=er(t.endAngle||360);return[e,r]}return[t.innerRadius||0,qy({height:t.height,width:t.width,padding:t.padding})]}function z6(t){return Object.entries(t).reduce((e,r)=>(e[r[1]]=r[0],e),{})}function n1(t,e){e===void 0&&(e=[]);const r={};for(const n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}function G6(t){const{_x:e,_x1:r,_x0:n,_voronoiX:s,_y:a,_y1:o,_y0:l,_voronoiY:A}=t;return _e({},{x:s??(r??e),x0:n??e,y:A??(o??a),y0:l??a},t)}function s1(t,e){const{scale:r,polar:n,horizontal:s}=t,a=G6(e),o=t.origin||{x:0,y:0},l=s?r.y(a.y):r.x(a.x),A=s?r.y(a.y0):r.x(a.x0),u=s?r.x(a.x):r.y(a.y),h=s?r.x(a.x0):r.y(a.y0);return{x:n?u*Math.cos(l)+o.x:l,x0:n?h*Math.cos(A)+o.x:A,y:n?-u*Math.sin(l)+o.y:u,y0:n?-h*Math.sin(A)+o.x:h}}function Mn(t){const e=typeof t=="number"?t:0,r=typeof t=="object"?t:{};return{top:r.top||e,bottom:r.bottom||e,left:r.left||e,right:r.right||e}}function W6(t){return(t&&t.type&&t.type.role)==="tooltip"}function a1(t,e){const{theme:r={},labelComponent:n}=t,s=r[e]&&r[e].style||{};if(!W6(n))return s;const a=r.tooltip&&r.tooltip.style||{},o=_e({},a,s.labels);return _e({},{labels:o},s)}function i1(t,e){const r="100%",n="100%";if(!t)return _e({parent:{height:n,width:r}},e);const{data:s,labels:a,parent:o}=t,l=e&&e.parent||{},A=e&&e.labels||{},u=e&&e.data||{};return{parent:_e({},o,l,{width:r,height:n}),labels:_e({},a,A),data:_e({},s,u)}}function Be(t,e){return rt(t)?t(e):t}function Br(t,e){return e.disableInlineStyles?{}:!t||!Object.keys(t).some(r=>rt(t[r]))?t:Object.keys(t).reduce((r,n)=>(r[n]=Be(t[n],e),r),{})}function er(t){return typeof t=="number"?t*(Math.PI/180):t}function o1(t){return typeof t=="number"?t/(Math.PI/180):t}function qy(t){const{width:e,height:r,padding:n}=t,{left:s,right:a,top:o,bottom:l}=n;return Math.min(e-s-a,r-o-l)/2}function Du(t){const{width:e,height:r}=t,{top:n,bottom:s,left:a,right:o}=Mn(t.padding),l=Math.min(e-a-o,r-n-s)/2,A=e/2+a-o,u=r/2+n-s;return{x:A+l>e?l+a-o:A,y:u+l>r?l+n-s:u}}function rr(t,e){return t.range&&t.range[e]?t.range[e]:t.range&&Array.isArray(t.range)?t.range:t.polar?Txe({axis:e,innerRadius:t.innerRadius,startAngle:t.startAngle,endAngle:t.endAngle,height:t.height,width:t.width,padding:Mn(t.padding)}):Fxe({axis:e,height:t.height,width:t.width,padding:Mn(t.padding)})}function lu(t){return t==null}function rt(t){return typeof t=="function"}function l1(t){return rt(t)?t:t==null?e=>e:j6(t)}function is(t,e,r){const n=t.theme&&t.theme[r]?t.theme[r]:{},s=n1(n,["style"]),a=Qxe(t);return _e(a===void 0?{}:{horizontal:a},t,s,e)}function Uxe(t,e){return e?t==="x"?"y":"x":t}function A1(t,e,r){const n=e?t:0;let s=e||t;s||(s=0);const a=s-n,o=Math.abs(a),l=a/o||1,A=r||1,u=Math.max(Math.ceil(o/A),0);return Array.from(Array(u),(h,c)=>n+c*l*A)}function Mu(t,e,r,n,s){r===void 0&&(r={}),n===void 0&&(n=[]),s===void 0&&(s=(u,h)=>u.concat(h));const a=["data","domain","categories","polar","startAngle","endAngle","minDomain","maxDomain","horizontal"],o=(u,h,c)=>u.reduce((d,f,g)=>{let y=d;const v=f.type&&f.type.role,m=f.props.name||`${v}-${h[g]}`;if(f.props&&f.props.children){const p=Object.assign({},f.props,Cf(r,a)),x=f.type&&f.type.role==="stack"&&rt(f.type.getChildren)?f.type.getChildren(p):R.Children.toArray(f.props.children).map(b=>{const S=Object.assign({},b.props,Cf(p,a));return R.cloneElement(b,S)}),w=x.map((b,S)=>`${m}-${S}`),_=o(x,w,f);y=s(y,_)}else{const p=e(f,m,c);p&&(y=s(y,p))}return y},n),l=t.filter(B.isValidElement),A=l.map((u,h)=>h);return o(l,A)}function Qxe(t){if(t.horizontal!==void 0||!t.children)return t.horizontal;const e=r=>r.reduce((n,s)=>{const a=s.props||{};return n||a.horizontal||!a.children?n||a.horizontal:e(R.Children.toArray(a.children))},!1);return e(R.Children.toArray(t.children))}const V6={startsWith:["data-","aria-"],exactMatch:[]},Ixe=t=>{let e=!1;return V6.startsWith.forEach(r=>{new RegExp(`\\b(${r})(\\w|-)+`,"g").test(t)&&(e=!0)}),e},Pxe=t=>V6.exactMatch.includes(t),Dxe=t=>!!(Ixe(t)||Pxe(t)),ba=t=>{const e={...t};return Object.fromEntries(Object.entries(e).filter(r=>{let[n]=r;return Dxe(n)}).map(r=>{let[n,s]=r;return[n,Be(s,t)]}))},c1=(t,e)=>B.cloneElement(t,ba(e));var Mxe=y6,Rxe=w6,$xe=sg,Oxe=Ln,Lxe=cA,Hxe=Kw,Kxe=Vw,zxe=Ww,Gxe="[object Map]",Wxe="[object Set]",Vxe=Object.prototype,qxe=Vxe.hasOwnProperty;function Xxe(t){if(t==null)return!0;if(Lxe(t)&&(Oxe(t)||typeof t=="string"||typeof t.splice=="function"||Hxe(t)||zxe(t)||$xe(t)))return!t.length;var e=Rxe(t);if(e==Gxe||e==Wxe)return!t.size;if(Kxe(t))return!Mxe(t).length;for(var r in t)if(qxe.call(t,r))return!1;return!0}var Jxe=Xxe;const It=St(Jxe);var Yxe=typeof Element<"u",Zxe=typeof Map=="function",ewe=typeof Set=="function",twe=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function _h(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n,s;if(Array.isArray(t)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(!_h(t[n],e[n]))return!1;return!0}var a;if(Zxe&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(n=a.next()).done;)if(!e.has(n.value[0]))return!1;for(a=t.entries();!(n=a.next()).done;)if(!_h(n.value[1],e.get(n.value[0])))return!1;return!0}if(ewe&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(n=a.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(twe&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;if(Yxe&&t instanceof Element)return!1;for(n=r;n--!==0;)if(!((s[n]==="_owner"||s[n]==="__v"||s[n]==="__o")&&t.$$typeof)&&!_h(t[s[n]],e[s[n]]))return!1;return!0}return t!==t&&e!==e}var rwe=function(e,r){try{return _h(e,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const Ki=St(rwe);function q6(t){return Array.isArray(t)&&t.length>0}function Bf(t){return Array.isArray(t)&&t.some(e=>typeof e=="string")}function ua(t){return Array.isArray(t)&&t.some(e=>e instanceof Date)}function nwe(t){return q6(t)&&t.every(e=>typeof e=="string")}function Sf(t,e){return t&&e?t.filter(r=>!e.includes(r)):[]}function yB(t){return q6(t)&&t.every(Array.isArray)}function swe(t){return t.filter(e=>e!==void 0)}function As(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const s=t.concat(r);return ua(s)?new Date(Math.max(...s)):Math.max(...s)}function cs(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const s=t.concat(r);return ua(s)?new Date(Math.min(...s)):Math.min(...s)}function X6(t,e){return(t.key||e).toString()}function vB(t){return t.reduce((e,r,n)=>{const s=X6(r,n);return e[s]=r,e},{})}function xB(t,e){let r=!1;const n=Object.keys(t).reduce((s,a)=>(a in e||(r=!0,s[a]=!0),s),{});return r&&n}function awe(t,e){const r=t&&vB(t),n=e&&vB(e);return{entering:r&&xB(n,r),exiting:n&&xB(r,n)}}function Xy(t){return t.type&&t.type.getData?t.type.getData(t.props):t.props&&t.props.data||!1}function J6(t,e){let r=!1,n=!1;const s=(l,A)=>{if(!A||l.type!==A.type)return{};const{entering:u,exiting:h}=awe(Xy(l),Xy(A))||{};return r=r||!!h,n=n||!!u,{entering:u||!1,exiting:h||!1}},a=(l,A)=>l.map((u,h)=>u&&u.props&&u.props.children&&A[h]?a(R.Children.toArray(l[h].props.children),R.Children.toArray(A[h].props.children)):s(u,A[h])),o=a(R.Children.toArray(t),R.Children.toArray(e));return{nodesWillExit:r,nodesWillEnter:n,childrenTransitions:o,nodesShouldEnter:!1}}function iwe(t,e){const r=t.onEnter&&t.onEnter.after?t.onEnter.after:dA;return{data:e.map((n,s)=>Object.assign({},n,r(n,s,e)))}}function owe(t,e,r,n){const s=Object.assign({},t,{onEnd:n});if(s&&s.onLoad&&!s.onLoad.duration)return{animate:s,data:r};const a=s.onLoad&&s.onLoad.before?s.onLoad.before:dA,o=r.map((l,A)=>Object.assign({},l,a(l,A,r)));return{animate:s,data:o,clipWidth:0}}function lwe(t,e,r){const n=Object.assign({},t,{onEnd:r});let s=e;if(n&&n.onLoad&&!n.onLoad.duration)return{animate:t,data:e};const a=t.onLoad&&t.onLoad.after?t.onLoad.after:dA;return s=e.map((o,l)=>Object.assign({},o,a(o,l,e))),{animate:n,data:s}}function Awe(t,e,r,n,s){const a=t&&t.onExit,o=Object.assign({},t,a);let l=r;if(n){t.onEnd=s;const A=t.onExit&&t.onExit.before?t.onExit.before:dA;l=r.map((u,h)=>{const c=(u.key||h).toString();return n[c]?Object.assign({},u,A(u,h,r)):u})}return{animate:o,data:l}}function cwe(t,e,r,n,s){let a=t,o=r;if(n){a=Object.assign({},t,{onEnd:s});const l=t.onEnter&&t.onEnter.before?t.onEnter.before:dA;o=r.map((A,u)=>{const h=(A.key||u).toString();return n[h]?Object.assign({},A,l(A,u,r)):A})}return{animate:a,data:o}}function uwe(t,e,r,n){const s=t&&t.onEnter,a=Object.assign({},t,s);let o=e;if(r){a.onEnd=n;const l=a.onEnter&&a.onEnter.after?a.onEnter.after:dA;o=e.map((A,u)=>{const h=X6(A,u);return r[h]?Object.assign({},A,l(A,u,e)):A})}return{animate:a,data:o}}function Y6(t,e,r){const n=e&&e.nodesWillExit,s=e&&e.nodesWillEnter,a=e&&e.nodesShouldEnter,o=e&&e.nodesShouldLoad,l=e&&e.nodesDoneLoad,A=e&&e.childrenTransitions||[],u={enter:t.animate&&t.animate.onEnter&&t.animate.onEnter.duration,exit:t.animate&&t.animate.onExit&&t.animate.onExit.duration,load:t.animate&&t.animate.onLoad&&t.animate.onLoad.duration,move:t.animate&&t.animate.duration},h=(g,y,v)=>o?lwe(v,y,()=>{r({nodesShouldLoad:!1,nodesDoneLoad:!0})}):owe(v,g,y,()=>{r({nodesDoneLoad:!0})}),c=(g,y,v,m)=>Awe(m,y,v,g,()=>{r({nodesWillExit:!1})}),d=(g,y,v,m)=>a?uwe(m,v,g,()=>{r({nodesWillEnter:!1})}):cwe(m,y,v,g,()=>{r({nodesShouldEnter:!0})}),f=function(g,y){const v=g.props.animate;if(!g.type)return{};const m=g.props&&g.props.polar&&g.type.defaultPolarTransitions||g.type.defaultTransitions;if(m){const p=v[y]&&v[y].duration;return p!==void 0?p:m[y]&&m[y].duration}return{}};return function(y,v){const m=Xy(y)||[],p=_e({},t.animate,y.props.animate),x=y.props.polar&&y.type.defaultPolarTransitions||y.type.defaultTransitions;p.onExit=_e({},p.onExit,x&&x.onExit),p.onEnter=_e({},p.onEnter,x&&x.onEnter),p.onLoad=_e({},p.onLoad,x&&x.onLoad);const w=A[v]||A[0];if(l){if(n){const _=w&&w.exiting,b=u.exit!==void 0?u.exit:f(y,"onExit");return c(_,y,m,Object.assign({},p,_?{duration:b}:{delay:b}))}else if(s){const _=w&&w.entering,b=u.enter!==void 0?u.enter:f(y,"onEnter"),S=u.move!==void 0?u.move:y.props.animate&&y.props.animate.duration;return d(_,y,m,Object.assign({},p,{duration:a&&_?b:S}))}else if(!e&&p&&p.onExit)return iwe(p,m)}else{const b={duration:u.load!==void 0?u.load:f(y,"onLoad")};return h(y,m,Object.assign({},p,b))}return{animate:p,data:m}}}function Jy(){return Jy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jy.apply(this,arguments)}class Yy extends R.Component{constructor(e,r){super(e,r),this.state={nodesShouldLoad:!1,nodesDoneLoad:!1};const n=this.props.children,s=n.props.polar;this.continuous=!s&&n.type&&n.type.continuous===!0,this.timer=this.context.transitionTimer}componentDidMount(){this.setState({nodesShouldLoad:!0})}shouldComponentUpdate(e){return Ki(this.props,e)||(this.timer.bypassAnimation(),this.setState(this.getTransitionState(this.props,e),()=>this.timer.resumeAnimation())),!0}componentWillUnmount(){this.timer.stop()}getTransitionState(e,r){const{animate:n}=e;if(n){if(n.parentState)return{oldProps:n.parentState.nodesWillExit?e:null,nextProps:r}}else return{};const s=R.Children.toArray(e.children),a=R.Children.toArray(r.children),{nodesWillExit:o,nodesWillEnter:l,childrenTransitions:A,nodesShouldEnter:u}=J6(s,a);return{nodesWillExit:o,nodesWillEnter:l,childrenTransitions:A,nodesShouldEnter:u,oldProps:o?e:null,nextProps:r}}getDomainFromChildren(e,r){const n=A=>A.reduce((u,h)=>{if(h.type&&rt(h.type.getDomain)){const c=h.props&&h.type.getDomain(h.props,r);return c?u.concat(c):u}else if(h.props&&h.props.children)return u.concat(n(R.Children.toArray(h.props.children)));return u},[]),s=R.Children.toArray(e.children)[0],a=s.props||{},o=Array.isArray(a.domain)?a.domain:a.domain&&a.domain[r];if(!a.children&&o)return o;const l=n([s]);return l.length===0?[0,1]:[cs(l),As(l)]}pickProps(){return this.state?this.state.nodesWillExit?this.state.oldProps||this.props:this.props:this.props}pickDomainProps(e){var n;const r=(n=e.animate)==null?void 0:n.parentState;return r&&r.nodesWillExit?(this.continuous||r.continuous)&&(r.nextProps||this.state.nextProps)||e:this.continuous&&this.state.nodesWillExit&&this.state.nextProps||e}getClipWidth(e,r){const n=()=>{const a=rr(r.props,"x");return a?Math.abs(a[1]-a[0]):e.width},s=this.transitionProps?this.transitionProps.clipWidth:void 0;return s!==void 0?s:n()}render(){var c;const e=this.pickProps(),r=(c=this.props.animate)!=null&&c.getTransitions?this.props.animate.getTransitions:Y6(e,this.state,d=>this.setState(d)),n=R.Children.toArray(e.children)[0],s=r(n);this.transitionProps=s;const a={x:this.getDomainFromChildren(this.pickDomainProps(e),"x"),y:this.getDomainFromChildren(e,"y")},o=this.getClipWidth(e,n),l=_e({domain:a,clipWidth:o},s,n.props),u=(e.animationWhitelist||[]).concat(["clipWidth"]),h=u.length?Cf(l,u):l;return R.createElement(Oye,Jy({},l.animate,{data:h}),d=>{if(n.props.groupComponent){const f=this.continuous?R.cloneElement(n.props.groupComponent,{clipWidth:d.clipWidth||0}):n.props.groupComponent;return R.cloneElement(n,_e({animate:null,animating:!0,groupComponent:f},d,l))}return R.cloneElement(n,_e({animate:null,animating:!0},d,l))})}}Z(Yy,"displayName","VictoryTransition"),Z(Yy,"contextType",t1);var dwe=Hw,hwe=ZN,fwe=f6,gwe=h6,mwe=Object.getOwnPropertySymbols,pwe=mwe?function(t){for(var e=[];t;)dwe(e,fwe(t)),t=hwe(t);return e}:gwe,ywe=pwe,vwe=d6,xwe=ywe,wwe=O6;function bwe(t){return vwe(t,wwe,xwe)}var _we=bwe,Cwe=Dw,Bwe=ig,Swe=H6,jwe=_we;function kwe(t,e){if(t==null)return{};var r=Cwe(jwe(t),function(n){return[n]});return e=Bwe(e),Swe(t,r,function(n,s){return e(n,s[0])})}var Z6=kwe;const jf=St(Z6);var Ewe="Expected a function";function Nwe(t){if(typeof t!="function")throw new TypeError(Ewe);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var Fwe=Nwe,Twe=ig,Uwe=Fwe,Qwe=Z6;function Iwe(t,e){return Qwe(t,Uwe(Twe(e)))}var Pwe=Iwe;const e3=St(Pwe);function Dwe(t,e,r,n){for(var s=t.length,a=r+(n?1:-1);n?a--:++a<s;)if(e(t[a],a,t))return a;return-1}var Mwe=Dwe;function Rwe(t){return t!==t}var $we=Rwe;function Owe(t,e,r){for(var n=r-1,s=t.length;++n<s;)if(t[n]===e)return n;return-1}var Lwe=Owe,Hwe=Mwe,Kwe=$we,zwe=Lwe;function Gwe(t,e,r){return e===e?zwe(t,e,r):Hwe(t,Kwe,r)}var Wwe=Gwe,Vwe=Wwe;function qwe(t,e){var r=t==null?0:t.length;return!!r&&Vwe(t,e,0)>-1}var Xwe=qwe;function Jwe(t,e,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(e,t[n]))return!0;return!1}var Ywe=Jwe;function Zwe(){}var e1e=Zwe,Dm=v6,t1e=e1e,r1e=Lw,n1e=1/0,s1e=Dm&&1/r1e(new Dm([,-0]))[1]==n1e?function(t){return new Dm(t)}:t1e,a1e=s1e,i1e=A6,o1e=Xwe,l1e=Ywe,A1e=c6,c1e=a1e,u1e=Lw,d1e=200;function h1e(t,e,r){var n=-1,s=o1e,a=t.length,o=!0,l=[],A=l;if(r)o=!1,s=l1e;else if(a>=d1e){var u=e?null:c1e(t);if(u)return u1e(u);o=!1,s=A1e,A=new i1e}else A=e?[]:l;e:for(;++n<a;){var h=t[n],c=e?e(h):h;if(h=r||h!==0?h:0,o&&c===c){for(var d=A.length;d--;)if(A[d]===c)continue e;e&&A.push(c),l.push(h)}else s(A,c,r)||(A!==l&&A.push(c),l.push(h))}return l}var t3=h1e,f1e=t3;function g1e(t){return t&&t.length?f1e(t):[]}var m1e=g1e;const so=St(m1e),u1=/^onGlobal(.*)$/;function r3(t,e,r,n){const s=h=>{const d=(()=>{const f=h.reduce((g,y)=>y.target!==void 0?(Array.isArray(y.target)?y.target.includes(e):`${y.target}`==`${e}`)?g.concat(y):g:g.concat(y),[]);return r!==void 0&&e!=="parent"?f.filter(g=>{const y=g.eventKey,v=m=>m?`${m}`==`${r}`:!0;return Array.isArray(y)?y.some(m=>v(m)):v(y)}):f})();return Array.isArray(d)&&d.reduce((f,g)=>g?Object.assign(f,g.eventHandlers):f,{})},o=(()=>Array.isArray(this.componentEvents)?Array.isArray(t.events)?this.componentEvents.concat(...t.events):this.componentEvents:t.events)(),l=o&&rt(n)?n(s(o),e):void 0;if(!t.sharedEvents)return l;const A=t.sharedEvents.getEvents,u=t.sharedEvents.events&&A(s(t.sharedEvents.events),e);return Object.assign({},u,l)}function n3(t,e,r,n){if(It(t))return{};const s=n||this.baseProps,a=(h,c)=>{const{childName:d,target:f,key:g}=h,y=c==="props"?s:this.state||{},v=d==null||!y[d]?y:y[d];return g==="parent"?v.parent:v[g]&&v[g][f]},o=(h,c)=>{const d=e==="parent"?h.childName:h.childName||r,f=h.target||e,g=p=>f==="parent"?"parent":h.eventKey==="all"?s[p]?Object.keys(s[p]).filter(x=>x!=="parent"):Object.keys(s).filter(x=>x!=="parent"):h.eventKey===void 0&&c==="parent"?s[p]?Object.keys(s[p]):Object.keys(s):h.eventKey!==void 0?h.eventKey:c,y=(p,x)=>{const w=this.state||{};if(!rt(h.mutation))return w;const _=a({childName:x,key:p,target:f},"props"),b=a({childName:x,key:p,target:f},"state"),S=h.mutation(Object.assign({},_,b),s),E=w[x]||{},C=P=>(P[p]&&P[p][f]&&delete P[p][f],P[p]&&!Object.keys(P[p]).length&&delete P[p],P),N=P=>f==="parent"?Object.assign(P,{[p]:Object.assign(P[p]||{},S)}):Object.assign(P,{[p]:Object.assign(P[p]||{},{[f]:S})}),Q=P=>S?N(P):C(P);return x!=null?Object.assign(w,{[x]:Q(E)}):Q(w)},v=p=>{const x=g(p);return Array.isArray(x)?x.reduce((w,_)=>Object.assign(w,y(_,p)),{}):y(x,p)},m=d==="all"?Object.keys(s).filter(p=>p!=="parent"):d;return Array.isArray(m)?m.reduce((p,x)=>Object.assign(p,v(x)),{}):v(m)},l=(h,c)=>Array.isArray(h)?h.reduce((d,f)=>Object.assign({},d,o(f,c)),{}):o(h,c),A=h=>{const c=g=>rt(g.callback)&&g.callback,f=(Array.isArray(h)?h.map(g=>c(g)):[c(h)]).filter(g=>g!==!1);return f.length?()=>f.forEach(g=>g()):void 0},u=(h,c,d,f)=>{const g=t[f](h,c,d,this);if(!It(g)){const y=A(g);this.setState(l(g,d),y)}};return Object.keys(t).reduce((h,c)=>(h[c]=u,h),{})}function s3(t,e,r){return t?Object.keys(t).reduce((n,s)=>{const a=o=>t[s](o,r,e,s);return n[s]=a,n},{}):{}}function a3(t,e,r){const n=this.state||{};return r?n[r]&&n[r][t]&&n[r][t][e]:t==="parent"?n[t]&&n[t][e]||n[t]:n[t]&&n[t][e]}function p1e(t,e,r,n){return e===void 0&&(e={}),r===void 0&&(r={}),n.reduce((s,a)=>{const o=r[a],l=i3(t,e[a],r[a],a);return s[a]=l||o,jf(s,A=>!It(A))},{})}function i3(t,e,r,n){return e===void 0&&(e={}),r===void 0&&(r={}),Object.keys(e).reduce((a,o)=>{const l=r[o]||{},A=e[o]||{};if(o==="parent"){const h=wB(t,A,l,{eventKey:o,target:"parent"});a[o]=h!==void 0?Object.assign({},l,h):l}else{const u=so(Object.keys(A).concat(Object.keys(l)));a[o]=u.reduce((h,c)=>{const d={eventKey:o,target:c,childName:n},f=wB(t,A[c],l[c],d);return h[c]=f!==void 0?Object.assign({},l[c],f):l[c],jf(h,g=>!It(g))},{})}return jf(a,u=>!It(u))},{})}function wB(t,e,r,n){const s=(A,u)=>typeof A[u]=="string"?A[u]==="all"||A[u]===n[u]:Array.isArray(A[u])?A[u].map(c=>`${c}`).includes(n[u]):!1;let a=Array.isArray(t)?t:[t];n.childName&&(a=t.filter(A=>s(A,"childName")));const o=a.filter(A=>s(A,"target"));if(It(o))return;const l=o.filter(A=>s(A,"eventKey"));if(!It(l))return l.reduce((A,u)=>{const c=(u&&rt(u.mutation)?u.mutation:()=>{})(Object.assign({},e,r));return Object.assign({},A,c)},{})}function d1(t,e){const r=Array.isArray(e)&&e.reduce((n,s)=>{const a=t[s],o=a&&a.type&&a.type.defaultEvents,l=rt(o)?o(a.props):o;return Array.isArray(l)?n.concat(...l):n},[]);return r&&r.length?r:void 0}function kf(t){const e=t.match(u1);return e&&e[1]&&e[1].toLowerCase()}const o3=t=>jf(t,(e,r)=>u1.test(r)),l3=t=>e3(t,(e,r)=>u1.test(r)),A3=t=>Object.assign(t,{nativeEvent:t}),y1e=t=>!lu(t._x)&&!lu(t._y),v1e=[{name:"parent",index:"parent"},{name:"data"},{name:"labels"}];function Ru(t,e){e===void 0&&(e={});class r extends t{constructor(a){super(a);Z(this,"state",{});Z(this,"getEventState",a3.bind(this));Z(this,"getScopedEvents",n3.bind(this));Z(this,"getEvents",(a,o,l)=>r3.call(this,a,o,l,this.getScopedEvents));Z(this,"externalMutations",this.getExternalMutations(this.props));Z(this,"calculatedState",this.getStateChanges(this.props));Z(this,"globalEvents",{});Z(this,"prevGlobalEventKeys",[]);Z(this,"boundGlobalEvents",{});this.cacheValues(this.getCalculatedValues(a))}shouldComponentUpdate(a){const o=this.getExternalMutations(a),l=this.props.animating||this.props.animate,A=!Ki(o,this.externalMutations);if(l||A)return this.cacheValues(this.getCalculatedValues(a)),this.externalMutations=o,this.applyExternalMutations(a,o),!0;const u=this.getStateChanges(a);return Ki(this.calculatedState,u)?Ki(this.props,a)?!1:(this.cacheValues(this.getCalculatedValues(a)),!0):(this.cacheValues(this.getCalculatedValues(a)),!0)}componentDidMount(){const a=Object.keys(this.globalEvents);a.forEach(o=>this.addGlobalListener(o)),this.prevGlobalEventKeys=a}componentDidUpdate(a){const o=this.getStateChanges(a);this.calculatedState=o;const l=Object.keys(this.globalEvents);Sf(this.prevGlobalEventKeys,l).forEach(h=>this.removeGlobalListener(h)),Sf(l,this.prevGlobalEventKeys).forEach(h=>this.addGlobalListener(h)),this.prevGlobalEventKeys=l}componentWillUnmount(){this.prevGlobalEventKeys.forEach(a=>this.removeGlobalListener(a))}addGlobalListener(a){const o=l=>{const A=this.globalEvents[a];return A&&A(A3(l))};this.boundGlobalEvents[a]=o,window.addEventListener(kf(a),o)}removeGlobalListener(a){window.removeEventListener(kf(a),this.boundGlobalEvents[a])}getStateChanges(a){if(!this.hasEvents)return{};const o=(u,h)=>{const c=_e({},this.getEventState(u,h),this.getSharedEventState(u,h));return It(c)?void 0:c};return(e.components||v1e).map(u=>{if(!(!a.standalone&&u.name==="parent"))return u.index!==void 0?o(u.index,u.name):this.dataKeys.map(h=>o(h,u.name)).filter(Boolean)}).filter(Boolean)}applyExternalMutations(a,o){if(!It(o)){const l=a.externalEventMutations.reduce((u,h)=>rt(h.callback)?u.concat(h.callback):u,[]),A=l.length?()=>{l.forEach(u=>u())}:void 0;this.setState(o,A)}}getCalculatedValues(a){const{sharedEvents:o}=a,l=t.expectedComponents,A=d1(a,l),u=o&&rt(o.getEventState)?o.getEventState:()=>{},h=this.getBaseProps(a,u),c=Object.keys(h).filter(g=>g!=="parent"),d=a.events||a.sharedEvents||A,f=this.getAllEvents(a);return{componentEvents:A,getSharedEventState:u,baseProps:h,dataKeys:c,hasEvents:d,events:f}}getExternalMutations(a){const{sharedEvents:o,externalEventMutations:l}=a;return It(l)||o?void 0:i3(l,this.baseProps,this.state)}cacheValues(a){Object.keys(a).forEach(o=>{this[o]=a[o]})}getBaseProps(a,o){const A=(o||this.getSharedEventState.bind(this))("parent","parent"),u=this.getEventState("parent","parent"),h=_e({},u,A),c=h.parentControlledProps,d=c?Cf(h,c):{},f=_e({},d,a);return typeof t.getBaseProps=="function"?t.getBaseProps(f):{}}getAllEvents(a){return Array.isArray(this.componentEvents)?Array.isArray(a.events)?this.componentEvents.concat(...a.events):this.componentEvents:a.events}getComponentProps(a,o,l){const A=this.props.name||t.role,u=this.dataKeys&&this.dataKeys[l]||l,h=`${A}-${o}-${u}`,c=this.baseProps[u]&&this.baseProps[u][o]||this.baseProps[u];if(!c&&!this.hasEvents)return;const d=a&&typeof a=="object"&&"props"in a?a.props:void 0;if(this.hasEvents){const f=this.getEvents(this.props,o,u),g=_e({index:l,key:h},this.getEventState(u,o),this.getSharedEventState(u,o),d,c,{id:h}),y=_e({},s3(f,u,g),g.events);return Object.assign({},g,{events:y})}return _e({index:l,key:h},d,c,{id:h})}renderContainer(a,o){const A=a.type&&a.type.role==="container"?this.getComponentProps(a,"parent","parent"):{};return A.events&&(this.globalEvents=o3(A.events),A.events=l3(A.events)),R.cloneElement(a,A,o)}animateComponent(a,o){var u;const l=typeof a.animate=="object"&&((u=a.animate)==null?void 0:u.animationWhitelist)||o,A=this.constructor;return R.createElement(Yy,{animate:a.animate,animationWhitelist:l},R.createElement(A,a))}renderContinuousData(a){const{dataComponent:o,labelComponent:l,groupComponent:A}=a,h=this.dataKeys.filter(f=>f!=="all").reduce((f,g)=>{let y=f;const v=this.getComponentProps(l,"labels",g);return v&&v.text!==void 0&&v.text!==null&&(y=y.concat(R.cloneElement(l,v))),y},[]),c=this.getComponentProps(o,"data","all"),d=[R.cloneElement(o,c),...h];return this.renderContainer(A,d)}renderData(a,o){o===void 0&&(o=y1e);const{dataComponent:l,labelComponent:A,groupComponent:u}=a,h=this.dataKeys.reduce((f,g,y)=>{const v=this.getComponentProps(l,"data",y);return o(v.datum)&&f.push(R.cloneElement(l,v)),f},[]),c=this.dataKeys.map((f,g)=>{const y=this.getComponentProps(A,"labels",g);if(y.text!==void 0&&y.text!==null)return R.cloneElement(A,y)}).filter(Boolean),d=[...h,...c];return this.renderContainer(u,d)}}return r}function x1e(t){return e=>{t.forEach(r=>{rt(r)?r(e):r!=null&&(r.current=e)})}}var w1e=po,b1e=yo,_1e="[object Date]";function C1e(t){return b1e(t)&&w1e(t)==_1e}var B1e=C1e,S1e=B1e,j1e=Gw,bB=m6,_B=bB&&bB.isDate,k1e=_B?j1e(_B):S1e,E1e=k1e;const c3=St(E1e);var N1e=iA;function F1e(t,e){for(var r=-1,n=t.length,s=0,a=[];++r<n;){var o=t[r],l=e?e(o):o;if(!r||!N1e(l,A)){var A=l;a[s++]=o===0?0:o}}return a}var T1e=F1e,U1e=T1e;function Q1e(t){return t&&t.length?U1e(t):[]}var I1e=Q1e;const P1e=St(I1e);var D1e=Xw;function M1e(t,e){return D1e(t,e)}var R1e=M1e;const $1e=St(R1e);function O1e(t){return t===void 0}var L1e=O1e;const H1e=St(L1e);function Za(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function K1e(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function h1(t){let e,r,n;t.length!==2?(e=Za,r=(l,A)=>Za(t(l),A),n=(l,A)=>t(l)-A):(e=t===Za||t===K1e?t:z1e,r=t,n=t);function s(l,A,u=0,h=l.length){if(u<h){if(e(A,A)!==0)return h;do{const c=u+h>>>1;r(l[c],A)<0?u=c+1:h=c}while(u<h)}return u}function a(l,A,u=0,h=l.length){if(u<h){if(e(A,A)!==0)return h;do{const c=u+h>>>1;r(l[c],A)<=0?u=c+1:h=c}while(u<h)}return u}function o(l,A,u=0,h=l.length){const c=s(l,A,u,h-1);return c>u&&n(l[c-1],A)>-n(l[c],A)?c-1:c}return{left:s,center:o,right:a}}function z1e(){return 0}function u3(t){return t===null?NaN:+t}function*G1e(t,e){if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(n=+n)>=n&&(yield n)}}const W1e=h1(Za),V1e=W1e.right;h1(u3).center;const $u=V1e;class CB extends Map{constructor(e,r=J1e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,s]of e)this.set(n,s)}get(e){return super.get(BB(this,e))}has(e){return super.has(BB(this,e))}set(e,r){return super.set(q1e(this,e),r)}delete(e){return super.delete(X1e(this,e))}}function BB({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function q1e({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function X1e({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function J1e(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Y1e(t=Za){if(t===Za)return d3;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function d3(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Z1e=Math.sqrt(50),ebe=Math.sqrt(10),tbe=Math.sqrt(2);function Ef(t,e,r){const n=(e-t)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),o=a>=Z1e?10:a>=ebe?5:a>=tbe?2:1;let l,A,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(t*u),A=Math.round(e*u),l/u<t&&++l,A/u>e&&--A,u=-u):(u=Math.pow(10,s)*o,l=Math.round(t/u),A=Math.round(e/u),l*u<t&&++l,A*u>e&&--A),A<l&&.5<=r&&r<2?Ef(t,e,r*2):[l,A,u]}function Zy(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[s,a,o]=n?Ef(e,t,r):Ef(t,e,r);if(!(a>=s))return[];const l=a-s+1,A=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)A[u]=(a-u)/-o;else for(let u=0;u<l;++u)A[u]=(a-u)*o;else if(o<0)for(let u=0;u<l;++u)A[u]=(s+u)/-o;else for(let u=0;u<l;++u)A[u]=(s+u)*o;return A}function ev(t,e,r){return e=+e,t=+t,r=+r,Ef(t,e,r)[2]}function tv(t,e,r){e=+e,t=+t,r=+r;const n=e<t,s=n?ev(e,t,r):ev(t,e,r);return(n?-1:1)*(s<0?1/-s:s)}function SB(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let s of t)(s=e(s,++n,t))!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}return r}function jB(t,e){let r;if(e===void 0)for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let s of t)(s=e(s,++n,t))!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}return r}function h3(t,e,r=0,n=1/0,s){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(s=s===void 0?d3:Y1e(s);n>r;){if(n-r>600){const A=n-r+1,u=e-r+1,h=Math.log(A),c=.5*Math.exp(2*h/3),d=.5*Math.sqrt(h*c*(A-c)/A)*(u-A/2<0?-1:1),f=Math.max(r,Math.floor(e-u*c/A+d)),g=Math.min(n,Math.floor(e+(A-u)*c/A+d));h3(t,e,f,g,s)}const a=t[e];let o=r,l=n;for(TA(t,r,e),s(t[n],a)>0&&TA(t,r,n);o<l;){for(TA(t,o,l),++o,--l;s(t[o],a)<0;)++o;for(;s(t[l],a)>0;)--l}s(t[r],a)===0?TA(t,r,l):(++l,TA(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function TA(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function rbe(t,e,r){if(t=Float64Array.from(G1e(t,r)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return jB(t);if(e>=1)return SB(t);var n,s=(n-1)*e,a=Math.floor(s),o=SB(h3(t,a).subarray(0,a+1)),l=jB(t.subarray(a+1));return o+(l-o)*(s-a)}}function nbe(t,e,r=u3){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,s=(n-1)*e,a=Math.floor(s),o=+r(t[a],a,t),l=+r(t[a+1],a+1,t);return o+(l-o)*(s-a)}}function sbe(t,e,r){t=+t,e=+e,r=(s=arguments.length)<2?(e=t,t=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((e-t)/r))|0,a=new Array(s);++n<s;)a[n]=t+n*r;return a}function Hn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _a(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const rv=Symbol("implicit");function f1(){var t=new CB,e=[],r=[],n=rv;function s(a){let o=t.get(a);if(o===void 0){if(n!==rv)return n;t.set(a,o=e.push(a)-1)}return r[o%r.length]}return s.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new CB;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return f1(e,r).unknown(n)},Hn.apply(s,arguments),s}function g1(){var t=f1().unknown(void 0),e=t.domain,r=t.range,n=0,s=1,a,o,l=!1,A=0,u=0,h=.5;delete t.unknown;function c(){var d=e().length,f=s<n,g=f?s:n,y=f?n:s;a=(y-g)/Math.max(1,d-A+u*2),l&&(a=Math.floor(a)),g+=(y-g-a*(d-A))*h,o=a*(1-A),l&&(g=Math.round(g),o=Math.round(o));var v=sbe(d).map(function(m){return g+a*m});return r(f?v.reverse():v)}return t.domain=function(d){return arguments.length?(e(d),c()):e()},t.range=function(d){return arguments.length?([n,s]=d,n=+n,s=+s,c()):[n,s]},t.rangeRound=function(d){return[n,s]=d,n=+n,s=+s,l=!0,c()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(d){return arguments.length?(l=!!d,c()):l},t.padding=function(d){return arguments.length?(A=Math.min(1,u=+d),c()):A},t.paddingInner=function(d){return arguments.length?(A=Math.min(1,d),c()):A},t.paddingOuter=function(d){return arguments.length?(u=+d,c()):u},t.align=function(d){return arguments.length?(h=Math.max(0,Math.min(1,d)),c()):h},t.copy=function(){return g1(e(),[n,s]).round(l).paddingInner(A).paddingOuter(u).align(h)},Hn.apply(c(),arguments)}function f3(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return f3(e())},t}function abe(){return f3(g1.apply(null,arguments).paddingInner(1))}function ibe(t){return function(){return t}}function Nf(t){return+t}var kB=[0,1];function Dr(t){return t}function nv(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:ibe(isNaN(e)?NaN:.5)}function obe(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function lbe(t,e,r){var n=t[0],s=t[1],a=e[0],o=e[1];return s<n?(n=nv(s,n),a=r(o,a)):(n=nv(n,s),a=r(a,o)),function(l){return a(n(l))}}function Abe(t,e,r){var n=Math.min(t.length,e.length)-1,s=new Array(n),a=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)s[o]=nv(t[o],t[o+1]),a[o]=r(e[o],e[o+1]);return function(l){var A=$u(t,l,1,n)-1;return a[A](s[A](l))}}function Ou(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lg(){var t=kB,e=kB,r=Fs,n,s,a,o=Dr,l,A,u;function h(){var d=Math.min(t.length,e.length);return o!==Dr&&(o=obe(t[0],t[d-1])),l=d>2?Abe:lbe,A=u=null,c}function c(d){return d==null||isNaN(d=+d)?a:(A||(A=l(t.map(n),e,r)))(n(o(d)))}return c.invert=function(d){return o(s((u||(u=l(e,t.map(n),vf)))(d)))},c.domain=function(d){return arguments.length?(t=Array.from(d,Nf),h()):t.slice()},c.range=function(d){return arguments.length?(e=Array.from(d),h()):e.slice()},c.rangeRound=function(d){return e=Array.from(d),r=e1,h()},c.clamp=function(d){return arguments.length?(o=d?!0:Dr,h()):o!==Dr},c.interpolate=function(d){return arguments.length?(r=d,h()):r},c.unknown=function(d){return arguments.length?(a=d,c):a},function(d,f){return n=d,s=f,h()}}function m1(){return lg()(Dr,Dr)}function cbe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ff(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function zl(t){return t=Ff(Math.abs(t)),t?t[1]:NaN}function ube(t,e){return function(r,n){for(var s=r.length,a=[],o=0,l=t[0],A=0;s>0&&l>0&&(A+l+1>n&&(l=Math.max(1,n-A)),a.push(r.substring(s-=l,s+l)),!((A+=l+1)>n));)l=t[o=(o+1)%t.length];return a.reverse().join(e)}}function dbe(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var hbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Au(t){if(!(e=hbe.exec(t)))throw new Error("invalid format: "+t);var e;return new p1({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Au.prototype=p1.prototype;function p1(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}p1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fbe(t){e:for(var e=t.length,r=1,n=-1,s;r<e;++r)switch(t[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(s+1):t}var g3;function gbe(t,e){var r=Ff(t,e);if(!r)return t+"";var n=r[0],s=r[1],a=s-(g3=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Ff(t,Math.max(0,e+a-1))[0]}function EB(t,e){var r=Ff(t,e);if(!r)return t+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const NB={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:cbe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>EB(t*100,e),r:EB,s:gbe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function FB(t){return t}var TB=Array.prototype.map,UB=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mbe(t){var e=t.grouping===void 0||t.thousands===void 0?FB:ube(TB.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",s=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?FB:dbe(TB.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",A=t.nan===void 0?"NaN":t.nan+"";function u(c){c=Au(c);var d=c.fill,f=c.align,g=c.sign,y=c.symbol,v=c.zero,m=c.width,p=c.comma,x=c.precision,w=c.trim,_=c.type;_==="n"?(p=!0,_="g"):NB[_]||(x===void 0&&(x=12),w=!0,_="g"),(v||d==="0"&&f==="=")&&(v=!0,d="0",f="=");var b=y==="$"?r:y==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",S=y==="$"?n:/[%p]/.test(_)?o:"",E=NB[_],C=/[defgprs%]/.test(_);x=x===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function N(Q){var P=b,F=S,$,L,D;if(_==="c")F=E(Q)+F,Q="";else{Q=+Q;var z=Q<0||1/Q<0;if(Q=isNaN(Q)?A:E(Math.abs(Q),x),w&&(Q=fbe(Q)),z&&+Q==0&&g!=="+"&&(z=!1),P=(z?g==="("?g:l:g==="-"||g==="("?"":g)+P,F=(_==="s"?UB[8+g3/3]:"")+F+(z&&g==="("?")":""),C){for($=-1,L=Q.length;++$<L;)if(D=Q.charCodeAt($),48>D||D>57){F=(D===46?s+Q.slice($+1):Q.slice($))+F,Q=Q.slice(0,$);break}}}p&&!v&&(Q=e(Q,1/0));var k=P.length+Q.length+F.length,M=k<m?new Array(m-k+1).join(d):"";switch(p&&v&&(Q=e(M+Q,M.length?m-F.length:1/0),M=""),f){case"<":Q=P+Q+F+M;break;case"=":Q=P+M+Q+F;break;case"^":Q=M.slice(0,k=M.length>>1)+P+Q+F+M.slice(k);break;default:Q=M+P+Q+F;break}return a(Q)}return N.toString=function(){return c+""},N}function h(c,d){var f=u((c=Au(c),c.type="f",c)),g=Math.max(-8,Math.min(8,Math.floor(zl(d)/3)))*3,y=Math.pow(10,-g),v=UB[8+g/3];return function(m){return f(y*m)+v}}return{format:u,formatPrefix:h}}var kd,y1,m3;pbe({thousands:",",grouping:[3],currency:["$",""]});function pbe(t){return kd=mbe(t),y1=kd.format,m3=kd.formatPrefix,kd}function ybe(t){return Math.max(0,-zl(Math.abs(t)))}function vbe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zl(e)/3)))*3-zl(Math.abs(t)))}function xbe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zl(e)-zl(t))+1}function p3(t,e,r,n){var s=tv(t,e,r),a;switch(n=Au(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=vbe(s,o))&&(n.precision=a),m3(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=xbe(s,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=ybe(s))&&(n.precision=a-(n.type==="%")*2);break}}return y1(n)}function gi(t){var e=t.domain;return t.ticks=function(r){var n=e();return Zy(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var s=e();return p3(s[0],s[s.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),s=0,a=n.length-1,o=n[s],l=n[a],A,u,h=10;for(l<o&&(u=o,o=l,l=u,u=s,s=a,a=u);h-- >0;){if(u=ev(o,l,r),u===A)return n[s]=o,n[a]=l,e(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;A=u}return t},t}function v1(){var t=m1();return t.copy=function(){return Ou(t,v1())},Hn.apply(t,arguments),gi(t)}function y3(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Nf),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return y3(t).unknown(e)},t=arguments.length?Array.from(t,Nf):[0,1],gi(r)}function v3(t,e){t=t.slice();var r=0,n=t.length-1,s=t[r],a=t[n],o;return a<s&&(o=r,r=n,n=o,o=s,s=a,a=o),t[r]=e.floor(s),t[n]=e.ceil(a),t}function QB(t){return Math.log(t)}function IB(t){return Math.exp(t)}function wbe(t){return-Math.log(-t)}function bbe(t){return-Math.exp(-t)}function _be(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Cbe(t){return t===10?_be:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Bbe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function PB(t){return(e,r)=>-t(-e,r)}function x1(t){const e=t(QB,IB),r=e.domain;let n=10,s,a;function o(){return s=Bbe(n),a=Cbe(n),r()[0]<0?(s=PB(s),a=PB(a),t(wbe,bbe)):t(QB,IB),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const A=r();let u=A[0],h=A[A.length-1];const c=h<u;c&&([u,h]=[h,u]);let d=s(u),f=s(h),g,y;const v=l==null?10:+l;let m=[];if(!(n%1)&&f-d<v){if(d=Math.floor(d),f=Math.ceil(f),u>0){for(;d<=f;++d)for(g=1;g<n;++g)if(y=d<0?g/a(-d):g*a(d),!(y<u)){if(y>h)break;m.push(y)}}else for(;d<=f;++d)for(g=n-1;g>=1;--g)if(y=d>0?g/a(-d):g*a(d),!(y<u)){if(y>h)break;m.push(y)}m.length*2<v&&(m=Zy(u,h,v))}else m=Zy(d,f,Math.min(f-d,v)).map(a);return c?m.reverse():m},e.tickFormat=(l,A)=>{if(l==null&&(l=10),A==null&&(A=n===10?"s":","),typeof A!="function"&&(!(n%1)&&(A=Au(A)).precision==null&&(A.trim=!0),A=y1(A)),l===1/0)return A;const u=Math.max(1,n*l/e.ticks().length);return h=>{let c=h/a(Math.round(s(h)));return c*n<n-.5&&(c*=n),c<=u?A(h):""}},e.nice=()=>r(v3(r(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),e}function x3(){const t=x1(lg()).domain([1,10]);return t.copy=()=>Ou(t,x3()).base(t.base()),Hn.apply(t,arguments),t}function DB(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function MB(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function w1(t){var e=1,r=t(DB(e),MB(e));return r.constant=function(n){return arguments.length?t(DB(e=+n),MB(e)):e},gi(r)}function w3(){var t=w1(lg());return t.copy=function(){return Ou(t,w3()).constant(t.constant())},Hn.apply(t,arguments)}function RB(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Sbe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function jbe(t){return t<0?-t*t:t*t}function b1(t){var e=t(Dr,Dr),r=1;function n(){return r===1?t(Dr,Dr):r===.5?t(Sbe,jbe):t(RB(r),RB(1/r))}return e.exponent=function(s){return arguments.length?(r=+s,n()):r},gi(e)}function _1(){var t=b1(lg());return t.copy=function(){return Ou(t,_1()).exponent(t.exponent())},Hn.apply(t,arguments),t}function kbe(){return _1.apply(null,arguments).exponent(.5)}function $B(t){return Math.sign(t)*t*t}function Ebe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function b3(){var t=m1(),e=[0,1],r=!1,n;function s(a){var o=Ebe(t(a));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(a){return t.invert($B(a))},s.domain=function(a){return arguments.length?(t.domain(a),s):t.domain()},s.range=function(a){return arguments.length?(t.range((e=Array.from(a,Nf)).map($B)),s):e.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(t.clamp(a),s):t.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return b3(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Hn.apply(s,arguments),gi(s)}function _3(){var t=[],e=[],r=[],n;function s(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=nbe(t,o/l);return a}function a(o){return o==null||isNaN(o=+o)?n:e[$u(r,o)]}return a.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Za),s()},a.range=function(o){return arguments.length?(e=Array.from(o),s()):e.slice()},a.unknown=function(o){return arguments.length?(n=o,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return _3().domain(t).range(e).unknown(n)},Hn.apply(a,arguments)}function C3(){var t=0,e=1,r=1,n=[.5],s=[0,1],a;function o(A){return A!=null&&A<=A?s[$u(n,A,0,r)]:a}function l(){var A=-1;for(n=new Array(r);++A<r;)n[A]=((A+1)*e-(A-r)*t)/(r+1);return o}return o.domain=function(A){return arguments.length?([t,e]=A,t=+t,e=+e,l()):[t,e]},o.range=function(A){return arguments.length?(r=(s=Array.from(A)).length-1,l()):s.slice()},o.invertExtent=function(A){var u=s.indexOf(A);return u<0?[NaN,NaN]:u<1?[t,n[0]]:u>=r?[n[r-1],e]:[n[u-1],n[u]]},o.unknown=function(A){return arguments.length&&(a=A),o},o.thresholds=function(){return n.slice()},o.copy=function(){return C3().domain([t,e]).range(s).unknown(a)},Hn.apply(gi(o),arguments)}function B3(){var t=[.5],e=[0,1],r,n=1;function s(a){return a!=null&&a<=a?e[$u(t,a,0,n)]:r}return s.domain=function(a){return arguments.length?(t=Array.from(a),n=Math.min(t.length,e.length-1),s):t.slice()},s.range=function(a){return arguments.length?(e=Array.from(a),n=Math.min(t.length,e.length-1),s):e.slice()},s.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return B3().domain(t).range(e).unknown(r)},Hn.apply(s,arguments)}const Mm=new Date,Rm=new Date;function qt(t,e,r,n){function s(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(t(a=new Date(+a)),a),s.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),s.round=a=>{const o=s(a),l=s.ceil(a);return a-o<l-a?o:l},s.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),s.range=(a,o,l)=>{const A=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return A;let u;do A.push(u=new Date(+a)),e(a,l),t(a);while(u<a&&a<o);return A},s.filter=a=>qt(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!a(o););else for(;--l>=0;)for(;e(o,1),!a(o););}),r&&(s.count=(a,o)=>(Mm.setTime(+a),Rm.setTime(+o),t(Mm),t(Rm),Math.floor(r(Mm,Rm))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?o=>n(o)%a===0:o=>s.count(0,o)%a===0):s)),s}const Tf=qt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Tf.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?qt(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Tf);Tf.range;const ta=1e3,Fn=ta*60,ra=Fn*60,da=ra*24,C1=da*7,OB=da*30,$m=da*365,Ri=qt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ta)},(t,e)=>(e-t)/ta,t=>t.getUTCSeconds());Ri.range;const B1=qt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ta)},(t,e)=>{t.setTime(+t+e*Fn)},(t,e)=>(e-t)/Fn,t=>t.getMinutes());B1.range;const S1=qt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Fn)},(t,e)=>(e-t)/Fn,t=>t.getUTCMinutes());S1.range;const j1=qt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ta-t.getMinutes()*Fn)},(t,e)=>{t.setTime(+t+e*ra)},(t,e)=>(e-t)/ra,t=>t.getHours());j1.range;const k1=qt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ra)},(t,e)=>(e-t)/ra,t=>t.getUTCHours());k1.range;const Lu=qt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fn)/da,t=>t.getDate()-1);Lu.range;const Ag=qt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/da,t=>t.getUTCDate()-1);Ag.range;const S3=qt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/da,t=>Math.floor(t/da));S3.range;function wo(t){return qt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Fn)/C1)}const cg=wo(0),Uf=wo(1),Nbe=wo(2),Fbe=wo(3),Gl=wo(4),Tbe=wo(5),Ube=wo(6);cg.range;Uf.range;Nbe.range;Fbe.range;Gl.range;Tbe.range;Ube.range;function bo(t){return qt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/C1)}const ug=bo(0),Qf=bo(1),Qbe=bo(2),Ibe=bo(3),Wl=bo(4),Pbe=bo(5),Dbe=bo(6);ug.range;Qf.range;Qbe.range;Ibe.range;Wl.range;Pbe.range;Dbe.range;const E1=qt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());E1.range;const N1=qt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());N1.range;const ha=qt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ha.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});ha.range;const fa=qt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());fa.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:qt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});fa.range;function j3(t,e,r,n,s,a){const o=[[Ri,1,ta],[Ri,5,5*ta],[Ri,15,15*ta],[Ri,30,30*ta],[a,1,Fn],[a,5,5*Fn],[a,15,15*Fn],[a,30,30*Fn],[s,1,ra],[s,3,3*ra],[s,6,6*ra],[s,12,12*ra],[n,1,da],[n,2,2*da],[r,1,C1],[e,1,OB],[e,3,3*OB],[t,1,$m]];function l(u,h,c){const d=h<u;d&&([u,h]=[h,u]);const f=c&&typeof c.range=="function"?c:A(u,h,c),g=f?f.range(u,+h+1):[];return d?g.reverse():g}function A(u,h,c){const d=Math.abs(h-u)/c,f=h1(([,,v])=>v).right(o,d);if(f===o.length)return t.every(tv(u/$m,h/$m,c));if(f===0)return Tf.every(Math.max(tv(u,h,c),1));const[g,y]=o[d/o[f-1][2]<o[f][2]/d?f-1:f];return g.every(y)}return[l,A]}const[Mbe,Rbe]=j3(fa,N1,ug,S3,k1,S1),[$be,Obe]=j3(ha,E1,cg,Lu,j1,B1);function Om(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Lm(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function UA(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Lbe(t){var e=t.dateTime,r=t.date,n=t.time,s=t.periods,a=t.days,o=t.shortDays,l=t.months,A=t.shortMonths,u=QA(s),h=IA(s),c=QA(a),d=IA(a),f=QA(o),g=IA(o),y=QA(l),v=IA(l),m=QA(A),p=IA(A),x={a:z,A:k,b:M,B:j,c:null,d:WB,e:WB,f:u_e,g:w_e,G:__e,H:l_e,I:A_e,j:c_e,L:k3,m:d_e,M:h_e,p:I,q:G,Q:XB,s:JB,S:f_e,u:g_e,U:m_e,V:p_e,w:y_e,W:v_e,x:null,X:null,y:x_e,Y:b_e,Z:C_e,"%":qB},w={a:X,A:te,b:Ae,B:ie,c:null,d:VB,e:VB,f:k_e,g:M_e,G:$_e,H:B_e,I:S_e,j:j_e,L:N3,m:E_e,M:N_e,p:V,q:Y,Q:XB,s:JB,S:F_e,u:T_e,U:U_e,V:Q_e,w:I_e,W:P_e,x:null,X:null,y:D_e,Y:R_e,Z:O_e,"%":qB},_={a:N,A:Q,b:P,B:F,c:$,d:zB,e:zB,f:s_e,g:KB,G:HB,H:GB,I:GB,j:e_e,L:n_e,m:Zbe,M:t_e,p:C,q:Ybe,Q:i_e,s:o_e,S:r_e,u:Wbe,U:Vbe,V:qbe,w:Gbe,W:Xbe,x:L,X:D,y:KB,Y:HB,Z:Jbe,"%":a_e};x.x=b(r,x),x.X=b(n,x),x.c=b(e,x),w.x=b(r,w),w.X=b(n,w),w.c=b(e,w);function b(U,H){return function(K){var O=[],oe=-1,me=0,se=U.length,re,Le,ve;for(K instanceof Date||(K=new Date(+K));++oe<se;)U.charCodeAt(oe)===37&&(O.push(U.slice(me,oe)),(Le=LB[re=U.charAt(++oe)])!=null?re=U.charAt(++oe):Le=re==="e"?" ":"0",(ve=H[re])&&(re=ve(K,Le)),O.push(re),me=oe+1);return O.push(U.slice(me,oe)),O.join("")}}function S(U,H){return function(K){var O=UA(1900,void 0,1),oe=E(O,U,K+="",0),me,se;if(oe!=K.length)return null;if("Q"in O)return new Date(O.Q);if("s"in O)return new Date(O.s*1e3+("L"in O?O.L:0));if(H&&!("Z"in O)&&(O.Z=0),"p"in O&&(O.H=O.H%12+O.p*12),O.m===void 0&&(O.m="q"in O?O.q:0),"V"in O){if(O.V<1||O.V>53)return null;"w"in O||(O.w=1),"Z"in O?(me=Lm(UA(O.y,0,1)),se=me.getUTCDay(),me=se>4||se===0?Qf.ceil(me):Qf(me),me=Ag.offset(me,(O.V-1)*7),O.y=me.getUTCFullYear(),O.m=me.getUTCMonth(),O.d=me.getUTCDate()+(O.w+6)%7):(me=Om(UA(O.y,0,1)),se=me.getDay(),me=se>4||se===0?Uf.ceil(me):Uf(me),me=Lu.offset(me,(O.V-1)*7),O.y=me.getFullYear(),O.m=me.getMonth(),O.d=me.getDate()+(O.w+6)%7)}else("W"in O||"U"in O)&&("w"in O||(O.w="u"in O?O.u%7:"W"in O?1:0),se="Z"in O?Lm(UA(O.y,0,1)).getUTCDay():Om(UA(O.y,0,1)).getDay(),O.m=0,O.d="W"in O?(O.w+6)%7+O.W*7-(se+5)%7:O.w+O.U*7-(se+6)%7);return"Z"in O?(O.H+=O.Z/100|0,O.M+=O.Z%100,Lm(O)):Om(O)}}function E(U,H,K,O){for(var oe=0,me=H.length,se=K.length,re,Le;oe<me;){if(O>=se)return-1;if(re=H.charCodeAt(oe++),re===37){if(re=H.charAt(oe++),Le=_[re in LB?H.charAt(oe++):re],!Le||(O=Le(U,K,O))<0)return-1}else if(re!=K.charCodeAt(O++))return-1}return O}function C(U,H,K){var O=u.exec(H.slice(K));return O?(U.p=h.get(O[0].toLowerCase()),K+O[0].length):-1}function N(U,H,K){var O=f.exec(H.slice(K));return O?(U.w=g.get(O[0].toLowerCase()),K+O[0].length):-1}function Q(U,H,K){var O=c.exec(H.slice(K));return O?(U.w=d.get(O[0].toLowerCase()),K+O[0].length):-1}function P(U,H,K){var O=m.exec(H.slice(K));return O?(U.m=p.get(O[0].toLowerCase()),K+O[0].length):-1}function F(U,H,K){var O=y.exec(H.slice(K));return O?(U.m=v.get(O[0].toLowerCase()),K+O[0].length):-1}function $(U,H,K){return E(U,e,H,K)}function L(U,H,K){return E(U,r,H,K)}function D(U,H,K){return E(U,n,H,K)}function z(U){return o[U.getDay()]}function k(U){return a[U.getDay()]}function M(U){return A[U.getMonth()]}function j(U){return l[U.getMonth()]}function I(U){return s[+(U.getHours()>=12)]}function G(U){return 1+~~(U.getMonth()/3)}function X(U){return o[U.getUTCDay()]}function te(U){return a[U.getUTCDay()]}function Ae(U){return A[U.getUTCMonth()]}function ie(U){return l[U.getUTCMonth()]}function V(U){return s[+(U.getUTCHours()>=12)]}function Y(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var H=b(U+="",x);return H.toString=function(){return U},H},parse:function(U){var H=S(U+="",!1);return H.toString=function(){return U},H},utcFormat:function(U){var H=b(U+="",w);return H.toString=function(){return U},H},utcParse:function(U){var H=S(U+="",!0);return H.toString=function(){return U},H}}}var LB={"-":"",_:" ",0:"0"},sr=/^\s*\d+/,Hbe=/^%/,Kbe=/[\\^$*+?|[\]().{}]/g;function qe(t,e,r){var n=t<0?"-":"",s=(n?-t:t)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(e)+s:s)}function zbe(t){return t.replace(Kbe,"\\$&")}function QA(t){return new RegExp("^(?:"+t.map(zbe).join("|")+")","i")}function IA(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Gbe(t,e,r){var n=sr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Wbe(t,e,r){var n=sr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Vbe(t,e,r){var n=sr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function qbe(t,e,r){var n=sr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Xbe(t,e,r){var n=sr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function HB(t,e,r){var n=sr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function KB(t,e,r){var n=sr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Jbe(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Ybe(t,e,r){var n=sr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Zbe(t,e,r){var n=sr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function zB(t,e,r){var n=sr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function e_e(t,e,r){var n=sr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function GB(t,e,r){var n=sr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function t_e(t,e,r){var n=sr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function r_e(t,e,r){var n=sr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function n_e(t,e,r){var n=sr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function s_e(t,e,r){var n=sr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function a_e(t,e,r){var n=Hbe.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function i_e(t,e,r){var n=sr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function o_e(t,e,r){var n=sr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function WB(t,e){return qe(t.getDate(),e,2)}function l_e(t,e){return qe(t.getHours(),e,2)}function A_e(t,e){return qe(t.getHours()%12||12,e,2)}function c_e(t,e){return qe(1+Lu.count(ha(t),t),e,3)}function k3(t,e){return qe(t.getMilliseconds(),e,3)}function u_e(t,e){return k3(t,e)+"000"}function d_e(t,e){return qe(t.getMonth()+1,e,2)}function h_e(t,e){return qe(t.getMinutes(),e,2)}function f_e(t,e){return qe(t.getSeconds(),e,2)}function g_e(t){var e=t.getDay();return e===0?7:e}function m_e(t,e){return qe(cg.count(ha(t)-1,t),e,2)}function E3(t){var e=t.getDay();return e>=4||e===0?Gl(t):Gl.ceil(t)}function p_e(t,e){return t=E3(t),qe(Gl.count(ha(t),t)+(ha(t).getDay()===4),e,2)}function y_e(t){return t.getDay()}function v_e(t,e){return qe(Uf.count(ha(t)-1,t),e,2)}function x_e(t,e){return qe(t.getFullYear()%100,e,2)}function w_e(t,e){return t=E3(t),qe(t.getFullYear()%100,e,2)}function b_e(t,e){return qe(t.getFullYear()%1e4,e,4)}function __e(t,e){var r=t.getDay();return t=r>=4||r===0?Gl(t):Gl.ceil(t),qe(t.getFullYear()%1e4,e,4)}function C_e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+qe(e/60|0,"0",2)+qe(e%60,"0",2)}function VB(t,e){return qe(t.getUTCDate(),e,2)}function B_e(t,e){return qe(t.getUTCHours(),e,2)}function S_e(t,e){return qe(t.getUTCHours()%12||12,e,2)}function j_e(t,e){return qe(1+Ag.count(fa(t),t),e,3)}function N3(t,e){return qe(t.getUTCMilliseconds(),e,3)}function k_e(t,e){return N3(t,e)+"000"}function E_e(t,e){return qe(t.getUTCMonth()+1,e,2)}function N_e(t,e){return qe(t.getUTCMinutes(),e,2)}function F_e(t,e){return qe(t.getUTCSeconds(),e,2)}function T_e(t){var e=t.getUTCDay();return e===0?7:e}function U_e(t,e){return qe(ug.count(fa(t)-1,t),e,2)}function F3(t){var e=t.getUTCDay();return e>=4||e===0?Wl(t):Wl.ceil(t)}function Q_e(t,e){return t=F3(t),qe(Wl.count(fa(t),t)+(fa(t).getUTCDay()===4),e,2)}function I_e(t){return t.getUTCDay()}function P_e(t,e){return qe(Qf.count(fa(t)-1,t),e,2)}function D_e(t,e){return qe(t.getUTCFullYear()%100,e,2)}function M_e(t,e){return t=F3(t),qe(t.getUTCFullYear()%100,e,2)}function R_e(t,e){return qe(t.getUTCFullYear()%1e4,e,4)}function $_e(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Wl(t):Wl.ceil(t),qe(t.getUTCFullYear()%1e4,e,4)}function O_e(){return"+0000"}function qB(){return"%"}function XB(t){return+t}function JB(t){return Math.floor(+t/1e3)}var Lo,T3,U3;L_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function L_e(t){return Lo=Lbe(t),T3=Lo.format,Lo.parse,U3=Lo.utcFormat,Lo.utcParse,Lo}function H_e(t){return new Date(t)}function K_e(t){return t instanceof Date?+t:+new Date(+t)}function F1(t,e,r,n,s,a,o,l,A,u){var h=m1(),c=h.invert,d=h.domain,f=u(".%L"),g=u(":%S"),y=u("%I:%M"),v=u("%I %p"),m=u("%a %d"),p=u("%b %d"),x=u("%B"),w=u("%Y");function _(b){return(A(b)<b?f:l(b)<b?g:o(b)<b?y:a(b)<b?v:n(b)<b?s(b)<b?m:p:r(b)<b?x:w)(b)}return h.invert=function(b){return new Date(c(b))},h.domain=function(b){return arguments.length?d(Array.from(b,K_e)):d().map(H_e)},h.ticks=function(b){var S=d();return t(S[0],S[S.length-1],b??10)},h.tickFormat=function(b,S){return S==null?_:u(S)},h.nice=function(b){var S=d();return(!b||typeof b.range!="function")&&(b=e(S[0],S[S.length-1],b??10)),b?d(v3(S,b)):h},h.copy=function(){return Ou(h,F1(t,e,r,n,s,a,o,l,A,u))},h}function z_e(){return Hn.apply(F1($be,Obe,ha,E1,cg,Lu,j1,B1,Ri,T3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function G_e(){return Hn.apply(F1(Mbe,Rbe,fa,N1,ug,Ag,k1,S1,Ri,U3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function dg(){var t=0,e=1,r,n,s,a,o=Dr,l=!1,A;function u(c){return c==null||isNaN(c=+c)?A:o(s===0?.5:(c=(a(c)-r)*s,l?Math.max(0,Math.min(1,c)):c))}u.domain=function(c){return arguments.length?([t,e]=c,r=a(t=+t),n=a(e=+e),s=r===n?0:1/(n-r),u):[t,e]},u.clamp=function(c){return arguments.length?(l=!!c,u):l},u.interpolator=function(c){return arguments.length?(o=c,u):o};function h(c){return function(d){var f,g;return arguments.length?([f,g]=d,o=c(f,g),u):[o(0),o(1)]}}return u.range=h(Fs),u.rangeRound=h(e1),u.unknown=function(c){return arguments.length?(A=c,u):A},function(c){return a=c,r=c(t),n=c(e),s=r===n?0:1/(n-r),u}}function mi(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Q3(){var t=gi(dg()(Dr));return t.copy=function(){return mi(t,Q3())},_a.apply(t,arguments)}function I3(){var t=x1(dg()).domain([1,10]);return t.copy=function(){return mi(t,I3()).base(t.base())},_a.apply(t,arguments)}function P3(){var t=w1(dg());return t.copy=function(){return mi(t,P3()).constant(t.constant())},_a.apply(t,arguments)}function T1(){var t=b1(dg());return t.copy=function(){return mi(t,T1()).exponent(t.exponent())},_a.apply(t,arguments)}function W_e(){return T1.apply(null,arguments).exponent(.5)}function D3(){var t=[],e=Dr;function r(n){if(n!=null&&!isNaN(n=+n))return e(($u(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let s of n)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Za),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,s)=>e(s/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>rbe(t,a/n))},r.copy=function(){return D3(e).domain(t)},_a.apply(r,arguments)}function hg(){var t=0,e=.5,r=1,n=1,s,a,o,l,A,u=Dr,h,c=!1,d;function f(y){return isNaN(y=+y)?d:(y=.5+((y=+h(y))-a)*(n*y<n*a?l:A),u(c?Math.max(0,Math.min(1,y)):y))}f.domain=function(y){return arguments.length?([t,e,r]=y,s=h(t=+t),a=h(e=+e),o=h(r=+r),l=s===a?0:.5/(a-s),A=a===o?0:.5/(o-a),n=a<s?-1:1,f):[t,e,r]},f.clamp=function(y){return arguments.length?(c=!!y,f):c},f.interpolator=function(y){return arguments.length?(u=y,f):u};function g(y){return function(v){var m,p,x;return arguments.length?([m,p,x]=v,u=Tye(y,[m,p,x]),f):[u(0),u(.5),u(1)]}}return f.range=g(Fs),f.rangeRound=g(e1),f.unknown=function(y){return arguments.length?(d=y,f):d},function(y){return h=y,s=y(t),a=y(e),o=y(r),l=s===a?0:.5/(a-s),A=a===o?0:.5/(o-a),n=a<s?-1:1,f}}function M3(){var t=gi(hg()(Dr));return t.copy=function(){return mi(t,M3())},_a.apply(t,arguments)}function R3(){var t=x1(hg()).domain([.1,1,10]);return t.copy=function(){return mi(t,R3()).base(t.base())},_a.apply(t,arguments)}function $3(){var t=w1(hg());return t.copy=function(){return mi(t,$3()).constant(t.constant())},_a.apply(t,arguments)}function U1(){var t=b1(hg());return t.copy=function(){return mi(t,U1()).exponent(t.exponent())},_a.apply(t,arguments)}function V_e(){return U1.apply(null,arguments).exponent(.5)}const q_e=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:g1,scaleDiverging:M3,scaleDivergingLog:R3,scaleDivergingPow:U1,scaleDivergingSqrt:V_e,scaleDivergingSymlog:$3,scaleIdentity:y3,scaleImplicit:rv,scaleLinear:v1,scaleLog:x3,scaleOrdinal:f1,scalePoint:abe,scalePow:_1,scaleQuantile:_3,scaleQuantize:C3,scaleRadial:b3,scaleSequential:Q3,scaleSequentialLog:I3,scaleSequentialPow:T1,scaleSequentialQuantile:D3,scaleSequentialSqrt:W_e,scaleSequentialSymlog:P3,scaleSqrt:kbe,scaleSymlog:w3,scaleThreshold:B3,scaleTime:z_e,scaleUtc:G_e,tickFormat:p3},Symbol.toStringTag,{value:"Module"})),X_e=["linear","time","log","sqrt"];function J_e(t){return`scale${(r=>r&&r[0].toUpperCase()+r.slice(1))(t)}`}function O3(t){return typeof t=="function"?rt(t.copy)&&rt(t.domain)&&rt(t.range):typeof t=="string"?X_e.includes(t):!1}function L3(t,e){if(t.scale){if(t.scale.x||t.scale.y)return!!t.scale[e]}else return!1;return!0}function Y_e(t,e){if(!L3(t,e))return;const r=t.scale[e]||t.scale;return typeof r=="string"?r:K3(r)}function Z_e(t,e){let r;if(t.domain&&t.domain[e]?r=t.domain[e]:t.domain&&Array.isArray(t.domain)&&(r=t.domain),!!r)return ua(r)?"time":"linear"}function H3(t,e){if(!t.data)return"linear";const r=l1(t[e]),n=t.data.map(s=>{const a=Dn(r(s))?r(s)[e]:r(s);return a!==void 0?a:s[e]});return ua(n)?"time":"linear"}function cu(t){if(O3(t)){const e=J_e(t);return q_e[e]()}return v1()}function Rn(t,e){const r=sv(t,e);if(r)return typeof r=="string"?cu(r):r;const n=Z_e(t,e)||H3(t,e);return cu(n)}function sv(t,e){if(!L3(t,e))return;const r=t.scale[e]||t.scale;if(O3(r))return rt(r)?r:cu(r)}function If(t,e){return Y_e(t,e)||H3(t,e)}const eCe=[{name:"quantile",method:"quantiles"},{name:"log",method:"base"}];function K3(t){if(typeof t=="string")return t;const e=eCe.filter(r=>t[r.method]!==void 0)[0];return e?e.name:void 0}const tCe="@@__IMMUTABLE_ITERABLE__@@",rCe="@@__IMMUTABLE_RECORD__@@",nCe="@@__IMMUTABLE_LIST__@@";function Hu(t){return!!(t&&t[tCe])}function sCe(t){return!!(t&&t[rCe])}function aCe(t){return Hu(t)||sCe(t)}function iCe(t){return!!(t&&t[nCe])}function z3(t,e){return Hu(t)?t.reduce((r,n,s)=>{let a=n;return e&&e[s]&&(a=z3(n)),r[s]=a,r},iCe(t)?[]:{}):t}function av(t){const e={errorX:!0,errorY:!0};return aCe(t)?z3(t,e):t}function oCe(t){return Hu(t)?t.size:t.length}function YB(t,e){const n=(Dn(t.domain)?t.domain[e]:t.domain)||Rn(t,e).domain(),s=t.samples||1,a=Math.max(...n),o=Math.min(...n),l=(a-o)/s,A=A1(o,a,l);return A[A.length-1]===a?A:A.concat(a)}function G3(t,e,r){if(r===void 0&&(r="ascending"),!e)return t;let n=e;return(e==="x"||e==="y")&&(n=`_${e}`),Jw(t,n,r==="ascending"?"asc":"desc")}function lCe(t,e){const r=1/Number.MAX_SAFE_INTEGER,n={x:If(e,"x"),y:If(e,"y")};if(n.x!=="log"&&n.y!=="log")return t;const s=(o,l)=>n[l]==="log"?o[`_${l}`]!==0:!0,a=o=>{const l=s(o,"x")?o._x:r,A=s(o,"y")?o._y:r,u=s(o,"y0")?o._y0:r;return Object.assign({},o,{_x:l,_y:A,_y0:u})};return t.map(o=>s(o,"x")&&s(o,"y")&&s(o,"y0")?o:a(o))}function ACe(t){return rt(t)?t:t==null?()=>{}:j6(t)}function cCe(t,e){const r=!!t.eventKey,n=ACe(t.eventKey);return e.map((s,a)=>{if(s.eventKey!==void 0)return s;if(r){const o=n(s,a);return o!==void 0?Object.assign({eventKey:o},s):s}return s})}function uCe(t,e,r){const n=g=>g!==void 0,s=cs(e.x),a=As(e.x),o=cs(e.y),l=As(e.y),A=g=>y=>n(y)&&y<g,u=g=>y=>n(y)&&y>g,h=A(s),c=A(o),d=u(a),f=u(l);return t.map(g=>{let{_x:y,_y:v,_y0:m,_y1:p}=g;(h(y)||d(y))&&(y=null);const x=n(m)?m:r,w=n(p)?p:v;return n(w)?(!n(x)&&(c(w)||f(w))&&(v=null),(c(x)&&c(w)||f(x)&&f(w))&&(v=m=p=null),c(x)&&!c(w)&&(m=o),f(x)&&!f(w)&&(m=l),Object.assign({},g,e3({_x:y,_y:v,_y0:m,_y1:p},H1e))):g})}function Hm(t,e){const r=W3(t,e),n=Vl(t,e),s=hCe(t,e),a=so([...r,...n,...s]);return a.length===0?null:a.reduce((o,l,A)=>(o[l]=A+1,o),{})}function ZB(t,e,r){if(!(Array.isArray(t)||Hu(t))||oCe(t)<1)return[];const s=["x","y","y0"];r=Array.isArray(r)?r:s;const a=d=>l1(e[d]!==void 0?e[d]:d),o=r.reduce((d,f)=>(d[f]=a(f),d),{}),l=$1e(r,s)&&e.x==="_x"&&e.y==="_y"&&e.y0==="_y0";let A;l===!1&&(A={x:r.indexOf("x")!==-1?Hm(e,"x"):void 0,y:r.indexOf("y")!==-1?Hm(e,"y"):void 0,y0:r.indexOf("y0")!==-1?Hm(e,"y"):void 0});const u=l?t:t.reduce((d,f,g)=>{const y=av(f),v={x:g,y},m=r.reduce((x,w)=>{const _=o[w](y),b=_!==void 0?_:v[w];return b!==void 0&&(typeof b=="string"&&A[w]?(x[`${w}Name`]=b,x[`_${w}`]=A[w][b]):x[`_${w}`]=b),x},{}),p=Object.assign({},m,y);return It(p)||d.push(p),d},[]),h=G3(u,e.sortKey,e.sortOrder),c=lCe(h,e);return cCe(e,c)}function dCe(t){const e=YB(t,"x"),r=YB(t,"y");return e.map((s,a)=>({x:s,y:r[a]}))}function Q1(t,e){return t.categories&&!Array.isArray(t.categories)?t.categories[e]:t.categories}function hs(t){return t.data?ZB(t.data,t):ZB(dCe(t),t)}function W3(t,e){const{tickValues:r,tickFormat:n}=t;let s;return!r||!Array.isArray(r)&&!r[e]?s=n&&Array.isArray(n)?n:[]:s=r[e]||r,s.filter(a=>typeof a=="string")}function Vl(t,e){if(!t.categories)return[];const r=Q1(t,e),n=r&&r.filter(s=>typeof s=="string");return n?swe(n):[]}function hCe(t,e){if(!(Array.isArray(t.data)||Hu(t.data)))return[];const n=t[e]===void 0?e:t[e],s=l1(n),a=t.data.reduce((A,u)=>(A.push(av(u)),A),[]);return G3(a,t.sortKey,t.sortOrder).reduce((A,u)=>{const h=av(u);return A.push(s(h)),A},[]).filter(A=>typeof A=="string").reduce((A,u)=>(u!=null&&A.indexOf(u)===-1&&A.push(u),A),[])}function fCe(t){const e=s=>s&&s.type?s.type.role:"";let r=e(t);if(r==="portal"){const s=R.Children.toArray(t.props.children);r=s.length?e(s[0]):""}return["area","bar","boxplot","candlestick","errorbar","group","histogram","line","pie","scatter","stack","voronoi"].includes(r)}function gCe(t,e,r){return If(e,r)!=="log"?t:(a=>{const o=a[0]<0||a[1]<0?-1/Number.MAX_SAFE_INTEGER:1/Number.MAX_SAFE_INTEGER,l=a[0]===0?o:a[0],A=a[1]===0?o:a[1];return[l,A]})(t)}function mCe(t,e){const r=n=>Array.isArray(n)?{left:n[0],right:n[1]}:{left:n,right:n};return Dn(t.domainPadding)?r(t.domainPadding[e]):r(t.domainPadding)}function pCe(t,e){const r=`_${e}`;return t.flat().map(n=>n[r]&&n[r][1]!==void 0?n[r][1]:n[r])}function e5(t,e,r){r===void 0&&(r="min");const n=l=>r==="max"?Math.max(...l):Math.min(...l),s=r==="max"?-1/0:1/0;let a=!1;const o=t.flat().reduce((l,A)=>{const u=A[`_${e}0`]!==void 0?A[`_${e}0`]:A[`_${e}`],h=A[`_${e}1`]!==void 0?A[`_${e}1`]:A[`_${e}`],c=n([u,h]);return a=a||u instanceof Date||h instanceof Date,n([l,c])},s);return a?new Date(o):o}function yCe(t,e,r){if(!e.domainPadding)return t;const n=Co(e,r),s=_o(e,r),a=mCe(e,r);if(!a.left&&!a.right)return t;const o=cs(t),l=As(t),A=Uxe(r,e.horizontal),u=rr(e,A),h=Math.abs(u[0]-u[1]),c=Math.max(h-a.left-a.right,1),d=Math.abs(l.valueOf()-o.valueOf())/c*h,f={left:d*a.left/h,right:d*a.right/h};let g={min:o.valueOf()-f.left,max:l.valueOf()+f.right};const y=Dn(e.singleQuadrantDomainPadding)?e.singleQuadrantDomainPadding[r]:e.singleQuadrantDomainPadding,v=o.valueOf()>=0&&g.min<=0||l.valueOf()<=0&&g.max>=0,m=(x,w)=>w==="min"&&o.valueOf()>=0&&x<=0||w==="max"&&l.valueOf()<=0&&x>=0?0:x;if(v&&y!==!1){const x={left:Math.abs(l-o)*a.left/h,right:Math.abs(l-o)*a.right/h},w={min:m(o.valueOf()-x.left,"min"),max:m(l.valueOf()+x.right,"max")},_={left:Math.abs(w.max-w.min)*a.left/h,right:Math.abs(w.max-w.min)*a.right/h};g={min:m(o.valueOf()-_.left,"min"),max:m(l.valueOf()+_.right,"max")}}const p={min:n!==void 0?n:g.min,max:s!==void 0?s:g.max};return o instanceof Date||l instanceof Date?ga(new Date(p.min),new Date(p.max)):ga(p.min,p.max)}function I1(t,e){const r=rt(t)?t:D1,n=rt(e)?e:P1;return(s,a)=>{const o=M1(s,a);if(o)return n(o,s,a);const l=Q1(s,a),A=l?vCe(s,a,l):r(s,a);return A?n(A,s,a):void 0}}function P1(t,e,r){return gCe(yCe(t,e,r),e,r)}function ao(t,e){return I1()(t,e)}function vCe(t,e,r){const n=r||Q1(t,e),{polar:s,startAngle:a=0,endAngle:o=360}=t;if(!n)return;const l=Co(t,e),A=_o(t,e),u=Bf(n)?Vl(t,e):[],h=u.length===0?null:u.reduce((y,v,m)=>(y[v]=m+1,y),{}),c=h?n.map(y=>h[y]):n,d=l!==void 0?l:cs(c),f=A!==void 0?A:As(c),g=ga(d,f);return s&&e==="x"&&Math.abs(a-o)===360?R1(g,c):g}function D1(t,e,r){const n=r||hs(t),{polar:s,startAngle:a=0,endAngle:o=360}=t,l=Co(t,e),A=_o(t,e);if(n.length<1)return l!==void 0&&A!==void 0?ga(l,A):void 0;const u=l!==void 0?l:e5(n,e,"min"),h=A!==void 0?A:e5(n,e,"max"),c=ga(u,h);return s&&e==="x"&&Math.abs(a-o)===360?R1(c,pCe(n,e)):c}function ga(t,e){const r=n=>{const s=n===0?2*Math.pow(10,-10):Math.pow(10,-10),a=1,o=n instanceof Date?new Date(Number(n)-a):Number(n)-s,l=n instanceof Date?new Date(Number(n)+a):Number(n)+s;return n===0?[0,l]:[o,l]};return Number(t)===Number(e)?r(e):[t,e]}function M1(t,e){const r=Co(t,e),n=_o(t,e);if(Dn(t.domain)&&t.domain[e])return t.domain[e];if(Array.isArray(t.domain))return t.domain;if(r!==void 0&&n!==void 0)return ga(r,n)}function iv(t,e){const r=M1(t,e);if(r)return r;const n=hs(t),s=n.reduce((A,u)=>u._y0<A?u._y0:A,1/0),a=A=>{if(e==="x")return A;const u=s!==1/0?s:0,h=_o(t,e),c=Co(t,e),d=h!==void 0?h:As(A,u),f=c!==void 0?c:cs(A,u);return ga(f,d)};return I1(()=>D1(t,e,n),A=>P1(a(A),t,e))(t,e)}function _o(t,e){return Dn(t.maxDomain)&&t.maxDomain[e]!==void 0?t.maxDomain[e]:typeof t.maxDomain=="number"||c3(t.maxDomain)?t.maxDomain:void 0}function Co(t,e){return Dn(t.minDomain)&&t.minDomain[e]!==void 0?t.minDomain[e]:typeof t.minDomain=="number"||c3(t.minDomain)?t.minDomain:void 0}function R1(t,e){const r=P1e(e.sort((s,a)=>s-a)),n=r[1]-r[0];return[t[0],t[1]+n]}function V3(t){const e=s=>s&&s.type?s.type.role:"";let r=e(t);if(r==="portal"){const s=R.Children.toArray(t.props.children);r=s.length?e(s[0]):""}return["area","axis","bar","boxplot","candlestick","errorbar","group","histogram","line","pie","scatter","stack","voronoi"].includes(r)}function xCe(t){return t}function Kn(t){const{dependentAxis:e}=t;return e?"y":"x"}function q3(t,e){const r=e||xCe,n=s=>s.reduce((a,o)=>o.type&&o.type.role==="axis"&&r(o)?a.concat(o):o.props&&o.props.children?a.concat(n(R.Children.toArray(o.props.children))):a,[]);return n(t)}function X3(t,e){return q3(t,n=>n.type.getAxis(n.props)===e)[0]}function t5(t,e){const r=s=>e==="dependent"?s.props.dependentAxis:!s.props.dependentAxis,n=s=>s.reduce((a,o)=>o.type&&o.type.role==="axis"&&r(o)||o.props&&o.props.children&&n(R.Children.toArray(o.props.children)).length>0?a.concat(o):a,[]);return n(t)}function J3(t){const e=r=>{const n=Math.min(...r),s=Math.max(...r);return s<0?s:Math.max(0,n)};return{x:ua(t.x)?new Date(Math.min(...t.x)):e(t.x),y:ua(t.y)?new Date(Math.min(...t.y)):e(t.y)}}function r5(t,e){const r=()=>t<=0&&Math.max(...e)<=0?"negative":"positive";return ua(e)?"positive":r()}function fg(t){const e=t.orientation||(t.dependentAxis?"left":"bottom");return{top:!1,bottom:!1,left:!0,right:!0}[e]}function gg(t){return t.tickValues!==void 0&&Bf(t.tickValues)}function wCe(t){const{tickValues:e}=t,r=Kn(t),n=t.stringMap&&t.stringMap[r],s=e&&!ua(e)?u=>u:void 0;if(!n)return gg(t)?(u,h)=>e[h]:s;const a=n&&z6(n),A=["",...Jw(Object.values(n),u=>u).map(u=>a[u]),""];return u=>A[u]}function bCe(t){const e=Kn(t),r=t.stringMap&&t.stringMap[e],n=Array.isArray(t.categories)?t.categories:t.categories&&t.categories[e],s=n&&nwe(n)?n.map(o=>r[o]):void 0,a=r&&Object.values(r);return s&&s.length!==0?s:a}function $1(t){const{tickValues:e,tickFormat:r}=t;if((e==null?void 0:e.length)===0)return[];const n=Kn(t),s=t.stringMap&&t.stringMap[n],a=()=>{if(!(!r||!Array.isArray(r)))return Bf(r)?r.map((u,h)=>h):r};let o=e;s&&(o=bCe(t)),e&&Bf(e)&&(o=s?e.map(u=>s[u]):A1(1,e.length+1));const l=o?so(o):a(),A=u=>{const h=[],c=t.domain&&t.domain[n]||t.domain;if(u)return u.forEach((d,f)=>{Array.isArray(c)?d>=cs(c).valueOf()&&d<=As(c).valueOf()&&h.push({value:d,index:f}):h.push({value:d,index:f})}),h};return Array.isArray(l)&&l.length?A(l):void 0}function Y3(t,e){const{tickFormat:r}=t,n=Kn(t),s=t.stringMap&&t.stringMap[n];if(r){if(r&&Array.isArray(r)){const a=$1(t),o=a==null?void 0:a.map(A=>A.index),l=r.filter((A,u)=>o==null?void 0:o.includes(u));return(A,u)=>l[u]}else if(r&&rt(r))return s?(o,l,A)=>{const u=z6(s),h=A.map(c=>u[c]);return t.tickFormat(u[o],l,h)}:r}else{const a=wCe(t),o=e.tickFormat&&rt(e.tickFormat)?e.tickFormat():l=>l;return a||o}return a=>a}function n5(t,e){if(!e||!Array.isArray(t)||t.length<=e)return t;const r=Math.floor(t.length/e);return t.filter((n,s)=>s%r===0)}function Z3(t,e,r){r===void 0&&(r=!1);const{tickCount:n}=t,s=$1(t);if((s==null?void 0:s.length)===0)return[""];const a=s?s.map(o=>o.value):void 0;if(a)return n5(a,n);if(e.ticks&&rt(e.ticks)){const o=n||5,l=e.ticks(o),A=Array.isArray(l)&&l.length?l:e.domain(),u=n5(A,n);if(r){const h=u.filter(c=>c!==0);return h.length?h:u}return u}return e.domain()}function _Ce(t,e){const{polar:r,startAngle:n=0,endAngle:s=360}=t,a=$1(t),o=a&&(a==null?void 0:a.length)!==0?a.map(m=>m.value):void 0;if(!Array.isArray(o))return;const l=Co(t,e),A=_o(t,e),u=gg(t),h=o.map(m=>Number(m)),c=u?1:cs(h),d=u?o.length:As(h),y=ga(l!==void 0?l:c,A!==void 0?A:d),v=r&&e==="x"&&Math.abs(n-s)===360?R1(y,h):y;return fg(t)&&!r&&v.reverse(),v}function hA(t,e){const r=Kn(t);if(!(e&&e!==r))return I1(_Ce)(t,r)}function eF(t,e){if(!t.axisValue)return;const r=e==="x"?"y":"x",n=My(t.scale)&&rt(t.scale[r])?t.scale[r]:void 0;if(!n)return;const s=e==="x"?"y":"x",a=My(t.stringMap)&&t.stringMap[s],o=a&&typeof t.axisValue=="string"?a[t.axisValue]:t.axisValue;return n(o)}function mg(t,e){if(!My(t.theme))return is(t,e,"axis");let r="axis";if(t.dependentAxis&&t.theme.dependentAxis?r="dependentAxis":!t.dependentAxis&&t.theme.independentAxis&&(r="independentAxis"),r==="axis")return is(t,e,"axis");const n=_e({},t.theme[r],t.theme.axis),s=Object.assign({},t.theme,{axis:n});return is(Object.assign({},t,{theme:s}),e,"axis")}function tF(){return{onLoad:{duration:2e3},onExit:{duration:500},onEnter:{duration:500}}}function rF(){return{onLoad:{duration:2e3,before:()=>({_y:0,_y1:0,_y0:0}),after:t=>({_y:t._y,_y1:t._y1,_y0:t._y0})},onExit:{duration:500,before:(t,e,r)=>{const n=s=>(e===0?r[e+1]:r[e-1])[s];return{_x:n("_x"),_y:n("_y"),_y0:n("_y0")}}},onEnter:{duration:500,before:(t,e,r)=>{const n=s=>(e===0?r[e+1]:r[e-1])[s];return{_x:n("_x"),_y:n("_y"),_y0:n("_y0")}},after:t=>({_x:t._x,_y:t._y,_y1:t._y1,_y0:t._y0})}}}function CCe(){return{onLoad:{duration:2e3,before:()=>({opacity:0}),after:t=>t},onExit:{duration:600,before:()=>({opacity:0})},onEnter:{duration:600,before:()=>({opacity:0}),after:t=>t}}}function BCe(t){const e=R.useRef();return R.useEffect(()=>{e.current=t}),e.current}const SCe={nodesShouldLoad:!1,nodesDoneLoad:!1,animating:!0},jCe=function(t){t===void 0&&(t=SCe);const[e,r]=R.useState(t),n=R.useCallback(l=>{r(A=>({...A,...l}))},[r]),s=R.useCallback((l,A,u)=>{if(!(l!=null&&l.animate))return A.props.animate;const h=()=>{let g=e&&e.childrenTransitions;return g=yB(g)?g[u]:g,_e({childrenTransitions:g},e)};let c=l.animate&&l.animate.getTransitions;const d=h(),f=l.animate&&l.animate.parentState||d;if(!c){const g=Y6(l,d,y=>n(y));c=y=>g(y,u)}return _e({getTransitions:c,parentState:f},l.animate,A.props.animate)},[e,n]),a=R.useCallback((l,A)=>{if(l!=null&&l.animate)if(l.animate.parentState){const h=l.animate.parentState.nodesWillExit?l:null,c=_e({oldProps:h,nextProps:A},l.animate.parentState);n(c)}else{const u=R.Children.toArray(l.children),h=R.Children.toArray(A.children),c=m=>{const p=x=>x.type&&x.type.continuous;return Array.isArray(m)?m.some(p):p(m)},d=!l.polar&&u.some(m=>{var p;return c(m)||((p=m==null?void 0:m.props)==null?void 0:p.children)&&c(m.props.children)}),{nodesWillExit:f,nodesWillEnter:g,childrenTransitions:y,nodesShouldEnter:v}=J6(u,h);n({nodesWillExit:f,nodesWillEnter:g,nodesShouldEnter:v,childrenTransitions:yB(y)?y[0]:y,oldProps:f?l:void 0,nextProps:A,continuous:d})}},[n]),o=R.useCallback(l=>e&&e.nodesWillExit&&e.oldProps||l,[e]);return{state:e,setState:n,getAnimationProps:s,setAnimationState:a,getProps:o}};function kCe(t,e){e===void 0&&(e={});const r=e._y>=0?1:-1,n=t.style&&t.style.labels||{};return e.verticalAnchor||n.verticalAnchor?e.verticalAnchor||n.verticalAnchor:t.horizontal?"middle":r>=0?"end":"start"}function ECe(t,e){e===void 0&&(e={});const{style:r,horizontal:n}=t,s=e._y>=0?1:-1,a=r&&r.labels||{};return e.verticalAnchor||a.verticalAnchor?e.verticalAnchor||a.verticalAnchor:n?s>=0?"start":"end":"middle"}function NCe(t,e){e===void 0&&(e={});const r=t.style&&t.style.labels||{};return e.angle===void 0?r.angle:e.angle}function FCe(t,e){e===void 0&&(e={});const{horizontal:r,style:n}=t,s=n.labels||{},a=Be(s.padding,t)||0,o=e._y<0?-1:1;return{x:r?o*a:0,y:r?0:-1*o*a}}function TCe(t,e){if(t.polar)return{};const r=FCe(t,e);return{dx:r.x,dy:r.y}}function UCe(t,e){const{polar:r}=t,{x:n,y:s}=s1(t,e);if(!r)return{x:n,y:s};const a=QCe(t,e);return{x:n+a.x,y:s+a.y}}function QCe(t,e){const{style:r}=t,n=K1(t,e),s=r.labels||{},a=Be(s.padding,t)||0,o=er(n);return{x:a*Math.cos(o),y:-a*Math.sin(o)}}function O1(t){const{labelComponent:e,labelPlacement:r,polar:n}=t,s=n?"perpendicular":"vertical";return r||e.props&&e.props.labelPlacement||s}function ICe(t){return t<45||t>315?"right":t>=45&&t<=135?"top":t>135&&t<225?"left":"bottom"}function pg(t,e,r){return e===void 0&&(e={}),e.label!==void 0?e.label:Array.isArray(t.labels)?t.labels[r]:t.labels}function L1(t,e){const r=O1(t);return r==="perpendicular"||r==="vertical"&&(e===90||e===270)?"middle":e<=90||e>270?"start":"end"}function nF(t,e){const r=O1(t),n=ICe(e);return r==="parallel"||n==="left"||n==="right"?"middle":n==="top"?"end":"start"}function H1(t,e){const{labelPlacement:r,datum:n}=t;if(!r||r==="vertical")return 0;const s=e!==void 0?e%360:K1(t,n),a=s>90&&s<180||s>270?1:-1;let o=0;return s===0||s===180?o=90:s>0&&s<180?o=90-s:s>180&&s<360&&(o=270-s),o+a*(r==="perpendicular"?0:90)}function K1(t,e){const{x:r}=G6(e);return o1(t.scale.x(r))%360}function z1(t,e){const{scale:r,data:n,style:s,horizontal:a,polar:o,width:l,height:A,theme:u,labelComponent:h,disableInlineStyles:c}=t,d=n[e],f=K1(t,d),g=o?L1(t,f):ECe(t,d),y=o?nF(t,f):kCe(t,d),v=NCe(t,d),m=pg(t,d,e),p=O1(t),{x,y:w}=UCe(t,d),{dx:_,dy:b}=TCe(t,d),S={angle:v,data:n,datum:d,disableInlineStyles:c,horizontal:a,index:e,polar:o,scale:r,labelPlacement:p,text:m,textAnchor:g,verticalAnchor:y,x,y:w,dx:_,dy:b,width:l,height:A,style:s.labels};if(!W6(h))return S;const E=u&&u.tooltip||{};return _e({},S,n1(E,["style"]))}function Pe(t){return function(){return t}}const s5=Math.abs,yr=Math.atan2,Vs=Math.cos,PCe=Math.max,Nl=Math.min,Vr=Math.sin,mt=Math.sqrt,vr=1e-12,li=Math.PI,Pf=li/2,ei=2*li;function DCe(t){return t>1?0:t<-1?li:Math.acos(t)}function a5(t){return t>=1?Pf:t<=-1?-Pf:Math.asin(t)}const ov=Math.PI,lv=2*ov,ki=1e-6,MCe=lv-ki;function sF(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function RCe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return sF;const r=10**e;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}let $Ce=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?sF:RCe(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,s){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(e,r,n,s,a,o){this._append`C${+e},${+r},${+n},${+s},${this._x1=+a},${this._y1=+o}`}arcTo(e,r,n,s,a){if(e=+e,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,A=n-e,u=s-r,h=o-e,c=l-r,d=h*h+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(d>ki)if(!(Math.abs(c*A-u*h)>ki)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let f=n-o,g=s-l,y=A*A+u*u,v=f*f+g*g,m=Math.sqrt(y),p=Math.sqrt(d),x=a*Math.tan((ov-Math.acos((y+d-v)/(2*m*p)))/2),w=x/p,_=x/m;Math.abs(w-1)>ki&&this._append`L${e+w*h},${r+w*c}`,this._append`A${a},${a},0,0,${+(c*f>h*g)},${this._x1=e+_*A},${this._y1=r+_*u}`}}arc(e,r,n,s,a,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),A=n*Math.sin(s),u=e+l,h=r+A,c=1^o,d=o?s-a:a-s;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>ki||Math.abs(this._y1-h)>ki)&&this._append`L${u},${h}`,n&&(d<0&&(d=d%lv+lv),d>MCe?this._append`A${n},${n},0,1,${c},${e-l},${r-A}A${n},${n},0,1,${c},${this._x1=u},${this._y1=h}`:d>ki&&this._append`A${n},${n},0,${+(d>=ov)},${c},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,s){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}};function Ku(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new $Ce(e)}function OCe(t){return t.innerRadius}function LCe(t){return t.outerRadius}function HCe(t){return t.startAngle}function KCe(t){return t.endAngle}function zCe(t){return t&&t.padAngle}function GCe(t,e,r,n,s,a,o,l){var A=r-t,u=n-e,h=o-s,c=l-a,d=c*A-h*u;if(!(d*d<vr))return d=(h*(e-a)-c*(t-s))/d,[t+d*A,e+d*u]}function Ed(t,e,r,n,s,a,o){var l=t-r,A=e-n,u=(o?a:-a)/mt(l*l+A*A),h=u*A,c=-u*l,d=t+h,f=e+c,g=r+h,y=n+c,v=(d+g)/2,m=(f+y)/2,p=g-d,x=y-f,w=p*p+x*x,_=s-a,b=d*y-g*f,S=(x<0?-1:1)*mt(PCe(0,_*_*w-b*b)),E=(b*x-p*S)/w,C=(-b*p-x*S)/w,N=(b*x+p*S)/w,Q=(-b*p+x*S)/w,P=E-v,F=C-m,$=N-v,L=Q-m;return P*P+F*F>$*$+L*L&&(E=N,C=Q),{cx:E,cy:C,x01:-h,y01:-c,x11:E*(s/_-1),y11:C*(s/_-1)}}function WCe(){var t=OCe,e=LCe,r=Pe(0),n=null,s=HCe,a=KCe,o=zCe,l=null,A=Ku(u);function u(){var h,c,d=+t.apply(this,arguments),f=+e.apply(this,arguments),g=s.apply(this,arguments)-Pf,y=a.apply(this,arguments)-Pf,v=s5(y-g),m=y>g;if(l||(l=h=A()),f<d&&(c=f,f=d,d=c),!(f>vr))l.moveTo(0,0);else if(v>ei-vr)l.moveTo(f*Vs(g),f*Vr(g)),l.arc(0,0,f,g,y,!m),d>vr&&(l.moveTo(d*Vs(y),d*Vr(y)),l.arc(0,0,d,y,g,m));else{var p=g,x=y,w=g,_=y,b=v,S=v,E=o.apply(this,arguments)/2,C=E>vr&&(n?+n.apply(this,arguments):mt(d*d+f*f)),N=Nl(s5(f-d)/2,+r.apply(this,arguments)),Q=N,P=N,F,$;if(C>vr){var L=a5(C/d*Vr(E)),D=a5(C/f*Vr(E));(b-=L*2)>vr?(L*=m?1:-1,w+=L,_-=L):(b=0,w=_=(g+y)/2),(S-=D*2)>vr?(D*=m?1:-1,p+=D,x-=D):(S=0,p=x=(g+y)/2)}var z=f*Vs(p),k=f*Vr(p),M=d*Vs(_),j=d*Vr(_);if(N>vr){var I=f*Vs(x),G=f*Vr(x),X=d*Vs(w),te=d*Vr(w),Ae;if(v<li)if(Ae=GCe(z,k,X,te,I,G,M,j)){var ie=z-Ae[0],V=k-Ae[1],Y=I-Ae[0],U=G-Ae[1],H=1/Vr(DCe((ie*Y+V*U)/(mt(ie*ie+V*V)*mt(Y*Y+U*U)))/2),K=mt(Ae[0]*Ae[0]+Ae[1]*Ae[1]);Q=Nl(N,(d-K)/(H-1)),P=Nl(N,(f-K)/(H+1))}else Q=P=0}S>vr?P>vr?(F=Ed(X,te,z,k,f,P,m),$=Ed(I,G,M,j,f,P,m),l.moveTo(F.cx+F.x01,F.cy+F.y01),P<N?l.arc(F.cx,F.cy,P,yr(F.y01,F.x01),yr($.y01,$.x01),!m):(l.arc(F.cx,F.cy,P,yr(F.y01,F.x01),yr(F.y11,F.x11),!m),l.arc(0,0,f,yr(F.cy+F.y11,F.cx+F.x11),yr($.cy+$.y11,$.cx+$.x11),!m),l.arc($.cx,$.cy,P,yr($.y11,$.x11),yr($.y01,$.x01),!m))):(l.moveTo(z,k),l.arc(0,0,f,p,x,!m)):l.moveTo(z,k),!(d>vr)||!(b>vr)?l.lineTo(M,j):Q>vr?(F=Ed(M,j,I,G,d,-Q,m),$=Ed(z,k,X,te,d,-Q,m),l.lineTo(F.cx+F.x01,F.cy+F.y01),Q<N?l.arc(F.cx,F.cy,Q,yr(F.y01,F.x01),yr($.y01,$.x01),!m):(l.arc(F.cx,F.cy,Q,yr(F.y01,F.x01),yr(F.y11,F.x11),!m),l.arc(0,0,d,yr(F.cy+F.y11,F.cx+F.x11),yr($.cy+$.y11,$.cx+$.x11),m),l.arc($.cx,$.cy,Q,yr($.y11,$.x11),yr($.y01,$.x01),!m))):l.arc(0,0,d,_,w,m)}if(l.closePath(),h)return l=null,h+""||null}return u.centroid=function(){var h=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,c=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-li/2;return[Vs(c)*h,Vr(c)*h]},u.innerRadius=function(h){return arguments.length?(t=typeof h=="function"?h:Pe(+h),u):t},u.outerRadius=function(h){return arguments.length?(e=typeof h=="function"?h:Pe(+h),u):e},u.cornerRadius=function(h){return arguments.length?(r=typeof h=="function"?h:Pe(+h),u):r},u.padRadius=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Pe(+h),u):n},u.startAngle=function(h){return arguments.length?(s=typeof h=="function"?h:Pe(+h),u):s},u.endAngle=function(h){return arguments.length?(a=typeof h=="function"?h:Pe(+h),u):a},u.padAngle=function(h){return arguments.length?(o=typeof h=="function"?h:Pe(+h),u):o},u.context=function(h){return arguments.length?(l=h??null,u):l},u}var VCe=Array.prototype.slice;function yg(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function aF(t){this._context=t}aF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function zu(t){return new aF(t)}function G1(t){return t[0]}function W1(t){return t[1]}function vg(t,e){var r=Pe(!0),n=null,s=zu,a=null,o=Ku(l);t=typeof t=="function"?t:t===void 0?G1:Pe(t),e=typeof e=="function"?e:e===void 0?W1:Pe(e);function l(A){var u,h=(A=yg(A)).length,c,d=!1,f;for(n==null&&(a=s(f=o())),u=0;u<=h;++u)!(u<h&&r(c=A[u],u,A))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(c,u,A),+e(c,u,A));if(f)return a=null,f+""||null}return l.x=function(A){return arguments.length?(t=typeof A=="function"?A:Pe(+A),l):t},l.y=function(A){return arguments.length?(e=typeof A=="function"?A:Pe(+A),l):e},l.defined=function(A){return arguments.length?(r=typeof A=="function"?A:Pe(!!A),l):r},l.curve=function(A){return arguments.length?(s=A,n!=null&&(a=s(n)),l):s},l.context=function(A){return arguments.length?(A==null?n=a=null:a=s(n=A),l):n},l}function Df(t,e,r){var n=null,s=Pe(!0),a=null,o=zu,l=null,A=Ku(u);t=typeof t=="function"?t:t===void 0?G1:Pe(+t),e=typeof e=="function"?e:Pe(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?W1:Pe(+r);function u(c){var d,f,g,y=(c=yg(c)).length,v,m=!1,p,x=new Array(y),w=new Array(y);for(a==null&&(l=o(p=A())),d=0;d<=y;++d){if(!(d<y&&s(v=c[d],d,c))===m)if(m=!m)f=d,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=d-1;g>=f;--g)l.point(x[g],w[g]);l.lineEnd(),l.areaEnd()}m&&(x[d]=+t(v,d,c),w[d]=+e(v,d,c),l.point(n?+n(v,d,c):x[d],r?+r(v,d,c):w[d]))}if(p)return l=null,p+""||null}function h(){return vg().defined(s).curve(o).context(a)}return u.x=function(c){return arguments.length?(t=typeof c=="function"?c:Pe(+c),n=null,u):t},u.x0=function(c){return arguments.length?(t=typeof c=="function"?c:Pe(+c),u):t},u.x1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Pe(+c),u):n},u.y=function(c){return arguments.length?(e=typeof c=="function"?c:Pe(+c),r=null,u):e},u.y0=function(c){return arguments.length?(e=typeof c=="function"?c:Pe(+c),u):e},u.y1=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Pe(+c),u):r},u.lineX0=u.lineY0=function(){return h().x(t).y(e)},u.lineY1=function(){return h().x(t).y(r)},u.lineX1=function(){return h().x(n).y(e)},u.defined=function(c){return arguments.length?(s=typeof c=="function"?c:Pe(!!c),u):s},u.curve=function(c){return arguments.length?(o=c,a!=null&&(l=o(a)),u):o},u.context=function(c){return arguments.length?(c==null?a=l=null:l=o(a=c),u):a},u}function qCe(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function XCe(t){return t}function JCe(){var t=XCe,e=qCe,r=null,n=Pe(0),s=Pe(ei),a=Pe(0);function o(l){var A,u=(l=yg(l)).length,h,c,d=0,f=new Array(u),g=new Array(u),y=+n.apply(this,arguments),v=Math.min(ei,Math.max(-ei,s.apply(this,arguments)-y)),m,p=Math.min(Math.abs(v)/u,a.apply(this,arguments)),x=p*(v<0?-1:1),w;for(A=0;A<u;++A)(w=g[f[A]=A]=+t(l[A],A,l))>0&&(d+=w);for(e!=null?f.sort(function(_,b){return e(g[_],g[b])}):r!=null&&f.sort(function(_,b){return r(l[_],l[b])}),A=0,c=d?(v-u*x)/d:0;A<u;++A,y=m)h=f[A],w=g[h],m=y+(w>0?w*c:0)+x,g[h]={data:l[h],index:A,value:w,startAngle:y,endAngle:m,padAngle:p};return g}return o.value=function(l){return arguments.length?(t=typeof l=="function"?l:Pe(+l),o):t},o.sortValues=function(l){return arguments.length?(e=l,r=null,o):e},o.sort=function(l){return arguments.length?(r=l,e=null,o):r},o.startAngle=function(l){return arguments.length?(n=typeof l=="function"?l:Pe(+l),o):n},o.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Pe(+l),o):s},o.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:Pe(+l),o):a},o}var iF=V1(zu);function oF(t){this._curve=t}oF.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function V1(t){function e(r){return new oF(t(r))}return e._curve=t,e}function XA(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(r){return arguments.length?e(V1(r)):e()._curve},t}function Av(){return XA(vg().curve(iF))}function cv(){var t=Df().curve(iF),e=t.curve,r=t.lineX0,n=t.lineX1,s=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return XA(r())},delete t.lineX0,t.lineEndAngle=function(){return XA(n())},delete t.lineX1,t.lineInnerRadius=function(){return XA(s())},delete t.lineY0,t.lineOuterRadius=function(){return XA(a())},delete t.lineY1,t.curve=function(o){return arguments.length?e(V1(o)):e()._curve},t}function JA(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}class lF{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}class YCe{constructor(e){this._context=e}lineStart(){this._point=0}lineEnd(){}point(e,r){if(e=+e,r=+r,this._point===0)this._point=1;else{const n=JA(this._x0,this._y0),s=JA(this._x0,this._y0=(this._y0+r)/2),a=JA(e,this._y0),o=JA(e,r);this._context.moveTo(...n),this._context.bezierCurveTo(...s,...a,...o)}this._x0=e,this._y0=r}}function AF(t){return new lF(t,!0)}function cF(t){return new lF(t,!1)}function ZCe(t){return new YCe(t)}function e2e(t){return t.source}function t2e(t){return t.target}function xg(t){let e=e2e,r=t2e,n=G1,s=W1,a=null,o=null,l=Ku(A);function A(){let u;const h=VCe.call(arguments),c=e.apply(this,h),d=r.apply(this,h);if(a==null&&(o=t(u=l())),o.lineStart(),h[0]=c,o.point(+n.apply(this,h),+s.apply(this,h)),h[0]=d,o.point(+n.apply(this,h),+s.apply(this,h)),o.lineEnd(),u)return o=null,u+""||null}return A.source=function(u){return arguments.length?(e=u,A):e},A.target=function(u){return arguments.length?(r=u,A):r},A.x=function(u){return arguments.length?(n=typeof u=="function"?u:Pe(+u),A):n},A.y=function(u){return arguments.length?(s=typeof u=="function"?u:Pe(+u),A):s},A.context=function(u){return arguments.length?(u==null?a=o=null:o=t(a=u),A):a},A}function r2e(){return xg(AF)}function n2e(){return xg(cF)}function s2e(){const t=xg(ZCe);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const a2e=mt(3),uF={draw(t,e){const r=mt(e+Nl(e/28,.75))*.59436,n=r/2,s=n*a2e;t.moveTo(0,r),t.lineTo(0,-r),t.moveTo(-s,-n),t.lineTo(s,n),t.moveTo(-s,n),t.lineTo(s,-n)}},wg={draw(t,e){const r=mt(e/li);t.moveTo(r,0),t.arc(0,0,r,0,ei)}},dF={draw(t,e){const r=mt(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},hF=mt(1/3),i2e=hF*2,fF={draw(t,e){const r=mt(e/i2e),n=r*hF;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},gF={draw(t,e){const r=mt(e)*.62625;t.moveTo(0,-r),t.lineTo(r,0),t.lineTo(0,r),t.lineTo(-r,0),t.closePath()}},mF={draw(t,e){const r=mt(e-Nl(e/7,2))*.87559;t.moveTo(-r,0),t.lineTo(r,0),t.moveTo(0,r),t.lineTo(0,-r)}},pF={draw(t,e){const r=mt(e),n=-r/2;t.rect(n,n,r,r)}},yF={draw(t,e){const r=mt(e)*.4431;t.moveTo(r,r),t.lineTo(r,-r),t.lineTo(-r,-r),t.lineTo(-r,r),t.closePath()}},o2e=.8908130915292852,vF=Vr(li/10)/Vr(7*li/10),l2e=Vr(ei/10)*vF,A2e=-Vs(ei/10)*vF,xF={draw(t,e){const r=mt(e*o2e),n=l2e*r,s=A2e*r;t.moveTo(0,-r),t.lineTo(n,s);for(let a=1;a<5;++a){const o=ei*a/5,l=Vs(o),A=Vr(o);t.lineTo(A*r,-l*r),t.lineTo(l*n-A*s,A*n+l*s)}t.closePath()}},Km=mt(3),wF={draw(t,e){const r=-mt(e/(Km*3));t.moveTo(0,r*2),t.lineTo(-Km*r,-r),t.lineTo(Km*r,-r),t.closePath()}},c2e=mt(3),bF={draw(t,e){const r=mt(e)*.6824,n=r/2,s=r*c2e/2;t.moveTo(0,-r),t.lineTo(s,n),t.lineTo(-s,n),t.closePath()}},_n=-.5,Cn=mt(3)/2,uv=1/mt(12),u2e=(uv/2+1)*3,_F={draw(t,e){const r=mt(e/u2e),n=r/2,s=r*uv,a=n,o=r*uv+r,l=-a,A=o;t.moveTo(n,s),t.lineTo(a,o),t.lineTo(l,A),t.lineTo(_n*n-Cn*s,Cn*n+_n*s),t.lineTo(_n*a-Cn*o,Cn*a+_n*o),t.lineTo(_n*l-Cn*A,Cn*l+_n*A),t.lineTo(_n*n+Cn*s,_n*s-Cn*n),t.lineTo(_n*a+Cn*o,_n*o-Cn*a),t.lineTo(_n*l+Cn*A,_n*A-Cn*l),t.closePath()}},dv={draw(t,e){const r=mt(e-Nl(e/6,1.7))*.6189;t.moveTo(-r,-r),t.lineTo(r,r),t.moveTo(-r,r),t.lineTo(r,-r)}},i5=[wg,dF,fF,pF,xF,wF,_F],d2e=[wg,mF,dv,bF,uF,yF,gF];function h2e(t,e){let r=null,n=Ku(s);t=typeof t=="function"?t:Pe(t||wg),e=typeof e=="function"?e:Pe(e===void 0?64:+e);function s(){let a;if(r||(r=a=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(t=typeof a=="function"?a:Pe(a),s):t},s.size=function(a){return arguments.length?(e=typeof a=="function"?a:Pe(+a),s):e},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function Ai(){}function Mf(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function bg(t){this._context=t}bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Mf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Mf(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function f2e(t){return new bg(t)}function CF(t){this._context=t}CF.prototype={areaStart:Ai,areaEnd:Ai,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Mf(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function g2e(t){return new CF(t)}function BF(t){this._context=t}BF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Mf(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function m2e(t){return new BF(t)}function SF(t,e){this._basis=new bg(t),this._beta=e}SF.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,r=t.length-1;if(r>0)for(var n=t[0],s=e[0],a=t[r]-n,o=e[r]-s,l=-1,A;++l<=r;)A=l/r,this._basis.point(this._beta*t[l]+(1-this._beta)*(n+A*a),this._beta*e[l]+(1-this._beta)*(s+A*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const p2e=function t(e){function r(n){return e===1?new bg(n):new SF(n,e)}return r.beta=function(n){return t(+n)},r}(.85);function Rf(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function q1(t,e){this._context=t,this._k=(1-e)/6}q1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Rf(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Rf(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const y2e=function t(e){function r(n){return new q1(n,e)}return r.tension=function(n){return t(+n)},r}(0);function X1(t,e){this._context=t,this._k=(1-e)/6}X1.prototype={areaStart:Ai,areaEnd:Ai,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Rf(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const v2e=function t(e){function r(n){return new X1(n,e)}return r.tension=function(n){return t(+n)},r}(0);function J1(t,e){this._context=t,this._k=(1-e)/6}J1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Rf(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const x2e=function t(e){function r(n){return new J1(n,e)}return r.tension=function(n){return t(+n)},r}(0);function Y1(t,e,r){var n=t._x1,s=t._y1,a=t._x2,o=t._y2;if(t._l01_a>vr){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,A=3*t._l01_a*(t._l01_a+t._l12_a);n=(n*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/A,s=(s*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/A}if(t._l23_a>vr){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/h,o=(o*u+t._y1*t._l23_2a-r*t._l12_2a)/h}t._context.bezierCurveTo(n,s,a,o,t._x2,t._y2)}function jF(t,e){this._context=t,this._alpha=e}jF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Y1(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const w2e=function t(e){function r(n){return e?new jF(n,e):new q1(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function kF(t,e){this._context=t,this._alpha=e}kF.prototype={areaStart:Ai,areaEnd:Ai,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Y1(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const b2e=function t(e){function r(n){return e?new kF(n,e):new X1(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function EF(t,e){this._context=t,this._alpha=e}EF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,n=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Y1(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const _2e=function t(e){function r(n){return e?new EF(n,e):new J1(n,0)}return r.alpha=function(n){return t(+n)},r}(.5);function NF(t){this._context=t}NF.prototype={areaStart:Ai,areaEnd:Ai,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function C2e(t){return new NF(t)}function o5(t){return t<0?-1:1}function l5(t,e,r){var n=t._x1-t._x0,s=e-t._x1,a=(t._y1-t._y0)/(n||s<0&&-0),o=(r-t._y1)/(s||n<0&&-0),l=(a*s+o*n)/(n+s);return(o5(a)+o5(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function A5(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function zm(t,e,r){var n=t._x0,s=t._y0,a=t._x1,o=t._y1,l=(a-n)/3;t._context.bezierCurveTo(n+l,s+l*e,a-l,o-l*r,a,o)}function $f(t){this._context=t}$f.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zm(this,this._t0,A5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,zm(this,A5(this,r=l5(this,t,e)),r);break;default:zm(this,this._t0,r=l5(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function FF(t){this._context=new TF(t)}(FF.prototype=Object.create($f.prototype)).point=function(t,e){$f.prototype.point.call(this,e,t)};function TF(t){this._context=t}TF.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,s,a){this._context.bezierCurveTo(e,t,n,r,a,s)}};function B2e(t){return new $f(t)}function S2e(t){return new FF(t)}function UF(t){this._context=t}UF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=c5(t),s=c5(e),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function c5(t){var e,r=t.length-1,n,s=new Array(r),a=new Array(r),o=new Array(r);for(s[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)s[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(s[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=s[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(s[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)s[e]=(o[e]-s[e+1])/a[e];for(a[r-1]=(t[r]+s[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-s[e+1];return[s,a]}function j2e(t){return new UF(t)}function _g(t,e){this._context=t,this._t=e}_g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function k2e(t){return new _g(t,.5)}function E2e(t){return new _g(t,0)}function N2e(t){return new _g(t,1)}function ql(t,e){if((o=t.length)>1)for(var r=1,n,s,a=t[e[0]],o,l=a.length;r<o;++r)for(s=a,a=t[e[r]],n=0;n<l;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Xl(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function F2e(t,e){return t[e]}function T2e(t){const e=[];return e.key=t,e}function U2e(){var t=Pe([]),e=Xl,r=ql,n=F2e;function s(a){var o=Array.from(t.apply(this,arguments),T2e),l,A=o.length,u=-1,h;for(const c of a)for(l=0,++u;l<A;++l)(o[l][u]=[0,+n(c,o[l].key,u,a)]).data=c;for(l=0,h=yg(e(o));l<A;++l)o[h[l]].index=l;return r(o,h),o}return s.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Pe(Array.from(a)),s):t},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:Pe(+a),s):n},s.order=function(a){return arguments.length?(e=a==null?Xl:typeof a=="function"?a:Pe(Array.from(a)),s):e},s.offset=function(a){return arguments.length?(r=a??ql,s):r},s}function Q2e(t,e){if((n=t.length)>0){for(var r,n,s=0,a=t[0].length,o;s<a;++s){for(o=r=0;r<n;++r)o+=t[r][s][1]||0;if(o)for(r=0;r<n;++r)t[r][s][1]/=o}ql(t,e)}}function I2e(t,e){if((A=t.length)>0)for(var r,n=0,s,a,o,l,A,u=t[e[0]].length;n<u;++n)for(o=l=0,r=0;r<A;++r)(a=(s=t[e[r]][n])[1]-s[0])>0?(s[0]=o,s[1]=o+=a):a<0?(s[1]=l,s[0]=l+=a):(s[0]=0,s[1]=a)}function P2e(t,e){if((s=t.length)>0){for(var r=0,n=t[e[0]],s,a=n.length;r<a;++r){for(var o=0,l=0;o<s;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}ql(t,e)}}function D2e(t,e){if(!(!((o=t.length)>0)||!((a=(s=t[e[0]]).length)>0))){for(var r=0,n=1,s,a,o;n<a;++n){for(var l=0,A=0,u=0;l<o;++l){for(var h=t[e[l]],c=h[n][1]||0,d=h[n-1][1]||0,f=(c-d)/2,g=0;g<l;++g){var y=t[e[g]],v=y[n][1]||0,m=y[n-1][1]||0;f+=v-m}A+=c,u+=f*c}s[n-1][1]+=s[n-1][0]=r,A&&(r-=u/A)}s[n-1][1]+=s[n-1][0]=r,ql(t,e)}}function QF(t){var e=t.map(M2e);return Xl(t).sort(function(r,n){return e[r]-e[n]})}function M2e(t){for(var e=-1,r=0,n=t.length,s,a=-1/0;++e<n;)(s=+t[e][1])>a&&(a=s,r=e);return r}function IF(t){var e=t.map(PF);return Xl(t).sort(function(r,n){return e[r]-e[n]})}function PF(t){for(var e=0,r=-1,n=t.length,s;++r<n;)(s=+t[r][1])&&(e+=s);return e}function R2e(t){return IF(t).reverse()}function $2e(t){var e=t.length,r,n,s=t.map(PF),a=QF(t),o=0,l=0,A=[],u=[];for(r=0;r<e;++r)n=a[r],o<l?(o+=s[n],A.push(n)):(l+=s[n],u.push(n));return u.reverse().concat(A)}function O2e(t){return Xl(t).reverse()}const L2e=Object.freeze(Object.defineProperty({__proto__:null,arc:WCe,area:Df,areaRadial:cv,curveBasis:f2e,curveBasisClosed:g2e,curveBasisOpen:m2e,curveBumpX:AF,curveBumpY:cF,curveBundle:p2e,curveCardinal:y2e,curveCardinalClosed:v2e,curveCardinalOpen:x2e,curveCatmullRom:w2e,curveCatmullRomClosed:b2e,curveCatmullRomOpen:_2e,curveLinear:zu,curveLinearClosed:C2e,curveMonotoneX:B2e,curveMonotoneY:S2e,curveNatural:j2e,curveStep:k2e,curveStepAfter:N2e,curveStepBefore:E2e,line:vg,lineRadial:Av,link:xg,linkHorizontal:r2e,linkRadial:s2e,linkVertical:n2e,pie:JCe,pointRadial:JA,radialArea:cv,radialLine:Av,stack:U2e,stackOffsetDiverging:I2e,stackOffsetExpand:Q2e,stackOffsetNone:ql,stackOffsetSilhouette:P2e,stackOffsetWiggle:D2e,stackOrderAppearance:QF,stackOrderAscending:IF,stackOrderDescending:R2e,stackOrderInsideOut:$2e,stackOrderNone:Xl,stackOrderReverse:O2e,symbol:h2e,symbolAsterisk:uF,symbolCircle:wg,symbolCross:dF,symbolDiamond:fF,symbolDiamond2:gF,symbolPlus:mF,symbolSquare:pF,symbolSquare2:yF,symbolStar:xF,symbolTimes:dv,symbolTriangle:wF,symbolTriangle2:bF,symbolWye:_F,symbolX:dv,symbols:i5,symbolsFill:i5,symbolsStroke:d2e},Symbol.toStringTag,{value:"Module"})),u5=t=>{const e=t._y1!==void 0?t._y1:t._y;return e!=null&&t._y0!==null},d5=t=>e=>t.x(e._x1!==void 0?e._x1:e._x),Gm=t=>e=>t.y(e._y1!==void 0?e._y1:e._y),H2e=t=>e=>-1*t.x(e._x1!==void 0?e._x1:e._x)+Math.PI/2,DF=t=>`curve${(r=>r&&r[0].toUpperCase()+r.slice(1))(t)}`,K2e=t=>`${DF(t)}Closed`,Of=t=>{const{interpolation:e}=t;if(typeof e=="function")return e;if(typeof e=="string"){const{polar:r,openCurve:n=!r}=t,s=n?DF(e):K2e(e);return L2e[s]}return zu},MF=t=>{const{polar:e,scale:r,horizontal:n}=t;return e?Av().defined(u5).curve(Of(t)).angle(H2e(r)).radius(Gm(r)):vg().defined(u5).curve(Of(t)).x(n?Gm(r):d5(r)).y(n?d5(r):Gm(r))};function z2e(t,e,r){return`M ${t}, ${e}
      m ${-r}, 0
      a ${r}, ${r} 0 1,0 ${r*2},0
      a ${r}, ${r} 0 1,0 ${-r*2},0`}function G2e(t,e,r){const n=.87*r,s=t-n,a=e+n,o=t+n-s;return`M ${s}, ${a}
      h${o}
      v-${o}
      h-${o}
      z`}function W2e(t,e,r){const n=.87*r,s=Math.sqrt(2*(n*n));return`M ${t}, ${e+s}
      l ${s}, -${s}
      l -${s}, -${s}
      l -${s}, ${s}
      l ${s}, ${s}
      z`}function V2e(t,e,r){const n=r/2*Math.sqrt(3),s=t-r,a=t+r,o=e-r,l=e+n;return`M ${s}, ${o}
      L ${a}, ${o}
      L ${t}, ${l}
      z`}function q2e(t,e,r){const n=r/2*Math.sqrt(3),s=t-r,a=t+r,o=e-n,l=e+r;return`M ${s}, ${l}
      L ${a}, ${l}
      L ${t}, ${o}
      z`}function X2e(t,e,r){const n=1.1*r,s=n/1.5;return`
      M ${t-s/2}, ${e+n}
      v-${s}
      h-${s}
      v-${s}
      h${s}
      v-${s}
      h${s}
      v${s}
      h${s}
      v${s}
      h-${s}
      v${s}
      z`}function J2e(t,e,r){const n=.8*r,s=n/1.5;return`
      M ${t-s/2}, ${e+n+s}
      v-${s*2}
      h-${s}
      v-${s}
      h${s}
      v-${s}
      h${s}
      v${s}
      h${s}
      v${s}
      h-${s}
      v${s*2}
      z`}function Y2e(t,e,r){const n=1.1*r,s=n-n*.3,a=t-n,o=e+s/2,l=t+n-a;return`M ${a}, ${o}
      h${l}
      v-${s}
      h-${l}
      z`}function Z2e(t,e,r){const n=1.35*r,s=Math.PI/5;return`M ${A1(10).map(o=>{const l=o%2===0?n:n/2;return`${l*Math.sin(s*(o+1))+t},
        ${l*Math.cos(s*(o+1))+e}`}).join("L")} z`}const eBe=Object.freeze(Object.defineProperty({__proto__:null,circle:z2e,cross:J2e,diamond:W2e,minus:Y2e,plus:X2e,square:G2e,star:Z2e,triangleDown:V2e,triangleUp:q2e},Symbol.toStringTag,{value:"Module"})),tBe={blue:"#4F7DA1",pink:"#E2A37F",teal:"#00796B",purple:"#DF948A",green:"#8BC34A",orange:"#F4511E",cyan:"#006064",red:"#DF5A49",yellow:"#FFF59D"},rl=["#252525","#525252","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0"],Nr="#252525",Wm="#969696",rBe=["#334D5C","#45B29D","#EFC94C","#E27A3F","#DF5A49","#4F7DA1","#55DBC1","#EFDA97","#E2A37F","#DF948A"],nBe=["#428517","#77D200","#D6D305","#EC8E19","#C92B05"],sBe=["#940031","#C43343","#DC5429","#FF821D","#FFAF55"],aBe=["#2746B9","#0B69D4","#2794DB","#31BB76","#60E83B"],iBe=["#FCAE91","#FB6A4A","#DE2D26","#A50F15","#750B0E"],oBe=["#354722","#466631","#649146","#8AB25C","#A9C97E"],lBe=["#002C61","#004B8F","#006BC9","#3795E5","#65B4F4"],ABe="'Gill Sans', 'Seravek', 'Trebuchet MS', sans-serif",cBe="normal",uBe=14,sn={width:450,height:300,padding:50,colorScale:rl},Lt={fontFamily:ABe,fontSize:uBe,letterSpacing:cBe,padding:10,fill:Nr,stroke:"transparent"},dBe=Object.assign({textAnchor:"middle"},Lt),hBe="round",fBe="round",gBe={palette:{colors:tBe,grayscale:rl,qualitative:rBe,heatmap:nBe,warm:sBe,cool:aBe,red:iBe,green:oBe,blue:lBe},area:Object.assign({style:{data:{fill:Nr},labels:Lt}},sn),axis:Object.assign({style:{axis:{fill:"transparent",stroke:Nr,strokeWidth:1,strokeLinecap:hBe,strokeLinejoin:fBe},axisLabel:Object.assign({},dBe,{padding:25}),grid:{fill:"none",stroke:"none",pointerEvents:"painted"},ticks:{fill:"transparent",size:1,stroke:"transparent"},tickLabels:Lt}},sn),bar:Object.assign({style:{data:{fill:Nr,padding:8,strokeWidth:0},labels:Lt}},sn),boxplot:Object.assign({style:{max:{padding:8,stroke:Nr,strokeWidth:1},maxLabels:Object.assign({},Lt,{padding:3}),median:{padding:8,stroke:Nr,strokeWidth:1},medianLabels:Object.assign({},Lt,{padding:3}),min:{padding:8,stroke:Nr,strokeWidth:1},minLabels:Object.assign({},Lt,{padding:3}),q1:{padding:8,fill:Wm},q1Labels:Object.assign({},Lt,{padding:3}),q3:{padding:8,fill:Wm},q3Labels:Object.assign({},Lt,{padding:3})},boxWidth:20},sn),candlestick:Object.assign({style:{data:{stroke:Nr,strokeWidth:1},labels:Object.assign({},Lt,{padding:5})},candleColors:{positive:"#ffffff",negative:Nr}},sn),chart:sn,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",stroke:Nr,strokeWidth:2},labels:Lt}},sn),group:Object.assign({colorScale:rl},sn),histogram:Object.assign({style:{data:{fill:Wm,stroke:Nr,strokeWidth:2},labels:Lt}},sn),legend:{colorScale:rl,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle"},labels:Lt,title:Object.assign({},Lt,{padding:5})}},line:Object.assign({style:{data:{fill:"transparent",stroke:Nr,strokeWidth:2},labels:Lt}},sn),pie:{style:{data:{padding:10,stroke:"transparent",strokeWidth:1},labels:Object.assign({},Lt,{padding:20})},colorScale:rl,width:400,height:400,padding:50},scatter:Object.assign({style:{data:{fill:Nr,stroke:"transparent",strokeWidth:0},labels:Lt}},sn),stack:Object.assign({colorScale:rl},sn),tooltip:{style:Object.assign({},Lt,{padding:0,pointerEvents:"none"}),flyoutStyle:{stroke:Nr,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},flyoutPadding:5,cornerRadius:5,pointerLength:10},voronoi:Object.assign({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:Object.assign({},Lt,{padding:5,pointerEvents:"none"}),flyout:{stroke:Nr,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},sn)},RF="#FFF59D",$F="#F4511E",mBe="#DCE775",OF="#8BC34A",LF="#00796B",HF="#006064",Nd=[$F,RF,mBe,OF,LF,HF],hv="#ECEFF1",fv="#90A4AE",Fr="#455A64",YA="#212121",pBe={blue:"#4F7DA1",pink:"#E2A37F",teal:LF,purple:"#DF948A",green:OF,orange:$F,cyan:HF,red:"#DF5A49",yellow:RF},yBe=[hv,fv,Fr,YA],vBe=["#334D5C","#45B29D","#EFC94C","#E27A3F","#DF5A49","#4F7DA1","#55DBC1","#EFDA97","#E2A37F","#DF948A"],xBe=["#428517","#77D200","#D6D305","#EC8E19","#C92B05"],wBe=["#940031","#C43343","#DC5429","#FF821D","#FFAF55"],bBe=["#2746B9","#0B69D4","#2794DB","#31BB76","#60E83B"],_Be=["#FCAE91","#FB6A4A","#DE2D26","#A50F15","#750B0E"],CBe=["#354722","#466631","#649146","#8AB25C","#A9C97E"],BBe=["#002C61","#004B8F","#006BC9","#3795E5","#65B4F4"],SBe="'Helvetica Neue', 'Helvetica', sans-serif",jBe="normal",kBe=12,Os=8,zr={width:350,height:350,padding:50},Ht={fontFamily:SBe,fontSize:kBe,letterSpacing:jBe,padding:Os,fill:Fr,stroke:"transparent",strokeWidth:0},EBe=Object.assign({textAnchor:"middle"},Ht),NBe="10, 5",Vm="round",qm="round",FBe={palette:{colors:pBe,grayscale:yBe,qualitative:vBe,heatmap:xBe,warm:wBe,cool:bBe,red:_Be,green:CBe,blue:BBe},area:Object.assign({style:{data:{fill:YA},labels:Ht}},zr),axis:Object.assign({style:{axis:{fill:"transparent",stroke:fv,strokeWidth:2,strokeLinecap:Vm,strokeLinejoin:qm},axisLabel:Object.assign({},EBe,{padding:Os,stroke:"transparent"}),grid:{fill:"none",stroke:hv,strokeDasharray:NBe,strokeLinecap:Vm,strokeLinejoin:qm,pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:fv,strokeWidth:1,strokeLinecap:Vm,strokeLinejoin:qm},tickLabels:Object.assign({},Ht,{fill:Fr})}},zr),polarDependentAxis:Object.assign({style:{ticks:{fill:"transparent",size:1,stroke:"transparent"}}}),bar:Object.assign({style:{data:{fill:Fr,padding:Os,strokeWidth:0},labels:Ht}},zr),boxplot:Object.assign({style:{max:{padding:Os,stroke:Fr,strokeWidth:1},maxLabels:Object.assign({},Ht,{padding:3}),median:{padding:Os,stroke:Fr,strokeWidth:1},medianLabels:Object.assign({},Ht,{padding:3}),min:{padding:Os,stroke:Fr,strokeWidth:1},minLabels:Object.assign({},Ht,{padding:3}),q1:{padding:Os,fill:Fr},q1Labels:Object.assign({},Ht,{padding:3}),q3:{padding:Os,fill:Fr},q3Labels:Object.assign({},Ht,{padding:3})},boxWidth:20},zr),candlestick:Object.assign({style:{data:{stroke:Fr},labels:Object.assign({},Ht,{padding:5})},candleColors:{positive:"#ffffff",negative:Fr}},zr),chart:zr,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",opacity:1,stroke:Fr,strokeWidth:2},labels:Ht}},zr),group:Object.assign({colorScale:Nd},zr),histogram:Object.assign({style:{data:{fill:Fr,stroke:YA,strokeWidth:2},labels:Ht}},zr),legend:{colorScale:Nd,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle"},labels:Ht,title:Object.assign({},Ht,{padding:5})}},line:Object.assign({style:{data:{fill:"transparent",opacity:1,stroke:Fr,strokeWidth:2},labels:Ht}},zr),pie:Object.assign({colorScale:Nd,style:{data:{padding:Os,stroke:hv,strokeWidth:1},labels:Object.assign({},Ht,{padding:20})}},zr),scatter:Object.assign({style:{data:{fill:Fr,opacity:1,stroke:"transparent",strokeWidth:0},labels:Ht}},zr),stack:Object.assign({colorScale:Nd},zr),tooltip:{style:Object.assign({},Ht,{padding:0,pointerEvents:"none"}),flyoutStyle:{stroke:YA,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},flyoutPadding:5,cornerRadius:5,pointerLength:10},voronoi:Object.assign({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:Object.assign({},Ht,{padding:5,pointerEvents:"none"}),flyout:{stroke:YA,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},zr)},lt={white:"#FFFFFF",50:"#FAFAFA",100:"#F2F2F2",200:"#E8E8E8",300:"#E0E0E0",400:"#D1D1D1",500:"#757575",600:"#5C5C5C",700:"#424242",800:"#333333",900:"#292929",black:"#0F0F0F"},Lf={100:"#FFEAB6",300:"#FFD66E",500:"#FCB400",900:"#B87503"},Hf={100:"#FEE2D5",300:"#FFA981",500:"#FF6F2C",700:"#FF4E1B",900:"#D74D26"},Gu={100:"#FFDCE5",300:"#FF9EB7",500:"#F82B60",700:"#D31A3D",900:"#BA1E45"},KF={100:"#EDE3FE",300:"#CDB0FF",500:"#8B46FF",900:"#6B1CB0"},Wu={100:"#CFDFFF",300:"#9CC7FF",500:"#2D7FF9",700:"#0056B3",900:"#2750AE"},Z1={100:"#D0F0FD",300:"#77D1F3",500:"#18BFFF",900:"#0B76B7"},zF={100:"#C2F5E9",300:"#72DDC3",500:"#20D9D2",900:"#06A09B"},Jl={100:"#D1F7C4",300:"#93E088",500:"#20C933",700:"#1B9B2A",900:"#338A17"},GF={blue:Wu[500],cyan:Z1[500],green:Jl[500],yellow:Lf[500],orange:Hf[500],red:Gu[500],purple:KF[500],teal:zF[500]},ja=Object.values(GF),TBe=[lt[100],lt[300],lt[500],lt[700],lt[900]],UBe=[Lf[300],Lf[500],Hf[500],Hf[900],Gu[500]],QBe=[KF[500],Wu[500],Z1[500],zF[500],Jl[500]],IBe=[Jl[900],Jl[500],Lf[500],Hf[500],Gu[500]],PBe=Object.values(Gu),DBe=Object.values(Jl),MBe=Object.values(Wu),PA=Wu[500],RBe="'Inter', 'Helvetica Neue', 'Seravek', 'Helvetica', sans-serif",$Be="normal",OBe=12,Ls=8,Gr={width:450,height:300,padding:60,colorScale:ja},kt={fontFamily:RBe,fontSize:OBe,fontWeight:300,letterSpacing:$Be,padding:Ls,fill:lt[900],stroke:"transparent"},LBe=Object.assign({textAnchor:"middle"},kt),h5="10, 5",xi="round",Ho="round",wi=1,HBe={palette:{colors:GF,grayscale:TBe,qualitative:ja,heatmap:IBe,warm:UBe,cool:QBe,red:PBe,green:DBe,blue:MBe},area:Object.assign({style:{data:{fill:PA,strokeWidth:2,fillOpacity:.5},labels:kt}},Gr),axis:Object.assign({style:{axis:{fill:"transparent",stroke:lt[500],strokeWidth:1,strokeLinecap:xi,strokeLinejoin:Ho},axisLabel:Object.assign({},LBe,{padding:35,stroke:"transparent"}),grid:{fill:"none",stroke:"none",painterEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:"transparent"},tickLabels:kt}},Gr),polarAxis:Object.assign({style:{axis:{stroke:lt[500]},grid:{stroke:lt[400],strokeDasharray:h5,strokeLinecap:xi,strokeLinejoin:Ho,pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:lt[400],strokeWidth:1,strokeLinecap:xi,strokeLinejoin:Ho},tickLabels:kt}}),polarDependentAxis:Object.assign({style:{axis:{stroke:lt[500]},grid:{stroke:lt[400],strokeDasharray:h5,strokeLinecap:xi,strokeLinejoin:Ho,pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:lt[300],strokeWidth:1,strokeLinecap:xi,strokeLinejoin:Ho},tickLabels:kt}}),bar:Object.assign({style:{data:{fill:PA,padding:Ls,strokeWidth:1,fillOpacity:.5},labels:kt},cornerRadius:{top:wi}},Gr),boxplot:Object.assign({style:{max:{padding:Ls,stroke:lt[400],strokeWidth:2},maxLabels:Object.assign({},kt,{padding:3}),median:{padding:Ls,stroke:lt.white,strokeWidth:2},medianLabels:Object.assign({},kt,{padding:3}),min:{padding:Ls,stroke:lt[400],strokeWidth:2},minLabels:Object.assign({},kt,{padding:3}),q1:{padding:Ls,fill:ja[0],rx:wi,strokeWidth:2},q1Labels:Object.assign({},kt,{padding:3}),q3:{padding:Ls,fill:ja[1],rx:wi},q3Labels:Object.assign({},kt,{padding:3})},boxWidth:20},Gr),candlestick:Object.assign({style:{data:{stroke:lt[300],strokeWidth:0,rx:wi},labels:Object.assign({},kt,{padding:5})},candleColors:{positive:Jl[500],negative:Gu[500]},wickStrokeWidth:2},Gr),chart:Gr,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",opacity:1,stroke:lt[700],strokeWidth:2,strokeLinecap:xi},labels:kt}},Gr),group:Object.assign({colorScale:ja},Gr),histogram:Object.assign({style:{data:{fill:Z1[500],fillOpacity:.5},labels:kt},binSpacing:4,cornerRadius:{top:wi}},Gr),label:kt,legend:{colorScale:ja,gutter:24,borderPadding:10,orientation:"horizontal",titleOrientation:"top",centerTitle:!0,style:{data:{type:"circle"},labels:{...kt,fontSize:12},title:Object.assign({},kt,{padding:Ls,fontSize:16}),border:{stroke:lt[200],strokeWidth:2,padding:16}}},line:Object.assign({style:{data:{fill:"transparent",opacity:1,stroke:PA,strokeWidth:2,strokeLinecap:xi,strokeLinejoin:Ho},labels:kt}},Gr),pie:Object.assign({style:{parent:{backgroundColor:lt.white},data:{padding:Ls,stroke:lt.white,strokeWidth:1},labels:{...kt,padding:20,fill:lt[600],fontSize:10}},colorScale:ja,cornerRadius:wi},Gr),scatter:Object.assign({style:{data:{fill:PA,opacity:1,stroke:"transparent",strokeWidth:0},labels:{...kt,padding:20}}},Gr),stack:Object.assign({colorScale:ja},Gr),tooltip:{style:Object.assign({},kt,{padding:0,pointerEvents:"none"}),flyoutStyle:{stroke:lt[300],strokeWidth:2,fill:lt.white,pointerEvents:"none"},flyoutPadding:{top:8,bottom:8,left:16,right:16},cornerRadius:wi,pointerLength:4},voronoi:Object.assign({style:{data:{fill:Wu[100],stroke:PA,strokeWidth:2},labels:Object.assign({},kt,{padding:5,pointerEvents:"none"}),flyout:{stroke:lt[900],strokeWidth:1,fill:lt[100],pointerEvents:"none"},padding:{left:2,bottom:2}}},Gr)},fA={grayscale:gBe,material:FBe,clean:HBe},gv=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(r.length>0)return r.reduce((a,o)=>[a,gv(o)].join(" "),gv(t)).trim();if(t==null||typeof t=="string")return t;const s=[];for(const a in t)if(t.hasOwnProperty(a)){const o=t[a];s.push(`${a}(${o})`)}return s.join(" ").trim()},f5={"American Typewriter":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.25,.4203125,.3296875,.6,.6375,.8015625,.8203125,.1875,.45625,.45625,.6375,.5,.2734375,.309375,.2734375,.4390625,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.2734375,.2734375,.5,.5,.5,.6,.6921875,.7640625,.6921875,.6375,.728125,.6734375,.6203125,.7109375,.784375,.3828125,.6421875,.7859375,.6375,.9484375,.7640625,.65625,.6375,.65625,.7296875,.6203125,.6375,.7109375,.740625,.940625,.784375,.7578125,.6203125,.4375,.5,.4375,.5,.5,.4921875,.5734375,.5890625,.5109375,.6,.528125,.43125,.5578125,.6375,.3109375,.40625,.6234375,.309375,.928125,.6375,.546875,.6,.58125,.4921875,.4921875,.4,.6203125,.625,.825,.6375,.640625,.528125,.5,.5,.5,.6671875],avg:.5793421052631578},Arial:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.278125,.35625,.55625,.55625,.890625,.6671875,.1921875,.334375,.334375,.390625,.584375,.278125,.334375,.278125,.278125,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.584375,.584375,.584375,.55625,1.015625,.6703125,.6671875,.7234375,.7234375,.6671875,.6109375,.778125,.7234375,.278125,.5,.6671875,.55625,.834375,.7234375,.778125,.6671875,.778125,.7234375,.6671875,.6109375,.7234375,.6671875,.9453125,.6671875,.6671875,.6109375,.278125,.278125,.278125,.4703125,.584375,.334375,.55625,.55625,.5,.55625,.55625,.3125,.55625,.55625,.2234375,.2703125,.5,.2234375,.834375,.55625,.55625,.55625,.55625,.346875,.5,.278125,.55625,.5,.7234375,.5,.5,.5,.334375,.2609375,.334375,.584375],avg:.528733552631579},"Arial Black":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.33125,.334375,.5,.6609375,.6671875,1,.890625,.278125,.390625,.390625,.55625,.6609375,.334375,.334375,.334375,.28125,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.334375,.334375,.6609375,.6609375,.6609375,.6109375,.7453125,.78125,.778125,.778125,.778125,.7234375,.6671875,.834375,.834375,.390625,.6671875,.834375,.6671875,.9453125,.834375,.834375,.7234375,.834375,.78125,.7234375,.7234375,.834375,.7796875,1.003125,.78125,.78125,.7234375,.390625,.28125,.390625,.6609375,.5125,.334375,.6671875,.6671875,.6671875,.6671875,.6671875,.41875,.6671875,.6671875,.334375,.384375,.6671875,.334375,1,.6671875,.6671875,.6671875,.6671875,.4703125,.6109375,.4453125,.6671875,.6140625,.946875,.6671875,.615625,.55625,.390625,.278125,.390625,.6609375],avg:.6213157894736842},Baskerville:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.25,.25,.40625,.6671875,.490625,.875,.7015625,.178125,.2453125,.246875,.4171875,.6671875,.25,.3125,.25,.521875,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.25,.25,.6671875,.6671875,.6671875,.396875,.9171875,.684375,.615625,.71875,.7609375,.625,.553125,.771875,.803125,.3546875,.515625,.78125,.6046875,.928125,.75,.8234375,.5625,.96875,.7296875,.5421875,.6984375,.771875,.7296875,.9484375,.771875,.678125,.6359375,.3640625,.521875,.3640625,.46875,.5125,.334375,.46875,.521875,.428125,.521875,.4375,.3890625,.4765625,.53125,.25,.359375,.4640625,.240625,.803125,.53125,.5,.521875,.521875,.365625,.334375,.2921875,.521875,.4640625,.678125,.4796875,.465625,.428125,.4796875,.5109375,.4796875,.6671875],avg:.5323519736842108},Courier:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5984375,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6078125,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.61875,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.615625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6140625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625],avg:.6020559210526316},"Courier New":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5984375,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625],avg:.6015296052631579},cursive:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.1921875,.24375,.40625,.5671875,.3984375,.721875,.909375,.2328125,.434375,.365625,.4734375,.5578125,.19375,.3484375,.19375,.7734375,.503125,.4171875,.5453125,.45,.6046875,.4703125,.5984375,.55625,.503125,.5546875,.20625,.2,.5625,.5546875,.546875,.403125,.70625,.734375,.7078125,.64375,.85,.753125,.75,.6484375,1.0765625,.44375,.5359375,.8359375,.653125,1.0109375,1.1515625,.6796875,.6984375,1.0625,.8234375,.5125,.9234375,.8546875,.70625,.9109375,.7421875,.715625,.6015625,.4640625,.3359375,.4109375,.5421875,.5421875,.4328125,.5125,.5,.3859375,.7375,.359375,.75625,.540625,.5328125,.3203125,.5296875,.5015625,.484375,.7890625,.5640625,.4203125,.703125,.471875,.4734375,.35,.4125,.5640625,.471875,.6484375,.5296875,.575,.4140625,.415625,.20625,.3796875,.5421875],avg:.5604440789473684},fantasy:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.215625,.2625,.3265625,.6109375,.534375,.7625,.7828125,.2,.4359375,.4359375,.3765625,.5109375,.2796875,.4609375,.2796875,.5296875,.6640625,.253125,.521875,.4765625,.6640625,.490625,.528125,.5546875,.496875,.5421875,.2796875,.2796875,.5625,.4609375,.5625,.4828125,.609375,.740625,.7234375,.740625,.8265625,.7234375,.6171875,.7359375,.765625,.240625,.5453125,.715625,.6078125,.8640625,.653125,.9125,.6484375,.946875,.6921875,.653125,.6953125,.8015625,.58125,.784375,.671875,.6265625,.690625,.4359375,.5296875,.4359375,.53125,.5,.2875,.5375,.603125,.4984375,.60625,.53125,.434375,.6421875,.56875,.209375,.4671875,.5484375,.2203125,.709375,.55,.5984375,.6140625,.5765625,.40625,.4734375,.3734375,.559375,.4421875,.6421875,.4890625,.578125,.4484375,.2546875,.2203125,.2546875,.55],avg:.536496710526316},Geneva:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3328125,.3046875,.5,.6671875,.6671875,.90625,.728125,.3046875,.446875,.446875,.5078125,.6671875,.3046875,.3796875,.3046875,.5390625,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.3046875,.3046875,.6671875,.6671875,.6671875,.56875,.871875,.728125,.6375,.6515625,.7015625,.5765625,.5546875,.675,.690625,.2421875,.4921875,.6640625,.584375,.7890625,.709375,.7359375,.584375,.78125,.60625,.60625,.640625,.6671875,.728125,.946875,.6109375,.6109375,.5765625,.446875,.5390625,.446875,.6671875,.6671875,.5921875,.5546875,.6109375,.546875,.603125,.5765625,.390625,.6109375,.584375,.2359375,.334375,.5390625,.2359375,.8953125,.584375,.60625,.603125,.603125,.3875,.509375,.44375,.584375,.565625,.78125,.53125,.571875,.5546875,.4515625,.246875,.4515625,.6671875],avg:.5762664473684211},Georgia:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2421875,.33125,.4125,.64375,.6109375,.81875,.7109375,.215625,.375,.375,.4734375,.64375,.2703125,.375,.2703125,.46875,.6140625,.4296875,.559375,.553125,.565625,.5296875,.5671875,.503125,.596875,.5671875,.3125,.3125,.64375,.64375,.64375,.4796875,.9296875,.715625,.6546875,.6421875,.75,.6546875,.6,.7265625,.815625,.390625,.51875,.7203125,.6046875,.928125,.7671875,.7453125,.6109375,.7453125,.7234375,.5625,.61875,.7578125,.70625,.99375,.7125,.6640625,.6015625,.375,.46875,.375,.64375,.65,.5,.5046875,.56875,.4546875,.575,.484375,.39375,.509375,.5828125,.29375,.3671875,.546875,.2875,.88125,.5921875,.5390625,.571875,.5640625,.4109375,.4328125,.3453125,.5765625,.5203125,.75625,.50625,.5171875,.4453125,.43125,.375,.43125,.64375],avg:.5551809210526316},"Gill Sans":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2765625,.271875,.3546875,.584375,.5421875,.6765625,.625,.1890625,.3234375,.3234375,.4171875,.584375,.2203125,.3234375,.2203125,.28125,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.2203125,.2296875,.584375,.584375,.584375,.334375,1.0109375,.6671875,.5640625,.709375,.75,.5,.4703125,.740625,.7296875,.25,.3125,.65625,.490625,.78125,.78125,.8234375,.5109375,.8234375,.6046875,.459375,.6046875,.709375,.6046875,1.0421875,.709375,.6046875,.646875,.334375,.28125,.334375,.4703125,.5828125,.334375,.428125,.5,.4390625,.5109375,.4796875,.296875,.428125,.5,.2203125,.2265625,.5,.2203125,.771875,.5,.553125,.5,.5,.3984375,.3859375,.334375,.5,.4390625,.7203125,.5,.4390625,.4171875,.334375,.2609375,.334375,.584375],avg:.4933717105263159},Helvetica:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625],avg:.5279276315789471},"Helvetica Neue":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.259375,.4265625,.55625,.55625,1,.6453125,.278125,.2703125,.26875,.353125,.6,.278125,.3890625,.278125,.36875,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.6,.6,.6,.55625,.8,.6625,.6859375,.7234375,.7046875,.6125,.575,.759375,.7234375,.259375,.5203125,.6703125,.55625,.871875,.7234375,.7609375,.6484375,.7609375,.6859375,.6484375,.575,.7234375,.6140625,.9265625,.6125,.6484375,.6125,.259375,.36875,.259375,.6,.5,.25625,.5375,.59375,.5375,.59375,.5375,.2984375,.575,.55625,.2234375,.2375,.5203125,.2234375,.853125,.55625,.575,.59375,.59375,.334375,.5,.315625,.55625,.5,.759375,.51875,.5,.48125,.334375,.2234375,.334375,.6],avg:.5279440789473684},"Hoefler Text":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2359375,.2234375,.3921875,.7125,.49375,.8859375,.771875,.2125,.3078125,.309375,.375,.4234375,.234375,.3125,.234375,.3,.5828125,.365625,.434375,.3921875,.5234375,.3984375,.5125,.4328125,.46875,.5125,.234375,.234375,.515625,.4234375,.515625,.340625,.7609375,.7359375,.6359375,.721875,.8125,.6375,.5875,.8078125,.853125,.4296875,.503125,.78125,.609375,.9609375,.8515625,.8140625,.6125,.8140625,.71875,.49375,.7125,.76875,.771875,1.125,.7765625,.7734375,.65625,.321875,.3078125,.321875,.3546875,.5,.3375,.446875,.5359375,.45,.5296875,.4546875,.425,.4921875,.54375,.2671875,.240625,.5390625,.25,.815625,.5375,.5234375,.5390625,.5421875,.365625,.36875,.35625,.5171875,.5015625,.75,.5,.509375,.44375,.2421875,.14375,.2421875,.35],avg:.5116447368421051},Inter:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2890625,.4671875,.634375,.6421875,.9828125,.6453125,.3,.365625,.365625,.5015625,.6625,.2890625,.4609375,.2890625,.3609375,.63125,.4078125,.6109375,.61875,.646875,.59375,.6203125,.5671875,.61875,.6203125,.2890625,.303125,.6625,.6625,.6625,.5125,.9671875,.690625,.6546875,.73125,.721875,.6015625,.590625,.746875,.74375,.26875,.571875,.671875,.565625,.9046875,.7546875,.765625,.6390625,.765625,.64375,.6421875,.646875,.7453125,.690625,.9859375,.6828125,.6796875,.6296875,.365625,.3609375,.365625,.471875,.45625,.3234375,.5625,.6125,.571875,.6125,.584375,.3703125,.6140625,.5921875,.2421875,.2548828125,.55,.2421875,.8765625,.5921875,.6,.6125,.6125,.3765625,.528125,.328125,.5921875,.5625,.81875,.546875,.5625,.553125,.4265625,.3328125,.4265625,.6625],avg:.5624362664473683},Montserrat:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2625,.2609375,.3734375,.696875,.615625,.8296875,.6703125,.203125,.3296875,.3296875,.3875,.575,.2125,.3828125,.2125,.3953125,.6625,.3625,.56875,.5640625,.6625,.5671875,.609375,.5890625,.6390625,.609375,.2125,.2125,.575,.575,.575,.5671875,1.034375,.7171875,.7546875,.7203125,.8265625,.6703125,.634375,.7734375,.8140625,.303125,.5078125,.7125,.5890625,.95625,.8140625,.8390625,.71875,.8390625,.7234375,.615625,.575,.7921875,.6984375,1.1125,.65625,.6359375,.6515625,.31875,.396875,.31875,.5765625,.5,.6,.590625,.678125,.5640625,.678125,.6046875,.375,.6875,.678125,.2703125,.365625,.6015625,.2703125,1.0625,.678125,.628125,.678125,.678125,.4015625,.4890625,.40625,.6734375,.5421875,.8796875,.534375,.5671875,.5125,.334375,.2953125,.334375,.575],avg:.571792763157895},monospace:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5984375,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6078125,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.61875,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.615625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6140625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625],avg:.6020559210526316},Overpass:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2296875,.2765625,.4203125,.68125,.584375,.8515625,.7015625,.2203125,.3453125,.3453125,.53125,.63125,.2234375,.3953125,.2234375,.509375,.65,.4046875,.6171875,.60625,.6484375,.60625,.6015625,.5375,.615625,.6015625,.2234375,.2234375,.63125,.63125,.63125,.5015625,.8203125,.696875,.6671875,.65,.6859375,.6015625,.559375,.690625,.7078125,.2953125,.565625,.678125,.58125,.8046875,.7109375,.740625,.6421875,.740625,.6765625,.6046875,.590625,.696875,.6640625,.853125,.65,.6671875,.6625,.3734375,.509375,.3734375,.63125,.5125,.4,.5328125,.5625,.51875,.5625,.546875,.3359375,.5625,.565625,.25625,.3203125,.55,.265625,.85,.565625,.5671875,.5625,.5625,.4046875,.4765625,.3796875,.565625,.521875,.7265625,.53125,.5390625,.5125,.3671875,.275,.3671875,.63125],avg:.5430756578947369},Palatino:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.25,.278125,.371875,.60625,.5,.840625,.778125,.209375,.334375,.334375,.390625,.60625,.2578125,.334375,.25,.60625,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.25,.25,.60625,.60625,.60625,.4453125,.7484375,.778125,.6109375,.709375,.775,.6109375,.55625,.7640625,.8328125,.3375,.346875,.7265625,.6109375,.946875,.83125,.7875,.6046875,.7875,.66875,.525,.6140625,.778125,.7234375,1,.6671875,.6671875,.6671875,.334375,.60625,.334375,.60625,.5,.334375,.5,.565625,.4453125,.6109375,.4796875,.340625,.55625,.5828125,.2921875,.2671875,.5640625,.2921875,.8828125,.5828125,.546875,.6015625,.5609375,.3953125,.425,.3265625,.603125,.565625,.834375,.5171875,.55625,.5,.334375,.60625,.334375,.60625],avg:.5408552631578947},RedHatText:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2328125,.2203125,.35625,.6890625,.55,.7390625,.6703125,.2140625,.4015625,.4015625,.4546875,.53125,.2203125,.45625,.2203125,.515625,.6609375,.3078125,.5484375,.5875,.61875,.5703125,.6203125,.559375,.6140625,.6203125,.2203125,.2234375,.465625,.534375,.465625,.5125,.7671875,.6609375,.6703125,.7265625,.728125,.6203125,.6109375,.8,.73125,.253125,.6,.6125,.6078125,.8625,.7390625,.8109375,.6546875,.809375,.6484375,.6234375,.6171875,.7125,.6609375,.8984375,.6546875,.646875,.60625,.3625,.5203125,.3625,.540625,.4609375,.5234375,.5265625,.584375,.509375,.5828125,.5578125,.3703125,.5828125,.553125,.2234375,.24375,.4890625,.2234375,.8453125,.553125,.58125,.584375,.5828125,.353125,.453125,.378125,.553125,.5015625,.6984375,.4875,.4984375,.459375,.3953125,.2921875,.3953125,.58125],avg:.5341940789473685},"sans-serif":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.278125,.35625,.55625,.55625,.890625,.6671875,.1921875,.334375,.334375,.390625,.584375,.278125,.334375,.278125,.303125,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.5859375,.584375,.5859375,.55625,1.015625,.6671875,.6671875,.7234375,.7234375,.6671875,.6109375,.778125,.7234375,.278125,.5,.6671875,.55625,.834375,.7234375,.778125,.6671875,.778125,.7234375,.6671875,.6109375,.7234375,.6671875,.9453125,.6671875,.6671875,.6109375,.278125,.35625,.278125,.478125,.55625,.334375,.55625,.55625,.5,.55625,.55625,.278125,.55625,.55625,.2234375,.2421875,.5,.2234375,.834375,.55625,.55625,.55625,.55625,.334375,.5,.278125,.55625,.5,.7234375,.5,.5,.5,.35625,.2609375,.3546875,.590625],avg:.5293256578947368},Seravek:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.215625,.296875,.4171875,.6734375,.4953125,.9125,.740625,.2421875,.3375,.3375,.409375,.60625,.2609375,.35625,.25625,.41875,.5921875,.3515625,.475,.4875,.5375,.509375,.5484375,.4546875,.5421875,.5484375,.25625,.2546875,.5875,.6171875,.5875,.4578125,.8140625,.6765625,.5703125,.6109375,.684375,.5109375,.4953125,.678125,.6859375,.2625,.2625,.5859375,.4734375,.846875,.709375,.740625,.509375,.740625,.584375,.5015625,.528125,.675,.5953125,.9453125,.596875,.540625,.540625,.359375,.4203125,.359375,.5109375,.421875,.4046875,.5015625,.5421875,.446875,.5453125,.484375,.38125,.5140625,.5546875,.240625,.2640625,.490625,.2765625,.8625,.5546875,.546875,.5453125,.5453125,.3625,.41875,.3890625,.5453125,.4703125,.7546875,.4921875,.4609375,.453125,.4015625,.2640625,.4015625,.58125],avg:.5044078947368421},serif:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2484375,.334375,.409375,.5,.5,.834375,.778125,.18125,.334375,.334375,.5,.5640625,.25,.334375,.25,.278125,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.278125,.278125,.5640625,.5640625,.5640625,.4453125,.921875,.7234375,.6671875,.6671875,.7234375,.6109375,.55625,.7234375,.7234375,.334375,.390625,.7234375,.6109375,.890625,.7234375,.7234375,.55625,.7234375,.6671875,.55625,.6109375,.7234375,.7234375,.9453125,.7234375,.7234375,.6109375,.334375,.340625,.334375,.4703125,.5,.3453125,.4453125,.5,.4453125,.5,.4453125,.3828125,.5,.5,.278125,.3359375,.5,.278125,.778125,.5,.5,.5,.5,.3375,.390625,.2796875,.5,.5,.7234375,.5,.5,.4453125,.48125,.2015625,.48125,.5421875],avg:.5126315789473684},Tahoma:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3109375,.3328125,.4015625,.728125,.546875,.9765625,.70625,.2109375,.3828125,.3828125,.546875,.728125,.303125,.3640625,.303125,.3953125,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.3546875,.3546875,.728125,.728125,.728125,.475,.909375,.6109375,.590625,.6015625,.6796875,.5625,.521875,.66875,.6765625,.3734375,.4171875,.6046875,.4984375,.771875,.66875,.7078125,.5515625,.7078125,.6375,.5578125,.5875,.65625,.60625,.903125,.58125,.5890625,.559375,.3828125,.39375,.3828125,.728125,.5625,.546875,.525,.553125,.4625,.553125,.5265625,.3546875,.553125,.5578125,.2296875,.328125,.51875,.2296875,.840625,.5578125,.54375,.553125,.553125,.3609375,.446875,.3359375,.5578125,.4984375,.7421875,.4953125,.4984375,.4453125,.48125,.3828125,.48125,.728125],avg:.5384374999999998},"Times New Roman":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2484375,.334375,.409375,.5,.5,.834375,.778125,.18125,.334375,.334375,.5,.5640625,.25,.334375,.25,.28125,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.278125,.278125,.5640625,.5640625,.5640625,.4453125,.921875,.7234375,.6671875,.6671875,.7234375,.6109375,.55625,.7234375,.7234375,.334375,.390625,.73125,.6109375,.890625,.7375,.7234375,.55625,.7234375,.6765625,.55625,.6109375,.7234375,.7234375,.9453125,.7234375,.7234375,.6109375,.334375,.28125,.334375,.4703125,.51875,.334375,.4453125,.503125,.4453125,.503125,.4453125,.4359375,.5,.5,.278125,.35625,.50625,.278125,.778125,.5,.5,.5046875,.5,.340625,.390625,.2796875,.5,.5,.7234375,.5,.5,.4453125,.48125,.2015625,.48125,.5421875],avg:.5134375},"Trebuchet MS":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3015625,.3671875,.325,.53125,.525,.6015625,.70625,.1609375,.3671875,.3671875,.3671875,.525,.3671875,.3671875,.3671875,.525,.525,.525,.525,.525,.525,.525,.525,.525,.525,.525,.3671875,.3671875,.525,.525,.525,.3671875,.771875,.590625,.5671875,.5984375,.6140625,.5359375,.525,.6765625,.6546875,.2796875,.4765625,.5765625,.5078125,.7109375,.6390625,.675,.5578125,.7421875,.5828125,.48125,.58125,.6484375,.5875,.853125,.5578125,.5703125,.5515625,.3671875,.3578125,.3671875,.525,.53125,.525,.5265625,.5578125,.4953125,.5578125,.546875,.375,.503125,.546875,.2859375,.3671875,.5046875,.2953125,.83125,.546875,.5375,.5578125,.5578125,.3890625,.40625,.396875,.546875,.490625,.7453125,.5015625,.49375,.475,.3671875,.525,.3671875,.525],avg:.5085197368421052},Verdana:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.35,.39375,.459375,.81875,.6359375,1.0765625,.759375,.26875,.4546875,.4546875,.6359375,.81875,.3640625,.4546875,.3640625,.4703125,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.4546875,.4546875,.81875,.81875,.81875,.546875,1,.684375,.6859375,.6984375,.771875,.6328125,.575,.7765625,.7515625,.421875,.4546875,.69375,.5578125,.84375,.7484375,.7875,.603125,.7875,.7,.684375,.6171875,.7328125,.684375,.9890625,.6859375,.615625,.6859375,.4546875,.46875,.4546875,.81875,.6421875,.6359375,.6015625,.6234375,.521875,.6234375,.596875,.384375,.6234375,.6328125,.275,.3765625,.5921875,.275,.9734375,.6328125,.6078125,.6234375,.6234375,.43125,.521875,.3953125,.6328125,.5921875,.81875,.5921875,.5921875,.5265625,.6359375,.4546875,.6359375,.81875],avg:.6171875000000003}},g5={mm:3.8,sm:38,pt:1.33,pc:16,in:96,px:1},m5={em:1,ex:.5},WF={heightOverlapCoef:1.05,lineCapitalCoef:1.15},VF={lineHeight:1,letterSpacing:"0px",fontSize:0,angle:0,fontFamily:""},KBe=t=>t*Math.PI/180,zBe=t=>{const r=t.split(",").map(n=>n.replace(/'|"/g,"")).find(n=>f5[n])||"Helvetica";return f5[r]},eb=t=>Array.isArray(t)?t:t.toString().split(/\r\n|\r|\n/g),Kf=(t,e,r)=>{const n=KBe(r);return Math.abs(Math.cos(n)*t)+Math.abs(Math.sin(n)*e)},mv=(t,e)=>{var a;const r=(a=t.match(/[a-zA-Z%]+/))==null?void 0:a[0],n=Number(t.match(/[0-9.,]+/));let s;return r?g5.hasOwnProperty(r)?s=n*g5[r]:m5.hasOwnProperty(r)?s=(e?n*e:n*VF.fontSize)*m5[r]:s=n:s=n||0,s},tb=(t,e)=>{const r=Array.isArray(t)?t[e]:t,n=_e({},r,VF);return Object.assign({},n,{fontFamily:n.fontFamily,letterSpacing:typeof n.letterSpacing=="number"?n.letterSpacing:mv(String(n.letterSpacing),n.fontSize),fontSize:typeof n.fontSize=="number"?n.fontSize:mv(String(n.fontSize))})},GBe=(t,e)=>{if(t===void 0||t===""||t===null)return 0;const r=eb(t).map((n,s)=>{const a=n.toString().length,{fontSize:o,letterSpacing:l,fontFamily:A}=tb(e,s),u=zBe(A);return n.toString().split("").map(c=>c.charCodeAt(0)<u.widths.length?u.widths[c.charCodeAt(0)]:u.avg).reduce((c,d)=>d+c,0)*o+l*Math.max(a-1,0)});return Math.max(...r)},WBe=(t,e)=>t===void 0||t===""||t===null?0:eb(t).reduce((r,n,s)=>{const a=tb(e,s),l=n.toString().match(/[(A-Z)(0-9)]/)?a.fontSize*WF.lineCapitalCoef:a.fontSize;return r+a.lineHeight*l},0),VBe=(t,e)=>{const r=Array.isArray(e)?e[0]&&e[0].angle:e&&e.angle,n=WBe(t,e),s=GBe(t,e),a=r?Kf(s,n,r):s,o=r?Kf(n,s,r):n;return{width:a,height:o*WF.heightOverlapCoef}},Xm=a6(()=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("xlink","http://www.w3.org/1999/xlink"),t.setAttribute("width","300"),t.setAttribute("height","300"),t.setAttribute("viewBox","0 0 300 300"),t.setAttribute("aria-hidden","true");const e=document.createElementNS("http://www.w3.org/2000/svg","text");return t.appendChild(e),t.style.position="fixed",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t),e}),p5=t=>t?`${t.angle}:${t.fontFamily}:${t.fontSize}:${t.letterSpacing}:${t.lineHeight}`:"null",qBe=a6((t,e)=>{var o,l;let r=Xm();r.isConnected||((l=(o=Xm.cache).clear)==null||l.call(o),r=Xm());const n=eb(t);let s=0;for(const[A,u]of n.entries()){const h=document.createElementNS("http://www.w3.org/2000/svg","tspan"),c=tb(e,A);h.style.fontFamily=c.fontFamily,h.style.fontSize=`${c.fontSize}px`,h.style.lineHeight=c.lineHeight,h.style.fontFamily=c.fontFamily,h.style.letterSpacing=c.letterSpacing,h.textContent=u,h.setAttribute("x","0"),h.setAttribute("y",`${s}`),r.appendChild(h),s+=c.lineHeight*h.getBoundingClientRect().height}const{width:a}=r.getBoundingClientRect();return r.innerHTML="",{width:e!=null&&e.angle?Kf(a,s,e==null?void 0:e.angle):a,height:e!=null&&e.angle?Kf(s,a,e==null?void 0:e.angle):s}},(t,e)=>{const r=Array.isArray(t)?t.join():t,n=Array.isArray(e)?e.map(p5).join():p5(e);return`${r}::${n}`}),XBe={impl:function(t,e,r){return r===void 0&&(r=!1),!(typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u")||r?VBe(t,e):qBe(t,e)}},qF=(t,e)=>XBe.impl(t,e);var JBe=ig,YBe=t3;function ZBe(t,e){return t&&t.length?YBe(t,JBe(e)):[]}var e5e=ZBe;const t5e=St(e5e);function r5e(t,e,r){const{datasets:n,horizontal:s}=t,a=s?rr(t,"y"):rr(t,"x"),o=Math.abs(a[1]-a[0]),l=r!==void 0?r:Array.isArray(n[0])&&n[0].length||1,u=(e||n.length)*l;return Math.round(.5*o/u)}function n5e(t,e,r){if(t.polar||e!=="x")return;const n=r.filter(h=>h.type&&h.type.role&&h.type.role==="group");if(n.length<1)return;const{offset:s,children:a}=n[0].props;if(!s)return;const o=Array.isArray(a)&&a[0];if(!o)return;let l=o.props.barWidth,A=o.props.data&&o.props.data.length||1;if(o&&o.type.role==="stack"){const h=o.props.children&&o.props.children[0];if(!h)return;l=h.props.barWidth,A=o.props.children.length}const u=l||r5e(t,a.length,A);return{x:u*a.length/2+(s-u*((a.length-1)/2))}}function s5e(t,e,r){const n=r?r.slice(0):R.Children.toArray(t.children),s=t.data?hs(t):void 0,{polar:a,startAngle:o,endAngle:l,categories:A,minDomain:u,maxDomain:h,horizontal:c}=t,d={horizontal:c,polar:a,startAngle:o,endAngle:l,minDomain:u,maxDomain:h,categories:A},f=s?Object.assign(d,{data:s}):d,y=Mu(n,p=>{const x=Object.assign({},p.props,f);if(V3(p)){if(p.type&&rt(p.type.getDomain))return p.props&&p.type.getDomain(x,e)}else return null;return ao(x,e)},t),v=y.length===0?0:cs(y),m=y.length===0?1:As(y);return[v,m]}function a5e(t,e,r){const n=r||R.Children.toArray(t.children),s=M1(t,e),a=n5e(t,e,n);let o;if(s)o=s;else{const l=Co(t,e),A=_o(t,e),u=(t.data||t.y)&&hs(t),h=u?D1(t,e,u):[],c=s5e(t,e,n),d=l||cs([...h,...c]),f=A||As([...h,...c]);o=ga(d,f)}return P1(o,Object.assign({domainPadding:a},t),e)}function y5(t,e,r){if(t.data)return Rn(t,e);const n=r?r.slice(0):R.Children.toArray(t.children),a=so(Mu(n,o=>{const l=Object.assign({},o.props,{horizontal:t.horizontal});return If(l,e)},t));return a.length>1?cu("linear"):cu(a[0])}function i5e(t){const r=d1(t,["groupComponent","containerComponent","labelComponent"]);let n=t.events;return Array.isArray(r)&&(n=Array.isArray(t.events)?r.concat(...t.events):r),n||[]}function o5e(t,e){const r=n=>{if(!V3(n))return null;const s=n.props||{};return Vl(s,e)};return Mu(t.slice(0),r)}function l5e(t){const e=s=>{const a=s.props||{};let o;if(fCe(s))s.type&&rt(s.type.getData)?o=s.type.getData(a):o=hs(a);else return null;return o.map(l=>({x:l.xName,y:l.yName}))},r={x:[],y:[]},n=(s,a)=>{const o=Array.isArray(a)?a.map(A=>A.x).filter(Boolean):a.x,l=Array.isArray(a)?a.map(A=>A.y).filter(Boolean):a.y;return{x:o!==void 0?s.x.concat(o):s.x,y:l!==void 0?s.y.concat(l):s.y}};return Mu(t.slice(0),e,{},r,n)}function v5(t,e,r){const n=Vl(t,e),s=X3(r,e),a=s?W3(s.props,e):[],o=n.length?n:o5e(r,e);return so([...o,...a].flat())}function XF(t,e){const r=e||R.Children.toArray(t.children),n=v5(t,"x",r),s=v5(t,"y",r),a=l5e(r);return{x:so([...n,...a.x].flat()),y:so([...s,...a.y].flat())}}function A5e(t,e,r){const n=t.categories&&Vl(t,"x"),s=t.categories&&Vl(t,"y"),o=!n||!s?r||XF(t,e):{},l=n||o.x,A=s||o.y;return{x:l.length>0?l:void 0,y:A.length>0?A:void 0}}const rb=R.createContext(void 0);rb.displayName="PortalContext";const JF=()=>R.useContext(rb),c5e=t=>{let{children:e}=t;const[r,n]=R.useState(new Map),s=R.useCallback((l,A)=>{n(u=>{const h=new Map(u);return h.set(l,A),h})},[n]),a=R.useCallback(l=>{n(A=>{const u=new Map(A);return u.delete(l),u})},[n]),o=R.useMemo(()=>({addChild:s,removeChild:a,children:r}),[s,a,r]);return R.createElement(rb.Provider,{value:o},e)},u5e=t=>{let{as:e,...r}=t;const n=JF();if(!n)return null;const s=Array.from(n.children.values());return R.cloneElement(e,r,s)};function pv(){return pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pv.apply(this,arguments)}const d5e={className:"VictoryContainer",portalComponent:R.createElement(Gye,null),portalZIndex:99,responsive:!0,role:"img"};function h5e(t){const e={...d5e,...t},{title:r,desc:n,width:s,height:a,responsive:o}=e,l=B.useRef(null),A=B.useRef(r1("victory-container-")),u=e.containerId??A.current,h=x=>`${u}-${x}`,c=ba(e),d=o?{width:"100%",height:"100%"}:{width:s,height:a},f=o?`0 0 ${s} ${a}`:void 0,g=o?e.preserveAspectRatio:void 0,y=[r&&h("title"),e["aria-labelledby"]].filter(Boolean).join(" ")||void 0,v=[n&&h("desc"),e["aria-describedby"]].filter(Boolean).join(" ")||void 0,m=h("title"),p=h("desc");return{...e,titleId:m,descId:p,dimensions:d,viewBox:f,preserveAspectRatio:g,ariaLabelledBy:y,ariaDescribedBy:v,userProps:c,localContainerRef:l}}const Bo=t=>{const{role:e,title:r,desc:n,children:s,className:a,portalZIndex:o,portalComponent:l,width:A,height:u,style:h,tabIndex:c,responsive:d,events:f,ouiaId:g,ouiaSafe:y,ouiaType:v,dimensions:m,ariaDescribedBy:p,ariaLabelledBy:x,viewBox:w,preserveAspectRatio:_,userProps:b,titleId:S,descId:E,containerRef:C,localContainerRef:N}=h5e(t);return R.useEffect(()=>{if(!(f!=null&&f.onWheel))return;const Q=F=>F.preventDefault(),P=N==null?void 0:N.current;return P==null||P.addEventListener("wheel",Q),()=>{P==null||P.removeEventListener("wheel",Q)}},[]),R.createElement("div",{className:a,style:{...h,width:d?h==null?void 0:h.width:m.width,height:d?h==null?void 0:h.height:m.height,pointerEvents:(h==null?void 0:h.pointerEvents)??"none",touchAction:(h==null?void 0:h.touchAction)??"none",position:(h==null?void 0:h.position)??"relative"},"data-ouia-component-id":g,"data-ouia-component-type":v,"data-ouia-safe":y,ref:x1e([N,C])},R.createElement(c5e,null,R.createElement("svg",pv({width:A,height:u,tabIndex:c,role:e,"aria-labelledby":x,"aria-describedby":p,viewBox:w,preserveAspectRatio:_,style:{...m,pointerEvents:"all"}},b,f),r?R.createElement("title",{id:S},r):null,n?R.createElement("desc",{id:E},n):null,s),R.createElement("div",{style:{...m,zIndex:o,position:"absolute",top:0,left:0}},R.createElement(u5e,{as:l,width:A,height:u,viewBox:w,preserveAspectRatio:_,style:{...m,overflow:"visible"}}))))};Bo.role="container";const f5e={groupComponent:R.createElement("g",null)},yv=t=>{const e={...f5e,...t},[r]=B.useState(r1()),n=JF(),s=Array.isArray(e.children)?e.children[0]:e.children,{groupComponent:a}=e,o=s&&s.props||{},l=o.groupComponent?{groupComponent:a,standalone:!1}:{},A=_e(l,o,n1(e,["children","groupComponent"]),{key:o.key??r}),u=s&&R.cloneElement(s,A);return R.useEffect(()=>{n==null||n.addChild(r,u)},[e.children]),R.useEffect(()=>()=>n==null?void 0:n.removeChild(r),[]),n?null:u};yv.role="portal";function zf(){return zf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zf.apply(this,arguments)}const nb=B.forwardRef((t,e)=>{var A;const{desc:r,id:n,tabIndex:s,origin:a,...o}=t,l={vectorEffect:"non-scaling-stroke",id:(A=Be(n,t))==null?void 0:A.toString(),tabIndex:Be(s,t),...o};return r?R.createElement("rect",zf({},l,{ref:e}),R.createElement("desc",null,r)):R.createElement("rect",zf({},l,{ref:e}))}),g5e=t=>{var u;const{children:e,desc:r,id:n,origin:s,tabIndex:a,title:o,...l}=t,A={id:(u=Be(n,t))==null?void 0:u.toString(),tabIndex:Be(a,t),...l};return R.createElement("text",A,o&&R.createElement("title",null,o),r&&R.createElement("desc",null,r),e)},m5e=t=>{var l;const{desc:e,id:r,tabIndex:n,origin:s,...a}=t,o={id:(l=Be(r,t))==null?void 0:l.toString(),tabIndex:Be(n,t),...a};return R.createElement("tspan",o)},zi={fill:"#252525",fontSize:14,fontFamily:"'Gill Sans', 'Gill Sans MT', 'Seravek', 'Trebuchet MS', sans-serif",stroke:"transparent"},x5=(t,e)=>t.datum?s1(t,t.datum)[e]:0,w5=t=>{const e=t&&t.fontSize;if(typeof e=="number")return e;if(e==null)return zi.fontSize;if(typeof e=="string"){const r=Number(e.replace("px",""));return isNaN(r)?zi.fontSize:r}return zi.fontSize},Pr=function(t,e){return e===void 0&&(e=0),Array.isArray(t)?t[e]||t[0]:t},YF=t=>{const{backgroundStyle:e,backgroundPadding:r}=t;return Array.isArray(e)&&!It(e)||Array.isArray(r)&&!It(r)},p5e=(t,e)=>{if(e.disableInlineStyles){const n=Br(t,e);return{fontSize:w5(n)}}const r=n=>{const s=Br(n?_e({},n,zi):zi,e);return Object.assign({},s,{fontSize:w5(s)})};return Array.isArray(t)&&!It(t)?t.map(n=>r(n)):r(t)},y5e=(t,e)=>{if(t)return Array.isArray(t)&&!It(t)?t.map(r=>Br(r,e)):Br(t,e)},v5e=t=>{if(t.backgroundPadding&&Array.isArray(t.backgroundPadding))return t.backgroundPadding.map(r=>{const n=Be(r,t);return Mn(n)});const e=Be(t.backgroundPadding,t);return Mn(e)},x5e=t=>{const e=Be(t.lineHeight,t);return Array.isArray(e)&&It(e)?[1]:e},w5e=(t,e)=>{if(t==null)return;if(Array.isArray(t))return t.map(n=>Be(n,e));const r=Be(t,e);if(r!=null)return Array.isArray(r)?r:`${r}`.split(`
`)},b5e=(t,e,r)=>{const n=t.dy?Be(t.dy,t):0,s=t.inline?1:t.text.length,a=Be(t.capHeight,t),o=e?Be(e,t):"middle",l=[...Array(s).keys()].map(h=>Pr(t.style,h).fontSize),A=[...Array(s).keys()].map(h=>Pr(r,h));if(o==="start")return n+(a/2+A[0]/2)*l[0];if(t.inline)return o==="end"?n+(a/2-A[0]/2)*l[0]:n+a/2*l[0];if(s===1)return o==="end"?n+(a/2+(.5-s)*A[0])*l[0]:n+(a/2+(.5-s/2)*A[0])*l[0];const u=[...Array(s).keys()].reduce((h,c)=>h+(a/2+(.5-s)*A[c])*l[c]/s,0);return o==="end"?n+u:n+u/2+a/2*A[s-1]*l[s-1]},_5e=(t,e,r)=>{const{polar:n}=t,s=Pr(t.style),a=n?H1(t):0,o=s.angle===void 0?Be(t.angle,t):s.angle,l=o===void 0?a:o,A=t.transform||s.transform,u=A&&Be(A,t);return u||l?gv(u,l&&{rotate:[l,e,r]}):void 0},ZF=(t,e)=>{const{direction:r,textAnchor:n,x:s,dx:a}=t;if(r==="rtl")return s-e;switch(n){case"middle":return Math.round(s-e/2);case"end":return Math.round(s-e);default:return s+(a||0)}},eT=(t,e)=>{const{verticalAnchor:r,y:n,originalDy:s=0}=t,a=n+s;switch(r){case"start":return Math.floor(a);case"end":return Math.ceil(a-e);default:return Math.floor(a-e/2)}},C5e=(t,e)=>{const{dx:r=0,transform:n,backgroundComponent:s,backgroundStyle:a,inline:o,backgroundPadding:l,capHeight:A}=t,u=e.map(y=>y.textSize),h=o?Math.max(...u.map(y=>y.height)):u.reduce((y,v,m)=>{const p=m?0:A/2;return y+v.height*(e[m].lineHeight-p)},0),c=o?u.reduce((y,v,m)=>{const p=m?r:0;return y+v.width+p},0):Math.max(...u.map(y=>y.width)),d=ZF(t,c),f=eT(t,h),g={key:"background",height:h+l.top+l.bottom,style:a,transform:n,width:c+l.left+l.right,x:o?d-l.left:d+r-l.left,y:f};return R.cloneElement(s,_e({},s.props,g))},B5e=(t,e,r)=>{const{textAnchor:n}=t,s=e.map(l=>l.widthWithPadding),o=-s.reduce((l,A)=>l+A,0)/2;switch(n){case"start":return s.reduce((l,A,u)=>u<r?l+A:l,0);case"end":return s.reduce((l,A,u)=>u>r?l-A:l,0);default:return s.reduce((l,A,u)=>{const h=u<r?A:0;return u===r?l+A/2:l+h},o)}},S5e=(t,e)=>{const{dy:r,dx:n,transform:s,backgroundStyle:a,backgroundPadding:o,backgroundComponent:l,inline:A,y:u}=t,h=e.map((c,d)=>{const f=Pr(e,d-1),g=c.textSize,y=c.fontSize*c.lineHeight,v=Math.ceil(y),m=Pr(o,d),p=Pr(o,d-1),x=A&&n||0,w=d&&!A?f.fontSize*f.lineHeight+p.top+p.bottom:r-y*.5-(c.fontSize-c.capHeight);return{textHeight:v,labelSize:g,heightWithPadding:v+m.top+m.bottom,widthWithPadding:g.width+m.left+m.right+x,y:u,fontSize:c.fontSize,dy:w}});return h.map((c,d)=>{const f=ZF(t,c.labelSize.width),g=h.slice(0,d+1).reduce((w,_)=>w+_.dy,u),y=Pr(o,d),v=c.heightWithPadding,m=A?B5e(t,h,d)+f-y.left:f,p=A?eT(t,v)-y.top:g,x={key:`tspan-background-${d}`,height:v,style:Pr(a,d),width:c.widthWithPadding,transform:s,x:m-y.left,y:p};return R.cloneElement(l,_e({},l.props,x))})},j5e=(t,e)=>YF(t)?S5e(t,e):C5e(t,e),k5e=(t,e,r)=>{const n=Pr(t,e),s=Pr(t,e-1),a=s.fontSize*s.lineHeight,o=n.fontSize*n.lineHeight,l=s.fontSize-s.capHeight,A=n.fontSize-n.capHeight,u=a-s.fontSize/2+n.fontSize/2-a/2+o/2-A/2+l/2;return YF(r)?u+n.backgroundPadding.top+s.backgroundPadding.bottom:u},E5e=(t,e,r)=>{const{inline:n}=e,s=Pr(t,r);return r&&!n?k5e(t,r,e):n?r===0?s.backgroundPadding.top:void 0:s.backgroundPadding.top},N5e=t=>{const e=w5e(t.text,t),r=p5e(t.style,Object.assign({},t,{text:e})),n=y5e(t.backgroundStyle,Object.assign({},t,{text:e,style:r})),s=v5e(Object.assign({},t,{text:e,style:r,backgroundStyle:n})),a=Be(t.id,t);return Object.assign({},t,{backgroundStyle:n,backgroundPadding:s,style:r,text:e,id:a})},F5e=t=>{const e=Be(t.ariaLabel,t),r=Pr(t.style),n=x5e(t),s=t.direction?Be(t.direction,t):"inherit",a=t.textAnchor?Be(t.textAnchor,t):r.textAnchor||"start",o=t.verticalAnchor?Be(t.verticalAnchor,t):r.verticalAnchor||"middle",l=t.dx?Be(t.dx,t):0,A=b5e(t,o,n),u=t.x!==void 0?t.x:x5(t,"x"),h=t.y!==void 0?t.y:x5(t,"y"),c=_5e(t,u,h);return Object.assign({},t,{ariaLabel:e,lineHeight:n,direction:s,textAnchor:a,verticalAnchor:o,dx:l,dy:A,originalDy:Be(t.dy,t),transform:c,x:u,y:h})},T5e=(t,e)=>{const{ariaLabel:r,inline:n,className:s,title:a,events:o,direction:l,text:A,textAnchor:u,dx:h,dy:c,transform:d,x:f,y:g,desc:y,id:v,tabIndex:m,tspanComponent:p,textComponent:x}=t,w=ba(t),_={"aria-label":r,key:"text",...o,direction:l,dx:h,x:f,y:g+c,transform:d,className:s,title:a,desc:Be(y,t),tabIndex:Be(m,t),id:v,...w},b=A.map((S,E)=>{const C=e[E].style,N={key:`${v}-key-${E}`,x:n?void 0:f,dx:n?h+e[E].backgroundPadding.left:h,dy:E5e(e,t,E),textAnchor:C.textAnchor||u,style:C,children:S};return R.cloneElement(p,N)});return R.cloneElement(x,_,b)},U5e={backgroundComponent:R.createElement(nb,null),groupComponent:R.createElement("g",null),direction:"inherit",textComponent:R.createElement(g5e,null),tspanComponent:R.createElement(m5e,null),capHeight:.71,lineHeight:1},ks=t=>{const e=N5e(_e({},t,U5e));if(e.text===null||e.text===void 0)return null;const r=F5e(e),{text:n,style:s,capHeight:a,backgroundPadding:o,lineHeight:l}=r,A=n.map((h,c)=>{const d=Pr(s,c),f=mv(`${a}em`,d.fontSize),g=Pr(l,c);return{style:d,fontSize:d.fontSize||zi.fontSize,capHeight:f,text:h,textSize:qF(h,d),lineHeight:g,backgroundPadding:Pr(o,c)}}),u=T5e(r,A);if(e.backgroundStyle){const c=[j5e(r,A),u],d=R.cloneElement(e.groupComponent,{},c);return e.renderInPortal?R.createElement(yv,null,d):d}return e.renderInPortal?R.createElement(yv,null,u):u};ks.displayName="VictoryLabel";ks.role="label";ks.defaultStyles=zi;const Q5e=t=>{var e;return R.createElement("defs",null,R.createElement("clipPath",{id:(e=t.clipId)==null?void 0:e.toString()},t.children))};function Gf(){return Gf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Gf.apply(this,arguments)}const tT=B.forwardRef((t,e)=>{var A;const{desc:r,id:n,tabIndex:s,origin:a,...o}=t,l={vectorEffect:"non-scaling-stroke",id:(A=Be(n,t))==null?void 0:A.toString(),tabIndex:Be(s,t),...o};return r?R.createElement("circle",Gf({},l,{ref:e}),R.createElement("desc",null,r)):R.createElement("circle",Gf({},l,{ref:e}))});class xc extends R.Component{constructor(e){super(e),this.state={clipId:e==null?void 0:e.clipId}}componentDidMount(){this.state.clipId||this.setState({clipId:r1("victory-clip-")})}calculateAttributes(e){const{polar:r,origin:n,clipWidth:s=0,clipHeight:a=0,translateX:o=0,translateY:l=0}=e,A=Mn(e.clipPadding),u=e.radius||qy(e);return{x:(r?n.x:o)-A.left,y:(r?n.y:l)-A.top,width:Math.max((r?u:s)+A.left+A.right,0),height:Math.max((r?u:a)+A.top+A.bottom,0)}}renderClippedGroup(e,r){const n=ba(e),{style:s,events:a,transform:o,children:l,className:A,groupComponent:u,tabIndex:h}=e,c=this.renderClipComponent(e,r),d=Object.assign({className:A,style:s,transform:o,key:`clipped-group-${r}`,clipPath:`url(#${r})`},a);return R.cloneElement(u,{...d,tabIndex:h,...n},[c,...R.Children.toArray(l)])}renderGroup(e){const{style:r,events:n,transform:s,children:a,className:o,groupComponent:l,tabIndex:A}=e;return R.cloneElement(l,Object.assign({className:o,style:r,transform:s,"aria-label":e["aria-label"],tabIndex:A},n),a)}renderClipComponent(e,r){const{polar:n,origin:s,clipWidth:a=0,clipHeight:o=0,translateX:l=0,translateY:A=0,circleComponent:u,rectComponent:h,clipPathComponent:c}=e,{top:d,bottom:f,left:g,right:y}=Mn(e.clipPadding);let v;if(n){const m=e.radius||qy(e),p={r:Math.max(m+g+y,m+d+f,0),cx:s.x-g,cy:s.y-d};v=R.cloneElement(u,p)}else{const m={x:l-g,y:A-d,width:Math.max(a+g+y,0),height:Math.max(o+d+f,0)};v=R.cloneElement(h,m)}return R.cloneElement(c,Object.assign({key:`clip-path-${r}`},e,{clipId:r}),v)}getClipValue(e,r){const n={x:e.clipWidth,y:e.clipHeight};if(n[r]!==void 0)return n[r];const s=rr(e,r);return s&&Math.abs(s[0]-s[1])||void 0}getTranslateValue(e,r){const n={x:e.translateX,y:e.translateY};if(n[r]!==void 0)return n[r];const s=rr(e,r);return s?Math.min(...s):void 0}render(){const e=this.getClipValue(this.props,"y"),r=this.getClipValue(this.props,"x");if(r===void 0||e===void 0)return this.renderGroup(this.props);const n=this.getTranslateValue(this.props,"x"),s=this.getTranslateValue(this.props,"y"),a=_e({},this.props,{clipHeight:e,clipWidth:r,translateX:n,translateY:s});return this.renderClippedGroup(a,this.state.clipId)}}Z(xc,"displayName","VictoryClipContainer"),Z(xc,"role","container"),Z(xc,"defaultProps",{circleComponent:R.createElement(tT,null),rectComponent:R.createElement(nb,null),clipPathComponent:R.createElement(Q5e,null),groupComponent:R.createElement("g",null)});function Wf(){return Wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Wf.apply(this,arguments)}const Cg=B.forwardRef((t,e)=>{var A;const{desc:r,id:n,tabIndex:s,origin:a,...o}=t,l={id:(A=Be(n,t))==null?void 0:A.toString(),tabIndex:Be(s,t),...o};return r?R.createElement("path",Wf({},l,{ref:e}),R.createElement("desc",null,r)):R.createElement("path",Wf({},l,{ref:e}))}),I5e=t=>{const{cx:e,cy:r,r:n,startAngle:s,endAngle:a,closedPath:o}=t,l=Math.abs(a-s)/2+s,A=e+n*Math.cos(er(s)),u=r-n*Math.sin(er(s)),h=e+n*Math.cos(er(l)),c=r-n*Math.sin(er(l)),d=e+n*Math.cos(er(a)),f=r-n*Math.sin(er(a)),g=l-s<=180?0:1,y=a-l<=180?0:1,v=o?` M ${e}, ${r} L ${A}, ${u}`:`M ${A}, ${u}`,m=`A ${n}, ${n}, 0, ${g}, 0, ${h}, ${c}`,p=`A ${n}, ${n}, 0, ${y}, 0, ${d}, ${f}`;return`${v} ${m} ${p} ${o?"Z":""}`},P5e=t=>{const e=Be(t.ariaLabel,t),r=Be(t.desc,t),n=Be(t.id,t),s=Br(Object.assign({stroke:"black",fill:"none"},t.style),t),a=Be(t.tabIndex,t);return Object.assign({},t,{ariaLabel:e,desc:r,id:n,style:s,tabIndex:a})},D5e={pathComponent:R.createElement(Cg,null),role:"presentation",shapeRendering:"auto"},b5=t=>{const e=P5e(_e({},t,D5e));return R.cloneElement(e.pathComponent,{...e.events,"aria-label":e.ariaLabel,d:I5e(e),style:e.style,desc:e.desc,tabIndex:e.tabIndex,className:e.className,role:e.role,shapeRendering:e.shapeRendering,transform:e.transform,clipPath:e.clipPath})},M5e=t=>{const e=Be(t.id,t);return Object.assign({},t,{id:e})},R5e={circleComponent:R.createElement(tT,null),rectComponent:R.createElement(nb,null),role:"presentation",shapeRendering:"auto"},$5e=t=>{const e=M5e(_e({},t,R5e));return e.polar?R.cloneElement(e.circleComponent,{...e.events,style:e.style,role:e.role,shapeRendering:e.shapeRendering,cx:e.x,cy:e.y,r:e.height,className:e.className}):R.cloneElement(e.rectComponent,{...e.events,style:e.style,role:e.role,shapeRendering:e.shapeRendering,x:e.x,y:e.y,rx:e.rx,ry:e.ry,width:e.width,height:e.height,className:e.className})};function Vf(){return Vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vf.apply(this,arguments)}const O5e=B.forwardRef((t,e)=>{var A;const{desc:r,id:n,tabIndex:s,origin:a,...o}=t,l={vectorEffect:"non-scaling-stroke",id:(A=Be(n,t))==null?void 0:A.toString(),tabIndex:Be(s,t),...o};return r?R.createElement("line",Vf({},l,{ref:e}),R.createElement("desc",null,r)):R.createElement("line",Vf({},l,{ref:e}))}),L5e=t=>{const e=Be(t.ariaLabel,t),r=Be(t.desc,t),n=Be(t.id,t),s=Br(Object.assign({stroke:"black"},t.style),t),a=Be(t.tabIndex,t);return Object.assign({},t,{ariaLabel:e,desc:r,id:n,style:s,tabIndex:a})},H5e={lineComponent:R.createElement(O5e,null),role:"presentation",shapeRendering:"auto"},Fl=t=>{const e=L5e(_e({},t,H5e));return R.cloneElement(e.lineComponent,{...e.events,"aria-label":e.ariaLabel,style:e.style,desc:e.desc,tabIndex:e.tabIndex,className:e.className,role:e.role,shapeRendering:e.shapeRendering,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,transform:e.transform,clipPath:e.clipPath})},K5e=t=>{const{x:e,y:r,size:n,symbol:s}=t;if(t.getPath)return t.getPath(e,r,n);const a=eBe;return(typeof a[s]=="function"?a[s]:a.circle)(e,r,n)},z5e=t=>{const e=Be(t.ariaLabel,t),r=Be(t.desc,t),n=Be(t.id,t),s=Be(t.size,t),a=Br(t.style,t),o=Be(t.symbol,t),l=Be(t.tabIndex,t);return Object.assign({},t,{ariaLabel:e,desc:r,id:n,size:s,style:a,symbol:o,tabIndex:l})},G5e={pathComponent:R.createElement(Cg,null),role:"presentation",shapeRendering:"auto"},W5e=t=>{const e=z5e(_e({},t,G5e)),r=ba(e);return R.cloneElement(e.pathComponent,{...e.events,"aria-label":e.ariaLabel,d:K5e(e),style:e.style,desc:e.desc,tabIndex:e.tabIndex,role:e.role,shapeRendering:e.shapeRendering,className:e.className,transform:e.transform,clipPath:e.clipPath,...r})},V5e=(t,e)=>{let r=hs(t);r.length<2&&(r=[]);const n=s=>{const a=K3(e[s])==="log"?1/Number.MAX_SAFE_INTEGER:0,o=e[s].domain(),l=cs(o),A=As(o);let u=a;return l.valueOf()<0&&A.valueOf()<=0?u=A:l.valueOf()>=0&&A.valueOf()>0&&(u=l),ua(o)?new Date(u):u};return r.map(s=>{const a=s._y1!==void 0?s._y1:s._y,o=s._y0!==void 0?s._y0:n("y"),l=s._x1!==void 0?s._x1:s._x,A=s._x0!==void 0?s._x0:n("x");return Object.assign({},s,{_y0:o,_y1:a,_x0:A,_x1:l})})},q5e=t=>{const{polar:e}=t,r=a1(t,"area"),n=i1(t.style,r),s={x:rr(t,"x"),y:rr(t,"y")},a={x:iv(t,"x"),y:iv(t,"y")},o={x:Rn(t,"x").domain(a.x).range(t.horizontal?s.y:s.x),y:Rn(t,"y").domain(a.y).range(t.horizontal?s.x:s.y)},l=e?t.origin||Du(t):void 0,A=V5e(t,o);return{style:n,data:A,scale:o,domain:a,origin:l}},X5e=(t,e)=>{const r=is(t,e,"area"),n=Object.assign({},r,q5e(r)),{data:s,domain:a,events:o,groupComponent:l,height:A,horizontal:u,interpolation:h,origin:c,padding:d,polar:f,scale:g,sharedEvents:y,standalone:v,style:m,theme:p,width:x,labels:w,name:_,disableInlineStyles:b}=n,S={parent:{style:m.parent,width:x,height:A,scale:g,data:s,domain:a,standalone:v,theme:p,polar:f,origin:c,padding:d,name:_,horizontal:u},all:{data:{horizontal:u,polar:f,origin:c,scale:g,data:s,interpolation:h,groupComponent:l,style:b?{}:m.data,disableInlineStyles:b}}};return s.reduce((E,C,N)=>{const Q=pg(n,C,N);if(Q!=null||w&&(o||y)){const P=lu(C.eventKey)?N:C.eventKey;E[P]={labels:z1(n,N)}}return E},S)},vv=t=>{const e=t._y1!==void 0?t._y1:t._y;return e!=null&&t._y0!==null},_5=t=>e=>t.x(e._x1!==void 0?e._x1:e._x),xv=t=>e=>t.y(e._y1!==void 0?e._y1:e._y),wv=t=>e=>t.y(e._y0),J5e=t=>e=>-1*t.x(e._x1!==void 0?e._x1:e._x)+Math.PI/2,Y5e=t=>{const{horizontal:e,scale:r}=t,n=Of(t);return e?Df().defined(vv).curve(n).x0(wv(r)).x1(xv(r)).y(_5(r)):Df().defined(vv).curve(n).x(_5(r)).y1(xv(r)).y0(wv(r))},Z5e=t=>{const{polar:e,scale:r}=t,n=Of(t);return e?cv().defined(vv).curve(n).angle(J5e(r)).outerRadius(xv(r)).innerRadius(wv(r)):Y5e(t)},eSe=t=>{const e=Be(t.ariaLabel,t),r=Be(t.desc,t),n=Be(t.id,t),s=Br(Object.assign({fill:"black"},t.style),t),a=Be(t.tabIndex,t);return Object.assign({},t,{ariaLabel:e,desc:r,id:n,style:s,tabIndex:a})},tSe={groupComponent:R.createElement("g",null),pathComponent:R.createElement(Cg,null),role:"presentation",shapeRendering:"auto"},rSe=t=>{const e=eSe(_e({},t,tSe)),{ariaLabel:r,role:n,shapeRendering:s,className:a,polar:o,origin:l,data:A,pathComponent:u,events:h,groupComponent:c,clipPath:d,id:f,style:g,desc:y,tabIndex:v}=e,m=ba(e),p=o&&l?`translate(${l.x}, ${l.y})`:void 0,x=e.transform||p,w=g.stroke&&g.stroke!=="none"&&g.stroke!=="transparent",_=Z5e(e),b=w&&MF(e),S=g.stroke?"none":g.fill,E={"aria-label":r,className:a,role:n,shapeRendering:s,transform:x,...h,clipPath:d,tabIndex:v},C=R.cloneElement(u,Object.assign({key:`${f}-area`,style:Object.assign({},g,{stroke:S}),d:_(A),desc:y,tabIndex:v},E,m)),N=w?R.cloneElement(u,Object.assign({key:`${f}-area-stroke`,style:Object.assign({},g,{fill:"none"}),d:b(A)},E)):null;return w?R.cloneElement(c,m,[C,N]):C},C5={width:450,height:300,padding:50,interpolation:"linear"},nSe={components:[{name:"parent",index:"parent"},{name:"data",index:"all"},{name:"labels"}]},An=class An extends R.Component{static getBaseProps(e){return X5e(e,C5)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:e,role:r}=An,n=is(this.props,C5,r);if(this.shouldAnimate())return this.animateComponent(n,e);const s=this.renderContinuousData(n),a=n.standalone?this.renderContainer(n.containerComponent,s):s;return c1(a,n)}};Z(An,"animationWhitelist",["data","domain","height","padding","style","width"]),Z(An,"defaultProps",{containerComponent:R.createElement(Bo,null),dataComponent:R.createElement(rSe,null),groupComponent:R.createElement(xc,null),labelComponent:R.createElement(ks,{renderInPortal:!0}),samples:50,sortKey:"x",sortOrder:"ascending",standalone:!0,theme:fA.grayscale}),Z(An,"displayName","VictoryArea"),Z(An,"role","area"),Z(An,"continuous",!0),Z(An,"defaultTransitions",tF()),Z(An,"defaultPolarTransitions",rF()),Z(An,"getDomain",iv),Z(An,"getData",hs),Z(An,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);let bv=An;const Fd=Ru(bv,nSe),sb={top:-1,left:-1,right:1,bottom:1},qf=t=>t!=null,sSe=(t,e)=>{const{orientation:r,horizontal:n}=t;return r?{top:"x",bottom:"x",left:"y",right:"y"}[r]:n?e==="x"?"y":"x":e},aSe=t=>{const e=Kn(t),r=sSe(t,e),n=Rn(t,e),a=t.domain&&t.domain[e]||hA(t)||n.domain();return n.range(rr(t,r)),n.domain(a),n},iSe=t=>{const{theme:e,dependentAxis:r}=t,n=e&&e.axis&&e.axis.style,s=r?"dependentAxis":"independentAxis",a=e&&e[s]&&e[s].style;return n&&a?(()=>["axis","axisLabel","grid","parent","tickLabels","ticks"].reduce((A,u)=>(A[u]=_e({},a[u],n[u]),A),{}))():a||n},rT=function(t,e){e===void 0&&(e={});const r=t.style||{},n={height:"100%",width:"100%"};return{parent:_e(r.parent,e.parent,n),axis:_e({},r.axis,e.axis),axisLabel:_e({},r.axisLabel,e.axisLabel),grid:_e({},r.grid,e.grid),ticks:_e({},r.ticks,e.ticks),tickLabels:_e({},r.tickLabels,e.tickLabels)}},oSe=(t,e,r)=>{const{position:n,transform:s}=t;return{x1:s.x,y1:s.y,x2:s.x+n.x2,y2:s.y+n.y2,style:e,datum:r}},lSe=(t,e,r,n,s)=>{const{position:a,transform:o}=t;return{style:e,x:o.x+a.x,y:o.y+a.y,verticalAnchor:r.verticalAnchor,textAnchor:r.textAnchor,angle:e.angle,text:s,datum:n}},ASe=(t,e,r)=>{const{edge:n,transform:s}=t;return{x1:s.x,y1:s.y,x2:n.x+s.x,y2:n.y+s.y,style:e,datum:r}},cSe=(t,e,r)=>{const{style:n,padding:s,isVertical:a}=e,{width:o,height:l}=t;return{style:n.axis,x1:a?r.x:s.left+r.x,x2:a?r.x:o-s.right+r.x,y1:a?s.top+r.y:r.y,y2:a?l-s.bottom+r.y:r.y}},uSe=(t,e)=>({tickStyle:Br(t.ticks,e),labelStyle:Br(t.tickLabels,e),gridStyle:Br(t.grid,e)}),dSe=(t,e,r)=>{const{style:n,orientation:s,padding:a,labelPadding:o,isVertical:l}=e,A=sb[s],u=a.left+a.right,h=a.top+a.bottom,c=A<0?"end":"start",d=n.axisLabel,f=l?-90:0,g=l?r.x+A*o:(t.width-u)/2+a.left+r.x,y=l?(t.height-h)/2+a.top+r.y:A*o+r.y;return{x:g,y,verticalAnchor:d.verticalAnchor||c,textAnchor:d.textAnchor||"middle",angle:d.angle===void 0?f:d.angle,style:d,text:t.label}},hSe=(t,e)=>{const n={top:"end",left:"end",right:"start",bottom:"start"}[t];return{textAnchor:e?n:"middle",verticalAnchor:e?"middle":n}},fSe=(t,e)=>{const r=e.axisLabel||{};if(r.padding!==void 0&&r.padding!==null)return r.padding;const n=fg(t),s=r.fontSize||14;return t.label?s*(n?2.3:1.6):0},B5=(t,e,r)=>{const n=e||"positive";return r?{positive:{x:"left",y:"bottom"},negative:{x:"right",y:"top"}}[n][t]:{positive:{x:"bottom",y:"left"},negative:{x:"top",y:"right"}}[n][t]},gSe=(t,e)=>{const{style:r,scale:n,orientation:s,padding:a,axis:o,ticks:l,stringTicks:A,isVertical:u,labelPadding:h}=e,{polar:c,horizontal:d}=t,f={scale:{[o]:n},polar:c,horizontal:d,ticks:l,stringTicks:A},g=s==="right"?a.right:a.left,y=s==="top"?a.top:a.bottom,v=t.offsetX!==null&&t.offsetX!==void 0?t.offsetX:g,m=t.offsetY!==null&&t.offsetY!==void 0?t.offsetY:y,p=r.axisLabel.fontSize||14,x=l.map((E,C)=>{const N=A?t.tickValues[E-1]:E;return Br(r.ticks,Object.assign({},f,{tick:N,index:C})).size||0}),w=p+2*Math.max(...x)+h,_=1.2*p;return{x:v??(u?w:_),y:m??(u?_:w)}},Oa=(t,e)=>t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():t===e,mSe=(t,e)=>{const{scale:r,origin:n,orientation:s,orientations:a,domain:o,padding:l}=e,{top:A,bottom:u,left:h,right:c}=l,d={x:s==="bottom"||s==="top"?s:a.x,y:s==="left"||s==="right"?s:a.y},f={x:d.y==="left"?h:c,y:d.x==="bottom"?u:A},g={x:d.y==="left"?0:t.width,y:d.x==="bottom"?t.height:0},y={x:Oa(n.x,o.x[0])||Oa(n.x,o.x[1])?0:r.x(n.x),y:Oa(n.y,o.y[0])||Oa(n.y,o.y[1])?0:r.y(n.y)},v=y.x?Math.abs(g.x-y.x):f.x,m=y.y?Math.abs(g.y-y.y):f.y,p=qf(t.offsetX)?t.offsetX:v,x=qf(t.offsetY)?t.offsetY:m;return{x:p,y:x}},pSe=(t,e)=>{const{scale:r,origin:n,orientation:s,orientations:a,domain:o,padding:l}=e,{top:A,bottom:u,left:h,right:c}=l,d={y:s==="bottom"||s==="top"?s:a.x,x:s==="left"||s==="right"?s:a.y},f={x:d.y==="bottom"?u:A,y:d.x==="left"?h:c},g={y:d.x==="left"?0:t.width,x:d.y==="bottom"?t.height:0},y={x:Oa(n.x,o.x[0])||Oa(n.x,o.x[1])?0:r.x(n.x),y:Oa(n.y,o.y[0])||Oa(n.y,o.y[1])?0:r.y(n.y)},v=y.x?Math.abs(g.x-y.x):f.x,m=y.y?Math.abs(g.y-y.y):f.y,p=qf(t.offsetX)?t.offsetX:m,x=qf(t.offsetY)?t.offsetY:v;return{x:p,y:x}},ySe=(t,e,r)=>{const{orientation:n,axis:s}=e,a=eF(t,s);return{top:{x:0,y:a!==void 0?a:r.y},bottom:{x:0,y:a!==void 0?a:t.height-r.y},left:{x:a!==void 0?a:r.x,y:0},right:{x:a!==void 0?a:t.width-r.x,y:0}}[n]},vSe=(t,e,r)=>{const{tickStyle:n,labelStyle:s}=t,a=n.size||0,o=n.padding||0,l=s.padding||0,A=a+o+l,u=sb[e];return{x:r?u*A:0,x2:r?u*a:0,y:r?0:u*A,y2:r?0:u*a}},xSe=(t,e,r)=>({x:r?e.x:t+e.x,y:r?t+e.y:e.y}),wSe=(t,e)=>{const{orientation:r,padding:n,isVertical:s}=e,a=-sb[r],o=s?a*(t.width-(n.left+n.right)):0,l=s?0:a*(t.height-(n.top+n.bottom));return{x:o,y:l}},bSe=(t,e)=>{const{padding:r,orientation:n,crossAxis:s}=t,a=n==="right"?r.right:r.left,o=n==="top"?r.top:r.bottom;return{x:s?e.x-a:0,y:s?e.y-o:0}},_Se=(t,e)=>{let r;return e.domain.x&&e.domain.y?r=t.horizontal?pSe(t,e):mSe(t,e):r=gSe(t,e),{globalTransform:ySe(t,e,r),gridOffset:bSe(e,r),gridEdge:wSe(t,e)}},CSe=t=>{if(t.orientation)return t.orientation;const e={dependent:t.horizontal?"bottom":"left",independent:t.horizontal?"left":"bottom"};return t.dependentAxis?e.dependent:e.independent},BSe=t=>{const e=iSe(t),r=rT(t,e),n=Mn(t.padding),s=fSe(t,r),a=gg(t)?t.tickValues:void 0,o=Kn(t),l=hA(t),A=aSe(t),u=o==="x"?l:void 0,h=o==="y"?l:void 0,c=o==="x"?A:void 0,d=o==="y"?A:void 0,f=!(t.crossAxis===!1||t.standalone===!0),g=Z3(t,A,f),y=Y3(t,A),v={x:rr(t,"x"),y:rr(t,"y")},m={x:t.domain&&t.domain.x?t.domain.x:u,y:t.domain&&t.domain.y?t.domain.y:h},p={x:t.domain&&t.domain.x?Rn(t,"x").domain(t.domain.x).range(t.horizontal?v.y:v.x):c,y:t.domain&&t.domain.y?Rn(t,"y").domain(t.domain.y).range(t.horizontal?v.x:v.y):d},x=m.x&&m.y?J3(m):void 0,w=x?{x:r5(x.x,m.x),y:r5(x.y,m.y)}:void 0,_=w?{x:B5("x",w.y,t.horizontal),y:B5("y",w.x,t.horizontal)}:void 0,b=_?t.orientation||_[o]:CSe(t),S=fg(Object.assign({},t,{orientation:b}));return{anchors:hSe(b,S),axis:o,crossAxis:f,domain:m,isVertical:S,labelPadding:s,orientation:b,orientations:_,origin:x,padding:n,scale:p,stringTicks:a,style:r,tickFormat:y,ticks:g}},SSe=(t,e)=>{const r=mg(t,e),n=BSe(r),{axis:s,style:a,orientation:o,isVertical:l,scale:A,ticks:u,tickFormat:h,anchors:c,domain:d,stringTicks:f}=n,g=s==="x"?"y":"x",{width:y,height:v,standalone:m,theme:p,polar:x,padding:w,horizontal:_}=r,{globalTransform:b,gridOffset:S,gridEdge:E}=_Se(r,n),C={scale:{[s]:A[s]},polar:x,horizontal:_,ticks:u,stringTicks:f},N=cSe(r,n,b),Q=dSe(r,n,b),P={parent:Object.assign({style:a.parent,ticks:u,standalone:m,theme:p,width:y,height:v,padding:w,domain:d},C)},F={dimension:g,range:{[g]:rr(r,g)},scale:r.scale&&r.scale[g]?{[g]:r.scale[g]}:void 0};return u.reduce(($,L,D)=>{var G,X,te;const z=f?f[D]:L,k=h(L,D,u),M=uSe(a,Object.assign({},C,{tick:z,tickValue:L,index:D,text:k})),j={position:vSe(M,o,l),transform:xSe((G=A[s])==null?void 0:G.call(A,L),b,l)},I={edge:E,transform:{x:l?-S.x+b.x:((X=A[s])==null?void 0:X.call(A,L))+b.x,y:l?((te=A[s])==null?void 0:te.call(A,L))+b.y:S.y+b.y}};return $[D]={axis:Object.assign({dimension:s},C,N),axisLabel:Object.assign({},C,Q),ticks:Object.assign({},C,oSe(j,M.tickStyle,L)),tickLabels:Object.assign({},C,lSe(j,M.labelStyle,c,L,k)),grid:Object.assign({},C,F,ASe(I,M.gridStyle,L))},$},P)},S5={width:450,height:300,padding:50},jSe={components:[{name:"axis",index:0},{name:"axisLabel",index:0},{name:"grid"},{name:"parent",index:"parent"},{name:"ticks"},{name:"tickLabels"}]};class Hs extends R.Component{static getStyles(e){return rT(e)}static getBaseProps(e){return SSe(e,S5)}renderLine(e){const{axisComponent:r}=e,n=this.getComponentProps(r,"axis",0);return R.cloneElement(r,n)}renderLabel(e){const{axisLabelComponent:r,label:n}=e;if(!n)return null;const s=this.getComponentProps(r,"axisLabel",0);return R.cloneElement(r,s)}renderGridAndTicks(e){const{tickComponent:r,tickLabelComponent:n,gridComponent:s,name:a}=e,o=l=>{const{style:A={},events:u={}}=l;return A.stroke!=="transparent"&&A.stroke!=="none"&&A.strokeWidth!==0||!It(u)};return this.dataKeys.map((l,A)=>{const u=this.getComponentProps(r,"ticks",A),h=R.cloneElement(r,u),c=o(h.props)?h:void 0,d=this.getComponentProps(s,"grid",A),f=R.cloneElement(s,d),g=o(f.props)?f:void 0,y=this.getComponentProps(n,"tickLabels",A),m=[g,c,R.cloneElement(n,y)].filter(Boolean);return R.cloneElement(e.groupComponent,{key:`${a}-tick-group-${l}`},m)})}fixLabelOverlap(e,r){const n=fg(r),s=n?r.height:r.width,a=f=>f.type&&f.type.role==="label",o=e.map(f=>f.props.children).reduce((f,g)=>f.concat(g),[]).filter(a).map(f=>f.props),l=f=>typeof f=="object"?Object.assign({},{top:0,right:0,bottom:0,left:0},f):{top:f,right:f,bottom:f,left:f},A=o.reduce((f,g)=>{const y=l(g.style.padding),v=qF(g.text,{angle:g.angle,fontSize:g.style.fontSize,letterSpacing:g.style.letterSpacing,fontFamily:g.style.fontFamily});return f+(n?v.height+y.top+y.bottom:v.width+y.right+y.left)},0),u=Math.floor(s*e.length/A),h=Math.ceil(e.length/u)||1,c=f=>f.props.children.filter(a).reduce((g,y)=>(n?y.props.y:y.props.x)||0,0);return e.sort((f,g)=>n?c(g)-c(f):c(f)-c(g)).filter((f,g)=>g%h===0)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:e}=ti,r=mg(this.props,S5),n=ba(this.props);if(this.shouldAnimate())return this.animateComponent(r,e);const s=this.renderGridAndTicks(r),a=r.fixLabelOverlap?this.fixLabelOverlap(s,r):s,o=[this.renderLine(r),this.renderLabel(r),...a],l=R.cloneElement(r.containerComponent,n);return r.standalone?this.renderContainer(l,o):R.cloneElement(r.groupComponent,n,o)}}Z(Hs,"animationWhitelist",["style","domain","range","tickCount","tickValues","offsetX","offsetY","padding","width","height"]),Z(Hs,"displayName","VictoryAxis"),Z(Hs,"role","axis"),Z(Hs,"defaultTransitions",{onExit:{duration:500},onEnter:{duration:500}}),Z(Hs,"defaultProps",{axisComponent:R.createElement(Fl,null),axisLabelComponent:R.createElement(ks,null),tickLabelComponent:R.createElement(ks,null),tickComponent:R.createElement(Fl,null),gridComponent:R.createElement(Fl,null),standalone:!0,theme:fA.grayscale,containerComponent:R.createElement(Bo,null),groupComponent:R.createElement("g",{role:"presentation"}),fixLabelOverlap:!1}),Z(Hs,"getDomain",hA),Z(Hs,"getAxis",Kn),Z(Hs,"expectedComponents",["axisComponent","axisLabelComponent","groupComponent","containerComponent","tickComponent","tickLabelComponent","gridComponent"]);const ti=Ru(Hs,jSe);function kSe(t){for(var e=-1,r=t==null?0:t.length,n={};++e<r;){var s=t[e];n[s[0]]=s[1]}return n}var ESe=kSe;const NSe=St(ESe);var _v={exports:{}};(function(t,e){e=t.exports=r,e.getSerialize=n;function r(s,a,o,l){return JSON.stringify(s,n(a,l),o)}function n(s,a){var o=[],l=[];return a==null&&(a=function(A,u){return o[0]===u?"[Circular ~]":"[Circular ~."+l.slice(0,o.indexOf(u)).join(".")+"]"}),function(A,u){if(o.length>0){var h=o.indexOf(this);~h?o.splice(h+1):o.push(this),~h?l.splice(h,1/0,A):l.push(A),~o.indexOf(u)&&(u=a.call(this,A,u))}else o.push(u);return s==null?u:s.call(this,A,u)}}})(_v,_v.exports);var FSe=_v.exports;const TSe=St(FSe);class ZA extends R.Component{constructor(e){super(e),this.getScopedEvents=n3.bind(this),this.getEventState=a3.bind(this),this.state=this.state||{},this.sharedEventsCache={},this.globalEvents={},this.prevGlobalEventKeys=[],this.boundGlobalEvents={},this.baseProps=this.getBaseProps(e)}shouldComponentUpdate(e){if(!Ki(this.props,e)){this.baseProps=this.getBaseProps(e);const r=this.getExternalMutations(e,this.baseProps);this.applyExternalMutations(e,r)}return!0}componentDidMount(){const e=Object.keys(this.globalEvents);e.forEach(r=>this.addGlobalListener(r)),this.prevGlobalEventKeys=e}componentDidUpdate(){const e=Object.keys(this.globalEvents);Sf(this.prevGlobalEventKeys,e).forEach(s=>this.removeGlobalListener(s)),Sf(e,this.prevGlobalEventKeys).forEach(s=>this.addGlobalListener(s)),this.prevGlobalEventKeys=e}componentWillUnmount(){this.prevGlobalEventKeys.forEach(e=>this.removeGlobalListener(e))}addGlobalListener(e){const r=n=>{const s=this.globalEvents[e];return s&&s(A3(n))};this.boundGlobalEvents[e]=r,window.addEventListener(kf(e),r)}removeGlobalListener(e){window.removeEventListener(kf(e),this.boundGlobalEvents[e])}getAllEvents(e){const n=d1(e,["container","groupComponent"]);return Array.isArray(n)?Array.isArray(e.events)?n.concat(...e.events):n:e.events}applyExternalMutations(e,r){if(!It(r)){const n=e.externalEventMutations.reduce((a,o)=>rt(o.callback)?a.concat(o.callback):a,[]),s=n.length?()=>{n.forEach(a=>a())}:void 0;this.setState(r,s)}}getExternalMutations(e,r){return It(e.externalEventMutations)?void 0:p1e(e.externalEventMutations,r,this.state,Object.keys(r))}cacheSharedEvents(e,r,n){this.sharedEventsCache[e]=[r,n]}getCachedSharedEvents(e,r){const[n,s]=this.sharedEventsCache[e]||[];if(n&&Ki(r,s))return n}getBaseProps(e){const{container:r}=e,n=R.Children.toArray(this.props.children),s=this.getBasePropsFromChildren(n),a=r?r.props:{};return Object.assign({},s,{parent:a})}getBasePropsFromChildren(e){const n=Mu(e,(s,a)=>{if(s.type&&rt(s.type.getBaseProps)){const o=s.props&&s.type.getBaseProps(s.props);return o?[[a,o]]:null}return null});return NSe(n)}getNewChildren(e,r){const{events:n,eventKey:s}=e,a=(A,u)=>A.reduce((h,c,d)=>{if(c.props.children){const f=R.Children.toArray(c.props.children),g=u.slice(d,d+f.length),y=R.cloneElement(c,c.props,a(f,g));return h.concat(y)}else if(u[d]!=="parent"&&c.type&&rt(c.type.getBaseProps)){const f=c.props.name||u[d],g=Array.isArray(n)&&n.filter(m=>m.target==="parent"?!1:Array.isArray(m.childName)?m.childName.indexOf(f)>-1:m.childName===f||m.childName==="all"),y=[f,r,g,TSe(this.state[f])],v=this.getCachedSharedEvents(f,y)||{events:g,getEvents:(m,p)=>this.getScopedEvents(m,p,f,r),getEventState:(m,p)=>this.getEventState(m,p,f)};return this.cacheSharedEvents(f,v,y),h.concat(R.cloneElement(c,Object.assign({key:`events-${f}`,sharedEvents:v,eventKey:s,name:f},c.props)))}return h.concat(c)},[]),o=Object.keys(r),l=R.Children.toArray(e.children);return a(l,o)}getContainer(e,r,n){const s=this.getNewChildren(e,r),a=Array.isArray(n)?n.filter(y=>y.target==="parent"):[],o=a.length>0?{events:a,getEvents:(y,v)=>this.getScopedEvents(y,v,null,r),getEventState:this.getEventState}:null,l=e.container||e.groupComponent,A=l.type&&l.type.role,u=l.props||{},h=r3.bind(this),c=o&&h({sharedEvents:o},"parent"),d=_e({},this.getEventState("parent","parent"),u,r.parent,{children:s}),f=_e({},s3(c,"parent",d),u.events);this.globalEvents=o3(f);const g=l3(f);return A==="container"?R.cloneElement(l,Object.assign({},d,{events:g})):R.cloneElement(l,g,s)}render(){const e=this.getAllEvents(this.props);return e?this.getContainer(this.props,this.baseProps,e):R.cloneElement(this.props.container,{children:this.props.children})}}Z(ZA,"displayName","VictorySharedEvents"),Z(ZA,"role","shared-event-wrapper"),Z(ZA,"contextType",t1),Z(ZA,"defaultProps",{groupComponent:R.createElement("g",null)});const Zr=(t,e,r)=>r==="x"?t*Math.cos(e):-t*Math.sin(e),nT=t=>{const e=t.dependentAxis?"radial":"angular",r=e==="angular"?"radial":"angular";return t.horizontal?r:e},USe=(t,e)=>t5e(t,n=>e(n)%(2*Math.PI)),ab=(t,e)=>({tickStyle:Br(t.ticks,e),labelStyle:Br(t.tickLabels,e),gridStyle:Br(t.grid,e)}),QSe=t=>{var A,u;const{theme:e={},dependentAxis:r}=t,n=e.polarAxis&&e.polarAxis.style||e.axis&&e.axis.style,s=r?"polarDependentAxis":"polarIndependentAxis",a=r?"dependentAxis":"independentAxis",o=((A=e==null?void 0:e[s])==null?void 0:A.style)||((u=e==null?void 0:e[a])==null?void 0:u.style);return n&&o?(()=>["axis","axisLabel","grid","parent","tickLabels","ticks"].reduce((c,d)=>(c[d]=_e({},o==null?void 0:o[d],n==null?void 0:n[d]),c),{}))():o||n},sT=t=>{const{left:e,right:r,top:n,bottom:s}=Mn(t.padding),{width:a,height:o}=t;if(a===void 0||o===void 0)throw new Error("VictoryPolarAxis: width and height properties are required for standalone axes.");return Math.min(a-e-r,o-n-s)/2},aT=(t,e)=>{if(t.range&&t.range[e])return t.range[e];if(t.range&&Array.isArray(t.range))return t.range;if(nT(t)==="angular"){const s=er(t.startAngle),a=er(t.endAngle);return[s,a]}const n=sT(t);return[t.innerRadius||0,n]},iT=t=>{const e=Kn(t),r=Rn(t,e),n=hA(t,e)||r.domain(),s=aT(t,e);return r.range(s),r.domain(n),r},oT=function(t,e){if(e===void 0&&(e={}),t.disableInlineStyles)return{};const r=t.style||{};return{parent:_e({height:"auto",width:"100%"},r.parent,e.parent),axis:_e({},r.axis,e.axis),axisLabel:_e({},r.axisLabel,e.axisLabel),grid:_e({},r.grid,e.grid),ticks:_e({},r.ticks,e.ticks),tickLabels:_e({},r.tickLabels,e.tickLabels)}},Bg=t=>{const{axisAngle:e,startAngle:r,dependentAxis:n}=t,s=Kn(t),a=eF(t,s);return a===void 0||!n?e===void 0?r:e:o1(a)},ISe=(t,e,r,n)=>{const{axisType:s,radius:a,scale:o,style:l,stringTicks:A,ticks:u,tickFormat:h,origin:c}=e,d=h(r,n,u),f=A?A[n]:r,{tickStyle:g}=ab(l,{tick:f,tickValue:r,index:n,ticks:u,stringTicks:A,radius:a,scale:o,axisType:s,text:d}),y=s==="radial"?Bg(t):void 0,v=g.padding||g.size||0,m=er(90-y),p=s==="angular"?o(r):er(-1*y),x=s==="angular"?a:o(r);return s==="angular"?{index:n,datum:f,style:g,x1:Zr(x,p,"x")+c.x,y1:Zr(x,p,"y")+c.y,x2:Zr(x+v,p,"x")+c.x,y2:Zr(x+v,p,"y")+c.y}:{index:n,datum:f,style:g,x1:x*Math.cos(p)+Math.cos(m)*v+c.x,x2:x*Math.cos(p)-Math.cos(m)*v+c.x,y1:x*Math.sin(p)+Math.sin(m)*v+c.y,y2:x*Math.sin(p)-Math.sin(m)*v+c.y}},PSe=(t,e,r,n)=>{const{axisType:s,radius:a,tickFormat:o,style:l,scale:A,ticks:u,stringTicks:h,origin:c}=e,d=o(r,n,u),f=h?h[n]:r,{labelStyle:g}=ab(l,{text:d,tick:f,tickValue:r,index:n,ticks:u,stringTicks:h,radius:a,scale:A,axisType:s}),{tickLabelComponent:y}=t,v=y!=null&&y.props.labelPlacement?y.props.labelPlacement:t.labelPlacement,m=g.padding||0,p=0,x=s==="radial"?Bg(t):void 0,w=s==="angular"?o1(A(r)):x+p,_=g.angle===void 0?H1(Object.assign({},t,{labelPlacement:v}),w):g.angle,b=s==="angular"?a+m:A(r),S=g.textAnchor||L1(Object.assign({},t,{labelPlacement:v}),w);return{index:n,datum:f,style:g,angle:_,textAnchor:S,text:d,x:b*Math.cos(er(w))+c.x,y:-b*Math.sin(er(w))+c.y}},DSe=(t,e,r,n)=>{const{axisType:s,radius:a,style:o,scale:l,stringTicks:A,ticks:u,tickFormat:h,origin:c}=e,d=h(r,n,u),{startAngle:f,endAngle:g,innerRadius:y=0}=t,v=A?A[n]:r,{gridStyle:m}=ab(o,{tick:v,tickValue:r,index:n,ticks:u,stringTicks:A,radius:a,scale:l,axisType:s,text:d}),p=l(r);return s==="angular"?{index:n,datum:v,style:m,x1:Zr(a,p,"x")+c.x,y1:Zr(a,p,"y")+c.y,x2:Zr(y,p,"x")+c.x,y2:Zr(y,p,"y")+c.y}:{style:m,index:n,datum:v,cx:c.x,cy:c.y,r:l(r),startAngle:f,endAngle:g}},MSe=(t,e)=>{const{axisType:r,radius:n,style:s,origin:a}=e,{axisLabelComponent:o}=t;if(r!=="radial")return{};const l=o!=null&&o.props.labelPlacement?o.props.labelPlacement:t.labelPlacement,A=s&&s.axisLabel||{},u=r==="radial"?Bg(t):void 0,h=A.angle===void 0?H1(Object.assign({},t,{labelPlacement:l}),u):A.angle,c=n+(A.padding||0),d=A.textAnchor||L1(Object.assign({},t,{labelPlacement:l}),u),f=A.verticalAnchor||nF(Object.assign({},t,{labelPlacement:l}),u);return{style:A,angle:h,textAnchor:d,verticalAnchor:f,text:t.label,x:Zr(c,er(u),"x")+a.x,y:Zr(c,er(u),"y")+a.y}},RSe=(t,e)=>{const{style:r,axisType:n,radius:s,origin:a}=e,{startAngle:o,endAngle:l,innerRadius:A=0}=t,u=n==="radial"?er(Bg(t)):void 0;return n==="radial"?{style:r.axis,x1:Zr(A,u,"x")+a.x,x2:Zr(s,u,"x")+a.x,y1:Zr(A,u,"y")+a.y,y2:Zr(s,u,"y")+a.y}:{style:r.axis,cx:a.x,cy:a.y,r:s,startAngle:o,endAngle:l}},$Se=t=>{const e=Object.assign({polar:!0},t),r=QSe(e),n=oT(e,r),s=Mn(e.padding),a=Kn(e),o=nT(e),l=gg(e)?e.tickValues:void 0,A=hA(e,a),u=aT(e,a),h=iT(e),c=Z3(e,h),d=o==="angular"?USe(c,h):c,f=Y3(e,h),g=sT(e),y=Du(e);return{axis:a,style:n,padding:s,stringTicks:l,axisType:o,scale:h,ticks:d,tickFormat:f,domain:A,range:u,radius:g,origin:y}},OSe=(t,e)=>{const r=mg(t,e),n=$Se(r),{style:s,scale:a,ticks:o,domain:l}=n,{width:A,height:u,standalone:h,theme:c,name:d}=r,f=RSe(r,n),g=MSe(r,n),y={parent:{style:s.parent,ticks:o,scale:a,width:A,height:u,domain:l,standalone:h,theme:c,name:d}};return o.reduce((v,m,p)=>(v[p]={axis:f,axisLabel:g,ticks:ISe(r,n,m,p),tickLabels:PSe(r,n,m,p),grid:DSe(r,n,m,p)},v),y)},Jm={width:450,height:300,padding:50};class Ks extends R.Component{static getScale(e){return iT(e)}static getStyles(e){return oT(e,Jm.style)}static getBaseProps(e){return OSe(e,Jm)}renderAxisLine(e){const{dependentAxis:r}=e,n=r?e.axisComponent:e.circularAxisComponent,s=this.getComponentProps(n,"axis",0);return R.cloneElement(n,s)}renderLabel(e){const{axisLabelComponent:r,dependentAxis:n,label:s}=e;if(!s||!n)return null;const a=this.getComponentProps(r,"axisLabel",0);return R.cloneElement(r,a)}renderAxis(e){const{tickComponent:r,tickLabelComponent:n,name:s}=e,a=g=>{const{style:y={},events:v={}}=g;return y.stroke!=="transparent"&&y.stroke!=="none"&&y.strokeWidth!==0||!It(v)},l=(e.dependentAxis?"radial":"angular")==="radial"?e.circularGridComponent:e.gridComponent,A=this.dataKeys.map((g,y)=>{const v=Object.assign({key:`${s}-tick-${g}`},this.getComponentProps(r,"ticks",y)),m=R.cloneElement(r,v);return a(m.props)?m:void 0}).filter(Boolean),u=this.dataKeys.map((g,y)=>{const v=Object.assign({key:`${s}-grid-${g}`},this.getComponentProps(l,"grid",y)),m=R.cloneElement(l,v);return a(m.props)?m:void 0}).filter(Boolean),h=this.dataKeys.map((g,y)=>{const v=Object.assign({key:`${s}-tick-${g}`},this.getComponentProps(n,"tickLabels",y));return R.cloneElement(n,v)}),c=this.renderAxisLine(e),d=this.renderLabel(e),f=[c,d,...A,...u,...h];return this.renderGroup(e,f)}renderGroup(e,r){const{groupComponent:n}=e;return R.cloneElement(n,{},r)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:e}=Cv,r=mg(this.props,Jm);if(this.shouldAnimate())return this.animateComponent(r,e);const n=this.renderAxis(r);return r.standalone?this.renderContainer(r.containerComponent,n):n}}Z(Ks,"animationWhitelist",["style","domain","range","tickCount","tickValues","padding","width","height"]),Z(Ks,"displayName","VictoryAxis"),Z(Ks,"role","axis"),Z(Ks,"defaultTransitions",{onExit:{duration:500},onEnter:{duration:500}}),Z(Ks,"defaultProps",{axisComponent:R.createElement(Fl,null),axisLabelComponent:R.createElement(ks,null),circularAxisComponent:R.createElement(b5,null),circularGridComponent:R.createElement(b5,null),containerComponent:R.createElement(Bo,null),endAngle:360,gridComponent:R.createElement(Fl,null),groupComponent:R.createElement("g",{role:"presentation"}),labelPlacement:"parallel",startAngle:0,standalone:!0,theme:fA.grayscale,tickComponent:R.createElement(Fl,null),tickLabelComponent:R.createElement(ks,null)}),Z(Ks,"getDomain",hA),Z(Ks,"getAxis",Kn),Z(Ks,"expectedComponents",["axisComponent","circularAxisComponent","groupComponent","containerComponent","tickComponent","tickLabelComponent","gridComponent","circularGridComponent"]);const LSe={components:[{name:"axis",index:0},{name:"axisLabel",index:0},{name:"grid"},{name:"parent",index:"parent"},{name:"ticks"},{name:"tickLabels"}]},Cv=Ru(Ks,LSe),HSe={width:450,height:300,padding:50};function KSe(t,e,r){const{domain:n,scale:s,stringMap:a,categories:o,horizontal:l}=r;return{stringMap:a,horizontal:l,categories:o,startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,domain:n,scale:s}}function zSe(t,e){const r=t.backgroundComponent,n=t.polar?e.range.y[1]:e.range.y[0]-e.range.y[1],s=e.range.x[1]-e.range.x[0],a=t.horizontal?e.scale.y.range()[0]:e.scale.x.range()[0],o=t.horizontal?e.scale.x.range()[1]:e.scale.y.range()[1],l=t.polar?e.origin.x:a,A=t.polar?e.origin.y:o,u=t.name||"chart",h={height:n,polar:t.polar,scale:e.scale,style:t.style.background,x:l,y:A,key:`${u}-background`,width:s};return R.cloneElement(r,_e({},r.props,h))}function GSe(t,e,r){const n=q3([t]);if(n.length>0)return KSe(n[0],e,r);const{categories:s,domain:a,range:o,scale:l,stringMap:A,horizontal:u}=r;return{categories:s,domain:a,range:o,scale:l,stringMap:A,horizontal:u}}function WSe(t){const e=t.style&&t.style.parent;return{parent:_e({},e,{height:"100%",width:"100%",userSelect:"none"})}}function lT(t,e){const r=WSe(t),n=is(t,HSe,"chart"),{horizontal:s,polar:a}=n,o=XF(n,e),l=A5e(n,e,o),A=qSe(n,e,o),u={x:j5(Object.assign({},n,{categories:l}),"x",e),y:j5(Object.assign({},n,{categories:l}),"y",e)},h={x:rr(n,"x"),y:rr(n,"y")},c={x:sv(n,"x")||y5(n,"x"),y:sv(n,"y")||y5(n,"y")},d={x:c.x.domain(u.x).range(s?h.y:h.x),y:c.y.domain(u.y).range(s?h.x:h.y)},f=a?Du(n):J3(u),g=Mn(n.padding);return{categories:l,domain:u,range:h,horizontal:s,scale:d,stringMap:A,style:r,origin:f,padding:g}}function VSe(t,e,r){const n=e||AT(t),s=r||lT(t,n),a=s.style.parent,{height:o,polar:l,theme:A,width:u}=t,{origin:h,horizontal:c}=s,d=t.name||"chart";return n.filter(R.isValidElement).map((f,g)=>{const y=f.type&&f.type.role,v=Array.isArray(f.props.style)?f.props.style:_e({},f.props.style,{parent:a}),m=GSe(f,t,s),p=f.props.name||`${d}-${y}-${g}`,x=_e({horizontal:c,height:o,polar:l,theme:A,width:u,style:v,name:p,origin:l?h:void 0,padding:s.padding,key:`${p}-key-${g}`,standalone:!1},m);return R.cloneElement(f,x)})}const AT=(t,e)=>{let r=R.Children.toArray(t.children);if(r.length===0)r.push(e.independent,e.dependent);else{const n={dependent:t5(r,"dependent"),independent:t5(r,"independent")};n.dependent.length===0&&n.independent.length===0&&(r=t.prependDefaultAxes?[e.independent,e.dependent].concat(r):r.concat([e.independent,e.dependent]))}return r},j5=(t,e,r)=>{const n=r||R.Children.toArray(t.children),s=a5e(t,e,n),a=X3(n,e);return a&&a.props&&a.props.invertAxis?s.concat().reverse():s},qSe=(t,e,r)=>{const n=!r.x||r.x.length===0?null:r.x.reduce((a,o,l)=>(a[o]=l+1,a),{}),s=!r.y||r.y.length===0?null:r.y.reduce((a,o,l)=>(a[o]=l+1,a),{});return{x:n,y:s}},XSe={width:450,height:300,padding:50},JSe={backgroundComponent:R.createElement($5e,null),containerComponent:R.createElement(Bo,null),defaultAxes:{independent:R.createElement(ti,null),dependent:R.createElement(ti,{dependentAxis:!0})},defaultPolarAxes:{independent:R.createElement(Cv,null),dependent:R.createElement(Cv,{dependentAxis:!0})},groupComponent:R.createElement("g",null),standalone:!0,theme:fA.grayscale},YSe=t=>{const e=R.useMemo(()=>_e({},t,JSe),[t]),r="chart",{getAnimationProps:n,setAnimationState:s,getProps:a}=jCe(),o=a(e),l=is(o,XSe,r),{desc:A,eventKey:u,containerComponent:h,standalone:c,groupComponent:d,externalEventMutations:f,width:g,height:y,theme:v,polar:m,name:p,title:x}=l,w=o.polar?l.defaultPolarAxes:l.defaultAxes,_=R.useMemo(()=>AT(l,w),[l,w]),b=R.useMemo(()=>lT(l,_),[l,_]),{domain:S,scale:E,style:C,origin:N,horizontal:Q}=b,P=R.useMemo(()=>{const k=VSe(o,_,b).map((M,j)=>{const I=Object.assign({animate:n(o,M,j)},M.props);return R.cloneElement(M,I)});if(o.style&&o.style.background){const M=zSe(o,b);k.unshift(M)}return k},[n,_,o,b]),F=R.useMemo(()=>c?{desc:A,domain:S,width:g,height:y,horizontal:Q,name:p,origin:m?N:void 0,polar:m,theme:v,title:x,scale:E,standalone:c,style:C.parent}:{},[A,S,y,Q,p,N,m,E,c,C,x,v,g]),$=R.useMemo(()=>{if(c){const z=_e({},h.props,F,ba(e));return R.cloneElement(h,z)}return d},[d,c,h,F,e]),L=R.useMemo(()=>i5e(o),[o]),D=BCe(e);return R.useEffect(()=>()=>{e.animate&&s(D,e)},[s,D,e]),It(L)?R.cloneElement($,$.props,P):R.createElement(ZA,{container:$,eventKey:u,events:L,externalEventMutations:f},P)},Sg=R.memo(YSe,Ki);Sg.displayName="VictoryChart";Sg.expectedComponents=["groupComponent","containerComponent"];const ZSe=t=>{let e=hs(t);e.length<2&&(e=[]);const r={x:rr(t,"x"),y:rr(t,"y")},n={x:ao(t,"x"),y:ao(t,"y")},s={x:Rn(t,"x").domain(n.x).range(t.horizontal?r.y:r.x),y:Rn(t,"y").domain(n.y).range(t.horizontal?r.x:r.y)},a=t.polar?t.origin||Du(t):void 0,o=a1(t,"line"),l=i1(t.style,o);return{domain:n,data:e,scale:s,style:l,origin:a}},eje=(t,e)=>{const r=is(t,e,"line"),n=Object.assign({},r,ZSe(r)),{data:s,domain:a,events:o,groupComponent:l,height:A,horizontal:u,interpolation:h,origin:c,padding:d,polar:f,scale:g,sharedEvents:y,standalone:v,style:m,theme:p,width:x,labels:w,name:_,disableInlineStyles:b}=n,S={parent:{style:m.parent,scale:g,data:s,height:A,width:x,name:_,domain:a,standalone:v,polar:f,origin:c,padding:d,horizontal:u},all:{data:{horizontal:u,polar:f,origin:c,scale:g,data:s,interpolation:h,groupComponent:l,style:b?{}:m.data,theme:p,disableInlineStyles:b}}};return s.reduce((E,C,N)=>{const Q=pg(n,C,N);if(Q!=null||w&&(o||y)){const P=lu(C.eventKey)?N:C.eventKey;E[P]={labels:z1(n,N)}}return E},S)},tje=t=>{const e=Be(t.ariaLabel,t),r=Be(t.id,t),n=Br(Object.assign({fill:"none",stroke:"black",pointerEvents:"stroke"},t.style),t),s=Be(t.tabIndex,t);return Object.assign({},t,{ariaLabel:e,id:r,style:n,tabIndex:s})},rje={pathComponent:R.createElement(Cg,null),role:"presentation",shapeRendering:"auto"},nje=t=>{const e=tje(_e({},t,rje)),r=ba(e),{polar:n,origin:s}=e,a=MF(e),o=n&&s?`translate(${s.x}, ${s.y})`:void 0,l=a(e.data);return R.cloneElement(e.pathComponent,{...e.events,...r,"aria-label":e.ariaLabel,d:l,style:e.style,transform:e.transform||o,className:e.className,role:e.role,shapeRendering:e.shapeRendering,clipPath:e.clipPath,tabIndex:e.tabIndex})},k5={width:450,height:300,padding:50,interpolation:"linear"},sje={components:[{name:"parent",index:"parent"},{name:"data",index:"all"},{name:"labels"}]},cn=class cn extends R.Component{constructor(e){super(e)}static getBaseProps(e){return eje(e,k5)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:e,role:r}=cn,n=is(this.props,k5,r);if(this.shouldAnimate())return this.animateComponent(n,e);const s=this.renderContinuousData(n),a=n.standalone?this.renderContainer(n.containerComponent,s):s;return c1(a,n)}};Z(cn,"animationWhitelist",["data","domain","height","padding","samples","style","width"]),Z(cn,"displayName","VictoryLine"),Z(cn,"role","line"),Z(cn,"defaultTransitions",tF()),Z(cn,"defaultPolarTransitions",rF()),Z(cn,"continuous",!0),Z(cn,"defaultProps",{containerComponent:R.createElement(Bo,null),dataComponent:R.createElement(nje,null),labelComponent:R.createElement(ks,{renderInPortal:!0}),groupComponent:R.createElement(xc,null),samples:50,sortKey:"x",sortOrder:"ascending",standalone:!0,theme:fA.grayscale}),Z(cn,"getDomain",ao),Z(cn,"getData",hs),Z(cn,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);let Bv=cn;const ec=Ru(Bv,sje),aje=(t,e)=>e.bubbleProperty?"circle":t.symbol||e.symbol,ije=(t,e)=>{const{data:r,z:n,maxBubbleSize:s,minBubbleSize:a}=e,o=r.map(m=>m[n]),l=Math.min(...o),A=Math.max(...o),h=s||(()=>{const m=Math.min(...Object.values(Mn(e.padding)));return Math.max(m,5)})(),c=a||h*.1;if(A===l)return Math.max(c,1);const d=Math.PI*Math.pow(h,2),f=Math.PI*Math.pow(c,2),g=(t[n]-l)/(A-l)*d,y=Math.max(g,f),v=Math.sqrt(y/Math.PI);return Math.max(v,1)},oje=(t,e)=>{const{size:r,z:n}=e;return t.size?typeof t.size=="function"?t.size:Math.max(t.size,1):typeof e.size=="function"?r:t[n]?ije(t,e):Math.max(r||0,1)},lje=t=>{const e=a1(t,"scatter"),r=i1(t.style,e),n={x:rr(t,"x"),y:rr(t,"y")},s={x:ao(t,"x"),y:ao(t,"y")},a={x:Rn(t,"x").domain(s.x).range(t.horizontal?n.y:n.x),y:Rn(t,"y").domain(s.y).range(t.horizontal?n.x:n.y)},o=t.polar?t.origin||Du(t):void 0,l=t.bubbleProperty||"z";let A=hs(t);return A=uCe(A,s),{domain:s,data:A,scale:a,style:r,origin:o,z:l}},Aje=(t,e)=>{const r=is(t,e,"scatter"),n=Object.assign({},r,lje(r)),{data:s,domain:a,events:o,height:l,origin:A,padding:u,polar:h,scale:c,name:d,sharedEvents:f,standalone:g,style:y,theme:v,width:m,labels:p,horizontal:x,disableInlineStyles:w}=n,_={parent:{style:y.parent,scale:c,domain:a,data:s,height:l,width:m,standalone:g,theme:v,origin:A,polar:h,padding:u,name:d,horizontal:x}};return s.reduce((b,S,E)=>{const C=lu(S.eventKey)?E:S.eventKey,{x:N,y:Q}=s1(n,S),P={x:N,y:Q,datum:S,data:s,index:E,scale:c,polar:h,origin:A,horizontal:x,size:oje(S,n),symbol:aje(S,n),style:w?{}:y.data,disableInlineStyles:w};b[C]={data:P};const F=pg(n,S,E);return(F!=null||p&&(o||f))&&(b[C].labels=z1(n,E)),b},_)},E5={width:450,height:300,padding:50,size:3,symbol:"circle"};class zs extends R.Component{static getBaseProps(e){return Aje(e,E5)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:e,role:r}=ib,n=is(this.props,E5,r);if(this.shouldAnimate())return this.animateComponent(n,e);const s=this.renderData(n),a=n.standalone?this.renderContainer(n.containerComponent,s):s;return c1(a,n)}}Z(zs,"animationWhitelist",["data","domain","height","maxBubbleSize","padding","samples","size","style","width"]),Z(zs,"displayName","VictoryScatter"),Z(zs,"role","scatter"),Z(zs,"defaultTransitions",CCe()),Z(zs,"defaultProps",{containerComponent:R.createElement(Bo,null),dataComponent:R.createElement(W5e,null),labelComponent:R.createElement(ks,null),groupComponent:R.createElement("g",null),samples:50,sortOrder:"ascending",standalone:!0,theme:fA.grayscale}),Z(zs,"getDomain",ao),Z(zs,"getData",hs),Z(zs,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);const ib=Ru(zs);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sv=function(t,e){return Sv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Sv(t,e)};function fs(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Sv(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jv=function(){return jv=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jv.apply(this,arguments)};function Tr(t,e,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{u(n.next(h))}catch(c){o(c)}}function A(h){try{u(n.throw(h))}catch(c){o(c)}}function u(h){h.done?a(h.value):s(h.value).then(l,A)}u((n=n.apply(t,e||[])).next())})}function xr(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(h){return A([u,h])}}function A(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],s=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Td(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||e)}var ma=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),jg=function(t,e){return ma.fromClientRect(t,e.getBoundingClientRect())},cje=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new ma(0,0,n,s)},kg=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},Ut=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var o=t[s];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},N5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uje=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Ud=0;Ud<N5.length;Ud++)uje[N5.charCodeAt(Ud)]=Ud;var F5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qd=0;Qd<F5.length;Qd++)tc[F5.charCodeAt(Qd)]=Qd;var dje=function(t){var e=t.length*.75,r=t.length,n,s=0,a,o,l,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),h=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)a=tc[t.charCodeAt(n)],o=tc[t.charCodeAt(n+1)],l=tc[t.charCodeAt(n+2)],A=tc[t.charCodeAt(n+3)],h[s++]=a<<2|o>>4,h[s++]=(o&15)<<4|l>>2,h[s++]=(l&3)<<6|A&63;return u},hje=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},fje=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Gi=5,ob=6+5,Ym=2,gje=ob-Gi,cT=65536>>Gi,mje=1<<Gi,Zm=mje-1,pje=1024>>Gi,yje=cT+pje,vje=yje,xje=32,wje=vje+xje,bje=65536>>ob,_je=1<<gje,Cje=_je-1,T5=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},Bje=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},Sje=function(t,e){var r=dje(t),n=Array.isArray(r)?fje(r):new Uint32Array(r),s=Array.isArray(r)?hje(r):new Uint16Array(r),a=24,o=T5(s,a/2,n[4]/2),l=n[5]===2?T5(s,(a+n[4])/2):Bje(n,Math.ceil((a+n[4])/4));return new jje(n[0],n[1],n[2],n[3],o,l)},jje=function(){function t(e,r,n,s,a,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Gi],r=(r<<Ym)+(e&Zm),this.data[r];if(e<=65535)return r=this.index[cT+(e-55296>>Gi)],r=(r<<Ym)+(e&Zm),this.data[r];if(e<this.highStart)return r=wje-bje+(e>>ob),r=this.index[r],r+=e>>Gi&Cje,r=this.index[r],r=(r<<Ym)+(e&Zm),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),U5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kje=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Id=0;Id<U5.length;Id++)kje[U5.charCodeAt(Id)]=Id;var Eje="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Q5=50,Nje=1,uT=2,dT=3,Fje=4,Tje=5,I5=7,hT=8,P5=9,La=10,kv=11,D5=12,Ev=13,Uje=14,rc=15,Nv=16,Pd=17,DA=18,Qje=19,M5=20,Fv=21,MA=22,ep=23,Ko=24,on=25,nc=26,sc=27,zo=28,Ije=29,Ti=30,Pje=31,Dd=32,Md=33,Tv=34,Uv=35,Qv=36,uu=37,Iv=38,Ch=39,Bh=40,tp=41,fT=42,Dje=43,Mje=[9001,65288],gT="!",Ke="",Rd="",Pv=Sje(Eje),Rs=[Ti,Qv],Dv=[Nje,uT,dT,Tje],mT=[La,hT],R5=[sc,nc],Rje=Dv.concat(mT),$5=[Iv,Ch,Bh,Tv,Uv],$je=[rc,Ev],Oje=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(a,o){var l=Pv.get(a);if(l>Q5?(s.push(!0),l-=Q5):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(o),r.push(Nv);if(l===Fje||l===kv){if(o===0)return n.push(o),r.push(Ti);var A=r[o-1];return Rje.indexOf(A)===-1?(n.push(n[o-1]),r.push(A)):(n.push(o),r.push(Ti))}if(n.push(o),l===Pje)return r.push(e==="strict"?Fv:uu);if(l===fT||l===Ije)return r.push(Ti);if(l===Dje)return a>=131072&&a<=196605||a>=196608&&a<=262141?r.push(uu):r.push(Ti);r.push(l)}),[n,r,s]},rp=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=r;a<=n.length;){a++;var o=n[a];if(o===e)return!0;if(o!==La)break}if(s===La)for(var a=r;a>0;){a--;var l=n[a];if(Array.isArray(t)?t.indexOf(l)!==-1:t===l)for(var A=r;A<=n.length;){A++;var o=n[A];if(o===e)return!0;if(o!==La)break}if(l!==La)break}return!1},O5=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===La)r--;else return n}return 0},Lje=function(t,e,r,n,s){if(r[n]===0)return Ke;var a=n-1;if(Array.isArray(s)&&s[a]===!0)return Ke;var o=a-1,l=a+1,A=e[a],u=o>=0?e[o]:0,h=e[l];if(A===uT&&h===dT)return Ke;if(Dv.indexOf(A)!==-1)return gT;if(Dv.indexOf(h)!==-1||mT.indexOf(h)!==-1)return Ke;if(O5(a,e)===hT)return Rd;if(Pv.get(t[a])===kv||(A===Dd||A===Md)&&Pv.get(t[l])===kv||A===I5||h===I5||A===P5||[La,Ev,rc].indexOf(A)===-1&&h===P5||[Pd,DA,Qje,Ko,zo].indexOf(h)!==-1||O5(a,e)===MA||rp(ep,MA,a,e)||rp([Pd,DA],Fv,a,e)||rp(D5,D5,a,e))return Ke;if(A===La)return Rd;if(A===ep||h===ep)return Ke;if(h===Nv||A===Nv)return Rd;if([Ev,rc,Fv].indexOf(h)!==-1||A===Uje||u===Qv&&$je.indexOf(A)!==-1||A===zo&&h===Qv||h===M5||Rs.indexOf(h)!==-1&&A===on||Rs.indexOf(A)!==-1&&h===on||A===sc&&[uu,Dd,Md].indexOf(h)!==-1||[uu,Dd,Md].indexOf(A)!==-1&&h===nc||Rs.indexOf(A)!==-1&&R5.indexOf(h)!==-1||R5.indexOf(A)!==-1&&Rs.indexOf(h)!==-1||[sc,nc].indexOf(A)!==-1&&(h===on||[MA,rc].indexOf(h)!==-1&&e[l+1]===on)||[MA,rc].indexOf(A)!==-1&&h===on||A===on&&[on,zo,Ko].indexOf(h)!==-1)return Ke;if([on,zo,Ko,Pd,DA].indexOf(h)!==-1)for(var c=a;c>=0;){var d=e[c];if(d===on)return Ke;if([zo,Ko].indexOf(d)!==-1)c--;else break}if([sc,nc].indexOf(h)!==-1)for(var c=[Pd,DA].indexOf(A)!==-1?o:a;c>=0;){var d=e[c];if(d===on)return Ke;if([zo,Ko].indexOf(d)!==-1)c--;else break}if(Iv===A&&[Iv,Ch,Tv,Uv].indexOf(h)!==-1||[Ch,Tv].indexOf(A)!==-1&&[Ch,Bh].indexOf(h)!==-1||[Bh,Uv].indexOf(A)!==-1&&h===Bh||$5.indexOf(A)!==-1&&[M5,nc].indexOf(h)!==-1||$5.indexOf(h)!==-1&&A===sc||Rs.indexOf(A)!==-1&&Rs.indexOf(h)!==-1||A===Ko&&Rs.indexOf(h)!==-1||Rs.concat(on).indexOf(A)!==-1&&h===MA&&Mje.indexOf(t[l])===-1||Rs.concat(on).indexOf(h)!==-1&&A===DA)return Ke;if(A===tp&&h===tp){for(var f=r[a],g=1;f>0&&(f--,e[f]===tp);)g++;if(g%2!==0)return Ke}return A===Dd&&h===Md?Ke:Rd},Hje=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=Oje(t,e.lineBreak),n=r[0],s=r[1],a=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(l){return[on,Ti,fT].indexOf(l)!==-1?uu:l}));var o=e.wordBreak==="keep-all"?a.map(function(l,A){return l&&t[A]>=19968&&t[A]<=40959}):void 0;return[n,s,o]},Kje=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===gT,this.start=n,this.end=s}return t.prototype.slice=function(){return Ut.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),zje=function(t,e){var r=kg(t),n=Hje(r,e),s=n[0],a=n[1],o=n[2],l=r.length,A=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var h=Ke;u<l&&(h=Lje(r,a,s,++u,o))===Ke;);if(h!==Ke||u===l){var c=new Kje(r,h,A,u);return A=u,{value:c,done:!1}}return{done:!0,value:null}}}},Gje=1,Wje=2,Vu=4,L5=8,Xf=10,H5=47,wc=92,Vje=9,qje=32,$d=34,RA=61,Xje=35,Jje=36,Yje=37,Od=39,Ld=40,$A=41,Zje=95,qr=45,eke=33,tke=60,rke=62,nke=64,ske=91,ake=93,ike=61,oke=123,Hd=63,lke=125,K5=124,Ake=126,cke=128,z5=65533,np=42,$i=43,uke=44,dke=58,hke=59,du=46,fke=0,gke=8,mke=11,pke=14,yke=31,vke=127,ys=-1,pT=48,yT=97,vT=101,xke=102,wke=117,bke=122,xT=65,wT=69,bT=70,_ke=85,Cke=90,br=function(t){return t>=pT&&t<=57},Bke=function(t){return t>=55296&&t<=57343},Go=function(t){return br(t)||t>=xT&&t<=bT||t>=yT&&t<=xke},Ske=function(t){return t>=yT&&t<=bke},jke=function(t){return t>=xT&&t<=Cke},kke=function(t){return Ske(t)||jke(t)},Eke=function(t){return t>=cke},Kd=function(t){return t===Xf||t===Vje||t===qje},Jf=function(t){return kke(t)||Eke(t)||t===Zje},G5=function(t){return Jf(t)||br(t)||t===qr},Nke=function(t){return t>=fke&&t<=gke||t===mke||t>=pke&&t<=yke||t===vke},Ua=function(t,e){return t!==wc?!1:e!==Xf},zd=function(t,e,r){return t===qr?Jf(e)||Ua(e,r):Jf(t)?!0:!!(t===wc&&Ua(t,e))},sp=function(t,e,r){return t===$i||t===qr?br(e)?!0:e===du&&br(r):br(t===du?e:t)},Fke=function(t){var e=0,r=1;(t[e]===$i||t[e]===qr)&&(t[e]===qr&&(r=-1),e++);for(var n=[];br(t[e]);)n.push(t[e++]);var s=n.length?parseInt(Ut.apply(void 0,n),10):0;t[e]===du&&e++;for(var a=[];br(t[e]);)a.push(t[e++]);var o=a.length,l=o?parseInt(Ut.apply(void 0,a),10):0;(t[e]===wT||t[e]===vT)&&e++;var A=1;(t[e]===$i||t[e]===qr)&&(t[e]===qr&&(A=-1),e++);for(var u=[];br(t[e]);)u.push(t[e++]);var h=u.length?parseInt(Ut.apply(void 0,u),10):0;return r*(s+l*Math.pow(10,-o))*Math.pow(10,A*h)},Tke={type:2},Uke={type:3},Qke={type:4},Ike={type:13},Pke={type:8},Dke={type:21},Mke={type:9},Rke={type:10},$ke={type:11},Oke={type:12},Lke={type:14},Gd={type:23},Hke={type:1},Kke={type:25},zke={type:24},Gke={type:26},Wke={type:27},Vke={type:28},qke={type:29},Xke={type:31},Mv={type:32},_T=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(kg(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==Mv;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case $d:return this.consumeStringToken($d);case Xje:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(G5(r)||Ua(n,s)){var a=zd(r,n,s)?Wje:Gje,o=this.consumeName();return{type:5,value:o,flags:a}}break;case Jje:if(this.peekCodePoint(0)===RA)return this.consumeCodePoint(),Ike;break;case Od:return this.consumeStringToken(Od);case Ld:return Tke;case $A:return Uke;case np:if(this.peekCodePoint(0)===RA)return this.consumeCodePoint(),Lke;break;case $i:if(sp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case uke:return Qke;case qr:var l=e,A=this.peekCodePoint(0),u=this.peekCodePoint(1);if(sp(l,A,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(zd(l,A,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(A===qr&&u===rke)return this.consumeCodePoint(),this.consumeCodePoint(),zke;break;case du:if(sp(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case H5:if(this.peekCodePoint(0)===np)for(this.consumeCodePoint();;){var h=this.consumeCodePoint();if(h===np&&(h=this.consumeCodePoint(),h===H5))return this.consumeToken();if(h===ys)return this.consumeToken()}break;case dke:return Gke;case hke:return Wke;case tke:if(this.peekCodePoint(0)===eke&&this.peekCodePoint(1)===qr&&this.peekCodePoint(2)===qr)return this.consumeCodePoint(),this.consumeCodePoint(),Kke;break;case nke:var c=this.peekCodePoint(0),d=this.peekCodePoint(1),f=this.peekCodePoint(2);if(zd(c,d,f)){var o=this.consumeName();return{type:7,value:o}}break;case ske:return Vke;case wc:if(Ua(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case ake:return qke;case ike:if(this.peekCodePoint(0)===RA)return this.consumeCodePoint(),Pke;break;case oke:return $ke;case lke:return Oke;case wke:case _ke:var g=this.peekCodePoint(0),y=this.peekCodePoint(1);return g===$i&&(Go(y)||y===Hd)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case K5:if(this.peekCodePoint(0)===RA)return this.consumeCodePoint(),Mke;if(this.peekCodePoint(0)===K5)return this.consumeCodePoint(),Dke;break;case Ake:if(this.peekCodePoint(0)===RA)return this.consumeCodePoint(),Rke;break;case ys:return Mv}return Kd(e)?(this.consumeWhiteSpace(),Xke):br(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):Jf(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:Ut(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();Go(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===Hd&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(Ut.apply(void 0,e.map(function(A){return A===Hd?pT:A})),16),a=parseInt(Ut.apply(void 0,e.map(function(A){return A===Hd?bT:A})),16);return{type:30,start:s,end:a}}var o=parseInt(Ut.apply(void 0,e),16);if(this.peekCodePoint(0)===qr&&Go(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];Go(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var a=parseInt(Ut.apply(void 0,l),16);return{type:30,start:o,end:a}}else return{type:30,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Ld?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ld?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ys)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Od||r===$d){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ys||this.peekCodePoint(0)===$A)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),Gd)}for(;;){var s=this.consumeCodePoint();if(s===ys||s===$A)return{type:22,value:Ut.apply(void 0,e)};if(Kd(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ys||this.peekCodePoint(0)===$A?(this.consumeCodePoint(),{type:22,value:Ut.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Gd);if(s===$d||s===Od||s===Ld||Nke(s))return this.consumeBadUrlRemnants(),Gd;if(s===wc)if(Ua(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Gd;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;Kd(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===$A||e===ys)return;Ua(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=Ut.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===ys||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===Xf)return this._value.splice(0,n),Hke;if(s===wc){var a=this._value[n+1];a!==ys&&a!==void 0&&(a===Xf?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):Ua(s,a)&&(r+=this.consumeStringSlice(n),r+=Ut(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=Vu,n=this.peekCodePoint(0);for((n===$i||n===qr)&&e.push(this.consumeCodePoint());br(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===du&&br(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=L5;br(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===wT||n===vT)&&((s===$i||s===qr)&&br(a)||br(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=L5;br(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[Fke(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),o=this.peekCodePoint(2);if(zd(s,a,o)){var l=this.consumeName();return{type:15,number:r,flags:n,unit:l}}return s===Yje?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(Go(e)){for(var r=Ut(e);Go(this.peekCodePoint(0))&&r.length<6;)r+=Ut(this.consumeCodePoint());Kd(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||Bke(n)||n>1114111?z5:n}return e===ys?z5:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(G5(r))e+=Ut(r);else if(Ua(r,this.peekCodePoint(0)))e+=Ut(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),CT=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new _T;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Yke(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?Mv:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),qu=function(t){return t.type===15},gA=function(t){return t.type===17},at=function(t){return t.type===20},Jke=function(t){return t.type===0},Rv=function(t,e){return at(t)&&t.value===e},BT=function(t){return t.type!==31},Yl=function(t){return t.type!==31&&t.type!==4},Ts=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},Yke=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},ci=function(t){return t.type===17||t.type===15},Mt=function(t){return t.type===16||ci(t)},ST=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},dr={type:17,number:0,flags:Vu},lb={type:16,number:50,flags:Vu},Ha={type:16,number:100,flags:Vu},ac=function(t,e,r){var n=t[0],s=t[1];return[ct(n,e),ct(typeof s<"u"?s:n,r)]},ct=function(t,e){if(t.type===16)return t.number/100*e;if(qu(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},jT="deg",kT="grad",ET="rad",NT="turn",Eg={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case jT:return Math.PI*e.number/180;case kT:return Math.PI/200*e.number;case ET:return e.number;case NT:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},FT=function(t){return t.type===15&&(t.unit===jT||t.unit===kT||t.unit===ET||t.unit===NT)},TT=function(t){var e=t.filter(at).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[dr,dr];case"to top":case"bottom":return Tn(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[dr,Ha];case"to right":case"left":return Tn(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ha,Ha];case"to bottom":case"top":return Tn(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ha,dr];case"to left":case"right":return Tn(270)}return 0},Tn=function(t){return Math.PI*t/180},ri={name:"color",parse:function(t,e){if(e.type===18){var r=Zke[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return Ka(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),o=e.value.substring(3,4);return Ka(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(o+o,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return Ka(parseInt(n,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),o=e.value.substring(6,8);return Ka(parseInt(n,16),parseInt(s,16),parseInt(a,16),parseInt(o,16)/255)}}if(e.type===20){var l=aa[e.value.toUpperCase()];if(typeof l<"u")return l}return aa.TRANSPARENT}},ni=function(t){return(255&t)===0},Jt=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},Ka=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},W5=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},V5=function(t,e){var r=e.filter(Yl);if(r.length===3){var n=r.map(W5),s=n[0],a=n[1],o=n[2];return Ka(s,a,o,1)}if(r.length===4){var l=r.map(W5),s=l[0],a=l[1],o=l[2],A=l[3];return Ka(s,a,o,A)}return 0};function ap(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var q5=function(t,e){var r=e.filter(Yl),n=r[0],s=r[1],a=r[2],o=r[3],l=(n.type===17?Tn(n.number):Eg.parse(t,n))/(Math.PI*2),A=Mt(s)?s.number/100:0,u=Mt(a)?a.number/100:0,h=typeof o<"u"&&Mt(o)?ct(o,1):1;if(A===0)return Ka(u*255,u*255,u*255,1);var c=u<=.5?u*(A+1):u+A-u*A,d=u*2-c,f=ap(d,c,l+1/3),g=ap(d,c,l),y=ap(d,c,l-1/3);return Ka(f*255,g*255,y*255,h)},Zke={hsl:q5,hsla:q5,rgb:V5,rgba:V5},bc=function(t,e){return ri.parse(t,CT.create(e).parseComponentValue())},aa={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},e4e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(at(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},t4e={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ng=function(t,e){var r=ri.parse(t,e[0]),n=e[1];return n&&Mt(n)?{color:r,stop:n}:{color:r,stop:null}},X5=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=dr),n.stop===null&&(n.stop=Ha);for(var s=[],a=0,o=0;o<t.length;o++){var l=t[o].stop;if(l!==null){var A=ct(l,e);A>a?s.push(A):s.push(a),a=A}else s.push(null)}for(var u=null,o=0;o<s.length;o++){var h=s[o];if(h===null)u===null&&(u=o);else if(u!==null){for(var c=o-u,d=s[u-1],f=(h-d)/(c+1),g=1;g<=c;g++)s[u+g-1]=f*g;u=null}}return t.map(function(y,v){var m=y.color;return{color:m,stop:Math.max(Math.min(1,s[v]/e),0)}})},r4e=function(t,e,r){var n=e/2,s=r/2,a=ct(t[0],e)-n,o=s-ct(t[1],r);return(Math.atan2(o,a)+Math.PI*2)%(Math.PI*2)},n4e=function(t,e,r){var n=typeof t=="number"?t:r4e(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),a=e/2,o=r/2,l=s/2,A=Math.sin(n-Math.PI/2)*l,u=Math.cos(n-Math.PI/2)*l;return[s,a-u,a+u,o-A,o+A]},qn=function(t,e){return Math.sqrt(t*t+e*e)},J5=function(t,e,r,n,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(o,l){var A=l[0],u=l[1],h=qn(r-A,n-u);return(s?h<o.optimumDistance:h>o.optimumDistance)?{optimumCorner:l,optimumDistance:h}:o},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},s4e=function(t,e,r,n,s){var a=0,o=0;switch(t.size){case 0:t.shape===0?a=o=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-n)),o=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)a=o=Math.min(qn(e,r),qn(e,r-s),qn(e-n,r),qn(e-n,r-s));else if(t.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),A=J5(n,s,e,r,!0),u=A[0],h=A[1];a=qn(u-e,(h-r)/l),o=l*a}break;case 1:t.shape===0?a=o=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-n)),o=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)a=o=Math.max(qn(e,r),qn(e,r-s),qn(e-n,r),qn(e-n,r-s));else if(t.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),c=J5(n,s,e,r,!1),u=c[0],h=c[1];a=qn(u-e,(h-r)/l),o=l*a}break}return Array.isArray(t.size)&&(a=ct(t.size[0],n),o=t.size.length===2?ct(t.size[1],s):a),[a,o]},a4e=function(t,e){var r=Tn(180),n=[];return Ts(e).forEach(function(s,a){if(a===0){var o=s[0];if(o.type===20&&o.value==="to"){r=TT(s);return}else if(FT(o)){r=Eg.parse(t,o);return}}var l=Ng(t,s);n.push(l)}),{angle:r,stops:n,type:1}},Wd=function(t,e){var r=Tn(180),n=[];return Ts(e).forEach(function(s,a){if(a===0){var o=s[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=TT(s);return}else if(FT(o)){r=(Eg.parse(t,o)+Tn(270))%Tn(360);return}}var l=Ng(t,s);n.push(l)}),{angle:r,stops:n,type:1}},i4e=function(t,e){var r=Tn(180),n=[],s=1,a=0,o=3,l=[];return Ts(e).forEach(function(A,u){var h=A[0];if(u===0){if(at(h)&&h.value==="linear"){s=1;return}else if(at(h)&&h.value==="radial"){s=2;return}}if(h.type===18){if(h.name==="from"){var c=ri.parse(t,h.values[0]);n.push({stop:dr,color:c})}else if(h.name==="to"){var c=ri.parse(t,h.values[0]);n.push({stop:Ha,color:c})}else if(h.name==="color-stop"){var d=h.values.filter(Yl);if(d.length===2){var c=ri.parse(t,d[1]),f=d[0];gA(f)&&n.push({stop:{type:16,number:f.number*100,flags:f.flags},color:c})}}}}),s===1?{angle:(r+Tn(180))%Tn(360),stops:n,type:s}:{size:o,shape:a,stops:n,position:l,type:s}},UT="closest-side",QT="farthest-side",IT="closest-corner",PT="farthest-corner",DT="circle",MT="ellipse",RT="cover",$T="contain",o4e=function(t,e){var r=0,n=3,s=[],a=[];return Ts(e).forEach(function(o,l){var A=!0;if(l===0){var u=!1;A=o.reduce(function(c,d){if(u)if(at(d))switch(d.value){case"center":return a.push(lb),c;case"top":case"left":return a.push(dr),c;case"right":case"bottom":return a.push(Ha),c}else(Mt(d)||ci(d))&&a.push(d);else if(at(d))switch(d.value){case DT:return r=0,!1;case MT:return r=1,!1;case"at":return u=!0,!1;case UT:return n=0,!1;case RT:case QT:return n=1,!1;case $T:case IT:return n=2,!1;case PT:return n=3,!1}else if(ci(d)||Mt(d))return Array.isArray(n)||(n=[]),n.push(d),!1;return c},A)}if(A){var h=Ng(t,o);s.push(h)}}),{size:n,shape:r,stops:s,position:a,type:2}},Vd=function(t,e){var r=0,n=3,s=[],a=[];return Ts(e).forEach(function(o,l){var A=!0;if(l===0?A=o.reduce(function(h,c){if(at(c))switch(c.value){case"center":return a.push(lb),!1;case"top":case"left":return a.push(dr),!1;case"right":case"bottom":return a.push(Ha),!1}else if(Mt(c)||ci(c))return a.push(c),!1;return h},A):l===1&&(A=o.reduce(function(h,c){if(at(c))switch(c.value){case DT:return r=0,!1;case MT:return r=1,!1;case $T:case UT:return n=0,!1;case QT:return n=1,!1;case IT:return n=2,!1;case RT:case PT:return n=3,!1}else if(ci(c)||Mt(c))return Array.isArray(n)||(n=[]),n.push(c),!1;return h},A)),A){var u=Ng(t,o);s.push(u)}}),{size:n,shape:r,stops:s,position:a,type:2}},l4e=function(t){return t.type===1},A4e=function(t){return t.type===2},Ab={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=OT[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function c4e(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!OT[t.name])}var OT={"linear-gradient":a4e,"-moz-linear-gradient":Wd,"-ms-linear-gradient":Wd,"-o-linear-gradient":Wd,"-webkit-linear-gradient":Wd,"radial-gradient":o4e,"-moz-radial-gradient":Vd,"-ms-radial-gradient":Vd,"-o-radial-gradient":Vd,"-webkit-radial-gradient":Vd,"-webkit-gradient":i4e},u4e={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Yl(n)&&c4e(n)}).map(function(n){return Ab.parse(t,n)})}},d4e={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(at(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},h4e={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Ts(e).map(function(r){return r.filter(Mt)}).map(ST)}},f4e={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Ts(e).map(function(r){return r.filter(at).map(function(n){return n.value}).join(" ")}).map(g4e)}},g4e=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Tl;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Tl||(Tl={}));var m4e={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Ts(e).map(function(r){return r.filter(p4e)})}},p4e=function(t){return at(t)||Mt(t)},Fg=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},y4e=Fg("top"),v4e=Fg("right"),x4e=Fg("bottom"),w4e=Fg("left"),Tg=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return ST(r.filter(Mt))}}},b4e=Tg("top-left"),_4e=Tg("top-right"),C4e=Tg("bottom-right"),B4e=Tg("bottom-left"),Ug=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},S4e=Ug("top"),j4e=Ug("right"),k4e=Ug("bottom"),E4e=Ug("left"),Qg=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return qu(r)?r.number:0}}},N4e=Qg("top"),F4e=Qg("right"),T4e=Qg("bottom"),U4e=Qg("left"),Q4e={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},I4e={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},P4e={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(at).reduce(function(r,n){return r|D4e(n.value)},0)}},D4e=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},M4e={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},R4e={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Yf;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Yf||(Yf={}));var $4e={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Yf.STRICT;case"normal":default:return Yf.NORMAL}}},O4e={name:"line-height",initialValue:"normal",prefix:!1,type:4},Y5=function(t,e){return at(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Mt(t)?ct(t,e):e},L4e={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:Ab.parse(t,e)}},H4e={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},$v={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Ig=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},K4e=Ig("top"),z4e=Ig("right"),G4e=Ig("bottom"),W4e=Ig("left"),V4e={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},q4e={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Pg=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},X4e=Pg("top"),J4e=Pg("right"),Y4e=Pg("bottom"),Z4e=Pg("left"),eEe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},tEe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},rEe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Rv(e[0],"none")?[]:Ts(e).map(function(r){for(var n={color:aa.TRANSPARENT,offsetX:dr,offsetY:dr,blur:dr},s=0,a=0;a<r.length;a++){var o=r[a];ci(o)?(s===0?n.offsetX=o:s===1?n.offsetY=o:n.blur=o,s++):n.color=ri.parse(t,o)}return n})}},nEe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},sEe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=oEe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},aEe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},iEe=function(t){var e=t.filter(function(A){return A.type===17}).map(function(A){return A.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],l=e[13];return e[14],e[15],e.length===16?[r,n,s,a,o,l]:null},oEe={matrix:aEe,matrix3d:iEe},Z5={type:16,number:50,flags:Vu},lEe=[Z5,Z5],AEe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Mt);return r.length!==2?lEe:[r[0],r[1]]}},cEe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},_c;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(_c||(_c={}));var uEe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return _c.BREAK_ALL;case"keep-all":return _c.KEEP_ALL;case"normal":default:return _c.NORMAL}}},dEe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(gA(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},LT={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},hEe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return gA(e)?e.number:1}},fEe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gEe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(at).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},mEe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},pEe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},yEe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(gA(e))return e.number;if(at(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},vEe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(at).map(function(r){return r.value})}},xEe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Wt=function(t,e){return(t&e)!==0},wEe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},bEe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(BT),a=0;a<s.length;a++){var o=s[a],l=s[a+1];if(o.type===20){var A=l&&gA(l)?l.number:1;n.push({counter:o.value,increment:A})}}return n}},_Ee={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(BT),s=0;s<n.length;s++){var a=n[s],o=n[s+1];if(at(a)&&a.value!=="none"){var l=o&&gA(o)?o.number:0;r.push({counter:a.value,reset:l})}}return r}},CEe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(qu).map(function(r){return LT.parse(t,r)})}},BEe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(Jke);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var o=s[a].value,l=s[a+1].value;n.push({open:o,close:l})}return n}},eS=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},SEe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&Rv(e[0],"none")?[]:Ts(e).map(function(r){for(var n={color:255,offsetX:dr,offsetY:dr,blur:dr,spread:dr,inset:!1},s=0,a=0;a<r.length;a++){var o=r[a];Rv(o,"inset")?n.inset=!0:ci(o)?(s===0?n.offsetX=o:s===1?n.offsetY=o:s===2?n.blur=o:n.spread=o,s++):n.color=ri.parse(t,o)}return n})}},jEe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(at).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},kEe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},EEe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return qu(e)?e.number:0}},NEe=function(){function t(e,r){var n,s;this.animationDuration=pe(e,CEe,r.animationDuration),this.backgroundClip=pe(e,e4e,r.backgroundClip),this.backgroundColor=pe(e,t4e,r.backgroundColor),this.backgroundImage=pe(e,u4e,r.backgroundImage),this.backgroundOrigin=pe(e,d4e,r.backgroundOrigin),this.backgroundPosition=pe(e,h4e,r.backgroundPosition),this.backgroundRepeat=pe(e,f4e,r.backgroundRepeat),this.backgroundSize=pe(e,m4e,r.backgroundSize),this.borderTopColor=pe(e,y4e,r.borderTopColor),this.borderRightColor=pe(e,v4e,r.borderRightColor),this.borderBottomColor=pe(e,x4e,r.borderBottomColor),this.borderLeftColor=pe(e,w4e,r.borderLeftColor),this.borderTopLeftRadius=pe(e,b4e,r.borderTopLeftRadius),this.borderTopRightRadius=pe(e,_4e,r.borderTopRightRadius),this.borderBottomRightRadius=pe(e,C4e,r.borderBottomRightRadius),this.borderBottomLeftRadius=pe(e,B4e,r.borderBottomLeftRadius),this.borderTopStyle=pe(e,S4e,r.borderTopStyle),this.borderRightStyle=pe(e,j4e,r.borderRightStyle),this.borderBottomStyle=pe(e,k4e,r.borderBottomStyle),this.borderLeftStyle=pe(e,E4e,r.borderLeftStyle),this.borderTopWidth=pe(e,N4e,r.borderTopWidth),this.borderRightWidth=pe(e,F4e,r.borderRightWidth),this.borderBottomWidth=pe(e,T4e,r.borderBottomWidth),this.borderLeftWidth=pe(e,U4e,r.borderLeftWidth),this.boxShadow=pe(e,SEe,r.boxShadow),this.color=pe(e,Q4e,r.color),this.direction=pe(e,I4e,r.direction),this.display=pe(e,P4e,r.display),this.float=pe(e,M4e,r.cssFloat),this.fontFamily=pe(e,mEe,r.fontFamily),this.fontSize=pe(e,pEe,r.fontSize),this.fontStyle=pe(e,xEe,r.fontStyle),this.fontVariant=pe(e,vEe,r.fontVariant),this.fontWeight=pe(e,yEe,r.fontWeight),this.letterSpacing=pe(e,R4e,r.letterSpacing),this.lineBreak=pe(e,$4e,r.lineBreak),this.lineHeight=pe(e,O4e,r.lineHeight),this.listStyleImage=pe(e,L4e,r.listStyleImage),this.listStylePosition=pe(e,H4e,r.listStylePosition),this.listStyleType=pe(e,$v,r.listStyleType),this.marginTop=pe(e,K4e,r.marginTop),this.marginRight=pe(e,z4e,r.marginRight),this.marginBottom=pe(e,G4e,r.marginBottom),this.marginLeft=pe(e,W4e,r.marginLeft),this.opacity=pe(e,hEe,r.opacity);var a=pe(e,V4e,r.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=pe(e,q4e,r.overflowWrap),this.paddingTop=pe(e,X4e,r.paddingTop),this.paddingRight=pe(e,J4e,r.paddingRight),this.paddingBottom=pe(e,Y4e,r.paddingBottom),this.paddingLeft=pe(e,Z4e,r.paddingLeft),this.paintOrder=pe(e,jEe,r.paintOrder),this.position=pe(e,tEe,r.position),this.textAlign=pe(e,eEe,r.textAlign),this.textDecorationColor=pe(e,fEe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=pe(e,gEe,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=pe(e,rEe,r.textShadow),this.textTransform=pe(e,nEe,r.textTransform),this.transform=pe(e,sEe,r.transform),this.transformOrigin=pe(e,AEe,r.transformOrigin),this.visibility=pe(e,cEe,r.visibility),this.webkitTextStrokeColor=pe(e,kEe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=pe(e,EEe,r.webkitTextStrokeWidth),this.wordBreak=pe(e,uEe,r.wordBreak),this.zIndex=pe(e,dEe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return ni(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Wt(this.display,4)||Wt(this.display,33554432)||Wt(this.display,268435456)||Wt(this.display,536870912)||Wt(this.display,67108864)||Wt(this.display,134217728)},t}(),FEe=function(){function t(e,r){this.content=pe(e,wEe,r.content),this.quotes=pe(e,BEe,r.quotes)}return t}(),tS=function(){function t(e,r){this.counterIncrement=pe(e,bEe,r.counterIncrement),this.counterReset=pe(e,_Ee,r.counterReset)}return t}(),pe=function(t,e,r){var n=new _T,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var a=new CT(n.read());switch(e.type){case 2:var o=a.parseComponentValue();return e.parse(t,at(o)?o.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return Eg.parse(t,a.parseComponentValue());case"color":return ri.parse(t,a.parseComponentValue());case"image":return Ab.parse(t,a.parseComponentValue());case"length":var l=a.parseComponentValue();return ci(l)?l:dr;case"length-percentage":var A=a.parseComponentValue();return Mt(A)?A:dr;case"time":return LT.parse(t,a.parseComponentValue())}break}},TEe="data-html2canvas-debug",UEe=function(t){var e=t.getAttribute(TEe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Ov=function(t,e){var r=UEe(t);return r===1||e===r},Us=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,Ov(r,3))debugger;this.styles=new NEe(e,window.getComputedStyle(r,null)),Kv(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=jg(this.context,r),Ov(r,4)&&(this.flags|=16)}return t}(),QEe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",rS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ic=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var qd=0;qd<rS.length;qd++)ic[rS.charCodeAt(qd)]=qd;var IEe=function(t){var e=t.length*.75,r=t.length,n,s=0,a,o,l,A;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),h=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)a=ic[t.charCodeAt(n)],o=ic[t.charCodeAt(n+1)],l=ic[t.charCodeAt(n+2)],A=ic[t.charCodeAt(n+3)],h[s++]=a<<2|o>>4,h[s++]=(o&15)<<4|l>>2,h[s++]=(l&3)<<6|A&63;return u},PEe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},DEe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Wi=5,cb=6+5,ip=2,MEe=cb-Wi,HT=65536>>Wi,REe=1<<Wi,op=REe-1,$Ee=1024>>Wi,OEe=HT+$Ee,LEe=OEe,HEe=32,KEe=LEe+HEe,zEe=65536>>cb,GEe=1<<MEe,WEe=GEe-1,nS=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},VEe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},qEe=function(t,e){var r=IEe(t),n=Array.isArray(r)?DEe(r):new Uint32Array(r),s=Array.isArray(r)?PEe(r):new Uint16Array(r),a=24,o=nS(s,a/2,n[4]/2),l=n[5]===2?nS(s,(a+n[4])/2):VEe(n,Math.ceil((a+n[4])/4));return new XEe(n[0],n[1],n[2],n[3],o,l)},XEe=function(){function t(e,r,n,s,a,o){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=o}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Wi],r=(r<<ip)+(e&op),this.data[r];if(e<=65535)return r=this.index[HT+(e-55296>>Wi)],r=(r<<ip)+(e&op),this.data[r];if(e<this.highStart)return r=KEe-zEe+(e>>cb),r=this.index[r],r+=e>>Wi&WEe,r=this.index[r],r=(r<<ip)+(e&op),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),sS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",JEe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xd=0;Xd<sS.length;Xd++)JEe[sS.charCodeAt(Xd)]=Xd;var YEe=1,lp=2,Ap=3,aS=4,iS=5,ZEe=7,oS=8,cp=9,up=10,lS=11,AS=12,cS=13,uS=14,dp=15,eNe=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},tNe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var o=t[s];o<=65535?n.push(o):(o-=65536,n.push((o>>10)+55296,o%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},rNe=qEe(QEe),Bn="",hp="",nNe=function(t){return rNe.get(t)},sNe=function(t,e,r){var n=r-2,s=e[n],a=e[r-1],o=e[r];if(a===lp&&o===Ap)return Bn;if(a===lp||a===Ap||a===aS||o===lp||o===Ap||o===aS)return hp;if(a===oS&&[oS,cp,lS,AS].indexOf(o)!==-1||(a===lS||a===cp)&&(o===cp||o===up)||(a===AS||a===up)&&o===up||o===cS||o===iS||o===ZEe||a===YEe)return Bn;if(a===cS&&o===uS){for(;s===iS;)s=e[--n];if(s===uS)return Bn}if(a===dp&&o===dp){for(var l=0;s===dp;)l++,s=e[--n];if(l%2===0)return Bn}return hp},aNe=function(t){var e=eNe(t),r=e.length,n=0,s=0,a=e.map(nNe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var o=Bn;n<r&&(o=sNe(e,a,++n))===Bn;);if(o!==Bn||n===r){var l=tNe.apply(null,e.slice(s,n));return s=n,{value:l,done:!1}}return{done:!0,value:null}}}},iNe=function(t){for(var e=aNe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},oNe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(n),a===e)return!0}}return!1},lNe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=kg(n.data).map(function(A){return Ut(A)}),a=0,o={},l=s.every(function(A,u){r.setStart(n,a),r.setEnd(n,a+A.length);var h=r.getBoundingClientRect();a+=A.length;var c=h.x>o.x||h.y>o.y;return o=h,u===0?!0:c});return t.body.removeChild(e),l},ANe=function(){return typeof new Image().crossOrigin<"u"},cNe=function(){return typeof new XMLHttpRequest().responseType=="string"},uNe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},dS=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},dNe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,a=e.toDataURL();s.src=a;var o=Lv(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),hS(o).then(function(l){n.drawImage(l,0,0);var A=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+a+")",u.style.height=r+"px",dS(A)?hS(Lv(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return n.drawImage(l,0,0),dS(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Lv=function(t,e,r,n,s){var a="http://www.w3.org/2000/svg",o=document.createElementNS(a,"svg"),l=document.createElementNS(a,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(s),o},hS=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ur={get SUPPORT_RANGE_BOUNDS(){var t=oNe(document);return Object.defineProperty(ur,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ur.SUPPORT_RANGE_BOUNDS&&lNe(document);return Object.defineProperty(ur,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=uNe(document);return Object.defineProperty(ur,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?dNe(document):Promise.resolve(!1);return Object.defineProperty(ur,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=ANe();return Object.defineProperty(ur,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=cNe();return Object.defineProperty(ur,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ur,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ur,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},Cc=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),hNe=function(t,e,r,n){var s=mNe(e,r),a=[],o=0;return s.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(ur.SUPPORT_RANGE_BOUNDS){var A=fS(n,o,l.length).getClientRects();if(A.length>1){var u=ub(l),h=0;u.forEach(function(d){a.push(new Cc(d,ma.fromDOMRectList(t,fS(n,h+o,d.length).getClientRects()))),h+=d.length})}else a.push(new Cc(l,ma.fromDOMRectList(t,A)))}else{var c=n.splitText(l.length);a.push(new Cc(l,fNe(t,n))),n=c}else ur.SUPPORT_RANGE_BOUNDS||(n=n.splitText(l.length));o+=l.length}),a},fNe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var a=jg(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),a}}return ma.EMPTY},fS=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},ub=function(t){if(ur.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return iNe(t)},gNe=function(t,e){if(ur.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return yNe(t,e)},mNe=function(t,e){return e.letterSpacing!==0?ub(t):gNe(t,e)},pNe=[32,160,4961,65792,65793,4153,4241],yNe=function(t,e){for(var r=zje(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,a=function(){if(s.value){var o=s.value.slice(),l=kg(o),A="";l.forEach(function(u){pNe.indexOf(u)===-1?A+=Ut(u):(A.length&&n.push(A),n.push(Ut(u)),A="")}),A.length&&n.push(A)}};!(s=r.next()).done;)a();return n},vNe=function(){function t(e,r,n){this.text=xNe(r.data,n.textTransform),this.textBounds=hNe(e,this.text,n,r)}return t}(),xNe=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(wNe,bNe);case 2:return t.toUpperCase();default:return t}},wNe=/(^|\s|:|-|\(|\))([a-z])/g,bNe=function(t,e,r){return t.length>0?e+r.toUpperCase():t},KT=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Us),zT=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Us),GT=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=new XMLSerializer,o=jg(r,n);return n.setAttribute("width",o.width+"px"),n.setAttribute("height",o.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Us),WT=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Us),Hv=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Us),_Ne=[{type:15,flags:0,unit:"px",number:3}],CNe=[{type:16,flags:0,number:50}],BNe=function(t){return t.width>t.height?new ma(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new ma(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},SNe=function(t){var e=t.type===jNe?new Array(t.value.length+1).join(""):t.value;return e.length===0?t.placeholder||"":e},Zf="checkbox",e0="radio",jNe="password",gS=707406591,db=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=SNe(n),(s.type===Zf||s.type===e0)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=BNe(s.bounds)),s.type){case Zf:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=_Ne;break;case e0:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=CNe;break}return s}return e}(Us),VT=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=n.options[n.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(Us),qT=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Us),XT=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=YT(r,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?bc(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):aa.TRANSPARENT,o=n.contentWindow.document.body?bc(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):aa.TRANSPARENT;s.backgroundColor=ni(a)?ni(o)?s.styles.backgroundColor:o:a}}catch{}return s}return e}(Us),kNe=["OL","UL","MENU"],Sh=function(t,e,r,n){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,ZT(s)&&s.data.trim().length>0)r.textNodes.push(new vNe(t,s,r.styles));else if(vl(s))if(nU(s)&&s.assignedNodes)s.assignedNodes().forEach(function(l){return Sh(t,l,r,n)});else{var o=JT(t,s);o.styles.isVisible()&&(ENe(s,o,n)?o.flags|=4:NNe(o.styles)&&(o.flags|=2),kNe.indexOf(s.tagName)!==-1&&(o.flags|=8),r.elements.push(o),s.slot,s.shadowRoot?Sh(t,s.shadowRoot,o,n):!t0(s)&&!eU(s)&&!r0(s)&&Sh(t,s,o,n))}},JT=function(t,e){return zv(e)?new KT(t,e):tU(e)?new zT(t,e):eU(e)?new GT(t,e):FNe(e)?new WT(t,e):TNe(e)?new Hv(t,e):UNe(e)?new db(t,e):r0(e)?new VT(t,e):t0(e)?new qT(t,e):rU(e)?new XT(t,e):new Us(t,e)},YT=function(t,e){var r=JT(t,e);return r.flags|=4,Sh(t,e,r,r),r},ENe=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||hb(t)&&r.styles.isTransparent()},NNe=function(t){return t.isPositioned()||t.isFloating()},ZT=function(t){return t.nodeType===Node.TEXT_NODE},vl=function(t){return t.nodeType===Node.ELEMENT_NODE},Kv=function(t){return vl(t)&&typeof t.style<"u"&&!jh(t)},jh=function(t){return typeof t.className=="object"},FNe=function(t){return t.tagName==="LI"},TNe=function(t){return t.tagName==="OL"},UNe=function(t){return t.tagName==="INPUT"},QNe=function(t){return t.tagName==="HTML"},eU=function(t){return t.tagName==="svg"},hb=function(t){return t.tagName==="BODY"},tU=function(t){return t.tagName==="CANVAS"},mS=function(t){return t.tagName==="VIDEO"},zv=function(t){return t.tagName==="IMG"},rU=function(t){return t.tagName==="IFRAME"},pS=function(t){return t.tagName==="STYLE"},INe=function(t){return t.tagName==="SCRIPT"},t0=function(t){return t.tagName==="TEXTAREA"},r0=function(t){return t.tagName==="SELECT"},nU=function(t){return t.tagName==="SLOT"},yS=function(t){return t.tagName.indexOf("-")>0},PNe=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,a=!0;n!==null&&n.forEach(function(l){var A=r.counters[l.counter];A&&l.increment!==0&&(a=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=l.increment)});var o=[];return a&&s.forEach(function(l){var A=r.counters[l.counter];o.push(l.counter),A||(A=r.counters[l.counter]=[]),A.push(l.reset)}),o},t}(),vS={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},xS={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},DNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},MNe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Wo=function(t,e,r,n,s,a){return t<e||t>r?hu(t,s,a.length>0):n.integers.reduce(function(o,l,A){for(;t>=l;)t-=l,o+=n.values[A];return o},"")+a},sU=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},Tt=function(t,e,r,n,s){var a=r-e+1;return(t<0?"-":"")+(sU(Math.abs(t),a,n,function(o){return Ut(Math.floor(o%a)+e)})+s)},bi=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return sU(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},nl=1,ka=2,Ea=4,oc=8,$s=function(t,e,r,n,s,a){if(t<-9999||t>9999)return hu(t,4,s.length>0);var o=Math.abs(t),l=s;if(o===0)return e[0]+l;for(var A=0;o>0&&A<=4;A++){var u=o%10;u===0&&Wt(a,nl)&&l!==""?l=e[u]+l:u>1||u===1&&A===0||u===1&&A===1&&Wt(a,ka)||u===1&&A===1&&Wt(a,Ea)&&t>100||u===1&&A>1&&Wt(a,oc)?l=e[u]+(A>0?r[A-1]:"")+l:u===1&&A>0&&(l=r[A-1]+l),o=Math.floor(o/10)}return(t<0?n:"")+l},wS="",bS="",_S="",fp="",hu=function(t,e,r){var n=r?". ":"",s=r?"":"",a=r?", ":"",o=r?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Tt(t,48,57,!0,n);return l.length<4?"0"+l:l;case 4:return bi(t,"",s);case 6:return Wo(t,1,3999,vS,3,n).toLowerCase();case 7:return Wo(t,1,3999,vS,3,n);case 8:return Tt(t,945,969,!1,n);case 9:return Tt(t,97,122,!1,n);case 10:return Tt(t,65,90,!1,n);case 11:return Tt(t,1632,1641,!0,n);case 12:case 49:return Wo(t,1,9999,xS,3,n);case 35:return Wo(t,1,9999,xS,3,n).toLowerCase();case 13:return Tt(t,2534,2543,!0,n);case 14:case 30:return Tt(t,6112,6121,!0,n);case 15:return bi(t,"",s);case 16:return bi(t,"",s);case 17:case 48:return $s(t,"",wS,"",s,ka|Ea|oc);case 47:return $s(t,"",bS,"",s,nl|ka|Ea|oc);case 42:return $s(t,"",wS,"",s,ka|Ea|oc);case 41:return $s(t,"",bS,"",s,nl|ka|Ea|oc);case 26:return $s(t,"","",_S,s,0);case 25:return $s(t,"","",_S,s,nl|ka|Ea);case 31:return $s(t,"","",fp,a,nl|ka|Ea);case 33:return $s(t,"","",fp,a,0);case 32:return $s(t,"","",fp,a,nl|ka|Ea);case 18:return Tt(t,2406,2415,!0,n);case 20:return Wo(t,1,19999,MNe,3,n);case 21:return Tt(t,2790,2799,!0,n);case 22:return Tt(t,2662,2671,!0,n);case 22:return Wo(t,1,10999,DNe,3,n);case 23:return bi(t,"");case 24:return bi(t,"");case 27:return Tt(t,3302,3311,!0,n);case 28:return bi(t,"",s);case 29:return bi(t,"",s);case 34:return Tt(t,3792,3801,!0,n);case 37:return Tt(t,6160,6169,!0,n);case 38:return Tt(t,4160,4169,!0,n);case 39:return Tt(t,2918,2927,!0,n);case 40:return Tt(t,1776,1785,!0,n);case 43:return Tt(t,3046,3055,!0,n);case 44:return Tt(t,3174,3183,!0,n);case 45:return Tt(t,3664,3673,!0,n);case 46:return Tt(t,3872,3881,!0,n);case 3:default:return Tt(t,48,57,!0,n)}},aU="data-html2canvas-ignore",CS=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new PNe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=RNe(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,l=s.contentWindow,A=l.document,u=LNe(s).then(function(){return Tr(n,void 0,void 0,function(){var h,c;return xr(this,function(d){switch(d.label){case 0:return this.scrolledElements.forEach(GNe),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),h=this.options.onclone,c=this.clonedReferenceElement,typeof c>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:d.sent(),d.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,ONe(A)]:[3,4];case 3:d.sent(),d.label=4;case 4:return typeof h=="function"?[2,Promise.resolve().then(function(){return h(A,c)}).then(function(){return s})]:[2,s]}})})});return A.open(),A.write(KNe(document.doctype)+"<html></html>"),zNe(this.referenceElement.ownerDocument,a,o),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),u},t.prototype.createElementClone=function(e){if(Ov(e,2))debugger;if(tU(e))return this.createCanvasClone(e);if(mS(e))return this.createVideoClone(e);if(pS(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return zv(r)&&(zv(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),yS(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return gp(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(a,o){return o&&typeof o.cssText=="string"?a+o.cssText:a},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),o=s.getContext("2d");if(o)if(!this.options.allowTaint&&a)o.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var l=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(l){var A=l.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!vl(r)||!INe(r)&&!r.hasAttribute(aU)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!vl(r)||!pS(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(vl(a)&&nU(a)&&typeof a.assignedNodes=="function"){var o=a.assignedNodes();o.length&&o.forEach(function(l){return s.appendChildNode(r,l,n)})}else this.appendChildNode(r,a,n)},t.prototype.cloneNode=function(e,r){if(ZT(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&vl(e)&&(Kv(e)||jh(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=n.getComputedStyle(e),o=n.getComputedStyle(e,":before"),l=n.getComputedStyle(e,":after");this.referenceElement===e&&Kv(s)&&(this.clonedReferenceElement=s),hb(s)&&qNe(s);var A=this.counters.parse(new tS(this.context,a)),u=this.resolvePseudoContent(e,s,o,Bc.BEFORE);yS(e)&&(r=!0),mS(e)||this.cloneChildNodes(e,s,r),u&&s.insertBefore(u,s.firstChild);var h=this.resolvePseudoContent(e,s,l,Bc.AFTER);return h&&s.appendChild(h),this.counters.pop(A),(a&&(this.options.copyStyles||jh(e))&&!rU(e)||r)&&gp(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(t0(e)||r0(e))&&(t0(s)||r0(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var a=this;if(n){var o=n.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||n.display==="none")){this.counters.parse(new tS(this.context,n));var A=new FEe(this.context,n),u=l.createElement("html2canvaspseudoelement");gp(n,u),A.content.forEach(function(c){if(c.type===0)u.appendChild(l.createTextNode(c.value));else if(c.type===22){var d=l.createElement("img");d.src=c.value,d.style.opacity="1",u.appendChild(d)}else if(c.type===18){if(c.name==="attr"){var f=c.values.filter(at);f.length&&u.appendChild(l.createTextNode(e.getAttribute(f[0].value)||""))}else if(c.name==="counter"){var g=c.values.filter(Yl),y=g[0],v=g[1];if(y&&at(y)){var m=a.counters.getCounterValue(y.value),p=v&&at(v)?$v.parse(a.context,v.value):3;u.appendChild(l.createTextNode(hu(m,p,!1)))}}else if(c.name==="counters"){var x=c.values.filter(Yl),y=x[0],w=x[1],v=x[2];if(y&&at(y)){var _=a.counters.getCounterValues(y.value),b=v&&at(v)?$v.parse(a.context,v.value):3,S=w&&w.type===0?w.value:"",E=_.map(function(Q){return hu(Q,b,!1)}).join(S);u.appendChild(l.createTextNode(E))}}}else if(c.type===20)switch(c.value){case"open-quote":u.appendChild(l.createTextNode(eS(A.quotes,a.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(eS(A.quotes,--a.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(c.value))}}),u.className=Gv+" "+Wv;var h=s===Bc.BEFORE?" "+Gv:" "+Wv;return jh(r)?r.className.baseValue+=h:r.className+=h,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),Bc;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(Bc||(Bc={}));var RNe=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(aU,"true"),t.body.appendChild(r),r},$Ne=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},ONe=function(t){return Promise.all([].slice.call(t.images,0).map($Ne))},LNe=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},HNe=["all","d","content"],gp=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);HNe.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},KNe=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},zNe=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},GNe=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},WNe=":before",VNe=":after",Gv="___html2canvas___pseudoelement_before",Wv="___html2canvas___pseudoelement_after",BS=`{
    content: "" !important;
    display: none !important;
}`,qNe=function(t){XNe(t,"."+Gv+WNe+BS+`
         .`+Wv+VNe+BS)},XNe=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},iU=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),JNe=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(pp(e)||t6e(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return Tr(this,void 0,void 0,function(){var r,n,s,a,o=this;return xr(this,function(l){switch(l.label){case 0:return r=iU.isSameOrigin(e),n=!mp(e)&&this._options.useCORS===!0&&ur.SUPPORT_CORS_IMAGES&&!r,s=!mp(e)&&!r&&!pp(e)&&typeof this._options.proxy=="string"&&ur.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!mp(e)&&!pp(e)&&!s&&!n?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(A,u){var h=new Image;h.onload=function(){return A(h)},h.onerror=u,(r6e(a)||n)&&(h.crossOrigin="anonymous"),h.src=a,h.complete===!0&&setTimeout(function(){return A(h)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,o){var l=ur.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(l==="text")a(A.response);else{var c=new FileReader;c.addEventListener("load",function(){return a(c.result)},!1),c.addEventListener("error",function(d){return o(d)},!1),c.readAsDataURL(A.response)}else o("Failed to proxy resource "+s+" with status code "+A.status)},A.onerror=o;var u=n.indexOf("?")>-1?"&":"?";if(A.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+l),l!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=l),r._options.imageTimeout){var h=r._options.imageTimeout;A.timeout=h,A.ontimeout=function(){return o("Timed out ("+h+"ms) proxying "+s)}}A.send()})},t}(),YNe=/^data:image\/svg\+xml/i,ZNe=/^data:image\/.*;base64,/i,e6e=/^data:image\/.*/i,t6e=function(t){return ur.SUPPORT_SVG_DRAWING||!n6e(t)},mp=function(t){return e6e.test(t)},r6e=function(t){return ZNe.test(t)},pp=function(t){return t.substr(0,4)==="blob"},n6e=function(t){return t.substr(-3).toLowerCase()==="svg"||YNe.test(t)},fe=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),Vo=function(t,e,r){return new fe(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},Jd=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=Vo(this.start,this.startControl,e),s=Vo(this.startControl,this.endControl,e),a=Vo(this.endControl,this.end,e),o=Vo(n,s,e),l=Vo(s,a,e),A=Vo(o,l,e);return r?new t(this.start,n,o,A):new t(A,l,a,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),kn=function(t){return t.type===1},s6e=function(){function t(e){var r=e.styles,n=e.bounds,s=ac(r.borderTopLeftRadius,n.width,n.height),a=s[0],o=s[1],l=ac(r.borderTopRightRadius,n.width,n.height),A=l[0],u=l[1],h=ac(r.borderBottomRightRadius,n.width,n.height),c=h[0],d=h[1],f=ac(r.borderBottomLeftRadius,n.width,n.height),g=f[0],y=f[1],v=[];v.push((a+A)/n.width),v.push((g+c)/n.width),v.push((o+y)/n.height),v.push((u+d)/n.height);var m=Math.max.apply(Math,v);m>1&&(a/=m,o/=m,A/=m,u/=m,c/=m,d/=m,g/=m,y/=m);var p=n.width-A,x=n.height-d,w=n.width-c,_=n.height-y,b=r.borderTopWidth,S=r.borderRightWidth,E=r.borderBottomWidth,C=r.borderLeftWidth,N=ct(r.paddingTop,e.bounds.width),Q=ct(r.paddingRight,e.bounds.width),P=ct(r.paddingBottom,e.bounds.width),F=ct(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||o>0?vt(n.left+C/3,n.top+b/3,a-C/3,o-b/3,Ze.TOP_LEFT):new fe(n.left+C/3,n.top+b/3),this.topRightBorderDoubleOuterBox=a>0||o>0?vt(n.left+p,n.top+b/3,A-S/3,u-b/3,Ze.TOP_RIGHT):new fe(n.left+n.width-S/3,n.top+b/3),this.bottomRightBorderDoubleOuterBox=c>0||d>0?vt(n.left+w,n.top+x,c-S/3,d-E/3,Ze.BOTTOM_RIGHT):new fe(n.left+n.width-S/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=g>0||y>0?vt(n.left+C/3,n.top+_,g-C/3,y-E/3,Ze.BOTTOM_LEFT):new fe(n.left+C/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=a>0||o>0?vt(n.left+C*2/3,n.top+b*2/3,a-C*2/3,o-b*2/3,Ze.TOP_LEFT):new fe(n.left+C*2/3,n.top+b*2/3),this.topRightBorderDoubleInnerBox=a>0||o>0?vt(n.left+p,n.top+b*2/3,A-S*2/3,u-b*2/3,Ze.TOP_RIGHT):new fe(n.left+n.width-S*2/3,n.top+b*2/3),this.bottomRightBorderDoubleInnerBox=c>0||d>0?vt(n.left+w,n.top+x,c-S*2/3,d-E*2/3,Ze.BOTTOM_RIGHT):new fe(n.left+n.width-S*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||y>0?vt(n.left+C*2/3,n.top+_,g-C*2/3,y-E*2/3,Ze.BOTTOM_LEFT):new fe(n.left+C*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=a>0||o>0?vt(n.left+C/2,n.top+b/2,a-C/2,o-b/2,Ze.TOP_LEFT):new fe(n.left+C/2,n.top+b/2),this.topRightBorderStroke=a>0||o>0?vt(n.left+p,n.top+b/2,A-S/2,u-b/2,Ze.TOP_RIGHT):new fe(n.left+n.width-S/2,n.top+b/2),this.bottomRightBorderStroke=c>0||d>0?vt(n.left+w,n.top+x,c-S/2,d-E/2,Ze.BOTTOM_RIGHT):new fe(n.left+n.width-S/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=g>0||y>0?vt(n.left+C/2,n.top+_,g-C/2,y-E/2,Ze.BOTTOM_LEFT):new fe(n.left+C/2,n.top+n.height-E/2),this.topLeftBorderBox=a>0||o>0?vt(n.left,n.top,a,o,Ze.TOP_LEFT):new fe(n.left,n.top),this.topRightBorderBox=A>0||u>0?vt(n.left+p,n.top,A,u,Ze.TOP_RIGHT):new fe(n.left+n.width,n.top),this.bottomRightBorderBox=c>0||d>0?vt(n.left+w,n.top+x,c,d,Ze.BOTTOM_RIGHT):new fe(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||y>0?vt(n.left,n.top+_,g,y,Ze.BOTTOM_LEFT):new fe(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||o>0?vt(n.left+C,n.top+b,Math.max(0,a-C),Math.max(0,o-b),Ze.TOP_LEFT):new fe(n.left+C,n.top+b),this.topRightPaddingBox=A>0||u>0?vt(n.left+Math.min(p,n.width-S),n.top+b,p>n.width+S?0:Math.max(0,A-S),Math.max(0,u-b),Ze.TOP_RIGHT):new fe(n.left+n.width-S,n.top+b),this.bottomRightPaddingBox=c>0||d>0?vt(n.left+Math.min(w,n.width-C),n.top+Math.min(x,n.height-E),Math.max(0,c-S),Math.max(0,d-E),Ze.BOTTOM_RIGHT):new fe(n.left+n.width-S,n.top+n.height-E),this.bottomLeftPaddingBox=g>0||y>0?vt(n.left+C,n.top+Math.min(_,n.height-E),Math.max(0,g-C),Math.max(0,y-E),Ze.BOTTOM_LEFT):new fe(n.left+C,n.top+n.height-E),this.topLeftContentBox=a>0||o>0?vt(n.left+C+F,n.top+b+N,Math.max(0,a-(C+F)),Math.max(0,o-(b+N)),Ze.TOP_LEFT):new fe(n.left+C+F,n.top+b+N),this.topRightContentBox=A>0||u>0?vt(n.left+Math.min(p,n.width+C+F),n.top+b+N,p>n.width+C+F?0:A-C+F,u-(b+N),Ze.TOP_RIGHT):new fe(n.left+n.width-(S+Q),n.top+b+N),this.bottomRightContentBox=c>0||d>0?vt(n.left+Math.min(w,n.width-(C+F)),n.top+Math.min(x,n.height+b+N),Math.max(0,c-(S+Q)),d-(E+P),Ze.BOTTOM_RIGHT):new fe(n.left+n.width-(S+Q),n.top+n.height-(E+P)),this.bottomLeftContentBox=g>0||y>0?vt(n.left+C+F,n.top+_,Math.max(0,g-(C+F)),y-(E+P),Ze.BOTTOM_LEFT):new fe(n.left+C+F,n.top+n.height-(E+P))}return t}(),Ze;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ze||(Ze={}));var vt=function(t,e,r,n,s){var a=4*((Math.sqrt(2)-1)/3),o=r*a,l=n*a,A=t+r,u=e+n;switch(s){case Ze.TOP_LEFT:return new Jd(new fe(t,u),new fe(t,u-l),new fe(A-o,e),new fe(A,e));case Ze.TOP_RIGHT:return new Jd(new fe(t,e),new fe(t+o,e),new fe(A,u-l),new fe(A,u));case Ze.BOTTOM_RIGHT:return new Jd(new fe(A,e),new fe(A,e+l),new fe(t+o,u),new fe(t,u));case Ze.BOTTOM_LEFT:default:return new Jd(new fe(A,u),new fe(A-o,u),new fe(t,e+l),new fe(t,e))}},n0=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},a6e=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},s0=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},i6e=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),Yd=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),o6e=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),l6e=function(t){return t.type===0},oU=function(t){return t.type===1},A6e=function(t){return t.type===2},SS=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},c6e=function(t,e,r,n,s){return t.map(function(a,o){switch(o){case 0:return a.add(e,r);case 1:return a.add(e+n,r);case 2:return a.add(e+n,r+s);case 3:return a.add(e,r+s)}return a})},lU=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),AU=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new s6e(this.container),this.container.styles.opacity<1&&this.effects.push(new o6e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new i6e(n,s,a))}if(this.container.styles.overflowX!==0){var o=n0(this.curves),l=s0(this.curves);SS(o,l)?this.effects.push(new Yd(o,6)):(this.effects.push(new Yd(o,2)),this.effects.push(new Yd(l,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var a=n.effects.filter(function(A){return!oU(A)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,a),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var o=n0(n.curves),l=s0(n.curves);SS(o,l)||s.unshift(new Yd(l,6))}}else s.unshift.apply(s,a);n=n.parent}return s.filter(function(A){return Wt(A.target,e)})},t}(),Vv=function(t,e,r,n){t.container.elements.forEach(function(s){var a=Wt(s.flags,4),o=Wt(s.flags,2),l=new AU(s,t);Wt(s.styles.display,2048)&&n.push(l);var A=Wt(s.flags,8)?[]:n;if(a||o){var u=a||s.styles.isPositioned()?r:e,h=new lU(l);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var c=s.styles.zIndex.order;if(c<0){var d=0;u.negativeZIndex.some(function(g,y){return c>g.element.container.styles.zIndex.order?(d=y,!1):d>0}),u.negativeZIndex.splice(d,0,h)}else if(c>0){var f=0;u.positiveZIndex.some(function(g,y){return c>=g.element.container.styles.zIndex.order?(f=y+1,!1):f>0}),u.positiveZIndex.splice(f,0,h)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(h)}else s.styles.isFloating()?u.nonPositionedFloats.push(h):u.nonPositionedInlineLevel.push(h);Vv(l,h,a?h:r,A)}else s.styles.isInlineLevel()?e.inlineLevel.push(l):e.nonInlineLevel.push(l),Vv(l,e,r,A);Wt(s.flags,8)&&cU(s,A)})},cU=function(t,e){for(var r=t instanceof Hv?t.start:1,n=t instanceof Hv?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof WT&&typeof a.container.value=="number"&&a.container.value!==0&&(r=a.container.value),a.listValue=hu(r,a.container.styles.listStyleType,!0),r+=n?-1:1}},u6e=function(t){var e=new AU(t,null),r=new lU(e),n=[];return Vv(e,r,r,n),cU(e.container,n),r},jS=function(t,e){switch(e){case 0:return Un(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Un(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Un(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Un(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},d6e=function(t,e){switch(e){case 0:return Un(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Un(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Un(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Un(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},h6e=function(t,e){switch(e){case 0:return Un(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Un(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Un(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Un(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},f6e=function(t,e){switch(e){case 0:return Zd(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return Zd(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return Zd(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return Zd(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},Zd=function(t,e){var r=[];return kn(t)?r.push(t.subdivide(.5,!1)):r.push(t),kn(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Un=function(t,e,r,n){var s=[];return kn(t)?s.push(t.subdivide(.5,!1)):s.push(t),kn(r)?s.push(r.subdivide(.5,!0)):s.push(r),kn(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),kn(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},uU=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},a0=function(t){var e=t.styles,r=t.bounds,n=ct(e.paddingLeft,r.width),s=ct(e.paddingRight,r.width),a=ct(e.paddingTop,r.width),o=ct(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+a+o))},g6e=function(t,e){return t===0?e.bounds:t===2?a0(e):uU(e)},m6e=function(t,e){return t===0?e.bounds:t===2?a0(e):uU(e)},yp=function(t,e,r){var n=g6e(sl(t.styles.backgroundOrigin,e),t),s=m6e(sl(t.styles.backgroundClip,e),t),a=p6e(sl(t.styles.backgroundSize,e),r,n),o=a[0],l=a[1],A=ac(sl(t.styles.backgroundPosition,e),n.width-o,n.height-l),u=y6e(sl(t.styles.backgroundRepeat,e),A,a,n,s),h=Math.round(n.left+A[0]),c=Math.round(n.top+A[1]);return[u,h,c,o,l]},qo=function(t){return at(t)&&t.value===Tl.AUTO},eh=function(t){return typeof t=="number"},p6e=function(t,e,r){var n=e[0],s=e[1],a=e[2],o=t[0],l=t[1];if(!o)return[0,0];if(Mt(o)&&l&&Mt(l))return[ct(o,r.width),ct(l,r.height)];var A=eh(a);if(at(o)&&(o.value===Tl.CONTAIN||o.value===Tl.COVER)){if(eh(a)){var u=r.width/r.height;return u<a!=(o.value===Tl.COVER)?[r.width,r.width/a]:[r.height*a,r.height]}return[r.width,r.height]}var h=eh(n),c=eh(s),d=h||c;if(qo(o)&&(!l||qo(l))){if(h&&c)return[n,s];if(!A&&!d)return[r.width,r.height];if(d&&A){var f=h?n:s*a,g=c?s:n/a;return[f,g]}var y=h?n:r.width,v=c?s:r.height;return[y,v]}if(A){var m=0,p=0;return Mt(o)?m=ct(o,r.width):Mt(l)&&(p=ct(l,r.height)),qo(o)?m=p*a:(!l||qo(l))&&(p=m/a),[m,p]}var x=null,w=null;if(Mt(o)?x=ct(o,r.width):l&&Mt(l)&&(w=ct(l,r.height)),x!==null&&(!l||qo(l))&&(w=h&&c?x/n*s:r.height),w!==null&&qo(o)&&(x=h&&c?w/s*n:r.width),x!==null&&w!==null)return[x,w];throw new Error("Unable to calculate background-size for element")},sl=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},y6e=function(t,e,r,n,s){var a=e[0],o=e[1],l=r[0],A=r[1];switch(t){case 2:return[new fe(Math.round(n.left),Math.round(n.top+o)),new fe(Math.round(n.left+n.width),Math.round(n.top+o)),new fe(Math.round(n.left+n.width),Math.round(A+n.top+o)),new fe(Math.round(n.left),Math.round(A+n.top+o))];case 3:return[new fe(Math.round(n.left+a),Math.round(n.top)),new fe(Math.round(n.left+a+l),Math.round(n.top)),new fe(Math.round(n.left+a+l),Math.round(n.height+n.top)),new fe(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new fe(Math.round(n.left+a),Math.round(n.top+o)),new fe(Math.round(n.left+a+l),Math.round(n.top+o)),new fe(Math.round(n.left+a+l),Math.round(n.top+o+A)),new fe(Math.round(n.left+a),Math.round(n.top+o+A))];default:return[new fe(Math.round(s.left),Math.round(s.top)),new fe(Math.round(s.left+s.width),Math.round(s.top)),new fe(Math.round(s.left+s.width),Math.round(s.height+s.top)),new fe(Math.round(s.left),Math.round(s.height+s.top))]}},v6e="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",kS="Hidden Text",x6e=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",o.appendChild(n),s.src=v6e,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(kS)),n.appendChild(a),n.appendChild(s);var l=s.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(kS)),n.style.lineHeight="normal",s.style.verticalAlign="super";var A=s.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:l,middle:A}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),dU=function(){function t(e,r){this.context=e,this.options=r}return t}(),w6e=1e4,b6e=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new x6e(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),A6e(r)&&(this.ctx.globalAlpha=r.opacity),l6e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),oU(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return Tr(this,void 0,void 0,function(){var n;return xr(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return Tr(this,void 0,void 0,function(){return xr(this,function(n){switch(n.label){case 0:if(Wt(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var a=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var o=ub(r.text);o.reduce(function(l,A){return a.ctx.fillText(A,l,r.bounds.top+s),l+a.ctx.measureText(A).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),s=j6e(r.fontFamily).join(", "),a=qu(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(r,n){return Tr(this,void 0,void 0,function(){var s,a,o,l,A,u,h,c,d=this;return xr(this,function(f){return s=this.createFontStyle(n),a=s[0],o=s[1],l=s[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(o,l),u=A.baseline,h=A.middle,c=n.paintOrder,r.textBounds.forEach(function(g){c.forEach(function(y){switch(y){case 0:d.ctx.fillStyle=Jt(n.color),d.renderTextWithLetterSpacing(g,n.letterSpacing,u);var v=n.textShadow;v.length&&g.text.trim().length&&(v.slice(0).reverse().forEach(function(m){d.ctx.shadowColor=Jt(m.color),d.ctx.shadowOffsetX=m.offsetX.number*d.options.scale,d.ctx.shadowOffsetY=m.offsetY.number*d.options.scale,d.ctx.shadowBlur=m.blur.number,d.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),d.ctx.shadowColor="",d.ctx.shadowOffsetX=0,d.ctx.shadowOffsetY=0,d.ctx.shadowBlur=0),n.textDecorationLine.length&&(d.ctx.fillStyle=Jt(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(m){switch(m){case 1:d.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:d.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:d.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+h),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(d.ctx.strokeStyle=Jt(n.webkitTextStrokeColor),d.ctx.lineWidth=n.webkitTextStrokeWidth,d.ctx.lineJoin=window.chrome?"miter":"round",d.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),d.ctx.strokeStyle="",d.ctx.lineWidth=0,d.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var a=a0(r),o=s0(n);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return Tr(this,void 0,void 0,function(){var n,s,a,o,l,A,p,p,u,h,c,d,w,f,g,_,y,v,m,p,x,w,_;return xr(this,function(b){switch(b.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,a=n.styles,o=0,l=n.textNodes,b.label=1;case 1:return o<l.length?(A=l[o],[4,this.renderTextNode(A,a)]):[3,4];case 2:b.sent(),b.label=3;case 3:return o++,[3,1];case 4:if(!(n instanceof KT))return[3,8];b.label=5;case 5:return b.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return p=b.sent(),this.renderReplacedElement(n,s,p),[3,8];case 7:return b.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof zT&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof GT))return[3,12];b.label=9;case 9:return b.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return p=b.sent(),this.renderReplacedElement(n,s,p),[3,12];case 11:return b.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof XT&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:h=b.sent(),n.width&&n.height&&this.ctx.drawImage(h,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),b.label=14;case 14:if(n instanceof db&&(c=Math.min(n.bounds.width,n.bounds.height),n.type===Zf?n.checked&&(this.ctx.save(),this.path([new fe(n.bounds.left+c*.39363,n.bounds.top+c*.79),new fe(n.bounds.left+c*.16,n.bounds.top+c*.5549),new fe(n.bounds.left+c*.27347,n.bounds.top+c*.44071),new fe(n.bounds.left+c*.39694,n.bounds.top+c*.5649),new fe(n.bounds.left+c*.72983,n.bounds.top+c*.23),new fe(n.bounds.left+c*.84,n.bounds.top+c*.34085),new fe(n.bounds.left+c*.39363,n.bounds.top+c*.79)]),this.ctx.fillStyle=Jt(gS),this.ctx.fill(),this.ctx.restore()):n.type===e0&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+c/2,n.bounds.top+c/2,c/4,0,Math.PI*2,!0),this.ctx.fillStyle=Jt(gS),this.ctx.fill(),this.ctx.restore())),_6e(n)&&n.value.length){switch(d=this.createFontStyle(a),w=d[0],f=d[1],g=this.fontMetrics.getMetrics(w,f).baseline,this.ctx.font=w,this.ctx.fillStyle=Jt(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=B6e(n.styles.textAlign),_=a0(n),y=0,n.styles.textAlign){case 1:y+=_.width/2;break;case 2:y+=_.width;break}v=_.add(y,0,0,-_.height/2+1),this.ctx.save(),this.path([new fe(_.left,_.top),new fe(_.left+_.width,_.top),new fe(_.left+_.width,_.top+_.height),new fe(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Cc(n.value,v),a.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Wt(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(m=n.styles.listStyleImage,m.type!==0)return[3,18];p=void 0,x=m.url,b.label=15;case 15:return b.trys.push([15,17,,18]),[4,this.context.cache.match(x)];case 16:return p=b.sent(),this.ctx.drawImage(p,n.bounds.left-(p.width+10),n.bounds.top),[3,18];case 17:return b.sent(),this.context.logger.error("Error loading list-style-image "+x),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(w=this.createFontStyle(a)[0],this.ctx.font=w,this.ctx.fillStyle=Jt(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new ma(n.bounds.left,n.bounds.top+ct(n.styles.paddingTop,n.bounds.width),n.bounds.width,Y5(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Cc(r.listValue,_),a.letterSpacing,Y5(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),b.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return Tr(this,void 0,void 0,function(){var n,s,m,a,o,m,l,A,m,u,h,m,c,d,m,f,g,m,y,v,m;return xr(this,function(p){switch(p.label){case 0:if(Wt(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:p.sent(),n=0,s=r.negativeZIndex,p.label=2;case 2:return n<s.length?(m=s[n],[4,this.renderStack(m)]):[3,5];case 3:p.sent(),p.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:p.sent(),a=0,o=r.nonInlineLevel,p.label=7;case 7:return a<o.length?(m=o[a],[4,this.renderNode(m)]):[3,10];case 8:p.sent(),p.label=9;case 9:return a++,[3,7];case 10:l=0,A=r.nonPositionedFloats,p.label=11;case 11:return l<A.length?(m=A[l],[4,this.renderStack(m)]):[3,14];case 12:p.sent(),p.label=13;case 13:return l++,[3,11];case 14:u=0,h=r.nonPositionedInlineLevel,p.label=15;case 15:return u<h.length?(m=h[u],[4,this.renderStack(m)]):[3,18];case 16:p.sent(),p.label=17;case 17:return u++,[3,15];case 18:c=0,d=r.inlineLevel,p.label=19;case 19:return c<d.length?(m=d[c],[4,this.renderNode(m)]):[3,22];case 20:p.sent(),p.label=21;case 21:return c++,[3,19];case 22:f=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,p.label=23;case 23:return f<g.length?(m=g[f],[4,this.renderStack(m)]):[3,26];case 24:p.sent(),p.label=25;case 25:return f++,[3,23];case 26:y=0,v=r.positiveZIndex,p.label=27;case 27:return y<v.length?(m=v[y],[4,this.renderStack(m)]):[3,30];case 28:p.sent(),p.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,a){var o=kn(s)?s.start:s;a===0?n.ctx.moveTo(o.x,o.y):n.ctx.lineTo(o.x,o.y),kn(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,a){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(r,n,s){var a;if(r.width===n&&r.height===s)return r;var o=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,l=o.createElement("canvas");l.width=Math.max(1,n),l.height=Math.max(1,s);var A=l.getContext("2d");return A.drawImage(r,0,0,r.width,r.height,0,0,n,s),l},e.prototype.renderBackgroundImage=function(r){return Tr(this,void 0,void 0,function(){var n,s,a,o,l,A;return xr(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,s=function(h){var c,d,f,N,D,z,F,$,E,g,N,D,z,F,$,y,v,m,p,x,w,_,b,S,E,C,N,Q,P,F,$,L,D,z,k,M,j,I,G,X,te,Ae;return xr(this,function(ie){switch(ie.label){case 0:if(h.type!==0)return[3,5];c=void 0,d=h.url,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,a.context.cache.match(d)];case 2:return c=ie.sent(),[3,4];case 3:return ie.sent(),a.context.logger.error("Error loading background-image "+d),[3,4];case 4:return c&&(f=yp(r,n,[c.width,c.height,c.width/c.height]),N=f[0],D=f[1],z=f[2],F=f[3],$=f[4],E=a.ctx.createPattern(a.resizeImage(c,F,$),"repeat"),a.renderRepeat(N,E,D,z)),[3,6];case 5:l4e(h)?(g=yp(r,n,[null,null,null]),N=g[0],D=g[1],z=g[2],F=g[3],$=g[4],y=n4e(h.angle,F,$),v=y[0],m=y[1],p=y[2],x=y[3],w=y[4],_=document.createElement("canvas"),_.width=F,_.height=$,b=_.getContext("2d"),S=b.createLinearGradient(m,x,p,w),X5(h.stops,v).forEach(function(V){return S.addColorStop(V.stop,Jt(V.color))}),b.fillStyle=S,b.fillRect(0,0,F,$),F>0&&$>0&&(E=a.ctx.createPattern(_,"repeat"),a.renderRepeat(N,E,D,z))):A4e(h)&&(C=yp(r,n,[null,null,null]),N=C[0],Q=C[1],P=C[2],F=C[3],$=C[4],L=h.position.length===0?[lb]:h.position,D=ct(L[0],F),z=ct(L[L.length-1],$),k=s4e(h,D,z,F,$),M=k[0],j=k[1],M>0&&j>0&&(I=a.ctx.createRadialGradient(Q+D,P+z,0,Q+D,P+z,M),X5(h.stops,M*2).forEach(function(V){return I.addColorStop(V.stop,Jt(V.color))}),a.path(N),a.ctx.fillStyle=I,M!==j?(G=r.bounds.left+.5*r.bounds.width,X=r.bounds.top+.5*r.bounds.height,te=j/M,Ae=1/te,a.ctx.save(),a.ctx.translate(G,X),a.ctx.transform(1,0,0,te,0,0),a.ctx.translate(-G,-X),a.ctx.fillRect(Q,Ae*(P-X)+X,F,$*Ae),a.ctx.restore()):a.ctx.fill())),ie.label=6;case 6:return n--,[2]}})},a=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(A=l[o],[5,s(A)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return Tr(this,void 0,void 0,function(){return xr(this,function(a){return this.path(jS(s,n)),this.ctx.fillStyle=Jt(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,a){return Tr(this,void 0,void 0,function(){var o,l;return xr(this,function(A){switch(A.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,a)]:[3,2];case 1:return A.sent(),[2];case 2:return o=d6e(a,s),this.path(o),this.ctx.fillStyle=Jt(r),this.ctx.fill(),l=h6e(a,s),this.path(l),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return Tr(this,void 0,void 0,function(){var n,s,a,o,l,A,u,h,c=this;return xr(this,function(d){switch(d.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!ni(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],o=C6e(sl(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),ni(n.backgroundColor)||(this.ctx.fillStyle=Jt(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:d.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(f){c.ctx.save();var g=n0(r.curves),y=f.inset?0:w6e,v=c6e(g,-y+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(c.path(g),c.ctx.clip(),c.mask(v)):(c.mask(g),c.ctx.clip(),c.path(v)),c.ctx.shadowOffsetX=f.offsetX.number+y,c.ctx.shadowOffsetY=f.offsetY.number,c.ctx.shadowColor=Jt(f.color),c.ctx.shadowBlur=f.blur.number,c.ctx.fillStyle=f.inset?Jt(f.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()}),d.label=2;case 2:l=0,A=0,u=a,d.label=3;case 3:return A<u.length?(h=u[A],h.style!==0&&!ni(h.color)&&h.width>0?h.style!==2?[3,5]:[4,this.renderDashedDottedBorder(h.color,h.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return d.sent(),[3,11];case 5:return h.style!==3?[3,7]:[4,this.renderDashedDottedBorder(h.color,h.width,l,r.curves,3)];case 6:return d.sent(),[3,11];case 7:return h.style!==4?[3,9]:[4,this.renderDoubleBorder(h.color,h.width,l,r.curves)];case 8:return d.sent(),[3,11];case 9:return[4,this.renderSolidBorder(h.color,l,r.curves)];case 10:d.sent(),d.label=11;case 11:l++,d.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,a,o){return Tr(this,void 0,void 0,function(){var l,A,u,h,c,d,f,g,y,v,m,p,x,w,_,b,_,b;return xr(this,function(S){return this.ctx.save(),l=f6e(a,s),A=jS(a,s),o===2&&(this.path(A),this.ctx.clip()),kn(A[0])?(u=A[0].start.x,h=A[0].start.y):(u=A[0].x,h=A[0].y),kn(A[1])?(c=A[1].end.x,d=A[1].end.y):(c=A[1].x,d=A[1].y),s===0||s===2?f=Math.abs(u-c):f=Math.abs(h-d),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(A.slice(0,2)),g=n<3?n*3:n*2,y=n<3?n*2:n,o===3&&(g=n,y=n),v=!0,f<=g*2?v=!1:f<=g*2+y?(m=f/(2*g+y),g*=m,y*=m):(p=Math.floor((f+y)/(g+y)),x=(f-p*g)/(p-1),w=(f-(p+1)*g)/p,y=w<=0||Math.abs(y-x)<Math.abs(y-w)?x:w),v&&(o===3?this.ctx.setLineDash([0,g+y]):this.ctx.setLineDash([g,y])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Jt(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(kn(A[0])&&(_=A[3],b=A[0],this.ctx.beginPath(),this.formatPath([new fe(_.end.x,_.end.y),new fe(b.start.x,b.start.y)]),this.ctx.stroke()),kn(A[1])&&(_=A[1],b=A[2],this.ctx.beginPath(),this.formatPath([new fe(_.end.x,_.end.y),new fe(b.start.x,b.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return Tr(this,void 0,void 0,function(){var n;return xr(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Jt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=u6e(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(dU),_6e=function(t){return t instanceof qT||t instanceof VT?!0:t instanceof db&&t.type!==e0&&t.type!==Zf},C6e=function(t,e){switch(t){case 0:return n0(e);case 2:return a6e(e);case 1:default:return s0(e)}},B6e=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},S6e=["-apple-system","system-ui"],j6e=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return S6e.indexOf(e)===-1}):t},k6e=function(t){fs(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return Tr(this,void 0,void 0,function(){var n,s;return xr(this,function(a){switch(a.label){case 0:return n=Lv(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,E6e(n)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Jt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(dU),E6e=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},N6e=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Td([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Td([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Td([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Td([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),F6e=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new N6e({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new JNe(this,e)}return t.instanceCount=1,t}(),Dg=function(t,e){return e===void 0&&(e={}),T6e(t,e)};typeof window<"u"&&iU.setContext(window);var T6e=function(t,e){return Tr(void 0,void 0,void 0,function(){var r,n,s,a,o,l,A,u,h,c,d,f,g,y,v,m,p,x,w,_,S,b,S,E,C,N,Q,P,F,$,L,D,z,k,M,j,I,G,X,te;return xr(this,function(Ae){switch(Ae.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(C=e.imageTimeout)!==null&&C!==void 0?C:15e3,proxy:e.proxy,useCORS:(N=e.useCORS)!==null&&N!==void 0?N:!1},a=jv({logging:(Q=e.logging)!==null&&Q!==void 0?Q:!0,cache:e.cache},s),o={windowWidth:(P=e.windowWidth)!==null&&P!==void 0?P:n.innerWidth,windowHeight:(F=e.windowHeight)!==null&&F!==void 0?F:n.innerHeight,scrollX:($=e.scrollX)!==null&&$!==void 0?$:n.pageXOffset,scrollY:(L=e.scrollY)!==null&&L!==void 0?L:n.pageYOffset},l=new ma(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),A=new F6e(a,l),u=(D=e.foreignObjectRendering)!==null&&D!==void 0?D:!1,h={allowTaint:(z=e.allowTaint)!==null&&z!==void 0?z:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},A.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),c=new CS(A,t,h),d=c.clonedReferenceElement,d?[4,c.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=Ae.sent(),g=hb(d)||QNe(d)?cje(d.ownerDocument):jg(A,d),y=g.width,v=g.height,m=g.left,p=g.top,x=U6e(A,d,e.backgroundColor),w={canvas:e.canvas,backgroundColor:x,scale:(M=(k=e.scale)!==null&&k!==void 0?k:n.devicePixelRatio)!==null&&M!==void 0?M:1,x:((j=e.x)!==null&&j!==void 0?j:0)+m,y:((I=e.y)!==null&&I!==void 0?I:0)+p,width:(G=e.width)!==null&&G!==void 0?G:Math.ceil(y),height:(X=e.height)!==null&&X!==void 0?X:Math.ceil(v)},u?(A.logger.debug("Document cloned, using foreign object rendering"),S=new k6e(A,w),[4,S.render(d)]):[3,3];case 2:return _=Ae.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+m+","+p+" with size "+y+"x"+v+" using computed rendering"),A.logger.debug("Starting DOM parsing"),b=YT(A,d),x===b.styles.backgroundColor&&(b.styles.backgroundColor=aa.TRANSPARENT),A.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),S=new b6e(A,w),[4,S.render(b)];case 4:_=Ae.sent(),Ae.label=5;case 5:return(!((te=e.removeContainer)!==null&&te!==void 0)||te)&&(CS.destroy(f)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,_]}})})},U6e=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?bc(t,getComputedStyle(n.documentElement).backgroundColor):aa.TRANSPARENT,a=n.body?bc(t,getComputedStyle(n.body).backgroundColor):aa.TRANSPARENT,o=typeof r=="string"?bc(t,r):r===null?aa.TRANSPARENT:4294967295;return e===n.documentElement?ni(s)?ni(a)?o:a:s:o};const Q6e=({onBack:t})=>{const{playSound:e}=Ge(),[r,n]=B.useState(!0),[s,a]=B.useState([]),[o,l]=B.useState([]),[A,u]=B.useState(new Set),[h,c]=B.useState({}),[d,f]=B.useState(!1),[g,y]=B.useState(!1),[v,m]=B.useState(!1),[p,x]=B.useState(null),[w,_]=B.useState(()=>({start:localStorage.getItem("skillOverTime_startDate"),end:localStorage.getItem("skillOverTime_endDate")})),b=B.useRef(null);B.useEffect(()=>{const j=()=>{m(window.innerWidth<768)};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]),B.useEffect(()=>{(async()=>{n(!0);try{const I=await be.getHistoricalRatings(),G=await be.getCurrentTrueSkillRatings(),X=await be.getAllPlayers(),te=new Map(X.map(K=>[K.id,K.name])),Ae=new Set;I.forEach(K=>{Object.keys(K.ratings).forEach(O=>{Ae.add(O)})});const ie=I.map(K=>{const O={matchNumber:K.matchNumber,date:K.date};return Ae.forEach(oe=>{const me=te.get(oe)||oe;K.ratings[oe]!==void 0&&(O[me]=K.ratings[oe],O[me+"_participated"]=K.participants.includes(oe))}),O});l(ie);const V=[];Ae.forEach(K=>{const O=te.get(K)||K,oe=I.filter(me=>me.participants.includes(K)).length;oe>0&&V.push({playerId:K,playerName:O,currentRating:G[K]||1200,actualMatchCount:oe})}),V.sort((K,O)=>O.currentRating-K.currentRating),a(V);const Y=V.filter(K=>K.actualMatchCount>=5).slice(0,5).map(K=>K.playerId);u(new Set(Y));const U=L(V.length),H={};V.forEach((K,O)=>{H[K.playerName]=U[O]}),c(H)}catch(I){console.error("Error loading rating history:",I)}finally{n(!1)}})()},[]);const S=B.useMemo(()=>!w.start&&!w.end?o:o.filter(j=>{const I=new Date(j.date);return!(w.start&&I<new Date(w.start)||w.end&&I>new Date(w.end+"T23:59:59"))}),[o,w]),E=B.useCallback(j=>{const I=S;if(I.length<2)return{segments:[],participationPoints:[]};let G=-1,X=-1;for(let ie=0;ie<I.length;ie++)I[ie][j+"_participated"]&&(G===-1&&(G=ie),X=ie);if(G===-1)return{segments:[],participationPoints:[]};const te=[];for(let ie=G;ie<X;ie++){const V=I[ie],Y=I[ie+1],U=Y[j+"_participated"];te.push({data:[{x:V.matchNumber,y:V[j]},{x:Y.matchNumber,y:Y[j]}],style:U?"solid":"dotted"})}const Ae=I.filter(ie=>ie[j+"_participated"]).map(ie=>({x:ie.matchNumber,y:ie[j],date:ie.date}));return{segments:te,participationPoints:Ae}},[S]),C=()=>{e("buttonClick"),t()},N=j=>{e("buttonClick");const I=new Set(A);I.has(j)?I.delete(j):I.add(j),u(I)},Q=()=>{e("buttonClick"),u(new Set(s.map(j=>j.playerId)))},P=()=>{e("buttonClick"),u(new Set)},F=B.useCallback((j,I)=>{e("buttonClick");const G=I||null;_(X=>({...X,[j]:G})),G?localStorage.setItem(`skillOverTime_${j}Date`,G):localStorage.removeItem(`skillOverTime_${j}Date`)},[e]),$=B.useCallback(()=>{e("buttonClick"),_({start:null,end:null}),localStorage.removeItem("skillOverTime_startDate"),localStorage.removeItem("skillOverTime_endDate")},[e]),L=j=>{const I=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16","#06B6D4","#A855F7","#F43F5E","#0EA5E9","#22C55E"],G=[];for(let X=0;X<j;X++)G.push(I[X%I.length]);return G},D=async()=>{if(b.current){e("buttonClick"),f(!0);try{const j=document.createElement("div");j.className="screenshot-title text-center mb-6 bg-gray-800 p-6",j.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Skill Rating Over Time</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,b.current.insertBefore(j,b.current.firstChild);const I=b.current.querySelectorAll(".no-screenshot");I.forEach(Ae=>{Ae.style.display="none"});const X=(await Dg(b.current,{backgroundColor:"#1F2937",scale:2,logging:!1,windowWidth:1400,windowHeight:b.current.scrollHeight})).toDataURL("image/png"),te=document.createElement("a");te.download=`skill-over-time-${new Date().toISOString().slice(0,10)}.png`,te.href=X,te.click(),b.current.removeChild(j),I.forEach(Ae=>{Ae.style.display=""})}catch(j){console.error("Error creating screenshot:",j)}finally{f(!1)}}},z=()=>{e("buttonClick"),y(!g)},k=B.useMemo(()=>{let j=1/0,I=-1/0;return s.filter(G=>A.has(G.playerId)).forEach(G=>{S.forEach(X=>{const te=X[G.playerName];te!==void 0&&(j=Math.min(j,te),I=Math.max(I,te))})}),j===1/0?[1e3,1400]:[Math.floor(j/50)*50-50,Math.ceil(I/50)*50+50]},[S,s,A]),M=B.useMemo(()=>{if(S.length===0)return[0,10];const j=S.map(I=>I.matchNumber);return[Math.min(...j),Math.max(...j)]},[S]);return i.jsxs("div",{ref:b,className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[i.jsxs("button",{onClick:C,className:"flex items-center text-gray-300 hover:text-white",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back"})]}),i.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Skill Rating Over Time"}),i.jsxs("button",{onClick:D,disabled:d,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg w-full sm:w-auto justify-center",children:[i.jsx(b0,{size:18,className:"mr-2"}),i.jsx("span",{children:d?"Capturing...":"Screenshot"})]})]}),r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-4 sm:hidden no-screenshot",children:i.jsxs("button",{onClick:z,className:"w-full px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(vu,{size:18,className:"mr-2"}),i.jsxs("span",{children:["Player Selection (",A.size," selected)"]})]}),g?i.jsx(ls,{size:18}):i.jsx(pn,{size:18})]})}),i.jsx("div",{className:`mb-4 no-screenshot ${!g&&v?"hidden":""}`,children:i.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Nn,{size:18,className:"mr-2 text-blue-400"}),i.jsx("span",{className:"font-semibold",children:"Date Range"})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-gray-400",children:"From:"}),i.jsx("input",{type:"date",value:w.start||"",onChange:j=>F("start",j.target.value),className:"bg-gray-600 rounded px-2 py-1 text-sm border border-gray-500 focus:border-blue-500 focus:outline-none"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("label",{className:"text-sm text-gray-400",children:"To:"}),i.jsx("input",{type:"date",value:w.end||"",onChange:j=>F("end",j.target.value),className:"bg-gray-600 rounded px-2 py-1 text-sm border border-gray-500 focus:border-blue-500 focus:outline-none"})]}),(w.start||w.end)&&i.jsx("button",{onClick:$,className:"text-sm text-blue-400 hover:text-blue-300 underline",children:"Clear"})]})]})})}),i.jsx("div",{className:`mb-6 no-screenshot ${!g&&v?"hidden":""}`,children:i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2",children:[i.jsxs("h3",{className:"font-semibold flex items-center",children:[i.jsx(et,{size:18,className:"mr-2"}),"Select Players to Compare"]}),i.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[i.jsx("button",{onClick:Q,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded text-sm flex-1 sm:flex-none",children:"Select All"}),i.jsx("button",{onClick:P,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm flex-1 sm:flex-none",children:"Clear All"})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:s.map(j=>i.jsxs("button",{onClick:()=>N(j.playerId),className:`p-2 sm:p-3 rounded-lg text-left transition-all ${A.has(j.playerId)?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:[i.jsx("div",{className:"font-medium truncate",children:j.playerName}),i.jsxs("div",{className:"text-xs sm:text-sm opacity-80",children:["Rating: ",j.currentRating]}),i.jsxs("div",{className:"text-xs opacity-60",children:[j.actualMatchCount," matches played"]})]},j.playerId))})]})}),A.size>0?i.jsxs("div",{className:"bg-gray-700 rounded-lg p-2 sm:p-4",children:[i.jsx("div",{style:{width:"100%",height:v?400:600},children:i.jsxs(Sg,{width:v?380:1e3,height:v?380:580,domain:{x:M,y:k},padding:{top:60,bottom:60,left:70,right:30},children:[i.jsx(ti,{orientation:"top",tickValues:S.filter(j=>j.matchNumber>0).map(j=>j.matchNumber),tickFormat:j=>{const I=S.find(X=>X.matchNumber===j);return I?new Date(I.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}):""},style:{axis:{stroke:"#6B7280"},tickLabels:{fill:"#9CA3AF",fontSize:v?8:10,angle:-45,textAnchor:"start"},grid:{stroke:"transparent"}}}),i.jsx(ti,{label:"Match Number",tickFormat:j=>Math.round(j),style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:v?12:14,padding:40},tickLabels:{fill:"#9CA3AF",fontSize:v?10:12},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),i.jsx(ti,{dependentAxis:!0,label:"Skill Rating",style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:v?12:14,padding:50},tickLabels:{fill:"#9CA3AF",fontSize:v?10:12},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),s.filter(j=>A.has(j.playerId)).flatMap(j=>{const{segments:I}=E(j.playerName),G=h[j.playerName],X=p===j.playerId,te=p!==null&&!X;return I.map((Ae,ie)=>i.jsx(ec,{data:Ae.data,style:{data:{stroke:G,strokeWidth:X?5:3,strokeOpacity:te?.3:1,strokeDasharray:Ae.style==="dotted"?"8 4":void 0,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(x(j.playerId),[]),onMouseLeave:()=>(x(null),[])}}]},`${j.playerId}-seg-${ie}`))}),s.filter(j=>A.has(j.playerId)).map(j=>{const{participationPoints:I}=E(j.playerName),G=h[j.playerName],X=p===j.playerId,te=p!==null&&!X;return i.jsx(ib,{data:I,size:X?8:5,symbol:"circle",style:{data:{fill:G,fillOpacity:te?.3:1,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(x(j.playerId),[]),onMouseLeave:()=>(x(null),[])}}]},`${j.playerId}-scatter`)})]})}),i.jsx("div",{className:"flex flex-wrap gap-4 mt-4 justify-center p-3 bg-gray-800 rounded-lg",children:s.filter(j=>A.has(j.playerId)).map(j=>i.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onMouseEnter:()=>x(j.playerId),onMouseLeave:()=>x(null),children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h[j.playerName]}}),i.jsx("span",{className:`text-sm ${p===j.playerId?"text-white font-bold":"text-gray-300"}`,children:j.playerName})]},j.playerId))})]}):i.jsxs("div",{className:"bg-gray-700 rounded-lg p-8 text-center",children:[i.jsx(sa,{size:48,className:"mx-auto mb-4 text-gray-500"}),i.jsx("p",{className:"text-gray-400",children:"Select players to view their rating progression"})]}),i.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Dt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm text-gray-300",children:[i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Line Types:"})," Solid lines lead to matches where the player participated. Dotted lines show periods of inactivity (rating carried forward)."]}),i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Dot Markers:"})," Each dot marks a match where the player actually participated."]}),i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Legend Hover:"})," Hover over a player name in the legend to highlight their line."]}),i.jsx("p",{children:"Ratings use the TrueSkill system where new players start around 1200 and converge to their true skill level after ~20 matches."})]})]})})]})]})},I6e=({onClose:t,onDataReceived:e})=>{var j;const{connectionState:r,syncProgress:n,initAsHost:s,connect:a,disconnect:o,sendData:l,requestData:A,confirmDataOperation:u,rejectDataOperation:h}=GN(),{playSound:c}=Ge(),[d,f]=B.useState(""),[g,y]=B.useState(!1),[v,m]=B.useState(!1),[p,x]=B.useState(!1),[w,_]=B.useState(!1);B.useEffect(()=>{x(/^[A-Z0-9]{6,}$/.test(d))},[d]);const b=I=>{const G=I.target.value.replace(/[^A-Za-z0-9]/g,"").toUpperCase();f(G)},S=async()=>{try{c("buttonClick"),console.log("[ConnectionSetup] Initiating host session..."),_(!0);const I=await s();_(!1),console.log("[ConnectionSetup] Host session created with code:",I)}catch(I){_(!1),console.error("[ConnectionSetup] Failed to host session:",I)}},E=async()=>{if(p)try{c("buttonClick"),console.log("[ConnectionSetup] Joining session with code:",d),_(!0),await a(d),_(!1),console.log("[ConnectionSetup] Successfully joined session")}catch(I){_(!1),console.error("[ConnectionSetup] Failed to join session:",I)}},C=()=>{c("buttonClick"),console.log("[ConnectionSetup] Disconnecting from session"),o()},N=async()=>{try{c("buttonClick"),console.log("[ConnectionSetup] Sending data..."),await l()}catch(I){console.error("[ConnectionSetup] Failed to send data:",I)}},Q=async()=>{try{c("buttonClick"),console.log("[ConnectionSetup] Requesting data..."),await A()}catch(I){console.error("[ConnectionSetup] Failed to request data:",I)}},P=()=>{if(c("buttonClick"),console.log("[ConnectionSetup] Confirming data operation"),!r.isConnected){console.error("[ConnectionSetup] Cannot confirm - not connected"),r.connectionCode&&(console.log("[ConnectionSetup] Attempting reconnection before confirming"),a(r.connectionCode).then(()=>{setTimeout(()=>{u()},1e3)}).catch(I=>{console.error("[ConnectionSetup] Reconnection failed:",I)}));return}u()},F=()=>{c("buttonClick"),console.log("[ConnectionSetup] Rejecting data operation"),h()},$=()=>{r.connectionCode&&(c("buttonClick"),navigator.clipboard.writeText(r.connectionCode),y(!0),setTimeout(()=>y(!1),2e3))},L=()=>{if(r.connectionCode){c("buttonClick");const I=new URL(window.location.href);I.searchParams.set("connect",r.connectionCode),navigator.clipboard.writeText(I.toString()),m(!0),setTimeout(()=>m(!1),2e3)}},D=()=>{c("buttonClick"),t&&t()},z=n.status==="awaiting-confirmation",k=n.status==="pending-confirmation",M=r.detailedStatus;return B.useEffect(()=>{n.status==="complete"&&e&&(console.log("[ConnectionSetup] Data sync completed, calling onDataReceived"),e())},[n.status,e]),B.useEffect(()=>{console.log("[ConnectionSetup] Connection state update:",r.isConnected?"connected":"disconnected","peers:",r.peerCount,"status:",n.status)},[r.isConnected,r.peerCount,n.status]),i.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h2",{className:"text-2xl font-bold flex items-center",children:[i.jsx(nf,{className:"mr-2",size:22}),"P2P Connection"]}),t&&i.jsx("button",{onClick:D,className:"p-1 rounded-full hover:bg-gray-700","aria-label":"Close",children:i.jsx(jr,{size:20})})]}),r.error&&i.jsxs("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-500 rounded-lg text-red-300 flex items-start",children:[i.jsx("span",{className:"flex-shrink-0 mr-2",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Connection Error"}),i.jsx("div",{className:"text-sm mt-1",children:r.error}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsx("button",{onClick:r.isHost?S:C,className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:r.isHost?"Try Again":"Start Over"}),!r.isHost&&i.jsxs("button",{onClick:()=>a(d||r.connectionCode||""),className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 rounded text-white text-sm flex items-center",disabled:!d&&!r.connectionCode||w,children:[w?i.jsx(ft,{size:14,className:"mr-1 animate-spin"}):i.jsx(ca,{size:14,className:"mr-1"}),"Reconnect"]})]})]})]}),M&&!r.error&&r.isConnecting&&i.jsx("div",{className:"mb-4 p-2 bg-blue-900/30 border border-blue-500 rounded-lg text-blue-300 text-sm",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mr-2 animate-pulse"}),M]})}),!r.isConnected&&!r.isConnecting?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx(o7,{className:"text-gray-400",size:48})}),i.jsx("p",{className:"text-center text-gray-300 mb-4",children:"Create a new connection to share data, or join an existing connection using a code."}),i.jsx("button",{className:"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg flex items-center justify-center",onClick:S,disabled:w,children:w?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:18,className:"mr-2 animate-spin"}),"Creating Connection..."]}):i.jsxs(i.Fragment,{children:[i.jsx(nf,{size:18,className:"mr-2"}),"Create New Connection"]})}),i.jsxs("div",{className:"relative flex items-center py-2",children:[i.jsx("div",{className:"flex-grow border-t border-gray-600"}),i.jsx("span",{className:"flex-shrink mx-3 text-gray-400",children:"or"}),i.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("input",{type:"text",placeholder:"Enter code",value:d,onChange:b,className:"flex-grow px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center font-mono text-lg uppercase tracking-wider",maxLength:12,disabled:w}),i.jsx("button",{className:`py-3 px-4 ${p&&!w?"bg-green-600 hover:bg-green-500":"bg-gray-600 cursor-not-allowed"} text-white rounded-lg flex-shrink-0 flex items-center justify-center`,onClick:E,disabled:!p||w,children:w?i.jsx(ft,{size:18,className:"animate-spin"}):"Join"})]})]}):r.isConnecting&&!r.connectionCode?i.jsxs("div",{className:"text-center py-4",children:[i.jsx(ft,{className:"animate-spin mx-auto mb-4",size:48}),i.jsx("p",{className:"text-lg mb-2",children:"Establishing connection..."}),i.jsx("p",{className:"text-sm text-gray-400 mb-4",children:r.isHost?"Creating secure connection code...":"Connecting to remote device..."}),i.jsx("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",onClick:C,children:"Cancel"})]}):r.connectionCode&&!r.isConnected?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex justify-center mb-2",children:i.jsx(ft,{className:"animate-spin text-blue-400",size:48})}),i.jsx("div",{className:"flex items-center justify-center text-lg font-medium mb-2",children:i.jsx("span",{children:r.isHost?"Waiting for Connection":"Connecting to Host..."})}),r.isHost&&r.connectionCode&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Share this code with others:"}),i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-grow py-3 px-4 bg-gray-700 border border-gray-600 rounded-l-lg text-center font-mono text-xl tracking-wider",children:r.connectionCode}),i.jsx("button",{onClick:$,className:"px-3 bg-blue-600 hover:bg-blue-500 rounded-r-lg flex items-center",title:"Copy code",children:g?i.jsx(Rr,{size:18}):i.jsx(E_,{size:18})})]}),i.jsxs("button",{onClick:L,className:"mt-2 w-full py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-center",children:[i.jsx(N_,{size:16,className:"mr-2"}),v?"Link Copied!":"Copy as Link"]})]}),i.jsx("button",{className:"w-full py-2 bg-red-600 hover:bg-red-500 rounded-lg",onClick:C,children:"Cancel"})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex justify-center mb-2",children:i.jsx(qk,{className:"text-green-400",size:48})}),i.jsxs("div",{className:"flex items-center justify-center text-lg font-medium mb-2",children:[i.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),i.jsx("span",{children:r.isHost?`Hosting Connection (${r.peerCount} ${r.peerCount===1?"peer":"peers"} connected)`:"Connected to Host"})]}),r.isHost&&r.connectionCode&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Share this code with others:"}),i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-grow py-3 px-4 bg-gray-700 border border-gray-600 rounded-l-lg text-center font-mono text-xl tracking-wider",children:r.connectionCode}),i.jsx("button",{onClick:$,className:"px-3 bg-blue-600 hover:bg-blue-500 rounded-r-lg flex items-center",title:"Copy code",children:g?i.jsx(Rr,{size:18}):i.jsx(E_,{size:18})})]}),i.jsxs("button",{onClick:L,className:"mt-2 w-full py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-center",children:[i.jsx(N_,{size:16,className:"mr-2"}),v?"Link Copied!":"Copy as Link"]})]}),i.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-700",children:[i.jsxs("h3",{className:"text-lg font-medium mb-2 flex items-center",children:[i.jsx(eo,{size:18,className:"mr-2 text-blue-400"}),"Share Match Data"]}),k&&i.jsx("div",{className:"bg-yellow-900/30 border border-yellow-600 rounded-lg p-4 mb-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(ea,{size:18,className:"text-yellow-500 mr-2 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-yellow-400 mb-1",children:n.message}),i.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Do you want to ",n.isDataRequest?"send":"receive"," match data?"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:P,className:"px-3 py-1 bg-green-600 hover:bg-green-500 rounded",children:n.isDataRequest?"Send Data":"Receive Data"}),i.jsx("button",{onClick:F,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded",children:"Decline"})]})]})]})}),n.status==="idle"&&!k&&!z&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Exchange match history, player stats, and game data with the connected device."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[i.jsxs("button",{onClick:N,className:"flex-1 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg flex items-center justify-center",children:[i.jsx(QP,{size:16,className:"mr-2"}),"Send My Data"]}),i.jsxs("button",{onClick:Q,className:"flex-1 py-2 bg-green-600 hover:bg-green-500 rounded-lg flex items-center justify-center",children:[i.jsx(TP,{size:16,className:"mr-2"}),"Request Data"]})]})]}),z&&i.jsx("div",{className:"p-3 bg-blue-900/30 border border-blue-600 rounded-lg mb-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(ft,{size:18,className:"text-blue-500 mr-2 mt-0.5 animate-spin"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-blue-300",children:n.message}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Waiting for the other device to respond..."}),i.jsx("button",{onClick:F,className:"mt-2 px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Cancel"})]})]})}),(n.status==="preparing"||n.status==="sending"||n.status==="receiving"||n.status==="processing")&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${n.percent}%`}})}),i.jsx("p",{className:"text-center text-sm",children:n.message})]}),n.status==="complete"&&i.jsxs("div",{className:"p-3 bg-green-900/30 border border-green-600 rounded-lg mb-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx(Rr,{size:18,className:"text-green-500 mr-2 mt-0.5"}),i.jsx("p",{className:"text-green-300",children:n.message})]}),i.jsx("div",{className:"mt-2 text-right",children:i.jsx("button",{onClick:()=>{h()},className:"px-3 py-1 bg-green-800 hover:bg-green-700 rounded text-sm",children:"Done"})})]}),n.status==="error"&&i.jsx("div",{className:"p-3 bg-red-900/30 border border-red-500 rounded-lg",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(ea,{size:18,className:"text-red-500 mr-2 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-red-300",children:n.message}),i.jsxs("div",{className:"mt-2 flex gap-2",children:[i.jsx("button",{onClick:()=>{h()},className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Dismiss"}),((j=n.error)==null?void 0:j.includes("connection"))&&i.jsxs("button",{onClick:()=>{r.connectionCode&&(h(),a(r.connectionCode))},className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 rounded text-sm flex items-center",children:[i.jsx(ca,{size:14,className:"mr-1"}),"Reconnect"]})]})]})]})})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:i.jsx("button",{onClick:C,className:"w-full py-2 bg-red-600 hover:bg-red-500 rounded-lg",children:"Disconnect"})})]})]})},P6e=({isOpen:t,onClose:e,onDataReceived:r})=>{const{playSound:n}=Ge(),s=B.useRef(null),a=l=>{s.current&&!s.current.contains(l.target)&&o()},o=()=>{n("buttonClick"),e()};return B.useEffect(()=>{const l=A=>{A.key==="Escape"&&t&&o()};return t&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",l),document.body.style.overflow=""}},[t]),t?i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:a,children:i.jsx("div",{ref:s,className:"max-w-md w-full",children:i.jsx(I6e,{onClose:o,onDataReceived:r})})}):null},D6e=({player:t,onDelete:e,isDeleting:r})=>{const{playSound:n}=Ge(),[s,a]=B.useState(!1),[o,l]=B.useState(!1),A=()=>{n("buttonClick"),a(!s)},u=()=>{if(n("buttonClick"),!o){l(!0);return}e(t.id),l(!1)},h=()=>{n("buttonClick"),l(!1)},c=d=>new Date(d).toLocaleDateString()+" "+new Date(d).toLocaleTimeString();return i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(et,{size:20,className:"mr-2 text-blue-400"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-lg",children:t.name}),i.jsxs("p",{className:"text-sm text-gray-400",children:["Created: ",c(t.dateCreated)]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ue,{text:"View player data in JSON format",children:i.jsxs("button",{onClick:A,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm flex items-center",children:[s?i.jsx(pn,{size:16}):i.jsx(Gc,{size:16}),i.jsx("span",{className:"ml-1",children:"JSON"})]})}),o?i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:u,disabled:r,className:"px-3 py-1 bg-red-500 hover:bg-red-400 rounded text-sm",children:"Confirm"}),i.jsx("button",{onClick:h,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Cancel"})]}):i.jsx(Ue,{text:"Delete this player (only available for players with no matches)",children:i.jsxs("button",{onClick:u,disabled:r,className:`px-3 py-1 bg-red-600 hover:bg-red-500 rounded text-sm flex items-center ${r?"opacity-50 cursor-not-allowed":""}`,children:[i.jsx(Sl,{size:16,className:"mr-1"}),r?"Deleting...":"Delete"]})})]})]}),i.jsx("div",{className:"text-sm text-gray-300 mb-2",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("span",{children:["Games: ",i.jsx("strong",{children:t.totalGames})]}),i.jsxs("span",{children:["ELO: ",i.jsx("strong",{children:t.elo})]}),i.jsxs("span",{children:["Device ID: ",i.jsx("strong",{children:t.deviceId||"N/A"})]}),i.jsxs("span",{children:["Level: ",i.jsx("strong",{children:t.level||1})]})]})}),o&&i.jsx("div",{className:"bg-red-900/30 border border-red-600 p-3 rounded-lg mt-3",children:i.jsxs("p",{className:"text-red-300 text-sm",children:[i.jsx("strong",{children:"Warning:"}),' This will permanently delete "',t.name,'" from your player database. This action cannot be undone.']})}),s&&i.jsx("div",{className:"mt-3 bg-gray-800 rounded-lg p-3",children:i.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto",children:JSON.stringify(t,null,2)})})]})},M6e=({isOpen:t,onClose:e,onPlayerDeleted:r})=>{const{playSound:n}=Ge(),s=B.useRef(null),[a,o]=B.useState([]),[l,A]=B.useState(!1),[u,h]=B.useState(null),[c,d]=B.useState(new Set);B.useEffect(()=>{t&&f()},[t]);const f=async()=>{try{A(!0),h(null);const m=await be.getPlayersWithNoGames();o(m)}catch(m){console.error("Error loading zero-game players:",m),h("Failed to load player data")}finally{A(!1)}},g=async m=>{try{d(x=>new Set([...x,m])),await be.deletePlayer(m)?(o(x=>x.filter(w=>w.id!==m)),r(),n("phaseChange")):h(`Failed to delete player "${m}". They may have recorded matches.`)}catch(p){console.error("Error deleting player:",p),h(`Error deleting player "${m}"`)}finally{d(p=>{const x=new Set(p);return x.delete(m),x})}},y=m=>{s.current&&!s.current.contains(m.target)&&v()},v=()=>{n("buttonClick"),e()};return B.useEffect(()=>{const m=p=>{p.key==="Escape"&&t&&v()};return t&&(document.addEventListener("keydown",m),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",m),document.body.style.overflow=""}},[t]),t?i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:y,children:i.jsxs("div",{ref:s,className:"max-w-4xl w-full max-h-[80vh] bg-gray-800 rounded-lg border border-gray-600 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold",children:"Edit Player Database"}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["Players with no recorded matches (",a.length," found)"]})]}),i.jsx("button",{onClick:v,className:"text-gray-400 hover:text-white p-2",children:i.jsx(jr,{size:24})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[l&&i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-400",children:"Loading players..."})}),u&&i.jsx("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300",children:u}),!l&&a.length===0&&!u&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(et,{size:48,className:"mx-auto mb-4 text-gray-500"}),i.jsx("p",{className:"text-gray-400",children:"No players with zero games found"}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"All players in your database have recorded match history."})]}),!l&&a.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-amber-900/30 border border-amber-600 p-3 rounded-lg mb-4",children:i.jsxs("p",{className:"text-amber-300 text-sm",children:[i.jsx("strong",{children:"Note:"})," Only players with no recorded matches can be deleted. This is a safety measure to prevent accidental data loss."]})}),a.map(m=>i.jsx(D6e,{player:m,onDelete:g,isDeleting:c.has(m.id)},m.id))]})]}),i.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-700",children:i.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"Close"})})]})}):null},R6e=({onBack:t,onNavigate:e})=>{const{playSound:r}=Ge(),{connectionState:n}=GN(),[s,a]=B.useState(!1),[o,l]=B.useState(!1),[A,u]=B.useState(null),[h,c]=B.useState(!1),[d,f]=B.useState(!1),[g,y]=B.useState(!1),[v,m]=B.useState("replace"),[p,x]=B.useState(!1),[w,_]=B.useState(!1),b=async()=>{const I=await be.hasMatchData();a(I)},S=async()=>{try{const I=await be.getPlayersWithNoGames();_(I.length>0)}catch(I){console.error("Error checking for zero-game players:",I),_(!1)}};B.useEffect(()=>{b(),S()},[]);const E=I=>{r("buttonClick"),e(I)},C=()=>{r("buttonClick"),t()},N=()=>{r("buttonClick"),f(!0)},Q=()=>{f(!1)},P=()=>{console.log("Data received, refreshing match data status"),b()},F=()=>{r("buttonClick"),x(!0)},$=()=>{x(!1)},L=()=>{S(),b()},D=async()=>{try{l(!0),r("buttonClick");const I=await be.exportData(),G=JSON.stringify(I,null,2),X=new Blob([G],{type:"application/json"}),te=URL.createObjectURL(X),Ae=document.createElement("a");Ae.href=te,Ae.download=`guards-of-atlantis-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(Ae),Ae.click(),setTimeout(()=>{document.body.removeChild(Ae),URL.revokeObjectURL(te),l(!1)},100)}catch(I){console.error("Error exporting data:",I),l(!1)}},z=()=>{if(!g){r("buttonClick"),y(!0);return}r("buttonClick");const I=document.createElement("input");I.type="file",I.accept=".json",I.onchange=async G=>{var te;const X=(te=G.target.files)==null?void 0:te[0];if(X)try{const Ae=await X.text(),ie=JSON.parse(Ae);if(!ie.players||!ie.matches||!ie.matchPlayers){u("Invalid data format");return}await be.importData(ie,v)?(r("phaseChange"),await b(),u(null),y(!1)):u("Failed to import data")}catch(Ae){console.error("Error importing data:",Ae),u("Error importing data")}},I.click()},k=()=>{r("buttonClick"),y(!1)},M=async()=>{if(!h){c(!0),r("buttonClick");return}try{r("buttonClick"),await be.clearAllData()&&(a(!1),c(!1))}catch(I){console.error("Error deleting data:",I)}},j={replace:"This will delete all your existing match history and player statistics and replace them with the imported data. Use this when setting up a new device or completely refreshing your data.",merge:"This will add new matches from the imported file while preserving your existing data. Any new match records will be added to your match records. Use this to synchronize data between devices."};return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("button",{onClick:C,className:"flex items-center text-gray-300 hover:text-white",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Setup"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Match Statistics"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-8",children:[i.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${s?"":"opacity-50 pointer-events-none"}`,onClick:()=>s&&E("player-stats"),children:[i.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[i.jsx(et,{size:24,className:"mr-3 text-blue-400"}),i.jsx("span",{children:"Player Stats"})]}),i.jsx("p",{className:"text-gray-300",children:"View detailed player performance statistics, favorite heroes, and ELO ratings."}),!s&&i.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[i.jsx(Dt,{size:16,className:"mr-1"}),i.jsx("span",{children:"No match data available"})]})]}),i.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${s?"":"opacity-50 pointer-events-none"}`,onClick:()=>s&&E("hero-stats"),children:[i.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[i.jsx(At,{size:24,className:"mr-3 text-purple-400"}),i.jsx("span",{children:"Hero Stats"})]}),i.jsx("p",{className:"text-gray-300",children:"Analyze hero win rates, synergies, and counters based on your match history."}),!s&&i.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[i.jsx(Dt,{size:16,className:"mr-1"}),i.jsx("span",{children:"No match data available"})]})]}),i.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${s?"":"opacity-50 pointer-events-none"}`,onClick:()=>s&&E("match-history"),children:[i.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[i.jsx(nD,{size:24,className:"mr-3 text-green-400"}),i.jsx("span",{children:"Match History"})]}),i.jsx("p",{className:"text-gray-300",children:"Browse past matches, view details, and manage your match history."}),!s&&i.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[i.jsx(Dt,{size:16,className:"mr-1"}),i.jsx("span",{children:"No match data available"})]})]}),i.jsxs("div",{className:"bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors",onClick:()=>E("record-match"),children:[i.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[i.jsx(qP,{size:24,className:"mr-3 text-orange-400"}),i.jsx("span",{children:"Record Match"})]}),i.jsx("p",{className:"text-gray-300",children:"Manually log match results for games played outside the application."})]}),i.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${s?"":"opacity-50 pointer-events-none"}`,onClick:()=>s&&E("match-maker"),children:[i.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[i.jsx(hy,{size:24,className:"mr-3 text-purple-400"}),i.jsx("span",{children:"Match Maker"})]}),i.jsx("p",{className:"text-gray-300",children:"Generate balanced teams based on player rankings or experience for fair matches."}),!s&&i.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[i.jsx(Dt,{size:16,className:"mr-1"}),i.jsx("span",{children:"No match data available"})]})]}),i.jsxs("div",{className:"bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors",onClick:()=>E("hero-info"),children:[i.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[i.jsx(vP,{size:24,className:"mr-3 text-teal-400"}),i.jsx("span",{children:"Hero Guide"})]}),i.jsx("p",{className:"text-gray-300",children:"Browse complete information about all heroes, including stats, roles, and abilities."})]})]}),i.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Data Management"}),i.jsx(Ue,{text:"Share, import, and export features allow you to transfer your match data between devices or merge game records from different devices.",position:"right",maxWidth:"max-w-md",children:i.jsx(Dt,{size:16,className:"ml-2 text-blue-400 cursor-help"})})]}),i.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 p-2 bg-blue-800 rounded-full flex-shrink-0",children:i.jsx(nf,{size:24,className:"text-blue-300"})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-semibold text-lg text-blue-300 mb-1",children:"Direct Data Sharing"}),i.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Share game data directly between devices with a simple connection code."}),i.jsx("button",{onClick:N,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg flex items-center",children:n.isConnected?i.jsxs(i.Fragment,{children:[i.jsx(qk,{size:16,className:"mr-2 text-green-300"}),i.jsx("span",{children:"Connected"})]}):i.jsxs(i.Fragment,{children:[i.jsx(nf,{size:16,className:"mr-2"}),i.jsx("span",{children:"Connect and Share"})]})})]})]})}),i.jsx("div",{className:"bg-green-900/30 border border-green-700 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"mr-3 p-2 bg-green-800 rounded-full flex-shrink-0",children:i.jsx(JP,{size:24,className:"text-green-300"})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h4",{className:"font-semibold text-lg text-green-300 mb-1",children:"Manual Data Sharing"}),i.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Manually import or export data files to share data between devices."}),g?i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg mb-4",children:[i.jsx("h4",{className:"font-semibold text-base mb-3",children:"Import Options"}),i.jsxs("div",{className:"mb-4 space-y-3",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("input",{type:"radio",id:"replaceMode",name:"importMode",checked:v==="replace",onChange:()=>m("replace"),className:"mt-1 mr-3"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{htmlFor:"replaceMode",className:"flex items-center font-medium cursor-pointer",children:["Replace all data",i.jsx(Ue,{text:j.replace,position:"right",maxWidth:"max-w-md",children:i.jsx(Dt,{size:16,className:"ml-2 text-blue-400 cursor-help"})})]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Delete all existing data and replace with imported data."})]})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx("input",{type:"radio",id:"mergeMode",name:"importMode",checked:v==="merge",onChange:()=>m("merge"),className:"mt-1 mr-3"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{htmlFor:"mergeMode",className:"flex items-center font-medium cursor-pointer",children:["Merge with existing data",i.jsx(Ue,{text:j.merge,position:"right",maxWidth:"max-w-md",children:i.jsx(Dt,{size:16,className:"ml-2 text-blue-400 cursor-help"})})]}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add new data while preserving existing records."})]})]})]}),i.jsx("div",{className:"bg-amber-900/30 border border-amber-600 p-3 rounded-lg mb-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(ea,{size:16,className:"mr-2 mt-0.5 flex-shrink-0 text-amber-400"}),i.jsx("div",{children:v==="replace"?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"font-semibold text-amber-400",children:"Warning: All existing data will be deleted!"}),i.jsx("p",{className:"mt-1 text-sm",children:"This action will permanently delete all your match history and player statistics and replace them with the imported data."})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"font-semibold text-amber-400",children:"Merge Information:"}),i.jsx("p",{className:"mt-1 text-sm",children:"Player stats will be combined (wins, losses, ELO), and new matches will be added to your history. Matches with the same ID will be skipped to avoid duplicates."})]})})]})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("button",{onClick:z,className:"px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg flex items-center",children:[i.jsx(of,{size:18,className:"mr-2"}),i.jsx("span",{children:"Proceed with Import"})]}),i.jsx("button",{onClick:k,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"Cancel"})]})]}):i.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.jsx(Ue,{text:"Export match statistics data to a file. Use this to backup your data or transfer it to another device.",children:i.jsxs("button",{onClick:D,disabled:!s||o,className:`px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg flex items-center ${!s||o?"opacity-50 cursor-not-allowed":""}`,children:[i.jsx(ef,{size:18,className:"mr-2"}),i.jsx("span",{children:o?"Exporting...":"Export Data"})]})}),i.jsx(Ue,{text:"Import match statistics data from a previously exported file.",children:i.jsxs("button",{onClick:z,className:"px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg flex items-center",children:[i.jsx(of,{size:18,className:"mr-2"}),i.jsx("span",{children:"Import Data"})]})}),w&&i.jsx(Ue,{text:"Manage players with no recorded matches. You can view their data and delete them if needed.",children:i.jsxs("button",{onClick:F,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 rounded-lg flex items-center",children:[i.jsx(XD,{size:18,className:"mr-2"}),i.jsx("span",{children:"Edit Player Data"})]})}),i.jsx(Ue,{text:"Delete all match statistics data permanently",children:i.jsxs("button",{onClick:M,disabled:!s,className:`px-4 py-2 ${h?"bg-red-500 hover:bg-red-400":"bg-red-700 hover:bg-red-600"} rounded-lg flex items-center ${s?"":"opacity-50 cursor-not-allowed"}`,children:[i.jsx(Sl,{size:18,className:"mr-2"}),i.jsx("span",{children:h?"Confirm Delete":"Delete All Data"})]})})]})]})]})}),A&&i.jsx("div",{className:"mt-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300",children:A}),i.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Dt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"mb-2",children:"Match data is stored locally on this device using your browser's storage. It is recommended you back up your data locally with Export Data (in case your browser's storage gets cleared)."}),i.jsx("p",{children:"Use direct data sharing, or manually import and export data to transfer match records between devices or merge records from different devices (e.g. with friends)."})]})]})})]}),i.jsx(P6e,{isOpen:d,onClose:Q,onDataReceived:P}),i.jsx(M6e,{isOpen:p,onClose:$,onPlayerDeleted:L})]})},$6e=({isOpen:t,onClose:e})=>{const[r,n]=B.useState("simple"),{playSound:s}=Ge();if(!t)return null;const a=()=>{s("buttonClick"),e()},o=l=>{s("buttonClick"),n(l)};return i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-4 bg-gray-700 flex justify-between items-center",children:[i.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[i.jsx(eo,{size:24,className:"mr-2 text-blue-400"}),"Understanding Skill Ratings"]}),i.jsx("button",{onClick:a,className:"p-1 bg-gray-600 hover:bg-gray-500 rounded-full","aria-label":"Close modal",children:i.jsx(jr,{size:20})})]}),i.jsxs("div",{className:"flex border-b border-gray-700",children:[i.jsx("button",{onClick:()=>o("simple"),className:`flex-1 px-4 py-3 font-medium transition-colors ${r==="simple"?"bg-gray-700 text-white border-b-2 border-blue-500":"bg-gray-800 text-gray-400 hover:text-white"}`,children:"Simple Explanation"}),i.jsx("button",{onClick:()=>o("technical"),className:`flex-1 px-4 py-3 font-medium transition-colors ${r==="technical"?"bg-gray-700 text-white border-b-2 border-blue-500":"bg-gray-800 text-gray-400 hover:text-white"}`,children:"Technical Details"})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r==="simple"?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"What is a Skill Rating?"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"Your skill rating is a number that represents how good you are at the game compared to other players. It goes up when you win and down when you lose, but there's more to it than that!"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Why Start Low?"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"New players start with a lower visible rating even if they win their first few games. This is because the system needs to be confident about your skill level. Think of it like this:"}),i.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg mb-4",children:[i.jsxs("p",{className:"text-sm mb-2",children:[i.jsx("strong",{className:"text-yellow-400",children:"After 1 game:"}),' "This player might be good, but it could be luck"']}),i.jsxs("p",{className:"text-sm mb-2",children:[i.jsx("strong",{className:"text-yellow-400",children:"After 10 games:"}),` "Now I'm getting a clearer picture"`]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{className:"text-yellow-400",children:"After 20+ games:"}),` "I'm confident about this player's skill level"`]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"How Rankings Work"}),i.jsxs("ul",{className:"space-y-3 text-gray-300",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-400 mr-2",children:""}),i.jsx("span",{children:"Beat stronger teams = bigger rating increase"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-400 mr-2",children:""}),i.jsx("span",{children:"Lose to weaker teams = bigger rating decrease"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-400 mr-2",children:""}),i.jsx("span",{children:"Play more games = more accurate rating"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-400 mr-2",children:""}),i.jsx("span",{children:"Consistent performance = higher rating"})]})]})]}),i.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-blue-300",children:[i.jsx("strong",{children:"Pro tip:"})," Don't worry if your rating seems low at first. Play more games and the system will quickly figure out your true skill level. It typically takes about 20 games for ratings to stabilize."]})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"TrueSkill Rating System"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"Guards of Atlantis uses the TrueSkill algorithm, a Bayesian skill rating system developed by Microsoft Research. Unlike traditional Elo systems, TrueSkill models both skill and uncertainty."})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Mathematical Model"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"Each player's skill is modeled as a normal distribution:"}),i.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4",children:[i.jsx("p",{className:"text-green-400 mb-2",children:"skill ~ N(, )"}),i.jsx("p",{className:"text-gray-400",children:"where:"}),i.jsx("p",{className:"text-gray-300 ml-4",children:" (mu) = mean skill estimate"}),i.jsx("p",{className:"text-gray-300 ml-4",children:" (sigma) = standard deviation (uncertainty)"})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Conservative Skill Estimate"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"The displayed rating uses the conservative skill estimate (ordinal):"}),i.jsx("div",{className:"bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4",children:i.jsx("p",{className:"text-green-400",children:"ordinal =  - 3"})}),i.jsx("p",{className:"text-gray-300 mb-4",children:"This represents the skill level we're 99.7% confident the player exceeds (3-sigma confidence interval). The display rating is then scaled to a familiar range:"}),i.jsx("div",{className:"bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4",children:i.jsx("p",{className:"text-green-400",children:"displayRating = (ordinal + 25)  40 + 200"})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Update Dynamics"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"After each match, the system updates beliefs using Bayes' theorem:"}),i.jsxs("ul",{className:"space-y-2 text-gray-300 ml-4",children:[i.jsx("li",{children:" Prior: Current skill distribution"}),i.jsx("li",{children:" Likelihood: Match outcome probability"}),i.jsx("li",{children:" Posterior: Updated skill distribution"})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Key Parameters"}),i.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg space-y-2",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{className:"text-yellow-400",children:" (beta) = 25/6:"})," Performance variance parameter"]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{className:"text-yellow-400",children:" (tau) = 25/300:"})," Dynamics factor (skill change rate)"]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("strong",{className:"text-yellow-400",children:"Initial values:"}),"  = 25,  = 25/3"]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Advantages over Elo"}),i.jsxs("ul",{className:"space-y-2 text-gray-300",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-400 mr-2",children:""}),i.jsx("span",{children:"Handles uncertainty explicitly (new vs experienced players)"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-400 mr-2",children:""}),i.jsx("span",{children:"Better team balance predictions"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-400 mr-2",children:""}),i.jsx("span",{children:"Faster convergence to true skill"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("span",{className:"text-green-400 mr-2",children:""}),i.jsx("span",{children:"Natural handling of returning players"})]})]})]}),i.jsx("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-gray-400",children:[i.jsx("strong",{children:"Reference:"})," Herbrich, R., Minka, T., & Graepel, T. (2007). TrueSkill: A Bayesian skill rating system. In Advances in Neural Information Processing Systems 19."]})})]})})]})})},O6e=({rank:t,skill:e})=>{let r,n;return t===1?(r=i.jsx(af,{size:18,className:"mr-2 text-yellow-300"}),n="text-yellow-300 font-bold"):t===2?(r=i.jsx(F_,{size:18,className:"mr-2 text-gray-300"}),n="text-gray-300 font-bold"):t===3?(r=i.jsx(F_,{size:18,className:"mr-2 text-amber-600"}),n="text-amber-600 font-bold"):(r=i.jsx(tf,{size:18,className:"mr-2 text-blue-400"}),n="text-blue-400 font-medium"),i.jsxs("div",{className:"flex items-center",children:[r,i.jsxs("span",{className:n,children:["#",t," ",i.jsxs("span",{className:"ml-1 text-sm text-gray-400",children:["(",e,")"]})]})]})},L6e=({onBack:t,onViewSkillOverTime:e,onViewPlayerDetails:r})=>{const{playSound:n}=Ge(),[s,a]=B.useState([]),[o,l]=B.useState(""),[A,u]=B.useState(!0),[h,c]=B.useState("skill"),[d,f]=B.useState("desc"),[g,y]=B.useState(!1),[v,m]=B.useState(!1),[p,x]=B.useState(!1),[w,_]=B.useState(()=>{const k=localStorage.getItem("playerStats_minGames");return k?parseInt(k,10):3}),[b,S]=B.useState(()=>{const k=localStorage.getItem("playerStats_recencyMonths");return k?parseInt(k,10):null}),[E,C]=B.useState(()=>localStorage.getItem("playerStats_recalculateTrueSkill")==="true"),N=B.useRef(null);B.useEffect(()=>{localStorage.setItem("playerStats_minGames",w.toString())},[w]),B.useEffect(()=>{b===null?localStorage.removeItem("playerStats_recencyMonths"):localStorage.setItem("playerStats_recencyMonths",b.toString())},[b]),B.useEffect(()=>{localStorage.setItem("playerStats_recalculateTrueSkill",E.toString())},[E]);const Q=B.useMemo(()=>{if(b===null)return{startDate:void 0,endDate:void 0};const k=new Date,M=new Date;return M.setMonth(M.getMonth()-b),{startDate:M,endDate:k}},[b]);B.useEffect(()=>{(async()=>{u(!0);try{let M;if(Q.startDate&&Q.endDate)M=(await be.getFilteredPlayerStats(Q.startDate,Q.endDate,E)).players.map(V=>({id:V.id,name:V.name,totalGames:V.gamesPlayed,wins:V.wins,losses:V.losses,mu:0,sigma:0,elo:0,lastPlayed:V.lastPlayed||new Date,dateCreated:new Date,favoriteHeroes:V.favoriteHeroes,favoriteRoles:V.favoriteRoles,winRate:V.winRate,kills:V.kills,deaths:V.deaths,assists:V.assists,kdRatio:V.kdRatio,averageGold:V.averageGold,averageMinionKills:V.averageMinionKills,hasCombatStats:V.hasCombatStats,displayRating:V.displayRating,rank:0}));else{const ie=await be.getAllPlayers(),V=await be.getCurrentTrueSkillRatings();M=await Promise.all(ie.map(async Y=>{const U=await be.getPlayerStats(Y.id),H=U.matchesPlayed,K=H.reduce((Me,ze)=>Me+(ze.kills||0),0),O=H.reduce((Me,ze)=>Me+(ze.deaths||0),0),oe=H.reduce((Me,ze)=>Me+(ze.assists||0),0),me=H.reduce((Me,ze)=>Me+(ze.goldEarned||0),0),se=H.reduce((Me,ze)=>Me+(ze.minionKills||0),0),re=O===0?K:K/O,Le=Y.totalGames>0?Y.wins/Y.totalGames*100:0,ve=K>0||O>0||oe>0||me>0,de=V[Y.id]||Hle(Y);return{...Y,favoriteHeroes:U.favoriteHeroes,favoriteRoles:U.favoriteRoles,winRate:Le,kills:K,deaths:O,assists:oe,kdRatio:parseFloat(re.toFixed(2)),averageGold:Y.totalGames>0?Math.round(me/Y.totalGames):0,averageMinionKills:Y.totalGames>0?Math.round(se/Y.totalGames):0,hasCombatStats:ve,displayRating:de,rank:0}}))}const I=[...M.filter(ie=>ie.totalGames>0)].sort((ie,V)=>V.displayRating-ie.displayRating);let G=1,X=I.length>0?I[0].displayRating:0,te=0;const Ae=I.map((ie,V)=>(ie.displayRating!==X?(G=V+1,X=ie.displayRating,te=0):te++,{...ie,rank:G}));a(Ae)}catch(M){console.error("Error loading player stats:",M)}finally{u(!1)}})()},[Q.startDate,Q.endDate,E]);const P=()=>{n("buttonClick"),t()},F=async()=>{if(N.current){n("buttonClick"),y(!0);try{N.current.classList.add("taking-screenshot");const k=document.createElement("div");k.className="screenshot-title text-center mb-6",k.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Player Rankings</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,N.current.insertBefore(k,N.current.firstChild);const M=document.createElement("div");M.className="screenshot-footer text-center mt-8 text-sm text-gray-400",M.innerHTML=`
        <p>Generated by Guards of Atlantis II Timer App on ${new Date().toLocaleString()}</p>
      `,N.current.appendChild(M);const j=N.current.querySelectorAll(".no-screenshot");j.forEach(te=>{te.style.display="none"});const G=(await Dg(N.current,{backgroundColor:"#1F2937",windowWidth:1400,scrollX:0,scrollY:0,scale:window.devicePixelRatio||1,logging:!1,allowTaint:!0,useCORS:!0,onclone:te=>{const Ae=te.querySelector("#screenshotContent");Ae&&(Ae.scrollTop=0)}})).toDataURL("image/png"),X=document.createElement("a");X.download=`guards-of-atlantis-player-stats-${new Date().toISOString().slice(0,10)}.png`,X.href=G,X.click(),N.current.removeChild(k),N.current.removeChild(M),N.current.classList.remove("taking-screenshot"),j.forEach(te=>{te.style.display=""})}catch(k){console.error("Error creating screenshot:",k)}finally{y(!1)}}},$=()=>{n("buttonClick"),m(!0)},D=[...s.filter(k=>k.name.toLowerCase().includes(o.toLowerCase()))].sort((k,M)=>{let j=0;switch(h){case"name":j=k.name.localeCompare(M.name);break;case"skill":j=k.displayRating-M.displayRating;break;case"games":j=k.totalGames-M.totalGames;break;case"winRate":j=k.winRate-M.winRate;break;case"kdRatio":j=k.kdRatio-M.kdRatio;break;default:j=0}return d==="asc"?j:-j}),z=k=>{n("buttonClick"),k===h?f(d==="asc"?"desc":"asc"):(c(k),f("desc"))};return B.useEffect(()=>{const k=document.createElement("style");return k.type="text/css",k.innerHTML=`
      .taking-screenshot {
        background-color: #1F2937 !important;
        padding: 2rem !important;
        width: 1400px !important;
        position: relative !important;
        overflow: visible !important;
      }
      
      .screenshot-title {
        color: white;
        margin-bottom: 2rem;
      }
      
      .screenshot-footer {
        color: #9CA3AF;
        margin-top: 2rem;
        border-top: 1px solid #4B5563;
        padding-top: 1rem;
      }
      
      .taking-screenshot .no-screenshot {
        display: none !important;
      }
      
      .taking-screenshot .grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 2rem !important;
      }
      
      .taking-screenshot .bg-gray-700 {
        padding: 1.5rem !important;
      }
      
      .taking-screenshot h3.text-xl.font-bold {
        white-space: normal !important;
        max-width: 100% !important;
        overflow: visible !important; 
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
      }
      
      .taking-screenshot .px-5.py-4.bg-gray-800 {
        padding: 1.25rem !important;
        display: flex !important;
        justify-content: space-between !important;
        flex-wrap: wrap !important;
      }
      
      .taking-screenshot .text-sm,
      .taking-screenshot .text-xs {
        overflow: visible !important;
        white-space: normal !important;
      }
      
      .taking-screenshot .flex-wrap {
        margin-bottom: 0.5rem !important;
      }
    `,document.head.appendChild(k),()=>{document.head.removeChild(k)}},[]),i.jsxs("div",{ref:N,id:"screenshotContent",className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[i.jsxs("button",{onClick:P,className:"flex items-center text-gray-300 hover:text-white",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Menu"})]}),i.jsx("h2",{className:"text-2xl font-bold text-center sm:text-left",children:"Player Statistics"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[i.jsx(Ue,{text:"View skill rating progression over time",position:"left",children:i.jsxs("button",{onClick:()=>{n("buttonClick"),e()},className:"flex items-center justify-center px-3 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg w-full sm:w-auto",children:[i.jsx(sa,{size:18,className:"mr-2"}),i.jsx("span",{className:"whitespace-nowrap",children:"View Over Time"})]})}),i.jsx(Ue,{text:"Take a screenshot of all player statistics",position:"left",children:i.jsxs("button",{onClick:F,className:"flex items-center justify-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg w-full sm:w-auto",disabled:g,children:[i.jsx(b0,{size:18,className:"mr-2"}),i.jsx("span",{className:"whitespace-nowrap",children:g?"Capturing...":"Share Stats"})]})})]})]}),i.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 no-screenshot",children:i.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[i.jsxs("div",{className:"relative flex-grow",children:[i.jsx("input",{type:"text",value:o,onChange:k=>l(k.target.value),placeholder:"Search players...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx(lo,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:()=>z("skill"),className:`px-3 py-1 rounded text-sm ${h==="skill"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Skill ",h==="skill"&&(d==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>z("games"),className:`px-3 py-1 rounded text-sm ${h==="games"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Games ",h==="games"&&(d==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>z("winRate"),className:`px-3 py-1 rounded text-sm ${h==="winRate"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Win% ",h==="winRate"&&(d==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>z("kdRatio"),className:`px-3 py-1 rounded text-sm ${h==="kdRatio"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["KD ",h==="kdRatio"&&(d==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>z("name"),className:`px-3 py-1 rounded text-sm ${h==="name"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Name ",h==="name"&&(d==="asc"?"":"")]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>{n("buttonClick"),x(!p)},className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[i.jsx(vu,{size:18,className:"mr-2"}),i.jsx("span",{children:"Filters"}),(w!==3||b!==null)&&i.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(w!==3?1:0)+(b!==null?1:0)}),p?i.jsx(ls,{size:16,className:"ml-2"}):i.jsx(pn,{size:16,className:"ml-2"})]}),p&&i.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-72",children:[i.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Time Period"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center cursor-pointer",children:[i.jsx("input",{type:"radio",name:"playerTimePeriod",checked:b===null,onChange:()=>S(null),className:"mr-2 accent-blue-500"}),i.jsx("span",{className:"text-sm",children:"All Time"})]}),i.jsxs("label",{className:"flex items-center cursor-pointer",children:[i.jsx("input",{type:"radio",name:"playerTimePeriod",checked:b!==null,onChange:()=>S(b||6),className:"mr-2 accent-blue-500"}),i.jsx("span",{className:"text-sm mr-2",children:"Last"}),i.jsx("input",{type:"number",min:"1",max:"24",value:b||6,onChange:k=>{const M=parseInt(k.target.value,10);!isNaN(M)&&M>=1&&M<=24&&S(M)},disabled:b===null,className:"w-16 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),i.jsx("span",{className:"text-sm ml-2",children:"months"})]})]})]}),b!==null&&i.jsx("div",{className:"mb-4 p-3 bg-gray-700/50 rounded-lg",children:i.jsxs("label",{className:"flex items-start cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:E,onChange:k=>C(k.target.checked),className:"mr-2 mt-0.5 accent-blue-500"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm",children:"Recalculate skill for period only"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When checked, skill ratings are calculated using only matches in the selected period. Otherwise, current cumulative ratings are shown."})]})]})}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Min games for relationships"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>_(k=>Math.max(1,k-1)),disabled:w<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:""}),i.jsx("div",{className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-center font-medium",children:w}),i.jsx("button",{onClick:()=>_(k=>Math.min(20,k+1)),disabled:w>=20,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:"+"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For BFF/Nemesis calculations in player details"})]}),i.jsx("button",{onClick:()=>{n("buttonClick"),_(3),S(null),C(!1),x(!1)},className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),o!==""&&i.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg screenshot-info",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Search Results:"}),i.jsxs("p",{className:"text-sm",children:['Showing players matching: "',o,'"']})]}),b!==null&&Q.startDate&&Q.endDate&&i.jsxs("div",{className:"mb-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center flex-wrap gap-2",children:[i.jsx(Nn,{size:18,className:"text-blue-400 flex-shrink-0"}),i.jsxs("span",{className:"text-sm text-blue-200",children:["Showing stats from"," ",i.jsx("span",{className:"font-medium",children:Q.startDate.toLocaleDateString()})," ","to"," ",i.jsx("span",{className:"font-medium",children:Q.endDate.toLocaleDateString()})," ","(",b," month",b!==1?"s":"",")"]}),E&&i.jsx("span",{className:"text-xs bg-purple-600/50 text-purple-200 px-2 py-0.5 rounded",children:"Skill recalculated for period"})]}),A?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):i.jsx("div",{children:D.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:D.map(k=>i.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md relative",children:[i.jsxs("div",{className:"px-5 py-4 bg-gray-800 flex justify-between items-center relative",children:[i.jsx("h3",{className:`text-xl font-bold truncate ${k.rank<=3?"ml-10":""}`,children:k.name}),i.jsx("div",{className:"flex items-center",children:i.jsx("div",{children:i.jsx(O6e,{rank:k.rank,skill:k.displayRating})})})]}),k.rank<=3&&i.jsx("div",{className:`absolute top-0 left-0 w-0 h-0 z-10
                        border-t-[50px] border-r-[50px] 
                        ${k.rank===1?"border-t-yellow-500 border-r-transparent":k.rank===2?"border-t-gray-400 border-r-transparent":"border-t-amber-600 border-r-transparent"}`,children:i.jsx("span",{className:"absolute top-[-45px] left-[5px] font-bold text-black",children:k.rank})}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("div",{className:"text-sm text-gray-400",children:"Win Rate"}),i.jsxs("div",{className:"font-medium",children:[k.winRate.toFixed(1),"%"]})]}),i.jsx("div",{className:"h-2 bg-red-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500",style:{width:`${k.winRate}%`}})}),i.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-400",children:[i.jsxs("span",{children:["Wins: ",k.wins]}),i.jsxs("span",{children:["Losses: ",k.losses]}),i.jsxs("span",{children:["Total: ",k.totalGames]})]})]}),k.hasCombatStats&&i.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[i.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center text-blue-400 text-sm mb-1",children:[i.jsx(Ir,{size:14,className:"mr-1"}),i.jsx("span",{children:"K/D/A"})]}),i.jsxs("div",{className:"font-medium text-center",children:[k.kills,"/",k.deaths,"/",k.assists]})]}),i.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center text-yellow-400 text-sm mb-1",children:[i.jsx(sa,{size:14,className:"mr-1"}),i.jsx("span",{children:"KD Ratio"})]}),i.jsx("div",{className:"font-medium text-center",children:k.kdRatio})]}),i.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center text-green-400 text-sm mb-1",children:[i.jsx(et,{size:14,className:"mr-1"}),i.jsx("span",{children:"Avg Gold"})]}),i.jsx("div",{className:"font-medium text-center",children:k.averageGold})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Favorite Heroes"}),k.favoriteHeroes.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:k.favoriteHeroes.map(M=>i.jsxs("div",{className:"bg-gray-800 px-3 py-1 rounded-full text-sm",children:[M.heroName," (",M.count,")"]},M.heroId))}):i.jsx("div",{className:"text-sm text-gray-500 italic",children:"No heroes played"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Favorite Roles"}),k.favoriteRoles.length>0?i.jsx("div",{className:"flex flex-wrap gap-2",children:k.favoriteRoles.map(M=>i.jsxs("div",{className:"bg-gray-800 px-3 py-1 rounded-full text-sm",children:[M.role," (",M.count,")"]},M.role))}):i.jsx("div",{className:"text-sm text-gray-500 italic",children:"No roles data"})]}),i.jsxs("button",{onClick:()=>{n("buttonClick"),r(k.id)},className:`w-full mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 
                                   rounded-lg flex items-center justify-center transition-colors`,children:[i.jsx(ii,{size:18,className:"mr-2"}),i.jsx("span",{children:"View Details"})]})]})]},k.id))}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx(et,{size:48,className:"text-gray-500 mb-4"}),i.jsx("p",{className:"text-xl text-gray-400",children:o?"No players found matching your search":"No player data available"}),o&&i.jsx("button",{onClick:()=>l(""),className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg no-screenshot",children:"Clear Search"})]})}),i.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:[i.jsxs("h4",{className:"font-medium mb-2 flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center",children:[i.jsx(Dt,{size:16,className:"mr-2 text-blue-400"}),"About Player Rankings"]}),i.jsxs("button",{onClick:$,className:"text-blue-400 hover:text-blue-300 flex items-center no-screenshot",children:[i.jsx(eo,{size:16,className:"mr-1"}),i.jsx("span",{children:"Learn More"})]})]}),i.jsx("p",{children:"Players are ranked based on their skill rating, which reflects their performance against other players using the TrueSkill rating system. It takes roughly 20 matches for ratings to stabilise. Rankings are calculated based on match wins and losses, with players winning more points if their team beat higher ranked teams, and losing more points if they lose to lower ranked teams."})]}),i.jsx($6e,{isOpen:v,onClose:()=>m(!1)})]})},H6e=({kills:t,deaths:e,assists:r,kdRatio:n,averageKills:s,averageDeaths:a,averageAssists:o,gamesWithCombatData:l,gamesWithGoldData:A,gamesWithMinionData:u,averageGold:h,averageMinionKills:c,averageLevel:d,totalGames:f,hasCombatStats:g})=>g?i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[i.jsx(Ir,{size:20,className:"mr-2 text-blue-400"}),"Detailed Combat Statistics"]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Total K/D/A"}),i.jsx(Ir,{size:16,className:"text-red-400"})]}),i.jsxs("div",{className:"text-lg font-bold text-white",children:[t,"/",e,"/",r]}),i.jsxs("div",{className:"text-xs text-gray-500",children:[f," games played"]})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"K/D Ratio"}),i.jsx(sf,{size:16,className:"text-yellow-400"})]}),i.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:n.toFixed(2)}),i.jsx("div",{className:"text-xs text-gray-500",children:e===0?"Perfect":"kill/death ratio"})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Avg Level"}),i.jsx(sa,{size:16,className:"text-purple-400"})]}),i.jsx("div",{className:"text-2xl font-bold text-purple-400",children:d.toFixed(1)}),i.jsx("div",{className:"text-xs text-gray-500",children:"end of game"})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Avg Gold"}),i.jsx(ts,{size:16,className:"text-yellow-400"})]}),i.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:h.toLocaleString()}),i.jsx("div",{className:"text-xs text-gray-500",children:"per game"})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Avg Minions"}),i.jsx(et,{size:16,className:"text-green-400"})]}),i.jsx("div",{className:"text-2xl font-bold text-green-400",children:c.toFixed(1)}),i.jsx("div",{className:"text-xs text-gray-500",children:"per game"})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Kill Participation"}),i.jsx(sf,{size:16,className:"text-blue-400"})]}),i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(s+o).toFixed(1)}),i.jsxs("div",{className:"text-xs text-gray-500",children:["(K+A) per game (",l," games)"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Combat Performance"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Kills per Game"}),i.jsxs("span",{className:"font-medium",children:[s.toFixed(1)," (",l," games)"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Deaths per Game"}),i.jsxs("span",{className:"font-medium",children:[a.toFixed(1)," (",l," games)"]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Assists per Game"}),i.jsxs("span",{className:"font-medium",children:[o.toFixed(1)," (",l," games)"]})]})]})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Economic Performance"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Total Gold Earned"}),i.jsx("span",{className:"font-medium",children:A>0?(h*A).toLocaleString():"N/A"})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Farming Efficiency"}),i.jsx("span",{className:"font-medium",children:u>0?`${c.toFixed(1)} minions/game (${u} games)`:"N/A"})]})]})]})]})]}):i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[i.jsx(Ir,{size:20,className:"mr-2 text-blue-400"}),"Detailed Combat Statistics"]}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ir,{size:48,className:"mx-auto text-gray-500 mb-4"}),i.jsx("p",{className:"text-gray-400 mb-2",children:"No Combat Data Available"}),i.jsx("p",{className:"text-sm text-gray-500",children:"This player hasn't recorded any matches with detailed combat statistics yet."})]})]});function Xo(t,e=.4){const r=t.length;if(r===0)return[];if(r===1)return[...t];const n=[],s=Math.max(Math.floor(r*e),2);for(let a=0;a<r;a++){let o=0,l=0;for(let A=0;A<r;A++){const u=Math.abs(a-A)/s;if(u<1){const h=Math.pow(1-Math.pow(u,3),3);o+=h,l+=h*t[A]}}n.push(o>0?l/o:t[a])}return n}function OA(t,e){if(t.length===0)return 0;if(t.length===1)return t[0];const r=e/100*(t.length-1),n=Math.floor(r),s=Math.ceil(r),a=r-n;return n===s?t[n]:t[n]*(1-a)+t[s]*a}const K6e=(t,e)=>{if(e.length===0)return{category:"Average",color:"text-blue-400",description:"similar to",percentile:50};const r=[...e].sort((a,o)=>a-o),n=r.findIndex(a=>a>=t),s=n===-1?100:Math.round(n/r.length*100);return s>=95?{category:"Top 5%",color:"text-green-500",description:"in top 5% of",percentile:s}:s>=80?{category:"Top 20%",color:"text-green-400",description:"in top 20% of",percentile:s}:s>=60?{category:"Above Average",color:"text-blue-400",description:"above average of",percentile:s}:s>=40?{category:"Average",color:"text-gray-400",description:"average among",percentile:s}:s>=20?{category:"Below Average",color:"text-orange-400",description:"below average of",percentile:s}:{category:"Bottom 20%",color:"text-red-400",description:"in bottom 20% of",percentile:s}},z6e=t=>t>150?{category:"Rapidly Improving",color:"text-green-500"}:t>40?{category:"Improving",color:"text-green-400"}:t>-40?{category:"Stable",color:"text-blue-400"}:t>-150?{category:"Declining",color:"text-orange-400"}:{category:"Rapidly Declining",color:"text-red-400"},G6e=t=>t<10?{level:"Very Low",description:"Extremely consistent performance"}:t<20?{level:"Low",description:"Predictable results"}:t<35?{level:"Medium",description:"Typical variation"}:t<60?{level:"High",description:"Noticeable swings"}:{level:"Very High",description:"Highly unpredictable"},W6e=({playerId:t,playerName:e})=>{const[r,n]=B.useState(!0),[s,a]=B.useState([]),[o,l]=B.useState([]),[A,u]=B.useState(!1);B.useEffect(()=>{const f=()=>u(window.innerWidth<768);return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),B.useEffect(()=>{(async()=>{try{n(!0);const[g,y]=await Promise.all([be.getHistoricalRatings(),be.getCurrentTrueSkillRatings()]);l(Object.values(y));const v=[];for(const D of g)if(D.participants.includes(t)&&D.matchNumber>0){const z=Object.values(D.ratings).sort((k,M)=>k-M);v.push({matchNumber:D.matchNumber,date:D.date,playerRating:D.ratings[t],allRatings:z})}if(v.length===0){a([]),n(!1);return}const m=v[0].date,p=v[0].allRatings.map(()=>1200);v.unshift({matchNumber:0,date:m,playerRating:1200,allRatings:p});const x=v.map(D=>OA(D.allRatings,10)),w=v.map(D=>OA(D.allRatings,25)),_=v.map(D=>OA(D.allRatings,50)),b=v.map(D=>OA(D.allRatings,75)),S=v.map(D=>OA(D.allRatings,90)),E=v.map(D=>D.allRatings.reduce((z,k)=>z+k,0)/D.allRatings.length),C=Xo(x),N=Xo(w),Q=Xo(_),P=Xo(b),F=Xo(S),$=Xo(E),L=v.map((D,z)=>({matchNumber:D.matchNumber,date:D.date,playerRating:D.playerRating,p10:Math.round(C[z]),p25:Math.round(N[z]),p50:Math.round(Q[z]),p75:Math.round(P[z]),p90:Math.round(F[z]),mean:Math.round($[z])}));a(L)}catch(g){console.error("Error loading skill progression:",g)}finally{n(!1)}})()},[t]);const h=B.useMemo(()=>{var P,F;if(s.length===0)return null;const f=1200,g=((P=s[s.length-1])==null?void 0:P.playerRating)||0,y=((F=s[s.length-1])==null?void 0:F.p50)||0,v=g-f,m=y-f,p=v-m,x=g-y,w=x>0,_=s.slice(1).map(($,L)=>$.playerRating-s[L].playerRating),b=_.length>0?_.reduce(($,L)=>$+L,0)/_.length:0,S=_.length>0?Math.sqrt(_.reduce(($,L)=>$+Math.pow(L-b,2),0)/_.length):0;let E=0;if(s.length>=2){const $=s.slice(-Math.min(5,s.length));if($.length>=2){const L=$[0];E=($[$.length-1].playerRating-L.playerRating)/($.length-1)}}const C=K6e(g,o),N=z6e(E),Q=G6e(Math.round(S));return{startRating:f,endRating:g,playerChange:v,groupChange:m,relativeToGroup:p,isAboveAverage:w,currentDifference:Math.abs(x),volatility:Math.round(S),totalMatches:s.length-1,trend:v>=0?"up":"down",positionCategory:C,trendCategory:N,volatilityInfo:Q,recentSlope:E,lastMedian:y}},[s,o]),c=B.useMemo(()=>{if(s.length===0)return[1e3,1400];const f=s.flatMap(v=>[v.playerRating,v.p10,v.p90,1200]),g=Math.min(...f),y=Math.max(...f);return[Math.floor(g/50)*50-50,Math.ceil(y/50)*50+50]},[s]),d=B.useMemo(()=>{if(s.length===0)return[0,10];const f=s.map(g=>g.matchNumber);return[Math.min(...f)-.5,Math.max(...f)+.5]},[s]);return r?i.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),i.jsx("div",{className:"h-64 bg-gray-600 rounded"})]})}):s.length===0?i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[i.jsx(sa,{size:20,className:"mr-2 text-blue-400"}),"Skill Progression Over Time"]}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx(sa,{size:48,className:"mx-auto text-gray-500 mb-4"}),i.jsx("p",{className:"text-gray-400 mb-2",children:"No Progression Data Available"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Not enough match history to show skill progression."})]})]}):i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[i.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[i.jsx(sa,{size:20,className:"mr-2 text-blue-400"}),"Skill Progression vs Group"]}),h&&i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:`text-lg font-semibold flex items-center ${h.trend==="up"?"text-green-400":"text-red-400"}`,children:[h.trend==="up"?i.jsx(Zh,{size:16,className:"mr-1"}):i.jsx(Yh,{size:16,className:"mr-1"}),h.playerChange>=0?"+":"",h.playerChange]}),i.jsx("div",{className:"text-sm text-gray-400",children:"Total change"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:`text-lg font-semibold flex items-center ${h.isAboveAverage?"text-green-400":"text-orange-400"}`,children:[h.isAboveAverage?i.jsx(Zh,{size:16,className:"mr-1"}):i.jsx(Yh,{size:16,className:"mr-1"}),h.currentDifference]}),i.jsx("div",{className:"text-sm text-gray-400",children:"vs median"})]})]})]}),i.jsx("div",{style:{width:"100%",height:A?400:550},children:i.jsxs(Sg,{width:A?400:1e3,height:A?380:530,domain:{x:d,y:c},padding:{top:30,bottom:60,left:70,right:30},children:[i.jsx(ti,{label:"Match Number",tickValues:s.map(f=>f.matchNumber),tickFormat:f=>Math.round(f),style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:A?12:16,padding:40},tickLabels:{fill:"#9CA3AF",fontSize:A?10:14},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),i.jsx(ti,{dependentAxis:!0,label:"Skill Rating",style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:A?12:16,padding:50},tickLabels:{fill:"#9CA3AF",fontSize:A?10:14},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),i.jsx(Fd,{data:s,x:"matchNumber",y:"p25",y0:"p10",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.15,stroke:"none"}}}),i.jsx(Fd,{data:s,x:"matchNumber",y:"p50",y0:"p25",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.25,stroke:"none"}}}),i.jsx(Fd,{data:s,x:"matchNumber",y:"p75",y0:"p50",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.25,stroke:"none"}}}),i.jsx(Fd,{data:s,x:"matchNumber",y:"p90",y0:"p75",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.15,stroke:"none"}}}),i.jsx(ec,{data:[{x:d[0],y:1200},{x:d[1],y:1200}],style:{data:{stroke:"#6B7280",strokeWidth:2,strokeDasharray:"10 5"}}}),i.jsx(ec,{data:s,x:"matchNumber",y:"mean",interpolation:"monotoneX",style:{data:{stroke:"#EF4444",strokeWidth:2.5,strokeDasharray:"8 4"}}}),i.jsx(ec,{data:s,x:"matchNumber",y:"p50",interpolation:"monotoneX",style:{data:{stroke:"#EF4444",strokeWidth:2.5}}}),i.jsx(ec,{data:s,x:"matchNumber",y:"playerRating",interpolation:"linear",style:{data:{stroke:"#3B82F6",strokeWidth:4}}}),i.jsx(ib,{data:s,x:"matchNumber",y:"playerRating",size:7,style:{data:{fill:"#3B82F6"}}})]})}),i.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 justify-center p-3 bg-gray-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),i.jsx("span",{className:"text-sm text-gray-300",children:e})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-6 h-0.5 bg-red-500"}),i.jsx("span",{className:"text-sm text-gray-300",children:"Group Median"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{width:"24",height:"8",className:"flex-shrink-0",children:i.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"6 3"})}),i.jsx("span",{className:"text-sm text-gray-300",children:"Group Mean"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-5 h-3 rounded",style:{backgroundColor:"rgba(239,68,68,0.25)"}}),i.jsx("span",{className:"text-sm text-gray-300",children:"25th-75th %ile"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-5 h-3 rounded",style:{backgroundColor:"rgba(239,68,68,0.15)"}}),i.jsx("span",{className:"text-sm text-gray-300",children:"10th-90th %ile"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{width:"24",height:"8",className:"flex-shrink-0",children:i.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#6B7280",strokeWidth:"1.5",strokeDasharray:"8 4"})}),i.jsx("span",{className:"text-sm text-gray-300",children:"Starting (1200)"})]})]}),h&&i.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2 text-gray-300",children:"Performance vs Group"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Ue,{text:`Shows where you rank compared to all players.

${h.positionCategory.category}: You are ${h.positionCategory.description} all players.

Your rating: ${h.endRating} points
Percentile rank: ${h.positionCategory.percentile}th percentile`,position:"right",maxWidth:"max-w-sm",children:i.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Position"})}),i.jsx("span",{className:`font-medium ${h.positionCategory.color}`,children:h.positionCategory.category})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Ue,{text:`Gap between your rating and group median.

${Math.abs(h.currentDifference)} points ${h.isAboveAverage?"above":"below"} median.

Larger gaps = more distinctive skill level.`,position:"right",maxWidth:"max-w-sm",children:i.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Difference"})}),i.jsxs("span",{className:"font-medium",children:[h.currentDifference," pts"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Ue,{text:`Your improvement vs everyone else's.

You: ${h.playerChange>=0?"+":""}${h.playerChange} points since start
Group: ${h.groupChange>=0?"+":""}${h.groupChange} points median change

Positive = improved faster than median
Negative = improved slower than median`,position:"right",maxWidth:"max-w-sm",children:i.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Relative Gain"})}),i.jsxs("span",{className:`font-medium ${h.relativeToGroup>=0?"text-green-400":"text-red-400"}`,children:[h.relativeToGroup>=0?"+":"",h.relativeToGroup]})]})]})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2 text-gray-300",children:"Rating Journey"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Starting Rating"}),i.jsx("span",{className:"font-medium",children:h.startRating})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Current Rating"}),i.jsx("span",{className:"font-medium",children:h.endRating})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Matches Played"}),i.jsx("span",{className:"font-medium",children:h.totalMatches})]})]})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-semibold mb-2 text-gray-300",children:"Consistency"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Ue,{text:`How much your rating varies between games.

${h.volatilityInfo.level} volatility (${h.volatility} points)

${h.volatilityInfo.description} - consistent players are easier to balance teams with.`,position:"left",maxWidth:"max-w-sm",children:i.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Volatility"})}),i.jsx("span",{className:"font-medium",children:h.volatilityInfo.level})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Ue,{text:`Recent performance trajectory (last 5 games).

${h.trendCategory.category}: ${h.recentSlope>=0?"+":""}${h.recentSlope.toFixed(1)} pts/game

Recent trends show current form better than overall stats.`,position:"left",maxWidth:"max-w-sm",children:i.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Trend"})}),i.jsx("span",{className:`font-medium ${h.trendCategory.color}`,children:h.trendCategory.category})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Ue,{text:`How predictable your performance is.

Based on your volatility (${h.volatility} pts).

High stability = consistent results
Low stability = unpredictable swings`,position:"left",maxWidth:"max-w-sm",children:i.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Stability"})}),i.jsx("span",{className:"font-medium",children:h.volatility<10?"Very High":h.volatility<20?"High":h.volatility<35?"Medium":h.volatility<60?"Low":"Very Low"})]})]})]})]}),i.jsx("div",{className:"mt-6 p-4 bg-gray-800/50 rounded-lg",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Dt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm text-gray-300",children:[i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Your Rating (Blue Line):"})," Shows your skill rating at each match you played."]}),i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Group Median (Solid Red):"})," The smoothed median (50th percentile) of all player ratings."]}),i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Group Mean (Dashed Red):"})," The smoothed average rating of all players."]}),i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Shaded Bands:"})," Show the distribution of player ratings. Darker = 25th-75th percentile (middle 50%). Lighter = 10th-90th percentile."]}),i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Starting Line (Dashed Grey at 1200):"})," The default skill rating all players begin with."]}),i.jsx("p",{children:"Being above the median means you're better than half the group. The higher in the shaded region, the better your relative performance."})]})]})})]})},V6e=({playerId:t})=>{const[e,r]=B.useState(!0),[n,s]=B.useState(null),a=(()=>{const A=localStorage.getItem("playerStats_minGames");return A?parseInt(A,10):3})(),o=(()=>{const A=localStorage.getItem("playerStats_recencyMonths");return A?parseInt(A,10):null})(),l=B.useMemo(()=>{if(o===null)return{startDate:null,endDate:null};const A=new Date,u=new Date;return u.setMonth(u.getMonth()-o),{startDate:u,endDate:A}},[o]);return B.useEffect(()=>{(async()=>{try{r(!0);const[u,h]=await Promise.all([be.getPlayerStats(t),be.getAllMatches()]);let c=h;l.startDate&&l.endDate&&(c=h.filter(S=>{const E=new Date(S.date);return E>=l.startDate&&E<=l.endDate}));const d=new Set(c.map(S=>S.id)),f=u.matchesPlayed.filter(S=>d.has(S.matchId)),g=new Map;for(const S of f)if(!g.has(S.matchId)){const E=await be.getMatchPlayers(S.matchId);g.set(S.matchId,E)}const y=new Map,v=new Map;for(const[S,E]of g){const C=E.find(P=>P.playerId===t);if(!C)continue;const N=c.find(P=>P.id===S);if(!N)continue;const Q=C.team===N.winningTeam;E.forEach(P=>{if(P.playerId!==t)if(P.team===C.team){y.has(P.playerId)||y.set(P.playerId,{wins:0,total:0,name:P.playerId});const F=y.get(P.playerId);F.total++,Q&&F.wins++}else{v.has(P.playerId)||v.set(P.playerId,{wins:0,total:0,name:P.playerId});const F=v.get(P.playerId);F.total++,Q&&F.wins++}})}const m=Array.from(y.entries()).map(([S,E])=>({playerId:S,playerName:E.name,gamesPlayed:E.total,winRate:E.wins/E.total*100,isSignificant:E.total>=a})).filter(S=>S.isSignificant).sort((S,E)=>E.winRate-S.winRate),p=Array.from(v.entries()).map(([S,E])=>({playerId:S,playerName:E.name,gamesPlayed:E.total,winRate:E.wins/E.total*100,isSignificant:E.total>=a})).filter(S=>S.isSignificant).sort((S,E)=>S.winRate-E.winRate),x=S=>{if(S.length===0)return[];const E=S[0].winRate;return S.filter(C=>C.winRate===E)},w=S=>{if(S.length===0)return[];const E=S[0].winRate;return S.filter(C=>C.winRate===E)},_=x(m),b=w(p);s({bestTeammates:_,nemeses:b})}catch(u){console.error("Error calculating relationship stats:",u)}finally{r(!1)}})()},[t,l.startDate,l.endDate]),e?i.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("div",{className:"h-32 bg-gray-600 rounded"}),i.jsx("div",{className:"h-32 bg-gray-600 rounded"})]})]})}):!n||n.bestTeammates.length===0&&n.nemeses.length===0?i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[i.jsx(et,{size:20,className:"mr-2 text-blue-400"}),"Player Relationships"]}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx(et,{size:48,className:"mx-auto text-gray-500 mb-4"}),i.jsx("p",{className:"text-gray-400 mb-2",children:"Not Enough Data"}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Need at least ",a," game",a!==1?"s":""," with the same players to calculate meaningful relationships."]})]})]}):i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[i.jsx(et,{size:20,className:"mr-2 text-blue-400"}),"Player Relationships"]}),o!==null&&l.startDate&&l.endDate&&i.jsxs("div",{className:"mb-4 p-2 bg-blue-900/30 border border-blue-700/50 rounded text-sm flex items-center",children:[i.jsx(Nn,{size:14,className:"mr-2 text-blue-400"}),i.jsxs("span",{className:"text-blue-200",children:["Showing relationships from last ",o," month",o!==1?"s":""]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Vx,{size:20,className:"mr-2 text-green-400"}),i.jsx("h4",{className:"font-semibold text-green-400",children:"Best Teammate (BFF)"})]})}),n.bestTeammates.length>0?i.jsx("div",{children:n.bestTeammates.map((A,u)=>i.jsxs("div",{className:u>0?"mt-3 pt-3 border-t border-gray-600":"",children:[i.jsxs("div",{className:"text-lg font-bold text-white mb-1",children:[A.playerName,n.bestTeammates.length>1&&i.jsx("span",{className:"text-sm text-gray-400 ml-2",children:"(tied)"})]}),i.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-2",children:[A.winRate.toFixed(1),"% Win Rate"]}),i.jsxs("div",{className:"text-sm text-gray-400",children:[A.gamesPlayed," games together"]}),i.jsx("div",{className:"mt-3 h-2 bg-gray-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500",style:{width:`${A.winRate}%`}})})]},A.playerId))}):i.jsx("div",{className:"text-center py-4",children:i.jsx("p",{className:"text-gray-400",children:"No significant teammate relationships yet"})})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(u7,{size:20,className:"mr-2 text-red-400"}),i.jsx("h4",{className:"font-semibold text-red-400",children:"Nemesis"})]})}),n.nemeses.length>0?i.jsx("div",{children:n.nemeses.map((A,u)=>i.jsxs("div",{className:u>0?"mt-3 pt-3 border-t border-gray-600":"",children:[i.jsxs("div",{className:"text-lg font-bold text-white mb-1",children:[A.playerName,n.nemeses.length>1&&i.jsx("span",{className:"text-sm text-gray-400 ml-2",children:"(tied)"})]}),i.jsxs("div",{className:"text-2xl font-bold text-red-400 mb-2",children:[A.winRate.toFixed(1),"% Win Rate"]}),i.jsxs("div",{className:"text-sm text-gray-400",children:[A.gamesPlayed," games against"]}),i.jsx("div",{className:"mt-3 h-2 bg-gray-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-red-500",style:{width:`${A.winRate}%`}})})]},A.playerId))}):i.jsx("div",{className:"text-center py-4",children:i.jsx("p",{className:"text-gray-400",children:"No significant opponent relationships yet"})})]})]}),i.jsx("div",{className:"mt-6 p-4 bg-gray-800/50 rounded-lg",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Dt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm text-gray-300",children:[i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Best Teammate (BFF):"})," The player you have the highest win rate with (minimum ",a," game",a!==1?"s":"",")."]}),i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Nemesis:"})," The opponent you struggle against most (lowest win rate, minimum ",a," game",a!==1?"s":"",")."]}),i.jsxs("p",{children:["These statistics help identify which players complement your playstyle best and which opponents present the greatest challenge. Relationships require at least ",a," game",a!==1?"s":""," for statistical significance."]})]})]})})]})},q6e={guardian:{name:"Guardian",description:"Tanky defenders who protect allies and control space on the battlefield",shortDescription:"Protects allies from damage and controls battlefield positioning"},durable:{name:"Durable",description:"Tough heroes with high survivability and defensive capabilities",shortDescription:"Survives extended fights and outlasts enemies with defensive abilities"},slayer:{name:"Slayer",description:"High damage dealers who excel at eliminating enemy heroes",shortDescription:"Eliminates enemy heroes quickly with high damage output and burst"},tactician:{name:"Tactician",description:"Strategic heroes with strong positioning and battlefield control",shortDescription:"Controls battles through strategic positioning and tactical battlefield awareness"},support:{name:"Support",description:"Team utility specialists who heal, buff allies, and provide assistance",shortDescription:"Heals allies and provides team utility through buffs and assistance"},sorcerer:{name:"Sorcerer",description:"Magic damage dealers with powerful spells and area control",shortDescription:"Casts powerful magic spells for damage and area battlefield control"},disabler:{name:"Disabler",description:"Heroes who control enemies through stuns, roots, and debuffs",shortDescription:"Disrupts enemies with stuns, roots, and debuffs to control fights"},pusher:{name:"Pusher",description:"Heroes who excel at destroying structures and advancing lanes",shortDescription:"Destroys enemy structures and advances lanes to gain map control"},farming:{name:"Farming",description:"Heroes who efficiently gather resources and scale into late game",shortDescription:"Gathers resources efficiently to become powerful in late game scenarios"}},hU=t=>{const e=t.toLowerCase(),r=q6e[e];return r?`${r.name}: ${r.shortDescription}`:t.charAt(0).toUpperCase()+t.slice(1)},X6e=({favoriteHeroes:t,allHeroesPlayed:e,favoriteRoles:r,allRolesPlayed:n,totalGames:s,matches:a})=>{const[o,l]=B.useState([]),[A,u]=B.useState(!0);B.useEffect(()=>{const d=async()=>{try{u(!0);const f=[];for(const g of t){const y=a.filter(x=>x.heroId===g.heroId||x.heroName===g.heroName);let v=0,m=0;for(const x of y)try{const w=await be.getMatch(x.matchId);w&&(m++,x.team===w.winningTeam&&v++)}catch(w){console.warn(`Failed to load match ${x.matchId}:`,w)}const p=m>0?v/m*100:0;f.push({heroName:g.heroName,gamesPlayed:g.count,winRate:p,percentage:s>0?g.count/s*100:0})}l(f)}catch(f){console.error("Error calculating hero win rates:",f);const g=t.map(y=>({heroName:y.heroName,gamesPlayed:y.count,winRate:0,percentage:s>0?y.count/s*100:0}));l(g)}finally{u(!1)}};t.length>0?d():(l([]),u(!1))},[t,a,s]);const h=d=>{switch(d.toLowerCase()){case"guardian":case"durable":return i.jsx(At,{size:16,className:"text-blue-400"});case"slayer":case"tactician":return i.jsx(Ir,{size:16,className:"text-red-400"});case"support":return i.jsx(et,{size:16,className:"text-green-400"});case"sorcerer":return i.jsx(to,{size:16,className:"text-purple-400"});default:return i.jsx(tf,{size:16,className:"text-gray-400"})}},c=d=>{switch(d.toLowerCase()){case"guardian":case"durable":return"text-blue-400";case"slayer":case"tactician":return"text-red-400";case"support":return"text-green-400";case"sorcerer":return"text-purple-400";default:return"text-gray-400"}};return A?i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[i.jsx(At,{size:20,className:"mr-2 text-blue-400"}),"Hero Performance Analytics"]}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:"Calculating hero win rates..."})]})]}):t.length===0||o.length===0?i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[i.jsx(At,{size:20,className:"mr-2 text-blue-400"}),"Hero Performance Analytics"]}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx(At,{size:48,className:"mx-auto text-gray-500 mb-4"}),i.jsx("p",{className:"text-gray-400 mb-2",children:"No Hero Data Available"}),i.jsx("p",{className:"text-sm text-gray-500",children:"This player hasn't recorded any matches with hero selection yet."})]})]}):i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[i.jsx(At,{size:20,className:"mr-2 text-blue-400"}),"Hero Performance Analytics"]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Most Played Heroes"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:o.slice(0,6).map(d=>i.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-white truncate",children:d.heroName}),i.jsxs("div",{className:"text-xs text-gray-400",children:[d.gamesPlayed," games"]})]}),i.jsxs("div",{className:"text-right ml-2",children:[i.jsxs("div",{className:"text-sm font-semibold text-green-400",children:[d.winRate.toFixed(0),"%"]}),i.jsx("div",{className:"text-xs text-gray-500",children:"win rate"})]})]}),i.jsxs("div",{className:"mb-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[i.jsx("span",{children:"Usage"}),i.jsxs("span",{children:[d.percentage.toFixed(1),"%"]})]}),i.jsx("div",{className:"h-2 bg-gray-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500",style:{width:`${d.percentage}%`}})})]}),i.jsx("div",{children:i.jsx("div",{className:"h-2 bg-gray-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500",style:{width:`${d.winRate}%`}})})})]},d.heroName))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Role Preferences"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:r.map(d=>{const f=s>0?d.count/s*100:0;return i.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx(Ue,{text:hU(d.role),position:"top",maxWidth:"max-w-sm",children:i.jsxs("div",{className:"flex items-center cursor-help",children:[h(d.role),i.jsx("span",{className:`ml-2 font-medium ${c(d.role)}`,children:d.role})]})})}),i.jsx("div",{className:"text-lg font-bold text-white",children:d.count}),i.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[f.toFixed(1),"% of games"]}),i.jsx("div",{className:"h-2 bg-gray-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-blue-500",style:{width:`${f}%`}})})]},d.role)})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold mb-2 text-gray-300 flex items-center",children:[i.jsx(sa,{size:16,className:"mr-2 text-blue-400"}),"Hero Diversity"]}),i.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:e.length}),i.jsx("div",{className:"text-sm text-gray-400",children:"Different heroes played"}),i.jsx("div",{className:"mt-2 text-xs text-gray-500",children:s>0&&e.length>0?`Avg ${(s/e.length).toFixed(1)} games per hero`:"No data"})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold mb-2 text-gray-300 flex items-center",children:[i.jsx(to,{size:16,className:"mr-2 text-yellow-400"}),"Main Hero"]}),t[0]&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-lg font-bold text-white mb-1",children:t[0].heroName}),i.jsxs("div",{className:"text-sm text-gray-400",children:[t[0].count," games played"]}),i.jsx("div",{className:"mt-2 text-xs text-gray-500",children:s>0?`${(t[0].count/s*100).toFixed(1)}% of all games`:""})]})]}),i.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold mb-2 text-gray-300 flex items-center",children:[i.jsx(et,{size:16,className:"mr-2 text-green-400"}),"Favorite Role"]}),r[0]&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-lg font-bold text-white mb-1 flex items-center",children:[h(r[0].role),i.jsx("span",{className:"ml-2",children:r[0].role})]}),i.jsxs("div",{className:"text-sm text-gray-400",children:[r[0].count," games played"]}),i.jsx("div",{className:"mt-2 text-xs text-gray-500",children:s>0?`${(r[0].count/s*100).toFixed(1)}% preference`:""})]})]})]})]})},J6e=({playerId:t})=>{const[e,r]=B.useState(!0),[n,s]=B.useState([]),[a,o]=B.useState(1),[l,A]=B.useState(null),u=10,h=(()=>{const p=localStorage.getItem("playerStats_recencyMonths");return p?parseInt(p,10):null})(),c=B.useMemo(()=>{if(h===null)return{startDate:null,endDate:null};const p=new Date,x=new Date;return x.setMonth(x.getMonth()-h),{startDate:x,endDate:p}},[h]);B.useEffect(()=>{(async()=>{try{r(!0),A(null);let w=(await be.getPlayerStats(t)).matchesPlayed;if(c.startDate&&c.endDate){const b=await be.getAllMatches(),S=new Set(b.filter(E=>{const C=new Date(E.date);return C>=c.startDate&&C<=c.endDate}).map(E=>E.id));w=w.filter(E=>S.has(E.matchId))}const _=[];for(const b of w)try{const[S,E]=await Promise.all([be.getMatch(b.matchId),be.getMatchPlayers(b.matchId)]);if(S&&E.length>0){const C=E.find(F=>F.playerId===t);if(!C)continue;const N=E.filter(F=>F.playerId!==t&&F.team===C.team),Q=E.filter(F=>F.team!==C.team),P=C.team===S.winningTeam;_.push({match:S,playerData:C,teammates:N,opponents:Q,won:P})}}catch(S){console.warn(`Failed to load match ${b.matchId}:`,S)}_.sort((b,S)=>new Date(S.match.date).getTime()-new Date(b.match.date).getTime()),s(_)}catch(x){console.error("Error loading match history:",x),A("Failed to load match history")}finally{r(!1)}})()},[t,c.startDate,c.endDate]);const d=p=>{if(!p)return i.jsx(Ue,{text:"Unknown role",position:"top",maxWidth:"max-w-sm",children:i.jsx(tf,{size:16,className:"text-gray-400"})});const x=hU(p);let w;switch(p.toLowerCase()){case"guardian":case"durable":w=i.jsx(At,{size:16,className:"text-blue-400"});break;case"slayer":case"tactician":w=i.jsx(Ir,{size:16,className:"text-red-400"});break;case"support":w=i.jsx(et,{size:16,className:"text-green-400"});break;case"sorcerer":w=i.jsx(to,{size:16,className:"text-purple-400"});break;default:w=i.jsx(tf,{size:16,className:"text-gray-400"});break}return i.jsx(Ue,{text:x,position:"top",maxWidth:"max-w-sm",children:w})},f=Math.ceil(n.length/u),g=(a-1)*u,y=g+u,v=n.slice(g,y),m=p=>{o(Math.max(1,Math.min(p,f)))};return e?i.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:i.jsxs("div",{className:"animate-pulse",children:[i.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),i.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((p,x)=>i.jsx("div",{className:"h-16 bg-gray-600 rounded"},x))})]})}):l||n.length===0?i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[i.jsx(Nn,{size:20,className:"mr-2 text-blue-400"}),"Match History"]}),i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Nn,{size:48,className:"mx-auto text-gray-500 mb-4"}),i.jsx("p",{className:"text-gray-400 mb-2",children:l?"Error Loading History":"No Match History Available"}),i.jsx("p",{className:"text-sm text-gray-500",children:l||"This player hasn't recorded any matches yet."})]})]}):i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[i.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[i.jsx(Nn,{size:20,className:"mr-2 text-blue-400"}),"Match History"]}),f>1&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>m(a-1),disabled:a===1,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Cr,{size:16})}),i.jsxs("span",{className:"text-sm text-gray-400 px-3",children:["Page ",a," of ",f]}),i.jsx("button",{onClick:()=>m(a+1),disabled:a===f,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Gc,{size:16})})]})]}),h!==null&&c.startDate&&c.endDate&&i.jsxs("div",{className:"mb-4 p-2 bg-blue-900/30 border border-blue-700/50 rounded text-sm flex items-center",children:[i.jsx(Nn,{size:14,className:"mr-2 text-blue-400"}),i.jsxs("span",{className:"text-blue-200",children:["Showing matches from last ",h," month",h!==1?"s":""]})]}),i.jsx("div",{className:"space-y-4",children:v.map(p=>{var x,w;return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[i.jsxs("div",{className:"block lg:hidden",children:[i.jsxs("div",{className:"flex justify-between items-start mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${p.won?"bg-green-500":"bg-red-500"}`}),i.jsx("span",{className:`font-semibold ${p.won?"text-green-400":"text-red-400"}`,children:p.won?"Victory":"Defeat"})]}),i.jsx("div",{className:"text-right text-sm text-gray-400",children:i.jsx("div",{children:new Date(p.match.date).toLocaleDateString()})})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[d((x=p.playerData.heroRoles)==null?void 0:x[0]),i.jsx("span",{className:"ml-2 font-medium text-white",children:p.playerData.heroName||"Unknown Hero"})]}),i.jsxs("div",{className:"text-sm text-gray-400",children:["Team ",p.playerData.team]})]}),(p.playerData.kills!==void 0||p.playerData.deaths!==void 0||p.playerData.assists!==void 0)&&i.jsxs("div",{className:"text-sm text-gray-300",children:["KDA: ",p.playerData.kills??0,"/",p.playerData.deaths??0,"/",p.playerData.assists??0,p.playerData.level&&`  Level ${p.playerData.level}`,p.playerData.goldEarned&&`  ${p.playerData.goldEarned.toLocaleString()} gold`]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-green-400 mb-1",children:"Teammates"}),i.jsx("div",{className:"space-y-1",children:p.teammates.map((_,b)=>{var S;return i.jsxs("div",{className:"flex items-center",children:[d((S=_.heroRoles)==null?void 0:S[0]),i.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[i.jsx("div",{className:"font-medium",children:_.playerId}),_.heroName&&i.jsx("div",{className:"text-xs text-gray-500",children:_.heroName})]})]},b)})})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-red-400 mb-1",children:"Opponents"}),i.jsx("div",{className:"space-y-1",children:p.opponents.map((_,b)=>{var S;return i.jsxs("div",{className:"flex items-center",children:[d((S=_.heroRoles)==null?void 0:S[0]),i.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[i.jsx("div",{className:"font-medium",children:_.playerId}),_.heroName&&i.jsx("div",{className:"text-xs text-gray-500",children:_.heroName})]})]},b)})})]})]})]}),i.jsx("div",{className:"hidden lg:block",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[i.jsx("div",{className:"col-span-1",children:i.jsx("div",{className:`w-4 h-4 rounded-full ${p.won?"bg-green-500":"bg-red-500"}`})}),i.jsx("div",{className:"col-span-2 text-sm text-gray-400",children:i.jsx("div",{children:new Date(p.match.date).toLocaleDateString()})}),i.jsxs("div",{className:"col-span-3",children:[i.jsxs("div",{className:"flex items-center mb-1",children:[d((w=p.playerData.heroRoles)==null?void 0:w[0]),i.jsx("span",{className:"ml-2 font-medium text-white",children:p.playerData.heroName||"Unknown Hero"})]}),(p.playerData.kills!==void 0||p.playerData.deaths!==void 0||p.playerData.assists!==void 0)&&i.jsxs("div",{className:"text-sm text-gray-400",children:[p.playerData.kills??0,"/",p.playerData.deaths??0,"/",p.playerData.assists??0,p.playerData.level&&`  Lv.${p.playerData.level}`]})]}),i.jsxs("div",{className:"col-span-3",children:[i.jsx("div",{className:"text-xs text-green-400 mb-1",children:"Teammates"}),i.jsx("div",{className:"space-y-1",children:p.teammates.map((_,b)=>{var S;return i.jsxs("div",{className:"flex items-center text-xs",children:[d((S=_.heroRoles)==null?void 0:S[0]),i.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[i.jsx("div",{children:_.playerId}),_.heroName&&i.jsx("div",{className:"text-xs text-gray-500",children:_.heroName})]})]},b)})})]}),i.jsxs("div",{className:"col-span-3",children:[i.jsx("div",{className:"text-xs text-red-400 mb-1",children:"Opponents"}),i.jsx("div",{className:"space-y-1",children:p.opponents.map((_,b)=>{var S;return i.jsxs("div",{className:"flex items-center text-xs",children:[d((S=_.heroRoles)==null?void 0:S[0]),i.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[i.jsx("div",{children:_.playerId}),_.heroName&&i.jsx("div",{className:"text-xs text-gray-500",children:_.heroName})]})]},b)})})]})]})})]},p.match.id)})}),f>1&&i.jsxs("div",{className:"mt-6 flex justify-center items-center gap-2",children:[i.jsx("button",{onClick:()=>m(1),disabled:a===1,className:"px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),i.jsx("button",{onClick:()=>m(a-1),disabled:a===1,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Cr,{size:16})}),i.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,f)},(p,x)=>{const w=Math.max(1,Math.min(f-4,a-2))+x;return w<=f?i.jsx("button",{onClick:()=>m(w),className:`px-3 py-2 text-sm rounded-lg ${w===a?"bg-blue-600 text-white":"bg-gray-800 hover:bg-gray-600"}`,children:w},w):null})}),i.jsx("button",{onClick:()=>m(a+1),disabled:a===f,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(Gc,{size:16})}),i.jsx("button",{onClick:()=>m(f),disabled:a===f,className:"px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]}),i.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:i.jsxs("div",{className:"text-center text-sm text-gray-400",children:["Showing ",g+1,"-",Math.min(y,n.length)," of ",n.length," matches",i.jsx("span",{className:"mx-2",children:""}),n.filter(p=>p.won).length," wins, ",n.filter(p=>!p.won).length," losses",i.jsx("span",{className:"mx-2",children:""}),n.length>0?(n.filter(p=>p.won).length/n.length*100).toFixed(1):"0.0","% win rate"]})})]})},Y6e=({playerId:t,onBack:e})=>{const{playSound:r}=Ge(),[n,s]=B.useState(null),[a,o]=B.useState(!0),[l,A]=B.useState(null),u=(()=>{const m=localStorage.getItem("playerStats_recencyMonths");return m?parseInt(m,10):null})(),h=B.useMemo(()=>{if(u===null)return{startDate:null,endDate:null};const m=new Date,p=new Date;return p.setMonth(p.getMonth()-u),{startDate:p,endDate:m}},[u]);B.useEffect(()=>{t&&(async()=>{try{o(!0),A(null);const[p,x,w,_]=await Promise.all([be.getPlayer(t),be.getPlayerStats(t),be.getCurrentTrueSkillRatings(),be.getAllPlayers()]);if(!p)throw new Error("Player not found");const S=_.map(se=>({...se,rating:w[se.id]||0})).filter(se=>se.totalGames>0).sort((se,re)=>re.rating-se.rating).findIndex(se=>se.id===t)+1;let E=await be.getAllMatches(),C=null;h.startDate&&h.endDate&&(C=new Set(E.filter(se=>{const re=new Date(se.date);return re>=h.startDate&&re<=h.endDate}).map(se=>se.id)));let N=x.matchesPlayed;C&&(N=N.filter(se=>C.has(se.matchId)));const Q=N.reduce((se,re)=>se+(re.kills??0),0),P=N.reduce((se,re)=>se+(re.deaths??0),0),F=N.reduce((se,re)=>se+(re.assists??0),0),$=N.reduce((se,re)=>se+(re.goldEarned??0),0),L=N.reduce((se,re)=>se+(re.minionKills??0),0),D=N.reduce((se,re)=>se+(re.level??0),0),z=N.filter(se=>se.kills!==void 0||se.deaths!==void 0||se.assists!==void 0).length,k=N.filter(se=>se.goldEarned!==void 0).length,M=N.filter(se=>se.minionKills!==void 0).length,j=N.filter(se=>se.level!==void 0).length,I=P===0?Q:Q/P,G=z>0?Q/z:0,X=z>0?P/z:0,te=z>0?F/z:0,Ae=k>0?Math.round($/k):0,ie=M>0?L/M:0,V=j>0?D/j:0,Y=Q>0||P>0||F>0||$>0,U=new Map,H=new Map;for(const se of N){if(se.heroId){const re=U.get(se.heroId);re?re.count++:U.set(se.heroId,{heroId:se.heroId,heroName:se.heroName||`Hero ${se.heroId}`,count:1})}if(se.heroRoles)for(const re of se.heroRoles)H.set(re,(H.get(re)||0)+1)}const K=Array.from(U.values()).sort((se,re)=>re.count-se.count).slice(0,5),O=Array.from(H.entries()).map(([se,re])=>({role:se,count:re})).sort((se,re)=>re.count-se.count),oe=Array.from(U.values()).sort((se,re)=>re.count-se.count),me={...x,favoriteHeroes:K,favoriteRoles:O,allHeroesPlayed:oe,allRolesPlayed:O};s({player:p,stats:me,matches:N,currentRating:w[t]||0,rank:S,combatStats:{kills:Q,deaths:P,assists:F,kdRatio:parseFloat(I.toFixed(2)),averageKills:G,averageDeaths:X,averageAssists:te,gamesWithCombatData:z,gamesWithGoldData:k,gamesWithMinionData:M,averageGold:Ae,averageMinionKills:ie,averageLevel:V,hasCombatStats:Y}})}catch(p){A(p instanceof Error?p.message:"Failed to load player details")}finally{o(!1)}})()},[t,h.startDate,h.endDate]);const c=()=>{r("buttonClick"),e()};if(a)return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsxs("button",{onClick:c,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Player Stats"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Player Details"})]}),i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(uD,{size:24,className:"animate-spin text-blue-500 mr-3"}),i.jsx("span",{className:"text-gray-300",children:"Loading player details..."})]})})]});if(l||!n)return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsxs("button",{onClick:c,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Player Stats"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Player Details"})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx(ii,{size:48,className:"text-red-500 mb-4"}),i.jsx("p",{className:"text-xl text-red-400 mb-2",children:"Error Loading Player"}),i.jsx("p",{className:"text-gray-400",children:l||"Player not found"}),i.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Go Back"})]})]});const{player:d,stats:f,currentRating:g,rank:y,combatStats:v}=n;return d?i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsxs("button",{onClick:c,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Player Stats"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Detailed Player Statistics"})]}),u!==null&&h.startDate&&h.endDate&&i.jsxs("div",{className:"mb-6 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center",children:[i.jsx(Nn,{size:18,className:"mr-2 text-blue-400 flex-shrink-0"}),i.jsxs("span",{className:"text-sm text-blue-200",children:["Showing stats from"," ",i.jsx("span",{className:"font-medium",children:h.startDate.toLocaleDateString()})," ","to"," ",i.jsx("span",{className:"font-medium",children:h.endDate.toLocaleDateString()})," ","(",u," month",u!==1?"s":"",")"]})]}),i.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-2xl font-bold text-gray-300",children:d.name.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:d.name}),i.jsxs("div",{className:"flex items-center gap-2 mt-1 text-blue-400",children:[i.jsx(sa,{size:20}),i.jsxs("span",{className:"text-lg font-semibold",children:["Rank #",y]})]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:g}),i.jsx("div",{className:"text-sm text-gray-400",children:"TrueSkill Rating"}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[d.totalGames," games  Last played ",new Date(d.lastPlayed).toLocaleDateString()]})]})]})}),i.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Quick Overview"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-400",children:d.wins}),i.jsx("div",{className:"text-sm text-gray-400",children:"Wins"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-red-400",children:d.losses}),i.jsx("div",{className:"text-sm text-gray-400",children:"Losses"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[d.totalGames>0?(d.wins/d.totalGames*100).toFixed(1):"0.0","%"]}),i.jsx("div",{className:"text-sm text-gray-400",children:"Win Rate"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:f.allHeroesPlayed.length}),i.jsx("div",{className:"text-sm text-gray-400",children:"Heroes Played"})]})]})]}),i.jsx(H6e,{kills:v.kills,deaths:v.deaths,assists:v.assists,kdRatio:v.kdRatio,averageKills:v.averageKills,averageDeaths:v.averageDeaths,averageAssists:v.averageAssists,gamesWithCombatData:v.gamesWithCombatData,gamesWithGoldData:v.gamesWithGoldData,gamesWithMinionData:v.gamesWithMinionData,averageGold:v.averageGold,averageMinionKills:v.averageMinionKills,averageLevel:v.averageLevel,totalGames:d.totalGames,hasCombatStats:v.hasCombatStats}),i.jsx(W6e,{playerId:d.id,playerName:d.name}),i.jsx(V6e,{playerId:d.id,playerName:d.name}),i.jsx(X6e,{favoriteHeroes:f.favoriteHeroes,allHeroesPlayed:f.allHeroesPlayed,favoriteRoles:f.favoriteRoles,allRolesPlayed:f.allRolesPlayed,totalGames:d.totalGames,matches:n.matches}),i.jsx(J6e,{playerId:d.id,playerName:d.name})]}):i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsxs("button",{onClick:c,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Player Stats"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Player Details"})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx(ii,{size:48,className:"text-red-500 mb-4"}),i.jsx("p",{className:"text-xl text-red-400 mb-2",children:"Player Not Found"}),i.jsx("p",{className:"text-gray-400",children:"Unable to load player data"}),i.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Go Back"})]})]})},Z6e=({selectedHeroId:t,onHeroChange:e,disabled:r=!1,className:n=""})=>{const[s,a]=B.useState(!1),[o,l]=B.useState(""),A=B.useRef(null),u=B.useRef(null),h=Zi.find(m=>m.id===t);B.useEffect(()=>{const m=p=>{A.current&&!A.current.contains(p.target)&&(a(!1),l(""))};return s&&(document.addEventListener("mousedown",m),setTimeout(()=>{var p;(p=u.current)==null||p.focus()},0)),()=>{document.removeEventListener("mousedown",m)}},[s]);const c=Zi.filter(m=>{var p;return m.name.toLowerCase().includes(o.toLowerCase())||m.roles.some(x=>x.toLowerCase().includes(o.toLowerCase()))||((p=m.additionalRoles)==null?void 0:p.some(x=>x.toLowerCase().includes(o.toLowerCase())))}),d=new Map;c.forEach(m=>{const p=m.roles[0]||"Unknown";d.has(p)||d.set(p,[]),d.get(p).push(m)});const f=Array.from(d.entries()).sort(([m],[p])=>{const x=["Durable","Tactician","Pusher","Disabler","Farming"],w=x.indexOf(m),_=x.indexOf(p);return w===-1&&_===-1?m.localeCompare(p):w===-1?1:_===-1?-1:w-_}),g=m=>{e(m.id,m),a(!1),l("")},y=()=>{r||(a(!s),l(""))},v=m=>Array.from({length:5},(p,x)=>i.jsx("span",{className:`text-sm ${x<m?"text-yellow-400":"text-gray-600"}`,children:""},x));return i.jsxs("div",{ref:A,className:`relative ${n}`,children:[i.jsxs("button",{type:"button",onClick:y,disabled:r,className:`w-full px-3 py-2 text-left bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center justify-between ${r?"opacity-50 cursor-not-allowed":"hover:bg-gray-600"}`,children:[i.jsx("div",{className:"flex items-center",children:h?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-8 h-8 bg-gray-800 rounded mr-3 flex items-center justify-center text-xs",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:h.name}),i.jsx("div",{className:"text-xs text-gray-400",children:h.roles.join(", ")})]})]}):i.jsx("span",{className:"text-gray-400",children:"Select a hero..."})}),i.jsx(pn,{size:20,className:`transition-transform ${s?"rotate-180":""}`})]}),s&&i.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-50 max-h-96 overflow-hidden",children:[i.jsx("div",{className:"p-3 border-b border-gray-700",children:i.jsxs("div",{className:"relative",children:[i.jsx(lo,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),i.jsx("input",{ref:u,type:"text",value:o,onChange:m=>l(m.target.value),placeholder:"Search heroes...",className:"w-full pl-10 pr-3 py-2 bg-gray-700 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),i.jsx("div",{className:"max-h-80 overflow-y-auto",children:f.length>0?f.map(([m,p])=>i.jsxs("div",{children:[i.jsx("div",{className:"px-3 py-2 bg-gray-700/50 border-b border-gray-700 text-sm font-medium text-gray-300",children:m.toUpperCase()}),p.sort((x,w)=>x.name.localeCompare(w.name)).map(x=>i.jsxs("button",{type:"button",onClick:()=>g(x),className:`w-full px-3 py-3 text-left hover:bg-gray-700 flex items-center justify-between border-b border-gray-800 last:border-b-0 ${t===x.id?"bg-blue-900/30 ring-1 ring-blue-500":""}`,children:[i.jsxs("div",{className:"flex items-center flex-1",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded mr-3 flex items-center justify-center",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium",children:x.name}),i.jsx("div",{className:"text-xs text-gray-400",children:x.roles.concat(x.additionalRoles||[]).join(", ")}),i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:x.expansion})]})]}),i.jsx("div",{className:"flex items-center ml-2",children:v(x.complexity)})]},x.id))]},m)):i.jsxs("div",{className:"px-3 py-6 text-center text-gray-400",children:['No heroes found matching "',o,'"']})}),h&&i.jsx("div",{className:"p-3 bg-gray-700/30 border-t border-gray-700",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Current Selection: "}),i.jsx("span",{className:"font-medium",children:h.name}),i.jsxs("span",{className:"text-gray-400",children:[" - ",h.roles.join(", ")]})]})})]})]})},e3e=({isOpen:t,matchId:e,onClose:r,onSaveComplete:n})=>{const{playSound:s}=Ge(),a=B.useRef(null),[o,l]=B.useState(null),[A,u]=B.useState(null),[h,c]=B.useState([]),[d,f]=B.useState(!1),[g,y]=B.useState(!1),[v,m]=B.useState(null),[p,x]=B.useState({isValid:!0,errors:[],warnings:[]}),[w,_]=B.useState(!1);B.useEffect(()=>{t&&e?E():S()},[t,e]),B.useEffect(()=>{A&&h.length>0&&(C(),N())},[A,h]);const b=j=>{a.current&&!a.current.contains(j.target)&&Q()};B.useEffect(()=>{const j=I=>{I.key==="Escape"&&t&&Q()};return t&&(document.addEventListener("keydown",j),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",j),document.body.style.overflow=""}},[t]);const S=()=>{l(null),u(null),c([]),f(!1),y(!1),m(null),x({isValid:!0,errors:[],warnings:[]}),_(!1)},E=async()=>{f(!0),m(null);try{const j=await be.getEditableMatch(e);if(!j)throw new Error("Match not found");const I=await be.canEditMatch(e);if(!I.canEdit)throw new Error(I.reason||"Cannot edit this match");l(j),u({...j.match}),c(j.players.map(G=>({...G})))}catch(j){console.error("Error loading match data:",j),m(j instanceof Error?j.message:"Failed to load match data")}finally{f(!1)}},C=()=>{if(!A||!h)return;const j=be.validateMatchEdit(A,h);x(j)},N=()=>{if(!o||!A){_(!1);return}const j=JSON.stringify(o.match)!==JSON.stringify(A),I=JSON.stringify(o.players)!==JSON.stringify(h);_(j||I)},Q=()=>{w&&!window.confirm("You have unsaved changes. Are you sure you want to close without saving?")||(s("buttonClick"),r())},P=async()=>{if(!(!A||!h||!p.isValid)){y(!0),m(null);try{const j={};o&&Object.keys(A).forEach(G=>{const X=G;o.match[X]!==A[X]&&(j[X]=A[X])});const I=h.filter(G=>{const X=o==null?void 0:o.players.find(te=>te.id===G.id);return X&&JSON.stringify(X)!==JSON.stringify(G)}).map(G=>({id:G.id,updates:{heroId:G.heroId,heroName:G.heroName,heroRoles:G.heroRoles,kills:G.kills,deaths:G.deaths,assists:G.assists,goldEarned:G.goldEarned,minionKills:G.minionKills,level:G.level,team:G.team}}));if(Object.keys(j).length===0&&I.length===0){s("buttonClick"),n();return}await be.editMatch(e,j,I),s("phaseChange"),n()}catch(j){console.error("Error saving match:",j),m(j instanceof Error?j.message:"Failed to save match")}finally{y(!1)}}},F=()=>{o&&window.confirm("Reset all changes to original values?")&&(s("buttonClick"),u({...o.match}),c(o.players.map(j=>({...j}))))},$=(j,I)=>{A&&u({...A,[j]:I})},L=(j,I,G)=>{c(X=>X.map(te=>te.id===j?{...te,[I]:G}:te))},D=(j,I)=>{const G=Zi.find(X=>X.id===I);G&&c(X=>X.map(te=>te.id===j?{...te,heroId:G.id,heroName:G.name,heroRoles:[...G.roles,...G.additionalRoles||[]]}:te))},z=j=>new Date(j).toISOString().split("T")[0],k=j=>{const I=new Date(j);return`${I.getHours().toString().padStart(2,"0")}:${I.getMinutes().toString().padStart(2,"0")}`},M=(j,I)=>{const[G,X]=I.split(":"),te=new Date(j);te.setHours(parseInt(G),parseInt(X)),$("date",te)};return t?i.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:b,children:i.jsxs("div",{ref:a,className:"max-w-6xl w-full max-h-[90vh] bg-gray-800 rounded-lg border border-gray-600 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[" Edit Match",A&&i.jsx("span",{className:"ml-3 text-base text-gray-400",children:new Date(A.date).toLocaleDateString()})]}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Changes will recalculate all player ratings from this match forward"})]}),i.jsx("button",{onClick:Q,className:"text-gray-400 hover:text-white p-2",children:i.jsx(jr,{size:24})})]}),i.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-180px)]",children:d?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(ft,{size:24,className:"animate-spin mr-3"}),i.jsx("span",{className:"text-gray-400",children:"Loading match data..."})]})}):v?i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"bg-red-900/30 border border-red-600 p-4 rounded-lg",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(ea,{size:20,className:"mr-3 text-red-400 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-red-300",children:"Error Loading Match"}),i.jsx("p",{className:"text-red-200 mt-1",children:v})]})]})})}):A&&h?i.jsxs("div",{className:"p-6",children:[(p.errors.length>0||p.warnings.length>0)&&i.jsxs("div",{className:"mb-6",children:[p.errors.length>0&&i.jsxs("div",{className:"bg-red-900/30 border border-red-600 p-4 rounded-lg mb-4",children:[i.jsxs("h3",{className:"font-semibold text-red-300 mb-2 flex items-center",children:[i.jsx(ea,{size:18,className:"mr-2"}),"Validation Errors"]}),i.jsx("ul",{className:"text-red-200 text-sm space-y-1",children:p.errors.map((j,I)=>i.jsxs("li",{children:[" ",j.message]},I))})]}),p.warnings.length>0&&i.jsxs("div",{className:"bg-amber-900/30 border border-amber-600 p-4 rounded-lg mb-4",children:[i.jsxs("h3",{className:"font-semibold text-amber-300 mb-2 flex items-center",children:[i.jsx(ea,{size:18,className:"mr-2"}),"Warnings"]}),i.jsx("ul",{className:"text-amber-200 text-sm space-y-1",children:p.warnings.map((j,I)=>i.jsxs("li",{children:[" ",j.message]},I))})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-200",children:"Match Details"}),i.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date"}),i.jsx("input",{type:"date",value:z(A.date),onChange:j=>M(j.target.value,k(A.date)),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Time"}),i.jsx("input",{type:"time",value:k(A.date),onChange:j=>M(z(A.date),j.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Winner"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"winner",checked:A.winningTeam===W.Titans,onChange:()=>$("winningTeam",W.Titans),className:"mr-2"}),i.jsx("span",{className:"text-blue-400",children:"Titans"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"winner",checked:A.winningTeam===W.Atlanteans,onChange:()=>$("winningTeam",W.Atlanteans),className:"mr-2"}),i.jsx("span",{className:"text-red-400",children:"Atlanteans"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Length"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"gameLength",checked:A.gameLength===$e.Quick,onChange:()=>$("gameLength",$e.Quick),className:"mr-2"}),i.jsx("span",{children:"Quick"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",name:"gameLength",checked:A.gameLength===$e.Long,onChange:()=>$("gameLength",$e.Long),className:"mr-2"}),i.jsx("span",{children:"Long"})]})]})]})]}),i.jsx("div",{className:"mt-4",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:A.doubleLanes,onChange:j=>$("doubleLanes",j.target.checked),className:"mr-2"}),i.jsx("span",{className:"text-gray-300",children:"Double Lanes"})]})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-200",children:"Teams"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"font-medium mb-3 text-blue-400 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans (",h.filter(j=>j.team===W.Titans).length," players)"]}),i.jsx("div",{className:"space-y-4",children:h.filter(j=>j.team===W.Titans).map(j=>i.jsx(ES,{player:j,onHeroChange:I=>D(j.id,I),onFieldChange:(I,G)=>L(j.id,I,G),validation:p},j.id))})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-medium mb-3 text-red-400 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans (",h.filter(j=>j.team===W.Atlanteans).length," players)"]}),i.jsx("div",{className:"space-y-4",children:h.filter(j=>j.team===W.Atlanteans).map(j=>i.jsx(ES,{player:j,onHeroChange:I=>D(j.id,I),onFieldChange:(I,G)=>L(j.id,I,G),validation:p},j.id))})]})]})]})]}):null}),i.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-700",children:[i.jsx("div",{className:"flex items-center space-x-4",children:w&&i.jsxs("div",{className:"flex items-center text-amber-400 text-sm",children:[i.jsx(ea,{size:16,className:"mr-1"}),i.jsx("span",{children:"Unsaved changes"})]})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Ue,{text:"Reset all changes to original values",children:i.jsxs("button",{onClick:F,disabled:g||!w,className:`px-4 py-2 rounded-lg flex items-center ${w?"bg-gray-600 hover:bg-gray-500":"bg-gray-700 cursor-not-allowed opacity-50"}`,children:[i.jsx(pc,{size:18,className:"mr-2"}),"Reset"]})}),i.jsx("button",{onClick:Q,disabled:g,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"Cancel"}),i.jsx(Ue,{text:p.isValid?w?"Save all changes and recalculate ratings":"No changes to save":"Fix validation errors before saving",children:i.jsx("button",{onClick:P,disabled:g||!p.isValid||!w,className:`px-4 py-2 rounded-lg flex items-center ${p.isValid&&w?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 cursor-not-allowed opacity-50"}`,children:g?i.jsxs(i.Fragment,{children:[i.jsx(ft,{size:18,className:"mr-2 animate-spin"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Gk,{size:18,className:"mr-2"}),"Save Changes"]})})})]})]})]})}):null},ES=({player:t,onHeroChange:e,onFieldChange:r,validation:n})=>{var u;const[s,a]=B.useState(!1),o=h=>n.errors.find(c=>c.field===h&&c.playerId===t.playerId),l=h=>n.warnings.find(c=>c.field===h&&c.playerId===t.playerId),A=(h,c,d)=>{var v;const f=o(h),g=l(h),y=f||g;return i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:c}),i.jsx("input",{type:"number",min:"0",value:d||"",onChange:m=>r(h,m.target.value?parseInt(m.target.value):void 0),className:`w-full px-2 py-1 text-sm bg-gray-800 border rounded focus:outline-none focus:ring-1 ${f?"border-red-500 focus:ring-red-500":g?"border-amber-500 focus:ring-amber-500":"border-gray-600 focus:ring-blue-500"}`}),y&&i.jsx("div",{className:`text-xs mt-1 ${f?"text-red-400":"text-amber-400"}`,children:(v=f||g)==null?void 0:v.message})]})};return i.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg border border-gray-600",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-3 bg-gray-800 p-2 rounded-full",children:""}),i.jsxs("div",{children:[i.jsx("h5",{className:"font-medium",children:t.playerName}),i.jsxs("p",{className:"text-xs text-gray-400",children:["Player ID: ",t.playerId]})]})]}),i.jsx("button",{onClick:()=>a(!s),className:"px-3 py-1 text-xs bg-gray-600 hover:bg-gray-500 rounded",children:s?"Hide Stats":"Show Stats"})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hero"}),i.jsx(Z6e,{selectedHeroId:t.heroId,onHeroChange:e,className:"w-full"}),o("hero")&&i.jsx("div",{className:"text-xs text-red-400 mt-1",children:(u=o("hero"))==null?void 0:u.message})]}),s&&i.jsxs("div",{className:"bg-gray-800/50 p-3 rounded",children:[i.jsx("h6",{className:"text-sm font-medium text-gray-300 mb-3",children:"Statistics (Optional)"}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[A("kills","Kills",t.kills),A("deaths","Deaths",t.deaths),A("assists","Assists",t.assists),A("goldEarned","Gold",t.goldEarned),A("minionKills","Minions",t.minionKills),A("level","Level",t.level)]})]})]})},t3e=({onBack:t})=>{const{playSound:e}=Ge(),[r,n]=B.useState([]),[s,a]=B.useState(!0),[o,l]=B.useState(""),[A,u]=B.useState("all"),[h,c]=B.useState("all"),[d,f]=B.useState("desc"),[g,y]=B.useState(!1),[v,m]=B.useState(null),[p,x]=B.useState(null),[w,_]=B.useState(!1),b=async()=>{a(!0);try{const j=await be.getAllMatches();j.sort((G,X)=>{const te=new Date(G.date).getTime();return new Date(X.date).getTime()-te});const I=await Promise.all(j.map(async G=>{const X=await be.getMatchPlayers(G.id),te=await Promise.all(X.map(async Ae=>{const ie=await be.getPlayer(Ae.playerId);return{...Ae,playerName:(ie==null?void 0:ie.name)||"Unknown Player"}}));return{...G,players:te,expanded:!1}}));n(I)}catch(j){console.error("Error loading match history:",j)}finally{a(!1)}};B.useEffect(()=>{b()},[]);const S=()=>{e("buttonClick"),t()},E=j=>{e("buttonClick"),n(r.map(I=>I.id===j?{...I,expanded:!I.expanded}:I))},C=async j=>{if(v!==j){e("buttonClick"),m(j);return}try{e("buttonClick"),await be.deleteMatch(j),n(r.filter(I=>I.id!==j)),m(null)}catch(I){console.error("Error deleting match:",I)}},N=j=>{e("buttonClick"),x(j),_(!0)},Q=()=>{e("buttonClick"),_(!1),x(null)},P=async()=>{e("phaseChange"),_(!1),x(null);try{await b()}catch(j){console.error("Error reloading matches after edit:",j)}},F=()=>{e("buttonClick"),f(d==="asc"?"desc":"asc")},$=()=>{e("buttonClick"),y(!g)},L=()=>{e("buttonClick"),l(""),u("all"),c("all"),y(!1)},D=j=>new Date(j).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),z=j=>j.players.some(I=>I.kills&&I.kills>0||I.deaths&&I.deaths>0||I.assists&&I.assists>0),k=j=>j.players.some(I=>I.goldEarned&&I.goldEarned>0),M=r.filter(j=>{if(A!=="all"&&j.winningTeam!==A||h!=="all"&&j.gameLength!==h)return!1;if(o){const I=o.toLowerCase();return j.players.some(G=>G.playerName.toLowerCase().includes(I)||G.heroName.toLowerCase().includes(I))}return!0}).sort((j,I)=>{const G=new Date(j.date).getTime(),X=new Date(I.date).getTime();return d==="asc"?G-X:X-G});return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("button",{onClick:S,className:"flex items-center text-gray-300 hover:text-white",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Menu"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Match History"})]}),i.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[i.jsxs("div",{className:"relative flex-grow",children:[i.jsx("input",{type:"text",value:o,onChange:j=>l(j.target.value),placeholder:"Search players or heroes...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx(lo,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),i.jsxs("button",{onClick:F,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[i.jsx(Nn,{size:18,className:"mr-2"}),i.jsxs("span",{children:["Date ",d==="asc"?"(Oldest)":"(Newest)"]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:$,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[i.jsx(vu,{size:18,className:"mr-2"}),i.jsx("span",{children:"Filters"}),(A!=="all"||h!=="all")&&i.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(A!=="all"?1:0)+(h!=="all"?1:0)}),g?i.jsx(ls,{size:16,className:"ml-2"}):i.jsx(pn,{size:16,className:"ml-2"})]}),g&&i.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-64",children:[i.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Winning Team"}),i.jsxs("select",{value:A,onChange:j=>u(j.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[i.jsx("option",{value:"all",children:"All Teams"}),i.jsx("option",{value:W.Titans,children:"Titans"}),i.jsx("option",{value:W.Atlanteans,children:"Atlanteans"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Game Length"}),i.jsxs("select",{value:h,onChange:j=>c(j.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[i.jsx("option",{value:"all",children:"All Lengths"}),i.jsx("option",{value:$e.Quick,children:"Quick"}),i.jsx("option",{value:$e.Long,children:"Long"})]})]}),i.jsx("button",{onClick:L,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),s?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):i.jsx("div",{children:M.length>0?i.jsx("div",{className:"space-y-4",children:M.map(j=>i.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md",children:[i.jsxs("div",{className:`px-5 py-4 ${j.winningTeam===W.Titans?"bg-blue-900/50":"bg-red-900/50"} flex justify-between items-center cursor-pointer`,onClick:()=>E(j.id),children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(zc,{size:18,className:"mr-2"}),i.jsx("span",{className:"font-bold",children:j.winningTeam===W.Titans?"Titans Victory":"Atlanteans Victory"})]}),i.jsx("div",{className:"text-sm text-gray-300 mt-1",children:D(j.date)})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"bg-gray-800 px-2 py-1 rounded",children:j.gameLength===$e.Quick?"Quick":"Long"}),j.doubleLanes&&i.jsx("span",{className:"ml-2 bg-gray-800 px-2 py-1 rounded",children:"Double Lane"})]}),i.jsx("div",{children:j.expanded?i.jsx(ls,{size:20}):i.jsx(pn,{size:20})})]})]}),j.expanded&&i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:`p-3 rounded-lg ${j.winningTeam===W.Titans?"bg-blue-900/30 ring-2 ring-blue-500":"bg-blue-900/20"}`,children:[i.jsxs("h4",{className:"font-bold mb-2 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans Team",j.winningTeam===W.Titans&&i.jsx("span",{className:"ml-2 text-xs bg-blue-600 px-2 py-0.5 rounded-full",children:"Winner"})]}),i.jsx("div",{className:"space-y-2",children:j.players.filter(I=>I.team===W.Titans).map(I=>i.jsxs("div",{className:"flex justify-between items-center bg-blue-900/30 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 bg-gray-800 p-1 rounded-full",children:i.jsx(At,{size:16})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:I.playerName}),i.jsxs("div",{className:"text-xs text-gray-300",children:[I.heroName,"  ",I.heroRoles.join(", ")]})]})]}),(z(j)||k(j))&&i.jsxs("div",{className:"flex items-center space-x-2 text-xs bg-gray-800 px-2 py-1 rounded",children:[z(j)&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsxs("span",{className:"flex items-center",title:"Kills",children:[i.jsx(Ir,{size:12,className:"text-blue-400 mr-1"}),I.kills||0]}),i.jsx("span",{children:"/"}),i.jsxs("span",{className:"flex items-center",title:"Deaths",children:[i.jsx(Da,{size:12,className:"text-red-400 mr-1"}),I.deaths||0]}),i.jsx("span",{children:"/"}),i.jsxs("span",{className:"flex items-center",title:"Assists",children:[i.jsx(et,{size:12,className:"text-green-400 mr-1"}),I.assists||0]})]}),k(j)&&i.jsxs("div",{className:"flex items-center ml-2",title:"Gold",children:[i.jsx(ts,{size:12,className:"text-yellow-400 mr-1"}),I.goldEarned||0]})]})]},I.id))})]}),i.jsxs("div",{className:`p-3 rounded-lg ${j.winningTeam===W.Atlanteans?"bg-red-900/30 ring-2 ring-red-500":"bg-red-900/20"}`,children:[i.jsxs("h4",{className:"font-bold mb-2 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans Team",j.winningTeam===W.Atlanteans&&i.jsx("span",{className:"ml-2 text-xs bg-red-600 px-2 py-0.5 rounded-full",children:"Winner"})]}),i.jsx("div",{className:"space-y-2",children:j.players.filter(I=>I.team===W.Atlanteans).map(I=>i.jsxs("div",{className:"flex justify-between items-center bg-red-900/30 p-2 rounded",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"mr-2 bg-gray-800 p-1 rounded-full",children:i.jsx(At,{size:16})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:I.playerName}),i.jsxs("div",{className:"text-xs text-gray-300",children:[I.heroName,"  ",I.heroRoles.join(", ")]})]})]}),(z(j)||k(j))&&i.jsxs("div",{className:"flex items-center space-x-2 text-xs bg-gray-800 px-2 py-1 rounded",children:[z(j)&&i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsxs("span",{className:"flex items-center",title:"Kills",children:[i.jsx(Ir,{size:12,className:"text-blue-400 mr-1"}),I.kills||0]}),i.jsx("span",{children:"/"}),i.jsxs("span",{className:"flex items-center",title:"Deaths",children:[i.jsx(Da,{size:12,className:"text-red-400 mr-1"}),I.deaths||0]}),i.jsx("span",{children:"/"}),i.jsxs("span",{className:"flex items-center",title:"Assists",children:[i.jsx(et,{size:12,className:"text-green-400 mr-1"}),I.assists||0]})]}),k(j)&&i.jsxs("div",{className:"flex items-center ml-2",title:"Gold",children:[i.jsx(ts,{size:12,className:"text-yellow-400 mr-1"}),I.goldEarned||0]})]})]},I.id))})]})]}),i.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[i.jsx(Ue,{text:"Edit this match data",children:i.jsxs("button",{onClick:I=>{I.stopPropagation(),N(j.id)},className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 rounded-lg flex items-center",children:[i.jsx(RD,{size:16,className:"mr-2"}),i.jsx("span",{children:"Edit Match"})]})}),i.jsx(Ue,{text:"Delete this match and its data",children:i.jsxs("button",{onClick:I=>{I.stopPropagation(),C(j.id)},className:`px-3 py-1 rounded-lg flex items-center ${v===j.id?"bg-red-500 hover:bg-red-400":"bg-red-700 hover:bg-red-600"}`,children:[i.jsx(Sl,{size:16,className:"mr-2"}),i.jsx("span",{children:v===j.id?"Confirm Delete":"Delete Match"})]})})]})]})]},j.id))}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx(Nn,{size:48,className:"text-gray-500 mb-4"}),i.jsx("p",{className:"text-xl text-gray-400",children:o||A!=="all"||h!=="all"?"No matches found matching your filters":"No match history available"}),(o||A!=="all"||h!=="all")&&i.jsx("button",{onClick:L,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Clear Filters"})]})}),w&&p&&i.jsx(e3e,{isOpen:w,matchId:p,onClose:Q,onSaveComplete:P})]})},r3e=({probability:t,team1Name:e,team2Name:r})=>i.jsxs("div",{className:"space-y-6 bg-gray-800 p-8 rounded-lg text-white",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex justify-between items-center mb-2 text-sm",children:i.jsx("span",{className:"text-gray-400",children:"Win Probability Scale"})}),i.jsxs("div",{className:"relative h-8 bg-gray-700 rounded-lg",children:[i.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-1 pointer-events-none",children:[i.jsx("span",{className:"text-xs text-gray-400",children:"0%"}),i.jsx("span",{className:"text-xs text-gray-400",children:"20%"}),i.jsx("span",{className:"text-xs text-gray-400",children:"40%"}),i.jsx("span",{className:"text-xs text-gray-400",children:"60%"}),i.jsx("span",{className:"text-xs text-gray-400",children:"80%"}),i.jsx("span",{className:"text-xs text-gray-400",children:"100%"})]}),[20,40,60,80].map(n=>i.jsx("div",{className:"absolute top-0 bottom-0 border-l border-gray-600/50",style:{left:`${n}%`}},n))]})]}),i.jsxs("div",{className:"mt-16",children:[i.jsx("div",{className:"flex items-center mb-3",children:i.jsx("span",{className:"text-blue-400 font-medium relative -top-4",children:e})}),i.jsxs("div",{className:"relative h-8 bg-gray-700 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 bottom-0 bg-blue-500/30",style:{left:`${t.team1Lower}%`,width:`${t.team1Upper-t.team1Lower}%`}}),i.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 z-10",style:{left:`${t.team1Probability}%`},children:i.jsxs("div",{className:"relative",children:[i.jsxs("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-sm font-bold text-white whitespace-nowrap",children:[t.team1Probability,"% (",t.team1Lower,"-",t.team1Upper,"%)"]}),i.jsx("div",{className:"w-4 h-4 bg-blue-500 transform rotate-45 -translate-x-1/2"})]})})]})]}),i.jsxs("div",{className:"mt-16",children:[i.jsx("div",{className:"flex items-center mb-3",children:i.jsx("span",{className:"text-red-400 font-medium relative -top-4",children:r})}),i.jsxs("div",{className:"relative h-8 bg-gray-700 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 bottom-0 bg-red-500/30",style:{left:`${t.team2Lower}%`,width:`${t.team2Upper-t.team2Lower}%`}}),i.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 z-10",style:{left:`${t.team2Probability}%`},children:i.jsxs("div",{className:"relative",children:[i.jsxs("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-sm font-bold text-white whitespace-nowrap",children:[t.team2Probability,"% (",t.team2Lower,"-",t.team2Upper,"%)"]}),i.jsx("div",{className:"w-4 h-4 bg-red-500 transform rotate-45 -translate-x-1/2"})]})})]})]})]}),n3e=({onBack:t,onUseTeams:e})=>{const{playSound:r}=Ge(),[n,s]=B.useState([]),[a,o]=B.useState([]),[l,A]=B.useState([]),[u,h]=B.useState([]),[c,d]=B.useState(!0),[f,g]=B.useState(!1),[y,v]=B.useState(!1),[m,p]=B.useState(null),[x,w]=B.useState(!1);B.useEffect(()=>{(async()=>{d(!0);try{const j=(await be.getAllPlayers()).filter(I=>I.totalGames>0);j.sort((I,G)=>I.name.localeCompare(G.name)),s(j)}catch(M){console.error("Error loading players:",M)}finally{d(!1)}})()},[]),B.useEffect(()=>{(async()=>{if(l.length>0&&u.length>0)try{const M=l.map(G=>G.id),j=u.map(G=>G.id),I=await be.calculateWinProbabilityWithCI(M,j);p(I)}catch(M){console.error("Error calculating win probability:",M),p(null)}else p(null)})()},[l,u]);const _=()=>{r("buttonClick"),t()},b=k=>{r("buttonClick"),a.some(M=>M.id===k.id)?(o(a.filter(M=>M.id!==k.id)),y&&(A(l.filter(M=>M.id!==k.id)),h(u.filter(M=>M.id!==k.id)))):o([...a,k])},S=(k,M)=>{const j=k.length;if(j<2)return{team1:[...k],team2:[]};const I=[...k].sort((K,O)=>{const oe=M(O)-M(K);return oe!==0?oe:K.id.localeCompare(O.id)}),G=Math.ceil(j/2),X=j-G,Ae=(K=>{const O=[],oe=(me,se)=>{if(se.length===K){O.push([...se]);return}for(let re=me;re<=j-(K-se.length);re++)se.push(re),oe(re+1,se),se.pop()};return oe(0,[]),O})(G);let ie=[],V=1/0;for(const K of Ae){let O=0,oe=0;const me=new Set(K);for(let ve=0;ve<j;ve++){const de=M(I[ve]);me.has(ve)?O+=de:oe+=de}const se=O/G,re=oe/X,Le=Math.abs(se-re);Le<V&&(V=Le,ie=K)}const Y=new Set(ie),U=ie.map(K=>I[K]),H=I.filter((K,O)=>!Y.has(O));return{team1:U,team2:H}},E=async()=>{if(!(a.length<4)){g(!0),r("phaseChange");try{const{team1:k,team2:M}=S(a,j=>be.getDisplayRating(j));A(k),h(M),w(!1)}catch(k){console.error("Error balancing teams:",k)}finally{g(!1)}}},C=async()=>{if(!(a.length<4)){g(!0),r("phaseChange");try{const{team1:k,team2:M}=S(a,j=>j.totalGames);A(k),h(M),w(!1)}catch(k){console.error("Error balancing teams by experience:",k)}finally{g(!1)}}},N=()=>{if(a.length<4)return;r("phaseChange");const k=[...a];for(let j=k.length-1;j>0;j--){const I=Math.floor(Math.random()*(j+1));[k[j],k[I]]=[k[I],k[j]]}const M=Math.ceil(k.length/2);A(k.slice(0,M)),h(k.slice(M)),w(!1)},Q=()=>{r("buttonClick"),A([]),h([]),w(!1)},P=()=>{r("buttonClick"),o([]),A([]),h([]),w(!1)},F=()=>{r("toggleSwitch"),y&&(A([]),h([]),w(!1)),v(!y)},$=()=>{r("buttonClick"),w(!x)},L=(k,M)=>{y&&(r("buttonClick"),M===1?(h(u.filter(j=>j.id!==k.id)),l.some(j=>j.id===k.id)||A([...l,k])):(A(l.filter(j=>j.id!==k.id)),u.some(j=>j.id===k.id)||h([...u,k])),(l.length>0||M===1)&&(u.length>0||M===2)&&w(!1))},D=()=>{if(e&&l.length>0&&u.length>0){r("phaseChange");const k=l.map(j=>j.id),M=u.map(j=>j.id);e(k,M)}},z={ranking:"Find the optimal team assignment that minimizes the difference in average skill between teams. Equal team sizes guaranteed. Same players always produce the same teams.",experience:"Find the optimal team assignment that minimizes the difference in average experience (games played) between teams. Equal team sizes guaranteed. Same players always produce the same teams.",random:"Create random teams without consideration for player skill or experience. Each click generates a completely new random configuration.",manual:"Enable manual team assignment mode to create teams by hand. You can move players between teams freely to create custom matchups.",reset:"Reset both teams and start over. Player selection will be maintained but no players will be assigned to teams."};return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("button",{onClick:_,className:"flex items-center text-gray-300 hover:text-white",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Menu"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Match Maker"})]}),c?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):i.jsxs("div",{children:[i.jsx("div",{className:"bg-gray-700/50 p-4 rounded-lg mb-6",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Dt,{size:20,className:"mr-3 text-blue-400 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-1",children:"How Match Maker Works"}),i.jsx("p",{className:"text-sm text-gray-300",children:"Select players to include, then balance teams based on player skill or experience (games played)."})]})]})}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-xl font-semibold",children:["Select Players (",a.length," selected)"]}),a.length>0&&i.jsx("button",{onClick:P,className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm",children:"Reset Selection"})]}),n.length>0?i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:n.map(k=>{const M=a.some(j=>j.id===k.id);return i.jsxs("div",{className:`relative p-3 rounded-lg cursor-pointer transition-all ${M?"bg-blue-900/50 ring-2 ring-blue-500":"bg-gray-700 hover:bg-gray-600"}`,onClick:()=>b(k),children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"font-medium mb-1 truncate w-full text-center",children:k.name}),i.jsxs("div",{className:"text-sm mb-1",children:["(",be.getDisplayRating(k),")"]}),i.jsxs("div",{className:"text-xs text-gray-400",children:["W: ",k.wins," L: ",k.losses]})]}),M&&i.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 rounded-full p-1",children:i.jsx(Js,{size:14,className:"transform rotate-45"})})]},k.id)})}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-center",children:[i.jsx(et,{size:32,className:"text-gray-500 mb-2"}),i.jsx("p",{className:"text-gray-400",children:"No players available"})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("div",{className:"mb-4",children:i.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg mx-auto max-w-2xl",children:[i.jsxs("div",{className:"flex items-center justify-center bg-gray-700/80 p-2 rounded-t-lg mb-3",children:[i.jsx(zc,{size:18,className:"mr-2 text-blue-400"}),i.jsx("span",{className:"font-medium",children:"Balance Teams"})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[i.jsx("div",{className:"hidden sm:block",children:i.jsx(Ue,{text:z.ranking,maxWidth:"max-w-md",children:i.jsxs("button",{onClick:E,disabled:a.length<4||f||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${a.length<4||f||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-blue-600 hover:bg-blue-500"}`,children:[f?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):i.jsx(af,{size:18,className:"mr-2"}),i.jsx("span",{children:"On Ranking"})]})})}),i.jsx("div",{className:"sm:hidden",children:i.jsxs("button",{onClick:E,disabled:a.length<4||f||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${a.length<4||f||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-blue-600 hover:bg-blue-500"}`,children:[f?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):i.jsx(af,{size:18,className:"mr-2"}),i.jsx("span",{children:"On Ranking"})]})}),i.jsx("div",{className:"hidden sm:block",children:i.jsx(Ue,{text:z.experience,maxWidth:"max-w-md",children:i.jsxs("button",{onClick:C,disabled:a.length<4||f||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${a.length<4||f||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-green-600 hover:bg-green-500"}`,children:[f?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):i.jsx(as,{size:18,className:"mr-2"}),i.jsx("span",{children:"On Experience"})]})})}),i.jsx("div",{className:"sm:hidden",children:i.jsxs("button",{onClick:C,disabled:a.length<4||f||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${a.length<4||f||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-green-600 hover:bg-green-500"}`,children:[f?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):i.jsx(as,{size:18,className:"mr-2"}),i.jsx("span",{children:"On Experience"})]})}),i.jsx("div",{className:"hidden sm:block",children:i.jsx(Ue,{text:z.random,maxWidth:"max-w-md",children:i.jsxs("button",{onClick:N,disabled:a.length<4||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${a.length<4||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-purple-600 hover:bg-purple-500"}`,children:[i.jsx(hy,{size:18,className:"mr-2"}),i.jsx("span",{children:"Random"})]})})}),i.jsx("div",{className:"sm:hidden",children:i.jsxs("button",{onClick:N,disabled:a.length<4||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${a.length<4||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-purple-600 hover:bg-purple-500"}`,children:[i.jsx(hy,{size:18,className:"mr-2"}),i.jsx("span",{children:"Random"})]})})]})]})}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[i.jsx("div",{className:"hidden sm:block",children:i.jsx(Ue,{text:z.manual,maxWidth:"max-w-md",children:i.jsxs("button",{onClick:F,disabled:a.length<4,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${a.length<4?"opacity-50 cursor-not-allowed bg-gray-600":y?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 hover:bg-gray-600"}`,children:[i.jsx(et,{size:18,className:"mr-2"}),i.jsx("span",{children:"Manual Mode"})]})})}),i.jsx("div",{className:"sm:hidden",children:i.jsxs("button",{onClick:F,disabled:a.length<4,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${a.length<4?"opacity-50 cursor-not-allowed bg-gray-600":y?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 hover:bg-gray-600"}`,children:[i.jsx(et,{size:18,className:"mr-2"}),i.jsx("span",{children:"Manual Mode"})]})}),(l.length>0||u.length>0)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden sm:block",children:i.jsx(Ue,{text:z.reset,maxWidth:"max-w-md",children:i.jsxs("button",{onClick:Q,className:"px-4 py-3 w-full bg-red-700 hover:bg-red-600 rounded-lg flex items-center justify-center",children:[i.jsx(ca,{size:18,className:"mr-2"}),i.jsx("span",{children:"Reset Teams"})]})})}),i.jsx("div",{className:"sm:hidden",children:i.jsxs("button",{onClick:Q,className:"px-4 py-3 w-full bg-red-700 hover:bg-red-600 rounded-lg flex items-center justify-center",children:[i.jsx(ca,{size:18,className:"mr-2"}),i.jsx("span",{children:"Reset Teams"})]})})]})]})]}),(l.length>0||u.length>0)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans Team",l.length>0&&i.jsxs("span",{className:"ml-3 text-sm font-normal",children:["Avg Skill: ",Math.round(l.reduce((k,M)=>k+be.getDisplayRating(M),0)/l.length)]})]}),i.jsx("div",{className:"space-y-2",children:l.map(k=>i.jsxs("div",{className:"bg-blue-900/50 rounded-lg p-3 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:k.name}),i.jsxs("div",{className:"text-sm text-gray-300",children:["(",be.getDisplayRating(k),")"]})]}),y&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden sm:block",children:i.jsx(Ue,{text:"Move to Atlanteans team",children:i.jsx("button",{onClick:()=>L(k,2),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-red-400 hover:text-red-300","aria-label":"Move to Atlanteans",children:i.jsx(k_,{size:16})})})}),i.jsx("div",{className:"sm:hidden",children:i.jsx("button",{onClick:()=>L(k,2),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-red-400 hover:text-red-300","aria-label":"Move to Atlanteans",children:i.jsx(k_,{size:16})})})]})]},k.id))})]}),i.jsxs("div",{className:"bg-red-900/30 border border-red-800 rounded-lg p-4",children:[i.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center",children:[i.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans Team",u.length>0&&i.jsxs("span",{className:"ml-3 text-sm font-normal",children:["Avg Skill: ",Math.round(u.reduce((k,M)=>k+be.getDisplayRating(M),0)/u.length)]})]}),i.jsx("div",{className:"space-y-2",children:u.map(k=>i.jsxs("div",{className:"bg-red-900/50 rounded-lg p-3 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:k.name}),i.jsxs("div",{className:"text-sm text-gray-300",children:["(",be.getDisplayRating(k),")"]})]}),y&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden sm:block",children:i.jsx(Ue,{text:"Move to Titans team",children:i.jsx("button",{onClick:()=>L(k,1),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-blue-400 hover:text-blue-300","aria-label":"Move to Titans",children:i.jsx(dy,{size:16})})})}),i.jsx("div",{className:"sm:hidden",children:i.jsx("button",{onClick:()=>L(k,1),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-blue-400 hover:text-blue-300","aria-label":"Move to Titans",children:i.jsx(dy,{size:16})})})]})]},k.id))})]})]}),l.length>0&&u.length>0&&e&&i.jsx("div",{className:"mt-6 flex justify-center",children:i.jsxs("button",{onClick:D,className:"px-8 py-4 bg-green-600 hover:bg-green-500 rounded-lg flex items-center text-xl",children:[i.jsx(qx,{size:24,className:"mr-3"}),"Use These Teams in Game Setup"]})})]}),y&&a.length>0&&i.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg p-4",children:[i.jsx("h3",{className:"font-bold text-lg mb-3",children:"Unassigned Players"}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:a.filter(k=>!l.some(M=>M.id===k.id)&&!u.some(M=>M.id===k.id)).map(k=>i.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:k.name}),i.jsxs("div",{className:"text-sm text-gray-300",children:["(",be.getDisplayRating(k),")"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>L(k,1),className:"px-2 py-1 bg-blue-700 hover:bg-blue-600 rounded-md text-xs",children:"Titans"}),i.jsx("button",{onClick:()=>L(k,2),className:"px-2 py-1 bg-red-700 hover:bg-red-600 rounded-md text-xs",children:"Atlanteans"})]})]},k.id))})]}),m!==null&&l.length>0&&u.length>0&&i.jsxs("div",{className:"mt-8 bg-gray-700 rounded-lg overflow-hidden",children:[i.jsxs("div",{className:"p-4 bg-gray-700 cursor-pointer flex justify-between items-center",onClick:$,children:[i.jsxs("h3",{className:"font-semibold flex items-center",children:[i.jsx(zc,{size:16,className:"mr-2 text-yellow-400"}),"Predicted Win Probability"]}),x?i.jsx(ls,{size:18}):i.jsx(pn,{size:18})]}),x&&i.jsxs("div",{className:"p-6 pb-4 border-t border-gray-600",children:[i.jsx(r3e,{probability:m,team1Name:"Titans",team2Name:"Atlanteans"}),i.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[i.jsx("p",{className:"mb-2",children:"Prediction based on TrueSkill ratings. The diamond shows the point estimate, and the shaded region shows the 95% confidence interval."}),i.jsxs("p",{children:[i.jsx("strong",{children:"Wider bands"})," indicate less certainty (teams with newer players). ",i.jsx("strong",{children:"Narrow bands"})," indicate high confidence in the prediction."]})]})]})]}),y&&i.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:i.jsxs("p",{className:"flex items-start",children:[i.jsx(Dt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Manual Mode allows you to assign players to teams directly. Use the arrow buttons to move players between teams or the team buttons for unassigned players."})]})})]})]})},s3e=({onBack:t})=>{const{playSound:e}=Ge(),[r,n]=B.useState([]),[s,a]=B.useState(!0),[o,l]=B.useState(""),[A,u]=B.useState("games"),[h,c]=B.useState("desc"),[d,f]=B.useState("all"),[g,y]=B.useState("all"),[v,m]=B.useState(!1),[p,x]=B.useState(!1),[w,_]=B.useState(()=>{const U=localStorage.getItem("heroStats_minGames");return U?parseInt(U,10):1}),[b,S]=B.useState(()=>{const U=localStorage.getItem("heroStats_recencyMonths");return U?parseInt(U,10):null}),E=B.useRef(null),[C,N]=B.useState(null),[Q,P]=B.useState(!1),[F,$]=B.useState(void 0),L=B.useMemo(()=>{if(b===null)return{startDate:void 0,endDate:void 0};const U=new Date,H=new Date;return H.setMonth(H.getMonth()-b),{startDate:H,endDate:U}},[b]);B.useEffect(()=>{(async()=>{a(!0);try{const H=await be.getHeroStats(w,L.startDate,L.endDate);n(H)}catch(H){console.error("Error loading hero stats:",H)}finally{a(!1)}})()},[w,L.startDate,L.endDate]),B.useEffect(()=>{localStorage.setItem("heroStats_minGames",w.toString())},[w]),B.useEffect(()=>{b===null?localStorage.removeItem("heroStats_recencyMonths"):localStorage.setItem("heroStats_recencyMonths",b.toString())},[b]);const D=()=>{e("buttonClick"),t()},z=async()=>{if(E.current){e("buttonClick"),x(!0);try{P(!1),E.current.classList.add("taking-screenshot");const U=document.createElement("div");U.className="screenshot-title text-center mb-6",U.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Hero Statistics</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,E.current.insertBefore(U,E.current.firstChild);const H=document.createElement("div");H.className="screenshot-footer text-center mt-8 text-sm text-gray-400",H.innerHTML=`
        <p>Generated by Guards of Atlantis II Timer App on ${new Date().toLocaleString()}</p>
      `,E.current.appendChild(H);const K=E.current.querySelectorAll(".no-screenshot");K.forEach(se=>{se.style.display="none"});const oe=(await Dg(E.current,{backgroundColor:"#1F2937",windowWidth:1400,scrollX:0,scrollY:0,scale:window.devicePixelRatio||1,logging:!1,allowTaint:!0,useCORS:!0,onclone:se=>{const re=se.querySelector("#screenshotContent");re&&(re.scrollTop=0)}})).toDataURL("image/png"),me=document.createElement("a");me.download=`guards-of-atlantis-hero-stats-${new Date().toISOString().slice(0,10)}.png`,me.href=oe,me.click(),E.current.removeChild(U),E.current.removeChild(H),E.current.classList.remove("taking-screenshot"),K.forEach(se=>{se.style.display=""})}catch(U){console.error("Error creating screenshot:",U)}finally{x(!1)}}},k=U=>{e("buttonClick"),U===A?c(h==="asc"?"desc":"asc"):(u(U),c("desc"))},M=()=>{e("buttonClick"),m(!v)},j=()=>{e("buttonClick"),l(""),f("all"),y("all"),_(1),S(null),m(!1)},I=(U,H)=>{const K=H.currentTarget.getBoundingClientRect();$({x:K.x,y:K.y,width:K.width,height:K.height}),N(U),P(!0)},G=()=>{P(!1)},X=(U,H)=>{const K=H.currentTarget.getBoundingClientRect();$({x:K.x,y:K.y,width:K.width,height:K.height}),(C==null?void 0:C.id)===U.id&&Q?P(!1):(N(U),P(!0))},te=R.useMemo(()=>{const U=new Set;return r.forEach(H=>{H.roles.forEach(K=>U.add(K))}),Array.from(U).sort()},[r]),Ae=R.useMemo(()=>{const U=new Set;return r.forEach(H=>{U.add(H.expansion)}),Array.from(U).sort()},[r]),ie=r.filter(U=>{if(o){const H=o.toLowerCase();return U.heroName.toLowerCase().includes(H)||U.roles.some(K=>K.toLowerCase().includes(H))}return!(d!=="all"&&U.expansion!==d||g!=="all"&&!U.roles.includes(g))}).sort((U,H)=>{let K=0;switch(A){case"name":K=U.heroName.localeCompare(H.heroName);break;case"games":K=U.totalGames-H.totalGames;break;case"winRate":K=U.winRate-H.winRate;break;case"complexity":K=U.complexity-H.complexity;break;default:K=0}return h==="asc"?K:-K}),V=U=>Zi.find(H=>H.id===U),Y=U=>{const H=V(U.heroId);return H?i.jsxs("div",{className:"flex flex-col items-center p-1 bg-gray-800 rounded-lg hover:bg-gray-700 cursor-pointer relative",onMouseEnter:K=>I(H,K),onMouseLeave:G,onClick:K=>X(H,K),children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mb-1",children:i.jsx("img",{src:H.icon,alt:H.name,className:"w-full h-full object-cover",onError:K=>{K.target.src="https://via.placeholder.com/48?text=Hero"}})}),i.jsx("div",{className:"text-xs text-center truncate w-full",children:U.heroName}),i.jsxs("div",{className:"text-xs text-gray-400",children:[U.winRate.toFixed(0),"% (",U.gamesPlayed,")"]})]},U.heroId):null};return B.useEffect(()=>{const U=document.createElement("style");return U.type="text/css",U.innerHTML=`
      /* Styles applied during screenshot taking */
      .taking-screenshot {
        background-color: #1F2937 !important;
        padding: 2rem !important;
        width: 1400px !important; /* Increased width for more space */
        position: relative !important;
        overflow: visible !important;
      }
      
      .screenshot-title {
        color: white;
        margin-bottom: 2rem;
      }
      
      .screenshot-footer {
        color: #9CA3AF;
        margin-top: 2rem;
        border-top: 1px solid #4B5563;
        padding-top: 1rem;
      }
      
      /* Hide elements with no-screenshot class */
      .taking-screenshot .no-screenshot {
        display: none !important;
      }
      
      /* Make all hero cards look good in screenshot */
      .taking-screenshot .bg-gray-700 {
        background-color: rgba(55, 65, 81, 0.8) !important;
        padding: 1.5rem !important; /* More padding in cards */
      }
      
      .taking-screenshot .bg-gray-800 {
        background-color: rgba(31, 41, 55, 0.9) !important;
        padding: 1.25rem !important; /* More padding in card headers */
      }
      
      /* Adjust grid layout for screenshots */
      .taking-screenshot .grid {
        grid-template-columns: repeat(2, 1fr) !important; /* Force 2 columns for more space */
        gap: 2rem !important; /* Increase gap between cards */
      }
      
      /* Fix nested grids (like teammate grids) */
      .taking-screenshot .grid .grid {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 0.75rem !important;
      }
      
      /* Ensure text doesn't get cut off */
      .taking-screenshot .text-sm,
      .taking-screenshot .text-xs {
        overflow: visible !important;
        white-space: normal !important;
        line-height: 1.4 !important;
      }
      
      /* Fix for tooltip icons - ensure they're visible */
      .taking-screenshot .flex.items-center {
        display: flex !important;
        align-items: center !important;
        margin-bottom: 0.5rem !important;
      }
      
      .taking-screenshot .flex.items-center svg {
        margin-left: 0.5rem !important;
        visibility: visible !important;
        display: inline-block !important;
      }
      
      /* Make sure section headers have proper spacing */
      .taking-screenshot h4.font-semibold {
        display: inline-block !important;
        margin-right: 0.5rem !important;
      }
      
      /* Make sure progress bars show up correctly */
      .taking-screenshot .bg-red-600 {
        background-color: rgba(220, 38, 38, 0.9) !important;
      }
      
      .taking-screenshot .bg-green-500 {
        background-color: rgba(34, 197, 94, 0.9) !important;
      }
      
      /* Space out section titles */
      .taking-screenshot h4 {
        margin-top: 1rem !important;
        margin-bottom: 0.75rem !important;
      }
    `,document.head.appendChild(U),()=>{document.head.removeChild(U)}},[]),i.jsxs("div",{ref:E,id:"screenshotContent",className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 no-screenshot",children:[i.jsxs("button",{onClick:D,className:"flex items-center text-gray-300 hover:text-white",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Menu"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Hero Statistics"}),i.jsx(Ue,{text:"Take a screenshot of all hero statistics",position:"left",children:i.jsxs("button",{onClick:z,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",disabled:p,children:[i.jsx(b0,{size:18,className:"mr-2"}),i.jsx("span",{children:p?"Capturing...":"Share Stats"})]})})]}),i.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 no-screenshot",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[i.jsxs("div",{className:"relative flex-grow",children:[i.jsx("input",{type:"text",value:o,onChange:U=>l(U.target.value),placeholder:"Search heroes or roles...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx(lo,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:()=>k("games"),className:`px-3 py-1 rounded ${A==="games"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Games ",A==="games"&&(h==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>k("winRate"),className:`px-3 py-1 rounded ${A==="winRate"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Win Rate ",A==="winRate"&&(h==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>k("complexity"),className:`px-3 py-1 rounded ${A==="complexity"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Complexity ",A==="complexity"&&(h==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>k("name"),className:`px-3 py-1 rounded ${A==="name"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Name ",A==="name"&&(h==="asc"?"":"")]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:M,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[i.jsx(vu,{size:18,className:"mr-2"}),i.jsx("span",{children:"Filters"}),(d!=="all"||g!=="all"||w!==1||b!==null)&&i.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(d!=="all"?1:0)+(g!=="all"?1:0)+(w!==1?1:0)+(b!==null?1:0)}),v?i.jsx(ls,{size:16,className:"ml-2"}):i.jsx(pn,{size:16,className:"ml-2"})]}),v&&i.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-72",children:[i.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Time Period"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center cursor-pointer",children:[i.jsx("input",{type:"radio",name:"timePeriod",checked:b===null,onChange:()=>S(null),className:"mr-2 accent-blue-500"}),i.jsx("span",{className:"text-sm",children:"All Time"})]}),i.jsxs("label",{className:"flex items-center cursor-pointer",children:[i.jsx("input",{type:"radio",name:"timePeriod",checked:b!==null,onChange:()=>S(b||6),className:"mr-2 accent-blue-500"}),i.jsx("span",{className:"text-sm mr-2",children:"Last"}),i.jsx("input",{type:"number",min:"1",max:"24",value:b||6,onChange:U=>{const H=parseInt(U.target.value,10);!isNaN(H)&&H>=1&&H<=24&&S(H)},disabled:b===null,className:"w-16 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),i.jsx("span",{className:"text-sm ml-2",children:"months"})]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Expansion"}),i.jsxs("select",{value:d,onChange:U=>f(U.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[i.jsx("option",{value:"all",children:"All Expansions"}),Ae.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Role"}),i.jsxs("select",{value:g,onChange:U=>y(U.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[i.jsx("option",{value:"all",children:"All Roles"}),te.map(U=>i.jsx("option",{value:U,children:U},U))]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Min games for relationships"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>_(U=>Math.max(1,U-1)),disabled:w<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:""}),i.jsx("div",{className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-center font-medium",children:w}),i.jsx("button",{onClick:()=>_(U=>Math.min(20,U+1)),disabled:w>=20,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:"+"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only show teammate/opponent stats with at least this many shared games"})]}),i.jsx("button",{onClick:j,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),(d!=="all"||g!=="all"||o!=="")&&i.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg screenshot-info",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Filtered View:"}),i.jsxs("ul",{className:"text-sm space-y-1",children:[d!=="all"&&i.jsxs("li",{children:["Expansion: ",d]}),g!=="all"&&i.jsxs("li",{children:["Role: ",g]}),o!==""&&i.jsxs("li",{children:['Search Term: "',o,'"']})]})]}),b!==null&&L.startDate&&L.endDate&&i.jsxs("div",{className:"mb-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center",children:[i.jsx(Nn,{size:18,className:"mr-2 text-blue-400 flex-shrink-0"}),i.jsxs("span",{className:"text-sm text-blue-200",children:["Showing stats from"," ",i.jsx("span",{className:"font-medium",children:L.startDate.toLocaleDateString()})," ","to"," ",i.jsx("span",{className:"font-medium",children:L.endDate.toLocaleDateString()})," ","(",b," month",b!==1?"s":"",")"]})]}),s?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):i.jsx("div",{children:ie.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:ie.map(U=>{const H=V(U.heroId),K=(H==null?void 0:H.icon)||U.icon||`heroes/${U.heroName.toLowerCase().replace(/\s+/g,"")}.png`;return i.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md",children:[i.jsxs("div",{className:"px-5 py-4 bg-gray-800 flex items-center cursor-pointer",onMouseEnter:O=>I(V(U.heroId),O),onMouseLeave:G,onClick:O=>X(V(U.heroId),O),children:[i.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-full overflow-hidden mr-4 flex-shrink-0",children:i.jsx("img",{src:K,alt:U.heroName,className:"w-full h-full object-cover",onError:O=>{O.target.src="https://via.placeholder.com/64?text=Hero"}})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold",children:U.heroName}),i.jsx("div",{className:"text-sm text-gray-300",children:U.roles.join("  ")}),i.jsxs("div",{className:"text-xs text-blue-400 mt-1",children:[U.expansion,"  Complexity: ",U.complexity]})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("div",{className:"text-sm text-gray-400 flex items-center",children:[i.jsx("span",{children:"Win Rate"}),i.jsx(Dt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),i.jsxs("div",{className:"font-medium",children:[U.winRate.toFixed(1),"%"]})]}),i.jsx("div",{className:"h-2 bg-red-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-green-500",style:{width:`${U.winRate}%`}})}),i.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-400",children:[i.jsxs("span",{children:["Wins: ",U.wins]}),i.jsxs("span",{children:["Losses: ",U.losses]}),i.jsxs("span",{children:["Total: ",U.totalGames]})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Best Teammates"}),i.jsx(Dt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),U.bestTeammates.length>0?i.jsx("div",{className:"grid grid-cols-3 gap-2",children:U.bestTeammates.map(O=>Y(O))}):i.jsx("div",{className:"text-sm text-gray-500 italic",children:"No data available"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Best Against"}),i.jsx(Dt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),U.bestAgainst.length>0?i.jsx("div",{className:"grid grid-cols-3 gap-2",children:U.bestAgainst.map(O=>Y(O))}):i.jsx("div",{className:"text-sm text-gray-500 italic",children:"No data available"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("h4",{className:"font-semibold text-sm",children:"Countered By"}),i.jsx(Dt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),U.worstAgainst.length>0?i.jsx("div",{className:"grid grid-cols-3 gap-2",children:U.worstAgainst.map(O=>Y(O))}):i.jsx("div",{className:"text-sm text-gray-500 italic",children:"No data available"})]})]})]},U.heroId)})}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx(At,{size:48,className:"text-gray-500 mb-4"}),i.jsx("p",{className:"text-xl text-gray-400",children:o||d!=="all"||g!=="all"?"No heroes found matching your filters":"No hero data available"}),(o||d!=="all"||g!=="all")&&i.jsx("button",{onClick:j,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg no-screenshot",children:"Clear Filters"})]})}),C&&i.jsx(tN,{hero:C,isVisible:Q,onClose:()=>P(!1),cardPosition:F}),i.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:[i.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[i.jsx(Dt,{size:16,className:"mr-2 text-blue-400"}),"About Hero Statistics"]}),i.jsx("p",{className:"mb-2",children:"These statistics show hero performance based on your match history. Win rates and synergies are calculated from your recorded matches, so they reflect your group's playstyle and may differ from general statistics."})]})]})},a3e=({onBack:t})=>{const{playSound:e}=Ge(),[r,n]=B.useState(!1),[s,a]=B.useState(null),[o,l]=B.useState(null),[A,u]=B.useState(new Date().toISOString().split("T")[0]),[h,c]=B.useState(new Date().toTimeString().split(" ")[0].substring(0,5)),[d,f]=B.useState($e.Long),[g,y]=B.useState(!1),[v,m]=B.useState(W.Titans),[p,x]=B.useState([]),[w,_]=B.useState(!1),[b,S]=B.useState(-1),[E,C]=B.useState($l()),[N,Q]=B.useState(""),[P,F]=B.useState(4),[$,L]=B.useState("name"),[D,z]=B.useState("asc"),[k,M]=B.useState({}),[j,I]=B.useState([]),[G,X]=B.useState([]),[te,Ae]=B.useState(!1),[ie,V]=B.useState(new Map),[Y,U]=B.useState(new Map),[H,K]=B.useState({kills:!1,deaths:!1,assists:!1,goldEarned:!1,minionKills:!1,level:!1}),[O,oe]=B.useState([]);B.useEffect(()=>{(async()=>{try{const je=(await be.getAllPlayers()).map(Je=>Je.name);oe(je)}catch(ce){console.error("Error loading player names:",ce)}})(),p.length>0&&gr()},[]);const me=()=>{e("buttonClick"),t()},se=()=>{const J={};return H.kills&&(J.kills=0),H.deaths&&(J.deaths=0),H.assists&&(J.assists=0),H.goldEarned&&(J.goldEarned=0),H.minionKills&&(J.minionKills=0),H.level&&(J.level=1),J},re=J=>{e("buttonClick");const ce={...H,[J]:!H[J]};if(K(ce),te){const je=new Map;p.forEach((Je,ar)=>{const Ye=ie.get(ar)||{},Ot={};ce.kills&&(Ot.kills=Ye.kills??0),ce.deaths&&(Ot.deaths=Ye.deaths??0),ce.assists&&(Ot.assists=Ye.assists??0),ce.goldEarned&&(Ot.goldEarned=Ye.goldEarned??0),ce.minionKills&&(Ot.minionKills=Ye.minionKills??0),ce.level&&(Ot.level=Ye.level??1),je.set(ar,Ot)}),V(je),U(new Map)}},Le=()=>{if(e("buttonClick"),Ae(!te),!te){const J=new Map;p.forEach((ce,je)=>{J.set(je,se())}),V(J)}},ve=(J,ce)=>{const je=[];return H.kills&&ce.kills!==void 0&&(ce.kills<0||ce.kills>50)&&je.push("Kills must be between 0 and 50"),H.deaths&&ce.deaths!==void 0&&(ce.deaths<0||ce.deaths>20)&&je.push("Deaths must be between 0 and 20"),H.assists&&ce.assists!==void 0&&(ce.assists<0||ce.assists>100)&&je.push("Assists must be between 0 and 100"),H.goldEarned&&ce.goldEarned!==void 0&&(ce.goldEarned<0||ce.goldEarned>1e4)&&je.push("Gold earned must be between 0 and 10,000"),H.minionKills&&ce.minionKills!==void 0&&(ce.minionKills<0||ce.minionKills>200)&&je.push("Minion kills must be between 0 and 200"),H.level&&ce.level!==void 0&&(ce.level<1||ce.level>8)&&je.push("Level must be between 1 and 8"),je},de=(J,ce)=>{const je=new Map(ie);je.set(J,ce),V(je);const Je=ve(J,ce),ar=new Map(Y);Je.length>0?ar.set(J,Je):ar.delete(J),U(ar)},Me=J=>{e("buttonClick");const ce=new Map(ie);ce.set(J,se()),V(ce);const je=new Map(Y);je.delete(J),U(je)},ze=()=>{e("buttonClick");const J=new Map;p.forEach((ce,je)=>{J.set(je,se())}),V(J),U(new Map)},$t=J=>{if(p.length>=10){M({...k,maxPlayers:"Maximum 10 players allowed"});return}e("buttonClick");const ce={id:"",name:"",team:J,heroId:null,heroName:"",heroRoles:[]},je=p.length;if(x([...p,ce]),te){const Je=new Map(ie);Je.set(je,se()),V(Je)}M({...k,players:void 0,maxPlayers:void 0})},Ee=J=>{e("buttonClick");const ce=[...p];if(ce.splice(J,1),x(ce),te){const je=new Map,Je=new Map;ce.forEach((ar,Ye)=>{const Ot=Ye>=J?Ye+1:Ye;ie.has(Ot)&&je.set(Ye,ie.get(Ot)),Y.has(Ot)&&Je.set(Ye,Y.get(Ot))}),V(je),U(Je)}gr(ce)},nt=(J,ce)=>{const je=[...p];je[J].id=ce,je[J].name=ce,x(je),gr(je)},gr=(J=p)=>{const ce=J.map(De=>De.id.trim()).filter(De=>De!==""),je={},Je=[];ce.forEach(De=>{je[De]=(je[De]||0)+1,je[De]>1&&!Je.includes(De)&&Je.push(De)}),I(Je);const ar=J.map(De=>De.heroId).filter(De=>De!==null),Ye={},Ot=[];ar.forEach(De=>{Ye[De]=(Ye[De]||0)+1,Ye[De]>1&&!Ot.includes(De)&&Ot.push(De)}),X(Ot)},Qs=J=>{e("buttonClick"),S(J),_(!0)},Ca=J=>{if(e("heroSelect"),b===-1)return;const ce=[...p];ce[b].heroId=J.id,ce[b].heroName=J.name,ce[b].heroRoles=J.roles,x(ce),gr(ce),_(!1),M({...k,heroes:void 0,heroDuplicates:void 0})},So=J=>{e("buttonClick"),E.includes(J)?C(E.filter(ce=>ce!==J)):C([...E,J])},pi=J=>{e("buttonClick"),$===J?z(D==="asc"?"desc":"asc"):(L(J),z("asc"))},jo=()=>{const J={};A||(J.date="Match date is required"),p.length<4&&(J.players="At least 4 players are required (2 per team)"),p.length>10&&(J.maxPlayers="Maximum 10 players allowed"),p.some(De=>!De.id.trim())&&(J.players="All players must have names");const ce=p.map(De=>De.id.trim());if(new Set(ce).size!==ce.length){const De=ce.filter((Ps,Kr)=>Ps&&ce.indexOf(Ps)!==Kr);J.players=`Duplicate player names found: ${[...new Set(De)].join(", ")}`}const Je=p.filter(De=>De.team===W.Titans),ar=p.filter(De=>De.team===W.Atlanteans);(Je.length<2||ar.length<2)&&(J.teams="Each team must have at least 2 players"),Math.abs(Je.length-ar.length)>1&&(J.teamBalance="Teams must be balanced (equal count or differ by at most 1 player)"),p.some(De=>De.heroId===null)&&(J.heroes="All players must select a hero");const Ye=p.map(De=>De.heroId).filter(De=>De!==null);if(new Set(Ye).size!==Ye.length){const De=Ye.filter((Kr,Ds)=>Kr!==null&&Ye.indexOf(Kr)!==Ds),Ps=p.filter(Kr=>Kr.heroId!==null&&De.includes(Kr.heroId)).map(Kr=>Kr.heroName).filter((Kr,Ds,No)=>No.indexOf(Kr)===Ds);J.heroDuplicates=`Duplicate heroes selected: ${Ps.join(", ")}`}if(te){let De=!1;const Ps=new Map;p.forEach((Kr,Ds)=>{const No=ie.get(Ds);if(No){const Xu=ve(Ds,No);Xu.length>0&&(Ps.set(Ds,Xu),De=!0)}}),De&&(J.stats="Please fix player statistics errors before submitting",U(Ps))}return M(J),Object.keys(J).length===0},ko=async()=>{if(!jo()){e("buttonClick");return}n(!0),a(null),l(null);try{const J={date:new Date(`${A}T${h||"00:00"}`),winningTeam:v,gameLength:d,doubleLanes:g},ce=p.map((je,Je)=>{const ar={id:je.id,team:je.team,heroId:je.heroId,heroName:je.heroName,heroRoles:je.heroRoles};if(te&&ie.has(Je)){const Ye=ie.get(Je);return{...ar,kills:H.kills?Ye.kills:void 0,deaths:H.deaths?Ye.deaths:void 0,assists:H.assists?Ye.assists:void 0,goldEarned:H.goldEarned?Ye.goldEarned:void 0,minionKills:H.minionKills?Ye.minionKills:void 0,level:H.level?Ye.level:void 0}}return{...ar,kills:void 0,deaths:void 0,assists:void 0,goldEarned:void 0,minionKills:void 0,level:void 0}});await be.recordMatch(J,ce),e("phaseChange"),a("Match successfully recorded!"),x([]),u(new Date().toISOString().split("T")[0]),c(new Date().toTimeString().split(" ")[0].substring(0,5))}catch(J){console.error("Error recording match:",J),l("Failed to record match. Please try again.")}finally{n(!1)}},Eo=(()=>{let J=Wx(E).filter(ce=>ce.complexity<=P);if(N){const ce=N.toLowerCase();J=J.filter(je=>je.name.toLowerCase().includes(ce)||je.roles.some(Je=>Je.toLowerCase().includes(ce)))}return J.sort((ce,je)=>{let Je=0;return $==="name"?Je=ce.name.localeCompare(je.name):Je=ce.complexity-je.complexity,D==="asc"?Je:-Je}),J})();return i.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("button",{onClick:me,className:"flex items-center text-gray-300 hover:text-white",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Menu"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Record Match"})]}),i.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(eo,{size:20,className:"text-blue-400 mr-3 mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-blue-300 mb-1",children:"Manual Match Recording"}),i.jsx("p",{className:"text-sm",children:"Use this form to record matches played outside the timer app. Note that matches played using the drafting system and timer are automatically recorded."})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[i.jsx(Nn,{size:18,className:"mr-2 text-blue-400"}),"Match Details"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Match Date"}),i.jsx("input",{type:"date",value:A,onChange:J=>u(J.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.date&&i.jsx("div",{className:"text-red-400 text-sm mt-1",children:k.date})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Match Time (optional)"}),i.jsx("input",{type:"time",value:h,onChange:J=>c(J.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Game Type"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"radio",name:"gameLength",value:$e.Quick,checked:d===$e.Quick,onChange:()=>f($e.Quick),className:"form-radio h-5 w-5 text-blue-600"}),i.jsx("span",{className:"ml-2",children:"Quick"})]}),i.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"radio",name:"gameLength",value:$e.Long,checked:d===$e.Long,onChange:()=>f($e.Long),className:"form-radio h-5 w-5 text-blue-600"}),i.jsx("span",{className:"ml-2",children:"Long"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Lane Configuration"}),i.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:g,onChange:()=>y(!g),className:"form-checkbox h-5 w-5 text-blue-600"}),i.jsx("span",{className:"ml-2",children:"Double Lanes (2 Lanes)"})]})]})]})]}),i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[i.jsx(et,{size:18,className:"mr-2 text-blue-400"}),"Teams and Players"]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[i.jsxs("button",{onClick:()=>$t(W.Titans),className:`flex-1 flex items-center justify-center ${p.length>=10?"bg-gray-700 cursor-not-allowed":"bg-blue-700 hover:bg-blue-600"} px-4 py-2 rounded-lg`,disabled:p.length>=10,children:[i.jsx(Js,{size:18,className:"mr-2"}),i.jsx("span",{children:"Add Titan Player"})]}),i.jsxs("button",{onClick:()=>$t(W.Atlanteans),className:`flex-1 flex items-center justify-center ${p.length>=10?"bg-gray-700 cursor-not-allowed":"bg-red-700 hover:bg-red-600"} px-4 py-2 rounded-lg`,disabled:p.length>=10,children:[i.jsx(Js,{size:18,className:"mr-2"}),i.jsx("span",{children:"Add Atlantean Player"})]})]}),p.length>0?i.jsx("div",{className:"space-y-2",children:p.map((J,ce)=>i.jsxs("div",{className:`p-3 rounded-lg ${J.team===W.Titans?"bg-blue-900/30":"bg-red-900/30"} flex flex-col sm:flex-row items-start sm:items-center gap-2`,children:[i.jsx("div",{className:"w-full sm:w-1/3",children:i.jsx(Jk,{player:{id:ce,team:J.team,hero:null,name:J.name},onNameChange:je=>nt(ce,je),onRemove:()=>Ee(ce),isDuplicate:j.includes(J.name.trim())&&J.name.trim()!=="",suggestedNames:O})}),i.jsx("div",{className:"flex-1 flex items-center",children:i.jsx("button",{onClick:()=>Qs(ce),className:`flex-1 px-3 py-2 ${J.heroId!==null?G.includes(J.heroId)?"bg-amber-900/30 border border-amber-500":"bg-gray-700":"bg-gray-800 border border-dashed border-gray-600"} rounded-lg hover:bg-gray-600 transition-colors`,children:J.heroId!==null?i.jsxs("div",{className:"flex items-center",children:[i.jsx(At,{size:16,className:"mr-2"}),i.jsx("span",{children:J.heroName})]}):i.jsx("span",{className:"text-gray-400",children:"Select Hero"})})})]},ce))}):i.jsx("div",{className:"text-center p-4 border border-dashed border-gray-600 rounded-lg text-gray-400",children:"Add players to both teams using the buttons above"}),k.players&&i.jsx("div",{className:"text-red-400 text-sm mt-2",children:k.players}),k.teams&&i.jsx("div",{className:"text-red-400 text-sm mt-2",children:k.teams}),k.teamBalance&&i.jsx("div",{className:"text-red-400 text-sm mt-2",children:k.teamBalance}),k.heroes&&i.jsx("div",{className:"text-red-400 text-sm mt-2",children:k.heroes}),k.heroDuplicates&&i.jsx("div",{className:"text-red-400 text-sm mt-2",children:k.heroDuplicates}),k.maxPlayers&&i.jsx("div",{className:"text-red-400 text-sm mt-2",children:k.maxPlayers}),k.stats&&i.jsx("div",{className:"text-red-400 text-sm mt-2",children:k.stats}),p.length>0&&i.jsxs("div",{className:"mt-3 flex justify-between text-sm",children:[i.jsxs("div",{children:["Titans: ",p.filter(J=>J.team===W.Titans).length," players",p.filter(J=>J.team===W.Titans).length<2&&i.jsx("span",{className:"ml-2 text-amber-400",children:"Minimum 2 required"})]}),i.jsxs("div",{children:["Atlanteans: ",p.filter(J=>J.team===W.Atlanteans).length," players",p.filter(J=>J.team===W.Atlanteans).length<2&&i.jsx("span",{className:"ml-2 text-amber-400",children:"Minimum 2 required"})]})]}),p.length>0&&Math.abs(p.filter(J=>J.team===W.Titans).length-p.filter(J=>J.team===W.Atlanteans).length)>1&&i.jsx("div",{className:"mt-1 text-amber-400 text-sm text-center",children:"Teams are unbalanced! Teams should have equal player counts or differ by at most 1."}),p.length>10&&i.jsx("div",{className:"mt-1 text-red-400 text-sm text-center",children:"Too many players! Maximum 10 players allowed."})]}),i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[i.jsx(hh,{size:18,className:"mr-2 text-green-400"}),"Recording Mode"]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsx("button",{onClick:Le,className:`flex-1 p-4 rounded-lg border-2 transition-all ${te?"border-gray-600 bg-gray-800 hover:bg-gray-700":"border-blue-500 bg-blue-900/50"}`,children:i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium text-lg mb-1",children:"Basic Recording"}),i.jsx("div",{className:"text-sm text-gray-300",children:"Record match results with player names, heroes, and winner only"})]})}),i.jsx("button",{onClick:Le,className:`flex-1 p-4 rounded-lg border-2 transition-all ${te?"border-green-500 bg-green-900/50":"border-gray-600 bg-gray-800 hover:bg-gray-700"}`,children:i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium text-lg mb-1",children:"Detailed Recording"}),i.jsx("div",{className:"text-sm text-gray-300",children:"Record complete player statistics: kills, deaths, assists, gold, level"})]})})]}),te&&i.jsx("div",{className:"mt-3 p-3 bg-green-900/20 border border-green-500/30 rounded-lg",children:i.jsxs("p",{className:"text-sm text-green-200 flex items-center",children:[i.jsx(eo,{size:16,className:"mr-2"}),"Detailed mode allows you to record comprehensive player statistics for more accurate match analysis."]})})]}),te&&i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[i.jsx(et,{size:18,className:"mr-2 text-green-400"}),"Player Statistics"]}),i.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-600",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center",children:[i.jsx(Rr,{size:16,className:"mr-2"}),"Select Statistics to Track"]}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",checked:H.kills,onChange:()=>re("kills"),className:"form-checkbox h-4 w-4 text-red-600 bg-gray-800 border-gray-600 rounded focus:ring-red-500"}),i.jsxs("span",{className:"text-sm flex items-center",children:[i.jsx(Wk,{size:14,className:"mr-1"}),"Kills"]})]}),i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",checked:H.deaths,onChange:()=>re("deaths"),className:"form-checkbox h-4 w-4 text-red-600 bg-gray-800 border-gray-600 rounded focus:ring-red-500"}),i.jsxs("span",{className:"text-sm flex items-center",children:[i.jsx(Vx,{size:14,className:"mr-1"}),"Deaths"]})]}),i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",checked:H.assists,onChange:()=>re("assists"),className:"form-checkbox h-4 w-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500"}),i.jsxs("span",{className:"text-sm flex items-center",children:[i.jsx(zk,{size:14,className:"mr-1"}),"Assists"]})]}),i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",checked:H.goldEarned,onChange:()=>re("goldEarned"),className:"form-checkbox h-4 w-4 text-yellow-600 bg-gray-800 border-gray-600 rounded focus:ring-yellow-500"}),i.jsxs("span",{className:"text-sm flex items-center",children:[i.jsx(ts,{size:14,className:"mr-1"}),"Gold"]})]}),i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",checked:H.minionKills,onChange:()=>re("minionKills"),className:"form-checkbox h-4 w-4 text-green-600 bg-gray-800 border-gray-600 rounded focus:ring-green-500"}),i.jsxs("span",{className:"text-sm flex items-center",children:[i.jsx(sf,{size:14,className:"mr-1"}),"Minions"]})]}),i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",checked:H.level,onChange:()=>re("level"),className:"form-checkbox h-4 w-4 text-purple-600 bg-gray-800 border-gray-600 rounded focus:ring-purple-500"}),i.jsxs("span",{className:"text-sm flex items-center",children:[i.jsx(to,{size:14,className:"mr-1"}),"Level"]})]})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-3",children:" Only checked statistics will be tracked."})]}),i.jsx(A3e,{players:p,playerStats:ie,statsErrors:Y,enabledStats:H,onStatsChange:de,onResetPlayerStats:Me,onResetAllStats:ze})]}),i.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[i.jsx(i3e,{size:18,className:"mr-2 text-yellow-400"}),"Match Winner"]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:()=>m(W.Titans),className:`p-4 rounded-lg border-2 ${v===W.Titans?"border-blue-500 bg-blue-900/50":"border-gray-600 bg-gray-800 hover:bg-gray-700"} flex items-center`,children:[v===W.Titans&&i.jsx(Rr,{size:18,className:"mr-2 text-blue-400"}),i.jsx("span",{className:"text-lg font-medium",children:"Titans Victory"})]}),i.jsxs("button",{onClick:()=>m(W.Atlanteans),className:`p-4 rounded-lg border-2 ${v===W.Atlanteans?"border-red-500 bg-red-900/50":"border-gray-600 bg-gray-800 hover:bg-gray-700"} flex items-center`,children:[v===W.Atlanteans&&i.jsx(Rr,{size:18,className:"mr-2 text-red-400"}),i.jsx("span",{className:"text-lg font-medium",children:"Atlanteans Victory"})]})]})]}),i.jsx("div",{className:"flex justify-center mt-6",children:i.jsx("button",{onClick:ko,disabled:r,className:`px-6 py-3 bg-green-600 hover:bg-green-500 rounded-lg flex items-center text-xl ${r?"opacity-70 cursor-not-allowed":""}`,children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),i.jsx("span",{children:"Recording..."})]}):i.jsxs(i.Fragment,{children:[i.jsx(Gk,{size:20,className:"mr-3"}),i.jsx("span",{children:"Record Match"})]})})}),s&&i.jsx("div",{className:"mt-4 p-3 bg-green-900/50 border border-green-500 rounded-lg text-green-300 text-center",children:s}),o&&i.jsx("div",{className:"mt-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300 text-center",children:o})]}),w&&i.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"p-4 bg-gray-700 flex justify-between items-center",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Select Hero"}),i.jsx("button",{onClick:()=>_(!1),className:"p-1 bg-gray-600 hover:bg-gray-500 rounded-full",children:i.jsx(l3e,{size:20})})]}),i.jsxs("div",{className:"p-4 border-b border-gray-700",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[i.jsxs("div",{className:"relative flex-grow",children:[i.jsx("input",{type:"text",value:N,onChange:J=>Q(J.target.value),placeholder:"Search heroes or roles...",className:"w-full px-4 py-2 pl-10 bg-gray-700 border border-gray-600 rounded-lg"}),i.jsx(o3e,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-sm whitespace-nowrap",children:"Max Complexity:"}),i.jsxs("select",{value:P,onChange:J=>F(Number(J.target.value)),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[i.jsx("option",{value:"1",children:"1"}),i.jsx("option",{value:"2",children:"2"}),i.jsx("option",{value:"3",children:"3"}),i.jsx("option",{value:"4",children:"4"})]})]})]}),i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:$l().map(J=>i.jsx("button",{onClick:()=>So(J),className:`px-3 py-1 text-sm rounded ${E.includes(J)?"bg-blue-700 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:J},J))}),i.jsxs("div",{className:"mt-3 border-t border-gray-600 pt-3 flex items-center",children:[i.jsx("span",{className:"text-sm mr-2",children:"Sort by:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>pi("name"),className:`px-3 py-1 text-sm rounded flex items-center ${$==="name"?"bg-blue-700 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:[i.jsx("span",{children:"Name"}),$==="name"&&(D==="asc"?i.jsx(Zh,{size:14,className:"ml-1"}):i.jsx(Yh,{size:14,className:"ml-1"}))]}),i.jsxs("button",{onClick:()=>pi("complexity"),className:`px-3 py-1 text-sm rounded flex items-center ${$==="complexity"?"bg-blue-700 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:[i.jsx("span",{children:"Complexity"}),$==="complexity"&&(D==="asc"?i.jsx(Zh,{size:14,className:"ml-1"}):i.jsx(Yh,{size:14,className:"ml-1"}))]})]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[Eo.map(J=>i.jsxs("div",{onClick:()=>Ca(J),className:"bg-gray-700 hover:bg-gray-600 rounded-lg p-3 cursor-pointer transition-colors flex flex-col items-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full overflow-hidden mb-2",children:i.jsx("img",{src:J.icon,alt:J.name,className:"w-full h-full object-cover",onError:ce=>{ce.target.src="https://via.placeholder.com/64?text=Hero"}})}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-medium",children:J.name}),i.jsx("div",{className:"text-xs text-gray-400",children:J.roles.join("  ")}),i.jsx("div",{className:"text-xs",children:[...Array(J.complexity)].map((ce,je)=>i.jsx("span",{className:"text-yellow-500",children:""},je))})]})]},J.id)),Eo.length===0&&i.jsx("div",{className:"col-span-full text-center p-8 text-gray-400",children:"No heroes match your search criteria. Try adjusting your filters."})]})})]})})]})},i3e=({size:t,className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),i.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),i.jsx("path",{d:"M4 22h16"}),i.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),i.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),i.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),o3e=({size:t,className:e})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:e,children:[i.jsx("circle",{cx:"11",cy:"11",r:"8"}),i.jsx("path",{d:"m21 21-4.3-4.3"})]}),l3e=({size:t})=>i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M18 6 6 18"}),i.jsx("path",{d:"m6 6 12 12"})]}),A3e=({players:t,playerStats:e,statsErrors:r,enabledStats:n,onStatsChange:s,onResetPlayerStats:a,onResetAllStats:o})=>{const l=t.map((u,h)=>({player:u,index:h})).filter(({player:u})=>u.team===W.Titans),A=t.map((u,h)=>({player:u,index:h})).filter(({player:u})=>u.team===W.Atlanteans);return i.jsxs("div",{className:"space-y-6",children:[t.length>0&&o&&i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{type:"button",onClick:o,className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg flex items-center text-sm transition-colors",children:[i.jsx(Pa,{size:16,className:"mr-2"}),"Reset All Stats"]})}),l.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h4",{className:"text-lg font-medium flex items-center text-blue-300",children:[i.jsx(At,{size:18,className:"mr-2"}),"Titans (",l.length," players)"]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:l.map(({player:u,index:h})=>i.jsx(NS,{player:u,playerIndex:h,stats:e.get(h),errors:r.get(h),enabledStats:n,onStatsChange:c=>s(h,c),onResetStats:a},h))})]}),A.length>0&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("h4",{className:"text-lg font-medium flex items-center text-red-300",children:[i.jsx(At,{size:18,className:"mr-2"}),"Atlanteans (",A.length," players)"]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:A.map(({player:u,index:h})=>i.jsx(NS,{player:u,playerIndex:h,stats:e.get(h),errors:r.get(h),enabledStats:n,onStatsChange:c=>s(h,c),onResetStats:a},h))})]}),t.length===0&&i.jsxs("div",{className:"text-center text-gray-400 py-8",children:[i.jsx(et,{size:48,className:"mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Add players to both teams to enter statistics"})]})]})},NS=({player:t,playerIndex:e,onStatsChange:r,stats:n,errors:s=[],enabledStats:a,onResetStats:o})=>{const l=n||{},A=(f,g)=>{const y={...l,[f]:g};r(y)},u=Object.values(a).some(Boolean),h=Object.values(a).filter(Boolean).length,c=t.team===W.Titans?"border-blue-500":"border-red-500",d=t.team===W.Titans?"bg-blue-900/20":"bg-red-900/20";return i.jsxs("div",{className:`bg-gray-800 rounded-lg p-4 border-2 ${c} ${d}`,children:[i.jsxs("div",{className:"flex items-center mb-4 pb-3 border-b border-gray-600",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-lg",children:t.name||"Unnamed Player"}),i.jsxs("div",{className:"text-sm text-gray-300 flex items-center",children:[i.jsx(At,{size:14,className:"mr-1"}),t.heroName||"No Hero Selected"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[o&&i.jsxs("button",{type:"button",onClick:()=>o(e),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded text-xs flex items-center transition-colors",title:"Reset this player's stats",children:[i.jsx(Pa,{size:12,className:"mr-1"}),"Reset"]}),s.length>0&&i.jsx("div",{className:"text-red-400 text-sm",title:s.join(", "),children:i.jsx(eo,{size:16})})]})]}),u?i.jsxs("div",{className:`grid gap-4 ${h<=3?`grid-cols-${h}`:"grid-cols-3"}`,children:[a.kills&&i.jsx(Jo,{label:"Kills",value:l.kills??0,onChange:f=>A("kills",f),min:0,max:50,enabled:!0,icon:i.jsx(Wk,{size:14})}),a.deaths&&i.jsx(Jo,{label:"Deaths",value:l.deaths??0,onChange:f=>A("deaths",f),min:0,max:20,enabled:!0,icon:i.jsx(Vx,{size:14})}),a.assists&&i.jsx(Jo,{label:"Assists",value:l.assists??0,onChange:f=>A("assists",f),min:0,max:100,enabled:!0,icon:i.jsx(zk,{size:14})}),a.goldEarned&&i.jsx(Jo,{label:"Gold",value:l.goldEarned??0,onChange:f=>A("goldEarned",f),min:0,max:1e4,enabled:!0,icon:i.jsx(ts,{size:14})}),a.minionKills&&i.jsx(Jo,{label:"Minions",value:l.minionKills??0,onChange:f=>A("minionKills",f),min:0,max:200,enabled:!0,icon:i.jsx(sf,{size:14})}),a.level&&i.jsx(Jo,{label:"Level",value:l.level??1,onChange:f=>A("level",f),min:1,max:8,enabled:!0,icon:i.jsx(to,{size:14})})]}):i.jsxs("div",{className:"text-center p-6 border border-dashed border-gray-600 rounded-lg text-gray-400",children:[i.jsx("p",{className:"text-sm",children:"No statistics selected for tracking"}),i.jsx("p",{className:"text-xs mt-1",children:"Enable stat categories above to start recording"})]}),s.length>0&&i.jsx("div",{className:"mt-3 space-y-1",children:s.map((f,g)=>i.jsxs("div",{className:"text-red-400 text-xs flex items-center",children:[i.jsx(eo,{size:12,className:"mr-1"}),f]},g))})]})},Jo=({label:t,value:e,onChange:r,min:n=0,max:s=999,disabled:a=!1,icon:o,enabled:l=!0})=>{const A=e??0,u=()=>{A<s&&r(A+1)},h=()=>{A>n&&r(A-1)},c=d=>{const f=parseInt(d.target.value)||0;f>=n&&f<=s&&r(f)};return l?i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[i.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[o&&i.jsx("span",{className:"mr-1",children:o}),i.jsx("span",{children:t})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{type:"button",onClick:h,disabled:a||A<=n,className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:i.jsx(Pa,{size:14})}),i.jsx("input",{type:"number",value:A,onChange:c,disabled:a,min:n,max:s,className:"w-16 h-8 text-center bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white"}),i.jsx("button",{type:"button",onClick:u,disabled:a||A>=s,className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:i.jsx(Js,{size:14})})]})]}):i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o&&i.jsx("span",{className:"mr-1 opacity-50",children:o}),i.jsx("span",{children:t})]}),i.jsx("div",{className:"flex items-center justify-center w-16 h-8 bg-gray-800 border border-gray-600 rounded-lg text-gray-500 text-sm",children:"N/A"})]})},c3e=({onBack:t})=>{const{playSound:e}=Ge(),[r,n]=B.useState([]),[s,a]=B.useState(!0),[o,l]=B.useState(""),[A,u]=B.useState("name"),[h,c]=B.useState("asc"),[d,f]=B.useState("all"),[g,y]=B.useState("all"),[v,m]=B.useState("all"),[p,x]=B.useState(!1),[w,_]=B.useState(!1),b=R.useRef(null);B.useEffect(()=>{const D=document.createElement("style");return D.type="text/css",D.innerHTML=`
      /* Styles applied during screenshot taking */
      .taking-screenshot {
        background-color: #1F2937 !important;
        padding: 2rem !important;
        width: 1400px !important; /* Increased width for more space */
        position: relative !important;
        overflow: visible !important;
      }
      
      .screenshot-title {
        color: white;
        margin-bottom: 2rem;
      }
      
      .screenshot-footer {
        color: #9CA3AF;
        margin-top: 2rem;
        border-top: 1px solid #4B5563;
        padding-top: 1rem;
      }
      
      /* Hide elements with no-screenshot class */
      .taking-screenshot .no-screenshot {
        display: none !important;
      }
      
      /* Adjust card spacing and layout for screenshots */
      .taking-screenshot .grid {
        grid-template-columns: repeat(2, 1fr) !important; /* Force 2 columns for readability */
        gap: 2rem !important; /* Increase gap between cards */
      }
      
      .taking-screenshot .bg-gray-700 {
        padding: 1.5rem !important; /* More padding inside cards */
      }
      
      /* Fix stat bar display */
      .taking-screenshot .transform.skew-x-12 {
        height: 20px !important;
        width: 20px !important; 
      }
      
      /* Make text more readable */
      .taking-screenshot .text-sm {
        font-size: 14px !important;
        line-height: 1.5 !important;
      }
      
      .taking-screenshot .leading-relaxed {
        line-height: 1.7 !important;
      }
      
      /* Fix hero header display */
      .taking-screenshot .px-5.py-4.bg-gray-800 {
        padding: 1.25rem !important;
      }
      
      /* Enhance hero images */
      .taking-screenshot .rounded-full.overflow-hidden {
        border: 2px solid #4B5563 !important;
      }
      
      /* Make role explanations visible in screenshots */
      .taking-screenshot .bg-gray-700.rounded-lg.mb-4.overflow-hidden {
        margin-bottom: 2rem !important;
      }
      
      /* Make sure role explanation grid looks good */
      .taking-screenshot .grid.grid-cols-1.md\\:grid-cols-2.gap-4 {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 1rem !important;
      }
      
      /* Ensure role text is properly visible */
      .taking-screenshot .text-xs.text-gray-400 {
        font-size: 0.85rem !important;
        margin-top: 0.25rem !important;
        color: #9CA3AF !important;
      }
    `,document.head.appendChild(D),()=>{document.head.removeChild(D)}},[]),B.useEffect(()=>{a(!0);try{n(Zi)}catch(D){console.error("Error loading heroes:",D)}finally{a(!1)}},[]);const S=()=>{e("buttonClick"),t()},E=async()=>{if(b.current){e("buttonClick"),_(!0);try{b.current.classList.add("taking-screenshot");const D=document.createElement("div");D.className="screenshot-title text-center mb-6",D.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Hero Reference Guide</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,b.current.insertBefore(D,b.current.firstChild);const z=document.createElement("div");z.className="screenshot-footer text-center mt-8 text-sm text-gray-400",z.innerHTML=`
        <p>Generated by Guards of Atlantis II Timer App</p>
      `,b.current.appendChild(z);const k=b.current.querySelectorAll(".no-screenshot");k.forEach(G=>{G.style.display="none"});const j=(await Dg(b.current,{backgroundColor:"#1F2937",windowWidth:1400,scrollX:0,scrollY:0,scale:window.devicePixelRatio||1,logging:!1,allowTaint:!0,useCORS:!0,onclone:G=>{const X=G.querySelector("#screenshotContent");X&&(X.scrollTop=0)}})).toDataURL("image/png"),I=document.createElement("a");I.download=`guards-of-atlantis-hero-guide-${new Date().toISOString().slice(0,10)}.png`,I.href=j,I.click(),b.current.removeChild(D),b.current.removeChild(z),b.current.classList.remove("taking-screenshot"),k.forEach(G=>{G.style.display=""})}catch(D){console.error("Error creating screenshot:",D)}finally{_(!1)}}},C=D=>{e("buttonClick"),D===A?c(h==="asc"?"desc":"asc"):(u(D),c(D==="name"?"asc":"desc"))},N=()=>{e("buttonClick"),x(!p)},Q=()=>{e("buttonClick"),l(""),f("all"),y("all"),m("all"),x(!1)},P=R.useMemo(()=>{const D=new Set;return r.forEach(z=>{z.roles.forEach(k=>D.add(k)),z.additionalRoles&&z.additionalRoles.forEach(k=>D.add(k))}),Array.from(D).sort()},[r]),F=R.useMemo(()=>$l(),[]),$=r.filter(D=>{if(o){const z=o.toLowerCase();return!!(D.name.toLowerCase().includes(z)||D.roles.some(k=>k.toLowerCase().includes(z))||D.additionalRoles&&D.additionalRoles.some(k=>k.toLowerCase().includes(z))||D.description&&D.description.toLowerCase().includes(z))}if(d!=="all"&&D.expansion!==d)return!1;if(g!=="all"){const z=D.roles.includes(g),k=D.additionalRoles?D.additionalRoles.includes(g):!1;if(!z&&!k)return!1}return!(v!=="all"&&D.complexity!==v)}).sort((D,z)=>{let k=0;switch(A){case"name":k=D.name.localeCompare(z.name);break;case"complexity":k=D.complexity-z.complexity;break;case"attack":k=(D.attack||0)-(z.attack||0);break;case"defence":k=(D.defence||0)-(z.defence||0);break;case"initiative":k=(D.initiative||0)-(z.initiative||0);break;case"movement":k=(D.movement||0)-(z.movement||0);break;case"expansion":k=(D.expansion||"").localeCompare(z.expansion||"");break;default:k=0}return h==="asc"?k:-k}),L=(D,z=0,k=0)=>i.jsxs("div",{className:"mb-2",children:[i.jsx("div",{className:"text-sm font-medium mb-1",children:D}),i.jsx("div",{className:"flex",children:Array.from({length:8}).map((M,j)=>i.jsx("div",{className:`h-5 w-5 transform skew-x-12 mr-0.5 flex-shrink-0 ${j<z?"bg-blue-600":j<k?"bg-blue-200":"bg-gray-700"}`},j))})]});return i.jsxs("div",{ref:b,id:"screenshotContent",className:"bg-gray-800 rounded-lg p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6 no-screenshot",children:[i.jsxs("button",{onClick:S,className:"flex items-center text-gray-300 hover:text-white",children:[i.jsx(Cr,{size:20,className:"mr-1"}),i.jsx("span",{children:"Back to Menu"})]}),i.jsx("h2",{className:"text-2xl font-bold",children:"Hero Information"}),i.jsx(Ue,{text:"Take a screenshot of all hero information",position:"left",children:i.jsxs("button",{onClick:E,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",disabled:w,children:[i.jsx(b0,{size:18,className:"mr-2"}),i.jsx("span",{children:w?"Capturing...":"Share Guide"})]})})]}),i.jsx("div",{className:"mb-4 p-3 bg-gray-700/30 rounded-lg text-xs text-gray-400 border-t border-gray-600",children:i.jsxs("p",{className:"text-center leading-relaxed",children:["Many thanks to the various authors of Hero Guide's on BoardGameGeek who's work aided in the creation of this page, notably: ",i.jsx("span",{className:"text-gray-300",children:"Mad_Mike"})," and ",i.jsx("span",{className:"text-gray-300",children:"TheTomTraveller"}),", but also ",i.jsx("span",{className:"text-gray-300",children:"CCplusplus"}),", ",i.jsx("span",{className:"text-gray-300",children:"Eric_McClain"}),", ",i.jsx("span",{className:"text-gray-300",children:"Drakonis1"}),", ",i.jsx("span",{className:"text-gray-300",children:"bcsj"}),", ",i.jsx("span",{className:"text-gray-300",children:"Deiflex"}),", ",i.jsx("span",{className:"text-gray-300",children:"Ramsar"}),", ",i.jsx("span",{className:"text-gray-300",children:"GoatRogan"}),", and ",i.jsx("span",{className:"text-gray-300",children:"NullEnvoy"}),"."]})}),i.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 no-screenshot",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[i.jsxs("div",{className:"relative flex-grow",children:[i.jsx("input",{type:"text",value:o,onChange:D=>l(D.target.value),placeholder:"Search heroes, roles, or descriptions...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx(lo,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsxs("button",{onClick:()=>C("name"),className:`px-3 py-1 rounded ${A==="name"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Name ",A==="name"&&(h==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>C("complexity"),className:`px-3 py-1 rounded ${A==="complexity"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Complexity ",A==="complexity"&&(h==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>C("attack"),className:`px-3 py-1 rounded ${A==="attack"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Attack ",A==="attack"&&(h==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>C("initiative"),className:`px-3 py-1 rounded ${A==="initiative"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Initiative ",A==="initiative"&&(h==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>C("defence"),className:`px-3 py-1 rounded ${A==="defence"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Defence ",A==="defence"&&(h==="asc"?"":"")]}),i.jsxs("button",{onClick:()=>C("movement"),className:`px-3 py-1 rounded ${A==="movement"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Movement ",A==="movement"&&(h==="asc"?"":"")]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:N,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[i.jsx(vu,{size:18,className:"mr-2"}),i.jsx("span",{children:"Filters"}),(d!=="all"||g!=="all"||v!=="all")&&i.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(d!=="all"?1:0)+(g!=="all"?1:0)+(v!=="all"?1:0)}),p?i.jsx(ls,{size:16,className:"ml-2"}):i.jsx(pn,{size:16,className:"ml-2"})]}),p&&i.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-72",children:[i.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Expansion"}),i.jsxs("select",{value:d,onChange:D=>f(D.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[i.jsx("option",{value:"all",children:"All Expansions"}),F.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Role"}),i.jsxs("select",{value:g,onChange:D=>y(D.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[i.jsx("option",{value:"all",children:"All Roles"}),P.map(D=>i.jsx("option",{value:D,children:D},D))]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Complexity"}),i.jsxs("select",{value:v,onChange:D=>m(D.target.value==="all"?"all":parseInt(D.target.value)),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[i.jsx("option",{value:"all",children:"All Complexity"}),i.jsx("option",{value:"1",children:" (Beginner)"}),i.jsx("option",{value:"2",children:" (Intermediate)"}),i.jsx("option",{value:"3",children:" (Advanced)"}),i.jsx("option",{value:"4",children:" (Expert)"})]})]}),i.jsx("button",{onClick:Q,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),(d!=="all"||g!=="all"||v!=="all"||o!=="")&&i.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg screenshot-info",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Filtered View:"}),i.jsxs("ul",{className:"text-sm space-y-1",children:[d!=="all"&&i.jsxs("li",{children:["Expansion: ",d]}),g!=="all"&&i.jsxs("li",{children:["Role: ",g]}),v!=="all"&&i.jsxs("li",{children:["Complexity: ",v===1?"":v===2?"":v===3?"":""]}),o!==""&&i.jsxs("li",{children:['Search Term: "',o,'"']})]})]}),s?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):i.jsxs("div",{children:[i.jsx("div",{className:"mb-6",children:i.jsx(eN,{})}),$.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:$.map(D=>{const z=D.name||"Unknown Hero",k=D.roles||[],M=D.additionalRoles||[],j=D.expansion||"Unknown",I=D.complexity||1,G=D.description||"This hero's abilities and playstyle are shrouded in mystery.";return i.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md",children:[i.jsxs("div",{className:"px-5 py-4 bg-gray-800 flex items-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-full overflow-hidden mr-4 flex-shrink-0",children:i.jsx("img",{src:D.icon,alt:z,className:"w-full h-full object-cover",onError:X=>{X.target.src="https://via.placeholder.com/64?text=Hero"}})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-xl font-bold",children:z}),i.jsx("div",{className:"text-sm text-gray-300",children:k.join("  ")}),M.length>0&&i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:M.join("  ")}),i.jsxs("div",{className:"text-xs mt-2 flex items-center",children:[i.jsxs("span",{className:"text-blue-400",children:["Expansion: ",j]}),i.jsx("span",{className:"mx-2",children:""}),i.jsx("span",{className:"text-blue-400",children:"Complexity: "}),i.jsx("span",{className:"text-yellow-400 ml-1",children:[...Array(I)].map(X=>"").join("")}),i.jsx("span",{className:"text-gray-600",children:[...Array(4-I)].map(X=>"").join("")})]})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[L("Attack",D.attack||0,D.attack_upgraded||D.attack||0),L("Initiative",D.initiative||0,D.initiative_upgraded||D.initiative||0),L("Defence",D.defence||0,D.defence_upgraded||D.defence||0),L("Movement",D.movement||0,D.movement_upgraded||D.movement||0)]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Description"}),i.jsx("p",{className:"text-sm leading-relaxed",children:G})]})]})]},D.id)})}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[i.jsx(At,{size:48,className:"text-gray-500 mb-4"}),i.jsx("p",{className:"text-xl text-gray-400",children:o||d!=="all"||g!=="all"||v!=="all"?"No heroes found matching your filters":"No hero data available"}),(o||d!=="all"||g!=="all"||v!=="all")&&i.jsx("button",{onClick:Q,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg no-screenshot",children:"Clear Filters"})]})]}),i.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:[i.jsx("h4",{className:"font-bold mb-2",children:"How to Read the Stats"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Attack:"})," Higher values mean the hero deals more damage and has stronger offensive abilities."]}),i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Initiative:"})," Determines when a hero acts in combat. Higher values let heroes move earlier."]})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Defence:"})," Higher values give the hero better survivability and ability to withstand attacks."]}),i.jsxs("p",{className:"mb-2",children:[i.jsx("strong",{children:"Movement:"})," Determines how far a hero can travel each turn. Higher values give more mobility."]})]})]}),i.jsxs("p",{className:"mt-2",children:[i.jsx("strong",{children:"Upgrade Potential:"})," Light blue segments show stats that can be improved through upgrades."]})]})]})},u3e=(t,e,r)=>e>=7||e===6&&r&&t===$e.Long?{top:{currentWave:1,totalWaves:7},bottom:{currentWave:1,totalWaves:7},hasMultipleLanes:!0}:{single:{currentWave:1,totalWaves:t===$e.Quick?3:5},hasMultipleLanes:!1},d3e=(t,e,r)=>t===$e.Quick?e<=5?4:5:e===6&&!r?8:e<=5||e===6&&r||e<=8?6:7,FS=t=>{const e=[],r=t%2===1?t+1:t;return e.push({team:"A",action:"ban",round:1}),e.push({team:"B",action:"ban",round:1}),e.push({team:"A",action:"pick",round:1}),e.push({team:"B",action:"pick",round:1}),e.push({team:"B",action:"ban",round:2}),e.push({team:"A",action:"ban",round:2}),e.push({team:"B",action:"pick",round:2}),e.push({team:"A",action:"pick",round:2}),r>=6&&(e.push({team:"A",action:"ban",round:3}),e.push({team:"B",action:"ban",round:3}),e.push({team:"B",action:"pick",round:3}),e.push({team:"A",action:"pick",round:3})),r>=8&&(e.push({team:"B",action:"ban",round:4}),e.push({team:"A",action:"ban",round:4}),e.push({team:"A",action:"pick",round:4}),e.push({team:"B",action:"pick",round:4})),r>=10&&(e.push({team:"B",action:"ban",round:5}),e.push({team:"A",action:"ban",round:5}),e.push({team:"B",action:"pick",round:5}),e.push({team:"A",action:"pick",round:5})),e},fU=()=>({round:1,turn:1,gameLength:$e.Quick,waves:{[Fe.Single]:{currentWave:1,totalWaves:3}},teamLives:{[W.Titans]:4,[W.Atlanteans]:4},currentPhase:"setup",activeHeroIndex:-1,coinSide:Math.random()>.5?W.Titans:W.Atlanteans,hasMultipleLanes:!1,completedTurns:[],allPlayersMoved:!1}),h3e=(t,e)=>{switch(e.type){case"START_GAME":return e.payload;case"START_STRATEGY":return{...t,currentPhase:"strategy",activeHeroIndex:-1};case"END_STRATEGY":return{...t,currentPhase:"move",activeHeroIndex:-1,completedTurns:[]};case"SELECT_PLAYER":return t.completedTurns.includes(e.playerIndex)?t:{...t,activeHeroIndex:e.playerIndex};case"MARK_PLAYER_COMPLETE":{const r=[...t.completedTurns,e.playerIndex];return r.length===al.length?{...t,completedTurns:r,activeHeroIndex:-1,currentPhase:"turn-end",allPlayersMoved:!0}:{...t,completedTurns:r,activeHeroIndex:-1}}case"START_NEXT_TURN":{const r=t.turn+1;return r>4?{...t,round:t.round+1,turn:1,currentPhase:"strategy",completedTurns:[],allPlayersMoved:!1}:{...t,turn:r,currentPhase:"strategy",completedTurns:[],allPlayersMoved:!1}}case"ADJUST_TEAM_LIFE":return{...t,teamLives:{...t.teamLives,[e.team]:Math.max(0,t.teamLives[e.team]+e.delta)}};case"INCREMENT_WAVE":{if(e.lane===Fe.Single&&!t.hasMultipleLanes){const r=t.waves[Fe.Single];if(r)return{...t,waves:{...t.waves,[Fe.Single]:{...r,currentWave:Math.min(r.currentWave+1,r.totalWaves)}}}}else if(t.hasMultipleLanes&&(e.lane===Fe.Top||e.lane===Fe.Bottom)){const r=t.waves[e.lane];if(r)return{...t,waves:{...t.waves,[e.lane]:{...r,currentWave:Math.min(r.currentWave+1,r.totalWaves)}}}}return t}case"DECREMENT_WAVE":{if(e.lane===Fe.Single&&!t.hasMultipleLanes){const r=t.waves[Fe.Single];if(r)return{...t,waves:{...t.waves,[Fe.Single]:{...r,currentWave:Math.max(1,r.currentWave-1)}}}}else if(t.hasMultipleLanes&&(e.lane===Fe.Top||e.lane===Fe.Bottom)){const r=t.waves[e.lane];if(r)return{...t,waves:{...t.waves,[e.lane]:{...r,currentWave:Math.max(1,r.currentWave-1)}}}}return t}case"ADJUST_ROUND":{const r=Math.max(1,t.round+e.delta);return{...t,round:r}}case"ADJUST_TURN":{const r=Math.max(1,Math.min(4,t.turn+e.delta));return{...t,turn:r}}case"DECLARE_VICTORY":return{...t,currentPhase:"victory",victorTeam:e.team};case"RESET_GAME":return fU();case"FLIP_COIN":return{...t,coinSide:t.coinSide===W.Titans?W.Atlanteans:W.Titans};default:return t}};let al=[];function f3e(){const{playSound:t,unlockAudio:e,isAudioReady:r}=Ge(),[n,s]=B.useState(!1),[a,o]=B.useState(90),[l,A]=B.useState(30),[u,h]=B.useState(!0),[c,d]=B.useState(!0),[f,g]=B.useState($e.Quick),[y,v]=B.useState(!1),[m,p]=B.useState([]),[x,w]=B.useState(()=>{const ne=localStorage.getItem("goa-selected-expansions");if(ne)try{const he=JSON.parse(ne);if(Array.isArray(he)&&he.every(ge=>typeof ge=="string"))return he}catch{}return $l()}),[_,b]=B.useState(4),[S,E]=B.useState(!1),[C,N]=B.useState(!1),[Q,P]=B.useState({mode:ue.None,currentTeam:W.Titans,availableHeroes:[],assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1}),[F,$]=B.useState([]),[L,D]=B.useState(!1),[z,k]=B.useState(!1),[M,j]=B.useState(null),[I,G]=B.useState(!1),[X,te]=B.useState("menu"),[Ae,ie]=B.useState(null),[V,Y]=B.useState(!1),[U,H]=B.useState(null),[K,O]=B.useState(""),oe=Wx(x).filter(ne=>ne.complexity<=_);al=m;const me=B.useRef(!1),se=fU(),[re,Le]=B.useReducer(h3e,se),[ve,de]=B.useState(!1),[Me,ze]=B.useState(!1),[$t,Ee]=B.useState(a),[nt,gr]=B.useState(l);B.useEffect(()=>{n&&!z&&(async()=>{try{await Oo.saveGame({gameState:re,players:m,strategyTimeRemaining:$t,moveTimeRemaining:nt,strategyTimerActive:ve,moveTimerActive:Me,strategyTimerEnabled:u,moveTimerEnabled:c})}catch(he){console.error("Error saving game state:",he)}})()},[n,re.round,re.turn,re.currentPhase,re.teamLives,ve,Me,z]),B.useEffect(()=>{!n&&!S&&(async()=>{try{const he=await aAe.runMigrations();console.log(" Migration completed:",he);const ge=await Oo.loadGame();if(ge){const Re=new Date(ge.timestamp).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});H(ge),O(Re),Y(!0)}}catch(he){console.error("App initialization error:",he)}})()},[n,S]),B.useEffect(()=>{localStorage.setItem("goa-selected-expansions",JSON.stringify(x))},[x]),B.useEffect(()=>{const ne=()=>{console.log("First interaction detected, unlocking audio"),e(),document.removeEventListener("click",ne,!0),document.removeEventListener("keydown",ne,!0),document.removeEventListener("touchstart",ne,!0)};return document.addEventListener("click",ne,!0),document.addEventListener("keydown",ne,!0),document.addEventListener("touchstart",ne,!0),()=>{document.removeEventListener("click",ne,!0),document.removeEventListener("keydown",ne,!0),document.removeEventListener("touchstart",ne,!0)}},[e]);const Qs=()=>{const ne=m.map(ge=>ge.name.trim()).filter(ge=>ge!=="");if(new Set(ne).size!==ne.length){const ge=[],ye=new Set;for(const Re of ne)ye.has(Re)?ge.push(Re):ye.add(Re);return[...new Set(ge)]}return[]},Ca=ne=>{if(m.length>=10)return;t("buttonClick");let he;if(m.length>=7||m.length===5&&y&&f===$e.Long){if(m.length===6){const Re=m.map((Qe,Oe)=>({...Qe,lane:Oe<3?Fe.Top:Fe.Bottom}));p(Re)}m.length===5&&y&&f===$e.Long||m.length===6?he=Fe.Top:m.length===7?he=Fe.Bottom:m.length>=8&&(he=m.length%2===0?Fe.Top:Fe.Bottom)}const ye={id:m.length+1,team:ne,hero:null,lane:he,name:""};p([...m,ye]),m.length>=7&&f===$e.Quick&&g($e.Long)},So=ne=>{if(!m.find(Qe=>Qe.id===ne))return;t("buttonClick");const ye=m.filter(Qe=>Qe.id!==ne).map((Qe,Oe)=>({...Qe,id:Oe+1}));if(p(ye),!(ye.length>=7||ye.length===6&&y&&f===$e.Long)){const Qe=ye.map(Oe=>({...Oe,lane:void 0}));p(Qe)}},pi=ne=>{if(ne===$e.Quick&&m.length>6){alert("Quick game is only available for 6 or fewer players");return}if(t("toggleSwitch"),ne===$e.Long&&m.length===6&&y){const he=m.map(ge=>({...ge,lane:void 0}));p(he),v(!1)}g(ne)},jo=ne=>{t("toggleSwitch"),x.includes(ne)?w(x.filter(he=>he!==ne)):w([...x,ne])},ko=(ne,he)=>{const ge=m.map(ye=>ye.id===ne?{...ye,name:he}:ye);p(ge),me.current=!1},Is=ne=>{const he=m.length,ge=oe.length;switch(ne){case ue.AllPick:return ge>=he;case ue.Single:return ge>=he*3;case ue.Random:return ge>=he+2;case ue.PickAndBan:return ge>=he*2;default:return!1}},[Eo,J]=B.useState(null),ce=()=>{e();const ne=Qs();if(ne.length>0){alert(`Players must have unique names. Duplicates found: ${ne.join(", ")}`);return}t("buttonClick");const he=m.filter(Qe=>Qe.team===W.Titans),ge=m.filter(Qe=>Qe.team===W.Atlanteans);if(Math.abs(he.length-ge.length)>1){alert("Teams must have equal player counts or differ by only 1 player");return}if(he.length!==ge.length){const Qe=he.length>ge.length?W.Titans:W.Atlanteans;J(Qe)}else J(null);if(he.length<2||ge.length<2){alert("Each team must have at least 2 players");return}if(m.filter(Qe=>!Qe.name.trim()).length>0){alert("All players must enter their names");return}if(!Is(ue.AllPick)){alert("Not enough heroes in selected expansions. Please select more expansions, increase complexity, or reduce player count.");return}const Re=Math.random()>.5?W.Titans:W.Atlanteans;Le({type:"START_GAME",payload:{...se,coinSide:Re}}),t("coinFlip"),D(!0)},je=ne=>{let he;const ge=m.length;t("buttonClick");const ye=[...oe],Re=re.coinSide,Qe=pb([...ye]);switch(ne){case ue.AllPick:he={mode:ne,currentTeam:Re,availableHeroes:Qe,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};break;case ue.Single:const Oe=[...Qe],yt=m.map(Gn=>{const wn=[];for(let bn=0;bn<3;bn++)if(Oe.length>0){const Xe=Math.floor(Math.random()*Oe.length);wn.push(Oe[Xe]),Oe.splice(Xe,1)}return{playerId:Gn.id,heroOptions:wn}});he={mode:ne,currentTeam:Re,availableHeroes:[],assignedHeroes:yt,selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};break;case ue.Random:const xn=Qe.slice(0,Math.min(ge+2,Qe.length));he={mode:ne,currentTeam:Re,availableHeroes:xn,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};break;case ue.PickAndBan:const gs=FS(ge);he={mode:ne,currentTeam:Re,availableHeroes:Qe,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:gs,isComplete:!1};break;default:he={mode:ue.None,currentTeam:Re,availableHeroes:[],assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1}}P(he),$([]),N(!1),E(!0)},Je=(ne,he)=>{if($(Xe=>[...Xe,{...Q}]),t("heroSelect"),!m.find(Xe=>Xe.id===he))return;const ye=[...Q.selectedHeroes,{playerId:he,hero:ne}],Re=Q.availableHeroes.filter(Xe=>Xe.id!==ne.id),Qe=Q.mode===ue.Single?Q.assignedHeroes.map(Xe=>Xe.playerId===he?{...Xe,heroOptions:[]}:Xe):Q.assignedHeroes;let Oe=Q.currentTeam,yt=Q.currentStep,xn=!1;const gs=m.filter(Xe=>Xe.team===W.Titans),Gn=m.filter(Xe=>Xe.team===W.Atlanteans),wn=ye.filter(Xe=>{var ir;return((ir=m.find(Xt=>Xt.id===Xe.playerId))==null?void 0:ir.team)===W.Titans}).length,bn=ye.filter(Xe=>{var ir;return((ir=m.find(Xt=>Xt.id===Xe.playerId))==null?void 0:ir.team)===W.Atlanteans}).length;if(wn>=gs.length&&bn>=Gn.length&&(xn=!0),Q.mode===ue.Single||Q.mode===ue.AllPick||Q.mode===ue.Random){const Xe=wn>=gs.length,ir=bn>=Gn.length;Xe&&!ir?Oe=W.Atlanteans:ir&&!Xe?Oe=W.Titans:Oe=Q.currentTeam===W.Titans?W.Atlanteans:W.Titans}else if(Q.mode===ue.PickAndBan)if(yt=Q.currentStep+1,yt>=Q.pickBanSequence.length)xn=!0;else{let Xe=!1;do{const ir=Q.pickBanSequence[yt];if(ir&&ir.action==="pick"){const Xt=re.coinSide===W.Titans;if((ir.team==="A"?Xt?W.Titans:W.Atlanteans:Xt?W.Atlanteans:W.Titans)===W.Titans?wn>=gs.length:bn>=Gn.length){if(Xe=!0,yt++,yt>=Q.pickBanSequence.length){xn=!0;break}}else Xe=!1}else Xe=!1}while(Xe&&yt<Q.pickBanSequence.length);if(!xn&&yt<Q.pickBanSequence.length){const ir=Q.pickBanSequence[yt].team,Xt=re.coinSide===W.Titans;ir==="A"?Oe=Xt?W.Titans:W.Atlanteans:Oe=Xt?W.Atlanteans:W.Titans}}P({...Q,currentTeam:Oe,availableHeroes:Re,assignedHeroes:Qe,selectedHeroes:ye,currentStep:yt,isComplete:xn})},ar=ne=>{if($(Oe=>[...Oe,{...Q}]),t("heroBan"),Q.mode!==ue.PickAndBan)return;const he=[...Q.bannedHeroes,ne],ge=Q.availableHeroes.filter(Oe=>Oe.id!==ne.id),ye=Q.currentStep+1;let Re=Q.currentTeam,Qe=Q.isComplete;if(ye>=Q.pickBanSequence.length)Qe=!0;else{const Oe=Q.pickBanSequence[ye].team,yt=re.coinSide===W.Titans;Oe==="A"?Re=yt?W.Titans:W.Atlanteans:Re=yt?W.Atlanteans:W.Titans}P({...Q,currentTeam:Re,availableHeroes:ge,bannedHeroes:he,currentStep:ye,isComplete:Qe})},Ye=()=>{if(F.length>0){t("buttonClick");const ne=F[F.length-1];$(he=>he.slice(0,-1)),P(ne)}},Ot=ne=>{const he=m.length,ge=[...oe],ye=re.coinSide,Re=pb([...ge]);switch(ne){case ue.AllPick:return{mode:ne,currentTeam:ye,availableHeroes:Re,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};case ue.Single:const Qe=[...Re],Oe=m.map(gs=>{const Gn=[];for(let wn=0;wn<3;wn++)if(Qe.length>0){const bn=Math.floor(Math.random()*Qe.length);Gn.push(Qe[bn]),Qe.splice(bn,1)}return{playerId:gs.id,heroOptions:Gn}});return{mode:ne,currentTeam:ye,availableHeroes:[],assignedHeroes:Oe,selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};case ue.Random:const yt=Re.slice(0,Math.min(he+2,Re.length));return{mode:ne,currentTeam:ye,availableHeroes:yt,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};case ue.PickAndBan:const xn=FS(he);return{mode:ne,currentTeam:ye,availableHeroes:Re,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:xn,isComplete:!1};default:return{mode:ue.None,currentTeam:ye,availableHeroes:[],assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1}}},De=()=>{t("buttonClick");const ne=Ot(Q.mode);P(ne),$([])},Ps=()=>{t("buttonClick"),E(!1),N(!0),$([])},Kr=()=>{const ne=m.map(he=>{const ge=Q.selectedHeroes.find(ye=>ye.playerId===he.id);return ge?{...he,hero:ge.hero}:he});t("phaseChange"),p(ne),al=ne,Ds(ne)},Ds=ne=>{const he=ne.length,ge=ne.map(Oe=>{var yt;return{...Oe,stats:(yt=Oe.stats)!=null&&yt.level?{level:Oe.stats.level}:void 0}});p(ge),al=ge;const ye=u3e(f,he,y),Re=d3e(f,he,y),Qe={round:1,turn:1,gameLength:f,waves:ye.hasMultipleLanes?{[Fe.Top]:ye.top,[Fe.Bottom]:ye.bottom}:{[Fe.Single]:ye.single},teamLives:{[W.Titans]:Re,[W.Atlanteans]:Re},currentPhase:"strategy",activeHeroIndex:-1,coinSide:re.coinSide,hasMultipleLanes:ye.hasMultipleLanes,completedTurns:[],allPlayersMoved:!1};Le({type:"START_GAME",payload:Qe}),s(!0),de(!0),Ee(a),E(!1),Oo.clearGame().catch(console.error),t("turnStart")},No=()=>{t("buttonClick"),E(!1),N(!1)},Xu=ne=>{re.activeHeroIndex===-1&&!re.completedTurns.includes(ne)&&(t("heroSelect"),Le({type:"SELECT_PLAYER",playerIndex:ne}),ze(!0),gr(l))},fb=()=>{re.activeHeroIndex>=0&&(t("turnComplete"),ze(!1),Le({type:"MARK_PLAYER_COMPLETE",playerIndex:re.activeHeroIndex}))},gU=()=>{t("turnStart"),Le({type:"START_NEXT_TURN"}),de(!0),Ee(a)},gb=()=>{t("phaseChange"),de(!1),Le({type:"END_STRATEGY"})},mU=()=>{t("buttonClick"),Ee(a)},pU=()=>{t("buttonClick"),gr(l)},yU=(ne,he)=>{t("lifeChange"),Le({type:"ADJUST_TEAM_LIFE",team:ne,delta:he})},vU=ne=>{t("buttonClick"),Le({type:"INCREMENT_WAVE",lane:ne})},xU=ne=>{t("buttonClick"),Le({type:"DECREMENT_WAVE",lane:ne})},wU=ne=>{t("buttonClick"),Le({type:"ADJUST_ROUND",delta:ne})},bU=ne=>{t("buttonClick"),Le({type:"ADJUST_TURN",delta:ne})},_U=ne=>{t("victory"),de(!1),ze(!1),j(ne),k(!0),Oo.clearGame().catch(console.error)},CU=()=>{t("buttonClick"),de(!1),ze(!1),Ee(a),gr(l),k(!1),j(null),s(!1),E(!1),N(!1),Le({type:"RESET_GAME"}),Oo.clearGame().catch(console.error)},BU=()=>{t("coinFlip"),Le({type:"FLIP_COIN"})},SU=()=>{if(!U)return;t("buttonClick");const{gameState:ne,players:he,strategyTimeRemaining:ge,moveTimeRemaining:ye,strategyTimerActive:Re,moveTimerActive:Qe,strategyTimerEnabled:Oe,moveTimerEnabled:yt}=U;Le({type:"START_GAME",payload:ne}),p(he),al=he,Ee(ge),gr(ye),de(Re),ze(Qe),h(Oe),d(yt),s(!0),Y(!1)},jU=()=>{t("buttonClick"),Oo.clearGame().catch(console.error),Y(!1)},mb=ne=>{const he=m.map(ge=>{var Re,Qe,Oe,yt,xn,gs,Gn,wn,bn,Xe,ir;const ye=ne[ge.id];if(ye&&((ye.kills??0)>0||(ye.deaths??0)>0||(ye.assists??0)>0||(ye.goldCollected??0)>0||(ye.minionKills??0)>0||ye.level)){const Xt={};return((ye.kills??0)>0||(Re=ge.stats)!=null&&Re.totalKills)&&(Xt.totalKills=(((Qe=ge.stats)==null?void 0:Qe.totalKills)||0)+(ye.kills??0)),((ye.deaths??0)>0||(Oe=ge.stats)!=null&&Oe.totalDeaths)&&(Xt.totalDeaths=(((yt=ge.stats)==null?void 0:yt.totalDeaths)||0)+(ye.deaths??0)),((ye.assists??0)>0||(xn=ge.stats)!=null&&xn.totalAssists)&&(Xt.totalAssists=(((gs=ge.stats)==null?void 0:gs.totalAssists)||0)+(ye.assists??0)),((ye.goldCollected??0)>0||(Gn=ge.stats)!=null&&Gn.totalGoldEarned)&&(Xt.totalGoldEarned=(((wn=ge.stats)==null?void 0:wn.totalGoldEarned)||0)+(ye.goldCollected??0)),((ye.minionKills??0)>0||(bn=ge.stats)!=null&&bn.totalMinionKills)&&(Xt.totalMinionKills=(((Xe=ge.stats)==null?void 0:Xe.totalMinionKills)||0)+(ye.minionKills??0)),ye.level?Xt.level=ye.level:(ir=ge.stats)!=null&&ir.level&&(Xt.level=ge.stats.level),{...ge,stats:Xt}}return ge});p(he),al=he};B.useEffect(()=>{let ne;return ve&&$t>0?ne=setTimeout(()=>{$t===11&&t("timerWarning"),r&&t("timerTick"),Ee($t-1)},1e3):ve&&$t===0&&(t("timerComplete"),de(!1),gb()),()=>clearTimeout(ne)},[ve,$t,t,r]),B.useEffect(()=>{let ne;return Me&&nt>0?ne=setTimeout(()=>{nt===11&&t("timerWarning"),r&&t("timerTick"),gr(nt-1)},1e3):Me&&nt===0&&(t("timerComplete"),ze(!1),fb()),()=>clearTimeout(ne)},[Me,nt,t,r]);const pb=ne=>{const he=[...ne];for(let ge=he.length-1;ge>0;ge--){const ye=Math.floor(Math.random()*(ge+1));[he[ge],he[ye]]=[he[ye],he[ge]]}if(he.length>3){const ge=Math.floor(he.length/2),ye=he.slice(0,ge);return[...he.slice(ge),...ye]}return he},kU=()=>{t("buttonClick"),G(!0),te("menu")},zn=ne=>{te(ne)},EU=()=>{G(!1)};return i.jsxs("div",{className:"App min-h-screen bg-gradient-to-b from-blue-400 to-orange-300 text-white p-6",children:[i.jsx(tAe,{}),i.jsx("header",{className:"App-header mb-8",children:i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Guards of Atlantis II Timer"})}),V&&U&&i.jsx(nAe,{gameState:U.gameState,players:U.players,onResume:SU,onDiscard:jU,savedTime:K}),L&&i.jsx(Vle,{result:re.coinSide,onComplete:()=>{D(!1),N(!0)}}),I?i.jsxs(i.Fragment,{children:[X==="menu"&&i.jsx(R6e,{onBack:EU,onNavigate:zn}),X==="skill-over-time"&&i.jsx(Q6e,{onBack:()=>zn("player-stats")}),X==="player-stats"&&i.jsx(L6e,{onBack:()=>zn("menu"),onViewSkillOverTime:()=>zn("skill-over-time"),onViewPlayerDetails:ne=>{ie(ne),zn("detailed-player-stats")}}),X==="detailed-player-stats"&&Ae&&i.jsx(Y6e,{playerId:Ae,onBack:()=>{ie(null),zn("player-stats")}}),X==="hero-stats"&&i.jsx(s3e,{onBack:()=>zn("menu")}),X==="match-history"&&i.jsx(t3e,{onBack:()=>zn("menu")}),X==="hero-info"&&i.jsx(c3e,{onBack:()=>zn("menu")}),X==="record-match"&&i.jsx(a3e,{onBack:()=>zn("menu")}),X==="match-maker"&&i.jsx(n3e,{onBack:()=>zn("menu"),onUseTeams:(ne,he)=>{p([]);const ge=ne.map((Qe,Oe)=>({id:Oe+1,team:W.Titans,hero:null,name:Qe})),ye=he.map((Qe,Oe)=>({id:ne.length+Oe+1,team:W.Atlanteans,hero:null,name:Qe})),Re=[...ge,...ye];p(Re),G(!1),t("phaseChange")}})]}):n?i.jsx(Gle,{gameState:re,players:m,strategyTimeRemaining:$t,moveTimeRemaining:nt,strategyTimerEnabled:u,moveTimerEnabled:c,strategyTimerActive:ve,moveTimerActive:Me,onStartStrategyTimer:()=>de(!0),onPauseStrategyTimer:()=>de(!1),onResetStrategyTimer:mU,onEndStrategyPhase:gb,onStartMoveTimer:()=>ze(!0),onPauseMoveTimer:()=>ze(!1),onResetMoveTimer:pU,onSelectPlayer:Xu,onCompletePlayerTurn:fb,onStartNextTurn:gU,onAdjustTeamLife:yU,onIncrementWave:vU,onDecrementWave:xU,onAdjustRound:wU,onAdjustTurn:bU,onDeclareVictory:_U,onFlipCoin:BU,onSavePlayerStats:mb}):i.jsx("div",{className:"game-setup-container",children:C?i.jsx(qle,{onSelectMode:je,onCancel:()=>N(!1),playerCount:m.length,availableDraftModes:{[ue.AllPick]:Is(ue.AllPick),[ue.Single]:Is(ue.Single),[ue.Random]:Is(ue.Random),[ue.PickAndBan]:Is(ue.PickAndBan)},heroCount:oe.length,handicapTeam:Eo}):S?i.jsx(Wle,{players:m,availableHeroes:oe,draftingState:Q,onHeroSelect:Je,onHeroBan:ar,onFinishDrafting:Kr,onCancelDrafting:No,onUndoLastAction:Ye,onResetDraft:De,onBackToDraftSelection:Ps,canUndo:F.length>0}):i.jsx(Kle,{strategyTime:a,moveTime:l,gameLength:f,strategyTimerEnabled:u,moveTimerEnabled:c,onStrategyTimeChange:o,onMoveTimeChange:A,onGameLengthChange:pi,onStrategyTimerEnabledChange:h,onMoveTimerEnabledChange:d,players:m,onAddPlayer:Ca,onRemovePlayer:So,onDraftHeroes:ce,selectedExpansions:x,onToggleExpansion:jo,onPlayerNameChange:ko,duplicateNames:Qs(),canStartDrafting:Is(ue.AllPick),heroCount:oe.length,maxComplexity:_,onMaxComplexityChange:b,useDoubleLaneFor6Players:y,onUseDoubleLaneFor6PlayersChange:v,onViewMatches:kU})}),z&&M&&i.jsx(rAe,{winningTeam:M,onReturnToSetup:CU,players:m,gameLength:f,doubleLanes:re.hasMultipleLanes,onUpdatePlayerStats:mb}),i.jsx(Xle,{feedbackUrl:"https://forms.gle/dsjjDSbqhTn3hATt6"}),i.jsx(Jle,{}),i.jsx(OAe,{}),i.jsx(eAe,{id:"cloud-sync-v1",title:"New: Cloud Sync!",description:i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"mb-2",children:"You can now sync your match data across devices and with friends!"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-400",children:[i.jsx("li",{children:"Create an account to back up your data"}),i.jsx("li",{children:"Sync matches across your own devices"}),i.jsx("li",{children:"Share match data with friends"})]}),i.jsxs("p",{className:"mt-3 text-orange-400",children:["Look for the ",i.jsx("strong",{children:"orange arrow"})," in the top-right corner to get started."]})]})})]})}function g3e(){return i.jsx(h7,{children:i.jsx(FAe,{children:i.jsx(UAe,{children:i.jsx(f3e,{})})})})}vp.createRoot(document.getElementById("root")).render(i.jsx(R.StrictMode,{children:i.jsx(g3e,{})}));
