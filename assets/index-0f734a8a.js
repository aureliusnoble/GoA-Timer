var pD=Object.defineProperty;var yD=(e,n,r)=>n in e?pD(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r;var de=(e,n,r)=>(yD(e,typeof n!="symbol"?n+"":n,r),r);var CA=(e,n,r)=>{if(n.has(e))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(e):n.set(e,r)};function vD(e,n){for(var r=0;r<n.length;r++){const s=n[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ht(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var oN={exports:{}},qg={},lN={exports:{}},lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd=Symbol.for("react.element"),xD=Symbol.for("react.portal"),wD=Symbol.for("react.fragment"),bD=Symbol.for("react.strict_mode"),_D=Symbol.for("react.profiler"),CD=Symbol.for("react.provider"),BD=Symbol.for("react.context"),SD=Symbol.for("react.forward_ref"),kD=Symbol.for("react.suspense"),jD=Symbol.for("react.memo"),ND=Symbol.for("react.lazy"),nC=Symbol.iterator;function ED(e){return e===null||typeof e!="object"?null:(e=nC&&e[nC]||e["@@iterator"],typeof e=="function"?e:null)}var cN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AN=Object.assign,uN={};function oA(e,n,r){this.props=e,this.context=n,this.refs=uN,this.updater=r||cN}oA.prototype.isReactComponent={};oA.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};oA.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dN(){}dN.prototype=oA.prototype;function Cw(e,n,r){this.props=e,this.context=n,this.refs=uN,this.updater=r||cN}var Bw=Cw.prototype=new dN;Bw.constructor=Cw;AN(Bw,oA.prototype);Bw.isPureReactComponent=!0;var rC=Array.isArray,hN=Object.prototype.hasOwnProperty,Sw={current:null},fN={key:!0,ref:!0,__self:!0,__source:!0};function gN(e,n,r){var s,a={},i=null,o=null;if(n!=null)for(s in n.ref!==void 0&&(o=n.ref),n.key!==void 0&&(i=""+n.key),n)hN.call(n,s)&&!fN.hasOwnProperty(s)&&(a[s]=n[s]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var A=Array(c),u=0;u<c;u++)A[u]=arguments[u+2];a.children=A}if(e&&e.defaultProps)for(s in c=e.defaultProps,c)a[s]===void 0&&(a[s]=c[s]);return{$$typeof:Qd,type:e,key:i,ref:o,props:a,_owner:Sw.current}}function TD(e,n){return{$$typeof:Qd,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function kw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qd}function FD(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return n[r]})}var sC=/\/+/g;function Pp(e,n){return typeof e=="object"&&e!==null&&e.key!=null?FD(""+e.key):n.toString(36)}function Ff(e,n,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qd:case xD:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+Pp(o,0):s,rC(a)?(r="",e!=null&&(r=e.replace(sC,"$&/")+"/"),Ff(a,n,r,"",function(u){return u})):a!=null&&(kw(a)&&(a=TD(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(sC,"$&/")+"/")+e)),n.push(a)),1;if(o=0,s=s===""?".":s+":",rC(e))for(var c=0;c<e.length;c++){i=e[c];var A=s+Pp(i,c);o+=Ff(i,n,r,A,a)}else if(A=ED(e),typeof A=="function")for(e=A.call(e),c=0;!(i=e.next()).done;)i=i.value,A=s+Pp(i,c++),o+=Ff(i,n,r,A,a);else if(i==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return o}function bh(e,n,r){if(e==null)return e;var s=[],a=0;return Ff(e,s,"","",function(i){return n.call(r,i,a++)}),s}function UD(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var hr={current:null},Uf={transition:null},ID={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:Uf,ReactCurrentOwner:Sw};function mN(){throw Error("act(...) is not supported in production builds of React.")}lt.Children={map:bh,forEach:function(e,n,r){bh(e,function(){n.apply(this,arguments)},r)},count:function(e){var n=0;return bh(e,function(){n++}),n},toArray:function(e){return bh(e,function(n){return n})||[]},only:function(e){if(!kw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};lt.Component=oA;lt.Fragment=wD;lt.Profiler=_D;lt.PureComponent=Cw;lt.StrictMode=bD;lt.Suspense=kD;lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ID;lt.act=mN;lt.cloneElement=function(e,n,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=AN({},e.props),a=e.key,i=e.ref,o=e._owner;if(n!=null){if(n.ref!==void 0&&(i=n.ref,o=Sw.current),n.key!==void 0&&(a=""+n.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(A in n)hN.call(n,A)&&!fN.hasOwnProperty(A)&&(s[A]=n[A]===void 0&&c!==void 0?c[A]:n[A])}var A=arguments.length-2;if(A===1)s.children=r;else if(1<A){c=Array(A);for(var u=0;u<A;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:Qd,type:e.type,key:a,ref:i,props:s,_owner:o}};lt.createContext=function(e){return e={$$typeof:BD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:CD,_context:e},e.Consumer=e};lt.createElement=gN;lt.createFactory=function(e){var n=gN.bind(null,e);return n.type=e,n};lt.createRef=function(){return{current:null}};lt.forwardRef=function(e){return{$$typeof:SD,render:e}};lt.isValidElement=kw;lt.lazy=function(e){return{$$typeof:ND,_payload:{_status:-1,_result:e},_init:UD}};lt.memo=function(e,n){return{$$typeof:jD,type:e,compare:n===void 0?null:n}};lt.startTransition=function(e){var n=Uf.transition;Uf.transition={};try{e()}finally{Uf.transition=n}};lt.unstable_act=mN;lt.useCallback=function(e,n){return hr.current.useCallback(e,n)};lt.useContext=function(e){return hr.current.useContext(e)};lt.useDebugValue=function(){};lt.useDeferredValue=function(e){return hr.current.useDeferredValue(e)};lt.useEffect=function(e,n){return hr.current.useEffect(e,n)};lt.useId=function(){return hr.current.useId()};lt.useImperativeHandle=function(e,n,r){return hr.current.useImperativeHandle(e,n,r)};lt.useInsertionEffect=function(e,n){return hr.current.useInsertionEffect(e,n)};lt.useLayoutEffect=function(e,n){return hr.current.useLayoutEffect(e,n)};lt.useMemo=function(e,n){return hr.current.useMemo(e,n)};lt.useReducer=function(e,n,r){return hr.current.useReducer(e,n,r)};lt.useRef=function(e){return hr.current.useRef(e)};lt.useState=function(e){return hr.current.useState(e)};lt.useSyncExternalStore=function(e,n,r){return hr.current.useSyncExternalStore(e,n,r)};lt.useTransition=function(){return hr.current.useTransition()};lt.version="18.3.1";lN.exports=lt;var S=lN.exports;const G=Ht(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD=S,QD=Symbol.for("react.element"),MD=Symbol.for("react.fragment"),DD=Object.prototype.hasOwnProperty,RD=PD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$D={key:!0,ref:!0,__self:!0,__source:!0};function pN(e,n,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(o=n.ref);for(s in n)DD.call(n,s)&&!$D.hasOwnProperty(s)&&(a[s]=n[s]);if(e&&e.defaultProps)for(s in n=e.defaultProps,n)a[s]===void 0&&(a[s]=n[s]);return{$$typeof:QD,type:e,key:i,ref:o,props:a,_owner:RD.current}}qg.Fragment=MD;qg.jsx=pN;qg.jsxs=pN;oN.exports=qg;var l=oN.exports,Bv={},yN={exports:{}},Wr={},vN={exports:{}},xN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(Q,M){var F=Q.length;Q.push(M);e:for(;0<F;){var O=F-1>>>1,X=Q[O];if(0<a(X,M))Q[O]=M,Q[F]=X,F=O;else break e}}function r(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var M=Q[0],F=Q.pop();if(F!==M){Q[0]=F;e:for(var O=0,X=Q.length,ae=X>>>1;O<ae;){var $=2*(O+1)-1,J=Q[$],le=$+1,re=Q[le];if(0>a(J,F))le<X&&0>a(re,J)?(Q[O]=re,Q[le]=F,O=le):(Q[O]=J,Q[$]=F,O=$);else if(le<X&&0>a(re,F))Q[O]=re,Q[le]=F,O=le;else break e}}return M}function a(Q,M){var F=Q.sortIndex-M.sortIndex;return F!==0?F:Q.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var A=[],u=[],h=1,d=null,f=3,g=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Q){for(var M=r(u);M!==null;){if(M.callback===null)s(u);else if(M.startTime<=Q)s(u),M.sortIndex=M.expirationTime,n(A,M);else break;M=r(u)}}function w(Q){if(y=!1,b(Q),!m)if(r(A)!==null)m=!0,T(_);else{var M=r(u);M!==null&&L(w,M.startTime-Q)}}function _(Q,M){m=!1,y&&(y=!1,p(j),j=-1),g=!0;var F=f;try{for(b(M),d=r(A);d!==null&&(!(d.expirationTime>M)||Q&&!P());){var O=d.callback;if(typeof O=="function"){d.callback=null,f=d.priorityLevel;var X=O(d.expirationTime<=M);M=e.unstable_now(),typeof X=="function"?d.callback=X:d===r(A)&&s(A),b(M)}else s(A);d=r(A)}if(d!==null)var ae=!0;else{var $=r(u);$!==null&&L(w,$.startTime-M),ae=!1}return ae}finally{d=null,f=F,g=!1}}var C=!1,k=null,j=-1,B=5,E=-1;function P(){return!(e.unstable_now()-E<B)}function I(){if(k!==null){var Q=e.unstable_now();E=Q;var M=!0;try{M=k(!0,Q)}finally{M?U():(C=!1,k=null)}}else C=!1}var U;if(typeof v=="function")U=function(){v(I)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,D=N.port2;N.port1.onmessage=I,U=function(){D.postMessage(null)}}else U=function(){x(I,0)};function T(Q){k=Q,C||(C=!0,U())}function L(Q,M){j=x(function(){Q(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){m||g||(m=!0,T(_))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(A)},e.unstable_next=function(Q){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var F=f;f=M;try{return Q()}finally{f=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,M){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var F=f;f=Q;try{return M()}finally{f=F}},e.unstable_scheduleCallback=function(Q,M,F){var O=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?O+F:O):F=O,Q){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=F+X,Q={id:h++,callback:M,priorityLevel:Q,startTime:F,expirationTime:X,sortIndex:-1},F>O?(Q.sortIndex=F,n(u,Q),r(A)===null&&Q===r(u)&&(y?(p(j),j=-1):y=!0,L(w,F-O))):(Q.sortIndex=X,n(A,Q),m||g||(m=!0,T(_))),Q},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(Q){var M=f;return function(){var F=f;f=M;try{return Q.apply(this,arguments)}finally{f=F}}}})(xN);vN.exports=xN;var OD=vN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LD=S,Kr=OD;function ge(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wN=new Set,Wu={};function ol(e,n){Qc(e,n),Qc(e+"Capture",n)}function Qc(e,n){for(Wu[e]=n,e=0;e<n.length;e++)wN.add(n[e])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sv=Object.prototype.hasOwnProperty,HD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aC={},iC={};function zD(e){return Sv.call(iC,e)?!0:Sv.call(aC,e)?!1:HD.test(e)?iC[e]=!0:(aC[e]=!0,!1)}function KD(e,n,r,s){if(r!==null&&r.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function GD(e,n,r,s){if(n===null||typeof n>"u"||KD(e,n,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function fr(e,n,r,s,a,i,o){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=n,this.sanitizeURL=i,this.removeEmptyString=o}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dn[e]=new fr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];Dn[n]=new fr(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dn[e]=new fr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dn[e]=new fr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dn[e]=new fr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dn[e]=new fr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dn[e]=new fr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dn[e]=new fr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dn[e]=new fr(e,5,!1,e.toLowerCase(),null,!1,!1)});var jw=/[\-:]([a-z])/g;function Nw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(jw,Nw);Dn[n]=new fr(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(jw,Nw);Dn[n]=new fr(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(jw,Nw);Dn[n]=new fr(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dn[e]=new fr(e,1,!1,e.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dn[e]=new fr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ew(e,n,r,s){var a=Dn.hasOwnProperty(n)?Dn[n]:null;(a!==null?a.type!==0:s||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(GD(n,r,a,s)&&(r=null),s||a===null?zD(n)&&(r===null?e.removeAttribute(n):e.setAttribute(n,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(n=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(n):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,n,r):e.setAttribute(n,r))))}var di=LD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_h=Symbol.for("react.element"),ac=Symbol.for("react.portal"),ic=Symbol.for("react.fragment"),Tw=Symbol.for("react.strict_mode"),kv=Symbol.for("react.profiler"),bN=Symbol.for("react.provider"),_N=Symbol.for("react.context"),Fw=Symbol.for("react.forward_ref"),jv=Symbol.for("react.suspense"),Nv=Symbol.for("react.suspense_list"),Uw=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),CN=Symbol.for("react.offscreen"),oC=Symbol.iterator;function BA(e){return e===null||typeof e!="object"?null:(e=oC&&e[oC]||e["@@iterator"],typeof e=="function"?e:null)}var Vt=Object.assign,Qp;function ru(e){if(Qp===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Qp=n&&n[1]||""}return`
`+Qp+e}var Mp=!1;function Dp(e,n){if(!e||Mp)return"";Mp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var s=u}Reflect.construct(e,[],n)}else{try{n.call()}catch(u){s=u}e.call(n.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,c=i.length-1;1<=o&&0<=c&&a[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==i[c]){var A=`
`+a[o].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=o&&0<=c);break}}}finally{Mp=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ru(e):""}function WD(e){switch(e.tag){case 5:return ru(e.type);case 16:return ru("Lazy");case 13:return ru("Suspense");case 19:return ru("SuspenseList");case 0:case 2:case 15:return e=Dp(e.type,!1),e;case 11:return e=Dp(e.type.render,!1),e;case 1:return e=Dp(e.type,!0),e;default:return""}}function Ev(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ic:return"Fragment";case ac:return"Portal";case kv:return"Profiler";case Tw:return"StrictMode";case jv:return"Suspense";case Nv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _N:return(e.displayName||"Context")+".Consumer";case bN:return(e._context.displayName||"Context")+".Provider";case Fw:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uw:return n=e.displayName||null,n!==null?n:Ev(e.type)||"Memo";case Si:n=e._payload,e=e._init;try{return Ev(e(n))}catch{}}return null}function VD(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ev(n);case 8:return n===Tw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function to(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function BN(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function qD(e){var n=BN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,n,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ch(e){e._valueTracker||(e._valueTracker=qD(e))}function SN(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var r=n.getValue(),s="";return e&&(s=BN(e)?e.checked?"true":"false":e.value),e=s,e!==r?(n.setValue(e),!0):!1}function c0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Tv(e,n){var r=n.checked;return Vt({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function lC(e,n){var r=n.defaultValue==null?"":n.defaultValue,s=n.checked!=null?n.checked:n.defaultChecked;r=to(n.value!=null?n.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function kN(e,n){n=n.checked,n!=null&&Ew(e,"checked",n,!1)}function Fv(e,n){kN(e,n);var r=to(n.value),s=n.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Uv(e,n.type,r):n.hasOwnProperty("defaultValue")&&Uv(e,n.type,to(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function cC(e,n,r){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var s=n.type;if(!(s!=="submit"&&s!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,r||n===e.value||(e.value=n),e.defaultValue=n}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Uv(e,n,r){(n!=="number"||c0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var su=Array.isArray;function wc(e,n,r,s){if(e=e.options,n){n={};for(var a=0;a<r.length;a++)n["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=n.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+to(r),n=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}n!==null||e[a].disabled||(n=e[a])}n!==null&&(n.selected=!0)}}function Iv(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Vt({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function AC(e,n){var r=n.value;if(r==null){if(r=n.children,n=n.defaultValue,r!=null){if(n!=null)throw Error(ge(92));if(su(r)){if(1<r.length)throw Error(ge(93));r=r[0]}n=r}n==null&&(n=""),r=n}e._wrapperState={initialValue:to(r)}}function jN(e,n){var r=to(n.value),s=to(n.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),n.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function uC(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function NN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pv(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?NN(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bh,EN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(n,r,s,a)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(Bh=Bh||document.createElement("div"),Bh.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Bh.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Vu(e,n){if(n){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=n;return}}e.textContent=n}var Cu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XD=["Webkit","ms","Moz","O"];Object.keys(Cu).forEach(function(e){XD.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Cu[n]=Cu[e]})});function TN(e,n,r){return n==null||typeof n=="boolean"||n===""?"":r||typeof n!="number"||n===0||Cu.hasOwnProperty(e)&&Cu[e]?(""+n).trim():n+"px"}function FN(e,n){e=e.style;for(var r in n)if(n.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=TN(r,n[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var YD=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qv(e,n){if(n){if(YD[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(ge(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(ge(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(ge(61))}if(n.style!=null&&typeof n.style!="object")throw Error(ge(62))}}function Mv(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dv=null;function Iw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rv=null,bc=null,_c=null;function dC(e){if(e=Rd(e)){if(typeof Rv!="function")throw Error(ge(280));var n=e.stateNode;n&&(n=em(n),Rv(e.stateNode,e.type,n))}}function UN(e){bc?_c?_c.push(e):_c=[e]:bc=e}function IN(){if(bc){var e=bc,n=_c;if(_c=bc=null,dC(e),n)for(e=0;e<n.length;e++)dC(n[e])}}function PN(e,n){return e(n)}function QN(){}var Rp=!1;function MN(e,n,r){if(Rp)return e(n,r);Rp=!0;try{return PN(e,n,r)}finally{Rp=!1,(bc!==null||_c!==null)&&(QN(),IN())}}function qu(e,n){var r=e.stateNode;if(r===null)return null;var s=em(r);if(s===null)return null;r=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ge(231,n,typeof r));return r}var $v=!1;if(ti)try{var SA={};Object.defineProperty(SA,"passive",{get:function(){$v=!0}}),window.addEventListener("test",SA,SA),window.removeEventListener("test",SA,SA)}catch{$v=!1}function JD(e,n,r,s,a,i,o,c,A){var u=Array.prototype.slice.call(arguments,3);try{n.apply(r,u)}catch(h){this.onError(h)}}var Bu=!1,A0=null,u0=!1,Ov=null,ZD={onError:function(e){Bu=!0,A0=e}};function e7(e,n,r,s,a,i,o,c,A){Bu=!1,A0=null,JD.apply(ZD,arguments)}function t7(e,n,r,s,a,i,o,c,A){if(e7.apply(this,arguments),Bu){if(Bu){var u=A0;Bu=!1,A0=null}else throw Error(ge(198));u0||(u0=!0,Ov=u)}}function ll(e){var n=e,r=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(r=n.return),e=n.return;while(e)}return n.tag===3?r:null}function DN(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function hC(e){if(ll(e)!==e)throw Error(ge(188))}function n7(e){var n=e.alternate;if(!n){if(n=ll(e),n===null)throw Error(ge(188));return n!==e?null:e}for(var r=e,s=n;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return hC(a),e;if(i===s)return hC(a),n;i=i.sibling}throw Error(ge(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,c=a.child;c;){if(c===r){o=!0,r=a,s=i;break}if(c===s){o=!0,s=a,r=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===r){o=!0,r=i,s=a;break}if(c===s){o=!0,s=i,r=a;break}c=c.sibling}if(!o)throw Error(ge(189))}}if(r.alternate!==s)throw Error(ge(190))}if(r.tag!==3)throw Error(ge(188));return r.stateNode.current===r?e:n}function RN(e){return e=n7(e),e!==null?$N(e):null}function $N(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=$N(e);if(n!==null)return n;e=e.sibling}return null}var ON=Kr.unstable_scheduleCallback,fC=Kr.unstable_cancelCallback,r7=Kr.unstable_shouldYield,s7=Kr.unstable_requestPaint,nn=Kr.unstable_now,a7=Kr.unstable_getCurrentPriorityLevel,Pw=Kr.unstable_ImmediatePriority,LN=Kr.unstable_UserBlockingPriority,d0=Kr.unstable_NormalPriority,i7=Kr.unstable_LowPriority,HN=Kr.unstable_IdlePriority,Xg=null,ha=null;function o7(e){if(ha&&typeof ha.onCommitFiberRoot=="function")try{ha.onCommitFiberRoot(Xg,e,void 0,(e.current.flags&128)===128)}catch{}}var Ds=Math.clz32?Math.clz32:A7,l7=Math.log,c7=Math.LN2;function A7(e){return e>>>=0,e===0?32:31-(l7(e)/c7|0)|0}var Sh=64,kh=4194304;function au(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function h0(e,n){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~a;c!==0?s=au(c):(i&=o,i!==0&&(s=au(i)))}else o=r&~a,o!==0?s=au(o):i!==0&&(s=au(i));if(s===0)return 0;if(n!==0&&n!==s&&!(n&a)&&(a=s&-s,i=n&-n,a>=i||a===16&&(i&4194240)!==0))return n;if(s&4&&(s|=r&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=s;0<n;)r=31-Ds(n),a=1<<r,s|=e[r],n&=~a;return s}function u7(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d7(e,n){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ds(i),c=1<<o,A=a[o];A===-1?(!(c&r)||c&s)&&(a[o]=u7(c,n)):A<=n&&(e.expiredLanes|=c),i&=~c}}function Lv(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zN(){var e=Sh;return Sh<<=1,!(Sh&4194240)&&(Sh=64),e}function $p(e){for(var n=[],r=0;31>r;r++)n.push(e);return n}function Md(e,n,r){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Ds(n),e[n]=r}function h7(e,n){var r=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ds(r),i=1<<a;n[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function Qw(e,n){var r=e.entangledLanes|=n;for(e=e.entanglements;r;){var s=31-Ds(r),a=1<<s;a&n|e[s]&n&&(e[s]|=n),r&=~a}}var yt=0;function KN(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var GN,Mw,WN,VN,qN,Hv=!1,jh=[],Hi=null,zi=null,Ki=null,Xu=new Map,Yu=new Map,Ei=[],f7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gC(e,n){switch(e){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Xu.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(n.pointerId)}}function kA(e,n,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:n,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},n!==null&&(n=Rd(n),n!==null&&Mw(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,a!==null&&n.indexOf(a)===-1&&n.push(a),e)}function g7(e,n,r,s,a){switch(n){case"focusin":return Hi=kA(Hi,e,n,r,s,a),!0;case"dragenter":return zi=kA(zi,e,n,r,s,a),!0;case"mouseover":return Ki=kA(Ki,e,n,r,s,a),!0;case"pointerover":var i=a.pointerId;return Xu.set(i,kA(Xu.get(i)||null,e,n,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Yu.set(i,kA(Yu.get(i)||null,e,n,r,s,a)),!0}return!1}function XN(e){var n=Uo(e.target);if(n!==null){var r=ll(n);if(r!==null){if(n=r.tag,n===13){if(n=DN(r),n!==null){e.blockedOn=n,qN(e.priority,function(){WN(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function If(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var r=zv(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Dv=s,r.target.dispatchEvent(s),Dv=null}else return n=Rd(r),n!==null&&Mw(n),e.blockedOn=r,!1;n.shift()}return!0}function mC(e,n,r){If(e)&&r.delete(n)}function m7(){Hv=!1,Hi!==null&&If(Hi)&&(Hi=null),zi!==null&&If(zi)&&(zi=null),Ki!==null&&If(Ki)&&(Ki=null),Xu.forEach(mC),Yu.forEach(mC)}function jA(e,n){e.blockedOn===n&&(e.blockedOn=null,Hv||(Hv=!0,Kr.unstable_scheduleCallback(Kr.unstable_NormalPriority,m7)))}function Ju(e){function n(a){return jA(a,e)}if(0<jh.length){jA(jh[0],e);for(var r=1;r<jh.length;r++){var s=jh[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Hi!==null&&jA(Hi,e),zi!==null&&jA(zi,e),Ki!==null&&jA(Ki,e),Xu.forEach(n),Yu.forEach(n),r=0;r<Ei.length;r++)s=Ei[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ei.length&&(r=Ei[0],r.blockedOn===null);)XN(r),r.blockedOn===null&&Ei.shift()}var Cc=di.ReactCurrentBatchConfig,f0=!0;function p7(e,n,r,s){var a=yt,i=Cc.transition;Cc.transition=null;try{yt=1,Dw(e,n,r,s)}finally{yt=a,Cc.transition=i}}function y7(e,n,r,s){var a=yt,i=Cc.transition;Cc.transition=null;try{yt=4,Dw(e,n,r,s)}finally{yt=a,Cc.transition=i}}function Dw(e,n,r,s){if(f0){var a=zv(e,n,r,s);if(a===null)Xp(e,n,s,g0,r),gC(e,s);else if(g7(a,e,n,r,s))s.stopPropagation();else if(gC(e,s),n&4&&-1<f7.indexOf(e)){for(;a!==null;){var i=Rd(a);if(i!==null&&GN(i),i=zv(e,n,r,s),i===null&&Xp(e,n,s,g0,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else Xp(e,n,s,null,r)}}var g0=null;function zv(e,n,r,s){if(g0=null,e=Iw(s),e=Uo(e),e!==null)if(n=ll(e),n===null)e=null;else if(r=n.tag,r===13){if(e=DN(n),e!==null)return e;e=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return g0=e,null}function YN(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a7()){case Pw:return 1;case LN:return 4;case d0:case i7:return 16;case HN:return 536870912;default:return 16}default:return 16}}var Mi=null,Rw=null,Pf=null;function JN(){if(Pf)return Pf;var e,n=Rw,r=n.length,s,a="value"in Mi?Mi.value:Mi.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&n[r-s]===a[i-s];s++);return Pf=a.slice(e,1<s?1-s:void 0)}function Qf(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Nh(){return!0}function pC(){return!1}function Vr(e){function n(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nh:pC,this.isPropagationStopped=pC,this}return Vt(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Nh)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Nh)},persist:function(){},isPersistent:Nh}),n}var lA={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$w=Vr(lA),Dd=Vt({},lA,{view:0,detail:0}),v7=Vr(Dd),Op,Lp,NA,Yg=Vt({},Dd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ow,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==NA&&(NA&&e.type==="mousemove"?(Op=e.screenX-NA.screenX,Lp=e.screenY-NA.screenY):Lp=Op=0,NA=e),Op)},movementY:function(e){return"movementY"in e?e.movementY:Lp}}),yC=Vr(Yg),x7=Vt({},Yg,{dataTransfer:0}),w7=Vr(x7),b7=Vt({},Dd,{relatedTarget:0}),Hp=Vr(b7),_7=Vt({},lA,{animationName:0,elapsedTime:0,pseudoElement:0}),C7=Vr(_7),B7=Vt({},lA,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),S7=Vr(B7),k7=Vt({},lA,{data:0}),vC=Vr(k7),j7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T7(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=E7[e])?!!n[e]:!1}function Ow(){return T7}var F7=Vt({},Dd,{key:function(e){if(e.key){var n=j7[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Qf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ow,charCode:function(e){return e.type==="keypress"?Qf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U7=Vr(F7),I7=Vt({},Yg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xC=Vr(I7),P7=Vt({},Dd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ow}),Q7=Vr(P7),M7=Vt({},lA,{propertyName:0,elapsedTime:0,pseudoElement:0}),D7=Vr(M7),R7=Vt({},Yg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$7=Vr(R7),O7=[9,13,27,32],Lw=ti&&"CompositionEvent"in window,Su=null;ti&&"documentMode"in document&&(Su=document.documentMode);var L7=ti&&"TextEvent"in window&&!Su,ZN=ti&&(!Lw||Su&&8<Su&&11>=Su),wC=String.fromCharCode(32),bC=!1;function eE(e,n){switch(e){case"keyup":return O7.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var oc=!1;function H7(e,n){switch(e){case"compositionend":return tE(n);case"keypress":return n.which!==32?null:(bC=!0,wC);case"textInput":return e=n.data,e===wC&&bC?null:e;default:return null}}function z7(e,n){if(oc)return e==="compositionend"||!Lw&&eE(e,n)?(e=JN(),Pf=Rw=Mi=null,oc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return ZN&&n.locale!=="ko"?null:n.data;default:return null}}var K7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _C(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!K7[e.type]:n==="textarea"}function nE(e,n,r,s){UN(s),n=m0(n,"onChange"),0<n.length&&(r=new $w("onChange","change",null,r,s),e.push({event:r,listeners:n}))}var ku=null,Zu=null;function G7(e){hE(e,0)}function Jg(e){var n=Ac(e);if(SN(n))return e}function W7(e,n){if(e==="change")return n}var rE=!1;if(ti){var zp;if(ti){var Kp="oninput"in document;if(!Kp){var CC=document.createElement("div");CC.setAttribute("oninput","return;"),Kp=typeof CC.oninput=="function"}zp=Kp}else zp=!1;rE=zp&&(!document.documentMode||9<document.documentMode)}function BC(){ku&&(ku.detachEvent("onpropertychange",sE),Zu=ku=null)}function sE(e){if(e.propertyName==="value"&&Jg(Zu)){var n=[];nE(n,Zu,e,Iw(e)),MN(G7,n)}}function V7(e,n,r){e==="focusin"?(BC(),ku=n,Zu=r,ku.attachEvent("onpropertychange",sE)):e==="focusout"&&BC()}function q7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Jg(Zu)}function X7(e,n){if(e==="click")return Jg(n)}function Y7(e,n){if(e==="input"||e==="change")return Jg(n)}function J7(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Hs=typeof Object.is=="function"?Object.is:J7;function ed(e,n){if(Hs(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var r=Object.keys(e),s=Object.keys(n);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Sv.call(n,a)||!Hs(e[a],n[a]))return!1}return!0}function SC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kC(e,n){var r=SC(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=n&&s>=n)return{node:r,offset:n-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=SC(r)}}function aE(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?aE(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function iE(){for(var e=window,n=c0();n instanceof e.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)e=n.contentWindow;else break;n=c0(e.document)}return n}function Hw(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Z7(e){var n=iE(),r=e.focusedElem,s=e.selectionRange;if(n!==r&&r&&r.ownerDocument&&aE(r.ownerDocument.documentElement,r)){if(s!==null&&Hw(r)){if(n=s.start,e=s.end,e===void 0&&(e=n),"selectionStart"in r)r.selectionStart=n,r.selectionEnd=Math.min(e,r.value.length);else if(e=(n=r.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=kC(r,i);var o=kC(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(n=n.createRange(),n.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(n),e.extend(o.node,o.offset)):(n.setEnd(o.node,o.offset),e.addRange(n)))}}for(n=[],e=r;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<n.length;r++)e=n[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eR=ti&&"documentMode"in document&&11>=document.documentMode,lc=null,Kv=null,ju=null,Gv=!1;function jC(e,n,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Gv||lc==null||lc!==c0(s)||(s=lc,"selectionStart"in s&&Hw(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ju&&ed(ju,s)||(ju=s,s=m0(Kv,"onSelect"),0<s.length&&(n=new $w("onSelect","select",null,n,r),e.push({event:n,listeners:s}),n.target=lc)))}function Eh(e,n){var r={};return r[e.toLowerCase()]=n.toLowerCase(),r["Webkit"+e]="webkit"+n,r["Moz"+e]="moz"+n,r}var cc={animationend:Eh("Animation","AnimationEnd"),animationiteration:Eh("Animation","AnimationIteration"),animationstart:Eh("Animation","AnimationStart"),transitionend:Eh("Transition","TransitionEnd")},Gp={},oE={};ti&&(oE=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function Zg(e){if(Gp[e])return Gp[e];if(!cc[e])return e;var n=cc[e],r;for(r in n)if(n.hasOwnProperty(r)&&r in oE)return Gp[e]=n[r];return e}var lE=Zg("animationend"),cE=Zg("animationiteration"),AE=Zg("animationstart"),uE=Zg("transitionend"),dE=new Map,NC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lo(e,n){dE.set(e,n),ol(n,[e])}for(var Wp=0;Wp<NC.length;Wp++){var Vp=NC[Wp],tR=Vp.toLowerCase(),nR=Vp[0].toUpperCase()+Vp.slice(1);lo(tR,"on"+nR)}lo(lE,"onAnimationEnd");lo(cE,"onAnimationIteration");lo(AE,"onAnimationStart");lo("dblclick","onDoubleClick");lo("focusin","onFocus");lo("focusout","onBlur");lo(uE,"onTransitionEnd");Qc("onMouseEnter",["mouseout","mouseover"]);Qc("onMouseLeave",["mouseout","mouseover"]);Qc("onPointerEnter",["pointerout","pointerover"]);Qc("onPointerLeave",["pointerout","pointerover"]);ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ol("onBeforeInput",["compositionend","keypress","textInput","paste"]);ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rR=new Set("cancel close invalid load scroll toggle".split(" ").concat(iu));function EC(e,n,r){var s=e.type||"unknown-event";e.currentTarget=r,t7(s,n,void 0,e),e.currentTarget=null}function hE(e,n){n=(n&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(n)for(var o=s.length-1;0<=o;o--){var c=s[o],A=c.instance,u=c.currentTarget;if(c=c.listener,A!==i&&a.isPropagationStopped())break e;EC(a,c,u),i=A}else for(o=0;o<s.length;o++){if(c=s[o],A=c.instance,u=c.currentTarget,c=c.listener,A!==i&&a.isPropagationStopped())break e;EC(a,c,u),i=A}}}if(u0)throw e=Ov,u0=!1,Ov=null,e}function Tt(e,n){var r=n[Yv];r===void 0&&(r=n[Yv]=new Set);var s=e+"__bubble";r.has(s)||(fE(n,e,2,!1),r.add(s))}function qp(e,n,r){var s=0;n&&(s|=4),fE(r,e,s,n)}var Th="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[Th]){e[Th]=!0,wN.forEach(function(r){r!=="selectionchange"&&(rR.has(r)||qp(r,!1,e),qp(r,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Th]||(n[Th]=!0,qp("selectionchange",!1,n))}}function fE(e,n,r,s){switch(YN(n)){case 1:var a=p7;break;case 4:a=y7;break;default:a=Dw}r=a.bind(null,n,r,e),a=void 0,!$v||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(n,r,{capture:!0,passive:a}):e.addEventListener(n,r,!0):a!==void 0?e.addEventListener(n,r,{passive:a}):e.addEventListener(n,r,!1)}function Xp(e,n,r,s,a){var i=s;if(!(n&1)&&!(n&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var c=s.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var A=o.tag;if((A===3||A===4)&&(A=o.stateNode.containerInfo,A===a||A.nodeType===8&&A.parentNode===a))return;o=o.return}for(;c!==null;){if(o=Uo(c),o===null)return;if(A=o.tag,A===5||A===6){s=i=o;continue e}c=c.parentNode}}s=s.return}MN(function(){var u=i,h=Iw(r),d=[];e:{var f=dE.get(e);if(f!==void 0){var g=$w,m=e;switch(e){case"keypress":if(Qf(r)===0)break e;case"keydown":case"keyup":g=U7;break;case"focusin":m="focus",g=Hp;break;case"focusout":m="blur",g=Hp;break;case"beforeblur":case"afterblur":g=Hp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=yC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=w7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Q7;break;case lE:case cE:case AE:g=C7;break;case uE:g=D7;break;case"scroll":g=v7;break;case"wheel":g=$7;break;case"copy":case"cut":case"paste":g=S7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xC}var y=(n&4)!==0,x=!y&&e==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var v=u,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,p!==null&&(w=qu(v,p),w!=null&&y.push(nd(v,w,b)))),x)break;v=v.return}0<y.length&&(f=new g(f,m,null,r,h),d.push({event:f,listeners:y}))}}if(!(n&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&r!==Dv&&(m=r.relatedTarget||r.fromElement)&&(Uo(m)||m[ni]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(m=r.relatedTarget||r.toElement,g=u,m=m?Uo(m):null,m!==null&&(x=ll(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(g=null,m=u),g!==m)){if(y=yC,w="onMouseLeave",p="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=xC,w="onPointerLeave",p="onPointerEnter",v="pointer"),x=g==null?f:Ac(g),b=m==null?f:Ac(m),f=new y(w,v+"leave",g,r,h),f.target=x,f.relatedTarget=b,w=null,Uo(h)===u&&(y=new y(p,v+"enter",m,r,h),y.target=b,y.relatedTarget=x,w=y),x=w,g&&m)t:{for(y=g,p=m,v=0,b=y;b;b=jl(b))v++;for(b=0,w=p;w;w=jl(w))b++;for(;0<v-b;)y=jl(y),v--;for(;0<b-v;)p=jl(p),b--;for(;v--;){if(y===p||p!==null&&y===p.alternate)break t;y=jl(y),p=jl(p)}y=null}else y=null;g!==null&&TC(d,f,g,y,!1),m!==null&&x!==null&&TC(d,x,m,y,!0)}}e:{if(f=u?Ac(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var _=W7;else if(_C(f))if(rE)_=Y7;else{_=q7;var C=V7}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=X7);if(_&&(_=_(e,u))){nE(d,_,r,h);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Uv(f,"number",f.value)}switch(C=u?Ac(u):window,e){case"focusin":(_C(C)||C.contentEditable==="true")&&(lc=C,Kv=u,ju=null);break;case"focusout":ju=Kv=lc=null;break;case"mousedown":Gv=!0;break;case"contextmenu":case"mouseup":case"dragend":Gv=!1,jC(d,r,h);break;case"selectionchange":if(eR)break;case"keydown":case"keyup":jC(d,r,h)}var k;if(Lw)e:{switch(e){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else oc?eE(e,r)&&(j="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(j="onCompositionStart");j&&(ZN&&r.locale!=="ko"&&(oc||j!=="onCompositionStart"?j==="onCompositionEnd"&&oc&&(k=JN()):(Mi=h,Rw="value"in Mi?Mi.value:Mi.textContent,oc=!0)),C=m0(u,j),0<C.length&&(j=new vC(j,e,null,r,h),d.push({event:j,listeners:C}),k?j.data=k:(k=tE(r),k!==null&&(j.data=k)))),(k=L7?H7(e,r):z7(e,r))&&(u=m0(u,"onBeforeInput"),0<u.length&&(h=new vC("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=k))}hE(d,n)})}function nd(e,n,r){return{instance:e,listener:n,currentTarget:r}}function m0(e,n){for(var r=n+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=qu(e,r),i!=null&&s.unshift(nd(e,i,a)),i=qu(e,n),i!=null&&s.push(nd(e,i,a))),e=e.return}return s}function jl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function TC(e,n,r,s,a){for(var i=n._reactName,o=[];r!==null&&r!==s;){var c=r,A=c.alternate,u=c.stateNode;if(A!==null&&A===s)break;c.tag===5&&u!==null&&(c=u,a?(A=qu(r,i),A!=null&&o.unshift(nd(r,A,c))):a||(A=qu(r,i),A!=null&&o.push(nd(r,A,c)))),r=r.return}o.length!==0&&e.push({event:n,listeners:o})}var sR=/\r\n?/g,aR=/\u0000|\uFFFD/g;function FC(e){return(typeof e=="string"?e:""+e).replace(sR,`
`).replace(aR,"")}function Fh(e,n,r){if(n=FC(n),FC(e)!==n&&r)throw Error(ge(425))}function p0(){}var Wv=null,Vv=null;function qv(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Xv=typeof setTimeout=="function"?setTimeout:void 0,iR=typeof clearTimeout=="function"?clearTimeout:void 0,UC=typeof Promise=="function"?Promise:void 0,oR=typeof queueMicrotask=="function"?queueMicrotask:typeof UC<"u"?function(e){return UC.resolve(null).then(e).catch(lR)}:Xv;function lR(e){setTimeout(function(){throw e})}function Yp(e,n){var r=n,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Ju(n);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Ju(n)}function Gi(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function IC(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return e;n--}else r==="/$"&&n++}e=e.previousSibling}return null}var cA=Math.random().toString(36).slice(2),oa="__reactFiber$"+cA,rd="__reactProps$"+cA,ni="__reactContainer$"+cA,Yv="__reactEvents$"+cA,cR="__reactListeners$"+cA,AR="__reactHandles$"+cA;function Uo(e){var n=e[oa];if(n)return n;for(var r=e.parentNode;r;){if(n=r[ni]||r[oa]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(e=IC(e);e!==null;){if(r=e[oa])return r;e=IC(e)}return n}e=r,r=e.parentNode}return null}function Rd(e){return e=e[oa]||e[ni],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ac(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ge(33))}function em(e){return e[rd]||null}var Jv=[],uc=-1;function co(e){return{current:e}}function It(e){0>uc||(e.current=Jv[uc],Jv[uc]=null,uc--)}function Et(e,n){uc++,Jv[uc]=e.current,e.current=n}var no={},Jn=co(no),Sr=co(!1),qo=no;function Mc(e,n){var r=e.type.contextTypes;if(!r)return no;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===n)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=n[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),a}function kr(e){return e=e.childContextTypes,e!=null}function y0(){It(Sr),It(Jn)}function PC(e,n,r){if(Jn.current!==no)throw Error(ge(168));Et(Jn,n),Et(Sr,r)}function gE(e,n,r){var s=e.stateNode;if(n=n.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in n))throw Error(ge(108,VD(e)||"Unknown",a));return Vt({},r,s)}function v0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||no,qo=Jn.current,Et(Jn,e),Et(Sr,Sr.current),!0}function QC(e,n,r){var s=e.stateNode;if(!s)throw Error(ge(169));r?(e=gE(e,n,qo),s.__reactInternalMemoizedMergedChildContext=e,It(Sr),It(Jn),Et(Jn,e)):It(Sr),Et(Sr,r)}var La=null,tm=!1,Jp=!1;function mE(e){La===null?La=[e]:La.push(e)}function uR(e){tm=!0,mE(e)}function Ao(){if(!Jp&&La!==null){Jp=!0;var e=0,n=yt;try{var r=La;for(yt=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}La=null,tm=!1}catch(a){throw La!==null&&(La=La.slice(e+1)),ON(Pw,Ao),a}finally{yt=n,Jp=!1}}return null}var dc=[],hc=0,x0=null,w0=0,rs=[],ss=0,Xo=null,Ga=1,Wa="";function bo(e,n){dc[hc++]=w0,dc[hc++]=x0,x0=e,w0=n}function pE(e,n,r){rs[ss++]=Ga,rs[ss++]=Wa,rs[ss++]=Xo,Xo=e;var s=Ga;e=Wa;var a=32-Ds(s)-1;s&=~(1<<a),r+=1;var i=32-Ds(n)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Ga=1<<32-Ds(n)+a|r<<a|s,Wa=i+e}else Ga=1<<i|r<<a|s,Wa=e}function zw(e){e.return!==null&&(bo(e,1),pE(e,1,0))}function Kw(e){for(;e===x0;)x0=dc[--hc],dc[hc]=null,w0=dc[--hc],dc[hc]=null;for(;e===Xo;)Xo=rs[--ss],rs[ss]=null,Wa=rs[--ss],rs[ss]=null,Ga=rs[--ss],rs[ss]=null}var zr=null,Lr=null,Ot=!1,Us=null;function yE(e,n){var r=ls(5,null,null,0);r.elementType="DELETED",r.stateNode=n,r.return=e,n=e.deletions,n===null?(e.deletions=[r],e.flags|=16):n.push(r)}function MC(e,n){switch(e.tag){case 5:var r=e.type;return n=n.nodeType!==1||r.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,zr=e,Lr=Gi(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,zr=e,Lr=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(r=Xo!==null?{id:Ga,overflow:Wa}:null,e.memoizedState={dehydrated:n,treeContext:r,retryLane:1073741824},r=ls(18,null,null,0),r.stateNode=n,r.return=e,e.child=r,zr=e,Lr=null,!0):!1;default:return!1}}function Zv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ex(e){if(Ot){var n=Lr;if(n){var r=n;if(!MC(e,n)){if(Zv(e))throw Error(ge(418));n=Gi(r.nextSibling);var s=zr;n&&MC(e,n)?yE(s,r):(e.flags=e.flags&-4097|2,Ot=!1,zr=e)}}else{if(Zv(e))throw Error(ge(418));e.flags=e.flags&-4097|2,Ot=!1,zr=e}}}function DC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zr=e}function Uh(e){if(e!==zr)return!1;if(!Ot)return DC(e),Ot=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!qv(e.type,e.memoizedProps)),n&&(n=Lr)){if(Zv(e))throw vE(),Error(ge(418));for(;n;)yE(e,n),n=Gi(n.nextSibling)}if(DC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ge(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(n===0){Lr=Gi(e.nextSibling);break e}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++}e=e.nextSibling}Lr=null}}else Lr=zr?Gi(e.stateNode.nextSibling):null;return!0}function vE(){for(var e=Lr;e;)e=Gi(e.nextSibling)}function Dc(){Lr=zr=null,Ot=!1}function Gw(e){Us===null?Us=[e]:Us.push(e)}var dR=di.ReactCurrentBatchConfig;function EA(e,n,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ge(309));var s=r.stateNode}if(!s)throw Error(ge(147,e));var a=s,i=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===i?n.ref:(n=function(o){var c=a.refs;o===null?delete c[i]:c[i]=o},n._stringRef=i,n)}if(typeof e!="string")throw Error(ge(284));if(!r._owner)throw Error(ge(290,e))}return e}function Ih(e,n){throw e=Object.prototype.toString.call(n),Error(ge(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function RC(e){var n=e._init;return n(e._payload)}function xE(e){function n(p,v){if(e){var b=p.deletions;b===null?(p.deletions=[v],p.flags|=16):b.push(v)}}function r(p,v){if(!e)return null;for(;v!==null;)n(p,v),v=v.sibling;return null}function s(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function a(p,v){return p=Xi(p,v),p.index=0,p.sibling=null,p}function i(p,v,b){return p.index=b,e?(b=p.alternate,b!==null?(b=b.index,b<v?(p.flags|=2,v):b):(p.flags|=2,v)):(p.flags|=1048576,v)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function c(p,v,b,w){return v===null||v.tag!==6?(v=ay(b,p.mode,w),v.return=p,v):(v=a(v,b),v.return=p,v)}function A(p,v,b,w){var _=b.type;return _===ic?h(p,v,b.props.children,w,b.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Si&&RC(_)===v.type)?(w=a(v,b.props),w.ref=EA(p,v,b),w.return=p,w):(w=Hf(b.type,b.key,b.props,null,p.mode,w),w.ref=EA(p,v,b),w.return=p,w)}function u(p,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=iy(b,p.mode,w),v.return=p,v):(v=a(v,b.children||[]),v.return=p,v)}function h(p,v,b,w,_){return v===null||v.tag!==7?(v=Lo(b,p.mode,w,_),v.return=p,v):(v=a(v,b),v.return=p,v)}function d(p,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ay(""+v,p.mode,b),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _h:return b=Hf(v.type,v.key,v.props,null,p.mode,b),b.ref=EA(p,null,v),b.return=p,b;case ac:return v=iy(v,p.mode,b),v.return=p,v;case Si:var w=v._init;return d(p,w(v._payload),b)}if(su(v)||BA(v))return v=Lo(v,p.mode,b,null),v.return=p,v;Ih(p,v)}return null}function f(p,v,b,w){var _=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:c(p,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _h:return b.key===_?A(p,v,b,w):null;case ac:return b.key===_?u(p,v,b,w):null;case Si:return _=b._init,f(p,v,_(b._payload),w)}if(su(b)||BA(b))return _!==null?null:h(p,v,b,w,null);Ih(p,b)}return null}function g(p,v,b,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(b)||null,c(v,p,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _h:return p=p.get(w.key===null?b:w.key)||null,A(v,p,w,_);case ac:return p=p.get(w.key===null?b:w.key)||null,u(v,p,w,_);case Si:var C=w._init;return g(p,v,b,C(w._payload),_)}if(su(w)||BA(w))return p=p.get(b)||null,h(v,p,w,_,null);Ih(v,w)}return null}function m(p,v,b,w){for(var _=null,C=null,k=v,j=v=0,B=null;k!==null&&j<b.length;j++){k.index>j?(B=k,k=null):B=k.sibling;var E=f(p,k,b[j],w);if(E===null){k===null&&(k=B);break}e&&k&&E.alternate===null&&n(p,k),v=i(E,v,j),C===null?_=E:C.sibling=E,C=E,k=B}if(j===b.length)return r(p,k),Ot&&bo(p,j),_;if(k===null){for(;j<b.length;j++)k=d(p,b[j],w),k!==null&&(v=i(k,v,j),C===null?_=k:C.sibling=k,C=k);return Ot&&bo(p,j),_}for(k=s(p,k);j<b.length;j++)B=g(k,p,j,b[j],w),B!==null&&(e&&B.alternate!==null&&k.delete(B.key===null?j:B.key),v=i(B,v,j),C===null?_=B:C.sibling=B,C=B);return e&&k.forEach(function(P){return n(p,P)}),Ot&&bo(p,j),_}function y(p,v,b,w){var _=BA(b);if(typeof _!="function")throw Error(ge(150));if(b=_.call(b),b==null)throw Error(ge(151));for(var C=_=null,k=v,j=v=0,B=null,E=b.next();k!==null&&!E.done;j++,E=b.next()){k.index>j?(B=k,k=null):B=k.sibling;var P=f(p,k,E.value,w);if(P===null){k===null&&(k=B);break}e&&k&&P.alternate===null&&n(p,k),v=i(P,v,j),C===null?_=P:C.sibling=P,C=P,k=B}if(E.done)return r(p,k),Ot&&bo(p,j),_;if(k===null){for(;!E.done;j++,E=b.next())E=d(p,E.value,w),E!==null&&(v=i(E,v,j),C===null?_=E:C.sibling=E,C=E);return Ot&&bo(p,j),_}for(k=s(p,k);!E.done;j++,E=b.next())E=g(k,p,j,E.value,w),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?j:E.key),v=i(E,v,j),C===null?_=E:C.sibling=E,C=E);return e&&k.forEach(function(I){return n(p,I)}),Ot&&bo(p,j),_}function x(p,v,b,w){if(typeof b=="object"&&b!==null&&b.type===ic&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case _h:e:{for(var _=b.key,C=v;C!==null;){if(C.key===_){if(_=b.type,_===ic){if(C.tag===7){r(p,C.sibling),v=a(C,b.props.children),v.return=p,p=v;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Si&&RC(_)===C.type){r(p,C.sibling),v=a(C,b.props),v.ref=EA(p,C,b),v.return=p,p=v;break e}r(p,C);break}else n(p,C);C=C.sibling}b.type===ic?(v=Lo(b.props.children,p.mode,w,b.key),v.return=p,p=v):(w=Hf(b.type,b.key,b.props,null,p.mode,w),w.ref=EA(p,v,b),w.return=p,p=w)}return o(p);case ac:e:{for(C=b.key;v!==null;){if(v.key===C)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){r(p,v.sibling),v=a(v,b.children||[]),v.return=p,p=v;break e}else{r(p,v);break}else n(p,v);v=v.sibling}v=iy(b,p.mode,w),v.return=p,p=v}return o(p);case Si:return C=b._init,x(p,v,C(b._payload),w)}if(su(b))return m(p,v,b,w);if(BA(b))return y(p,v,b,w);Ih(p,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(r(p,v.sibling),v=a(v,b),v.return=p,p=v):(r(p,v),v=ay(b,p.mode,w),v.return=p,p=v),o(p)):r(p,v)}return x}var Rc=xE(!0),wE=xE(!1),b0=co(null),_0=null,fc=null,Ww=null;function Vw(){Ww=fc=_0=null}function qw(e){var n=b0.current;It(b0),e._currentValue=n}function tx(e,n,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===r)break;e=e.return}}function Bc(e,n){_0=e,Ww=fc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(_r=!0),e.firstContext=null)}function hs(e){var n=e._currentValue;if(Ww!==e)if(e={context:e,memoizedValue:n,next:null},fc===null){if(_0===null)throw Error(ge(308));fc=e,_0.dependencies={lanes:0,firstContext:e}}else fc=fc.next=e;return n}var Io=null;function Xw(e){Io===null?Io=[e]:Io.push(e)}function bE(e,n,r,s){var a=n.interleaved;return a===null?(r.next=r,Xw(n)):(r.next=a.next,a.next=r),n.interleaved=r,ri(e,s)}function ri(e,n){e.lanes|=n;var r=e.alternate;for(r!==null&&(r.lanes|=n),r=e,e=e.return;e!==null;)e.childLanes|=n,r=e.alternate,r!==null&&(r.childLanes|=n),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ki=!1;function Yw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _E(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ja(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Wi(e,n,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ut&2){var a=s.pending;return a===null?n.next=n:(n.next=a.next,a.next=n),s.pending=n,ri(e,r)}return a=s.interleaved,a===null?(n.next=n,Xw(s)):(n.next=a.next,a.next=n),s.interleaved=n,ri(e,r)}function Mf(e,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194240)!==0)){var s=n.lanes;s&=e.pendingLanes,r|=s,n.lanes=r,Qw(e,r)}}function $C(e,n){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=n:i=i.next=n}else a=i=n;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=n:e.next=n,r.lastBaseUpdate=n}function C0(e,n,r,s){var a=e.updateQueue;ki=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var A=c,u=A.next;A.next=null,o===null?i=u:o.next=u,o=A;var h=e.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=u:c.next=u,h.lastBaseUpdate=A))}if(i!==null){var d=a.baseState;o=0,h=u=A=null,c=i;do{var f=c.lane,g=c.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var m=e,y=c;switch(f=n,g=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(g,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(g,d,f):m,f==null)break e;d=Vt({},d,f);break e;case 2:ki=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[c]:f.push(c))}else g={eventTime:g,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(u=h=g,A=d):h=h.next=g,o|=f;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;f=c,c=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(1);if(h===null&&(A=d),a.baseState=A,a.firstBaseUpdate=u,a.lastBaseUpdate=h,n=a.shared.interleaved,n!==null){a=n;do o|=a.lane,a=a.next;while(a!==n)}else i===null&&(a.shared.lanes=0);Jo|=o,e.lanes=o,e.memoizedState=d}}function OC(e,n,r){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var s=e[n],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(ge(191,a));a.call(s)}}}var $d={},fa=co($d),sd=co($d),ad=co($d);function Po(e){if(e===$d)throw Error(ge(174));return e}function Jw(e,n){switch(Et(ad,n),Et(sd,e),Et(fa,$d),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Pv(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Pv(n,e)}It(fa),Et(fa,n)}function $c(){It(fa),It(sd),It(ad)}function CE(e){Po(ad.current);var n=Po(fa.current),r=Pv(n,e.type);n!==r&&(Et(sd,e),Et(fa,r))}function Zw(e){sd.current===e&&(It(fa),It(sd))}var Kt=co(0);function B0(e){for(var n=e;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Zp=[];function eb(){for(var e=0;e<Zp.length;e++)Zp[e]._workInProgressVersionPrimary=null;Zp.length=0}var Df=di.ReactCurrentDispatcher,ey=di.ReactCurrentBatchConfig,Yo=0,Wt=null,hn=null,wn=null,S0=!1,Nu=!1,id=0,hR=0;function $n(){throw Error(ge(321))}function tb(e,n){if(n===null)return!1;for(var r=0;r<n.length&&r<e.length;r++)if(!Hs(e[r],n[r]))return!1;return!0}function nb(e,n,r,s,a,i){if(Yo=i,Wt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Df.current=e===null||e.memoizedState===null?pR:yR,e=r(s,a),Nu){i=0;do{if(Nu=!1,id=0,25<=i)throw Error(ge(301));i+=1,wn=hn=null,n.updateQueue=null,Df.current=vR,e=r(s,a)}while(Nu)}if(Df.current=k0,n=hn!==null&&hn.next!==null,Yo=0,wn=hn=Wt=null,S0=!1,n)throw Error(ge(300));return e}function rb(){var e=id!==0;return id=0,e}function na(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?Wt.memoizedState=wn=e:wn=wn.next=e,wn}function fs(){if(hn===null){var e=Wt.alternate;e=e!==null?e.memoizedState:null}else e=hn.next;var n=wn===null?Wt.memoizedState:wn.next;if(n!==null)wn=n,hn=e;else{if(e===null)throw Error(ge(310));hn=e,e={memoizedState:hn.memoizedState,baseState:hn.baseState,baseQueue:hn.baseQueue,queue:hn.queue,next:null},wn===null?Wt.memoizedState=wn=e:wn=wn.next=e}return wn}function od(e,n){return typeof n=="function"?n(e):n}function ty(e){var n=fs(),r=n.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=e;var s=hn,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var c=o=null,A=null,u=i;do{var h=u.lane;if((Yo&h)===h)A!==null&&(A=A.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};A===null?(c=A=d,o=s):A=A.next=d,Wt.lanes|=h,Jo|=h}u=u.next}while(u!==null&&u!==i);A===null?o=s:A.next=c,Hs(s,n.memoizedState)||(_r=!0),n.memoizedState=s,n.baseState=o,n.baseQueue=A,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Wt.lanes|=i,Jo|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[n.memoizedState,r.dispatch]}function ny(e){var n=fs(),r=n.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=n.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Hs(i,n.memoizedState)||(_r=!0),n.memoizedState=i,n.baseQueue===null&&(n.baseState=i),r.lastRenderedState=i}return[i,s]}function BE(){}function SE(e,n){var r=Wt,s=fs(),a=n(),i=!Hs(s.memoizedState,a);if(i&&(s.memoizedState=a,_r=!0),s=s.queue,sb(NE.bind(null,r,s,e),[e]),s.getSnapshot!==n||i||wn!==null&&wn.memoizedState.tag&1){if(r.flags|=2048,ld(9,jE.bind(null,r,s,a,n),void 0,null),Cn===null)throw Error(ge(349));Yo&30||kE(r,n,a)}return a}function kE(e,n,r){e.flags|=16384,e={getSnapshot:n,value:r},n=Wt.updateQueue,n===null?(n={lastEffect:null,stores:null},Wt.updateQueue=n,n.stores=[e]):(r=n.stores,r===null?n.stores=[e]:r.push(e))}function jE(e,n,r,s){n.value=r,n.getSnapshot=s,EE(n)&&TE(e)}function NE(e,n,r){return r(function(){EE(n)&&TE(e)})}function EE(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!Hs(e,r)}catch{return!0}}function TE(e){var n=ri(e,1);n!==null&&Rs(n,e,1,-1)}function LC(e){var n=na();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:od,lastRenderedState:e},n.queue=e,e=e.dispatch=mR.bind(null,Wt,e),[n.memoizedState,e]}function ld(e,n,r,s){return e={tag:e,create:n,destroy:r,deps:s,next:null},n=Wt.updateQueue,n===null?(n={lastEffect:null,stores:null},Wt.updateQueue=n,n.lastEffect=e.next=e):(r=n.lastEffect,r===null?n.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,n.lastEffect=e)),e}function FE(){return fs().memoizedState}function Rf(e,n,r,s){var a=na();Wt.flags|=e,a.memoizedState=ld(1|n,r,void 0,s===void 0?null:s)}function nm(e,n,r,s){var a=fs();s=s===void 0?null:s;var i=void 0;if(hn!==null){var o=hn.memoizedState;if(i=o.destroy,s!==null&&tb(s,o.deps)){a.memoizedState=ld(n,r,i,s);return}}Wt.flags|=e,a.memoizedState=ld(1|n,r,i,s)}function HC(e,n){return Rf(8390656,8,e,n)}function sb(e,n){return nm(2048,8,e,n)}function UE(e,n){return nm(4,2,e,n)}function IE(e,n){return nm(4,4,e,n)}function PE(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function QE(e,n,r){return r=r!=null?r.concat([e]):null,nm(4,4,PE.bind(null,n,e),r)}function ab(){}function ME(e,n){var r=fs();n=n===void 0?null:n;var s=r.memoizedState;return s!==null&&n!==null&&tb(n,s[1])?s[0]:(r.memoizedState=[e,n],e)}function DE(e,n){var r=fs();n=n===void 0?null:n;var s=r.memoizedState;return s!==null&&n!==null&&tb(n,s[1])?s[0]:(e=e(),r.memoizedState=[e,n],e)}function RE(e,n,r){return Yo&21?(Hs(r,n)||(r=zN(),Wt.lanes|=r,Jo|=r,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,_r=!0),e.memoizedState=r)}function fR(e,n){var r=yt;yt=r!==0&&4>r?r:4,e(!0);var s=ey.transition;ey.transition={};try{e(!1),n()}finally{yt=r,ey.transition=s}}function $E(){return fs().memoizedState}function gR(e,n,r){var s=qi(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},OE(e))LE(n,r);else if(r=bE(e,n,r,s),r!==null){var a=ur();Rs(r,e,s,a),HE(r,n,s)}}function mR(e,n,r){var s=qi(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(OE(e))LE(n,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=n.lastRenderedReducer,i!==null))try{var o=n.lastRenderedState,c=i(o,r);if(a.hasEagerState=!0,a.eagerState=c,Hs(c,o)){var A=n.interleaved;A===null?(a.next=a,Xw(n)):(a.next=A.next,A.next=a),n.interleaved=a;return}}catch{}finally{}r=bE(e,n,a,s),r!==null&&(a=ur(),Rs(r,e,s,a),HE(r,n,s))}}function OE(e){var n=e.alternate;return e===Wt||n!==null&&n===Wt}function LE(e,n){Nu=S0=!0;var r=e.pending;r===null?n.next=n:(n.next=r.next,r.next=n),e.pending=n}function HE(e,n,r){if(r&4194240){var s=n.lanes;s&=e.pendingLanes,r|=s,n.lanes=r,Qw(e,r)}}var k0={readContext:hs,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},pR={readContext:hs,useCallback:function(e,n){return na().memoizedState=[e,n===void 0?null:n],e},useContext:hs,useEffect:HC,useImperativeHandle:function(e,n,r){return r=r!=null?r.concat([e]):null,Rf(4194308,4,PE.bind(null,n,e),r)},useLayoutEffect:function(e,n){return Rf(4194308,4,e,n)},useInsertionEffect:function(e,n){return Rf(4,2,e,n)},useMemo:function(e,n){var r=na();return n=n===void 0?null:n,e=e(),r.memoizedState=[e,n],e},useReducer:function(e,n,r){var s=na();return n=r!==void 0?r(n):n,s.memoizedState=s.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},s.queue=e,e=e.dispatch=gR.bind(null,Wt,e),[s.memoizedState,e]},useRef:function(e){var n=na();return e={current:e},n.memoizedState=e},useState:LC,useDebugValue:ab,useDeferredValue:function(e){return na().memoizedState=e},useTransition:function(){var e=LC(!1),n=e[0];return e=fR.bind(null,e[1]),na().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,r){var s=Wt,a=na();if(Ot){if(r===void 0)throw Error(ge(407));r=r()}else{if(r=n(),Cn===null)throw Error(ge(349));Yo&30||kE(s,n,r)}a.memoizedState=r;var i={value:r,getSnapshot:n};return a.queue=i,HC(NE.bind(null,s,i,e),[e]),s.flags|=2048,ld(9,jE.bind(null,s,i,r,n),void 0,null),r},useId:function(){var e=na(),n=Cn.identifierPrefix;if(Ot){var r=Wa,s=Ga;r=(s&~(1<<32-Ds(s)-1)).toString(32)+r,n=":"+n+"R"+r,r=id++,0<r&&(n+="H"+r.toString(32)),n+=":"}else r=hR++,n=":"+n+"r"+r.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},yR={readContext:hs,useCallback:ME,useContext:hs,useEffect:sb,useImperativeHandle:QE,useInsertionEffect:UE,useLayoutEffect:IE,useMemo:DE,useReducer:ty,useRef:FE,useState:function(){return ty(od)},useDebugValue:ab,useDeferredValue:function(e){var n=fs();return RE(n,hn.memoizedState,e)},useTransition:function(){var e=ty(od)[0],n=fs().memoizedState;return[e,n]},useMutableSource:BE,useSyncExternalStore:SE,useId:$E,unstable_isNewReconciler:!1},vR={readContext:hs,useCallback:ME,useContext:hs,useEffect:sb,useImperativeHandle:QE,useInsertionEffect:UE,useLayoutEffect:IE,useMemo:DE,useReducer:ny,useRef:FE,useState:function(){return ny(od)},useDebugValue:ab,useDeferredValue:function(e){var n=fs();return hn===null?n.memoizedState=e:RE(n,hn.memoizedState,e)},useTransition:function(){var e=ny(od)[0],n=fs().memoizedState;return[e,n]},useMutableSource:BE,useSyncExternalStore:SE,useId:$E,unstable_isNewReconciler:!1};function Ns(e,n){if(e&&e.defaultProps){n=Vt({},n),e=e.defaultProps;for(var r in e)n[r]===void 0&&(n[r]=e[r]);return n}return n}function nx(e,n,r,s){n=e.memoizedState,r=r(s,n),r=r==null?n:Vt({},n,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var rm={isMounted:function(e){return(e=e._reactInternals)?ll(e)===e:!1},enqueueSetState:function(e,n,r){e=e._reactInternals;var s=ur(),a=qi(e),i=Ja(s,a);i.payload=n,r!=null&&(i.callback=r),n=Wi(e,i,a),n!==null&&(Rs(n,e,a,s),Mf(n,e,a))},enqueueReplaceState:function(e,n,r){e=e._reactInternals;var s=ur(),a=qi(e),i=Ja(s,a);i.tag=1,i.payload=n,r!=null&&(i.callback=r),n=Wi(e,i,a),n!==null&&(Rs(n,e,a,s),Mf(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var r=ur(),s=qi(e),a=Ja(r,s);a.tag=2,n!=null&&(a.callback=n),n=Wi(e,a,s),n!==null&&(Rs(n,e,s,r),Mf(n,e,s))}};function zC(e,n,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):n.prototype&&n.prototype.isPureReactComponent?!ed(r,s)||!ed(a,i):!0}function zE(e,n,r){var s=!1,a=no,i=n.contextType;return typeof i=="object"&&i!==null?i=hs(i):(a=kr(n)?qo:Jn.current,s=n.contextTypes,i=(s=s!=null)?Mc(e,a):no),n=new n(r,i),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=rm,e.stateNode=n,n._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),n}function KC(e,n,r,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,s),n.state!==e&&rm.enqueueReplaceState(n,n.state,null)}function rx(e,n,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Yw(e);var i=n.contextType;typeof i=="object"&&i!==null?a.context=hs(i):(i=kr(n)?qo:Jn.current,a.context=Mc(e,i)),a.state=e.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(nx(e,n,i,r),a.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(n=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),n!==a.state&&rm.enqueueReplaceState(a,a.state,null),C0(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Oc(e,n){try{var r="",s=n;do r+=WD(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:n,stack:a,digest:null}}function ry(e,n,r){return{value:e,source:null,stack:r??null,digest:n??null}}function sx(e,n){try{console.error(n.value)}catch(r){setTimeout(function(){throw r})}}var xR=typeof WeakMap=="function"?WeakMap:Map;function KE(e,n,r){r=Ja(-1,r),r.tag=3,r.payload={element:null};var s=n.value;return r.callback=function(){N0||(N0=!0,fx=s),sx(e,n)},r}function GE(e,n,r){r=Ja(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=n.value;r.payload=function(){return s(a)},r.callback=function(){sx(e,n)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){sx(e,n),typeof s!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var o=n.stack;this.componentDidCatch(n.value,{componentStack:o!==null?o:""})}),r}function GC(e,n,r){var s=e.pingCache;if(s===null){s=e.pingCache=new xR;var a=new Set;s.set(n,a)}else a=s.get(n),a===void 0&&(a=new Set,s.set(n,a));a.has(r)||(a.add(r),e=IR.bind(null,e,n,r),n.then(e,e))}function WC(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function VC(e,n,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===n?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(n=Ja(-1,1),n.tag=2,Wi(r,n,1))),r.lanes|=1),e)}var wR=di.ReactCurrentOwner,_r=!1;function ir(e,n,r,s){n.child=e===null?wE(n,null,r,s):Rc(n,e.child,r,s)}function qC(e,n,r,s,a){r=r.render;var i=n.ref;return Bc(n,a),s=nb(e,n,r,s,i,a),r=rb(),e!==null&&!_r?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,si(e,n,a)):(Ot&&r&&zw(n),n.flags|=1,ir(e,n,s,a),n.child)}function XC(e,n,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!hb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(n.tag=15,n.type=i,WE(e,n,i,s,a)):(e=Hf(r.type,null,s,n,n.mode,a),e.ref=n.ref,e.return=n,n.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ed,r(o,s)&&e.ref===n.ref)return si(e,n,a)}return n.flags|=1,e=Xi(i,s),e.ref=n.ref,e.return=n,n.child=e}function WE(e,n,r,s,a){if(e!==null){var i=e.memoizedProps;if(ed(i,s)&&e.ref===n.ref)if(_r=!1,n.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(_r=!0);else return n.lanes=e.lanes,si(e,n,a)}return ax(e,n,r,s,a)}function VE(e,n,r){var s=n.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(mc,Rr),Rr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Et(mc,Rr),Rr|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,Et(mc,Rr),Rr|=s}else i!==null?(s=i.baseLanes|r,n.memoizedState=null):s=r,Et(mc,Rr),Rr|=s;return ir(e,n,a,r),n.child}function qE(e,n){var r=n.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(n.flags|=512,n.flags|=2097152)}function ax(e,n,r,s,a){var i=kr(r)?qo:Jn.current;return i=Mc(n,i),Bc(n,a),r=nb(e,n,r,s,i,a),s=rb(),e!==null&&!_r?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,si(e,n,a)):(Ot&&s&&zw(n),n.flags|=1,ir(e,n,r,a),n.child)}function YC(e,n,r,s,a){if(kr(r)){var i=!0;v0(n)}else i=!1;if(Bc(n,a),n.stateNode===null)$f(e,n),zE(n,r,s),rx(n,r,s,a),s=!0;else if(e===null){var o=n.stateNode,c=n.memoizedProps;o.props=c;var A=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=hs(u):(u=kr(r)?qo:Jn.current,u=Mc(n,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==s||A!==u)&&KC(n,o,s,u),ki=!1;var f=n.memoizedState;o.state=f,C0(n,s,o,a),A=n.memoizedState,c!==s||f!==A||Sr.current||ki?(typeof h=="function"&&(nx(n,r,h,s),A=n.memoizedState),(c=ki||zC(n,r,c,s,f,A,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(n.flags|=4194308)):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=A),o.props=s,o.state=A,o.context=u,s=c):(typeof o.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{o=n.stateNode,_E(e,n),c=n.memoizedProps,u=n.type===n.elementType?c:Ns(n.type,c),o.props=u,d=n.pendingProps,f=o.context,A=r.contextType,typeof A=="object"&&A!==null?A=hs(A):(A=kr(r)?qo:Jn.current,A=Mc(n,A));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==d||f!==A)&&KC(n,o,s,A),ki=!1,f=n.memoizedState,o.state=f,C0(n,s,o,a);var m=n.memoizedState;c!==d||f!==m||Sr.current||ki?(typeof g=="function"&&(nx(n,r,g,s),m=n.memoizedState),(u=ki||zC(n,r,u,s,f,m,A)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,m,A),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,m,A)),typeof o.componentDidUpdate=="function"&&(n.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=m),o.props=s,o.state=m,o.context=A,s=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),s=!1)}return ix(e,n,r,s,i,a)}function ix(e,n,r,s,a,i){qE(e,n);var o=(n.flags&128)!==0;if(!s&&!o)return a&&QC(n,r,!1),si(e,n,i);s=n.stateNode,wR.current=n;var c=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return n.flags|=1,e!==null&&o?(n.child=Rc(n,e.child,null,i),n.child=Rc(n,null,c,i)):ir(e,n,c,i),n.memoizedState=s.state,a&&QC(n,r,!0),n.child}function XE(e){var n=e.stateNode;n.pendingContext?PC(e,n.pendingContext,n.pendingContext!==n.context):n.context&&PC(e,n.context,!1),Jw(e,n.containerInfo)}function JC(e,n,r,s,a){return Dc(),Gw(a),n.flags|=256,ir(e,n,r,s),n.child}var ox={dehydrated:null,treeContext:null,retryLane:0};function lx(e){return{baseLanes:e,cachePool:null,transitions:null}}function YE(e,n,r){var s=n.pendingProps,a=Kt.current,i=!1,o=(n.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Et(Kt,a&1),e===null)return ex(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(o=s.children,e=s.fallback,i?(s=n.mode,i=n.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=im(o,s,0,null),e=Lo(e,s,r,null),i.return=n,e.return=n,i.sibling=e,n.child=i,n.child.memoizedState=lx(r),n.memoizedState=ox,e):ib(n,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return bR(e,n,o,s,c,a,r);if(i){i=s.fallback,o=n.mode,a=e.child,c=a.sibling;var A={mode:"hidden",children:s.children};return!(o&1)&&n.child!==a?(s=n.child,s.childLanes=0,s.pendingProps=A,n.deletions=null):(s=Xi(a,A),s.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=Xi(c,i):(i=Lo(i,o,r,null),i.flags|=2),i.return=n,s.return=n,s.sibling=i,n.child=s,s=i,i=n.child,o=e.child.memoizedState,o=o===null?lx(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,n.memoizedState=ox,s}return i=e.child,e=i.sibling,s=Xi(i,{mode:"visible",children:s.children}),!(n.mode&1)&&(s.lanes=r),s.return=n,s.sibling=null,e!==null&&(r=n.deletions,r===null?(n.deletions=[e],n.flags|=16):r.push(e)),n.child=s,n.memoizedState=null,s}function ib(e,n){return n=im({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Ph(e,n,r,s){return s!==null&&Gw(s),Rc(n,e.child,null,r),e=ib(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function bR(e,n,r,s,a,i,o){if(r)return n.flags&256?(n.flags&=-257,s=ry(Error(ge(422))),Ph(e,n,o,s)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(i=s.fallback,a=n.mode,s=im({mode:"visible",children:s.children},a,0,null),i=Lo(i,a,o,null),i.flags|=2,s.return=n,i.return=n,s.sibling=i,n.child=s,n.mode&1&&Rc(n,e.child,null,o),n.child.memoizedState=lx(o),n.memoizedState=ox,i);if(!(n.mode&1))return Ph(e,n,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var c=s.dgst;return s=c,i=Error(ge(419)),s=ry(i,s,void 0),Ph(e,n,o,s)}if(c=(o&e.childLanes)!==0,_r||c){if(s=Cn,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ri(e,a),Rs(s,e,a,-1))}return db(),s=ry(Error(ge(421))),Ph(e,n,o,s)}return a.data==="$?"?(n.flags|=128,n.child=e.child,n=PR.bind(null,e),a._reactRetry=n,null):(e=i.treeContext,Lr=Gi(a.nextSibling),zr=n,Ot=!0,Us=null,e!==null&&(rs[ss++]=Ga,rs[ss++]=Wa,rs[ss++]=Xo,Ga=e.id,Wa=e.overflow,Xo=n),n=ib(n,s.children),n.flags|=4096,n)}function ZC(e,n,r){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),tx(e.return,n,r)}function sy(e,n,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=n,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function JE(e,n,r){var s=n.pendingProps,a=s.revealOrder,i=s.tail;if(ir(e,n,s.children,r),s=Kt.current,s&2)s=s&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ZC(e,r,n);else if(e.tag===19)ZC(e,r,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Et(Kt,s),!(n.mode&1))n.memoizedState=null;else switch(a){case"forwards":for(r=n.child,a=null;r!==null;)e=r.alternate,e!==null&&B0(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=n.child,n.child=null):(a=r.sibling,r.sibling=null),sy(n,!1,a,r,i);break;case"backwards":for(r=null,a=n.child,n.child=null;a!==null;){if(e=a.alternate,e!==null&&B0(e)===null){n.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}sy(n,!0,r,null,i);break;case"together":sy(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function $f(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function si(e,n,r){if(e!==null&&(n.dependencies=e.dependencies),Jo|=n.lanes,!(r&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(ge(153));if(n.child!==null){for(e=n.child,r=Xi(e,e.pendingProps),n.child=r,r.return=n;e.sibling!==null;)e=e.sibling,r=r.sibling=Xi(e,e.pendingProps),r.return=n;r.sibling=null}return n.child}function _R(e,n,r){switch(n.tag){case 3:XE(n),Dc();break;case 5:CE(n);break;case 1:kr(n.type)&&v0(n);break;case 4:Jw(n,n.stateNode.containerInfo);break;case 10:var s=n.type._context,a=n.memoizedProps.value;Et(b0,s._currentValue),s._currentValue=a;break;case 13:if(s=n.memoizedState,s!==null)return s.dehydrated!==null?(Et(Kt,Kt.current&1),n.flags|=128,null):r&n.child.childLanes?YE(e,n,r):(Et(Kt,Kt.current&1),e=si(e,n,r),e!==null?e.sibling:null);Et(Kt,Kt.current&1);break;case 19:if(s=(r&n.childLanes)!==0,e.flags&128){if(s)return JE(e,n,r);n.flags|=128}if(a=n.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Et(Kt,Kt.current),s)break;return null;case 22:case 23:return n.lanes=0,VE(e,n,r)}return si(e,n,r)}var ZE,cx,e3,t3;ZE=function(e,n){for(var r=n.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};cx=function(){};e3=function(e,n,r,s){var a=e.memoizedProps;if(a!==s){e=n.stateNode,Po(fa.current);var i=null;switch(r){case"input":a=Tv(e,a),s=Tv(e,s),i=[];break;case"select":a=Vt({},a,{value:void 0}),s=Vt({},s,{value:void 0}),i=[];break;case"textarea":a=Iv(e,a),s=Iv(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=p0)}Qv(r,s);var o;r=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var A=s[u];if(c=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&A!==c&&(A!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||A&&A.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in A)A.hasOwnProperty(o)&&c[o]!==A[o]&&(r||(r={}),r[o]=A[o])}else r||(i||(i=[]),i.push(u,r)),r=A;else u==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,c=c?c.__html:void 0,A!=null&&c!==A&&(i=i||[]).push(u,A)):u==="children"?typeof A!="string"&&typeof A!="number"||(i=i||[]).push(u,""+A):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wu.hasOwnProperty(u)?(A!=null&&u==="onScroll"&&Tt("scroll",e),i||c===A||(i=[])):(i=i||[]).push(u,A))}r&&(i=i||[]).push("style",r);var u=i;(n.updateQueue=u)&&(n.flags|=4)}};t3=function(e,n,r,s){r!==s&&(n.flags|=4)};function TA(e,n){if(!Ot)switch(e.tailMode){case"hidden":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function On(e){var n=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(n)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,n}function CR(e,n,r){var s=n.pendingProps;switch(Kw(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return On(n),null;case 1:return kr(n.type)&&y0(),On(n),null;case 3:return s=n.stateNode,$c(),It(Sr),It(Jn),eb(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Uh(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Us!==null&&(px(Us),Us=null))),cx(e,n),On(n),null;case 5:Zw(n);var a=Po(ad.current);if(r=n.type,e!==null&&n.stateNode!=null)e3(e,n,r,s,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!s){if(n.stateNode===null)throw Error(ge(166));return On(n),null}if(e=Po(fa.current),Uh(n)){s=n.stateNode,r=n.type;var i=n.memoizedProps;switch(s[oa]=n,s[rd]=i,e=(n.mode&1)!==0,r){case"dialog":Tt("cancel",s),Tt("close",s);break;case"iframe":case"object":case"embed":Tt("load",s);break;case"video":case"audio":for(a=0;a<iu.length;a++)Tt(iu[a],s);break;case"source":Tt("error",s);break;case"img":case"image":case"link":Tt("error",s),Tt("load",s);break;case"details":Tt("toggle",s);break;case"input":lC(s,i),Tt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Tt("invalid",s);break;case"textarea":AC(s,i),Tt("invalid",s)}Qv(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?s.textContent!==c&&(i.suppressHydrationWarning!==!0&&Fh(s.textContent,c,e),a=["children",c]):typeof c=="number"&&s.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Fh(s.textContent,c,e),a=["children",""+c]):Wu.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Tt("scroll",s)}switch(r){case"input":Ch(s),cC(s,i,!0);break;case"textarea":Ch(s),uC(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=p0)}s=a,n.updateQueue=s,s!==null&&(n.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=NN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[oa]=n,e[rd]=s,ZE(e,n,!1,!1),n.stateNode=e;e:{switch(o=Mv(r,s),r){case"dialog":Tt("cancel",e),Tt("close",e),a=s;break;case"iframe":case"object":case"embed":Tt("load",e),a=s;break;case"video":case"audio":for(a=0;a<iu.length;a++)Tt(iu[a],e);a=s;break;case"source":Tt("error",e),a=s;break;case"img":case"image":case"link":Tt("error",e),Tt("load",e),a=s;break;case"details":Tt("toggle",e),a=s;break;case"input":lC(e,s),a=Tv(e,s),Tt("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Vt({},s,{value:void 0}),Tt("invalid",e);break;case"textarea":AC(e,s),a=Iv(e,s),Tt("invalid",e);break;default:a=s}Qv(r,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var A=c[i];i==="style"?FN(e,A):i==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&EN(e,A)):i==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&Vu(e,A):typeof A=="number"&&Vu(e,""+A):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wu.hasOwnProperty(i)?A!=null&&i==="onScroll"&&Tt("scroll",e):A!=null&&Ew(e,i,A,o))}switch(r){case"input":Ch(e),cC(e,s,!1);break;case"textarea":Ch(e),uC(e);break;case"option":s.value!=null&&e.setAttribute("value",""+to(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?wc(e,!!s.multiple,i,!1):s.defaultValue!=null&&wc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=p0)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return On(n),null;case 6:if(e&&n.stateNode!=null)t3(e,n,e.memoizedProps,s);else{if(typeof s!="string"&&n.stateNode===null)throw Error(ge(166));if(r=Po(ad.current),Po(fa.current),Uh(n)){if(s=n.stateNode,r=n.memoizedProps,s[oa]=n,(i=s.nodeValue!==r)&&(e=zr,e!==null))switch(e.tag){case 3:Fh(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fh(s.nodeValue,r,(e.mode&1)!==0)}i&&(n.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[oa]=n,n.stateNode=s}return On(n),null;case 13:if(It(Kt),s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ot&&Lr!==null&&n.mode&1&&!(n.flags&128))vE(),Dc(),n.flags|=98560,i=!1;else if(i=Uh(n),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(ge(318));if(i=n.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ge(317));i[oa]=n}else Dc(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;On(n),i=!1}else Us!==null&&(px(Us),Us=null),i=!0;if(!i)return n.flags&65536?n:null}return n.flags&128?(n.lanes=r,n):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(n.child.flags|=8192,n.mode&1&&(e===null||Kt.current&1?mn===0&&(mn=3):db())),n.updateQueue!==null&&(n.flags|=4),On(n),null);case 4:return $c(),cx(e,n),e===null&&td(n.stateNode.containerInfo),On(n),null;case 10:return qw(n.type._context),On(n),null;case 17:return kr(n.type)&&y0(),On(n),null;case 19:if(It(Kt),i=n.memoizedState,i===null)return On(n),null;if(s=(n.flags&128)!==0,o=i.rendering,o===null)if(s)TA(i,!1);else{if(mn!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(o=B0(e),o!==null){for(n.flags|=128,TA(i,!1),s=o.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),n.subtreeFlags=0,s=r,r=n.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Et(Kt,Kt.current&1|2),n.child}e=e.sibling}i.tail!==null&&nn()>Lc&&(n.flags|=128,s=!0,TA(i,!1),n.lanes=4194304)}else{if(!s)if(e=B0(o),e!==null){if(n.flags|=128,s=!0,r=e.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),TA(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ot)return On(n),null}else 2*nn()-i.renderingStartTime>Lc&&r!==1073741824&&(n.flags|=128,s=!0,TA(i,!1),n.lanes=4194304);i.isBackwards?(o.sibling=n.child,n.child=o):(r=i.last,r!==null?r.sibling=o:n.child=o,i.last=o)}return i.tail!==null?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=nn(),n.sibling=null,r=Kt.current,Et(Kt,s?r&1|2:r&1),n):(On(n),null);case 22:case 23:return ub(),s=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(n.flags|=8192),s&&n.mode&1?Rr&1073741824&&(On(n),n.subtreeFlags&6&&(n.flags|=8192)):On(n),null;case 24:return null;case 25:return null}throw Error(ge(156,n.tag))}function BR(e,n){switch(Kw(n),n.tag){case 1:return kr(n.type)&&y0(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return $c(),It(Sr),It(Jn),eb(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Zw(n),null;case 13:if(It(Kt),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(ge(340));Dc()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return It(Kt),null;case 4:return $c(),null;case 10:return qw(n.type._context),null;case 22:case 23:return ub(),null;case 24:return null;default:return null}}var Qh=!1,Vn=!1,SR=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function gc(e,n){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Zt(e,n,s)}else r.current=null}function Ax(e,n,r){try{r()}catch(s){Zt(e,n,s)}}var eB=!1;function kR(e,n){if(Wv=f0,e=iE(),Hw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,c=-1,A=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var g;d!==r||a!==0&&d.nodeType!==3||(c=o+a),d!==i||s!==0&&d.nodeType!==3||(A=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===e)break t;if(f===r&&++u===a&&(c=o),f===i&&++h===s&&(A=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}r=c===-1||A===-1?null:{start:c,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(Vv={focusedElem:e,selectionRange:r},f0=!1,Ue=n;Ue!==null;)if(n=Ue,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Ue=e;else for(;Ue!==null;){n=Ue;try{var m=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,x=m.memoizedState,p=n.stateNode,v=p.getSnapshotBeforeUpdate(n.elementType===n.type?y:Ns(n.type,y),x);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=n.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(w){Zt(n,n.return,w)}if(e=n.sibling,e!==null){e.return=n.return,Ue=e;break}Ue=n.return}return m=eB,eB=!1,m}function Eu(e,n,r){var s=n.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ax(n,r,i)}a=a.next}while(a!==s)}}function sm(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==n)}}function ux(e){var n=e.ref;if(n!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof n=="function"?n(e):n.current=e}}function n3(e){var n=e.alternate;n!==null&&(e.alternate=null,n3(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[oa],delete n[rd],delete n[Yv],delete n[cR],delete n[AR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function r3(e){return e.tag===5||e.tag===3||e.tag===4}function tB(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||r3(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dx(e,n,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?r.nodeType===8?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(r.nodeType===8?(n=r.parentNode,n.insertBefore(e,r)):(n=r,n.appendChild(e)),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=p0));else if(s!==4&&(e=e.child,e!==null))for(dx(e,n,r),e=e.sibling;e!==null;)dx(e,n,r),e=e.sibling}function hx(e,n,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?r.insertBefore(e,n):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(hx(e,n,r),e=e.sibling;e!==null;)hx(e,n,r),e=e.sibling}var In=null,Ts=!1;function vi(e,n,r){for(r=r.child;r!==null;)s3(e,n,r),r=r.sibling}function s3(e,n,r){if(ha&&typeof ha.onCommitFiberUnmount=="function")try{ha.onCommitFiberUnmount(Xg,r)}catch{}switch(r.tag){case 5:Vn||gc(r,n);case 6:var s=In,a=Ts;In=null,vi(e,n,r),In=s,Ts=a,In!==null&&(Ts?(e=In,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):In.removeChild(r.stateNode));break;case 18:In!==null&&(Ts?(e=In,r=r.stateNode,e.nodeType===8?Yp(e.parentNode,r):e.nodeType===1&&Yp(e,r),Ju(e)):Yp(In,r.stateNode));break;case 4:s=In,a=Ts,In=r.stateNode.containerInfo,Ts=!0,vi(e,n,r),In=s,Ts=a;break;case 0:case 11:case 14:case 15:if(!Vn&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ax(r,n,o),a=a.next}while(a!==s)}vi(e,n,r);break;case 1:if(!Vn&&(gc(r,n),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(c){Zt(r,n,c)}vi(e,n,r);break;case 21:vi(e,n,r);break;case 22:r.mode&1?(Vn=(s=Vn)||r.memoizedState!==null,vi(e,n,r),Vn=s):vi(e,n,r);break;default:vi(e,n,r)}}function nB(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new SR),n.forEach(function(s){var a=QR.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Bs(e,n){var r=n.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=n,c=o;e:for(;c!==null;){switch(c.tag){case 5:In=c.stateNode,Ts=!1;break e;case 3:In=c.stateNode.containerInfo,Ts=!0;break e;case 4:In=c.stateNode.containerInfo,Ts=!0;break e}c=c.return}if(In===null)throw Error(ge(160));s3(i,o,a),In=null,Ts=!1;var A=a.alternate;A!==null&&(A.return=null),a.return=null}catch(u){Zt(a,n,u)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)a3(n,e),n=n.sibling}function a3(e,n){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bs(n,e),Zs(e),s&4){try{Eu(3,e,e.return),sm(3,e)}catch(y){Zt(e,e.return,y)}try{Eu(5,e,e.return)}catch(y){Zt(e,e.return,y)}}break;case 1:Bs(n,e),Zs(e),s&512&&r!==null&&gc(r,r.return);break;case 5:if(Bs(n,e),Zs(e),s&512&&r!==null&&gc(r,r.return),e.flags&32){var a=e.stateNode;try{Vu(a,"")}catch(y){Zt(e,e.return,y)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,c=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&kN(a,i),Mv(c,o);var u=Mv(c,i);for(o=0;o<A.length;o+=2){var h=A[o],d=A[o+1];h==="style"?FN(a,d):h==="dangerouslySetInnerHTML"?EN(a,d):h==="children"?Vu(a,d):Ew(a,h,d,u)}switch(c){case"input":Fv(a,i);break;case"textarea":jN(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?wc(a,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?wc(a,!!i.multiple,i.defaultValue,!0):wc(a,!!i.multiple,i.multiple?[]:"",!1))}a[rd]=i}catch(y){Zt(e,e.return,y)}}break;case 6:if(Bs(n,e),Zs(e),s&4){if(e.stateNode===null)throw Error(ge(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){Zt(e,e.return,y)}}break;case 3:if(Bs(n,e),Zs(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ju(n.containerInfo)}catch(y){Zt(e,e.return,y)}break;case 4:Bs(n,e),Zs(e);break;case 13:Bs(n,e),Zs(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(cb=nn())),s&4&&nB(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(Vn=(u=Vn)||h,Bs(n,e),Vn=u):Bs(n,e),Zs(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(Ue=e,h=e.child;h!==null;){for(d=Ue=h;Ue!==null;){switch(f=Ue,g=f.child,f.tag){case 0:case 11:case 14:case 15:Eu(4,f,f.return);break;case 1:gc(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){s=f,r=f.return;try{n=s,m.props=n.memoizedProps,m.state=n.memoizedState,m.componentWillUnmount()}catch(y){Zt(s,r,y)}}break;case 5:gc(f,f.return);break;case 22:if(f.memoizedState!==null){sB(d);continue}}g!==null?(g.return=f,Ue=g):sB(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=d.stateNode,A=d.memoizedProps.style,o=A!=null&&A.hasOwnProperty("display")?A.display:null,c.style.display=TN("display",o))}catch(y){Zt(e,e.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Zt(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Bs(n,e),Zs(e),s&4&&nB(e);break;case 21:break;default:Bs(n,e),Zs(e)}}function Zs(e){var n=e.flags;if(n&2){try{e:{for(var r=e.return;r!==null;){if(r3(r)){var s=r;break e}r=r.return}throw Error(ge(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Vu(a,""),s.flags&=-33);var i=tB(e);hx(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,c=tB(e);dx(e,c,o);break;default:throw Error(ge(161))}}catch(A){Zt(e,e.return,A)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function jR(e,n,r){Ue=e,i3(e)}function i3(e,n,r){for(var s=(e.mode&1)!==0;Ue!==null;){var a=Ue,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Qh;if(!o){var c=a.alternate,A=c!==null&&c.memoizedState!==null||Vn;c=Qh;var u=Vn;if(Qh=o,(Vn=A)&&!u)for(Ue=a;Ue!==null;)o=Ue,A=o.child,o.tag===22&&o.memoizedState!==null?aB(a):A!==null?(A.return=o,Ue=A):aB(a);for(;i!==null;)Ue=i,i3(i),i=i.sibling;Ue=a,Qh=c,Vn=u}rB(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ue=i):rB(e)}}function rB(e){for(;Ue!==null;){var n=Ue;if(n.flags&8772){var r=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Vn||sm(5,n);break;case 1:var s=n.stateNode;if(n.flags&4&&!Vn)if(r===null)s.componentDidMount();else{var a=n.elementType===n.type?r.memoizedProps:Ns(n.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;i!==null&&OC(n,i,s);break;case 3:var o=n.updateQueue;if(o!==null){if(r=null,n.child!==null)switch(n.child.tag){case 5:r=n.child.stateNode;break;case 1:r=n.child.stateNode}OC(n,o,r)}break;case 5:var c=n.stateNode;if(r===null&&n.flags&4){r=c;var A=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var u=n.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ju(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}Vn||n.flags&512&&ux(n)}catch(f){Zt(n,n.return,f)}}if(n===e){Ue=null;break}if(r=n.sibling,r!==null){r.return=n.return,Ue=r;break}Ue=n.return}}function sB(e){for(;Ue!==null;){var n=Ue;if(n===e){Ue=null;break}var r=n.sibling;if(r!==null){r.return=n.return,Ue=r;break}Ue=n.return}}function aB(e){for(;Ue!==null;){var n=Ue;try{switch(n.tag){case 0:case 11:case 15:var r=n.return;try{sm(4,n)}catch(A){Zt(n,r,A)}break;case 1:var s=n.stateNode;if(typeof s.componentDidMount=="function"){var a=n.return;try{s.componentDidMount()}catch(A){Zt(n,a,A)}}var i=n.return;try{ux(n)}catch(A){Zt(n,i,A)}break;case 5:var o=n.return;try{ux(n)}catch(A){Zt(n,o,A)}}}catch(A){Zt(n,n.return,A)}if(n===e){Ue=null;break}var c=n.sibling;if(c!==null){c.return=n.return,Ue=c;break}Ue=n.return}}var NR=Math.ceil,j0=di.ReactCurrentDispatcher,ob=di.ReactCurrentOwner,ds=di.ReactCurrentBatchConfig,ut=0,Cn=null,on=null,Mn=0,Rr=0,mc=co(0),mn=0,cd=null,Jo=0,am=0,lb=0,Tu=null,br=null,cb=0,Lc=1/0,Ra=null,N0=!1,fx=null,Vi=null,Mh=!1,Di=null,E0=0,Fu=0,gx=null,Of=-1,Lf=0;function ur(){return ut&6?nn():Of!==-1?Of:Of=nn()}function qi(e){return e.mode&1?ut&2&&Mn!==0?Mn&-Mn:dR.transition!==null?(Lf===0&&(Lf=zN()),Lf):(e=yt,e!==0||(e=window.event,e=e===void 0?16:YN(e.type)),e):1}function Rs(e,n,r,s){if(50<Fu)throw Fu=0,gx=null,Error(ge(185));Md(e,r,s),(!(ut&2)||e!==Cn)&&(e===Cn&&(!(ut&2)&&(am|=r),mn===4&&Ti(e,Mn)),jr(e,s),r===1&&ut===0&&!(n.mode&1)&&(Lc=nn()+500,tm&&Ao()))}function jr(e,n){var r=e.callbackNode;d7(e,n);var s=h0(e,e===Cn?Mn:0);if(s===0)r!==null&&fC(r),e.callbackNode=null,e.callbackPriority=0;else if(n=s&-s,e.callbackPriority!==n){if(r!=null&&fC(r),n===1)e.tag===0?uR(iB.bind(null,e)):mE(iB.bind(null,e)),oR(function(){!(ut&6)&&Ao()}),r=null;else{switch(KN(s)){case 1:r=Pw;break;case 4:r=LN;break;case 16:r=d0;break;case 536870912:r=HN;break;default:r=d0}r=f3(r,o3.bind(null,e))}e.callbackPriority=n,e.callbackNode=r}}function o3(e,n){if(Of=-1,Lf=0,ut&6)throw Error(ge(327));var r=e.callbackNode;if(Sc()&&e.callbackNode!==r)return null;var s=h0(e,e===Cn?Mn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||n)n=T0(e,s);else{n=s;var a=ut;ut|=2;var i=c3();(Cn!==e||Mn!==n)&&(Ra=null,Lc=nn()+500,Oo(e,n));do try{FR();break}catch(c){l3(e,c)}while(1);Vw(),j0.current=i,ut=a,on!==null?n=0:(Cn=null,Mn=0,n=mn)}if(n!==0){if(n===2&&(a=Lv(e),a!==0&&(s=a,n=mx(e,a))),n===1)throw r=cd,Oo(e,0),Ti(e,s),jr(e,nn()),r;if(n===6)Ti(e,s);else{if(a=e.current.alternate,!(s&30)&&!ER(a)&&(n=T0(e,s),n===2&&(i=Lv(e),i!==0&&(s=i,n=mx(e,i))),n===1))throw r=cd,Oo(e,0),Ti(e,s),jr(e,nn()),r;switch(e.finishedWork=a,e.finishedLanes=s,n){case 0:case 1:throw Error(ge(345));case 2:_o(e,br,Ra);break;case 3:if(Ti(e,s),(s&130023424)===s&&(n=cb+500-nn(),10<n)){if(h0(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){ur(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Xv(_o.bind(null,e,br,Ra),n);break}_o(e,br,Ra);break;case 4:if(Ti(e,s),(s&4194240)===s)break;for(n=e.eventTimes,a=-1;0<s;){var o=31-Ds(s);i=1<<o,o=n[o],o>a&&(a=o),s&=~i}if(s=a,s=nn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*NR(s/1960))-s,10<s){e.timeoutHandle=Xv(_o.bind(null,e,br,Ra),s);break}_o(e,br,Ra);break;case 5:_o(e,br,Ra);break;default:throw Error(ge(329))}}}return jr(e,nn()),e.callbackNode===r?o3.bind(null,e):null}function mx(e,n){var r=Tu;return e.current.memoizedState.isDehydrated&&(Oo(e,n).flags|=256),e=T0(e,n),e!==2&&(n=br,br=r,n!==null&&px(n)),e}function px(e){br===null?br=e:br.push.apply(br,e)}function ER(e){for(var n=e;;){if(n.flags&16384){var r=n.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!Hs(i(),a))return!1}catch{return!1}}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ti(e,n){for(n&=~lb,n&=~am,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var r=31-Ds(n),s=1<<r;e[r]=-1,n&=~s}}function iB(e){if(ut&6)throw Error(ge(327));Sc();var n=h0(e,0);if(!(n&1))return jr(e,nn()),null;var r=T0(e,n);if(e.tag!==0&&r===2){var s=Lv(e);s!==0&&(n=s,r=mx(e,s))}if(r===1)throw r=cd,Oo(e,0),Ti(e,n),jr(e,nn()),r;if(r===6)throw Error(ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,_o(e,br,Ra),jr(e,nn()),null}function Ab(e,n){var r=ut;ut|=1;try{return e(n)}finally{ut=r,ut===0&&(Lc=nn()+500,tm&&Ao())}}function Zo(e){Di!==null&&Di.tag===0&&!(ut&6)&&Sc();var n=ut;ut|=1;var r=ds.transition,s=yt;try{if(ds.transition=null,yt=1,e)return e()}finally{yt=s,ds.transition=r,ut=n,!(ut&6)&&Ao()}}function ub(){Rr=mc.current,It(mc)}function Oo(e,n){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,iR(r)),on!==null)for(r=on.return;r!==null;){var s=r;switch(Kw(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&y0();break;case 3:$c(),It(Sr),It(Jn),eb();break;case 5:Zw(s);break;case 4:$c();break;case 13:It(Kt);break;case 19:It(Kt);break;case 10:qw(s.type._context);break;case 22:case 23:ub()}r=r.return}if(Cn=e,on=e=Xi(e.current,null),Mn=Rr=n,mn=0,cd=null,lb=am=Jo=0,br=Tu=null,Io!==null){for(n=0;n<Io.length;n++)if(r=Io[n],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}Io=null}return e}function l3(e,n){do{var r=on;try{if(Vw(),Df.current=k0,S0){for(var s=Wt.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}S0=!1}if(Yo=0,wn=hn=Wt=null,Nu=!1,id=0,ob.current=null,r===null||r.return===null){mn=1,cd=n,on=null;break}e:{var i=e,o=r.return,c=r,A=n;if(n=Mn,c.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var u=A,h=c,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=WC(o);if(g!==null){g.flags&=-257,VC(g,o,c,i,n),g.mode&1&&GC(i,u,n),n=g,A=u;var m=n.updateQueue;if(m===null){var y=new Set;y.add(A),n.updateQueue=y}else m.add(A);break e}else{if(!(n&1)){GC(i,u,n),db();break e}A=Error(ge(426))}}else if(Ot&&c.mode&1){var x=WC(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),VC(x,o,c,i,n),Gw(Oc(A,c));break e}}i=A=Oc(A,c),mn!==4&&(mn=2),Tu===null?Tu=[i]:Tu.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n;var p=KE(i,A,n);$C(i,p);break e;case 1:c=A;var v=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Vi===null||!Vi.has(b)))){i.flags|=65536,n&=-n,i.lanes|=n;var w=GE(i,c,n);$C(i,w);break e}}i=i.return}while(i!==null)}u3(r)}catch(_){n=_,on===r&&r!==null&&(on=r=r.return);continue}break}while(1)}function c3(){var e=j0.current;return j0.current=k0,e===null?k0:e}function db(){(mn===0||mn===3||mn===2)&&(mn=4),Cn===null||!(Jo&268435455)&&!(am&268435455)||Ti(Cn,Mn)}function T0(e,n){var r=ut;ut|=2;var s=c3();(Cn!==e||Mn!==n)&&(Ra=null,Oo(e,n));do try{TR();break}catch(a){l3(e,a)}while(1);if(Vw(),ut=r,j0.current=s,on!==null)throw Error(ge(261));return Cn=null,Mn=0,mn}function TR(){for(;on!==null;)A3(on)}function FR(){for(;on!==null&&!r7();)A3(on)}function A3(e){var n=h3(e.alternate,e,Rr);e.memoizedProps=e.pendingProps,n===null?u3(e):on=n,ob.current=null}function u3(e){var n=e;do{var r=n.alternate;if(e=n.return,n.flags&32768){if(r=BR(r,n),r!==null){r.flags&=32767,on=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mn=6,on=null;return}}else if(r=CR(r,n,Rr),r!==null){on=r;return}if(n=n.sibling,n!==null){on=n;return}on=n=e}while(n!==null);mn===0&&(mn=5)}function _o(e,n,r){var s=yt,a=ds.transition;try{ds.transition=null,yt=1,UR(e,n,r,s)}finally{ds.transition=a,yt=s}return null}function UR(e,n,r,s){do Sc();while(Di!==null);if(ut&6)throw Error(ge(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ge(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(h7(e,i),e===Cn&&(on=Cn=null,Mn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Mh||(Mh=!0,f3(d0,function(){return Sc(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ds.transition,ds.transition=null;var o=yt;yt=1;var c=ut;ut|=4,ob.current=null,kR(e,r),a3(r,e),Z7(Vv),f0=!!Wv,Vv=Wv=null,e.current=r,jR(r),s7(),ut=c,yt=o,ds.transition=i}else e.current=r;if(Mh&&(Mh=!1,Di=e,E0=a),i=e.pendingLanes,i===0&&(Vi=null),o7(r.stateNode),jr(e,nn()),n!==null)for(s=e.onRecoverableError,r=0;r<n.length;r++)a=n[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(N0)throw N0=!1,e=fx,fx=null,e;return E0&1&&e.tag!==0&&Sc(),i=e.pendingLanes,i&1?e===gx?Fu++:(Fu=0,gx=e):Fu=0,Ao(),null}function Sc(){if(Di!==null){var e=KN(E0),n=ds.transition,r=yt;try{if(ds.transition=null,yt=16>e?16:e,Di===null)var s=!1;else{if(e=Di,Di=null,E0=0,ut&6)throw Error(ge(331));var a=ut;for(ut|=4,Ue=e.current;Ue!==null;){var i=Ue,o=i.child;if(Ue.flags&16){var c=i.deletions;if(c!==null){for(var A=0;A<c.length;A++){var u=c[A];for(Ue=u;Ue!==null;){var h=Ue;switch(h.tag){case 0:case 11:case 15:Eu(8,h,i)}var d=h.child;if(d!==null)d.return=h,Ue=d;else for(;Ue!==null;){h=Ue;var f=h.sibling,g=h.return;if(n3(h),h===u){Ue=null;break}if(f!==null){f.return=g,Ue=f;break}Ue=g}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}Ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ue=o;else e:for(;Ue!==null;){if(i=Ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Eu(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Ue=p;break e}Ue=i.return}}var v=e.current;for(Ue=v;Ue!==null;){o=Ue;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ue=b;else e:for(o=v;Ue!==null;){if(c=Ue,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:sm(9,c)}}catch(_){Zt(c,c.return,_)}if(c===o){Ue=null;break e}var w=c.sibling;if(w!==null){w.return=c.return,Ue=w;break e}Ue=c.return}}if(ut=a,Ao(),ha&&typeof ha.onPostCommitFiberRoot=="function")try{ha.onPostCommitFiberRoot(Xg,e)}catch{}s=!0}return s}finally{yt=r,ds.transition=n}}return!1}function oB(e,n,r){n=Oc(r,n),n=KE(e,n,1),e=Wi(e,n,1),n=ur(),e!==null&&(Md(e,1,n),jr(e,n))}function Zt(e,n,r){if(e.tag===3)oB(e,e,r);else for(;n!==null;){if(n.tag===3){oB(n,e,r);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Vi===null||!Vi.has(s))){e=Oc(r,e),e=GE(n,e,1),n=Wi(n,e,1),e=ur(),n!==null&&(Md(n,1,e),jr(n,e));break}}n=n.return}}function IR(e,n,r){var s=e.pingCache;s!==null&&s.delete(n),n=ur(),e.pingedLanes|=e.suspendedLanes&r,Cn===e&&(Mn&r)===r&&(mn===4||mn===3&&(Mn&130023424)===Mn&&500>nn()-cb?Oo(e,0):lb|=r),jr(e,n)}function d3(e,n){n===0&&(e.mode&1?(n=kh,kh<<=1,!(kh&130023424)&&(kh=4194304)):n=1);var r=ur();e=ri(e,n),e!==null&&(Md(e,n,r),jr(e,r))}function PR(e){var n=e.memoizedState,r=0;n!==null&&(r=n.retryLane),d3(e,r)}function QR(e,n){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(ge(314))}s!==null&&s.delete(n),d3(e,r)}var h3;h3=function(e,n,r){if(e!==null)if(e.memoizedProps!==n.pendingProps||Sr.current)_r=!0;else{if(!(e.lanes&r)&&!(n.flags&128))return _r=!1,_R(e,n,r);_r=!!(e.flags&131072)}else _r=!1,Ot&&n.flags&1048576&&pE(n,w0,n.index);switch(n.lanes=0,n.tag){case 2:var s=n.type;$f(e,n),e=n.pendingProps;var a=Mc(n,Jn.current);Bc(n,r),a=nb(null,n,s,e,a,r);var i=rb();return n.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,kr(s)?(i=!0,v0(n)):i=!1,n.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Yw(n),a.updater=rm,n.stateNode=a,a._reactInternals=n,rx(n,s,e,r),n=ix(null,n,s,!0,i,r)):(n.tag=0,Ot&&i&&zw(n),ir(null,n,a,r),n=n.child),n;case 16:s=n.elementType;e:{switch($f(e,n),e=n.pendingProps,a=s._init,s=a(s._payload),n.type=s,a=n.tag=DR(s),e=Ns(s,e),a){case 0:n=ax(null,n,s,e,r);break e;case 1:n=YC(null,n,s,e,r);break e;case 11:n=qC(null,n,s,e,r);break e;case 14:n=XC(null,n,s,Ns(s.type,e),r);break e}throw Error(ge(306,s,""))}return n;case 0:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Ns(s,a),ax(e,n,s,a,r);case 1:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Ns(s,a),YC(e,n,s,a,r);case 3:e:{if(XE(n),e===null)throw Error(ge(387));s=n.pendingProps,i=n.memoizedState,a=i.element,_E(e,n),C0(n,s,null,r);var o=n.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},n.updateQueue.baseState=i,n.memoizedState=i,n.flags&256){a=Oc(Error(ge(423)),n),n=JC(e,n,s,r,a);break e}else if(s!==a){a=Oc(Error(ge(424)),n),n=JC(e,n,s,r,a);break e}else for(Lr=Gi(n.stateNode.containerInfo.firstChild),zr=n,Ot=!0,Us=null,r=wE(n,null,s,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Dc(),s===a){n=si(e,n,r);break e}ir(e,n,s,r)}n=n.child}return n;case 5:return CE(n),e===null&&ex(n),s=n.type,a=n.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,qv(s,a)?o=null:i!==null&&qv(s,i)&&(n.flags|=32),qE(e,n),ir(e,n,o,r),n.child;case 6:return e===null&&ex(n),null;case 13:return YE(e,n,r);case 4:return Jw(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=Rc(n,null,s,r):ir(e,n,s,r),n.child;case 11:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Ns(s,a),qC(e,n,s,a,r);case 7:return ir(e,n,n.pendingProps,r),n.child;case 8:return ir(e,n,n.pendingProps.children,r),n.child;case 12:return ir(e,n,n.pendingProps.children,r),n.child;case 10:e:{if(s=n.type._context,a=n.pendingProps,i=n.memoizedProps,o=a.value,Et(b0,s._currentValue),s._currentValue=o,i!==null)if(Hs(i.value,o)){if(i.children===a.children&&!Sr.current){n=si(e,n,r);break e}}else for(i=n.child,i!==null&&(i.return=n);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var A=c.firstContext;A!==null;){if(A.context===s){if(i.tag===1){A=Ja(-1,r&-r),A.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?A.next=A:(A.next=h.next,h.next=A),u.pending=A}}i.lanes|=r,A=i.alternate,A!==null&&(A.lanes|=r),tx(i.return,r,n),c.lanes|=r;break}A=A.next}}else if(i.tag===10)o=i.type===n.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ge(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),tx(o,r,n),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===n){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ir(e,n,a.children,r),n=n.child}return n;case 9:return a=n.type,s=n.pendingProps.children,Bc(n,r),a=hs(a),s=s(a),n.flags|=1,ir(e,n,s,r),n.child;case 14:return s=n.type,a=Ns(s,n.pendingProps),a=Ns(s.type,a),XC(e,n,s,a,r);case 15:return WE(e,n,n.type,n.pendingProps,r);case 17:return s=n.type,a=n.pendingProps,a=n.elementType===s?a:Ns(s,a),$f(e,n),n.tag=1,kr(s)?(e=!0,v0(n)):e=!1,Bc(n,r),zE(n,s,a),rx(n,s,a,r),ix(null,n,s,!0,e,r);case 19:return JE(e,n,r);case 22:return VE(e,n,r)}throw Error(ge(156,n.tag))};function f3(e,n){return ON(e,n)}function MR(e,n,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(e,n,r,s){return new MR(e,n,r,s)}function hb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function DR(e){if(typeof e=="function")return hb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fw)return 11;if(e===Uw)return 14}return 2}function Xi(e,n){var r=e.alternate;return r===null?(r=ls(e.tag,n,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=n,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,n=e.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Hf(e,n,r,s,a,i){var o=2;if(s=e,typeof e=="function")hb(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ic:return Lo(r.children,a,i,n);case Tw:o=8,a|=8;break;case kv:return e=ls(12,r,n,a|2),e.elementType=kv,e.lanes=i,e;case jv:return e=ls(13,r,n,a),e.elementType=jv,e.lanes=i,e;case Nv:return e=ls(19,r,n,a),e.elementType=Nv,e.lanes=i,e;case CN:return im(r,a,i,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bN:o=10;break e;case _N:o=9;break e;case Fw:o=11;break e;case Uw:o=14;break e;case Si:o=16,s=null;break e}throw Error(ge(130,e==null?e:typeof e,""))}return n=ls(o,r,n,a),n.elementType=e,n.type=s,n.lanes=i,n}function Lo(e,n,r,s){return e=ls(7,e,s,n),e.lanes=r,e}function im(e,n,r,s){return e=ls(22,e,s,n),e.elementType=CN,e.lanes=r,e.stateNode={isHidden:!1},e}function ay(e,n,r){return e=ls(6,e,null,n),e.lanes=r,e}function iy(e,n,r){return n=ls(4,e.children!==null?e.children:[],e.key,n),n.lanes=r,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function RR(e,n,r,s,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$p(0),this.expirationTimes=$p(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$p(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function fb(e,n,r,s,a,i,o,c,A){return e=new RR(e,n,r,c,A),n===1?(n=1,i===!0&&(n|=8)):n=0,i=ls(3,null,null,n),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yw(i),e}function $R(e,n,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ac,key:s==null?null:""+s,children:e,containerInfo:n,implementation:r}}function g3(e){if(!e)return no;e=e._reactInternals;e:{if(ll(e)!==e||e.tag!==1)throw Error(ge(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(kr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(ge(171))}if(e.tag===1){var r=e.type;if(kr(r))return gE(e,r,n)}return n}function m3(e,n,r,s,a,i,o,c,A){return e=fb(r,s,!0,e,a,i,o,c,A),e.context=g3(null),r=e.current,s=ur(),a=qi(r),i=Ja(s,a),i.callback=n??null,Wi(r,i,a),e.current.lanes=a,Md(e,a,s),jr(e,s),e}function om(e,n,r,s){var a=n.current,i=ur(),o=qi(a);return r=g3(r),n.context===null?n.context=r:n.pendingContext=r,n=Ja(i,o),n.payload={element:e},s=s===void 0?null:s,s!==null&&(n.callback=s),e=Wi(a,n,o),e!==null&&(Rs(e,a,o,i),Mf(e,a,o)),o}function F0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lB(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<n?r:n}}function gb(e,n){lB(e,n),(e=e.alternate)&&lB(e,n)}function OR(){return null}var p3=typeof reportError=="function"?reportError:function(e){console.error(e)};function mb(e){this._internalRoot=e}lm.prototype.render=mb.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(ge(409));om(e,n,null,null)};lm.prototype.unmount=mb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Zo(function(){om(null,e,null,null)}),n[ni]=null}};function lm(e){this._internalRoot=e}lm.prototype.unstable_scheduleHydration=function(e){if(e){var n=VN();e={blockedOn:null,target:e,priority:n};for(var r=0;r<Ei.length&&n!==0&&n<Ei[r].priority;r++);Ei.splice(r,0,e),r===0&&XN(e)}};function pb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function cm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cB(){}function LR(e,n,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var u=F0(o);i.call(u)}}var o=m3(n,s,e,0,null,!1,!1,"",cB);return e._reactRootContainer=o,e[ni]=o.current,td(e.nodeType===8?e.parentNode:e),Zo(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var c=s;s=function(){var u=F0(A);c.call(u)}}var A=fb(e,0,!1,null,null,!1,!1,"",cB);return e._reactRootContainer=A,e[ni]=A.current,td(e.nodeType===8?e.parentNode:e),Zo(function(){om(n,A,r,s)}),A}function Am(e,n,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var c=a;a=function(){var A=F0(o);c.call(A)}}om(n,o,e,a)}else o=LR(r,n,e,a,s);return F0(o)}GN=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var r=au(n.pendingLanes);r!==0&&(Qw(n,r|1),jr(n,nn()),!(ut&6)&&(Lc=nn()+500,Ao()))}break;case 13:Zo(function(){var s=ri(e,1);if(s!==null){var a=ur();Rs(s,e,1,a)}}),gb(e,1)}};Mw=function(e){if(e.tag===13){var n=ri(e,134217728);if(n!==null){var r=ur();Rs(n,e,134217728,r)}gb(e,134217728)}};WN=function(e){if(e.tag===13){var n=qi(e),r=ri(e,n);if(r!==null){var s=ur();Rs(r,e,n,s)}gb(e,n)}};VN=function(){return yt};qN=function(e,n){var r=yt;try{return yt=e,n()}finally{yt=r}};Rv=function(e,n,r){switch(n){case"input":if(Fv(e,r),n=r.name,r.type==="radio"&&n!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<r.length;n++){var s=r[n];if(s!==e&&s.form===e.form){var a=em(s);if(!a)throw Error(ge(90));SN(s),Fv(s,a)}}}break;case"textarea":jN(e,r);break;case"select":n=r.value,n!=null&&wc(e,!!r.multiple,n,!1)}};PN=Ab;QN=Zo;var HR={usingClientEntryPoint:!1,Events:[Rd,Ac,em,UN,IN,Ab]},FA={findFiberByHostInstance:Uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zR={bundleType:FA.bundleType,version:FA.version,rendererPackageName:FA.rendererPackageName,rendererConfig:FA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:di.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=RN(e),e===null?null:e.stateNode},findFiberByHostInstance:FA.findFiberByHostInstance||OR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{Xg=Dh.inject(zR),ha=Dh}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HR;Wr.createPortal=function(e,n){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pb(n))throw Error(ge(200));return $R(e,n,null,r)};Wr.createRoot=function(e,n){if(!pb(e))throw Error(ge(299));var r=!1,s="",a=p3;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),n=fb(e,1,!1,null,null,r,!1,s,a),e[ni]=n.current,td(e.nodeType===8?e.parentNode:e),new mb(n)};Wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(ge(188)):(e=Object.keys(e).join(","),Error(ge(268,e)));return e=RN(n),e=e===null?null:e.stateNode,e};Wr.flushSync=function(e){return Zo(e)};Wr.hydrate=function(e,n,r){if(!cm(n))throw Error(ge(200));return Am(null,e,n,!0,r)};Wr.hydrateRoot=function(e,n,r){if(!pb(e))throw Error(ge(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=p3;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),n=m3(n,null,e,1,r??null,a,!1,i,o),e[ni]=n.current,td(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[r,a]:n.mutableSourceEagerHydrationData.push(r,a);return new lm(n)};Wr.render=function(e,n,r){if(!cm(n))throw Error(ge(200));return Am(null,e,n,!1,r)};Wr.unmountComponentAtNode=function(e){if(!cm(e))throw Error(ge(40));return e._reactRootContainer?(Zo(function(){Am(null,null,e,!1,function(){e._reactRootContainer=null,e[ni]=null})}),!0):!1};Wr.unstable_batchedUpdates=Ab;Wr.unstable_renderSubtreeIntoContainer=function(e,n,r,s){if(!cm(r))throw Error(ge(200));if(e==null||e._reactInternals===void 0)throw Error(ge(38));return Am(e,n,r,!1,s)};Wr.version="18.3.1-next-f1338f8080-20240426";function y3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y3)}catch(e){console.error(e)}}y3(),yN.exports=Wr;var KR=yN.exports,AB=KR;Bv.createRoot=AB.createRoot,Bv.hydrateRoot=AB.hydrateRoot;var ne=(e=>(e.Titans="titans",e.Atlanteans="atlanteans",e))(ne||{}),at=(e=>(e.Quick="quick",e.Long="long",e))(at||{}),We=(e=>(e.Top="top",e.Bottom="bottom",e.Single="single",e))(We||{}),we=(e=>(e.None="none",e.AllPick="allpick",e.Single="single",e.Random="random",e.PickAndBan="pickandban",e))(we||{});const qn=[{id:0,name:"Arien",icon:"heroes/arien.png",complexity:1,roles:["Tactician","Disabler"],additionalRoles:["Durable","Pusher"],expansion:"Core",description:"Arien is a master duelist who boasts the some of the strongest attacks and disruption on the roster. He is relatively sturdy and presents some interesting positional puzzles.",attack:8,initiative:4,defence:5,defence_upgraded:6,movement:5,movement_upgraded:6},{id:1,name:"Brogan",icon:"heroes/brogan.png",complexity:1,roles:["Durable","Disabler"],additionalRoles:["Pusher","Farming"],expansion:"Core",description:"Brogan is a great starting tank, nigh-unkillable and great at applying pressure in an area. More mobile than you might expect, but quite predictable.",attack:7,initiative:1,defence:8,movement:2,movement_upgraded:4},{id:2,name:"Tigerclaw",icon:"heroes/tigerclaw.png",complexity:1,roles:["Melee","Disabler"],additionalRoles:["Farming"],expansion:"Core",description:"Tigerclaw is an evasive hero capable of dodging attacks, debilitating enemy heroes and stealing their gold.",attack:4,attack_upgraded:8,initiative:8,defence:1,defence_upgraded:4,movement:7,movement_upgraded:8},{id:3,name:"Wasp",icon:"heroes/wasp.png",complexity:1,roles:["Disabler","Tactician"],additionalRoles:["Sniper"],expansion:"Core",description:"Wasp is a crowd control specialist, with area control abilities.",attack:5,initiative:6,defence:4,defence_upgraded:5,movement:5},{id:4,name:"Sabina",icon:"heroes/sabina.png",complexity:1,roles:["Tactician","Pusher"],expansion:"Core",description:"Sabina is a pusher who works best surrounded by friendly minions, or in one-on-one duels.",attack:1,attack_upgraded:8,initiative:5,defence:3,movement:5,movement_upgraded:6},{id:5,name:"Xargatha",icon:"heroes/xargatha.png",complexity:1,roles:["Tactician","Pusher"],additionalRoles:["Disabler","Durable","Sniper"],expansion:"Core",description:"Xargartha is a powerful brawler and zoner, who performs best when up and close against enemy minions.",attack:5,attack_upgraded:8,initiative:3,defence:6,movement:6},{id:6,name:"Dodger",icon:"heroes/dodger.png",complexity:1,roles:["Damager","Sniper"],additionalRoles:["Pusher","Farming","Disabler"],expansion:"Core",description:"Dodger is damaging hero who becomes more powerful as her enemies become weaker.",attack:3,initiative:7,defence:2,defence_upgraded:5,movement:5},{id:7,name:"Rowenna",icon:"heroes/rowenna.png",complexity:2,roles:["Melee","Durable"],additionalRoles:["Healer","Farming","Pusher","Tactician"],expansion:"Arcane",description:"Rowenna is a front-line tank and battlefield support who excels at surviving in contested areas.",attack:8,initiative:4,defence:7,movement:3,movement_upgraded:5},{id:8,name:"Garrus",icon:"heroes/garrus.png",complexity:2,roles:["Disabler","Durable"],additionalRoles:["Tactician"],expansion:"Defiant",description:"Garrus dominates the battlefield as a melee brawler who thrives on intimidation and control.",attack:8,initiative:3,defence:7,movement:5,movement_upgraded:6},{id:9,name:"Bain",icon:"heroes/bain.png",complexity:2,roles:["Tactician","Sniper"],additionalRoles:["Healer","Farming","Durable"],expansion:"Defiant",description:"Bain is a ranged initiator who specializes in marking targets, forcing discards, and setting up kills.",attack:5,initiative:4,defence:4,defence_upgraded:6,movement:5,movement_upgraded:6},{id:10,name:"Whisper",icon:"heroes/whisper.png",complexity:2,roles:["Damager","Durable"],additionalRoles:["Tactician","Pusher"],expansion:"Devoted",description:"Whisper is an adaptive support fighter whose power scales with battlefield clearing, gaining strength as minion spawns empty.",attack:7,initiative:7,defence:4,movement:3,movement_upgraded:5},{id:11,name:"Misa",icon:"heroes/misa.png",complexity:2,roles:["Tactician","Durable"],additionalRoles:["Damager"],expansion:"Devoted",description:"Misa is an elite mobility assassin and disruptor who controls engagements through superior positioning and unpredictable movement.",attack:6,initiative:7,defence:5,movement:1,movement_upgraded:8},{id:12,name:"Ursafar",icon:"heroes/ursafar.png",complexity:2,roles:["Durable","Pusher"],additionalRoles:["Farming","Melee"],expansion:"Devoted",description:'Ursafar is a momentum-based melee brawler who transforms from adequate to overwhelming once his "enraged" state activates.',attack:6,initiative:5,defence:6,movement:1,movement_upgraded:5},{id:13,name:"Silverarrow",icon:"heroes/silverarrow.png",complexity:2,roles:["Sniper","Damager"],additionalRoles:["Disabler","Healer","Farming"],expansion:"Devoted",description:"Silverarrow is a long-range zone controller and initiator who dominates through superior positioning and keeping her distance.",attack:2,initiative:7,defence:1,movement:6,movement_upgraded:7},{id:14,name:"Min",icon:"heroes/min.png",complexity:2,roles:["Tokens","Disabler"],additionalRoles:["Damager","Melee"],expansion:"Renowned",description:"Min strikes with lightning speed as one of the game's fastest initiators, wielding ancient dragon-inspired martial arts",attack:4,attack_upgraded:8,initiative:8,defence:3,defence_upgraded:8,movement:6},{id:15,name:"Mrak",icon:"heroes/mrak.png",complexity:3,roles:["Melee","Tokens"],additionalRoles:["Durable","Disabler","Tactician"],expansion:"Arcane",description:"Mrak is a heavyweight disrupter, commanding powers of rock and stone. Slow and immobile, he is at his best when the action comes to him.",attack:8,initiative:1,defence:8,movement:2,movement_upgraded:4},{id:16,name:"Cutter",icon:"heroes/cutter.png",complexity:3,roles:["Tactician","Disabler"],additionalRoles:["Farming"],expansion:"Defiant",description:"Cutter dances across the battlefield, striking precisely when opportunity presents itself. Her grappling hook allows last-second positioning, while her fork-creating attacks force impossible decisions upon enemies.",attack:4,attack_upgraded:8,initiative:6,defence:4,movement:4,movement_upgraded:8},{id:17,name:"Trinkets",icon:"heroes/trinkets.png",complexity:3,roles:["Sniper","Damager"],additionalRoles:["Pusher"],expansion:"Defiant",description:"Trinkets is a light-weight, fast, highly-mobile, ranged killer who presents an enormous danger zone in the Venn Diagram between himself and his Turret.",attack:3,attack_upgraded:5,initiative:6,defence:2,defence_upgraded:4,movement:7,movement_upgraded:8},{id:18,name:"Tali",icon:"heroes/tali.png",complexity:3,roles:["Damager","Pusher"],additionalRoles:["Healer","Durable","Tokens"],expansion:"Devoted",description:"Tali commands the spirit world as a great support hero, manipulating the battlefield with ice tokens and healing totems.",attack:4,attack_upgraded:6,initiative:5,initiative_upgraded:8,defence:4,movement:5},{id:19,name:"Swift",icon:"heroes/swift.png",complexity:3,roles:["Sniper","Farming"],additionalRoles:["Tactician"],expansion:"Renowned",description:"Swift dominates from the shadows with the extremely long attack range, but presents a complex positional puzzle due to straight line restrictions.",attack:5,initiative:4,defence:2,movement:7},{id:20,name:"Wuk",icon:"heroes/wuk.png",complexity:3,roles:["Tokens","Pusher"],additionalRoles:["Durable","Sniper","Tactician","Healer"],expansion:"Renowned",description:"With Wuk at the table, nobody needs to be reminded about the thousand pound gorilla in the room. Everyone's watching to see where Wuk puts down his trees and defines his turf. He exerts great area control, but requires good planning.",attack:5,initiative:1,defence:8,movement:3,movement_upgraded:4},{id:21,name:"Hanu",icon:"heroes/hanu.png",complexity:3,roles:["Tactician","Sniper"],additionalRoles:["Pusher"],expansion:"Renowned",description:"Hanu the Trickster is a great support hero. His cards allow for shenanigans, bamboozling, knavery, and outright mischief.",attack:4,initiative:8,defence:1,movement:7,movement_upgraded:8},{id:22,name:"Brynn",icon:"heroes/brynn.png",complexity:3,roles:["Tactician","Damager"],additionalRoles:["Durable"],expansion:"Wayward",description:"Brynn is a tactical battlefield manipulator who creates and exploits positioning traps, gaining powerful bonuses when enemies are surrounded by three or more obstacles.",attack:4,attack_upgraded:8,initiative:7,defence:4,movement:5,movement_upgraded:6},{id:23,name:"Mortimer",icon:"heroes/mortimer.png",complexity:3,roles:["Melee","Tokens"],additionalRoles:["Farming","Durable","Pusher"],expansion:"Wayward",description:"Mortimer is a battlefield controller who compensates for his limited mobility by commanding persistent zombie tokens that remain on the board between rounds.",attack:8,initiative:2,defence:7,movement:4},{id:24,name:"Widget and Pyro",icon:"heroes/widget.png",complexity:3,roles:["Melee","Tokens"],additionalRoles:["Damager"],expansion:"Wayward",description:"Widget is a kobold tactician who operates as a dual-unit fighter alongside her emotional support dragon, Pyro, allowing her to control two points on the battlefield simultaneously.",attack:5,initiative:4,defence:4,movement:5,movement_upgraded:6},{id:25,name:"Snorri",icon:"heroes/snorri.png",complexity:4,roles:["Sniper","Farming"],additionalRoles:["Durable","Damager","Pusher","Healer"],expansion:"Arcane",description:"Snorri is a traditional dwarf who wields the power of four distinct runes to transform how each of his cards functions.",attack:5,attack_upgraded:6,initiative:2,defence:5,defence_upgraded:6,movement:4,movement_upgraded:5},{id:26,name:"Razzle",icon:"heroes/razzle.png",complexity:4,roles:["Tactician","Melee"],expansion:"Arcane",description:"Razzle is a fractured fey who multiplies across the battlefield, controlling up to four separate copies of herself simultaneously.",attack:3,initiative:8,defence:1,defence_upgraded:4,movement:5,movement_upgraded:6},{id:27,name:"Gydion",icon:"heroes/gydion.png",complexity:4,roles:["Sniper","Tactician"],additionalRoles:["Farming","Damager","Pusher","Tokens"],expansion:"Arcane",description:"Gydion is an absent-minded archwizard who manages two separate handshis action cards and a unique spellbook deck. He prepares spells that are consumed upon casting, requiring careful resource management to maximize his arcane potential.",attack:5,attack_upgraded:6,initiative:3,defence:3,defence_upgraded:5,movement:1,movement_upgraded:4},{id:28,name:"Nebkher",icon:"heroes/nebkher.png",complexity:4,roles:["Disabler","Tokens"],additionalRoles:["Sniper"],expansion:"Defiant",description:"NebKher is a space-bending undead mastermind who manipulates both the battlefield and enemy minds with equal malevolence. His ability to copy enemy actions, create illusion tokens for strategic teleportation, and control minions transforms him into a terrifying disruptor.",attack:2,attack_upgraded:3,initiative:1,defence:5,defence_upgraded:6,movement:2,movement_upgraded:5},{id:29,name:"Ignatia",icon:"heroes/ignatia.png",complexity:4,roles:["Sniper","Damager"],additionalRoles:["Tokens","Tactician","Pusher"],expansion:"Renowned",description:"Ignatia is a dual-natured elementalist whose abilities shift dramatically based on which team controls the tiebreaker coin.",attack:5,initiative:2,defence:6,movement:4,movement_upgraded:5},{id:30,name:"Takahide",icon:"heroes/takahide.png",complexity:4,roles:["Durable","Sniper"],additionalRoles:["Tactician","Damager","Farming"],expansion:"Wayward",description:"Takahide is a masterful battlefield commander who cycles between three distinct combat styles.",attack:5,attack_upgraded:7,initiative:3,initiative_upgraded:5,defence:4,defence_upgraded:7,movement:1,movement_upgraded:4},{id:31,name:"Emmitt",icon:"heroes/emmitt.png",complexity:4,roles:["Melee","Tactician"],additionalRoles:["Durable","Disabler","Tokens"],expansion:"Wayward",description:"Emmitt is a chronological disruptor who bends the very rules of initiative, causing heroes with lower values to act before those with higher in a complete reversal of time's normal flow.",attack:5,attack_upgraded:8,initiative:1,defence:6,movement:2,movement_upgraded:4}],Hc=()=>["Core","Devoted","Defiant","Wayward","Renowned","Arcane"],yb=e=>qn.filter(n=>e.includes(n.expansion)),uB=Object.freeze(Object.defineProperty({__proto__:null,filterHeroesByExpansions:yb,getAllExpansions:Hc,heroes:qn},Symbol.toStringTag,{value:"Module"}));/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WR=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,r,s)=>s?s.toUpperCase():r.toLowerCase()),dB=e=>{const n=WR(e);return n.charAt(0).toUpperCase()+n.slice(1)},v3=(...e)=>e.filter((n,r,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===r).join(" ").trim(),VR=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=S.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...c},A)=>S.createElement("svg",{ref:A,...qR,width:n,height:n,stroke:e,strokeWidth:s?Number(r)*24/Number(n):r,className:v3("lucide",a),...!i&&!VR(c)&&{"aria-hidden":"true"},...c},[...o.map(([u,h])=>S.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(e,n)=>{const r=S.forwardRef(({className:s,...a},i)=>S.createElement(XR,{ref:i,iconNode:n,className:v3(`lucide-${GR(dB(e))}`,`lucide-${e}`,s),...a}));return r.displayName=dB(e),r};/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],U0=ye("arrow-down",YR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yx=ye("arrow-left",JR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hB=ye("arrow-right",ZR);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],I0=ye("arrow-up",e8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ad=ye("award",t8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],r8=ye("bell",n8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],a8=ye("book",s8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Yl=ye("bot",i8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Hr=ye("calendar",o8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],cl=ye("camera",l8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],A8=ye("chart-no-axes-column-increasing",c8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xn=ye("check",u8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Zn=ye("chevron-down",d8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h8=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],pn=ye("chevron-left",h8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ud=ye("chevron-right",f8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Nr=ye("chevron-up",g8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],la=ye("circle-alert",m8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]],y8=ye("circle-arrow-down",p8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]],x8=ye("circle-arrow-up",v8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Co=ye("circle-check-big",w8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],el=ye("circle-help",b8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],ea=ye("circle-minus",_8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],xi=ye("circle-plus",C8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],$s=ye("clock",B8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],k8=ye("cloud",S8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Ps=ye("coins",j8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],vx=ye("copy",N8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],zf=ye("database",E8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],P0=ye("download",T8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F8=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Kf=ye("eye-off",F8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kc=ye("eye",U8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],P8=ye("file-text",I8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q8=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],M8=ye("file",Q8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D8=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],uo=ye("funnel",D8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],zc=ye("globe",R8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $8=[["path",{d:"M11 12h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 14",key:"1j4xps"}],["path",{d:"m7 18 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"uospg8"}],["path",{d:"m2 13 6 6",key:"16e5sb"}]],x3=ye("hand-helping",$8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],vb=ye("heart",O8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],Q0=ye("hexagon",L8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H8=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],z8=ye("history",H8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K8=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],G8=ye("house",K8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W8=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],M0=ye("infinity",W8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Gt=ye("info",V8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q8=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],xx=ye("link",q8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X8=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],At=ye("loader-circle",X8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y8=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],J8=ye("loader",Y8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z8=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],e$=ye("lock",Z8);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],n$=ye("log-out",t$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r$=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],s$=ye("mail",r$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a$=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],fB=ye("medal",a$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"M5 12h14",key:"1ays0h"}]],Fi=ye("minus",i$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Kc=ye("network",o$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l$=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],xb=ye("play",l$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ka=ye("plus",c$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],zs=ye("refresh-cw",A$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Uu=ye("rotate-ccw",u$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],w3=ye("save",d$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Al=ye("search",h$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],g$=ye("send",f$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],p$=ye("settings",m$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Gc=ye("share-2",y$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],jt=ye("shield",v$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],wx=ye("shuffle",x$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],Ui=ye("skull",w$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],_$=ye("sparkles",b$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],B$=ye("square-check-big",C$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],k$=ye("square-pen",S$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],tl=ye("star",j$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]],b3=ye("sword",N$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],or=ye("swords",E$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],D0=ye("target",T$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],jc=ye("trash-2",F$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Os=ye("trending-up",U$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Aa=ye("triangle-alert",I$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],R0=ye("trophy",P$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],$0=ye("upload",Q$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],D$=ye("user-check",M$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],$$=ye("user-minus",R$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],_3=ye("user-plus",O$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ro=ye("user",L$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ht=ye("users",H$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],K$=ye("volume-2",z$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],W$=ye("volume-x",G$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],q$=ye("wifi-off",V$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],C3=ye("wifi",X$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bn=ye("x",Y$);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Z$=ye("zap",J$);function wb(){const[e,n]=S.useState({isMobile:!1,isTablet:!1,isDesktop:!0});return S.useEffect(()=>{const r=()=>{const s=window.innerWidth;n({isMobile:s<=768,isTablet:s>768&&s<=1024,isDesktop:s>1024})};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e}const qe=({text:e,children:n,position:r="top",className:s="",maxWidth:a="max-w-xs",disableMobileTooltip:i=!1})=>{const{isMobile:o}=wb(),[c,A]=S.useState(!1),[u,h]=S.useState(r),d=S.useRef(null),f=S.useRef(null),g=S.useRef(null),m=S.useCallback(()=>{if(!c||!f.current||!g.current)return;const w=f.current.getBoundingClientRect(),_=g.current.getBoundingClientRect(),C=window.innerWidth,k=window.innerHeight;let j=r;(r==="left"&&_.left<w.width+10||r==="right"&&_.right+w.width+10>C)&&(j=r==="left"?"right":"left"),(r==="top"&&_.top<w.height+10||r==="bottom"&&_.bottom+w.height+10>k)&&(j=r==="top"?"bottom":"top"),h(j)},[c,r]);S.useEffect(()=>{c&&setTimeout(m,0)},[c,m]);const y=S.useCallback(w=>{i||(w.stopPropagation(),A(!c))},[c,i]),x=S.useCallback(()=>{o||(d.current=setTimeout(()=>{A(!0)},300))},[o]),p=S.useCallback(()=>{o||(d.current&&clearTimeout(d.current),A(!1))},[o]);S.useEffect(()=>{if(!o||!c)return;const w=_=>{g.current&&!g.current.contains(_.target)&&A(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[o,c]);const v={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"},b={top:"top-full left-1/2 transform -translate-x-1/2 border-t-4 border-r-4 border-l-4 border-transparent border-t-gray-900",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-4 border-r-4 border-l-4 border-transparent border-b-gray-900",left:"left-full top-1/2 transform -translate-y-1/2 border-l-4 border-t-4 border-b-4 border-transparent border-l-gray-900",right:"right-full top-1/2 transform -translate-y-1/2 border-r-4 border-t-4 border-b-4 border-transparent border-r-gray-900"};return l.jsxs("div",{ref:g,className:`relative inline-block ${s}`,onMouseEnter:x,onMouseLeave:p,onClick:o&&!i?y:void 0,children:[n,c&&l.jsxs("div",{ref:f,className:`absolute z-50 px-3 py-2 text-sm bg-gray-900 text-white rounded shadow-lg w-auto min-w-[160px] ${v[u]} ${a}`,onClick:w=>o&&!i&&w.stopPropagation(),children:[e,l.jsx("div",{className:`absolute w-0 h-0 ${b[u]}`})]})]})};var ia={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(e){(function(){var n=function(){this.init()};n.prototype={init:function(){var d=this||r;return d._counter=1e3,d._html5AudioPool=[],d.html5PoolSize=10,d._codecs={},d._howls=[],d._muted=!1,d._volume=1,d._canPlayEvent="canplaythrough",d._navigator=typeof window<"u"&&window.navigator?window.navigator:null,d.masterGain=null,d.noAudio=!1,d.usingWebAudio=!0,d.autoSuspend=!0,d.ctx=null,d.autoUnlock=!0,d._setup(),d},volume:function(d){var f=this||r;if(d=parseFloat(d),f.ctx||h(),typeof d<"u"&&d>=0&&d<=1){if(f._volume=d,f._muted)return f;f.usingWebAudio&&f.masterGain.gain.setValueAtTime(d,r.ctx.currentTime);for(var g=0;g<f._howls.length;g++)if(!f._howls[g]._webAudio)for(var m=f._howls[g]._getSoundIds(),y=0;y<m.length;y++){var x=f._howls[g]._soundById(m[y]);x&&x._node&&(x._node.volume=x._volume*d)}return f}return f._volume},mute:function(d){var f=this||r;f.ctx||h(),f._muted=d,f.usingWebAudio&&f.masterGain.gain.setValueAtTime(d?0:f._volume,r.ctx.currentTime);for(var g=0;g<f._howls.length;g++)if(!f._howls[g]._webAudio)for(var m=f._howls[g]._getSoundIds(),y=0;y<m.length;y++){var x=f._howls[g]._soundById(m[y]);x&&x._node&&(x._node.muted=d?!0:x._muted)}return f},stop:function(){for(var d=this||r,f=0;f<d._howls.length;f++)d._howls[f].stop();return d},unload:function(){for(var d=this||r,f=d._howls.length-1;f>=0;f--)d._howls[f].unload();return d.usingWebAudio&&d.ctx&&typeof d.ctx.close<"u"&&(d.ctx.close(),d.ctx=null,h()),d},codecs:function(d){return(this||r)._codecs[d.replace(/^x-/,"")]},_setup:function(){var d=this||r;if(d.state=d.ctx&&d.ctx.state||"suspended",d._autoSuspend(),!d.usingWebAudio)if(typeof Audio<"u")try{var f=new Audio;typeof f.oncanplaythrough>"u"&&(d._canPlayEvent="canplay")}catch{d.noAudio=!0}else d.noAudio=!0;try{var f=new Audio;f.muted&&(d.noAudio=!0)}catch{}return d.noAudio||d._setupCodecs(),d},_setupCodecs:function(){var d=this||r,f=null;try{f=typeof Audio<"u"?new Audio:null}catch{return d}if(!f||typeof f.canPlayType!="function")return d;var g=f.canPlayType("audio/mpeg;").replace(/^no$/,""),m=d._navigator?d._navigator.userAgent:"",y=m.match(/OPR\/(\d+)/g),x=y&&parseInt(y[0].split("/")[1],10)<33,p=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,v=m.match(/Version\/(.*?) /),b=p&&v&&parseInt(v[1],10)<15;return d._codecs={mp3:!!(!x&&(g||f.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!g,opus:!!f.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!f.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(f.canPlayType('audio/wav; codecs="1"')||f.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!f.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!f.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(f.canPlayType("audio/x-m4a;")||f.canPlayType("audio/m4a;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(f.canPlayType("audio/x-m4b;")||f.canPlayType("audio/m4b;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(f.canPlayType("audio/x-mp4;")||f.canPlayType("audio/mp4;")||f.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&f.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!f.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(f.canPlayType("audio/x-flac;")||f.canPlayType("audio/flac;")).replace(/^no$/,"")},d},_unlockAudio:function(){var d=this||r;if(!(d._audioUnlocked||!d.ctx)){d._audioUnlocked=!1,d.autoUnlock=!1,!d._mobileUnloaded&&d.ctx.sampleRate!==44100&&(d._mobileUnloaded=!0,d.unload()),d._scratchBuffer=d.ctx.createBuffer(1,1,22050);var f=function(g){for(;d._html5AudioPool.length<d.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,d._releaseHtml5Audio(m)}catch{d.noAudio=!0;break}for(var y=0;y<d._howls.length;y++)if(!d._howls[y]._webAudio)for(var x=d._howls[y]._getSoundIds(),p=0;p<x.length;p++){var v=d._howls[y]._soundById(x[p]);v&&v._node&&!v._node._unlocked&&(v._node._unlocked=!0,v._node.load())}d._autoResume();var b=d.ctx.createBufferSource();b.buffer=d._scratchBuffer,b.connect(d.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof d.ctx.resume=="function"&&d.ctx.resume(),b.onended=function(){b.disconnect(0),d._audioUnlocked=!0,document.removeEventListener("touchstart",f,!0),document.removeEventListener("touchend",f,!0),document.removeEventListener("click",f,!0),document.removeEventListener("keydown",f,!0);for(var w=0;w<d._howls.length;w++)d._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",f,!0),document.addEventListener("touchend",f,!0),document.addEventListener("click",f,!0),document.addEventListener("keydown",f,!0),d}},_obtainHtml5Audio:function(){var d=this||r;if(d._html5AudioPool.length)return d._html5AudioPool.pop();var f=new Audio().play();return f&&typeof Promise<"u"&&(f instanceof Promise||typeof f.then=="function")&&f.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(d){var f=this||r;return d._unlocked&&f._html5AudioPool.push(d),f},_autoSuspend:function(){var d=this;if(!(!d.autoSuspend||!d.ctx||typeof d.ctx.suspend>"u"||!r.usingWebAudio)){for(var f=0;f<d._howls.length;f++)if(d._howls[f]._webAudio){for(var g=0;g<d._howls[f]._sounds.length;g++)if(!d._howls[f]._sounds[g]._paused)return d}return d._suspendTimer&&clearTimeout(d._suspendTimer),d._suspendTimer=setTimeout(function(){if(d.autoSuspend){d._suspendTimer=null,d.state="suspending";var m=function(){d.state="suspended",d._resumeAfterSuspend&&(delete d._resumeAfterSuspend,d._autoResume())};d.ctx.suspend().then(m,m)}},3e4),d}},_autoResume:function(){var d=this;if(!(!d.ctx||typeof d.ctx.resume>"u"||!r.usingWebAudio))return d.state==="running"&&d.ctx.state!=="interrupted"&&d._suspendTimer?(clearTimeout(d._suspendTimer),d._suspendTimer=null):d.state==="suspended"||d.state==="running"&&d.ctx.state==="interrupted"?(d.ctx.resume().then(function(){d.state="running";for(var f=0;f<d._howls.length;f++)d._howls[f]._emit("resume")}),d._suspendTimer&&(clearTimeout(d._suspendTimer),d._suspendTimer=null)):d.state==="suspending"&&(d._resumeAfterSuspend=!0),d}};var r=new n,s=function(d){var f=this;if(!d.src||d.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}f.init(d)};s.prototype={init:function(d){var f=this;return r.ctx||h(),f._autoplay=d.autoplay||!1,f._format=typeof d.format!="string"?d.format:[d.format],f._html5=d.html5||!1,f._muted=d.mute||!1,f._loop=d.loop||!1,f._pool=d.pool||5,f._preload=typeof d.preload=="boolean"||d.preload==="metadata"?d.preload:!0,f._rate=d.rate||1,f._sprite=d.sprite||{},f._src=typeof d.src!="string"?d.src:[d.src],f._volume=d.volume!==void 0?d.volume:1,f._xhr={method:d.xhr&&d.xhr.method?d.xhr.method:"GET",headers:d.xhr&&d.xhr.headers?d.xhr.headers:null,withCredentials:d.xhr&&d.xhr.withCredentials?d.xhr.withCredentials:!1},f._duration=0,f._state="unloaded",f._sounds=[],f._endTimers={},f._queue=[],f._playLock=!1,f._onend=d.onend?[{fn:d.onend}]:[],f._onfade=d.onfade?[{fn:d.onfade}]:[],f._onload=d.onload?[{fn:d.onload}]:[],f._onloaderror=d.onloaderror?[{fn:d.onloaderror}]:[],f._onplayerror=d.onplayerror?[{fn:d.onplayerror}]:[],f._onpause=d.onpause?[{fn:d.onpause}]:[],f._onplay=d.onplay?[{fn:d.onplay}]:[],f._onstop=d.onstop?[{fn:d.onstop}]:[],f._onmute=d.onmute?[{fn:d.onmute}]:[],f._onvolume=d.onvolume?[{fn:d.onvolume}]:[],f._onrate=d.onrate?[{fn:d.onrate}]:[],f._onseek=d.onseek?[{fn:d.onseek}]:[],f._onunlock=d.onunlock?[{fn:d.onunlock}]:[],f._onresume=[],f._webAudio=r.usingWebAudio&&!f._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(f),f._autoplay&&f._queue.push({event:"play",action:function(){f.play()}}),f._preload&&f._preload!=="none"&&f.load(),f},load:function(){var d=this,f=null;if(r.noAudio){d._emit("loaderror",null,"No audio support.");return}typeof d._src=="string"&&(d._src=[d._src]);for(var g=0;g<d._src.length;g++){var m,y;if(d._format&&d._format[g])m=d._format[g];else{if(y=d._src[g],typeof y!="string"){d._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(y),m||(m=/\.([^.]+)$/.exec(y.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&r.codecs(m)){f=d._src[g];break}}if(!f){d._emit("loaderror",null,"No codec support for selected audio sources.");return}return d._src=f,d._state="loading",window.location.protocol==="https:"&&f.slice(0,5)==="http:"&&(d._html5=!0,d._webAudio=!1),new a(d),d._webAudio&&o(d),d},play:function(d,f){var g=this,m=null;if(typeof d=="number")m=d,d=null;else{if(typeof d=="string"&&g._state==="loaded"&&!g._sprite[d])return null;if(typeof d>"u"&&(d="__default",!g._playLock)){for(var y=0,x=0;x<g._sounds.length;x++)g._sounds[x]._paused&&!g._sounds[x]._ended&&(y++,m=g._sounds[x]._id);y===1?d=null:m=null}}var p=m?g._soundById(m):g._inactiveSound();if(!p)return null;if(m&&!d&&(d=p._sprite||"__default"),g._state!=="loaded"){p._sprite=d,p._ended=!1;var v=p._id;return g._queue.push({event:"play",action:function(){g.play(v)}}),v}if(m&&!p._paused)return f||g._loadQueue("play"),p._id;g._webAudio&&r._autoResume();var b=Math.max(0,p._seek>0?p._seek:g._sprite[d][0]/1e3),w=Math.max(0,(g._sprite[d][0]+g._sprite[d][1])/1e3-b),_=w*1e3/Math.abs(p._rate),C=g._sprite[d][0]/1e3,k=(g._sprite[d][0]+g._sprite[d][1])/1e3;p._sprite=d,p._ended=!1;var j=function(){p._paused=!1,p._seek=b,p._start=C,p._stop=k,p._loop=!!(p._loop||g._sprite[d][2])};if(b>=k){g._ended(p);return}var B=p._node;if(g._webAudio){var E=function(){g._playLock=!1,j(),g._refreshBuffer(p);var N=p._muted||g._muted?0:p._volume;B.gain.setValueAtTime(N,r.ctx.currentTime),p._playStart=r.ctx.currentTime,typeof B.bufferSource.start>"u"?p._loop?B.bufferSource.noteGrainOn(0,b,86400):B.bufferSource.noteGrainOn(0,b,w):p._loop?B.bufferSource.start(0,b,86400):B.bufferSource.start(0,b,w),_!==1/0&&(g._endTimers[p._id]=setTimeout(g._ended.bind(g,p),_)),f||setTimeout(function(){g._emit("play",p._id),g._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?E():(g._playLock=!0,g.once("resume",E),g._clearTimer(p._id))}else{var P=function(){B.currentTime=b,B.muted=p._muted||g._muted||r._muted||B.muted,B.volume=p._volume*r.volume(),B.playbackRate=p._rate;try{var N=B.play();if(N&&typeof Promise<"u"&&(N instanceof Promise||typeof N.then=="function")?(g._playLock=!0,j(),N.then(function(){g._playLock=!1,B._unlocked=!0,f?g._loadQueue():g._emit("play",p._id)}).catch(function(){g._playLock=!1,g._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):f||(g._playLock=!1,j(),g._emit("play",p._id)),B.playbackRate=p._rate,B.paused){g._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}d!=="__default"||p._loop?g._endTimers[p._id]=setTimeout(g._ended.bind(g,p),_):(g._endTimers[p._id]=function(){g._ended(p),B.removeEventListener("ended",g._endTimers[p._id],!1)},B.addEventListener("ended",g._endTimers[p._id],!1))}catch(D){g._emit("playerror",p._id,D)}};B.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(B.src=g._src,B.load());var I=window&&window.ejecta||!B.readyState&&r._navigator.isCocoonJS;if(B.readyState>=3||I)P();else{g._playLock=!0,g._state="loading";var U=function(){g._state="loaded",P(),B.removeEventListener(r._canPlayEvent,U,!1)};B.addEventListener(r._canPlayEvent,U,!1),g._clearTimer(p._id)}}return p._id},pause:function(d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"pause",action:function(){f.pause(d)}}),f;for(var g=f._getSoundIds(d),m=0;m<g.length;m++){f._clearTimer(g[m]);var y=f._soundById(g[m]);if(y&&!y._paused&&(y._seek=f.seek(g[m]),y._rateSeek=0,y._paused=!0,f._stopFade(g[m]),y._node))if(f._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),f._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||f._emit("pause",y?y._id:null)}return f},stop:function(d,f){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"stop",action:function(){g.stop(d)}}),g;for(var m=g._getSoundIds(d),y=0;y<m.length;y++){g._clearTimer(m[y]);var x=g._soundById(m[y]);x&&(x._seek=x._start||0,x._rateSeek=0,x._paused=!0,x._ended=!0,g._stopFade(m[y]),x._node&&(g._webAudio?x._node.bufferSource&&(typeof x._node.bufferSource.stop>"u"?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0),g._cleanBuffer(x._node)):(!isNaN(x._node.duration)||x._node.duration===1/0)&&(x._node.currentTime=x._start||0,x._node.pause(),x._node.duration===1/0&&g._clearSound(x._node))),f||g._emit("stop",x._id))}return g},mute:function(d,f){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"mute",action:function(){g.mute(d,f)}}),g;if(typeof f>"u")if(typeof d=="boolean")g._muted=d;else return g._muted;for(var m=g._getSoundIds(f),y=0;y<m.length;y++){var x=g._soundById(m[y]);x&&(x._muted=d,x._interval&&g._stopFade(x._id),g._webAudio&&x._node?x._node.gain.setValueAtTime(d?0:x._volume,r.ctx.currentTime):x._node&&(x._node.muted=r._muted?!0:d),g._emit("mute",x._id))}return g},volume:function(){var d=this,f=arguments,g,m;if(f.length===0)return d._volume;if(f.length===1||f.length===2&&typeof f[1]>"u"){var y=d._getSoundIds(),x=y.indexOf(f[0]);x>=0?m=parseInt(f[0],10):g=parseFloat(f[0])}else f.length>=2&&(g=parseFloat(f[0]),m=parseInt(f[1],10));var p;if(typeof g<"u"&&g>=0&&g<=1){if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"volume",action:function(){d.volume.apply(d,f)}}),d;typeof m>"u"&&(d._volume=g),m=d._getSoundIds(m);for(var v=0;v<m.length;v++)p=d._soundById(m[v]),p&&(p._volume=g,f[2]||d._stopFade(m[v]),d._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(g,r.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=g*r.volume()),d._emit("volume",p._id))}else return p=m?d._soundById(m):d._sounds[0],p?p._volume:0;return d},fade:function(d,f,g,m){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(d,f,g,m)}}),y;d=Math.min(Math.max(0,parseFloat(d)),1),f=Math.min(Math.max(0,parseFloat(f)),1),g=parseFloat(g),y.volume(d,m);for(var x=y._getSoundIds(m),p=0;p<x.length;p++){var v=y._soundById(x[p]);if(v){if(m||y._stopFade(x[p]),y._webAudio&&!v._muted){var b=r.ctx.currentTime,w=b+g/1e3;v._volume=d,v._node.gain.setValueAtTime(d,b),v._node.gain.linearRampToValueAtTime(f,w)}y._startFadeInterval(v,d,f,g,x[p],typeof m>"u")}}return y},_startFadeInterval:function(d,f,g,m,y,x){var p=this,v=f,b=g-f,w=Math.abs(b/.01),_=Math.max(4,w>0?m/w:m),C=Date.now();d._fadeTo=g,d._interval=setInterval(function(){var k=(Date.now()-C)/m;C=Date.now(),v+=b*k,v=Math.round(v*100)/100,b<0?v=Math.max(g,v):v=Math.min(g,v),p._webAudio?d._volume=v:p.volume(v,d._id,!0),x&&(p._volume=v),(g<f&&v<=g||g>f&&v>=g)&&(clearInterval(d._interval),d._interval=null,d._fadeTo=null,p.volume(g,d._id),p._emit("fade",d._id))},_)},_stopFade:function(d){var f=this,g=f._soundById(d);return g&&g._interval&&(f._webAudio&&g._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(g._interval),g._interval=null,f.volume(g._fadeTo,d),g._fadeTo=null,f._emit("fade",d)),f},loop:function(){var d=this,f=arguments,g,m,y;if(f.length===0)return d._loop;if(f.length===1)if(typeof f[0]=="boolean")g=f[0],d._loop=g;else return y=d._soundById(parseInt(f[0],10)),y?y._loop:!1;else f.length===2&&(g=f[0],m=parseInt(f[1],10));for(var x=d._getSoundIds(m),p=0;p<x.length;p++)y=d._soundById(x[p]),y&&(y._loop=g,d._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=g,g&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,d.playing(x[p])&&(d.pause(x[p],!0),d.play(x[p],!0)))));return d},rate:function(){var d=this,f=arguments,g,m;if(f.length===0)m=d._sounds[0]._id;else if(f.length===1){var y=d._getSoundIds(),x=y.indexOf(f[0]);x>=0?m=parseInt(f[0],10):g=parseFloat(f[0])}else f.length===2&&(g=parseFloat(f[0]),m=parseInt(f[1],10));var p;if(typeof g=="number"){if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"rate",action:function(){d.rate.apply(d,f)}}),d;typeof m>"u"&&(d._rate=g),m=d._getSoundIds(m);for(var v=0;v<m.length;v++)if(p=d._soundById(m[v]),p){d.playing(m[v])&&(p._rateSeek=d.seek(m[v]),p._playStart=d._webAudio?r.ctx.currentTime:p._playStart),p._rate=g,d._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(g,r.ctx.currentTime):p._node&&(p._node.playbackRate=g);var b=d.seek(m[v]),w=(d._sprite[p._sprite][0]+d._sprite[p._sprite][1])/1e3-b,_=w*1e3/Math.abs(p._rate);(d._endTimers[m[v]]||!p._paused)&&(d._clearTimer(m[v]),d._endTimers[m[v]]=setTimeout(d._ended.bind(d,p),_)),d._emit("rate",p._id)}}else return p=d._soundById(m),p?p._rate:d._rate;return d},seek:function(){var d=this,f=arguments,g,m;if(f.length===0)d._sounds.length&&(m=d._sounds[0]._id);else if(f.length===1){var y=d._getSoundIds(),x=y.indexOf(f[0]);x>=0?m=parseInt(f[0],10):d._sounds.length&&(m=d._sounds[0]._id,g=parseFloat(f[0]))}else f.length===2&&(g=parseFloat(f[0]),m=parseInt(f[1],10));if(typeof m>"u")return 0;if(typeof g=="number"&&(d._state!=="loaded"||d._playLock))return d._queue.push({event:"seek",action:function(){d.seek.apply(d,f)}}),d;var p=d._soundById(m);if(p)if(typeof g=="number"&&g>=0){var v=d.playing(m);v&&d.pause(m,!0),p._seek=g,p._ended=!1,d._clearTimer(m),!d._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=g);var b=function(){v&&d.play(m,!0),d._emit("seek",m)};if(v&&!d._webAudio){var w=function(){d._playLock?setTimeout(w,0):b()};setTimeout(w,0)}else b()}else if(d._webAudio){var _=d.playing(m)?r.ctx.currentTime-p._playStart:0,C=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(C+_*Math.abs(p._rate))}else return p._node.currentTime;return d},playing:function(d){var f=this;if(typeof d=="number"){var g=f._soundById(d);return g?!g._paused:!1}for(var m=0;m<f._sounds.length;m++)if(!f._sounds[m]._paused)return!0;return!1},duration:function(d){var f=this,g=f._duration,m=f._soundById(d);return m&&(g=f._sprite[m._sprite][1]/1e3),g},state:function(){return this._state},unload:function(){for(var d=this,f=d._sounds,g=0;g<f.length;g++)f[g]._paused||d.stop(f[g]._id),d._webAudio||(d._clearSound(f[g]._node),f[g]._node.removeEventListener("error",f[g]._errorFn,!1),f[g]._node.removeEventListener(r._canPlayEvent,f[g]._loadFn,!1),f[g]._node.removeEventListener("ended",f[g]._endFn,!1),r._releaseHtml5Audio(f[g]._node)),delete f[g]._node,d._clearTimer(f[g]._id);var m=r._howls.indexOf(d);m>=0&&r._howls.splice(m,1);var y=!0;for(g=0;g<r._howls.length;g++)if(r._howls[g]._src===d._src||d._src.indexOf(r._howls[g]._src)>=0){y=!1;break}return i&&y&&delete i[d._src],r.noAudio=!1,d._state="unloaded",d._sounds=[],d=null,null},on:function(d,f,g,m){var y=this,x=y["_on"+d];return typeof f=="function"&&x.push(m?{id:g,fn:f,once:m}:{id:g,fn:f}),y},off:function(d,f,g){var m=this,y=m["_on"+d],x=0;if(typeof f=="number"&&(g=f,f=null),f||g)for(x=0;x<y.length;x++){var p=g===y[x].id;if(f===y[x].fn&&p||!f&&p){y.splice(x,1);break}}else if(d)m["_on"+d]=[];else{var v=Object.keys(m);for(x=0;x<v.length;x++)v[x].indexOf("_on")===0&&Array.isArray(m[v[x]])&&(m[v[x]]=[])}return m},once:function(d,f,g){var m=this;return m.on(d,f,g,1),m},_emit:function(d,f,g){for(var m=this,y=m["_on"+d],x=y.length-1;x>=0;x--)(!y[x].id||y[x].id===f||d==="load")&&(setTimeout((function(p){p.call(this,f,g)}).bind(m,y[x].fn),0),y[x].once&&m.off(d,y[x].fn,y[x].id));return m._loadQueue(d),m},_loadQueue:function(d){var f=this;if(f._queue.length>0){var g=f._queue[0];g.event===d&&(f._queue.shift(),f._loadQueue()),d||g.action()}return f},_ended:function(d){var f=this,g=d._sprite;if(!f._webAudio&&d._node&&!d._node.paused&&!d._node.ended&&d._node.currentTime<d._stop)return setTimeout(f._ended.bind(f,d),100),f;var m=!!(d._loop||f._sprite[g][2]);if(f._emit("end",d._id),!f._webAudio&&m&&f.stop(d._id,!0).play(d._id),f._webAudio&&m){f._emit("play",d._id),d._seek=d._start||0,d._rateSeek=0,d._playStart=r.ctx.currentTime;var y=(d._stop-d._start)*1e3/Math.abs(d._rate);f._endTimers[d._id]=setTimeout(f._ended.bind(f,d),y)}return f._webAudio&&!m&&(d._paused=!0,d._ended=!0,d._seek=d._start||0,d._rateSeek=0,f._clearTimer(d._id),f._cleanBuffer(d._node),r._autoSuspend()),!f._webAudio&&!m&&f.stop(d._id,!0),f},_clearTimer:function(d){var f=this;if(f._endTimers[d]){if(typeof f._endTimers[d]!="function")clearTimeout(f._endTimers[d]);else{var g=f._soundById(d);g&&g._node&&g._node.removeEventListener("ended",f._endTimers[d],!1)}delete f._endTimers[d]}return f},_soundById:function(d){for(var f=this,g=0;g<f._sounds.length;g++)if(d===f._sounds[g]._id)return f._sounds[g];return null},_inactiveSound:function(){var d=this;d._drain();for(var f=0;f<d._sounds.length;f++)if(d._sounds[f]._ended)return d._sounds[f].reset();return new a(d)},_drain:function(){var d=this,f=d._pool,g=0,m=0;if(!(d._sounds.length<f)){for(m=0;m<d._sounds.length;m++)d._sounds[m]._ended&&g++;for(m=d._sounds.length-1;m>=0;m--){if(g<=f)return;d._sounds[m]._ended&&(d._webAudio&&d._sounds[m]._node&&d._sounds[m]._node.disconnect(0),d._sounds.splice(m,1),g--)}}},_getSoundIds:function(d){var f=this;if(typeof d>"u"){for(var g=[],m=0;m<f._sounds.length;m++)g.push(f._sounds[m]._id);return g}else return[d]},_refreshBuffer:function(d){var f=this;return d._node.bufferSource=r.ctx.createBufferSource(),d._node.bufferSource.buffer=i[f._src],d._panner?d._node.bufferSource.connect(d._panner):d._node.bufferSource.connect(d._node),d._node.bufferSource.loop=d._loop,d._loop&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop||0),d._node.bufferSource.playbackRate.setValueAtTime(d._rate,r.ctx.currentTime),f},_cleanBuffer:function(d){var f=this,g=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(!d.bufferSource)return f;if(r._scratchBuffer&&d.bufferSource&&(d.bufferSource.onended=null,d.bufferSource.disconnect(0),g))try{d.bufferSource.buffer=r._scratchBuffer}catch{}return d.bufferSource=null,f},_clearSound:function(d){var f=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);f||(d.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(d){this._parent=d,this.init()};a.prototype={init:function(){var d=this,f=d._parent;return d._muted=f._muted,d._loop=f._loop,d._volume=f._volume,d._rate=f._rate,d._seek=0,d._paused=!0,d._ended=!0,d._sprite="__default",d._id=++r._counter,f._sounds.push(d),d.create(),d},create:function(){var d=this,f=d._parent,g=r._muted||d._muted||d._parent._muted?0:d._volume;return f._webAudio?(d._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),d._node.gain.setValueAtTime(g,r.ctx.currentTime),d._node.paused=!0,d._node.connect(r.masterGain)):r.noAudio||(d._node=r._obtainHtml5Audio(),d._errorFn=d._errorListener.bind(d),d._node.addEventListener("error",d._errorFn,!1),d._loadFn=d._loadListener.bind(d),d._node.addEventListener(r._canPlayEvent,d._loadFn,!1),d._endFn=d._endListener.bind(d),d._node.addEventListener("ended",d._endFn,!1),d._node.src=f._src,d._node.preload=f._preload===!0?"auto":f._preload,d._node.volume=g*r.volume(),d._node.load()),d},reset:function(){var d=this,f=d._parent;return d._muted=f._muted,d._loop=f._loop,d._volume=f._volume,d._rate=f._rate,d._seek=0,d._rateSeek=0,d._paused=!0,d._ended=!0,d._sprite="__default",d._id=++r._counter,d},_errorListener:function(){var d=this;d._parent._emit("loaderror",d._id,d._node.error?d._node.error.code:0),d._node.removeEventListener("error",d._errorFn,!1)},_loadListener:function(){var d=this,f=d._parent;f._duration=Math.ceil(d._node.duration*10)/10,Object.keys(f._sprite).length===0&&(f._sprite={__default:[0,f._duration*1e3]}),f._state!=="loaded"&&(f._state="loaded",f._emit("load"),f._loadQueue()),d._node.removeEventListener(r._canPlayEvent,d._loadFn,!1)},_endListener:function(){var d=this,f=d._parent;f._duration===1/0&&(f._duration=Math.ceil(d._node.duration*10)/10,f._sprite.__default[1]===1/0&&(f._sprite.__default[1]=f._duration*1e3),f._ended(d)),d._node.removeEventListener("ended",d._endFn,!1)}};var i={},o=function(d){var f=d._src;if(i[f]){d._duration=i[f].duration,u(d);return}if(/^data:[^;]+;base64,/.test(f)){for(var g=atob(f.split(",")[1]),m=new Uint8Array(g.length),y=0;y<g.length;++y)m[y]=g.charCodeAt(y);A(m.buffer,d)}else{var x=new XMLHttpRequest;x.open(d._xhr.method,f,!0),x.withCredentials=d._xhr.withCredentials,x.responseType="arraybuffer",d._xhr.headers&&Object.keys(d._xhr.headers).forEach(function(p){x.setRequestHeader(p,d._xhr.headers[p])}),x.onload=function(){var p=(x.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){d._emit("loaderror",null,"Failed loading audio file with status: "+x.status+".");return}A(x.response,d)},x.onerror=function(){d._webAudio&&(d._html5=!0,d._webAudio=!1,d._sounds=[],delete i[f],d.load())},c(x)}},c=function(d){try{d.send()}catch{d.onerror()}},A=function(d,f){var g=function(){f._emit("loaderror",null,"Decoding audio data failed.")},m=function(y){y&&f._sounds.length>0?(i[f._src]=y,u(f,y)):g()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(d).then(m).catch(g):r.ctx.decodeAudioData(d,m,g)},u=function(d,f){f&&!d._duration&&(d._duration=f.duration),Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue())},h=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var d=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),f=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),g=f?parseInt(f[1],10):null;if(d&&g&&g<9){var m=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!m&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};e.Howler=r,e.Howl=s,typeof za<"u"?(za.HowlerGlobal=n,za.Howler=r,za.Howl=s,za.Sound=a):typeof window<"u"&&(window.HowlerGlobal=n,window.Howler=r,window.Howl=s,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var a=s._howls.length-1;a>=0;a--)s._howls[a].stereo(r);return s},HowlerGlobal.prototype.pos=function(r,s,a){var i=this;if(!i.ctx||!i.ctx.listener)return i;if(s=typeof s!="number"?i._pos[1]:s,a=typeof a!="number"?i._pos[2]:a,typeof r=="number")i._pos=[r,s,a],typeof i.ctx.listener.positionX<"u"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]);else return i._pos;return i},HowlerGlobal.prototype.orientation=function(r,s,a,i,o,c){var A=this;if(!A.ctx||!A.ctx.listener)return A;var u=A._orientation;if(s=typeof s!="number"?u[1]:s,a=typeof a!="number"?u[2]:a,i=typeof i!="number"?u[3]:i,o=typeof o!="number"?u[4]:o,c=typeof c!="number"?u[5]:c,typeof r=="number")A._orientation=[r,s,a,i,o,c],typeof A.ctx.listener.forwardX<"u"?(A.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),A.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),A.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),A.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),A.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),A.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):A.ctx.listener.setOrientation(r,s,a,i,o,c);else return u;return A},Howl.prototype.init=function(r){return function(s){var a=this;return a._orientation=s.orientation||[1,0,0],a._stereo=s.stereo||null,a._pos=s.pos||null,a._pannerAttr={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:360,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:360,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:0,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:"inverse",maxDistance:typeof s.maxDistance<"u"?s.maxDistance:1e4,panningModel:typeof s.panningModel<"u"?s.panningModel:"HRTF",refDistance:typeof s.refDistance<"u"?s.refDistance:1,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:1},a._onstereo=s.onstereo?[{fn:s.onstereo}]:[],a._onpos=s.onpos?[{fn:s.onpos}]:[],a._onorientation=s.onorientation?[{fn:s.onorientation}]:[],r.call(this,s)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(r,s)}}),a;var i=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof s>"u")if(typeof r=="number")a._stereo=r,a._pos=[r,0,0];else return a._stereo;for(var o=a._getSoundIds(s),c=0;c<o.length;c++){var A=a._soundById(o[c]);if(A)if(typeof r=="number")A._stereo=r,A._pos=[r,0,0],A._node&&(A._pannerAttr.panningModel="equalpower",(!A._panner||!A._panner.pan)&&n(A,i),i==="spatial"?typeof A._panner.positionX<"u"?(A._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),A._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),A._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):A._panner.setPosition(r,0,0):A._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),a._emit("stereo",A._id);else return A._stereo}return a},Howl.prototype.pos=function(r,s,a,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(r,s,a,i)}}),o;if(s=typeof s!="number"?0:s,a=typeof a!="number"?-.5:a,typeof i>"u")if(typeof r=="number")o._pos=[r,s,a];else return o._pos;for(var c=o._getSoundIds(i),A=0;A<c.length;A++){var u=o._soundById(c[A]);if(u)if(typeof r=="number")u._pos=[r,s,a],u._node&&((!u._panner||u._panner.pan)&&n(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):u._panner.setPosition(r,s,a)),o._emit("pos",u._id);else return u._pos}return o},Howl.prototype.orientation=function(r,s,a,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(r,s,a,i)}}),o;if(s=typeof s!="number"?o._orientation[1]:s,a=typeof a!="number"?o._orientation[2]:a,typeof i>"u")if(typeof r=="number")o._orientation=[r,s,a];else return o._orientation;for(var c=o._getSoundIds(i),A=0;A<c.length;A++){var u=o._soundById(c[A]);if(u)if(typeof r=="number")u._orientation=[r,s,a],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),n(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):u._panner.setOrientation(r,s,a)),o._emit("orientation",u._id);else return u._orientation}return o},Howl.prototype.pannerAttr=function(){var r=this,s=arguments,a,i,o;if(!r._webAudio)return r;if(s.length===0)return r._pannerAttr;if(s.length===1)if(typeof s[0]=="object")a=s[0],typeof i>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),r._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:r._panningModel});else return o=r._soundById(parseInt(s[0],10)),o?o._pannerAttr:r._pannerAttr;else s.length===2&&(a=s[0],i=parseInt(s[1],10));for(var c=r._getSoundIds(i),A=0;A<c.length;A++)if(o=r._soundById(c[A]),o){var u=o._pannerAttr;u={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:u.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:u.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:u.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:u.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:u.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:u.panningModel};var h=o._panner;h||(o._pos||(o._pos=r._pos||[0,0,-.5]),n(o,"spatial"),h=o._panner),h.coneInnerAngle=u.coneInnerAngle,h.coneOuterAngle=u.coneOuterAngle,h.coneOuterGain=u.coneOuterGain,h.distanceModel=u.distanceModel,h.maxDistance=u.maxDistance,h.refDistance=u.refDistance,h.rolloffFactor=u.rolloffFactor,h.panningModel=u.panningModel}return r},Sound.prototype.init=function(r){return function(){var s=this,a=s._parent;s._orientation=a._orientation,s._stereo=a._stereo,s._pos=a._pos,s._pannerAttr=a._pannerAttr,r.call(this),s._stereo?a.stereo(s._stereo):s._pos&&a.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var s=this,a=s._parent;return s._orientation=a._orientation,s._stereo=a._stereo,s._pos=a._pos,s._pannerAttr=a._pannerAttr,s._stereo?a.stereo(s._stereo):s._pos?a.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,a._refreshBuffer(s)),r.call(this)}}(Sound.prototype.reset);var n=function(r,s){s=s||"spatial",s==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}})()})(ia);const B3=S.createContext({isSoundEnabled:!0,toggleSound:()=>{},playSound:()=>{},unlockAudio:()=>{},isAudioReady:!1}),eO=()=>typeof import.meta<"u"&&{VITE_SUPABASE_URL:"https://vldqocgemjqtmjvxhozj.supabase.co",VITE_SUPABASE_ANON_KEY:"sb_publishable_doGcbZ1R6TOC1hBHRFu2BA_zzBpPiSZ",BASE_URL:"/GoA-Timer/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}?"/GoA-Timer/":"",Tr=eO(),Rh={buttonClick:`${Tr}sounds/ui/button-click.mp3`,timerWarning:`${Tr}sounds/timer/timer-warning.mp3`,timerComplete:`${Tr}sounds/timer/timer-complete.mp3`,timerTick:`${Tr}sounds/timer/timer-tick.mp3`,heroSelect:`${Tr}sounds/game/hero-select.mp3`,heroBan:`${Tr}sounds/game/hero-ban.mp3`,coinFlip:`${Tr}sounds/game/coin-flip.mp3`,victory:`${Tr}sounds/victory/victory.mp3`,phaseChange:`${Tr}sounds/game/phase-change.mp3`,turnStart:`${Tr}sounds/game/turn-start.mp3`,turnComplete:`${Tr}sounds/game/turn-complete.mp3`,lifeChange:`${Tr}sounds/game/life-change.mp3`,toggleSwitch:`${Tr}sounds/ui/toggle-switch.mp3`},Nl={},tO=({children:e})=>{const[n,r]=S.useState(()=>{const A=localStorage.getItem("atlantis-sound-enabled");return A!==null?A==="true":!0}),[s,a]=S.useState(!1),i=()=>{console.log("Attempting to unlock audio context..."),ia.Howler.ctx&&ia.Howler.ctx.state!=="running"?ia.Howler.ctx.resume().then(()=>{console.log("AudioContext resumed successfully!"),a(!0),new ia.Howl({src:[Rh.buttonClick],volume:.01}).play()}).catch(A=>{console.error("Failed to resume AudioContext:",A)}):(console.log("AudioContext already running or not available"),a(!0))};S.useEffect(()=>(s&&(console.log("Audio is ready, preloading essential sounds"),["buttonClick","timerComplete","heroSelect","timerTick"].forEach(u=>{Nl[u]||(console.log(`Preloading sound: ${u}`),Nl[u]=new ia.Howl({src:[Rh[u]],preload:!0,volume:u==="timerTick"?.2:.5,onload:()=>console.log(`Successfully loaded: ${u}`),onloaderror:h=>console.error(`Error loading ${u}:`,h)}))})),()=>{console.log("Cleaning up sound cache"),Object.values(Nl).forEach(A=>A.unload())}),[s]),S.useEffect(()=>{localStorage.setItem("atlantis-sound-enabled",n.toString())},[n]);const o=()=>{r(A=>!A)},c=A=>{if(console.log(`Attempting to play sound: ${A}`),!n){console.log("Sound is disabled, not playing");return}if(!s){console.log("Audio context not ready, trying to unlock..."),i();return}if(Nl[A]){console.log(`Playing cached sound: ${A}`),Nl[A].play();return}console.log(`Loading new sound: ${A} from ${Rh[A]}`);try{const u=new ia.Howl({src:[Rh[A]],volume:A==="timerTick"?.2:.5,onload:()=>console.log(`Successfully loaded: ${A}`),onloaderror:h=>console.error(`Error loading ${A}:`,h),onplay:()=>console.log(`Started playing: ${A}`),onplayerror:h=>console.error(`Error playing ${A}:`,h)});Nl[A]=u,u.play()}catch(u){console.error(`Exception when trying to play ${A}:`,u)}};return l.jsx(B3.Provider,{value:{isSoundEnabled:n,toggleSound:o,playSound:c,unlockAudio:i,isAudioReady:s},children:e})},it=()=>S.useContext(B3),gB=({value:e,onChange:n,tooltip:r,minValue:s=10,maxValue:a=600,step:i=10,disabled:o=!1})=>{const[c,A]=S.useState(h(e)),{playSound:u}=it();function h(x){const p=Math.floor(x/60),v=x%60;return`${p}:${v.toString().padStart(2,"0")}`}function d(x){if(!x.trim())return e;const p=x.split(":");if(p.length===2){const b=parseInt(p[0],10),w=parseInt(p[1],10);if(!isNaN(b)&&!isNaN(w))return Math.min(a,Math.max(s,b*60+w))}const v=parseInt(x,10);return isNaN(v)?e:Math.min(a,Math.max(s,v))}const f=x=>{if(o)return;u("buttonClick");const p=Math.min(a,Math.max(s,e+x));n(p)};S.useEffect(()=>{A(h(e))},[e]);const g=x=>{o||A(x.target.value)},m=()=>{if(o)return;u("buttonClick");const x=d(c);n(x),A(h(x))},y=x=>{if(!o&&x.key==="Enter"){u("buttonClick");const p=d(c);n(p),A(h(p)),x.currentTarget.blur()}};return l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"flex",children:[l.jsx("input",{type:"text",value:c,onChange:g,onBlur:m,onKeyDown:y,className:`w-20 bg-gray-700 text-center text-xl font-mono py-2 px-3 rounded-l-md border border-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o?"cursor-not-allowed opacity-60":""}`,"aria-label":"Timer duration",disabled:o}),l.jsxs("div",{className:"flex flex-col border-y border-r border-gray-600 rounded-r-md",children:[l.jsx("button",{className:`bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded-tr-md border-b border-gray-600 ${o?"cursor-not-allowed opacity-60":""}`,onClick:()=>f(i),"aria-label":"Increase time",disabled:o,children:l.jsx(Nr,{size:16})}),l.jsx("button",{className:`bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded-br-md ${o?"cursor-not-allowed opacity-60":""}`,onClick:()=>f(-i),"aria-label":"Decrease time",disabled:o,children:l.jsx(Zn,{size:16})})]}),l.jsx(qe,{text:r,position:"right",maxWidth:"max-w-xs",children:l.jsx("div",{className:"ml-2 cursor-help",children:l.jsx(Gt,{size:18,className:"text-gray-400 hover:text-gray-200"})})})]})})},S3=({player:e,onNameChange:n,onRemove:r,isDuplicate:s=!1,suggestedNames:a=[],disableRemove:i=!1,autoFocus:o=!1})=>{const{playSound:c}=it(),[A,u]=S.useState(e.name),[h,d]=S.useState(!1),[f,g]=S.useState([]),[m,y]=S.useState(!1),[x,p]=S.useState(-1),v=S.useRef(null),b=S.useRef(null),w=S.useId();S.useEffect(()=>{u(e.name)},[e.name]),S.useEffect(()=>{o&&v.current&&v.current.focus()},[o]),S.useEffect(()=>{if(A.trim()){const I=a.filter(U=>U.toLowerCase().includes(A.toLowerCase()));g(I.slice(0,5)),p(-1)}else g([]),p(-1)},[A,a]);const _=I=>/^[a-zA-Z0-9 .-]*$/.test(I),C=I=>{const U=I.target.value;_(U)?(u(U),d(!!U&&a.length>0)):(y(!0),c("buttonClick"),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{y(!1),b.current=null},3e3))},k=()=>{setTimeout(()=>{d(!1),p(-1);const I=A.trim();I!==A&&u(I),n(I)},200)},j=()=>{A&&a.length>0&&d(!0)},B=I=>{var U,N;if(!(!h||f.length===0))switch(I.key){case"ArrowDown":I.preventDefault(),p(D=>D<f.length-1?D+1:0);break;case"ArrowUp":I.preventDefault(),p(D=>D>0?D-1:f.length-1);break;case"Enter":if(I.preventDefault(),x>=0&&x<f.length)E(f[x],"keyboard");else{const D=A.trim();u(D),n(D),d(!1),p(-1),(U=v.current)==null||U.blur()}break;case"Escape":I.preventDefault(),d(!1),p(-1),(N=v.current)==null||N.blur();break;case"Tab":h&&(d(!1),p(-1));break}},E=(I,U="mouse")=>{var N;u(I),n(I),d(!1),p(-1),c("buttonClick"),U==="keyboard"&&((N=v.current)==null||N.blur())},P=()=>{r&&(c("buttonClick"),r())};return S.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),l.jsxs("div",{className:"relative w-full",children:[l.jsxs("div",{className:`flex border ${s?"border-red-500 bg-red-900/20":m?"border-amber-500 bg-amber-900/20":e.team===ne.Titans?"border-blue-600 bg-blue-900/30":"border-red-600 bg-red-900/30"} rounded-lg overflow-hidden focus-within:ring-2 ${e.team===ne.Titans?"focus-within:ring-blue-500":"focus-within:ring-red-500"}`,children:[l.jsx("input",{ref:v,type:"text",value:A,onChange:C,onBlur:k,onFocus:j,onKeyDown:B,role:"combobox","aria-autocomplete":"list","aria-expanded":h,"aria-controls":h?w:void 0,"aria-activedescendant":x>=0?`${w}-option-${x}`:void 0,autoComplete:"off",placeholder:"Player name",className:`px-3 py-2 flex-grow bg-transparent outline-none text-sm ${e.team===ne.Titans?"text-blue-100 placeholder-blue-300":"text-red-100 placeholder-red-300"}`}),s&&l.jsx("div",{className:"flex items-center pr-2",children:l.jsx(la,{size:16,className:"text-red-500"})}),m&&l.jsx("div",{className:"flex items-center pr-2",children:l.jsx(Aa,{size:16,className:"text-amber-500"})}),r&&!i&&l.jsx("button",{onClick:P,className:"px-2 text-gray-400 hover:text-white focus:outline-none","aria-label":"Remove player",children:l.jsx(Bn,{size:16})})]}),s&&l.jsx("div",{className:"text-red-500 text-xs mt-1",children:"Duplicate name"}),m&&l.jsx("div",{className:"text-amber-500 text-xs mt-1",children:"Only letters, numbers, spaces, periods, and hyphens are allowed"}),h&&f.length>0&&l.jsx("ul",{id:w,role:"listbox","aria-label":"Player name suggestions",className:"absolute z-10 w-full mt-1 bg-gray-700 rounded-md shadow-lg max-h-60 overflow-auto",children:f.map((I,U)=>l.jsx("li",{id:`${w}-option-${U}`,role:"option","aria-selected":U===x,onMouseDown:N=>{N.preventDefault(),E(I,"mouse")},onMouseEnter:()=>p(U),className:`px-4 py-2 cursor-pointer text-sm min-h-[44px] flex items-center ${U===x?"bg-blue-600 text-white":"hover:bg-gray-600"}`,children:I},U))})]})},nO="modulepreload",rO=function(e){return"/GoA-Timer/"+e},mB={},pB=function(n,r,s){if(!r||r.length===0)return n();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=rO(i),i in mB)return;mB[i]=!0;const o=i.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!s)for(let h=a.length-1;h>=0;h--){const d=a[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${c}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":nO,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>n()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var xt={},um={},Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.z=Bt.tau=Bt.sigma=Bt.mu=Bt.epsilon=Bt.default=Bt.betaSq=Bt.beta=void 0;const bb=e=>(e==null?void 0:e.z)??3;Bt.z=bb;const _b=e=>(e==null?void 0:e.mu)??25;Bt.mu=_b;const k3=e=>(e==null?void 0:e.tau)??_b(e)/300;Bt.tau=k3;const j3=e=>(e==null?void 0:e.sigma)??_b(e)/bb(e);Bt.sigma=j3;const N3=e=>(e==null?void 0:e.epsilon)??1e-4;Bt.epsilon=N3;const Cb=e=>(e==null?void 0:e.beta)??j3(e)/2;Bt.beta=Cb;const bx=e=>Cb(e)**2;Bt.betaSq=bx;var sO=e=>({EPSILON:N3(e),TWOBETASQ:2*bx(e),BETA:Cb(e),BETASQ:bx(e),Z:bb(e),TAU:k3(e)});Bt.default=sO;Object.defineProperty(um,"__esModule",{value:!0});um.default=void 0;var yB=Bt;const aO=(e,n={})=>({mu:(e==null?void 0:e.mu)??(0,yB.mu)(n),sigma:(e==null?void 0:e.sigma)??(0,yB.sigma)({...n,mu:e==null?void 0:e.mu})});var iO=aO;um.default=iO;var dm={},R={exports:{}},oO=function(){return!1},lO=oO,cO=function(){return!0},AO=cO,uO={"@@functional/placeholder":!0};function dO(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}var hm=dO,hO=hm;function fO(e){return function n(r){return arguments.length===0||hO(r)?n:e.apply(this,arguments)}}var Le=fO,oy=Le,UA=hm;function gO(e){return function n(r,s){switch(arguments.length){case 0:return n;case 1:return UA(r)?n:oy(function(a){return e(r,a)});default:return UA(r)&&UA(s)?n:UA(r)?oy(function(a){return e(a,s)}):UA(s)?oy(function(a){return e(r,a)}):e(r,s)}}}var ie=gO,mO=ie,pO=mO(function(n,r){return Number(n)+Number(r)}),fm=pO;function yO(e,n){e=e||[],n=n||[];var r,s=e.length,a=n.length,i=[];for(r=0;r<s;)i[i.length]=e[r],r+=1;for(r=0;r<a;)i[i.length]=n[r],r+=1;return i}var ys=yO;function vO(e,n){switch(e){case 0:return function(){return n.apply(this,arguments)};case 1:return function(r){return n.apply(this,arguments)};case 2:return function(r,s){return n.apply(this,arguments)};case 3:return function(r,s,a){return n.apply(this,arguments)};case 4:return function(r,s,a,i){return n.apply(this,arguments)};case 5:return function(r,s,a,i,o){return n.apply(this,arguments)};case 6:return function(r,s,a,i,o,c){return n.apply(this,arguments)};case 7:return function(r,s,a,i,o,c,A){return n.apply(this,arguments)};case 8:return function(r,s,a,i,o,c,A,u){return n.apply(this,arguments)};case 9:return function(r,s,a,i,o,c,A,u,h){return n.apply(this,arguments)};case 10:return function(r,s,a,i,o,c,A,u,h,d){return n.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}var xa=vO,xO=xa,vB=hm;function E3(e,n,r){return function(){for(var s=[],a=0,i=e,o=0;o<n.length||a<arguments.length;){var c;o<n.length&&(!vB(n[o])||a>=arguments.length)?c=n[o]:(c=arguments[a],a+=1),s[o]=c,vB(c)||(i-=1),o+=1}return i<=0?r.apply(this,s):xO(i,E3(e,s,r))}}var Od=E3,wO=xa,bO=Le,_O=ie,CO=Od,BO=_O(function(n,r){return n===1?bO(r):wO(n,CO(n,[],r))}),kn=BO,SO=ys,kO=Le,jO=kn,NO=kO(function(n){return jO(n.length,function(){var r=0,s=arguments[0],a=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var o=s.apply(this,SO(arguments,[r,a]));return r+=1,o},n.apply(this,i)})}),EO=NO,TO=ys,FO=Le,UO=kn,IO=FO(function(n){return UO(n.length,function(){var r=arguments[0],s=arguments[arguments.length-1],a=s.length-1,i=Array.prototype.slice.call(arguments,0);return i[0]=function(){var o=r.apply(this,TO(arguments,[a,s]));return a-=1,o},n.apply(this,i)})}),PO=IO,$h=Le,El=ie,Tn=hm;function QO(e){return function n(r,s,a){switch(arguments.length){case 0:return n;case 1:return Tn(r)?n:El(function(i,o){return e(r,i,o)});case 2:return Tn(r)&&Tn(s)?n:Tn(r)?El(function(i,o){return e(i,s,o)}):Tn(s)?El(function(i,o){return e(r,i,o)}):$h(function(i){return e(r,s,i)});default:return Tn(r)&&Tn(s)&&Tn(a)?n:Tn(r)&&Tn(s)?El(function(i,o){return e(i,o,a)}):Tn(r)&&Tn(a)?El(function(i,o){return e(i,s,o)}):Tn(s)&&Tn(a)?El(function(i,o){return e(r,i,o)}):Tn(r)?$h(function(i){return e(i,s,a)}):Tn(s)?$h(function(i){return e(r,i,a)}):Tn(a)?$h(function(i){return e(r,s,i)}):e(r,s,a)}}}var He=QO,MO=ys,DO=He,RO=DO(function(n,r,s){var a=s.length;if(n>=a||n<-a)return s;var i=(a+n)%a,o=MO(s);return o[i]=r(s[i]),o}),T3=RO,tr=Array.isArray||function(n){return n!=null&&n.length>=0&&Object.prototype.toString.call(n)==="[object Array]"};function $O(e){return e!=null&&typeof e["@@transducer/step"]=="function"}var Bb=$O,OO=tr,LO=Bb;function HO(e,n,r){return function(){if(arguments.length===0)return r();var s=arguments[arguments.length-1];if(!OO(s)){for(var a=0;a<e.length;){if(typeof s[e[a]]=="function")return s[e[a]].apply(s,Array.prototype.slice.call(arguments,0,-1));a+=1}if(LO(s)){var i=n.apply(null,Array.prototype.slice.call(arguments,0,-1));return i(s)}}return r.apply(this,arguments)}}var Qt=HO;function zO(e){return e&&e["@@transducer/reduced"]?e:{"@@transducer/value":e,"@@transducer/reduced":!0}}var hi=zO,qt={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}},KO=hi,GO=qt,WO=function(){function e(n,r){this.xf=r,this.f=n,this.all=!0}return e.prototype["@@transducer/init"]=GO.init,e.prototype["@@transducer/result"]=function(n){return this.all&&(n=this.xf["@@transducer/step"](n,!0)),this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)||(this.all=!1,n=KO(this.xf["@@transducer/step"](n,!1))),n},e}();function VO(e){return function(n){return new WO(e,n)}}var qO=VO,XO=ie,YO=Qt,JO=qO,ZO=XO(YO(["all"],JO,function(n,r){for(var s=0;s<r.length;){if(!n(r[s]))return!1;s+=1}return!0})),F3=ZO;function eL(e){for(var n=[],r;!(r=e.next()).done;)n.push(r.value);return n}var tL=eL;function nL(e,n,r){for(var s=0,a=r.length;s<a;){if(e(n,r[s]))return!0;s+=1}return!1}var Ld=nL;function rL(e){var n=String(e).match(/^function (\w*)/);return n==null?"":n[1]}var sL=rL;function aL(e,n){return Object.prototype.hasOwnProperty.call(n,e)}var gr=aL;function iL(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}var U3=typeof Object.is=="function"?Object.is:iL,oL=gr,xB=Object.prototype.toString,lL=function(){return xB.call(arguments)==="[object Arguments]"?function(n){return xB.call(n)==="[object Arguments]"}:function(n){return oL("callee",n)}}(),I3=lL,wB=Le,bB=gr,cL=I3,AL=!{toString:null}.propertyIsEnumerable("toString"),_B=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],CB=function(){return arguments.propertyIsEnumerable("length")}(),uL=function(n,r){for(var s=0;s<n.length;){if(n[s]===r)return!0;s+=1}return!1},dL=wB(typeof Object.keys=="function"&&!CB?function(n){return Object(n)!==n?[]:Object.keys(n)}:function(n){if(Object(n)!==n)return[];var r,s,a=[],i=CB&&cL(n);for(r in n)bB(r,n)&&(!i||r!=="length")&&(a[a.length]=r);if(AL)for(s=_B.length-1;s>=0;)r=_B[s],bB(r,n)&&!uL(a,r)&&(a[a.length]=r),s-=1;return a}),Ws=dL,hL=Le,fL=hL(function(n){return n===null?"Null":n===void 0?"Undefined":Object.prototype.toString.call(n).slice(8,-1)}),Sb=fL,BB=tL,SB=Ld,gL=sL,mL=gr,ly=U3,kB=Ws,jB=Sb;function NB(e,n,r,s){var a=BB(e),i=BB(n);function o(c,A){return kb(c,A,r.slice(),s.slice())}return!SB(function(c,A){return!SB(o,A,c)},i,a)}function kb(e,n,r,s){if(ly(e,n))return!0;var a=jB(e);if(a!==jB(n))return!1;if(typeof e["fantasy-land/equals"]=="function"||typeof n["fantasy-land/equals"]=="function")return typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](n)&&typeof n["fantasy-land/equals"]=="function"&&n["fantasy-land/equals"](e);if(typeof e.equals=="function"||typeof n.equals=="function")return typeof e.equals=="function"&&e.equals(n)&&typeof n.equals=="function"&&n.equals(e);switch(a){case"Arguments":case"Array":case"Object":if(typeof e.constructor=="function"&&gL(e.constructor)==="Promise")return e===n;break;case"Boolean":case"Number":case"String":if(!(typeof e==typeof n&&ly(e.valueOf(),n.valueOf())))return!1;break;case"Date":if(!ly(e.valueOf(),n.valueOf()))return!1;break;case"Error":return e.name===n.name&&e.message===n.message;case"RegExp":if(!(e.source===n.source&&e.global===n.global&&e.ignoreCase===n.ignoreCase&&e.multiline===n.multiline&&e.sticky===n.sticky&&e.unicode===n.unicode))return!1;break}for(var i=r.length-1;i>=0;){if(r[i]===e)return s[i]===n;i-=1}switch(a){case"Map":return e.size!==n.size?!1:NB(e.entries(),n.entries(),r.concat([e]),s.concat([n]));case"Set":return e.size!==n.size?!1:NB(e.values(),n.values(),r.concat([e]),s.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=kB(e);if(o.length!==kB(n).length)return!1;var c=r.concat([e]),A=s.concat([n]);for(i=o.length-1;i>=0;){var u=o[i];if(!(mL(u,n)&&kb(n[u],e[u],c,A)))return!1;i-=1}return!0}var pL=kb,yL=ie,vL=pL,xL=yL(function(n,r){return vL(n,r,[],[])}),vs=xL,wL=vs;function bL(e,n,r){var s,a;if(typeof e.indexOf=="function")switch(typeof n){case"number":if(n===0){for(s=1/n;r<e.length;){if(a=e[r],a===0&&1/a===s)return r;r+=1}return-1}else if(n!==n){for(;r<e.length;){if(a=e[r],typeof a=="number"&&a!==a)return r;r+=1}return-1}return e.indexOf(n,r);case"string":case"boolean":case"function":case"undefined":return e.indexOf(n,r);case"object":if(n===null)return e.indexOf(n,r)}for(;r<e.length;){if(wL(e[r],n))return r;r+=1}return-1}var P3=bL,_L=P3;function CL(e,n){return _L(n,e,0)>=0}var jb=CL;function BL(e,n){for(var r=0,s=n.length,a=Array(s);r<s;)a[r]=e(n[r]),r+=1;return a}var Hd=BL;function SL(e){var n=e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+n.replace(/"/g,'\\"')+'"'}var kL=SL,IA=function(n){return(n<10?"0":"")+n},jL=typeof Date.prototype.toISOString=="function"?function(n){return n.toISOString()}:function(n){return n.getUTCFullYear()+"-"+IA(n.getUTCMonth()+1)+"-"+IA(n.getUTCDate())+"T"+IA(n.getUTCHours())+":"+IA(n.getUTCMinutes())+":"+IA(n.getUTCSeconds())+"."+(n.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},NL=jL;function EL(e){return function(){return!e.apply(this,arguments)}}var Q3=EL;function TL(e,n,r){for(var s=0,a=r.length;s<a;)n=e(n,r[s]),s+=1;return n}var zd=TL;function FL(e,n){for(var r=0,s=n.length,a=[];r<s;)e(n[r])&&(a[a.length]=n[r]),r+=1;return a}var Nb=FL;function UL(e){return Object.prototype.toString.call(e)==="[object Object]"}var Kd=UL,EB=qt,IL=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=EB.init,e.prototype["@@transducer/result"]=EB.result,e.prototype["@@transducer/step"]=function(n,r){return this.f(r)?this.xf["@@transducer/step"](n,r):n},e}();function PL(e){return function(n){return new IL(e,n)}}var QL=PL,ML=zd,DL=ie,RL=Qt,$L=Nb,OL=Kd,LL=QL,HL=Ws,zL=DL(RL(["fantasy-land/filter","filter"],LL,function(e,n){return OL(n)?ML(function(r,s){return e(n[s])&&(r[s]=n[s]),r},{},HL(n)):$L(e,n)})),Eb=zL,KL=Q3,GL=ie,WL=Eb,VL=GL(function(n,r){return WL(KL(n),r)}),gm=VL,qL=jb,cy=Hd,Ay=kL,XL=NL,TB=Ws,YL=gm;function M3(e,n){var r=function(o){var c=n.concat([e]);return qL(o,c)?"<Circular>":M3(o,c)},s=function(i,o){return cy(function(c){return Ay(c)+": "+r(i[c])},o.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+cy(r,e).join(", ")+"))";case"[object Array]":return"["+cy(r,e).concat(s(e,YL(function(i){return/^\d+$/.test(i)},TB(e)))).join(", ")+"]";case"[object Boolean]":return typeof e=="object"?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):Ay(XL(e)))+")";case"[object Map]":return"new Map("+r(Array.from(e))+")";case"[object Null]":return"null";case"[object Number]":return typeof e=="object"?"new Number("+r(e.valueOf())+")":1/e===-1/0?"-0":e.toString(10);case"[object Set]":return"new Set("+r(Array.from(e).sort())+")";case"[object String]":return typeof e=="object"?"new String("+r(e.valueOf())+")":Ay(e);case"[object Undefined]":return"undefined";default:if(typeof e.toString=="function"){var a=e.toString();if(a!=="[object Object]")return a}return"{"+s(e,TB(e)).join(", ")+"}"}}var D3=M3,JL=Le,ZL=D3,eH=JL(function(n){return ZL(n,[])}),AA=eH,tH=ie,FB=AA,nH=tH(function(n,r){if(n===r)return r;function s(A,u){if(A>u!=u>A)return u>A?u:A}var a=s(n,r);if(a!==void 0)return a;var i=s(typeof n,typeof r);if(i!==void 0)return i===typeof n?n:r;var o=FB(n),c=s(o,FB(r));return c!==void 0&&c===o?n:r}),ul=nH,UB=qt,rH=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=UB.init,e.prototype["@@transducer/result"]=UB.result,e.prototype["@@transducer/step"]=function(n,r){return this.xf["@@transducer/step"](n,this.f(r))},e}(),sH=function(n){return function(r){return new rH(n,r)}},R3=sH,aH=zd,iH=ie,oH=Qt,lH=Hd,cH=R3,AH=kn,uH=Ws,dH=iH(oH(["fantasy-land/map","map"],cH,function(n,r){switch(Object.prototype.toString.call(r)){case"[object Function]":return AH(r.length,function(){return n.call(this,r.apply(this,arguments))});case"[object Object]":return aH(function(s,a){return s[a]=n(r[a]),s},{},uH(r));default:return lH(n,r)}})),wa=dH,ho=Number.isInteger||function(n){return n<<0===n};function hH(e){return Object.prototype.toString.call(e)==="[object String]"}var uA=hH,fH=ie,gH=uA,mH=fH(function(n,r){var s=n<0?r.length+n:n;return gH(r)?r.charAt(s):r[s]}),dl=mH,pH=ie,yH=ho,vH=dl,xH=pH(function(n,r){if(r!=null)return yH(n)?vH(n,r):r[n]}),hl=xH,wH=ie,bH=wa,_H=hl,CH=wH(function(n,r){return bH(_H(n),r)}),Gd=CH,BH=Le,SH=tr,kH=uA,jH=BH(function(n){return SH(n)?!0:!n||typeof n!="object"||kH(n)?!1:n.length===0?!0:n.length>0?n.hasOwnProperty(0)&&n.hasOwnProperty(n.length-1):!1}),mm=jH,NH=mm,IB=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function EH(e,n,r){return function(a,i,o){if(NH(o))return e(a,i,o);if(o==null)return i;if(typeof o["fantasy-land/reduce"]=="function")return n(a,i,o,"fantasy-land/reduce");if(o[IB]!=null)return r(a,i,o[IB]());if(typeof o.next=="function")return r(a,i,o);if(typeof o.reduce=="function")return n(a,i,o,"reduce");throw new TypeError("reduce: list must be array or iterable")}}var $3=EH;function TH(e,n,r){for(var s=0,a=r.length;s<a;){if(n=e["@@transducer/step"](n,r[s]),n&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}s+=1}return e["@@transducer/result"](n)}var O3=TH,FH=xa,UH=ie,IH=UH(function(n,r){return FH(n.length,function(){return n.apply(r,arguments)})}),L3=IH,PH=$3,QH=O3,MH=L3;function DH(e,n,r){for(var s=r.next();!s.done;){if(n=e["@@transducer/step"](n,s.value),n&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}s=r.next()}return e["@@transducer/result"](n)}function RH(e,n,r,s){return e["@@transducer/result"](r[s](MH(e["@@transducer/step"],e),n))}var $H=PH(QH,RH,DH),fl=$H,OH=function(){function e(n){this.f=n}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(n){return n},e.prototype["@@transducer/step"]=function(n,r){return this.f(n,r)},e}();function LH(e){return new OH(e)}var pm=LH,HH=He,zH=fl,KH=pm,GH=HH(function(e,n,r){return zH(typeof e=="function"?KH(e):e,n,r)}),fi=GH,WH=Le,VH=kn,qH=ul,XH=Gd,YH=fi,JH=WH(function(n){return VH(YH(qH,0,XH("length",n)),function(){for(var r=0,s=n.length;r<s;){if(!n[r].apply(this,arguments))return!1;r+=1}return!0})}),ZH=JH,e9=Le,t9=e9(function(n){return function(){return n}}),ym=t9,n9=ie,r9=n9(function(n,r){return n&&r}),H3=r9,s9=hi,a9=qt,i9=function(){function e(n,r){this.xf=r,this.f=n,this.any=!1}return e.prototype["@@transducer/init"]=a9.init,e.prototype["@@transducer/result"]=function(n){return this.any||(n=this.xf["@@transducer/step"](n,!1)),this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)&&(this.any=!0,n=s9(this.xf["@@transducer/step"](n,!0))),n},e}();function o9(e){return function(n){return new i9(e,n)}}var l9=o9,c9=ie,A9=Qt,u9=l9,d9=c9(A9(["any"],u9,function(n,r){for(var s=0;s<r.length;){if(n(r[s]))return!0;s+=1}return!1})),h9=d9,f9=Le,g9=kn,m9=ul,p9=Gd,y9=fi,v9=f9(function(n){return g9(y9(m9,0,p9("length",n)),function(){for(var r=0,s=n.length;r<s;){if(n[r].apply(this,arguments))return!0;r+=1}return!1})}),x9=v9,w9=zd,b9=$3;function _9(e,n,r){for(var s=r.next();!s.done;)n=e(n,s.value),s=r.next();return n}function C9(e,n,r,s){return r[s](e,n)}var B9=b9(w9,C9,_9),vm=B9,S9=ys,k9=ie,j9=vm,N9=wa,E9=k9(function(n,r){return typeof r["fantasy-land/ap"]=="function"?r["fantasy-land/ap"](n):typeof n.ap=="function"?n.ap(r):typeof n=="function"?function(s){return n(s)(r(s))}:j9(function(s,a){return S9(s,N9(a,r))},[],n)}),Tb=E9;function T9(e,n){for(var r=0,s=n.length-(e-1),a=new Array(s>=0?s:0);r<s;)a[r]=Array.prototype.slice.call(n,r,r+e),r+=1;return a}var F9=T9,U9=ys,I9=qt,P9=function(){function e(n,r){this.xf=r,this.pos=0,this.full=!1,this.acc=new Array(n)}return e.prototype["@@transducer/init"]=I9.init,e.prototype["@@transducer/result"]=function(n){return this.acc=null,this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.store(r),this.full?this.xf["@@transducer/step"](n,this.getCopy()):n},e.prototype.store=function(n){this.acc[this.pos]=n,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e.prototype.getCopy=function(){return U9(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},e}();function Q9(e){return function(n){return new P9(e,n)}}var M9=Q9,D9=F9,R9=ie,$9=Qt,O9=M9,L9=R9($9([],O9,D9)),H9=L9,z9=ys,K9=ie,G9=K9(function(n,r){return z9(r,[n])}),W9=G9,V9=ie,q9=V9(function(n,r){return n.apply(this,r)}),z3=q9,X9=Le,Y9=Ws,J9=X9(function(n){for(var r=Y9(n),s=r.length,a=[],i=0;i<s;)a[i]=n[r[i]],i+=1;return a}),K3=J9,Z9=Le,ez=tr,tz=z3,nz=kn,rz=ul,sz=Gd,az=fi,iz=Ws,oz=K3;function PB(e,n){return ez(n)?n.map(e):iz(n).reduce(function(r,s){return r[s]=e(n[s]),r},{})}var lz=Z9(function e(n){return n=PB(function(r){return typeof r=="function"?r:e(r)},n),nz(az(rz,0,sz("length",oz(n))),function(){var r=arguments;return PB(function(s){return tz(s,r)},n)})}),cz=lz,Az=ie,uz=Az(function(n,r){return r(n)}),dz=uz,hz=He,fz=hz(function(n,r,s){var a=n(r),i=n(s);return a<i?-1:a>i?1:0}),gz=fz,mz=tr,pz=ho;function yz(e,n,r){if(pz(e)&&mz(r)){var s=[].concat(r);return s[e]=n,s}var a={};for(var i in r)a[i]=r[i];return a[e]=n,a}var Fb=yz,vz=Le,xz=vz(function(n){return n==null}),Wd=xz,wz=He,bz=gr,_z=ho,Cz=Fb,Bz=Wd,Sz=wz(function e(n,r,s){if(n.length===0)return r;var a=n[0];if(n.length>1){var i=!Bz(s)&&bz(a,s)&&typeof s[a]=="object"?s[a]:_z(n[1])?[]:{};r=e(Array.prototype.slice.call(n,1),r,i)}return Cz(a,r,s)}),Ub=Sz,kz=He,jz=Ub,Nz=kz(function(n,r,s){return jz([n],r,s)}),Ib=Nz,Ez=ie,Tz=Ez(function(n,r){switch(n){case 0:return function(){return r.call(this)};case 1:return function(s){return r.call(this,s)};case 2:return function(s,a){return r.call(this,s,a)};case 3:return function(s,a,i){return r.call(this,s,a,i)};case 4:return function(s,a,i,o){return r.call(this,s,a,i,o)};case 5:return function(s,a,i,o,c){return r.call(this,s,a,i,o,c)};case 6:return function(s,a,i,o,c,A){return r.call(this,s,a,i,o,c,A)};case 7:return function(s,a,i,o,c,A,u){return r.call(this,s,a,i,o,c,A,u)};case 8:return function(s,a,i,o,c,A,u,h){return r.call(this,s,a,i,o,c,A,u,h)};case 9:return function(s,a,i,o,c,A,u,h,d){return r.call(this,s,a,i,o,c,A,u,h,d)};case 10:return function(s,a,i,o,c,A,u,h,d,f){return r.call(this,s,a,i,o,c,A,u,h,d,f)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),xm=Tz,Fz=Le,Uz=xm,Iz=Fz(function(n){return Uz(2,n)}),Pz=Iz;function Qz(e){var n=Object.prototype.toString.call(e);return n==="[object Function]"||n==="[object AsyncFunction]"||n==="[object GeneratorFunction]"||n==="[object AsyncGeneratorFunction]"}var Vd=Qz,Mz=ie,Dz=zd,Rz=Tb,QB=kn,$z=wa,Oz=Mz(function(n,r){var s=QB(n,r);return QB(n,function(){return Dz(Rz,$z(s,arguments[0]),Array.prototype.slice.call(arguments,1))})}),G3=Oz,Lz=Le,Hz=G3,zz=Lz(function(n){return Hz(n.length,n)}),wm=zz,Kz=ie,Gz=Vd,Wz=H3,Vz=wm,qz=Kz(function(n,r){return Gz(n)?function(){return n.apply(this,arguments)&&r.apply(this,arguments)}:Vz(Wz)(n,r)}),Xz=qz,Yz=Le,Jz=Yz(function(n){return n.apply(this,Array.prototype.slice.call(arguments,1))}),Zz=Jz,eK=mm;function tK(e){return function n(r){for(var s,a,i,o=[],c=0,A=r.length;c<A;){if(eK(r[c]))for(s=e?n(r[c]):r[c],i=0,a=s.length;i<a;)o[o.length]=s[i],i+=1;else o[o.length]=r[c];c+=1}return o}}var W3=tK;function nK(e){return{"@@transducer/value":e,"@@transducer/reduced":!0}}var rK=nK,sK=rK,aK=mm,iK=O3,oK=fl,O0=qt,V3="@@transducer/init",_x="@@transducer/step",q3="@@transducer/result",lK=function(){function e(n){this.xf=n}return e.prototype[V3]=O0.init,e.prototype[q3]=O0.result,e.prototype[_x]=function(n,r){var s=this.xf[_x](n,r);return s["@@transducer/reduced"]?sK(s):s},e}(),cK=function(){function e(n){this.xf=new lK(n)}return e.prototype[V3]=O0.init,e.prototype[q3]=O0.result,e.prototype[_x]=function(n,r){return aK(r)?oK(this.xf,n,r):iK(this.xf,n,[r])},e}(),AK=function(n){return new cK(n)},uK=AK,dK=uK,hK=R3;function fK(e){return function(n){return hK(e)(dK(n))}}var gK=fK,mK=ie,pK=Qt,yK=W3,vK=gK,xK=wa,wK=mK(pK(["fantasy-land/chain","chain"],vK,function(n,r){return typeof r=="function"?function(s){return n(r(s))(s)}:yK(!1)(xK(n,r))})),X3=wK,bK=He,_K=bK(function(n,r,s){if(n>r)throw new Error("min must not be greater than max in clamp(min, max, value)");return s<n?n:s>r?r:s}),CK=_K;function BK(e){return new RegExp(e.source,e.flags?e.flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")+(e.dotAll?"s":""))}var Y3=BK,SK=Y3,kK=Sb;function J3(e,n,r){if(r||(r=new NK),jK(e))return e;var s=function(i){var o=r.get(e);if(o)return o;r.set(e,i);for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(i[c]=n?J3(e[c],!0,r):e[c]);return i};switch(kK(e)){case"Object":return s(Object.create(Object.getPrototypeOf(e)));case"Array":return s([]);case"Date":return new Date(e.valueOf());case"RegExp":return SK(e);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return e.slice();default:return e}}var Pb=J3;function jK(e){var n=typeof e;return e==null||n!="object"&&n!="function"}var NK=function(){function e(){this.map={},this.length=0}return e.prototype.set=function(n,r){const s=this.hash(n);let a=this.map[s];a||(this.map[s]=a=[]),a.push([n,r]),this.length+=1},e.prototype.hash=function(n){let r=[];for(var s in n)r.push(Object.prototype.toString.call(n[s]));return r.join()},e.prototype.get=function(n){if(this.length<=180){for(const a in this.map){const i=this.map[a];for(let o=0;o<i.length;o+=1){const c=i[o];if(c[0]===n)return c[1]}}return}const r=this.hash(n),s=this.map[r];if(s)for(let a=0;a<s.length;a+=1){const i=s[a];if(i[0]===n)return i[1]}},e}(),EK=Pb,TK=Le,FK=TK(function(n){return n!=null&&typeof n.clone=="function"?n.clone():EK(n,!0)}),Z3=FK,UK=ie,IK=vm,PK=UK(function(n,r){var s=IK(function(o,c){var A=n(c);return o[A]===void 0&&(o[A]=[]),o[A].push(c),o},{},r),a=[];for(var i in s)a.push(s[i]);return a}),QK=PK,MK=Le,DK=MK(function(n){return function(r,s){return n(r,s)?-1:n(s,r)?1:0}}),RK=DK,$K=Le,OK=$K(function(n){return!n}),e6=OK,LK=wm,HK=e6,zK=LK(HK),KK=zK;function GK(e,n){return function(){return n.call(this,e.apply(this,arguments))}}var WK=GK,VK=tr;function qK(e,n){return function(){var r=arguments.length;if(r===0)return n();var s=arguments[r-1];return VK(s)||typeof s[e]!="function"?n.apply(this,arguments):s[e].apply(s,Array.prototype.slice.call(arguments,0,r-1))}}var qd=qK,XK=qd,YK=He,JK=YK(XK("slice",function(n,r,s){return Array.prototype.slice.call(s,n,r)})),Vs=JK,ZK=qd,eG=Le,tG=Vs,nG=eG(ZK("tail",tG(1,1/0))),Qb=nG,rG=xa,sG=WK,aG=fi,iG=Qb;function oG(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return rG(arguments[0].length,aG(sG,arguments[0],iG(arguments)))}var t6=oG,lG=Le,cG=uA,AG=lG(function(n){return cG(n)?n.split("").reverse().join(""):Array.prototype.slice.call(n,0).reverse()}),Mb=AG,uG=t6,dG=Mb;function hG(){if(arguments.length===0)throw new Error("compose requires at least one argument");return uG.apply(this,dG(arguments))}var n6=hG,fG=dl,gG=fG(0),r6=gG;function mG(e){return e}var bm=mG,pG=Le,yG=bm,vG=pG(yG),_m=vG,xG=xa,wG=ie,bG=r6,_G=vm,CG=Qb,BG=_m,SG=wG(function(n,r){if(r.length<=0)return BG;var s=bG(r),a=CG(r);return xG(s.length,function(){return _G(function(i,o){return n.call(this,o,i)},s.apply(this,arguments),a)})}),s6=SG,kG=ie,jG=s6,NG=Mb,EG=kG(function(n,r){return jG.apply(this,[n,NG(r)])}),TG=EG,FG=ie,MB=tr,DB=Vd,RB=uA,uy=AA,UG=FG(function(n,r){if(MB(n)){if(MB(r))return n.concat(r);throw new TypeError(uy(r)+" is not an array")}if(RB(n)){if(RB(r))return n+r;throw new TypeError(uy(r)+" is not a string")}if(n!=null&&DB(n["fantasy-land/concat"]))return n["fantasy-land/concat"](r);if(n!=null&&DB(n.concat))return n.concat(r);throw new TypeError(uy(n)+' does not have a method named "concat" or "fantasy-land/concat"')}),Db=UG,IG=xa,PG=Le,QG=wa,MG=ul,DG=fi,RG=PG(function(n){var r=DG(MG,0,QG(function(s){return s[0].length},n));return IG(r,function(){for(var s=0;s<n.length;){if(n[s][0].apply(this,arguments))return n[s][1].apply(this,arguments);s+=1}})}),$G=RG,OG=Le,LG=kn,HG=OG(function(n){return LG(n.length,n)}),Rb=HG,zG=ie,KG=Rb,GG=xm,WG=zG(function(n,r){if(n>10)throw new Error("Constructor with greater than ten arguments");return n===0?function(){return new r}:KG(GG(n,function(s,a,i,o,c,A,u,h,d,f){switch(n){case 1:return new r(s);case 2:return new r(s,a);case 3:return new r(s,a,i);case 4:return new r(s,a,i,o);case 5:return new r(s,a,i,o,c);case 6:return new r(s,a,i,o,c,A);case 7:return new r(s,a,i,o,c,A,u);case 8:return new r(s,a,i,o,c,A,u,h);case 9:return new r(s,a,i,o,c,A,u,h,d);case 10:return new r(s,a,i,o,c,A,u,h,d,f)}}))}),a6=WG,VG=Le,qG=a6,XG=VG(function(n){return qG(n.length,n)}),YG=XG,JG=ie,ZG=Hd,eW=kn,tW=ul,nW=Gd,rW=fi,sW=JG(function(n,r){return eW(rW(tW,0,nW("length",r)),function(){var s=arguments,a=this;return n.apply(a,ZG(function(i){return i.apply(a,s)},r))})}),i6=sW,aW=vm,iW=Rb,oW=iW(function(e,n){return aW(function(r,s){return e(s)?r+1:r},0,n)}),lW=oW,cW=Pb,AW=gr,uW=qt,dW=function(){function e(n,r,s,a){this.valueFn=n,this.valueAcc=r,this.keyFn=s,this.xf=a,this.inputs={}}return e.prototype["@@transducer/init"]=uW.init,e.prototype["@@transducer/result"]=function(n){var r;for(r in this.inputs)if(AW(r,this.inputs)&&(n=this.xf["@@transducer/step"](n,this.inputs[r]),n["@@transducer/reduced"])){n=n["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){var s=this.keyFn(r);return this.inputs[s]=this.inputs[s]||[s,cW(this.valueAcc,!1)],this.inputs[s][1]=this.valueFn(this.inputs[s][1],r),n},e}();function hW(e,n,r){return function(s){return new dW(e,n,r,s)}}var fW=hW,gW=Pb,mW=Od,pW=Qt,yW=gr,vW=hi,xW=fl,wW=fW,bW=pm,_W=mW(4,[],pW([],wW,function(n,r,s,a){var i=bW(function(o,c){var A=s(c),u=n(yW(A,o)?o[A]:gW(r,!1),c);return u&&u["@@transducer/reduced"]?vW(o):(o[A]=u,o)});return xW(i,{},a)})),Cm=_W,CW=Cm,BW=CW(function(e,n){return e+1},0),SW=BW,kW=fm,jW=kW(-1),NW=jW,EW=ie,TW=EW(function(n,r){return r==null||r!==r?n:r}),$b=TW,FW=He,UW=FW(function(n,r,s){var a=n(r),i=n(s);return a>i?-1:a<i?1:0}),IW=UW,$B=jb,PW=function(){function e(){this._nativeSet=typeof Set=="function"?new Set:null,this._items={}}return e.prototype.add=function(n){return!OB(n,!0,this)},e.prototype.has=function(n){return OB(n,!1,this)},e}();function OB(e,n,r){var s=typeof e,a,i;switch(s){case"string":case"number":return e===0&&1/e===-1/0?r._items["-0"]?!0:(n&&(r._items["-0"]=!0),!1):r._nativeSet!==null?n?(a=r._nativeSet.size,r._nativeSet.add(e),i=r._nativeSet.size,i===a):r._nativeSet.has(e):s in r._items?e in r._items[s]?!0:(n&&(r._items[s][e]=!0),!1):(n&&(r._items[s]={},r._items[s][e]=!0),!1);case"boolean":if(s in r._items){var o=e?1:0;return r._items[s][o]?!0:(n&&(r._items[s][o]=!0),!1)}else return n&&(r._items[s]=e?[!1,!0]:[!0,!1]),!1;case"function":return r._nativeSet!==null?n?(a=r._nativeSet.size,r._nativeSet.add(e),i=r._nativeSet.size,i===a):r._nativeSet.has(e):s in r._items?$B(e,r._items[s])?!0:(n&&r._items[s].push(e),!1):(n&&(r._items[s]=[e]),!1);case"undefined":return r._items[s]?!0:(n&&(r._items[s]=!0),!1);case"object":if(e===null)return r._items.null?!0:(n&&(r._items.null=!0),!1);default:return s=Object.prototype.toString.call(e),s in r._items?$B(e,r._items[s])?!0:(n&&r._items[s].push(e),!1):(n&&(r._items[s]=[e]),!1)}}var Xd=PW,QW=ie,MW=Xd,DW=QW(function(n,r){for(var s=[],a=0,i=n.length,o=r.length,c=new MW,A=0;A<o;A+=1)c.add(r[A]);for(;a<i;)c.add(n[a])&&(s[s.length]=n[a]),a+=1;return s}),o6=DW,LB=Ld,RW=He,$W=RW(function(n,r,s){for(var a=[],i=0,o=r.length;i<o;)!LB(n,r[i],s)&&!LB(n,r[i],a)&&a.push(r[i]),i+=1;return a}),l6=$W,OW=He,LW=OW(function(n,r,s){var a=Array.prototype.slice.call(s,0);return a.splice(n,r),a}),c6=LW,HW=ho,zW=tr,KW=c6;function GW(e,n){if(n==null)return n;if(HW(e)&&zW(n))return KW(e,1,n);var r={};for(var s in n)r[s]=n[s];return delete r[e],r}var WW=GW,VW=ie,qW=WW,XW=ho,YW=tr,JW=Ib;function ZW(e,n){if(XW(e)&&YW(n))return[].concat(n);var r={};for(var s in n)r[s]=n[s];return r}var eV=VW(function e(n,r){if(r==null)return r;switch(n.length){case 0:return r;case 1:return qW(n[0],r);default:var s=n[0],a=Array.prototype.slice.call(n,1);return r[s]==null?ZW(s,r):JW(s,e(a,r[s]),r)}}),A6=eV,tV=ie,nV=A6,rV=tV(function(n,r){return nV([n],r)}),sV=rV,aV=ie,iV=aV(function(n,r){return n/r}),oV=iV,HB=qt,lV=function(){function e(n,r){this.xf=r,this.n=n}return e.prototype["@@transducer/init"]=HB.init,e.prototype["@@transducer/result"]=HB.result,e.prototype["@@transducer/step"]=function(n,r){return this.n>0?(this.n-=1,n):this.xf["@@transducer/step"](n,r)},e}();function cV(e){return function(n){return new lV(e,n)}}var AV=cV,uV=ie,dV=Qt,hV=AV,fV=Vs,gV=uV(dV(["drop"],hV,function(n,r){return fV(Math.max(0,n),1/0,r)})),u6=gV,mV=hi,zB=qt,pV=function(){function e(n,r){this.xf=r,this.n=n,this.i=0}return e.prototype["@@transducer/init"]=zB.init,e.prototype["@@transducer/result"]=zB.result,e.prototype["@@transducer/step"]=function(n,r){this.i+=1;var s=this.n===0?n:this.xf["@@transducer/step"](n,r);return this.n>=0&&this.i>=this.n?mV(s):s},e}();function yV(e){return function(n){return new pV(e,n)}}var vV=yV,xV=ie,wV=Qt,bV=vV,_V=Vs,CV=xV(wV(["take"],bV,function(n,r){return _V(0,n<0?1/0:n,r)})),Ob=CV,BV=Ob;function SV(e,n){return BV(e<n.length?n.length-e:0,n)}var kV=SV,jV=qt,NV=function(){function e(n,r){if(n<=0)return r;this.xf=r,this.pos=0,this.full=!1,this.acc=new Array(n)}return e.prototype["@@transducer/init"]=jV.init,e.prototype["@@transducer/result"]=function(n){return this.acc=null,this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.full&&(n=this.xf["@@transducer/step"](n,this.acc[this.pos])),this.store(r),n},e.prototype.store=function(n){this.acc[this.pos]=n,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},e}();function EV(e){return function(n){return new NV(e,n)}}var TV=EV,FV=ie,UV=Qt,IV=kV,PV=TV,QV=FV(UV([],PV,IV)),MV=QV,DV=Vs;function RV(e,n){for(var r=n.length-1;r>=0&&e(n[r]);)r-=1;return DV(0,r+1,n)}var $V=RV,OV=qt,LV=fl,HV=function(){function e(n,r){this.f=n,this.retained=[],this.xf=r}return e.prototype["@@transducer/init"]=OV.init,e.prototype["@@transducer/result"]=function(n){return this.retained=null,this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)?this.retain(n,r):this.flush(n,r)},e.prototype.flush=function(n,r){return n=LV(this.xf,n,this.retained),this.retained=[],this.xf["@@transducer/step"](n,r)},e.prototype.retain=function(n,r){return this.retained.push(r),n},e}();function zV(e){return function(n){return new HV(e,n)}}var KV=zV,GV=ie,WV=Qt,VV=$V,qV=KV,XV=GV(WV([],qV,VV)),YV=XV,KB=qt,JV=function(){function e(n,r){this.xf=r,this.pred=n,this.lastValue=void 0,this.seenFirstValue=!1}return e.prototype["@@transducer/init"]=KB.init,e.prototype["@@transducer/result"]=KB.result,e.prototype["@@transducer/step"]=function(n,r){var s=!1;return this.seenFirstValue?this.pred(this.lastValue,r)&&(s=!0):this.seenFirstValue=!0,this.lastValue=r,s?n:this.xf["@@transducer/step"](n,r)},e}();function ZV(e){return function(n){return new JV(e,n)}}var Lb=ZV,eq=dl,tq=eq(-1),d6=tq,nq=ie,rq=Qt,sq=Lb,aq=d6,iq=nq(rq([],sq,function(n,r){var s=[],a=1,i=r.length;if(i!==0)for(s[0]=r[0];a<i;)n(aq(s),r[a])||(s[s.length]=r[a]),a+=1;return s})),Hb=iq,oq=Le,lq=Qt,cq=Lb,Aq=Hb,GB=vs,uq=oq(lq([],function(){return cq(GB)},Aq(GB))),dq=uq,hq=He,fq=vs,gq=hq(function(n,r,s){return fq(n(r),n(s))}),h6=gq,mq=ie,pq=Qt,yq=Lb,vq=Hb,WB=h6,xq=mq(function(e,n){return pq([],function(){return yq(WB(e))},vq(WB(e)))(n)}),wq=xq,VB=qt,bq=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=VB.init,e.prototype["@@transducer/result"]=VB.result,e.prototype["@@transducer/step"]=function(n,r){if(this.f){if(this.f(r))return n;this.f=null}return this.xf["@@transducer/step"](n,r)},e}();function _q(e){return function(n){return new bq(e,n)}}var Cq=_q,Bq=ie,Sq=Qt,kq=Cq,jq=Vs,Nq=Bq(Sq(["dropWhile"],kq,function(n,r){for(var s=0,a=r.length;s<a&&n(r[s]);)s+=1;return jq(s,1/0,r)})),Eq=Nq,Tq=ie,Fq=Tq(function(n,r){return n||r}),f6=Fq,Uq=ie,Iq=Vd,Pq=wm,Qq=f6,Mq=Uq(function(n,r){return Iq(n)?function(){return n.apply(this,arguments)||r.apply(this,arguments)}:Pq(Qq)(n,r)}),Dq=Mq;function Rq(e){var n=Object.prototype.toString.call(e);return n==="[object Uint8ClampedArray]"||n==="[object Int8Array]"||n==="[object Uint8Array]"||n==="[object Int16Array]"||n==="[object Uint16Array]"||n==="[object Int32Array]"||n==="[object Uint32Array]"||n==="[object Float32Array]"||n==="[object Float64Array]"||n==="[object BigInt64Array]"||n==="[object BigUint64Array]"}var $q=Rq,Oq=Le,Lq=I3,Hq=tr,zq=Kd,Kq=uA,Gq=$q,Wq=Oq(function(n){return n!=null&&typeof n["fantasy-land/empty"]=="function"?n["fantasy-land/empty"]():n!=null&&n.constructor!=null&&typeof n.constructor["fantasy-land/empty"]=="function"?n.constructor["fantasy-land/empty"]():n!=null&&typeof n.empty=="function"?n.empty():n!=null&&n.constructor!=null&&typeof n.constructor.empty=="function"?n.constructor.empty():Hq(n)?[]:Kq(n)?"":zq(n)?{}:Lq(n)?function(){return arguments}():Gq(n)?n.constructor.from(""):void 0}),g6=Wq,Vq=ie,qq=u6,Xq=Vq(function(n,r){return qq(n>=0?r.length-n:0,r)}),m6=Xq,Yq=ie,Jq=vs,Zq=m6,eX=Yq(function(e,n){return Jq(Zq(e.length,n),e)}),tX=eX,nX=He,rX=vs,sX=nX(function(n,r,s){return rX(r[n],s[n])}),aX=sX,iX=ie,oX=tr,lX=Kd,cX=iX(function e(n,r){if(!lX(r)&&!oX(r))return r;var s=r instanceof Array?[]:{},a,i,o;for(i in r)a=n[i],o=typeof a,s[i]=o==="function"?a(r[i]):a&&o==="object"?e(a,r[i]):r[i];return s}),AX=cX,uX=hi,dX=qt,hX=function(){function e(n,r){this.xf=r,this.f=n,this.found=!1}return e.prototype["@@transducer/init"]=dX.init,e.prototype["@@transducer/result"]=function(n){return this.found||(n=this.xf["@@transducer/step"](n,void 0)),this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)&&(this.found=!0,n=uX(this.xf["@@transducer/step"](n,r))),n},e}();function fX(e){return function(n){return new hX(e,n)}}var gX=fX,mX=ie,pX=Qt,yX=gX,vX=mX(pX(["find"],yX,function(n,r){for(var s=0,a=r.length;s<a;){if(n(r[s]))return r[s];s+=1}})),xX=vX,wX=hi,bX=qt,_X=function(){function e(n,r){this.xf=r,this.f=n,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=bX.init,e.prototype["@@transducer/result"]=function(n){return this.found||(n=this.xf["@@transducer/step"](n,-1)),this.xf["@@transducer/result"](n)},e.prototype["@@transducer/step"]=function(n,r){return this.idx+=1,this.f(r)&&(this.found=!0,n=wX(this.xf["@@transducer/step"](n,this.idx))),n},e}();function CX(e){return function(n){return new _X(e,n)}}var BX=CX,SX=ie,kX=Qt,jX=BX,NX=SX(kX([],jX,function(n,r){for(var s=0,a=r.length;s<a;){if(n(r[s]))return s;s+=1}return-1})),EX=NX,TX=qt,FX=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=TX.init,e.prototype["@@transducer/result"]=function(n){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](n,this.last))},e.prototype["@@transducer/step"]=function(n,r){return this.f(r)&&(this.last=r),n},e}();function UX(e){return function(n){return new FX(e,n)}}var IX=UX,PX=ie,QX=Qt,MX=IX,DX=PX(QX([],MX,function(n,r){for(var s=r.length-1;s>=0;){if(n(r[s]))return r[s];s-=1}})),RX=DX,$X=qt,OX=function(){function e(n,r){this.xf=r,this.f=n,this.idx=-1,this.lastIdx=-1}return e.prototype["@@transducer/init"]=$X.init,e.prototype["@@transducer/result"]=function(n){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](n,this.lastIdx))},e.prototype["@@transducer/step"]=function(n,r){return this.idx+=1,this.f(r)&&(this.lastIdx=this.idx),n},e}();function LX(e){return function(n){return new OX(e,n)}}var HX=LX,zX=ie,KX=Qt,GX=HX,WX=zX(KX([],GX,function(n,r){for(var s=r.length-1;s>=0;){if(n(r[s]))return s;s-=1}return-1})),VX=WX,qX=Le,XX=W3,YX=qX(XX(!0)),JX=YX,ZX=Le,eY=kn,tY=ZX(function(n){return eY(n.length,function(r,s){var a=Array.prototype.slice.call(arguments,0);return a[0]=s,a[1]=r,n.apply(this,a)})}),p6=tY,nY=qd,rY=ie,sY=rY(nY("forEach",function(n,r){for(var s=r.length,a=0;a<s;)n(r[a]),a+=1;return r})),aY=sY,iY=ie,oY=Ws,lY=iY(function(n,r){for(var s=oY(r),a=0;a<s.length;){var i=s[a];n(r[i],i,r),a+=1}return r}),cY=lY,AY=Le,uY=AY(function(n){for(var r={},s=0;s<n.length;)r[n[s][0]]=n[s][1],s+=1;return r}),dY=uY,hY=qd,fY=ie,gY=Cm,mY=fY(hY("groupBy",gY(function(e,n){return e.push(n),e},[]))),pY=mY,yY=ie,vY=yY(function(e,n){for(var r=[],s=0,a=n.length;s<a;){for(var i=s+1;i<a&&e(n[i-1],n[i]);)i+=1;r.push(n.slice(s,i)),s=i}return r}),xY=vY,wY=ie,bY=wY(function(n,r){return n>r}),_Y=bY,CY=ie,BY=CY(function(n,r){return n>=r}),SY=BY,kY=ie,jY=gr,qB=Wd,NY=kY(function(n,r){if(n.length===0||qB(r))return!1;for(var s=r,a=0;a<n.length;)if(!qB(s)&&jY(n[a],s))s=s[n[a]],a+=1;else return!1;return!0}),y6=NY,EY=ie,TY=y6,FY=EY(function(n,r){return TY([n],r)}),UY=FY,IY=ie,PY=Wd,QY=IY(function(n,r){return PY(r)?!1:n in r}),MY=QY,XB=U3,v6=function(e,n){switch(arguments.length){case 0:return v6;case 1:return function(){return function r(s){switch(arguments.length){case 0:return r;default:return XB(e,s)}}}();default:return XB(e,n)}},DY=v6,RY=He,$Y=kn,OY=RY(function(n,r,s){return $Y(Math.max(n.length,r.length,s.length),function(){return n.apply(this,arguments)?r.apply(this,arguments):s.apply(this,arguments)})}),LY=OY,HY=fm,zY=HY(1),KY=zY,GY=jb,WY=ie,VY=WY(GY),qY=VY,XY=Cm,YY=XY(function(e,n){return n},null),JY=YY,ZY=ie,eJ=P3,tJ=tr,nJ=ZY(function(n,r){return typeof r.indexOf=="function"&&!tJ(r)?r.indexOf(n):eJ(r,n,0)}),rJ=nJ,sJ=Vs,aJ=sJ(0,-1),iJ=aJ,oJ=Ld,lJ=He,cJ=Nb,AJ=lJ(function(n,r,s){return cJ(function(a){return oJ(n,a,s)},r)}),uJ=AJ,dJ=He,hJ=dJ(function(n,r,s){n=n<s.length&&n>=0?n:s.length;var a=Array.prototype.slice.call(s,0);return a.splice(n,0,r),a}),fJ=hJ,gJ=He,mJ=gJ(function(n,r,s){return n=n<s.length&&n>=0?n:s.length,[].concat(Array.prototype.slice.call(s,0,n),r,Array.prototype.slice.call(s,n))}),pJ=mJ,yJ=Xd,YB=qt,vJ=function(){function e(n,r){this.xf=r,this.f=n,this.set=new yJ}return e.prototype["@@transducer/init"]=YB.init,e.prototype["@@transducer/result"]=YB.result,e.prototype["@@transducer/step"]=function(n,r){return this.set.add(this.f(r))?this.xf["@@transducer/step"](n,r):n},e}();function xJ(e){return function(n){return new vJ(e,n)}}var wJ=xJ,bJ=Xd,_J=ie,CJ=Qt,BJ=wJ,SJ=_J(CJ([],BJ,function(e,n){for(var r=new bJ,s=[],a=0,i,o;a<n.length;)o=n[a],i=e(o),r.add(i)&&s.push(o),a+=1;return s})),x6=SJ,kJ=_m,jJ=x6,NJ=jJ(kJ),zb=NJ,EJ=ie,TJ=Nb,FJ=Xd,UJ=zb,IJ=EJ(function(n,r){for(var s=new FJ,a=0;a<n.length;a+=1)s.add(n[a]);return UJ(TJ(s.has.bind(s),r))}),PJ=IJ,QJ=qd,MJ=ie,DJ=MJ(QJ("intersperse",function(n,r){for(var s=[],a=0,i=r.length;a<i;)a===i-1?s.push(r[a]):s.push(r[a],n),a+=1;return s})),RJ=DJ,$J=gr;function OJ(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1,s=arguments.length;r<s;){var a=arguments[r];if(a!=null)for(var i in a)$J(i,a)&&(n[i]=a[i]);r+=1}return n}var Bm=typeof Object.assign=="function"?Object.assign:OJ,LJ=ie,HJ=LJ(function(n,r){var s={};return s[n]=r,s}),w6=HJ,zJ=Bm,Kb=bm,b6=mm,KJ=Bb,GJ=w6,WJ={"@@transducer/init":Array,"@@transducer/step":function(e,n){return e.push(n),e},"@@transducer/result":Kb},VJ={"@@transducer/init":String,"@@transducer/step":function(e,n){return e+n},"@@transducer/result":Kb},qJ={"@@transducer/init":Object,"@@transducer/step":function(e,n){return zJ(e,b6(n)?GJ(n[0],n[1]):n)},"@@transducer/result":Kb};function XJ(e){if(KJ(e))return e;if(b6(e))return WJ;if(typeof e=="string")return VJ;if(typeof e=="object")return qJ;throw new Error("Cannot create transformer for "+e)}var YJ=XJ,JJ=He,ZJ=Bb,eZ=fl,tZ=YJ,nZ=JJ(function(n,r,s){var a=r(ZJ(n)?n:tZ(n));return eZ(a,a["@@transducer/init"](),s)}),rZ=nZ,sZ=Le,aZ=gr,iZ=Ws,oZ=sZ(function(n){for(var r=iZ(n),s=r.length,a=0,i={};a<s;){var o=r[a],c=n[o],A=aZ(c,i)?i[c]:i[c]=[];A[A.length]=o,a+=1}return i}),lZ=oZ,cZ=Le,AZ=Ws,uZ=cZ(function(n){for(var r=AZ(n),s=r.length,a=0,i={};a<s;){var o=r[a];i[n[o]]=o,a+=1}return i}),dZ=uZ,hZ=ie,fZ=Vd,gZ=kn,mZ=AA,pZ=hZ(function(n,r){return gZ(n+1,function(){var s=arguments[n];if(s!=null&&fZ(s[r]))return s[r].apply(s,Array.prototype.slice.call(arguments,0,n));throw new TypeError(mZ(s)+' does not have a method named "'+r+'"')})}),Yd=pZ,yZ=ie,vZ=yZ(function(n,r){return r instanceof n||r!=null&&(r.constructor===n||n.name==="Object"&&typeof r=="object")}),_6=vZ,xZ=Le,wZ=g6,bZ=vs,_Z=xZ(function(n){return n!=null&&bZ(n,wZ(n))}),CZ=_Z,BZ=Wd,SZ=Le,kZ=SZ(function(n){return!BZ(n)}),jZ=kZ,NZ=Yd,EZ=NZ(1,"join"),TZ=EZ,FZ=Le,UZ=i6,IZ=FZ(function(n){return UZ(function(){return Array.prototype.slice.call(arguments,0)},n)}),C6=IZ,PZ=Le,QZ=PZ(function(n){var r,s=[];for(r in n)s[s.length]=r;return s}),MZ=QZ,DZ=ie,RZ=tr,$Z=vs,OZ=DZ(function(n,r){if(typeof r.lastIndexOf=="function"&&!RZ(r))return r.lastIndexOf(n);for(var s=r.length-1;s>=0;){if($Z(r[s],n))return s;s-=1}return-1}),LZ=OZ;function HZ(e){return Object.prototype.toString.call(e)==="[object Number]"}var B6=HZ,zZ=Le,KZ=B6,GZ=zZ(function(n){return n!=null&&KZ(n.length)?n.length:NaN}),S6=GZ,WZ=ie,VZ=wa,qZ=WZ(function(n,r){return function(s){return function(a){return VZ(function(i){return r(i,a)},s(n(a)))}}}),Sm=qZ,XZ=He,YZ=T3,JZ=ym,ZZ=XZ(function(n,r,s){return YZ(n,JZ(r),s)}),k6=ZZ,eee=Le,tee=Sm,nee=dl,ree=k6,see=eee(function(n){return tee(nee(n),ree(n))}),aee=see,iee=ie,oee=ho,lee=dl,cee=iee(function(n,r){return n.map(function(s){for(var a=r,i=0,o;i<s.length;){if(a==null)return;o=s[i],a=oee(o)?lee(o,a):a[o],i+=1}return a})}),j6=cee,Aee=ie,uee=j6,dee=Aee(function(n,r){return uee([n],r)[0]}),dA=dee,hee=Le,fee=Ub,gee=Sm,mee=dA,pee=hee(function(n){return gee(mee(n),fee(n))}),yee=pee,vee=Le,xee=Ib,wee=Sm,bee=hl,_ee=vee(function(n){return wee(bee(n),xee(n))}),Cee=_ee,Bee=ie,See=Bee(function(n,r){return n<r}),kee=See,jee=ie,Nee=jee(function(n,r){return n<=r}),Eee=Nee,Tee=He,Fee=Tee(function(n,r,s){for(var a=0,i=s.length,o=[],c=[r];a<i;)c=n(c[0],s[a]),o[a]=c[1],a+=1;return[c[0],o]}),Uee=Fee,Iee=He,Pee=Iee(function(n,r,s){for(var a=s.length-1,i=[],o=[r];a>=0;)o=n(o[0],s[a]),i[a]=o[1],a-=1;return[o[0],i]}),Qee=Pee,Mee=zd,Dee=ie,Ree=Ws,$ee=Dee(function(n,r){return Mee(function(s,a){return s[a]=n(r[a],a,r),s},{},Ree(r))}),Oee=$ee,Lee=ie,Hee=Lee(function(n,r){return r.match(n)||[]}),zee=Hee,Kee=ie,JB=ho,Gee=Kee(function(n,r){return JB(n)?!JB(r)||r<1?NaN:(n%r+r)%r:NaN}),Wee=Gee,Vee=He,qee=ul,Xee=Vee(function(n,r,s){var a=n(s);return qee(n(r),a)===a?s:r}),Yee=Xee,Jee=fm,Zee=fi,ete=Zee(Jee,0),N6=ete,tte=Le,nte=N6,rte=tte(function(n){return nte(n)/n.length}),E6=rte,ste=Le,ate=E6,ite=ste(function(n){var r=n.length;if(r===0)return NaN;var s=2-r%2,a=(r-s)/2;return ate(Array.prototype.slice.call(n,0).sort(function(i,o){return i<o?-1:i>o?1:0}).slice(a,a+s))}),ote=ite,lte=xa,cte=ie,Ate=gr,ute=cte(function(n,r){var s={};return lte(r.length,function(){var a=n.apply(this,arguments);return Ate(a,s)||(s[a]=r.apply(this,arguments)),s[a]})}),dte=ute,hte=Bm,fte=Le,gte=fte(function(n){return hte.apply(null,[{}].concat(n))}),mte=gte,pte=He,Oh=gr,yte=pte(function(n,r,s){var a={},i;r=r||{},s=s||{};for(i in r)Oh(i,r)&&(a[i]=Oh(i,s)?n(i,r[i],s[i]):r[i]);for(i in s)Oh(i,s)&&!Oh(i,a)&&(a[i]=s[i]);return a}),Gb=yte,vte=He,ZB=Kd,xte=Gb,wte=vte(function e(n,r,s){return xte(function(a,i,o){return ZB(i)&&ZB(o)?e(n,i,o):n(a,i,o)},r,s)}),km=wte,bte=ie,_te=km,Cte=bte(function(n,r){return _te(function(s,a,i){return a},n,r)}),Bte=Cte,Ste=ie,kte=km,jte=Ste(function(n,r){return kte(function(s,a,i){return i},n,r)}),T6=jte,Nte=He,Ete=km,Tte=Nte(function(n,r,s){return Ete(function(a,i,o){return n(i,o)},r,s)}),Fte=Tte,Ute=Bm,Ite=ie,Pte=Ite(function(n,r){return Ute({},r,n)}),Qte=Pte,Mte=Bm,Dte=ie,Rte=Dte(function(n,r){return Mte({},n,r)}),$te=Rte,Ote=He,Lte=Gb,Hte=Ote(function(n,r,s){return Lte(function(a,i,o){return n(i,o)},r,s)}),zte=Hte,Kte=ie,e5=AA,Gte=Kte(function(n,r){if(n===r)return n;function s(A,u){if(A<u!=u<A)return u<A?u:A}var a=s(n,r);if(a!==void 0)return a;var i=s(typeof n,typeof r);if(i!==void 0)return i===typeof n?n:r;var o=e5(n),c=s(o,e5(r));return c!==void 0?c===o?n:r:n}),F6=Gte,Wte=He,Vte=F6,qte=Wte(function(n,r,s){var a=n(s);return Vte(n(r),a)===a?s:r}),Xte=qte,Yte=tr,Jte=ho;function Zte(e,n,r){if(Jte(e)&&Yte(r)){var s=[].concat(r);return s[e]=n(s[e]),s}var a={};for(var i in r)a[i]=r[i];return a[e]=n(a[e]),a}var ene=Zte,tne=He,nne=tr,rne=Kd,sne=gr,ane=Fb,ine=ene,one=tne(function e(n,r,s){if(!rne(s)&&!nne(s)||n.length===0)return s;var a=n[0];if(!sne(a,s))return s;if(n.length===1)return ine(a,r,s);var i=e(Array.prototype.slice.call(n,1),r,s[a]);return i===s[a]?s:ane(a,i,s)}),U6=one,lne=He,cne=U6,Ane=lne(function(n,r,s){return cne([n],r,s)}),une=Ane,dne=ie,hne=dne(function(n,r){return n%r}),fne=hne,gne=He,mne=gne(function(e,n,r){var s=r.length,a=r.slice(),i=e<0?s+e:e,o=n<0?s+n:n,c=a.splice(i,1);return i<0||i>=r.length||o<0||o>=r.length?r:[].concat(a.slice(0,o)).concat(c).concat(a.slice(o,r.length))}),pne=mne,yne=ie,vne=yne(function(n,r){return n*r}),I6=vne,xne=T6,wne=ie,bne=wne((e,n)=>r=>e.call(globalThis,xne(n,r))),_ne=bne,Cne=Le,Bne=Cne(function(n){return-n}),Sne=Bne,kne=Q3,jne=ie,Nne=F3,Ene=jne(function(n,r){return Nne(kne(n),r)}),Tne=Ene,Fne=Le,Une=kn,Ine=dl,Pne=Fne(function(n){var r=n<0?1:n+1;return Une(r,function(){return Ine(n,arguments)})}),Qne=Pne,Mne=He,Dne=Mne(function(n,r,s){return n(r(s))}),Rne=Dne,$ne=ie,One=$ne(function(n,r){return typeof n["fantasy-land/of"]=="function"?n["fantasy-land/of"](r):typeof n.of=="function"?n.of(r):[r]}),Lne=One,Hne=ie,zne=Hne(function(n,r){for(var s={},a={},i=0,o=n.length;i<o;)a[n[i]]=1,i+=1;for(var c in r)a.hasOwnProperty(c)||(s[c]=r[c]);return s}),Kne=zne,Gne=Od,Wne=Gne(4,[],function(n,r,s,a){return n(r(s),r(a))}),Vne=Wne,qne=xa,Xne=Le,Yne=Xne(function(n){var r=!1,s;return qne(n.length,function(){return r||(r=!0,s=n.apply(this,arguments)),s})}),Jne=Yne,Zne=Vd,ere=D3;function tre(e,n){if(n==null||!Zne(n.then))throw new TypeError("`"+e+"` expected a Promise, received "+ere(n,[]))}var P6=tre,nre=ie,rre=P6,sre=nre(function(n,r){return rre("otherwise",r),r.then(null,n)}),are=sre,ire=He,Q6=function(e){return{value:e,map:function(n){return Q6(n(e))}}},ore=ire(function(n,r,s){return n(function(a){return Q6(r(a))})(s).value}),M6=ore,lre=ie,cre=lre(function(n,r){return[n,r]}),Are=cre,ure=xa,dre=ie;function hre(e){return dre(function(n,r){return ure(Math.max(0,n.length-r.length),function(){return n.apply(this,e(r,arguments))})})}var D6=hre,fre=ys,gre=D6,mre=gre(fre),pre=mre,yre=ys,vre=D6,xre=p6,wre=vre(xre(yre)),bre=wre,_re=Eb,Cre=C6,Bre=gm,Sre=Cre([_re,Bre]),kre=Sre,jre=He,Nre=vs,Ere=dA,Tre=jre(function(n,r,s){return Nre(Ere(r,s),n)}),Fre=Tre,Ure=He,Ire=$b,Pre=dA,Qre=Ure(function(n,r,s){return Ire(n,Pre(r,s))}),Mre=Qre,Dre=He,Rre=dA,$re=Dre(function(n,r,s){return n(Rre(r,s))}),Ore=$re,Lre=ie,Hre=Lre(function(n,r){for(var s={},a=0;a<n.length;)n[a]in r&&(s[n[a]]=r[n[a]]),a+=1;return s}),zre=Hre,Kre=ie,Gre=Kre(function(n,r){for(var s={},a=0,i=n.length;a<i;){var o=n[a];s[o]=r[o],a+=1}return s}),R6=Gre,Wre=ie,Vre=Wre(function(n,r){var s={};for(var a in r)n(r[a],a,r)&&(s[a]=r[a]);return s}),qre=Vre,Xre=ys,Yre=ie,Jre=Yre(function(n,r){return Xre([n],r)}),$6=Jre,Zre=I6,ese=fi,tse=ese(Zre,1),nse=tse,rse=ie,sse=kn,ase=rse(function(n,r){return sse(r.length,function(){for(var s=[],a=0;a<r.length;)s.push(r[a].call(this,arguments[a])),a+=1;return n.apply(this,s.concat(Array.prototype.slice.call(arguments,r.length)))})}),O6=ase,ise=Hd,ose=_m,lse=R6,cse=O6,Ase=cse(ise,[lse,ose]),use=Ase;function dse(e,n,r){return function(s){return n(r(e(s)))}}var L6=dse,t5=qt,hse=L6,fse=function(){function e(n,r,s){this.xf=s,this.f=n,this.g=r}return e.prototype["@@transducer/init"]=t5.init,e.prototype["@@transducer/result"]=t5.result,e.prototype["@@transducer/step"]=function(n,r){return this.xf["@@transducer/step"](n,hse(this.f,this.g,r))},e}();function gse(e,n){return function(r){return new fse(e,n,r)}}var mse=gse,pse=He,yse=Qt,vse=L6,xse=mse,wse=pse(yse(["fantasy-land/promap","promap"],xse,vse)),bse=wse,_se=He,Cse=hl,Bse=vs,Sse=_se(function(n,r,s){return Bse(n,Cse(r,s))}),kse=Sse,jse=He,Nse=hl,Ese=_6,Tse=jse(function(n,r,s){return Ese(n,Nse(r,s))}),Fse=Tse,Use=He,Ise=$b,Pse=hl,Qse=Use(function(n,r,s){return Ise(n,Pse(r,s))}),Mse=Qse,Dse=He,Rse=hl,$se=Dse(function(n,r,s){return n(Rse(r,s))}),Ose=$se,Lse=ie,Hse=dA,zse=Lse(function(n,r){return n.map(function(s){return Hse([s],r)})}),Kse=zse,Gse=ie,n5=B6,Wse=Gse(function(n,r){if(!(n5(n)&&n5(r)))throw new TypeError("Both arguments to range must be numbers");for(var s=[],a=n;a<r;)s.push(a),a+=1;return s}),Vse=Wse,qse=He,Xse=qse(function(n,r,s){for(var a=s.length-1;a>=0;){if(r=n(s[a],r),r&&r["@@transducer/reduced"]){r=r["@@transducer/value"];break}a-=1}return r}),H6=Xse,Yse=Od,Jse=fl,Zse=pm,eae=hi,tae=Yse(4,[],function(n,r,s,a){var i=Zse(function(o,c){return n(o,c)?r(o,c):eae(o)});return Jse(i,s,a)}),nae=tae,rae=Le,sae=hi,aae=rae(sae),iae=aae,oae=ie,lae=oae(function(n,r){var s=Number(r),a=0,i;if(s<0||isNaN(s))throw new RangeError("n must be a non-negative number");for(i=[];a<s;)i.push(n(a)),a+=1;return i}),z6=lae,cae=ie,Aae=ym,uae=z6,dae=cae(function(n,r){return uae(Aae(n),r)}),hae=dae,fae=He,gae=fae(function(n,r,s){return s.replace(n,r)}),mae=gae,pae=He,yae=qt,r5="@@transducer/init",dy="@@transducer/step",vae=function(){function e(n,r,s){this.xf=s,this.f=n,this.acc=r}return e.prototype[r5]=function(){return this.xf[dy](this.xf[r5](),this.acc)},e.prototype["@@transducer/result"]=yae.result,e.prototype[dy]=function(n,r){return n["@@transducer/reduced"]?n:(this.acc=this.f(this.acc,r),this.xf[dy](n,this.acc))},e}(),xae=pae(function(n,r,s){return new vae(n,r,s)}),wae=xae,bae=He,_ae=Qt,Cae=wae,Bae=bae(_ae([],Cae,function(n,r,s){for(var a=0,i=s.length,o=[r];a<i;)r=n(r,s[a]),o[a+1]=r,a+=1;return o})),Sae=Bae,kae=ie,jae=Tb,Nae=wa,Eae=$6,Tae=H6,s5=bm,Fae=kae(function(n,r){var s=typeof n["fantasy-land/of"]=="function"?n["fantasy-land/of"]:typeof n.of=="function"?n.of:n,a={"fantasy-land/of":s};return typeof r["fantasy-land/traverse"]=="function"?r["fantasy-land/traverse"](a,s5):typeof r.traverse=="function"?r.traverse(a,s5):Tae(function(i,o){return jae(Nae(Eae,i),o)},s([]),r)}),K6=Fae,Uae=He,Iae=ym,Pae=M6,Qae=Uae(function(n,r,s){return Pae(n,Iae(r),s)}),Mae=Qae,Dae=ie,Rae=Dae(function(n,r){return Array.prototype.slice.call(r,0).sort(n)}),$ae=Rae,Oae=ie,Lae=Oae(function(n,r){return Array.prototype.slice.call(r,0).sort(function(s,a){var i=n(s),o=n(a);return i<o?-1:i>o?1:0})}),Hae=Lae,zae=ie,Kae=zae(function(n,r){return Array.prototype.slice.call(r,0).sort(function(s,a){for(var i=0,o=0;i===0&&o<n.length;)i=n[o](s,a),o+=1;return i})}),Gae=Kae,Wae=Yd,Vae=Wae(1,"split"),qae=Vae,Xae=ie,Yae=S6,a5=Vs,Jae=Xae(function(n,r){return[a5(0,n,r),a5(n,Yae(r),r)]}),Zae=Jae,eie=ie,tie=Vs,nie=eie(function(n,r){if(n<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var s=[],a=0;a<r.length;)s.push(tie(a,a+=n,r));return s}),rie=nie,sie=ie,aie=sie(function(n,r){for(var s=0,a=r.length,i=[];s<a&&!n(r[s]);)i.push(r[s]),s+=1;return[i,Array.prototype.slice.call(r,s)]}),iie=aie,oie=Od,lie=oie(2,[],function(n,r){for(var s=[],a=[],i=0;i<r.length;i=i+1)n(r[i])||a.push(r[i]),(i<r.length-1&&n(r[i+1])||i===r.length-1)&&a.length>0&&(s.push(a),a=[]);return s}),cie=lie,Aie=ie,uie=vs,die=Ob,hie=Aie(function(e,n){return uie(die(e.length,n),e)}),fie=hie,gie=ie,mie=gie(function(n,r){return Number(n)-Number(r)}),pie=mie,yie=He,G6=tr,vie=uA,xie=Z3,wie=function(e,n,r){var s=xie(r),a=Object.getOwnPropertyNames(s);if(a.includes(e)&&a.includes(n)){var i=s[e];s[e]=s[n],s[n]=i}return s},W6=function(e,n,r){var s=r.length,a=r.slice(),i=e<0?s+e:e,o=n<0?s+n:n,c=Math.min(i,o),A=Math.max(i,o);return i<0||i>s||o<0||o>s||i===o||(a=[].concat(a.slice(0,c)).concat(a[A]).concat(a.slice(c+1,A)).concat(a[c]).concat(a.slice(A+1,s))),a},bie=function(e,n,r){var s=W6(e,n,r);return G6(s)?s.join(""):s},_ie=yie(function(e,n,r){return G6(r)?W6(e,n,r):vie(r)?bie(e,n,r):wie(e,n,r)}),Cie=_ie,Bie=ie,Sie=Db,i5=o6,kie=Bie(function(n,r){return Sie(i5(n,r),i5(r,n))}),jie=kie,Nie=He,Eie=Db,o5=l6,Tie=Nie(function(n,r,s){return Eie(o5(n,r,s),o5(n,s,r))}),Fie=Tie,Uie=ie,Iie=Vs,Pie=Uie(function(n,r){for(var s=r.length-1;s>=0&&n(r[s]);)s-=1;return Iie(s+1,1/0,r)}),Qie=Pie,Mie=hi,l5=qt,Die=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=l5.init,e.prototype["@@transducer/result"]=l5.result,e.prototype["@@transducer/step"]=function(n,r){return this.f(r)?this.xf["@@transducer/step"](n,r):Mie(n)},e}();function Rie(e){return function(n){return new Die(e,n)}}var $ie=Rie,Oie=ie,Lie=Qt,Hie=$ie,zie=Vs,Kie=Oie(Lie(["takeWhile"],Hie,function(n,r){for(var s=0,a=r.length;s<a&&n(r[s]);)s+=1;return zie(0,s,r)})),Gie=Kie,c5=qt,Wie=function(){function e(n,r){this.xf=r,this.f=n}return e.prototype["@@transducer/init"]=c5.init,e.prototype["@@transducer/result"]=c5.result,e.prototype["@@transducer/step"]=function(n,r){return this.f(r),this.xf["@@transducer/step"](n,r)},e}();function Vie(e){return function(n){return new Wie(e,n)}}var qie=Vie,Xie=ie,Yie=Qt,Jie=qie,Zie=Xie(Yie([],Jie,function(n,r){return n(r),r})),eoe=Zie;function toe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}var noe=toe,roe=Y3,soe=ie,aoe=noe,ioe=AA,ooe=soe(function(n,r){if(!aoe(n))throw new TypeError("test requires a value of type RegExp as its first argument; received "+ioe(n));return roe(n).test(r)}),loe=ooe,coe=ie,Aoe=P6,uoe=coe(function(n,r){return Aoe("andThen",r),r.then(n)}),doe=uoe,hoe=Yd,foe=hoe(0,"toLowerCase"),goe=foe,moe=Le,poe=gr,yoe=moe(function(n){var r=[];for(var s in n)poe(s,n)&&(r[r.length]=[s,n[s]]);return r}),voe=yoe,xoe=Le,woe=xoe(function(n){var r=[];for(var s in n)r[r.length]=[s,n[s]];return r}),boe=woe,_oe=Yd,Coe=_oe(0,"toUpperCase"),Boe=Coe,Soe=fl,koe=pm,joe=kn,Noe=joe(4,function(n,r,s,a){return Soe(n(typeof r=="function"?koe(r):r),s,a)}),Eoe=Noe,Toe=Le,Foe=Toe(function(n){for(var r=0,s=[];r<n.length;){for(var a=n[r],i=0;i<a.length;)typeof s[i]>"u"&&(s[i]=[]),s[i].push(a[i]),i+=1;r+=1}return s}),Uoe=Foe,Ioe=He,Poe=wa,Qoe=K6,Moe=Ioe(function(n,r,s){var a=typeof n["fantasy-land/of"]=="function"?n["fantasy-land/of"]:typeof n.of=="function"?n.of:n,i={"fantasy-land/of":a};return typeof s["fantasy-land/traverse"]=="function"?s["fantasy-land/traverse"](i,r):typeof s.traverse=="function"?s.traverse(i,r):Qoe(i,Poe(r,s))}),Doe=Moe,A5=Le,PA=`	
\v\f\r \u2028\u2029\uFEFF`,Roe="",$oe=typeof String.prototype.trim=="function",Ooe=A5(!$oe||PA.trim()||!Roe.trim()?function(n){var r=new RegExp("^["+PA+"]["+PA+"]*"),s=new RegExp("["+PA+"]["+PA+"]*$");return n.replace(r,"").replace(s,"")}:function(n){return n.trim()}),Loe=Ooe,Hoe=xa,zoe=ys,Koe=ie,Goe=Koe(function(n,r){return Hoe(n.length,function(){try{return n.apply(this,arguments)}catch(s){return r.apply(this,zoe([s],arguments))}})}),Woe=Goe,Voe=Le,qoe=Voe(function(n){return function(){return n(Array.prototype.slice.call(arguments,0))}}),Xoe=qoe,Yoe=Le,Joe=xm,Zoe=Yoe(function(n){return Joe(1,n)}),ele=Zoe,tle=ie,nle=kn,rle=tle(function(n,r){return nle(n,function(){for(var s=1,a=r,i=0,o;s<=n&&typeof a=="function";)o=s===n?arguments.length:i+a.length,a=a.apply(this,Array.prototype.slice.call(arguments,i,o)),s+=1,i=o;return a})}),sle=rle,ale=ie,ile=ale(function(n,r){for(var s=n(r),a=[];s&&s.length;)a[a.length]=s[0],s=n(s[1]);return a}),ole=ile,lle=ys,cle=ie,Ale=n6,ule=zb,dle=cle(Ale(ule,lle)),hle=dle,fle=Ld,u5=qt,gle=function(){function e(n,r){this.xf=r,this.pred=n,this.items=[]}return e.prototype["@@transducer/init"]=u5.init,e.prototype["@@transducer/result"]=u5.result,e.prototype["@@transducer/step"]=function(n,r){return fle(this.pred,r,this.items)?n:(this.items.push(r),this.xf["@@transducer/step"](n,r))},e}();function mle(e){return function(n){return new gle(e,n)}}var ple=mle,yle=ie,vle=Qt,xle=Ld,wle=ple,ble=yle(vle([],wle,function(e,n){for(var r=0,s=n.length,a=[],i;r<s;)i=n[r],xle(e,i,a)||(a[a.length]=i),r+=1;return a})),V6=ble,_le=ys,Cle=He,Ble=V6,Sle=Cle(function(n,r,s){return Ble(n,_le(r,s))}),kle=Sle,jle=He,Nle=jle(function(n,r,s){return n(s)?s:r(s)}),Ele=Nle,Tle=bm,Fle=X3,Ule=Fle(Tle),Ile=Ule,Ple=He,Qle=Ple(function(n,r,s){for(var a=s;!n(a);)a=r(a);return a}),Mle=Qle,Dle=ie,Rle=tr,$le=Hd,Ole=Fb,Lle=Dle(function(e,n){return e in n&&Rle(n[e])?$le(function(r){return Ole(e,r,n)},n[e]):[n]}),Hle=Lle,zle=Le,Kle=zle(function(n){var r,s=[];for(r in n)s[s.length]=n[r];return s}),Gle=Kle,Wle=ie,Vle=function(e){return{value:e,"fantasy-land/map":function(){return this}}},qle=Wle(function(n,r){return n(Vle)(r).value}),Xle=qle,Yle=He,Jle=Yle(function(n,r,s){return n(s)?r(s):s}),Zle=Jle,ece=ie,tce=gr,nce=ece(function(n,r){for(var s in n)if(tce(s,n)&&!n[s](r[s]))return!1;return!0}),q6=nce,rce=ie,sce=gr,ace=rce(function(n,r){for(var s in n)if(sce(s,n)&&n[s](r[s]))return!0;return!1}),ice=ace,oce=ie,lce=vs,cce=wa,Ace=q6,uce=oce(function(n,r){return Ace(cce(lce,n),r)}),dce=uce,hce=ie,fce=Xd,gce=gm,mce=hce(function(n,r){for(var s=new fce,a=0;a<n.length;a+=1)s.add(n[a]);return gce(s.has.bind(s),r)}),pce=mce,yce=ie,vce=yce(function(n,r){return!!(!n^!r)}),xce=vce,wce=ie,bce=wce(function(n,r){for(var s=0,a=n.length,i,o=r.length,c=[];s<a;){for(i=0;i<o;)c[c.length]=[n[s],r[i]],i+=1;s+=1}return c}),_ce=bce,Cce=ie,Bce=Cce(function(n,r){for(var s=[],a=0,i=Math.min(n.length,r.length);a<i;)s[a]=[n[a],r[a]],a+=1;return s}),Sce=Bce,kce=ie,jce=kce(function(n,r){for(var s=0,a=Math.min(n.length,r.length),i={};s<a;)i[n[s]]=r[s],s+=1;return i}),Nce=jce,Ece=He,Tce=Ece(function(n,r,s){for(var a=[],i=0,o=Math.min(r.length,s.length);i<o;)a[i]=n(r[i],s[i]),i+=1;return a}),Fce=Tce,Uce=kn,Ice=Le,Pce=Ice(function(n){return Uce(n.length,function(){var s=arguments;return function(){return n.apply(this,s)}})}),Qce=Pce;R.exports={};R.exports.F=lO;R.exports.T=AO;R.exports.__=uO;R.exports.add=fm;R.exports.addIndex=EO;R.exports.addIndexRight=PO;R.exports.adjust=T3;R.exports.all=F3;R.exports.allPass=ZH;R.exports.always=ym;R.exports.and=H3;R.exports.any=h9;R.exports.anyPass=x9;R.exports.ap=Tb;R.exports.aperture=H9;R.exports.append=W9;R.exports.apply=z3;R.exports.applySpec=cz;R.exports.applyTo=dz;R.exports.ascend=gz;R.exports.assoc=Ib;R.exports.assocPath=Ub;R.exports.binary=Pz;R.exports.bind=L3;R.exports.both=Xz;R.exports.call=Zz;R.exports.chain=X3;R.exports.clamp=CK;R.exports.clone=Z3;R.exports.collectBy=QK;R.exports.comparator=RK;R.exports.complement=KK;R.exports.compose=n6;R.exports.composeWith=TG;R.exports.concat=Db;R.exports.cond=$G;R.exports.construct=YG;R.exports.constructN=a6;R.exports.converge=i6;R.exports.count=lW;R.exports.countBy=SW;R.exports.curry=Rb;R.exports.curryN=kn;R.exports.dec=NW;R.exports.defaultTo=$b;R.exports.descend=IW;R.exports.difference=o6;R.exports.differenceWith=l6;R.exports.dissoc=sV;R.exports.dissocPath=A6;R.exports.divide=oV;R.exports.drop=u6;R.exports.dropLast=MV;R.exports.dropLastWhile=YV;R.exports.dropRepeats=dq;R.exports.dropRepeatsBy=wq;R.exports.dropRepeatsWith=Hb;R.exports.dropWhile=Eq;R.exports.either=Dq;R.exports.empty=g6;R.exports.endsWith=tX;R.exports.eqBy=h6;R.exports.eqProps=aX;R.exports.equals=vs;R.exports.evolve=AX;R.exports.filter=Eb;R.exports.find=xX;R.exports.findIndex=EX;R.exports.findLast=RX;R.exports.findLastIndex=VX;R.exports.flatten=JX;R.exports.flip=p6;R.exports.forEach=aY;R.exports.forEachObjIndexed=cY;R.exports.fromPairs=dY;R.exports.groupBy=pY;R.exports.groupWith=xY;R.exports.gt=_Y;R.exports.gte=SY;R.exports.has=UY;R.exports.hasIn=MY;R.exports.hasPath=y6;R.exports.head=r6;R.exports.identical=DY;R.exports.identity=_m;R.exports.ifElse=LY;R.exports.inc=KY;R.exports.includes=qY;R.exports.indexBy=JY;R.exports.indexOf=rJ;R.exports.init=iJ;R.exports.innerJoin=uJ;R.exports.insert=fJ;R.exports.insertAll=pJ;R.exports.intersection=PJ;R.exports.intersperse=RJ;R.exports.into=rZ;R.exports.invert=lZ;R.exports.invertObj=dZ;R.exports.invoker=Yd;R.exports.is=_6;R.exports.isEmpty=CZ;R.exports.isNil=Wd;R.exports.isNotNil=jZ;R.exports.join=TZ;R.exports.juxt=C6;R.exports.keys=Ws;R.exports.keysIn=MZ;R.exports.last=d6;R.exports.lastIndexOf=LZ;R.exports.length=S6;R.exports.lens=Sm;R.exports.lensIndex=aee;R.exports.lensPath=yee;R.exports.lensProp=Cee;R.exports.lift=wm;R.exports.liftN=G3;R.exports.lt=kee;R.exports.lte=Eee;R.exports.map=wa;R.exports.mapAccum=Uee;R.exports.mapAccumRight=Qee;R.exports.mapObjIndexed=Oee;R.exports.match=zee;R.exports.mathMod=Wee;R.exports.max=ul;R.exports.maxBy=Yee;R.exports.mean=E6;R.exports.median=ote;R.exports.memoizeWith=dte;R.exports.mergeAll=mte;R.exports.mergeDeepLeft=Bte;R.exports.mergeDeepRight=T6;R.exports.mergeDeepWith=Fte;R.exports.mergeDeepWithKey=km;R.exports.mergeLeft=Qte;R.exports.mergeRight=$te;R.exports.mergeWith=zte;R.exports.mergeWithKey=Gb;R.exports.min=F6;R.exports.minBy=Xte;R.exports.modify=une;R.exports.modifyPath=U6;R.exports.modulo=fne;R.exports.move=pne;R.exports.multiply=I6;R.exports.nAry=xm;R.exports.partialObject=_ne;R.exports.negate=Sne;R.exports.none=Tne;R.exports.not=e6;R.exports.nth=dl;R.exports.nthArg=Qne;R.exports.o=Rne;R.exports.objOf=w6;R.exports.of=Lne;R.exports.omit=Kne;R.exports.on=Vne;R.exports.once=Jne;R.exports.or=f6;R.exports.otherwise=are;R.exports.over=M6;R.exports.pair=Are;R.exports.partial=pre;R.exports.partialRight=bre;R.exports.partition=kre;R.exports.path=dA;R.exports.paths=j6;R.exports.pathEq=Fre;R.exports.pathOr=Mre;R.exports.pathSatisfies=Ore;R.exports.pick=zre;R.exports.pickAll=R6;R.exports.pickBy=qre;R.exports.pipe=t6;R.exports.pipeWith=s6;R.exports.pluck=Gd;R.exports.prepend=$6;R.exports.product=nse;R.exports.project=use;R.exports.promap=bse;R.exports.prop=hl;R.exports.propEq=kse;R.exports.propIs=Fse;R.exports.propOr=Mse;R.exports.propSatisfies=Ose;R.exports.props=Kse;R.exports.range=Vse;R.exports.reduce=fi;R.exports.reduceBy=Cm;R.exports.reduceRight=H6;R.exports.reduceWhile=nae;R.exports.reduced=iae;R.exports.reject=gm;R.exports.remove=c6;R.exports.repeat=hae;R.exports.replace=mae;R.exports.reverse=Mb;R.exports.scan=Sae;R.exports.sequence=K6;R.exports.set=Mae;R.exports.slice=Vs;R.exports.sort=$ae;R.exports.sortBy=Hae;R.exports.sortWith=Gae;R.exports.split=qae;R.exports.splitAt=Zae;R.exports.splitEvery=rie;R.exports.splitWhen=iie;R.exports.splitWhenever=cie;R.exports.startsWith=fie;R.exports.subtract=pie;R.exports.sum=N6;R.exports.swap=Cie;R.exports.symmetricDifference=jie;R.exports.symmetricDifferenceWith=Fie;R.exports.tail=Qb;R.exports.take=Ob;R.exports.takeLast=m6;R.exports.takeLastWhile=Qie;R.exports.takeWhile=Gie;R.exports.tap=eoe;R.exports.test=loe;R.exports.andThen=doe;R.exports.times=z6;R.exports.toLower=goe;R.exports.toPairs=voe;R.exports.toPairsIn=boe;R.exports.toString=AA;R.exports.toUpper=Boe;R.exports.transduce=Eoe;R.exports.transpose=Uoe;R.exports.traverse=Doe;R.exports.trim=Loe;R.exports.tryCatch=Woe;R.exports.type=Sb;R.exports.unapply=Xoe;R.exports.unary=ele;R.exports.uncurryN=sle;R.exports.unfold=ole;R.exports.union=hle;R.exports.unionWith=kle;R.exports.uniq=zb;R.exports.uniqBy=x6;R.exports.uniqWith=V6;R.exports.unless=Ele;R.exports.unnest=Ile;R.exports.until=Mle;R.exports.unwind=Hle;R.exports.update=k6;R.exports.useWith=O6;R.exports.values=K3;R.exports.valuesIn=Gle;R.exports.view=Xle;R.exports.when=Zle;R.exports.where=q6;R.exports.whereAny=ice;R.exports.whereEq=dce;R.exports.without=pce;R.exports.xor=xce;R.exports.xprod=_ce;R.exports.zip=Sce;R.exports.zipObj=Nce;R.exports.zipWith=Fce;R.exports.thunkify=Qce;var Jd=R.exports,X6={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.curried=void 0;const n=r=>s=>{if(s.length===0)return[[],[]];const a=[];s.forEach((c,A)=>{a.push([r[A],A,s[A]])}),a.sort(([c],[A])=>c-A);const i=[],o=[];return a.forEach(([c,A,u])=>{o.push(A),i.push(u)}),[i,o]};e.curried=n,e.default=(r,s)=>(0,e.curried)(r)(s)})(X6);var Y6={},jm={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.utilSumQ=$t.utilA=$t.sum=$t.score=$t.rankings=$t.ladderPairs=$t.gamma=$t.default=void 0;var Mce=Jd,Dce=Rce(Bt);function Rce(e){return e&&e.__esModule?e:{default:e}}const dd=(e,n)=>e+n;$t.sum=dd;const $ce=(e,n)=>e<n?0:e>n?1:.5;$t.score=$ce;const J6=(e,n=[])=>{const r=e.map((i,o)=>n[o]||o),s=new Array(e.length);let a=0;for(let i=0;i<r.length;i+=1)i>0&&r[i-1]<r[i]&&(a=i),s[i]=a;return s};$t.rankings=J6;const Oce=e=>n=>{const r=J6(n,e.rank);return n.map((s,a)=>[s.map(({mu:i})=>i).reduce(dd,0),s.map(({sigma:i})=>i*i).reduce(dd,0),s,r[a]])},Lce=e=>{const n=e.length,r=[void 0,...e.slice(0,n-1)],s=[...e.slice(1),void 0];return(0,Mce.zip)(r,s).map(([a,i])=>a!==void 0&&i!==void 0?[a,i]:a!==void 0&&i===void 0?[a]:a===void 0&&i!==void 0?[i]:[])};$t.ladderPairs=Lce;const Hce=e=>{const{BETASQ:n}=(0,Dce.default)(e);return r=>Math.sqrt(r.map(([s,a,i,o])=>a+n).reduce(dd,0))},zce=(e,n)=>e.map(([r,s,a,i])=>e.filter(([o,c,A,u])=>u>=i).map(([o,c,A,u])=>Math.exp(o/n)).reduce(dd,0));$t.utilSumQ=zce;const Kce=e=>e.map(([n,r,s,a])=>e.filter(([i,o,c,A])=>a===A).length);$t.utilA=Kce;const Z6=e=>e.gamma??((n,r,s,a,i,o)=>Math.sqrt(a)/n);$t.gamma=Z6;var Gce=e=>({utilC:Hce(e),teamRating:Oce(e),gamma:Z6(e)});$t.default=Gce;Object.defineProperty(jm,"__esModule",{value:!0});jm.default=void 0;var hy=qce($t),Wce=Vce(Bt);function Vce(e){return e&&e.__esModule?e:{default:e}}function eT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(eT=function(s){return s?r:n})(e)}function qce(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=eT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}const Xce=(e,n={})=>{const{EPSILON:r}=(0,Wce.default)(n),{utilC:s,teamRating:a,gamma:i}=(0,hy.default)(n),o=a(e),c=s(o),A=(0,hy.utilSumQ)(o,c),u=(0,hy.utilA)(o);return o.map((h,d)=>{const[f,g,m,y]=h,x=Math.exp(f/c),[p,v]=o.filter(([C,k,j,B])=>B<=y).reduce(([C,k],[j],B)=>{const E=x/A[B];return[C+(d===B?1-E:-E)/u[B],k+E*(1-E)/u[B]]},[0,0]),b=i(c,o.length,...h),w=p*(g/c),_=b*v*(g/c**2);return m.map(({mu:C,sigma:k})=>({mu:C+k**2/g*w,sigma:k*Math.sqrt(Math.max(1-k**2/g*_,r))}))})};var Yce=Xce;jm.default=Yce;var Nm={};Object.defineProperty(Nm,"__esModule",{value:!0});Nm.default=void 0;var d5=eAe($t),Jce=Zce(Bt);function Zce(e){return e&&e.__esModule?e:{default:e}}function tT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(tT=function(s){return s?r:n})(e)}function eAe(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=tT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}const tAe=(e,n={})=>{const{TWOBETASQ:r,EPSILON:s}=(0,Jce.default)(n),{teamRating:a,gamma:i}=(0,d5.default)(n),o=a(e);return o.map((c,A)=>{const[u,h,d,f]=c,[g,m]=o.filter((y,x)=>x!==A).reduce(([y,x],[p,v,b,w])=>{const _=Math.sqrt(h+v+r),C=1/(1+Math.exp((p-u)/_)),k=h/_,j=i(_,o.length,...c);return[y+k*((0,d5.score)(w,f)-C),x+j*k/_*C*(1-C)]},[0,0]);return d.map(({mu:y,sigma:x})=>{const p=x*x;return{mu:y+p/h*g,sigma:x*Math.sqrt(Math.max(1-p/h*m,s))}})})};var nAe=tAe;Nm.default=nAe;var Em={};Object.defineProperty(Em,"__esModule",{value:!0});Em.default=void 0;var rAe=Jd,fy=iAe($t),sAe=aAe(Bt);function aAe(e){return e&&e.__esModule?e:{default:e}}function nT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(nT=function(s){return s?r:n})(e)}function iAe(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=nT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}const oAe=(e,n={})=>{const{TWOBETASQ:r,EPSILON:s}=(0,sAe.default)(n),{teamRating:a,gamma:i}=(0,fy.default)(n),o=a(e),c=(0,fy.ladderPairs)(o);return(0,rAe.zip)(o,c).map(([A,u])=>{const[h,d,f,g]=A,[m,y]=u.reduce(([x,p],[v,b,w,_])=>{const C=Math.sqrt(d+b+r),k=1/(1+Math.exp((v-h)/C)),j=d/C,B=i(C,o.length,...A);return[x+j*((0,fy.score)(_,g)-k),p+B*j/C*k*(1-k)]},[0,0]);return f.map(({mu:x,sigma:p})=>{const v=p*p;return{mu:x+v/d*m,sigma:p*Math.sqrt(Math.max(1-v/d*y,s))}})})};var lAe=oAe;Em.default=lAe;var Tm={},fn={},rT={exports:{}},sT={exports:{}};(function(e,n){(function(r){const s=Math.PI*2;function a(i,o,c=null){var A,u;c?(A=c(),u=c()):(A=Math.random(),u=Math.random());var h=Math.sqrt(-2*Math.log(A))*Math.cos(s*u);return h*o+i}r(a)})(function(r){e.exports=r})})(sT);var cAe=sT.exports;(function(e,n){(function(r){const s=cAe;var a=function(u){var h=Math.abs(u),d=1/(1+h/2),f=d*Math.exp(-h*h-1.26551223+d*(1.00002368+d*(.37409196+d*(.09678418+d*(-.18628806+d*(.27886807+d*(-1.13520398+d*(1.48851587+d*(-.82215223+d*.17087277)))))))));return u>=0?f:2-f},i=function(u){if(u>=2)return-100;if(u<=0)return 100;for(var h=u<1?u:2-u,d=Math.sqrt(-2*Math.log(h/2)),f=-.70711*((2.30753+d*.27061)/(1+d*(.99229+d*.04481))-d),g=0;g<2;g++){var m=a(f)-h;f+=m/(1.1283791670955126*Math.exp(-(f*f))-f*m)}return u<1?f:-f},o=function(u,h){if(h<=0)throw new Error("Variance must be > 0 (but was "+h+")");this.mean=u,this.variance=h,this.standardDeviation=Math.sqrt(h)};o.prototype.pdf=function(u){var h=this.standardDeviation*Math.sqrt(2*Math.PI),d=Math.exp(-Math.pow(u-this.mean,2)/(2*this.variance));return d/h},o.prototype.cdf=function(u){return .5*a(-(u-this.mean)/(this.standardDeviation*Math.sqrt(2)))},o.prototype.ppf=function(u){return this.mean-this.standardDeviation*Math.sqrt(2)*i(2*u)},o.prototype.mul=function(u){if(typeof u=="number")return this.scale(u);var h=1/this.variance,d=1/u.variance;return A(h+d,h*this.mean+d*u.mean)},o.prototype.div=function(u){if(typeof u=="number")return this.scale(1/u);var h=1/this.variance,d=1/u.variance;return A(h-d,h*this.mean-d*u.mean)},o.prototype.add=function(u){return c(this.mean+u.mean,this.variance+u.variance)},o.prototype.sub=function(u){return c(this.mean-u.mean,this.variance+u.variance)},o.prototype.scale=function(u){return c(this.mean*u,this.variance*u*u)},o.prototype.random=function(u,h=null){let d=this.mean,f=this.standardDeviation;return Array(u).fill(0).map(()=>s(d,f,h))};var c=function(u,h){return new o(u,h)},A=function(u,h){return c(h/u,1/u)};r(c)})(function(r){e.exports=r})})(rT);var AAe=rT.exports;Object.defineProperty(fn,"__esModule",{value:!0});fn.wt=fn.w=fn.vt=fn.v=fn.phiMinor=fn.phiMajorInverse=fn.phiMajor=void 0;var uAe=dAe(AAe);function dAe(e){return e&&e.__esModule?e:{default:e}}const Wb=(0,uAe.default)(0,1),nl=e=>Wb.cdf(e);fn.phiMajor=nl;const hAe=e=>Wb.ppf(e);fn.phiMajorInverse=hAe;const Wc=e=>Wb.pdf(e);fn.phiMinor=Wc;const Cx=(e,n)=>{const r=e-n,s=nl(r);return s<Number.EPSILON?-r:Wc(r)/s};fn.v=Cx;const fAe=(e,n)=>{const r=e-n;return nl(r)<Number.EPSILON?e<0?1:0:Cx(e,n)*(Cx(e,n)+r)};fn.w=fAe;const Bx=(e,n)=>{const r=Math.abs(e),s=nl(n-r)-nl(-n-r);if(s<1e-5)return e<0?-e-n:-e+n;const a=Wc(-n-r)-Wc(n-r);return(e<0?-a:a)/s};fn.vt=Bx;const gAe=(e,n)=>{const r=Math.abs(e),s=nl(n-r)-nl(-n-r);return s<Number.EPSILON?1:((n-r)*Wc(n-r)+(n+r)*Wc(-n-r))/s+Bx(e,n)*Bx(e,n)};fn.wt=gAe;Object.defineProperty(Tm,"__esModule",{value:!0});Tm.default=void 0;var mAe=aT($t),pAe=aT(Bt),Lh=fn;function aT(e){return e&&e.__esModule?e:{default:e}}const yAe=(e,n={})=>{const{TWOBETASQ:r,EPSILON:s}=(0,pAe.default)(n),{teamRating:a,gamma:i}=(0,mAe.default)(n),o=a(e);return o.map((c,A)=>{const[u,h,d,f]=c,[g,m]=o.filter((y,x)=>A!==x).reduce(([y,x],[p,v,b,w])=>{const _=Math.sqrt(h+v+r),C=(u-p)/_,k=h/_,j=i(_,o.length,...c);if(w===f)return[y+k*(0,Lh.vt)(C,s/_),x+j*k/_*(0,Lh.wt)(C,s/_)];const B=w>f?1:-1;return[y+B*k*(0,Lh.v)(B*C,s/_),x+j*k/_*(0,Lh.w)(B*C,s/_)]},[0,0]);return d.map(({mu:y,sigma:x})=>{const p=x*x;return{mu:y+p/h*g,sigma:x*Math.sqrt(Math.max(1-p/h*m,s))}})})};var vAe=yAe;Tm.default=vAe;var Fm={};Object.defineProperty(Fm,"__esModule",{value:!0});Fm.default=void 0;var xAe=Jd,h5=_Ae($t),Hh=fn,wAe=bAe(Bt);function bAe(e){return e&&e.__esModule?e:{default:e}}function iT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(iT=function(s){return s?r:n})(e)}function _Ae(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=iT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}const CAe=(e,n={})=>{const{TWOBETASQ:r,EPSILON:s}=(0,wAe.default)(n),{teamRating:a,gamma:i}=(0,h5.default)(n),o=a(e),c=(0,h5.ladderPairs)(o);return(0,xAe.zip)(o,c).map(([A,u])=>{const[h,d,f,g]=A,[m,y]=u.reduce(([x,p],[v,b,w,_])=>{const C=2*Math.sqrt(d+b+r),k=(h-v)/C,j=d/C,B=i(C,o.length,...A);if(_===g)return[x+j*(0,Hh.vt)(k,s/C),p+B*j/C*(0,Hh.wt)(k,s/C)];const E=_>g?1:-1;return[x+E*j*(0,Hh.v)(E*k,s/C),p+B*j/C*(0,Hh.w)(E*k,s/C)]},[0,0]);return f.map(({mu:x,sigma:p})=>{const v=p*p;return{mu:x+v/d*m,sigma:p*Math.sqrt(Math.max(1-v/d*y,s))}})})};var BAe=CAe;Fm.default=BAe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"bradleyTerryFull",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"bradleyTerryPart",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"plackettLuce",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"thurstoneMostellerFull",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"thurstoneMostellerPart",{enumerable:!0,get:function(){return i.default}});var n=o(jm),r=o(Nm),s=o(Em),a=o(Tm),i=o(Fm);function o(c){return c&&c.__esModule?c:{default:c}}})(Y6);Object.defineProperty(dm,"__esModule",{value:!0});dm.default=void 0;var gy=Jd,f5=kAe(X6),SAe=Y6;function kAe(e){return e&&e.__esModule?e:{default:e}}const jAe=(e,n={})=>{var u;const r=n.model??SAe.plackettLuce;let s=e;if(n.tau){const h=n.tau*n.tau;s=e.map(d=>d.map(f=>({...f,sigma:Math.sqrt(f.sigma*f.sigma+h)})))}const a=n.rank??((u=n.score)==null?void 0:u.map(h=>-h))??(0,gy.range)(1,e.length+1),[i,o]=(0,f5.default)(a,s),c=r(i,{...n,rank:(0,gy.sortBy)(gy.identity,a)});let[A]=(0,f5.default)(o,c);return n.tau&&n.preventSigmaIncrease&&(A=A.map((h,d)=>h.map((f,g)=>({...f,sigma:Math.min(f.sigma,e[d][g].sigma)})))),A};var NAe=jAe;dm.default=NAe;var Um={};Object.defineProperty(Um,"__esModule",{value:!0});Um.default=void 0;var EAe=TAe(Bt);function TAe(e){return e&&e.__esModule?e:{default:e}}const FAe=(e,n={})=>{const{sigma:r,mu:s}=e,{Z:a}=(0,EAe.default)(n);return s-a*r};var UAe=FAe;Um.default=UAe;var Im={};Object.defineProperty(Im,"__esModule",{value:!0});Im.default=void 0;var IAe=MAe(Bt),g5=QAe($t),PAe=fn;function oT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(oT=function(s){return s?r:n})(e)}function QAe(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=oT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}function MAe(e){return e&&e.__esModule?e:{default:e}}const DAe=(e,n={})=>{const{teamRating:r}=(0,g5.default)(n),{BETASQ:s}=(0,IAe.default)(n),a=r(e),i=e.length,o=i*(i-1)/2;return a.map(([c,A],u)=>a.filter((h,d)=>u!==d).map(([h,d])=>(0,PAe.phiMajor)((c-h)/Math.sqrt(i*s+A**2+d**2))).reduce(g5.sum,0)/o)};var RAe=DAe;Im.default=RAe;var Pm={};Object.defineProperty(Pm,"__esModule",{value:!0});Pm.default=void 0;var $Ae=Jd,OAe=HAe(Bt),m5=LAe($t),my=fn;function lT(e){if(typeof WeakMap!="function")return null;var n=new WeakMap,r=new WeakMap;return(lT=function(s){return s?r:n})(e)}function LAe(e,n){if(!n&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=lT(n);if(r&&r.has(e))return r.get(e);var s={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(s,i,o):s[i]=e[i]}return s.default=e,r&&r.set(e,s),s}function HAe(e){return e&&e.__esModule?e:{default:e}}const zAe=(e,n={})=>{const{teamRating:r}=(0,m5.default)(n),{BETASQ:s,BETA:a}=(0,OAe.default)(n),i=e.length;if(i===0)return;if(i===1)return 1;const o=i*(i-1)/(i>2?1:2),c=r(e),A=Math.sqrt((0,$Ae.flatten)(e).length)*a*(0,my.phiMajorInverse)((1+1/i)/2);return Math.abs(c.map(([u,h],d)=>c.filter((f,g)=>d!==g).map(([f,g])=>{const m=Math.sqrt(i*s+h**2+g**2);return(0,my.phiMajor)((A-u+f)/m)-(0,my.phiMajor)((u-f-A)/m)})).flat().reduce(m5.sum,0))/o};var KAe=zAe;Pm.default=KAe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"ordinal",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"predictDraw",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"predictWin",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"rate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"rating",{enumerable:!0,get:function(){return n.default}});var n=o(um),r=o(dm),s=o(Um),a=o(Im),i=o(Pm);function o(c){return c&&c.__esModule?c:{default:c}}})(xt);var cT={};Object.defineProperty(cT,"__esModule",{value:!0});var p5=function(e,n){var r=Math.pow(10,n);return Math.round(e*r)/r},GAe=function(){function e(n,r){n===void 0&&(n=0),r===void 0&&(r=1),this.mean=n,this.standardDeviation=r}return e.prototype.zScore=function(n){return(n-this.mean)/this.standardDeviation},e.prototype.pdf=function(n){var r=Math.pow(Math.E,-(Math.pow(n-this.mean,2)/(2*Math.pow(this.standardDeviation,2)))),s=this.standardDeviation*Math.sqrt(2*Math.PI);return r/s},e.prototype.cdf=function(n){var r=this.zScore(n);if(r=p5(r,2),r===0)return .5;if(r<=-3.5)return 0;if(r>=3.5)return 1;var s=e.zTable,a=Math.abs(r),i=Math.floor(a*10)/10,o=p5(Math.round(a*100)%10/100,2),c=s.z.indexOf(o),A=s[i][c];return r<0?1-A:A},e.prototype.probabilityBetween=function(n,r){return Math.abs(this.cdf(n)-this.cdf(r))},Object.defineProperty(e,"zTable",{get:function(){return{z:[0,.01,.02,.03,.04,.05,.06,.07,.08,.09],0:[.5,.504,.508,.512,.516,.5199,.5239,.5279,.5319,.5359],"0.1":[.5398,.5438,.5478,.5517,.5557,.5596,.5636,.5675,.5714,.5753],"0.2":[.5793,.5832,.5871,.591,.5948,.5987,.6026,.6064,.6103,.6141],"0.3":[.6179,.6217,.6255,.6293,.6331,.6368,.6406,.6443,.648,.6517],"0.4":[.6554,.6591,.6628,.6664,.67,.6736,.6772,.6808,.6844,.6879],"0.5":[.6915,.695,.6985,.7019,.7054,.7088,.7123,.7157,.719,.7224],"0.6":[.7257,.7291,.7324,.7357,.7389,.7422,.7454,.7486,.7517,.7549],"0.7":[.758,.7611,.7642,.7673,.7704,.7734,.7764,.7794,.7823,.7852],"0.8":[.7881,.791,.7939,.7967,.7995,.8023,.8051,.8078,.8106,.8133],"0.9":[.8159,.8186,.8212,.8238,.8264,.8289,.8315,.834,.8365,.8389],1:[.8413,.8438,.8461,.8485,.8508,.8531,.8554,.8577,.8599,.8621],"1.1":[.8643,.8665,.8686,.8708,.8729,.8749,.877,.879,.881,.883],"1.2":[.8849,.8869,.8888,.8907,.8925,.8944,.8962,.898,.8997,.9015],"1.3":[.9032,.9049,.9066,.9082,.9099,.9115,.9131,.9147,.9162,.9177],"1.4":[.9192,.9207,.9222,.9236,.9251,.9265,.9279,.9292,.9306,.9319],"1.5":[.9332,.9345,.9357,.937,.9382,.9394,.9406,.9418,.9429,.9441],"1.6":[.9452,.9463,.9474,.9484,.9495,.9505,.9515,.9525,.9535,.9545],"1.7":[.9554,.9564,.9573,.9582,.9591,.9599,.9608,.9616,.9625,.9633],"1.8":[.9641,.9649,.9656,.9664,.9671,.9678,.9686,.9693,.9699,.9706],"1.9":[.9713,.9719,.9726,.9732,.9738,.9744,.975,.9756,.9761,.9767],2:[.9772,.9778,.9783,.9788,.9793,.9798,.9803,.9808,.9812,.9817],"2.1":[.9821,.9826,.983,.9834,.9838,.9842,.9846,.985,.9854,.9857],"2.2":[.9861,.9864,.9868,.9871,.9875,.9878,.9881,.9884,.9887,.989],"2.3":[.9893,.9896,.9898,.9901,.9904,.9906,.9909,.9911,.9913,.9916],"2.4":[.9918,.992,.9922,.9925,.9927,.9929,.9931,.9932,.9934,.9936],"2.5":[.9938,.994,.9941,.9943,.9945,.9946,.9948,.9949,.9951,.9952],"2.6":[.9953,.9955,.9956,.9957,.9959,.996,.9961,.9962,.9963,.9964],"2.7":[.9965,.9966,.9967,.9968,.9969,.997,.9971,.9972,.9973,.9974],"2.8":[.9974,.9975,.9976,.9977,.9977,.9978,.9979,.9979,.998,.9981],"2.9":[.9981,.9982,.9982,.9983,.9984,.9984,.9985,.9985,.9986,.9986],3:[.9987,.9987,.9987,.9988,.9988,.9989,.9989,.9989,.999,.999],"3.1":[.999,.9991,.9991,.9991,.9992,.9992,.9992,.9992,.9993,.9993],"3.2":[.9993,.9993,.9994,.9994,.9994,.9994,.9994,.9995,.9995,.9995],"3.3":[.9995,.9995,.9995,.9996,.9996,.9996,.9996,.9996,.9996,.9997],"3.4":[.9997,.9997,.9997,.9997,.9997,.9997,.9997,.9997,.9997,.9998]}},enumerable:!1,configurable:!0}),e}(),y5=cT.default=GAe;function Qm(e,n){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)n.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function WAe(e,n,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(h){try{u(s.next(h))}catch(d){o(d)}}function A(h){try{u(s.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):a(h.value).then(c,A)}u((s=s.apply(e,n||[])).next())})}const VAe=e=>e?(...n)=>e(...n):(...n)=>fetch(...n);class Vb extends Error{constructor(n,r="FunctionsError",s){super(n),this.name=r,this.context=s}}class qAe extends Vb{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class v5 extends Vb{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class x5 extends Vb{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Sx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Sx||(Sx={}));class XAe{constructor(n,{headers:r={},customFetch:s,region:a=Sx.Any}={}){this.url=n,this.headers=r,this.region=a,this.fetch=VAe(s)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return WAe(this,arguments,void 0,function*(r,s={}){var a;let i,o;try{const{headers:c,method:A,body:u,signal:h,timeout:d}=s;let f={},{region:g}=s;g||(g=this.region);const m=new URL(`${this.url}/${r}`);g&&g!=="any"&&(f["x-region"]=g,m.searchParams.set("forceFunctionRegion",g));let y;u&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let x=h;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),h?(x=o.signal,h.addEventListener("abort",()=>o.abort())):x=o.signal);const p=yield this.fetch(m.toString(),{method:A||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),c),body:y,signal:x}).catch(_=>{throw new qAe(_)}),v=p.headers.get("x-relay-error");if(v&&v==="true")throw new v5(p);if(!p.ok)throw new x5(p);let b=((a=p.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield p.json():b==="application/octet-stream"||b==="application/pdf"?w=yield p.blob():b==="text/event-stream"?w=p:b==="multipart/form-data"?w=yield p.formData():w=yield p.text(),{data:w,error:null,response:p}}catch(c){return{data:null,error:c,response:c instanceof x5||c instanceof v5?c.context:void 0}}finally{i&&clearTimeout(i)}})}}var YAe=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},JAe=class{constructor(e){var n,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(n=e.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=new Headers(this.headers),this.headers.set(e,n),this}then(e,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,c=null,A=null,u=i.status,h=i.statusText;if(i.ok){var d,f;if(r.method!=="HEAD"){var g;const p=await i.text();p===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((g=r.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?c=p:c=JSON.parse(p))}const y=(d=r.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),x=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");y&&x&&x.length>1&&(A=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(c)&&(c.length>1?(o={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,A=null,u=406,h="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var m;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(c=[],o=null,u=200,h="OK")}catch{i.status===404&&y===""?(u=204,h="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(m=o.details)===null||m===void 0)&&m.includes("0 rows"))&&(o=null,u=200,h="OK"),o&&r.shouldThrowOnError)throw new YAe(o)}return{error:o,data:c,count:A,status:u,statusText:h}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let c="";const A=i==null?void 0:i.cause;if(A){var u,h,d,f;const m=(u=A==null?void 0:A.message)!==null&&u!==void 0?u:"",y=(h=A==null?void 0:A.code)!==null&&h!==void 0?h:"";c=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,c+=`

Caused by: ${(f=A==null?void 0:A.name)!==null&&f!==void 0?f:"Error"}: ${m}`,y&&(c+=` (${y})`),A!=null&&A.stack&&(c+=`
${A.stack}`)}else{var g;c=(g=i==null?void 0:i.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,n)}returns(){return this}overrideTypes(){return this}},ZAe=class extends JAe{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:i="text"}={}){var o;const c=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),A=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${A}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const w5=new RegExp("[,()]");var Jl=class extends ZAe{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}regexMatch(e,n){return this.url.searchParams.append(e,`match.${n}`),this}regexIMatch(e,n){return this.url.searchParams.append(e,`imatch.${n}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}isDistinct(e,n){return this.url.searchParams.append(e,`isdistinct.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&w5.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&w5.test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}},eue=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(n),this.schema=r,this.fetch=s}select(e,n){const{head:r=!1,count:s}=n??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new Jl({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:n,defaultToNull:r=!0}={}){var s;const a="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,c)=>o.concat(Object.keys(c)),[]);if(i.length>0){const o=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",o.join(","))}}return new Jl({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((A,u)=>A.concat(Object.keys(u)),[]);if(c.length>0){const A=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",A.join(","))}}return new Jl({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:n}={}){var r;const s="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Jl({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var n;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Jl({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}},tue=class AT{constructor(n,{headers:r={},schema:s,fetch:a}={}){this.url=n,this.headers=new Headers(r),this.schemaName=s,this.fetch=a}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new eue(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(n){return new AT(this.url,{headers:this.headers,schema:n,fetch:this.fetch})}rpc(n,r={},{head:s=!1,get:a=!1,count:i}={}){var o;let c;const A=new URL(`${this.url}/rpc/${n}`);let u;s||a?(c=s?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{A.searchParams.append(d,f)})):(c="POST",u=r);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new Jl({method:c,url:A,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class nue{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const s=this.getWebSocketConstructor();return new s(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const rue="2.89.0",sue=`realtime-js/${rue}`,uT="1.0.0",aue="2.0.0",b5=uT,kx=1e4,iue=1e3,oue=100;var ji;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ji||(ji={}));var dn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(dn||(dn={}));var Fs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Fs||(Fs={}));var jx;(function(e){e.websocket="websocket"})(jx||(jx={}));var jo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(jo||(jo={}));class lue{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let s=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,s;const a=(s=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(n){var r,s;const a=(s=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(n,r,s){var a,i;const o=n.topic,c=(a=n.ref)!==null&&a!==void 0?a:"",A=(i=n.join_ref)!==null&&i!==void 0?i:"",u=n.payload.event,h=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(A.length>255)throw new Error(`joinRef length ${A.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+A.length+c.length+o.length+u.length+d.length,g=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(g),y=0;m.setUint8(y++,this.KINDS.userBroadcastPush),m.setUint8(y++,A.length),m.setUint8(y++,c.length),m.setUint8(y++,o.length),m.setUint8(y++,u.length),m.setUint8(y++,d.length),m.setUint8(y++,r),Array.from(A,p=>m.setUint8(y++,p.charCodeAt(0))),Array.from(c,p=>m.setUint8(y++,p.charCodeAt(0))),Array.from(o,p=>m.setUint8(y++,p.charCodeAt(0))),Array.from(u,p=>m.setUint8(y++,p.charCodeAt(0))),Array.from(d,p=>m.setUint8(y++,p.charCodeAt(0)));var x=new Uint8Array(g.byteLength+s.byteLength);return x.set(new Uint8Array(g),0),x.set(new Uint8Array(s),g.byteLength),x.buffer}decode(n,r){if(this._isArrayBuffer(n)){let s=this._binaryDecode(n);return r(s)}if(typeof n=="string"){const s=JSON.parse(n),[a,i,o,c,A]=s;return r({join_ref:a,ref:i,topic:o,event:c,payload:A})}return r({})}_binaryDecode(n){const r=new DataView(n),s=r.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,a)}}_decodeUserBroadcast(n,r,s){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),c=r.getUint8(4);let A=this.HEADER_LENGTH+4;const u=s.decode(n.slice(A,A+a));A=A+a;const h=s.decode(n.slice(A,A+i));A=A+i;const d=s.decode(n.slice(A,A+o));A=A+o;const f=n.slice(A,n.byteLength),g=c===this.JSON_ENCODING?JSON.parse(s.decode(f)):f,m={type:this.BROADCAST_EVENT,event:h,payload:g};return o>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n==null?void 0:n.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([s])=>r.includes(s)))}}let dT=class{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var St;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(St||(St={}));const _5=(e,n,r={})=>{var s;const a=(s=r.skipTypes)!==null&&s!==void 0?s:[];return n?Object.keys(n).reduce((i,o)=>(i[o]=cue(o,e,n,a),i),{}):{}},cue=(e,n,r,s)=>{const a=n.find(c=>c.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!s.includes(i)?hT(i,o):Nx(o)},hT=(e,n)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return hue(n,r)}switch(e){case St.bool:return Aue(n);case St.float4:case St.float8:case St.int2:case St.int4:case St.int8:case St.numeric:case St.oid:return uue(n);case St.json:case St.jsonb:return due(n);case St.timestamp:return fue(n);case St.abstime:case St.date:case St.daterange:case St.int4range:case St.int8range:case St.money:case St.reltime:case St.text:case St.time:case St.timestamptz:case St.timetz:case St.tsrange:case St.tstzrange:return Nx(n);default:return Nx(n)}},Nx=e=>e,Aue=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},uue=e=>{if(typeof e=="string"){const n=parseFloat(e);if(!Number.isNaN(n))return n}return e},due=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},hue=(e,n)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>hT(n,c))}return e},fue=e=>typeof e=="string"?e.replace(" ","T"):e,fT=e=>{const n=new URL(e);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class py{constructor(n,r,s={},a=kx){this.channel=n,this.event=r,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var s;return this._hasReceived(n)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(s=>s.status===n).forEach(s=>s.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var C5;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(C5||(C5={}));class Iu{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Iu.syncState(this.state,a,i,o),this.pendingDiffs.forEach(A=>{this.state=Iu.syncDiff(this.state,A,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Iu.syncDiff(this.state,a,i,o),c())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,s,a){const i=this.cloneDeep(n),o=this.transformState(r),c={},A={};return this.map(i,(u,h)=>{o[u]||(A[u]=h)}),this.map(o,(u,h)=>{const d=i[u];if(d){const f=h.map(x=>x.presence_ref),g=d.map(x=>x.presence_ref),m=h.filter(x=>g.indexOf(x.presence_ref)<0),y=d.filter(x=>f.indexOf(x.presence_ref)<0);m.length>0&&(c[u]=m),y.length>0&&(A[u]=y)}else c[u]=h}),this.syncDiff(i,{joins:c,leaves:A},s,a)}static syncDiff(n,r,s,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(c,A)=>{var u;const h=(u=n[c])!==null&&u!==void 0?u:[];if(n[c]=this.cloneDeep(A),h.length>0){const d=n[c].map(g=>g.presence_ref),f=h.filter(g=>d.indexOf(g.presence_ref)<0);n[c].unshift(...f)}s(c,h,A)}),this.map(o,(c,A)=>{let u=n[c];if(!u)return;const h=A.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),n[c]=u,a(c,u,A),u.length===0&&delete n[c]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(s=>r(s,n[s]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,s)=>{const a=n[s];return"metas"in a?r[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=a,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var B5;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(B5||(B5={}));var Pu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Pu||(Pu={}));var $a;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})($a||($a={}));class pc{constructor(n,r={config:{}},s){var a,i;if(this.topic=n,this.params=r,this.socket=s,this.bindings={},this.state=dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new py(this,Fs.join,this.params,this.timeout),this.rejoinTimer=new dT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fs.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new Iu(this),this.broadcastEndpointURL=fT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==dn.closed){const{config:{broadcast:o,presence:c,private:A}}=this.params,u=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&a!==void 0?a:[],h=!!this.bindings[Pu.PRESENCE]&&this.bindings[Pu.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},c),{enabled:h}),postgres_changes:u,private:A};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>n==null?void 0:n($a.CHANNEL_ERROR,g)),this._onClose(()=>n==null?void 0:n($a.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){n==null||n($a.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,p=[];for(let v=0;v<x;v++){const b=y[v],{filter:{event:w,schema:_,table:C,filter:k}}=b,j=g&&g[v];if(j&&j.event===w&&pc.isFilterValueEqual(j.schema,_)&&pc.isFilterValueEqual(j.table,C)&&pc.isFilterValueEqual(j.filter,k))p.push(Object.assign(Object.assign({},b),{id:j.id}));else{this.unsubscribe(),this.state=dn.errored,n==null||n($a.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,n&&n($a.SUBSCRIBED);return}}).receive("error",g=>{this.state=dn.errored,n==null||n($a.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{n==null||n($a.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,s){return this.state===dn.joined&&n===Pu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,s)}async httpSend(n,r,s={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(c.status===202)return{success:!0};let A=c.statusText;try{const u=await c.json();A=u.error||u.message||A}catch{}return Promise.reject(new Error(A))}async send(n,r={}){var s,a;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=n,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const A={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,A;const u=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((A=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||A===void 0)&&A.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=dn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new py(this,Fs.leave,{},n),s.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dn.closed,this.bindings={}}async _fetchWithTimeout(n,r,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(n,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new py(this,n,r,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>oue){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,s){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,s){var a,i;const o=n.toLocaleLowerCase(),{close:c,error:A,leave:u,join:h}=Fs;if(s&&[c,A,u,h].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var m,y,x;return((m=g.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(y=g.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(g=>g.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var m,y,x,p,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const w=g.id,_=(m=g.filter)===null||m===void 0?void 0:m.event;return w&&((y=r.ids)===null||y===void 0?void 0:y.includes(w))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const w=(v=(p=g==null?void 0:g.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return w==="*"||w===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:y,table:x,commit_timestamp:p,type:v,errors:b}=m;f=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:p,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(m))}g.callback(f,s)})}_isClosed(){return this.state===dn.closed}_isJoined(){return this.state===dn.joined}_isJoining(){return this.state===dn.joining}_isLeaving(){return this.state===dn.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,s){const a=n.toLocaleLowerCase(),i={type:a,filter:r,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(n,r){const s=n.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&pc.isEqual(a.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const s in n)if(n[s]!==r[s])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Fs.close,{},n)}_onError(n){this._on(Fs.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dn.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=_5(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=_5(n.columns,n.old_record)),r}}const yy=()=>{},zh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},gue=[1e3,2e3,5e3,1e4],mue=1e4,pue=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yue{constructor(n,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=kx,this.transport=null,this.heartbeatIntervalMs=zh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yy,this.ref=0,this.reconnectTimer=null,this.vsn=b5,this.logger=yy,this.conn=null,this.sendBuffer=[],this.serializer=new lue,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${jx.websocket}`,this.httpEndpoint=fT(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=nue.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,s){this.logger(n,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ji.connecting:return jo.Connecting;case ji.open:return jo.Open;case ji.closing:return jo.Closing;default:return jo.Closed}}isConnected(){return this.connectionState()===jo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const s=`realtime:${n}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new pc(`realtime:${n}`,r,this);return this.channels.push(i),i}}push(n){const{topic:r,event:s,payload:a,ref:i}=n,o=()=>{this.encode(n,c=>{var A;(A=this.conn)===null||A===void 0||A.send(c)})};this.log("push",`${r} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(iue,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},zh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(s=>s.topic===n&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=r,c=o?`(${o})`:"",A=i.status||"";this.log("receive",`${A} ${s} ${a} ${c}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===ji.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ji.open||this.conn.readyState===ji.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Fs.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const s=n.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${n}${s}${a}`}_workerObjectUrl(n){let r;if(n)r=n;else{const s=new Blob([pue],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,s=!1;if(n)r=n,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:sue};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Fs.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(s=>{try{s(r)}catch(a){this.log("error",`error in ${n} callback`,a)}})}catch(s){this.log("error",`error triggering ${n} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new dT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,s,a,i,o,c,A,u,h,d,f,g;switch(this.transport=(r=n==null?void 0:n.transport)!==null&&r!==void 0?r:null,this.timeout=(s=n==null?void 0:n.timeout)!==null&&s!==void 0?s:kx,this.heartbeatIntervalMs=(a=n==null?void 0:n.heartbeatIntervalMs)!==null&&a!==void 0?a:zh.HEARTBEAT_INTERVAL,this.worker=(i=n==null?void 0:n.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=n==null?void 0:n.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(c=n==null?void 0:n.heartbeatCallback)!==null&&c!==void 0?c:yy,this.vsn=(A=n==null?void 0:n.vsn)!==null&&A!==void 0?A:b5,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=n==null?void 0:n.reconnectAfterMs)!==null&&u!==void 0?u:m=>gue[m-1]||mue,this.vsn){case uT:this.encode=(h=n==null?void 0:n.encode)!==null&&h!==void 0?h:(m,y)=>y(JSON.stringify(m)),this.decode=(d=n==null?void 0:n.decode)!==null&&d!==void 0?d:(m,y)=>y(JSON.parse(m));break;case aue:this.encode=(f=n==null?void 0:n.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(g=n==null?void 0:n.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var hd=class extends Error{constructor(e,n){var r;super(e),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((r=n.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function vue(e,n,r){const s=new URL(n,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&s.searchParams.set(a,i);return s.toString()}async function xue(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function wue(e){const n=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:a,body:i,headers:o}){const c=vue(e.baseUrl,s,a),A=await xue(e.auth),u=await n(c,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...A,...o},body:i?JSON.stringify(i):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&h?JSON.parse(h):h;if(!u.ok){const g=d?f:void 0,m=g==null?void 0:g.error;throw new hd((m==null?void 0:m.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:g})}return{status:u.status,headers:u.headers,data:f}}}}function Kh(e){return e.join("")}var bue=class{constructor(e,n=""){this.client=e,this.prefix=n}async listNamespaces(e){const n=e?{parent:Kh(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,n){const r={namespace:e.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Kh(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Kh(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Kh(e.namespace)}`}),!0}catch(n){if(n instanceof hd&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(e,n){try{return await this.createNamespace(e,n)}catch(r){if(r instanceof hd&&r.status===409)return;throw r}}};function Tl(e){return e.join("")}var _ue=class{constructor(e,n="",r){this.client=e,this.prefix=n,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Tl(e.namespace)}/tables`})).data.identifiers}async createTable(e,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Tl(e.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(e,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Tl(e.namespace)}/tables/${e.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Tl(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Tl(e.namespace)}/tables/${e.name}`,headers:n})).data.metadata}async tableExists(e){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Tl(e.namespace)}/tables/${e.name}`,headers:n}),!0}catch(r){if(r instanceof hd&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,n){try{return await this.createTable(e,n)}catch(r){if(r instanceof hd&&r.status===409)return await this.loadTable({namespace:e.namespace,name:n.name});throw r}}},Cue=class{constructor(e){var s;let n="v1";e.catalogName&&(n+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=wue({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new bue(this.client,n),this.tableOps=new _ue(this.client,n,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,n){return this.namespaceOps.createNamespace(e,n)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,n){return this.tableOps.createTable(e,n)}async updateTable(e,n){return this.tableOps.updateTable(e,n)}async dropTable(e,n){await this.tableOps.dropTable(e,n)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,n){return this.namespaceOps.createNamespaceIfNotExists(e,n)}async createTableIfNotExists(e,n){return this.tableOps.createTableIfNotExists(e,n)}},Mm=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function zt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var Bue=class extends Mm{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ex=class extends Mm{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}};const qb=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),Sue=()=>Response,Tx=e=>{if(Array.isArray(e))return e.map(r=>Tx(r));if(typeof e=="function"||e!==Object(e))return e;const n={};return Object.entries(e).forEach(([r,s])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));n[a]=Tx(s)}),n},kue=e=>{if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},jue=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fd(e)}function Nue(e,n){if(fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n||"default");if(fd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function Eue(e){var n=Nue(e,"string");return fd(n)=="symbol"?n:n+""}function Tue(e,n,r){return(n=Eue(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function S5(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ve(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?S5(Object(r),!0).forEach(function(s){Tue(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const vy=e=>{var n;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(n=e.error)===null||n===void 0?void 0:n.message)||JSON.stringify(e)},Fue=async(e,n,r)=>{e instanceof await Sue()&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,i=(s==null?void 0:s.statusCode)||a+"";n(new Bue(vy(s),a,i))}).catch(s=>{n(new Ex(vy(s),s))}):n(new Ex(vy(e),e))},Uue=(e,n,r,s)=>{const a={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"||!s?a:(kue(s)?(a.headers=Ve({"Content-Type":"application/json"},n==null?void 0:n.headers),a.body=JSON.stringify(s)):a.body=s,n!=null&&n.duplex&&(a.duplex=n.duplex),Ve(Ve({},a),r))};async function Zd(e,n,r,s,a,i){return new Promise((o,c)=>{e(r,Uue(n,s,a,i)).then(A=>{if(!A.ok)throw A;return s!=null&&s.noResolveJson?A:A.json()}).then(A=>o(A)).catch(A=>Fue(A,c,s))})}async function gd(e,n,r,s){return Zd(e,"GET",n,r,s)}async function Es(e,n,r,s,a){return Zd(e,"POST",n,s,a,r)}async function Fx(e,n,r,s,a){return Zd(e,"PUT",n,s,a,r)}async function Iue(e,n,r,s){return Zd(e,"HEAD",n,Ve(Ve({},r),{},{noResolveJson:!0}),s)}async function Xb(e,n,r,s,a){return Zd(e,"DELETE",n,s,a,r)}var Pue=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}}};let gT;gT=Symbol.toStringTag;var Que=class{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[gT]="BlobDownloadBuilder",this.promise=null}asStream(){return new Pue(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}}};const Mue={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},k5={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Due=class{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=qb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,n,r,s){var a=this;try{let i;const o=Ve(Ve({},k5),s);let c=Ve(Ve({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const A=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),A&&i.append("metadata",a.encodeMetadata(A)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),A&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(A))):(i=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,A&&(c["x-metadata"]=a.toBase64(a.encodeMetadata(A))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(c=Ve(Ve({},c),s.headers));const u=a._removeEmptyFolders(n),h=a._getFinalPath(u),d=await(e=="PUT"?Fx:Es)(a.fetch,`${a.url}/object/${h}`,i,Ve({headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(zt(i))return{data:null,error:i};throw i}}async upload(e,n,r){return this.uploadOrUpdate("POST",e,n,r)}async uploadToSignedUrl(e,n,r,s){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),c=new URL(a.url+`/object/upload/sign/${o}`);c.searchParams.set("token",n);try{let A;const u=Ve({upsert:k5.upsert},s),h=Ve(Ve({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(A=new FormData,A.append("cacheControl",u.cacheControl),A.append("",r)):typeof FormData<"u"&&r instanceof FormData?(A=r,A.append("cacheControl",u.cacheControl)):(A=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:i,fullPath:(await Fx(a.fetch,c.toString(),A,{headers:h})).Key},error:null}}catch(A){if(a.shouldThrowOnError)throw A;if(zt(A))return{data:null,error:A};throw A}}async createSignedUploadUrl(e,n){var r=this;try{let s=r._getFinalPath(e);const a=Ve({},r.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=await Es(r.fetch,`${r.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(r.url+i.url),c=o.searchParams.get("token");if(!c)throw new Mm("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:c},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}async update(e,n,r){return this.uploadOrUpdate("PUT",e,n,r)}async move(e,n,r){var s=this;try{return{data:await Es(s.fetch,`${s.url}/object/move`,{bucketId:s.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers}),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}async copy(e,n,r){var s=this;try{return{data:{path:(await Es(s.fetch,`${s.url}/object/copy`,{bucketId:s.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:s.headers})).Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}async createSignedUrl(e,n,r){var s=this;try{let a=s._getFinalPath(e),i=await Es(s.fetch,`${s.url}/object/sign/${a}`,Ve({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:s.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${s.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}async createSignedUrls(e,n,r){var s=this;try{const a=await Es(s.fetch,`${s.url}/object/sign/${s.bucketId}`,{expiresIn:n,paths:e},{headers:s.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Ve(Ve({},o),{},{signedUrl:o.signedURL?encodeURI(`${s.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}download(e,n){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",i=this._getFinalPath(e),o=()=>gd(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new Que(o,this.shouldThrowOnError)}async info(e){var n=this;const r=n._getFinalPath(e);try{return{data:Tx(await gd(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}async exists(e){var n=this;const r=n._getFinalPath(e);try{return await Iue(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(zt(s)&&s instanceof Ex){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const i=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});o!==""&&s.push(o);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${c}`)}}}async remove(e){var n=this;try{return{data:await Xb(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async list(e,n,r){var s=this;try{const a=Ve(Ve(Ve({},Mue),n),{},{prefix:e||""});return{data:await Es(s.fetch,`${s.url}/object/list/${s.bucketId}`,a,{headers:s.headers},r),error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(zt(a))return{data:null,error:a};throw a}}async listV2(e,n){var r=this;try{const s=Ve({},e);return{data:await Es(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}};const mT="2.89.0",pT={"X-Client-Info":`storage-js/${mT}`};var Rue=class{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const a=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Ve(Ve({},pT),n),this.fetch=qb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var n=this;try{const r=n.listBucketOptionsToQueryString(e);return{data:await gd(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async getBucket(e){var n=this;try{return{data:await gd(n.fetch,`${n.url}/bucket/${e}`,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async createBucket(e,n={public:!1}){var r=this;try{return{data:await Es(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}async updateBucket(e,n){var r=this;try{return{data:await Fx(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}}async emptyBucket(e){var n=this;try{return{data:await Es(n.fetch,`${n.url}/bucket/${e}/empty`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var n=this;try{return{data:await Xb(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},$ue=class{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ve(Ve({},pT),n),this.fetch=qb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var n=this;try{return{data:await Es(n.fetch,`${n.url}/bucket`,{name:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async listBuckets(e){var n=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),a=s?`${n.url}/bucket?${s}`:`${n.url}/bucket`;return{data:await gd(n.fetch,a,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}async deleteBucket(e){var n=this;try{return{data:await Xb(n.fetch,`${n.url}/bucket/${e}`,{},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}}from(e){var n=this;if(!jue(e))throw new Mm("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Cue({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...c)=>{try{return{data:await o.apply(a,c),error:null}}catch(A){if(s)throw A;return{data:null,error:A}}}}})}};const Yb={"X-Client-Info":`storage-js/${mT}`,"Content-Type":"application/json"};var yT=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function $r(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var xy=class extends yT{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Oue=class extends yT{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}};const Jb=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),Lue=e=>{if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},j5=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Hue=async(e,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||s+"";n(new xy(j5(i),s,o))}).catch(()=>{const i=s+"";n(new xy(a.statusText||`HTTP ${s} error`,s,i))});else{const i=s+"";n(new xy(a.statusText||`HTTP ${s} error`,s,i))}}else n(new Oue(j5(e),e))},zue=(e,n,r,s)=>{const a={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"||!s?a:(Lue(s)?(a.headers=Ve({"Content-Type":"application/json"},n==null?void 0:n.headers),a.body=JSON.stringify(s)):a.body=s,Ve(Ve({},a),r))};async function Kue(e,n,r,s,a,i){return new Promise((o,c)=>{e(r,zue(n,s,a,i)).then(A=>{if(!A.ok)throw A;if(s!=null&&s.noResolveJson)return A;const u=A.headers.get("content-type");return!u||!u.includes("application/json")?{}:A.json()}).then(A=>o(A)).catch(A=>Hue(A,c,s))})}async function Or(e,n,r,s,a){return Kue(e,"POST",n,s,a,r)}var Gue=class{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ve(Ve({},Yb),n),this.fetch=Jb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var n=this;try{return{data:await Or(n.fetch,`${n.url}/CreateIndex`,e,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async getIndex(e,n){var r=this;try{return{data:await Or(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($r(s))return{data:null,error:s};throw s}}async listIndexes(e){var n=this;try{return{data:await Or(n.fetch,`${n.url}/ListIndexes`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async deleteIndex(e,n){var r=this;try{return{data:await Or(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:r.headers})||{},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if($r(s))return{data:null,error:s};throw s}}},Wue=class{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ve(Ve({},Yb),n),this.fetch=Jb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var n=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Or(n.fetch,`${n.url}/PutVectors`,e,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async getVectors(e){var n=this;try{return{data:await Or(n.fetch,`${n.url}/GetVectors`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async listVectors(e){var n=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await Or(n.fetch,`${n.url}/ListVectors`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async queryVectors(e){var n=this;try{return{data:await Or(n.fetch,`${n.url}/QueryVectors`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async deleteVectors(e){var n=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Or(n.fetch,`${n.url}/DeleteVectors`,e,{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}},Vue=class{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ve(Ve({},Yb),n),this.fetch=Jb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var n=this;try{return{data:await Or(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async getBucket(e){var n=this;try{return{data:await Or(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var n=this;try{return{data:await Or(n.fetch,`${n.url}/ListVectorBuckets`,e,{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}async deleteBucket(e){var n=this;try{return{data:await Or(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if($r(r))return{data:null,error:r};throw r}}},que=class extends Vue{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Xue(this.url,this.headers,e,this.fetch)}async createBucket(e){var n=()=>super.createBucket,r=this;return n().call(r,e)}async getBucket(e){var n=()=>super.getBucket,r=this;return n().call(r,e)}async listBuckets(e={}){var n=()=>super.listBuckets,r=this;return n().call(r,e)}async deleteBucket(e){var n=()=>super.deleteBucket,r=this;return n().call(r,e)}},Xue=class extends Gue{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}async createIndex(e){var n=()=>super.createIndex,r=this;return n().call(r,Ve(Ve({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var n=()=>super.listIndexes,r=this;return n().call(r,Ve(Ve({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,e)}async deleteIndex(e){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,e)}index(e){return new Yue(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Yue=class extends Wue{constructor(e,n,r,s,a){super(e,n,a),this.vectorBucketName=r,this.indexName=s}async putVectors(e){var n=()=>super.putVectors,r=this;return n().call(r,Ve(Ve({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var n=()=>super.getVectors,r=this;return n().call(r,Ve(Ve({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var n=()=>super.listVectors,r=this;return n().call(r,Ve(Ve({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var n=()=>super.queryVectors,r=this;return n().call(r,Ve(Ve({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var n=()=>super.deleteVectors,r=this;return n().call(r,Ve(Ve({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Jue=class extends Rue{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new Due(this.url,this.headers,e,this.fetch)}get vectors(){return new que(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $ue(this.url+"/iceberg",this.headers,this.fetch)}};const vT="2.89.0",Zl=30*1e3,Ux=3,wy=Ux*Zl,Zue="http://localhost:9999",ede="supabase.auth.token",tde={"X-Client-Info":`gotrue-js/${vT}`},Ix="X-Supabase-Api-Version",xT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},nde=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rde=10*60*1e3;class md extends Error{constructor(n,r,s){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function Re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class sde extends md{constructor(n,r,s){super(n,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function ade(e){return Re(e)&&e.name==="AuthApiError"}class No extends md{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class gi extends md{constructor(n,r,s,a){super(n,s,a),this.name=r,this.status=s}}class Ur extends gi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ide(e){return Re(e)&&e.name==="AuthSessionMissingError"}class Fl extends gi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gh extends gi{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Wh extends gi{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ode(e){return Re(e)&&e.name==="AuthImplicitGrantRedirectError"}class N5 extends gi{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lde extends gi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Px extends gi{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function by(e){return Re(e)&&e.name==="AuthRetryableFetchError"}class E5 extends gi{constructor(n,r,s){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Qx extends gi{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const L0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),T5=` 	
\r=`.split(""),cde=(()=>{const e=new Array(128);for(let n=0;n<e.length;n+=1)e[n]=-1;for(let n=0;n<T5.length;n+=1)e[T5[n].charCodeAt(0)]=-2;for(let n=0;n<L0.length;n+=1)e[L0[n].charCodeAt(0)]=n;return e})();function F5(e,n,r){if(e!==null)for(n.queue=n.queue<<8|e,n.queuedBits+=8;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(L0[s]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const s=n.queue>>n.queuedBits-6&63;r(L0[s]),n.queuedBits-=6}}function wT(e,n,r){const s=cde[e];if(s>-1)for(n.queue=n.queue<<6|s,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function U5(e){const n=[],r=o=>{n.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{dde(o,s,r)};for(let o=0;o<e.length;o+=1)wT(e.charCodeAt(o),a,i);return n.join("")}function Ade(e,n){if(e<=127){n(e);return}else if(e<=2047){n(192|e>>6),n(128|e&63);return}else if(e<=65535){n(224|e>>12),n(128|e>>6&63),n(128|e&63);return}else if(e<=1114111){n(240|e>>18),n(128|e>>12&63),n(128|e>>6&63),n(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ude(e,n){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Ade(s,n)}}function dde(e,n,r){if(n.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){n.utf8seq=s;break}if(n.utf8seq===2)n.codepoint=e&31;else if(n.utf8seq===3)n.codepoint=e&15;else if(n.utf8seq===4)n.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|e&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Nc(e){const n=[],r={queue:0,queuedBits:0},s=a=>{n.push(a)};for(let a=0;a<e.length;a+=1)wT(e.charCodeAt(a),r,s);return new Uint8Array(n)}function hde(e){const n=[];return ude(e,r=>n.push(r)),new Uint8Array(n)}function Qo(e){const n=[],r={queue:0,queuedBits:0},s=a=>{n.push(a)};return e.forEach(a=>F5(a,r,s)),F5(null,r,s),n.join("")}function fde(e){return Math.round(Date.now()/1e3)+e}function gde(){return Symbol("auth-callback")}const Un=()=>typeof window<"u"&&typeof document<"u",mo={tested:!1,writable:!1},bT=()=>{if(!Un())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(mo.tested)return mo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),mo.tested=!0,mo.writable=!0}catch{mo.tested=!0,mo.writable=!1}return mo.writable};function mde(e){const n={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{n[i]=a})}catch{}return r.searchParams.forEach((s,a)=>{n[a]=s}),n}const _T=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),pde=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ec=async(e,n,r)=>{await e.setItem(n,JSON.stringify(r))},po=async(e,n)=>{const r=await e.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Fn=async(e,n)=>{await e.removeItem(n)};class Dm{constructor(){this.promise=new Dm.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}Dm.promiseConstructor=Promise;function _y(e){const n=e.split(".");if(n.length!==3)throw new Qx("Invalid JWT structure");for(let s=0;s<n.length;s++)if(!nde.test(n[s]))throw new Qx("JWT not in base64url format");return{header:JSON.parse(U5(n[0])),payload:JSON.parse(U5(n[1])),signature:Nc(n[2]),raw:{header:n[0],payload:n[1]}}}async function yde(e){return await new Promise(n=>{setTimeout(()=>n(null),e)})}function vde(e,n){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!n(i,null,o)){s(o);return}}catch(o){if(!n(i,o)){a(o);return}}})()})}function xde(e){return("0"+e.toString(16)).substr(-2)}function wde(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(n),Array.from(n,xde).join("")}async function bde(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function _de(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await bde(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ul(e,n,r=!1){const s=wde();let a=s;r&&(a+="/PASSWORD_RECOVERY"),await ec(e,`${n}-code-verifier`,a);const i=await _de(s);return[i,s===i?"plain":"s256"]}const Cde=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bde(e){const n=e.headers.get(Ix);if(!n||!n.match(Cde))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Sde(e){if(!e)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(e<=n)throw new Error("JWT has expired")}function kde(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const jde=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Il(e){if(!jde.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Cy(){const e={};return new Proxy(e,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nde(e,n){return new Proxy(e,{get:(r,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,a)}return!n.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,s,a)}})}function I5(e){return JSON.parse(JSON.stringify(e))}const Bo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ede=[502,503,504];async function P5(e){var n;if(!pde(e))throw new Px(Bo(e),0);if(Ede.includes(e.status))throw new Px(Bo(e),e.status);let r;try{r=await e.json()}catch(i){throw new No(Bo(i),i)}let s;const a=Bde(e);if(a&&a.getTime()>=xT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new E5(Bo(r),e.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(s==="session_not_found")throw new Ur}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new E5(Bo(r),e.status,r.weak_password.reasons);throw new sde(Bo(r),e.status||500,s)}const Tde=(e,n,r,s)=>{const a={method:e,headers:(n==null?void 0:n.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),r))};async function Ge(e,n,r,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[Ix]||(i[Ix]=xT["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",A=await Fde(e,n,r+c,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(A):{data:Object.assign({},A),error:null}}async function Fde(e,n,r,s,a,i){const o=Tde(n,s,a,i);let c;try{c=await e(r,Object.assign({},o))}catch(A){throw console.error(A),new Px(Bo(A),0)}if(c.ok||await P5(c),s!=null&&s.noResolveJson)return c;try{return await c.json()}catch(A){await P5(A)}}function Ss(e){var n;let r=null;Pde(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=fde(e.expires_in)));const s=(n=e.user)!==null&&n!==void 0?n:e;return{data:{session:r,user:s},error:null}}function Q5(e){const n=Ss(e);return!n.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(n.data.weak_password=e.weak_password),n}function Ii(e){var n;return{data:{user:(n=e.user)!==null&&n!==void 0?n:e},error:null}}function Ude(e){return{data:e,error:null}}function Ide(e){const{action_link:n,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i}=e,o=Qm(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:n,email_otp:r,hashed_token:s,redirect_to:a,verification_type:i},A=Object.assign({},o);return{data:{properties:c,user:A},error:null}}function M5(e){return e}function Pde(e){return e.access_token&&e.refresh_token&&e.expires_in}const By=["global","local","others"];class Qde{constructor({url:n="",headers:r={},fetch:s}){this.url=n,this.headers=r,this.fetch=_T(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=By[0]){if(By.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${By.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}}async inviteUserByEmail(n,r={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ii})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async generateLink(n){try{const{options:r}=n,s=Qm(n,["options"]),a=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Ide,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Ii})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,s,a,i,o,c,A;try{const u={nextPage:null,lastPage:0,total:0},h=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=n==null?void 0:n.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:M5});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(A=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&A!==void 0?A:[];return g.length>0&&(g.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);u[`${x}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(Re(u))return{data:{users:[]},error:u};throw u}}async getUserById(n){Il(n);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Ii})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){Il(n);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:Ii})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async deleteUser(n,r=!1){Il(n);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ii})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async _listFactors(n){Il(n.userId);try{const{data:r,error:s}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:s}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _deleteFactor(n){Il(n.userId),Il(n.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,s,a,i,o,c,A;try{const u={nextPage:null,lastPage:0,total:0},h=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=n==null?void 0:n.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:M5});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(A=(c=h.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&A!==void 0?A:[];return g.length>0&&(g.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);u[`${x}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(Re(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(n){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Re(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(n){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}}function D5(e={}){return{getItem:n=>e[n]||null,setItem:(n,r)=>{e[n]=r},removeItem:n=>{delete e[n]}}}const Pl={debug:!!(globalThis&&bT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class CT extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class Mde extends CT{}async function Dde(e,n,r){Pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,n);const s=new globalThis.AbortController;return n>0&&setTimeout(()=>{s.abort(),Pl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(n===0)throw Pl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Mde(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Pl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Rde(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function BT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function $de(e){return parseInt(e,16)}function Ode(e){const n=new TextEncoder().encode(e);return"0x"+Array.from(n,s=>s.toString(16).padStart(2,"0")).join("")}function Lde(e){var n;const{chainId:r,domain:s,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:c,requestId:A,resources:u,scheme:h,uri:d,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((n=e.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=BT(e.address),m=h?`${h}://${s}`:s,y=e.statement?`${e.statement}
`:"",x=`${m} wants you to sign in with your Ethereum account:
${g}

${y}`;let p=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(p+=`
Expiration Time: ${a.toISOString()}`),c&&(p+=`
Not Before: ${c.toISOString()}`),A&&(p+=`
Request ID: ${A}`),u){let v=`
Resources:`;for(const b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);v+=`
- ${b}`}p+=v}return`${x}
${p}`}class sn extends Error{constructor({message:n,code:r,cause:s,name:a}){var i;super(n,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=a??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class H0 extends sn{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function Hde({error:e,options:n}){var r,s,a;const{publicKey:i}=n;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new sn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new sn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(n.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new sn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new sn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new sn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new sn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new sn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(ST(o)){if(i.rp.id!==o)return new sn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new sn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function zde({error:e,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(n.signal instanceof AbortSignal)return new sn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(ST(s)){if(r.rpId!==s)return new sn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new sn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Kde{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Gde=new Kde;function Wde(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:n,user:r,excludeCredentials:s}=e,a=Qm(e,["challenge","user","excludeCredentials"]),i=Nc(n).buffer,o=Object.assign(Object.assign({},r),{id:Nc(r.id).buffer}),c=Object.assign(Object.assign({},a),{challenge:i,user:o});if(s&&s.length>0){c.excludeCredentials=new Array(s.length);for(let A=0;A<s.length;A++){const u=s[A];c.excludeCredentials[A]=Object.assign(Object.assign({},u),{id:Nc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return c}function Vde(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:n,allowCredentials:r}=e,s=Qm(e,["challenge","allowCredentials"]),a=Nc(n).buffer,i=Object.assign(Object.assign({},s),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const c=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},c),{id:Nc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return i}function qde(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Qo(new Uint8Array(e.response.attestationObject)),clientDataJSON:Qo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Xde(e){var n;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Qo(new Uint8Array(a.authenticatorData)),clientDataJSON:Qo(new Uint8Array(a.clientDataJSON)),signature:Qo(new Uint8Array(a.signature)),userHandle:a.userHandle?Qo(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function ST(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function R5(){var e,n;return!!(Un()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Yde(e){try{const n=await navigator.credentials.create(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new H0("Browser returned unexpected credential type",n)}:{data:null,error:new H0("Empty credential response",n)}}catch(n){return{data:null,error:Hde({error:n,options:e})}}}async function Jde(e){try{const n=await navigator.credentials.get(e);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new H0("Browser returned unexpected credential type",n)}:{data:null,error:new H0("Empty credential response",n)}}catch(n){return{data:null,error:zde({error:n,options:e})}}}const Zde={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ehe={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function z0(...e){const n=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))s[i]=o;else if(r(o))s[i]=o;else if(n(o)){const c=s[i];n(c)?s[i]=z0(c,o):s[i]=z0(o)}else s[i]=o}return s}function the(e,n){return z0(Zde,e,n||{})}function nhe(e,n){return z0(ehe,e,n||{})}class rhe{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:s,signal:a},i){try{const{data:o,error:c}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!o)return{data:null,error:c};const A=a??Gde.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=the(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:d}=await Yde({publicKey:u,signal:A});return h?{data:{factorId:n,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=nhe(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:d}=await Jde(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:A}));return h?{data:{factorId:n,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new No("Unexpected error in challenge",o)}}}async _verify({challengeId:n,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:s})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new md("rpId is required for WebAuthn authentication")};try{if(!R5())return{data:null,error:new No("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:s},signal:a},{request:i});if(!o)return{data:null,error:c};const{webauthn:A}=o;return this._verify({factorId:n,challengeId:o.challengeId,webauthn:{type:A.type,rpId:r,rpOrigins:s,credential_response:A.credential_response}})}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new No("Unexpected error in authenticate",o)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new md("rpId is required for WebAuthn registration")};try{if(!R5())return{data:null,error:new No("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this._enroll({friendlyName:n});if(!o)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===n&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:c};const{data:A,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:a},{create:i});return A?this._verify({factorId:o.id,challengeId:A.challengeId,webauthn:{rpId:r,rpOrigins:s,type:A.webauthn.type,credential_response:A.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Re(o)?{data:null,error:o}:{data:null,error:new No("Unexpected error in register",o)}}}}Rde();const she={url:Zue,storageKey:ede,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tde,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function $5(e,n,r){return await r()}const Ql={};class pd{get jwks(){var n,r;return(r=(n=Ql[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Ql[this.storageKey]=Object.assign(Object.assign({},Ql[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Ql[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ql[this.storageKey]=Object.assign(Object.assign({},Ql[this.storageKey]),{cachedAt:n})}constructor(n){var r,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},she),n);if(this.storageKey=i.storageKey,this.instanceID=(r=pd.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,pd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Un()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Qde({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=_T(i.fetch),this.lock=i.lock||$5,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Un()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Dde:this.lock=$5,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rhe(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:bT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=D5(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=D5(this.memoryStorage)),Un()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${vT}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},s="none";if(Un()&&(r=mde(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Un()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ode(i)){const A=(n=i.details)===null||n===void 0?void 0:n.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Re(r)?this._returnResult({error:r}):this._returnResult({error:new No("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,s,a;try{const i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=n==null?void 0:n.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ss}),{data:o,error:c}=i;if(c||!o)return this._returnResult({data:{user:null,session:null},error:c});const A=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:u,session:A},error:null})}catch(i){if(Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(n){var r,s,a;try{let i;if("email"in n){const{email:h,password:d,options:f}=n;let g=null,m=null;this.flowType==="pkce"&&([g,m]=await Ul(this.storage,this.storageKey)),i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:m},xform:Ss})}else if("phone"in n){const{phone:h,password:d,options:f}=n;i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ss})}else throw new Gh("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return await Fn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const A=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:u,session:A},error:null})}catch(i){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(n){try{let r;if("email"in n){const{email:i,password:o,options:c}=n;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Q5})}else if("phone"in n){const{phone:i,password:o,options:c}=n;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Q5})}else throw new Gh("You must provide either an email or phone number and a password");const{data:s,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const i=new Fl;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,s,a,i;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=n.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=n.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=n.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,s,a,i,o,c,A,u,h,d,f;let g,m;if("message"in n)g=n.message,m=n.signature;else{const{chain:y,wallet:x,statement:p,options:v}=n;let b;if(Un())if(typeof x=="object")b=x;else{const B=window;if("ethereum"in B&&typeof B.ethereum=="object"&&"request"in B.ethereum&&typeof B.ethereum.request=="function")b=B.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const w=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href),_=await b.request({method:"eth_requestAccounts"}).then(B=>B).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=BT(_[0]);let k=(s=v==null?void 0:v.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!k){const B=await b.request({method:"eth_chainId"});k=$de(B)}const j={domain:w.host,address:C,statement:p,uri:w.href,version:"1",chainId:k,nonce:(a=v==null?void 0:v.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=v==null?void 0:v.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(c=v==null?void 0:v.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(A=v==null?void 0:v.signInWithEthereum)===null||A===void 0?void 0:A.notBefore,requestId:(u=v==null?void 0:v.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=v==null?void 0:v.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=Lde(j),m=await b.request({method:"personal_sign",params:[Ode(g),C]})}try{const{data:y,error:x}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:m},!((d=n.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=n.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ss});if(x)throw x;if(!y||!y.session||!y.user){const p=new Fl;return this._returnResult({data:{user:null,session:null},error:p})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(Re(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(n){var r,s,a,i,o,c,A,u,h,d,f,g;let m,y;if("message"in n)m=n.message,y=n.signature;else{const{chain:x,wallet:p,statement:v,options:b}=n;let w;if(Un())if(typeof p=="object")w=p;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))w=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const C=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),v?{statement:v}:null));let k;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")k=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)k=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)m=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),y=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${_.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(a=(s=b==null?void 0:b.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((A=b==null?void 0:b.signInWithSolana)===null||A===void 0)&&A.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((d=(h=b==null?void 0:b.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const C=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=C}}try{const{data:x,error:p}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Qo(y)},!((f=n.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=n.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ss});if(p)throw p;if(!x||!x.session||!x.user){const v=new Fl;return this._returnResult({data:{user:null,session:null},error:v})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:p})}catch(x){if(Re(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(n){const r=await po(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(r??"").split("/");try{if(!s&&this.flowType==="pkce")throw new lde;const{data:i,error:o}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:s},xform:Ss});if(await Fn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const c=new Fl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(n){try{const{options:r,provider:s,token:a,access_token:i,nonce:o}=n,c=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ss}),{data:A,error:u}=c;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!A||!A.session||!A.user){const h=new Fl;return this._returnResult({data:{user:null,session:null},error:h})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:A,error:u})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,s,a,i,o;try{if("email"in n){const{email:c,options:A}=n;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Ul(this.storage,this.storageKey));const{error:d}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},create_user:(s=A==null?void 0:A.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:A==null?void 0:A.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in n){const{phone:c,options:A}=n,{data:u,error:h}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=A==null?void 0:A.data)!==null&&a!==void 0?a:{},create_user:(i=A==null?void 0:A.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(o=A==null?void 0:A.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Gh("You must provide either an email or phone number.")}catch(c){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Re(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(n){var r,s;try{let a,i;"options"in n&&(a=(r=n.options)===null||r===void 0?void 0:r.redirectTo,i=(s=n.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:c}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ss});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const A=o.session,u=o.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),this._returnResult({data:{user:u,session:A},error:null})}catch(a){if(Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(n){var r,s,a,i,o;try{let c=null,A=null;this.flowType==="pkce"&&([c,A]=await Ul(this.storage,this.storageKey));const u=await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(s=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=n==null?void 0:n.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:A}),headers:this.headers,xform:Ude});return!((i=u.data)===null||i===void 0)&&i.url&&Un()&&!(!((o=n.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(c){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Re(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;if(s)throw s;if(!r)throw new Ur;const{error:a}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(n){if(Re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:s,type:a,options:i}=n,{error:o}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in n){const{phone:s,type:a,options:i}=n,{data:o,error:c}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c})}throw new Gh("You must provide either an email or phone number and a type")}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await po(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const s=n.expires_at?n.expires_at*1e3-Date.now()<wy:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",n.expires_at),!s){if(this.userStorage){const o=await po(this.userStorage,this.storageKey+"-user");o!=null&&o.user?n.user=o.user:n.user=Cy()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};n.user=Nde(n.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:a,error:i}=await this._callRefreshToken(n.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ii}):await this._useSession(async r=>{var s,a,i;const{data:o,error:c}=r;if(c)throw c;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ur}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ii})})}catch(r){if(Re(r))return ide(r)&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Ur;const o=a.session;let c=null,A=null;this.flowType==="pkce"&&n.email!=null&&([c,A]=await Ul(this.storage,this.storageKey));const{data:u,error:h}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:c,code_challenge_method:A}),jwt:o.access_token,xform:Ii});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(s){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Re(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Ur;const r=Date.now()/1e3;let s=r,a=!0,i=null;const{payload:o}=_y(n.access_token);if(o.exp&&(s=o.exp,a=s<=r),a){const{data:c,error:A}=await this._callRefreshToken(n.refresh_token);if(A)return this._returnResult({data:{user:null,session:null},error:A});if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:A}=await this._getUser(n.access_token);if(A)throw A;i={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var s;if(!n){const{data:o,error:c}=r;if(c)throw c;n=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(n!=null&&n.refresh_token))throw new Ur;const{data:a,error:i}=await this._callRefreshToken(n.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Un())throw new Wh("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Wh(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new N5("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new N5("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(n.code);if(b)throw b;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:c,expires_at:A,token_type:u}=n;if(!i||!c||!o||!u)throw new Wh("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(c);let f=h+d;A&&(f=parseInt(A));const g=f-h;g*1e3<=Zl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const m=f-d;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,h);const{data:y,error:x}=await this._getUser(i);if(x)throw x;const p={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:p,redirectType:n.type},error:null})}catch(s){if(Re(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await po(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:c}=await this.admin.signOut(o,n);if(c&&!(ade(c)&&(c.status===404||c.status===401||c.status===403)))return this._returnResult({error:c})}return n!=="others"&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=gde(),s={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(n){return await this._useSession(async r=>{var s,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((s=this.stateChangeEmitters.get(n))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",n,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(n))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",i),console.error(i)}})}async resetPasswordForEmail(n,r={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Ul(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var n;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:s,error:a}=await this._useSession(async i=>{var o,c,A,u,h;const{data:d,error:f}=i;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(o=n.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(A=n.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return Un()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:n.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Re(s))return this._returnResult({data:{provider:n.provider,url:null},error:s});throw s}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var s;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:c,token:A,access_token:u,nonce:h}=n,d=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:c,id_token:A,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ss}),{data:f,error:g}=d;return g?this._returnResult({data:{user:null,session:null},error:g}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Fl}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:g}))}catch(a){if(await Fn(this.storage,`${this.storageKey}-code-verifier`),Re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)throw o;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await vde(async a=>(a>0&&await yde(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Ss})),(a,i)=>{const o=200*Math.pow(2,a);return i&&by(i)&&Date.now()+o-s<Zl})}catch(s){if(this._debug(r,"error",s),Re(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",s),Un()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:n,url:s},error:null}}async _recoverAndRefresh(){var n,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await po(this.storage,this.storageKey);if(a&&this.userStorage){let o=await po(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await ec(this.userStorage,this.storageKey+"-user",o)),a.user=(n=o==null?void 0:o.user)!==null&&n!==void 0?n:Cy()}else if(a&&!a.user&&!a.user){const o=await po(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Fn(this.storage,this.storageKey+"-user"),await ec(this.storage,this.storageKey,a)):a.user=Cy()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<wy;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${wy}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),by(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(a.access_token);!c&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(n){var r,s;if(!n)throw new Ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Dm;const{data:i,error:o}=await this._refreshAccessToken(n);if(o)throw o;if(!i.session)throw new Ur;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={data:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(a,"error",i),Re(i)){const o={data:null,error:i};return by(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(n,r,s=!0){const a=`#_notifyAllSubscribers(${n})`;this._debug(a,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:n,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(n,r)}catch(A){i.push(A)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Fn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await ec(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=I5(a);await ec(this.storage,this.storageKey,i)}else{const a=I5(r);await ec(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Fn(this.storage,this.storageKey),await Fn(this.storage,this.storageKey+"-code-verifier"),await Fn(this.storage,this.storageKey+"-user"),this.userStorage&&await Fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Un()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Zl);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-n)/Zl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Zl}ms, refresh threshold is ${Ux} ticks`),a<=Ux&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof CT)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Un()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,s){const a=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ul(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(c.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${n}?${a.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ge(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var s,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:A,error:u}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(n.factorType==="totp"&&A.type==="totp"&&(!((a=A==null?void 0:A.totp)===null||a===void 0)&&a.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),this._returnResult({data:A,error:null}))})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?qde(n.webauthn.credential_response):Xde(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:A}=await Ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return A?this._returnResult({data:null,error:A}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:A}))})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(o.error)return o;const{data:c}=o;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Wde(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Vde(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:s}=await this._challenge({factorId:n.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(n=r==null?void 0:r.factors)!==null&&n!==void 0?n:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var n,r;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=_y(s.access_token);let o=null;i.aal&&(o=i.aal);let c=o;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:c,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?await Ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ur});const o=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&Un()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(n,r){try{return await this._useSession(async s=>{const{data:{session:a},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Ur});const o=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&Un()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await Ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;return a?this._returnResult({data:null,error:a}):s?(await Ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ur})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let s=r.keys.find(c=>c.kid===n);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(c=>c.kid===n),s&&this.jwks_cached_at+rde>a)return s;const{data:i,error:o}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(c=>c.kid===n),!s)?null:s}async getClaims(n,r={}){try{let s=n;if(!s){const{data:g,error:m}=await this.getSession();if(m||!g.session)return this._returnResult({data:null,error:m});s=g.session.access_token}const{header:a,payload:i,signature:o,raw:{header:c,payload:A}}=_y(s);r!=null&&r.allowExpired||Sde(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:g}=await this.getUser(s);if(g)throw g;return{data:{claims:i,header:a,signature:o},error:null}}const h=kde(a.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,hde(`${c}.${A}`)))throw new Qx("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(Re(s))return this._returnResult({data:null,error:s});throw s}}}pd.nextInstanceID={};const ahe=pd,ihe="2.89.0";let ou="";typeof Deno<"u"?ou="deno":typeof document<"u"?ou="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ou="react-native":ou="node";const ohe={"X-Client-Info":`supabase-js-${ou}/${ihe}`},lhe={headers:ohe},che={schema:"public"},Ahe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uhe={};function yd(e){"@babel/helpers - typeof";return yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yd(e)}function dhe(e,n){if(yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n||"default");if(yd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function hhe(e){var n=dhe(e,"string");return yd(n)=="symbol"?n:n+""}function fhe(e,n,r){return(n=hhe(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function O5(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Jt(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?O5(Object(r),!0).forEach(function(s){fhe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O5(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}const ghe=e=>e?(...n)=>e(...n):(...n)=>fetch(...n),mhe=()=>Headers,phe=(e,n,r)=>{const s=ghe(r),a=mhe();return async(i,o)=>{var c;const A=(c=await n())!==null&&c!==void 0?c:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${A}`),s(i,Jt(Jt({},o),{},{headers:u}))}};function yhe(e){return e.endsWith("/")?e:e+"/"}function vhe(e,n){var r,s;const{db:a,auth:i,realtime:o,global:c}=e,{db:A,auth:u,realtime:h,global:d}=n,f={db:Jt(Jt({},A),a),auth:Jt(Jt({},u),i),realtime:Jt(Jt({},h),o),storage:{},global:Jt(Jt(Jt({},d),c),{},{headers:Jt(Jt({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(s=c==null?void 0:c.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function xhe(e){const n=e==null?void 0:e.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(yhe(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var whe=class extends ahe{constructor(e){super(e)}},bhe=class{constructor(e,n,r){var s,a;this.supabaseUrl=e,this.supabaseKey=n;const i=xhe(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,c={db:che,realtime:uhe,auth:Jt(Jt({},Ahe),{},{storageKey:o}),global:lhe},A=vhe(r??{},c);if(this.storageKey=(s=A.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=A.global.headers)!==null&&a!==void 0?a:{},A.accessToken)this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=A.auth)!==null&&u!==void 0?u:{},this.headers,A.global.fetch)}this.fetch=phe(n,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Jt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new tue(new URL("rest/v1",i).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new Jue(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new XAe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,n,r;if(e.accessToken)return await e.accessToken();const{data:s}=await e.auth.getSession();return(n=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,storageKey:i,flowType:o,lock:c,debug:A,throwOnError:u},h,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new whe({url:this.authUrl.href,headers:Jt(Jt({},f),h),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:a,flowType:o,lock:c,debug:A,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new yue(this.realtimeUrl.href,Jt(Jt({},e),{},{params:Jt(Jt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const _he=(e,n,r)=>new bhe(e,n,r);function Che(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Che()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Bhe="https://vldqocgemjqtmjvxhozj.supabase.co",She="sb_publishable_doGcbZ1R6TOC1hBHRFu2BA_zzBpPiSZ",ce=_he(Bhe,She,{auth:{autoRefreshToken:!0,persistSession:!0,storageKey:"goa-timer-auth",storage:localStorage},realtime:{params:{eventsPerSecond:10}}}),Ze=()=>ce!==null;class khe{constructor(){de(this,"syncStatusListeners",new Set);de(this,"currentStatus",{status:"idle",progress:0,message:"Ready to sync"});de(this,"realtimeChannels",[]);de(this,"syncInProgress",!1);de(this,"autoSyncEnabled",!1);de(this,"autoSyncUnsubscribe",null);de(this,"autoUploadEnabled",!0);de(this,"autoUploadTimeout",null);de(this,"autoUploadDebounceMs",3e3);de(this,"autoSyncOwnDevicesEnabled",!1);de(this,"autoSyncOwnDevicesUnsubscribe",null);de(this,"ownDevicesRealtimeChannel",null);de(this,"FRIEND_PREFS_KEY","cloudSync_friendPreferences");const n=localStorage.getItem("cloudSync_autoEnabled");this.autoSyncEnabled=n==="true";const r=localStorage.getItem("cloudSync_autoUploadEnabled");this.autoUploadEnabled=r!=="false";const s=localStorage.getItem("cloudSync_autoSyncOwnDevices");this.autoSyncOwnDevicesEnabled=s!=="false"}async uploadLocalData(){if(!Ze()||!ce)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Cloud features not configured"};if(this.syncInProgress)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Sync already in progress"};this.syncInProgress=!0,this.updateStatus({status:"uploading",progress:0,message:"Preparing local data..."});try{const{data:{user:n}}=await ce.auth.getUser();if(!n)throw new Error("Not authenticated");const r=await Pe.exportData();this.updateStatus({status:"uploading",progress:5,message:"Exporting local database..."}),this.updateStatus({status:"uploading",progress:10,message:"Checking for deleted matches..."});const s=await this.getOwnTombstones(),a=new Set(s),i=r.matches.filter(d=>!a.has(d.id)),o=new Set(i.map(d=>d.id)),c=r.matchPlayers.filter(d=>o.has(d.matchId));s.length>0&&console.log(`[CloudSyncService] Skipping ${r.matches.length-i.length} tombstoned matches`);const A=this.getDeviceId();let u=0;this.updateStatus({status:"uploading",progress:20,message:`Uploading ${r.players.length} players...`});for(let d=0;d<r.players.length;d++){const f=r.players[d],{error:g}=await ce.from("cloud_players").upsert({owner_id:n.id,local_id:f.id,name:f.name,total_games:f.totalGames,wins:f.wins,losses:f.losses,elo:f.elo,mu:f.mu,sigma:f.sigma,ordinal:f.ordinal,last_played:f.lastPlayed,date_created:f.dateCreated,device_id:f.deviceId||A,level:f.level,sync_source:"local",synced_at:new Date().toISOString()},{onConflict:"owner_id,local_id"});g||u++,this.updateStatus({status:"uploading",progress:20+Math.floor(d/r.players.length*20),message:`Uploading players (${d+1}/${r.players.length})...`})}this.updateStatus({status:"uploading",progress:40,message:`Uploading ${i.length} matches...`});for(let d=0;d<i.length;d++){const f=i[d],{error:g}=await ce.from("cloud_matches").upsert({id:f.id,owner_id:n.id,date:f.date,winning_team:f.winningTeam.toLowerCase(),game_length:f.gameLength.toLowerCase(),double_lanes:f.doubleLanes,titan_players:f.titanPlayers,atlantean_players:f.atlanteanPlayers,device_id:f.deviceId||A,sync_source:"local",synced_at:new Date().toISOString()},{onConflict:"owner_id,id"});g||u++,this.updateStatus({status:"uploading",progress:40+Math.floor(d/Math.max(i.length,1)*30),message:`Uploading matches (${d+1}/${i.length})...`})}this.updateStatus({status:"uploading",progress:70,message:`Uploading ${c.length} match details...`});for(let d=0;d<c.length;d++){const f=c[d],{error:g}=await ce.from("cloud_match_players").upsert({id:f.id,owner_id:n.id,match_id:f.matchId,player_id:f.playerId,team:f.team.toLowerCase(),hero_id:f.heroId,hero_name:f.heroName,hero_roles:f.heroRoles,kills:f.kills,deaths:f.deaths,assists:f.assists,gold_earned:f.goldEarned,minion_kills:f.minionKills,level:f.level,device_id:f.deviceId||A,sync_source:"local",synced_at:new Date().toISOString()},{onConflict:"owner_id,id"});g||u++,this.updateStatus({status:"uploading",progress:70+Math.floor(d/Math.max(c.length,1)*25),message:`Uploading match details (${d+1}/${c.length})...`})}await ce.from("profiles").update({last_sync_at:new Date().toISOString()}).eq("id",n.id);const h=new Date;return localStorage.setItem("cloudSync_lastSync",h.toISOString()),this.updateStatus({status:"complete",progress:100,message:`Upload complete! ${u} records synced.`,lastSyncAt:h}),this.syncInProgress=!1,{success:!0,recordsAdded:u,recordsUpdated:0}}catch(n){return console.error("[CloudSyncService] Upload error:",n),this.updateStatus({status:"error",progress:0,message:"Upload failed",error:n instanceof Error?n.message:"Unknown error"}),this.syncInProgress=!1,{success:!1,recordsAdded:0,recordsUpdated:0,error:String(n)}}}async syncFromFriends(n){if(!Ze()||!ce)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Cloud features not configured"};if(this.syncInProgress)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Sync already in progress"};this.syncInProgress=!0,this.updateStatus({status:"downloading",progress:0,message:"Fetching friend data..."});try{const{data:{user:r}}=await ce.auth.getUser();if(!r)throw new Error("Not authenticated");let s;if(n&&n.length>0)s=n;else{const{data:h}=await ce.from("friends").select("friend_id").eq("user_id",r.id);s=(h||[]).map(d=>d.friend_id)}if(s.length===0)return this.updateStatus({status:"complete",progress:100,message:"No friends to sync from",lastSyncAt:new Date}),this.syncInProgress=!1,{success:!0,recordsAdded:0,recordsUpdated:0};this.updateStatus({status:"downloading",progress:20,message:`Downloading from ${s.length} friend${s.length===1?"":"s"}...`});const{data:a}=await ce.from("cloud_players").select("*").in("owner_id",s);this.updateStatus({status:"downloading",progress:40,message:"Downloading matches..."});const{data:i}=await ce.from("cloud_matches").select("*").in("owner_id",s);this.updateStatus({status:"downloading",progress:60,message:"Downloading match details..."});const{data:o}=await ce.from("cloud_match_players").select("*").in("owner_id",s);this.updateStatus({status:"merging",progress:70,message:"Merging data..."});const c={players:(a||[]).map(h=>this.cloudPlayerToLocal(h)),matches:(i||[]).map(h=>this.cloudMatchToLocal(h)),matchPlayers:(o||[]).map(h=>this.cloudMatchPlayerToLocal(h)),exportDate:new Date,version:4},A=await Pe.mergeData(c),u=new Date;return localStorage.setItem("cloudSync_lastSync",u.toISOString()),this.updateStatus({status:"complete",progress:100,message:`Sync complete! Merged data from ${s.length} friends.`,lastSyncAt:u}),this.syncInProgress=!1,{success:A,recordsAdded:c.players.length+c.matches.length,recordsUpdated:0}}catch(r){return console.error("[CloudSyncService] Sync error:",r),this.updateStatus({status:"error",progress:0,message:"Sync failed",error:r instanceof Error?r.message:"Unknown error"}),this.syncInProgress=!1,{success:!1,recordsAdded:0,recordsUpdated:0,error:String(r)}}}subscribeToFriendUpdates(n){if(!Ze()||!ce)return()=>{};const r=ce.channel("friend_matches").on("postgres_changes",{event:"*",schema:"public",table:"cloud_matches"},()=>{console.log("[CloudSyncService] Friend match update detected"),n()}).subscribe();return this.realtimeChannels.push(r),()=>{this.realtimeChannels.forEach(s=>{ce==null||ce.removeChannel(s)}),this.realtimeChannels=[]}}setAutoSync(n){this.autoSyncEnabled=n,localStorage.setItem("cloudSync_autoEnabled",String(n)),n?this.startAutoSync():this.stopAutoSync()}isAutoSyncEnabled(){return this.autoSyncEnabled}setAutoUpload(n){this.autoUploadEnabled=n,localStorage.setItem("cloudSync_autoUploadEnabled",String(n))}isAutoUploadEnabled(){return this.autoUploadEnabled}getFriendSyncPreferences(){const n=localStorage.getItem(this.FRIEND_PREFS_KEY);if(!n)return{};try{return JSON.parse(n)}catch{return{}}}setFriendSyncPreference(n,r){const s=this.getFriendSyncPreferences();s[n]={autoSync:r},localStorage.setItem(this.FRIEND_PREFS_KEY,JSON.stringify(s))}isFriendAutoSyncEnabled(n){var s;return((s=this.getFriendSyncPreferences()[n])==null?void 0:s.autoSync)??!1}getAutoSyncFriendIds(n){const r=this.getFriendSyncPreferences();return n.filter(s=>{var a;return((a=r[s])==null?void 0:a.autoSync)??!1})}triggerAutoUpload(){this.autoUploadEnabled&&(!Ze()||!ce||(this.autoUploadTimeout&&clearTimeout(this.autoUploadTimeout),this.autoUploadTimeout=setTimeout(async()=>{if(!ce)return;const{data:{user:n}}=await ce.auth.getUser();n&&!this.syncInProgress&&(console.log("[CloudSyncService] Auto-uploading data..."),await this.uploadLocalData())},this.autoUploadDebounceMs)))}async downloadOwnCloudData(){if(!Ze()||!ce)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Cloud features not configured"};if(this.syncInProgress)return{success:!1,recordsAdded:0,recordsUpdated:0,error:"Sync already in progress"};this.syncInProgress=!0,this.updateStatus({status:"downloading",progress:0,message:"Downloading your data from cloud..."});try{const{data:{user:n}}=await ce.auth.getUser();if(!n)throw new Error("Not authenticated");const r=this.getDeviceId();this.updateStatus({status:"downloading",progress:10,message:"Checking for deleted matches..."});const s=await this.getOwnTombstones(),a=new Set(s);this.updateStatus({status:"downloading",progress:20,message:"Downloading players from other devices..."});const{data:i}=await ce.from("cloud_players").select("*").eq("owner_id",n.id).neq("device_id",r);this.updateStatus({status:"downloading",progress:40,message:"Downloading matches from other devices..."});const{data:o}=await ce.from("cloud_matches").select("*").eq("owner_id",n.id).neq("device_id",r);this.updateStatus({status:"downloading",progress:60,message:"Downloading match details from other devices..."});const{data:c}=await ce.from("cloud_match_players").select("*").eq("owner_id",n.id).neq("device_id",r);this.updateStatus({status:"merging",progress:70,message:"Applying deletions..."});const A=await this.applyTombstonesToLocal(s);A>0&&console.log(`[CloudSyncService] Applied ${A} tombstones`),this.updateStatus({status:"merging",progress:80,message:"Merging data..."});const u=(o||[]).filter(x=>!a.has(x.id)),h=new Set(u.map(x=>x.id)),d=(c||[]).filter(x=>h.has(x.match_id)),f={players:(i||[]).map(x=>this.cloudPlayerToLocal(x)),matches:u.map(x=>this.cloudMatchToLocal(x)),matchPlayers:d.map(x=>this.cloudMatchPlayerToLocal(x)),exportDate:new Date,version:4},g=await Pe.mergeData(f),m=new Date;localStorage.setItem("cloudSync_lastOwnSync",m.toISOString());const y=f.players.length+f.matches.length+f.matchPlayers.length;return this.updateStatus({status:"complete",progress:100,message:y>0||A>0?`Synced: ${y} records downloaded${A>0?`, ${A} deleted`:""}.`:"No new data found from other devices.",lastSyncAt:m}),this.syncInProgress=!1,{success:g,recordsAdded:y,recordsUpdated:A}}catch(n){return console.error("[CloudSyncService] Download own data error:",n),this.updateStatus({status:"error",progress:0,message:"Download failed",error:n instanceof Error?n.message:"Unknown error"}),this.syncInProgress=!1,{success:!1,recordsAdded:0,recordsUpdated:0,error:String(n)}}}subscribeToOwnDeviceUpdates(n){return!Ze()||!ce?()=>{}:(this.ownDevicesRealtimeChannel=ce.channel("own_device_sync").on("postgres_changes",{event:"INSERT",schema:"public",table:"cloud_matches"},async r=>{if(!ce)return;const{data:{user:s}}=await ce.auth.getUser();if(!s)return;const a=r.new,i=a.owner_id,o=a.device_id,c=this.getDeviceId();i===s.id&&o!==c&&(console.log("[CloudSyncService] Own data change detected from device:",o),n(o))}).subscribe(),()=>{this.ownDevicesRealtimeChannel&&(ce==null||ce.removeChannel(this.ownDevicesRealtimeChannel),this.ownDevicesRealtimeChannel=null)})}setAutoSyncOwnDevices(n){this.autoSyncOwnDevicesEnabled=n,localStorage.setItem("cloudSync_autoSyncOwnDevices",String(n)),n?this.startAutoSyncOwnDevices():this.stopAutoSyncOwnDevices()}isAutoSyncOwnDevicesEnabled(){return this.autoSyncOwnDevicesEnabled}getLastOwnSyncTime(){const n=localStorage.getItem("cloudSync_lastOwnSync");return n?new Date(n):null}async getOwnTombstones(){if(!Ze()||!ce)return[];try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return[];const{data:r}=await ce.from("deleted_matches").select("match_id").eq("owner_id",n.id);return(r||[]).map(s=>s.match_id)}catch(n){return console.error("[CloudSyncService] Error fetching tombstones:",n),[]}}async deleteMatchFromCloud(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const s=this.getDeviceId();await ce.from("cloud_match_players").delete().eq("owner_id",r.id).eq("match_id",n),await ce.from("cloud_matches").delete().eq("owner_id",r.id).eq("id",n);const{error:a}=await ce.from("deleted_matches").upsert({owner_id:r.id,match_id:n,deleted_at:new Date().toISOString(),device_id:s},{onConflict:"owner_id,match_id"});return a&&console.error("[CloudSyncService] Tombstone insert error:",a),console.log("[CloudSyncService] Match deleted from cloud:",n),{success:!0}}catch(r){return console.error("[CloudSyncService] Delete from cloud error:",r),{success:!1,error:r instanceof Error?r.message:"Unknown error"}}}async applyTombstonesToLocal(n){if(n.length===0)return 0;let r=0;for(const s of n)await Pe.getMatch(s)&&(await Pe.deleteMatchAndPlayersOnly(s),r++,console.log("[CloudSyncService] Applied tombstone - deleted local match:",s));return r>0&&await Pe.recalculatePlayerStats(),r}startAutoSyncOwnDevices(){this.autoSyncOwnDevicesUnsubscribe||(this.autoSyncOwnDevicesUnsubscribe=this.subscribeToOwnDeviceUpdates(async n=>{setTimeout(async()=>{this.autoSyncOwnDevicesEnabled&&!this.syncInProgress&&(console.log("[CloudSyncService] Auto-syncing from device:",n),await this.downloadOwnCloudData())},2e3)}))}stopAutoSyncOwnDevices(){this.autoSyncOwnDevicesUnsubscribe&&(this.autoSyncOwnDevicesUnsubscribe(),this.autoSyncOwnDevicesUnsubscribe=null)}startAutoSync(){this.autoSyncUnsubscribe||(this.autoSyncUnsubscribe=this.subscribeToFriendUpdates(async()=>{setTimeout(async()=>{if(this.autoSyncEnabled&&!this.syncInProgress&&ce){const{data:{user:n}}=await ce.auth.getUser();if(!n)return;const{data:r}=await ce.from("friends").select("friend_id").eq("user_id",n.id),s=(r||[]).map(i=>i.friend_id),a=this.getAutoSyncFriendIds(s);a.length>0&&this.syncFromFriends(a)}},2e3)}))}stopAutoSync(){this.autoSyncUnsubscribe&&(this.autoSyncUnsubscribe(),this.autoSyncUnsubscribe=null)}onStatusChange(n){return this.syncStatusListeners.add(n),n(this.currentStatus),()=>this.syncStatusListeners.delete(n)}getStatus(){return{...this.currentStatus}}getLastSyncTime(){const n=localStorage.getItem("cloudSync_lastSync");return n?new Date(n):null}updateStatus(n){this.currentStatus={...this.currentStatus,...n},this.syncStatusListeners.forEach(r=>r(this.currentStatus))}getDeviceId(){const n="guards-of-atlantis-device-id";return localStorage.getItem(n)||"unknown"}cloudPlayerToLocal(n){return{id:n.local_id,name:n.name,totalGames:n.total_games,wins:n.wins,losses:n.losses,elo:n.elo,mu:n.mu,sigma:n.sigma,ordinal:n.ordinal,lastPlayed:new Date(n.last_played),dateCreated:new Date(n.date_created),deviceId:n.device_id,level:n.level}}cloudMatchToLocal(n){const r=n.winning_team.toLowerCase(),s=n.game_length.toLowerCase();return{id:n.id,date:new Date(n.date),winningTeam:r,gameLength:s,doubleLanes:n.double_lanes,titanPlayers:n.titan_players,atlanteanPlayers:n.atlantean_players,deviceId:n.device_id}}cloudMatchPlayerToLocal(n){const r=n.team.toLowerCase();return{id:n.id,matchId:n.match_id,playerId:n.player_id,team:r,heroId:n.hero_id,heroName:n.hero_name,heroRoles:n.hero_roles,kills:n.kills,deaths:n.deaths,assists:n.assists,goldEarned:n.gold_earned,minionKills:n.minion_kills,level:n.level,deviceId:n.device_id}}}const ar=new khe,jhe="GuardsOfAtlantisStats",L5=4,tt={PLAYERS:"players",MATCHES:"matches",MATCH_PLAYERS:"matchPlayers"},H5=1200,ka=25/6,QA=25/300;function Vh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const n=Math.random()*16|0;return(e==="x"?n:n&3|8).toString(16)})}class Nhe{constructor(){de(this,"db",null);de(this,"playerRatings",{})}async initialize(){try{return this.db=await this.openDatabase(),await this.checkAndMigrateRatings(),!0}catch(n){return console.error("Failed to initialize database:",n),!1}}async checkAndMigrateRatings(){try{(await this.getAllPlayers()).some(s=>s.totalGames>0&&(s.mu===void 0||s.sigma===void 0||s.ordinal===void 0))&&(console.log("Migrating player ratings to TrueSkill system..."),await this.recalculatePlayerStats(),console.log("Migration complete!"))}catch(n){console.error("Error checking rating migration:",n)}}openDatabase(){return new Promise((n,r)=>{const s=indexedDB.open(jhe,L5);s.onupgradeneeded=a=>{const i=a.target.result;if(i.objectStoreNames.contains(tt.PLAYERS)){const o=a.target.transaction;if(o){const c=o.objectStore(tt.PLAYERS);c.indexNames.contains("ordinal")||c.createIndex("ordinal","ordinal",{unique:!1})}}else{const o=i.createObjectStore(tt.PLAYERS,{keyPath:"id"});o.createIndex("name","name",{unique:!0}),o.createIndex("elo","elo",{unique:!1}),o.createIndex("ordinal","ordinal",{unique:!1})}if(!i.objectStoreNames.contains(tt.MATCHES)){const o=i.createObjectStore(tt.MATCHES,{keyPath:"id"});o.createIndex("date","date",{unique:!1}),o.createIndex("winningTeam","winningTeam",{unique:!1})}if(!i.objectStoreNames.contains(tt.MATCH_PLAYERS)){const o=i.createObjectStore(tt.MATCH_PLAYERS,{keyPath:"id"});o.createIndex("matchId","matchId",{unique:!1}),o.createIndex("playerId","playerId",{unique:!1}),o.createIndex("heroId","heroId",{unique:!1}),o.createIndex("heroName","heroName",{unique:!1}),o.createIndex("playerMatch",["playerId","matchId"],{unique:!0})}},s.onsuccess=a=>{const i=a.target.result;n(i)},s.onerror=a=>{r(a.target.error)}})}getDisplayRating(n){return n.ordinal!==void 0?Math.round((n.ordinal+25)*40+200):n.elo}getDeviceId(){const n="guards-of-atlantis-device-id";let r=localStorage.getItem(n);if(!r){const s=Date.now().toString(36),a=Math.random().toString(36).substring(2,10);r=`device_${s}_${a}`,localStorage.setItem(n,r)}return r}async getPlayer(n){return this.db||await this.initialize(),this.db?new Promise((r,s)=>{const o=this.db.transaction([tt.PLAYERS],"readonly").objectStore(tt.PLAYERS).get(n);o.onsuccess=()=>{r(o.result||null)},o.onerror=()=>{s(o.error)}}):null}async savePlayer(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return n.deviceId||(n.deviceId=this.getDeviceId()),new Promise((r,s)=>{const o=this.db.transaction([tt.PLAYERS],"readwrite").objectStore(tt.PLAYERS).put(n);o.onsuccess=()=>{r()},o.onerror=()=>{s(o.error)}})}async getAllPlayers(){return this.db||await this.initialize(),this.db?new Promise((n,r)=>{const i=this.db.transaction([tt.PLAYERS],"readonly").objectStore(tt.PLAYERS).getAll();i.onsuccess=()=>{n(i.result||[])},i.onerror=()=>{r(i.error)}}):[]}async getHeroStats(n=1,r,s){try{const a=await this.getAllMatchPlayers();let i=await this.getAllMatches();(r||s)&&(i=i.filter(d=>{const f=new Date(d.date);return!(r&&f<r||s&&f>s)}));const o=new Set(i.map(d=>d.id)),c=a.filter(d=>o.has(d.matchId)),A=new Map(i.map(d=>[d.id,d])),u=new Map;for(const d of c){const f=d.heroId;if(f==null)continue;u.has(f)||u.set(f,{heroId:f,heroName:d.heroName,icon:`heroes/${d.heroName.toLowerCase()}.png`,roles:d.heroRoles,complexity:1,expansion:"Unknown",totalGames:0,wins:0,losses:0,teammates:new Map,opponents:new Map});const g=u.get(f);g.totalGames+=1;const m=A.get(d.matchId);if(!m)continue;d.team===m.winningTeam?g.wins+=1:g.losses+=1}for(const d of i){const f=c.filter(g=>g.matchId===d.id);for(const g of f){const m=g.heroId;if(m==null||!u.has(m))continue;const y=u.get(m),x=g.team,p=x===d.winningTeam,v=f.filter(w=>w.team===x&&w.heroId!==m),b=f.filter(w=>w.team!==x);for(const w of v){if(w.heroId===void 0||w.heroId===null)continue;let _=y.teammates.get(w.heroId);_||(_={wins:0,games:0},y.teammates.set(w.heroId,_)),_.games+=1,p&&(_.wins+=1)}for(const w of b){if(w.heroId===void 0||w.heroId===null)continue;let _=y.opponents.get(w.heroId);_||(_={wins:0,games:0},y.opponents.set(w.heroId,_)),_.games+=1,p&&(_.wins+=1)}}}const h=Array.from(u.values()).map(d=>{const f=d.totalGames>0?d.wins/d.totalGames*100:0,g=Array.from(d.teammates.entries()).filter(([x,p])=>p.games>=n).map(([x,p])=>{const v=u.get(x);return v?{heroId:x,heroName:v.heroName,icon:v.icon,winRate:p.games>0?p.wins/p.games*100:0,gamesPlayed:p.games}:null}).filter(x=>x!==null).sort((x,p)=>p.winRate-x.winRate).slice(0,3),m=Array.from(d.opponents.entries()).filter(([x,p])=>p.games>=n).map(([x,p])=>{const v=u.get(x);return v?{heroId:x,heroName:v.heroName,icon:v.icon,winRate:p.games>0?p.wins/p.games*100:0,gamesPlayed:p.games}:null}).filter(x=>x!==null).sort((x,p)=>p.winRate-x.winRate).slice(0,3),y=Array.from(d.opponents.entries()).filter(([x,p])=>p.games>=n).map(([x,p])=>{const v=u.get(x);return v?{heroId:x,heroName:v.heroName,icon:v.icon,winRate:p.games>0?p.wins/p.games*100:0,gamesPlayed:p.games}:null}).filter(x=>x!==null).sort((x,p)=>x.winRate-p.winRate).slice(0,3);return{...d,winRate:f,bestTeammates:g,bestAgainst:m,worstAgainst:y,teammates:void 0,opponents:void 0}});try{const{heroes:d}=await pB(()=>Promise.resolve().then(()=>uB),void 0);for(const f of h){const g=d.find(m=>m.name===f.heroName);g&&(f.complexity=g.complexity,f.expansion=g.expansion)}}catch(d){console.error("Error enriching hero stats with heroes.ts data:",d)}return h}catch(a){return console.error("Error getting hero stats:",a),[]}}async getHeroWinRateOverTime(n,r=3,s,a){try{const i=await this.getAllMatchPlayers();let o=await this.getAllMatches();if(o.sort((m,y)=>new Date(m.date).getTime()-new Date(y.date).getTime()),(s||a)&&(o=o.filter(m=>{const y=new Date(m.date);return!(s&&y<s||a&&y>a)})),o.length===0)return{heroes:[],dateRange:null};const c=new Set(o.map(m=>m.id)),A=i.filter(m=>c.has(m.matchId)),u=new Map(o.map(m=>[m.id,m])),h=new Map;for(const m of A){const y=m.heroId;if(y==null||n&&n.length>0&&!n.includes(y))continue;const x=u.get(m.matchId);if(!x)continue;h.has(y)||h.set(y,{heroName:m.heroName,icon:`heroes/${m.heroName.toLowerCase().replace(/\s+/g,"")}.png`,matches:[]});const p=h.get(y),v=new Date(x.date).toISOString().split("T")[0],b=m.team===x.winningTeam;p.matches.push({date:v,won:b})}const d=[];for(const[m,y]of h.entries()){y.matches.sort((C,k)=>C.date.localeCompare(k.date));const x=new Map;for(const C of y.matches){x.has(C.date)||x.set(C.date,{wins:0,games:0});const k=x.get(C.date);k.games++,C.won&&k.wins++}const p=[];let v=0,b=0;const w=Array.from(x.keys()).sort();for(const C of w){const k=x.get(C);v+=k.games,b+=k.wins,p.push({date:C,gamesPlayedTotal:v,winsTotal:b,winRate:v>0?b/v*100:0,gamesPlayedOnDate:k.games})}const _=p.filter(C=>C.gamesPlayedTotal>=r);_.length>0&&d.push({heroId:m,heroName:y.heroName,icon:y.icon,totalGames:v,currentWinRate:v>0?b/v*100:0,dataPoints:_})}d.sort((m,y)=>y.totalGames-m.totalGames);try{const{heroes:m}=await pB(()=>Promise.resolve().then(()=>uB),void 0);for(const y of d){const x=m.find(p=>p.name===y.heroName);x&&(y.icon=x.icon)}}catch(m){console.error("Error enriching hero icons:",m)}const f=d.flatMap(m=>m.dataPoints.map(y=>y.date)),g=f.length>0?{firstMatch:f.reduce((m,y)=>y<m?y:m),lastMatch:f.reduce((m,y)=>y>m?y:m)}:null;return{heroes:d,dateRange:g}}catch(i){return console.error("Error getting hero win rate over time:",i),{heroes:[],dateRange:null}}}async getFilteredPlayerStats(n,r,s=!1){try{const a=await this.getAllPlayers();let i=await this.getAllMatches();const o=await this.getAllMatchPlayers();let c=null;(n||r)&&(c={start:n||new Date(0),end:r||new Date}),(n||r)&&(i=i.filter(g=>{const m=new Date(g.date);return!(n&&m<n||r&&m>r)}));const A=new Set(i.map(g=>g.id)),u=o.filter(g=>A.has(g.matchId)),h=new Map(i.map(g=>[g.id,g]));let d={};s?d=await this.calculateTrueSkillForMatches(i):d=await this.getCurrentTrueSkillRatings();const f=[];for(const g of a){const m=u.filter(D=>D.playerId===g.id);if(m.length===0)continue;let y=0,x=0,p=0,v=0,b=0,w=0,_=0,C=!1,k=null;const j=new Map,B=new Map;for(const D of m){const T=h.get(D.matchId);if(!T)continue;const L=new Date(T.date);if((!k||L>k)&&(k=L),D.team===T.winningTeam?y++:x++,D.kills!==void 0&&(p+=D.kills,C=!0),D.deaths!==void 0&&(v+=D.deaths),D.assists!==void 0&&(b+=D.assists),D.goldEarned!==void 0&&(w+=D.goldEarned),D.minionKills!==void 0&&(_+=D.minionKills),D.heroId!==void 0){const Q=j.get(D.heroId);Q?Q.count++:j.set(D.heroId,{heroId:D.heroId,heroName:D.heroName,count:1})}if(D.heroRoles)for(const Q of D.heroRoles)B.set(Q,(B.get(Q)||0)+1)}const E=m.length,P=E>0?y/E*100:0,I=v>0?p/v:p,U=Array.from(j.values()).sort((D,T)=>T.count-D.count).slice(0,3),N=Array.from(B.entries()).map(([D,T])=>({role:D,count:T})).sort((D,T)=>T.count-D.count).slice(0,3);f.push({id:g.id,name:g.name,gamesPlayed:E,wins:y,losses:x,winRate:P,kills:p,deaths:v,assists:b,kdRatio:I,totalGold:w,totalMinionKills:_,averageGold:E>0?w/E:0,averageMinionKills:E>0?_/E:0,hasCombatStats:C,favoriteHeroes:U,favoriteRoles:N,displayRating:d[g.id]||1200,lastPlayed:k})}return{players:f,dateRange:c}}catch(a){return console.error("Error getting filtered player stats:",a),{players:[],dateRange:null}}}async calculateTrueSkillForMatches(n){try{const r=[...n].sort((o,c)=>{const A=new Date(o.date).getTime(),u=new Date(c.date).getTime();return A-u}),s=await this.getAllPlayers(),a={};for(const o of s)a[o.id]=xt.rating();for(const o of r){const c=await this.getMatchPlayers(o.id),A=[],u=[],h=[],d=[];for(const m of c)m.team===ne.Titans?(A.push(m.playerId),u.push(a[m.playerId]||xt.rating())):(h.push(m.playerId),d.push(a[m.playerId]||xt.rating()));if(u.length===0||d.length===0)continue;let f;o.winningTeam===ne.Titans?f=[1,2]:f=[2,1];const g=xt.rate([u,d],{rank:f,beta:ka,tau:QA});for(let m=0;m<A.length;m++)a[A[m]]=g[0][m];for(let m=0;m<h.length;m++)a[h[m]]=g[1][m]}const i={};for(const o in a){const c=a[o],A=xt.ordinal(c);i[o]=Math.round((A+25)*40+200)}return i}catch(r){return console.error("Error calculating TrueSkill for matches:",r),{}}}async getAllMatchPlayers(){return this.db||await this.initialize(),this.db?new Promise((n,r)=>{const i=this.db.transaction([tt.MATCH_PLAYERS],"readonly").objectStore(tt.MATCH_PLAYERS).getAll();i.onsuccess=()=>{n(i.result||[])},i.onerror=()=>{r(i.error)}}):[]}async getAllMatches(){return this.db||await this.initialize(),this.db?new Promise((n,r)=>{const i=this.db.transaction([tt.MATCHES],"readonly").objectStore(tt.MATCHES).getAll();i.onsuccess=()=>{n(i.result||[])},i.onerror=()=>{r(i.error)}}):[]}async getMatch(n){return this.db||await this.initialize(),this.db?new Promise((r,s)=>{const o=this.db.transaction([tt.MATCHES],"readonly").objectStore(tt.MATCHES).get(n);o.onsuccess=()=>{r(o.result||null)},o.onerror=()=>{s(o.error)}}):null}async saveMatch(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return n.id||(n.id=Vh()),n.deviceId||(n.deviceId=this.getDeviceId()),new Promise((r,s)=>{const o=this.db.transaction([tt.MATCHES],"readwrite").objectStore(tt.MATCHES).put(n);o.onsuccess=()=>{r(n.id)},o.onerror=()=>{s(o.error)}})}async deleteMatch(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{if(!await this.getMatch(n))throw new Error("Match not found");const s=await this.getMatchPlayers(n);await this.deleteMatchAndPlayers(n,s),await this.recalculatePlayerStats(),ar.deleteMatchFromCloud(n).catch(a=>{console.error("[DatabaseService] Cloud deletion failed:",a)})}catch(r){throw console.error("Error deleting match:",r),r}}async deleteMatchAndPlayers(n,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return new Promise((s,a)=>{const i=this.db.transaction([tt.MATCHES,tt.MATCH_PLAYERS],"readwrite"),o=i.objectStore(tt.MATCH_PLAYERS);r.forEach(A=>{o.delete(A.id)}),i.objectStore(tt.MATCHES).delete(n),i.oncomplete=()=>{s()},i.onerror=()=>{a(i.error)}})}async deleteMatchAndPlayersOnly(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{if(!await this.getMatch(n))return!1;const s=await this.getMatchPlayers(n);return await this.deleteMatchAndPlayers(n,s),!0}catch(r){return console.error("Error deleting match locally:",r),!1}}initializeTrueSkillRatings(n){this.playerRatings={};for(const r of n)r.mu!==void 0&&r.sigma!==void 0?this.playerRatings[r.id]={mu:r.mu,sigma:r.sigma}:this.playerRatings[r.id]=xt.rating()}async recalculatePlayerStats(){try{console.log("Starting player statistics recalculation with TrueSkill...");const n=await this.getAllPlayers();console.log(`Found ${n.length} players for recalculation`);const r=new Map;for(const a of n)r.set(a.id,{totalGames:0,wins:0,losses:0});this.playerRatings={};for(const a of n)this.playerRatings[a.id]=xt.rating();let s=await this.getAllMatches();s.sort((a,i)=>{const o=new Date(a.date).getTime(),c=new Date(i.date).getTime();return o-c}),console.log(`Processing ${s.length} matches in chronological order`);for(const a of s){const i=await this.getMatchPlayers(a.id),o=[],c=[],A=[],u=[];for(const f of i)f.team===ne.Titans?(o.push(f.playerId),A.push(this.playerRatings[f.playerId])):(c.push(f.playerId),u.push(this.playerRatings[f.playerId]));if(A.length===0||u.length===0){console.warn(`Skipping match ${a.id} due to empty team`);continue}let h;a.winningTeam===ne.Titans?h=[1,2]:h=[2,1];const d=xt.rate([A,u],{rank:h,beta:ka,tau:QA});for(let f=0;f<o.length;f++)this.playerRatings[o[f]]=d[0][f];for(let f=0;f<c.length;f++)this.playerRatings[c[f]]=d[1][f];for(const f of i){const g=r.get(f.playerId);g&&(g.totalGames+=1,f.team===a.winningTeam?g.wins+=1:g.losses+=1)}}for(const a of n){const i=r.get(a.id),o=this.playerRatings[a.id],c={...a,totalGames:i.totalGames,wins:i.wins,losses:i.losses,mu:o.mu,sigma:o.sigma,ordinal:xt.ordinal(o),elo:Math.round((xt.ordinal(o)+25)*40+200),lastPlayed:i.totalGames>0?new Date:a.lastPlayed};await this.savePlayer(c)}console.log("Player statistics recalculation completed successfully")}catch(n){throw console.error("Error recalculating player stats:",n),n}}calculateNewELO(n,r,s,a,i=.7,o=32){return n}async saveMatchPlayer(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return n.id||(n.id=Vh()),n.deviceId||(n.deviceId=this.getDeviceId()),new Promise((r,s)=>{const o=this.db.transaction([tt.MATCH_PLAYERS],"readwrite").objectStore(tt.MATCH_PLAYERS).put(n);o.onsuccess=()=>{r(n.id)},o.onerror=()=>{s(o.error)}})}async getMatchPlayers(n){return this.db||await this.initialize(),this.db?new Promise((r,s)=>{const c=this.db.transaction([tt.MATCH_PLAYERS],"readonly").objectStore(tt.MATCH_PLAYERS).index("matchId").getAll(n);c.onsuccess=()=>{r(c.result||[])},c.onerror=()=>{s(c.error)}}):[]}async getPlayerMatches(n){return this.db||await this.initialize(),this.db?new Promise((r,s)=>{const c=this.db.transaction([tt.MATCH_PLAYERS],"readonly").objectStore(tt.MATCH_PLAYERS).index("playerId").getAll(n);c.onsuccess=()=>{r(c.result||[])},c.onerror=()=>{s(c.error)}}):[]}async recordMatch(n,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");if(Object.keys(this.playerRatings).length===0){const g=await this.getAllPlayers();this.initializeTrueSkillRatings(g)}const s=r.map(async g=>{const m=await this.getPlayer(g.id);if(!m){const y=xt.rating(),x={id:g.id,name:g.id,totalGames:0,wins:0,losses:0,elo:H5,mu:y.mu,sigma:y.sigma,ordinal:xt.ordinal(y),lastPlayed:new Date,dateCreated:new Date,deviceId:this.getDeviceId(),level:g.level||1};return await this.savePlayer(x),this.playerRatings[g.id]=y,x}return this.playerRatings[g.id]||(m.mu!==void 0&&m.sigma!==void 0?this.playerRatings[g.id]={mu:m.mu,sigma:m.sigma}:this.playerRatings[g.id]=xt.rating()),g.level!==void 0&&(m.level===void 0||g.level>m.level)&&(m.level=g.level,await this.savePlayer(m)),m}),a=await Promise.all(s),i=[],o=[],c=[],A=[];for(let g=0;g<r.length;g++)r[g].team===ne.Titans?(i.push(r[g].id),o.push(this.playerRatings[r[g].id])):(c.push(r[g].id),A.push(this.playerRatings[r[g].id]));const u={id:Vh(),date:n.date,winningTeam:n.winningTeam,gameLength:n.gameLength,doubleLanes:n.doubleLanes,titanPlayers:i.length,atlanteanPlayers:c.length,deviceId:this.getDeviceId()};await this.saveMatch(u);let h;n.winningTeam===ne.Titans?h=[1,2]:h=[2,1];const d=xt.rate([o,A],{rank:h,beta:ka,tau:QA}),f=r.map(async(g,m)=>{const y=a[m],x=g.team===n.winningTeam;let p;if(g.team===ne.Titans){const w=i.indexOf(g.id);p=d[0][w]}else{const w=c.indexOf(g.id);p=d[1][w]}this.playerRatings[g.id]=p;const v={...y,totalGames:y.totalGames+1,wins:y.wins+(x?1:0),losses:y.losses+(x?0:1),mu:p.mu,sigma:p.sigma,ordinal:xt.ordinal(p),elo:Math.round((xt.ordinal(p)+25)*40+200),lastPlayed:new Date,level:g.level||y.level};await this.savePlayer(v);const b={id:Vh(),matchId:u.id,playerId:y.id,team:g.team,heroId:g.heroId,heroName:g.heroName,heroRoles:g.heroRoles,kills:g.kills,deaths:g.deaths,assists:g.assists,goldEarned:g.goldEarned,minionKills:g.minionKills,level:g.level,deviceId:this.getDeviceId()};await this.saveMatchPlayer(b)});return await Promise.all(f),ar.triggerAutoUpload(),u.id}async getPlayerStats(n){const r=await this.getPlayer(n);if(!r)return{player:null,favoriteHeroes:[],allHeroesPlayed:[],favoriteRoles:[],allRolesPlayed:[],matchesPlayed:[]};const s=await this.getPlayerMatches(n),a=new Map;s.forEach(h=>{const d=a.get(h.heroId);d?d.count+=1:a.set(h.heroId,{heroId:h.heroId,heroName:h.heroName,count:1})});const i=Array.from(a.values()).sort((h,d)=>d.count-h.count).slice(0,3),o=Array.from(a.values()).sort((h,d)=>d.count-h.count),c=new Map;s.forEach(h=>{h.heroRoles.forEach(d=>{const f=c.get(d);f?f.count+=1:c.set(d,{role:d,count:1})})});const A=Array.from(c.values()).sort((h,d)=>d.count-h.count).slice(0,3),u=Array.from(c.values()).sort((h,d)=>d.count-h.count);return{player:r,favoriteHeroes:i,allHeroesPlayed:o,favoriteRoles:A,allRolesPlayed:u,matchesPlayed:s}}async calculateWinProbability(n,r){if(Object.keys(this.playerRatings).length===0){const g=await this.getAllPlayers();this.initializeTrueSkillRatings(g)}const s=[],a=[];for(const g of n)this.playerRatings[g]?s.push(this.playerRatings[g]):s.push(xt.rating());for(const g of r)this.playerRatings[g]?a.push(this.playerRatings[g]):a.push(xt.rating());const i=s.reduce((g,m)=>g+m.mu,0),o=s.reduce((g,m)=>g+m.sigma**2,0)+s.length*ka**2,c=a.reduce((g,m)=>g+m.mu,0),A=a.reduce((g,m)=>g+m.sigma**2,0)+a.length*ka**2,u=Math.sqrt(o+A),h=i-c,f=new y5(0,u).cdf(h);return Math.round(f*100)}async calculateWinProbabilityWithCI(n,r){if(Object.keys(this.playerRatings).length===0){const k=await this.getAllPlayers();this.initializeTrueSkillRatings(k)}const s=[],a=[];for(const k of n)this.playerRatings[k]?s.push(this.playerRatings[k]):s.push(xt.rating());for(const k of r)this.playerRatings[k]?a.push(this.playerRatings[k]):a.push(xt.rating());const i=s.reduce((k,j)=>k+j.mu,0),o=s.reduce((k,j)=>k+j.sigma**2,0),c=o+s.length*ka**2,A=a.reduce((k,j)=>k+j.mu,0),u=a.reduce((k,j)=>k+j.sigma**2,0),h=u+a.length*ka**2,d=i-A,f=c+h,g=Math.sqrt(f),m=new y5(0,g),y=m.cdf(d),x=o+u,v=1.96*Math.sqrt(x),b=d-v,w=m.cdf(b),_=d+v,C=m.cdf(_);return{team1Probability:Math.round(y*100),team1Lower:Math.round(w*100),team1Upper:Math.round(C*100),team2Probability:Math.round((1-y)*100),team2Lower:Math.round((1-C)*100),team2Upper:Math.round((1-w)*100)}}async generateBalancedTeams(n){const r=await this.getAllPlayers(),s=r.filter(o=>n.includes(o.id));if(s.length<4)return{team1:[],team2:[]};Object.keys(this.playerRatings).length===0&&this.initializeTrueSkillRatings(r),s.sort((o,c)=>{const A=this.getDisplayRating(o);return this.getDisplayRating(c)-A});const a=[],i=[];return s.forEach(o=>{const c=a.reduce((u,h)=>u+this.getDisplayRating(h),0),A=i.reduce((u,h)=>u+this.getDisplayRating(h),0);c<=A?a.push(o):i.push(o)}),{team1:a.map(o=>o.id),team2:i.map(o=>o.id)}}async generateBalancedTeamsByExperience(n){return this.getAllPlayers().then(r=>{const s=r.filter(o=>n.includes(o.id));if(s.length<4)return{team1:[],team2:[]};s.sort((o,c)=>c.totalGames-o.totalGames);const a=[],i=[];return s.forEach(o=>{const c=a.reduce((u,h)=>u+h.totalGames,0),A=i.reduce((u,h)=>u+h.totalGames,0);c<=A?a.push(o):i.push(o)}),{team1:a.map(o=>o.id),team2:i.map(o=>o.id)}})}async exportData(){const n=await this.getAllPlayers(),r=await this.getAllMatches(),s=[];for(const a of r){const i=await this.getMatchPlayers(a.id);s.push(...i)}return{players:n,matches:r,matchPlayers:s,exportDate:new Date,version:L5}}async importData(n,r="replace"){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{if(r==="replace"){await this.clearAllData();for(const s of n.players)await this.savePlayer(s);for(const s of n.matches)await this.saveMatch(s);for(const s of n.matchPlayers)await this.saveMatchPlayer(s)}else await this.mergeData(n);return await this.recalculatePlayerStats(),!0}catch(s){return console.error("Error importing data:",s),!1}}async mergeData(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{const r=this.getDeviceId(),s=await this.getAllPlayers(),a=new Set(s.map(A=>A.id));for(const A of n.players)if(!a.has(A.id)){const u={id:A.id,name:A.name,totalGames:0,wins:0,losses:0,elo:H5,mu:void 0,sigma:void 0,ordinal:void 0,lastPlayed:new Date,dateCreated:new Date,deviceId:`imported_${r}`,level:A.level||1};await this.savePlayer(u),a.add(A.id)}const i=await this.getAllMatches(),o=new Set(i.map(A=>A.id)),c=new Map;for(const A of n.matchPlayers)c.has(A.matchId)||c.set(A.matchId,[]),c.get(A.matchId).push(A);for(const A of n.matches){if(o.has(A.id))continue;A.deviceId||(A.deviceId=`imported_${r}`),await this.saveMatch(A);const u=c.get(A.id)||[];for(const h of u)h.deviceId||(h.deviceId=`imported_${r}`),await this.saveMatchPlayer(h)}return await this.recalculatePlayerStats(),!0}catch(r){return console.error("Error merging data:",r),!1}}async clearAllData(){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");try{const n=this.db.transaction([tt.PLAYERS,tt.MATCHES,tt.MATCH_PLAYERS],"readwrite");return n.objectStore(tt.PLAYERS).clear(),n.objectStore(tt.MATCHES).clear(),n.objectStore(tt.MATCH_PLAYERS).clear(),this.playerRatings={},new Promise((r,s)=>{n.oncomplete=()=>r(!0),n.onerror=()=>s(n.error)})}catch(n){return console.error("Error clearing database:",n),!1}}async getCurrentTrueSkillRatings(){try{let n=await this.getAllMatches();n.sort((i,o)=>{const c=new Date(i.date).getTime(),A=new Date(o.date).getTime();return c-A});const r=await this.getAllPlayers(),s={};for(const i of r)s[i.id]=xt.rating();for(let i=0;i<n.length;i++){const o=n[i],c=await this.getMatchPlayers(o.id),A=[],u=[],h=[],d=[];for(const m of c)m.team===ne.Titans?(A.push(m.playerId),u.push(s[m.playerId])):(h.push(m.playerId),d.push(s[m.playerId]));if(u.length===0||d.length===0)continue;let f;o.winningTeam===ne.Titans?f=[1,2]:f=[2,1];const g=xt.rate([u,d],{rank:f,beta:ka,tau:QA});for(let m=0;m<A.length;m++)s[A[m]]=g[0][m];for(let m=0;m<h.length;m++)s[h[m]]=g[1][m]}const a={};for(const i in s){const o=s[i],c=xt.ordinal(o);a[i]=Math.round((c+25)*40+200)}return a}catch(n){return console.error("Error getting current TrueSkill ratings:",n),{}}}async getHistoricalRatings(){try{let n=await this.getAllMatches();n.sort((o,c)=>{const A=new Date(o.date).getTime(),u=new Date(c.date).getTime();return A-u});const r=await this.getAllPlayers(),s={};for(const o of r)s[o.id]=xt.rating();const a=[],i={};for(const o in s){const c=s[o],A=xt.ordinal(c),u=Math.round((A+25)*40+200);i[o]=u}a.push({date:n.length>0?n[0].date.toString():new Date().toISOString(),matchNumber:0,ratings:i,participants:[]});for(let o=0;o<n.length;o++){const c=n[o],A=await this.getMatchPlayers(c.id),u=[],h=[],d=[],f=[];for(const x of A)x.team===ne.Titans?(u.push(x.playerId),h.push(s[x.playerId])):(d.push(x.playerId),f.push(s[x.playerId]));if(h.length===0||f.length===0)continue;let g;c.winningTeam===ne.Titans?g=[1,2]:g=[2,1];const m=xt.rate([h,f],{rank:g,beta:ka,tau:QA});for(let x=0;x<u.length;x++)s[u[x]]=m[0][x];for(let x=0;x<d.length;x++)s[d[x]]=m[1][x];const y={};for(const x in s){const p=s[x],v=xt.ordinal(p),b=Math.round((v+25)*40+200);y[x]=b}a.push({date:c.date.toString(),matchNumber:o+1,ratings:y,participants:A.map(x=>x.playerId)})}return a}catch(n){return console.error("Error getting historical ratings:",n),[]}}async hasMatchData(){return(await this.getAllMatches()).length>0}async updateMatchPlayer(n,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");const a=this.db.transaction(["matchPlayers"],"readwrite").objectStore("matchPlayers"),i=await a.get(n);if(i){const o={...i,...r};await a.put(o)}}async getPlayersWithNoGames(){return this.db||await this.initialize(),this.db?(await this.getAllPlayers()).filter(r=>r.totalGames===0):[]}async deletePlayer(n){if(this.db||await this.initialize(),!this.db)return!1;try{const r=await this.getPlayer(n);if(!r)return console.warn(`Player with ID ${n} not found`),!1;if(r.totalGames!==0)return console.warn(`Cannot delete player ${n}: has ${r.totalGames} games recorded`),!1;const s=await this.getPlayerMatches(n);return s.length>0?(console.warn(`Cannot delete player ${n}: has ${s.length} match records`),!1):new Promise((a,i)=>{const A=this.db.transaction([tt.PLAYERS],"readwrite").objectStore(tt.PLAYERS).delete(n);A.onsuccess=()=>{console.log(`Successfully deleted player ${n}`),a(!0)},A.onerror=()=>{console.error(`Error deleting player ${n}:`,A.error),i(A.error)}})}catch(r){return console.error(`Error deleting player ${n}:`,r),!1}}async updateMatch(n,r){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return new Promise((s,a)=>{const o=this.db.transaction([tt.MATCHES],"readwrite").objectStore(tt.MATCHES),c=o.get(n);c.onsuccess=()=>{const A=c.result;if(!A){a(new Error(`Match with ID ${n} not found`));return}const u={...A,...r},h=o.put(u);h.onsuccess=()=>s(),h.onerror=()=>a(h.error)},c.onerror=()=>a(c.error)})}async updateMatchPlayers(n){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");return new Promise((r,s)=>{const i=this.db.transaction([tt.MATCH_PLAYERS],"readwrite").objectStore(tt.MATCH_PLAYERS);let o=n.length,c=!1;if(o===0){r();return}n.forEach(A=>{const u=i.get(A.id);u.onsuccess=()=>{if(c)return;const h=u.result;if(!h){c=!0,s(new Error(`Match player with ID ${A.id} not found`));return}const d={...h,...A.updates},f=i.put(d);f.onsuccess=()=>{o--,o===0&&r()},f.onerror=()=>{c=!0,s(f.error)}},u.onerror=()=>{c=!0,s(u.error)}})})}validateMatchEdit(n,r){const s=[],a=[],i=r.filter(f=>f.team===ne.Titans),o=r.filter(f=>f.team===ne.Atlanteans);i.length===0&&s.push({field:"teams",message:"Titans team cannot be empty",severity:"error"}),o.length===0&&s.push({field:"teams",message:"Atlanteans team cannot be empty",severity:"error"}),Math.abs(i.length-o.length)>1&&a.push({field:"teams",message:`Team sizes are unbalanced (Titans: ${i.length}, Atlanteans: ${o.length})`,severity:"warning"});const A=new Map;r.forEach(f=>{A.has(f.heroId)||A.set(f.heroId,[]),A.get(f.heroId).push(f.playerId)}),A.forEach((f,g)=>{f.length>1&&s.push({field:"hero",message:`Hero ID ${g} is assigned to multiple players: ${f.join(", ")}`,severity:"error"})}),r.forEach(f=>{if(f.kills&&f.kills>0){const y=n.gameLength===at.Quick?10:20;f.kills>y&&a.push({field:"kills",playerId:f.playerId,message:`${f.kills} kills seems high for ${n.gameLength} match`,severity:"warning"})}f.deaths&&f.deaths>15&&a.push({field:"deaths",playerId:f.playerId,message:`${f.deaths} deaths seems very high`,severity:"warning"}),["kills","deaths","assists","goldEarned","minionKills"].forEach(g=>{const m=f[g];m!==void 0&&m<0&&s.push({field:g,playerId:f.playerId,message:`${g} cannot be negative`,severity:"error"})}),f.level!==void 0&&(f.level<1||f.level>10)&&s.push({field:"level",playerId:f.playerId,message:"Level must be between 1 and 10",severity:"error"})});const u=new Date(n.date);u>new Date&&a.push({field:"date",message:"Match date is in the future",severity:"warning"});const d=new Date;return d.setFullYear(d.getFullYear()-1),u<d&&a.push({field:"date",message:"Match date is more than a year old",severity:"warning"}),{isValid:s.length===0,errors:s,warnings:a}}async editMatch(n,r,s){if(this.db||await this.initialize(),!this.db)throw new Error("Database not initialized");const a=await this.getMatch(n);if(!a)throw new Error(`Match with ID ${n} not found`);const i=await this.getMatchPlayers(n),o={...a,...r},c=i.map(u=>{const h=s.find(d=>d.id===u.id);return h?{...u,...h.updates}:u}),A=this.validateMatchEdit(o,c);if(!A.isValid)throw new Error(`Validation failed: ${A.errors.map(u=>u.message).join(", ")}`);try{await Promise.all([this.updateMatch(n,r),this.updateMatchPlayers(s)]),await this.recalculatePlayerStats(),console.log(`Successfully edited match ${n}`)}catch(u){throw console.error(`Error editing match ${n}:`,u),new Error(`Failed to edit match: ${u.message}`)}}async getEditableMatch(n){try{const r=await this.getMatch(n);if(!r)return null;const s=await this.getMatchPlayers(n),a=await Promise.all(s.map(async i=>{const o=await this.getPlayer(i.playerId);return{...i,playerName:(o==null?void 0:o.name)||"Unknown Player"}}));return{match:r,players:a}}catch(r){return console.error(`Error getting editable match ${n}:`,r),null}}async canEditMatch(n){try{if(!await this.getMatch(n))return{canEdit:!1,reason:"Match not found"};const s=await this.getMatchPlayers(n);if(s.length===0)return{canEdit:!1,reason:"Match has no player data"};for(const a of s)if(!await this.getPlayer(a.playerId))return{canEdit:!1,reason:`Player ${a.playerId} no longer exists`};return{canEdit:!0}}catch(r){return console.error(`Error checking if match ${n} can be edited:`,r),{canEdit:!1,reason:"Error checking match editability"}}}async getHeroRelationshipNetwork(n,r=1,s,a){try{const i=await this.getAllMatchPlayers();let o=await this.getAllMatches();if((s||a)&&(o=o.filter(f=>{const g=new Date(f.date);return!(s&&g<s||a&&g>a)})),o.length===0)return[];const c=new Set(o.map(f=>f.id)),A=i.filter(f=>c.has(f.matchId)),u=new Set(n),h=new Map;for(const f of o){const g=A.filter(m=>m.matchId===f.id);for(const m of g){if(m.heroId===void 0||m.heroId===null||!u.has(m.heroId))continue;const y=m.team===f.winningTeam;for(const x of g){if(x.heroId===void 0||x.heroId===null||m.heroId===x.heroId||!u.has(x.heroId))continue;const p=`${m.heroId}-${x.heroId}`;h.has(p)||h.set(p,{heroId:m.heroId,relatedHeroId:x.heroId,teammateWins:0,teammateLosses:0,opponentWins:0,opponentLosses:0});const v=h.get(p);m.team===x.team?y?v.teammateWins++:v.teammateLosses++:y?v.opponentWins++:v.opponentLosses++}}}return Array.from(h.values()).filter(f=>f.teammateWins+f.teammateLosses+f.opponentWins+f.opponentLosses>=r)}catch(i){return console.error("Error getting hero relationship network:",i),[]}}async getPlayerRelationshipNetwork(n,r=1,s,a){try{const i=await this.getAllMatchPlayers();let o=await this.getAllMatches();const c=await this.getAllPlayers(),A=new Map(c.map(m=>[m.id,m.name]));if((s||a)&&(o=o.filter(m=>{const y=new Date(m.date);return!(s&&y<s||a&&y>a)})),o.length===0)return[];const u=new Set(o.map(m=>m.id)),h=i.filter(m=>u.has(m.matchId)),d=new Set(n),f=new Map;for(const m of o){const y=h.filter(x=>x.matchId===m.id);for(const x of y){if(!x.playerId||!d.has(x.playerId))continue;const p=x.team===m.winningTeam;for(const v of y){if(!v.playerId||x.playerId===v.playerId||!d.has(v.playerId))continue;const b=`${x.playerId}-${v.playerId}`;f.has(b)||f.set(b,{playerId:x.playerId,relatedPlayerId:v.playerId,relatedPlayerName:A.get(v.playerId)||v.playerId,teammateWins:0,teammateLosses:0,opponentWins:0,opponentLosses:0});const w=f.get(b);x.team===v.team?p?w.teammateWins++:w.teammateLosses++:p?w.opponentWins++:w.opponentLosses++}}}return Array.from(f.values()).filter(m=>m.teammateWins+m.teammateLosses+m.opponentWins+m.opponentLosses>=r)}catch(i){return console.error("Error getting player relationship network:",i),[]}}}const ra=new Nhe,Pe=ra,Ehe=e=>ra.getDisplayRating(e),The=({strategyTime:e,moveTime:n,gameLength:r,onStrategyTimeChange:s,onMoveTimeChange:a,onGameLengthChange:i,players:o,onAddPlayer:c,onRemovePlayer:A,onDraftHeroes:u,selectedExpansions:h,onToggleExpansion:d,onPlayerNameChange:f,duplicateNames:g,canStartDrafting:m,heroCount:y,maxComplexity:x,onMaxComplexityChange:p,strategyTimerEnabled:v,moveTimerEnabled:b,onStrategyTimerEnabledChange:w,onMoveTimerEnabledChange:_,useDoubleLaneFor6Players:C,onUseDoubleLaneFor6PlayersChange:k,onViewMatches:j})=>{const{playSound:B}=it(),[E,P]=S.useState([]),[I,U]=S.useState({timers:!0,"game-length":!0,complexity:!0,players:!0,names:!0,expansions:!1}),N=Hc();S.useEffect(()=>{e!==90&&s(90),n!==30&&a(30),Pe.hasMatchData(),(async()=>{try{const Ne=(await Pe.getAllPlayers()).filter(Ce=>Ce.totalGames>0).map(Ce=>Ce.name).filter((Ce,et,Be)=>Be.indexOf(Ce)===et).sort();P(Ne)}catch(Ae){console.error("Error loading player names:",Ae)}})()},[]);const D=o.filter(me=>me.team===ne.Titans).length,T=o.filter(me=>me.team===ne.Atlanteans).length,L=D+T,M=o.filter(me=>me.name.trim()!=="").length===L&&L>0,F=g.length===0,O=L<=6,X=L<10,ae=D<5,$=T<5,J=D>=2&&T>=2,le=D>0&&T>0&&Math.abs(D-T)<=1&&J,re=L===6&&r===at.Long,V=le&&M&&F&&m,z=me=>{B("buttonClick"),U({...I,[me]:!I[me]})},Z=me=>{X&&(me===ne.Titans?ae:$)&&(B("buttonClick"),c(me))},Y=me=>{B("toggleSwitch"),me?w(!v):_(!b)},K=me=>{me===at.Quick&&!O||(B("buttonClick"),i(me))},ue=me=>{B("toggleSwitch"),d(me)},be=me=>{B("buttonClick"),p(me)},H=()=>{B("toggleSwitch"),k(!C)},ee=()=>{V&&(B("buttonClick"),u())},Se=()=>{B("buttonClick"),j()};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Game Setup"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>z("timers"),children:[l.jsx("span",{className:"mr-2",children:I.timers?"":""}),"Timer Settings"]}),I.timers&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("label",{className:"flex-grow",children:"Strategy Timer"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(qe,{text:v?"Disable timer (unlimited time)":"Enable timer (timed phase)",position:"top",children:l.jsx("div",{className:`w-12 h-6 rounded-full flex items-center p-1 cursor-pointer transition-colors ${v?"bg-green-600 justify-end":"bg-gray-600 justify-start"}`,onClick:()=>Y(!0),children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full"})})}),l.jsx("div",{className:"ml-2",children:v?l.jsx($s,{size:16}):l.jsx(M0,{size:16})})]})]}),l.jsx("div",{className:v?"":"opacity-50",children:l.jsx(gB,{value:e,onChange:s,tooltip:"This is the amount of time teams will have to publicly discuss what cards to play",minValue:30,maxValue:300,step:10,disabled:!v})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("label",{className:"flex-grow",children:"Action Timer"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx(qe,{text:b?"Disable timer (unlimited time)":"Enable timer (timed phase)",position:"top",children:l.jsx("div",{className:`w-12 h-6 rounded-full flex items-center p-1 cursor-pointer transition-colors ${b?"bg-green-600 justify-end":"bg-gray-600 justify-start"}`,onClick:()=>Y(!1),children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full"})})}),l.jsx("div",{className:"ml-2",children:b?l.jsx($s,{size:16}):l.jsx(M0,{size:16})})]})]}),l.jsx("div",{className:b?"":"opacity-50",children:l.jsx(gB,{value:n,onChange:a,tooltip:"This is the time each player will have to resolve their cards once revealed",minValue:10,maxValue:120,step:10,disabled:!b})})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>z("game-length"),children:[l.jsx("span",{className:"mr-2",children:I["game-length"]?"":""}),"Game Length"]}),I["game-length"]&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gameLength",value:at.Quick,checked:r===at.Quick,onChange:()=>K(at.Quick),disabled:!O,className:"form-radio h-5 w-5 text-blue-600"}),l.jsxs("span",{className:`ml-2 ${O?"":"text-gray-500"}`,children:["Quick",!O&&l.jsx("span",{className:"ml-2 text-red-400 text-sm",children:"(Max 6 players)"})]})]}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gameLength",value:at.Long,checked:r===at.Long,onChange:()=>K(at.Long),className:"form-radio h-5 w-5 text-blue-600"}),l.jsx("span",{className:"ml-2",children:"Long"})]})]}),re&&l.jsxs("div",{className:"mt-4 mb-4 bg-blue-900/30 p-3 rounded",children:[l.jsxs("label",{className:"flex items-center cursor-pointer mb-1",children:[l.jsx("input",{type:"checkbox",checked:C,onChange:H,className:"form-checkbox h-5 w-5 text-blue-600 mr-2"}),l.jsx("span",{className:"font-medium",children:"Use Double Lane Map"})]}),l.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Enable this option to use two lanes (top and bottom) for 6 player games"})]}),l.jsxs("div",{className:"mt-4 bg-gray-700 p-3 rounded-md text-sm",children:[l.jsx("h4",{className:"font-semibold mb-1",children:"Current Configuration:"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:[l.jsx("li",{children:r===at.Quick?"3 waves, single lane":L<=5||L===6&&!C?"5 waves, single lane":"7 waves per lane, two lanes"}),l.jsx("li",{children:r===at.Quick?L<=5?"4 lives per team":"5 lives per team":L===6&&!C?"8 lives per team":L<=8?"6 lives per team":"7 lives per team"}),(L>=7||L===6&&C&&r===at.Long)&&l.jsx("li",{className:"text-amber-300",children:"Using two separate lanes (top and bottom)"})]})]})]})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>z("complexity"),children:[l.jsx("span",{className:"mr-2",children:I.complexity?"":""}),"Max Complexity"]}),I.complexity&&l.jsx(l.Fragment,{children:l.jsx("div",{className:"flex flex-col gap-3 mb-4",children:[1,2,3,4].map(me=>l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"complexity",value:me,checked:x===me,onChange:()=>be(me),className:"form-radio h-5 w-5 text-blue-600"}),l.jsxs("span",{className:"ml-2",children:[me," ",me===1?"(Simplest)":me===4?"(Most Complex)":""]})]},me))})})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>z("players"),children:[l.jsx("span",{className:"mr-2",children:I.players?"":""}),"Players"]}),I.players&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between mb-2",children:[l.jsxs("span",{children:["Titans: ",D," players"]}),l.jsx("button",{className:`px-3 py-1 rounded text-sm ${X&&ae?"bg-blue-700 hover:bg-blue-600":"bg-gray-600 cursor-not-allowed"}`,onClick:()=>Z(ne.Titans),disabled:!X||!ae,children:"Add Player"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{children:["Atlanteans: ",T," players"]}),l.jsx("button",{className:`px-3 py-1 rounded text-sm ${X&&$?"bg-red-700 hover:bg-red-600":"bg-gray-600 cursor-not-allowed"}`,onClick:()=>Z(ne.Atlanteans),disabled:!X||!$,children:"Add Player"})]})]}),!X&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Maximum 10 players allowed"}),!ae&&D>=5&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Maximum 5 Titans players allowed"}),!$&&T>=5&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Maximum 5 Atlanteans players allowed"}),D!==T&&l.jsx("div",{className:`text-amber-400 text-sm mt-2 ${Math.abs(D-T)>1?"text-red-400":""}`,children:Math.abs(D-T)>1?"Teams must have equal player counts or differ by only 1 player":"Teams are uneven. The team with more players will need to use handicap cards."}),L>0&&!J&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"Each team must have at least 2 players"}),L>0&&!M&&l.jsx("div",{className:"text-amber-400 text-sm mt-2",children:"All players must enter their names"}),g.length>0&&l.jsxs("div",{className:"text-red-400 text-sm mt-2",children:["Duplicate names found: ",g.join(", ")]}),L>0&&!m&&l.jsxs("div",{className:"text-red-400 text-sm mt-2",children:["Not enough heroes (",y,") for ",L," players. Select more expansions or increase complexity."]}),D>0&&D===T&&M&&J&&g.length===0&&l.jsxs("div",{className:"text-emerald-400 text-sm mt-2",children:["Teams are balanced with ",D," players each"]}),D>0&&T>0&&D!==T&&Math.abs(D-T)===1&&M&&J&&g.length===0&&l.jsxs("div",{className:"text-emerald-400 text-sm mt-2",children:["Teams are valid: ",D," Titans vs ",T," Atlanteans"]})]})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>z("expansions"),children:[l.jsx("span",{className:"mr-2",children:I.expansions?"":""}),"Expansions"]}),I.expansions&&l.jsx(l.Fragment,{children:l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:N.map(me=>l.jsxs("label",{className:"flex items-center bg-gray-700 p-3 rounded-lg cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:h.includes(me),onChange:()=>ue(me),className:"mr-2 h-5 w-5"}),l.jsx("span",{children:me})]},me))})})]}),o.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"text-xl mb-3 cursor-pointer flex items-center",onClick:()=>z("names"),children:[l.jsx("span",{className:"mr-2",children:I.names?"":""}),"Player Names"]}),I.names&&l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(me=>{const Ae=me.name.trim()!==""&&g.includes(me.name.trim());return l.jsx(S3,{player:me,onNameChange:Ne=>f(me.id,Ne),onRemove:()=>{B("buttonClick"),A(me.id)},isDuplicate:Ae,suggestedNames:E},me.id)})})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[l.jsx("div",{className:"relative",children:l.jsx(qe,{text:"View match statistics and player records",position:"top",disableMobileTooltip:!0,children:l.jsx("button",{className:"px-6 py-3 rounded-lg font-medium text-white bg-green-600 hover:bg-green-500",onClick:Se,children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(A8,{size:20,className:"mr-2"}),"View Matches"]})})})}),l.jsx("div",{className:"relative",children:l.jsx(qe,{text:"Click to select heroes for each player and start the game.",position:"top",disableMobileTooltip:!0,children:l.jsx("button",{className:`px-6 py-3 rounded-lg font-medium text-white ${V?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 cursor-not-allowed"}`,onClick:ee,disabled:!V,children:"Draft Heroes"})})})]}),l.jsx("div",{className:"text-sm text-center w-full mt-4",children:l.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[l.jsxs("span",{className:"text-blue-300",children:["Available heroes: ",y]}),L>0&&l.jsx("span",{className:"text-yellow-300",children:m?" Enough heroes for drafting":" Not enough heroes for drafting"})]})}),l.jsx("p",{className:"mt-4 text-xs text-gray-300 text-center mb-2",children:"Disclaimer: This is not a professional product and it is always recommended you back up your data (View Matches>Export Data). This is not an official product and has not been approved by Wolff Designa. All game content is the sole property of Wolff Designa."})]})},Fhe={kills:!1,deaths:!1,assists:!1,goldEarned:!1,minionKills:!1,level:!1},kT=({players:e,onComplete:n,isVisible:r})=>{const{playSound:s}=it(),[a,i]=S.useState(!1),[o,c]=S.useState(Fhe),[A,u]=S.useState({}),[h,d]=S.useState(0),[f,g]=S.useState({minionBattle:!1,pushLane:!1,removeTokens:!1,retrieveCards:!1,levelUp:!1,pityCoins:!1});S.useEffect(()=>{if(r){const B={};e.forEach(E=>{var P;B[E.id]={goldCollected:0,kills:0,assists:0,deaths:0,minionKills:0,level:((P=E.stats)==null?void 0:P.level)||1}}),u(B),g({minionBattle:!1,pushLane:!1,removeTokens:!1,retrieveCards:!1,levelUp:!1,pityCoins:!1}),d(0),s("phaseChange")}},[e,r,s]);const m=(B,E,P)=>{s("buttonClick"),u(I=>{var D;const U=((D=I[B])==null?void 0:D[E])||0;if(E==="level"){const T=Math.max(1,Math.min(10,U+P));return{...I,[B]:{...I[B],[E]:T}}}const N=Math.max(0,U+P);return{...I,[B]:{...I[B],[E]:N}}})},y=B=>{s("buttonClick"),g(E=>({...E,[B]:!E[B]}))},x=(B,E)=>{s("toggleSwitch"),c(P=>({...P,[B]:E}))},p=()=>{s("phaseChange"),g({minionBattle:!0,pushLane:!0,removeTokens:!0,retrieveCards:!0,levelUp:!0,pityCoins:!0})},v=()=>{if(s("phaseChange"),a){const B={};Object.entries(A).forEach(([E,P])=>{const I=parseInt(E),U={goldCollected:o.goldEarned?P.goldCollected:void 0,kills:o.kills?P.kills:void 0,assists:o.assists?P.assists:void 0,deaths:o.deaths?P.deaths:void 0,minionKills:o.minionKills?P.minionKills:void 0,level:o.level?P.level:void 0};B[I]=U}),n(B)}else n()},b=B=>{s("buttonClick"),m(B,"kills",1);const E=e.find(P=>P.id===B);E&&e.forEach(P=>{P.id!==B&&P.team===E.team&&m(P.id,"assists",1)})},w=B=>{s("buttonClick"),d(B)},_=[{tab:0,enabled:o.kills,icon:l.jsx(or,{size:16}),label:"Kills"},{tab:1,enabled:o.deaths,icon:l.jsx(Ui,{size:16}),label:"Deaths"},{tab:2,enabled:o.minionKills,icon:l.jsx(Yl,{size:16}),label:"Minions"},{tab:3,enabled:o.goldEarned,icon:l.jsx(Ps,{size:16}),label:"Gold"},{tab:4,enabled:o.level,icon:l.jsx(jt,{size:16}),label:"Level"}].filter(B=>B.enabled);if(S.useEffect(()=>{a&&_.length>0&&!_.find(B=>B.tab===h)&&d(_[0].tab)},[o,h,_,a]),!r)return null;const C=Object.values(f).every(B=>B),k=e.filter(B=>B.team===ne.Titans),j=e.filter(B=>B.team===ne.Atlanteans);return l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"End of Round Assistant"}),l.jsx("button",{onClick:()=>n(),className:"p-1 bg-gray-700 hover:bg-gray-600 rounded-full","aria-label":"Close",children:l.jsx(Bn,{size:24})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h3",{className:"text-xl font-semibold",children:"End of Round Checklist"}),l.jsxs("button",{onClick:p,className:"px-4 py-1 bg-green-600 hover:bg-green-500 rounded-lg flex items-center text-sm",children:[l.jsx(B$,{size:16,className:"mr-2"}),"Check All Items"]})]}),l.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg space-y-3",children:[l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.minionBattle?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("minionBattle"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.minionBattle?"bg-green-600":"bg-gray-600"}`,children:f.minionBattle?l.jsx(Co,{size:16}):l.jsx("span",{children:"1"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Minion Battle"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Count minions in Battle Zone. Team with fewer minions removes the difference."})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.pushLane?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("pushLane"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.pushLane?"bg-green-600":"bg-gray-600"}`,children:f.pushLane?l.jsx(Co,{size:16}):l.jsx("span",{children:"2"})}),l.jsxs("div",{children:[l.jsxs("p",{className:"font-medium",children:["Push the Lane ",l.jsx("span",{className:"text-gray-400 font-normal",children:"(if applicable)"})]}),l.jsx("p",{className:"text-sm text-gray-300",children:"Flip Wave counter, move Battle Zone, respawn minions."})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.removeTokens?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("removeTokens"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.removeTokens?"bg-green-600":"bg-gray-600"}`,children:f.removeTokens?l.jsx(Co,{size:16}):l.jsx("span",{children:"3"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Remove Tokens, Return Markers"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Clear the board of all tokens and return markers."})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.retrieveCards?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("retrieveCards"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.retrieveCards?"bg-green-600":"bg-gray-600"}`,children:f.retrieveCards?l.jsx(Co,{size:16}):l.jsx("span",{children:"4"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Retrieve Cards"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Take back all resolved and discarded cards into hand."})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.levelUp?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("levelUp"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.levelUp?"bg-green-600":"bg-gray-600"}`,children:f.levelUp?l.jsx(Co,{size:16}):l.jsx("span",{children:"5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Level Up"}),l.jsx("p",{className:"text-sm text-gray-300",children:"If you have enough coins, purchase level up(s). This is mandatory!"})]})]}),l.jsxs("div",{className:`flex items-start p-3 rounded cursor-pointer ${f.pityCoins?"bg-blue-900/30":"hover:bg-gray-600/50"}`,onClick:()=>y("pityCoins"),children:[l.jsx("div",{className:`flex-shrink-0 rounded-full w-6 h-6 flex items-center justify-center mr-3 ${f.pityCoins?"bg-green-600":"bg-gray-600"}`,children:f.pityCoins?l.jsx(Co,{size:16}):l.jsx("span",{children:"6"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium",children:"Collect Pity Coin"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Players who did NOT level up collect 1 coin."})]})]})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("input",{type:"checkbox",id:"enableLogging",checked:a,onChange:B=>{s("toggleSwitch"),i(B.target.checked)},className:"mr-3 h-5 w-5"}),l.jsx("label",{htmlFor:"enableLogging",className:"text-xl font-medium",children:"Log Player Stats (Optional)"})]}),a&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-300 italic",children:"Enter stats for this round only. You only need to enter the stats you are interested in tracking."}),l.jsxs("div",{className:"mb-4 p-3 bg-gray-700/50 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Select Stats to Track"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[l.jsx(Ml,{icon:l.jsx(or,{size:16}),label:"Kills",enabled:o.kills,onChange:B=>x("kills",B)}),l.jsx(Ml,{icon:l.jsx(Ui,{size:16}),label:"Deaths",enabled:o.deaths,onChange:B=>x("deaths",B)}),l.jsx(Ml,{icon:l.jsx(ht,{size:16}),label:"Assists",enabled:o.assists,onChange:B=>x("assists",B)}),l.jsx(Ml,{icon:l.jsx(Ps,{size:16}),label:"Gold Earned",enabled:o.goldEarned,onChange:B=>x("goldEarned",B)}),l.jsx(Ml,{icon:l.jsx(Yl,{size:16}),label:"Minion Kills",enabled:o.minionKills,onChange:B=>x("minionKills",B)}),l.jsx(Ml,{icon:l.jsx(jt,{size:16}),label:"Level",enabled:o.level,onChange:B=>x("level",B)})]})]}),_.length>0?l.jsx("div",{className:"flex border-b border-gray-700 flex-wrap",children:_.map(B=>l.jsxs("button",{className:`px-4 py-2 flex items-center ${h===B.tab?"border-b-2 border-blue-500 text-blue-400":"text-gray-400 hover:text-white"}`,onClick:()=>w(B.tab),children:[B.icon," ",l.jsx("span",{className:"ml-2",children:B.label})]},B.tab))}):l.jsxs("div",{className:"text-center py-8 text-gray-400",children:[l.jsx("p",{className:"mb-2",children:"No stats selected for tracking"}),l.jsx("p",{className:"text-sm",children:"Enable stat categories above to begin tracking data"})]}),l.jsxs("div",{className:"mt-4",children:[h===0&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"When a player gets a kill, their teammates automatically receive an assist. Click on the player who got the kill."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(B=>{var E,P,I,U,N;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:D=>{const T=D.target;T.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium flex items-center",children:[B.name,l.jsx(tl,{size:14,className:"ml-1 text-yellow-500"}),((E=B.hero)==null?void 0:E.complexity)||1,((P=B.stats)==null?void 0:P.level)&&l.jsxs("span",{className:"ml-1 flex items-center",children:[l.jsx(jt,{size:14,className:"text-blue-300"})," ",B.stats.level]})]}),l.jsxs("div",{className:"text-xs flex space-x-2",children:[l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(or,{size:12,className:"mr-1"}),((I=A[B.id])==null?void 0:I.kills)||0]}),l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(ht,{size:12,className:"mr-1"}),((U=A[B.id])==null?void 0:U.assists)||0]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-blue-700 hover:bg-blue-600 px-3 py-1 rounded text-sm",onClick:()=>b(B.id),children:"Got Kill"}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"kills",-1),disabled:!((N=A[B.id])!=null&&N.kills),children:l.jsx(ea,{size:16})})]})]},B.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:j.map(B=>{var E,P,I,U,N;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:D=>{const T=D.target;T.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsxs("div",{className:"font-medium flex items-center",children:[B.name,l.jsx(tl,{size:14,className:"ml-1 text-yellow-500"}),((E=B.hero)==null?void 0:E.complexity)||1,((P=B.stats)==null?void 0:P.level)&&l.jsxs("span",{className:"ml-1 flex items-center",children:[l.jsx(jt,{size:14,className:"text-red-300"})," ",B.stats.level]})]}),l.jsxs("div",{className:"text-xs flex space-x-2",children:[l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(or,{size:12,className:"mr-1"}),((I=A[B.id])==null?void 0:I.kills)||0]}),l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(ht,{size:12,className:"mr-1"}),((U=A[B.id])==null?void 0:U.assists)||0]})]})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-red-700 hover:bg-red-600 px-3 py-1 rounded text-sm",onClick:()=>b(B.id),children:"Got Kill"}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"kills",-1),disabled:!((N=A[B.id])!=null&&N.kills),children:l.jsx(ea,{size:16})})]})]},B.id)})})]})]})]}),h===1&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"Record player deaths."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(B=>{var E,P,I;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:U=>{const N=U.target;N.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:B.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(Ui,{size:12,className:"mr-1"}),((E=A[B.id])==null?void 0:E.deaths)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"deaths",-1),disabled:!((P=A[B.id])!=null&&P.deaths),children:l.jsx(ea,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((I=A[B.id])==null?void 0:I.deaths)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"deaths",1),children:l.jsx(xi,{size:16})})]})]},B.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:j.map(B=>{var E,P,I;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:U=>{const N=U.target;N.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:B.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(Ui,{size:12,className:"mr-1"}),((E=A[B.id])==null?void 0:E.deaths)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"deaths",-1),disabled:!((P=A[B.id])!=null&&P.deaths),children:l.jsx(ea,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((I=A[B.id])==null?void 0:I.deaths)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"deaths",1),children:l.jsx(xi,{size:16})})]})]},B.id)})})]})]})]}),h===2&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"Record minion kills."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(B=>{var E,P,I;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:U=>{const N=U.target;N.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:B.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Minion Kills",children:[l.jsx(Yl,{size:12,className:"mr-1"}),((E=A[B.id])==null?void 0:E.minionKills)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"minionKills",-1),disabled:!((P=A[B.id])!=null&&P.minionKills),children:l.jsx(ea,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((I=A[B.id])==null?void 0:I.minionKills)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"minionKills",1),children:l.jsx(xi,{size:16})})]})]},B.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:j.map(B=>{var E,P,I;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:U=>{const N=U.target;N.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:B.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Minion Kills",children:[l.jsx(Yl,{size:12,className:"mr-1"}),((E=A[B.id])==null?void 0:E.minionKills)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"minionKills",-1),disabled:!((P=A[B.id])!=null&&P.minionKills),children:l.jsx(ea,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((I=A[B.id])==null?void 0:I.minionKills)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"minionKills",1),children:l.jsx(xi,{size:16})})]})]},B.id)})})]})]})]}),h===3&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"Record gold collected this round (before spending on level-ups and including pity coins)."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(B=>{var E,P,I;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:U=>{const N=U.target;N.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:B.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Gold Collected",children:[l.jsx(Ps,{size:12,className:"mr-1"}),((E=A[B.id])==null?void 0:E.goldCollected)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"goldCollected",-1),disabled:!((P=A[B.id])!=null&&P.goldCollected),children:l.jsx(ea,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((I=A[B.id])==null?void 0:I.goldCollected)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"goldCollected",1),children:l.jsx(xi,{size:16})})]})]},B.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:j.map(B=>{var E,P,I;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:U=>{const N=U.target;N.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:B.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Gold Collected",children:[l.jsx(Ps,{size:12,className:"mr-1"}),((E=A[B.id])==null?void 0:E.goldCollected)||0]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"goldCollected",-1),disabled:!((P=A[B.id])!=null&&P.goldCollected),children:l.jsx(ea,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((I=A[B.id])==null?void 0:I.goldCollected)||0}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"goldCollected",1),children:l.jsx(xi,{size:16})})]})]},B.id)})})]})]})]}),h===4&&l.jsxs("div",{children:[l.jsx("div",{className:"mb-4 text-sm text-gray-300",children:l.jsx("p",{children:"Record player level after purchasing any level ups with gold."})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans"]}),l.jsx("div",{className:"space-y-2",children:k.map(B=>{var E,P,I,U;return l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:N=>{const D=N.target;D.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:B.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Player Level",children:[l.jsx(jt,{size:14,className:"mr-1 text-blue-300"}),"Current Level: ",((E=B.stats)==null?void 0:E.level)||1]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"level",-1),disabled:((P=A[B.id])==null?void 0:P.level)===1,children:l.jsx(ea,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((I=A[B.id])==null?void 0:I.level)||1}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"level",1),disabled:((U=A[B.id])==null?void 0:U.level)===10,children:l.jsx(xi,{size:16})})]})]},B.id)})})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans"]}),l.jsx("div",{className:"space-y-2",children:j.map(B=>{var E,P,I,U;return l.jsxs("div",{className:"flex justify-between items-center bg-red-900/40 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full overflow-hidden mr-2",children:B.hero&&l.jsx("img",{src:B.hero.icon,alt:B.hero.name,className:"w-full h-full object-cover",onError:N=>{const D=N.target;D.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium flex items-center",children:B.name}),l.jsx("div",{className:"text-xs flex items-center",children:l.jsxs("span",{className:"flex items-center",title:"Player Level",children:[l.jsx(jt,{size:14,className:"mr-1 text-red-300"}),"Current Level: ",((E=B.stats)==null?void 0:E.level)||1]})})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"level",-1),disabled:((P=A[B.id])==null?void 0:P.level)===1,children:l.jsx(ea,{size:16})}),l.jsx("div",{className:"w-8 text-center font-bold",children:((I=A[B.id])==null?void 0:I.level)||1}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 p-1 rounded",onClick:()=>m(B.id,"level",1),disabled:((U=A[B.id])==null?void 0:U.level)===10,children:l.jsx(xi,{size:16})})]})]},B.id)})})]})]})]}),_.length>1&&l.jsxs("div",{className:"flex justify-between mt-4",children:[l.jsxs("button",{className:"flex items-center px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>{const B=_.findIndex(P=>P.tab===h),E=Math.max(0,B-1);w(_[E].tab)},disabled:_.findIndex(B=>B.tab===h)===0,children:[l.jsx(pn,{size:16,className:"mr-1"})," Previous"]}),l.jsxs("button",{className:"flex items-center px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded",onClick:()=>{const B=_.findIndex(P=>P.tab===h),E=Math.min(_.length-1,B+1);w(_[E].tab)},disabled:_.findIndex(B=>B.tab===h)===_.length-1,children:["Next ",l.jsx(ud,{size:16,className:"ml-1"})]})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-2",children:"Stats Being Tracked This Round"}),Object.values(o).some(Boolean)?l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:[o.kills&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-blue-300",children:[l.jsx(or,{size:16,className:"mr-2"})," Total Kills"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((B,E)=>B+(E.kills||0),0)})]}),o.deaths&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-red-300",children:[l.jsx(Ui,{size:16,className:"mr-2"})," Total Deaths"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((B,E)=>B+(E.deaths||0),0)})]}),o.assists&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-purple-300",children:[l.jsx(ht,{size:16,className:"mr-2"})," Total Assists"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((B,E)=>B+(E.assists||0),0)})]}),o.goldEarned&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-yellow-300",children:[l.jsx(Ps,{size:16,className:"mr-2"})," Gold Collected"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((B,E)=>B+(E.goldCollected||0),0)})]}),o.minionKills&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-green-300",children:[l.jsx(Yl,{size:16,className:"mr-2"})," Minion Kills"]}),l.jsx("div",{className:"text-xl",children:Object.values(A).reduce((B,E)=>B+(E.minionKills||0),0)})]}),o.level&&l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-indigo-300",children:[l.jsx(jt,{size:16,className:"mr-2"})," Levels"]}),l.jsx("div",{className:"text-sm",children:e.map(B=>{var E;return`${B.name}: ${((E=A[B.id])==null?void 0:E.level)||1}`}).join(", ")})]})]}):l.jsxs("div",{className:"text-center py-4 text-gray-400",children:[l.jsx("p",{children:"No statistics will be tracked this round."}),l.jsx("p",{className:"text-sm",children:"Enable stat categories above to begin tracking."})]})]})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{className:`text-${C?"green":"yellow"}-400 font-medium`,children:C?"All steps completed!":"Please complete all steps"}),l.jsx("button",{onClick:v,className:`px-6 py-3 rounded-lg text-white font-medium ${C?"bg-green-600 hover:bg-green-500":"bg-blue-600 hover:bg-blue-500"}`,children:a?"Save Stats & Continue":"Continue"})]})]})})},Ml=({icon:e,label:n,enabled:r,onChange:s})=>l.jsxs("div",{className:`flex items-center p-2 rounded cursor-pointer transition-colors ${r?"bg-blue-900/30 border border-blue-500/50":"bg-gray-600 border border-gray-500"}`,onClick:()=>s(!r),children:[l.jsx("div",{className:`mr-2 ${r?"text-blue-400":"text-gray-400"}`,children:e}),l.jsx("span",{className:`text-sm flex-grow ${r?"text-blue-200":"text-gray-400"}`,children:n}),l.jsx("div",{className:"ml-auto",children:l.jsx("div",{className:`w-4 h-4 rounded-full ${r?"bg-blue-500":"bg-gray-500"}`})})]}),Uhe=({gameState:e,players:n,strategyTimeRemaining:r,moveTimeRemaining:s,strategyTimerActive:a,moveTimerActive:i,onStartStrategyTimer:o,onPauseStrategyTimer:c,onResetStrategyTimer:A,onEndStrategyPhase:u,onStartMoveTimer:h,onPauseMoveTimer:d,onResetMoveTimer:f,onSelectPlayer:g,onCompletePlayerTurn:m,onStartNextTurn:y,onAdjustTeamLife:x,onIncrementWave:p,onDecrementWave:v,onAdjustRound:b,onAdjustTurn:w,onDeclareVictory:_,onFlipCoin:C,strategyTimerEnabled:k,moveTimerEnabled:j,onSavePlayerStats:B})=>{var K,ue,be,H,ee,Se,me;const{playSound:E}=it(),[P,I]=S.useState(!1),U=Ae=>{const Ne=Math.floor(Ae/60),Ce=Ae%60;return`${Ne}:${Ce.toString().padStart(2,"0")}`},N=e.activeHeroIndex>=0?n[e.activeHeroIndex]:null;S.useEffect(()=>{a&&k&&(r===10&&E("timerWarning"),r>0&&E("timerTick"))},[r,a,k,E]),S.useEffect(()=>{i&&j&&(s===10&&E("timerWarning"),s>0&&E("timerTick"))},[s,i,j,E]);const D=()=>n.some(Ae=>Ae.stats&&((Ae.stats.totalKills??0)>0||(Ae.stats.totalAssists??0)>0||(Ae.stats.totalDeaths??0)>0||(Ae.stats.totalMinionKills??0)>0||(Ae.stats.totalGoldEarned??0)>0||Ae.stats.level!==void 0)),T=Ae=>n.some(Ne=>Ne.stats&&(Ae==="level"?Ne.stats[Ae]!==void 0:(Ne.stats[Ae]??0)>0)),L=()=>{E("buttonClick")},Q=()=>{E("buttonClick"),o()},M=()=>{E("buttonClick"),c()},F=()=>{E("phaseChange"),u()},O=()=>{E("buttonClick"),h()},X=()=>{E("buttonClick"),d()},ae=()=>{E("buttonClick"),A()},$=()=>{E("buttonClick"),f()},J=()=>{E("turnComplete"),m()},le=()=>{e.turn===4?I(!0):(E("turnStart"),y())},re=Ae=>{Ae&&B&&B(Ae),I(!1),E("turnStart"),y()},V=Ae=>{E("victory"),_(Ae)},z=()=>{E("coinFlip"),C()},Z=(Ae,Ne)=>{E("lifeChange"),x(Ae,Ne)};return l.jsxs("div",{className:"game-timer",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-blue-900/50 rounded-lg p-4 text-center",children:[l.jsx("h3",{className:"text-xl font-bold mb-2",children:"Titans Lives"}),l.jsxs("div",{className:"flex justify-center items-center gap-4",children:[l.jsx("button",{className:"bg-blue-700 hover:bg-blue-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>Z(ne.Titans,-1),children:"-"}),l.jsx("span",{className:"text-4xl font-bold",children:e.teamLives[ne.Titans]}),l.jsx("button",{className:"bg-blue-700 hover:bg-blue-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>Z(ne.Titans,1),children:"+"})]}),l.jsxs("button",{className:"mt-4 w-full bg-blue-700 hover:bg-blue-600 rounded-lg py-2 px-4 flex items-center justify-center",onClick:()=>V(ne.Titans),children:[l.jsx(Ad,{size:18,className:"mr-2"}),l.jsx("span",{children:"Declare Titan Victory"})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 text-center",children:[l.jsxs("div",{className:"flex justify-between mb-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"Round"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center mr-2",onClick:()=>{L(),b(-1)},children:l.jsx(Fi,{size:14})}),l.jsx("div",{className:"text-2xl font-bold",children:e.round}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center ml-2",onClick:()=>{L(),b(1)},children:l.jsx(Ka,{size:14})})]})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"Turn"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center mr-2",onClick:()=>{L(),w(-1)},children:l.jsx(Fi,{size:14})}),l.jsxs("div",{className:"text-2xl font-bold",children:[e.turn,"/4"]}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center ml-2",onClick:()=>{L(),w(1)},children:l.jsx(Ka,{size:14})})]})]}),!e.hasMultipleLanes&&l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"text-sm text-gray-400 mb-1",children:"Wave"}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center mr-2",onClick:()=>{L(),v(We.Single)},disabled:!e.waves[We.Single]||e.waves[We.Single].currentWave<=1,children:l.jsx(Fi,{size:14})}),l.jsxs("div",{className:"text-2xl font-bold",children:[((K=e.waves[We.Single])==null?void 0:K.currentWave)||1,"/",((ue=e.waves[We.Single])==null?void 0:ue.totalWaves)||3]}),l.jsx("button",{className:"bg-gray-700 hover:bg-gray-600 rounded-full w-7 h-7 flex items-center justify-center ml-2",onClick:()=>{L(),p(We.Single)},disabled:!e.waves[We.Single]||e.waves[We.Single].currentWave>=e.waves[We.Single].totalWaves,children:l.jsx(Ka,{size:14})})]})]})]}),l.jsx("div",{className:"mt-2 mb-4",children:l.jsxs("span",{className:"px-3 py-1 rounded-full bg-gray-700 text-sm",children:[e.currentPhase==="strategy"&&"Strategy Phase",e.currentPhase==="move"&&"Action Phase",e.currentPhase==="turn-end"&&"Turn Complete"]})}),e.hasMultipleLanes&&l.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[l.jsx("h4",{className:"text-lg font-bold mb-2",children:"Wave Counters"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative bg-gray-700/50 p-2 rounded",children:[l.jsx("span",{className:"text-sm text-gray-300",children:"Top Lane"}),l.jsxs("div",{className:"flex items-center justify-center mt-1",children:[l.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center mr-2",onClick:()=>{L(),v(We.Top)},disabled:!e.waves[We.Top]||e.waves[We.Top].currentWave<=1,children:l.jsx(Fi,{size:12})}),l.jsxs("div",{className:"text-xl font-bold",children:[((be=e.waves[We.Top])==null?void 0:be.currentWave)||1,"/",((H=e.waves[We.Top])==null?void 0:H.totalWaves)||7]}),l.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center ml-2",onClick:()=>{L(),p(We.Top)},disabled:!e.waves[We.Top]||e.waves[We.Top].currentWave>=e.waves[We.Top].totalWaves,children:l.jsx(Ka,{size:12})})]})]}),l.jsxs("div",{className:"relative bg-gray-700/50 p-2 rounded",children:[l.jsx("span",{className:"text-sm text-gray-300",children:"Bottom Lane"}),l.jsxs("div",{className:"flex items-center justify-center mt-1",children:[l.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center mr-2",onClick:()=>{L(),v(We.Bottom)},disabled:!e.waves[We.Bottom]||e.waves[We.Bottom].currentWave<=1,children:l.jsx(Fi,{size:12})}),l.jsxs("div",{className:"text-xl font-bold",children:[((ee=e.waves[We.Bottom])==null?void 0:ee.currentWave)||1,"/",((Se=e.waves[We.Bottom])==null?void 0:Se.totalWaves)||7]}),l.jsx("button",{className:"bg-gray-600 hover:bg-gray-500 rounded-full w-6 h-6 flex items-center justify-center ml-2",onClick:()=>{L(),p(We.Bottom)},disabled:!e.waves[We.Bottom]||e.waves[We.Bottom].currentWave>=e.waves[We.Bottom].totalWaves,children:l.jsx(Ka,{size:12})})]})]})]})]}),l.jsx("div",{className:"mt-3",children:l.jsx(qe,{text:"Click to flip the tie-breaker coin",children:l.jsxs("button",{className:`flex items-center justify-center px-4 py-2 rounded-lg text-white ${e.coinSide===ne.Titans?"bg-blue-700 hover:bg-blue-600":"bg-orange-600 hover:bg-orange-500"}`,onClick:z,children:[l.jsx("span",{className:"mr-2",children:"Tiebreaker:"}),l.jsx("span",{className:"font-bold",children:e.coinSide===ne.Titans?"Titans":"Atlanteans"})]})})})]}),l.jsxs("div",{className:"bg-red-900/50 rounded-lg p-4 text-center",children:[l.jsx("h3",{className:"text-xl font-bold mb-2",children:"Atlanteans Lives"}),l.jsxs("div",{className:"flex justify-center items-center gap-4",children:[l.jsx("button",{className:"bg-red-700 hover:bg-red-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>Z(ne.Atlanteans,-1),children:"-"}),l.jsx("span",{className:"text-4xl font-bold",children:e.teamLives[ne.Atlanteans]}),l.jsx("button",{className:"bg-red-700 hover:bg-red-600 rounded-full w-10 h-10 flex items-center justify-center text-2xl font-bold",onClick:()=>Z(ne.Atlanteans,1),children:"+"})]}),l.jsxs("button",{className:"mt-4 w-full bg-red-700 hover:bg-red-600 rounded-lg py-2 px-4 flex items-center justify-center",onClick:()=>V(ne.Atlanteans),children:[l.jsx(Ad,{size:18,className:"mr-2"}),l.jsx("span",{children:"Declare Atlantean Victory"})]})]})]}),l.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:e.currentPhase==="strategy"?l.jsxs("div",{className:"text-center",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Strategy Phase - Turn ",e.turn]}),l.jsx("div",{className:`text-6xl font-bold mb-6 flex justify-center items-center ${k&&r<=10?"text-red-500 animate-pulse":""}`,children:k?U(r):l.jsx(M0,{size:64,className:"text-gray-300"})}),l.jsxs("div",{className:"flex justify-center gap-4",children:[k&&(a?l.jsx("button",{className:"bg-amber-600 hover:bg-amber-500 px-6 py-3 rounded-lg text-white font-medium",onClick:M,children:"Pause"}):l.jsx("button",{className:"bg-green-600 hover:bg-green-500 px-6 py-3 rounded-lg text-white font-medium",onClick:Q,children:"Resume"})),k&&l.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-6 py-3 rounded-lg text-white font-medium flex items-center",onClick:ae,children:[l.jsx(Uu,{size:18,className:"mr-2"}),"Reset Timer"]}),l.jsx("button",{className:"bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-lg text-white font-medium",onClick:F,children:"End Strategy Phase"})]})]}):e.currentPhase==="move"?l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Action Phase"}),N&&N.hero?l.jsx(l.Fragment,{children:l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:`inline-block py-2 px-4 rounded-lg text-white font-medium ${N.team===ne.Titans?"bg-blue-700":"bg-red-700"}`,children:N.team===ne.Titans?"Titans":"Atlanteans"}),l.jsxs("div",{className:"flex items-center justify-center mt-2",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-300 rounded-full overflow-hidden mr-3",children:l.jsx("img",{src:N.hero.icon,alt:N.hero.name,className:"w-full h-full object-cover",onError:Ae=>{const Ne=Ae.target;Ne.src="https://via.placeholder.com/64?text=Hero"}})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center text-2xl font-bold",children:[N.hero.name,((me=N.stats)==null?void 0:me.level)&&l.jsxs("span",{className:"ml-2 flex items-center",title:"Player Level",children:[l.jsx(jt,{size:18,className:`${N.team===ne.Titans?"text-blue-300":"text-red-300"} mr-1`}),N.stats.level]})]}),l.jsx("div",{className:"text-lg text-gray-300",children:N.name})]})]}),l.jsx("div",{className:`text-6xl font-bold my-6 flex justify-center items-center ${j&&s<=10?"text-red-500 animate-pulse":""}`,children:j?U(s):l.jsx(M0,{size:64,className:"text-gray-300"})}),l.jsxs("div",{className:"flex justify-center gap-4",children:[j&&(i?l.jsx("button",{className:"bg-amber-600 hover:bg-amber-500 px-6 py-3 rounded-lg text-white font-medium",onClick:X,children:"Pause"}):l.jsx("button",{className:"bg-green-600 hover:bg-green-500 px-6 py-3 rounded-lg text-white font-medium",onClick:O,children:"Resume"})),j&&l.jsxs("button",{className:"bg-gray-600 hover:bg-gray-500 px-6 py-3 rounded-lg text-white font-medium flex items-center",onClick:$,children:[l.jsx(Uu,{size:18,className:"mr-2"}),"Reset Timer"]}),l.jsxs("button",{className:"bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-lg text-white font-medium flex items-center",onClick:J,children:[l.jsx(Xn,{size:18,className:"mr-2"}),"Complete Turn"]})]})]})}):l.jsx("div",{className:"py-6 text-xl text-amber-300",children:"Select a player to start their action timer"})]}):l.jsxs("div",{className:"text-center",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Turn ",e.turn," Complete"]}),l.jsx("p",{className:"text-lg mb-6",children:"All players have completed their actions"}),l.jsxs("button",{className:"bg-green-600 hover:bg-green-500 px-8 py-4 rounded-lg text-white font-medium text-xl flex items-center mx-auto",onClick:le,children:[l.jsx(Uu,{size:20,className:"mr-2"}),e.turn===4?"End Round":"Start Next Turn"]})]})}),e.currentPhase!=="turn-end"&&l.jsxs("div",{className:"mt-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-3",children:e.currentPhase==="strategy"?"Players (waiting for strategy phase to end)":"Select Player"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map((Ae,Ne)=>Ae.hero&&Y(Ae,Ne))})]}),l.jsx(kT,{players:n,onComplete:re,isVisible:P})]});function Y(Ae,Ne){var rt,te,W,se,xe,ve,Ke;const Ce=e.activeHeroIndex===Ne,et=e.completedTurns.includes(Ne),Be=e.currentPhase==="move"&&!et&&!Ce,Ee=Ae.stats&&((Ae.stats.totalKills??0)>0||(Ae.stats.totalAssists??0)>0||(Ae.stats.totalDeaths??0)>0||(Ae.stats.totalMinionKills??0)>0||(Ae.stats.totalGoldEarned??0)>0||Ae.stats.level!==void 0);return l.jsx("div",{className:`p-5 rounded-lg transition-all relative shadow-md ${Ce?Ae.team===ne.Titans?"bg-blue-700 ring-4 ring-white":"bg-red-700 ring-4 ring-white":et?"bg-gray-700/90 opacity-60":Ae.team===ne.Titans?"bg-blue-900/70 hover:bg-blue-800":"bg-red-900/70 hover:bg-red-800"} ${Be?"cursor-pointer transform hover:scale-[1.02] hover:shadow-lg":""}`,onClick:()=>{Be&&(E("heroSelect"),g(Ne))},children:l.jsxs("div",{className:"flex items-start",children:[Ae.hero&&l.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full overflow-hidden mr-4 flex-shrink-0 border-2 border-gray-600",children:l.jsx("img",{src:Ae.hero.icon,alt:Ae.hero.name,className:"w-full h-full object-cover",onError:Xe=>{const dt=Xe.target;dt.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"text-xl font-bold mb-1 flex items-center",children:[((rt=Ae.hero)==null?void 0:rt.name)||"Unknown Hero",((te=Ae.stats)==null?void 0:te.level)&&l.jsxs("span",{className:"ml-2 flex items-center",title:`Level ${Ae.stats.level}`,children:[l.jsx(jt,{size:16,className:`${Ae.team===ne.Titans?"text-blue-300":"text-red-300"} mr-1`}),Ae.stats.level]})]}),et&&l.jsx("div",{className:"bg-green-600 rounded-full p-1.5 ml-2",title:"Completed",children:l.jsx(Xn,{size:20})}),Ce&&l.jsx("div",{className:"bg-yellow-500 rounded-full p-1.5 ml-2 animate-pulse",title:"Active",children:l.jsx($s,{size:20})})]}),l.jsx("div",{className:"text-lg font-medium text-gray-100 mb-2",children:Ae.name||`Player ${Ae.id}`}),Ae.lane&&l.jsx("div",{className:"text-base text-gray-300 mb-2",children:Ae.lane===We.Top?"Top Lane":"Bottom Lane"}),Ee&&D()&&l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-2 text-base bg-black/20 p-2 rounded",children:[T("totalKills")&&l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(or,{size:18,className:"mr-2 text-blue-400"}),l.jsx("span",{className:"font-bold",children:((W=Ae.stats)==null?void 0:W.totalKills)||0})]}),T("totalDeaths")&&l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(Ui,{size:18,className:"mr-2 text-red-400"}),l.jsx("span",{className:"font-bold",children:((se=Ae.stats)==null?void 0:se.totalDeaths)||0})]}),T("totalAssists")&&l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(ht,{size:18,className:"mr-2 text-green-400"}),l.jsx("span",{className:"font-bold",children:((xe=Ae.stats)==null?void 0:xe.totalAssists)||0})]}),T("totalMinionKills")&&l.jsxs("span",{className:"flex items-center",title:"Minion Kills",children:[l.jsx(Yl,{size:18,className:"mr-2 text-yellow-400"}),l.jsx("span",{className:"font-bold",children:((ve=Ae.stats)==null?void 0:ve.totalMinionKills)||0})]}),T("totalGoldEarned")&&l.jsxs("span",{className:"flex items-center col-span-2 mt-1 justify-center bg-amber-900/30 py-1 px-2 rounded",title:"Total Gold Earned",children:[l.jsx(Ps,{size:18,className:"mr-2 text-amber-400"}),l.jsx("span",{className:"font-bold",children:((Ke=Ae.stats)==null?void 0:Ke.totalGoldEarned)||0})]})]})]})]})},Ae.id)}},jT=()=>{const[e,n]=S.useState(!1),r=[{role:"Damager",description:"Damagers are heroes adept at forcing their opponents to discard cards. This weakens enemy heroes, making it easier for your allies to take them down."},{role:"Disabler",description:"Disablers possess the power to weaken enemy heroes by preventing or limiting their ability to perform certain actions."},{role:"Durable",description:"Durable heroes are best equipped to withstand the heat of battle and survive, usually achieve this through a combination of a high defense stat and self-healing abilities."},{role:"Farming",description:"Heroes with farming abilities can generate extra coins for themselves or their allies, enabling faster leveling and setting up stronger late game."},{role:"Healer",description:"Healers help their allies by letting them retrieve discarded cards, greatly increasing their chances of surviving the fight."},{role:"Melee",description:"These heroes are focused on attacking in close quarters. A team composed entirely of melee fighters is formidable in a brawl, but may struggle against fast ranged heroes and heroes capable of placing tokens."},{role:"Pusher",description:"These heroes are able to deal with more than two enemy minions each round, or protect and respawn their own minions, giving them an edge at pushing the lane."},{role:"Sniper",description:"Most heroes have access to some form of ranged attacks, while Snipers are capable of attacking enemy heroes and minions at a much longer range."},{role:"Tactician",description:"Tacticians specialize in controlling the battlefield by moving, pushing, or repositioning units. Their versatile abilities allow them to support allies and hinder enemies."},{role:"Tokens",description:"These heroes are capable of placing tokens  temporary obstacles with special qualities. Each such hero uses their own type of tokens and the icon will correspond to the ones used by this particular hero."}];return l.jsxs("div",{className:"bg-gray-700 rounded-lg mb-4 overflow-hidden",children:[l.jsxs("button",{className:"w-full px-4 py-3 flex items-center justify-between bg-gray-800 hover:bg-gray-700 transition-colors text-left",onClick:()=>n(!e),"aria-expanded":e,children:[l.jsxs("span",{className:"font-semibold flex items-center",children:[l.jsx("span",{className:"mr-2 text-yellow-400",children:""}),"Hero Role Explanations"]}),e?l.jsx(Nr,{size:18}):l.jsx(Zn,{size:18})]}),e&&l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(s=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded",children:[l.jsx("h4",{className:"text-yellow-400 font-semibold mb-1",children:s.role}),l.jsx("p",{className:"text-sm text-gray-300",children:s.description})]},s.role))})})]})},NT=({hero:e,onClose:n,isVisible:r,cardPosition:s})=>{const{isMobile:a}=wb(),i=S.useRef(null),o=S.useRef(null),[c,A]=S.useState({left:8,bottom:8,right:"auto",top:"auto"});if(S.useEffect(()=>{if(!a&&r&&o.current&&s){const d=o.current.getBoundingClientRect(),f=window.innerWidth,g=window.innerHeight;let m={left:8,bottom:8,right:"auto",top:"auto"};s.x<f/2?m={left:Math.min(s.x+s.width+20,f-d.width-8),top:Math.min(s.y,g-d.height-8),right:"auto",bottom:"auto"}:m={right:Math.min(f-s.x+20,f-8),top:Math.min(s.y,g-d.height-8),left:"auto",bottom:"auto"},s.y+d.height>g-20&&(m.top=Math.max(8,g-d.height-20)),A(m)}},[a,r,s]),!e||!r)return null;const u=d=>{i.current&&!i.current.contains(d.target)&&n()},h=(d,f=0,g=0)=>l.jsxs("div",{className:"mb-2",children:[l.jsx("div",{className:"text-sm font-medium mb-1",children:d}),l.jsx("div",{className:"flex",children:Array.from({length:8}).map((m,y)=>l.jsx("div",{className:`h-5 w-5 transform skew-x-12 mr-0.5 flex-shrink-0 ${y<f?"bg-blue-600":y<g?"bg-blue-200":"bg-gray-700"}`},y))})]});return a?l.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:u,children:l.jsxs("div",{ref:i,className:"bg-gray-900 rounded-lg w-full max-w-md p-4 relative",onClick:d=>d.stopPropagation(),children:[l.jsx("button",{className:"absolute top-2 right-2 p-1 bg-gray-800 rounded-full",onClick:n,"aria-label":"Close hero information",children:l.jsx(Bn,{size:18})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full overflow-hidden mb-3",children:l.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-cover",onError:d=>{d.target.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("h3",{className:"text-xl font-bold mb-1",children:e.name}),l.jsx("div",{className:"text-sm text-gray-300 mb-1",children:e.roles.join("  ")}),e.additionalRoles&&e.additionalRoles.length>0&&l.jsx("div",{className:"text-xs text-gray-400 mb-2",children:e.additionalRoles.join("  ")}),l.jsxs("div",{className:"flex mb-3",children:[[...Array(e.complexity)].map((d,f)=>l.jsx("span",{className:"text-yellow-400 text-lg",children:""},f)),[...Array(4-e.complexity)].map((d,f)=>l.jsx("span",{className:"text-gray-600 text-lg",children:""},f+e.complexity))]}),l.jsxs("div",{className:"w-full mb-4 grid grid-cols-2 gap-3",children:[h("Attack",e.attack,e.attack_upgraded),h("Initiative",e.initiative,e.initiative_upgraded),h("Defence",e.defence,e.defence_upgraded),h("Movement",e.movement,e.movement_upgraded)]}),l.jsx("p",{className:"text-sm leading-relaxed",children:e.description||"This hero's abilities and playstyle are shrouded in mystery."})]})]})}):l.jsx("div",{ref:o,className:"fixed bg-gray-900/95 p-6 rounded-lg shadow-lg max-w-2xl z-50",style:{left:c.left!=="auto"?`${c.left}px`:"auto",right:c.right!=="auto"?`${c.right}px`:"auto",top:c.top!=="auto"?`${c.top}px`:"auto",bottom:c.bottom!=="auto"?`${c.bottom}px`:"auto"},children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"w-28 h-28 bg-gray-300 rounded-full overflow-hidden mr-6 flex-shrink-0",children:l.jsx("img",{src:e.icon,alt:e.name,className:"w-full h-full object-cover",onError:d=>{d.target.src="https://via.placeholder.com/192?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold mb-2",children:e.name}),l.jsx("div",{className:"text-lg text-gray-300 mb-1",children:e.roles.join("  ")}),e.additionalRoles&&e.additionalRoles.length>0&&l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:e.additionalRoles.join("  ")}),l.jsxs("div",{className:"flex mb-3",children:[[...Array(e.complexity)].map((d,f)=>l.jsx("span",{className:"text-yellow-400 text-xl",children:""},f)),[...Array(4-e.complexity)].map((d,f)=>l.jsx("span",{className:"text-gray-600 text-xl",children:""},f+e.complexity))]}),l.jsxs("div",{className:"w-full mb-4 grid grid-cols-2 gap-4",children:[h("Attack",e.attack,e.attack_upgraded),h("Initiative",e.initiative,e.initiative_upgraded),h("Defence",e.defence,e.defence_upgraded),h("Movement",e.movement,e.movement_upgraded)]}),l.jsx("p",{className:"text-base leading-relaxed",children:e.description||"This hero's abilities and playstyle are shrouded in mystery."})]})]})})},Ihe=({players:e,draftingState:n,onHeroSelect:r,onHeroBan:s,onFinishDrafting:a,onCancelDrafting:i,onUndoLastAction:o,onResetDraft:c,onBackToDraftSelection:A,canUndo:u})=>{const{isMobile:h}=wb(),{playSound:d}=it(),[f,g]=S.useState(null),[m,y]=S.useState(!1),[x,p]=S.useState(void 0),v=S.useRef(null),b=S.useRef(null),w=e.filter(re=>re.team===n.currentTeam&&!n.selectedHeroes.some(V=>V.playerId===re.id)),_=e.every(re=>n.selectedHeroes.some(V=>V.playerId===re.id)),C=re=>re===ne.Titans?"Titans":"Atlanteans",k=()=>{if(n.mode!==we.PickAndBan)return"Invalid Mode";if(n.currentStep>=n.pickBanSequence.length)return e.every(Y=>n.selectedHeroes.some(K=>K.playerId===Y.id))?"Draft Complete":"Drafting Paused/Error";const re=n.pickBanSequence[n.currentStep],V=C(n.currentTeam),z=re.action==="ban"?"Ban":"Pick";return`${V} ${z} - Round ${re.round}`},j=re=>[...re].sort((V,z)=>V.complexity!==z.complexity?V.complexity-z.complexity:V.name.localeCompare(z.name)),B=(re,V)=>{d("heroSelect"),r(re,V)},E=re=>{d("heroBan"),s(re)},P=()=>{d("phaseChange"),a()},I=()=>{d("buttonClick"),i()},U=()=>{u&&(d("buttonClick"),o())},N=()=>{d("buttonClick"),c()},D=()=>{d("buttonClick"),A()},T=re=>{h&&!_&&(d("buttonClick"),g(re),y(!0))},L=()=>{d("buttonClick"),y(!1)},Q=(re,V)=>{if(!h){g(re);const Z=V.currentTarget.getBoundingClientRect();p({x:Z.left,y:Z.top,width:Z.width,height:Z.height})}},M=()=>{h||(g(null),p(void 0))},F=(re,V,z)=>{var Ae,Ne,Ce,et;const Z=V==="available",Y=V==="assigned",K=V==="selected",ue=V==="banned",be=e.filter(Be=>Be.team===n.currentTeam&&!n.selectedHeroes.some(Ee=>Ee.playerId===Be.id)),H=_&&(Z||Y),ee=z?((Ae=e.find(Be=>Be.id===z))==null?void 0:Ae.name)||`Player ${z}`:"",Se=z?(Ne=e.find(Be=>Be.id===z))==null?void 0:Ne.team:void 0,me=`
      relative p-5 rounded-lg transition-all
      ${H?"opacity-40 pointer-events-none":""}
      ${Z?"bg-gray-800 hover:bg-gray-700":""}
      ${Y?"bg-amber-900/30 hover:bg-amber-800/40":""}
      ${K?Se===ne.Titans?"bg-blue-900/30":"bg-red-900/30":""}
      ${ue?"bg-red-900/30 opacity-70":""}
    `;return l.jsxs("div",{className:me,onClick:()=>T(re),onMouseEnter:Be=>Q(re,Be),onMouseLeave:M,children:[ue&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:l.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[l.jsx("div",{className:"absolute w-3/4 h-0.5 bg-red-500 transform rotate-45"}),l.jsx("div",{className:"absolute w-3/4 h-0.5 bg-red-500 transform -rotate-45"})]})}),l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:re.icon,alt:re.name,className:"w-full h-full object-cover",onError:Be=>{const Ee=Be.target;Ee.src="https://via.placeholder.com/112?text=Hero"}})}),l.jsx("div",{className:"mt-3 font-medium text-xl",children:re.name}),K&&ee&&l.jsx("div",{className:"mt-1 text-sm text-gray-300",children:ee})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(re.complexity)].map((Be,Ee)=>l.jsx("span",{className:"text-yellow-400 text-lg sm:text-xl",children:""},Ee)),[...Array(4-re.complexity)].map((Be,Ee)=>l.jsx("span",{className:"text-gray-600 text-lg sm:text-xl",children:""},Ee+re.complexity))]}),l.jsx("div",{className:"text-sm sm:text-base text-center text-gray-300 mb-3",children:re.roles.join(", ")}),Z&&n.mode===we.PickAndBan&&l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2",onClick:Be=>Be.stopPropagation(),children:[((Ce=n.pickBanSequence[n.currentStep])==null?void 0:Ce.action)==="ban"&&l.jsx("button",{className:"w-full px-3 py-2 bg-red-700 hover:bg-red-600 rounded text-sm flex items-center justify-center",onClick:Be=>{Be.stopPropagation(),E(re)},children:"Ban Hero"}),((et=n.pickBanSequence[n.currentStep])==null?void 0:et.action)==="pick"&&be.length>0&&l.jsx("div",{className:"grid grid-cols-1 gap-1",children:be.map(Be=>l.jsxs("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:Ee=>{Ee.stopPropagation(),B(re,Be.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:Be.name})]},Be.id))})]}),Z&&n.mode===we.AllPick&&l.jsx("div",{className:"mt-3",onClick:Be=>Be.stopPropagation(),children:be.length>0&&l.jsx("div",{className:"grid grid-cols-1 gap-1",children:be.map(Be=>l.jsxs("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:Ee=>{Ee.stopPropagation(),B(re,Be.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:Be.name})]},Be.id))})}),Z&&n.mode===we.Random&&l.jsx("div",{className:"mt-3",onClick:Be=>Be.stopPropagation(),children:be.length>0&&l.jsx("div",{className:"grid grid-cols-1 gap-1",children:be.map(Be=>l.jsxs("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:Ee=>{Ee.stopPropagation(),B(re,Be.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:Be.name})]},Be.id))})}),Y&&l.jsx("div",{className:"mt-3",onClick:Be=>Be.stopPropagation(),children:l.jsx("button",{className:"w-full px-3 py-2 bg-green-700 hover:bg-green-600 rounded text-sm flex items-center justify-center",onClick:Be=>{var rt;Be.stopPropagation();const Ee=(rt=n.assignedHeroes.find(te=>te.heroOptions.some(W=>W.id===re.id)))==null?void 0:rt.playerId;Ee&&B(re,Ee)},children:"Select Hero"})})]},`${re.id}-${V}-${z||0}`)},O=()=>{const re=j(n.availableHeroes);return l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"All Pick"}),l.jsx("div",{className:"mb-6",children:_?l.jsxs("div",{className:"p-3 rounded-lg bg-green-900/50 border-2 border-green-400",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Start Game"}),l.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):l.jsxs("div",{className:`p-3 rounded-lg ${n.currentTeam===ne.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[l.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[C(n.currentTeam)," Turn"]}),w.length>0?l.jsxs("div",{className:"text-md mb-3",children:["Select any hero for: ",w.map(V=>V.name).join(", ")]}):l.jsxs("div",{className:"text-md mb-3",children:["All ",C(n.currentTeam)," players have selected heroes"]})]})}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:re.map(V=>F(V,"available"))})]})},X=()=>l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Single Draft"}),l.jsx("div",{className:"mb-6",children:_?l.jsxs("div",{className:"p-3 rounded-lg bg-green-900/50 border-2 border-green-400",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Start Game"}),l.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):l.jsxs("div",{className:`p-3 rounded-lg ${n.currentTeam===ne.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[l.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[C(n.currentTeam)," Turn"]}),w.length>0?l.jsxs("div",{className:"text-md mb-3",children:["Any ",C(n.currentTeam)," player can select a hero from their options"]}):l.jsxs("div",{className:"text-md mb-3",children:["All ",C(n.currentTeam)," players have selected heroes"]})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("h4",{className:"text-lg font-medium mb-3 bg-blue-900/50 p-2 rounded flex items-center",children:[l.jsx("div",{className:"bg-blue-700 rounded-full p-1 mr-2",children:l.jsx(ro,{size:16})}),"Titans Team"]}),l.jsx("div",{ref:v,className:"max-h-96 overflow-y-auto pr-2 space-y-4 custom-scrollbar",children:n.assignedHeroes.filter(re=>{const V=e.find(z=>z.id===re.playerId);return V&&V.team===ne.Titans}).map(re=>{const V=e.find(Y=>Y.id===re.playerId);if(!V)return null;const z=n.selectedHeroes.some(Y=>Y.playerId===V.id),Z=j(re.heroOptions);return l.jsxs("div",{className:`bg-gray-800 p-4 rounded-lg ${z?"opacity-60":""}`,children:[l.jsxs("h5",{className:"text-lg font-medium mb-3 flex items-center",children:[V.name,z&&l.jsx("span",{className:"ml-2 bg-green-600 text-white text-xs px-2 py-1 rounded",children:"Selected"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:Z.map(Y=>l.jsxs("div",{className:`relative p-4 rounded-lg ${_?"opacity-40 pointer-events-none":n.currentTeam===ne.Titans&&!z?"bg-blue-900/30 hover:bg-blue-800/40 cursor-pointer":"bg-gray-800"}`,onClick:K=>{n.currentTeam===ne.Titans&&!z&&!_?(K.stopPropagation(),B(Y,V.id)):T(Y)},onMouseEnter:K=>Q(Y,K),onMouseLeave:M,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:Y.icon,alt:Y.name,className:"w-full h-full object-cover",onError:K=>{const ue=K.target;ue.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("div",{className:"mt-2 font-medium text-lg",children:Y.name})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(Y.complexity)].map((K,ue)=>l.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},ue)),[...Array(4-Y.complexity)].map((K,ue)=>l.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},ue+Y.complexity))]}),l.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-2",children:Y.roles.join(", ")}),n.currentTeam===ne.Titans&&!z&&!_&&l.jsx("button",{className:"w-full mt-2 px-3 py-2 bg-blue-700 hover:bg-blue-600 rounded text-sm",onClick:K=>{K.stopPropagation(),B(Y,V.id)},children:"Select This Hero"})]},Y.id))})]},V.id)})})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-medium mb-3 bg-red-900/50 p-2 rounded flex items-center",children:[l.jsx("div",{className:"bg-red-700 rounded-full p-1 mr-2",children:l.jsx(ro,{size:16})}),"Atlanteans Team"]}),l.jsx("div",{ref:b,className:"max-h-96 overflow-y-auto pr-2 space-y-4 custom-scrollbar",children:n.assignedHeroes.filter(re=>{const V=e.find(z=>z.id===re.playerId);return V&&V.team===ne.Atlanteans}).map(re=>{const V=e.find(Y=>Y.id===re.playerId);if(!V)return null;const z=n.selectedHeroes.some(Y=>Y.playerId===V.id),Z=j(re.heroOptions);return l.jsxs("div",{className:`bg-gray-800 p-4 rounded-lg ${z?"opacity-60":""}`,children:[l.jsxs("h5",{className:"text-lg font-medium mb-3 flex items-center",children:[V.name,z&&l.jsx("span",{className:"ml-2 bg-green-600 text-white text-xs px-2 py-1 rounded",children:"Selected"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:Z.map(Y=>l.jsxs("div",{className:`relative p-4 rounded-lg ${_?"opacity-40 pointer-events-none":n.currentTeam===ne.Atlanteans&&!z?"bg-red-900/30 hover:bg-red-800/40 cursor-pointer":"bg-gray-800"}`,onClick:K=>{n.currentTeam===ne.Atlanteans&&!z&&!_?(K.stopPropagation(),B(Y,V.id)):T(Y)},onMouseEnter:K=>Q(Y,K),onMouseLeave:M,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:Y.icon,alt:Y.name,className:"w-full h-full object-cover",onError:K=>{const ue=K.target;ue.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("div",{className:"mt-2 font-medium text-lg",children:Y.name})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(Y.complexity)].map((K,ue)=>l.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},ue)),[...Array(4-Y.complexity)].map((K,ue)=>l.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},ue+Y.complexity))]}),l.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-2",children:Y.roles.join(", ")}),n.currentTeam===ne.Atlanteans&&!z&&!_&&l.jsx("button",{className:"w-full mt-2 px-3 py-2 bg-red-700 hover:bg-red-600 rounded text-sm",onClick:K=>{K.stopPropagation(),B(Y,V.id)},children:"Select This Hero"})]},Y.id))})]},V.id)})})]})]}),ae=()=>{const re=j(n.availableHeroes);return l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Random Draft"}),l.jsx("div",{className:"mb-6",children:_?l.jsxs("div",{className:"p-3 rounded-lg bg-green-900/50 border-2 border-green-400",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Start Game"}),l.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):l.jsxs("div",{className:`p-3 rounded-lg ${n.currentTeam===ne.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[l.jsxs("h4",{className:"text-lg font-semibold mb-2",children:[C(n.currentTeam)," Turn"]}),w.length>0?l.jsxs("div",{className:"text-md mb-3",children:[w.map(V=>V.name).join(", ")," need to select a hero"]}):l.jsxs("div",{className:"text-md mb-3",children:["All ",C(n.currentTeam)," players have selected heroes"]})]})}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:re.map(V=>l.jsxs("div",{className:`relative p-4 rounded-lg transition-all ${_?"opacity-40 pointer-events-none":n.currentTeam===ne.Titans?"bg-blue-900/30 hover:bg-blue-800/40":"bg-red-900/30 hover:bg-red-800/40"}`,onClick:()=>T(V),onMouseEnter:z=>Q(V,z),onMouseLeave:M,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:V.icon,alt:V.name,className:"w-full h-full object-cover",onError:z=>{const Z=z.target;Z.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("div",{className:"mt-2 font-medium text-lg",children:V.name})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(V.complexity)].map((z,Z)=>l.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},Z)),[...Array(4-V.complexity)].map((z,Z)=>l.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},Z+V.complexity))]}),l.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-3",children:V.roles.join(", ")}),w.length>0&&!_&&l.jsx("div",{className:"grid grid-cols-1 gap-1 mt-2",onClick:z=>z.stopPropagation(),children:w.map(z=>l.jsxs("button",{className:"w-full px-3 py-2 rounded text-sm bg-green-600 hover:bg-green-500 flex items-center justify-center",onClick:Z=>{Z.stopPropagation(),B(V,z.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:z.name})]},z.id))})]},V.id))})]})},$=()=>{if(n.mode!==we.PickAndBan)return null;const re=j(n.availableHeroes),V=j(n.bannedHeroes),z=n.currentStep<n.pickBanSequence.length?n.pickBanSequence[n.currentStep]:null;if(!z&&!_)return l.jsx("div",{children:"Draft complete"});const Z=(z==null?void 0:z.action)==="pick",Y=(z==null?void 0:z.action)==="ban";return l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Pick and Ban"}),l.jsx("div",{className:"mb-6",children:_?l.jsxs("div",{className:"p-4 rounded-lg bg-green-900/50 border-2 border-green-400",children:[l.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Start Game"}),l.jsx("div",{className:"text-md mb-3",children:"All players have selected heroes. Click Start Game."})]}):l.jsxs("div",{className:`p-4 rounded-lg ${n.currentTeam===ne.Titans?"bg-blue-900/50 border-2 border-blue-400":"bg-red-900/50 border-2 border-red-400"}`,children:[l.jsx("h4",{className:"text-xl font-semibold mb-2",children:k()}),l.jsxs("div",{className:"text-md mb-3",children:[Y&&"Select a hero to ban from the pool",Z&&w.length>0&&`${w.map(K=>K.name).join(", ")} need to pick a hero`,Z&&w.length===0&&"All players on this team have selected heroes"]})]})}),V.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"text-lg font-medium mb-3 bg-red-900/30 p-2 rounded",children:"Banned Heroes"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:V.map(K=>F(K,"banned"))})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:re.map(K=>l.jsxs("div",{className:`relative p-4 rounded-lg transition-all ${_?"opacity-40 pointer-events-none":n.currentTeam===ne.Titans?"bg-blue-900/30 hover:bg-blue-800/40":"bg-red-900/30 hover:bg-red-800/40"} cursor-pointer`,onClick:()=>T(K),onMouseEnter:ue=>Q(K,ue),onMouseLeave:M,children:[l.jsxs("div",{className:"text-center mb-3",children:[l.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-gray-300 rounded-full mx-auto overflow-hidden",children:l.jsx("img",{src:K.icon,alt:K.name,className:"w-full h-full object-cover",onError:ue=>{const be=ue.target;be.src="https://via.placeholder.com/96?text=Hero"}})}),l.jsx("div",{className:"mt-2 font-medium text-lg",children:K.name})]}),l.jsxs("div",{className:"flex justify-center mb-2",children:[[...Array(K.complexity)].map((ue,be)=>l.jsx("span",{className:"text-yellow-400 text-base sm:text-lg",children:""},be)),[...Array(4-K.complexity)].map((ue,be)=>l.jsx("span",{className:"text-gray-600 text-base sm:text-lg",children:""},be+K.complexity))]}),l.jsx("div",{className:"text-xs sm:text-sm text-center text-gray-300 mb-3",children:K.roles.join(", ")}),!_&&l.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2",onClick:ue=>ue.stopPropagation(),children:[Y&&l.jsx("button",{className:"w-full px-3 py-2 bg-red-600 hover:bg-red-500 rounded text-sm flex items-center justify-center",onClick:ue=>{ue.stopPropagation(),E(K)},children:"Ban Hero"}),Z&&w.length>0&&l.jsx("div",{className:"grid grid-cols-1 gap-1",children:w.map(ue=>l.jsxs("button",{className:"w-full px-3 py-2 bg-green-600 hover:bg-green-500 rounded text-sm flex items-center justify-center",onClick:be=>{be.stopPropagation(),B(K,ue.id)},children:[l.jsx("span",{className:"mr-1",children:"Pick for"}),l.jsx("span",{className:"font-bold",children:ue.name})]},ue.id))})]})]},K.id))})]})},J=()=>{switch(n.mode){case we.AllPick:return O();case we.Single:return X();case we.Random:return ae();case we.PickAndBan:return $();default:return l.jsx("div",{children:"Invalid drafting mode"})}},le=()=>{if(n.selectedHeroes.length===0)return null;const re=n.selectedHeroes.filter(z=>{var Z;return((Z=e.find(Y=>Y.id===z.playerId))==null?void 0:Z.team)===ne.Titans}),V=n.selectedHeroes.filter(z=>{var Z;return((Z=e.find(Y=>Y.id===z.playerId))==null?void 0:Z.team)===ne.Atlanteans});return l.jsxs("div",{className:"mb-8 bg-gray-800 p-6 rounded-lg",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Selected Heroes"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-blue-900/30 p-4 rounded-lg",children:[l.jsx("h4",{className:"text-lg font-medium mb-3 border-b border-blue-700 pb-2",children:"Titans"}),re.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:re.map(z=>F(z.hero,"selected",z.playerId))}):l.jsx("p",{className:"text-gray-400 italic",children:"No heroes selected yet"})]}),l.jsxs("div",{className:"bg-red-900/30 p-4 rounded-lg",children:[l.jsx("h4",{className:"text-lg font-medium mb-3 border-b border-red-700 pb-2",children:"Atlanteans"}),V.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:V.map(z=>F(z.hero,"selected",z.playerId))}):l.jsx("p",{className:"text-gray-400 italic",children:"No heroes selected yet"})]})]})]})};return l.jsxs("div",{className:"drafting-system",children:[l.jsx("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 mb-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center",children:[l.jsx("h2",{className:"text-2xl font-bold mb-3 sm:mb-0",children:n.mode===we.AllPick?"All Pick":n.mode===we.Single?"Single Draft":n.mode===we.Random?"Random Draft":"Pick and Ban Draft"}),l.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:[l.jsx(qe,{text:"Undo the last hero selection",children:l.jsxs("button",{className:`px-3 py-2 ${u?"bg-gray-700 hover:bg-gray-600":"bg-gray-800 opacity-50 cursor-not-allowed"} rounded-lg flex items-center`,onClick:U,disabled:!u,children:[l.jsx(Uu,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Undo"})]})}),l.jsx(qe,{text:"Reset all selections and restart with the same draft mode",children:l.jsxs("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center",onClick:N,children:[l.jsx(zs,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Reset"})]})}),l.jsx(qe,{text:"Go back to draft mode selection without rerolling tiebreaker",children:l.jsxs("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center",onClick:D,children:[l.jsx(yx,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Back"})]})}),l.jsx(qe,{text:"Return to game setup screen",children:l.jsxs("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center",onClick:I,children:[l.jsx(Bn,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Cancel"})]})}),(n.isComplete||_)&&l.jsx(qe,{text:"Finish drafting and start the game",children:l.jsxs("button",{className:"px-3 py-2 bg-green-700 hover:bg-green-600 rounded-lg flex items-center",onClick:P,children:[l.jsx(xb,{size:16,className:"mr-1 sm:mr-2"}),l.jsx("span",{className:"hidden sm:inline",children:"Start Game"})]})})]})]})}),l.jsx(jT,{}),n.selectedHeroes.length>0&&le(),l.jsx("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:J()}),l.jsx(NT,{hero:f,onClose:L,isVisible:(h?m:!!f)&&!_,cardPosition:x}),l.jsx("style",{children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 8px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-track {
          background: rgba(0, 0, 0, 0.2);
          border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background-color: rgba(255, 255, 255, 0.3);
          border-radius: 4px;
        }
        
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background-color: rgba(255, 255, 255, 0.5);
        }
        
        /* Add smooth height transitions */
        .transition-height {
          transition: max-height 0.3s ease-in-out;
        }
      `})]})},Phe=({result:e,onComplete:n})=>{const[r,s]=S.useState(!1),[a,i]=S.useState(!1),{playSound:o}=it();S.useEffect(()=>{s(!0),o("coinFlip");const A=setTimeout(()=>{i(!0),o("buttonClick")},3e3);return()=>clearTimeout(A)},[]);const c=()=>{o("buttonClick"),n()};return l.jsxs("div",{className:"fixed top-0 left-0 w-full h-full bg-black/80 flex flex-col items-center justify-center z-50",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-3xl font-bold mb-8 text-white",children:"Randomizing Tiebreaker"}),l.jsx("div",{className:"coin-flip-container",children:l.jsxs("div",{className:`coin ${r?"flipping":""} ${e===ne.Titans?"flip-titans":"flip-atlanteans"}`,children:[l.jsxs("div",{className:"coin-face heads",children:[l.jsx("div",{className:"coin-emblem",children:"Titans"}),l.jsx("div",{className:"coin-shine"})]}),l.jsxs("div",{className:"coin-face tails",children:[l.jsx("div",{className:"coin-emblem",children:"Atlanteans"}),l.jsx("div",{className:"coin-shine"})]})]})}),l.jsx("div",{className:"text-2xl font-bold mt-8 text-white",children:e===ne.Titans?"Titans go first!":"Atlanteans go first!"}),l.jsx("button",{className:`continue-button ${a?"visible":""}`,onClick:c,children:"Continue to Draft"})]}),l.jsx("style",{children:`
        .coin.flipping.flip-titans {
          animation: flipCoinTitans 3s ease-out forwards;
        }
        
        .coin.flipping.flip-atlanteans {
          animation: flipCoinAtlanteans 3s ease-out forwards;
        }
        
        @keyframes flipCoinTitans {
          0% { transform: rotateY(0) rotateX(0); }
          20% { transform: rotateY(180deg) rotateX(10deg); }
          40% { transform: rotateY(360deg) rotateX(-10deg); }
          60% { transform: rotateY(540deg) rotateX(10deg); }
          80% { transform: rotateY(720deg) rotateX(-10deg); }
          100% { transform: rotateY(0deg) rotateX(10deg); } /* End on Titans side (heads) */
        }
        
        @keyframes flipCoinAtlanteans {
          0% { transform: rotateY(0) rotateX(0); }
          20% { transform: rotateY(180deg) rotateX(10deg); }
          40% { transform: rotateY(360deg) rotateX(-10deg); }
          60% { transform: rotateY(540deg) rotateX(10deg); }
          80% { transform: rotateY(720deg) rotateX(-10deg); }
          100% { transform: rotateY(180deg) rotateX(10deg); } /* End on Atlanteans side (tails) */
        }
        
 
      `})]})},Qhe=({onSelectMode:e,onCancel:n,playerCount:r,availableDraftModes:s,heroCount:a,handicapTeam:i})=>{const{playSound:o}=it(),c={[we.AllPick]:"Teams take turns selecting any available hero for their players.",[we.Single]:"Randomly deal 3 unique heroes to each player. Teams alternate selections.",[we.Random]:`Randomly select ${r+2} heroes from the pool. Teams alternate picks from this pool.`,[we.PickAndBan]:"Full drafting experience with pick and ban phases. The draft sequence varies based on the number of players."},A={[we.AllPick]:r,[we.Single]:r*3,[we.Random]:r+2,[we.PickAndBan]:r*2},u={[we.AllPick]:"Default draft",[we.Single]:"Forces players to try new heroes",[we.Random]:"Good for balanced hero selection",[we.PickAndBan]:"Best for competitive play"},h=f=>{s[f]&&(o("buttonClick"),e(f))},d=()=>{o("buttonClick"),n()};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Select Draft Mode"}),i&&l.jsx("div",{className:"bg-amber-900/30 border border-amber-600 p-4 rounded-lg mb-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(la,{size:20,className:"text-amber-400 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-amber-400",children:"Warning: Uneven Teams"}),l.jsxs("p",{className:"text-sm text-gray-300",children:["All players on the ",i===ne.Titans?"Titans":"Atlanteans"," team must replace one of their basic cards with a handicap card."]})]})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{className:`relative ${s[we.AllPick]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(we.AllPick),children:[l.jsx("h3",{className:"text-xl font-semibold mb-3",children:"All Pick"}),l.jsx("p",{className:"text-gray-300 mb-4",children:c[we.AllPick]}),l.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[we.AllPick]}),!s[we.AllPick]&&l.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[l.jsx(la,{size:16,className:"mr-1"}),l.jsxs("span",{className:"text-xs",children:["Requires ",A[we.AllPick]," heroes"]})]})]}),l.jsxs("div",{className:`relative ${s[we.Single]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(we.Single),children:[l.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Single Draft"}),l.jsx("p",{className:"text-gray-300 mb-4",children:c[we.Single]}),l.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[we.Single]}),!s[we.Single]&&l.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[l.jsx(la,{size:16,className:"mr-1"}),l.jsxs("span",{className:"text-xs",children:["Requires ",A[we.Single]," heroes"]})]})]}),l.jsxs("div",{className:`relative ${s[we.Random]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(we.Random),children:[l.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Random Draft"}),l.jsx("p",{className:"text-gray-300 mb-4",children:c[we.Random]}),l.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[we.Random]}),!s[we.Random]&&l.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[l.jsx(la,{size:16,className:"mr-1"}),l.jsxs("span",{className:"text-xs",children:["Requires ",A[we.Random]," heroes"]})]})]}),l.jsxs("div",{className:`relative ${s[we.PickAndBan]?"bg-gray-700 hover:bg-gray-600 cursor-pointer":"bg-gray-800 opacity-50 cursor-not-allowed"} p-5 rounded-lg transition-colors`,onClick:()=>h(we.PickAndBan),children:[l.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Pick and Ban"}),l.jsx("p",{className:"text-gray-300 mb-4",children:c[we.PickAndBan]}),l.jsx("div",{className:"bg-blue-900/30 p-2 rounded text-sm",children:u[we.PickAndBan]}),!s[we.PickAndBan]&&l.jsxs("div",{className:"absolute top-2 right-2 text-yellow-400 flex items-center",children:[l.jsx(la,{size:16,className:"mr-1"}),l.jsxs("span",{className:"text-xs",children:["Requires ",A[we.PickAndBan]," heroes"]})]})]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"text-sm text-gray-400",children:["Available heroes: ",a]}),l.jsx("button",{className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",onClick:d,children:"Cancel"})]})]})},Mhe=({feedbackUrl:e})=>{const[n,r]=S.useState(()=>{const a=localStorage.getItem("feedbackBar_expanded");return a!==null?a==="true":!0}),s=()=>{r(a=>{const i=!a;return localStorage.setItem("feedbackBar_expanded",String(i)),i})};return l.jsx("div",{className:"fixed bottom-0 left-0 z-50 transition-all duration-300",children:n?l.jsxs("div",{className:"w-full bg-gray-800 bg-opacity-90 backdrop-blur-sm text-center text-base text-white py-3 px-4 flex items-center justify-between shadow-lg",children:[l.jsx("div",{className:"flex-1"}),l.jsx("div",{className:"flex-1 text-center",children:l.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-300",children:"Share Feedback"})}),l.jsx("div",{className:"flex-1 flex justify-end",children:l.jsx("button",{onClick:s,className:"p-1 rounded-full hover:bg-white/10 transition-colors","aria-label":"Collapse feedback bar",children:l.jsx(Zn,{size:16})})})]}):l.jsx("button",{onClick:s,className:"fixed bottom-2 left-2 bg-blue-600 hover:bg-blue-500 p-2 rounded-full shadow-lg","aria-label":"Expand feedback bar",children:l.jsx(Nr,{size:20,className:"text-white"})})})},Dhe=()=>{const{isSoundEnabled:e,toggleSound:n,playSound:r}=it(),s=()=>{n(),r("toggleSwitch")};return l.jsx("button",{onClick:s,className:`fixed bottom-2 right-2 z-50 p-2 rounded-full shadow-lg transition-colors ${e?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,"aria-label":e?"Mute sound":"Unmute sound",title:e?"Mute sound":"Unmute sound",children:e?l.jsx(K$,{size:20,className:"text-white"}):l.jsx(W$,{size:20,className:"text-white"})})},ET="dismissedFeatureAnnouncements";function TT(){const e=localStorage.getItem(ET);if(!e)return[];try{return JSON.parse(e)}catch{return[]}}function Rhe(e){return TT().includes(e)}function $he(e){const n=TT();n.includes(e)||(n.push(e),localStorage.setItem(ET,JSON.stringify(n)))}const Ohe=({id:e,title:n,description:r,icon:s,buttonText:a="Got it!"})=>{const{playSound:i}=it(),[o,c]=G.useState(()=>!Rhe(e)),A=()=>{i("buttonClick"),$he(e),c(!1)};return o?l.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-900 rounded-lg w-full max-w-md border border-orange-600/50 shadow-xl shadow-orange-600/20",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[s||l.jsx(_$,{size:24,className:"text-orange-400"}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:n})]}),l.jsx("button",{onClick:A,className:"text-gray-400 hover:text-white p-1 transition-colors",children:l.jsx(Bn,{size:20})})]}),l.jsx("div",{className:"p-4",children:l.jsx("div",{className:"text-gray-300 text-sm leading-relaxed",children:r})}),l.jsx("div",{className:"p-4 border-t border-gray-700",children:l.jsx("button",{onClick:A,className:"w-full bg-orange-600 hover:bg-orange-500 text-white font-medium py-3 px-4 rounded transition-colors",children:a})})]})}):null},Lhe=()=>(S.useEffect(()=>{const e=()=>{ia.Howler.ctx&&ia.Howler.ctx.state!=="running"&&ia.Howler.ctx.resume().then(()=>{console.log("AudioContext resumed successfully on user interaction")}).catch(n=>{console.error("Failed to resume AudioContext:",n)}),document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e)};return document.addEventListener("click",e),document.addEventListener("keydown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e)}},[]),null),Hhe=({winningTeam:e,onReturnToSetup:n,players:r,gameLength:s,doubleLanes:a,onUpdatePlayerStats:i})=>{const[o,c]=S.useState(!1),[A,u]=S.useState(!1),[h,d]=S.useState(!1),[f,g]=S.useState(null),[m,y]=S.useState(!1),[x,p]=S.useState(!1),{playSound:v}=it();S.useEffect(()=>{v("victory");const C=setTimeout(()=>{c(!0),v("buttonClick")},3e3);return()=>clearTimeout(C)},[]);const b=()=>{v("buttonClick"),n()},w=async()=>{u(!0),g(null);try{v("buttonClick");const C={date:new Date,winningTeam:e,gameLength:s,doubleLanes:a},k=r.map(j=>{var B,E,P,I,U,N,D,T,L;return{id:j.name,team:j.team,heroId:((B=j.hero)==null?void 0:B.id)||0,heroName:((E=j.hero)==null?void 0:E.name)||"Unknown Hero",heroRoles:((P=j.hero)==null?void 0:P.roles)||[],kills:(I=j.stats)==null?void 0:I.totalKills,deaths:(U=j.stats)==null?void 0:U.totalDeaths,assists:(N=j.stats)==null?void 0:N.totalAssists,goldEarned:(D=j.stats)==null?void 0:D.totalGoldEarned,minionKills:(T=j.stats)==null?void 0:T.totalMinionKills,level:(L=j.stats)==null?void 0:L.level}});await Pe.recordMatch(C,k),d(!0),v("phaseChange")}catch(C){console.error("Error saving match data:",C),g("Failed to save match data. Please try again.")}finally{u(!1)}},_=C=>{v("buttonClick"),C&&i&&i(C),p(!0),y(!1),v("phaseChange")};return l.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center",children:[l.jsx("div",{className:`absolute inset-0 ${e===ne.Titans?"bg-blue-900 bg-opacity-95":"bg-red-900 bg-opacity-95"}`}),l.jsxs("div",{className:"relative z-10 text-center",children:[l.jsx("div",{className:"mb-8 transform scale-100 animate-bounce",children:l.jsx(R0,{size:120,className:`${e===ne.Titans?"text-blue-300":"text-red-300"}`})}),l.jsxs("h1",{className:"text-6xl font-bold mb-4 animate-in fade-in",children:[e===ne.Titans?"Titan":"Atlantean"," Victory!"]}),l.jsxs("p",{className:"text-2xl mb-12 opacity-75",children:["The ",e===ne.Titans?"Titan":"Atlantean","s have emerged victorious!"]}),l.jsx("div",{className:"victory-stars",children:[...Array(20)].map((C,k)=>l.jsx("div",{className:`absolute star-${k} text-${e===ne.Titans?"blue":"red"}-200`,style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,opacity:Math.random()*.5+.5,animation:`twinkle ${Math.random()*2+1}s infinite alternate`},children:""},k))}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center mt-4",children:[l.jsxs("button",{onClick:b,className:`px-6 py-3 rounded-lg text-white font-medium flex items-center mx-auto ${o?"opacity-100":"opacity-0"} transition-opacity duration-500 ${e===ne.Titans?"bg-blue-600 hover:bg-blue-500":"bg-red-600 hover:bg-red-500"}`,children:[l.jsx(G8,{size:20,className:"mr-2"}),"Return to Setup"]}),!x&&o&&l.jsx(qe,{text:"Record statistics for the final round before saving",children:l.jsxs("button",{onClick:()=>{v("buttonClick"),y(!0)},className:`px-6 py-3 rounded-lg text-white font-medium flex items-center mx-auto ${e===ne.Titans?"bg-blue-700 hover:bg-blue-600":"bg-red-700 hover:bg-red-600"}`,children:[l.jsx(zf,{size:20,className:"mr-2"}),"Record Final Round Stats"]})}),o&&l.jsx(qe,{text:h?"Match data saved successfully":"Save match results to your statistics",children:l.jsx("button",{onClick:w,disabled:A||h,className:`px-6 py-3 rounded-lg text-white font-medium flex items-center mx-auto
                  ${h?"bg-green-600 cursor-default":e===ne.Titans?"bg-blue-700 hover:bg-blue-600":"bg-red-700 hover:bg-red-600"} ${A?"opacity-70 cursor-wait":"opacity-100"}`,children:A?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Saving..."]}):h?l.jsxs(l.Fragment,{children:[l.jsx(zf,{size:20,className:"mr-2"}),"Saved Successfully"]}):l.jsxs(l.Fragment,{children:[l.jsx(zf,{size:20,className:"mr-2"}),"Save Match Data"]})})})]}),x&&o&&l.jsx("div",{className:"mt-4 px-5 py-3 bg-green-800/70 rounded-lg inline-block",children:l.jsxs("p",{className:"flex items-center text-green-200",children:[l.jsx(Co,{size:16,className:"mr-2"}),"Final round statistics recorded"]})}),f&&l.jsx("div",{className:"mt-4 px-5 py-3 bg-red-800/70 rounded-lg inline-block",children:l.jsxs("p",{className:"flex items-center text-red-200",children:[l.jsx(Aa,{size:16,className:"mr-2"}),f]})})]}),l.jsx(kT,{players:r,onComplete:_,isVisible:m}),l.jsx("style",{children:`
        @keyframes twinkle {
          0% { transform: scale(0.5); opacity: 0.3; }
          100% { transform: scale(1.5); opacity: 0.9; }
        }
        
        .animate-in {
          animation: fadeIn 1s ease-out forwards;
        }
        
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        
        .victory-stars div {
          position: absolute;
          font-size: 1.5rem;
        }
      `})]})},zhe=({gameState:e,players:n,onResume:r,onDiscard:s,savedTime:a})=>{const{playSound:i}=it(),o=()=>{i("buttonClick"),r()},c=()=>{i("buttonClick"),s()},A=n.filter(d=>d.team===ne.Titans).length,u=n.filter(d=>d.team===ne.Atlanteans).length,h=d=>{switch(d){case"strategy":return"Strategy Phase";case"move":return"Action Phase";case"turn-end":return"Turn Complete";default:return d}};return l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full shadow-lg border border-blue-500",children:[l.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center",children:[l.jsx($s,{size:24,className:"mr-2 text-blue-400"}),"Resume Previous Game?"]}),l.jsxs("p",{className:"mb-4",children:["You have an ongoing game session from ",l.jsx("span",{className:"font-medium text-blue-300",children:a}),". Would you like to resume where you left off?"]}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg mb-6",children:[l.jsx("h3",{className:"font-semibold mb-2 text-blue-200",children:"Game Summary:"}),l.jsxs("ul",{className:"text-sm text-gray-300 space-y-2",children:[l.jsxs("li",{className:"flex items-center",children:[l.jsx(jt,{size:16,className:"mr-2 text-yellow-400"}),l.jsxs("span",{children:["Round ",e.round,", Turn ",e.turn,"/4"]})]}),l.jsxs("li",{className:"flex items-center",children:[l.jsx(ro,{size:16,className:"mr-2 text-green-400"}),l.jsxs("span",{children:[A," Titans vs ",u," Atlanteans"]})]}),l.jsxs("li",{className:"flex justify-between",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),"Titans: ",e.teamLives.titans," lives"]}),l.jsxs("span",{className:"flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mr-2"}),"Atlanteans: ",e.teamLives.atlanteans," lives"]})]}),l.jsxs("li",{children:["Current Phase: ",l.jsx("span",{className:"text-yellow-300",children:h(e.currentPhase)})]})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("button",{className:"flex-1 bg-green-600 hover:bg-green-500 px-4 py-3 rounded-lg text-white font-medium flex items-center justify-center shadow-md",onClick:o,children:[l.jsx(xb,{size:18,className:"mr-2"})," Resume Game"]}),l.jsxs("button",{className:"flex-1 bg-gray-600 hover:bg-gray-500 px-4 py-3 rounded-lg text-white font-medium flex items-center justify-center shadow-md",onClick:c,children:[l.jsx(Bn,{size:18,className:"mr-2"})," New Game"]})]})]})})};class Khe{constructor(){de(this,"dbName","guards-of-atlantis-timer");de(this,"storeName","game-state");de(this,"version",1);de(this,"dbPromise",null);this.initDB()}initDB(){return this.dbPromise?this.dbPromise:(this.dbPromise=new Promise((n,r)=>{const s=indexedDB.open(this.dbName,this.version);s.onerror=a=>{console.error("IndexedDB error:",a),r(a)},s.onsuccess=a=>{n(a.target.result)},s.onupgradeneeded=a=>{const i=a.target.result;i.objectStoreNames.contains(this.storeName)||i.createObjectStore(this.storeName,{keyPath:"id"})}}),this.dbPromise)}async saveGame(n){try{const s=(await this.initDB()).transaction(this.storeName,"readwrite"),a=s.objectStore(this.storeName),i={...n,timestamp:Date.now()};return a.put({id:"current",...i}),new Promise((o,c)=>{s.oncomplete=()=>o(),s.onerror=A=>c(A)})}catch(r){throw console.error("Error saving game:",r),r}}async loadGame(){try{const a=(await this.initDB()).transaction(this.storeName,"readonly").objectStore(this.storeName).get("current");return new Promise((i,o)=>{a.onsuccess=()=>{const c=a.result;if(c){const{id:A,...u}=c;i(u)}else i(null)},a.onerror=c=>o(c)})}catch(n){return console.error("Error loading game:",n),null}}async clearGame(){try{const r=(await this.initDB()).transaction(this.storeName,"readwrite");return r.objectStore(this.storeName).delete("current"),new Promise((a,i)=>{r.oncomplete=()=>a(),r.onerror=o=>i(o)})}catch(n){throw console.error("Error clearing game:",n),n}}isSupported(){return!!window.indexedDB}}const Dl=new Khe,Qr=class Qr{async runMigrations(){const n=Date.now();try{const r=this.getLastMigrationVersion();if(r>=Qr.CURRENT_VERSION)return{success:!0,version:r,matchesAnalyzed:0,statsConverted:0,playersAffected:0,duration:Date.now()-n};const s=this.runLegacyStatsMigration(),a=new Promise((o,c)=>{setTimeout(()=>c(new Error("Migration timeout")),Qr.TIMEOUT_MS)}),i=await Promise.race([s,a]);return this.setMigrationVersion(Qr.CURRENT_VERSION),{success:!0,version:Qr.CURRENT_VERSION,duration:Date.now()-n,...i}}catch(r){return console.error("Migration failed:",r),{success:!1,version:this.getLastMigrationVersion(),matchesAnalyzed:0,statsConverted:0,playersAffected:0,error:r instanceof Error?r.message:"Unknown migration error",duration:Date.now()-n}}}async runLegacyStatsMigration(){console.log(" Starting legacy stats migration...");const n=await Pe.getAllMatches();console.log(` Found ${n.length} matches to analyze`);let r=0;const s=new Set;for(const i of n){const o=await Pe.getMatchPlayers(i.id),c=["kills","deaths","assists","goldEarned","minionKills","level"];for(const A of c){const u=o.map(g=>g[A]),h=u.every(g=>g===0),d=u.some(g=>g==null),f=u.some(g=>g!==0&&g!==void 0&&g!==null);if(h&&!d&&!f)for(const g of o)await Pe.updateMatchPlayer(g.id,{...g,[A]:void 0}),r++,s.add(g.playerId)}}const a={matchesAnalyzed:n.length,statsConverted:r,playersAffected:s.size};return console.log(" Legacy stats migration completed:",a),a}getLastMigrationVersion(){try{const n=localStorage.getItem(Qr.MIGRATION_VERSION_KEY);return parseInt(n||"0")}catch(n){return console.warn("Failed to read migration version:",n),0}}setMigrationVersion(n){try{localStorage.setItem(Qr.MIGRATION_VERSION_KEY,n.toString())}catch(r){console.warn("Failed to save migration version:",r)}}isMigrationNeeded(){return this.getLastMigrationVersion()<Qr.CURRENT_VERSION}resetMigrationVersion(){try{localStorage.removeItem(Qr.MIGRATION_VERSION_KEY)}catch(n){console.warn("Failed to reset migration version:",n)}}};de(Qr,"MIGRATION_VERSION_KEY","goa_migration_version"),de(Qr,"CURRENT_VERSION",1),de(Qr,"TIMEOUT_MS",3e4);let Mx=Qr;const Ghe=new Mx;class Whe{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(n){this.flush(),this._parts.push(n)}append(n){this._pieces.push(n)}flush(){if(this._pieces.length>0){const n=new Uint8Array(this._pieces);this._parts.push(n),this._pieces=[]}}toArrayBuffer(){const n=[];for(const r of this._parts)n.push(r);return Vhe(n).buffer}}function Vhe(e){let n=0;for(const a of e)n+=a.byteLength;const r=new Uint8Array(n);let s=0;for(const a of e){const i=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);r.set(i,s),s+=a.byteLength}return r}function FT(e){return new qhe(e).unpack()}function UT(e){const n=new Xhe,r=n.pack(e);return r instanceof Promise?r.then(()=>n.getBuffer()):n.getBuffer()}class qhe{constructor(n){this.index=0,this.dataBuffer=n,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const n=this.unpack_uint8();if(n<128)return n;if((n^224)<32)return(n^224)-32;let r;if((r=n^160)<=15)return this.unpack_raw(r);if((r=n^176)<=15)return this.unpack_string(r);if((r=n^144)<=15)return this.unpack_array(r);if((r=n^128)<=15)return this.unpack_map(r);switch(n){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}}unpack_uint8(){const n=this.dataView[this.index]&255;return this.index++,n}unpack_uint16(){const n=this.read(2),r=(n[0]&255)*256+(n[1]&255);return this.index+=2,r}unpack_uint32(){const n=this.read(4),r=((n[0]*256+n[1])*256+n[2])*256+n[3];return this.index+=4,r}unpack_uint64(){const n=this.read(8),r=((((((n[0]*256+n[1])*256+n[2])*256+n[3])*256+n[4])*256+n[5])*256+n[6])*256+n[7];return this.index+=8,r}unpack_int8(){const n=this.unpack_uint8();return n<128?n:n-256}unpack_int16(){const n=this.unpack_uint16();return n<32768?n:n-65536}unpack_int32(){const n=this.unpack_uint32();return n<2**31?n:n-2**32}unpack_int64(){const n=this.unpack_uint64();return n<2**63?n:n-2**64}unpack_raw(n){if(this.length<this.index+n)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${n} ${this.length}`);const r=this.dataBuffer.slice(this.index,this.index+n);return this.index+=n,r}unpack_string(n){const r=this.read(n);let s=0,a="",i,o;for(;s<n;)i=r[s],i<160?(o=i,s++):(i^192)<32?(o=(i&31)<<6|r[s+1]&63,s+=2):(i^224)<16?(o=(i&15)<<12|(r[s+1]&63)<<6|r[s+2]&63,s+=3):(o=(i&7)<<18|(r[s+1]&63)<<12|(r[s+2]&63)<<6|r[s+3]&63,s+=4),a+=String.fromCodePoint(o);return this.index+=n,a}unpack_array(n){const r=new Array(n);for(let s=0;s<n;s++)r[s]=this.unpack();return r}unpack_map(n){const r={};for(let s=0;s<n;s++){const a=this.unpack();r[a]=this.unpack()}return r}unpack_float(){const n=this.unpack_uint32(),r=n>>31,s=(n>>23&255)-127,a=n&8388607|8388608;return(r===0?1:-1)*a*2**(s-23)}unpack_double(){const n=this.unpack_uint32(),r=this.unpack_uint32(),s=n>>31,a=(n>>20&2047)-1023,o=(n&1048575|1048576)*2**(a-20)+r*2**(a-52);return(s===0?1:-1)*o}read(n){const r=this.index;if(r+n<=this.length)return this.dataView.subarray(r,r+n);throw new Error("BinaryPackFailure: read index out of range")}}class Xhe{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(n){if(typeof n=="string")this.pack_string(n);else if(typeof n=="number")Math.floor(n)===n?this.pack_integer(n):this.pack_double(n);else if(typeof n=="boolean")n===!0?this._bufferBuilder.append(195):n===!1&&this._bufferBuilder.append(194);else if(n===void 0)this._bufferBuilder.append(192);else if(typeof n=="object")if(n===null)this._bufferBuilder.append(192);else{const r=n.constructor;if(n instanceof Array){const s=this.pack_array(n);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else if(n instanceof ArrayBuffer)this.pack_bin(new Uint8Array(n));else if("BYTES_PER_ELEMENT"in n){const s=n;this.pack_bin(new Uint8Array(s.buffer,s.byteOffset,s.byteLength))}else if(n instanceof Date)this.pack_string(n.toString());else{if(n instanceof Blob)return n.arrayBuffer().then(s=>{this.pack_bin(new Uint8Array(s)),this._bufferBuilder.flush()});if(r==Object||r.toString().startsWith("class")){const s=this.pack_object(n);if(s instanceof Promise)return s.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${r.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof n}" not yet supported`);this._bufferBuilder.flush()}pack_bin(n){const r=n.length;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this._bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_string(n){const r=this._textEncoder.encode(n),s=r.length;if(s<=15)this.pack_uint8(176+s);else if(s<=65535)this._bufferBuilder.append(216),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(s);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_array(n){const r=n.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this._bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");const s=a=>{if(a<r){const i=this.pack(n[a]);return i instanceof Promise?i.then(()=>s(a+1)):s(a+1)}};return s(0)}pack_integer(n){if(n>=-32&&n<=127)this._bufferBuilder.append(n&255);else if(n>=0&&n<=255)this._bufferBuilder.append(204),this.pack_uint8(n);else if(n>=-128&&n<=127)this._bufferBuilder.append(208),this.pack_int8(n);else if(n>=0&&n<=65535)this._bufferBuilder.append(205),this.pack_uint16(n);else if(n>=-32768&&n<=32767)this._bufferBuilder.append(209),this.pack_int16(n);else if(n>=0&&n<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(n);else if(n>=-2147483648&&n<=2147483647)this._bufferBuilder.append(210),this.pack_int32(n);else if(n>=-9223372036854776e3&&n<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(n);else if(n>=0&&n<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(n);else throw new Error("Invalid integer")}pack_double(n){let r=0;n<0&&(r=1,n=-n);const s=Math.floor(Math.log(n)/Math.LN2),a=n/2**s-1,i=Math.floor(a*2**52),o=2**32,c=r<<31|s+1023<<20|i/o&1048575,A=i%o;this._bufferBuilder.append(203),this.pack_int32(c),this.pack_int32(A)}pack_object(n){const r=Object.keys(n),s=r.length;if(s<=15)this.pack_uint8(128+s);else if(s<=65535)this._bufferBuilder.append(222),this.pack_uint16(s);else if(s<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(s);else throw new Error("Invalid length");const a=i=>{if(i<r.length){const o=r[i];if(n.hasOwnProperty(o)){this.pack(o);const c=this.pack(n[o]);if(c instanceof Promise)return c.then(()=>a(i+1))}return a(i+1)}};return a(0)}pack_uint8(n){this._bufferBuilder.append(n)}pack_uint16(n){this._bufferBuilder.append(n>>8),this._bufferBuilder.append(n&255)}pack_uint32(n){const r=n&4294967295;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_uint64(n){const r=n/4294967296,s=n%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}pack_int8(n){this._bufferBuilder.append(n&255)}pack_int16(n){this._bufferBuilder.append((n&65280)>>8),this._bufferBuilder.append(n&255)}pack_int32(n){this._bufferBuilder.append(n>>>24&255),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_int64(n){const r=Math.floor(n/4294967296),s=n%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((s&4278190080)>>>24),this._bufferBuilder.append((s&16711680)>>>16),this._bufferBuilder.append((s&65280)>>>8),this._bufferBuilder.append(s&255)}constructor(){this._bufferBuilder=new Whe,this._textEncoder=new TextEncoder}}let IT=!0,PT=!0;function lu(e,n,r){const s=e.match(n);return s&&s.length>=r&&parseFloat(s[r],10)}function gl(e,n,r){if(!e.RTCPeerConnection)return;const s=e.RTCPeerConnection.prototype,a=s.addEventListener;s.addEventListener=function(o,c){if(o!==n)return a.apply(this,arguments);const A=u=>{const h=r(u);h&&(c.handleEvent?c.handleEvent(h):c(h))};return this._eventMap=this._eventMap||{},this._eventMap[n]||(this._eventMap[n]=new Map),this._eventMap[n].set(c,A),a.apply(this,[o,A])};const i=s.removeEventListener;s.removeEventListener=function(o,c){if(o!==n||!this._eventMap||!this._eventMap[n])return i.apply(this,arguments);if(!this._eventMap[n].has(c))return i.apply(this,arguments);const A=this._eventMap[n].get(c);return this._eventMap[n].delete(c),this._eventMap[n].size===0&&delete this._eventMap[n],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[o,A])},Object.defineProperty(s,"on"+n,{get(){return this["_on"+n]},set(o){this["_on"+n]&&(this.removeEventListener(n,this["_on"+n]),delete this["_on"+n]),o&&this.addEventListener(n,this["_on"+n]=o)},enumerable:!0,configurable:!0})}function Yhe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(IT=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Jhe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(PT=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function QT(){if(typeof window=="object"){if(IT)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Zb(e,n){PT&&console.warn(e+" is deprecated, please use "+n+" instead.")}function Zhe(e){const n={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return n.browser="Not a browser.",n;const{navigator:r}=e;if(r.userAgentData&&r.userAgentData.brands){const s=r.userAgentData.brands.find(a=>a.brand==="Chromium");if(s)return{browser:"chrome",version:parseInt(s.version,10)}}if(r.mozGetUserMedia)n.browser="firefox",n.version=parseInt(lu(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)n.browser="chrome",n.version=parseInt(lu(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))n.browser="safari",n.version=parseInt(lu(r.userAgent,/AppleWebKit\/(\d+)\./,1)),n.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,n._safariVersion=lu(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return n.browser="Not a supported browser.",n;return n}function z5(e){return Object.prototype.toString.call(e)==="[object Object]"}function MT(e){return z5(e)?Object.keys(e).reduce(function(n,r){const s=z5(e[r]),a=s?MT(e[r]):e[r],i=s&&!Object.keys(a).length;return a===void 0||i?n:Object.assign(n,{[r]:a})},{}):e}function Dx(e,n,r){!n||r.has(n.id)||(r.set(n.id,n),Object.keys(n).forEach(s=>{s.endsWith("Id")?Dx(e,e.get(n[s]),r):s.endsWith("Ids")&&n[s].forEach(a=>{Dx(e,e.get(a),r)})}))}function K5(e,n,r){const s=r?"outbound-rtp":"inbound-rtp",a=new Map;if(n===null)return a;const i=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===n.id&&i.push(o)}),i.forEach(o=>{e.forEach(c=>{c.type===s&&c.trackId===o.id&&Dx(e,c,a)})}),a}const G5=QT;function DT(e,n){const r=e&&e.navigator;if(!r.mediaDevices)return;const s=function(c){if(typeof c!="object"||c.mandatory||c.optional)return c;const A={};return Object.keys(c).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const h=typeof c[u]=="object"?c[u]:{ideal:c[u]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const d=function(f,g){return f?f+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(h.ideal!==void 0){A.optional=A.optional||[];let f={};typeof h.ideal=="number"?(f[d("min",u)]=h.ideal,A.optional.push(f),f={},f[d("max",u)]=h.ideal,A.optional.push(f)):(f[d("",u)]=h.ideal,A.optional.push(f))}h.exact!==void 0&&typeof h.exact!="number"?(A.mandatory=A.mandatory||{},A.mandatory[d("",u)]=h.exact):["min","max"].forEach(f=>{h[f]!==void 0&&(A.mandatory=A.mandatory||{},A.mandatory[d(f,u)]=h[f])})}),c.advanced&&(A.optional=(A.optional||[]).concat(c.advanced)),A},a=function(c,A){if(n.version>=61)return A(c);if(c=JSON.parse(JSON.stringify(c)),c&&typeof c.audio=="object"){const u=function(h,d,f){d in h&&!(f in h)&&(h[f]=h[d],delete h[d])};c=JSON.parse(JSON.stringify(c)),u(c.audio,"autoGainControl","googAutoGainControl"),u(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=s(c.audio)}if(c&&typeof c.video=="object"){let u=c.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const h=n.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete c.video.facingMode;let d;if(u.exact==="environment"||u.ideal==="environment"?d=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(d=["front"]),d)return r.mediaDevices.enumerateDevices().then(f=>{f=f.filter(m=>m.kind==="videoinput");let g=f.find(m=>d.some(y=>m.label.toLowerCase().includes(y)));return!g&&f.length&&d.includes("back")&&(g=f[f.length-1]),g&&(c.video.deviceId=u.exact?{exact:g.deviceId}:{ideal:g.deviceId}),c.video=s(c.video),G5("chrome: "+JSON.stringify(c)),A(c)})}c.video=s(c.video)}return G5("chrome: "+JSON.stringify(c)),A(c)},i=function(c){return n.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(c,A,u){a(c,h=>{r.webkitGetUserMedia(h,A,d=>{u&&u(i(d))})})};if(r.getUserMedia=o.bind(r),r.mediaDevices.getUserMedia){const c=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(A){return a(A,u=>c(u).then(h=>{if(u.audio&&!h.getAudioTracks().length||u.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(i(h))))}}}function RT(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function $T(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=s=>{s.stream.addEventListener("addtrack",a=>{let i;e.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(c=>c.track&&c.track.id===a.track.id):i={track:a.track};const o=new Event("track");o.track=a.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[s.stream],this.dispatchEvent(o)}),s.stream.getTracks().forEach(a=>{let i;e.RTCPeerConnection.prototype.getReceivers?i=this.getReceivers().find(c=>c.track&&c.track.id===a.id):i={track:a};const o=new Event("track");o.track=a,o.receiver=i,o.transceiver={receiver:i},o.streams=[s.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),n.apply(this,arguments)}}else gl(e,"track",n=>(n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n))}function OT(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const n=function(a,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=a.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:a}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(c,A){let u=a.apply(this,arguments);return u||(u=n(this,c),this._senders.push(u)),u};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(c){i.apply(this,arguments);const A=this._senders.indexOf(c);A!==-1&&this._senders.splice(A,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(i){this._senders=this._senders||[],r.apply(this,[i]),i.getTracks().forEach(o=>{this._senders.push(n(this,o))})};const s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(i){this._senders=this._senders||[],s.apply(this,[i]),i.getTracks().forEach(o=>{const c=this._senders.find(A=>A.track===o);c&&this._senders.splice(this._senders.indexOf(c),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function LT(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=r.apply(this,[]);return i.forEach(o=>o._pc=this),i});const s=e.RTCPeerConnection.prototype.addTrack;s&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=s.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>K5(o,i.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const a=r.apply(this,[]);return a.forEach(i=>i._pc=this),a}),gl(e,"track",s=>(s.receiver._pc=s.srcElement,s)),e.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(i=>K5(i,a.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const s=arguments[0];let a,i,o;return this.getSenders().forEach(c=>{c.track===s&&(a?o=!0:a=c)}),this.getReceivers().forEach(c=>(c.track===s&&(i?o=!0:i=c),c.track===s)),o||a&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return n.apply(this,arguments)}}function HT(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,c){if(!c)return n.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const A=n.apply(this,arguments);return this._shimmedLocalStreams[c.id]?this._shimmedLocalStreams[c.id].indexOf(A)===-1&&this._shimmedLocalStreams[c.id].push(A):this._shimmedLocalStreams[c.id]=[c,A],A};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(d=>d.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const c=this.getSenders();r.apply(this,arguments);const A=this.getSenders().filter(u=>c.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(A)};const s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],s.apply(this,arguments)};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(c=>{const A=this._shimmedLocalStreams[c].indexOf(o);A!==-1&&this._shimmedLocalStreams[c].splice(A,1),this._shimmedLocalStreams[c].length===1&&delete this._shimmedLocalStreams[c]}),a.apply(this,arguments)}}function zT(e,n){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&n.version>=65)return HT(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=r.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(d=>this._reverseStreams[d.id])};const s=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const d=new e.MediaStream(h.getTracks());this._streams[h.id]=d,this._reverseStreams[d.id]=h,h=d}s.apply(this,[h])};const a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(y=>y===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[d.id];if(m)m.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new e.MediaStream([h]);this._streams[d.id]=y,this._reverseStreams[y.id]=d,this.addStream(y)}return this.getSenders().find(y=>y.track===h)};function i(u,h){let d=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const g=u._reverseStreams[f],m=u._streams[g.id];d=d.replace(new RegExp(m.id,"g"),g.id)}),new RTCSessionDescription({type:h.type,sdp:d})}function o(u,h){let d=h.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const g=u._reverseStreams[f],m=u._streams[g.id];d=d.replace(new RegExp(g.id,"g"),m.id)}),new RTCSessionDescription({type:h.type,sdp:d})}["createOffer","createAnswer"].forEach(function(u){const h=e.RTCPeerConnection.prototype[u],d={[u](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[m=>{const y=i(this,m);f[0].apply(null,[y])},m=>{f[1]&&f[1].apply(null,m)},arguments[2]]):h.apply(this,arguments).then(m=>i(this,m))}};e.RTCPeerConnection.prototype[u]=d[u]});const c=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?c.apply(this,arguments):(arguments[0]=o(this,arguments[0]),c.apply(this,arguments))};const A=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const u=A.get.apply(this);return u.type===""?u:i(this,u)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(y=>h.track===y)&&(f=this._streams[g])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Rx(e,n){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const s=e.RTCPeerConnection.prototype[r],a={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=a[r]})}function KT(e,n){gl(e,"negotiationneeded",r=>{const s=r.target;if(!((n.version<72||s.getConfiguration&&s.getConfiguration().sdpSemantics==="plan-b")&&s.signalingState!=="stable"))return r})}const W5=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:KT,shimAddTrackRemoveTrack:zT,shimAddTrackRemoveTrackWithNative:HT,shimGetSendersWithDtmf:OT,shimGetUserMedia:DT,shimMediaStream:RT,shimOnTrack:$T,shimPeerConnection:Rx,shimSenderReceiverGetStats:LT},Symbol.toStringTag,{value:"Module"}));function GT(e,n){const r=e&&e.navigator,s=e&&e.MediaStreamTrack;if(r.getUserMedia=function(a,i,o){Zb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(a).then(i,o)},!(n.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const a=function(o,c,A){c in o&&!(A in o)&&(o[A]=o[c],delete o[c])},i=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),a(o.audio,"autoGainControl","mozAutoGainControl"),a(o.audio,"noiseSuppression","mozNoiseSuppression")),i(o)},s&&s.prototype.getSettings){const o=s.prototype.getSettings;s.prototype.getSettings=function(){const c=o.apply(this,arguments);return a(c,"mozAutoGainControl","autoGainControl"),a(c,"mozNoiseSuppression","noiseSuppression"),c}}if(s&&s.prototype.applyConstraints){const o=s.prototype.applyConstraints;s.prototype.applyConstraints=function(c){return this.kind==="audio"&&typeof c=="object"&&(c=JSON.parse(JSON.stringify(c)),a(c,"autoGainControl","mozAutoGainControl"),a(c,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[c])}}}}function efe(e,n){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(s){if(!(s&&s.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return s.video===!0?s.video={mediaSource:n}:s.video.mediaSource=n,e.navigator.mediaDevices.getUserMedia(s)})}function WT(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function $x(e,n){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),n.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const i=e.RTCPeerConnection.prototype[a],o={[a](){return arguments[0]=new(a==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};e.RTCPeerConnection.prototype[a]=o[a]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},s=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[i,o,c]=arguments;return s.apply(this,[i||null]).then(A=>{if(n.version<53&&!o)try{A.forEach(u=>{u.type=r[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;A.forEach((h,d)=>{A.set(d,Object.assign({},h,{type:r[h.type]||h.type}))})}return A}).then(o,c)}}function VT(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(i=>i._pc=this),a});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function qT(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const s=n.apply(this,[]);return s.forEach(a=>a._pc=this),s}),gl(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function XT(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){Zb("removeStream","removeTrack"),this.getSenders().forEach(s=>{s.track&&r.getTracks().includes(s.track)&&this.removeTrack(s)})})}function YT(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function JT(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const n=e.RTCPeerConnection.prototype.addTransceiver;n&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let s=arguments[1]&&arguments[1].sendEncodings;s===void 0&&(s=[]),s=[...s];const a=s.length>0;a&&s.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=n.apply(this,arguments);if(a){const{sender:o}=i,c=o.getParameters();(!("encodings"in c)||c.encodings.length===1&&Object.keys(c.encodings[0]).length===0)&&(c.encodings=s,o.sendEncodings=s,this.setParametersPromises.push(o.setParameters(c).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return i})}function ZT(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const n=e.RTCRtpSender.prototype.getParameters;n&&(e.RTCRtpSender.prototype.getParameters=function(){const s=n.apply(this,arguments);return"encodings"in s||(s.encodings=[].concat(this.sendEncodings||[{}])),s})}function eF(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}function tF(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const n=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>n.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):n.apply(this,arguments)}}const V5=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:JT,shimCreateAnswer:tF,shimCreateOffer:eF,shimGetDisplayMedia:efe,shimGetParameters:ZT,shimGetUserMedia:GT,shimOnTrack:WT,shimPeerConnection:$x,shimRTCDataChannel:YT,shimReceiverGetStats:qT,shimRemoveStream:XT,shimSenderGetStats:VT},Symbol.toStringTag,{value:"Module"}));function nF(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(s){this._localStreams||(this._localStreams=[]),this._localStreams.includes(s)||this._localStreams.push(s),s.getAudioTracks().forEach(a=>n.call(this,a,s)),s.getVideoTracks().forEach(a=>n.call(this,a,s))},e.RTCPeerConnection.prototype.addTrack=function(s,...a){return a&&a.forEach(i=>{this._localStreams?this._localStreams.includes(i)||this._localStreams.push(i):this._localStreams=[i]}),n.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const s=this._localStreams.indexOf(r);if(s===-1)return;this._localStreams.splice(s,1);const a=r.getTracks();this.getSenders().forEach(i=>{a.includes(i.track)&&this.removeTrack(i)})})}}function rF(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=s=>{s.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const i=new Event("addstream");i.stream=a,this.dispatchEvent(i)})})}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const s=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(i=>{if(s._remoteStreams||(s._remoteStreams=[]),s._remoteStreams.indexOf(i)>=0)return;s._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,s.dispatchEvent(o)})}),n.apply(s,arguments)}}}function sF(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,r=n.createOffer,s=n.createAnswer,a=n.setLocalDescription,i=n.setRemoteDescription,o=n.addIceCandidate;n.createOffer=function(u,h){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return h?(f.then(u,h),Promise.resolve()):f},n.createAnswer=function(u,h){const d=arguments.length>=2?arguments[2]:arguments[0],f=s.apply(this,[d]);return h?(f.then(u,h),Promise.resolve()):f};let c=function(A,u,h){const d=a.apply(this,[A]);return h?(d.then(u,h),Promise.resolve()):d};n.setLocalDescription=c,c=function(A,u,h){const d=i.apply(this,[A]);return h?(d.then(u,h),Promise.resolve()):d},n.setRemoteDescription=c,c=function(A,u,h){const d=o.apply(this,[A]);return h?(d.then(u,h),Promise.resolve()):d},n.addIceCandidate=c}function aF(e){const n=e&&e.navigator;if(n.mediaDevices&&n.mediaDevices.getUserMedia){const r=n.mediaDevices,s=r.getUserMedia.bind(r);n.mediaDevices.getUserMedia=a=>s(iF(a))}!n.getUserMedia&&n.mediaDevices&&n.mediaDevices.getUserMedia&&(n.getUserMedia=(function(s,a,i){n.mediaDevices.getUserMedia(s).then(a,i)}).bind(n))}function iF(e){return e&&e.video!==void 0?Object.assign({},e,{video:MT(e.video)}):e}function oF(e){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection;e.RTCPeerConnection=function(s,a){if(s&&s.iceServers){const i=[];for(let o=0;o<s.iceServers.length;o++){let c=s.iceServers[o];c.urls===void 0&&c.url?(Zb("RTCIceServer.url","RTCIceServer.urls"),c=JSON.parse(JSON.stringify(c)),c.urls=c.url,delete c.url,i.push(c)):i.push(s.iceServers[o])}s.iceServers=i}return new n(s,a)},e.RTCPeerConnection.prototype=n.prototype,"generateCertificate"in n&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return n.generateCertificate}})}function lF(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function cF(e){const n=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(s){if(s){typeof s.offerToReceiveAudio<"u"&&(s.offerToReceiveAudio=!!s.offerToReceiveAudio);const a=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");s.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):s.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof s.offerToReceiveVideo<"u"&&(s.offerToReceiveVideo=!!s.offerToReceiveVideo);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="video");s.offerToReceiveVideo===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):s.offerToReceiveVideo===!0&&!i&&this.addTransceiver("video",{direction:"recvonly"})}return n.apply(this,arguments)}}function AF(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const q5=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:AF,shimCallbacksAPI:sF,shimConstraints:iF,shimCreateOfferLegacy:cF,shimGetUserMedia:aF,shimLocalStreamsAPI:nF,shimRTCIceServerUrls:oF,shimRemoteStreamsAPI:rF,shimTrackEventTransceiver:lF},Symbol.toStringTag,{value:"Module"}));var uF={exports:{}};(function(e){const n={};n.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},n.localCName=n.generateIdentifier(),n.splitLines=function(r){return r.trim().split(`
`).map(s=>s.trim())},n.splitSections=function(r){return r.split(`
m=`).map((a,i)=>(i>0?"m="+a:a).trim()+`\r
`)},n.getDescription=function(r){const s=n.splitSections(r);return s&&s[0]},n.getMediaSections=function(r){const s=n.splitSections(r);return s.shift(),s},n.matchPrefix=function(r,s){return n.splitLines(r).filter(a=>a.indexOf(s)===0)},n.parseCandidate=function(r){let s;r.indexOf("a=candidate:")===0?s=r.substring(12).split(" "):s=r.substring(10).split(" ");const a={foundation:s[0],component:{1:"rtp",2:"rtcp"}[s[1]]||s[1],protocol:s[2].toLowerCase(),priority:parseInt(s[3],10),ip:s[4],address:s[4],port:parseInt(s[5],10),type:s[7]};for(let i=8;i<s.length;i+=2)switch(s[i]){case"raddr":a.relatedAddress=s[i+1];break;case"rport":a.relatedPort=parseInt(s[i+1],10);break;case"tcptype":a.tcpType=s[i+1];break;case"ufrag":a.ufrag=s[i+1],a.usernameFragment=s[i+1];break;default:a[s[i]]===void 0&&(a[s[i]]=s[i+1]);break}return a},n.writeCandidate=function(r){const s=[];s.push(r.foundation);const a=r.component;a==="rtp"?s.push(1):a==="rtcp"?s.push(2):s.push(a),s.push(r.protocol.toUpperCase()),s.push(r.priority),s.push(r.address||r.ip),s.push(r.port);const i=r.type;return s.push("typ"),s.push(i),i!=="host"&&r.relatedAddress&&r.relatedPort&&(s.push("raddr"),s.push(r.relatedAddress),s.push("rport"),s.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(s.push("ufrag"),s.push(r.usernameFragment||r.ufrag)),"candidate:"+s.join(" ")},n.parseIceOptions=function(r){return r.substring(14).split(" ")},n.parseRtpMap=function(r){let s=r.substring(9).split(" ");const a={payloadType:parseInt(s.shift(),10)};return s=s[0].split("/"),a.name=s[0],a.clockRate=parseInt(s[1],10),a.channels=s.length===3?parseInt(s[2],10):1,a.numChannels=a.channels,a},n.writeRtpMap=function(r){let s=r.payloadType;r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType);const a=r.channels||r.numChannels||1;return"a=rtpmap:"+s+" "+r.name+"/"+r.clockRate+(a!==1?"/"+a:"")+`\r
`},n.parseExtmap=function(r){const s=r.substring(9).split(" ");return{id:parseInt(s[0],10),direction:s[0].indexOf("/")>0?s[0].split("/")[1]:"sendrecv",uri:s[1],attributes:s.slice(2).join(" ")}},n.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},n.parseFmtp=function(r){const s={};let a;const i=r.substring(r.indexOf(" ")+1).split(";");for(let o=0;o<i.length;o++)a=i[o].trim().split("="),s[a[0].trim()]=a[1];return s},n.writeFmtp=function(r){let s="",a=r.payloadType;if(r.preferredPayloadType!==void 0&&(a=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const i=[];Object.keys(r.parameters).forEach(o=>{r.parameters[o]!==void 0?i.push(o+"="+r.parameters[o]):i.push(o)}),s+="a=fmtp:"+a+" "+i.join(";")+`\r
`}return s},n.parseRtcpFb=function(r){const s=r.substring(r.indexOf(" ")+1).split(" ");return{type:s.shift(),parameter:s.join(" ")}},n.writeRtcpFb=function(r){let s="",a=r.payloadType;return r.preferredPayloadType!==void 0&&(a=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(i=>{s+="a=rtcp-fb:"+a+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),s},n.parseSsrcMedia=function(r){const s=r.indexOf(" "),a={ssrc:parseInt(r.substring(7,s),10)},i=r.indexOf(":",s);return i>-1?(a.attribute=r.substring(s+1,i),a.value=r.substring(i+1)):a.attribute=r.substring(s+1),a},n.parseSsrcGroup=function(r){const s=r.substring(13).split(" ");return{semantics:s.shift(),ssrcs:s.map(a=>parseInt(a,10))}},n.getMid=function(r){const s=n.matchPrefix(r,"a=mid:")[0];if(s)return s.substring(6)},n.parseFingerprint=function(r){const s=r.substring(14).split(" ");return{algorithm:s[0].toLowerCase(),value:s[1].toUpperCase()}},n.getDtlsParameters=function(r,s){return{role:"auto",fingerprints:n.matchPrefix(r+s,"a=fingerprint:").map(n.parseFingerprint)}},n.writeDtlsParameters=function(r,s){let a="a=setup:"+s+`\r
`;return r.fingerprints.forEach(i=>{a+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),a},n.parseCryptoLine=function(r){const s=r.substring(9).split(" ");return{tag:parseInt(s[0],10),cryptoSuite:s[1],keyParams:s[2],sessionParams:s.slice(3)}},n.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?n.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},n.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const s=r.substring(7).split("|");return{keyMethod:"inline",keySalt:s[0],lifeTime:s[1],mkiValue:s[2]?s[2].split(":")[0]:void 0,mkiLength:s[2]?s[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},n.getCryptoParameters=function(r,s){return n.matchPrefix(r+s,"a=crypto:").map(n.parseCryptoLine)},n.getIceParameters=function(r,s){const a=n.matchPrefix(r+s,"a=ice-ufrag:")[0],i=n.matchPrefix(r+s,"a=ice-pwd:")[0];return a&&i?{usernameFragment:a.substring(12),password:i.substring(10)}:null},n.writeIceParameters=function(r){let s="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(s+=`a=ice-lite\r
`),s},n.parseRtpParameters=function(r){const s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=n.splitLines(r)[0].split(" ");s.profile=i[2];for(let c=3;c<i.length;c++){const A=i[c],u=n.matchPrefix(r,"a=rtpmap:"+A+" ")[0];if(u){const h=n.parseRtpMap(u),d=n.matchPrefix(r,"a=fmtp:"+A+" ");switch(h.parameters=d.length?n.parseFmtp(d[0]):{},h.rtcpFeedback=n.matchPrefix(r,"a=rtcp-fb:"+A+" ").map(n.parseRtcpFb),s.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(h.name.toUpperCase());break}}}n.matchPrefix(r,"a=extmap:").forEach(c=>{s.headerExtensions.push(n.parseExtmap(c))});const o=n.matchPrefix(r,"a=rtcp-fb:* ").map(n.parseRtcpFb);return s.codecs.forEach(c=>{o.forEach(A=>{c.rtcpFeedback.find(h=>h.type===A.type&&h.parameter===A.parameter)||c.rtcpFeedback.push(A)})}),s},n.writeRtpDescription=function(r,s){let a="";a+="m="+r+" ",a+=s.codecs.length>0?"9":"0",a+=" "+(s.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=s.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(o=>{a+=n.writeRtpMap(o),a+=n.writeFmtp(o),a+=n.writeRtcpFb(o)});let i=0;return s.codecs.forEach(o=>{o.maxptime>i&&(i=o.maxptime)}),i>0&&(a+="a=maxptime:"+i+`\r
`),s.headerExtensions&&s.headerExtensions.forEach(o=>{a+=n.writeExtmap(o)}),a},n.parseRtpEncodingParameters=function(r){const s=[],a=n.parseRtpParameters(r),i=a.fecMechanisms.indexOf("RED")!==-1,o=a.fecMechanisms.indexOf("ULPFEC")!==-1,c=n.matchPrefix(r,"a=ssrc:").map(f=>n.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),A=c.length>0&&c[0].ssrc;let u;const h=n.matchPrefix(r,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(m=>parseInt(m,10)));h.length>0&&h[0].length>1&&h[0][0]===A&&(u=h[0][1]),a.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let g={ssrc:A,codecPayloadType:parseInt(f.parameters.apt,10)};A&&u&&(g.rtx={ssrc:u}),s.push(g),i&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:A,mechanism:o?"red+ulpfec":"red"},s.push(g))}}),s.length===0&&A&&s.push({ssrc:A});let d=n.matchPrefix(r,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,s.forEach(f=>{f.maxBitrate=d})),s},n.parseRtcpParameters=function(r){const s={},a=n.matchPrefix(r,"a=ssrc:").map(c=>n.parseSsrcMedia(c)).filter(c=>c.attribute==="cname")[0];a&&(s.cname=a.value,s.ssrc=a.ssrc);const i=n.matchPrefix(r,"a=rtcp-rsize");s.reducedSize=i.length>0,s.compound=i.length===0;const o=n.matchPrefix(r,"a=rtcp-mux");return s.mux=o.length>0,s},n.writeRtcpParameters=function(r){let s="";return r.reducedSize&&(s+=`a=rtcp-rsize\r
`),r.mux&&(s+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(s+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),s},n.parseMsid=function(r){let s;const a=n.matchPrefix(r,"a=msid:");if(a.length===1)return s=a[0].substring(7).split(" "),{stream:s[0],track:s[1]};const i=n.matchPrefix(r,"a=ssrc:").map(o=>n.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(i.length>0)return s=i[0].value.split(" "),{stream:s[0],track:s[1]}},n.parseSctpDescription=function(r){const s=n.parseMLine(r),a=n.matchPrefix(r,"a=max-message-size:");let i;a.length>0&&(i=parseInt(a[0].substring(19),10)),isNaN(i)&&(i=65536);const o=n.matchPrefix(r,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:s.fmt,maxMessageSize:i};const c=n.matchPrefix(r,"a=sctpmap:");if(c.length>0){const A=c[0].substring(10).split(" ");return{port:parseInt(A[0],10),protocol:A[1],maxMessageSize:i}}},n.writeSctpDescription=function(r,s){let a=[];return r.protocol!=="DTLS/SCTP"?a=["m="+r.kind+" 9 "+r.protocol+" "+s.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+s.port+`\r
`]:a=["m="+r.kind+" 9 "+r.protocol+" "+s.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+s.port+" "+s.protocol+` 65535\r
`],s.maxMessageSize!==void 0&&a.push("a=max-message-size:"+s.maxMessageSize+`\r
`),a.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,22)},n.writeSessionBoilerplate=function(r,s,a){let i;const o=s!==void 0?s:2;return r?i=r:i=n.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+i+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},n.getDirection=function(r,s){const a=n.splitLines(r);for(let i=0;i<a.length;i++)switch(a[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[i].substring(2)}return s?n.getDirection(s):"sendrecv"},n.getKind=function(r){return n.splitLines(r)[0].split(" ")[0].substring(2)},n.isRejected=function(r){return r.split(" ",2)[1]==="0"},n.parseMLine=function(r){const a=n.splitLines(r)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},n.parseOLine=function(r){const a=n.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},n.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const s=n.splitLines(r);for(let a=0;a<s.length;a++)if(s[a].length<2||s[a].charAt(1)!=="=")return!1;return!0},e.exports=n})(uF);var dF=uF.exports;const Ec=Ht(dF),tfe=vD({__proto__:null,default:Ec},[dF]);function Gf(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const n=e.RTCIceCandidate;e.RTCIceCandidate=function(s){if(typeof s=="object"&&s.candidate&&s.candidate.indexOf("a=")===0&&(s=JSON.parse(JSON.stringify(s)),s.candidate=s.candidate.substring(2)),s.candidate&&s.candidate.length){const a=new n(s),i=Ec.parseCandidate(s.candidate);for(const o in i)o in a||Object.defineProperty(a,o,{value:i[o]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new n(s)},e.RTCIceCandidate.prototype=n.prototype,gl(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Ox(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||gl(e,"icecandidate",n=>{if(n.candidate){const r=Ec.parseCandidate(n.candidate.candidate);r.type==="relay"&&(n.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return n})}function Wf(e,n){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(c){if(!c||!c.sdp)return!1;const A=Ec.splitSections(c.sdp);return A.shift(),A.some(u=>{const h=Ec.parseMLine(u);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},s=function(c){const A=c.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(A===null||A.length<2)return-1;const u=parseInt(A[1],10);return u!==u?-1:u},a=function(c){let A=65536;return n.browser==="firefox"&&(n.version<57?c===-1?A=16384:A=2147483637:n.version<60?A=n.version===57?65535:65536:A=2147483637),A},i=function(c,A){let u=65536;n.browser==="firefox"&&n.version===57&&(u=65535);const h=Ec.matchPrefix(c.sdp,"a=max-message-size:");return h.length>0?u=parseInt(h[0].substring(19),10):n.browser==="firefox"&&A!==-1&&(u=2147483637),u},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,n.browser==="chrome"&&n.version>=76){const{sdpSemantics:A}=this.getConfiguration();A==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const A=s(arguments[0]),u=a(A),h=i(arguments[0],A);let d;u===0&&h===0?d=Number.POSITIVE_INFINITY:u===0||h===0?d=Math.max(u,h):d=Math.min(u,h);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function Vf(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function n(s,a){const i=s.send;s.send=function(){const c=arguments[0],A=c.length||c.size||c.byteLength;if(s.readyState==="open"&&a.sctp&&A>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return i.apply(s,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const a=r.apply(this,arguments);return n(a,this),a},gl(e,"datachannel",s=>(n(s.channel,s.target),s))}function Lx(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype;Object.defineProperty(n,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const s=n[r];n[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const i=a.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const o=new Event("connectionstatechange",a);i.dispatchEvent(o)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),s.apply(this,arguments)}})}function Hx(e,n){if(!e.RTCPeerConnection||n.browser==="chrome"&&n.version>=71||n.browser==="safari"&&n._safariVersion>=13.1)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const i=a.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&a instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:a.type,sdp:i}):a.sdp=i}return r.apply(this,arguments)}}function qf(e,n){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(n.browser==="chrome"&&n.version<78||n.browser==="firefox"&&n.version<68||n.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Xf(e,n){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return r.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?r.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>r.apply(this,[o]))})}const nfe=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Hx,shimAddIceCandidateNullOrEmpty:qf,shimConnectionState:Lx,shimMaxMessageSize:Wf,shimParameterlessSetLocalDescription:Xf,shimRTCIceCandidate:Gf,shimRTCIceCandidateRelayProtocol:Ox,shimSendThrowTypeError:Vf},Symbol.toStringTag,{value:"Module"}));function rfe({window:e}={},n={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=QT,s=Zhe(e),a={browserDetails:s,commonShim:nfe,extractVersion:lu,disableLog:Yhe,disableWarnings:Jhe,sdp:tfe};switch(s.browser){case"chrome":if(!W5||!Rx||!n.shimChrome)return r("Chrome shim is not included in this adapter release."),a;if(s.version===null)return r("Chrome shim can not determine version, not shimming."),a;r("adapter.js shimming chrome."),a.browserShim=W5,qf(e,s),Xf(e),DT(e,s),RT(e),Rx(e,s),$T(e),zT(e,s),OT(e),LT(e),KT(e,s),Gf(e),Ox(e),Lx(e),Wf(e,s),Vf(e),Hx(e,s);break;case"firefox":if(!V5||!$x||!n.shimFirefox)return r("Firefox shim is not included in this adapter release."),a;r("adapter.js shimming firefox."),a.browserShim=V5,qf(e,s),Xf(e),GT(e,s),$x(e,s),WT(e),XT(e),VT(e),qT(e),YT(e),JT(e),ZT(e),eF(e),tF(e),Gf(e),Lx(e),Wf(e,s),Vf(e);break;case"safari":if(!q5||!n.shimSafari)return r("Safari shim is not included in this adapter release."),a;r("adapter.js shimming safari."),a.browserShim=q5,qf(e,s),Xf(e),oF(e),cF(e),sF(e),nF(e),rF(e),lF(e),aF(e),AF(e),Gf(e),Ox(e),Wf(e,s),Vf(e),Hx(e,s);break;default:r("Unsupported browser!");break}return a}const X5=rfe({window:typeof window>"u"?void 0:window});function ml(e,n,r,s){Object.defineProperty(e,n,{get:r,set:s,enumerable:!0,configurable:!0})}class hF{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=n=>{const r=[],s=n.byteLength,a=Math.ceil(s/this.chunkedMTU);let i=0,o=0;for(;o<s;){const c=Math.min(s,o+this.chunkedMTU),A=n.slice(o,c),u={__peerData:this._dataCount,n:i,data:A,total:a};r.push(u),o=c,i++}return this._dataCount++,r}}}function sfe(e){let n=0;for(const a of e)n+=a.byteLength;const r=new Uint8Array(n);let s=0;for(const a of e)r.set(a,s),s+=a.byteLength;return r}const Sy=X5.default||X5,MA=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const e=this.getBrowser(),n=this.getVersion();return this.supportedBrowsers.includes(e)?e==="chrome"?n>=this.minChromeVersion:e==="firefox"?n>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1}getBrowser(){return Sy.browserDetails.browser}getVersion(){return Sy.browserDetails.version||0}isUnifiedPlanSupported(){const e=this.getBrowser(),n=Sy.browserDetails.version||0;if(e==="chrome"&&n<this.minChromeVersion)return!1;if(e==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,s=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),s=!0}catch{}finally{r&&r.close()}return s}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},afe=e=>!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),fF=()=>Math.random().toString(36).slice(2),Y5={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class ife extends hF{noop(){}blobToArrayBuffer(n,r){const s=new FileReader;return s.onload=function(a){a.target&&r(a.target.result)},s.readAsArrayBuffer(n),s}binaryStringToArrayBuffer(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s)&255;return r.buffer}isSecure(){return location.protocol==="https:"}constructor(...n){super(...n),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Y5,this.browser=MA.getBrowser(),this.browserVersion=MA.getVersion(),this.pack=UT,this.unpack=FT,this.supports=function(){const r={browser:MA.isBrowserSupported(),webRTC:MA.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;let s;try{s=new RTCPeerConnection(Y5),r.audioVideo=!0;let a;try{a=s.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!a.ordered;try{a.binaryType="blob",r.binaryBlob=!MA.isIOS}catch{}}catch{}finally{a&&a.close()}}catch{}finally{s&&s.close()}return r}(),this.validateId=afe,this.randomToken=fF}}const vr=new ife,ofe="PeerJS: ";var J5;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(J5||(J5={}));class lfe{get logLevel(){return this._logLevel}set logLevel(n){this._logLevel=n}log(...n){this._logLevel>=3&&this._print(3,...n)}warn(...n){this._logLevel>=2&&this._print(2,...n)}error(...n){this._logLevel>=1&&this._print(1,...n)}setLogFunction(n){this._print=n}_print(n,...r){const s=[ofe,...r];for(const a in s)s[a]instanceof Error&&(s[a]="("+s[a].name+") "+s[a].message);n>=3?console.log(...s):n>=2?console.warn("WARNING",...s):n>=1&&console.error("ERROR",...s)}constructor(){this._logLevel=0}}var Qe=new lfe,e_={},cfe=Object.prototype.hasOwnProperty,dr="~";function vd(){}Object.create&&(vd.prototype=Object.create(null),new vd().__proto__||(dr=!1));function Afe(e,n,r){this.fn=e,this.context=n,this.once=r||!1}function gF(e,n,r,s,a){if(typeof r!="function")throw new TypeError("The listener must be a function");var i=new Afe(r,s||e,a),o=dr?dr+n:n;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],i]:e._events[o].push(i):(e._events[o]=i,e._eventsCount++),e}function Yf(e,n){--e._eventsCount===0?e._events=new vd:delete e._events[n]}function er(){this._events=new vd,this._eventsCount=0}er.prototype.eventNames=function(){var n=[],r,s;if(this._eventsCount===0)return n;for(s in r=this._events)cfe.call(r,s)&&n.push(dr?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(r)):n};er.prototype.listeners=function(n){var r=dr?dr+n:n,s=this._events[r];if(!s)return[];if(s.fn)return[s.fn];for(var a=0,i=s.length,o=new Array(i);a<i;a++)o[a]=s[a].fn;return o};er.prototype.listenerCount=function(n){var r=dr?dr+n:n,s=this._events[r];return s?s.fn?1:s.length:0};er.prototype.emit=function(n,r,s,a,i,o){var c=dr?dr+n:n;if(!this._events[c])return!1;var A=this._events[c],u=arguments.length,h,d;if(A.fn){switch(A.once&&this.removeListener(n,A.fn,void 0,!0),u){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,r),!0;case 3:return A.fn.call(A.context,r,s),!0;case 4:return A.fn.call(A.context,r,s,a),!0;case 5:return A.fn.call(A.context,r,s,a,i),!0;case 6:return A.fn.call(A.context,r,s,a,i,o),!0}for(d=1,h=new Array(u-1);d<u;d++)h[d-1]=arguments[d];A.fn.apply(A.context,h)}else{var f=A.length,g;for(d=0;d<f;d++)switch(A[d].once&&this.removeListener(n,A[d].fn,void 0,!0),u){case 1:A[d].fn.call(A[d].context);break;case 2:A[d].fn.call(A[d].context,r);break;case 3:A[d].fn.call(A[d].context,r,s);break;case 4:A[d].fn.call(A[d].context,r,s,a);break;default:if(!h)for(g=1,h=new Array(u-1);g<u;g++)h[g-1]=arguments[g];A[d].fn.apply(A[d].context,h)}}return!0};er.prototype.on=function(n,r,s){return gF(this,n,r,s,!1)};er.prototype.once=function(n,r,s){return gF(this,n,r,s,!0)};er.prototype.removeListener=function(n,r,s,a){var i=dr?dr+n:n;if(!this._events[i])return this;if(!r)return Yf(this,i),this;var o=this._events[i];if(o.fn)o.fn===r&&(!a||o.once)&&(!s||o.context===s)&&Yf(this,i);else{for(var c=0,A=[],u=o.length;c<u;c++)(o[c].fn!==r||a&&!o[c].once||s&&o[c].context!==s)&&A.push(o[c]);A.length?this._events[i]=A.length===1?A[0]:A:Yf(this,i)}return this};er.prototype.removeAllListeners=function(n){var r;return n?(r=dr?dr+n:n,this._events[r]&&Yf(this,r)):(this._events=new vd,this._eventsCount=0),this};er.prototype.off=er.prototype.removeListener;er.prototype.addListener=er.prototype.on;er.prefixed=dr;er.EventEmitter=er;e_=er;var pl={};ml(pl,"ConnectionType",()=>ga);ml(pl,"PeerErrorType",()=>Yt);ml(pl,"BaseConnectionErrorType",()=>xd);ml(pl,"DataConnectionErrorType",()=>wd);ml(pl,"SerializationType",()=>Vc);ml(pl,"SocketEventType",()=>ua);ml(pl,"ServerMessageType",()=>bn);var ga;(function(e){e.Data="data",e.Media="media"})(ga||(ga={}));var Yt;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(Yt||(Yt={}));var xd;(function(e){e.NegotiationFailed="negotiation-failed",e.ConnectionClosed="connection-closed"})(xd||(xd={}));var wd;(function(e){e.NotOpenYet="not-open-yet",e.MessageToBig="message-too-big"})(wd||(wd={}));var Vc;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json",e.None="raw"})(Vc||(Vc={}));var ua;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(ua||(ua={}));var bn;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(bn||(bn={}));var t_={};t_=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class ufe extends e_.EventEmitter{constructor(n,r,s,a,i,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const c=n?"wss://":"ws://";this._baseUrl=c+r+":"+s+a+"peerjs?key="+i}start(n,r){this._id=n;const s=`${this._baseUrl}&id=${n}&token=${r}`;this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+t_.version),this._disconnected=!1,this._socket.onmessage=a=>{let i;try{i=JSON.parse(a.data),Qe.log("Server message received:",i)}catch{Qe.log("Invalid server message",a.data);return}this.emit(ua.Message,i)},this._socket.onclose=a=>{this._disconnected||(Qe.log("Socket closed.",a),this._cleanup(),this._disconnected=!0,this.emit(ua.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),Qe.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){Qe.log("Cannot send heartbeat, because socket closed");return}const n=JSON.stringify({type:bn.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const n=[...this._messagesQueue];this._messagesQueue=[];for(const r of n)this.send(r)}send(n){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(ua.Error,"Invalid message");return}if(!this._wsOpen())return;const r=JSON.stringify(n);this._socket.send(r)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class mF{constructor(n){this.connection=n}startConnection(n){const r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===ga.Media&&n._stream&&this._addTracksToConnection(n._stream,r),n.originator){const s=this.connection,a={ordered:!!n.reliable},i=r.createDataChannel(s.label,a);s._initializeDataChannel(i),this._makeOffer()}else this.handleSDP("OFFER",n.sdp)}_startPeerConnection(){Qe.log("Creating RTCPeerConnection.");const n=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(n),n}_setupListeners(n){const r=this.connection.peer,s=this.connection.connectionId,a=this.connection.type,i=this.connection.provider;Qe.log("Listening for ICE candidates."),n.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(Qe.log(`Received ICE candidates for ${r}:`,o.candidate),i.socket.send({type:bn.Candidate,payload:{candidate:o.candidate,type:a,connectionId:s},dst:r}))},n.oniceconnectionstatechange=()=>{switch(n.iceConnectionState){case"failed":Qe.log("iceConnectionState is failed, closing connections to "+r),this.connection.emitError(xd.NegotiationFailed,"Negotiation of connection to "+r+" failed."),this.connection.close();break;case"closed":Qe.log("iceConnectionState is closed, closing connections to "+r),this.connection.emitError(xd.ConnectionClosed,"Connection to "+r+" closed."),this.connection.close();break;case"disconnected":Qe.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":n.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",n.iceConnectionState)},Qe.log("Listening for data channel"),n.ondatachannel=o=>{Qe.log("Received data channel");const c=o.channel;i.getConnection(r,s)._initializeDataChannel(c)},Qe.log("Listening for remote stream"),n.ontrack=o=>{Qe.log("Received remote stream");const c=o.streams[0],A=i.getConnection(r,s);if(A.type===ga.Media){const u=A;this._addStreamToMediaConnection(c,u)}}}cleanup(){Qe.log("Cleaning up PeerConnection to "+this.connection.peer);const n=this.connection.peerConnection;if(!n)return;this.connection.peerConnection=null,n.onicecandidate=n.oniceconnectionstatechange=n.ondatachannel=n.ontrack=()=>{};const r=n.signalingState!=="closed";let s=!1;const a=this.connection.dataChannel;a&&(s=!!a.readyState&&a.readyState!=="closed"),(r||s)&&n.close()}async _makeOffer(){const n=this.connection.peerConnection,r=this.connection.provider;try{const s=await n.createOffer(this.connection.options.constraints);Qe.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await n.setLocalDescription(s),Qe.log("Set localDescription:",s,`for:${this.connection.peer}`);let a={sdp:s,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===ga.Data){const i=this.connection;a={...a,label:i.label,reliable:i.reliable,serialization:i.serialization}}r.socket.send({type:bn.Offer,payload:a,dst:this.connection.peer})}catch(a){a!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(Yt.WebRTC,a),Qe.log("Failed to setLocalDescription, ",a))}}catch(s){r.emitError(Yt.WebRTC,s),Qe.log("Failed to createOffer, ",s)}}async _makeAnswer(){const n=this.connection.peerConnection,r=this.connection.provider;try{const s=await n.createAnswer();Qe.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(s.sdp=this.connection.options.sdpTransform(s.sdp)||s.sdp);try{await n.setLocalDescription(s),Qe.log("Set localDescription:",s,`for:${this.connection.peer}`),r.socket.send({type:bn.Answer,payload:{sdp:s,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(a){r.emitError(Yt.WebRTC,a),Qe.log("Failed to setLocalDescription, ",a)}}catch(s){r.emitError(Yt.WebRTC,s),Qe.log("Failed to create answer, ",s)}}async handleSDP(n,r){r=new RTCSessionDescription(r);const s=this.connection.peerConnection,a=this.connection.provider;Qe.log("Setting remote description",r);const i=this;try{await s.setRemoteDescription(r),Qe.log(`Set remoteDescription:${n} for:${this.connection.peer}`),n==="OFFER"&&await i._makeAnswer()}catch(o){a.emitError(Yt.WebRTC,o),Qe.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(n){Qe.log("handleCandidate:",n);try{await this.connection.peerConnection.addIceCandidate(n),Qe.log(`Added ICE candidate for:${this.connection.peer}`)}catch(r){this.connection.provider.emitError(Yt.WebRTC,r),Qe.log("Failed to handleCandidate, ",r)}}_addTracksToConnection(n,r){if(Qe.log(`add tracks from stream ${n.id} to peer connection`),!r.addTrack)return Qe.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");n.getTracks().forEach(s=>{r.addTrack(s,n)})}_addStreamToMediaConnection(n,r){Qe.log(`add stream ${n.id} to media connection ${r.connectionId}`),r.addStream(n)}}class pF extends e_.EventEmitter{emitError(n,r){Qe.error("Error:",r),this.emit("error",new dfe(`${n}`,r))}}class dfe extends Error{constructor(n,r){typeof r=="string"?super(r):(super(),Object.assign(this,r)),this.type=n}}class yF extends pF{get open(){return this._open}constructor(n,r,s){super(),this.peer=n,this.provider=r,this.options=s,this._open=!1,this.metadata=s.metadata}}var xw;const Ku=class Ku extends yF{get type(){return ga.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(n,r,s){super(n,r,s),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||Ku.ID_PREFIX+vr.randomToken(),this._negotiator=new mF(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(n){this.dataChannel=n,this.dataChannel.onopen=()=>{Qe.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{Qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(n){Qe.log("Receiving stream",n),this._remoteStream=n,super.emit("stream",n)}handleMessage(n){const r=n.type,s=n.payload;switch(n.type){case bn.Answer:this._negotiator.handleSDP(r,s.sdp),this._open=!0;break;case bn.Candidate:this._negotiator.handleCandidate(s.candidate);break;default:Qe.warn(`Unrecognized message type:${r} from peer:${this.peer}`);break}}answer(n,r={}){if(this._localStream){Qe.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:n});const s=this.provider._getMessages(this.connectionId);for(const a of s)this.handleMessage(a);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};xw=new WeakMap,CA(Ku,xw,Ku.ID_PREFIX="mc_");let K0=Ku;class hfe{constructor(n){this._options=n}_buildRequest(n){const r=this._options.secure?"https":"http",{host:s,port:a,path:i,key:o}=this._options,c=new URL(`${r}://${s}:${a}${i}${o}/${n}`);return c.searchParams.set("ts",`${Date.now()}${Math.random()}`),c.searchParams.set("version",t_.version),fetch(c.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const n=await this._buildRequest("id");if(n.status!==200)throw new Error(`Error. Status:${n.status}`);return n.text()}catch(n){Qe.error("Error retrieving ID",n);let r="";throw this._options.path==="/"&&this._options.host!==vr.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}}async listAllPeers(){try{const n=await this._buildRequest("peers");if(n.status!==200){if(n.status===401){let r="";throw this._options.host===vr.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${n.status}`)}return n.json()}catch(n){throw Qe.error("Error retrieving list peers",n),new Error("Could not get list peers from the server."+n)}}}var ww,bw;const Fo=class Fo extends yF{get type(){return ga.Data}constructor(n,r,s){super(n,r,s),this.connectionId=this.options.connectionId||Fo.ID_PREFIX+fF(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new mF(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(n){this.dataChannel=n,this.dataChannel.onopen=()=>{Qe.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=r=>{Qe.log(`DC#${this.connectionId} dc onmessage:`,r.data)},this.dataChannel.onclose=()=>{Qe.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(n){if(n!=null&&n.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(n,r=!1){if(!this.open){this.emitError(wd.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(n,r)}async handleMessage(n){const r=n.payload;switch(n.type){case bn.Answer:await this._negotiator.handleSDP(n.type,r.sdp);break;case bn.Candidate:await this._negotiator.handleCandidate(r.candidate);break;default:Qe.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}}};ww=new WeakMap,bw=new WeakMap,CA(Fo,ww,Fo.ID_PREFIX="dc_"),CA(Fo,bw,Fo.MAX_BUFFERED_AMOUNT=8388608);let G0=Fo;class n_ extends G0{get bufferSize(){return this._bufferSize}_initializeDataChannel(n){super._initializeDataChannel(n),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",r=>this._handleDataMessage(r))}_bufferedSend(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)}_trySend(n){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>G0.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(r){return Qe.error(`DC#:${this.connectionId} Error when sending:`,r),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(n){if(n!=null&&n.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...n){super(...n),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class ky extends n_{close(n){super.close(n),this._chunkedData={}}constructor(n,r,s){super(n,r,s),this.chunker=new hF,this.serialization=Vc.Binary,this._chunkedData={}}_handleDataMessage({data:n}){const r=FT(n),s=r.__peerData;if(s){if(s.type==="close"){this.close();return}this._handleChunk(r);return}this.emit("data",r)}_handleChunk(n){const r=n.__peerData,s=this._chunkedData[r]||{data:[],count:0,total:n.total};if(s.data[n.n]=new Uint8Array(n.data),s.count++,this._chunkedData[r]=s,s.total===s.count){delete this._chunkedData[r];const a=sfe(s.data);this._handleDataMessage({data:a})}}_send(n,r){const s=UT(n);if(s instanceof Promise)return this._send_blob(s);if(!r&&s.byteLength>this.chunker.chunkedMTU){this._sendChunks(s);return}this._bufferedSend(s)}async _send_blob(n){const r=await n;if(r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}_sendChunks(n){const r=this.chunker.chunk(n);Qe.log(`DC#${this.connectionId} Try to send ${r.length} chunks...`);for(const s of r)this.send(s,!0)}}class ffe extends n_{_handleDataMessage({data:n}){super.emit("data",n)}_send(n,r){this._bufferedSend(n)}constructor(...n){super(...n),this.serialization=Vc.None}}class gfe extends n_{_handleDataMessage({data:n}){const r=this.parse(this.decoder.decode(n)),s=r.__peerData;if(s&&s.type==="close"){this.close();return}this.emit("data",r)}_send(n,r){const s=this.encoder.encode(this.stringify(n));if(s.byteLength>=vr.chunkedMTU){this.emitError(wd.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(s)}constructor(...n){super(...n),this.serialization=Vc.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var _w;const Gu=class Gu extends pF{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const n=Object.create(null);for(const[r,s]of this._connections)n[r]=s;return n}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(n,r){super(),this._serializers={raw:ffe,json:gfe,binary:ky,"binary-utf8":ky,default:ky},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let s;if(n&&n.constructor==Object?r=n:n&&(s=n.toString()),r={debug:0,host:vr.CLOUD_HOST,port:vr.CLOUD_PORT,path:"/",key:Gu.DEFAULT_KEY,token:vr.randomToken(),config:vr.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...r},this._options=r,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==vr.CLOUD_HOST?this._options.secure=vr.isSecure():this._options.host==vr.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&Qe.setLogFunction(this._options.logFunction),Qe.logLevel=this._options.debug||0,this._api=new hfe(r),this._socket=this._createServerConnection(),!vr.supports.audioVideo&&!vr.supports.data){this._delayedAbort(Yt.BrowserIncompatible,"The current browser does not support WebRTC");return}if(s&&!vr.validateId(s)){this._delayedAbort(Yt.InvalidID,`ID "${s}" is invalid`);return}s?this._initialize(s):this._api.retrieveId().then(a=>this._initialize(a)).catch(a=>this._abort(Yt.ServerError,a))}_createServerConnection(){const n=new ufe(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return n.on(ua.Message,r=>{this._handleMessage(r)}),n.on(ua.Error,r=>{this._abort(Yt.SocketError,r)}),n.on(ua.Disconnected,()=>{this.disconnected||(this.emitError(Yt.Network,"Lost connection to server."),this.disconnect())}),n.on(ua.Close,()=>{this.disconnected||this._abort(Yt.SocketClosed,"Underlying socket is already closed.")}),n}_initialize(n){this._id=n,this.socket.start(n,this._options.token)}_handleMessage(n){const r=n.type,s=n.payload,a=n.src;switch(r){case bn.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case bn.Error:this._abort(Yt.ServerError,s.msg);break;case bn.IdTaken:this._abort(Yt.UnavailableID,`ID "${this.id}" is taken`);break;case bn.InvalidKey:this._abort(Yt.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case bn.Leave:Qe.log(`Received leave message from ${a}`),this._cleanupPeer(a),this._connections.delete(a);break;case bn.Expire:this.emitError(Yt.PeerUnavailable,`Could not connect to peer ${a}`);break;case bn.Offer:{const i=s.connectionId;let o=this.getConnection(a,i);if(o&&(o.close(),Qe.warn(`Offer received for existing Connection ID:${i}`)),s.type===ga.Media){const A=new K0(a,this,{connectionId:i,_payload:s,metadata:s.metadata});o=A,this._addConnection(a,o),this.emit("call",A)}else if(s.type===ga.Data){const A=new this._serializers[s.serialization](a,this,{connectionId:i,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});o=A,this._addConnection(a,o),this.emit("connection",A)}else{Qe.warn(`Received malformed connection type:${s.type}`);return}const c=this._getMessages(i);for(const A of c)o.handleMessage(A);break}default:{if(!s){Qe.warn(`You received a malformed message from ${a} of type ${r}`);return}const i=s.connectionId,o=this.getConnection(a,i);o&&o.peerConnection?o.handleMessage(n):i?this._storeMessage(i,n):Qe.warn("You received an unrecognized message:",n);break}}}_storeMessage(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)}_getMessages(n){const r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]}connect(n,r={}){if(r={serialization:"default",...r},this.disconnected){Qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Yt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const s=new this._serializers[r.serialization](n,this,r);return this._addConnection(n,s),s}call(n,r,s={}){if(this.disconnected){Qe.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Yt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){Qe.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const a=new K0(n,this,{...s,_stream:r});return this._addConnection(n,a),a}_addConnection(n,r){Qe.log(`add connection ${r.type}:${r.connectionId} to peerId:${n}`),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)}_removeConnection(n){const r=this._connections.get(n.peer);if(r){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}this._lostMessages.delete(n.connectionId)}getConnection(n,r){const s=this._connections.get(n);if(!s)return null;for(const a of s)if(a.connectionId===r)return a;return null}_delayedAbort(n,r){setTimeout(()=>{this._abort(n,r)},0)}_abort(n,r){Qe.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(Qe.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const n of this._connections.keys())this._cleanupPeer(n),this._connections.delete(n);this.socket.removeAllListeners()}_cleanupPeer(n){const r=this._connections.get(n);if(r)for(const s of r)s.close()}disconnect(){if(this.disconnected)return;const n=this.id;Qe.log(`Disconnect peer with ID:${n}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}reconnect(){if(this.disconnected&&!this.destroyed)Qe.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)Qe.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(n=r=>{}){this._api.listAllPeers().then(r=>n(r)).catch(r=>this._abort(Yt.ServerError,r))}};_w=new WeakMap,CA(Gu,_w,Gu.DEFAULT_KEY="peerjs");let zx=Gu;var Z5=zx;class mfe{constructor(n={}){de(this,"peer",null);de(this,"connections",new Map);de(this,"dataListeners",new Set);de(this,"connectionStateChangeHandler",null);de(this,"connectionState",{isConnecting:!1,isConnected:!1,error:null,connectionCode:null,isHost:!1,peerCount:0,detailedStatus:"Initialized"});de(this,"options");de(this,"reconnectAttempts",0);de(this,"maxReconnectAttempts",3);this.options={debug:!1,...n},n.onData&&this.dataListeners.add(n.onData),this.logConnectionStatus("P2PService initialized")}async initAsHost(){const n=this.generateConnectionCode();return this.updateState({isHost:!0,isConnecting:!0,connectionCode:n,detailedStatus:"Initializing as host"}),this.log("Generated connection code:",n),new Promise((r,s)=>{try{this.cleanupPeer();const a=setTimeout(()=>{s(new Error("PeerJS initialization timeout"))},15e3);this.peer=new Z5(n,{debug:this.options.debug?2:0}),this.peer.on("open",i=>{clearTimeout(a),this.log("Host initialized with ID:",i),this.logConnectionStatus("Host peer opened, waiting for connections"),this.setupPeerListeners(),r(i)}),this.peer.on("error",i=>{if(clearTimeout(a),i.type==="unavailable-id"){this.log("Connection code already in use, generating new one"),this.logConnectionStatus("Connection code in use, retrying"),this.initAsHost().then(r).catch(s);return}this.handleError("Failed to initialize as host",i),s(i)})}catch(a){this.handleError("Failed to initialize as host",a),s(a)}})}async connect(n){if(!n)throw new Error("Connection code is required");if(n=n.trim().toUpperCase(),this.connectionState.isConnected&&this.connectionState.connectionCode===n&&this.connections.size>0)if(console.log("Already connected to",n),await this.checkConnectionHealth()){console.log("Connection is healthy, no need to reconnect");return}else console.log("Connection is not healthy despite appearing connected, will reconnect"),this.cleanupPeer();return this.updateState({isHost:!1,isConnecting:!0,connectionCode:n,detailedStatus:`Connecting to host: ${n}`}),new Promise((r,s)=>{try{this.cleanupPeer();const a=setTimeout(()=>{s(new Error("PeerJS initialization timeout")),this.updateState({isConnecting:!1,error:"Connection timed out. Please try again.",detailedStatus:"Connection timeout"})},15e3);this.peer=new Z5({debug:this.options.debug?2:0}),this.peer.on("open",i=>{if(this.log("Initialized with ID:",i),this.logConnectionStatus(`Client peer opened with ID ${i}, connecting to ${n}`),this.setupPeerListeners(),!this.peer){clearTimeout(a),s(new Error("Peer connection was lost"));return}try{this.log(`Attempting to connect to host ${n}`);const o=this.peer.connect(n,{reliable:!0,serialization:"json"});this.handleOutgoingConnection(o,()=>{clearTimeout(a),r()},c=>{clearTimeout(a),s(c)})}catch(o){clearTimeout(a),this.handleError("Failed to connect to peer",o),s(o)}}),this.peer.on("error",i=>{clearTimeout(a),this.handleError("Connection error",i),s(i)})}catch(a){this.handleError("Failed to connect",a),s(a)}})}async checkConnectionHealth(){if(this.connections.size===0)return!1;try{return new Promise(n=>{const r=setTimeout(()=>{this.log("Health check timed out"),n(!1)},3e3),s=i=>{i&&i.type==="health-check-response"&&(clearTimeout(r),this.removeDataListener(s),n(!0))};this.onData(s),this.send({type:"health-check-request",timestamp:Date.now()})||(clearTimeout(r),this.removeDataListener(s),n(!1))})}catch(n){return this.log("Error during health check:",n),!1}}send(n){if(this.logConnectionStatus(`Attempting to send data, connections: ${this.connections.size}`),!this.validateConnections())return this.updateState({error:"Cannot send data: not connected to any peers",detailedStatus:"No active connections for sending"}),!1;try{let r=0;for(const s of this.connections.values())s.open?(this.log(`Sending data to peer: ${s.peer}`),s.send(n),r++):this.log(`Connection to ${s.peer} exists but is not open, skipping`);return r===0?(this.updateState({error:"Cannot send data: all connections are closed",detailedStatus:"All connections closed"}),!1):(this.log(`Successfully sent data to ${r} peer(s)`),!0)}catch(r){return this.handleError("Failed to send data",r),!1}}getState(){return{...this.connectionState}}onData(n){this.dataListeners.add(n)}removeDataListener(n){this.dataListeners.delete(n)}disconnect(){this.log("Disconnecting from all peers"),this.cleanupPeer(),this.updateState({isConnecting:!1,isConnected:!1,connectionCode:null,error:null,peerCount:0,detailedStatus:"Disconnected"})}validateConnections(){if(this.connections.size===0)return this.log("No connections in the connections map"),!1;let n=!1;for(const r of this.connections.values())if(r.open){n=!0;break}return n||this.log("No open connections found despite having connection objects"),n}setupPeerListeners(){this.peer&&(this.peer.on("connection",n=>{this.log("Incoming connection from peer:",n.peer),this.logConnectionStatus(`Incoming connection from: ${n.peer}`),this.handleIncomingConnection(n)}),this.peer.on("disconnected",()=>{this.log("Disconnected from PeerJS server"),this.logConnectionStatus("Disconnected from signaling server, attempting reconnect"),this.peer&&this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,this.log(`Attempting reconnect (${this.reconnectAttempts}/${this.maxReconnectAttempts})`),this.peer.reconnect()):this.reconnectAttempts>=this.maxReconnectAttempts&&(this.log("Max reconnect attempts reached, giving up"),this.updateState({isConnected:!1,isConnecting:!1,error:"Connection lost and could not reconnect automatically",detailedStatus:"Max reconnect attempts reached"}))}),this.peer.on("close",()=>{this.log("Peer connection closed"),this.logConnectionStatus("Peer closed"),this.updateState({isConnected:!1,isConnecting:!1,peerCount:0,detailedStatus:"Peer connection closed"})}),this.peer.on("error",n=>{this.handleError("Peer error",n)}))}handleIncomingConnection(n){this.log(`Handling incoming connection from ${n.peer}`),this.connections.set(n.peer,n),this.log(`Added connection to map, current size: ${this.connections.size}`),n.on("open",()=>{this.log("Connection opened to peer:",n.peer),this.logConnectionStatus(`Connection opened with peer: ${n.peer}`),this.updateConnectionStateFromMap()}),n.on("data",r=>{this.log("Received data from peer:",n.peer),this.notifyDataListeners(r)}),n.on("close",()=>{this.log("Connection closed from peer:",n.peer),this.logConnectionStatus(`Connection closed from peer: ${n.peer}`),this.connections.delete(n.peer),this.log(`Removed connection from map, current size: ${this.connections.size}`),this.updateConnectionStateFromMap()}),n.on("error",r=>{this.handleError(`Connection error with peer ${n.peer}`,r),this.connections.delete(n.peer),this.log(`Removed errored connection, current size: ${this.connections.size}`),this.updateConnectionStateFromMap()})}updateConnectionStateFromMap(){const n=[...this.connections.values()].filter(r=>r.open).length;this.log(`Updating connection state based on map: ${n} open connections`),this.updateState({isConnected:n>0,isConnecting:!1,error:null,peerCount:n,detailedStatus:n>0?`Connected with ${n} peer(s)`:"No active connections"})}handleOutgoingConnection(n,r,s){const a=setTimeout(()=>{s(new Error("Connection timeout"))},15e3);this.log(`Attempting outgoing connection to ${n.peer}`),n.on("open",()=>{clearTimeout(a),this.log("Connection opened to host:",n.peer),this.logConnectionStatus(`Connection opened to host: ${n.peer}`),this.connections.set(n.peer,n),this.log(`Added connection to map, current size: ${this.connections.size}`),this.updateConnectionStateFromMap(),r()}),n.on("data",i=>{this.log("Received data from host:",n.peer),this.notifyDataListeners(i)}),n.on("close",()=>{this.log("Connection closed from host:",n.peer),this.logConnectionStatus(`Connection closed from host: ${n.peer}`),this.connections.delete(n.peer),this.log(`Removed connection from map, current size: ${this.connections.size}`),this.updateConnectionStateFromMap()}),n.on("error",i=>{clearTimeout(a),this.handleError(`Connection error with host ${n.peer}`,i),this.connections.delete(n.peer),this.log(`Removed errored connection, current size: ${this.connections.size}`),this.updateConnectionStateFromMap(),s(i instanceof Error?i:new Error(String(i)))})}cleanupPeer(){this.log(`Cleaning up peer and ${this.connections.size} connections`);for(const n of this.connections.values())try{this.log(`Closing connection to ${n.peer}`),n.close()}catch(r){this.log(`Error closing connection: ${r}`)}if(this.connections.clear(),this.log("Cleared all connections from map"),this.peer){try{this.log("Destroying peer instance"),this.peer.destroy()}catch(n){this.log(`Error destroying peer: ${n}`)}this.peer=null}this.reconnectAttempts=0}handleError(n,r){let s,a;if(r&&typeof r=="object"&&r.type)switch(r.type){case"peer-unavailable":s=`${n}: The connection code is invalid or the host is no longer available`,a="Host unavailable";break;case"disconnected":s=`${n}: Connection to signaling server lost`,a="Signaling server disconnected";break;case"server-error":s=`${n}: WebRTC server error`,a="WebRTC server error";break;case"socket-error":s=`${n}: Network connection issue`,a="Network connection issue";break;case"socket-closed":s=`${n}: Connection closed unexpectedly`,a="Connection closed unexpectedly";break;default:s=`${n}: ${r.type||r.message||"Unknown error"}`,a=`Error: ${r.type||"Unknown"}`}else s=`${n}: ${(r==null?void 0:r.message)||r||"Unknown error"}`,a="Unknown error occurred";this.log("ERROR:",s,r),this.updateState({isConnecting:!1,error:s,detailedStatus:a})}set onConnectionStateChange(n){this.connectionStateChangeHandler=n}updateState(n){this.connectionState={...this.connectionState,...n},(n.isConnected!==void 0||n.isConnecting!==void 0||n.error!==void 0||n.peerCount!==void 0)&&this.log(`State updated: connected=${this.connectionState.isConnected}, connecting=${this.connectionState.isConnecting}, peers=${this.connectionState.peerCount}, error=${this.connectionState.error?"yes":"no"}`),this.options.onConnectionStateChange&&this.options.onConnectionStateChange(this.connectionState),this.connectionStateChangeHandler&&this.connectionStateChangeHandler(this.connectionState)}notifyDataListeners(n){this.dataListeners.forEach(r=>{try{r(n)}catch(s){this.log("Error in data listener:",s)}})}generateConnectionCode(n=6){const r="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let s="";for(let a=0;a<n;a++){const i=Math.floor(Math.random()*r.length);s+=r[i]}return s}logConnectionStatus(n){this.log(`CONNECTION STATUS: ${n} (connections: ${this.connections.size}, connected: ${this.connectionState.isConnected})`)}log(...n){(n[0]==="ERROR:"||this.options.debug)&&console.log("[P2PService]",...n)}}class pfe{constructor(n){de(this,"p2pService");de(this,"onProgressCallback",null);de(this,"chunkSize",10*1024);de(this,"syncInProgress",!1);de(this,"receivedChunks",new Map);de(this,"totalExpectedChunks",0);de(this,"transferStartTime",0);de(this,"currentOperationId",null);de(this,"currentProgress",{percent:0,status:"idle",message:"Ready to sync"});de(this,"retryCount",0);de(this,"maxRetries",5);de(this,"chunkRetryCount",new Map);de(this,"maxChunkRetries",3);de(this,"healthcheckInterval",null);this.p2pService=n,console.log("[DatabaseSyncService] Initialized"),this.p2pService.onData(this.handleSyncMessage.bind(this))}async requestData(){console.log("[DatabaseSyncService] requestData called");const n=this.p2pService.getState();if(console.log("[DatabaseSyncService] Current connection state:",n.isConnected?"connected":"disconnected","peers:",n.peerCount),!n.isConnected)throw console.error("[DatabaseSyncService] Not connected to any peers"),this.updateProgress({percent:0,status:"error",message:"Not connected to any peers",error:"Connection is not active"}),new Error("Not connected to any peers");if(this.syncInProgress)throw console.error("[DatabaseSyncService] Sync already in progress"),this.updateProgress({percent:0,status:"error",message:"Sync already in progress",error:"Sync operation is already running"}),new Error("Sync already in progress");if(!await this.performConnectionHealthCheck())throw console.error("[DatabaseSyncService] Connection health check failed"),this.updateProgress({percent:0,status:"error",message:"Connection health check failed. Try disconnecting and reconnecting.",error:"Connection health check failed"}),new Error("Connection health check failed");if(this.syncInProgress=!0,this.currentOperationId=this.generateOperationId(),this.retryCount=0,console.log("[DatabaseSyncService] Starting data request with operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"awaiting-confirmation",message:"Waiting for the other device to approve data request",isDataRequest:!0}),!this.p2pService.send({type:"db-sync-request-data",payload:{operationId:this.currentOperationId}}))throw console.error("[DatabaseSyncService] Failed to send data request"),this.syncInProgress=!1,this.currentOperationId=null,this.updateProgress({percent:0,status:"error",message:"Failed to send data request. Try reconnecting.",error:"Message sending failed"}),new Error("Failed to send data request");this.startHealthcheckInterval()}async sendData(){console.log("[DatabaseSyncService] sendData called");const n=this.p2pService.getState();if(console.log("[DatabaseSyncService] Current connection state:",n.isConnected?"connected":"disconnected","peers:",n.peerCount),!n.isConnected)throw console.error("[DatabaseSyncService] Not connected to any peers"),this.updateProgress({percent:0,status:"error",message:"Not connected to any peers",error:"Connection is not active"}),new Error("Not connected to any peers");if(this.syncInProgress)throw console.error("[DatabaseSyncService] Sync already in progress"),this.updateProgress({percent:0,status:"error",message:"Sync already in progress",error:"Sync operation is already running"}),new Error("Sync already in progress");if(!await this.performConnectionHealthCheck())throw console.error("[DatabaseSyncService] Connection health check failed"),this.updateProgress({percent:0,status:"error",message:"Connection health check failed. Try disconnecting and reconnecting.",error:"Connection health check failed"}),new Error("Connection health check failed");if(this.syncInProgress=!0,this.currentOperationId=this.generateOperationId(),this.retryCount=0,this.chunkRetryCount.clear(),console.log("[DatabaseSyncService] Starting data send with operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"awaiting-confirmation",message:"Waiting for the other device to accept data",isDataRequest:!1}),!this.p2pService.send({type:"db-sync-send-data-request",payload:{operationId:this.currentOperationId}}))throw console.error("[DatabaseSyncService] Failed to send data request"),this.syncInProgress=!1,this.currentOperationId=null,this.updateProgress({percent:0,status:"error",message:"Failed to send data request. Try reconnecting.",error:"Message sending failed"}),new Error("Failed to send data request");this.startHealthcheckInterval()}async performConnectionHealthCheck(){return new Promise(n=>{console.log("[DatabaseSyncService] Performing connection health check");const r=setTimeout(()=>{console.error("[DatabaseSyncService] Health check timed out"),this.p2pService.removeDataListener(s),n(!1)},8e3),s=i=>{i&&i.type==="db-sync-healthcheck-response"&&(console.log("[DatabaseSyncService] Received health check response in listener"),clearTimeout(r),this.p2pService.removeDataListener(s),n(!0))};this.p2pService.onData(s),this.p2pService.send({type:"db-sync-healthcheck"})||(console.error("[DatabaseSyncService] Failed to send health check"),clearTimeout(r),this.p2pService.removeDataListener(s),n(!1))})}startHealthcheckInterval(){this.stopHealthcheckInterval(),this.healthcheckInterval=setInterval(()=>{this.syncInProgress&&(this.currentProgress.status==="awaiting-confirmation"||this.currentProgress.status==="pending-confirmation")?(console.log("[DatabaseSyncService] Performing periodic health check"),this.performConnectionHealthCheck().then(n=>{if(n)this.retryCount=0;else{if(console.error("[DatabaseSyncService] Periodic health check failed"),this.retryCount<this.maxRetries){this.retryCount++,console.log(`[DatabaseSyncService] Retrying health check (${this.retryCount}/${this.maxRetries})`),this.updateProgress({percent:0,status:"reconnecting",message:`Connection issue detected, retrying (${this.retryCount}/${this.maxRetries})...`,isDataRequest:this.currentProgress.isDataRequest});return}(this.currentProgress.status==="awaiting-confirmation"||this.currentProgress.status==="pending-confirmation")&&(this.updateProgress({percent:0,status:"error",message:"Connection was lost while waiting for confirmation",error:"Connection health check failed after multiple attempts"}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval())}})):this.stopHealthcheckInterval()},2e4)}stopHealthcheckInterval(){this.healthcheckInterval&&(clearInterval(this.healthcheckInterval),this.healthcheckInterval=null)}confirmDataOperation(){if(console.log("[DatabaseSyncService] confirmDataOperation called, current status:",this.currentProgress.status),this.currentProgress.status==="pending-confirmation"){const n=this.p2pService.getState();if(!n.isConnected||n.peerCount===0){console.error("[DatabaseSyncService] Cannot confirm - connection lost");const s=n.connectionCode;s?this.attemptReconnection(s).then(a=>{a?(console.log("[DatabaseSyncService] Reconnection successful, retrying confirm"),setTimeout(()=>this.confirmDataOperation(),1e3)):(this.updateProgress({percent:0,status:"error",message:"Connection lost and reconnection failed. Please try again.",error:"Reconnection failed"}),this.syncInProgress=!1,this.currentOperationId=null)}):(this.updateProgress({percent:0,status:"error",message:"Connection lost. Please reconnect and try again.",error:"Connection lost"}),this.syncInProgress=!1,this.currentOperationId=null);return}if(this.currentProgress.isDataRequest)console.log("[DatabaseSyncService] Confirming data request, sending data"),this.handleSendDataAfterConfirmation();else{if(console.log("[DatabaseSyncService] Confirming data send request, ready to receive"),!this.p2pService.send({type:"db-sync-send-data-confirm",payload:{operationId:this.currentOperationId}})){console.error("[DatabaseSyncService] Failed to send confirmation");const a=this.p2pService.getState().connectionCode;if(a){this.attemptReconnection(a).then(i=>{i?(console.log("[DatabaseSyncService] Reconnection successful, retrying confirm"),setTimeout(()=>this.confirmDataOperation(),1e3)):(this.updateProgress({percent:0,status:"error",message:"Failed to send confirmation and reconnection failed. Please try again.",error:"Confirmation failed"}),this.syncInProgress=!1,this.currentOperationId=null)});return}this.updateProgress({percent:0,status:"error",message:"Failed to send confirmation. Try reconnecting.",error:"Message sending failed"}),this.syncInProgress=!1,this.currentOperationId=null;return}this.updateProgress({percent:0,status:"preparing",message:"Preparing to receive data"})}}else console.warn("[DatabaseSyncService] confirmDataOperation called when not in pending-confirmation state")}async attemptReconnection(n){this.updateProgress({percent:0,status:"reconnecting",message:"Connection lost - attempting to reconnect..."}),console.log(`[DatabaseSyncService] Attempting to reconnect with code: ${n}`);try{const r=this.p2pService.getState();if(r.isConnected&&r.peerCount>0)return console.log("[DatabaseSyncService] Already connected, no need to reconnect"),!0;for(let s=1;s<=3;s++){console.log(`[DatabaseSyncService] Reconnection attempt ${s}/3`),s>1&&await new Promise(a=>setTimeout(a,1e3*s));try{await this.p2pService.connect(n);const a=this.p2pService.getState();if(a.isConnected&&a.peerCount>0)return console.log("[DatabaseSyncService] Reconnection successful"),!0}catch(a){console.error(`[DatabaseSyncService] Reconnection attempt ${s} failed:`,a)}}return console.error("[DatabaseSyncService] All reconnection attempts failed"),!1}catch(r){return console.error("[DatabaseSyncService] Error during reconnection:",r),!1}}rejectDataOperation(){console.log("[DatabaseSyncService] rejectDataOperation called, current status:",this.currentProgress.status),this.currentProgress.status==="pending-confirmation"?this.currentProgress.isDataRequest?(console.log("[DatabaseSyncService] Rejecting data request"),this.p2pService.send({type:"db-sync-request-reject",payload:{operationId:this.currentOperationId}})||console.warn("[DatabaseSyncService] Failed to send rejection, but continuing with local state reset")):(console.log("[DatabaseSyncService] Rejecting data send request"),this.p2pService.send({type:"db-sync-send-data-reject",payload:{operationId:this.currentOperationId}})||console.warn("[DatabaseSyncService] Failed to send rejection, but continuing with local state reset")):this.currentProgress.status==="awaiting-confirmation"?console.log("[DatabaseSyncService] Cancelling our own operation while awaiting confirmation"):console.warn("[DatabaseSyncService] rejectDataOperation called when not in expected state"),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"idle",message:"Ready to sync"})}onProgress(n){this.onProgressCallback=n}handleSyncMessage(n){var r,s,a;if(!n||!n.type){console.warn("[DatabaseSyncService] Received malformed message:",n);return}switch(console.log("[DatabaseSyncService] Received message type:",n.type),n.type){case"db-sync-healthcheck":console.log("[DatabaseSyncService] Responding to health check"),this.p2pService.send({type:"db-sync-healthcheck-response"});break;case"db-sync-healthcheck-response":console.log("[DatabaseSyncService] Received health check response");break;case"db-sync-request-data":this.handleDataRequest(n.payload);break;case"db-sync-request-confirm":this.handleDataRequestConfirmation(n.payload);break;case"db-sync-request-reject":this.handleDataRequestRejection(n.payload);break;case"db-sync-send-data-request":this.handleSendDataRequest(n.payload);break;case"db-sync-send-data-confirm":this.handleSendDataConfirmation(n.payload);break;case"db-sync-send-data-reject":this.handleSendDataRejection(n.payload);break;case"db-sync-data":this.handleDirectData(n.payload);break;case"db-sync-chunk":this.handleDataChunk(n);break;case"db-sync-chunk-ack":console.log("[DatabaseSyncService] Received chunk acknowledgment");break;case"db-sync-error":console.error("[DatabaseSyncService] Received error from peer:",(r=n.payload)==null?void 0:r.message),this.updateProgress({percent:0,status:"error",message:`Peer error: ${((s=n.payload)==null?void 0:s.message)||"Unknown error"}`,error:(a=n.payload)==null?void 0:a.message}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval();break;case"db-sync-info":console.log("[DatabaseSyncService] Info from peer:",n.payload);break;default:console.warn("[DatabaseSyncService] Received unknown message type:",n.type)}}handleDataRequest(n){if(console.log("[DatabaseSyncService] Handling data request:",n),this.syncInProgress){console.warn("[DatabaseSyncService] Rejecting data request because sync is already in progress"),this.p2pService.send({type:"db-sync-request-reject",payload:{operationId:n==null?void 0:n.operationId,message:"Sync already in progress"}});return}this.syncInProgress=!0,this.currentOperationId=n==null?void 0:n.operationId,console.log("[DatabaseSyncService] Set up for data request, operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"pending-confirmation",message:"The connected device is requesting your match data",isDataRequest:!0})}handleDataRequestConfirmation(n){if(console.log("[DatabaseSyncService] Handling data request confirmation:",n),(n==null?void 0:n.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received confirmation for unknown operation:",n==null?void 0:n.operationId);return}this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"preparing",message:"Request approved, receiving data..."})}handleDataRequestRejection(n){if(console.log("[DatabaseSyncService] Handling data request rejection:",n),(n==null?void 0:n.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received rejection for unknown operation:",n==null?void 0:n.operationId);return}this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"error",message:"Data request was declined by the other device",error:"Request rejected by peer"}),this.syncInProgress=!1,this.currentOperationId=null}handleSendDataRequest(n){if(console.log("[DatabaseSyncService] Handling send data request:",n),this.syncInProgress){console.warn("[DatabaseSyncService] Rejecting send data request because sync is already in progress"),this.p2pService.send({type:"db-sync-send-data-reject",payload:{operationId:n==null?void 0:n.operationId,message:"Sync already in progress"}});return}this.syncInProgress=!0,this.currentOperationId=n==null?void 0:n.operationId,console.log("[DatabaseSyncService] Set up for send data request, operation ID:",this.currentOperationId),this.updateProgress({percent:0,status:"pending-confirmation",message:"The connected device wants to send you match data",isDataRequest:!1})}handleSendDataConfirmation(n){if(console.log("[DatabaseSyncService] Handling send data confirmation:",n),(n==null?void 0:n.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received confirmation for unknown operation:",n==null?void 0:n.operationId);return}this.stopHealthcheckInterval(),this.handleSendDataAfterConfirmation()}handleSendDataRejection(n){if(console.log("[DatabaseSyncService] Handling send data rejection:",n),(n==null?void 0:n.operationId)!==this.currentOperationId){console.warn("[DatabaseSyncService] Received rejection for unknown operation:",n==null?void 0:n.operationId);return}this.stopHealthcheckInterval(),this.updateProgress({percent:0,status:"error",message:"Your data send was declined by the other device",error:"Send request rejected by peer"}),this.syncInProgress=!1,this.currentOperationId=null}async handleSendDataAfterConfirmation(){console.log("[DatabaseSyncService] Handling send data after confirmation"),this.transferStartTime=Date.now(),this.updateProgress({percent:0,status:"preparing",message:"Preparing database for export"});try{this.chunkRetryCount.clear(),console.log("[DatabaseSyncService] Exporting database data");const n=await Pe.exportData(),r=JSON.stringify(n);console.log(`[DatabaseSyncService] Exported data size: ${this.formatDataSize(r.length)}`),console.log("[DatabaseSyncService] Using chunked transfer for data sending"),await this.sendLargeData(r),setTimeout(()=>{this.syncInProgress=!1,this.currentOperationId=null},3e3)}catch(n){if(console.error("[DatabaseSyncService] Error handling data send:",n),this.p2pService.send({type:"db-sync-error",payload:{message:`Export error: ${n}`}}),this.retryCount<this.maxRetries)if(this.retryCount++,console.log(`[DatabaseSyncService] Retrying entire send operation (${this.retryCount}/${this.maxRetries})`),this.updateProgress({percent:0,status:"reconnecting",message:`Connection issue, retrying entire operation (${this.retryCount}/${this.maxRetries})...`}),await this.performConnectionHealthCheck()){setTimeout(()=>{this.handleSendDataAfterConfirmation()},2e3);return}else console.error("[DatabaseSyncService] Connection health check failed before retry");this.updateProgress({percent:0,status:"error",message:`Error preparing or sending data: ${n}`,error:String(n)}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval()}}async sendLargeData(n){try{const r=Math.ceil(n.length/this.chunkSize);let s=0;console.log(`[DatabaseSyncService] Preparing to send data in ${r} chunks (${this.formatDataSize(n.length)})`),this.updateProgress({percent:10,status:"sending",message:`Preparing to send data in ${r} chunks (${this.formatDataSize(n.length)})`});for(let a=0;a<r;a++){const i=a*this.chunkSize,o=Math.min(n.length,i+this.chunkSize),c=n.substring(i,o);let A=this.chunkRetryCount.get(a)||0,u=!1;for(;!u&&A<this.maxChunkRetries;){console.log(`[DatabaseSyncService] Sending chunk ${a+1}/${r} (attempt ${A+1}/${this.maxChunkRetries})`);try{if(A>0&&!await this.performConnectionHealthCheck())throw console.error(`[DatabaseSyncService] Connection health check failed before sending chunk ${a+1}`),new Error("Connection health check failed");if(!this.p2pService.send({type:"db-sync-chunk",chunkId:a,totalChunks:r,payload:c,isLast:a===r-1}))throw console.error(`[DatabaseSyncService] Failed to send chunk ${a+1}/${r}`),new Error(`Failed to send chunk ${a+1}/${r}`);u=!0,s++,this.updateProgress({percent:10+Math.floor(s/r*80),status:"sending",message:`Sending data: chunk ${s}/${r}`})}catch(h){if(A++,this.chunkRetryCount.set(a,A),console.error(`[DatabaseSyncService] Error sending chunk ${a+1}, attempt ${A}:`,h),A<this.maxChunkRetries){this.updateProgress({percent:10+Math.floor(s/r*80),status:"reconnecting",message:`Retrying chunk ${a+1}/${r} (attempt ${A}/${this.maxChunkRetries})...`});const d=500*A;console.log(`[DatabaseSyncService] Waiting ${d}ms before retry...`),await new Promise(f=>setTimeout(f,d))}else throw console.error(`[DatabaseSyncService] Max retries exceeded for chunk ${a+1}`),new Error(`Failed to send chunk ${a+1} after ${A} attempts`)}}a<r-1&&await new Promise(h=>setTimeout(h,200))}console.log(`[DatabaseSyncService] Successfully sent all ${s} chunks`),this.updateProgress({percent:100,status:"complete",message:`Data sent successfully in ${s} chunks (${this.formatDataSize(n.length)})`})}catch(r){console.error("[DatabaseSyncService] Error sending large data:",r);try{this.p2pService.send({type:"db-sync-error",payload:{message:`Send error: ${r}`}})}catch{}throw r}}async handleDirectData(n){console.log("[DatabaseSyncService] Handling direct data transfer"),this.updateProgress({percent:50,status:"receiving",message:"Received data, processing..."});try{await this.importAndMergeData(n),this.updateProgress({percent:100,status:"complete",message:"Data received and merged successfully"}),setTimeout(()=>{this.syncInProgress=!1,this.currentOperationId=null},3e3)}catch(r){console.error("[DatabaseSyncService] Error handling direct data:",r),this.updateProgress({percent:0,status:"error",message:`Error importing data: ${r}`,error:String(r)}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval()}}handleDataChunk(n){if(n.chunkId===void 0||n.totalChunks===void 0||!n.payload){console.warn("[DatabaseSyncService] Received malformed chunk message");return}console.log(`[DatabaseSyncService] Received chunk ${n.chunkId+1}/${n.totalChunks}`),this.totalExpectedChunks=n.totalChunks,this.receivedChunks.set(n.chunkId,n.payload);const r=Math.floor(this.receivedChunks.size/this.totalExpectedChunks*100);this.updateProgress({percent:r*.8,status:"receiving",message:`Receiving data: ${this.receivedChunks.size}/${this.totalExpectedChunks} chunks`}),this.receivedChunks.size===this.totalExpectedChunks&&(console.log("[DatabaseSyncService] All chunks received, reassembling"),this.reassembleAndProcessChunks())}async reassembleAndProcessChunks(){try{this.updateProgress({percent:80,status:"processing",message:"Reassembling data chunks..."});let n="";for(let s=0;s<this.totalExpectedChunks;s++){const a=this.receivedChunks.get(s);if(!a)throw new Error(`Missing chunk ${s}`);n+=a}console.log(`[DatabaseSyncService] Reassembled data size: ${this.formatDataSize(n.length)}`),console.log("[DatabaseSyncService] Parsing JSON data");const r=JSON.parse(n);this.updateProgress({percent:85,status:"processing",message:"Processing and merging data..."}),await this.importAndMergeData(r),this.updateProgress({percent:100,status:"complete",message:`Data received and merged successfully (${this.formatDataSize(n.length)})`}),this.receivedChunks.clear(),this.totalExpectedChunks=0,setTimeout(()=>{this.syncInProgress=!1,this.currentOperationId=null},3e3)}catch(n){console.error("[DatabaseSyncService] Error reassembling chunks:",n),this.updateProgress({percent:0,status:"error",message:`Error processing received data: ${n}`,error:String(n)}),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval(),this.receivedChunks.clear(),this.totalExpectedChunks=0}}async importAndMergeData(n){try{this.validateExportData(n),console.log("[DatabaseSyncService] Importing data with merge mode"),await Pe.importData(n,"merge");const r=((Date.now()-this.transferStartTime)/1e3).toFixed(1);console.log(`[DatabaseSyncService] Data merged successfully in ${r}s`),this.updateProgress({percent:100,status:"complete",message:`Data successfully merged in ${r}s`})}catch(r){throw console.error("[DatabaseSyncService] Error importing data:",r),this.syncInProgress=!1,this.currentOperationId=null,this.stopHealthcheckInterval(),r}}validateExportData(n){if(!n)throw new Error("No data received");if(console.log("[DatabaseSyncService] Validating export data structure"),!n.players||!Array.isArray(n.players)||!n.matches||!Array.isArray(n.matches)||!n.matchPlayers||!Array.isArray(n.matchPlayers))throw new Error("Invalid data format: missing required collections");console.log("[DatabaseSyncService] Export data validation passed"),console.log(`[DatabaseSyncService] Data contains: ${n.players.length} players, ${n.matches.length} matches, ${n.matchPlayers.length} match players`)}formatDataSize(n){return n<1024?`${n} bytes`:n<1024*1024?`${(n/1024).toFixed(1)} KB`:`${(n/(1024*1024)).toFixed(1)} MB`}updateProgress(n){console.log(`[DatabaseSyncService] Progress update: ${n.status} - ${n.message}`),this.currentProgress=n,this.onProgressCallback&&this.onProgressCallback(n)}generateOperationId(){return"op_"+Date.now().toString(36)+Math.random().toString(36).substring(2,7)}}const Jf={percent:0,status:"idle",message:"Ready to sync"},vF=S.createContext({connectionState:{isConnecting:!1,isConnected:!1,error:null,connectionCode:null,isHost:!1,peerCount:0},syncProgress:Jf,initAsHost:async()=>"",connect:async()=>{},disconnect:()=>{},sendData:async()=>{},requestData:async()=>{},confirmDataOperation:()=>{},rejectDataOperation:()=>{}}),xF=()=>S.useContext(vF),yfe=({children:e,onDataReceived:n,onSyncCompleted:r,debug:s=!1})=>{const[a]=S.useState(()=>(console.log("[ConnectionContext] Initializing P2PService"),new mfe({debug:s,onData:v=>{console.log("[ConnectionContext] Data received from peer"),n&&n(v)}}))),[i]=S.useState(()=>(console.log("[ConnectionContext] Initializing DatabaseSyncService"),new pfe(a))),[o,c]=S.useState(a.getState()),[A,u]=S.useState(Jf),h=S.useCallback(v=>{console.log("[ConnectionContext] Data handler called"),n&&n(v)},[n]);S.useEffect(()=>{console.log("[ConnectionContext] Setting up event handlers");const v=_=>{console.log("[ConnectionContext] Connection state changed:",_.isConnected?"connected":"disconnected",_.isHost?"(host)":"(client)","peers:",_.peerCount),c(_),!_.isConnected&&A.status!=="idle"&&A.status!=="pending-confirmation"&&A.status!=="awaiting-confirmation"&&(console.log("[ConnectionContext] Resetting sync progress due to disconnection"),u(Jf))},b=_=>{console.log("[ConnectionContext] Sync progress:",_.status,_.message),u(_)};return a.onConnectionStateChange=v,i.onProgress(b),(()=>{const C=new URLSearchParams(window.location.search).get("connect");if(C){console.log("[ConnectionContext] Found connection code in URL:",C),f(C).catch(j=>{console.error("[ConnectionContext] Failed to connect with URL code:",j)});const k=new URL(window.location.href);k.searchParams.delete("connect"),window.history.replaceState({},document.title,k.toString())}})(),()=>{console.log("[ConnectionContext] Cleanup - removing event handlers"),a&&(a.onConnectionStateChange=null,a.disconnect())}},[a,i,r,h]),S.useEffect(()=>{A.status==="complete"&&r&&(console.log("[ConnectionContext] Sync completed, triggering callback"),setTimeout(()=>{r()},500))},[A.status,r]);const d=async()=>{try{console.log("[ConnectionContext] Initializing as host");const v=await a.initAsHost();return console.log("[ConnectionContext] Host initialized with code:",v),v}catch(v){throw console.error("[ConnectionContext] Error initializing as host:",v),c({...o,isConnecting:!1,error:v instanceof Error?v.message:String(v)}),v}},f=async v=>{try{console.log("[ConnectionContext] Connecting to:",v),await a.connect(v),console.log("[ConnectionContext] Connected successfully")}catch(b){throw console.error("[ConnectionContext] Error connecting:",b),c({...o,isConnecting:!1,error:b instanceof Error?b.message:String(b)}),b}},g=()=>{console.log("[ConnectionContext] Disconnecting"),a.disconnect(),u(Jf)},m=async()=>{try{if(console.log("[ConnectionContext] Sending data, connection state:",o.isConnected?"connected":"disconnected","peers:",o.peerCount),!o.isConnected||o.peerCount===0)throw console.error("[ConnectionContext] Cannot send data - not connected or no peers"),new Error("Not connected to any peers. Please reconnect and try again.");await i.sendData()}catch(v){throw console.error("[ConnectionContext] Send data error:",v),u({percent:0,status:"error",message:`Failed to send data: ${v instanceof Error?v.message:String(v)}`,error:String(v)}),v}},y=async()=>{try{if(console.log("[ConnectionContext] Requesting data, connection state:",o.isConnected?"connected":"disconnected","peers:",o.peerCount),!o.isConnected||o.peerCount===0)throw console.error("[ConnectionContext] Cannot request data - not connected or no peers"),new Error("Not connected to any peers. Please reconnect and try again.");await i.requestData()}catch(v){throw console.error("[ConnectionContext] Request data error:",v),u({percent:0,status:"error",message:`Failed to request data: ${v instanceof Error?v.message:String(v)}`,error:String(v)}),v}},x=()=>{if(console.log("[ConnectionContext] Confirming data operation"),!o.isConnected){console.error("[ConnectionContext] Cannot confirm operation - not connected"),u({percent:0,status:"error",message:"Cannot confirm - connection lost. Please reconnect and try again.",error:"Connection lost"});return}i.confirmDataOperation()},p=()=>{console.log("[ConnectionContext] Rejecting data operation"),i.rejectDataOperation()};return l.jsx(vF.Provider,{value:{connectionState:o,syncProgress:A,initAsHost:d,connect:f,disconnect:g,sendData:m,requestData:y,confirmDataOperation:x,rejectDataOperation:p},children:e})};class vfe{async signUp(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:s}=await ce.rpc("check_username_available",{check_username:n.username});if(s)return{success:!1,error:"Failed to check username availability"};if(!r)return{success:!1,error:"Username is already taken"};const a=this.validatePassword(n.password);if(a)return{success:!1,error:a};const i=this.validateUsername(n.username);if(i)return{success:!1,error:i};const o=window.location.origin+"/GoA-Timer/",{data:c,error:A}=await ce.auth.signUp({email:n.email,password:n.password,options:{emailRedirectTo:o,data:{username:n.username,display_name:n.displayName||n.username}}});if(A)return{success:!1,error:A.message};if(!c.user)return{success:!1,error:"Failed to create user account"};if(c.user.identities&&c.user.identities.length===0)return{success:!1,error:"An account with this email already exists. Please sign in instead."};const{error:u}=await ce.from("profiles").insert({id:c.user.id,username:n.username,display_name:n.displayName||n.username,device_id:this.getDeviceId()});return u&&console.error("[AuthService] Failed to create profile:",u),{success:!0,user:c.user,session:c.session||void 0}}catch(r){return console.error("[AuthService] Sign up error:",r),{success:!1,error:"An unexpected error occurred"}}}async login(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:s}=await ce.auth.signInWithPassword({email:n.email,password:n.password});return s?{success:!1,error:s.message}:{success:!0,user:r.user,session:r.session}}catch(r){return console.error("[AuthService] Login error:",r),{success:!1,error:"An unexpected error occurred"}}}async logout(){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{error:n}=await ce.auth.signOut();return n?{success:!1,error:n.message}:{success:!0}}catch(n){return console.error("[AuthService] Logout error:",n),{success:!1,error:"An unexpected error occurred"}}}async changePassword(n,r){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const s=await this.getUser();if(!(s!=null&&s.email))return{success:!1,error:"No user logged in"};const a=this.validatePassword(r);if(a)return{success:!1,error:a};const{error:i}=await ce.auth.signInWithPassword({email:s.email,password:n});if(i)return{success:!1,error:"Current password is incorrect"};const{error:o}=await ce.auth.updateUser({password:r});return o?{success:!1,error:o.message}:{success:!0}}catch(s){return console.error("[AuthService] Change password error:",s),{success:!1,error:"An unexpected error occurred"}}}async getSession(){if(!Ze()||!ce)return null;const{data:n}=await ce.auth.getSession();return n.session}async getUser(){if(!Ze()||!ce)return null;const{data:n}=await ce.auth.getUser();return n.user}async getProfile(){var a,i,o;if(!Ze()||!ce)return null;const n=await this.getUser();if(!n)return null;const{data:r,error:s}=await ce.from("profiles").select("id, username, display_name, avatar_url, share_stats_with_friends, share_match_history_with_friends").eq("id",n.id).single();if(s||!r){if(console.error("[AuthService] Failed to get profile:",s),(s==null?void 0:s.code)==="PGRST116"){const c=((a=n.user_metadata)==null?void 0:a.username)||((i=n.email)==null?void 0:i.split("@")[0])||"user",{data:A,error:u}=await ce.from("profiles").insert({id:n.id,username:c,display_name:((o=n.user_metadata)==null?void 0:o.display_name)||c,device_id:this.getDeviceId()}).select().single();if(u)return console.error("[AuthService] Failed to create profile:",u),null;if(A)return{id:A.id,username:A.username,displayName:A.display_name,avatarUrl:A.avatar_url,shareStatsWithFriends:A.share_stats_with_friends??!0,shareMatchHistoryWithFriends:A.share_match_history_with_friends??!0}}return null}return{id:r.id,username:r.username,displayName:r.display_name,avatarUrl:r.avatar_url,shareStatsWithFriends:r.share_stats_with_friends,shareMatchHistoryWithFriends:r.share_match_history_with_friends}}async updateProfile(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};const r=await this.getUser();if(!r)return{success:!1,error:"Not authenticated"};const s={};n.displayName!==void 0&&(s.display_name=n.displayName),n.shareStatsWithFriends!==void 0&&(s.share_stats_with_friends=n.shareStatsWithFriends),n.shareMatchHistoryWithFriends!==void 0&&(s.share_match_history_with_friends=n.shareMatchHistoryWithFriends);const{error:a}=await ce.from("profiles").update(s).eq("id",r.id);return a?{success:!1,error:a.message}:{success:!0}}onAuthStateChange(n){if(!Ze()||!ce)return()=>{};const{data:{subscription:r}}=ce.auth.onAuthStateChange((s,a)=>{n((a==null?void 0:a.user)||null)});return()=>r.unsubscribe()}async isUsernameAvailable(n){if(!Ze()||!ce)return!1;const{data:r,error:s}=await ce.rpc("check_username_available",{check_username:n});return s?(console.error("[AuthService] Username check error:",s),!1):r===!0}validatePassword(n){return n.length<8?"Password must be at least 8 characters long":/[A-Z]/.test(n)?/[a-z]/.test(n)?/[0-9]/.test(n)?null:"Password must contain at least one number":"Password must contain at least one lowercase letter":"Password must contain at least one uppercase letter"}validateUsername(n){return n.length<3?"Username must be at least 3 characters long":n.length>30?"Username must be at most 30 characters long":/^[a-zA-Z0-9_-]+$/.test(n)?null:"Username can only contain letters, numbers, underscores, and hyphens"}async resendConfirmationEmail(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{error:r}=await ce.auth.resend({type:"signup",email:n});return r?{success:!1,error:r.message}:{success:!0}}catch(r){return console.error("[AuthService] Resend confirmation error:",r),{success:!1,error:"An unexpected error occurred"}}}async deleteCloudData(){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};if(!await this.getUser())return{success:!1,error:"Not authenticated"};try{const{data:r,error:s}=await ce.rpc("delete_own_cloud_data");return s?(console.error("[AuthService] Failed to delete cloud data:",s),{success:!1,error:s.message}):r!==!0?{success:!1,error:"Failed to delete cloud data"}:(localStorage.removeItem("cloudSync_lastSync"),{success:!0})}catch(r){return console.error("[AuthService] Delete cloud data error:",r),{success:!1,error:"An unexpected error occurred"}}}async deleteAccount(){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};if(!await this.getUser())return{success:!1,error:"Not authenticated"};try{const{data:r,error:s}=await ce.rpc("delete_own_account");return s?(console.error("[AuthService] Failed to delete account:",s),{success:!1,error:s.message}):r!==!0?{success:!1,error:"Failed to delete account"}:(await ce.auth.signOut(),localStorage.removeItem("cloudSync_lastSync"),localStorage.removeItem("cloudSync_autoEnabled"),{success:!0})}catch(r){return console.error("[AuthService] Delete account error:",r),{success:!1,error:"An unexpected error occurred"}}}getDeviceId(){const n="guards-of-atlantis-device-id";let r=localStorage.getItem(n);if(!r){const s=Date.now().toString(36),a=Math.random().toString(36).substring(2,10);r=`device_${s}_${a}`,localStorage.setItem(n,r)}return r}}const Gn=new vfe,wF=S.createContext({user:null,profile:null,isLoading:!0,isConfigured:!1,error:null,signUp:async()=>({success:!1}),login:async()=>({success:!1}),logout:async()=>{},clearError:()=>{},checkUsernameAvailable:async()=>!1,refreshProfile:async()=>{},updateProfile:async()=>({success:!1}),deleteCloudData:async()=>({success:!1}),deleteAccount:async()=>({success:!1}),changePassword:async()=>({success:!1})}),r_=()=>S.useContext(wF),xfe=({children:e})=>{const[n,r]=S.useState(null),[s,a]=S.useState(null),[i,o]=S.useState(!0),[c,A]=S.useState(null),u=Ze(),h=S.useCallback(async()=>{if(!u)return;const w=await Gn.getProfile();a(w)},[u]);S.useEffect(()=>((async()=>{if(!u){o(!1);return}const C=await Gn.getUser();r(C),C&&await h(),o(!1)})(),Gn.onAuthStateChange(async C=>{r(C),C?await h():a(null)})),[u,h]);const d=S.useCallback(async w=>{A(null);const _=await Gn.signUp(w);return!_.success&&_.error?A(_.error):_.success&&await h(),_},[h]),f=S.useCallback(async w=>{A(null);const _=await Gn.login(w);return!_.success&&_.error?A(_.error):_.success&&await h(),_},[h]),g=S.useCallback(async()=>{A(null);const w=await Gn.logout();!w.success&&w.error?A(w.error):a(null)},[]),m=S.useCallback(()=>A(null),[]),y=S.useCallback(w=>Gn.isUsernameAvailable(w),[]),x=S.useCallback(async w=>{const _=await Gn.updateProfile(w);return _.success&&await h(),_},[h]),p=S.useCallback(async()=>{A(null);const w=await Gn.deleteCloudData();return!w.success&&w.error&&A(w.error),w},[]),v=S.useCallback(async()=>{A(null);const w=await Gn.deleteAccount();return!w.success&&w.error?A(w.error):(r(null),a(null)),w},[]),b=S.useCallback(async(w,_)=>{A(null);const C=await Gn.changePassword(w,_);return!C.success&&C.error&&A(C.error),C},[]);return l.jsx(wF.Provider,{value:{user:n,profile:s,isLoading:i,isConfigured:u,error:c,signUp:d,login:f,logout:g,clearError:m,checkUsernameAvailable:y,refreshProfile:h,updateProfile:x,deleteCloudData:p,deleteAccount:v,changePassword:b},children:e})};class wfe{generateToken(){const n=crypto.getRandomValues(new Uint8Array(12));return"goa_"+btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async getMyShareLink(){if(!Ze()||!ce)return null;try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return null;const{data:r,error:s}=await ce.from("share_links").select("*").eq("owner_id",n.id).single();return s?(s.code==="PGRST116"||console.error("[ShareService] Get share link error:",s),null):{id:r.id,shareToken:r.share_token,isActive:r.is_active,createdAt:new Date(r.created_at),viewCount:r.view_count,lastViewedAt:r.last_viewed_at?new Date(r.last_viewed_at):null}}catch(n){return console.error("[ShareService] Get share link error:",n),null}}async enableSharing(){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return{success:!1,error:"Not authenticated"};const r=await this.getMyShareLink();if(r){const{error:o}=await ce.from("share_links").update({is_active:!0}).eq("id",r.id);return o?{success:!1,error:o.message}:{success:!0,shareLink:{...r,isActive:!0}}}const s=this.generateToken(),{data:a,error:i}=await ce.from("share_links").insert({owner_id:n.id,share_token:s,is_active:!0}).select().single();return i?{success:!1,error:i.message}:{success:!0,shareLink:{id:a.id,shareToken:a.share_token,isActive:a.is_active,createdAt:new Date(a.created_at),viewCount:a.view_count,lastViewedAt:null}}}catch(n){return console.error("[ShareService] Enable sharing error:",n),{success:!1,error:"An unexpected error occurred"}}}async disableSharing(){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return{success:!1,error:"Not authenticated"};const{error:r}=await ce.from("share_links").update({is_active:!1}).eq("owner_id",n.id);return r?{success:!1,error:r.message}:{success:!0}}catch(n){return console.error("[ShareService] Disable sharing error:",n),{success:!1,error:"An unexpected error occurred"}}}async getSharedData(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:s}=await ce.rpc("get_shared_data",{p_share_token:n});return s?(console.error("[ShareService] Get shared data error:",s),{success:!1,error:s.message}):r&&r.error?{success:!1,error:r.error}:{success:!0,data:{ownerId:r.owner_id,displayName:r.display_name||"Unknown User",players:r.players||[],matches:r.matches||[],matchPlayers:r.match_players||[]}}}catch(r){return console.error("[ShareService] Get shared data error:",r),{success:!1,error:"An unexpected error occurred"}}}getShareUrl(n){return`${window.location.origin+window.location.pathname}?share=${n}`}getShareTokenFromUrl(){return new URLSearchParams(window.location.search).get("share")}clearShareTokenFromUrl(){const n=new URL(window.location.href);n.searchParams.delete("share"),window.history.replaceState({},"",n.toString())}}const Pi=new wfe,bF=S.createContext({isViewMode:!1,shareToken:null,sharedData:null,ownerDisplayName:null,isLoading:!1,error:null,exitViewMode:()=>{}}),s_=()=>S.useContext(bF),bfe=({children:e})=>{const[n,r]=S.useState(!1),[s,a]=S.useState(null),[i,o]=S.useState(null),[c,A]=S.useState(null),[u,h]=S.useState(!1),[d,f]=S.useState(null);S.useEffect(()=>{const m=Pi.getShareTokenFromUrl();if(!m)return;if(!Ze()){f("Cloud features are not available");return}a(m),h(!0),f(null),(async()=>{const x=await Pi.getSharedData(m);x.success&&x.data?(o(x.data),A(x.data.displayName),r(!0)):f(x.error||"Failed to load shared data"),h(!1)})()},[]);const g=S.useCallback(()=>{Pi.clearShareTokenFromUrl(),r(!1),a(null),o(null),A(null),f(null),window.location.reload()},[]);return l.jsx(bF.Provider,{value:{isViewMode:n,shareToken:s,sharedData:i,ownerDisplayName:c,isLoading:u,error:d,exitViewMode:g},children:e})},_fe=()=>{const{login:e,signUp:n,error:r,clearError:s}=r_(),{playSound:a}=it(),[i,o]=S.useState("login"),[c,A]=S.useState(""),[u,h]=S.useState(""),[d,f]=S.useState(""),[g,m]=S.useState(!1),[y,x]=S.useState(!1),[p,v]=S.useState(null),[b,w]=S.useState(!1),[_,C]=S.useState(null),[k,j]=S.useState(!1),[B,E]=S.useState(!1),[P,I]=S.useState(!1);S.useEffect(()=>{if(i!=="signup"||d.length<3){v(null);return}if(Gn.validateUsername(d)){v(null);return}w(!0);const F=setTimeout(async()=>{const O=await Gn.isUsernameAvailable(d);v(O),w(!1)},500);return()=>clearTimeout(F)},[d,i]);const U=()=>{a("buttonClick"),o(i==="login"?"signup":"login"),s(),C(null),v(null),j(!1),I(!1)},N=async()=>{a("buttonClick"),E(!0),I(!1),C(null);try{const M=await Gn.resendConfirmationEmail(c);M.success?I(!0):M.error&&C(M.error)}finally{E(!1)}},D=S.useCallback(()=>{if(!c.trim())return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c))return"Invalid email format";if(!u)return"Password is required";if(i==="signup"){if(!d.trim())return"Username is required";const M=Gn.validateUsername(d);if(M)return M;const F=Gn.validatePassword(u);if(F)return F;if(p===!1)return"Username is already taken"}return null},[c,u,d,i,p]),T=async M=>{M.preventDefault(),a("buttonClick");const F=D();if(F){C(F);return}C(null),x(!0);try{if(i==="login")(await e({email:c,password:u})).success&&a("phaseChange");else{const O=await n({email:c,password:u,username:d});O.success?(a("phaseChange"),j(!0)):O.error&&(O.error.toLowerCase().includes("already registered")||O.error.toLowerCase().includes("already been registered")||O.error.toLowerCase().includes("user already registered"))&&C("An account with this email already exists. Please sign in instead.")}}finally{x(!1)}},L=[{label:"8+ characters",met:u.length>=8},{label:"Uppercase letter",met:/[A-Z]/.test(u)},{label:"Lowercase letter",met:/[a-z]/.test(u)},{label:"Number",met:/[0-9]/.test(u)}],Q=_||r;return k?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center py-6",children:[l.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(s$,{size:32,className:"text-white"})}),l.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Check Your Email"}),l.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"We've sent a confirmation link to:"}),l.jsx("p",{className:"text-orange-400 font-medium mb-4",children:c}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Click the link in the email to activate your account. If you don't see it, check your spam folder."})]}),P&&l.jsx("div",{className:"bg-green-900/50 border border-green-700 rounded p-2 text-green-300 text-sm text-center",children:"Confirmation email resent!"}),_&&l.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded p-2 text-red-300 text-sm text-center",children:_}),l.jsx("button",{onClick:N,disabled:B,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 text-white font-medium py-2 px-4 rounded transition-colors flex items-center justify-center",children:B?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:18,className:"animate-spin mr-2"}),"Sending..."]}):"Resend Confirmation Email"}),l.jsx("button",{onClick:U,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded transition-colors",children:"Back to Sign In"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-white",children:i==="login"?"Welcome Back":"Create Account"}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:i==="login"?"Sign in to sync your data":"Join to sync with friends"})]}),l.jsxs("form",{onSubmit:T,className:"space-y-4",children:[i==="signup"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Username"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:d,onChange:M=>f(M.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500 pr-8",placeholder:"Choose a username",disabled:y}),d.length>=3&&l.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2",children:b?l.jsx(At,{size:16,className:"animate-spin text-gray-400"}):p===!0?l.jsx(Xn,{size:16,className:"text-green-500"}):p===!1?l.jsx(Bn,{size:16,className:"text-red-500"}):null})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"3-30 characters, letters, numbers, _ and - only"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",value:c,onChange:M=>A(M.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500",placeholder:"you@example.com",disabled:y})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:g?"text":"password",value:u,onChange:M=>h(M.target.value),className:"w-full bg-gray-800 border border-gray-700 rounded px-3 py-2 text-white focus:outline-none focus:border-orange-500 pr-10",placeholder:i==="signup"?"Create a strong password":"Enter your password",disabled:y}),l.jsx("button",{type:"button",onClick:()=>m(!g),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:g?l.jsx(Kf,{size:18}):l.jsx(kc,{size:18})})]})]}),i==="signup"&&u.length>0&&l.jsx("div",{className:"grid grid-cols-2 gap-1 text-xs",children:L.map(M=>l.jsxs("div",{className:`flex items-center ${M.met?"text-green-500":"text-gray-500"}`,children:[M.met?l.jsx(Xn,{size:12,className:"mr-1"}):l.jsx(Bn,{size:12,className:"mr-1"}),M.label]},M.label))}),Q&&l.jsx("div",{className:"bg-red-900/50 border border-red-700 rounded p-2 text-red-300 text-sm",children:Q}),l.jsx("button",{type:"submit",disabled:y||i==="signup"&&p===!1,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-semibold py-2 px-4 rounded transition-colors flex items-center justify-center",children:y?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:18,className:"animate-spin mr-2"}),i==="login"?"Signing in...":"Creating account..."]}):i==="login"?"Sign In":"Create Account"})]}),l.jsx("div",{className:"text-center text-sm text-gray-400",children:i==="login"?l.jsxs(l.Fragment,{children:["Don't have an account?"," ",l.jsx("button",{onClick:U,className:"text-orange-400 hover:text-orange-300",disabled:y,children:"Sign up"})]}):l.jsxs(l.Fragment,{children:["Already have an account?"," ",l.jsx("button",{onClick:U,className:"text-orange-400 hover:text-orange-300",disabled:y,children:"Sign in"})]})})]})},Cfe=()=>{const{user:e,profile:n,logout:r,updateProfile:s,deleteCloudData:a,deleteAccount:i,changePassword:o}=r_(),{playSound:c}=it(),[A,u]=S.useState(!1),[h,d]=S.useState(!1),[f,g]=S.useState(!1),[m,y]=S.useState(!1),[x,p]=S.useState(!1),[v,b]=S.useState(!1),[w,_]=S.useState(!1),[C,k]=S.useState(!1),[j,B]=S.useState(!1),[E,P]=S.useState(null),[I,U]=S.useState(""),[N,D]=S.useState(""),[T,L]=S.useState(""),[Q,M]=S.useState(!1),[F,O]=S.useState(!1),[X,ae]=S.useState(!1),[$,J]=S.useState(null),[le,re]=S.useState(!1),V=async()=>{c("buttonClick"),y(!0),await r(),y(!1)},z=async()=>{n&&(c("toggleSwitch"),p(!0),await s({shareStatsWithFriends:!n.shareStatsWithFriends}),p(!1))},Z=async()=>{n&&(c("toggleSwitch"),p(!0),await s({shareMatchHistoryWithFriends:!n.shareMatchHistoryWithFriends}),p(!1))},Y=async()=>{if(!C){k(!0);return}c("buttonClick"),P(null),b(!0);const ee=await a();b(!1),k(!1),ee.success||P(ee.error||"Failed to delete cloud data")},K=async()=>{if(!j){B(!0);return}c("buttonClick"),P(null),_(!0);const ee=await i();_(!1),B(!1),ee.success||P(ee.error||"Failed to delete account")},ue=()=>{k(!1),B(!1),P(null)},be=async()=>{if(J(null),re(!1),N!==T){J("New passwords do not match");return}if(I===N){J("New password must be different from current password");return}c("buttonClick"),ae(!0);const ee=await o(I,N);ae(!1),ee.success?(re(!0),U(""),D(""),L(""),setTimeout(()=>re(!1),3e3)):J(ee.error||"Failed to change password")},H=()=>{U(""),D(""),L(""),J(null),re(!1)};return!e||!n?l.jsx("div",{className:"flex items-center justify-center h-32",children:l.jsx(At,{size:24,className:"animate-spin text-orange-400"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center",children:n.avatarUrl?l.jsx("img",{src:n.avatarUrl,alt:n.username,className:"w-full h-full rounded-full object-cover"}):l.jsx(ro,{size:32,className:"text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:n.displayName||n.username}),l.jsxs("p",{className:"text-sm text-gray-400",children:["@",n.username]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.email})]})]})}),l.jsxs("button",{onClick:()=>{c("buttonClick"),u(!A)},className:"w-full flex items-center justify-between bg-gray-800 hover:bg-gray-750 rounded-lg p-3 transition-colors",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(p$,{size:18,className:"text-gray-400 mr-3"}),l.jsx("span",{className:"text-white",children:"Privacy Settings"})]}),l.jsx("span",{className:"text-gray-400",children:A?"":""})]}),A&&l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(jt,{size:16,className:"text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm",children:"Share Stats"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Friends can see your player stats"})]})]}),l.jsx("button",{onClick:z,disabled:x,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${n.shareStatsWithFriends?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[n.shareMatchHistoryWithFriends?l.jsx(kc,{size:16,className:"text-gray-400 mr-2"}):l.jsx(Kf,{size:16,className:"text-gray-400 mr-2"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm",children:"Share Match History"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Friends can see your matches"})]})]}),l.jsx("button",{onClick:Z,disabled:x,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${n.shareMatchHistoryWithFriends?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})]}),l.jsxs("button",{onClick:()=>{c("buttonClick"),d(!h),h||H()},className:"w-full flex items-center justify-between bg-gray-800 hover:bg-gray-750 rounded-lg p-3 transition-colors",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(e$,{size:18,className:"text-gray-400 mr-3"}),l.jsx("span",{className:"text-white",children:"Security"})]}),l.jsx("span",{className:"text-gray-400",children:h?"":""})]}),h&&l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Change Password"}),le&&l.jsxs("div",{className:"bg-green-900/30 border border-green-700 text-green-300 text-sm p-3 rounded flex items-center",children:[l.jsx(Xn,{size:16,className:"mr-2"}),"Password changed successfully!"]}),$&&l.jsx("div",{className:"bg-red-900/30 border border-red-700 text-red-300 text-sm p-3 rounded",children:$}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Current Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:Q?"text":"password",value:I,onChange:ee=>U(ee.target.value),disabled:X,className:"w-full bg-gray-700 text-white px-3 py-2 rounded pr-10 text-sm",placeholder:"Enter current password"}),l.jsx("button",{type:"button",onClick:()=>M(!Q),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:Q?l.jsx(Kf,{size:16}):l.jsx(kc,{size:16})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"New Password"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:F?"text":"password",value:N,onChange:ee=>D(ee.target.value),disabled:X,className:"w-full bg-gray-700 text-white px-3 py-2 rounded pr-10 text-sm",placeholder:"Enter new password"}),l.jsx("button",{type:"button",onClick:()=>O(!F),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white",children:F?l.jsx(Kf,{size:16}):l.jsx(kc,{size:16})})]}),l.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Minimum 6 characters"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-gray-400 text-xs block mb-1",children:"Confirm New Password"}),l.jsx("input",{type:F?"text":"password",value:T,onChange:ee=>L(ee.target.value),disabled:X,className:"w-full bg-gray-700 text-white px-3 py-2 rounded text-sm",placeholder:"Confirm new password"})]}),l.jsx("button",{onClick:be,disabled:X||!I||!N||!T,className:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-2 px-4 rounded transition-colors text-sm",children:X?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:14,className:"animate-spin inline mr-2"}),"Changing Password..."]}):"Change Password"})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Account"}),l.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[l.jsxs("p",{children:["User ID: ",e.id.substring(0,8),"..."]}),l.jsxs("p",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]})]}),l.jsxs("button",{onClick:()=>{c("buttonClick"),g(!f),ue()},className:"w-full flex items-center justify-between bg-gray-800 hover:bg-gray-750 rounded-lg p-3 transition-colors",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(jc,{size:18,className:"text-gray-400 mr-3"}),l.jsx("span",{className:"text-white",children:"Account Management"})]}),l.jsx("span",{className:"text-gray-400",children:f?"":""})]}),f&&l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-4 border border-red-900/30",children:[E&&l.jsx("div",{className:"bg-red-900/30 border border-red-700 text-red-300 text-sm p-3 rounded",children:E}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(jc,{size:16,className:"text-red-500 mr-2 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Delete Cloud Data"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Remove all your synced players, matches, and stats from the cloud. Your local data will remain intact. Anyone who has already synced your data will still retain their copy."})]})]}),C?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:Y,disabled:v,className:"flex-1 bg-red-700 hover:bg-red-600 disabled:bg-gray-600 text-white text-sm py-2 px-3 rounded transition-colors",children:v?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:14,className:"animate-spin inline mr-1"}),"Deleting..."]}):"Yes, Delete My Data"}),l.jsx("button",{onClick:ue,disabled:v,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:"Cancel"})]}):l.jsx("button",{onClick:Y,className:"w-full bg-gray-700 hover:bg-red-700 text-red-400 hover:text-white text-sm py-2 px-3 rounded transition-colors",children:"Delete Cloud Data"})]}),l.jsx("div",{className:"border-t border-gray-700 my-2"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(jc,{size:16,className:"text-red-500 mr-2 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Delete Account"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Permanently delete your account, all cloud data, and friend connections. This action cannot be undone."})]})]}),j?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{onClick:K,disabled:w,className:"flex-1 bg-red-700 hover:bg-red-600 disabled:bg-gray-600 text-white text-sm py-2 px-3 rounded transition-colors",children:w?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:14,className:"animate-spin inline mr-1"}),"Deleting..."]}):"Yes, Delete My Account"}),l.jsx("button",{onClick:ue,disabled:w,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 text-white text-sm rounded transition-colors",children:"Cancel"})]}):l.jsx("button",{onClick:K,className:"w-full bg-gray-700 hover:bg-red-700 text-red-400 hover:text-white text-sm py-2 px-3 rounded transition-colors",children:"Delete Account"})]})]}),l.jsx("button",{onClick:V,disabled:m,className:"w-full flex items-center justify-center bg-red-700 hover:bg-red-600 disabled:bg-gray-600 text-white font-medium py-2 px-4 rounded transition-colors",children:m?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:18,className:"animate-spin mr-2"}),"Signing out..."]}):l.jsxs(l.Fragment,{children:[l.jsx(n$,{size:18,className:"mr-2"}),"Sign Out"]})})]})};class Bfe{constructor(){de(this,"realtimeChannel",null)}async searchUsers(n){if(!Ze()||!ce||n.length<2)return[];try{const{data:r,error:s}=await ce.rpc("search_users",{search_query:n});return s?(console.error("[FriendService] Search error:",s),[]):(r||[]).map(a=>({id:a.id,username:a.username,displayName:a.display_name,avatarUrl:a.avatar_url}))}catch(r){return console.error("[FriendService] Search error:",r),[]}}async sendFriendRequest(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{data:s}=await ce.from("friends").select("id").eq("user_id",r.id).eq("friend_id",n).single();if(s)return{success:!1,error:"Already friends with this user"};const{error:a}=await ce.from("friend_requests").insert({from_user_id:r.id,to_user_id:n,status:"pending"});return a?a.code==="23505"?{success:!1,error:"Friend request already sent"}:{success:!1,error:a.message}:{success:!0}}catch(r){return console.error("[FriendService] Send request error:",r),{success:!1,error:"An unexpected error occurred"}}}async getPendingRequests(){if(!Ze()||!ce)return[];try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return[];const{data:r,error:s}=await ce.from("friend_requests").select(`
          id,
          from_user_id,
          to_user_id,
          status,
          created_at,
          from_user:profiles!friend_requests_from_user_id_fkey (
            id, username, display_name, avatar_url
          )
        `).eq("to_user_id",n.id).eq("status","pending").order("created_at",{ascending:!1});return s?(console.error("[FriendService] Get requests error:",s),[]):(r||[]).map(a=>{const i=Array.isArray(a.from_user)?a.from_user[0]:a.from_user;return{id:a.id,fromUserId:a.from_user_id,toUserId:a.to_user_id,status:a.status,createdAt:new Date(a.created_at),fromUser:i?{id:i.id,username:i.username,displayName:i.display_name,avatarUrl:i.avatar_url}:void 0}})}catch(n){return console.error("[FriendService] Get requests error:",n),[]}}async getSentRequests(){if(!Ze()||!ce)return[];try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return[];const{data:r,error:s}=await ce.from("friend_requests").select(`
          id,
          from_user_id,
          to_user_id,
          status,
          created_at,
          to_user:profiles!friend_requests_to_user_id_fkey (
            id, username, display_name, avatar_url
          )
        `).eq("from_user_id",n.id).eq("status","pending").order("created_at",{ascending:!1});return s?(console.error("[FriendService] Get sent requests error:",s),[]):(r||[]).map(a=>{const i=Array.isArray(a.to_user)?a.to_user[0]:a.to_user;return{id:a.id,fromUserId:a.from_user_id,toUserId:a.to_user_id,status:a.status,createdAt:new Date(a.created_at),toUser:i?{id:i.id,username:i.username,displayName:i.display_name,avatarUrl:i.avatar_url}:void 0}})}catch(n){return console.error("[FriendService] Get sent requests error:",n),[]}}async acceptRequest(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:r,error:s}=await ce.rpc("accept_friend_request",{request_id:n});return s?{success:!1,error:s.message}:{success:r===!0}}catch(r){return console.error("[FriendService] Accept request error:",r),{success:!1,error:"An unexpected error occurred"}}}async rejectRequest(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:s}=await ce.from("friend_requests").update({status:"rejected",responded_at:new Date().toISOString()}).eq("id",n).eq("to_user_id",r.id);return s?{success:!1,error:s.message}:{success:!0}}catch(r){return console.error("[FriendService] Reject request error:",r),{success:!1,error:"An unexpected error occurred"}}}async cancelRequest(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:s}=await ce.from("friend_requests").delete().eq("id",n).eq("from_user_id",r.id);return s?{success:!1,error:s.message}:{success:!0}}catch(r){return console.error("[FriendService] Cancel request error:",r),{success:!1,error:"An unexpected error occurred"}}}async getFriends(){if(!Ze()||!ce)return[];try{const{data:{user:n}}=await ce.auth.getUser();if(!n)return[];const{data:r,error:s}=await ce.from("friends").select(`
          id,
          created_at,
          friend:profiles!friends_friend_id_fkey (
            id, username, display_name, avatar_url
          )
        `).eq("user_id",n.id).order("created_at",{ascending:!1});return s?(console.error("[FriendService] Get friends error:",s),[]):(r||[]).map(a=>{const i=Array.isArray(a.friend)?a.friend[0]:a.friend;return{id:a.id,createdAt:new Date(a.created_at),friendProfile:{id:i.id,username:i.username,displayName:i.display_name,avatarUrl:i.avatar_url}}})}catch(n){return console.error("[FriendService] Get friends error:",n),[]}}async removeFriend(n){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured"};try{const{data:{user:r}}=await ce.auth.getUser();if(!r)return{success:!1,error:"Not authenticated"};const{error:s}=await ce.from("friends").delete().eq("user_id",r.id).eq("friend_id",n),{error:a}=await ce.from("friends").delete().eq("user_id",n).eq("friend_id",r.id);return s||a?{success:!1,error:(s==null?void 0:s.message)||(a==null?void 0:a.message)}:{success:!0}}catch(r){return console.error("[FriendService] Remove friend error:",r),{success:!1,error:"An unexpected error occurred"}}}subscribeToRequests(n,r){return!Ze()||!ce?()=>{}:(this.realtimeChannel=ce.channel("friend_requests_changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"friend_requests"},s=>{const a=this.mapRequestFromPayload(s.new);a&&n(a)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"friend_requests"},s=>{const a=this.mapRequestFromPayload(s.new);a&&r(a)}).subscribe(),()=>{this.realtimeChannel&&(ce==null||ce.removeChannel(this.realtimeChannel),this.realtimeChannel=null)})}mapRequestFromPayload(n){return n?{id:n.id,fromUserId:n.from_user_id,toUserId:n.to_user_id,status:n.status,createdAt:new Date(n.created_at)}:null}}const ca=new Bfe,Sfe=({pendingRequests:e,sentRequests:n,onAction:r})=>{const{playSound:s}=it(),[a,i]=S.useState(null),o=async h=>{s("buttonClick"),i(h),(await ca.acceptRequest(h)).success&&(s("phaseChange"),r()),i(null)},c=async h=>{s("buttonClick"),i(h),await ca.rejectRequest(h),r(),i(null)},A=async h=>{s("buttonClick"),i(h),await ca.cancelRequest(h),r(),i(null)},u=h=>{const d=Math.floor((Date.now()-h.getTime())/1e3);if(d<60)return"just now";const f=Math.floor(d/60);if(f<60)return`${f}m ago`;const g=Math.floor(f/60);return g<24?`${g}h ago`:`${Math.floor(g/24)}d ago`};return l.jsxs("div",{className:"space-y-4 bg-gray-800 rounded-lg p-3",children:[e.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2 flex items-center",children:[l.jsx($s,{size:14,className:"mr-1"}),"Received (",e.length,")"]}),l.jsx("div",{className:"space-y-2",children:e.map(h=>{var d,f,g;return l.jsxs("div",{className:"flex items-center justify-between bg-gray-900 rounded p-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-sm font-semibold text-gray-400",children:((d=h.fromUser)==null?void 0:d.username.charAt(0).toUpperCase())||"?"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm",children:((f=h.fromUser)==null?void 0:f.displayName)||((g=h.fromUser)==null?void 0:g.username)||"Unknown"}),l.jsx("p",{className:"text-gray-500 text-xs",children:u(h.createdAt)})]})]}),l.jsx("div",{className:"flex space-x-1",children:a===h.id?l.jsx(At,{size:16,className:"animate-spin text-gray-400"}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>o(h.id),className:"p-1.5 bg-green-600 hover:bg-green-500 text-white rounded transition-colors",title:"Accept",children:l.jsx(Xn,{size:14})}),l.jsx("button",{onClick:()=>c(h.id),className:"p-1.5 bg-red-600 hover:bg-red-500 text-white rounded transition-colors",title:"Reject",children:l.jsx(Bn,{size:14})})]})})]},h.id)})})]}),n.length>0&&l.jsxs("div",{children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2 flex items-center",children:[l.jsx(g$,{size:14,className:"mr-1"}),"Sent (",n.length,")"]}),l.jsx("div",{className:"space-y-2",children:n.map(h=>{var d,f,g;return l.jsxs("div",{className:"flex items-center justify-between bg-gray-900 rounded p-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-sm font-semibold text-gray-400",children:((d=h.toUser)==null?void 0:d.username.charAt(0).toUpperCase())||"?"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm",children:((f=h.toUser)==null?void 0:f.displayName)||((g=h.toUser)==null?void 0:g.username)||"Unknown"}),l.jsxs("p",{className:"text-gray-500 text-xs flex items-center",children:[l.jsx($s,{size:10,className:"mr-1"}),"Pending - ",u(h.createdAt)]})]})]}),a===h.id?l.jsx(At,{size:16,className:"animate-spin text-gray-400"}):l.jsx("button",{onClick:()=>A(h.id),className:"p-1.5 text-gray-400 hover:text-red-400 hover:bg-gray-800 rounded transition-colors",title:"Cancel request",children:l.jsx(Bn,{size:14})})]},h.id)})})]}),e.length===0&&n.length===0&&l.jsx("p",{className:"text-gray-500 text-sm text-center py-2",children:"No pending requests"})]})},kfe=({onClose:e,onRequestSent:n,existingFriendIds:r,pendingRequestIds:s})=>{const{playSound:a}=it(),i=S.useRef(null),o=S.useRef(null),[c,A]=S.useState(""),[u,h]=S.useState([]),[d,f]=S.useState(!1),[g,m]=S.useState(null),[y,x]=S.useState(new Set),[p,v]=S.useState(null);S.useEffect(()=>{var _;(_=o.current)==null||_.focus()},[]),S.useEffect(()=>{const _=C=>{i.current&&!i.current.contains(C.target)&&e()};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[e]),S.useEffect(()=>{const _=C=>{C.key==="Escape"&&e()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[e]),S.useEffect(()=>{if(c.length<2){h([]);return}f(!0);const _=setTimeout(async()=>{const C=await ca.searchUsers(c);h(C),f(!1)},300);return()=>clearTimeout(_)},[c]);const b=async _=>{a("buttonClick"),v(null),m(_);const C=await ca.sendFriendRequest(_);C.success?(a("phaseChange"),x(new Set([...y,_])),n()):v(C.error||"Failed to send request"),m(null)},w=_=>{const C=r.includes(_.id),k=s.includes(_.id),j=y.has(_.id),B=g===_.id;return C?l.jsxs("span",{className:"text-green-500 text-xs flex items-center",children:[l.jsx(Xn,{size:14,className:"mr-1"}),"Friends"]}):k||j?l.jsxs("span",{className:"text-orange-400 text-xs flex items-center",children:[l.jsx(Xn,{size:14,className:"mr-1"}),"Pending"]}):B?l.jsx(At,{size:16,className:"animate-spin text-orange-400"}):l.jsx("button",{onClick:()=>b(_.id),className:"p-1.5 bg-orange-600 hover:bg-orange-500 text-white rounded transition-colors",title:"Send friend request",children:l.jsx(_3,{size:16})})};return l.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:l.jsxs("div",{ref:i,className:"bg-gray-900 rounded-lg w-full max-w-md shadow-xl",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Find Friends"}),l.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-800 rounded transition-colors",children:l.jsx(Bn,{size:20,className:"text-gray-400"})})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Al,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),l.jsx("input",{ref:o,type:"text",value:c,onChange:_=>A(_.target.value),placeholder:"Search by username...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg pl-10 pr-4 py-3 text-white focus:outline-none focus:border-orange-500"}),d&&l.jsx(At,{size:18,className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin text-orange-400"})]}),p&&l.jsx("div",{className:"mt-2 bg-red-900/50 border border-red-700 rounded p-2",children:l.jsx("p",{className:"text-red-300 text-sm",children:p})})]}),l.jsx("div",{className:"max-h-64 overflow-y-auto",children:c.length<2?l.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"Type at least 2 characters to search"}):u.length===0&&!d?l.jsxs("p",{className:"text-gray-500 text-sm text-center py-8",children:['No users found matching "',c,'"']}):l.jsx("div",{className:"px-4 pb-4 space-y-2",children:u.map(_=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-800 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center",children:_.avatarUrl?l.jsx("img",{src:_.avatarUrl,alt:_.username,className:"w-full h-full rounded-full object-cover"}):l.jsx("span",{className:"text-lg font-semibold text-gray-400",children:_.username.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:_.displayName||_.username}),l.jsxs("p",{className:"text-gray-500 text-xs",children:["@",_.username]})]})]}),w(_)]},_.id))})}),l.jsx("div",{className:"p-4 border-t border-gray-800",children:l.jsx("button",{onClick:e,className:"w-full bg-gray-700 hover:bg-gray-600 text-white py-2 rounded transition-colors",children:"Close"})})]})})},jfe=({onPendingCountChange:e})=>{const{playSound:n}=it(),[r,s]=S.useState([]),[a,i]=S.useState([]),[o,c]=S.useState([]),[A,u]=S.useState(!0),[h,d]=S.useState(!1),[f,g]=S.useState(!1),[m,y]=S.useState(""),[x,p]=S.useState(null),[v,b]=S.useState(null),[w,_]=S.useState(ar.getFriendSyncPreferences()),C=S.useCallback(async()=>{u(!0);try{const[U,N,D]=await Promise.all([ca.getFriends(),ca.getPendingRequests(),ca.getSentRequests()]);s(U),i(N),c(D),e==null||e(N.length)}catch(U){console.error("[FriendsPanel] Load error:",U)}finally{u(!1)}},[e]);S.useEffect(()=>(C(),ca.subscribeToRequests(()=>C(),()=>C())),[C]);const k=async U=>{n("buttonClick"),p(U),(await ca.removeFriend(U)).success&&s(r.filter(D=>D.friendProfile.id!==U)),p(null)},j=U=>{var T;n("toggleSwitch");const D=!(((T=w[U])==null?void 0:T.autoSync)??!1);ar.setFriendSyncPreference(U,D),_({...w,[U]:{autoSync:D}})},B=U=>{var N;return((N=w[U])==null?void 0:N.autoSync)??!1},E=async U=>{n("buttonClick"),b(U),await ar.syncFromFriends([U]),b(null)},P=async()=>{await C()},I=r.filter(U=>{var N;return U.friendProfile.username.toLowerCase().includes(m.toLowerCase())||((N=U.friendProfile.displayName)==null?void 0:N.toLowerCase().includes(m.toLowerCase()))});return A?l.jsx("div",{className:"flex items-center justify-center h-32",children:l.jsx(At,{size:24,className:"animate-spin text-orange-400"})}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center",children:[l.jsx(ht,{size:20,className:"mr-2"}),"Friends (",r.length,")"]}),l.jsx("button",{onClick:()=>{n("buttonClick"),d(!0)},className:"bg-orange-600 hover:bg-orange-500 text-white p-2 rounded transition-colors",title:"Add Friend",children:l.jsx(_3,{size:18})})]}),(a.length>0||o.length>0)&&l.jsxs("button",{onClick:()=>{n("buttonClick"),g(!f)},className:"w-full flex items-center justify-between bg-orange-900/50 hover:bg-orange-900/70 border border-orange-700 rounded-lg p-3 transition-colors",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(r8,{size:18,className:"text-orange-400 mr-2"}),l.jsxs("span",{className:"text-white",children:["Friend Requests",a.length>0&&l.jsxs("span",{className:"ml-2 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:[a.length," new"]})]})]}),f?l.jsx(Nr,{size:18,className:"text-gray-400"}):l.jsx(Zn,{size:18,className:"text-gray-400"})]}),f&&l.jsx(Sfe,{pendingRequests:a,sentRequests:o,onAction:P}),r.length>0&&l.jsx("div",{className:"bg-yellow-900/20 border border-yellow-700/50 rounded-lg p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx(Aa,{size:16,className:"text-yellow-500 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-xs text-yellow-200/80",children:[l.jsx("p",{className:"font-medium text-yellow-200 mb-1",children:"About Auto-Sync"}),l.jsxs("p",{children:["Enabling auto-sync (",l.jsx(zs,{size:12,className:"inline text-orange-400"}),") for a friend means any matches they add or changes they make will automatically be applied to your account. Only enable this for friends you trust. You can manually download friend data instead for more control."]})]})]})}),r.length>3&&l.jsxs("div",{className:"relative",children:[l.jsx(Al,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),l.jsx("input",{type:"text",value:m,onChange:U=>y(U.target.value),placeholder:"Search friends...",className:"w-full bg-gray-800 border border-gray-700 rounded pl-9 pr-3 py-2 text-white text-sm focus:outline-none focus:border-orange-500"})]}),l.jsx("div",{className:"space-y-2",children:I.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ht,{size:48,className:"mx-auto text-gray-600 mb-3"}),l.jsx("p",{className:"text-gray-400",children:r.length===0?"No friends yet":"No friends match your search"}),r.length===0&&l.jsx("button",{onClick:()=>{n("buttonClick"),d(!0)},className:"mt-3 text-orange-400 hover:text-orange-300 text-sm",children:"Add your first friend"})]}):I.map(U=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-800 rounded-lg p-3",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-700 rounded-full flex items-center justify-center",children:U.friendProfile.avatarUrl?l.jsx("img",{src:U.friendProfile.avatarUrl,alt:U.friendProfile.username,className:"w-full h-full rounded-full object-cover"}):l.jsx("span",{className:"text-lg font-semibold text-gray-400",children:U.friendProfile.username.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:U.friendProfile.displayName||U.friendProfile.username}),l.jsxs("p",{className:"text-gray-500 text-xs",children:["@",U.friendProfile.username]})]})]}),l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx("button",{onClick:()=>E(U.friendProfile.id),disabled:v===U.friendProfile.id,className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-gray-700 rounded transition-colors disabled:opacity-50",title:"Sync from this friend",children:v===U.friendProfile.id?l.jsx(At,{size:16,className:"animate-spin"}):l.jsx(P0,{size:16})}),l.jsx("button",{onClick:()=>j(U.friendProfile.id),className:`p-2 rounded transition-colors ${B(U.friendProfile.id)?"text-orange-400 hover:bg-gray-700":"text-gray-600 hover:bg-gray-700 hover:text-gray-400"}`,title:B(U.friendProfile.id)?"Auto-sync enabled (click to disable)":"Auto-sync disabled (click to enable)",children:l.jsx(zs,{size:16})}),l.jsx("button",{onClick:()=>k(U.friendProfile.id),disabled:x===U.friendProfile.id,className:"p-2 text-gray-400 hover:text-red-400 hover:bg-gray-700 rounded transition-colors",title:"Remove friend",children:x===U.friendProfile.id?l.jsx(At,{size:16,className:"animate-spin"}):l.jsx($$,{size:16})})]})]},U.id))}),h&&l.jsx(kfe,{onClose:()=>d(!1),onRequestSent:C,existingFriendIds:r.map(U=>U.friendProfile.id),pendingRequestIds:[...a.map(U=>U.fromUserId),...o.map(U=>U.toUserId)]})]})},Nfe=()=>{const{playSound:e}=it(),[n,r]=S.useState(ar.getStatus()),[s,a]=S.useState(ar.isAutoUploadEnabled()),[i,o]=S.useState(ar.isAutoSyncOwnDevicesEnabled()),[c,A]=S.useState(ar.getLastSyncTime()),[u,h]=S.useState(ar.getLastOwnSyncTime());S.useEffect(()=>ar.onStatusChange(w=>{r(w),w.lastSyncAt&&A(w.lastSyncAt)}),[]);const d=async()=>{e("buttonClick"),await ar.uploadLocalData()},f=async()=>{e("buttonClick"),(await ar.downloadOwnCloudData()).success&&h(new Date)},g=()=>{e("toggleSwitch");const b=!s;a(b),ar.setAutoUpload(b)},m=()=>{e("toggleSwitch");const b=!i;o(b),ar.setAutoSyncOwnDevices(b)},y=b=>{if(!b)return"Never";const w=Math.floor((Date.now()-b.getTime())/1e3);if(w<60)return"Just now";const _=Math.floor(w/60);if(_<60)return`${_} min ago`;const C=Math.floor(_/60);return C<24?`${C} hours ago`:b.toLocaleDateString()},x=["uploading","downloading","merging"].includes(n.status),p=()=>{switch(n.status){case"uploading":return l.jsx($0,{size:18,className:"animate-pulse text-orange-400"});case"downloading":return l.jsx(P0,{size:18,className:"animate-pulse text-orange-400"});case"merging":return l.jsx(zs,{size:18,className:"animate-spin text-orange-400"});case"complete":return l.jsx(Xn,{size:18,className:"text-green-500"});case"error":return l.jsx(la,{size:18,className:"text-red-500"});default:return l.jsx($s,{size:18,className:"text-gray-400"})}},v=()=>{switch(n.status){case"uploading":case"downloading":case"merging":return"text-orange-400";case"complete":return"text-green-500";case"error":return"text-red-500";default:return"text-gray-400"}};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400",children:"Sync Status"}),p()]}),l.jsx("p",{className:`text-sm font-medium ${v()}`,children:n.message}),x&&l.jsxs("div",{className:"mt-3",children:[l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:l.jsx("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${n.progress}%`}})}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[n.progress,"%"]})]}),n.error&&l.jsx("div",{className:"mt-3 bg-red-900/50 border border-red-700 rounded p-2",children:l.jsx("p",{className:"text-red-300 text-xs",children:n.error})}),l.jsxs("div",{className:"mt-3 flex items-center text-xs text-gray-500",children:[l.jsx($s,{size:12,className:"mr-1"}),"Last sync: ",y(c)]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("button",{onClick:d,disabled:x,className:"w-full flex items-center justify-center bg-orange-600 hover:bg-orange-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded transition-colors",children:n.status==="uploading"?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:18,className:"animate-spin mr-2"}),"Uploading..."]}):l.jsxs(l.Fragment,{children:[l.jsx($0,{size:18,className:"mr-2"}),"Upload My Data"]})}),l.jsx("button",{onClick:f,disabled:x,className:"w-full flex items-center justify-center bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-medium py-3 px-4 rounded transition-colors",children:n.status==="downloading"?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:18,className:"animate-spin mr-2"}),"Downloading..."]}):l.jsxs(l.Fragment,{children:[l.jsx(P0,{size:18,className:"mr-2"}),"Download My Data"]})}),l.jsxs("div",{className:"flex items-center text-xs text-gray-500 px-1",children:[l.jsx($s,{size:12,className:"mr-1"}),"Last download from other devices: ",y(u)]})]}),l.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Auto-Upload"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Automatically upload data when you record matches"})]}),l.jsx("button",{onClick:g,disabled:x,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${s?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})}),l.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-white text-sm font-medium",children:"Auto-Sync Devices"}),l.jsx("p",{className:"text-gray-500 text-xs",children:"Automatically download data from your other devices"})]}),l.jsx("button",{onClick:m,disabled:x,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${i?"bg-blue-600 justify-end":"bg-gray-600 justify-start"}`,children:l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})}),l.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Upload:"})," Sends your local match data to the cloud."]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Download:"})," Gets your data from other devices you own."]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Auto-Upload:"})," Uploads after recording matches."]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Auto-Sync Devices:"})," Downloads when other devices upload."]}),l.jsx("p",{className:"text-gray-600 mt-2",children:"To sync from friends, go to the Friends tab."})]})]})},Efe=()=>{const{playSound:e}=it(),[n,r]=S.useState(null),[s,a]=S.useState(!0),[i,o]=S.useState(!1),[c,A]=S.useState(!1),[u,h]=S.useState(null);S.useEffect(()=>{(async()=>{a(!0);const x=await Pi.getMyShareLink();r(x),a(!1)})()},[]);const d=async()=>{if(e("toggleSwitch"),o(!0),h(null),n!=null&&n.isActive){const y=await Pi.disableSharing();y.success?r(x=>x?{...x,isActive:!1}:null):h(y.error||"Failed to disable sharing")}else{const y=await Pi.enableSharing();y.success&&y.shareLink?r(y.shareLink):h(y.error||"Failed to enable sharing")}o(!1)},f=async()=>{if(!n)return;e("buttonClick");const y=Pi.getShareUrl(n.shareToken);try{await navigator.clipboard.writeText(y),A(!0),setTimeout(()=>A(!1),2e3)}catch(x){console.error("Failed to copy:",x),h("Failed to copy to clipboard")}},g=y=>y===0?"No views yet":y===1?"1 view":`${y} views`,m=y=>{if(!y)return"Never";const p=new Date().getTime()-y.getTime(),v=Math.floor(p/6e4),b=Math.floor(p/36e5),w=Math.floor(p/864e5);return v<1?"Just now":v<60?`${v} min ago`:b<24?`${b} hour${b>1?"s":""} ago`:`${w} day${w>1?"s":""} ago`};return s?l.jsx("div",{className:"flex items-center justify-center h-32",children:l.jsx(At,{size:24,className:"animate-spin text-orange-400"})}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx(Gc,{size:20,className:"text-orange-400 mr-2"}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Public Sharing"})]}),l.jsx("p",{className:"text-sm text-gray-400",children:"Create a shareable link that lets anyone view your player stats, match history, and hero statistics."})]}),u&&l.jsxs("div",{className:"bg-red-900/30 border border-red-700 text-red-300 text-sm p-3 rounded flex items-center",children:[l.jsx(la,{size:16,className:"mr-2 flex-shrink-0"}),u]}),l.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(xx,{size:18,className:"text-gray-400 mr-3"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:"Enable Sharing"}),l.jsx("p",{className:"text-gray-500 text-xs",children:n!=null&&n.isActive?"Your stats are publicly viewable":"Your stats are private"})]})]}),l.jsx("button",{onClick:d,disabled:i,className:`w-12 h-6 rounded-full flex items-center p-1 transition-colors ${n!=null&&n.isActive?"bg-orange-600 justify-end":"bg-gray-600 justify-start"}`,children:i?l.jsx(At,{size:14,className:"animate-spin text-white mx-auto"}):l.jsx("div",{className:"bg-white w-4 h-4 rounded-full shadow"})})]})}),(n==null?void 0:n.isActive)&&l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"text-sm text-gray-400",children:"Your share link:"}),l.jsx("button",{onClick:f,className:"flex items-center text-sm text-orange-400 hover:text-orange-300 transition-colors",children:c?l.jsxs(l.Fragment,{children:[l.jsx(Xn,{size:14,className:"mr-1"}),"Copied!"]}):l.jsxs(l.Fragment,{children:[l.jsx(vx,{size:14,className:"mr-1"}),"Copy"]})})]}),l.jsx("div",{className:"bg-gray-900 rounded p-2 break-all",children:l.jsx("code",{className:"text-xs text-green-400",children:Pi.getShareUrl(n.shareToken)})}),l.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-700",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(kc,{size:14,className:"mr-1"}),g(n.viewCount)]}),l.jsxs("div",{children:["Last viewed: ",m(n.lastViewedAt)]})]})]}),l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"What viewers can see:"}),l.jsxs("ul",{className:"text-sm text-gray-500 space-y-1",children:[l.jsxs("li",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Player statistics and rankings"]}),l.jsxs("li",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Match history and results"]}),l.jsxs("li",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Hero performance stats"]})]}),l.jsx("p",{className:"text-xs text-gray-600 mt-3",children:"Viewers cannot modify your data. You can disable sharing at any time."})]})]})},Tfe=()=>{const{user:e,isConfigured:n,isLoading:r}=r_(),{playSound:s}=it(),[a,i]=S.useState(()=>{const f=localStorage.getItem("cloudSidebar_collapsed");return f!==null?f==="true":!0}),[o,c]=S.useState("login"),[A,u]=S.useState(0);S.useEffect(()=>{localStorage.setItem("cloudSidebar_collapsed",String(a))},[a]),S.useEffect(()=>{e&&o==="login"?c("profile"):!e&&o!=="login"&&c("login")},[e,o]);const h=()=>{s("buttonClick"),i(!a)},d=f=>{s("buttonClick"),c(f)};return n?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:h,className:`fixed top-20 z-40 p-2 rounded-l-lg transition-all duration-300 ${a?"right-0":"right-80"} bg-orange-600 hover:bg-orange-500 text-white shadow-lg`,"aria-label":a?"Open cloud panel":"Close cloud panel",children:a?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:20}),A>0&&l.jsx("span",{className:"absolute -top-1 -left-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center font-bold",children:A>9?"9+":A})]}):l.jsx(ud,{size:20})}),l.jsxs("div",{className:`fixed top-0 right-0 h-full w-80 bg-gray-900 shadow-xl z-40 transform transition-transform duration-300 flex flex-col ${a?"translate-x-full":"translate-x-0"}`,children:[l.jsxs("div",{className:"bg-orange-600 p-4 flex items-center justify-between flex-shrink-0",children:[l.jsxs("h2",{className:"text-lg font-bold text-white flex items-center",children:[l.jsx(k8,{size:20,className:"mr-2"}),"Cloud Sync"]}),l.jsx("button",{onClick:h,className:"p-1 hover:bg-orange-500 rounded transition-colors","aria-label":"Close panel",children:l.jsx(Bn,{size:20,className:"text-white"})})]}),e&&!r&&l.jsxs("div",{className:"flex border-b border-gray-700 flex-shrink-0",children:[l.jsx("button",{onClick:()=>d("profile"),className:`flex-1 p-3 flex items-center justify-center transition-colors ${o==="profile"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Profile",children:l.jsx(ro,{size:18})}),l.jsxs("button",{onClick:()=>d("friends"),className:`flex-1 p-3 flex items-center justify-center relative transition-colors ${o==="friends"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Friends",children:[l.jsx(ht,{size:18}),A>0&&l.jsx("span",{className:"absolute top-1 right-4 w-4 h-4 bg-red-500 rounded-full text-xs flex items-center justify-center font-bold",children:A>9?"9+":A})]}),l.jsx("button",{onClick:()=>d("sync"),className:`flex-1 p-3 flex items-center justify-center transition-colors ${o==="sync"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Sync",children:l.jsx(zs,{size:18})}),l.jsx("button",{onClick:()=>d("share"),className:`flex-1 p-3 flex items-center justify-center transition-colors ${o==="share"?"bg-gray-800 text-orange-400 border-b-2 border-orange-400":"text-gray-400 hover:text-white hover:bg-gray-800"}`,title:"Share",children:l.jsx(Gc,{size:18})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r?l.jsx("div",{className:"flex items-center justify-center h-32",children:l.jsx(zs,{size:24,className:"animate-spin text-orange-400"})}):e?l.jsxs(l.Fragment,{children:[o==="profile"&&l.jsx(Cfe,{}),o==="friends"&&l.jsx(jfe,{onPendingCountChange:u}),o==="sync"&&l.jsx(Nfe,{}),o==="share"&&l.jsx(Efe,{})]}):l.jsx(_fe,{})})]})]}):null},Ffe=()=>{const{isViewMode:e,ownerDisplayName:n,isLoading:r,error:s,exitViewMode:a}=s_();return r?l.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-blue-600 text-white py-2 px-4 shadow-lg",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-center",children:[l.jsx(At,{size:18,className:"animate-spin mr-2"}),l.jsx("span",{className:"text-sm font-medium",children:"Loading shared stats..."})]})}):s?l.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-red-600 text-white py-2 px-4 shadow-lg",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(la,{size:18,className:"mr-2"}),l.jsx("span",{className:"text-sm font-medium",children:s})]}),l.jsxs("button",{onClick:a,className:"flex items-center bg-red-700 hover:bg-red-800 px-3 py-1 rounded text-sm font-medium transition-colors",children:[l.jsx(Bn,{size:16,className:"mr-1"}),"Go Back"]})]})}):e?l.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-blue-600 text-white py-2 px-4 shadow-lg",children:l.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(kc,{size:18,className:"mr-2"}),l.jsxs("span",{className:"text-sm font-medium",children:["Viewing ",l.jsx("span",{className:"font-bold",children:n}),"'s Stats"]}),l.jsx("span",{className:"ml-2 text-xs bg-blue-700 px-2 py-0.5 rounded",children:"Read-only"})]}),l.jsxs("button",{onClick:a,className:"flex items-center bg-blue-700 hover:bg-blue-800 px-3 py-1 rounded text-sm font-medium transition-colors",children:[l.jsx(Bn,{size:16,className:"mr-1"}),"Exit"]})]})}):null},Ufe=e=>+e;function Ife(e){return e*e}function Pfe(e){return e*(2-e)}function eS(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function Qfe(e){return e*e*e}function Mfe(e){return--e*e*e+1}function Kx(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var a_=3,Dfe=function e(n){n=+n;function r(s){return Math.pow(s,n)}return r.exponent=e,r}(a_),Rfe=function e(n){n=+n;function r(s){return 1-Math.pow(1-s,n)}return r.exponent=e,r}(a_),tS=function e(n){n=+n;function r(s){return((s*=2)<=1?Math.pow(s,n):2-Math.pow(2-s,n))/2}return r.exponent=e,r}(a_),_F=Math.PI,CF=_F/2;function $fe(e){return+e==1?1:1-Math.cos(e*CF)}function Ofe(e){return Math.sin(e*CF)}function nS(e){return(1-Math.cos(_F*e))/2}function so(e){return(Math.pow(2,-10*e)-.0009765625)*1.0009775171065494}function Lfe(e){return so(1-+e)}function Hfe(e){return 1-so(e)}function rS(e){return((e*=2)<=1?so(1-e):2-so(e-1))/2}function zfe(e){return 1-Math.sqrt(1-e*e)}function Kfe(e){return Math.sqrt(1- --e*e)}function sS(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var Gx=4/11,Gfe=6/11,Wfe=8/11,Vfe=3/4,qfe=9/11,Xfe=10/11,Yfe=15/16,Jfe=21/22,Zfe=63/64,qh=1/Gx/Gx;function e0e(e){return 1-bd(1-e)}function bd(e){return(e=+e)<Gx?qh*e*e:e<Wfe?qh*(e-=Gfe)*e+Vfe:e<Xfe?qh*(e-=qfe)*e+Yfe:qh*(e-=Jfe)*e+Zfe}function t0e(e){return((e*=2)<=1?1-bd(1-e):bd(e-1)+1)/2}var i_=1.70158,n0e=function e(n){n=+n;function r(s){return(s=+s)*s*(n*(s-1)+s)}return r.overshoot=e,r}(i_),r0e=function e(n){n=+n;function r(s){return--s*s*((s+1)*n+s)+1}return r.overshoot=e,r}(i_),aS=function e(n){n=+n;function r(s){return((s*=2)<1?s*s*((n+1)*s-n):(s-=2)*s*((n+1)*s+n)+2)/2}return r.overshoot=e,r}(i_),qc=2*Math.PI,o_=1,l_=.3,s0e=function e(n,r){var s=Math.asin(1/(n=Math.max(1,n)))*(r/=qc);function a(i){return n*so(- --i)*Math.sin((s-i)/r)}return a.amplitude=function(i){return e(i,r*qc)},a.period=function(i){return e(n,i)},a}(o_,l_),iS=function e(n,r){var s=Math.asin(1/(n=Math.max(1,n)))*(r/=qc);function a(i){return 1-n*so(i=+i)*Math.sin((i+s)/r)}return a.amplitude=function(i){return e(i,r*qc)},a.period=function(i){return e(n,i)},a}(o_,l_),a0e=function e(n,r){var s=Math.asin(1/(n=Math.max(1,n)))*(r/=qc);function a(i){return((i=i*2-1)<0?n*so(-i)*Math.sin((s-i)/r):2-n*so(i)*Math.sin((s+i)/r))/2}return a.amplitude=function(i){return e(i,r*qc)},a.period=function(i){return e(n,i)},a}(o_,l_);const i0e=Object.freeze(Object.defineProperty({__proto__:null,easeBack:aS,easeBackIn:n0e,easeBackInOut:aS,easeBackOut:r0e,easeBounce:bd,easeBounceIn:e0e,easeBounceInOut:t0e,easeBounceOut:bd,easeCircle:sS,easeCircleIn:zfe,easeCircleInOut:sS,easeCircleOut:Kfe,easeCubic:Kx,easeCubicIn:Qfe,easeCubicInOut:Kx,easeCubicOut:Mfe,easeElastic:iS,easeElasticIn:s0e,easeElasticInOut:a0e,easeElasticOut:iS,easeExp:rS,easeExpIn:Lfe,easeExpInOut:rS,easeExpOut:Hfe,easeLinear:Ufe,easePoly:tS,easePolyIn:Dfe,easePolyInOut:tS,easePolyOut:Rfe,easeQuad:eS,easeQuadIn:Ife,easeQuadInOut:eS,easeQuadOut:Pfe,easeSin:nS,easeSinIn:$fe,easeSinInOut:nS,easeSinOut:Ofe},Symbol.toStringTag,{value:"Module"}));var o0e=typeof za=="object"&&za&&za.Object===Object&&za,BF=o0e,l0e=BF,c0e=typeof self=="object"&&self&&self.Object===Object&&self,A0e=l0e||c0e||Function("return this")(),mi=A0e,u0e=mi,d0e=u0e.Symbol,eh=d0e,oS=eh,SF=Object.prototype,h0e=SF.hasOwnProperty,f0e=SF.toString,DA=oS?oS.toStringTag:void 0;function g0e(e){var n=h0e.call(e,DA),r=e[DA];try{e[DA]=void 0;var s=!0}catch{}var a=f0e.call(e);return s&&(n?e[DA]=r:delete e[DA]),a}var m0e=g0e,p0e=Object.prototype,y0e=p0e.toString;function v0e(e){return y0e.call(e)}var x0e=v0e,lS=eh,w0e=m0e,b0e=x0e,_0e="[object Null]",C0e="[object Undefined]",cS=lS?lS.toStringTag:void 0;function B0e(e){return e==null?e===void 0?C0e:_0e:cS&&cS in Object(e)?w0e(e):b0e(e)}var yl=B0e;function S0e(e,n){return function(r){return e(n(r))}}var kF=S0e,k0e=kF,j0e=k0e(Object.getPrototypeOf,Object),jF=j0e;function N0e(e){return e!=null&&typeof e=="object"}var vl=N0e,E0e=yl,T0e=jF,F0e=vl,U0e="[object Object]",I0e=Function.prototype,P0e=Object.prototype,NF=I0e.toString,Q0e=P0e.hasOwnProperty,M0e=NF.call(Object);function D0e(e){if(!F0e(e)||E0e(e)!=U0e)return!1;var n=T0e(e);if(n===null)return!0;var r=Q0e.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&NF.call(r)==M0e}var R0e=D0e;const gs=Ht(R0e);function $0e(e,n){for(var r=-1,s=e==null?0:e.length,a=Array(s);++r<s;)a[r]=n(e[r],r,e);return a}var c_=$0e,O0e=Array.isArray,xs=O0e,L0e=yl,H0e=vl,z0e="[object Symbol]";function K0e(e){return typeof e=="symbol"||H0e(e)&&L0e(e)==z0e}var Rm=K0e,G0e=xs,W0e=Rm,V0e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,q0e=/^\w*$/;function X0e(e,n){if(G0e(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||W0e(e)?!0:q0e.test(e)||!V0e.test(e)||n!=null&&e in Object(n)}var A_=X0e;function Y0e(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var xl=Y0e;const Wx=Ht(xl);var J0e=yl,Z0e=xl,ege="[object AsyncFunction]",tge="[object Function]",nge="[object GeneratorFunction]",rge="[object Proxy]";function sge(e){if(!Z0e(e))return!1;var n=J0e(e);return n==tge||n==nge||n==ege||n==rge}var EF=sge,age=mi,ige=age["__core-js_shared__"],oge=ige,jy=oge,AS=function(){var e=/[^.]+$/.exec(jy&&jy.keys&&jy.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function lge(e){return!!AS&&AS in e}var cge=lge,Age=Function.prototype,uge=Age.toString;function dge(e){if(e!=null){try{return uge.call(e)}catch{}try{return e+""}catch{}}return""}var TF=dge,hge=EF,fge=cge,gge=xl,mge=TF,pge=/[\\^$.*+?()[\]{}|]/g,yge=/^\[object .+?Constructor\]$/,vge=Function.prototype,xge=Object.prototype,wge=vge.toString,bge=xge.hasOwnProperty,_ge=RegExp("^"+wge.call(bge).replace(pge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Cge(e){if(!gge(e)||fge(e))return!1;var n=hge(e)?_ge:yge;return n.test(mge(e))}var Bge=Cge;function Sge(e,n){return e==null?void 0:e[n]}var kge=Sge,jge=Bge,Nge=kge;function Ege(e,n){var r=Nge(e,n);return jge(r)?r:void 0}var wl=Ege,Tge=wl,Fge=Tge(Object,"create"),$m=Fge,uS=$m;function Uge(){this.__data__=uS?uS(null):{},this.size=0}var Ige=Uge;function Pge(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var Qge=Pge,Mge=$m,Dge="__lodash_hash_undefined__",Rge=Object.prototype,$ge=Rge.hasOwnProperty;function Oge(e){var n=this.__data__;if(Mge){var r=n[e];return r===Dge?void 0:r}return $ge.call(n,e)?n[e]:void 0}var Lge=Oge,Hge=$m,zge=Object.prototype,Kge=zge.hasOwnProperty;function Gge(e){var n=this.__data__;return Hge?n[e]!==void 0:Kge.call(n,e)}var Wge=Gge,Vge=$m,qge="__lodash_hash_undefined__";function Xge(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Vge&&n===void 0?qge:n,this}var Yge=Xge,Jge=Ige,Zge=Qge,eme=Lge,tme=Wge,nme=Yge;function hA(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var s=e[n];this.set(s[0],s[1])}}hA.prototype.clear=Jge;hA.prototype.delete=Zge;hA.prototype.get=eme;hA.prototype.has=tme;hA.prototype.set=nme;var rme=hA;function sme(){this.__data__=[],this.size=0}var ame=sme;function ime(e,n){return e===n||e!==e&&n!==n}var fA=ime,ome=fA;function lme(e,n){for(var r=e.length;r--;)if(ome(e[r][0],n))return r;return-1}var Om=lme,cme=Om,Ame=Array.prototype,ume=Ame.splice;function dme(e){var n=this.__data__,r=cme(n,e);if(r<0)return!1;var s=n.length-1;return r==s?n.pop():ume.call(n,r,1),--this.size,!0}var hme=dme,fme=Om;function gme(e){var n=this.__data__,r=fme(n,e);return r<0?void 0:n[r][1]}var mme=gme,pme=Om;function yme(e){return pme(this.__data__,e)>-1}var vme=yme,xme=Om;function wme(e,n){var r=this.__data__,s=xme(r,e);return s<0?(++this.size,r.push([e,n])):r[s][1]=n,this}var bme=wme,_me=ame,Cme=hme,Bme=mme,Sme=vme,kme=bme;function gA(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var s=e[n];this.set(s[0],s[1])}}gA.prototype.clear=_me;gA.prototype.delete=Cme;gA.prototype.get=Bme;gA.prototype.has=Sme;gA.prototype.set=kme;var Lm=gA,jme=wl,Nme=mi,Eme=jme(Nme,"Map"),u_=Eme,dS=rme,Tme=Lm,Fme=u_;function Ume(){this.size=0,this.__data__={hash:new dS,map:new(Fme||Tme),string:new dS}}var Ime=Ume;function Pme(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var Qme=Pme,Mme=Qme;function Dme(e,n){var r=e.__data__;return Mme(n)?r[typeof n=="string"?"string":"hash"]:r.map}var Hm=Dme,Rme=Hm;function $me(e){var n=Rme(this,e).delete(e);return this.size-=n?1:0,n}var Ome=$me,Lme=Hm;function Hme(e){return Lme(this,e).get(e)}var zme=Hme,Kme=Hm;function Gme(e){return Kme(this,e).has(e)}var Wme=Gme,Vme=Hm;function qme(e,n){var r=Vme(this,e),s=r.size;return r.set(e,n),this.size+=r.size==s?0:1,this}var Xme=qme,Yme=Ime,Jme=Ome,Zme=zme,epe=Wme,tpe=Xme;function mA(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var s=e[n];this.set(s[0],s[1])}}mA.prototype.clear=Yme;mA.prototype.delete=Jme;mA.prototype.get=Zme;mA.prototype.has=epe;mA.prototype.set=tpe;var d_=mA,FF=d_,npe="Expected a function";function h_(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(npe);var r=function(){var s=arguments,a=n?n.apply(this,s):s[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,s);return r.cache=i.set(a,o)||i,o};return r.cache=new(h_.Cache||FF),r}h_.Cache=FF;var UF=h_;const IF=Ht(UF);var rpe=UF,spe=500;function ape(e){var n=rpe(e,function(s){return r.size===spe&&r.clear(),s}),r=n.cache;return n}var ipe=ape,ope=ipe,lpe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cpe=/\\(\\)?/g,Ape=ope(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(lpe,function(r,s,a,i){n.push(a?i.replace(cpe,"$1"):s||r)}),n}),upe=Ape,hS=eh,dpe=c_,hpe=xs,fpe=Rm,gpe=1/0,fS=hS?hS.prototype:void 0,gS=fS?fS.toString:void 0;function PF(e){if(typeof e=="string")return e;if(hpe(e))return dpe(e,PF)+"";if(fpe(e))return gS?gS.call(e):"";var n=e+"";return n=="0"&&1/e==-gpe?"-0":n}var mpe=PF,ppe=mpe;function ype(e){return e==null?"":ppe(e)}var QF=ype,vpe=xs,xpe=A_,wpe=upe,bpe=QF;function _pe(e,n){return vpe(e)?e:xpe(e,n)?[e]:wpe(bpe(e))}var zm=_pe,Cpe=Rm,Bpe=1/0;function Spe(e){if(typeof e=="string"||Cpe(e))return e;var n=e+"";return n=="0"&&1/e==-Bpe?"-0":n}var th=Spe,kpe=zm,jpe=th;function Npe(e,n){n=kpe(n,e);for(var r=0,s=n.length;e!=null&&r<s;)e=e[jpe(n[r++])];return r&&r==s?e:void 0}var Km=Npe,Epe=Lm;function Tpe(){this.__data__=new Epe,this.size=0}var Fpe=Tpe;function Upe(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}var Ipe=Upe;function Ppe(e){return this.__data__.get(e)}var Qpe=Ppe;function Mpe(e){return this.__data__.has(e)}var Dpe=Mpe,Rpe=Lm,$pe=u_,Ope=d_,Lpe=200;function Hpe(e,n){var r=this.__data__;if(r instanceof Rpe){var s=r.__data__;if(!$pe||s.length<Lpe-1)return s.push([e,n]),this.size=++r.size,this;r=this.__data__=new Ope(s)}return r.set(e,n),this.size=r.size,this}var zpe=Hpe,Kpe=Lm,Gpe=Fpe,Wpe=Ipe,Vpe=Qpe,qpe=Dpe,Xpe=zpe;function pA(e){var n=this.__data__=new Kpe(e);this.size=n.size}pA.prototype.clear=Gpe;pA.prototype.delete=Wpe;pA.prototype.get=Vpe;pA.prototype.has=qpe;pA.prototype.set=Xpe;var MF=pA,Ype="__lodash_hash_undefined__";function Jpe(e){return this.__data__.set(e,Ype),this}var Zpe=Jpe;function eye(e){return this.__data__.has(e)}var tye=eye,nye=d_,rye=Zpe,sye=tye;function W0(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new nye;++n<r;)this.add(e[n])}W0.prototype.add=W0.prototype.push=rye;W0.prototype.has=sye;var DF=W0;function aye(e,n){for(var r=-1,s=e==null?0:e.length;++r<s;)if(n(e[r],r,e))return!0;return!1}var iye=aye;function oye(e,n){return e.has(n)}var RF=oye,lye=DF,cye=iye,Aye=RF,uye=1,dye=2;function hye(e,n,r,s,a,i){var o=r&uye,c=e.length,A=n.length;if(c!=A&&!(o&&A>c))return!1;var u=i.get(e),h=i.get(n);if(u&&h)return u==n&&h==e;var d=-1,f=!0,g=r&dye?new lye:void 0;for(i.set(e,n),i.set(n,e);++d<c;){var m=e[d],y=n[d];if(s)var x=o?s(y,m,d,n,e,i):s(m,y,d,e,n,i);if(x!==void 0){if(x)continue;f=!1;break}if(g){if(!cye(n,function(p,v){if(!Aye(g,v)&&(m===p||a(m,p,r,s,i)))return g.push(v)})){f=!1;break}}else if(!(m===y||a(m,y,r,s,i))){f=!1;break}}return i.delete(e),i.delete(n),f}var $F=hye,fye=mi,gye=fye.Uint8Array,mye=gye;function pye(e){var n=-1,r=Array(e.size);return e.forEach(function(s,a){r[++n]=[a,s]}),r}var yye=pye;function vye(e){var n=-1,r=Array(e.size);return e.forEach(function(s){r[++n]=s}),r}var f_=vye,mS=eh,pS=mye,xye=fA,wye=$F,bye=yye,_ye=f_,Cye=1,Bye=2,Sye="[object Boolean]",kye="[object Date]",jye="[object Error]",Nye="[object Map]",Eye="[object Number]",Tye="[object RegExp]",Fye="[object Set]",Uye="[object String]",Iye="[object Symbol]",Pye="[object ArrayBuffer]",Qye="[object DataView]",yS=mS?mS.prototype:void 0,Ny=yS?yS.valueOf:void 0;function Mye(e,n,r,s,a,i,o){switch(r){case Qye:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Pye:return!(e.byteLength!=n.byteLength||!i(new pS(e),new pS(n)));case Sye:case kye:case Eye:return xye(+e,+n);case jye:return e.name==n.name&&e.message==n.message;case Tye:case Uye:return e==n+"";case Nye:var c=bye;case Fye:var A=s&Cye;if(c||(c=_ye),e.size!=n.size&&!A)return!1;var u=o.get(e);if(u)return u==n;s|=Bye,o.set(e,n);var h=wye(c(e),c(n),s,a,i,o);return o.delete(e),h;case Iye:if(Ny)return Ny.call(e)==Ny.call(n)}return!1}var Dye=Mye;function Rye(e,n){for(var r=-1,s=n.length,a=e.length;++r<s;)e[a+r]=n[r];return e}var g_=Rye,$ye=g_,Oye=xs;function Lye(e,n,r){var s=n(e);return Oye(e)?s:$ye(s,r(e))}var OF=Lye;function Hye(e,n){for(var r=-1,s=e==null?0:e.length,a=0,i=[];++r<s;){var o=e[r];n(o,r,e)&&(i[a++]=o)}return i}var zye=Hye;function Kye(){return[]}var LF=Kye,Gye=zye,Wye=LF,Vye=Object.prototype,qye=Vye.propertyIsEnumerable,vS=Object.getOwnPropertySymbols,Xye=vS?function(e){return e==null?[]:(e=Object(e),Gye(vS(e),function(n){return qye.call(e,n)}))}:Wye,HF=Xye;function Yye(e,n){for(var r=-1,s=Array(e);++r<e;)s[r]=n(r);return s}var Jye=Yye,Zye=yl,eve=vl,tve="[object Arguments]";function nve(e){return eve(e)&&Zye(e)==tve}var rve=nve,xS=rve,sve=vl,zF=Object.prototype,ave=zF.hasOwnProperty,ive=zF.propertyIsEnumerable,ove=xS(function(){return arguments}())?xS:function(e){return sve(e)&&ave.call(e,"callee")&&!ive.call(e,"callee")},Gm=ove,V0={exports:{}};function lve(){return!1}var cve=lve;V0.exports;(function(e,n){var r=mi,s=cve,a=n&&!n.nodeType&&n,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,c=o?r.Buffer:void 0,A=c?c.isBuffer:void 0,u=A||s;e.exports=u})(V0,V0.exports);var m_=V0.exports,Ave=9007199254740991,uve=/^(?:0|[1-9]\d*)$/;function dve(e,n){var r=typeof e;return n=n??Ave,!!n&&(r=="number"||r!="symbol"&&uve.test(e))&&e>-1&&e%1==0&&e<n}var Wm=dve,hve=9007199254740991;function fve(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=hve}var p_=fve,gve=yl,mve=p_,pve=vl,yve="[object Arguments]",vve="[object Array]",xve="[object Boolean]",wve="[object Date]",bve="[object Error]",_ve="[object Function]",Cve="[object Map]",Bve="[object Number]",Sve="[object Object]",kve="[object RegExp]",jve="[object Set]",Nve="[object String]",Eve="[object WeakMap]",Tve="[object ArrayBuffer]",Fve="[object DataView]",Uve="[object Float32Array]",Ive="[object Float64Array]",Pve="[object Int8Array]",Qve="[object Int16Array]",Mve="[object Int32Array]",Dve="[object Uint8Array]",Rve="[object Uint8ClampedArray]",$ve="[object Uint16Array]",Ove="[object Uint32Array]",Ut={};Ut[Uve]=Ut[Ive]=Ut[Pve]=Ut[Qve]=Ut[Mve]=Ut[Dve]=Ut[Rve]=Ut[$ve]=Ut[Ove]=!0;Ut[yve]=Ut[vve]=Ut[Tve]=Ut[xve]=Ut[Fve]=Ut[wve]=Ut[bve]=Ut[_ve]=Ut[Cve]=Ut[Bve]=Ut[Sve]=Ut[kve]=Ut[jve]=Ut[Nve]=Ut[Eve]=!1;function Lve(e){return pve(e)&&mve(e.length)&&!!Ut[gve(e)]}var Hve=Lve;function zve(e){return function(n){return e(n)}}var y_=zve,q0={exports:{}};q0.exports;(function(e,n){var r=BF,s=n&&!n.nodeType&&n,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&r.process,c=function(){try{var A=a&&a.require&&a.require("util").types;return A||o&&o.binding&&o.binding("util")}catch{}}();e.exports=c})(q0,q0.exports);var KF=q0.exports,Kve=Hve,Gve=y_,wS=KF,bS=wS&&wS.isTypedArray,Wve=bS?Gve(bS):Kve,v_=Wve,Vve=Jye,qve=Gm,Xve=xs,Yve=m_,Jve=Wm,Zve=v_,exe=Object.prototype,txe=exe.hasOwnProperty;function nxe(e,n){var r=Xve(e),s=!r&&qve(e),a=!r&&!s&&Yve(e),i=!r&&!s&&!a&&Zve(e),o=r||s||a||i,c=o?Vve(e.length,String):[],A=c.length;for(var u in e)(n||txe.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Jve(u,A)))&&c.push(u);return c}var GF=nxe,rxe=Object.prototype;function sxe(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||rxe;return e===r}var x_=sxe,axe=kF,ixe=axe(Object.keys,Object),oxe=ixe,lxe=x_,cxe=oxe,Axe=Object.prototype,uxe=Axe.hasOwnProperty;function dxe(e){if(!lxe(e))return cxe(e);var n=[];for(var r in Object(e))uxe.call(e,r)&&r!="constructor"&&n.push(r);return n}var WF=dxe,hxe=EF,fxe=p_;function gxe(e){return e!=null&&fxe(e.length)&&!hxe(e)}var yA=gxe,mxe=GF,pxe=WF,yxe=yA;function vxe(e){return yxe(e)?mxe(e):pxe(e)}var w_=vxe,xxe=OF,wxe=HF,bxe=w_;function _xe(e){return xxe(e,bxe,wxe)}var Cxe=_xe,_S=Cxe,Bxe=1,Sxe=Object.prototype,kxe=Sxe.hasOwnProperty;function jxe(e,n,r,s,a,i){var o=r&Bxe,c=_S(e),A=c.length,u=_S(n),h=u.length;if(A!=h&&!o)return!1;for(var d=A;d--;){var f=c[d];if(!(o?f in n:kxe.call(n,f)))return!1}var g=i.get(e),m=i.get(n);if(g&&m)return g==n&&m==e;var y=!0;i.set(e,n),i.set(n,e);for(var x=o;++d<A;){f=c[d];var p=e[f],v=n[f];if(s)var b=o?s(v,p,f,n,e,i):s(p,v,f,e,n,i);if(!(b===void 0?p===v||a(p,v,r,s,i):b)){y=!1;break}x||(x=f=="constructor")}if(y&&!x){var w=e.constructor,_=n.constructor;w!=_&&"constructor"in e&&"constructor"in n&&!(typeof w=="function"&&w instanceof w&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return i.delete(e),i.delete(n),y}var Nxe=jxe,Exe=wl,Txe=mi,Fxe=Exe(Txe,"DataView"),Uxe=Fxe,Ixe=wl,Pxe=mi,Qxe=Ixe(Pxe,"Promise"),Mxe=Qxe,Dxe=wl,Rxe=mi,$xe=Dxe(Rxe,"Set"),VF=$xe,Oxe=wl,Lxe=mi,Hxe=Oxe(Lxe,"WeakMap"),zxe=Hxe,Vx=Uxe,qx=u_,Xx=Mxe,Yx=VF,Jx=zxe,qF=yl,vA=TF,CS="[object Map]",Kxe="[object Object]",BS="[object Promise]",SS="[object Set]",kS="[object WeakMap]",jS="[object DataView]",Gxe=vA(Vx),Wxe=vA(qx),Vxe=vA(Xx),qxe=vA(Yx),Xxe=vA(Jx),So=qF;(Vx&&So(new Vx(new ArrayBuffer(1)))!=jS||qx&&So(new qx)!=CS||Xx&&So(Xx.resolve())!=BS||Yx&&So(new Yx)!=SS||Jx&&So(new Jx)!=kS)&&(So=function(e){var n=qF(e),r=n==Kxe?e.constructor:void 0,s=r?vA(r):"";if(s)switch(s){case Gxe:return jS;case Wxe:return CS;case Vxe:return BS;case qxe:return SS;case Xxe:return kS}return n});var XF=So,Ey=MF,Yxe=$F,Jxe=Dye,Zxe=Nxe,NS=XF,ES=xs,TS=m_,e1e=v_,t1e=1,FS="[object Arguments]",US="[object Array]",Xh="[object Object]",n1e=Object.prototype,IS=n1e.hasOwnProperty;function r1e(e,n,r,s,a,i){var o=ES(e),c=ES(n),A=o?US:NS(e),u=c?US:NS(n);A=A==FS?Xh:A,u=u==FS?Xh:u;var h=A==Xh,d=u==Xh,f=A==u;if(f&&TS(e)){if(!TS(n))return!1;o=!0,h=!1}if(f&&!h)return i||(i=new Ey),o||e1e(e)?Yxe(e,n,r,s,a,i):Jxe(e,n,A,r,s,a,i);if(!(r&t1e)){var g=h&&IS.call(e,"__wrapped__"),m=d&&IS.call(n,"__wrapped__");if(g||m){var y=g?e.value():e,x=m?n.value():n;return i||(i=new Ey),a(y,x,r,s,i)}}return f?(i||(i=new Ey),Zxe(e,n,r,s,a,i)):!1}var s1e=r1e,a1e=s1e,PS=vl;function YF(e,n,r,s,a){return e===n?!0:e==null||n==null||!PS(e)&&!PS(n)?e!==e&&n!==n:a1e(e,n,r,s,YF,a)}var b_=YF,i1e=MF,o1e=b_,l1e=1,c1e=2;function A1e(e,n,r,s){var a=r.length,i=a,o=!s;if(e==null)return!i;for(e=Object(e);a--;){var c=r[a];if(o&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<i;){c=r[a];var A=c[0],u=e[A],h=c[1];if(o&&c[2]){if(u===void 0&&!(A in e))return!1}else{var d=new i1e;if(s)var f=s(u,h,A,e,n,d);if(!(f===void 0?o1e(h,u,l1e|c1e,s,d):f))return!1}}return!0}var u1e=A1e,d1e=xl;function h1e(e){return e===e&&!d1e(e)}var JF=h1e,f1e=JF,g1e=w_;function m1e(e){for(var n=g1e(e),r=n.length;r--;){var s=n[r],a=e[s];n[r]=[s,a,f1e(a)]}return n}var p1e=m1e;function y1e(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}var ZF=y1e,v1e=u1e,x1e=p1e,w1e=ZF;function b1e(e){var n=x1e(e);return n.length==1&&n[0][2]?w1e(n[0][0],n[0][1]):function(r){return r===e||v1e(r,e,n)}}var _1e=b1e,C1e=Km;function B1e(e,n,r){var s=e==null?void 0:C1e(e,n);return s===void 0?r:s}var S1e=B1e;function k1e(e,n){return e!=null&&n in Object(e)}var j1e=k1e,N1e=zm,E1e=Gm,T1e=xs,F1e=Wm,U1e=p_,I1e=th;function P1e(e,n,r){n=N1e(n,e);for(var s=-1,a=n.length,i=!1;++s<a;){var o=I1e(n[s]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&U1e(a)&&F1e(o,a)&&(T1e(e)||E1e(e)))}var Q1e=P1e,M1e=j1e,D1e=Q1e;function R1e(e,n){return e!=null&&D1e(e,n,M1e)}var eU=R1e,$1e=b_,O1e=S1e,L1e=eU,H1e=A_,z1e=JF,K1e=ZF,G1e=th,W1e=1,V1e=2;function q1e(e,n){return H1e(e)&&z1e(n)?K1e(G1e(e),n):function(r){var s=O1e(r,e);return s===void 0&&s===n?L1e(r,e):$1e(n,s,W1e|V1e)}}var X1e=q1e;function Y1e(e){return e}var nh=Y1e;const xA=Ht(nh);function J1e(e){return function(n){return n==null?void 0:n[e]}}var Z1e=J1e,ewe=Km;function twe(e){return function(n){return ewe(n,e)}}var nwe=twe,rwe=Z1e,swe=nwe,awe=A_,iwe=th;function owe(e){return awe(e)?rwe(iwe(e)):swe(e)}var tU=owe;const nU=Ht(tU);var lwe=_1e,cwe=X1e,Awe=nh,uwe=xs,dwe=tU;function hwe(e){return typeof e=="function"?e:e==null?Awe:typeof e=="object"?uwe(e)?cwe(e[0],e[1]):lwe(e):dwe(e)}var Vm=hwe;function fwe(e){return function(n,r,s){for(var a=-1,i=Object(n),o=s(n),c=o.length;c--;){var A=o[e?c:++a];if(r(i[A],A,i)===!1)break}return n}}var gwe=fwe,mwe=gwe,pwe=mwe(),ywe=pwe,vwe=ywe,xwe=w_;function wwe(e,n){return e&&vwe(e,n,xwe)}var bwe=wwe,_we=yA;function Cwe(e,n){return function(r,s){if(r==null)return r;if(!_we(r))return e(r,s);for(var a=r.length,i=n?a:-1,o=Object(r);(n?i--:++i<a)&&s(o[i],i,o)!==!1;);return r}}var Bwe=Cwe,Swe=bwe,kwe=Bwe,jwe=kwe(Swe),Nwe=jwe,Ewe=Nwe,Twe=yA;function Fwe(e,n){var r=-1,s=Twe(e)?Array(e.length):[];return Ewe(e,function(a,i,o){s[++r]=n(a,i,o)}),s}var Uwe=Fwe;function Iwe(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}var Pwe=Iwe,QS=Rm;function Qwe(e,n){if(e!==n){var r=e!==void 0,s=e===null,a=e===e,i=QS(e),o=n!==void 0,c=n===null,A=n===n,u=QS(n);if(!c&&!u&&!i&&e>n||i&&o&&A&&!c&&!u||s&&o&&A||!r&&A||!a)return 1;if(!s&&!i&&!u&&e<n||u&&r&&a&&!s&&!i||c&&r&&a||!o&&a||!A)return-1}return 0}var Mwe=Qwe,Dwe=Mwe;function Rwe(e,n,r){for(var s=-1,a=e.criteria,i=n.criteria,o=a.length,c=r.length;++s<o;){var A=Dwe(a[s],i[s]);if(A){if(s>=c)return A;var u=r[s];return A*(u=="desc"?-1:1)}}return e.index-n.index}var $we=Rwe,Ty=c_,Owe=Km,Lwe=Vm,Hwe=Uwe,zwe=Pwe,Kwe=y_,Gwe=$we,Wwe=nh,Vwe=xs;function qwe(e,n,r){n.length?n=Ty(n,function(i){return Vwe(i)?function(o){return Owe(o,i.length===1?i[0]:i)}:i}):n=[Wwe];var s=-1;n=Ty(n,Kwe(Lwe));var a=Hwe(e,function(i,o,c){var A=Ty(n,function(u){return u(i)});return{criteria:A,index:++s,value:i}});return zwe(a,function(i,o){return Gwe(i,o,r)})}var Xwe=qwe,Ywe=Xwe,MS=xs;function Jwe(e,n,r,s){return e==null?[]:(MS(n)||(n=n==null?[]:[n]),r=s?void 0:r,MS(r)||(r=r==null?[]:[r]),Ywe(e,n,r))}var Zwe=Jwe;const __=Ht(Zwe);function C_(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function rU(e,n){var r=Object.create(e.prototype);for(var s in n)r[s]=n[s];return r}function rh(){}var _d=.7,X0=1/_d,Tc="\\s*([+-]?\\d+)\\s*",Cd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ebe=/^#([0-9a-f]{3,8})$/,tbe=new RegExp(`^rgb\\(${Tc},${Tc},${Tc}\\)$`),nbe=new RegExp(`^rgb\\(${ma},${ma},${ma}\\)$`),rbe=new RegExp(`^rgba\\(${Tc},${Tc},${Tc},${Cd}\\)$`),sbe=new RegExp(`^rgba\\(${ma},${ma},${ma},${Cd}\\)$`),abe=new RegExp(`^hsl\\(${Cd},${ma},${ma}\\)$`),ibe=new RegExp(`^hsla\\(${Cd},${ma},${ma},${Cd}\\)$`),DS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};C_(rh,rl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:RS,formatHex:RS,formatHex8:obe,formatHsl:lbe,formatRgb:$S,toString:$S});function RS(){return this.rgb().formatHex()}function obe(){return this.rgb().formatHex8()}function lbe(){return sU(this).formatHsl()}function $S(){return this.rgb().formatRgb()}function rl(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=ebe.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?OS(n):r===3?new Cr(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Yh(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Yh(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=tbe.exec(e))?new Cr(n[1],n[2],n[3],1):(n=nbe.exec(e))?new Cr(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=rbe.exec(e))?Yh(n[1],n[2],n[3],n[4]):(n=sbe.exec(e))?Yh(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=abe.exec(e))?zS(n[1],n[2]/100,n[3]/100,1):(n=ibe.exec(e))?zS(n[1],n[2]/100,n[3]/100,n[4]):DS.hasOwnProperty(e)?OS(DS[e]):e==="transparent"?new Cr(NaN,NaN,NaN,0):null}function OS(e){return new Cr(e>>16&255,e>>8&255,e&255,1)}function Yh(e,n,r,s){return s<=0&&(e=n=r=NaN),new Cr(e,n,r,s)}function cbe(e){return e instanceof rh||(e=rl(e)),e?(e=e.rgb(),new Cr(e.r,e.g,e.b,e.opacity)):new Cr}function Zx(e,n,r,s){return arguments.length===1?cbe(e):new Cr(e,n,r,s??1)}function Cr(e,n,r,s){this.r=+e,this.g=+n,this.b=+r,this.opacity=+s}C_(Cr,Zx,rU(rh,{brighter(e){return e=e==null?X0:Math.pow(X0,e),new Cr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_d:Math.pow(_d,e),new Cr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Cr(Ho(this.r),Ho(this.g),Ho(this.b),Y0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LS,formatHex:LS,formatHex8:Abe,formatRgb:HS,toString:HS}));function LS(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}`}function Abe(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}${Mo((isNaN(this.opacity)?1:this.opacity)*255)}`}function HS(){const e=Y0(this.opacity);return`${e===1?"rgb(":"rgba("}${Ho(this.r)}, ${Ho(this.g)}, ${Ho(this.b)}${e===1?")":`, ${e})`}`}function Y0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ho(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mo(e){return e=Ho(e),(e<16?"0":"")+e.toString(16)}function zS(e,n,r,s){return s<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new Qs(e,n,r,s)}function sU(e){if(e instanceof Qs)return new Qs(e.h,e.s,e.l,e.opacity);if(e instanceof rh||(e=rl(e)),!e)return new Qs;if(e instanceof Qs)return e;e=e.rgb();var n=e.r/255,r=e.g/255,s=e.b/255,a=Math.min(n,r,s),i=Math.max(n,r,s),o=NaN,c=i-a,A=(i+a)/2;return c?(n===i?o=(r-s)/c+(r<s)*6:r===i?o=(s-n)/c+2:o=(n-r)/c+4,c/=A<.5?i+a:2-i-a,o*=60):c=A>0&&A<1?0:o,new Qs(o,c,A,e.opacity)}function ube(e,n,r,s){return arguments.length===1?sU(e):new Qs(e,n,r,s??1)}function Qs(e,n,r,s){this.h=+e,this.s=+n,this.l=+r,this.opacity=+s}C_(Qs,ube,rU(rh,{brighter(e){return e=e==null?X0:Math.pow(X0,e),new Qs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_d:Math.pow(_d,e),new Qs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*n,a=2*r-s;return new Cr(Fy(e>=240?e-240:e+120,a,s),Fy(e,a,s),Fy(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Qs(KS(this.h),Jh(this.s),Jh(this.l),Y0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Y0(this.opacity);return`${e===1?"hsl(":"hsla("}${KS(this.h)}, ${Jh(this.s)*100}%, ${Jh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function KS(e){return e=(e||0)%360,e<0?e+360:e}function Jh(e){return Math.max(0,Math.min(1,e||0))}function Fy(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const B_=e=>()=>e;function dbe(e,n){return function(r){return e+r*n}}function hbe(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(s){return Math.pow(e+s*n,r)}}function fbe(e){return(e=+e)==1?aU:function(n,r){return r-n?hbe(n,r,e):B_(isNaN(n)?r:n)}}function aU(e,n){var r=n-e;return r?dbe(e,r):B_(isNaN(e)?n:e)}const J0=function e(n){var r=fbe(n);function s(a,i){var o=r((a=Zx(a)).r,(i=Zx(i)).r),c=r(a.g,i.g),A=r(a.b,i.b),u=aU(a.opacity,i.opacity);return function(h){return a.r=o(h),a.g=c(h),a.b=A(h),a.opacity=u(h),a+""}}return s.gamma=e,s}(1);function gbe(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,s=n.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=e[a]*(1-i)+n[a]*i;return s}}function mbe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pbe(e,n){var r=n?n.length:0,s=e?Math.min(r,e.length):0,a=new Array(s),i=new Array(r),o;for(o=0;o<s;++o)a[o]=ba(e[o],n[o]);for(;o<r;++o)i[o]=n[o];return function(c){for(o=0;o<s;++o)i[o]=a[o](c);return i}}function ybe(e,n){var r=new Date;return e=+e,n=+n,function(s){return r.setTime(e*(1-s)+n*s),r}}function Is(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function vbe(e,n){var r={},s={},a;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(a in n)a in e?r[a]=ba(e[a],n[a]):s[a]=n[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var e1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uy=new RegExp(e1.source,"g");function xbe(e){return function(){return e}}function wbe(e){return function(n){return e(n)+""}}function iU(e,n){var r=e1.lastIndex=Uy.lastIndex=0,s,a,i,o=-1,c=[],A=[];for(e=e+"",n=n+"";(s=e1.exec(e))&&(a=Uy.exec(n));)(i=a.index)>r&&(i=n.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(s=s[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,A.push({i:o,x:Is(s,a)})),r=Uy.lastIndex;return r<n.length&&(i=n.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?A[0]?wbe(A[0].x):xbe(n):(n=A.length,function(u){for(var h=0,d;h<n;++h)c[(d=A[h]).i]=d.x(u);return c.join("")})}function ba(e,n){var r=typeof n,s;return n==null||r==="boolean"?B_(n):(r==="number"?Is:r==="string"?(s=rl(n))?(n=s,J0):iU:n instanceof rl?J0:n instanceof Date?ybe:mbe(n)?gbe:Array.isArray(n)?pbe:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?vbe:Is)(e,n)}function S_(e,n){return e=+e,n=+n,function(r){return Math.round(e*(1-r)+n*r)}}var GS=180/Math.PI,t1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oU(e,n,r,s,a,i){var o,c,A;return(o=Math.sqrt(e*e+n*n))&&(e/=o,n/=o),(A=e*r+n*s)&&(r-=e*A,s-=n*A),(c=Math.sqrt(r*r+s*s))&&(r/=c,s/=c,A/=c),e*s<n*r&&(e=-e,n=-n,A=-A,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(n,e)*GS,skewX:Math.atan(A)*GS,scaleX:o,scaleY:c}}var Zh;function bbe(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?t1:oU(n.a,n.b,n.c,n.d,n.e,n.f)}function _be(e){return e==null||(Zh||(Zh=document.createElementNS("http://www.w3.org/2000/svg","g")),Zh.setAttribute("transform",e),!(e=Zh.transform.baseVal.consolidate()))?t1:(e=e.matrix,oU(e.a,e.b,e.c,e.d,e.e,e.f))}function lU(e,n,r,s){function a(u){return u.length?u.pop()+" ":""}function i(u,h,d,f,g,m){if(u!==d||h!==f){var y=g.push("translate(",null,n,null,r);m.push({i:y-4,x:Is(u,d)},{i:y-2,x:Is(h,f)})}else(d||f)&&g.push("translate("+d+n+f+r)}function o(u,h,d,f){u!==h?(u-h>180?h+=360:h-u>180&&(u+=360),f.push({i:d.push(a(d)+"rotate(",null,s)-2,x:Is(u,h)})):h&&d.push(a(d)+"rotate("+h+s)}function c(u,h,d,f){u!==h?f.push({i:d.push(a(d)+"skewX(",null,s)-2,x:Is(u,h)}):h&&d.push(a(d)+"skewX("+h+s)}function A(u,h,d,f,g,m){if(u!==d||h!==f){var y=g.push(a(g)+"scale(",null,",",null,")");m.push({i:y-4,x:Is(u,d)},{i:y-2,x:Is(h,f)})}else(d!==1||f!==1)&&g.push(a(g)+"scale("+d+","+f+")")}return function(u,h){var d=[],f=[];return u=e(u),h=e(h),i(u.translateX,u.translateY,h.translateX,h.translateY,d,f),o(u.rotate,h.rotate,d,f),c(u.skewX,h.skewX,d,f),A(u.scaleX,u.scaleY,h.scaleX,h.scaleY,d,f),u=h=null,function(g){for(var m=-1,y=f.length,x;++m<y;)d[(x=f[m]).i]=x.x(g);return d.join("")}}}var Cbe=lU(bbe,"px, ","px)","deg)"),Bbe=lU(_be,", ",")",")"),Sbe=1e-12;function WS(e){return((e=Math.exp(e))+1/e)/2}function kbe(e){return((e=Math.exp(e))-1/e)/2}function jbe(e){return((e=Math.exp(2*e))-1)/(e+1)}const Nbe=function e(n,r,s){function a(i,o){var c=i[0],A=i[1],u=i[2],h=o[0],d=o[1],f=o[2],g=h-c,m=d-A,y=g*g+m*m,x,p;if(y<Sbe)p=Math.log(f/u)/n,x=function(k){return[c+k*g,A+k*m,u*Math.exp(n*k*p)]};else{var v=Math.sqrt(y),b=(f*f-u*u+s*y)/(2*u*r*v),w=(f*f-u*u-s*y)/(2*f*r*v),_=Math.log(Math.sqrt(b*b+1)-b),C=Math.log(Math.sqrt(w*w+1)-w);p=(C-_)/n,x=function(k){var j=k*p,B=WS(_),E=u/(r*v)*(B*jbe(n*j+_)-kbe(_));return[c+E*g,A+E*m,u*B/WS(n*j+_)]}}return x.duration=p*1e3*n/Math.SQRT2,x}return a.rho=function(i){var o=Math.max(.001,+i),c=o*o,A=c*c;return e(o,c,A)},a}(Math.SQRT2,2,4);function Ebe(e,n){n===void 0&&(n=e,e=ba);for(var r=0,s=n.length-1,a=n[0],i=new Array(s<0?0:s);r<s;)i[r]=e(a,a=n[++r]);return function(o){var c=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[c](o-c)}}const Z0=function(e){if(e!==null)switch(typeof e){case"undefined":return!1;case"number":return!isNaN(e)&&e!==Number.POSITIVE_INFINITY&&e!==Number.NEGATIVE_INFINITY;case"string":return!0;case"boolean":return!1;case"object":return e instanceof Date||Array.isArray(e)||gs(e);case"function":return!0}return!1},cU=function(e,n,r){return r===void 0&&(r=0),function(s){return s<r?e:n}},AU=function(e,n){return function(r){return r>=1?n:function(){const s=typeof e=="function"?e.apply(this,arguments):e,a=typeof n=="function"?n.apply(this,arguments):n;return ba(s,a)(r)}}},uU=function(e,n){const r=(u,h)=>u===h||!Z0(u)||!Z0(h)?cU(u,h):typeof u=="function"||typeof h=="function"?AU(u,h):typeof u=="object"&&gs(u)||typeof h=="object"&&gs(h)?uU(u,h):ba(u,h),s=u=>Array.isArray(u)?__(u,"key"):u,a={},i={};let o=e,c=n,A;(o===null||typeof o!="object")&&(o={}),(c===null||typeof c!="object")&&(c={});for(A in c)A in o?a[A]=r(s(o[A]),s(c[A])):i[A]=c[A];return function(u){for(A in a)i[A]=a[A](u);return i}},Tbe=function(e,n){const r=s=>typeof s=="string"?s.replace(/,/g,""):s;return ba(r(e),r(n))},Fbe=function(e,n){return e===n||!Z0(e)||!Z0(n)?cU(e,n):typeof e=="function"||typeof n=="function"?AU(e,n):gs(e)||gs(n)?uU(e,n):typeof e=="string"||typeof n=="string"?Tbe(e,n):ba(e,n)};var Xc=0,cu=0,RA=0,dU=1e3,eg,Au,tg=0,sl=0,qm=0,Bd=typeof performance=="object"&&performance.now?performance:Date,hU=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Sd(){return sl||(hU(Ube),sl=Bd.now()+qm)}function Ube(){sl=0}function ng(){this._call=this._time=this._next=null}ng.prototype=Xm.prototype={constructor:ng,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Sd():+r)+(n==null?0:+n),!this._next&&Au!==this&&(Au?Au._next=this:eg=this,Au=this),this._call=e,this._time=r,n1()},stop:function(){this._call&&(this._call=null,this._time=1/0,n1())}};function Xm(e,n,r){var s=new ng;return s.restart(e,n,r),s}function Ibe(){Sd(),++Xc;for(var e=eg,n;e;)(n=sl-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Xc}function VS(){sl=(tg=Bd.now())+qm,Xc=cu=0;try{Ibe()}finally{Xc=0,Qbe(),sl=0}}function Pbe(){var e=Bd.now(),n=e-tg;n>dU&&(qm-=n,tg=e)}function Qbe(){for(var e,n=eg,r,s=1/0;n;)n._call?(s>n._time&&(s=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:eg=r);Au=e,n1(s)}function n1(e){if(!Xc){cu&&(cu=clearTimeout(cu));var n=e-sl;n>24?(e<1/0&&(cu=setTimeout(VS,e-Bd.now()-qm)),RA&&(RA=clearInterval(RA))):(RA||(tg=Bd.now(),RA=setInterval(Pbe,dU)),Xc=1,hU(VS))}}function qS(e,n,r){var s=new ng;return n=n==null?0:+n,s.restart(a=>{s.stop(),e(a+n)},n,r),s}class XS{constructor(){de(this,"loop",()=>{this.subscribers.forEach(n=>{n.callback(Sd()-n.startTime,n.duration)})});this.shouldAnimate=!0,this.subscribers=[],this.timer=null,this.activeSubscriptions=0}bypassAnimation(){this.shouldAnimate=!1}resumeAnimation(){this.shouldAnimate=!0}start(){this.timer||(this.timer=Xm(this.loop))}stop(){this.timer&&(this.timer.stop(),this.timer=null)}subscribe(n,r){const s=this.subscribers.push({startTime:Sd(),callback:n,duration:this.shouldAnimate?r:0});return this.activeSubscriptions++,this.start(),s}unsubscribe(n){n!==null&&this.subscribers[n-1]&&(delete this.subscribers[n-1],this.activeSubscriptions--),this.activeSubscriptions===0&&this.stop()}}const fU=G.createContext({transitionTimer:new XS,animationTimer:new XS});fU.displayName="TimerContext";const k_=fU,Mbe=e=>`ease${e.charAt(0).toUpperCase()+e.slice(1)}`,Dbe=1e3,Rbe=e=>{let{duration:n=Dbe,easing:r="quadInOut",delay:s=0,data:a,children:i,onEnd:o}=e;const[c,A]=G.useState({data:Array.isArray(a)?a[0]:a,animationInfo:{progress:0,animating:!1}}),u=G.useContext(k_).animationTimer,h=G.useRef(Array.isArray(a)?a.slice(1):[]),d=G.useRef(null),f=G.useRef(void 0),g=i0e[Mbe(r)];G.useEffect(()=>(h.current.length&&m(),()=>{f.current?u.unsubscribe(f.current):u.stop()}),[]),G.useEffect(()=>{d.current&&c.animationInfo&&c.animationInfo.progress<1?A({data:d.current(1),animationInfo:{progress:1,animating:!1,terminating:!0}}):(u.unsubscribe(f.current),h.current=Array.isArray(a)?a:[a],m())},[a]);const m=()=>{if(h.current.length){const x=h.current[0];d.current=Fbe(c.data,x),s?setTimeout(()=>{f.current=u.subscribe(y,n)},s):f.current=u.subscribe(y,n)}else o&&o()},y=x=>{if(!d.current)return;const p=n?x/n:1;if(p>=1){A({data:d.current(1),animationInfo:{progress:1,animating:!1,terminating:!0}}),f.current&&u.unsubscribe(f.current),h.current.shift(),m();return}A({data:d.current(g(p)),animationInfo:{progress:p,animating:p<1}})};return i(c.data,c.animationInfo)};var $be=QF,Obe=0;function Lbe(e){var n=++Obe;return $be(e)+n}var Hbe=Lbe;const j_=Ht(Hbe);function r1(){return r1=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},r1.apply(this,arguments)}const zbe=G.forwardRef((e,n)=>G.createElement("svg",r1({ref:n},e)));function Kbe(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}var Gbe=Kbe,Wbe=Gbe,YS=Math.max;function Vbe(e,n,r){return n=YS(n===void 0?e.length-1:n,0),function(){for(var s=arguments,a=-1,i=YS(s.length-n,0),o=Array(i);++a<i;)o[a]=s[n+a];a=-1;for(var c=Array(n+1);++a<n;)c[a]=s[a];return c[n]=r(o),Wbe(e,this,c)}}var gU=Vbe;function qbe(e){return function(){return e}}var Xbe=qbe,Ybe=wl,Jbe=function(){try{var e=Ybe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),mU=Jbe,Zbe=Xbe,JS=mU,e_e=nh,t_e=JS?function(e,n){return JS(e,"toString",{configurable:!0,enumerable:!1,value:Zbe(n),writable:!0})}:e_e,n_e=t_e,r_e=800,s_e=16,a_e=Date.now;function i_e(e){var n=0,r=0;return function(){var s=a_e(),a=s_e-(s-r);if(r=s,a>0){if(++n>=r_e)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}var o_e=i_e,l_e=n_e,c_e=o_e,A_e=c_e(l_e),pU=A_e,u_e=nh,d_e=gU,h_e=pU;function f_e(e,n){return h_e(d_e(e,n,u_e),e+"")}var g_e=f_e,m_e=fA,p_e=yA,y_e=Wm,v_e=xl;function x_e(e,n,r){if(!v_e(r))return!1;var s=typeof n;return(s=="number"?p_e(r)&&y_e(n,r.length):s=="string"&&n in r)?m_e(r[n],e):!1}var w_e=x_e;function b_e(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}var __e=b_e,C_e=xl,B_e=x_,S_e=__e,k_e=Object.prototype,j_e=k_e.hasOwnProperty;function N_e(e){if(!C_e(e))return S_e(e);var n=B_e(e),r=[];for(var s in e)s=="constructor"&&(n||!j_e.call(e,s))||r.push(s);return r}var E_e=N_e,T_e=GF,F_e=E_e,U_e=yA;function I_e(e){return U_e(e)?T_e(e,!0):F_e(e)}var yU=I_e,P_e=g_e,Q_e=fA,M_e=w_e,D_e=yU,vU=Object.prototype,R_e=vU.hasOwnProperty,$_e=P_e(function(e,n){e=Object(e);var r=-1,s=n.length,a=s>2?n[2]:void 0;for(a&&M_e(n[0],n[1],a)&&(s=1);++r<s;)for(var i=n[r],o=D_e(i),c=-1,A=o.length;++c<A;){var u=o[c],h=e[u];(h===void 0||Q_e(h,vU[u])&&!R_e.call(e,u))&&(e[u]=i[u])}return e}),O_e=$_e;const De=Ht(O_e);var ZS=mU;function L_e(e,n,r){n=="__proto__"&&ZS?ZS(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}var H_e=L_e,z_e=H_e,K_e=fA,G_e=Object.prototype,W_e=G_e.hasOwnProperty;function V_e(e,n,r){var s=e[n];(!(W_e.call(e,n)&&K_e(s,r))||r===void 0&&!(n in e))&&z_e(e,n,r)}var q_e=V_e,X_e=q_e,Y_e=zm,J_e=Wm,ek=xl,Z_e=th;function e2e(e,n,r,s){if(!ek(e))return e;n=Y_e(n,e);for(var a=-1,i=n.length,o=i-1,c=e;c!=null&&++a<i;){var A=Z_e(n[a]),u=r;if(A==="__proto__"||A==="constructor"||A==="prototype")return e;if(a!=o){var h=c[A];u=s?s(h,A,c):void 0,u===void 0&&(u=ek(h)?h:J_e(n[a+1])?[]:{})}X_e(c,A,u),c=c[A]}return e}var t2e=e2e,n2e=Km,r2e=t2e,s2e=zm;function a2e(e,n,r){for(var s=-1,a=n.length,i={};++s<a;){var o=n[s],c=n2e(e,o);r(c,o)&&r2e(i,s2e(o,e),c)}return i}var xU=a2e,i2e=xU,o2e=eU;function l2e(e,n){return i2e(e,n,function(r,s){return o2e(e,s)})}var c2e=l2e,tk=eh,A2e=Gm,u2e=xs,nk=tk?tk.isConcatSpreadable:void 0;function d2e(e){return u2e(e)||A2e(e)||!!(nk&&e&&e[nk])}var h2e=d2e,f2e=g_,g2e=h2e;function wU(e,n,r,s,a){var i=-1,o=e.length;for(r||(r=g2e),a||(a=[]);++i<o;){var c=e[i];n>0&&r(c)?n>1?wU(c,n-1,r,s,a):f2e(a,c):s||(a[a.length]=c)}return a}var m2e=wU,p2e=m2e;function y2e(e){var n=e==null?0:e.length;return n?p2e(e,1):[]}var v2e=y2e,x2e=v2e,w2e=gU,b2e=pU;function _2e(e){return b2e(w2e(e,void 0,x2e),e+"")}var C2e=_2e,B2e=c2e,S2e=C2e,k2e=S2e(function(e,n){return e==null?{}:B2e(e,n)}),j2e=k2e;const rg=Ht(j2e);function N2e(e){return e.axis!=="x"?[e.height-e.padding.bottom,e.padding.top]:[e.padding.left,e.width-e.padding.right]}function E2e(e){if(e.axis==="x"){const n=_n(e.startAngle||0),r=_n(e.endAngle||360);return[n,r]}return[e.innerRadius||0,s1({height:e.height,width:e.width,padding:e.padding})]}function bU(e){return Object.entries(e).reduce((n,r)=>(n[r[1]]=r[0],n),{})}function N_(e,n){n===void 0&&(n=[]);const r={};for(const s in e)n.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}function _U(e){const{_x:n,_x1:r,_x0:s,_voronoiX:a,_y:i,_y1:o,_y0:c,_voronoiY:A}=e;return De({},{x:a??(r??n),x0:s??n,y:A??(o??i),y0:c??i},e)}function E_(e,n){const{scale:r,polar:s,horizontal:a}=e,i=_U(n),o=e.origin||{x:0,y:0},c=a?r.y(i.y):r.x(i.x),A=a?r.y(i.y0):r.x(i.x0),u=a?r.x(i.x):r.y(i.y),h=a?r.x(i.x0):r.y(i.y0);return{x:s?u*Math.cos(c)+o.x:c,x0:s?h*Math.cos(A)+o.x:A,y:s?-u*Math.sin(c)+o.y:u,y0:s?-h*Math.sin(A)+o.x:h}}function ms(e){const n=typeof e=="number"?e:0,r=typeof e=="object"?e:{};return{top:r.top||n,bottom:r.bottom||n,left:r.left||n,right:r.right||n}}function CU(e){return(e&&e.type&&e.type.role)==="tooltip"}function T_(e,n){const{theme:r={},labelComponent:s}=e,a=r[n]&&r[n].style||{};if(!CU(s))return a;const i=r.tooltip&&r.tooltip.style||{},o=De({},i,a.labels);return De({},{labels:o},a)}function F_(e,n){const r="100%",s="100%";if(!e)return De({parent:{height:s,width:r}},n);const{data:a,labels:i,parent:o}=e,c=n&&n.parent||{},A=n&&n.labels||{},u=n&&n.data||{};return{parent:De({},o,c,{width:r,height:s}),labels:De({},i,A),data:De({},a,u)}}function $e(e,n){return vt(e)?e(n):e}function Yn(e,n){return n.disableInlineStyles?{}:!e||!Object.keys(e).some(r=>vt(e[r]))?e:Object.keys(e).reduce((r,s)=>(r[s]=$e(e[s],n),r),{})}function _n(e){return typeof e=="number"?e*(Math.PI/180):e}function U_(e){return typeof e=="number"?e/(Math.PI/180):e}function s1(e){const{width:n,height:r,padding:s}=e,{left:a,right:i,top:o,bottom:c}=s;return Math.min(n-a-i,r-o-c)/2}function sh(e){const{width:n,height:r}=e,{top:s,bottom:a,left:i,right:o}=ms(e.padding),c=Math.min(n-i-o,r-s-a)/2,A=n/2+i-o,u=r/2+s-a;return{x:A+c>n?c+i-o:A,y:u+c>r?c+s-a:u}}function Sn(e,n){return e.range&&e.range[n]?e.range[n]:e.range&&Array.isArray(e.range)?e.range:e.polar?E2e({axis:n,innerRadius:e.innerRadius,startAngle:e.startAngle,endAngle:e.endAngle,height:e.height,width:e.width,padding:ms(e.padding)}):N2e({axis:n,height:e.height,width:e.width,padding:ms(e.padding)})}function kd(e){return e==null}function vt(e){return typeof e=="function"}function I_(e){return vt(e)?e:e==null?n=>n:nU(e)}function Ls(e,n,r){const s=e.theme&&e.theme[r]?e.theme[r]:{},a=N_(s,["style"]),i=F2e(e);return De(i===void 0?{}:{horizontal:i},e,a,n)}function T2e(e,n){return n?e==="x"?"y":"x":e}function P_(e,n,r){const s=n?e:0;let a=n||e;a||(a=0);const i=a-s,o=Math.abs(i),c=i/o||1,A=r||1,u=Math.max(Math.ceil(o/A),0);return Array.from(Array(u),(h,d)=>s+d*c*A)}function ah(e,n,r,s,a){r===void 0&&(r={}),s===void 0&&(s=[]),a===void 0&&(a=(u,h)=>u.concat(h));const i=["data","domain","categories","polar","startAngle","endAngle","minDomain","maxDomain","horizontal"],o=(u,h,d)=>u.reduce((f,g,m)=>{let y=f;const x=g.type&&g.type.role,p=g.props.name||`${x}-${h[m]}`;if(g.props&&g.props.children){const v=Object.assign({},g.props,rg(r,i)),b=g.type&&g.type.role==="stack"&&vt(g.type.getChildren)?g.type.getChildren(v):G.Children.toArray(g.props.children).map(C=>{const k=Object.assign({},C.props,rg(v,i));return G.cloneElement(C,k)}),w=b.map((C,k)=>`${p}-${k}`),_=o(b,w,g);y=a(y,_)}else{const v=n(g,p,d);v&&(y=a(y,v))}return y},s),c=e.filter(S.isValidElement),A=c.map((u,h)=>h);return o(c,A)}function F2e(e){if(e.horizontal!==void 0||!e.children)return e.horizontal;const n=r=>r.reduce((s,a)=>{const i=a.props||{};return s||i.horizontal||!i.children?s||i.horizontal:n(G.Children.toArray(i.children))},!1);return n(G.Children.toArray(e.children))}const BU={startsWith:["data-","aria-"],exactMatch:[]},U2e=e=>{let n=!1;return BU.startsWith.forEach(r=>{new RegExp(`\\b(${r})(\\w|-)+`,"g").test(e)&&(n=!0)}),n},I2e=e=>BU.exactMatch.includes(e),P2e=e=>!!(U2e(e)||I2e(e)),pi=e=>{const n={...e};return Object.fromEntries(Object.entries(n).filter(r=>{let[s]=r;return P2e(s)}).map(r=>{let[s,a]=r;return[s,$e(a,e)]}))},Q_=(e,n)=>S.cloneElement(e,pi(n));var Q2e=WF,M2e=XF,D2e=Gm,R2e=xs,$2e=yA,O2e=m_,L2e=x_,H2e=v_,z2e="[object Map]",K2e="[object Set]",G2e=Object.prototype,W2e=G2e.hasOwnProperty;function V2e(e){if(e==null)return!0;if($2e(e)&&(R2e(e)||typeof e=="string"||typeof e.splice=="function"||O2e(e)||H2e(e)||D2e(e)))return!e.length;var n=M2e(e);if(n==z2e||n==K2e)return!e.size;if(L2e(e))return!Q2e(e).length;for(var r in e)if(W2e.call(e,r))return!1;return!0}var q2e=V2e;const rn=Ht(q2e);var X2e=typeof Element<"u",Y2e=typeof Map=="function",J2e=typeof Set=="function",Z2e=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Zf(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!Zf(e[s],n[s]))return!1;return!0}var i;if(Y2e&&e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i=e.entries();!(s=i.next()).done;)if(!n.has(s.value[0]))return!1;for(i=e.entries();!(s=i.next()).done;)if(!Zf(s.value[1],n.get(s.value[0])))return!1;return!0}if(J2e&&e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i=e.entries();!(s=i.next()).done;)if(!n.has(s.value[0]))return!1;return!0}if(Z2e&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof n.valueOf=="function")return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof n.toString=="function")return e.toString()===n.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;if(X2e&&e instanceof Element)return!1;for(s=r;s--!==0;)if(!((a[s]==="_owner"||a[s]==="__v"||a[s]==="__o")&&e.$$typeof)&&!Zf(e[a[s]],n[a[s]]))return!1;return!0}return e!==e&&n!==n}var eCe=function(n,r){try{return Zf(n,r)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const zo=Ht(eCe);function SU(e){return Array.isArray(e)&&e.length>0}function sg(e){return Array.isArray(e)&&e.some(n=>typeof n=="string")}function ai(e){return Array.isArray(e)&&e.some(n=>n instanceof Date)}function tCe(e){return SU(e)&&e.every(n=>typeof n=="string")}function ag(e,n){return e&&n?e.filter(r=>!n.includes(r)):[]}function rk(e){return SU(e)&&e.every(Array.isArray)}function nCe(e){return e.filter(n=>n!==void 0)}function Ks(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const a=e.concat(r);return ai(a)?new Date(Math.max(...a)):Math.max(...a)}function Gs(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const a=e.concat(r);return ai(a)?new Date(Math.min(...a)):Math.min(...a)}function kU(e,n){return(e.key||n).toString()}function sk(e){return e.reduce((n,r,s)=>{const a=kU(r,s);return n[a]=r,n},{})}function ak(e,n){let r=!1;const s=Object.keys(e).reduce((a,i)=>(i in n||(r=!0,a[i]=!0),a),{});return r&&s}function rCe(e,n){const r=e&&sk(e),s=n&&sk(n);return{entering:r&&ak(s,r),exiting:s&&ak(r,s)}}function a1(e){return e.type&&e.type.getData?e.type.getData(e.props):e.props&&e.props.data||!1}function jU(e,n){let r=!1,s=!1;const a=(c,A)=>{if(!A||c.type!==A.type)return{};const{entering:u,exiting:h}=rCe(a1(c),a1(A))||{};return r=r||!!h,s=s||!!u,{entering:u||!1,exiting:h||!1}},i=(c,A)=>c.map((u,h)=>u&&u.props&&u.props.children&&A[h]?i(G.Children.toArray(c[h].props.children),G.Children.toArray(A[h].props.children)):a(u,A[h])),o=i(G.Children.toArray(e),G.Children.toArray(n));return{nodesWillExit:r,nodesWillEnter:s,childrenTransitions:o,nodesShouldEnter:!1}}function sCe(e,n){const r=e.onEnter&&e.onEnter.after?e.onEnter.after:xA;return{data:n.map((s,a)=>Object.assign({},s,r(s,a,n)))}}function aCe(e,n,r,s){const a=Object.assign({},e,{onEnd:s});if(a&&a.onLoad&&!a.onLoad.duration)return{animate:a,data:r};const i=a.onLoad&&a.onLoad.before?a.onLoad.before:xA,o=r.map((c,A)=>Object.assign({},c,i(c,A,r)));return{animate:a,data:o,clipWidth:0}}function iCe(e,n,r){const s=Object.assign({},e,{onEnd:r});let a=n;if(s&&s.onLoad&&!s.onLoad.duration)return{animate:e,data:n};const i=e.onLoad&&e.onLoad.after?e.onLoad.after:xA;return a=n.map((o,c)=>Object.assign({},o,i(o,c,n))),{animate:s,data:a}}function oCe(e,n,r,s,a){const i=e&&e.onExit,o=Object.assign({},e,i);let c=r;if(s){e.onEnd=a;const A=e.onExit&&e.onExit.before?e.onExit.before:xA;c=r.map((u,h)=>{const d=(u.key||h).toString();return s[d]?Object.assign({},u,A(u,h,r)):u})}return{animate:o,data:c}}function lCe(e,n,r,s,a){let i=e,o=r;if(s){i=Object.assign({},e,{onEnd:a});const c=e.onEnter&&e.onEnter.before?e.onEnter.before:xA;o=r.map((A,u)=>{const h=(A.key||u).toString();return s[h]?Object.assign({},A,c(A,u,r)):A})}return{animate:i,data:o}}function cCe(e,n,r,s){const a=e&&e.onEnter,i=Object.assign({},e,a);let o=n;if(r){i.onEnd=s;const c=i.onEnter&&i.onEnter.after?i.onEnter.after:xA;o=n.map((A,u)=>{const h=kU(A,u);return r[h]?Object.assign({},A,c(A,u,n)):A})}return{animate:i,data:o}}function NU(e,n,r){const s=n&&n.nodesWillExit,a=n&&n.nodesWillEnter,i=n&&n.nodesShouldEnter,o=n&&n.nodesShouldLoad,c=n&&n.nodesDoneLoad,A=n&&n.childrenTransitions||[],u={enter:e.animate&&e.animate.onEnter&&e.animate.onEnter.duration,exit:e.animate&&e.animate.onExit&&e.animate.onExit.duration,load:e.animate&&e.animate.onLoad&&e.animate.onLoad.duration,move:e.animate&&e.animate.duration},h=(m,y,x)=>o?iCe(x,y,()=>{r({nodesShouldLoad:!1,nodesDoneLoad:!0})}):aCe(x,m,y,()=>{r({nodesDoneLoad:!0})}),d=(m,y,x,p)=>oCe(p,y,x,m,()=>{r({nodesWillExit:!1})}),f=(m,y,x,p)=>i?cCe(p,x,m,()=>{r({nodesWillEnter:!1})}):lCe(p,y,x,m,()=>{r({nodesShouldEnter:!0})}),g=function(m,y){const x=m.props.animate;if(!m.type)return{};const p=m.props&&m.props.polar&&m.type.defaultPolarTransitions||m.type.defaultTransitions;if(p){const v=x[y]&&x[y].duration;return v!==void 0?v:p[y]&&p[y].duration}return{}};return function(y,x){const p=a1(y)||[],v=De({},e.animate,y.props.animate),b=y.props.polar&&y.type.defaultPolarTransitions||y.type.defaultTransitions;v.onExit=De({},v.onExit,b&&b.onExit),v.onEnter=De({},v.onEnter,b&&b.onEnter),v.onLoad=De({},v.onLoad,b&&b.onLoad);const w=A[x]||A[0];if(c){if(s){const _=w&&w.exiting,C=u.exit!==void 0?u.exit:g(y,"onExit");return d(_,y,p,Object.assign({},v,_?{duration:C}:{delay:C}))}else if(a){const _=w&&w.entering,C=u.enter!==void 0?u.enter:g(y,"onEnter"),k=u.move!==void 0?u.move:y.props.animate&&y.props.animate.duration;return f(_,y,p,Object.assign({},v,{duration:i&&_?C:k}))}else if(!n&&v&&v.onExit)return sCe(v,p)}else{const C={duration:u.load!==void 0?u.load:g(y,"onLoad")};return h(y,p,Object.assign({},v,C))}return{animate:v,data:p}}}function i1(){return i1=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},i1.apply(this,arguments)}class o1 extends G.Component{constructor(n,r){super(n,r),this.state={nodesShouldLoad:!1,nodesDoneLoad:!1};const s=this.props.children,a=s.props.polar;this.continuous=!a&&s.type&&s.type.continuous===!0,this.timer=this.context.transitionTimer}componentDidMount(){this.setState({nodesShouldLoad:!0})}shouldComponentUpdate(n){return zo(this.props,n)||(this.timer.bypassAnimation(),this.setState(this.getTransitionState(this.props,n),()=>this.timer.resumeAnimation())),!0}componentWillUnmount(){this.timer.stop()}getTransitionState(n,r){const{animate:s}=n;if(s){if(s.parentState)return{oldProps:s.parentState.nodesWillExit?n:null,nextProps:r}}else return{};const a=G.Children.toArray(n.children),i=G.Children.toArray(r.children),{nodesWillExit:o,nodesWillEnter:c,childrenTransitions:A,nodesShouldEnter:u}=jU(a,i);return{nodesWillExit:o,nodesWillEnter:c,childrenTransitions:A,nodesShouldEnter:u,oldProps:o?n:null,nextProps:r}}getDomainFromChildren(n,r){const s=A=>A.reduce((u,h)=>{if(h.type&&vt(h.type.getDomain)){const d=h.props&&h.type.getDomain(h.props,r);return d?u.concat(d):u}else if(h.props&&h.props.children)return u.concat(s(G.Children.toArray(h.props.children)));return u},[]),a=G.Children.toArray(n.children)[0],i=a.props||{},o=Array.isArray(i.domain)?i.domain:i.domain&&i.domain[r];if(!i.children&&o)return o;const c=s([a]);return c.length===0?[0,1]:[Gs(c),Ks(c)]}pickProps(){return this.state?this.state.nodesWillExit?this.state.oldProps||this.props:this.props:this.props}pickDomainProps(n){var s;const r=(s=n.animate)==null?void 0:s.parentState;return r&&r.nodesWillExit?(this.continuous||r.continuous)&&(r.nextProps||this.state.nextProps)||n:this.continuous&&this.state.nodesWillExit&&this.state.nextProps||n}getClipWidth(n,r){const s=()=>{const i=Sn(r.props,"x");return i?Math.abs(i[1]-i[0]):n.width},a=this.transitionProps?this.transitionProps.clipWidth:void 0;return a!==void 0?a:s()}render(){var d;const n=this.pickProps(),r=(d=this.props.animate)!=null&&d.getTransitions?this.props.animate.getTransitions:NU(n,this.state,f=>this.setState(f)),s=G.Children.toArray(n.children)[0],a=r(s);this.transitionProps=a;const i={x:this.getDomainFromChildren(this.pickDomainProps(n),"x"),y:this.getDomainFromChildren(n,"y")},o=this.getClipWidth(n,s),c=De({domain:i,clipWidth:o},a,s.props),u=(n.animationWhitelist||[]).concat(["clipWidth"]),h=u.length?rg(c,u):c;return G.createElement(Rbe,i1({},c.animate,{data:h}),f=>{if(s.props.groupComponent){const g=this.continuous?G.cloneElement(s.props.groupComponent,{clipWidth:f.clipWidth||0}):s.props.groupComponent;return G.cloneElement(s,De({animate:null,animating:!0,groupComponent:g},f,c))}return G.cloneElement(s,De({animate:null,animating:!0},f,c))})}}de(o1,"displayName","VictoryTransition"),de(o1,"contextType",k_);var ACe=g_,uCe=jF,dCe=HF,hCe=LF,fCe=Object.getOwnPropertySymbols,gCe=fCe?function(e){for(var n=[];e;)ACe(n,dCe(e)),e=uCe(e);return n}:hCe,mCe=gCe,pCe=OF,yCe=mCe,vCe=yU;function xCe(e){return pCe(e,vCe,yCe)}var wCe=xCe,bCe=c_,_Ce=Vm,CCe=xU,BCe=wCe;function SCe(e,n){if(e==null)return{};var r=bCe(BCe(e),function(s){return[s]});return n=_Ce(n),CCe(e,r,function(s,a){return n(s,a[0])})}var EU=SCe;const ig=Ht(EU);var kCe="Expected a function";function jCe(e){if(typeof e!="function")throw new TypeError(kCe);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}var NCe=jCe,ECe=Vm,TCe=NCe,FCe=EU;function UCe(e,n){return FCe(e,TCe(ECe(n)))}var ICe=UCe;const TU=Ht(ICe);function PCe(e,n,r,s){for(var a=e.length,i=r+(s?1:-1);s?i--:++i<a;)if(n(e[i],i,e))return i;return-1}var QCe=PCe;function MCe(e){return e!==e}var DCe=MCe;function RCe(e,n,r){for(var s=r-1,a=e.length;++s<a;)if(e[s]===n)return s;return-1}var $Ce=RCe,OCe=QCe,LCe=DCe,HCe=$Ce;function zCe(e,n,r){return n===n?HCe(e,n,r):OCe(e,LCe,r)}var KCe=zCe,GCe=KCe;function WCe(e,n){var r=e==null?0:e.length;return!!r&&GCe(e,n,0)>-1}var VCe=WCe;function qCe(e,n,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(n,e[s]))return!0;return!1}var XCe=qCe;function YCe(){}var JCe=YCe,Iy=VF,ZCe=JCe,eBe=f_,tBe=1/0,nBe=Iy&&1/eBe(new Iy([,-0]))[1]==tBe?function(e){return new Iy(e)}:ZCe,rBe=nBe,sBe=DF,aBe=VCe,iBe=XCe,oBe=RF,lBe=rBe,cBe=f_,ABe=200;function uBe(e,n,r){var s=-1,a=aBe,i=e.length,o=!0,c=[],A=c;if(r)o=!1,a=iBe;else if(i>=ABe){var u=n?null:lBe(e);if(u)return cBe(u);o=!1,a=oBe,A=new sBe}else A=n?[]:c;e:for(;++s<i;){var h=e[s],d=n?n(h):h;if(h=r||h!==0?h:0,o&&d===d){for(var f=A.length;f--;)if(A[f]===d)continue e;n&&A.push(d),c.push(h)}else a(A,d,r)||(A!==c&&A.push(d),c.push(h))}return c}var FU=uBe,dBe=FU;function hBe(e){return e&&e.length?dBe(e):[]}var fBe=hBe;const al=Ht(fBe),M_=/^onGlobal(.*)$/;function UU(e,n,r,s){const a=h=>{const f=(()=>{const g=h.reduce((m,y)=>y.target!==void 0?(Array.isArray(y.target)?y.target.includes(n):`${y.target}`==`${n}`)?m.concat(y):m:m.concat(y),[]);return r!==void 0&&n!=="parent"?g.filter(m=>{const y=m.eventKey,x=p=>p?`${p}`==`${r}`:!0;return Array.isArray(y)?y.some(p=>x(p)):x(y)}):g})();return Array.isArray(f)&&f.reduce((g,m)=>m?Object.assign(g,m.eventHandlers):g,{})},o=(()=>Array.isArray(this.componentEvents)?Array.isArray(e.events)?this.componentEvents.concat(...e.events):this.componentEvents:e.events)(),c=o&&vt(s)?s(a(o),n):void 0;if(!e.sharedEvents)return c;const A=e.sharedEvents.getEvents,u=e.sharedEvents.events&&A(a(e.sharedEvents.events),n);return Object.assign({},u,c)}function IU(e,n,r,s){if(rn(e))return{};const a=s||this.baseProps,i=(h,d)=>{const{childName:f,target:g,key:m}=h,y=d==="props"?a:this.state||{},x=f==null||!y[f]?y:y[f];return m==="parent"?x.parent:x[m]&&x[m][g]},o=(h,d)=>{const f=n==="parent"?h.childName:h.childName||r,g=h.target||n,m=v=>g==="parent"?"parent":h.eventKey==="all"?a[v]?Object.keys(a[v]).filter(b=>b!=="parent"):Object.keys(a).filter(b=>b!=="parent"):h.eventKey===void 0&&d==="parent"?a[v]?Object.keys(a[v]):Object.keys(a):h.eventKey!==void 0?h.eventKey:d,y=(v,b)=>{const w=this.state||{};if(!vt(h.mutation))return w;const _=i({childName:b,key:v,target:g},"props"),C=i({childName:b,key:v,target:g},"state"),k=h.mutation(Object.assign({},_,C),a),j=w[b]||{},B=I=>(I[v]&&I[v][g]&&delete I[v][g],I[v]&&!Object.keys(I[v]).length&&delete I[v],I),E=I=>g==="parent"?Object.assign(I,{[v]:Object.assign(I[v]||{},k)}):Object.assign(I,{[v]:Object.assign(I[v]||{},{[g]:k})}),P=I=>k?E(I):B(I);return b!=null?Object.assign(w,{[b]:P(j)}):P(w)},x=v=>{const b=m(v);return Array.isArray(b)?b.reduce((w,_)=>Object.assign(w,y(_,v)),{}):y(b,v)},p=f==="all"?Object.keys(a).filter(v=>v!=="parent"):f;return Array.isArray(p)?p.reduce((v,b)=>Object.assign(v,x(b)),{}):x(p)},c=(h,d)=>Array.isArray(h)?h.reduce((f,g)=>Object.assign({},f,o(g,d)),{}):o(h,d),A=h=>{const d=m=>vt(m.callback)&&m.callback,g=(Array.isArray(h)?h.map(m=>d(m)):[d(h)]).filter(m=>m!==!1);return g.length?()=>g.forEach(m=>m()):void 0},u=(h,d,f,g)=>{const m=e[g](h,d,f,this);if(!rn(m)){const y=A(m);this.setState(c(m,f),y)}};return Object.keys(e).reduce((h,d)=>(h[d]=u,h),{})}function PU(e,n,r){return e?Object.keys(e).reduce((s,a)=>{const i=o=>e[a](o,r,n,a);return s[a]=i,s},{}):{}}function QU(e,n,r){const s=this.state||{};return r?s[r]&&s[r][e]&&s[r][e][n]:e==="parent"?s[e]&&s[e][n]||s[e]:s[e]&&s[e][n]}function gBe(e,n,r,s){return n===void 0&&(n={}),r===void 0&&(r={}),s.reduce((a,i)=>{const o=r[i],c=MU(e,n[i],r[i],i);return a[i]=c||o,ig(a,A=>!rn(A))},{})}function MU(e,n,r,s){return n===void 0&&(n={}),r===void 0&&(r={}),Object.keys(n).reduce((i,o)=>{const c=r[o]||{},A=n[o]||{};if(o==="parent"){const h=ik(e,A,c,{eventKey:o,target:"parent"});i[o]=h!==void 0?Object.assign({},c,h):c}else{const u=al(Object.keys(A).concat(Object.keys(c)));i[o]=u.reduce((h,d)=>{const f={eventKey:o,target:d,childName:s},g=ik(e,A[d],c[d],f);return h[d]=g!==void 0?Object.assign({},c[d],g):c[d],ig(h,m=>!rn(m))},{})}return ig(i,u=>!rn(u))},{})}function ik(e,n,r,s){const a=(A,u)=>typeof A[u]=="string"?A[u]==="all"||A[u]===s[u]:Array.isArray(A[u])?A[u].map(d=>`${d}`).includes(s[u]):!1;let i=Array.isArray(e)?e:[e];s.childName&&(i=e.filter(A=>a(A,"childName")));const o=i.filter(A=>a(A,"target"));if(rn(o))return;const c=o.filter(A=>a(A,"eventKey"));if(!rn(c))return c.reduce((A,u)=>{const d=(u&&vt(u.mutation)?u.mutation:()=>{})(Object.assign({},n,r));return Object.assign({},A,d)},{})}function D_(e,n){const r=Array.isArray(n)&&n.reduce((s,a)=>{const i=e[a],o=i&&i.type&&i.type.defaultEvents,c=vt(o)?o(i.props):o;return Array.isArray(c)?s.concat(...c):s},[]);return r&&r.length?r:void 0}function og(e){const n=e.match(M_);return n&&n[1]&&n[1].toLowerCase()}const DU=e=>ig(e,(n,r)=>M_.test(r)),RU=e=>TU(e,(n,r)=>M_.test(r)),$U=e=>Object.assign(e,{nativeEvent:e}),mBe=e=>!kd(e._x)&&!kd(e._y),pBe=[{name:"parent",index:"parent"},{name:"data"},{name:"labels"}];function ih(e,n){n===void 0&&(n={});class r extends e{constructor(i){super(i);de(this,"state",{});de(this,"getEventState",QU.bind(this));de(this,"getScopedEvents",IU.bind(this));de(this,"getEvents",(i,o,c)=>UU.call(this,i,o,c,this.getScopedEvents));de(this,"externalMutations",this.getExternalMutations(this.props));de(this,"calculatedState",this.getStateChanges(this.props));de(this,"globalEvents",{});de(this,"prevGlobalEventKeys",[]);de(this,"boundGlobalEvents",{});this.cacheValues(this.getCalculatedValues(i))}shouldComponentUpdate(i){const o=this.getExternalMutations(i),c=this.props.animating||this.props.animate,A=!zo(o,this.externalMutations);if(c||A)return this.cacheValues(this.getCalculatedValues(i)),this.externalMutations=o,this.applyExternalMutations(i,o),!0;const u=this.getStateChanges(i);return zo(this.calculatedState,u)?zo(this.props,i)?!1:(this.cacheValues(this.getCalculatedValues(i)),!0):(this.cacheValues(this.getCalculatedValues(i)),!0)}componentDidMount(){const i=Object.keys(this.globalEvents);i.forEach(o=>this.addGlobalListener(o)),this.prevGlobalEventKeys=i}componentDidUpdate(i){const o=this.getStateChanges(i);this.calculatedState=o;const c=Object.keys(this.globalEvents);ag(this.prevGlobalEventKeys,c).forEach(h=>this.removeGlobalListener(h)),ag(c,this.prevGlobalEventKeys).forEach(h=>this.addGlobalListener(h)),this.prevGlobalEventKeys=c}componentWillUnmount(){this.prevGlobalEventKeys.forEach(i=>this.removeGlobalListener(i))}addGlobalListener(i){const o=c=>{const A=this.globalEvents[i];return A&&A($U(c))};this.boundGlobalEvents[i]=o,window.addEventListener(og(i),o)}removeGlobalListener(i){window.removeEventListener(og(i),this.boundGlobalEvents[i])}getStateChanges(i){if(!this.hasEvents)return{};const o=(u,h)=>{const d=De({},this.getEventState(u,h),this.getSharedEventState(u,h));return rn(d)?void 0:d};return(n.components||pBe).map(u=>{if(!(!i.standalone&&u.name==="parent"))return u.index!==void 0?o(u.index,u.name):this.dataKeys.map(h=>o(h,u.name)).filter(Boolean)}).filter(Boolean)}applyExternalMutations(i,o){if(!rn(o)){const c=i.externalEventMutations.reduce((u,h)=>vt(h.callback)?u.concat(h.callback):u,[]),A=c.length?()=>{c.forEach(u=>u())}:void 0;this.setState(o,A)}}getCalculatedValues(i){const{sharedEvents:o}=i,c=e.expectedComponents,A=D_(i,c),u=o&&vt(o.getEventState)?o.getEventState:()=>{},h=this.getBaseProps(i,u),d=Object.keys(h).filter(m=>m!=="parent"),f=i.events||i.sharedEvents||A,g=this.getAllEvents(i);return{componentEvents:A,getSharedEventState:u,baseProps:h,dataKeys:d,hasEvents:f,events:g}}getExternalMutations(i){const{sharedEvents:o,externalEventMutations:c}=i;return rn(c)||o?void 0:MU(c,this.baseProps,this.state)}cacheValues(i){Object.keys(i).forEach(o=>{this[o]=i[o]})}getBaseProps(i,o){const A=(o||this.getSharedEventState.bind(this))("parent","parent"),u=this.getEventState("parent","parent"),h=De({},u,A),d=h.parentControlledProps,f=d?rg(h,d):{},g=De({},f,i);return typeof e.getBaseProps=="function"?e.getBaseProps(g):{}}getAllEvents(i){return Array.isArray(this.componentEvents)?Array.isArray(i.events)?this.componentEvents.concat(...i.events):this.componentEvents:i.events}getComponentProps(i,o,c){const A=this.props.name||e.role,u=this.dataKeys&&this.dataKeys[c]||c,h=`${A}-${o}-${u}`,d=this.baseProps[u]&&this.baseProps[u][o]||this.baseProps[u];if(!d&&!this.hasEvents)return;const f=i&&typeof i=="object"&&"props"in i?i.props:void 0;if(this.hasEvents){const g=this.getEvents(this.props,o,u),m=De({index:c,key:h},this.getEventState(u,o),this.getSharedEventState(u,o),f,d,{id:h}),y=De({},PU(g,u,m),m.events);return Object.assign({},m,{events:y})}return De({index:c,key:h},f,d,{id:h})}renderContainer(i,o){const A=i.type&&i.type.role==="container"?this.getComponentProps(i,"parent","parent"):{};return A.events&&(this.globalEvents=DU(A.events),A.events=RU(A.events)),G.cloneElement(i,A,o)}animateComponent(i,o){var u;const c=typeof i.animate=="object"&&((u=i.animate)==null?void 0:u.animationWhitelist)||o,A=this.constructor;return G.createElement(o1,{animate:i.animate,animationWhitelist:c},G.createElement(A,i))}renderContinuousData(i){const{dataComponent:o,labelComponent:c,groupComponent:A}=i,h=this.dataKeys.filter(g=>g!=="all").reduce((g,m)=>{let y=g;const x=this.getComponentProps(c,"labels",m);return x&&x.text!==void 0&&x.text!==null&&(y=y.concat(G.cloneElement(c,x))),y},[]),d=this.getComponentProps(o,"data","all"),f=[G.cloneElement(o,d),...h];return this.renderContainer(A,f)}renderData(i,o){o===void 0&&(o=mBe);const{dataComponent:c,labelComponent:A,groupComponent:u}=i,h=this.dataKeys.reduce((g,m,y)=>{const x=this.getComponentProps(c,"data",y);return o(x.datum)&&g.push(G.cloneElement(c,x)),g},[]),d=this.dataKeys.map((g,m)=>{const y=this.getComponentProps(A,"labels",m);if(y.text!==void 0&&y.text!==null)return G.cloneElement(A,y)}).filter(Boolean),f=[...h,...d];return this.renderContainer(u,f)}}return r}function yBe(e){return n=>{e.forEach(r=>{vt(r)?r(n):r!=null&&(r.current=n)})}}var vBe=yl,xBe=vl,wBe="[object Date]";function bBe(e){return xBe(e)&&vBe(e)==wBe}var _Be=bBe,CBe=_Be,BBe=y_,ok=KF,lk=ok&&ok.isDate,SBe=lk?BBe(lk):CBe,kBe=SBe;const OU=Ht(kBe);var jBe=fA;function NBe(e,n){for(var r=-1,s=e.length,a=0,i=[];++r<s;){var o=e[r],c=n?n(o):o;if(!r||!jBe(c,A)){var A=c;i[a++]=o===0?0:o}}return i}var EBe=NBe,TBe=EBe;function FBe(e){return e&&e.length?TBe(e):[]}var UBe=FBe;const IBe=Ht(UBe);var PBe=b_;function QBe(e,n){return PBe(e,n)}var MBe=QBe;const DBe=Ht(MBe);function RBe(e){return e===void 0}var $Be=RBe;const OBe=Ht($Be);function Yi(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function LBe(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function R_(e){let n,r,s;e.length!==2?(n=Yi,r=(c,A)=>Yi(e(c),A),s=(c,A)=>e(c)-A):(n=e===Yi||e===LBe?e:HBe,r=e,s=e);function a(c,A,u=0,h=c.length){if(u<h){if(n(A,A)!==0)return h;do{const d=u+h>>>1;r(c[d],A)<0?u=d+1:h=d}while(u<h)}return u}function i(c,A,u=0,h=c.length){if(u<h){if(n(A,A)!==0)return h;do{const d=u+h>>>1;r(c[d],A)<=0?u=d+1:h=d}while(u<h)}return u}function o(c,A,u=0,h=c.length){const d=a(c,A,u,h-1);return d>u&&s(c[d-1],A)>-s(c[d],A)?d-1:d}return{left:a,center:o,right:i}}function HBe(){return 0}function LU(e){return e===null?NaN:+e}function*zBe(e,n){if(n===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let s of e)(s=n(s,++r,e))!=null&&(s=+s)>=s&&(yield s)}}const KBe=R_(Yi),GBe=KBe.right;R_(LU).center;const oh=GBe;class ck extends Map{constructor(n,r=qBe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),n!=null)for(const[s,a]of n)this.set(s,a)}get(n){return super.get(Ak(this,n))}has(n){return super.has(Ak(this,n))}set(n,r){return super.set(WBe(this,n),r)}delete(n){return super.delete(VBe(this,n))}}function Ak({_intern:e,_key:n},r){const s=n(r);return e.has(s)?e.get(s):r}function WBe({_intern:e,_key:n},r){const s=n(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function VBe({_intern:e,_key:n},r){const s=n(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function qBe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function XBe(e=Yi){if(e===Yi)return HU;if(typeof e!="function")throw new TypeError("compare is not a function");return(n,r)=>{const s=e(n,r);return s||s===0?s:(e(r,r)===0)-(e(n,n)===0)}}function HU(e,n){return(e==null||!(e>=e))-(n==null||!(n>=n))||(e<n?-1:e>n?1:0)}const YBe=Math.sqrt(50),JBe=Math.sqrt(10),ZBe=Math.sqrt(2);function lg(e,n,r){const s=(n-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=YBe?10:i>=JBe?5:i>=ZBe?2:1;let c,A,u;return a<0?(u=Math.pow(10,-a)/o,c=Math.round(e*u),A=Math.round(n*u),c/u<e&&++c,A/u>n&&--A,u=-u):(u=Math.pow(10,a)*o,c=Math.round(e/u),A=Math.round(n/u),c*u<e&&++c,A*u>n&&--A),A<c&&.5<=r&&r<2?lg(e,n,r*2):[c,A,u]}function l1(e,n,r){if(n=+n,e=+e,r=+r,!(r>0))return[];if(e===n)return[e];const s=n<e,[a,i,o]=s?lg(n,e,r):lg(e,n,r);if(!(i>=a))return[];const c=i-a+1,A=new Array(c);if(s)if(o<0)for(let u=0;u<c;++u)A[u]=(i-u)/-o;else for(let u=0;u<c;++u)A[u]=(i-u)*o;else if(o<0)for(let u=0;u<c;++u)A[u]=(a+u)/-o;else for(let u=0;u<c;++u)A[u]=(a+u)*o;return A}function c1(e,n,r){return n=+n,e=+e,r=+r,lg(e,n,r)[2]}function A1(e,n,r){n=+n,e=+e,r=+r;const s=n<e,a=s?c1(n,e,r):c1(e,n,r);return(s?-1:1)*(a<0?1/-a:a)}function cg(e,n){let r;if(n===void 0)for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let a of e)(a=n(a,++s,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function Ag(e,n){let r;if(n===void 0)for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let a of e)(a=n(a,++s,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function zU(e,n,r=0,s=1/0,a){if(n=Math.floor(n),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=n&&n<=s))return e;for(a=a===void 0?HU:XBe(a);s>r;){if(s-r>600){const A=s-r+1,u=n-r+1,h=Math.log(A),d=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*d*(A-d)/A)*(u-A/2<0?-1:1),g=Math.max(r,Math.floor(n-u*d/A+f)),m=Math.min(s,Math.floor(n+(A-u)*d/A+f));zU(e,n,g,m,a)}const i=e[n];let o=r,c=s;for($A(e,r,n),a(e[s],i)>0&&$A(e,r,s);o<c;){for($A(e,o,c),++o,--c;a(e[o],i)<0;)++o;for(;a(e[c],i)>0;)--c}a(e[r],i)===0?$A(e,r,c):(++c,$A(e,c,s)),c<=n&&(r=c+1),n<=c&&(s=c-1)}return e}function $A(e,n,r){const s=e[n];e[n]=e[r],e[r]=s}function e5e(e,n,r){if(e=Float64Array.from(zBe(e,r)),!(!(s=e.length)||isNaN(n=+n))){if(n<=0||s<2)return Ag(e);if(n>=1)return cg(e);var s,a=(s-1)*n,i=Math.floor(a),o=cg(zU(e,i).subarray(0,i+1)),c=Ag(e.subarray(i+1));return o+(c-o)*(a-i)}}function t5e(e,n,r=LU){if(!(!(s=e.length)||isNaN(n=+n))){if(n<=0||s<2)return+r(e[0],0,e);if(n>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*n,i=Math.floor(a),o=+r(e[i],i,e),c=+r(e[i+1],i+1,e);return o+(c-o)*(a-i)}}function n5e(e,n,r){e=+e,n=+n,r=(a=arguments.length)<2?(n=e,e=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((n-e)/r))|0,i=new Array(a);++s<a;)i[s]=e+s*r;return i}function r5e(e,n){let r=0;if(n===void 0)for(let s of e)(s=+s)&&(r+=s);else{let s=-1;for(let a of e)(a=+n(a,++s,e))&&(r+=a)}return r}function ws(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function yi(e,n){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof n=="function"?this.interpolator(n):this.range(n);break}}return this}const u1=Symbol("implicit");function Ym(){var e=new ck,n=[],r=[],s=u1;function a(i){let o=e.get(i);if(o===void 0){if(s!==u1)return s;e.set(i,o=n.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return n.slice();n=[],e=new ck;for(const o of i)e.has(o)||e.set(o,n.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return Ym(n,r).unknown(s)},ws.apply(a,arguments),a}function $_(){var e=Ym().unknown(void 0),n=e.domain,r=e.range,s=0,a=1,i,o,c=!1,A=0,u=0,h=.5;delete e.unknown;function d(){var f=n().length,g=a<s,m=g?a:s,y=g?s:a;i=(y-m)/Math.max(1,f-A+u*2),c&&(i=Math.floor(i)),m+=(y-m-i*(f-A))*h,o=i*(1-A),c&&(m=Math.round(m),o=Math.round(o));var x=n5e(f).map(function(p){return m+i*p});return r(g?x.reverse():x)}return e.domain=function(f){return arguments.length?(n(f),d()):n()},e.range=function(f){return arguments.length?([s,a]=f,s=+s,a=+a,d()):[s,a]},e.rangeRound=function(f){return[s,a]=f,s=+s,a=+a,c=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(c=!!f,d()):c},e.padding=function(f){return arguments.length?(A=Math.min(1,u=+f),d()):A},e.paddingInner=function(f){return arguments.length?(A=Math.min(1,f),d()):A},e.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},e.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),d()):h},e.copy=function(){return $_(n(),[s,a]).round(c).paddingInner(A).paddingOuter(u).align(h)},ws.apply(d(),arguments)}function KU(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return KU(n())},e}function s5e(){return KU($_.apply(null,arguments).paddingInner(1))}function a5e(e){return function(){return e}}function ug(e){return+e}var uk=[0,1];function Ar(e){return e}function d1(e,n){return(n-=e=+e)?function(r){return(r-e)/n}:a5e(isNaN(n)?NaN:.5)}function i5e(e,n){var r;return e>n&&(r=e,e=n,n=r),function(s){return Math.max(e,Math.min(n,s))}}function o5e(e,n,r){var s=e[0],a=e[1],i=n[0],o=n[1];return a<s?(s=d1(a,s),i=r(o,i)):(s=d1(s,a),i=r(i,o)),function(c){return i(s(c))}}function l5e(e,n,r){var s=Math.min(e.length,n.length)-1,a=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++o<s;)a[o]=d1(e[o],e[o+1]),i[o]=r(n[o],n[o+1]);return function(c){var A=oh(e,c,1,s)-1;return i[A](a[A](c))}}function lh(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Jm(){var e=uk,n=uk,r=ba,s,a,i,o=Ar,c,A,u;function h(){var f=Math.min(e.length,n.length);return o!==Ar&&(o=i5e(e[0],e[f-1])),c=f>2?l5e:o5e,A=u=null,d}function d(f){return f==null||isNaN(f=+f)?i:(A||(A=c(e.map(s),n,r)))(s(o(f)))}return d.invert=function(f){return o(a((u||(u=c(n,e.map(s),Is)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,ug),h()):e.slice()},d.range=function(f){return arguments.length?(n=Array.from(f),h()):n.slice()},d.rangeRound=function(f){return n=Array.from(f),r=S_,h()},d.clamp=function(f){return arguments.length?(o=f?!0:Ar,h()):o!==Ar},d.interpolate=function(f){return arguments.length?(r=f,h()):r},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,g){return s=f,a=g,h()}}function O_(){return Jm()(Ar,Ar)}function c5e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function dg(e,n){if((r=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Yc(e){return e=dg(Math.abs(e)),e?e[1]:NaN}function A5e(e,n){return function(r,s){for(var a=r.length,i=[],o=0,c=e[0],A=0;a>0&&c>0&&(A+c+1>s&&(c=Math.max(1,s-A)),i.push(r.substring(a-=c,a+c)),!((A+=c+1)>s));)c=e[o=(o+1)%e.length];return i.reverse().join(n)}}function u5e(e){return function(n){return n.replace(/[0-9]/g,function(r){return e[+r]})}}var d5e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jd(e){if(!(n=d5e.exec(e)))throw new Error("invalid format: "+e);var n;return new L_({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}jd.prototype=L_.prototype;function L_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}L_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function h5e(e){e:for(var n=e.length,r=1,s=-1,a;r<n;++r)switch(e[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var GU;function f5e(e,n){var r=dg(e,n);if(!r)return e+"";var s=r[0],a=r[1],i=a-(GU=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+dg(e,Math.max(0,n+i-1))[0]}function dk(e,n){var r=dg(e,n);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const hk={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:c5e,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>dk(e*100,n),r:dk,s:f5e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function fk(e){return e}var gk=Array.prototype.map,mk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function g5e(e){var n=e.grouping===void 0||e.thousands===void 0?fk:A5e(gk.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?fk:u5e(gk.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",A=e.nan===void 0?"NaN":e.nan+"";function u(d){d=jd(d);var f=d.fill,g=d.align,m=d.sign,y=d.symbol,x=d.zero,p=d.width,v=d.comma,b=d.precision,w=d.trim,_=d.type;_==="n"?(v=!0,_="g"):hk[_]||(b===void 0&&(b=12),w=!0,_="g"),(x||f==="0"&&g==="=")&&(x=!0,f="0",g="=");var C=y==="$"?r:y==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",k=y==="$"?s:/[%p]/.test(_)?o:"",j=hk[_],B=/[defgprs%]/.test(_);b=b===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function E(P){var I=C,U=k,N,D,T;if(_==="c")U=j(P)+U,P="";else{P=+P;var L=P<0||1/P<0;if(P=isNaN(P)?A:j(Math.abs(P),b),w&&(P=h5e(P)),L&&+P==0&&m!=="+"&&(L=!1),I=(L?m==="("?m:c:m==="-"||m==="("?"":m)+I,U=(_==="s"?mk[8+GU/3]:"")+U+(L&&m==="("?")":""),B){for(N=-1,D=P.length;++N<D;)if(T=P.charCodeAt(N),48>T||T>57){U=(T===46?a+P.slice(N+1):P.slice(N))+U,P=P.slice(0,N);break}}}v&&!x&&(P=n(P,1/0));var Q=I.length+P.length+U.length,M=Q<p?new Array(p-Q+1).join(f):"";switch(v&&x&&(P=n(M+P,M.length?p-U.length:1/0),M=""),g){case"<":P=I+P+U+M;break;case"=":P=I+M+P+U;break;case"^":P=M.slice(0,Q=M.length>>1)+I+P+U+M.slice(Q);break;default:P=M+I+P+U;break}return i(P)}return E.toString=function(){return d+""},E}function h(d,f){var g=u((d=jd(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(Yc(f)/3)))*3,y=Math.pow(10,-m),x=mk[8+m/3];return function(p){return g(y*p)+x}}return{format:u,formatPrefix:h}}var ef,H_,WU;m5e({thousands:",",grouping:[3],currency:["$",""]});function m5e(e){return ef=g5e(e),H_=ef.format,WU=ef.formatPrefix,ef}function p5e(e){return Math.max(0,-Yc(Math.abs(e)))}function y5e(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yc(n)/3)))*3-Yc(Math.abs(e)))}function v5e(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Yc(n)-Yc(e))+1}function VU(e,n,r,s){var a=A1(e,n,r),i;switch(s=jd(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(n));return s.precision==null&&!isNaN(i=y5e(a,o))&&(s.precision=i),WU(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=v5e(a,Math.max(Math.abs(e),Math.abs(n))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=p5e(a))&&(s.precision=i-(s.type==="%")*2);break}}return H_(s)}function fo(e){var n=e.domain;return e.ticks=function(r){var s=n();return l1(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var a=n();return VU(a[0],a[a.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=n(),a=0,i=s.length-1,o=s[a],c=s[i],A,u,h=10;for(c<o&&(u=o,o=c,c=u,u=a,a=i,i=u);h-- >0;){if(u=c1(o,c,r),u===A)return s[a]=o,s[i]=c,n(s);if(u>0)o=Math.floor(o/u)*u,c=Math.ceil(c/u)*u;else if(u<0)o=Math.ceil(o*u)/u,c=Math.floor(c*u)/u;else break;A=u}return e},e}function z_(){var e=O_();return e.copy=function(){return lh(e,z_())},ws.apply(e,arguments),fo(e)}function qU(e){var n;function r(s){return s==null||isNaN(s=+s)?n:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,ug),r):e.slice()},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return qU(e).unknown(n)},e=arguments.length?Array.from(e,ug):[0,1],fo(r)}function XU(e,n){e=e.slice();var r=0,s=e.length-1,a=e[r],i=e[s],o;return i<a&&(o=r,r=s,s=o,o=a,a=i,i=o),e[r]=n.floor(a),e[s]=n.ceil(i),e}function pk(e){return Math.log(e)}function yk(e){return Math.exp(e)}function x5e(e){return-Math.log(-e)}function w5e(e){return-Math.exp(-e)}function b5e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _5e(e){return e===10?b5e:e===Math.E?Math.exp:n=>Math.pow(e,n)}function C5e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),n=>Math.log(n)/e)}function vk(e){return(n,r)=>-e(-n,r)}function K_(e){const n=e(pk,yk),r=n.domain;let s=10,a,i;function o(){return a=C5e(s),i=_5e(s),r()[0]<0?(a=vk(a),i=vk(i),e(x5e,w5e)):e(pk,yk),n}return n.base=function(c){return arguments.length?(s=+c,o()):s},n.domain=function(c){return arguments.length?(r(c),o()):r()},n.ticks=c=>{const A=r();let u=A[0],h=A[A.length-1];const d=h<u;d&&([u,h]=[h,u]);let f=a(u),g=a(h),m,y;const x=c==null?10:+c;let p=[];if(!(s%1)&&g-f<x){if(f=Math.floor(f),g=Math.ceil(g),u>0){for(;f<=g;++f)for(m=1;m<s;++m)if(y=f<0?m/i(-f):m*i(f),!(y<u)){if(y>h)break;p.push(y)}}else for(;f<=g;++f)for(m=s-1;m>=1;--m)if(y=f>0?m/i(-f):m*i(f),!(y<u)){if(y>h)break;p.push(y)}p.length*2<x&&(p=l1(u,h,x))}else p=l1(f,g,Math.min(g-f,x)).map(i);return d?p.reverse():p},n.tickFormat=(c,A)=>{if(c==null&&(c=10),A==null&&(A=s===10?"s":","),typeof A!="function"&&(!(s%1)&&(A=jd(A)).precision==null&&(A.trim=!0),A=H_(A)),c===1/0)return A;const u=Math.max(1,s*c/n.ticks().length);return h=>{let d=h/i(Math.round(a(h)));return d*s<s-.5&&(d*=s),d<=u?A(h):""}},n.nice=()=>r(XU(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),n}function YU(){const e=K_(Jm()).domain([1,10]);return e.copy=()=>lh(e,YU()).base(e.base()),ws.apply(e,arguments),e}function xk(e){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/e))}}function wk(e){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*e}}function G_(e){var n=1,r=e(xk(n),wk(n));return r.constant=function(s){return arguments.length?e(xk(n=+s),wk(n)):n},fo(r)}function JU(){var e=G_(Jm());return e.copy=function(){return lh(e,JU()).constant(e.constant())},ws.apply(e,arguments)}function bk(e){return function(n){return n<0?-Math.pow(-n,e):Math.pow(n,e)}}function B5e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function S5e(e){return e<0?-e*e:e*e}function W_(e){var n=e(Ar,Ar),r=1;function s(){return r===1?e(Ar,Ar):r===.5?e(B5e,S5e):e(bk(r),bk(1/r))}return n.exponent=function(a){return arguments.length?(r=+a,s()):r},fo(n)}function V_(){var e=W_(Jm());return e.copy=function(){return lh(e,V_()).exponent(e.exponent())},ws.apply(e,arguments),e}function k5e(){return V_.apply(null,arguments).exponent(.5)}function _k(e){return Math.sign(e)*e*e}function j5e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function ZU(){var e=O_(),n=[0,1],r=!1,s;function a(i){var o=j5e(e(i));return isNaN(o)?s:r?Math.round(o):o}return a.invert=function(i){return e.invert(_k(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((n=Array.from(i,ug)).map(_k)),a):n.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return ZU(e.domain(),n).round(r).clamp(e.clamp()).unknown(s)},ws.apply(a,arguments),fo(a)}function eI(){var e=[],n=[],r=[],s;function a(){var o=0,c=Math.max(1,n.length);for(r=new Array(c-1);++o<c;)r[o-1]=t5e(e,o/c);return i}function i(o){return o==null||isNaN(o=+o)?s:n[oh(r,o)]}return i.invertExtent=function(o){var c=n.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:e[0],c<r.length?r[c]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let c of o)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(Yi),a()},i.range=function(o){return arguments.length?(n=Array.from(o),a()):n.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return eI().domain(e).range(n).unknown(s)},ws.apply(i,arguments)}function tI(){var e=0,n=1,r=1,s=[.5],a=[0,1],i;function o(A){return A!=null&&A<=A?a[oh(s,A,0,r)]:i}function c(){var A=-1;for(s=new Array(r);++A<r;)s[A]=((A+1)*n-(A-r)*e)/(r+1);return o}return o.domain=function(A){return arguments.length?([e,n]=A,e=+e,n=+n,c()):[e,n]},o.range=function(A){return arguments.length?(r=(a=Array.from(A)).length-1,c()):a.slice()},o.invertExtent=function(A){var u=a.indexOf(A);return u<0?[NaN,NaN]:u<1?[e,s[0]]:u>=r?[s[r-1],n]:[s[u-1],s[u]]},o.unknown=function(A){return arguments.length&&(i=A),o},o.thresholds=function(){return s.slice()},o.copy=function(){return tI().domain([e,n]).range(a).unknown(i)},ws.apply(fo(o),arguments)}function nI(){var e=[.5],n=[0,1],r,s=1;function a(i){return i!=null&&i<=i?n[oh(e,i,0,s)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,n.length-1),a):e.slice()},a.range=function(i){return arguments.length?(n=Array.from(i),s=Math.min(e.length,n.length-1),a):n.slice()},a.invertExtent=function(i){var o=n.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return nI().domain(e).range(n).unknown(r)},ws.apply(a,arguments)}const Py=new Date,Qy=new Date;function yn(e,n,r,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),n(i,1),e(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(n(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const A=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return A;let u;do A.push(u=new Date(+i)),n(i,c),e(i);while(u<i&&i<o);return A},a.filter=i=>yn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;n(o,-1),!i(o););else for(;--c>=0;)for(;n(o,1),!i(o););}),r&&(a.count=(i,o)=>(Py.setTime(+i),Qy.setTime(+o),e(Py),e(Qy),Math.floor(r(Py,Qy))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const hg=yn(()=>{},(e,n)=>{e.setTime(+e+n)},(e,n)=>n-e);hg.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yn(n=>{n.setTime(Math.floor(n/e)*e)},(n,r)=>{n.setTime(+n+r*e)},(n,r)=>(r-n)/e):hg);hg.range;const Va=1e3,cs=Va*60,qa=cs*60,ii=qa*24,q_=ii*7,Ck=ii*30,My=ii*365,Do=yn(e=>{e.setTime(e-e.getMilliseconds())},(e,n)=>{e.setTime(+e+n*Va)},(e,n)=>(n-e)/Va,e=>e.getUTCSeconds());Do.range;const X_=yn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Va)},(e,n)=>{e.setTime(+e+n*cs)},(e,n)=>(n-e)/cs,e=>e.getMinutes());X_.range;const Y_=yn(e=>{e.setUTCSeconds(0,0)},(e,n)=>{e.setTime(+e+n*cs)},(e,n)=>(n-e)/cs,e=>e.getUTCMinutes());Y_.range;const J_=yn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Va-e.getMinutes()*cs)},(e,n)=>{e.setTime(+e+n*qa)},(e,n)=>(n-e)/qa,e=>e.getHours());J_.range;const Z_=yn(e=>{e.setUTCMinutes(0,0,0)},(e,n)=>{e.setTime(+e+n*qa)},(e,n)=>(n-e)/qa,e=>e.getUTCHours());Z_.range;const ch=yn(e=>e.setHours(0,0,0,0),(e,n)=>e.setDate(e.getDate()+n),(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*cs)/ii,e=>e.getDate()-1);ch.range;const Zm=yn(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/ii,e=>e.getUTCDate()-1);Zm.range;const rI=yn(e=>{e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n)},(e,n)=>(n-e)/ii,e=>Math.floor(e/ii));rI.range;function bl(e){return yn(n=>{n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},(n,r)=>{n.setDate(n.getDate()+r*7)},(n,r)=>(r-n-(r.getTimezoneOffset()-n.getTimezoneOffset())*cs)/q_)}const ep=bl(0),fg=bl(1),N5e=bl(2),E5e=bl(3),Jc=bl(4),T5e=bl(5),F5e=bl(6);ep.range;fg.range;N5e.range;E5e.range;Jc.range;T5e.range;F5e.range;function _l(e){return yn(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCDate(n.getUTCDate()+r*7)},(n,r)=>(r-n)/q_)}const tp=_l(0),gg=_l(1),U5e=_l(2),I5e=_l(3),Zc=_l(4),P5e=_l(5),Q5e=_l(6);tp.range;gg.range;U5e.range;I5e.range;Zc.range;P5e.range;Q5e.range;const e2=yn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,n)=>{e.setMonth(e.getMonth()+n)},(e,n)=>n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12,e=>e.getMonth());e2.range;const t2=yn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCMonth(e.getUTCMonth()+n)},(e,n)=>n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());t2.range;const oi=yn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n)},(e,n)=>n.getFullYear()-e.getFullYear(),e=>e.getFullYear());oi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yn(n=>{n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,r)=>{n.setFullYear(n.getFullYear()+r*e)});oi.range;const li=yn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n)},(e,n)=>n.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());li.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yn(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,r)=>{n.setUTCFullYear(n.getUTCFullYear()+r*e)});li.range;function sI(e,n,r,s,a,i){const o=[[Do,1,Va],[Do,5,5*Va],[Do,15,15*Va],[Do,30,30*Va],[i,1,cs],[i,5,5*cs],[i,15,15*cs],[i,30,30*cs],[a,1,qa],[a,3,3*qa],[a,6,6*qa],[a,12,12*qa],[s,1,ii],[s,2,2*ii],[r,1,q_],[n,1,Ck],[n,3,3*Ck],[e,1,My]];function c(u,h,d){const f=h<u;f&&([u,h]=[h,u]);const g=d&&typeof d.range=="function"?d:A(u,h,d),m=g?g.range(u,+h+1):[];return f?m.reverse():m}function A(u,h,d){const f=Math.abs(h-u)/d,g=R_(([,,x])=>x).right(o,f);if(g===o.length)return e.every(A1(u/My,h/My,d));if(g===0)return hg.every(Math.max(A1(u,h,d),1));const[m,y]=o[f/o[g-1][2]<o[g][2]/f?g-1:g];return m.every(y)}return[c,A]}const[M5e,D5e]=sI(li,t2,tp,rI,Z_,Y_),[R5e,$5e]=sI(oi,e2,ep,ch,J_,X_);function Dy(e){if(0<=e.y&&e.y<100){var n=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return n.setFullYear(e.y),n}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ry(e){if(0<=e.y&&e.y<100){var n=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return n.setUTCFullYear(e.y),n}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function OA(e,n,r){return{y:e,m:n,d:r,H:0,M:0,S:0,L:0}}function O5e(e){var n=e.dateTime,r=e.date,s=e.time,a=e.periods,i=e.days,o=e.shortDays,c=e.months,A=e.shortMonths,u=LA(a),h=HA(a),d=LA(i),f=HA(i),g=LA(o),m=HA(o),y=LA(c),x=HA(c),p=LA(A),v=HA(A),b={a:L,A:Q,b:M,B:F,c:null,d:Ek,e:Ek,f:ASe,g:xSe,G:bSe,H:oSe,I:lSe,j:cSe,L:aI,m:uSe,M:dSe,p:O,q:X,Q:Uk,s:Ik,S:hSe,u:fSe,U:gSe,V:mSe,w:pSe,W:ySe,x:null,X:null,y:vSe,Y:wSe,Z:_Se,"%":Fk},w={a:ae,A:$,b:J,B:le,c:null,d:Tk,e:Tk,f:kSe,g:MSe,G:RSe,H:CSe,I:BSe,j:SSe,L:oI,m:jSe,M:NSe,p:re,q:V,Q:Uk,s:Ik,S:ESe,u:TSe,U:FSe,V:USe,w:ISe,W:PSe,x:null,X:null,y:QSe,Y:DSe,Z:$Se,"%":Fk},_={a:E,A:P,b:I,B:U,c:N,d:jk,e:jk,f:rSe,g:kk,G:Sk,H:Nk,I:Nk,j:Z5e,L:nSe,m:J5e,M:eSe,p:B,q:Y5e,Q:aSe,s:iSe,S:tSe,u:G5e,U:W5e,V:V5e,w:K5e,W:q5e,x:D,X:T,y:kk,Y:Sk,Z:X5e,"%":sSe};b.x=C(r,b),b.X=C(s,b),b.c=C(n,b),w.x=C(r,w),w.X=C(s,w),w.c=C(n,w);function C(z,Z){return function(Y){var K=[],ue=-1,be=0,H=z.length,ee,Se,me;for(Y instanceof Date||(Y=new Date(+Y));++ue<H;)z.charCodeAt(ue)===37&&(K.push(z.slice(be,ue)),(Se=Bk[ee=z.charAt(++ue)])!=null?ee=z.charAt(++ue):Se=ee==="e"?" ":"0",(me=Z[ee])&&(ee=me(Y,Se)),K.push(ee),be=ue+1);return K.push(z.slice(be,ue)),K.join("")}}function k(z,Z){return function(Y){var K=OA(1900,void 0,1),ue=j(K,z,Y+="",0),be,H;if(ue!=Y.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(Z&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(be=Ry(OA(K.y,0,1)),H=be.getUTCDay(),be=H>4||H===0?gg.ceil(be):gg(be),be=Zm.offset(be,(K.V-1)*7),K.y=be.getUTCFullYear(),K.m=be.getUTCMonth(),K.d=be.getUTCDate()+(K.w+6)%7):(be=Dy(OA(K.y,0,1)),H=be.getDay(),be=H>4||H===0?fg.ceil(be):fg(be),be=ch.offset(be,(K.V-1)*7),K.y=be.getFullYear(),K.m=be.getMonth(),K.d=be.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),H="Z"in K?Ry(OA(K.y,0,1)).getUTCDay():Dy(OA(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(H+5)%7:K.w+K.U*7-(H+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,Ry(K)):Dy(K)}}function j(z,Z,Y,K){for(var ue=0,be=Z.length,H=Y.length,ee,Se;ue<be;){if(K>=H)return-1;if(ee=Z.charCodeAt(ue++),ee===37){if(ee=Z.charAt(ue++),Se=_[ee in Bk?Z.charAt(ue++):ee],!Se||(K=Se(z,Y,K))<0)return-1}else if(ee!=Y.charCodeAt(K++))return-1}return K}function B(z,Z,Y){var K=u.exec(Z.slice(Y));return K?(z.p=h.get(K[0].toLowerCase()),Y+K[0].length):-1}function E(z,Z,Y){var K=g.exec(Z.slice(Y));return K?(z.w=m.get(K[0].toLowerCase()),Y+K[0].length):-1}function P(z,Z,Y){var K=d.exec(Z.slice(Y));return K?(z.w=f.get(K[0].toLowerCase()),Y+K[0].length):-1}function I(z,Z,Y){var K=p.exec(Z.slice(Y));return K?(z.m=v.get(K[0].toLowerCase()),Y+K[0].length):-1}function U(z,Z,Y){var K=y.exec(Z.slice(Y));return K?(z.m=x.get(K[0].toLowerCase()),Y+K[0].length):-1}function N(z,Z,Y){return j(z,n,Z,Y)}function D(z,Z,Y){return j(z,r,Z,Y)}function T(z,Z,Y){return j(z,s,Z,Y)}function L(z){return o[z.getDay()]}function Q(z){return i[z.getDay()]}function M(z){return A[z.getMonth()]}function F(z){return c[z.getMonth()]}function O(z){return a[+(z.getHours()>=12)]}function X(z){return 1+~~(z.getMonth()/3)}function ae(z){return o[z.getUTCDay()]}function $(z){return i[z.getUTCDay()]}function J(z){return A[z.getUTCMonth()]}function le(z){return c[z.getUTCMonth()]}function re(z){return a[+(z.getUTCHours()>=12)]}function V(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var Z=C(z+="",b);return Z.toString=function(){return z},Z},parse:function(z){var Z=k(z+="",!1);return Z.toString=function(){return z},Z},utcFormat:function(z){var Z=C(z+="",w);return Z.toString=function(){return z},Z},utcParse:function(z){var Z=k(z+="",!0);return Z.toString=function(){return z},Z}}}var Bk={"-":"",_:" ",0:"0"},jn=/^\s*\d+/,L5e=/^%/,H5e=/[\\^$*+?|[\]().{}]/g;function ft(e,n,r){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(n)+a:a)}function z5e(e){return e.replace(H5e,"\\$&")}function LA(e){return new RegExp("^(?:"+e.map(z5e).join("|")+")","i")}function HA(e){return new Map(e.map((n,r)=>[n.toLowerCase(),r]))}function K5e(e,n,r){var s=jn.exec(n.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function G5e(e,n,r){var s=jn.exec(n.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function W5e(e,n,r){var s=jn.exec(n.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function V5e(e,n,r){var s=jn.exec(n.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function q5e(e,n,r){var s=jn.exec(n.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function Sk(e,n,r){var s=jn.exec(n.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function kk(e,n,r){var s=jn.exec(n.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function X5e(e,n,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function Y5e(e,n,r){var s=jn.exec(n.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function J5e(e,n,r){var s=jn.exec(n.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function jk(e,n,r){var s=jn.exec(n.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function Z5e(e,n,r){var s=jn.exec(n.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function Nk(e,n,r){var s=jn.exec(n.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function eSe(e,n,r){var s=jn.exec(n.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function tSe(e,n,r){var s=jn.exec(n.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function nSe(e,n,r){var s=jn.exec(n.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function rSe(e,n,r){var s=jn.exec(n.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function sSe(e,n,r){var s=L5e.exec(n.slice(r,r+1));return s?r+s[0].length:-1}function aSe(e,n,r){var s=jn.exec(n.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function iSe(e,n,r){var s=jn.exec(n.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function Ek(e,n){return ft(e.getDate(),n,2)}function oSe(e,n){return ft(e.getHours(),n,2)}function lSe(e,n){return ft(e.getHours()%12||12,n,2)}function cSe(e,n){return ft(1+ch.count(oi(e),e),n,3)}function aI(e,n){return ft(e.getMilliseconds(),n,3)}function ASe(e,n){return aI(e,n)+"000"}function uSe(e,n){return ft(e.getMonth()+1,n,2)}function dSe(e,n){return ft(e.getMinutes(),n,2)}function hSe(e,n){return ft(e.getSeconds(),n,2)}function fSe(e){var n=e.getDay();return n===0?7:n}function gSe(e,n){return ft(ep.count(oi(e)-1,e),n,2)}function iI(e){var n=e.getDay();return n>=4||n===0?Jc(e):Jc.ceil(e)}function mSe(e,n){return e=iI(e),ft(Jc.count(oi(e),e)+(oi(e).getDay()===4),n,2)}function pSe(e){return e.getDay()}function ySe(e,n){return ft(fg.count(oi(e)-1,e),n,2)}function vSe(e,n){return ft(e.getFullYear()%100,n,2)}function xSe(e,n){return e=iI(e),ft(e.getFullYear()%100,n,2)}function wSe(e,n){return ft(e.getFullYear()%1e4,n,4)}function bSe(e,n){var r=e.getDay();return e=r>=4||r===0?Jc(e):Jc.ceil(e),ft(e.getFullYear()%1e4,n,4)}function _Se(e){var n=e.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ft(n/60|0,"0",2)+ft(n%60,"0",2)}function Tk(e,n){return ft(e.getUTCDate(),n,2)}function CSe(e,n){return ft(e.getUTCHours(),n,2)}function BSe(e,n){return ft(e.getUTCHours()%12||12,n,2)}function SSe(e,n){return ft(1+Zm.count(li(e),e),n,3)}function oI(e,n){return ft(e.getUTCMilliseconds(),n,3)}function kSe(e,n){return oI(e,n)+"000"}function jSe(e,n){return ft(e.getUTCMonth()+1,n,2)}function NSe(e,n){return ft(e.getUTCMinutes(),n,2)}function ESe(e,n){return ft(e.getUTCSeconds(),n,2)}function TSe(e){var n=e.getUTCDay();return n===0?7:n}function FSe(e,n){return ft(tp.count(li(e)-1,e),n,2)}function lI(e){var n=e.getUTCDay();return n>=4||n===0?Zc(e):Zc.ceil(e)}function USe(e,n){return e=lI(e),ft(Zc.count(li(e),e)+(li(e).getUTCDay()===4),n,2)}function ISe(e){return e.getUTCDay()}function PSe(e,n){return ft(gg.count(li(e)-1,e),n,2)}function QSe(e,n){return ft(e.getUTCFullYear()%100,n,2)}function MSe(e,n){return e=lI(e),ft(e.getUTCFullYear()%100,n,2)}function DSe(e,n){return ft(e.getUTCFullYear()%1e4,n,4)}function RSe(e,n){var r=e.getUTCDay();return e=r>=4||r===0?Zc(e):Zc.ceil(e),ft(e.getUTCFullYear()%1e4,n,4)}function $Se(){return"+0000"}function Fk(){return"%"}function Uk(e){return+e}function Ik(e){return Math.floor(+e/1e3)}var Rl,cI,AI;OSe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function OSe(e){return Rl=O5e(e),cI=Rl.format,Rl.parse,AI=Rl.utcFormat,Rl.utcParse,Rl}function LSe(e){return new Date(e)}function HSe(e){return e instanceof Date?+e:+new Date(+e)}function n2(e,n,r,s,a,i,o,c,A,u){var h=O_(),d=h.invert,f=h.domain,g=u(".%L"),m=u(":%S"),y=u("%I:%M"),x=u("%I %p"),p=u("%a %d"),v=u("%b %d"),b=u("%B"),w=u("%Y");function _(C){return(A(C)<C?g:c(C)<C?m:o(C)<C?y:i(C)<C?x:s(C)<C?a(C)<C?p:v:r(C)<C?b:w)(C)}return h.invert=function(C){return new Date(d(C))},h.domain=function(C){return arguments.length?f(Array.from(C,HSe)):f().map(LSe)},h.ticks=function(C){var k=f();return e(k[0],k[k.length-1],C??10)},h.tickFormat=function(C,k){return k==null?_:u(k)},h.nice=function(C){var k=f();return(!C||typeof C.range!="function")&&(C=n(k[0],k[k.length-1],C??10)),C?f(XU(k,C)):h},h.copy=function(){return lh(h,n2(e,n,r,s,a,i,o,c,A,u))},h}function zSe(){return ws.apply(n2(R5e,$5e,oi,e2,ep,ch,J_,X_,Do,cI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function KSe(){return ws.apply(n2(M5e,D5e,li,t2,tp,Zm,Z_,Y_,Do,AI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function np(){var e=0,n=1,r,s,a,i,o=Ar,c=!1,A;function u(d){return d==null||isNaN(d=+d)?A:o(a===0?.5:(d=(i(d)-r)*a,c?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,n]=d,r=i(e=+e),s=i(n=+n),a=r===s?0:1/(s-r),u):[e,n]},u.clamp=function(d){return arguments.length?(c=!!d,u):c},u.interpolator=function(d){return arguments.length?(o=d,u):o};function h(d){return function(f){var g,m;return arguments.length?([g,m]=f,o=d(g,m),u):[o(0),o(1)]}}return u.range=h(ba),u.rangeRound=h(S_),u.unknown=function(d){return arguments.length?(A=d,u):A},function(d){return i=d,r=d(e),s=d(n),a=r===s?0:1/(s-r),u}}function go(e,n){return n.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uI(){var e=fo(np()(Ar));return e.copy=function(){return go(e,uI())},yi.apply(e,arguments)}function dI(){var e=K_(np()).domain([1,10]);return e.copy=function(){return go(e,dI()).base(e.base())},yi.apply(e,arguments)}function hI(){var e=G_(np());return e.copy=function(){return go(e,hI()).constant(e.constant())},yi.apply(e,arguments)}function r2(){var e=W_(np());return e.copy=function(){return go(e,r2()).exponent(e.exponent())},yi.apply(e,arguments)}function GSe(){return r2.apply(null,arguments).exponent(.5)}function fI(){var e=[],n=Ar;function r(s){if(s!=null&&!isNaN(s=+s))return n((oh(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Yi),r},r.interpolator=function(s){return arguments.length?(n=s,r):n},r.range=function(){return e.map((s,a)=>n(a/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>e5e(e,i/s))},r.copy=function(){return fI(n).domain(e)},yi.apply(r,arguments)}function rp(){var e=0,n=.5,r=1,s=1,a,i,o,c,A,u=Ar,h,d=!1,f;function g(y){return isNaN(y=+y)?f:(y=.5+((y=+h(y))-i)*(s*y<s*i?c:A),u(d?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,n,r]=y,a=h(e=+e),i=h(n=+n),o=h(r=+r),c=a===i?0:.5/(i-a),A=i===o?0:.5/(o-i),s=i<a?-1:1,g):[e,n,r]},g.clamp=function(y){return arguments.length?(d=!!y,g):d},g.interpolator=function(y){return arguments.length?(u=y,g):u};function m(y){return function(x){var p,v,b;return arguments.length?([p,v,b]=x,u=Ebe(y,[p,v,b]),g):[u(0),u(.5),u(1)]}}return g.range=m(ba),g.rangeRound=m(S_),g.unknown=function(y){return arguments.length?(f=y,g):f},function(y){return h=y,a=y(e),i=y(n),o=y(r),c=a===i?0:.5/(i-a),A=i===o?0:.5/(o-i),s=i<a?-1:1,g}}function gI(){var e=fo(rp()(Ar));return e.copy=function(){return go(e,gI())},yi.apply(e,arguments)}function mI(){var e=K_(rp()).domain([.1,1,10]);return e.copy=function(){return go(e,mI()).base(e.base())},yi.apply(e,arguments)}function pI(){var e=G_(rp());return e.copy=function(){return go(e,pI()).constant(e.constant())},yi.apply(e,arguments)}function s2(){var e=W_(rp());return e.copy=function(){return go(e,s2()).exponent(e.exponent())},yi.apply(e,arguments)}function WSe(){return s2.apply(null,arguments).exponent(.5)}const VSe=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:$_,scaleDiverging:gI,scaleDivergingLog:mI,scaleDivergingPow:s2,scaleDivergingSqrt:WSe,scaleDivergingSymlog:pI,scaleIdentity:qU,scaleImplicit:u1,scaleLinear:z_,scaleLog:YU,scaleOrdinal:Ym,scalePoint:s5e,scalePow:V_,scaleQuantile:eI,scaleQuantize:tI,scaleRadial:ZU,scaleSequential:uI,scaleSequentialLog:dI,scaleSequentialPow:r2,scaleSequentialQuantile:fI,scaleSequentialSqrt:GSe,scaleSequentialSymlog:hI,scaleSqrt:k5e,scaleSymlog:JU,scaleThreshold:nI,scaleTime:zSe,scaleUtc:KSe,tickFormat:VU},Symbol.toStringTag,{value:"Module"})),qSe=["linear","time","log","sqrt"];function XSe(e){return`scale${(r=>r&&r[0].toUpperCase()+r.slice(1))(e)}`}function yI(e){return typeof e=="function"?vt(e.copy)&&vt(e.domain)&&vt(e.range):typeof e=="string"?qSe.includes(e):!1}function vI(e,n){if(e.scale){if(e.scale.x||e.scale.y)return!!e.scale[n]}else return!1;return!0}function YSe(e,n){if(!vI(e,n))return;const r=e.scale[n]||e.scale;return typeof r=="string"?r:wI(r)}function JSe(e,n){let r;if(e.domain&&e.domain[n]?r=e.domain[n]:e.domain&&Array.isArray(e.domain)&&(r=e.domain),!!r)return ai(r)?"time":"linear"}function xI(e,n){if(!e.data)return"linear";const r=I_(e[n]),s=e.data.map(a=>{const i=gs(r(a))?r(a)[n]:r(a);return i!==void 0?i:a[n]});return ai(s)?"time":"linear"}function Nd(e){if(yI(e)){const n=XSe(e);return VSe[n]()}return z_()}function ps(e,n){const r=h1(e,n);if(r)return typeof r=="string"?Nd(r):r;const s=JSe(e,n)||xI(e,n);return Nd(s)}function h1(e,n){if(!vI(e,n))return;const r=e.scale[n]||e.scale;if(yI(r))return vt(r)?r:Nd(r)}function mg(e,n){return YSe(e,n)||xI(e,n)}const ZSe=[{name:"quantile",method:"quantiles"},{name:"log",method:"base"}];function wI(e){if(typeof e=="string")return e;const n=ZSe.filter(r=>e[r.method]!==void 0)[0];return n?n.name:void 0}const eke="@@__IMMUTABLE_ITERABLE__@@",tke="@@__IMMUTABLE_RECORD__@@",nke="@@__IMMUTABLE_LIST__@@";function Ah(e){return!!(e&&e[eke])}function rke(e){return!!(e&&e[tke])}function ske(e){return Ah(e)||rke(e)}function ake(e){return!!(e&&e[nke])}function bI(e,n){return Ah(e)?e.reduce((r,s,a)=>{let i=s;return n&&n[a]&&(i=bI(s)),r[a]=i,r},ake(e)?[]:{}):e}function f1(e){const n={errorX:!0,errorY:!0};return ske(e)?bI(e,n):e}function ike(e){return Ah(e)?e.size:e.length}function Pk(e,n){const s=(gs(e.domain)?e.domain[n]:e.domain)||ps(e,n).domain(),a=e.samples||1,i=Math.max(...s),o=Math.min(...s),c=(i-o)/a,A=P_(o,i,c);return A[A.length-1]===i?A:A.concat(i)}function _I(e,n,r){if(r===void 0&&(r="ascending"),!n)return e;let s=n;return(n==="x"||n==="y")&&(s=`_${n}`),__(e,s,r==="ascending"?"asc":"desc")}function oke(e,n){const r=1/Number.MAX_SAFE_INTEGER,s={x:mg(n,"x"),y:mg(n,"y")};if(s.x!=="log"&&s.y!=="log")return e;const a=(o,c)=>s[c]==="log"?o[`_${c}`]!==0:!0,i=o=>{const c=a(o,"x")?o._x:r,A=a(o,"y")?o._y:r,u=a(o,"y0")?o._y0:r;return Object.assign({},o,{_x:c,_y:A,_y0:u})};return e.map(o=>a(o,"x")&&a(o,"y")&&a(o,"y0")?o:i(o))}function lke(e){return vt(e)?e:e==null?()=>{}:nU(e)}function cke(e,n){const r=!!e.eventKey,s=lke(e.eventKey);return n.map((a,i)=>{if(a.eventKey!==void 0)return a;if(r){const o=s(a,i);return o!==void 0?Object.assign({eventKey:o},a):a}return a})}function Ake(e,n,r){const s=m=>m!==void 0,a=Gs(n.x),i=Ks(n.x),o=Gs(n.y),c=Ks(n.y),A=m=>y=>s(y)&&y<m,u=m=>y=>s(y)&&y>m,h=A(a),d=A(o),f=u(i),g=u(c);return e.map(m=>{let{_x:y,_y:x,_y0:p,_y1:v}=m;(h(y)||f(y))&&(y=null);const b=s(p)?p:r,w=s(v)?v:x;return s(w)?(!s(b)&&(d(w)||g(w))&&(x=null),(d(b)&&d(w)||g(b)&&g(w))&&(x=p=v=null),d(b)&&!d(w)&&(p=o),g(b)&&!g(w)&&(p=c),Object.assign({},m,TU({_x:y,_y:x,_y0:p,_y1:v},OBe))):m})}function $y(e,n){const r=CI(e,n),s=eA(e,n),a=dke(e,n),i=al([...r,...s,...a]);return i.length===0?null:i.reduce((o,c,A)=>(o[c]=A+1,o),{})}function Qk(e,n,r){if(!(Array.isArray(e)||Ah(e))||ike(e)<1)return[];const a=["x","y","y0"];r=Array.isArray(r)?r:a;const i=f=>I_(n[f]!==void 0?n[f]:f),o=r.reduce((f,g)=>(f[g]=i(g),f),{}),c=DBe(r,a)&&n.x==="_x"&&n.y==="_y"&&n.y0==="_y0";let A;c===!1&&(A={x:r.indexOf("x")!==-1?$y(n,"x"):void 0,y:r.indexOf("y")!==-1?$y(n,"y"):void 0,y0:r.indexOf("y0")!==-1?$y(n,"y"):void 0});const u=c?e:e.reduce((f,g,m)=>{const y=f1(g),x={x:m,y},p=r.reduce((b,w)=>{const _=o[w](y),C=_!==void 0?_:x[w];return C!==void 0&&(typeof C=="string"&&A[w]?(b[`${w}Name`]=C,b[`_${w}`]=A[w][C]):b[`_${w}`]=C),b},{}),v=Object.assign({},p,y);return rn(v)||f.push(v),f},[]),h=_I(u,n.sortKey,n.sortOrder),d=oke(h,n);return cke(n,d)}function uke(e){const n=Pk(e,"x"),r=Pk(e,"y");return n.map((a,i)=>({x:a,y:r[i]}))}function a2(e,n){return e.categories&&!Array.isArray(e.categories)?e.categories[n]:e.categories}function qs(e){return e.data?Qk(e.data,e):Qk(uke(e),e)}function CI(e,n){const{tickValues:r,tickFormat:s}=e;let a;return!r||!Array.isArray(r)&&!r[n]?a=s&&Array.isArray(s)?s:[]:a=r[n]||r,a.filter(i=>typeof i=="string")}function eA(e,n){if(!e.categories)return[];const r=a2(e,n),s=r&&r.filter(a=>typeof a=="string");return s?nCe(s):[]}function dke(e,n){if(!(Array.isArray(e.data)||Ah(e.data)))return[];const s=e[n]===void 0?n:e[n],a=I_(s),i=e.data.reduce((A,u)=>(A.push(f1(u)),A),[]);return _I(i,e.sortKey,e.sortOrder).reduce((A,u)=>{const h=f1(u);return A.push(a(h)),A},[]).filter(A=>typeof A=="string").reduce((A,u)=>(u!=null&&A.indexOf(u)===-1&&A.push(u),A),[])}function hke(e){const n=a=>a&&a.type?a.type.role:"";let r=n(e);if(r==="portal"){const a=G.Children.toArray(e.props.children);r=a.length?n(a[0]):""}return["area","bar","boxplot","candlestick","errorbar","group","histogram","line","pie","scatter","stack","voronoi"].includes(r)}function fke(e,n,r){return mg(n,r)!=="log"?e:(i=>{const o=i[0]<0||i[1]<0?-1/Number.MAX_SAFE_INTEGER:1/Number.MAX_SAFE_INTEGER,c=i[0]===0?o:i[0],A=i[1]===0?o:i[1];return[c,A]})(e)}function gke(e,n){const r=s=>Array.isArray(s)?{left:s[0],right:s[1]}:{left:s,right:s};return gs(e.domainPadding)?r(e.domainPadding[n]):r(e.domainPadding)}function mke(e,n){const r=`_${n}`;return e.flat().map(s=>s[r]&&s[r][1]!==void 0?s[r][1]:s[r])}function Mk(e,n,r){r===void 0&&(r="min");const s=c=>r==="max"?Math.max(...c):Math.min(...c),a=r==="max"?-1/0:1/0;let i=!1;const o=e.flat().reduce((c,A)=>{const u=A[`_${n}0`]!==void 0?A[`_${n}0`]:A[`_${n}`],h=A[`_${n}1`]!==void 0?A[`_${n}1`]:A[`_${n}`],d=s([u,h]);return i=i||u instanceof Date||h instanceof Date,s([c,d])},a);return i?new Date(o):o}function pke(e,n,r){if(!n.domainPadding)return e;const s=Bl(n,r),a=Cl(n,r),i=gke(n,r);if(!i.left&&!i.right)return e;const o=Gs(e),c=Ks(e),A=T2e(r,n.horizontal),u=Sn(n,A),h=Math.abs(u[0]-u[1]),d=Math.max(h-i.left-i.right,1),f=Math.abs(c.valueOf()-o.valueOf())/d*h,g={left:f*i.left/h,right:f*i.right/h};let m={min:o.valueOf()-g.left,max:c.valueOf()+g.right};const y=gs(n.singleQuadrantDomainPadding)?n.singleQuadrantDomainPadding[r]:n.singleQuadrantDomainPadding,x=o.valueOf()>=0&&m.min<=0||c.valueOf()<=0&&m.max>=0,p=(b,w)=>w==="min"&&o.valueOf()>=0&&b<=0||w==="max"&&c.valueOf()<=0&&b>=0?0:b;if(x&&y!==!1){const b={left:Math.abs(c-o)*i.left/h,right:Math.abs(c-o)*i.right/h},w={min:p(o.valueOf()-b.left,"min"),max:p(c.valueOf()+b.right,"max")},_={left:Math.abs(w.max-w.min)*i.left/h,right:Math.abs(w.max-w.min)*i.right/h};m={min:p(o.valueOf()-_.left,"min"),max:p(c.valueOf()+_.right,"max")}}const v={min:s!==void 0?s:m.min,max:a!==void 0?a:m.max};return o instanceof Date||c instanceof Date?ci(new Date(v.min),new Date(v.max)):ci(v.min,v.max)}function i2(e,n){const r=vt(e)?e:l2,s=vt(n)?n:o2;return(a,i)=>{const o=c2(a,i);if(o)return s(o,a,i);const c=a2(a,i),A=c?yke(a,i,c):r(a,i);return A?s(A,a,i):void 0}}function o2(e,n,r){return fke(pke(e,n,r),n,r)}function il(e,n){return i2()(e,n)}function yke(e,n,r){const s=r||a2(e,n),{polar:a,startAngle:i=0,endAngle:o=360}=e;if(!s)return;const c=Bl(e,n),A=Cl(e,n),u=sg(s)?eA(e,n):[],h=u.length===0?null:u.reduce((y,x,p)=>(y[x]=p+1,y),{}),d=h?s.map(y=>h[y]):s,f=c!==void 0?c:Gs(d),g=A!==void 0?A:Ks(d),m=ci(f,g);return a&&n==="x"&&Math.abs(i-o)===360?A2(m,d):m}function l2(e,n,r){const s=r||qs(e),{polar:a,startAngle:i=0,endAngle:o=360}=e,c=Bl(e,n),A=Cl(e,n);if(s.length<1)return c!==void 0&&A!==void 0?ci(c,A):void 0;const u=c!==void 0?c:Mk(s,n,"min"),h=A!==void 0?A:Mk(s,n,"max"),d=ci(u,h);return a&&n==="x"&&Math.abs(i-o)===360?A2(d,mke(s,n)):d}function ci(e,n){const r=s=>{const a=s===0?2*Math.pow(10,-10):Math.pow(10,-10),i=1,o=s instanceof Date?new Date(Number(s)-i):Number(s)-a,c=s instanceof Date?new Date(Number(s)+i):Number(s)+a;return s===0?[0,c]:[o,c]};return Number(e)===Number(n)?r(n):[e,n]}function c2(e,n){const r=Bl(e,n),s=Cl(e,n);if(gs(e.domain)&&e.domain[n])return e.domain[n];if(Array.isArray(e.domain))return e.domain;if(r!==void 0&&s!==void 0)return ci(r,s)}function g1(e,n){const r=c2(e,n);if(r)return r;const s=qs(e),a=s.reduce((A,u)=>u._y0<A?u._y0:A,1/0),i=A=>{if(n==="x")return A;const u=a!==1/0?a:0,h=Cl(e,n),d=Bl(e,n),f=h!==void 0?h:Ks(A,u),g=d!==void 0?d:Gs(A,u);return ci(g,f)};return i2(()=>l2(e,n,s),A=>o2(i(A),e,n))(e,n)}function Cl(e,n){return gs(e.maxDomain)&&e.maxDomain[n]!==void 0?e.maxDomain[n]:typeof e.maxDomain=="number"||OU(e.maxDomain)?e.maxDomain:void 0}function Bl(e,n){return gs(e.minDomain)&&e.minDomain[n]!==void 0?e.minDomain[n]:typeof e.minDomain=="number"||OU(e.minDomain)?e.minDomain:void 0}function A2(e,n){const r=IBe(n.sort((a,i)=>a-i)),s=r[1]-r[0];return[e[0],e[1]+s]}function BI(e){const n=a=>a&&a.type?a.type.role:"";let r=n(e);if(r==="portal"){const a=G.Children.toArray(e.props.children);r=a.length?n(a[0]):""}return["area","axis","bar","boxplot","candlestick","errorbar","group","histogram","line","pie","scatter","stack","voronoi"].includes(r)}function vke(e){return e}function bs(e){const{dependentAxis:n}=e;return n?"y":"x"}function SI(e,n){const r=n||vke,s=a=>a.reduce((i,o)=>o.type&&o.type.role==="axis"&&r(o)?i.concat(o):o.props&&o.props.children?i.concat(s(G.Children.toArray(o.props.children))):i,[]);return s(e)}function kI(e,n){return SI(e,s=>s.type.getAxis(s.props)===n)[0]}function Dk(e,n){const r=a=>n==="dependent"?a.props.dependentAxis:!a.props.dependentAxis,s=a=>a.reduce((i,o)=>o.type&&o.type.role==="axis"&&r(o)||o.props&&o.props.children&&s(G.Children.toArray(o.props.children)).length>0?i.concat(o):i,[]);return s(e)}function jI(e){const n=r=>{const s=Math.min(...r),a=Math.max(...r);return a<0?a:Math.max(0,s)};return{x:ai(e.x)?new Date(Math.min(...e.x)):n(e.x),y:ai(e.y)?new Date(Math.min(...e.y)):n(e.y)}}function Rk(e,n){const r=()=>e<=0&&Math.max(...n)<=0?"negative":"positive";return ai(n)?"positive":r()}function sp(e){const n=e.orientation||(e.dependentAxis?"left":"bottom");return{top:!1,bottom:!1,left:!0,right:!0}[n]}function ap(e){return e.tickValues!==void 0&&sg(e.tickValues)}function xke(e){const{tickValues:n}=e,r=bs(e),s=e.stringMap&&e.stringMap[r],a=n&&!ai(n)?u=>u:void 0;if(!s)return ap(e)?(u,h)=>n[h]:a;const i=s&&bU(s),A=["",...__(Object.values(s),u=>u).map(u=>i[u]),""];return u=>A[u]}function wke(e){const n=bs(e),r=e.stringMap&&e.stringMap[n],s=Array.isArray(e.categories)?e.categories:e.categories&&e.categories[n],a=s&&tCe(s)?s.map(o=>r[o]):void 0,i=r&&Object.values(r);return a&&a.length!==0?a:i}function u2(e){const{tickValues:n,tickFormat:r}=e;if((n==null?void 0:n.length)===0)return[];const s=bs(e),a=e.stringMap&&e.stringMap[s],i=()=>{if(!(!r||!Array.isArray(r)))return sg(r)?r.map((u,h)=>h):r};let o=n;a&&(o=wke(e)),n&&sg(n)&&(o=a?n.map(u=>a[u]):P_(1,n.length+1));const c=o?al(o):i(),A=u=>{const h=[],d=e.domain&&e.domain[s]||e.domain;if(u)return u.forEach((f,g)=>{Array.isArray(d)?f>=Gs(d).valueOf()&&f<=Ks(d).valueOf()&&h.push({value:f,index:g}):h.push({value:f,index:g})}),h};return Array.isArray(c)&&c.length?A(c):void 0}function NI(e,n){const{tickFormat:r}=e,s=bs(e),a=e.stringMap&&e.stringMap[s];if(r){if(r&&Array.isArray(r)){const i=u2(e),o=i==null?void 0:i.map(A=>A.index),c=r.filter((A,u)=>o==null?void 0:o.includes(u));return(A,u)=>c[u]}else if(r&&vt(r))return a?(o,c,A)=>{const u=bU(a),h=A.map(d=>u[d]);return e.tickFormat(u[o],c,h)}:r}else{const i=xke(e),o=n.tickFormat&&vt(n.tickFormat)?n.tickFormat():c=>c;return i||o}return i=>i}function $k(e,n){if(!n||!Array.isArray(e)||e.length<=n)return e;const r=Math.floor(e.length/n);return e.filter((s,a)=>a%r===0)}function EI(e,n,r){r===void 0&&(r=!1);const{tickCount:s}=e,a=u2(e);if((a==null?void 0:a.length)===0)return[""];const i=a?a.map(o=>o.value):void 0;if(i)return $k(i,s);if(n.ticks&&vt(n.ticks)){const o=s||5,c=n.ticks(o),A=Array.isArray(c)&&c.length?c:n.domain(),u=$k(A,s);if(r){const h=u.filter(d=>d!==0);return h.length?h:u}return u}return n.domain()}function bke(e,n){const{polar:r,startAngle:s=0,endAngle:a=360}=e,i=u2(e),o=i&&(i==null?void 0:i.length)!==0?i.map(p=>p.value):void 0;if(!Array.isArray(o))return;const c=Bl(e,n),A=Cl(e,n),u=ap(e),h=o.map(p=>Number(p)),d=u?1:Gs(h),f=u?o.length:Ks(h),y=ci(c!==void 0?c:d,A!==void 0?A:f),x=r&&n==="x"&&Math.abs(s-a)===360?A2(y,h):y;return sp(e)&&!r&&x.reverse(),x}function wA(e,n){const r=bs(e);if(!(n&&n!==r))return i2(bke)(e,r)}function TI(e,n){if(!e.axisValue)return;const r=n==="x"?"y":"x",s=Wx(e.scale)&&vt(e.scale[r])?e.scale[r]:void 0;if(!s)return;const a=n==="x"?"y":"x",i=Wx(e.stringMap)&&e.stringMap[a],o=i&&typeof e.axisValue=="string"?i[e.axisValue]:e.axisValue;return s(o)}function ip(e,n){if(!Wx(e.theme))return Ls(e,n,"axis");let r="axis";if(e.dependentAxis&&e.theme.dependentAxis?r="dependentAxis":!e.dependentAxis&&e.theme.independentAxis&&(r="independentAxis"),r==="axis")return Ls(e,n,"axis");const s=De({},e.theme[r],e.theme.axis),a=Object.assign({},e.theme,{axis:s});return Ls(Object.assign({},e,{theme:a}),n,"axis")}function FI(){return{onLoad:{duration:2e3},onExit:{duration:500},onEnter:{duration:500}}}function UI(){return{onLoad:{duration:2e3,before:()=>({_y:0,_y1:0,_y0:0}),after:e=>({_y:e._y,_y1:e._y1,_y0:e._y0})},onExit:{duration:500,before:(e,n,r)=>{const s=a=>(n===0?r[n+1]:r[n-1])[a];return{_x:s("_x"),_y:s("_y"),_y0:s("_y0")}}},onEnter:{duration:500,before:(e,n,r)=>{const s=a=>(n===0?r[n+1]:r[n-1])[a];return{_x:s("_x"),_y:s("_y"),_y0:s("_y0")}},after:e=>({_x:e._x,_y:e._y,_y1:e._y1,_y0:e._y0})}}}function _ke(){return{onLoad:{duration:2e3,before:()=>({opacity:0}),after:e=>e},onExit:{duration:600,before:()=>({opacity:0})},onEnter:{duration:600,before:()=>({opacity:0}),after:e=>e}}}function Cke(e){const n=G.useRef();return G.useEffect(()=>{n.current=e}),n.current}const Bke={nodesShouldLoad:!1,nodesDoneLoad:!1,animating:!0},Ske=function(e){e===void 0&&(e=Bke);const[n,r]=G.useState(e),s=G.useCallback(c=>{r(A=>({...A,...c}))},[r]),a=G.useCallback((c,A,u)=>{if(!(c!=null&&c.animate))return A.props.animate;const h=()=>{let m=n&&n.childrenTransitions;return m=rk(m)?m[u]:m,De({childrenTransitions:m},n)};let d=c.animate&&c.animate.getTransitions;const f=h(),g=c.animate&&c.animate.parentState||f;if(!d){const m=NU(c,f,y=>s(y));d=y=>m(y,u)}return De({getTransitions:d,parentState:g},c.animate,A.props.animate)},[n,s]),i=G.useCallback((c,A)=>{if(c!=null&&c.animate)if(c.animate.parentState){const h=c.animate.parentState.nodesWillExit?c:null,d=De({oldProps:h,nextProps:A},c.animate.parentState);s(d)}else{const u=G.Children.toArray(c.children),h=G.Children.toArray(A.children),d=p=>{const v=b=>b.type&&b.type.continuous;return Array.isArray(p)?p.some(v):v(p)},f=!c.polar&&u.some(p=>{var v;return d(p)||((v=p==null?void 0:p.props)==null?void 0:v.children)&&d(p.props.children)}),{nodesWillExit:g,nodesWillEnter:m,childrenTransitions:y,nodesShouldEnter:x}=jU(u,h);s({nodesWillExit:g,nodesWillEnter:m,nodesShouldEnter:x,childrenTransitions:rk(y)?y[0]:y,oldProps:g?c:void 0,nextProps:A,continuous:f})}},[s]),o=G.useCallback(c=>n&&n.nodesWillExit&&n.oldProps||c,[n]);return{state:n,setState:s,getAnimationProps:a,setAnimationState:i,getProps:o}};function kke(e,n){n===void 0&&(n={});const r=n._y>=0?1:-1,s=e.style&&e.style.labels||{};return n.verticalAnchor||s.verticalAnchor?n.verticalAnchor||s.verticalAnchor:e.horizontal?"middle":r>=0?"end":"start"}function jke(e,n){n===void 0&&(n={});const{style:r,horizontal:s}=e,a=n._y>=0?1:-1,i=r&&r.labels||{};return n.verticalAnchor||i.verticalAnchor?n.verticalAnchor||i.verticalAnchor:s?a>=0?"start":"end":"middle"}function Nke(e,n){n===void 0&&(n={});const r=e.style&&e.style.labels||{};return n.angle===void 0?r.angle:n.angle}function Eke(e,n){n===void 0&&(n={});const{horizontal:r,style:s}=e,a=s.labels||{},i=$e(a.padding,e)||0,o=n._y<0?-1:1;return{x:r?o*i:0,y:r?0:-1*o*i}}function Tke(e,n){if(e.polar)return{};const r=Eke(e,n);return{dx:r.x,dy:r.y}}function Fke(e,n){const{polar:r}=e,{x:s,y:a}=E_(e,n);if(!r)return{x:s,y:a};const i=Uke(e,n);return{x:s+i.x,y:a+i.y}}function Uke(e,n){const{style:r}=e,s=g2(e,n),a=r.labels||{},i=$e(a.padding,e)||0,o=_n(s);return{x:i*Math.cos(o),y:-i*Math.sin(o)}}function d2(e){const{labelComponent:n,labelPlacement:r,polar:s}=e,a=s?"perpendicular":"vertical";return r||n.props&&n.props.labelPlacement||a}function Ike(e){return e<45||e>315?"right":e>=45&&e<=135?"top":e>135&&e<225?"left":"bottom"}function op(e,n,r){return n===void 0&&(n={}),n.label!==void 0?n.label:Array.isArray(e.labels)?e.labels[r]:e.labels}function h2(e,n){const r=d2(e);return r==="perpendicular"||r==="vertical"&&(n===90||n===270)?"middle":n<=90||n>270?"start":"end"}function II(e,n){const r=d2(e),s=Ike(n);return r==="parallel"||s==="left"||s==="right"?"middle":s==="top"?"end":"start"}function f2(e,n){const{labelPlacement:r,datum:s}=e;if(!r||r==="vertical")return 0;const a=n!==void 0?n%360:g2(e,s),i=a>90&&a<180||a>270?1:-1;let o=0;return a===0||a===180?o=90:a>0&&a<180?o=90-a:a>180&&a<360&&(o=270-a),o+i*(r==="perpendicular"?0:90)}function g2(e,n){const{x:r}=_U(n);return U_(e.scale.x(r))%360}function m2(e,n){const{scale:r,data:s,style:a,horizontal:i,polar:o,width:c,height:A,theme:u,labelComponent:h,disableInlineStyles:d}=e,f=s[n],g=g2(e,f),m=o?h2(e,g):jke(e,f),y=o?II(e,g):kke(e,f),x=Nke(e,f),p=op(e,f,n),v=d2(e),{x:b,y:w}=Fke(e,f),{dx:_,dy:C}=Tke(e,f),k={angle:x,data:s,datum:f,disableInlineStyles:d,horizontal:i,index:n,polar:o,scale:r,labelPlacement:v,text:p,textAnchor:m,verticalAnchor:y,x:b,y:w,dx:_,dy:C,width:c,height:A,style:a.labels};if(!CU(h))return k;const j=u&&u.tooltip||{};return De({},k,N_(j,["style"]))}function nt(e){return function(){return e}}const Ok=Math.abs,Ln=Math.atan2,Oa=Math.cos,Pke=Math.max,Fc=Math.min,xr=Math.sin,Pt=Math.sqrt,zn=1e-12,ao=Math.PI,pg=ao/2,Ji=2*ao;function Qke(e){return e>1?0:e<-1?ao:Math.acos(e)}function Lk(e){return e>=1?pg:e<=-1?-pg:Math.asin(e)}const m1=Math.PI,p1=2*m1,ko=1e-6,Mke=p1-ko;function PI(e){this._+=e[0];for(let n=1,r=e.length;n<r;++n)this._+=arguments[n]+e[n]}function Dke(e){let n=Math.floor(e);if(!(n>=0))throw new Error(`invalid digits: ${e}`);if(n>15)return PI;const r=10**n;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}let Rke=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?PI:Dke(n)}moveTo(n,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,r){this._append`L${this._x1=+n},${this._y1=+r}`}quadraticCurveTo(n,r,s,a){this._append`Q${+n},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(n,r,s,a,i,o){this._append`C${+n},${+r},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(n,r,s,a,i){if(n=+n,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,A=s-n,u=a-r,h=o-n,d=c-r,f=h*h+d*d;if(this._x1===null)this._append`M${this._x1=n},${this._y1=r}`;else if(f>ko)if(!(Math.abs(d*A-u*h)>ko)||!i)this._append`L${this._x1=n},${this._y1=r}`;else{let g=s-o,m=a-c,y=A*A+u*u,x=g*g+m*m,p=Math.sqrt(y),v=Math.sqrt(f),b=i*Math.tan((m1-Math.acos((y+f-x)/(2*p*v)))/2),w=b/v,_=b/p;Math.abs(w-1)>ko&&this._append`L${n+w*h},${r+w*d}`,this._append`A${i},${i},0,0,${+(d*g>h*m)},${this._x1=n+_*A},${this._y1=r+_*u}`}}arc(n,r,s,a,i,o){if(n=+n,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let c=s*Math.cos(a),A=s*Math.sin(a),u=n+c,h=r+A,d=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>ko||Math.abs(this._y1-h)>ko)&&this._append`L${u},${h}`,s&&(f<0&&(f=f%p1+p1),f>Mke?this._append`A${s},${s},0,1,${d},${n-c},${r-A}A${s},${s},0,1,${d},${this._x1=u},${this._y1=h}`:f>ko&&this._append`A${s},${s},0,${+(f>=m1)},${d},${this._x1=n+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(n,r,s,a){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}};function uh(e){let n=3;return e.digits=function(r){if(!arguments.length)return n;if(r==null)n=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);n=s}return e},()=>new Rke(n)}function $ke(e){return e.innerRadius}function Oke(e){return e.outerRadius}function Lke(e){return e.startAngle}function Hke(e){return e.endAngle}function zke(e){return e&&e.padAngle}function Kke(e,n,r,s,a,i,o,c){var A=r-e,u=s-n,h=o-a,d=c-i,f=d*A-h*u;if(!(f*f<zn))return f=(h*(n-i)-d*(e-a))/f,[e+f*A,n+f*u]}function tf(e,n,r,s,a,i,o){var c=e-r,A=n-s,u=(o?i:-i)/Pt(c*c+A*A),h=u*A,d=-u*c,f=e+h,g=n+d,m=r+h,y=s+d,x=(f+m)/2,p=(g+y)/2,v=m-f,b=y-g,w=v*v+b*b,_=a-i,C=f*y-m*g,k=(b<0?-1:1)*Pt(Pke(0,_*_*w-C*C)),j=(C*b-v*k)/w,B=(-C*v-b*k)/w,E=(C*b+v*k)/w,P=(-C*v+b*k)/w,I=j-x,U=B-p,N=E-x,D=P-p;return I*I+U*U>N*N+D*D&&(j=E,B=P),{cx:j,cy:B,x01:-h,y01:-d,x11:j*(a/_-1),y11:B*(a/_-1)}}function Gke(){var e=$ke,n=Oke,r=nt(0),s=null,a=Lke,i=Hke,o=zke,c=null,A=uh(u);function u(){var h,d,f=+e.apply(this,arguments),g=+n.apply(this,arguments),m=a.apply(this,arguments)-pg,y=i.apply(this,arguments)-pg,x=Ok(y-m),p=y>m;if(c||(c=h=A()),g<f&&(d=g,g=f,f=d),!(g>zn))c.moveTo(0,0);else if(x>Ji-zn)c.moveTo(g*Oa(m),g*xr(m)),c.arc(0,0,g,m,y,!p),f>zn&&(c.moveTo(f*Oa(y),f*xr(y)),c.arc(0,0,f,y,m,p));else{var v=m,b=y,w=m,_=y,C=x,k=x,j=o.apply(this,arguments)/2,B=j>zn&&(s?+s.apply(this,arguments):Pt(f*f+g*g)),E=Fc(Ok(g-f)/2,+r.apply(this,arguments)),P=E,I=E,U,N;if(B>zn){var D=Lk(B/f*xr(j)),T=Lk(B/g*xr(j));(C-=D*2)>zn?(D*=p?1:-1,w+=D,_-=D):(C=0,w=_=(m+y)/2),(k-=T*2)>zn?(T*=p?1:-1,v+=T,b-=T):(k=0,v=b=(m+y)/2)}var L=g*Oa(v),Q=g*xr(v),M=f*Oa(_),F=f*xr(_);if(E>zn){var O=g*Oa(b),X=g*xr(b),ae=f*Oa(w),$=f*xr(w),J;if(x<ao)if(J=Kke(L,Q,ae,$,O,X,M,F)){var le=L-J[0],re=Q-J[1],V=O-J[0],z=X-J[1],Z=1/xr(Qke((le*V+re*z)/(Pt(le*le+re*re)*Pt(V*V+z*z)))/2),Y=Pt(J[0]*J[0]+J[1]*J[1]);P=Fc(E,(f-Y)/(Z-1)),I=Fc(E,(g-Y)/(Z+1))}else P=I=0}k>zn?I>zn?(U=tf(ae,$,L,Q,g,I,p),N=tf(O,X,M,F,g,I,p),c.moveTo(U.cx+U.x01,U.cy+U.y01),I<E?c.arc(U.cx,U.cy,I,Ln(U.y01,U.x01),Ln(N.y01,N.x01),!p):(c.arc(U.cx,U.cy,I,Ln(U.y01,U.x01),Ln(U.y11,U.x11),!p),c.arc(0,0,g,Ln(U.cy+U.y11,U.cx+U.x11),Ln(N.cy+N.y11,N.cx+N.x11),!p),c.arc(N.cx,N.cy,I,Ln(N.y11,N.x11),Ln(N.y01,N.x01),!p))):(c.moveTo(L,Q),c.arc(0,0,g,v,b,!p)):c.moveTo(L,Q),!(f>zn)||!(C>zn)?c.lineTo(M,F):P>zn?(U=tf(M,F,O,X,f,-P,p),N=tf(L,Q,ae,$,f,-P,p),c.lineTo(U.cx+U.x01,U.cy+U.y01),P<E?c.arc(U.cx,U.cy,P,Ln(U.y01,U.x01),Ln(N.y01,N.x01),!p):(c.arc(U.cx,U.cy,P,Ln(U.y01,U.x01),Ln(U.y11,U.x11),!p),c.arc(0,0,f,Ln(U.cy+U.y11,U.cx+U.x11),Ln(N.cy+N.y11,N.cx+N.x11),p),c.arc(N.cx,N.cy,P,Ln(N.y11,N.x11),Ln(N.y01,N.x01),!p))):c.arc(0,0,f,_,w,p)}if(c.closePath(),h)return c=null,h+""||null}return u.centroid=function(){var h=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,d=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-ao/2;return[Oa(d)*h,xr(d)*h]},u.innerRadius=function(h){return arguments.length?(e=typeof h=="function"?h:nt(+h),u):e},u.outerRadius=function(h){return arguments.length?(n=typeof h=="function"?h:nt(+h),u):n},u.cornerRadius=function(h){return arguments.length?(r=typeof h=="function"?h:nt(+h),u):r},u.padRadius=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:nt(+h),u):s},u.startAngle=function(h){return arguments.length?(a=typeof h=="function"?h:nt(+h),u):a},u.endAngle=function(h){return arguments.length?(i=typeof h=="function"?h:nt(+h),u):i},u.padAngle=function(h){return arguments.length?(o=typeof h=="function"?h:nt(+h),u):o},u.context=function(h){return arguments.length?(c=h??null,u):c},u}var Wke=Array.prototype.slice;function lp(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QI(e){this._context=e}QI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:this._context.lineTo(e,n);break}}};function dh(e){return new QI(e)}function p2(e){return e[0]}function y2(e){return e[1]}function cp(e,n){var r=nt(!0),s=null,a=dh,i=null,o=uh(c);e=typeof e=="function"?e:e===void 0?p2:nt(e),n=typeof n=="function"?n:n===void 0?y2:nt(n);function c(A){var u,h=(A=lp(A)).length,d,f=!1,g;for(s==null&&(i=a(g=o())),u=0;u<=h;++u)!(u<h&&r(d=A[u],u,A))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(d,u,A),+n(d,u,A));if(g)return i=null,g+""||null}return c.x=function(A){return arguments.length?(e=typeof A=="function"?A:nt(+A),c):e},c.y=function(A){return arguments.length?(n=typeof A=="function"?A:nt(+A),c):n},c.defined=function(A){return arguments.length?(r=typeof A=="function"?A:nt(!!A),c):r},c.curve=function(A){return arguments.length?(a=A,s!=null&&(i=a(s)),c):a},c.context=function(A){return arguments.length?(A==null?s=i=null:i=a(s=A),c):s},c}function yg(e,n,r){var s=null,a=nt(!0),i=null,o=dh,c=null,A=uh(u);e=typeof e=="function"?e:e===void 0?p2:nt(+e),n=typeof n=="function"?n:nt(n===void 0?0:+n),r=typeof r=="function"?r:r===void 0?y2:nt(+r);function u(d){var f,g,m,y=(d=lp(d)).length,x,p=!1,v,b=new Array(y),w=new Array(y);for(i==null&&(c=o(v=A())),f=0;f<=y;++f){if(!(f<y&&a(x=d[f],f,d))===p)if(p=!p)g=f,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),m=f-1;m>=g;--m)c.point(b[m],w[m]);c.lineEnd(),c.areaEnd()}p&&(b[f]=+e(x,f,d),w[f]=+n(x,f,d),c.point(s?+s(x,f,d):b[f],r?+r(x,f,d):w[f]))}if(v)return c=null,v+""||null}function h(){return cp().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:nt(+d),s=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:nt(+d),u):e},u.x1=function(d){return arguments.length?(s=d==null?null:typeof d=="function"?d:nt(+d),u):s},u.y=function(d){return arguments.length?(n=typeof d=="function"?d:nt(+d),r=null,u):n},u.y0=function(d){return arguments.length?(n=typeof d=="function"?d:nt(+d),u):n},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:nt(+d),u):r},u.lineX0=u.lineY0=function(){return h().x(e).y(n)},u.lineY1=function(){return h().x(e).y(r)},u.lineX1=function(){return h().x(s).y(n)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:nt(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(c=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=c=null:c=o(i=d),u):i},u}function Vke(e,n){return n<e?-1:n>e?1:n>=e?0:NaN}function qke(e){return e}function Xke(){var e=qke,n=Vke,r=null,s=nt(0),a=nt(Ji),i=nt(0);function o(c){var A,u=(c=lp(c)).length,h,d,f=0,g=new Array(u),m=new Array(u),y=+s.apply(this,arguments),x=Math.min(Ji,Math.max(-Ji,a.apply(this,arguments)-y)),p,v=Math.min(Math.abs(x)/u,i.apply(this,arguments)),b=v*(x<0?-1:1),w;for(A=0;A<u;++A)(w=m[g[A]=A]=+e(c[A],A,c))>0&&(f+=w);for(n!=null?g.sort(function(_,C){return n(m[_],m[C])}):r!=null&&g.sort(function(_,C){return r(c[_],c[C])}),A=0,d=f?(x-u*b)/f:0;A<u;++A,y=p)h=g[A],w=m[h],p=y+(w>0?w*d:0)+b,m[h]={data:c[h],index:A,value:w,startAngle:y,endAngle:p,padAngle:v};return m}return o.value=function(c){return arguments.length?(e=typeof c=="function"?c:nt(+c),o):e},o.sortValues=function(c){return arguments.length?(n=c,r=null,o):n},o.sort=function(c){return arguments.length?(r=c,n=null,o):r},o.startAngle=function(c){return arguments.length?(s=typeof c=="function"?c:nt(+c),o):s},o.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:nt(+c),o):a},o.padAngle=function(c){return arguments.length?(i=typeof c=="function"?c:nt(+c),o):i},o}var MI=v2(dh);function DI(e){this._curve=e}DI.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,n){this._curve.point(n*Math.sin(e),n*-Math.cos(e))}};function v2(e){function n(r){return new DI(e(r))}return n._curve=e,n}function uu(e){var n=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(r){return arguments.length?n(v2(r)):n()._curve},e}function y1(){return uu(cp().curve(MI))}function v1(){var e=yg().curve(MI),n=e.curve,r=e.lineX0,s=e.lineX1,a=e.lineY0,i=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return uu(r())},delete e.lineX0,e.lineEndAngle=function(){return uu(s())},delete e.lineX1,e.lineInnerRadius=function(){return uu(a())},delete e.lineY0,e.lineOuterRadius=function(){return uu(i())},delete e.lineY1,e.curve=function(o){return arguments.length?n(v2(o)):n()._curve},e}function du(e,n){return[(n=+n)*Math.cos(e-=Math.PI/2),n*Math.sin(e)]}class RI{constructor(n,r){this._context=n,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(n,r){switch(n=+n,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+n)/2,this._y0,this._x0,r,n,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,n,this._y0,n,r);break}}this._x0=n,this._y0=r}}class Yke{constructor(n){this._context=n}lineStart(){this._point=0}lineEnd(){}point(n,r){if(n=+n,r=+r,this._point===0)this._point=1;else{const s=du(this._x0,this._y0),a=du(this._x0,this._y0=(this._y0+r)/2),i=du(n,this._y0),o=du(n,r);this._context.moveTo(...s),this._context.bezierCurveTo(...a,...i,...o)}this._x0=n,this._y0=r}}function $I(e){return new RI(e,!0)}function OI(e){return new RI(e,!1)}function Jke(e){return new Yke(e)}function Zke(e){return e.source}function eje(e){return e.target}function Ap(e){let n=Zke,r=eje,s=p2,a=y2,i=null,o=null,c=uh(A);function A(){let u;const h=Wke.call(arguments),d=n.apply(this,h),f=r.apply(this,h);if(i==null&&(o=e(u=c())),o.lineStart(),h[0]=d,o.point(+s.apply(this,h),+a.apply(this,h)),h[0]=f,o.point(+s.apply(this,h),+a.apply(this,h)),o.lineEnd(),u)return o=null,u+""||null}return A.source=function(u){return arguments.length?(n=u,A):n},A.target=function(u){return arguments.length?(r=u,A):r},A.x=function(u){return arguments.length?(s=typeof u=="function"?u:nt(+u),A):s},A.y=function(u){return arguments.length?(a=typeof u=="function"?u:nt(+u),A):a},A.context=function(u){return arguments.length?(u==null?i=o=null:o=e(i=u),A):i},A}function tje(){return Ap($I)}function nje(){return Ap(OI)}function rje(){const e=Ap(Jke);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}const sje=Pt(3),LI={draw(e,n){const r=Pt(n+Fc(n/28,.75))*.59436,s=r/2,a=s*sje;e.moveTo(0,r),e.lineTo(0,-r),e.moveTo(-a,-s),e.lineTo(a,s),e.moveTo(-a,s),e.lineTo(a,-s)}},up={draw(e,n){const r=Pt(n/ao);e.moveTo(r,0),e.arc(0,0,r,0,Ji)}},HI={draw(e,n){const r=Pt(n/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},zI=Pt(1/3),aje=zI*2,KI={draw(e,n){const r=Pt(n/aje),s=r*zI;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},GI={draw(e,n){const r=Pt(n)*.62625;e.moveTo(0,-r),e.lineTo(r,0),e.lineTo(0,r),e.lineTo(-r,0),e.closePath()}},WI={draw(e,n){const r=Pt(n-Fc(n/7,2))*.87559;e.moveTo(-r,0),e.lineTo(r,0),e.moveTo(0,r),e.lineTo(0,-r)}},VI={draw(e,n){const r=Pt(n),s=-r/2;e.rect(s,s,r,r)}},qI={draw(e,n){const r=Pt(n)*.4431;e.moveTo(r,r),e.lineTo(r,-r),e.lineTo(-r,-r),e.lineTo(-r,r),e.closePath()}},ije=.8908130915292852,XI=xr(ao/10)/xr(7*ao/10),oje=xr(Ji/10)*XI,lje=-Oa(Ji/10)*XI,YI={draw(e,n){const r=Pt(n*ije),s=oje*r,a=lje*r;e.moveTo(0,-r),e.lineTo(s,a);for(let i=1;i<5;++i){const o=Ji*i/5,c=Oa(o),A=xr(o);e.lineTo(A*r,-c*r),e.lineTo(c*s-A*a,A*s+c*a)}e.closePath()}},Oy=Pt(3),JI={draw(e,n){const r=-Pt(n/(Oy*3));e.moveTo(0,r*2),e.lineTo(-Oy*r,-r),e.lineTo(Oy*r,-r),e.closePath()}},cje=Pt(3),ZI={draw(e,n){const r=Pt(n)*.6824,s=r/2,a=r*cje/2;e.moveTo(0,-r),e.lineTo(a,s),e.lineTo(-a,s),e.closePath()}},Jr=-.5,Zr=Pt(3)/2,x1=1/Pt(12),Aje=(x1/2+1)*3,eP={draw(e,n){const r=Pt(n/Aje),s=r/2,a=r*x1,i=s,o=r*x1+r,c=-i,A=o;e.moveTo(s,a),e.lineTo(i,o),e.lineTo(c,A),e.lineTo(Jr*s-Zr*a,Zr*s+Jr*a),e.lineTo(Jr*i-Zr*o,Zr*i+Jr*o),e.lineTo(Jr*c-Zr*A,Zr*c+Jr*A),e.lineTo(Jr*s+Zr*a,Jr*a-Zr*s),e.lineTo(Jr*i+Zr*o,Jr*o-Zr*i),e.lineTo(Jr*c+Zr*A,Jr*A-Zr*c),e.closePath()}},w1={draw(e,n){const r=Pt(n-Fc(n/6,1.7))*.6189;e.moveTo(-r,-r),e.lineTo(r,r),e.moveTo(-r,r),e.lineTo(r,-r)}},Hk=[up,HI,KI,VI,YI,JI,eP],uje=[up,WI,w1,ZI,LI,qI,GI];function dje(e,n){let r=null,s=uh(a);e=typeof e=="function"?e:nt(e||up),n=typeof n=="function"?n:nt(n===void 0?64:+n);function a(){let i;if(r||(r=i=s()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:nt(i),a):e},a.size=function(i){return arguments.length?(n=typeof i=="function"?i:nt(+i),a):n},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function io(){}function vg(e,n,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+n)/6,(e._y0+4*e._y1+r)/6)}function dp(e){this._context=e}dp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vg(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function hje(e){return new dp(e)}function tP(e){this._context=e}tP.prototype={areaStart:io,areaEnd:io,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._x2=e,this._y2=n;break;case 1:this._point=2,this._x3=e,this._y3=n;break;case 2:this._point=3,this._x4=e,this._y4=n,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+n)/6);break;default:vg(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function fje(e){return new tP(e)}function nP(e){this._context=e}nP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:vg(this,e,n);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n}};function gje(e){return new nP(e)}function rP(e,n){this._basis=new dp(e),this._beta=n}rP.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,n=this._y,r=e.length-1;if(r>0)for(var s=e[0],a=n[0],i=e[r]-s,o=n[r]-a,c=-1,A;++c<=r;)A=c/r,this._basis.point(this._beta*e[c]+(1-this._beta)*(s+A*i),this._beta*n[c]+(1-this._beta)*(a+A*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,n){this._x.push(+e),this._y.push(+n)}};const mje=function e(n){function r(s){return n===1?new dp(s):new rP(s,n)}return r.beta=function(s){return e(+s)},r}(.85);function xg(e,n,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-n),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function x2(e,n){this._context=e,this._k=(1-n)/6}x2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:xg(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2,this._x1=e,this._y1=n;break;case 2:this._point=3;default:xg(this,e,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const pje=function e(n){function r(s){return new x2(s,n)}return r.tension=function(s){return e(+s)},r}(0);function w2(e,n){this._context=e,this._k=(1-n)/6}w2.prototype={areaStart:io,areaEnd:io,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._x3=e,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=n);break;case 2:this._point=3,this._x5=e,this._y5=n;break;default:xg(this,e,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const yje=function e(n){function r(s){return new w2(s,n)}return r.tension=function(s){return e(+s)},r}(0);function b2(e,n){this._context=e,this._k=(1-n)/6}b2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xg(this,e,n);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const vje=function e(n){function r(s){return new b2(s,n)}return r.tension=function(s){return e(+s)},r}(0);function _2(e,n,r){var s=e._x1,a=e._y1,i=e._x2,o=e._y2;if(e._l01_a>zn){var c=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,A=3*e._l01_a*(e._l01_a+e._l12_a);s=(s*c-e._x0*e._l12_2a+e._x2*e._l01_2a)/A,a=(a*c-e._y0*e._l12_2a+e._y2*e._l01_2a)/A}if(e._l23_a>zn){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,h=3*e._l23_a*(e._l23_a+e._l12_a);i=(i*u+e._x1*e._l23_2a-n*e._l12_2a)/h,o=(o*u+e._y1*e._l23_2a-r*e._l12_2a)/h}e._context.bezierCurveTo(s,a,i,o,e._x2,e._y2)}function sP(e,n){this._context=e,this._alpha=n}sP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){if(e=+e,n=+n,this._point){var r=this._x2-e,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3;default:_2(this,e,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const xje=function e(n){function r(s){return n?new sP(s,n):new x2(s,0)}return r.alpha=function(s){return e(+s)},r}(.5);function aP(e,n){this._context=e,this._alpha=n}aP.prototype={areaStart:io,areaEnd:io,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,n){if(e=+e,n=+n,this._point){var r=this._x2-e,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+s*s,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=n);break;case 2:this._point=3,this._x5=e,this._y5=n;break;default:_2(this,e,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const wje=function e(n){function r(s){return n?new aP(s,n):new w2(s,0)}return r.alpha=function(s){return e(+s)},r}(.5);function iP(e,n){this._context=e,this._alpha=n}iP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){if(e=+e,n=+n,this._point){var r=this._x2-e,s=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+s*s,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_2(this,e,n);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=n}};const bje=function e(n){function r(s){return n?new iP(s,n):new b2(s,0)}return r.alpha=function(s){return e(+s)},r}(.5);function oP(e){this._context=e}oP.prototype={areaStart:io,areaEnd:io,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,n){e=+e,n=+n,this._point?this._context.lineTo(e,n):(this._point=1,this._context.moveTo(e,n))}};function _je(e){return new oP(e)}function zk(e){return e<0?-1:1}function Kk(e,n,r){var s=e._x1-e._x0,a=n-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),o=(r-e._y1)/(a||s<0&&-0),c=(i*a+o*s)/(s+a);return(zk(i)+zk(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function Gk(e,n){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-n)/2:n}function Ly(e,n,r){var s=e._x0,a=e._y0,i=e._x1,o=e._y1,c=(i-s)/3;e._context.bezierCurveTo(s+c,a+c*n,i-c,o-c*r,i,o)}function wg(e){this._context=e}wg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ly(this,this._t0,Gk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,n){var r=NaN;if(e=+e,n=+n,!(e===this._x1&&n===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;break;case 2:this._point=3,Ly(this,Gk(this,r=Kk(this,e,n)),r);break;default:Ly(this,this._t0,r=Kk(this,e,n));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=n,this._t0=r}}};function lP(e){this._context=new cP(e)}(lP.prototype=Object.create(wg.prototype)).point=function(e,n){wg.prototype.point.call(this,n,e)};function cP(e){this._context=e}cP.prototype={moveTo:function(e,n){this._context.moveTo(n,e)},closePath:function(){this._context.closePath()},lineTo:function(e,n){this._context.lineTo(n,e)},bezierCurveTo:function(e,n,r,s,a,i){this._context.bezierCurveTo(n,e,s,r,i,a)}};function Cje(e){return new wg(e)}function Bje(e){return new lP(e)}function AP(e){this._context=e}AP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,n=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],n[0]):this._context.moveTo(e[0],n[0]),r===2)this._context.lineTo(e[1],n[1]);else for(var s=Wk(e),a=Wk(n),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[o],n[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,n){this._x.push(+e),this._y.push(+n)}};function Wk(e){var n,r=e.length-1,s,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],n=1;n<r-1;++n)a[n]=1,i[n]=4,o[n]=4*e[n]+2*e[n+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],n=1;n<r;++n)s=a[n]/i[n-1],i[n]-=s,o[n]-=s*o[n-1];for(a[r-1]=o[r-1]/i[r-1],n=r-2;n>=0;--n)a[n]=(o[n]-a[n+1])/i[n];for(i[r-1]=(e[r]+a[r-1])/2,n=0;n<r-1;++n)i[n]=2*e[n+1]-a[n+1];return[a,i]}function Sje(e){return new AP(e)}function hp(e,n){this._context=e,this._t=n}hp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,n){switch(e=+e,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(e,n);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,n)}break}}this._x=e,this._y=n}};function kje(e){return new hp(e,.5)}function jje(e){return new hp(e,0)}function Nje(e){return new hp(e,1)}function tA(e,n){if((o=e.length)>1)for(var r=1,s,a,i=e[n[0]],o,c=i.length;r<o;++r)for(a=i,i=e[n[r]],s=0;s<c;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function nA(e){for(var n=e.length,r=new Array(n);--n>=0;)r[n]=n;return r}function Eje(e,n){return e[n]}function Tje(e){const n=[];return n.key=e,n}function Fje(){var e=nt([]),n=nA,r=tA,s=Eje;function a(i){var o=Array.from(e.apply(this,arguments),Tje),c,A=o.length,u=-1,h;for(const d of i)for(c=0,++u;c<A;++c)(o[c][u]=[0,+s(d,o[c].key,u,i)]).data=d;for(c=0,h=lp(n(o));c<A;++c)o[h[c]].index=c;return r(o,h),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:nt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:nt(+i),a):s},a.order=function(i){return arguments.length?(n=i==null?nA:typeof i=="function"?i:nt(Array.from(i)),a):n},a.offset=function(i){return arguments.length?(r=i??tA,a):r},a}function Uje(e,n){if((s=e.length)>0){for(var r,s,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<s;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<s;++r)e[r][a][1]/=o}tA(e,n)}}function Ije(e,n){if((A=e.length)>0)for(var r,s=0,a,i,o,c,A,u=e[n[0]].length;s<u;++s)for(o=c=0,r=0;r<A;++r)(i=(a=e[n[r]][s])[1]-a[0])>0?(a[0]=o,a[1]=o+=i):i<0?(a[1]=c,a[0]=c+=i):(a[0]=0,a[1]=i)}function Pje(e,n){if((a=e.length)>0){for(var r=0,s=e[n[0]],a,i=s.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=e[o][r][1]||0;s[r][1]+=s[r][0]=-c/2}tA(e,n)}}function Qje(e,n){if(!(!((o=e.length)>0)||!((i=(a=e[n[0]]).length)>0))){for(var r=0,s=1,a,i,o;s<i;++s){for(var c=0,A=0,u=0;c<o;++c){for(var h=e[n[c]],d=h[s][1]||0,f=h[s-1][1]||0,g=(d-f)/2,m=0;m<c;++m){var y=e[n[m]],x=y[s][1]||0,p=y[s-1][1]||0;g+=x-p}A+=d,u+=g*d}a[s-1][1]+=a[s-1][0]=r,A&&(r-=u/A)}a[s-1][1]+=a[s-1][0]=r,tA(e,n)}}function uP(e){var n=e.map(Mje);return nA(e).sort(function(r,s){return n[r]-n[s]})}function Mje(e){for(var n=-1,r=0,s=e.length,a,i=-1/0;++n<s;)(a=+e[n][1])>i&&(i=a,r=n);return r}function dP(e){var n=e.map(hP);return nA(e).sort(function(r,s){return n[r]-n[s]})}function hP(e){for(var n=0,r=-1,s=e.length,a;++r<s;)(a=+e[r][1])&&(n+=a);return n}function Dje(e){return dP(e).reverse()}function Rje(e){var n=e.length,r,s,a=e.map(hP),i=uP(e),o=0,c=0,A=[],u=[];for(r=0;r<n;++r)s=i[r],o<c?(o+=a[s],A.push(s)):(c+=a[s],u.push(s));return u.reverse().concat(A)}function $je(e){return nA(e).reverse()}const Oje=Object.freeze(Object.defineProperty({__proto__:null,arc:Gke,area:yg,areaRadial:v1,curveBasis:hje,curveBasisClosed:fje,curveBasisOpen:gje,curveBumpX:$I,curveBumpY:OI,curveBundle:mje,curveCardinal:pje,curveCardinalClosed:yje,curveCardinalOpen:vje,curveCatmullRom:xje,curveCatmullRomClosed:wje,curveCatmullRomOpen:bje,curveLinear:dh,curveLinearClosed:_je,curveMonotoneX:Cje,curveMonotoneY:Bje,curveNatural:Sje,curveStep:kje,curveStepAfter:Nje,curveStepBefore:jje,line:cp,lineRadial:y1,link:Ap,linkHorizontal:tje,linkRadial:rje,linkVertical:nje,pie:Xke,pointRadial:du,radialArea:v1,radialLine:y1,stack:Fje,stackOffsetDiverging:Ije,stackOffsetExpand:Uje,stackOffsetNone:tA,stackOffsetSilhouette:Pje,stackOffsetWiggle:Qje,stackOrderAppearance:uP,stackOrderAscending:dP,stackOrderDescending:Dje,stackOrderInsideOut:Rje,stackOrderNone:nA,stackOrderReverse:$je,symbol:dje,symbolAsterisk:LI,symbolCircle:up,symbolCross:HI,symbolDiamond:KI,symbolDiamond2:GI,symbolPlus:WI,symbolSquare:VI,symbolSquare2:qI,symbolStar:YI,symbolTimes:w1,symbolTriangle:JI,symbolTriangle2:ZI,symbolWye:eP,symbolX:w1,symbols:Hk,symbolsFill:Hk,symbolsStroke:uje},Symbol.toStringTag,{value:"Module"})),Vk=e=>{const n=e._y1!==void 0?e._y1:e._y;return n!=null&&e._y0!==null},qk=e=>n=>e.x(n._x1!==void 0?n._x1:n._x),Hy=e=>n=>e.y(n._y1!==void 0?n._y1:n._y),Lje=e=>n=>-1*e.x(n._x1!==void 0?n._x1:n._x)+Math.PI/2,fP=e=>`curve${(r=>r&&r[0].toUpperCase()+r.slice(1))(e)}`,Hje=e=>`${fP(e)}Closed`,bg=e=>{const{interpolation:n}=e;if(typeof n=="function")return n;if(typeof n=="string"){const{polar:r,openCurve:s=!r}=e,a=s?fP(n):Hje(n);return Oje[a]}return dh},gP=e=>{const{polar:n,scale:r,horizontal:s}=e;return n?y1().defined(Vk).curve(bg(e)).angle(Lje(r)).radius(Hy(r)):cp().defined(Vk).curve(bg(e)).x(s?Hy(r):qk(r)).y(s?qk(r):Hy(r))};function zje(e,n,r){return`M ${e}, ${n}
      m ${-r}, 0
      a ${r}, ${r} 0 1,0 ${r*2},0
      a ${r}, ${r} 0 1,0 ${-r*2},0`}function Kje(e,n,r){const s=.87*r,a=e-s,i=n+s,o=e+s-a;return`M ${a}, ${i}
      h${o}
      v-${o}
      h-${o}
      z`}function Gje(e,n,r){const s=.87*r,a=Math.sqrt(2*(s*s));return`M ${e}, ${n+a}
      l ${a}, -${a}
      l -${a}, -${a}
      l -${a}, ${a}
      l ${a}, ${a}
      z`}function Wje(e,n,r){const s=r/2*Math.sqrt(3),a=e-r,i=e+r,o=n-r,c=n+s;return`M ${a}, ${o}
      L ${i}, ${o}
      L ${e}, ${c}
      z`}function Vje(e,n,r){const s=r/2*Math.sqrt(3),a=e-r,i=e+r,o=n-s,c=n+r;return`M ${a}, ${c}
      L ${i}, ${c}
      L ${e}, ${o}
      z`}function qje(e,n,r){const s=1.1*r,a=s/1.5;return`
      M ${e-a/2}, ${n+s}
      v-${a}
      h-${a}
      v-${a}
      h${a}
      v-${a}
      h${a}
      v${a}
      h${a}
      v${a}
      h-${a}
      v${a}
      z`}function Xje(e,n,r){const s=.8*r,a=s/1.5;return`
      M ${e-a/2}, ${n+s+a}
      v-${a*2}
      h-${a}
      v-${a}
      h${a}
      v-${a}
      h${a}
      v${a}
      h${a}
      v${a}
      h-${a}
      v${a*2}
      z`}function Yje(e,n,r){const s=1.1*r,a=s-s*.3,i=e-s,o=n+a/2,c=e+s-i;return`M ${i}, ${o}
      h${c}
      v-${a}
      h-${c}
      z`}function Jje(e,n,r){const s=1.35*r,a=Math.PI/5;return`M ${P_(10).map(o=>{const c=o%2===0?s:s/2;return`${c*Math.sin(a*(o+1))+e},
        ${c*Math.cos(a*(o+1))+n}`}).join("L")} z`}const Zje=Object.freeze(Object.defineProperty({__proto__:null,circle:zje,cross:Xje,diamond:Gje,minus:Yje,plus:qje,square:Kje,star:Jje,triangleDown:Wje,triangleUp:Vje},Symbol.toStringTag,{value:"Module"})),e4e={blue:"#4F7DA1",pink:"#E2A37F",teal:"#00796B",purple:"#DF948A",green:"#8BC34A",orange:"#F4511E",cyan:"#006064",red:"#DF5A49",yellow:"#FFF59D"},tc=["#252525","#525252","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0"],nr="#252525",zy="#969696",t4e=["#334D5C","#45B29D","#EFC94C","#E27A3F","#DF5A49","#4F7DA1","#55DBC1","#EFDA97","#E2A37F","#DF948A"],n4e=["#428517","#77D200","#D6D305","#EC8E19","#C92B05"],r4e=["#940031","#C43343","#DC5429","#FF821D","#FFAF55"],s4e=["#2746B9","#0B69D4","#2794DB","#31BB76","#60E83B"],a4e=["#FCAE91","#FB6A4A","#DE2D26","#A50F15","#750B0E"],i4e=["#354722","#466631","#649146","#8AB25C","#A9C97E"],o4e=["#002C61","#004B8F","#006BC9","#3795E5","#65B4F4"],l4e="'Gill Sans', 'Seravek', 'Trebuchet MS', sans-serif",c4e="normal",A4e=14,Fr={width:450,height:300,padding:50,colorScale:tc},An={fontFamily:l4e,fontSize:A4e,letterSpacing:c4e,padding:10,fill:nr,stroke:"transparent"},u4e=Object.assign({textAnchor:"middle"},An),d4e="round",h4e="round",f4e={palette:{colors:e4e,grayscale:tc,qualitative:t4e,heatmap:n4e,warm:r4e,cool:s4e,red:a4e,green:i4e,blue:o4e},area:Object.assign({style:{data:{fill:nr},labels:An}},Fr),axis:Object.assign({style:{axis:{fill:"transparent",stroke:nr,strokeWidth:1,strokeLinecap:d4e,strokeLinejoin:h4e},axisLabel:Object.assign({},u4e,{padding:25}),grid:{fill:"none",stroke:"none",pointerEvents:"painted"},ticks:{fill:"transparent",size:1,stroke:"transparent"},tickLabels:An}},Fr),bar:Object.assign({style:{data:{fill:nr,padding:8,strokeWidth:0},labels:An}},Fr),boxplot:Object.assign({style:{max:{padding:8,stroke:nr,strokeWidth:1},maxLabels:Object.assign({},An,{padding:3}),median:{padding:8,stroke:nr,strokeWidth:1},medianLabels:Object.assign({},An,{padding:3}),min:{padding:8,stroke:nr,strokeWidth:1},minLabels:Object.assign({},An,{padding:3}),q1:{padding:8,fill:zy},q1Labels:Object.assign({},An,{padding:3}),q3:{padding:8,fill:zy},q3Labels:Object.assign({},An,{padding:3})},boxWidth:20},Fr),candlestick:Object.assign({style:{data:{stroke:nr,strokeWidth:1},labels:Object.assign({},An,{padding:5})},candleColors:{positive:"#ffffff",negative:nr}},Fr),chart:Fr,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",stroke:nr,strokeWidth:2},labels:An}},Fr),group:Object.assign({colorScale:tc},Fr),histogram:Object.assign({style:{data:{fill:zy,stroke:nr,strokeWidth:2},labels:An}},Fr),legend:{colorScale:tc,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle"},labels:An,title:Object.assign({},An,{padding:5})}},line:Object.assign({style:{data:{fill:"transparent",stroke:nr,strokeWidth:2},labels:An}},Fr),pie:{style:{data:{padding:10,stroke:"transparent",strokeWidth:1},labels:Object.assign({},An,{padding:20})},colorScale:tc,width:400,height:400,padding:50},scatter:Object.assign({style:{data:{fill:nr,stroke:"transparent",strokeWidth:0},labels:An}},Fr),stack:Object.assign({colorScale:tc},Fr),tooltip:{style:Object.assign({},An,{padding:0,pointerEvents:"none"}),flyoutStyle:{stroke:nr,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},flyoutPadding:5,cornerRadius:5,pointerLength:10},voronoi:Object.assign({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:Object.assign({},An,{padding:5,pointerEvents:"none"}),flyout:{stroke:nr,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},Fr)},mP="#FFF59D",pP="#F4511E",g4e="#DCE775",yP="#8BC34A",vP="#00796B",xP="#006064",nf=[pP,mP,g4e,yP,vP,xP],b1="#ECEFF1",_1="#90A4AE",rr="#455A64",hu="#212121",m4e={blue:"#4F7DA1",pink:"#E2A37F",teal:vP,purple:"#DF948A",green:yP,orange:pP,cyan:xP,red:"#DF5A49",yellow:mP},p4e=[b1,_1,rr,hu],y4e=["#334D5C","#45B29D","#EFC94C","#E27A3F","#DF5A49","#4F7DA1","#55DBC1","#EFDA97","#E2A37F","#DF948A"],v4e=["#428517","#77D200","#D6D305","#EC8E19","#C92B05"],x4e=["#940031","#C43343","#DC5429","#FF821D","#FFAF55"],w4e=["#2746B9","#0B69D4","#2794DB","#31BB76","#60E83B"],b4e=["#FCAE91","#FB6A4A","#DE2D26","#A50F15","#750B0E"],_4e=["#354722","#466631","#649146","#8AB25C","#A9C97E"],C4e=["#002C61","#004B8F","#006BC9","#3795E5","#65B4F4"],B4e="'Helvetica Neue', 'Helvetica', sans-serif",S4e="normal",k4e=12,Ia=8,pr={width:350,height:350,padding:50},un={fontFamily:B4e,fontSize:k4e,letterSpacing:S4e,padding:Ia,fill:rr,stroke:"transparent",strokeWidth:0},j4e=Object.assign({textAnchor:"middle"},un),N4e="10, 5",Ky="round",Gy="round",E4e={palette:{colors:m4e,grayscale:p4e,qualitative:y4e,heatmap:v4e,warm:x4e,cool:w4e,red:b4e,green:_4e,blue:C4e},area:Object.assign({style:{data:{fill:hu},labels:un}},pr),axis:Object.assign({style:{axis:{fill:"transparent",stroke:_1,strokeWidth:2,strokeLinecap:Ky,strokeLinejoin:Gy},axisLabel:Object.assign({},j4e,{padding:Ia,stroke:"transparent"}),grid:{fill:"none",stroke:b1,strokeDasharray:N4e,strokeLinecap:Ky,strokeLinejoin:Gy,pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:_1,strokeWidth:1,strokeLinecap:Ky,strokeLinejoin:Gy},tickLabels:Object.assign({},un,{fill:rr})}},pr),polarDependentAxis:Object.assign({style:{ticks:{fill:"transparent",size:1,stroke:"transparent"}}}),bar:Object.assign({style:{data:{fill:rr,padding:Ia,strokeWidth:0},labels:un}},pr),boxplot:Object.assign({style:{max:{padding:Ia,stroke:rr,strokeWidth:1},maxLabels:Object.assign({},un,{padding:3}),median:{padding:Ia,stroke:rr,strokeWidth:1},medianLabels:Object.assign({},un,{padding:3}),min:{padding:Ia,stroke:rr,strokeWidth:1},minLabels:Object.assign({},un,{padding:3}),q1:{padding:Ia,fill:rr},q1Labels:Object.assign({},un,{padding:3}),q3:{padding:Ia,fill:rr},q3Labels:Object.assign({},un,{padding:3})},boxWidth:20},pr),candlestick:Object.assign({style:{data:{stroke:rr},labels:Object.assign({},un,{padding:5})},candleColors:{positive:"#ffffff",negative:rr}},pr),chart:pr,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",opacity:1,stroke:rr,strokeWidth:2},labels:un}},pr),group:Object.assign({colorScale:nf},pr),histogram:Object.assign({style:{data:{fill:rr,stroke:hu,strokeWidth:2},labels:un}},pr),legend:{colorScale:nf,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle"},labels:un,title:Object.assign({},un,{padding:5})}},line:Object.assign({style:{data:{fill:"transparent",opacity:1,stroke:rr,strokeWidth:2},labels:un}},pr),pie:Object.assign({colorScale:nf,style:{data:{padding:Ia,stroke:b1,strokeWidth:1},labels:Object.assign({},un,{padding:20})}},pr),scatter:Object.assign({style:{data:{fill:rr,opacity:1,stroke:"transparent",strokeWidth:0},labels:un}},pr),stack:Object.assign({colorScale:nf},pr),tooltip:{style:Object.assign({},un,{padding:0,pointerEvents:"none"}),flyoutStyle:{stroke:hu,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},flyoutPadding:5,cornerRadius:5,pointerLength:10},voronoi:Object.assign({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:Object.assign({},un,{padding:5,pointerEvents:"none"}),flyout:{stroke:hu,strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},pr)},kt={white:"#FFFFFF",50:"#FAFAFA",100:"#F2F2F2",200:"#E8E8E8",300:"#E0E0E0",400:"#D1D1D1",500:"#757575",600:"#5C5C5C",700:"#424242",800:"#333333",900:"#292929",black:"#0F0F0F"},_g={100:"#FFEAB6",300:"#FFD66E",500:"#FCB400",900:"#B87503"},Cg={100:"#FEE2D5",300:"#FFA981",500:"#FF6F2C",700:"#FF4E1B",900:"#D74D26"},hh={100:"#FFDCE5",300:"#FF9EB7",500:"#F82B60",700:"#D31A3D",900:"#BA1E45"},wP={100:"#EDE3FE",300:"#CDB0FF",500:"#8B46FF",900:"#6B1CB0"},fh={100:"#CFDFFF",300:"#9CC7FF",500:"#2D7FF9",700:"#0056B3",900:"#2750AE"},C2={100:"#D0F0FD",300:"#77D1F3",500:"#18BFFF",900:"#0B76B7"},bP={100:"#C2F5E9",300:"#72DDC3",500:"#20D9D2",900:"#06A09B"},rA={100:"#D1F7C4",300:"#93E088",500:"#20C933",700:"#1B9B2A",900:"#338A17"},_P={blue:fh[500],cyan:C2[500],green:rA[500],yellow:_g[500],orange:Cg[500],red:hh[500],purple:wP[500],teal:bP[500]},_i=Object.values(_P),T4e=[kt[100],kt[300],kt[500],kt[700],kt[900]],F4e=[_g[300],_g[500],Cg[500],Cg[900],hh[500]],U4e=[wP[500],fh[500],C2[500],bP[500],rA[500]],I4e=[rA[900],rA[500],_g[500],Cg[500],hh[500]],P4e=Object.values(hh),Q4e=Object.values(rA),M4e=Object.values(fh),zA=fh[500],D4e="'Inter', 'Helvetica Neue', 'Seravek', 'Helvetica', sans-serif",R4e="normal",$4e=12,Pa=8,yr={width:450,height:300,padding:60,colorScale:_i},Xt={fontFamily:D4e,fontSize:$4e,fontWeight:300,letterSpacing:R4e,padding:Pa,fill:kt[900],stroke:"transparent"},O4e=Object.assign({textAnchor:"middle"},Xt),Xk="10, 5",yo="round",$l="round",vo=1,L4e={palette:{colors:_P,grayscale:T4e,qualitative:_i,heatmap:I4e,warm:F4e,cool:U4e,red:P4e,green:Q4e,blue:M4e},area:Object.assign({style:{data:{fill:zA,strokeWidth:2,fillOpacity:.5},labels:Xt}},yr),axis:Object.assign({style:{axis:{fill:"transparent",stroke:kt[500],strokeWidth:1,strokeLinecap:yo,strokeLinejoin:$l},axisLabel:Object.assign({},O4e,{padding:35,stroke:"transparent"}),grid:{fill:"none",stroke:"none",painterEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:"transparent"},tickLabels:Xt}},yr),polarAxis:Object.assign({style:{axis:{stroke:kt[500]},grid:{stroke:kt[400],strokeDasharray:Xk,strokeLinecap:yo,strokeLinejoin:$l,pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:kt[400],strokeWidth:1,strokeLinecap:yo,strokeLinejoin:$l},tickLabels:Xt}}),polarDependentAxis:Object.assign({style:{axis:{stroke:kt[500]},grid:{stroke:kt[400],strokeDasharray:Xk,strokeLinecap:yo,strokeLinejoin:$l,pointerEvents:"painted"},ticks:{fill:"transparent",size:5,stroke:kt[300],strokeWidth:1,strokeLinecap:yo,strokeLinejoin:$l},tickLabels:Xt}}),bar:Object.assign({style:{data:{fill:zA,padding:Pa,strokeWidth:1,fillOpacity:.5},labels:Xt},cornerRadius:{top:vo}},yr),boxplot:Object.assign({style:{max:{padding:Pa,stroke:kt[400],strokeWidth:2},maxLabels:Object.assign({},Xt,{padding:3}),median:{padding:Pa,stroke:kt.white,strokeWidth:2},medianLabels:Object.assign({},Xt,{padding:3}),min:{padding:Pa,stroke:kt[400],strokeWidth:2},minLabels:Object.assign({},Xt,{padding:3}),q1:{padding:Pa,fill:_i[0],rx:vo,strokeWidth:2},q1Labels:Object.assign({},Xt,{padding:3}),q3:{padding:Pa,fill:_i[1],rx:vo},q3Labels:Object.assign({},Xt,{padding:3})},boxWidth:20},yr),candlestick:Object.assign({style:{data:{stroke:kt[300],strokeWidth:0,rx:vo},labels:Object.assign({},Xt,{padding:5})},candleColors:{positive:rA[500],negative:hh[500]},wickStrokeWidth:2},yr),chart:yr,errorbar:Object.assign({borderWidth:8,style:{data:{fill:"transparent",opacity:1,stroke:kt[700],strokeWidth:2,strokeLinecap:yo},labels:Xt}},yr),group:Object.assign({colorScale:_i},yr),histogram:Object.assign({style:{data:{fill:C2[500],fillOpacity:.5},labels:Xt},binSpacing:4,cornerRadius:{top:vo}},yr),label:Xt,legend:{colorScale:_i,gutter:24,borderPadding:10,orientation:"horizontal",titleOrientation:"top",centerTitle:!0,style:{data:{type:"circle"},labels:{...Xt,fontSize:12},title:Object.assign({},Xt,{padding:Pa,fontSize:16}),border:{stroke:kt[200],strokeWidth:2,padding:16}}},line:Object.assign({style:{data:{fill:"transparent",opacity:1,stroke:zA,strokeWidth:2,strokeLinecap:yo,strokeLinejoin:$l},labels:Xt}},yr),pie:Object.assign({style:{parent:{backgroundColor:kt.white},data:{padding:Pa,stroke:kt.white,strokeWidth:1},labels:{...Xt,padding:20,fill:kt[600],fontSize:10}},colorScale:_i,cornerRadius:vo},yr),scatter:Object.assign({style:{data:{fill:zA,opacity:1,stroke:"transparent",strokeWidth:0},labels:{...Xt,padding:20}}},yr),stack:Object.assign({colorScale:_i},yr),tooltip:{style:Object.assign({},Xt,{padding:0,pointerEvents:"none"}),flyoutStyle:{stroke:kt[300],strokeWidth:2,fill:kt.white,pointerEvents:"none"},flyoutPadding:{top:8,bottom:8,left:16,right:16},cornerRadius:vo,pointerLength:4},voronoi:Object.assign({style:{data:{fill:fh[100],stroke:zA,strokeWidth:2},labels:Object.assign({},Xt,{padding:5,pointerEvents:"none"}),flyout:{stroke:kt[900],strokeWidth:1,fill:kt[100],pointerEvents:"none"},padding:{left:2,bottom:2}}},yr)},bA={grayscale:f4e,material:E4e,clean:L4e},C1=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(r.length>0)return r.reduce((i,o)=>[i,C1(o)].join(" "),C1(e)).trim();if(e==null||typeof e=="string")return e;const a=[];for(const i in e)if(e.hasOwnProperty(i)){const o=e[i];a.push(`${i}(${o})`)}return a.join(" ").trim()},Yk={"American Typewriter":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.25,.4203125,.3296875,.6,.6375,.8015625,.8203125,.1875,.45625,.45625,.6375,.5,.2734375,.309375,.2734375,.4390625,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.6375,.2734375,.2734375,.5,.5,.5,.6,.6921875,.7640625,.6921875,.6375,.728125,.6734375,.6203125,.7109375,.784375,.3828125,.6421875,.7859375,.6375,.9484375,.7640625,.65625,.6375,.65625,.7296875,.6203125,.6375,.7109375,.740625,.940625,.784375,.7578125,.6203125,.4375,.5,.4375,.5,.5,.4921875,.5734375,.5890625,.5109375,.6,.528125,.43125,.5578125,.6375,.3109375,.40625,.6234375,.309375,.928125,.6375,.546875,.6,.58125,.4921875,.4921875,.4,.6203125,.625,.825,.6375,.640625,.528125,.5,.5,.5,.6671875],avg:.5793421052631578},Arial:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.278125,.35625,.55625,.55625,.890625,.6671875,.1921875,.334375,.334375,.390625,.584375,.278125,.334375,.278125,.278125,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.584375,.584375,.584375,.55625,1.015625,.6703125,.6671875,.7234375,.7234375,.6671875,.6109375,.778125,.7234375,.278125,.5,.6671875,.55625,.834375,.7234375,.778125,.6671875,.778125,.7234375,.6671875,.6109375,.7234375,.6671875,.9453125,.6671875,.6671875,.6109375,.278125,.278125,.278125,.4703125,.584375,.334375,.55625,.55625,.5,.55625,.55625,.3125,.55625,.55625,.2234375,.2703125,.5,.2234375,.834375,.55625,.55625,.55625,.55625,.346875,.5,.278125,.55625,.5,.7234375,.5,.5,.5,.334375,.2609375,.334375,.584375],avg:.528733552631579},"Arial Black":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.33125,.334375,.5,.6609375,.6671875,1,.890625,.278125,.390625,.390625,.55625,.6609375,.334375,.334375,.334375,.28125,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.334375,.334375,.6609375,.6609375,.6609375,.6109375,.7453125,.78125,.778125,.778125,.778125,.7234375,.6671875,.834375,.834375,.390625,.6671875,.834375,.6671875,.9453125,.834375,.834375,.7234375,.834375,.78125,.7234375,.7234375,.834375,.7796875,1.003125,.78125,.78125,.7234375,.390625,.28125,.390625,.6609375,.5125,.334375,.6671875,.6671875,.6671875,.6671875,.6671875,.41875,.6671875,.6671875,.334375,.384375,.6671875,.334375,1,.6671875,.6671875,.6671875,.6671875,.4703125,.6109375,.4453125,.6671875,.6140625,.946875,.6671875,.615625,.55625,.390625,.278125,.390625,.6609375],avg:.6213157894736842},Baskerville:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.25,.25,.40625,.6671875,.490625,.875,.7015625,.178125,.2453125,.246875,.4171875,.6671875,.25,.3125,.25,.521875,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.25,.25,.6671875,.6671875,.6671875,.396875,.9171875,.684375,.615625,.71875,.7609375,.625,.553125,.771875,.803125,.3546875,.515625,.78125,.6046875,.928125,.75,.8234375,.5625,.96875,.7296875,.5421875,.6984375,.771875,.7296875,.9484375,.771875,.678125,.6359375,.3640625,.521875,.3640625,.46875,.5125,.334375,.46875,.521875,.428125,.521875,.4375,.3890625,.4765625,.53125,.25,.359375,.4640625,.240625,.803125,.53125,.5,.521875,.521875,.365625,.334375,.2921875,.521875,.4640625,.678125,.4796875,.465625,.428125,.4796875,.5109375,.4796875,.6671875],avg:.5323519736842108},Courier:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5984375,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6078125,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.61875,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.615625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6140625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625],avg:.6020559210526316},"Courier New":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5984375,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625],avg:.6015296052631579},cursive:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.1921875,.24375,.40625,.5671875,.3984375,.721875,.909375,.2328125,.434375,.365625,.4734375,.5578125,.19375,.3484375,.19375,.7734375,.503125,.4171875,.5453125,.45,.6046875,.4703125,.5984375,.55625,.503125,.5546875,.20625,.2,.5625,.5546875,.546875,.403125,.70625,.734375,.7078125,.64375,.85,.753125,.75,.6484375,1.0765625,.44375,.5359375,.8359375,.653125,1.0109375,1.1515625,.6796875,.6984375,1.0625,.8234375,.5125,.9234375,.8546875,.70625,.9109375,.7421875,.715625,.6015625,.4640625,.3359375,.4109375,.5421875,.5421875,.4328125,.5125,.5,.3859375,.7375,.359375,.75625,.540625,.5328125,.3203125,.5296875,.5015625,.484375,.7890625,.5640625,.4203125,.703125,.471875,.4734375,.35,.4125,.5640625,.471875,.6484375,.5296875,.575,.4140625,.415625,.20625,.3796875,.5421875],avg:.5604440789473684},fantasy:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.215625,.2625,.3265625,.6109375,.534375,.7625,.7828125,.2,.4359375,.4359375,.3765625,.5109375,.2796875,.4609375,.2796875,.5296875,.6640625,.253125,.521875,.4765625,.6640625,.490625,.528125,.5546875,.496875,.5421875,.2796875,.2796875,.5625,.4609375,.5625,.4828125,.609375,.740625,.7234375,.740625,.8265625,.7234375,.6171875,.7359375,.765625,.240625,.5453125,.715625,.6078125,.8640625,.653125,.9125,.6484375,.946875,.6921875,.653125,.6953125,.8015625,.58125,.784375,.671875,.6265625,.690625,.4359375,.5296875,.4359375,.53125,.5,.2875,.5375,.603125,.4984375,.60625,.53125,.434375,.6421875,.56875,.209375,.4671875,.5484375,.2203125,.709375,.55,.5984375,.6140625,.5765625,.40625,.4734375,.3734375,.559375,.4421875,.6421875,.4890625,.578125,.4484375,.2546875,.2203125,.2546875,.55],avg:.536496710526316},Geneva:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3328125,.3046875,.5,.6671875,.6671875,.90625,.728125,.3046875,.446875,.446875,.5078125,.6671875,.3046875,.3796875,.3046875,.5390625,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.6671875,.3046875,.3046875,.6671875,.6671875,.6671875,.56875,.871875,.728125,.6375,.6515625,.7015625,.5765625,.5546875,.675,.690625,.2421875,.4921875,.6640625,.584375,.7890625,.709375,.7359375,.584375,.78125,.60625,.60625,.640625,.6671875,.728125,.946875,.6109375,.6109375,.5765625,.446875,.5390625,.446875,.6671875,.6671875,.5921875,.5546875,.6109375,.546875,.603125,.5765625,.390625,.6109375,.584375,.2359375,.334375,.5390625,.2359375,.8953125,.584375,.60625,.603125,.603125,.3875,.509375,.44375,.584375,.565625,.78125,.53125,.571875,.5546875,.4515625,.246875,.4515625,.6671875],avg:.5762664473684211},Georgia:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2421875,.33125,.4125,.64375,.6109375,.81875,.7109375,.215625,.375,.375,.4734375,.64375,.2703125,.375,.2703125,.46875,.6140625,.4296875,.559375,.553125,.565625,.5296875,.5671875,.503125,.596875,.5671875,.3125,.3125,.64375,.64375,.64375,.4796875,.9296875,.715625,.6546875,.6421875,.75,.6546875,.6,.7265625,.815625,.390625,.51875,.7203125,.6046875,.928125,.7671875,.7453125,.6109375,.7453125,.7234375,.5625,.61875,.7578125,.70625,.99375,.7125,.6640625,.6015625,.375,.46875,.375,.64375,.65,.5,.5046875,.56875,.4546875,.575,.484375,.39375,.509375,.5828125,.29375,.3671875,.546875,.2875,.88125,.5921875,.5390625,.571875,.5640625,.4109375,.4328125,.3453125,.5765625,.5203125,.75625,.50625,.5171875,.4453125,.43125,.375,.43125,.64375],avg:.5551809210526316},"Gill Sans":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2765625,.271875,.3546875,.584375,.5421875,.6765625,.625,.1890625,.3234375,.3234375,.4171875,.584375,.2203125,.3234375,.2203125,.28125,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.2203125,.2296875,.584375,.584375,.584375,.334375,1.0109375,.6671875,.5640625,.709375,.75,.5,.4703125,.740625,.7296875,.25,.3125,.65625,.490625,.78125,.78125,.8234375,.5109375,.8234375,.6046875,.459375,.6046875,.709375,.6046875,1.0421875,.709375,.6046875,.646875,.334375,.28125,.334375,.4703125,.5828125,.334375,.428125,.5,.4390625,.5109375,.4796875,.296875,.428125,.5,.2203125,.2265625,.5,.2203125,.771875,.5,.553125,.5,.5,.3984375,.3859375,.334375,.5,.4390625,.7203125,.5,.4390625,.4171875,.334375,.2609375,.334375,.584375],avg:.4933717105263159},Helvetica:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625],avg:.5279276315789471},"Helvetica Neue":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.259375,.4265625,.55625,.55625,1,.6453125,.278125,.2703125,.26875,.353125,.6,.278125,.3890625,.278125,.36875,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.6,.6,.6,.55625,.8,.6625,.6859375,.7234375,.7046875,.6125,.575,.759375,.7234375,.259375,.5203125,.6703125,.55625,.871875,.7234375,.7609375,.6484375,.7609375,.6859375,.6484375,.575,.7234375,.6140625,.9265625,.6125,.6484375,.6125,.259375,.36875,.259375,.6,.5,.25625,.5375,.59375,.5375,.59375,.5375,.2984375,.575,.55625,.2234375,.2375,.5203125,.2234375,.853125,.55625,.575,.59375,.59375,.334375,.5,.315625,.55625,.5,.759375,.51875,.5,.48125,.334375,.2234375,.334375,.6],avg:.5279440789473684},"Hoefler Text":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2359375,.2234375,.3921875,.7125,.49375,.8859375,.771875,.2125,.3078125,.309375,.375,.4234375,.234375,.3125,.234375,.3,.5828125,.365625,.434375,.3921875,.5234375,.3984375,.5125,.4328125,.46875,.5125,.234375,.234375,.515625,.4234375,.515625,.340625,.7609375,.7359375,.6359375,.721875,.8125,.6375,.5875,.8078125,.853125,.4296875,.503125,.78125,.609375,.9609375,.8515625,.8140625,.6125,.8140625,.71875,.49375,.7125,.76875,.771875,1.125,.7765625,.7734375,.65625,.321875,.3078125,.321875,.3546875,.5,.3375,.446875,.5359375,.45,.5296875,.4546875,.425,.4921875,.54375,.2671875,.240625,.5390625,.25,.815625,.5375,.5234375,.5390625,.5421875,.365625,.36875,.35625,.5171875,.5015625,.75,.5,.509375,.44375,.2421875,.14375,.2421875,.35],avg:.5116447368421051},Inter:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2890625,.4671875,.634375,.6421875,.9828125,.6453125,.3,.365625,.365625,.5015625,.6625,.2890625,.4609375,.2890625,.3609375,.63125,.4078125,.6109375,.61875,.646875,.59375,.6203125,.5671875,.61875,.6203125,.2890625,.303125,.6625,.6625,.6625,.5125,.9671875,.690625,.6546875,.73125,.721875,.6015625,.590625,.746875,.74375,.26875,.571875,.671875,.565625,.9046875,.7546875,.765625,.6390625,.765625,.64375,.6421875,.646875,.7453125,.690625,.9859375,.6828125,.6796875,.6296875,.365625,.3609375,.365625,.471875,.45625,.3234375,.5625,.6125,.571875,.6125,.584375,.3703125,.6140625,.5921875,.2421875,.2548828125,.55,.2421875,.8765625,.5921875,.6,.6125,.6125,.3765625,.528125,.328125,.5921875,.5625,.81875,.546875,.5625,.553125,.4265625,.3328125,.4265625,.6625],avg:.5624362664473683},Montserrat:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2625,.2609375,.3734375,.696875,.615625,.8296875,.6703125,.203125,.3296875,.3296875,.3875,.575,.2125,.3828125,.2125,.3953125,.6625,.3625,.56875,.5640625,.6625,.5671875,.609375,.5890625,.6390625,.609375,.2125,.2125,.575,.575,.575,.5671875,1.034375,.7171875,.7546875,.7203125,.8265625,.6703125,.634375,.7734375,.8140625,.303125,.5078125,.7125,.5890625,.95625,.8140625,.8390625,.71875,.8390625,.7234375,.615625,.575,.7921875,.6984375,1.1125,.65625,.6359375,.6515625,.31875,.396875,.31875,.5765625,.5,.6,.590625,.678125,.5640625,.678125,.6046875,.375,.6875,.678125,.2703125,.365625,.6015625,.2703125,1.0625,.678125,.628125,.678125,.678125,.4015625,.4890625,.40625,.6734375,.5421875,.8796875,.534375,.5671875,.5125,.334375,.2953125,.334375,.575],avg:.571792763157895},monospace:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.5984375,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6078125,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.61875,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.615625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6140625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625,.6015625],avg:.6020559210526316},Overpass:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2296875,.2765625,.4203125,.68125,.584375,.8515625,.7015625,.2203125,.3453125,.3453125,.53125,.63125,.2234375,.3953125,.2234375,.509375,.65,.4046875,.6171875,.60625,.6484375,.60625,.6015625,.5375,.615625,.6015625,.2234375,.2234375,.63125,.63125,.63125,.5015625,.8203125,.696875,.6671875,.65,.6859375,.6015625,.559375,.690625,.7078125,.2953125,.565625,.678125,.58125,.8046875,.7109375,.740625,.6421875,.740625,.6765625,.6046875,.590625,.696875,.6640625,.853125,.65,.6671875,.6625,.3734375,.509375,.3734375,.63125,.5125,.4,.5328125,.5625,.51875,.5625,.546875,.3359375,.5625,.565625,.25625,.3203125,.55,.265625,.85,.565625,.5671875,.5625,.5625,.4046875,.4765625,.3796875,.565625,.521875,.7265625,.53125,.5390625,.5125,.3671875,.275,.3671875,.63125],avg:.5430756578947369},Palatino:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.25,.278125,.371875,.60625,.5,.840625,.778125,.209375,.334375,.334375,.390625,.60625,.2578125,.334375,.25,.60625,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.25,.25,.60625,.60625,.60625,.4453125,.7484375,.778125,.6109375,.709375,.775,.6109375,.55625,.7640625,.8328125,.3375,.346875,.7265625,.6109375,.946875,.83125,.7875,.6046875,.7875,.66875,.525,.6140625,.778125,.7234375,1,.6671875,.6671875,.6671875,.334375,.60625,.334375,.60625,.5,.334375,.5,.565625,.4453125,.6109375,.4796875,.340625,.55625,.5828125,.2921875,.2671875,.5640625,.2921875,.8828125,.5828125,.546875,.6015625,.5609375,.3953125,.425,.3265625,.603125,.565625,.834375,.5171875,.55625,.5,.334375,.60625,.334375,.60625],avg:.5408552631578947},RedHatText:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2328125,.2203125,.35625,.6890625,.55,.7390625,.6703125,.2140625,.4015625,.4015625,.4546875,.53125,.2203125,.45625,.2203125,.515625,.6609375,.3078125,.5484375,.5875,.61875,.5703125,.6203125,.559375,.6140625,.6203125,.2203125,.2234375,.465625,.534375,.465625,.5125,.7671875,.6609375,.6703125,.7265625,.728125,.6203125,.6109375,.8,.73125,.253125,.6,.6125,.6078125,.8625,.7390625,.8109375,.6546875,.809375,.6484375,.6234375,.6171875,.7125,.6609375,.8984375,.6546875,.646875,.60625,.3625,.5203125,.3625,.540625,.4609375,.5234375,.5265625,.584375,.509375,.5828125,.5578125,.3703125,.5828125,.553125,.2234375,.24375,.4890625,.2234375,.8453125,.553125,.58125,.584375,.5828125,.353125,.453125,.378125,.553125,.5015625,.6984375,.4875,.4984375,.459375,.3953125,.2921875,.3953125,.58125],avg:.5341940789473685},"sans-serif":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.278125,.278125,.35625,.55625,.55625,.890625,.6671875,.1921875,.334375,.334375,.390625,.584375,.278125,.334375,.278125,.303125,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.55625,.278125,.278125,.5859375,.584375,.5859375,.55625,1.015625,.6671875,.6671875,.7234375,.7234375,.6671875,.6109375,.778125,.7234375,.278125,.5,.6671875,.55625,.834375,.7234375,.778125,.6671875,.778125,.7234375,.6671875,.6109375,.7234375,.6671875,.9453125,.6671875,.6671875,.6109375,.278125,.35625,.278125,.478125,.55625,.334375,.55625,.55625,.5,.55625,.55625,.278125,.55625,.55625,.2234375,.2421875,.5,.2234375,.834375,.55625,.55625,.55625,.55625,.334375,.5,.278125,.55625,.5,.7234375,.5,.5,.5,.35625,.2609375,.3546875,.590625],avg:.5293256578947368},Seravek:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.215625,.296875,.4171875,.6734375,.4953125,.9125,.740625,.2421875,.3375,.3375,.409375,.60625,.2609375,.35625,.25625,.41875,.5921875,.3515625,.475,.4875,.5375,.509375,.5484375,.4546875,.5421875,.5484375,.25625,.2546875,.5875,.6171875,.5875,.4578125,.8140625,.6765625,.5703125,.6109375,.684375,.5109375,.4953125,.678125,.6859375,.2625,.2625,.5859375,.4734375,.846875,.709375,.740625,.509375,.740625,.584375,.5015625,.528125,.675,.5953125,.9453125,.596875,.540625,.540625,.359375,.4203125,.359375,.5109375,.421875,.4046875,.5015625,.5421875,.446875,.5453125,.484375,.38125,.5140625,.5546875,.240625,.2640625,.490625,.2765625,.8625,.5546875,.546875,.5453125,.5453125,.3625,.41875,.3890625,.5453125,.4703125,.7546875,.4921875,.4609375,.453125,.4015625,.2640625,.4015625,.58125],avg:.5044078947368421},serif:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2484375,.334375,.409375,.5,.5,.834375,.778125,.18125,.334375,.334375,.5,.5640625,.25,.334375,.25,.278125,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.278125,.278125,.5640625,.5640625,.5640625,.4453125,.921875,.7234375,.6671875,.6671875,.7234375,.6109375,.55625,.7234375,.7234375,.334375,.390625,.7234375,.6109375,.890625,.7234375,.7234375,.55625,.7234375,.6671875,.55625,.6109375,.7234375,.7234375,.9453125,.7234375,.7234375,.6109375,.334375,.340625,.334375,.4703125,.5,.3453125,.4453125,.5,.4453125,.5,.4453125,.3828125,.5,.5,.278125,.3359375,.5,.278125,.778125,.5,.5,.5,.5,.3375,.390625,.2796875,.5,.5,.7234375,.5,.5,.4453125,.48125,.2015625,.48125,.5421875],avg:.5126315789473684},Tahoma:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3109375,.3328125,.4015625,.728125,.546875,.9765625,.70625,.2109375,.3828125,.3828125,.546875,.728125,.303125,.3640625,.303125,.3953125,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.546875,.3546875,.3546875,.728125,.728125,.728125,.475,.909375,.6109375,.590625,.6015625,.6796875,.5625,.521875,.66875,.6765625,.3734375,.4171875,.6046875,.4984375,.771875,.66875,.7078125,.5515625,.7078125,.6375,.5578125,.5875,.65625,.60625,.903125,.58125,.5890625,.559375,.3828125,.39375,.3828125,.728125,.5625,.546875,.525,.553125,.4625,.553125,.5265625,.3546875,.553125,.5578125,.2296875,.328125,.51875,.2296875,.840625,.5578125,.54375,.553125,.553125,.3609375,.446875,.3359375,.5578125,.4984375,.7421875,.4953125,.4984375,.4453125,.48125,.3828125,.48125,.728125],avg:.5384374999999998},"Times New Roman":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2484375,.334375,.409375,.5,.5,.834375,.778125,.18125,.334375,.334375,.5,.5640625,.25,.334375,.25,.28125,.5,.5,.5,.5,.5,.5,.5,.5,.5,.5,.278125,.278125,.5640625,.5640625,.5640625,.4453125,.921875,.7234375,.6671875,.6671875,.7234375,.6109375,.55625,.7234375,.7234375,.334375,.390625,.73125,.6109375,.890625,.7375,.7234375,.55625,.7234375,.6765625,.55625,.6109375,.7234375,.7234375,.9453125,.7234375,.7234375,.6109375,.334375,.28125,.334375,.4703125,.51875,.334375,.4453125,.503125,.4453125,.503125,.4453125,.4359375,.5,.5,.278125,.35625,.50625,.278125,.778125,.5,.5,.5046875,.5,.340625,.390625,.2796875,.5,.5,.7234375,.5,.5,.4453125,.48125,.2015625,.48125,.5421875],avg:.5134375},"Trebuchet MS":{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.3015625,.3671875,.325,.53125,.525,.6015625,.70625,.1609375,.3671875,.3671875,.3671875,.525,.3671875,.3671875,.3671875,.525,.525,.525,.525,.525,.525,.525,.525,.525,.525,.525,.3671875,.3671875,.525,.525,.525,.3671875,.771875,.590625,.5671875,.5984375,.6140625,.5359375,.525,.6765625,.6546875,.2796875,.4765625,.5765625,.5078125,.7109375,.6390625,.675,.5578125,.7421875,.5828125,.48125,.58125,.6484375,.5875,.853125,.5578125,.5703125,.5515625,.3671875,.3578125,.3671875,.525,.53125,.525,.5265625,.5578125,.4953125,.5578125,.546875,.375,.503125,.546875,.2859375,.3671875,.5046875,.2953125,.83125,.546875,.5375,.5578125,.5578125,.3890625,.40625,.396875,.546875,.490625,.7453125,.5015625,.49375,.475,.3671875,.525,.3671875,.525],avg:.5085197368421052},Verdana:{widths:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.35,.39375,.459375,.81875,.6359375,1.0765625,.759375,.26875,.4546875,.4546875,.6359375,.81875,.3640625,.4546875,.3640625,.4703125,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.6359375,.4546875,.4546875,.81875,.81875,.81875,.546875,1,.684375,.6859375,.6984375,.771875,.6328125,.575,.7765625,.7515625,.421875,.4546875,.69375,.5578125,.84375,.7484375,.7875,.603125,.7875,.7,.684375,.6171875,.7328125,.684375,.9890625,.6859375,.615625,.6859375,.4546875,.46875,.4546875,.81875,.6421875,.6359375,.6015625,.6234375,.521875,.6234375,.596875,.384375,.6234375,.6328125,.275,.3765625,.5921875,.275,.9734375,.6328125,.6078125,.6234375,.6234375,.43125,.521875,.3953125,.6328125,.5921875,.81875,.5921875,.5921875,.5265625,.6359375,.4546875,.6359375,.81875],avg:.6171875000000003}},Jk={mm:3.8,sm:38,pt:1.33,pc:16,in:96,px:1},Zk={em:1,ex:.5},CP={heightOverlapCoef:1.05,lineCapitalCoef:1.15},BP={lineHeight:1,letterSpacing:"0px",fontSize:0,angle:0,fontFamily:""},H4e=e=>e*Math.PI/180,z4e=e=>{const r=e.split(",").map(s=>s.replace(/'|"/g,"")).find(s=>Yk[s])||"Helvetica";return Yk[r]},B2=e=>Array.isArray(e)?e:e.toString().split(/\r\n|\r|\n/g),Bg=(e,n,r)=>{const s=H4e(r);return Math.abs(Math.cos(s)*e)+Math.abs(Math.sin(s)*n)},B1=(e,n)=>{var i;const r=(i=e.match(/[a-zA-Z%]+/))==null?void 0:i[0],s=Number(e.match(/[0-9.,]+/));let a;return r?Jk.hasOwnProperty(r)?a=s*Jk[r]:Zk.hasOwnProperty(r)?a=(n?s*n:s*BP.fontSize)*Zk[r]:a=s:a=s||0,a},S2=(e,n)=>{const r=Array.isArray(e)?e[n]:e,s=De({},r,BP);return Object.assign({},s,{fontFamily:s.fontFamily,letterSpacing:typeof s.letterSpacing=="number"?s.letterSpacing:B1(String(s.letterSpacing),s.fontSize),fontSize:typeof s.fontSize=="number"?s.fontSize:B1(String(s.fontSize))})},K4e=(e,n)=>{if(e===void 0||e===""||e===null)return 0;const r=B2(e).map((s,a)=>{const i=s.toString().length,{fontSize:o,letterSpacing:c,fontFamily:A}=S2(n,a),u=z4e(A);return s.toString().split("").map(d=>d.charCodeAt(0)<u.widths.length?u.widths[d.charCodeAt(0)]:u.avg).reduce((d,f)=>f+d,0)*o+c*Math.max(i-1,0)});return Math.max(...r)},G4e=(e,n)=>e===void 0||e===""||e===null?0:B2(e).reduce((r,s,a)=>{const i=S2(n,a),c=s.toString().match(/[(A-Z)(0-9)]/)?i.fontSize*CP.lineCapitalCoef:i.fontSize;return r+i.lineHeight*c},0),W4e=(e,n)=>{const r=Array.isArray(n)?n[0]&&n[0].angle:n&&n.angle,s=G4e(e,n),a=K4e(e,n),i=r?Bg(a,s,r):a,o=r?Bg(s,a,r):s;return{width:i,height:o*CP.heightOverlapCoef}},Wy=IF(()=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("xlink","http://www.w3.org/1999/xlink"),e.setAttribute("width","300"),e.setAttribute("height","300"),e.setAttribute("viewBox","0 0 300 300"),e.setAttribute("aria-hidden","true");const n=document.createElementNS("http://www.w3.org/2000/svg","text");return e.appendChild(n),e.style.position="fixed",e.style.top="-9999px",e.style.left="-9999px",document.body.appendChild(e),n}),ej=e=>e?`${e.angle}:${e.fontFamily}:${e.fontSize}:${e.letterSpacing}:${e.lineHeight}`:"null",V4e=IF((e,n)=>{var o,c;let r=Wy();r.isConnected||((c=(o=Wy.cache).clear)==null||c.call(o),r=Wy());const s=B2(e);let a=0;for(const[A,u]of s.entries()){const h=document.createElementNS("http://www.w3.org/2000/svg","tspan"),d=S2(n,A);h.style.fontFamily=d.fontFamily,h.style.fontSize=`${d.fontSize}px`,h.style.lineHeight=d.lineHeight,h.style.fontFamily=d.fontFamily,h.style.letterSpacing=d.letterSpacing,h.textContent=u,h.setAttribute("x","0"),h.setAttribute("y",`${a}`),r.appendChild(h),a+=d.lineHeight*h.getBoundingClientRect().height}const{width:i}=r.getBoundingClientRect();return r.innerHTML="",{width:n!=null&&n.angle?Bg(i,a,n==null?void 0:n.angle):i,height:n!=null&&n.angle?Bg(a,i,n==null?void 0:n.angle):a}},(e,n)=>{const r=Array.isArray(e)?e.join():e,s=Array.isArray(n)?n.map(ej).join():ej(n);return`${r}::${s}`}),q4e={impl:function(e,n,r){return r===void 0&&(r=!1),!(typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u")||r?W4e(e,n):V4e(e,n)}},SP=(e,n)=>q4e.impl(e,n);var X4e=Vm,Y4e=FU;function J4e(e,n){return e&&e.length?Y4e(e,X4e(n)):[]}var Z4e=J4e;const eNe=Ht(Z4e);function tNe(e,n,r){const{datasets:s,horizontal:a}=e,i=a?Sn(e,"y"):Sn(e,"x"),o=Math.abs(i[1]-i[0]),c=r!==void 0?r:Array.isArray(s[0])&&s[0].length||1,u=(n||s.length)*c;return Math.round(.5*o/u)}function nNe(e,n,r){if(e.polar||n!=="x")return;const s=r.filter(h=>h.type&&h.type.role&&h.type.role==="group");if(s.length<1)return;const{offset:a,children:i}=s[0].props;if(!a)return;const o=Array.isArray(i)&&i[0];if(!o)return;let c=o.props.barWidth,A=o.props.data&&o.props.data.length||1;if(o&&o.type.role==="stack"){const h=o.props.children&&o.props.children[0];if(!h)return;c=h.props.barWidth,A=o.props.children.length}const u=c||tNe(e,i.length,A);return{x:u*i.length/2+(a-u*((i.length-1)/2))}}function rNe(e,n,r){const s=r?r.slice(0):G.Children.toArray(e.children),a=e.data?qs(e):void 0,{polar:i,startAngle:o,endAngle:c,categories:A,minDomain:u,maxDomain:h,horizontal:d}=e,f={horizontal:d,polar:i,startAngle:o,endAngle:c,minDomain:u,maxDomain:h,categories:A},g=a?Object.assign(f,{data:a}):f,y=ah(s,v=>{const b=Object.assign({},v.props,g);if(BI(v)){if(v.type&&vt(v.type.getDomain))return v.props&&v.type.getDomain(b,n)}else return null;return il(b,n)},e),x=y.length===0?0:Gs(y),p=y.length===0?1:Ks(y);return[x,p]}function sNe(e,n,r){const s=r||G.Children.toArray(e.children),a=c2(e,n),i=nNe(e,n,s);let o;if(a)o=a;else{const c=Bl(e,n),A=Cl(e,n),u=(e.data||e.y)&&qs(e),h=u?l2(e,n,u):[],d=rNe(e,n,s),f=c||Gs([...h,...d]),g=A||Ks([...h,...d]);o=ci(f,g)}return o2(o,Object.assign({domainPadding:i},e),n)}function tj(e,n,r){if(e.data)return ps(e,n);const s=r?r.slice(0):G.Children.toArray(e.children),i=al(ah(s,o=>{const c=Object.assign({},o.props,{horizontal:e.horizontal});return mg(c,n)},e));return i.length>1?Nd("linear"):Nd(i[0])}function aNe(e){const r=D_(e,["groupComponent","containerComponent","labelComponent"]);let s=e.events;return Array.isArray(r)&&(s=Array.isArray(e.events)?r.concat(...e.events):r),s||[]}function iNe(e,n){const r=s=>{if(!BI(s))return null;const a=s.props||{};return eA(a,n)};return ah(e.slice(0),r)}function oNe(e){const n=a=>{const i=a.props||{};let o;if(hke(a))a.type&&vt(a.type.getData)?o=a.type.getData(i):o=qs(i);else return null;return o.map(c=>({x:c.xName,y:c.yName}))},r={x:[],y:[]},s=(a,i)=>{const o=Array.isArray(i)?i.map(A=>A.x).filter(Boolean):i.x,c=Array.isArray(i)?i.map(A=>A.y).filter(Boolean):i.y;return{x:o!==void 0?a.x.concat(o):a.x,y:c!==void 0?a.y.concat(c):a.y}};return ah(e.slice(0),n,{},r,s)}function nj(e,n,r){const s=eA(e,n),a=kI(r,n),i=a?CI(a.props,n):[],o=s.length?s:iNe(r,n);return al([...o,...i].flat())}function kP(e,n){const r=n||G.Children.toArray(e.children),s=nj(e,"x",r),a=nj(e,"y",r),i=oNe(r);return{x:al([...s,...i.x].flat()),y:al([...a,...i.y].flat())}}function lNe(e,n,r){const s=e.categories&&eA(e,"x"),a=e.categories&&eA(e,"y"),o=!s||!a?r||kP(e,n):{},c=s||o.x,A=a||o.y;return{x:c.length>0?c:void 0,y:A.length>0?A:void 0}}const k2=G.createContext(void 0);k2.displayName="PortalContext";const jP=()=>G.useContext(k2),cNe=e=>{let{children:n}=e;const[r,s]=G.useState(new Map),a=G.useCallback((c,A)=>{s(u=>{const h=new Map(u);return h.set(c,A),h})},[s]),i=G.useCallback(c=>{s(A=>{const u=new Map(A);return u.delete(c),u})},[s]),o=G.useMemo(()=>({addChild:a,removeChild:i,children:r}),[a,i,r]);return G.createElement(k2.Provider,{value:o},n)},ANe=e=>{let{as:n,...r}=e;const s=jP();if(!s)return null;const a=Array.from(s.children.values());return G.cloneElement(n,r,a)};function S1(){return S1=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},S1.apply(this,arguments)}const uNe={className:"VictoryContainer",portalComponent:G.createElement(zbe,null),portalZIndex:99,responsive:!0,role:"img"};function dNe(e){const n={...uNe,...e},{title:r,desc:s,width:a,height:i,responsive:o}=n,c=S.useRef(null),A=S.useRef(j_("victory-container-")),u=n.containerId??A.current,h=b=>`${u}-${b}`,d=pi(n),f=o?{width:"100%",height:"100%"}:{width:a,height:i},g=o?`0 0 ${a} ${i}`:void 0,m=o?n.preserveAspectRatio:void 0,y=[r&&h("title"),n["aria-labelledby"]].filter(Boolean).join(" ")||void 0,x=[s&&h("desc"),n["aria-describedby"]].filter(Boolean).join(" ")||void 0,p=h("title"),v=h("desc");return{...n,titleId:p,descId:v,dimensions:f,viewBox:g,preserveAspectRatio:m,ariaLabelledBy:y,ariaDescribedBy:x,userProps:d,localContainerRef:c}}const Sl=e=>{const{role:n,title:r,desc:s,children:a,className:i,portalZIndex:o,portalComponent:c,width:A,height:u,style:h,tabIndex:d,responsive:f,events:g,ouiaId:m,ouiaSafe:y,ouiaType:x,dimensions:p,ariaDescribedBy:v,ariaLabelledBy:b,viewBox:w,preserveAspectRatio:_,userProps:C,titleId:k,descId:j,containerRef:B,localContainerRef:E}=dNe(e);return G.useEffect(()=>{if(!(g!=null&&g.onWheel))return;const P=U=>U.preventDefault(),I=E==null?void 0:E.current;return I==null||I.addEventListener("wheel",P),()=>{I==null||I.removeEventListener("wheel",P)}},[]),G.createElement("div",{className:i,style:{...h,width:f?h==null?void 0:h.width:p.width,height:f?h==null?void 0:h.height:p.height,pointerEvents:(h==null?void 0:h.pointerEvents)??"none",touchAction:(h==null?void 0:h.touchAction)??"none",position:(h==null?void 0:h.position)??"relative"},"data-ouia-component-id":m,"data-ouia-component-type":x,"data-ouia-safe":y,ref:yBe([E,B])},G.createElement(cNe,null,G.createElement("svg",S1({width:A,height:u,tabIndex:d,role:n,"aria-labelledby":b,"aria-describedby":v,viewBox:w,preserveAspectRatio:_,style:{...p,pointerEvents:"all"}},C,g),r?G.createElement("title",{id:k},r):null,s?G.createElement("desc",{id:j},s):null,a),G.createElement("div",{style:{...p,zIndex:o,position:"absolute",top:0,left:0}},G.createElement(ANe,{as:c,width:A,height:u,viewBox:w,preserveAspectRatio:_,style:{...p,overflow:"visible"}}))))};Sl.role="container";const hNe={groupComponent:G.createElement("g",null)},k1=e=>{const n={...hNe,...e},[r]=S.useState(j_()),s=jP(),a=Array.isArray(n.children)?n.children[0]:n.children,{groupComponent:i}=n,o=a&&a.props||{},c=o.groupComponent?{groupComponent:i,standalone:!1}:{},A=De(c,o,N_(n,["children","groupComponent"]),{key:o.key??r}),u=a&&G.cloneElement(a,A);return G.useEffect(()=>{s==null||s.addChild(r,u)},[n.children]),G.useEffect(()=>()=>s==null?void 0:s.removeChild(r),[]),s?null:u};k1.role="portal";function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Sg.apply(this,arguments)}const j2=S.forwardRef((e,n)=>{var A;const{desc:r,id:s,tabIndex:a,origin:i,...o}=e,c={vectorEffect:"non-scaling-stroke",id:(A=$e(s,e))==null?void 0:A.toString(),tabIndex:$e(a,e),...o};return r?G.createElement("rect",Sg({},c,{ref:n}),G.createElement("desc",null,r)):G.createElement("rect",Sg({},c,{ref:n}))}),fNe=e=>{var u;const{children:n,desc:r,id:s,origin:a,tabIndex:i,title:o,...c}=e,A={id:(u=$e(s,e))==null?void 0:u.toString(),tabIndex:$e(i,e),...c};return G.createElement("text",A,o&&G.createElement("title",null,o),r&&G.createElement("desc",null,r),n)},gNe=e=>{var c;const{desc:n,id:r,tabIndex:s,origin:a,...i}=e,o={id:(c=$e(r,e))==null?void 0:c.toString(),tabIndex:$e(s,e),...i};return G.createElement("tspan",o)},Ko={fill:"#252525",fontSize:14,fontFamily:"'Gill Sans', 'Gill Sans MT', 'Seravek', 'Trebuchet MS', sans-serif",stroke:"transparent"},rj=(e,n)=>e.datum?E_(e,e.datum)[n]:0,sj=e=>{const n=e&&e.fontSize;if(typeof n=="number")return n;if(n==null)return Ko.fontSize;if(typeof n=="string"){const r=Number(n.replace("px",""));return isNaN(r)?Ko.fontSize:r}return Ko.fontSize},lr=function(e,n){return n===void 0&&(n=0),Array.isArray(e)?e[n]||e[0]:e},NP=e=>{const{backgroundStyle:n,backgroundPadding:r}=e;return Array.isArray(n)&&!rn(n)||Array.isArray(r)&&!rn(r)},mNe=(e,n)=>{if(n.disableInlineStyles){const s=Yn(e,n);return{fontSize:sj(s)}}const r=s=>{const a=Yn(s?De({},s,Ko):Ko,n);return Object.assign({},a,{fontSize:sj(a)})};return Array.isArray(e)&&!rn(e)?e.map(s=>r(s)):r(e)},pNe=(e,n)=>{if(e)return Array.isArray(e)&&!rn(e)?e.map(r=>Yn(r,n)):Yn(e,n)},yNe=e=>{if(e.backgroundPadding&&Array.isArray(e.backgroundPadding))return e.backgroundPadding.map(r=>{const s=$e(r,e);return ms(s)});const n=$e(e.backgroundPadding,e);return ms(n)},vNe=e=>{const n=$e(e.lineHeight,e);return Array.isArray(n)&&rn(n)?[1]:n},xNe=(e,n)=>{if(e==null)return;if(Array.isArray(e))return e.map(s=>$e(s,n));const r=$e(e,n);if(r!=null)return Array.isArray(r)?r:`${r}`.split(`
`)},wNe=(e,n,r)=>{const s=e.dy?$e(e.dy,e):0,a=e.inline?1:e.text.length,i=$e(e.capHeight,e),o=n?$e(n,e):"middle",c=[...Array(a).keys()].map(h=>lr(e.style,h).fontSize),A=[...Array(a).keys()].map(h=>lr(r,h));if(o==="start")return s+(i/2+A[0]/2)*c[0];if(e.inline)return o==="end"?s+(i/2-A[0]/2)*c[0]:s+i/2*c[0];if(a===1)return o==="end"?s+(i/2+(.5-a)*A[0])*c[0]:s+(i/2+(.5-a/2)*A[0])*c[0];const u=[...Array(a).keys()].reduce((h,d)=>h+(i/2+(.5-a)*A[d])*c[d]/a,0);return o==="end"?s+u:s+u/2+i/2*A[a-1]*c[a-1]},bNe=(e,n,r)=>{const{polar:s}=e,a=lr(e.style),i=s?f2(e):0,o=a.angle===void 0?$e(e.angle,e):a.angle,c=o===void 0?i:o,A=e.transform||a.transform,u=A&&$e(A,e);return u||c?C1(u,c&&{rotate:[c,n,r]}):void 0},EP=(e,n)=>{const{direction:r,textAnchor:s,x:a,dx:i}=e;if(r==="rtl")return a-n;switch(s){case"middle":return Math.round(a-n/2);case"end":return Math.round(a-n);default:return a+(i||0)}},TP=(e,n)=>{const{verticalAnchor:r,y:s,originalDy:a=0}=e,i=s+a;switch(r){case"start":return Math.floor(i);case"end":return Math.ceil(i-n);default:return Math.floor(i-n/2)}},_Ne=(e,n)=>{const{dx:r=0,transform:s,backgroundComponent:a,backgroundStyle:i,inline:o,backgroundPadding:c,capHeight:A}=e,u=n.map(y=>y.textSize),h=o?Math.max(...u.map(y=>y.height)):u.reduce((y,x,p)=>{const v=p?0:A/2;return y+x.height*(n[p].lineHeight-v)},0),d=o?u.reduce((y,x,p)=>{const v=p?r:0;return y+x.width+v},0):Math.max(...u.map(y=>y.width)),f=EP(e,d),g=TP(e,h),m={key:"background",height:h+c.top+c.bottom,style:i,transform:s,width:d+c.left+c.right,x:o?f-c.left:f+r-c.left,y:g};return G.cloneElement(a,De({},a.props,m))},CNe=(e,n,r)=>{const{textAnchor:s}=e,a=n.map(c=>c.widthWithPadding),o=-a.reduce((c,A)=>c+A,0)/2;switch(s){case"start":return a.reduce((c,A,u)=>u<r?c+A:c,0);case"end":return a.reduce((c,A,u)=>u>r?c-A:c,0);default:return a.reduce((c,A,u)=>{const h=u<r?A:0;return u===r?c+A/2:c+h},o)}},BNe=(e,n)=>{const{dy:r,dx:s,transform:a,backgroundStyle:i,backgroundPadding:o,backgroundComponent:c,inline:A,y:u}=e,h=n.map((d,f)=>{const g=lr(n,f-1),m=d.textSize,y=d.fontSize*d.lineHeight,x=Math.ceil(y),p=lr(o,f),v=lr(o,f-1),b=A&&s||0,w=f&&!A?g.fontSize*g.lineHeight+v.top+v.bottom:r-y*.5-(d.fontSize-d.capHeight);return{textHeight:x,labelSize:m,heightWithPadding:x+p.top+p.bottom,widthWithPadding:m.width+p.left+p.right+b,y:u,fontSize:d.fontSize,dy:w}});return h.map((d,f)=>{const g=EP(e,d.labelSize.width),m=h.slice(0,f+1).reduce((w,_)=>w+_.dy,u),y=lr(o,f),x=d.heightWithPadding,p=A?CNe(e,h,f)+g-y.left:g,v=A?TP(e,x)-y.top:m,b={key:`tspan-background-${f}`,height:x,style:lr(i,f),width:d.widthWithPadding,transform:a,x:p-y.left,y:v};return G.cloneElement(c,De({},c.props,b))})},SNe=(e,n)=>NP(e)?BNe(e,n):_Ne(e,n),kNe=(e,n,r)=>{const s=lr(e,n),a=lr(e,n-1),i=a.fontSize*a.lineHeight,o=s.fontSize*s.lineHeight,c=a.fontSize-a.capHeight,A=s.fontSize-s.capHeight,u=i-a.fontSize/2+s.fontSize/2-i/2+o/2-A/2+c/2;return NP(r)?u+s.backgroundPadding.top+a.backgroundPadding.bottom:u},jNe=(e,n,r)=>{const{inline:s}=n,a=lr(e,r);return r&&!s?kNe(e,r,n):s?r===0?a.backgroundPadding.top:void 0:a.backgroundPadding.top},NNe=e=>{const n=xNe(e.text,e),r=mNe(e.style,Object.assign({},e,{text:n})),s=pNe(e.backgroundStyle,Object.assign({},e,{text:n,style:r})),a=yNe(Object.assign({},e,{text:n,style:r,backgroundStyle:s})),i=$e(e.id,e);return Object.assign({},e,{backgroundStyle:s,backgroundPadding:a,style:r,text:n,id:i})},ENe=e=>{const n=$e(e.ariaLabel,e),r=lr(e.style),s=vNe(e),a=e.direction?$e(e.direction,e):"inherit",i=e.textAnchor?$e(e.textAnchor,e):r.textAnchor||"start",o=e.verticalAnchor?$e(e.verticalAnchor,e):r.verticalAnchor||"middle",c=e.dx?$e(e.dx,e):0,A=wNe(e,o,s),u=e.x!==void 0?e.x:rj(e,"x"),h=e.y!==void 0?e.y:rj(e,"y"),d=bNe(e,u,h);return Object.assign({},e,{ariaLabel:n,lineHeight:s,direction:a,textAnchor:i,verticalAnchor:o,dx:c,dy:A,originalDy:$e(e.dy,e),transform:d,x:u,y:h})},TNe=(e,n)=>{const{ariaLabel:r,inline:s,className:a,title:i,events:o,direction:c,text:A,textAnchor:u,dx:h,dy:d,transform:f,x:g,y:m,desc:y,id:x,tabIndex:p,tspanComponent:v,textComponent:b}=e,w=pi(e),_={"aria-label":r,key:"text",...o,direction:c,dx:h,x:g,y:m+d,transform:f,className:a,title:i,desc:$e(y,e),tabIndex:$e(p,e),id:x,...w},C=A.map((k,j)=>{const B=n[j].style,E={key:`${x}-key-${j}`,x:s?void 0:g,dx:s?h+n[j].backgroundPadding.left:h,dy:jNe(n,e,j),textAnchor:B.textAnchor||u,style:B,children:k};return G.cloneElement(v,E)});return G.cloneElement(b,_,C)},FNe={backgroundComponent:G.createElement(j2,null),groupComponent:G.createElement("g",null),direction:"inherit",textComponent:G.createElement(fNe,null),tspanComponent:G.createElement(gNe,null),capHeight:.71,lineHeight:1},ya=e=>{const n=NNe(De({},e,FNe));if(n.text===null||n.text===void 0)return null;const r=ENe(n),{text:s,style:a,capHeight:i,backgroundPadding:o,lineHeight:c}=r,A=s.map((h,d)=>{const f=lr(a,d),g=B1(`${i}em`,f.fontSize),m=lr(c,d);return{style:f,fontSize:f.fontSize||Ko.fontSize,capHeight:g,text:h,textSize:SP(h,f),lineHeight:m,backgroundPadding:lr(o,d)}}),u=TNe(r,A);if(n.backgroundStyle){const d=[SNe(r,A),u],f=G.cloneElement(n.groupComponent,{},d);return n.renderInPortal?G.createElement(k1,null,f):f}return n.renderInPortal?G.createElement(k1,null,u):u};ya.displayName="VictoryLabel";ya.role="label";ya.defaultStyles=Ko;const UNe=e=>{var n;return G.createElement("defs",null,G.createElement("clipPath",{id:(n=e.clipId)==null?void 0:n.toString()},e.children))};function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},kg.apply(this,arguments)}const FP=S.forwardRef((e,n)=>{var A;const{desc:r,id:s,tabIndex:a,origin:i,...o}=e,c={vectorEffect:"non-scaling-stroke",id:(A=$e(s,e))==null?void 0:A.toString(),tabIndex:$e(a,e),...o};return r?G.createElement("circle",kg({},c,{ref:n}),G.createElement("desc",null,r)):G.createElement("circle",kg({},c,{ref:n}))});class Qu extends G.Component{constructor(n){super(n),this.state={clipId:n==null?void 0:n.clipId}}componentDidMount(){this.state.clipId||this.setState({clipId:j_("victory-clip-")})}calculateAttributes(n){const{polar:r,origin:s,clipWidth:a=0,clipHeight:i=0,translateX:o=0,translateY:c=0}=n,A=ms(n.clipPadding),u=n.radius||s1(n);return{x:(r?s.x:o)-A.left,y:(r?s.y:c)-A.top,width:Math.max((r?u:a)+A.left+A.right,0),height:Math.max((r?u:i)+A.top+A.bottom,0)}}renderClippedGroup(n,r){const s=pi(n),{style:a,events:i,transform:o,children:c,className:A,groupComponent:u,tabIndex:h}=n,d=this.renderClipComponent(n,r),f=Object.assign({className:A,style:a,transform:o,key:`clipped-group-${r}`,clipPath:`url(#${r})`},i);return G.cloneElement(u,{...f,tabIndex:h,...s},[d,...G.Children.toArray(c)])}renderGroup(n){const{style:r,events:s,transform:a,children:i,className:o,groupComponent:c,tabIndex:A}=n;return G.cloneElement(c,Object.assign({className:o,style:r,transform:a,"aria-label":n["aria-label"],tabIndex:A},s),i)}renderClipComponent(n,r){const{polar:s,origin:a,clipWidth:i=0,clipHeight:o=0,translateX:c=0,translateY:A=0,circleComponent:u,rectComponent:h,clipPathComponent:d}=n,{top:f,bottom:g,left:m,right:y}=ms(n.clipPadding);let x;if(s){const p=n.radius||s1(n),v={r:Math.max(p+m+y,p+f+g,0),cx:a.x-m,cy:a.y-f};x=G.cloneElement(u,v)}else{const p={x:c-m,y:A-f,width:Math.max(i+m+y,0),height:Math.max(o+f+g,0)};x=G.cloneElement(h,p)}return G.cloneElement(d,Object.assign({key:`clip-path-${r}`},n,{clipId:r}),x)}getClipValue(n,r){const s={x:n.clipWidth,y:n.clipHeight};if(s[r]!==void 0)return s[r];const a=Sn(n,r);return a&&Math.abs(a[0]-a[1])||void 0}getTranslateValue(n,r){const s={x:n.translateX,y:n.translateY};if(s[r]!==void 0)return s[r];const a=Sn(n,r);return a?Math.min(...a):void 0}render(){const n=this.getClipValue(this.props,"y"),r=this.getClipValue(this.props,"x");if(r===void 0||n===void 0)return this.renderGroup(this.props);const s=this.getTranslateValue(this.props,"x"),a=this.getTranslateValue(this.props,"y"),i=De({},this.props,{clipHeight:n,clipWidth:r,translateX:s,translateY:a});return this.renderClippedGroup(i,this.state.clipId)}}de(Qu,"displayName","VictoryClipContainer"),de(Qu,"role","container"),de(Qu,"defaultProps",{circleComponent:G.createElement(FP,null),rectComponent:G.createElement(j2,null),clipPathComponent:G.createElement(UNe,null),groupComponent:G.createElement("g",null)});function jg(){return jg=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},jg.apply(this,arguments)}const fp=S.forwardRef((e,n)=>{var A;const{desc:r,id:s,tabIndex:a,origin:i,...o}=e,c={id:(A=$e(s,e))==null?void 0:A.toString(),tabIndex:$e(a,e),...o};return r?G.createElement("path",jg({},c,{ref:n}),G.createElement("desc",null,r)):G.createElement("path",jg({},c,{ref:n}))}),INe=e=>{const{cx:n,cy:r,r:s,startAngle:a,endAngle:i,closedPath:o}=e,c=Math.abs(i-a)/2+a,A=n+s*Math.cos(_n(a)),u=r-s*Math.sin(_n(a)),h=n+s*Math.cos(_n(c)),d=r-s*Math.sin(_n(c)),f=n+s*Math.cos(_n(i)),g=r-s*Math.sin(_n(i)),m=c-a<=180?0:1,y=i-c<=180?0:1,x=o?` M ${n}, ${r} L ${A}, ${u}`:`M ${A}, ${u}`,p=`A ${s}, ${s}, 0, ${m}, 0, ${h}, ${d}`,v=`A ${s}, ${s}, 0, ${y}, 0, ${f}, ${g}`;return`${x} ${p} ${v} ${o?"Z":""}`},PNe=e=>{const n=$e(e.ariaLabel,e),r=$e(e.desc,e),s=$e(e.id,e),a=Yn(Object.assign({stroke:"black",fill:"none"},e.style),e),i=$e(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,desc:r,id:s,style:a,tabIndex:i})},QNe={pathComponent:G.createElement(fp,null),role:"presentation",shapeRendering:"auto"},aj=e=>{const n=PNe(De({},e,QNe));return G.cloneElement(n.pathComponent,{...n.events,"aria-label":n.ariaLabel,d:INe(n),style:n.style,desc:n.desc,tabIndex:n.tabIndex,className:n.className,role:n.role,shapeRendering:n.shapeRendering,transform:n.transform,clipPath:n.clipPath})},MNe=e=>{const n=$e(e.id,e);return Object.assign({},e,{id:n})},DNe={circleComponent:G.createElement(FP,null),rectComponent:G.createElement(j2,null),role:"presentation",shapeRendering:"auto"},RNe=e=>{const n=MNe(De({},e,DNe));return n.polar?G.cloneElement(n.circleComponent,{...n.events,style:n.style,role:n.role,shapeRendering:n.shapeRendering,cx:n.x,cy:n.y,r:n.height,className:n.className}):G.cloneElement(n.rectComponent,{...n.events,style:n.style,role:n.role,shapeRendering:n.shapeRendering,x:n.x,y:n.y,rx:n.rx,ry:n.ry,width:n.width,height:n.height,className:n.className})};function Ng(){return Ng=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ng.apply(this,arguments)}const $Ne=S.forwardRef((e,n)=>{var A;const{desc:r,id:s,tabIndex:a,origin:i,...o}=e,c={vectorEffect:"non-scaling-stroke",id:(A=$e(s,e))==null?void 0:A.toString(),tabIndex:$e(a,e),...o};return r?G.createElement("line",Ng({},c,{ref:n}),G.createElement("desc",null,r)):G.createElement("line",Ng({},c,{ref:n}))}),ONe=e=>{const n=$e(e.ariaLabel,e),r=$e(e.desc,e),s=$e(e.id,e),a=Yn(Object.assign({stroke:"black"},e.style),e),i=$e(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,desc:r,id:s,style:a,tabIndex:i})},LNe={lineComponent:G.createElement($Ne,null),role:"presentation",shapeRendering:"auto"},Uc=e=>{const n=ONe(De({},e,LNe));return G.cloneElement(n.lineComponent,{...n.events,"aria-label":n.ariaLabel,style:n.style,desc:n.desc,tabIndex:n.tabIndex,className:n.className,role:n.role,shapeRendering:n.shapeRendering,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2,transform:n.transform,clipPath:n.clipPath})},HNe=e=>{const{x:n,y:r,size:s,symbol:a}=e;if(e.getPath)return e.getPath(n,r,s);const i=Zje;return(typeof i[a]=="function"?i[a]:i.circle)(n,r,s)},zNe=e=>{const n=$e(e.ariaLabel,e),r=$e(e.desc,e),s=$e(e.id,e),a=$e(e.size,e),i=Yn(e.style,e),o=$e(e.symbol,e),c=$e(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,desc:r,id:s,size:a,style:i,symbol:o,tabIndex:c})},KNe={pathComponent:G.createElement(fp,null),role:"presentation",shapeRendering:"auto"},GNe=e=>{const n=zNe(De({},e,KNe)),r=pi(n);return G.cloneElement(n.pathComponent,{...n.events,"aria-label":n.ariaLabel,d:HNe(n),style:n.style,desc:n.desc,tabIndex:n.tabIndex,role:n.role,shapeRendering:n.shapeRendering,className:n.className,transform:n.transform,clipPath:n.clipPath,...r})},WNe=(e,n)=>{let r=qs(e);r.length<2&&(r=[]);const s=a=>{const i=wI(n[a])==="log"?1/Number.MAX_SAFE_INTEGER:0,o=n[a].domain(),c=Gs(o),A=Ks(o);let u=i;return c.valueOf()<0&&A.valueOf()<=0?u=A:c.valueOf()>=0&&A.valueOf()>0&&(u=c),ai(o)?new Date(u):u};return r.map(a=>{const i=a._y1!==void 0?a._y1:a._y,o=a._y0!==void 0?a._y0:s("y"),c=a._x1!==void 0?a._x1:a._x,A=a._x0!==void 0?a._x0:s("x");return Object.assign({},a,{_y0:o,_y1:i,_x0:A,_x1:c})})},VNe=e=>{const{polar:n}=e,r=T_(e,"area"),s=F_(e.style,r),a={x:Sn(e,"x"),y:Sn(e,"y")},i={x:g1(e,"x"),y:g1(e,"y")},o={x:ps(e,"x").domain(i.x).range(e.horizontal?a.y:a.x),y:ps(e,"y").domain(i.y).range(e.horizontal?a.x:a.y)},c=n?e.origin||sh(e):void 0,A=WNe(e,o);return{style:s,data:A,scale:o,domain:i,origin:c}},qNe=(e,n)=>{const r=Ls(e,n,"area"),s=Object.assign({},r,VNe(r)),{data:a,domain:i,events:o,groupComponent:c,height:A,horizontal:u,interpolation:h,origin:d,padding:f,polar:g,scale:m,sharedEvents:y,standalone:x,style:p,theme:v,width:b,labels:w,name:_,disableInlineStyles:C}=s,k={parent:{style:p.parent,width:b,height:A,scale:m,data:a,domain:i,standalone:x,theme:v,polar:g,origin:d,padding:f,name:_,horizontal:u},all:{data:{horizontal:u,polar:g,origin:d,scale:m,data:a,interpolation:h,groupComponent:c,style:C?{}:p.data,disableInlineStyles:C}}};return a.reduce((j,B,E)=>{const P=op(s,B,E);if(P!=null||w&&(o||y)){const I=kd(B.eventKey)?E:B.eventKey;j[I]={labels:m2(s,E)}}return j},k)},j1=e=>{const n=e._y1!==void 0?e._y1:e._y;return n!=null&&e._y0!==null},ij=e=>n=>e.x(n._x1!==void 0?n._x1:n._x),N1=e=>n=>e.y(n._y1!==void 0?n._y1:n._y),E1=e=>n=>e.y(n._y0),XNe=e=>n=>-1*e.x(n._x1!==void 0?n._x1:n._x)+Math.PI/2,YNe=e=>{const{horizontal:n,scale:r}=e,s=bg(e);return n?yg().defined(j1).curve(s).x0(E1(r)).x1(N1(r)).y(ij(r)):yg().defined(j1).curve(s).x(ij(r)).y1(N1(r)).y0(E1(r))},JNe=e=>{const{polar:n,scale:r}=e,s=bg(e);return n?v1().defined(j1).curve(s).angle(XNe(r)).outerRadius(N1(r)).innerRadius(E1(r)):YNe(e)},ZNe=e=>{const n=$e(e.ariaLabel,e),r=$e(e.desc,e),s=$e(e.id,e),a=Yn(Object.assign({fill:"black"},e.style),e),i=$e(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,desc:r,id:s,style:a,tabIndex:i})},eEe={groupComponent:G.createElement("g",null),pathComponent:G.createElement(fp,null),role:"presentation",shapeRendering:"auto"},tEe=e=>{const n=ZNe(De({},e,eEe)),{ariaLabel:r,role:s,shapeRendering:a,className:i,polar:o,origin:c,data:A,pathComponent:u,events:h,groupComponent:d,clipPath:f,id:g,style:m,desc:y,tabIndex:x}=n,p=pi(n),v=o&&c?`translate(${c.x}, ${c.y})`:void 0,b=n.transform||v,w=m.stroke&&m.stroke!=="none"&&m.stroke!=="transparent",_=JNe(n),C=w&&gP(n),k=m.stroke?"none":m.fill,j={"aria-label":r,className:i,role:s,shapeRendering:a,transform:b,...h,clipPath:f,tabIndex:x},B=G.cloneElement(u,Object.assign({key:`${g}-area`,style:Object.assign({},m,{stroke:k}),d:_(A),desc:y,tabIndex:x},j,p)),E=w?G.cloneElement(u,Object.assign({key:`${g}-area-stroke`,style:Object.assign({},m,{fill:"none"}),d:C(A)},j)):null;return w?G.cloneElement(d,p,[B,E]):B},oj={width:450,height:300,padding:50,interpolation:"linear"},nEe={components:[{name:"parent",index:"parent"},{name:"data",index:"all"},{name:"labels"}]},Mr=class Mr extends G.Component{static getBaseProps(n){return qNe(n,oj)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n,role:r}=Mr,s=Ls(this.props,oj,r);if(this.shouldAnimate())return this.animateComponent(s,n);const a=this.renderContinuousData(s),i=s.standalone?this.renderContainer(s.containerComponent,a):a;return Q_(i,s)}};de(Mr,"animationWhitelist",["data","domain","height","padding","style","width"]),de(Mr,"defaultProps",{containerComponent:G.createElement(Sl,null),dataComponent:G.createElement(tEe,null),groupComponent:G.createElement(Qu,null),labelComponent:G.createElement(ya,{renderInPortal:!0}),samples:50,sortKey:"x",sortOrder:"ascending",standalone:!0,theme:bA.grayscale}),de(Mr,"displayName","VictoryArea"),de(Mr,"role","area"),de(Mr,"continuous",!0),de(Mr,"defaultTransitions",FI()),de(Mr,"defaultPolarTransitions",UI()),de(Mr,"getDomain",g1),de(Mr,"getData",qs),de(Mr,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);let T1=Mr;const rf=ih(T1,nEe),N2={top:-1,left:-1,right:1,bottom:1},Eg=e=>e!=null,rEe=(e,n)=>{const{orientation:r,horizontal:s}=e;return r?{top:"x",bottom:"x",left:"y",right:"y"}[r]:s?n==="x"?"y":"x":n},sEe=e=>{const n=bs(e),r=rEe(e,n),s=ps(e,n),i=e.domain&&e.domain[n]||wA(e)||s.domain();return s.range(Sn(e,r)),s.domain(i),s},aEe=e=>{const{theme:n,dependentAxis:r}=e,s=n&&n.axis&&n.axis.style,a=r?"dependentAxis":"independentAxis",i=n&&n[a]&&n[a].style;return s&&i?(()=>["axis","axisLabel","grid","parent","tickLabels","ticks"].reduce((A,u)=>(A[u]=De({},i[u],s[u]),A),{}))():i||s},UP=function(e,n){n===void 0&&(n={});const r=e.style||{},s={height:"100%",width:"100%"};return{parent:De(r.parent,n.parent,s),axis:De({},r.axis,n.axis),axisLabel:De({},r.axisLabel,n.axisLabel),grid:De({},r.grid,n.grid),ticks:De({},r.ticks,n.ticks),tickLabels:De({},r.tickLabels,n.tickLabels)}},iEe=(e,n,r)=>{const{position:s,transform:a}=e;return{x1:a.x,y1:a.y,x2:a.x+s.x2,y2:a.y+s.y2,style:n,datum:r}},oEe=(e,n,r,s,a)=>{const{position:i,transform:o}=e;return{style:n,x:o.x+i.x,y:o.y+i.y,verticalAnchor:r.verticalAnchor,textAnchor:r.textAnchor,angle:n.angle,text:a,datum:s}},lEe=(e,n,r)=>{const{edge:s,transform:a}=e;return{x1:a.x,y1:a.y,x2:s.x+a.x,y2:s.y+a.y,style:n,datum:r}},cEe=(e,n,r)=>{const{style:s,padding:a,isVertical:i}=n,{width:o,height:c}=e;return{style:s.axis,x1:i?r.x:a.left+r.x,x2:i?r.x:o-a.right+r.x,y1:i?a.top+r.y:r.y,y2:i?c-a.bottom+r.y:r.y}},AEe=(e,n)=>({tickStyle:Yn(e.ticks,n),labelStyle:Yn(e.tickLabels,n),gridStyle:Yn(e.grid,n)}),uEe=(e,n,r)=>{const{style:s,orientation:a,padding:i,labelPadding:o,isVertical:c}=n,A=N2[a],u=i.left+i.right,h=i.top+i.bottom,d=A<0?"end":"start",f=s.axisLabel,g=c?-90:0,m=c?r.x+A*o:(e.width-u)/2+i.left+r.x,y=c?(e.height-h)/2+i.top+r.y:A*o+r.y;return{x:m,y,verticalAnchor:f.verticalAnchor||d,textAnchor:f.textAnchor||"middle",angle:f.angle===void 0?g:f.angle,style:f,text:e.label}},dEe=(e,n)=>{const s={top:"end",left:"end",right:"start",bottom:"start"}[e];return{textAnchor:n?s:"middle",verticalAnchor:n?"middle":s}},hEe=(e,n)=>{const r=n.axisLabel||{};if(r.padding!==void 0&&r.padding!==null)return r.padding;const s=sp(e),a=r.fontSize||14;return e.label?a*(s?2.3:1.6):0},lj=(e,n,r)=>{const s=n||"positive";return r?{positive:{x:"left",y:"bottom"},negative:{x:"right",y:"top"}}[s][e]:{positive:{x:"bottom",y:"left"},negative:{x:"top",y:"right"}}[s][e]},fEe=(e,n)=>{const{style:r,scale:s,orientation:a,padding:i,axis:o,ticks:c,stringTicks:A,isVertical:u,labelPadding:h}=n,{polar:d,horizontal:f}=e,g={scale:{[o]:s},polar:d,horizontal:f,ticks:c,stringTicks:A},m=a==="right"?i.right:i.left,y=a==="top"?i.top:i.bottom,x=e.offsetX!==null&&e.offsetX!==void 0?e.offsetX:m,p=e.offsetY!==null&&e.offsetY!==void 0?e.offsetY:y,v=r.axisLabel.fontSize||14,b=c.map((j,B)=>{const E=A?e.tickValues[j-1]:j;return Yn(r.ticks,Object.assign({},g,{tick:E,index:B})).size||0}),w=v+2*Math.max(...b)+h,_=1.2*v;return{x:x??(u?w:_),y:p??(u?_:w)}},Ri=(e,n)=>e instanceof Date&&n instanceof Date?e.getTime()===n.getTime():e===n,gEe=(e,n)=>{const{scale:r,origin:s,orientation:a,orientations:i,domain:o,padding:c}=n,{top:A,bottom:u,left:h,right:d}=c,f={x:a==="bottom"||a==="top"?a:i.x,y:a==="left"||a==="right"?a:i.y},g={x:f.y==="left"?h:d,y:f.x==="bottom"?u:A},m={x:f.y==="left"?0:e.width,y:f.x==="bottom"?e.height:0},y={x:Ri(s.x,o.x[0])||Ri(s.x,o.x[1])?0:r.x(s.x),y:Ri(s.y,o.y[0])||Ri(s.y,o.y[1])?0:r.y(s.y)},x=y.x?Math.abs(m.x-y.x):g.x,p=y.y?Math.abs(m.y-y.y):g.y,v=Eg(e.offsetX)?e.offsetX:x,b=Eg(e.offsetY)?e.offsetY:p;return{x:v,y:b}},mEe=(e,n)=>{const{scale:r,origin:s,orientation:a,orientations:i,domain:o,padding:c}=n,{top:A,bottom:u,left:h,right:d}=c,f={y:a==="bottom"||a==="top"?a:i.x,x:a==="left"||a==="right"?a:i.y},g={x:f.y==="bottom"?u:A,y:f.x==="left"?h:d},m={y:f.x==="left"?0:e.width,x:f.y==="bottom"?e.height:0},y={x:Ri(s.x,o.x[0])||Ri(s.x,o.x[1])?0:r.x(s.x),y:Ri(s.y,o.y[0])||Ri(s.y,o.y[1])?0:r.y(s.y)},x=y.x?Math.abs(m.x-y.x):g.x,p=y.y?Math.abs(m.y-y.y):g.y,v=Eg(e.offsetX)?e.offsetX:p,b=Eg(e.offsetY)?e.offsetY:x;return{x:v,y:b}},pEe=(e,n,r)=>{const{orientation:s,axis:a}=n,i=TI(e,a);return{top:{x:0,y:i!==void 0?i:r.y},bottom:{x:0,y:i!==void 0?i:e.height-r.y},left:{x:i!==void 0?i:r.x,y:0},right:{x:i!==void 0?i:e.width-r.x,y:0}}[s]},yEe=(e,n,r)=>{const{tickStyle:s,labelStyle:a}=e,i=s.size||0,o=s.padding||0,c=a.padding||0,A=i+o+c,u=N2[n];return{x:r?u*A:0,x2:r?u*i:0,y:r?0:u*A,y2:r?0:u*i}},vEe=(e,n,r)=>({x:r?n.x:e+n.x,y:r?e+n.y:n.y}),xEe=(e,n)=>{const{orientation:r,padding:s,isVertical:a}=n,i=-N2[r],o=a?i*(e.width-(s.left+s.right)):0,c=a?0:i*(e.height-(s.top+s.bottom));return{x:o,y:c}},wEe=(e,n)=>{const{padding:r,orientation:s,crossAxis:a}=e,i=s==="right"?r.right:r.left,o=s==="top"?r.top:r.bottom;return{x:a?n.x-i:0,y:a?n.y-o:0}},bEe=(e,n)=>{let r;return n.domain.x&&n.domain.y?r=e.horizontal?mEe(e,n):gEe(e,n):r=fEe(e,n),{globalTransform:pEe(e,n,r),gridOffset:wEe(n,r),gridEdge:xEe(e,n)}},_Ee=e=>{if(e.orientation)return e.orientation;const n={dependent:e.horizontal?"bottom":"left",independent:e.horizontal?"left":"bottom"};return e.dependentAxis?n.dependent:n.independent},CEe=e=>{const n=aEe(e),r=UP(e,n),s=ms(e.padding),a=hEe(e,r),i=ap(e)?e.tickValues:void 0,o=bs(e),c=wA(e),A=sEe(e),u=o==="x"?c:void 0,h=o==="y"?c:void 0,d=o==="x"?A:void 0,f=o==="y"?A:void 0,g=!(e.crossAxis===!1||e.standalone===!0),m=EI(e,A,g),y=NI(e,A),x={x:Sn(e,"x"),y:Sn(e,"y")},p={x:e.domain&&e.domain.x?e.domain.x:u,y:e.domain&&e.domain.y?e.domain.y:h},v={x:e.domain&&e.domain.x?ps(e,"x").domain(e.domain.x).range(e.horizontal?x.y:x.x):d,y:e.domain&&e.domain.y?ps(e,"y").domain(e.domain.y).range(e.horizontal?x.x:x.y):f},b=p.x&&p.y?jI(p):void 0,w=b?{x:Rk(b.x,p.x),y:Rk(b.y,p.y)}:void 0,_=w?{x:lj("x",w.y,e.horizontal),y:lj("y",w.x,e.horizontal)}:void 0,C=_?e.orientation||_[o]:_Ee(e),k=sp(Object.assign({},e,{orientation:C}));return{anchors:dEe(C,k),axis:o,crossAxis:g,domain:p,isVertical:k,labelPadding:a,orientation:C,orientations:_,origin:b,padding:s,scale:v,stringTicks:i,style:r,tickFormat:y,ticks:m}},BEe=(e,n)=>{const r=ip(e,n),s=CEe(r),{axis:a,style:i,orientation:o,isVertical:c,scale:A,ticks:u,tickFormat:h,anchors:d,domain:f,stringTicks:g}=s,m=a==="x"?"y":"x",{width:y,height:x,standalone:p,theme:v,polar:b,padding:w,horizontal:_}=r,{globalTransform:C,gridOffset:k,gridEdge:j}=bEe(r,s),B={scale:{[a]:A[a]},polar:b,horizontal:_,ticks:u,stringTicks:g},E=cEe(r,s,C),P=uEe(r,s,C),I={parent:Object.assign({style:i.parent,ticks:u,standalone:p,theme:v,width:y,height:x,padding:w,domain:f},B)},U={dimension:m,range:{[m]:Sn(r,m)},scale:r.scale&&r.scale[m]?{[m]:r.scale[m]}:void 0};return u.reduce((N,D,T)=>{var X,ae,$;const L=g?g[T]:D,Q=h(D,T,u),M=AEe(i,Object.assign({},B,{tick:L,tickValue:D,index:T,text:Q})),F={position:yEe(M,o,c),transform:vEe((X=A[a])==null?void 0:X.call(A,D),C,c)},O={edge:j,transform:{x:c?-k.x+C.x:((ae=A[a])==null?void 0:ae.call(A,D))+C.x,y:c?(($=A[a])==null?void 0:$.call(A,D))+C.y:k.y+C.y}};return N[T]={axis:Object.assign({dimension:a},B,E),axisLabel:Object.assign({},B,P),ticks:Object.assign({},B,iEe(F,M.tickStyle,D)),tickLabels:Object.assign({},B,oEe(F,M.labelStyle,d,D,Q)),grid:Object.assign({},B,U,lEe(O,M.gridStyle,D))},N},I)},cj={width:450,height:300,padding:50},SEe={components:[{name:"axis",index:0},{name:"axisLabel",index:0},{name:"grid"},{name:"parent",index:"parent"},{name:"ticks"},{name:"tickLabels"}]};class Qa extends G.Component{static getStyles(n){return UP(n)}static getBaseProps(n){return BEe(n,cj)}renderLine(n){const{axisComponent:r}=n,s=this.getComponentProps(r,"axis",0);return G.cloneElement(r,s)}renderLabel(n){const{axisLabelComponent:r,label:s}=n;if(!s)return null;const a=this.getComponentProps(r,"axisLabel",0);return G.cloneElement(r,a)}renderGridAndTicks(n){const{tickComponent:r,tickLabelComponent:s,gridComponent:a,name:i}=n,o=c=>{const{style:A={},events:u={}}=c;return A.stroke!=="transparent"&&A.stroke!=="none"&&A.strokeWidth!==0||!rn(u)};return this.dataKeys.map((c,A)=>{const u=this.getComponentProps(r,"ticks",A),h=G.cloneElement(r,u),d=o(h.props)?h:void 0,f=this.getComponentProps(a,"grid",A),g=G.cloneElement(a,f),m=o(g.props)?g:void 0,y=this.getComponentProps(s,"tickLabels",A),p=[m,d,G.cloneElement(s,y)].filter(Boolean);return G.cloneElement(n.groupComponent,{key:`${i}-tick-group-${c}`},p)})}fixLabelOverlap(n,r){const s=sp(r),a=s?r.height:r.width,i=g=>g.type&&g.type.role==="label",o=n.map(g=>g.props.children).reduce((g,m)=>g.concat(m),[]).filter(i).map(g=>g.props),c=g=>typeof g=="object"?Object.assign({},{top:0,right:0,bottom:0,left:0},g):{top:g,right:g,bottom:g,left:g},A=o.reduce((g,m)=>{const y=c(m.style.padding),x=SP(m.text,{angle:m.angle,fontSize:m.style.fontSize,letterSpacing:m.style.letterSpacing,fontFamily:m.style.fontFamily});return g+(s?x.height+y.top+y.bottom:x.width+y.right+y.left)},0),u=Math.floor(a*n.length/A),h=Math.ceil(n.length/u)||1,d=g=>g.props.children.filter(i).reduce((m,y)=>(s?y.props.y:y.props.x)||0,0);return n.sort((g,m)=>s?d(m)-d(g):d(g)-d(m)).filter((g,m)=>m%h===0)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n}=pa,r=ip(this.props,cj),s=pi(this.props);if(this.shouldAnimate())return this.animateComponent(r,n);const a=this.renderGridAndTicks(r),i=r.fixLabelOverlap?this.fixLabelOverlap(a,r):a,o=[this.renderLine(r),this.renderLabel(r),...i],c=G.cloneElement(r.containerComponent,s);return r.standalone?this.renderContainer(c,o):G.cloneElement(r.groupComponent,s,o)}}de(Qa,"animationWhitelist",["style","domain","range","tickCount","tickValues","offsetX","offsetY","padding","width","height"]),de(Qa,"displayName","VictoryAxis"),de(Qa,"role","axis"),de(Qa,"defaultTransitions",{onExit:{duration:500},onEnter:{duration:500}}),de(Qa,"defaultProps",{axisComponent:G.createElement(Uc,null),axisLabelComponent:G.createElement(ya,null),tickLabelComponent:G.createElement(ya,null),tickComponent:G.createElement(Uc,null),gridComponent:G.createElement(Uc,null),standalone:!0,theme:bA.grayscale,containerComponent:G.createElement(Sl,null),groupComponent:G.createElement("g",{role:"presentation"}),fixLabelOverlap:!1}),de(Qa,"getDomain",wA),de(Qa,"getAxis",bs),de(Qa,"expectedComponents",["axisComponent","axisLabelComponent","groupComponent","containerComponent","tickComponent","tickLabelComponent","gridComponent"]);const pa=ih(Qa,SEe);function kEe(e){for(var n=-1,r=e==null?0:e.length,s={};++n<r;){var a=e[n];s[a[0]]=a[1]}return s}var jEe=kEe;const NEe=Ht(jEe);var F1={exports:{}};(function(e,n){n=e.exports=r,n.getSerialize=s;function r(a,i,o,c){return JSON.stringify(a,s(i,c),o)}function s(a,i){var o=[],c=[];return i==null&&(i=function(A,u){return o[0]===u?"[Circular ~]":"[Circular ~."+c.slice(0,o.indexOf(u)).join(".")+"]"}),function(A,u){if(o.length>0){var h=o.indexOf(this);~h?o.splice(h+1):o.push(this),~h?c.splice(h,1/0,A):c.push(A),~o.indexOf(u)&&(u=i.call(this,A,u))}else o.push(u);return a==null?u:a.call(this,A,u)}}})(F1,F1.exports);var EEe=F1.exports;const TEe=Ht(EEe);class fu extends G.Component{constructor(n){super(n),this.getScopedEvents=IU.bind(this),this.getEventState=QU.bind(this),this.state=this.state||{},this.sharedEventsCache={},this.globalEvents={},this.prevGlobalEventKeys=[],this.boundGlobalEvents={},this.baseProps=this.getBaseProps(n)}shouldComponentUpdate(n){if(!zo(this.props,n)){this.baseProps=this.getBaseProps(n);const r=this.getExternalMutations(n,this.baseProps);this.applyExternalMutations(n,r)}return!0}componentDidMount(){const n=Object.keys(this.globalEvents);n.forEach(r=>this.addGlobalListener(r)),this.prevGlobalEventKeys=n}componentDidUpdate(){const n=Object.keys(this.globalEvents);ag(this.prevGlobalEventKeys,n).forEach(a=>this.removeGlobalListener(a)),ag(n,this.prevGlobalEventKeys).forEach(a=>this.addGlobalListener(a)),this.prevGlobalEventKeys=n}componentWillUnmount(){this.prevGlobalEventKeys.forEach(n=>this.removeGlobalListener(n))}addGlobalListener(n){const r=s=>{const a=this.globalEvents[n];return a&&a($U(s))};this.boundGlobalEvents[n]=r,window.addEventListener(og(n),r)}removeGlobalListener(n){window.removeEventListener(og(n),this.boundGlobalEvents[n])}getAllEvents(n){const s=D_(n,["container","groupComponent"]);return Array.isArray(s)?Array.isArray(n.events)?s.concat(...n.events):s:n.events}applyExternalMutations(n,r){if(!rn(r)){const s=n.externalEventMutations.reduce((i,o)=>vt(o.callback)?i.concat(o.callback):i,[]),a=s.length?()=>{s.forEach(i=>i())}:void 0;this.setState(r,a)}}getExternalMutations(n,r){return rn(n.externalEventMutations)?void 0:gBe(n.externalEventMutations,r,this.state,Object.keys(r))}cacheSharedEvents(n,r,s){this.sharedEventsCache[n]=[r,s]}getCachedSharedEvents(n,r){const[s,a]=this.sharedEventsCache[n]||[];if(s&&zo(r,a))return s}getBaseProps(n){const{container:r}=n,s=G.Children.toArray(this.props.children),a=this.getBasePropsFromChildren(s),i=r?r.props:{};return Object.assign({},a,{parent:i})}getBasePropsFromChildren(n){const s=ah(n,(a,i)=>{if(a.type&&vt(a.type.getBaseProps)){const o=a.props&&a.type.getBaseProps(a.props);return o?[[i,o]]:null}return null});return NEe(s)}getNewChildren(n,r){const{events:s,eventKey:a}=n,i=(A,u)=>A.reduce((h,d,f)=>{if(d.props.children){const g=G.Children.toArray(d.props.children),m=u.slice(f,f+g.length),y=G.cloneElement(d,d.props,i(g,m));return h.concat(y)}else if(u[f]!=="parent"&&d.type&&vt(d.type.getBaseProps)){const g=d.props.name||u[f],m=Array.isArray(s)&&s.filter(p=>p.target==="parent"?!1:Array.isArray(p.childName)?p.childName.indexOf(g)>-1:p.childName===g||p.childName==="all"),y=[g,r,m,TEe(this.state[g])],x=this.getCachedSharedEvents(g,y)||{events:m,getEvents:(p,v)=>this.getScopedEvents(p,v,g,r),getEventState:(p,v)=>this.getEventState(p,v,g)};return this.cacheSharedEvents(g,x,y),h.concat(G.cloneElement(d,Object.assign({key:`events-${g}`,sharedEvents:x,eventKey:a,name:g},d.props)))}return h.concat(d)},[]),o=Object.keys(r),c=G.Children.toArray(n.children);return i(c,o)}getContainer(n,r,s){const a=this.getNewChildren(n,r),i=Array.isArray(s)?s.filter(y=>y.target==="parent"):[],o=i.length>0?{events:i,getEvents:(y,x)=>this.getScopedEvents(y,x,null,r),getEventState:this.getEventState}:null,c=n.container||n.groupComponent,A=c.type&&c.type.role,u=c.props||{},h=UU.bind(this),d=o&&h({sharedEvents:o},"parent"),f=De({},this.getEventState("parent","parent"),u,r.parent,{children:a}),g=De({},PU(d,"parent",f),u.events);this.globalEvents=DU(g);const m=RU(g);return A==="container"?G.cloneElement(c,Object.assign({},f,{events:m})):G.cloneElement(c,m,a)}render(){const n=this.getAllEvents(this.props);return n?this.getContainer(this.props,this.baseProps,n):G.cloneElement(this.props.container,{children:this.props.children})}}de(fu,"displayName","VictorySharedEvents"),de(fu,"role","shared-event-wrapper"),de(fu,"contextType",k_),de(fu,"defaultProps",{groupComponent:G.createElement("g",null)});const Br=(e,n,r)=>r==="x"?e*Math.cos(n):-e*Math.sin(n),IP=e=>{const n=e.dependentAxis?"radial":"angular",r=n==="angular"?"radial":"angular";return e.horizontal?r:n},FEe=(e,n)=>eNe(e,s=>n(s)%(2*Math.PI)),E2=(e,n)=>({tickStyle:Yn(e.ticks,n),labelStyle:Yn(e.tickLabels,n),gridStyle:Yn(e.grid,n)}),UEe=e=>{var A,u;const{theme:n={},dependentAxis:r}=e,s=n.polarAxis&&n.polarAxis.style||n.axis&&n.axis.style,a=r?"polarDependentAxis":"polarIndependentAxis",i=r?"dependentAxis":"independentAxis",o=((A=n==null?void 0:n[a])==null?void 0:A.style)||((u=n==null?void 0:n[i])==null?void 0:u.style);return s&&o?(()=>["axis","axisLabel","grid","parent","tickLabels","ticks"].reduce((d,f)=>(d[f]=De({},o==null?void 0:o[f],s==null?void 0:s[f]),d),{}))():o||s},PP=e=>{const{left:n,right:r,top:s,bottom:a}=ms(e.padding),{width:i,height:o}=e;if(i===void 0||o===void 0)throw new Error("VictoryPolarAxis: width and height properties are required for standalone axes.");return Math.min(i-n-r,o-s-a)/2},QP=(e,n)=>{if(e.range&&e.range[n])return e.range[n];if(e.range&&Array.isArray(e.range))return e.range;if(IP(e)==="angular"){const a=_n(e.startAngle),i=_n(e.endAngle);return[a,i]}const s=PP(e);return[e.innerRadius||0,s]},MP=e=>{const n=bs(e),r=ps(e,n),s=wA(e,n)||r.domain(),a=QP(e,n);return r.range(a),r.domain(s),r},DP=function(e,n){if(n===void 0&&(n={}),e.disableInlineStyles)return{};const r=e.style||{};return{parent:De({height:"auto",width:"100%"},r.parent,n.parent),axis:De({},r.axis,n.axis),axisLabel:De({},r.axisLabel,n.axisLabel),grid:De({},r.grid,n.grid),ticks:De({},r.ticks,n.ticks),tickLabels:De({},r.tickLabels,n.tickLabels)}},gp=e=>{const{axisAngle:n,startAngle:r,dependentAxis:s}=e,a=bs(e),i=TI(e,a);return i===void 0||!s?n===void 0?r:n:U_(i)},IEe=(e,n,r,s)=>{const{axisType:a,radius:i,scale:o,style:c,stringTicks:A,ticks:u,tickFormat:h,origin:d}=n,f=h(r,s,u),g=A?A[s]:r,{tickStyle:m}=E2(c,{tick:g,tickValue:r,index:s,ticks:u,stringTicks:A,radius:i,scale:o,axisType:a,text:f}),y=a==="radial"?gp(e):void 0,x=m.padding||m.size||0,p=_n(90-y),v=a==="angular"?o(r):_n(-1*y),b=a==="angular"?i:o(r);return a==="angular"?{index:s,datum:g,style:m,x1:Br(b,v,"x")+d.x,y1:Br(b,v,"y")+d.y,x2:Br(b+x,v,"x")+d.x,y2:Br(b+x,v,"y")+d.y}:{index:s,datum:g,style:m,x1:b*Math.cos(v)+Math.cos(p)*x+d.x,x2:b*Math.cos(v)-Math.cos(p)*x+d.x,y1:b*Math.sin(v)+Math.sin(p)*x+d.y,y2:b*Math.sin(v)-Math.sin(p)*x+d.y}},PEe=(e,n,r,s)=>{const{axisType:a,radius:i,tickFormat:o,style:c,scale:A,ticks:u,stringTicks:h,origin:d}=n,f=o(r,s,u),g=h?h[s]:r,{labelStyle:m}=E2(c,{text:f,tick:g,tickValue:r,index:s,ticks:u,stringTicks:h,radius:i,scale:A,axisType:a}),{tickLabelComponent:y}=e,x=y!=null&&y.props.labelPlacement?y.props.labelPlacement:e.labelPlacement,p=m.padding||0,v=0,b=a==="radial"?gp(e):void 0,w=a==="angular"?U_(A(r)):b+v,_=m.angle===void 0?f2(Object.assign({},e,{labelPlacement:x}),w):m.angle,C=a==="angular"?i+p:A(r),k=m.textAnchor||h2(Object.assign({},e,{labelPlacement:x}),w);return{index:s,datum:g,style:m,angle:_,textAnchor:k,text:f,x:C*Math.cos(_n(w))+d.x,y:-C*Math.sin(_n(w))+d.y}},QEe=(e,n,r,s)=>{const{axisType:a,radius:i,style:o,scale:c,stringTicks:A,ticks:u,tickFormat:h,origin:d}=n,f=h(r,s,u),{startAngle:g,endAngle:m,innerRadius:y=0}=e,x=A?A[s]:r,{gridStyle:p}=E2(o,{tick:x,tickValue:r,index:s,ticks:u,stringTicks:A,radius:i,scale:c,axisType:a,text:f}),v=c(r);return a==="angular"?{index:s,datum:x,style:p,x1:Br(i,v,"x")+d.x,y1:Br(i,v,"y")+d.y,x2:Br(y,v,"x")+d.x,y2:Br(y,v,"y")+d.y}:{style:p,index:s,datum:x,cx:d.x,cy:d.y,r:c(r),startAngle:g,endAngle:m}},MEe=(e,n)=>{const{axisType:r,radius:s,style:a,origin:i}=n,{axisLabelComponent:o}=e;if(r!=="radial")return{};const c=o!=null&&o.props.labelPlacement?o.props.labelPlacement:e.labelPlacement,A=a&&a.axisLabel||{},u=r==="radial"?gp(e):void 0,h=A.angle===void 0?f2(Object.assign({},e,{labelPlacement:c}),u):A.angle,d=s+(A.padding||0),f=A.textAnchor||h2(Object.assign({},e,{labelPlacement:c}),u),g=A.verticalAnchor||II(Object.assign({},e,{labelPlacement:c}),u);return{style:A,angle:h,textAnchor:f,verticalAnchor:g,text:e.label,x:Br(d,_n(u),"x")+i.x,y:Br(d,_n(u),"y")+i.y}},DEe=(e,n)=>{const{style:r,axisType:s,radius:a,origin:i}=n,{startAngle:o,endAngle:c,innerRadius:A=0}=e,u=s==="radial"?_n(gp(e)):void 0;return s==="radial"?{style:r.axis,x1:Br(A,u,"x")+i.x,x2:Br(a,u,"x")+i.x,y1:Br(A,u,"y")+i.y,y2:Br(a,u,"y")+i.y}:{style:r.axis,cx:i.x,cy:i.y,r:a,startAngle:o,endAngle:c}},REe=e=>{const n=Object.assign({polar:!0},e),r=UEe(n),s=DP(n,r),a=ms(n.padding),i=bs(n),o=IP(n),c=ap(n)?n.tickValues:void 0,A=wA(n,i),u=QP(n,i),h=MP(n),d=EI(n,h),f=o==="angular"?FEe(d,h):d,g=NI(n,h),m=PP(n),y=sh(n);return{axis:i,style:s,padding:a,stringTicks:c,axisType:o,scale:h,ticks:f,tickFormat:g,domain:A,range:u,radius:m,origin:y}},$Ee=(e,n)=>{const r=ip(e,n),s=REe(r),{style:a,scale:i,ticks:o,domain:c}=s,{width:A,height:u,standalone:h,theme:d,name:f}=r,g=DEe(r,s),m=MEe(r,s),y={parent:{style:a.parent,ticks:o,scale:i,width:A,height:u,domain:c,standalone:h,theme:d,name:f}};return o.reduce((x,p,v)=>(x[v]={axis:g,axisLabel:m,ticks:IEe(r,s,p,v),tickLabels:PEe(r,s,p,v),grid:QEe(r,s,p,v)},x),y)},Vy={width:450,height:300,padding:50};class Ma extends G.Component{static getScale(n){return MP(n)}static getStyles(n){return DP(n,Vy.style)}static getBaseProps(n){return $Ee(n,Vy)}renderAxisLine(n){const{dependentAxis:r}=n,s=r?n.axisComponent:n.circularAxisComponent,a=this.getComponentProps(s,"axis",0);return G.cloneElement(s,a)}renderLabel(n){const{axisLabelComponent:r,dependentAxis:s,label:a}=n;if(!a||!s)return null;const i=this.getComponentProps(r,"axisLabel",0);return G.cloneElement(r,i)}renderAxis(n){const{tickComponent:r,tickLabelComponent:s,name:a}=n,i=m=>{const{style:y={},events:x={}}=m;return y.stroke!=="transparent"&&y.stroke!=="none"&&y.strokeWidth!==0||!rn(x)},c=(n.dependentAxis?"radial":"angular")==="radial"?n.circularGridComponent:n.gridComponent,A=this.dataKeys.map((m,y)=>{const x=Object.assign({key:`${a}-tick-${m}`},this.getComponentProps(r,"ticks",y)),p=G.cloneElement(r,x);return i(p.props)?p:void 0}).filter(Boolean),u=this.dataKeys.map((m,y)=>{const x=Object.assign({key:`${a}-grid-${m}`},this.getComponentProps(c,"grid",y)),p=G.cloneElement(c,x);return i(p.props)?p:void 0}).filter(Boolean),h=this.dataKeys.map((m,y)=>{const x=Object.assign({key:`${a}-tick-${m}`},this.getComponentProps(s,"tickLabels",y));return G.cloneElement(s,x)}),d=this.renderAxisLine(n),f=this.renderLabel(n),g=[d,f,...A,...u,...h];return this.renderGroup(n,g)}renderGroup(n,r){const{groupComponent:s}=n;return G.cloneElement(s,{},r)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n}=U1,r=ip(this.props,Vy);if(this.shouldAnimate())return this.animateComponent(r,n);const s=this.renderAxis(r);return r.standalone?this.renderContainer(r.containerComponent,s):s}}de(Ma,"animationWhitelist",["style","domain","range","tickCount","tickValues","padding","width","height"]),de(Ma,"displayName","VictoryAxis"),de(Ma,"role","axis"),de(Ma,"defaultTransitions",{onExit:{duration:500},onEnter:{duration:500}}),de(Ma,"defaultProps",{axisComponent:G.createElement(Uc,null),axisLabelComponent:G.createElement(ya,null),circularAxisComponent:G.createElement(aj,null),circularGridComponent:G.createElement(aj,null),containerComponent:G.createElement(Sl,null),endAngle:360,gridComponent:G.createElement(Uc,null),groupComponent:G.createElement("g",{role:"presentation"}),labelPlacement:"parallel",startAngle:0,standalone:!0,theme:bA.grayscale,tickComponent:G.createElement(Uc,null),tickLabelComponent:G.createElement(ya,null)}),de(Ma,"getDomain",wA),de(Ma,"getAxis",bs),de(Ma,"expectedComponents",["axisComponent","circularAxisComponent","groupComponent","containerComponent","tickComponent","tickLabelComponent","gridComponent","circularGridComponent"]);const OEe={components:[{name:"axis",index:0},{name:"axisLabel",index:0},{name:"grid"},{name:"parent",index:"parent"},{name:"ticks"},{name:"tickLabels"}]},U1=ih(Ma,OEe),LEe={width:450,height:300,padding:50};function HEe(e,n,r){const{domain:s,scale:a,stringMap:i,categories:o,horizontal:c}=r;return{stringMap:i,horizontal:c,categories:o,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,domain:s,scale:a}}function zEe(e,n){const r=e.backgroundComponent,s=e.polar?n.range.y[1]:n.range.y[0]-n.range.y[1],a=n.range.x[1]-n.range.x[0],i=e.horizontal?n.scale.y.range()[0]:n.scale.x.range()[0],o=e.horizontal?n.scale.x.range()[1]:n.scale.y.range()[1],c=e.polar?n.origin.x:i,A=e.polar?n.origin.y:o,u=e.name||"chart",h={height:s,polar:e.polar,scale:n.scale,style:e.style.background,x:c,y:A,key:`${u}-background`,width:a};return G.cloneElement(r,De({},r.props,h))}function KEe(e,n,r){const s=SI([e]);if(s.length>0)return HEe(s[0],n,r);const{categories:a,domain:i,range:o,scale:c,stringMap:A,horizontal:u}=r;return{categories:a,domain:i,range:o,scale:c,stringMap:A,horizontal:u}}function GEe(e){const n=e.style&&e.style.parent;return{parent:De({},n,{height:"100%",width:"100%",userSelect:"none"})}}function RP(e,n){const r=GEe(e),s=Ls(e,LEe,"chart"),{horizontal:a,polar:i}=s,o=kP(s,n),c=lNe(s,n,o),A=VEe(s,n,o),u={x:Aj(Object.assign({},s,{categories:c}),"x",n),y:Aj(Object.assign({},s,{categories:c}),"y",n)},h={x:Sn(s,"x"),y:Sn(s,"y")},d={x:h1(s,"x")||tj(s,"x"),y:h1(s,"y")||tj(s,"y")},f={x:d.x.domain(u.x).range(a?h.y:h.x),y:d.y.domain(u.y).range(a?h.x:h.y)},g=i?sh(s):jI(u),m=ms(s.padding);return{categories:c,domain:u,range:h,horizontal:a,scale:f,stringMap:A,style:r,origin:g,padding:m}}function WEe(e,n,r){const s=n||$P(e),a=r||RP(e,s),i=a.style.parent,{height:o,polar:c,theme:A,width:u}=e,{origin:h,horizontal:d}=a,f=e.name||"chart";return s.filter(G.isValidElement).map((g,m)=>{const y=g.type&&g.type.role,x=Array.isArray(g.props.style)?g.props.style:De({},g.props.style,{parent:i}),p=KEe(g,e,a),v=g.props.name||`${f}-${y}-${m}`,b=De({horizontal:d,height:o,polar:c,theme:A,width:u,style:x,name:v,origin:c?h:void 0,padding:a.padding,key:`${v}-key-${m}`,standalone:!1},p);return G.cloneElement(g,b)})}const $P=(e,n)=>{let r=G.Children.toArray(e.children);if(r.length===0)r.push(n.independent,n.dependent);else{const s={dependent:Dk(r,"dependent"),independent:Dk(r,"independent")};s.dependent.length===0&&s.independent.length===0&&(r=e.prependDefaultAxes?[n.independent,n.dependent].concat(r):r.concat([n.independent,n.dependent]))}return r},Aj=(e,n,r)=>{const s=r||G.Children.toArray(e.children),a=sNe(e,n,s),i=kI(s,n);return i&&i.props&&i.props.invertAxis?a.concat().reverse():a},VEe=(e,n,r)=>{const s=!r.x||r.x.length===0?null:r.x.reduce((i,o,c)=>(i[o]=c+1,i),{}),a=!r.y||r.y.length===0?null:r.y.reduce((i,o,c)=>(i[o]=c+1,i),{});return{x:s,y:a}},qEe={width:450,height:300,padding:50},XEe={backgroundComponent:G.createElement(RNe,null),containerComponent:G.createElement(Sl,null),defaultAxes:{independent:G.createElement(pa,null),dependent:G.createElement(pa,{dependentAxis:!0})},defaultPolarAxes:{independent:G.createElement(U1,null),dependent:G.createElement(U1,{dependentAxis:!0})},groupComponent:G.createElement("g",null),standalone:!0,theme:bA.grayscale},YEe=e=>{const n=G.useMemo(()=>De({},e,XEe),[e]),r="chart",{getAnimationProps:s,setAnimationState:a,getProps:i}=Ske(),o=i(n),c=Ls(o,qEe,r),{desc:A,eventKey:u,containerComponent:h,standalone:d,groupComponent:f,externalEventMutations:g,width:m,height:y,theme:x,polar:p,name:v,title:b}=c,w=o.polar?c.defaultPolarAxes:c.defaultAxes,_=G.useMemo(()=>$P(c,w),[c,w]),C=G.useMemo(()=>RP(c,_),[c,_]),{domain:k,scale:j,style:B,origin:E,horizontal:P}=C,I=G.useMemo(()=>{const Q=WEe(o,_,C).map((M,F)=>{const O=Object.assign({animate:s(o,M,F)},M.props);return G.cloneElement(M,O)});if(o.style&&o.style.background){const M=zEe(o,C);Q.unshift(M)}return Q},[s,_,o,C]),U=G.useMemo(()=>d?{desc:A,domain:k,width:m,height:y,horizontal:P,name:v,origin:p?E:void 0,polar:p,theme:x,title:b,scale:j,standalone:d,style:B.parent}:{},[A,k,y,P,v,E,p,j,d,B,b,x,m]),N=G.useMemo(()=>{if(d){const L=De({},h.props,U,pi(n));return G.cloneElement(h,L)}return f},[f,d,h,U,n]),D=G.useMemo(()=>aNe(o),[o]),T=Cke(n);return G.useEffect(()=>()=>{n.animate&&a(T,n)},[a,T,n]),rn(D)?G.cloneElement(N,N.props,I):G.createElement(fu,{container:N,eventKey:u,events:D,externalEventMutations:g},I)},gh=G.memo(YEe,zo);gh.displayName="VictoryChart";gh.expectedComponents=["groupComponent","containerComponent"];const JEe=e=>{let n=qs(e);n.length<2&&(n=[]);const r={x:Sn(e,"x"),y:Sn(e,"y")},s={x:il(e,"x"),y:il(e,"y")},a={x:ps(e,"x").domain(s.x).range(e.horizontal?r.y:r.x),y:ps(e,"y").domain(s.y).range(e.horizontal?r.x:r.y)},i=e.polar?e.origin||sh(e):void 0,o=T_(e,"line"),c=F_(e.style,o);return{domain:s,data:n,scale:a,style:c,origin:i}},ZEe=(e,n)=>{const r=Ls(e,n,"line"),s=Object.assign({},r,JEe(r)),{data:a,domain:i,events:o,groupComponent:c,height:A,horizontal:u,interpolation:h,origin:d,padding:f,polar:g,scale:m,sharedEvents:y,standalone:x,style:p,theme:v,width:b,labels:w,name:_,disableInlineStyles:C}=s,k={parent:{style:p.parent,scale:m,data:a,height:A,width:b,name:_,domain:i,standalone:x,polar:g,origin:d,padding:f,horizontal:u},all:{data:{horizontal:u,polar:g,origin:d,scale:m,data:a,interpolation:h,groupComponent:c,style:C?{}:p.data,theme:v,disableInlineStyles:C}}};return a.reduce((j,B,E)=>{const P=op(s,B,E);if(P!=null||w&&(o||y)){const I=kd(B.eventKey)?E:B.eventKey;j[I]={labels:m2(s,E)}}return j},k)},e3e=e=>{const n=$e(e.ariaLabel,e),r=$e(e.id,e),s=Yn(Object.assign({fill:"none",stroke:"black",pointerEvents:"stroke"},e.style),e),a=$e(e.tabIndex,e);return Object.assign({},e,{ariaLabel:n,id:r,style:s,tabIndex:a})},t3e={pathComponent:G.createElement(fp,null),role:"presentation",shapeRendering:"auto"},n3e=e=>{const n=e3e(De({},e,t3e)),r=pi(n),{polar:s,origin:a}=n,i=gP(n),o=s&&a?`translate(${a.x}, ${a.y})`:void 0,c=i(n.data);return G.cloneElement(n.pathComponent,{...n.events,...r,"aria-label":n.ariaLabel,d:c,style:n.style,transform:n.transform||o,className:n.className,role:n.role,shapeRendering:n.shapeRendering,clipPath:n.clipPath,tabIndex:n.tabIndex})},uj={width:450,height:300,padding:50,interpolation:"linear"},r3e={components:[{name:"parent",index:"parent"},{name:"data",index:"all"},{name:"labels"}]},Dr=class Dr extends G.Component{constructor(n){super(n)}static getBaseProps(n){return ZEe(n,uj)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n,role:r}=Dr,s=Ls(this.props,uj,r);if(this.shouldAnimate())return this.animateComponent(s,n);const a=this.renderContinuousData(s),i=s.standalone?this.renderContainer(s.containerComponent,a):a;return Q_(i,s)}};de(Dr,"animationWhitelist",["data","domain","height","padding","samples","style","width"]),de(Dr,"displayName","VictoryLine"),de(Dr,"role","line"),de(Dr,"defaultTransitions",FI()),de(Dr,"defaultPolarTransitions",UI()),de(Dr,"continuous",!0),de(Dr,"defaultProps",{containerComponent:G.createElement(Sl,null),dataComponent:G.createElement(n3e,null),labelComponent:G.createElement(ya,{renderInPortal:!0}),groupComponent:G.createElement(Qu,null),samples:50,sortKey:"x",sortOrder:"ascending",standalone:!0,theme:bA.grayscale}),de(Dr,"getDomain",il),de(Dr,"getData",qs),de(Dr,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);let I1=Dr;const Ro=ih(I1,r3e),s3e=(e,n)=>n.bubbleProperty?"circle":e.symbol||n.symbol,a3e=(e,n)=>{const{data:r,z:s,maxBubbleSize:a,minBubbleSize:i}=n,o=r.map(p=>p[s]),c=Math.min(...o),A=Math.max(...o),h=a||(()=>{const p=Math.min(...Object.values(ms(n.padding)));return Math.max(p,5)})(),d=i||h*.1;if(A===c)return Math.max(d,1);const f=Math.PI*Math.pow(h,2),g=Math.PI*Math.pow(d,2),m=(e[s]-c)/(A-c)*f,y=Math.max(m,g),x=Math.sqrt(y/Math.PI);return Math.max(x,1)},i3e=(e,n)=>{const{size:r,z:s}=n;return e.size?typeof e.size=="function"?e.size:Math.max(e.size,1):typeof n.size=="function"?r:e[s]?a3e(e,n):Math.max(r||0,1)},o3e=e=>{const n=T_(e,"scatter"),r=F_(e.style,n),s={x:Sn(e,"x"),y:Sn(e,"y")},a={x:il(e,"x"),y:il(e,"y")},i={x:ps(e,"x").domain(a.x).range(e.horizontal?s.y:s.x),y:ps(e,"y").domain(a.y).range(e.horizontal?s.x:s.y)},o=e.polar?e.origin||sh(e):void 0,c=e.bubbleProperty||"z";let A=qs(e);return A=Ake(A,a),{domain:a,data:A,scale:i,style:r,origin:o,z:c}},l3e=(e,n)=>{const r=Ls(e,n,"scatter"),s=Object.assign({},r,o3e(r)),{data:a,domain:i,events:o,height:c,origin:A,padding:u,polar:h,scale:d,name:f,sharedEvents:g,standalone:m,style:y,theme:x,width:p,labels:v,horizontal:b,disableInlineStyles:w}=s,_={parent:{style:y.parent,scale:d,domain:i,data:a,height:c,width:p,standalone:m,theme:x,origin:A,polar:h,padding:u,name:f,horizontal:b}};return a.reduce((C,k,j)=>{const B=kd(k.eventKey)?j:k.eventKey,{x:E,y:P}=E_(s,k),I={x:E,y:P,datum:k,data:a,index:j,scale:d,polar:h,origin:A,horizontal:b,size:i3e(k,s),symbol:s3e(k,s),style:w?{}:y.data,disableInlineStyles:w};C[B]={data:I};const U=op(s,k,j);return(U!=null||v&&(o||g))&&(C[B].labels=m2(s,j)),C},_)},dj={width:450,height:300,padding:50,size:3,symbol:"circle"};class Da extends G.Component{static getBaseProps(n){return l3e(n,dj)}shouldAnimate(){return!!this.props.animate}render(){const{animationWhitelist:n,role:r}=mp,s=Ls(this.props,dj,r);if(this.shouldAnimate())return this.animateComponent(s,n);const a=this.renderData(s),i=s.standalone?this.renderContainer(s.containerComponent,a):a;return Q_(i,s)}}de(Da,"animationWhitelist",["data","domain","height","maxBubbleSize","padding","samples","size","style","width"]),de(Da,"displayName","VictoryScatter"),de(Da,"role","scatter"),de(Da,"defaultTransitions",_ke()),de(Da,"defaultProps",{containerComponent:G.createElement(Sl,null),dataComponent:G.createElement(GNe,null),labelComponent:G.createElement(ya,null),groupComponent:G.createElement("g",null),samples:50,sortOrder:"ascending",standalone:!0,theme:bA.grayscale}),de(Da,"getDomain",il),de(Da,"getData",qs),de(Da,"expectedComponents",["dataComponent","labelComponent","groupComponent","containerComponent"]);const mp=ih(Da);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var P1=function(e,n){return P1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},P1(e,n)};function Xs(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");P1(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var Q1=function(){return Q1=Object.assign||function(n){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Q1.apply(this,arguments)};function sr(e,n,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(h){try{u(s.next(h))}catch(d){o(d)}}function A(h){try{u(s.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):a(h.value).then(c,A)}u((s=s.apply(e,n||[])).next())})}function Kn(e,n){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,a,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(u){return function(h){return A([u,h])}}function A(u){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=n.call(e,r)}catch(h){u=[6,h],a=0}finally{s=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function sf(e,n,r){if(r||arguments.length===2)for(var s=0,a=n.length,i;s<a;s++)(i||!(s in n))&&(i||(i=Array.prototype.slice.call(n,0,s)),i[s]=n[s]);return e.concat(i||n)}var Ai=function(){function e(n,r,s,a){this.left=n,this.top=r,this.width=s,this.height=a}return e.prototype.add=function(n,r,s,a){return new e(this.left+n,this.top+r,this.width+s,this.height+a)},e.fromClientRect=function(n,r){return new e(r.left+n.windowBounds.left,r.top+n.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(n,r){var s=Array.from(r).find(function(a){return a.width!==0});return s?new e(s.left+n.windowBounds.left,s.top+n.windowBounds.top,s.width,s.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),pp=function(e,n){return Ai.fromClientRect(e,n.getBoundingClientRect())},c3e=function(e){var n=e.body,r=e.documentElement;if(!n||!r)throw new Error("Unable to get document size");var s=Math.max(Math.max(n.scrollWidth,r.scrollWidth),Math.max(n.offsetWidth,r.offsetWidth),Math.max(n.clientWidth,r.clientWidth)),a=Math.max(Math.max(n.scrollHeight,r.scrollHeight),Math.max(n.offsetHeight,r.offsetHeight),Math.max(n.clientHeight,r.clientHeight));return new Ai(0,0,s,a)},yp=function(e){for(var n=[],r=0,s=e.length;r<s;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<s){var i=e.charCodeAt(r++);(i&64512)===56320?n.push(((a&1023)<<10)+(i&1023)+65536):(n.push(a),r--)}else n.push(a)}return n},tn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var s=[],a=-1,i="";++a<r;){var o=e[a];o<=65535?s.push(o):(o-=65536,s.push((o>>10)+55296,o%1024+56320)),(a+1===r||s.length>16384)&&(i+=String.fromCharCode.apply(String,s),s.length=0)}return i},hj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A3e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var af=0;af<hj.length;af++)A3e[hj.charCodeAt(af)]=af;var fj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var of=0;of<fj.length;of++)gu[fj.charCodeAt(of)]=of;var u3e=function(e){var n=e.length*.75,r=e.length,s,a=0,i,o,c,A;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),h=Array.isArray(u)?u:new Uint8Array(u);for(s=0;s<r;s+=4)i=gu[e.charCodeAt(s)],o=gu[e.charCodeAt(s+1)],c=gu[e.charCodeAt(s+2)],A=gu[e.charCodeAt(s+3)],h[a++]=i<<2|o>>4,h[a++]=(o&15)<<4|c>>2,h[a++]=(c&3)<<6|A&63;return u},d3e=function(e){for(var n=e.length,r=[],s=0;s<n;s+=2)r.push(e[s+1]<<8|e[s]);return r},h3e=function(e){for(var n=e.length,r=[],s=0;s<n;s+=4)r.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return r},Go=5,T2=6+5,qy=2,f3e=T2-Go,OP=65536>>Go,g3e=1<<Go,Xy=g3e-1,m3e=1024>>Go,p3e=OP+m3e,y3e=p3e,v3e=32,x3e=y3e+v3e,w3e=65536>>T2,b3e=1<<f3e,_3e=b3e-1,gj=function(e,n,r){return e.slice?e.slice(n,r):new Uint16Array(Array.prototype.slice.call(e,n,r))},C3e=function(e,n,r){return e.slice?e.slice(n,r):new Uint32Array(Array.prototype.slice.call(e,n,r))},B3e=function(e,n){var r=u3e(e),s=Array.isArray(r)?h3e(r):new Uint32Array(r),a=Array.isArray(r)?d3e(r):new Uint16Array(r),i=24,o=gj(a,i/2,s[4]/2),c=s[5]===2?gj(a,(i+s[4])/2):C3e(s,Math.ceil((i+s[4])/4));return new S3e(s[0],s[1],s[2],s[3],o,c)},S3e=function(){function e(n,r,s,a,i,o){this.initialValue=n,this.errorValue=r,this.highStart=s,this.highValueIndex=a,this.index=i,this.data=o}return e.prototype.get=function(n){var r;if(n>=0){if(n<55296||n>56319&&n<=65535)return r=this.index[n>>Go],r=(r<<qy)+(n&Xy),this.data[r];if(n<=65535)return r=this.index[OP+(n-55296>>Go)],r=(r<<qy)+(n&Xy),this.data[r];if(n<this.highStart)return r=x3e-w3e+(n>>T2),r=this.index[r],r+=n>>Go&_3e,r=this.index[r],r=(r<<qy)+(n&Xy),this.data[r];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),mj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k3e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var lf=0;lf<mj.length;lf++)k3e[mj.charCodeAt(lf)]=lf;var j3e="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",pj=50,N3e=1,LP=2,HP=3,E3e=4,T3e=5,yj=7,zP=8,vj=9,$i=10,M1=11,xj=12,D1=13,F3e=14,mu=15,R1=16,cf=17,KA=18,U3e=19,wj=20,$1=21,GA=22,Yy=23,Ol=24,Ir=25,pu=26,yu=27,Ll=28,I3e=29,Eo=30,P3e=31,Af=32,uf=33,O1=34,L1=35,H1=36,Ed=37,z1=38,e0=39,t0=40,Jy=41,KP=42,Q3e=43,M3e=[9001,65288],GP="!",ct="",df="",K1=B3e(j3e),ja=[Eo,H1],G1=[N3e,LP,HP,T3e],WP=[$i,zP],bj=[yu,pu],D3e=G1.concat(WP),_j=[z1,e0,t0,O1,L1],R3e=[mu,D1],$3e=function(e,n){n===void 0&&(n="strict");var r=[],s=[],a=[];return e.forEach(function(i,o){var c=K1.get(i);if(c>pj?(a.push(!0),c-=pj):a.push(!1),["normal","auto","loose"].indexOf(n)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return s.push(o),r.push(R1);if(c===E3e||c===M1){if(o===0)return s.push(o),r.push(Eo);var A=r[o-1];return D3e.indexOf(A)===-1?(s.push(s[o-1]),r.push(A)):(s.push(o),r.push(Eo))}if(s.push(o),c===P3e)return r.push(n==="strict"?$1:Ed);if(c===KP||c===I3e)return r.push(Eo);if(c===Q3e)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(Ed):r.push(Eo);r.push(c)}),[s,r,a]},Zy=function(e,n,r,s){var a=s[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var i=r;i<=s.length;){i++;var o=s[i];if(o===n)return!0;if(o!==$i)break}if(a===$i)for(var i=r;i>0;){i--;var c=s[i];if(Array.isArray(e)?e.indexOf(c)!==-1:e===c)for(var A=r;A<=s.length;){A++;var o=s[A];if(o===n)return!0;if(o!==$i)break}if(c!==$i)break}return!1},Cj=function(e,n){for(var r=e;r>=0;){var s=n[r];if(s===$i)r--;else return s}return 0},O3e=function(e,n,r,s,a){if(r[s]===0)return ct;var i=s-1;if(Array.isArray(a)&&a[i]===!0)return ct;var o=i-1,c=i+1,A=n[i],u=o>=0?n[o]:0,h=n[c];if(A===LP&&h===HP)return ct;if(G1.indexOf(A)!==-1)return GP;if(G1.indexOf(h)!==-1||WP.indexOf(h)!==-1)return ct;if(Cj(i,n)===zP)return df;if(K1.get(e[i])===M1||(A===Af||A===uf)&&K1.get(e[c])===M1||A===yj||h===yj||A===vj||[$i,D1,mu].indexOf(A)===-1&&h===vj||[cf,KA,U3e,Ol,Ll].indexOf(h)!==-1||Cj(i,n)===GA||Zy(Yy,GA,i,n)||Zy([cf,KA],$1,i,n)||Zy(xj,xj,i,n))return ct;if(A===$i)return df;if(A===Yy||h===Yy)return ct;if(h===R1||A===R1)return df;if([D1,mu,$1].indexOf(h)!==-1||A===F3e||u===H1&&R3e.indexOf(A)!==-1||A===Ll&&h===H1||h===wj||ja.indexOf(h)!==-1&&A===Ir||ja.indexOf(A)!==-1&&h===Ir||A===yu&&[Ed,Af,uf].indexOf(h)!==-1||[Ed,Af,uf].indexOf(A)!==-1&&h===pu||ja.indexOf(A)!==-1&&bj.indexOf(h)!==-1||bj.indexOf(A)!==-1&&ja.indexOf(h)!==-1||[yu,pu].indexOf(A)!==-1&&(h===Ir||[GA,mu].indexOf(h)!==-1&&n[c+1]===Ir)||[GA,mu].indexOf(A)!==-1&&h===Ir||A===Ir&&[Ir,Ll,Ol].indexOf(h)!==-1)return ct;if([Ir,Ll,Ol,cf,KA].indexOf(h)!==-1)for(var d=i;d>=0;){var f=n[d];if(f===Ir)return ct;if([Ll,Ol].indexOf(f)!==-1)d--;else break}if([yu,pu].indexOf(h)!==-1)for(var d=[cf,KA].indexOf(A)!==-1?o:i;d>=0;){var f=n[d];if(f===Ir)return ct;if([Ll,Ol].indexOf(f)!==-1)d--;else break}if(z1===A&&[z1,e0,O1,L1].indexOf(h)!==-1||[e0,O1].indexOf(A)!==-1&&[e0,t0].indexOf(h)!==-1||[t0,L1].indexOf(A)!==-1&&h===t0||_j.indexOf(A)!==-1&&[wj,pu].indexOf(h)!==-1||_j.indexOf(h)!==-1&&A===yu||ja.indexOf(A)!==-1&&ja.indexOf(h)!==-1||A===Ol&&ja.indexOf(h)!==-1||ja.concat(Ir).indexOf(A)!==-1&&h===GA&&M3e.indexOf(e[c])===-1||ja.concat(Ir).indexOf(h)!==-1&&A===KA)return ct;if(A===Jy&&h===Jy){for(var g=r[i],m=1;g>0&&(g--,n[g]===Jy);)m++;if(m%2!==0)return ct}return A===Af&&h===uf?ct:df},L3e=function(e,n){n||(n={lineBreak:"normal",wordBreak:"normal"});var r=$3e(e,n.lineBreak),s=r[0],a=r[1],i=r[2];(n.wordBreak==="break-all"||n.wordBreak==="break-word")&&(a=a.map(function(c){return[Ir,Eo,KP].indexOf(c)!==-1?Ed:c}));var o=n.wordBreak==="keep-all"?i.map(function(c,A){return c&&e[A]>=19968&&e[A]<=40959}):void 0;return[s,a,o]},H3e=function(){function e(n,r,s,a){this.codePoints=n,this.required=r===GP,this.start=s,this.end=a}return e.prototype.slice=function(){return tn.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),z3e=function(e,n){var r=yp(e),s=L3e(r,n),a=s[0],i=s[1],o=s[2],c=r.length,A=0,u=0;return{next:function(){if(u>=c)return{done:!0,value:null};for(var h=ct;u<c&&(h=O3e(r,i,a,++u,o))===ct;);if(h!==ct||u===c){var d=new H3e(r,h,A,u);return A=u,{value:d,done:!1}}return{done:!0,value:null}}}},K3e=1,G3e=2,mh=4,Bj=8,Tg=10,Sj=47,Mu=92,W3e=9,V3e=32,hf=34,WA=61,q3e=35,X3e=36,Y3e=37,ff=39,gf=40,VA=41,J3e=95,wr=45,Z3e=33,e6e=60,t6e=62,n6e=64,r6e=91,s6e=93,a6e=61,i6e=123,mf=63,o6e=125,kj=124,l6e=126,c6e=128,jj=65533,ev=42,$o=43,A6e=44,u6e=58,d6e=59,Td=46,h6e=0,f6e=8,g6e=11,m6e=14,p6e=31,y6e=127,ta=-1,VP=48,qP=97,XP=101,v6e=102,x6e=117,w6e=122,YP=65,JP=69,ZP=70,b6e=85,_6e=90,Wn=function(e){return e>=VP&&e<=57},C6e=function(e){return e>=55296&&e<=57343},Hl=function(e){return Wn(e)||e>=YP&&e<=ZP||e>=qP&&e<=v6e},B6e=function(e){return e>=qP&&e<=w6e},S6e=function(e){return e>=YP&&e<=_6e},k6e=function(e){return B6e(e)||S6e(e)},j6e=function(e){return e>=c6e},pf=function(e){return e===Tg||e===W3e||e===V3e},Fg=function(e){return k6e(e)||j6e(e)||e===J3e},Nj=function(e){return Fg(e)||Wn(e)||e===wr},N6e=function(e){return e>=h6e&&e<=f6e||e===g6e||e>=m6e&&e<=p6e||e===y6e},Ni=function(e,n){return e!==Mu?!1:n!==Tg},yf=function(e,n,r){return e===wr?Fg(n)||Ni(n,r):Fg(e)?!0:!!(e===Mu&&Ni(e,n))},tv=function(e,n,r){return e===$o||e===wr?Wn(n)?!0:n===Td&&Wn(r):Wn(e===Td?n:e)},E6e=function(e){var n=0,r=1;(e[n]===$o||e[n]===wr)&&(e[n]===wr&&(r=-1),n++);for(var s=[];Wn(e[n]);)s.push(e[n++]);var a=s.length?parseInt(tn.apply(void 0,s),10):0;e[n]===Td&&n++;for(var i=[];Wn(e[n]);)i.push(e[n++]);var o=i.length,c=o?parseInt(tn.apply(void 0,i),10):0;(e[n]===JP||e[n]===XP)&&n++;var A=1;(e[n]===$o||e[n]===wr)&&(e[n]===wr&&(A=-1),n++);for(var u=[];Wn(e[n]);)u.push(e[n++]);var h=u.length?parseInt(tn.apply(void 0,u),10):0;return r*(a+c*Math.pow(10,-o))*Math.pow(10,A*h)},T6e={type:2},F6e={type:3},U6e={type:4},I6e={type:13},P6e={type:8},Q6e={type:21},M6e={type:9},D6e={type:10},R6e={type:11},$6e={type:12},O6e={type:14},vf={type:23},L6e={type:1},H6e={type:25},z6e={type:24},K6e={type:26},G6e={type:27},W6e={type:28},V6e={type:29},q6e={type:31},W1={type:32},eQ=function(){function e(){this._value=[]}return e.prototype.write=function(n){this._value=this._value.concat(yp(n))},e.prototype.read=function(){for(var n=[],r=this.consumeToken();r!==W1;)n.push(r),r=this.consumeToken();return n},e.prototype.consumeToken=function(){var n=this.consumeCodePoint();switch(n){case hf:return this.consumeStringToken(hf);case q3e:var r=this.peekCodePoint(0),s=this.peekCodePoint(1),a=this.peekCodePoint(2);if(Nj(r)||Ni(s,a)){var i=yf(r,s,a)?G3e:K3e,o=this.consumeName();return{type:5,value:o,flags:i}}break;case X3e:if(this.peekCodePoint(0)===WA)return this.consumeCodePoint(),I6e;break;case ff:return this.consumeStringToken(ff);case gf:return T6e;case VA:return F6e;case ev:if(this.peekCodePoint(0)===WA)return this.consumeCodePoint(),O6e;break;case $o:if(tv(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case A6e:return U6e;case wr:var c=n,A=this.peekCodePoint(0),u=this.peekCodePoint(1);if(tv(c,A,u))return this.reconsumeCodePoint(n),this.consumeNumericToken();if(yf(c,A,u))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();if(A===wr&&u===t6e)return this.consumeCodePoint(),this.consumeCodePoint(),z6e;break;case Td:if(tv(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case Sj:if(this.peekCodePoint(0)===ev)for(this.consumeCodePoint();;){var h=this.consumeCodePoint();if(h===ev&&(h=this.consumeCodePoint(),h===Sj))return this.consumeToken();if(h===ta)return this.consumeToken()}break;case u6e:return K6e;case d6e:return G6e;case e6e:if(this.peekCodePoint(0)===Z3e&&this.peekCodePoint(1)===wr&&this.peekCodePoint(2)===wr)return this.consumeCodePoint(),this.consumeCodePoint(),H6e;break;case n6e:var d=this.peekCodePoint(0),f=this.peekCodePoint(1),g=this.peekCodePoint(2);if(yf(d,f,g)){var o=this.consumeName();return{type:7,value:o}}break;case r6e:return W6e;case Mu:if(Ni(n,this.peekCodePoint(0)))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();break;case s6e:return V6e;case a6e:if(this.peekCodePoint(0)===WA)return this.consumeCodePoint(),P6e;break;case i6e:return R6e;case o6e:return $6e;case x6e:case b6e:var m=this.peekCodePoint(0),y=this.peekCodePoint(1);return m===$o&&(Hl(y)||y===mf)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(n),this.consumeIdentLikeToken();case kj:if(this.peekCodePoint(0)===WA)return this.consumeCodePoint(),M6e;if(this.peekCodePoint(0)===kj)return this.consumeCodePoint(),Q6e;break;case l6e:if(this.peekCodePoint(0)===WA)return this.consumeCodePoint(),D6e;break;case ta:return W1}return pf(n)?(this.consumeWhiteSpace(),q6e):Wn(n)?(this.reconsumeCodePoint(n),this.consumeNumericToken()):Fg(n)?(this.reconsumeCodePoint(n),this.consumeIdentLikeToken()):{type:6,value:tn(n)}},e.prototype.consumeCodePoint=function(){var n=this._value.shift();return typeof n>"u"?-1:n},e.prototype.reconsumeCodePoint=function(n){this._value.unshift(n)},e.prototype.peekCodePoint=function(n){return n>=this._value.length?-1:this._value[n]},e.prototype.consumeUnicodeRangeToken=function(){for(var n=[],r=this.consumeCodePoint();Hl(r)&&n.length<6;)n.push(r),r=this.consumeCodePoint();for(var s=!1;r===mf&&n.length<6;)n.push(r),r=this.consumeCodePoint(),s=!0;if(s){var a=parseInt(tn.apply(void 0,n.map(function(A){return A===mf?VP:A})),16),i=parseInt(tn.apply(void 0,n.map(function(A){return A===mf?ZP:A})),16);return{type:30,start:a,end:i}}var o=parseInt(tn.apply(void 0,n),16);if(this.peekCodePoint(0)===wr&&Hl(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var c=[];Hl(r)&&c.length<6;)c.push(r),r=this.consumeCodePoint();var i=parseInt(tn.apply(void 0,c),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},e.prototype.consumeIdentLikeToken=function(){var n=this.consumeName();return n.toLowerCase()==="url"&&this.peekCodePoint(0)===gf?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===gf?(this.consumeCodePoint(),{type:19,value:n}):{type:20,value:n}},e.prototype.consumeUrlToken=function(){var n=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ta)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===ff||r===hf){var s=this.consumeStringToken(this.consumeCodePoint());return s.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ta||this.peekCodePoint(0)===VA)?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),vf)}for(;;){var a=this.consumeCodePoint();if(a===ta||a===VA)return{type:22,value:tn.apply(void 0,n)};if(pf(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ta||this.peekCodePoint(0)===VA?(this.consumeCodePoint(),{type:22,value:tn.apply(void 0,n)}):(this.consumeBadUrlRemnants(),vf);if(a===hf||a===ff||a===gf||N6e(a))return this.consumeBadUrlRemnants(),vf;if(a===Mu)if(Ni(a,this.peekCodePoint(0)))n.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),vf;else n.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;pf(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var n=this.consumeCodePoint();if(n===VA||n===ta)return;Ni(n,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(n){for(var r=5e4,s="";n>0;){var a=Math.min(r,n);s+=tn.apply(void 0,this._value.splice(0,a)),n-=a}return this._value.shift(),s},e.prototype.consumeStringToken=function(n){var r="",s=0;do{var a=this._value[s];if(a===ta||a===void 0||a===n)return r+=this.consumeStringSlice(s),{type:0,value:r};if(a===Tg)return this._value.splice(0,s),L6e;if(a===Mu){var i=this._value[s+1];i!==ta&&i!==void 0&&(i===Tg?(r+=this.consumeStringSlice(s),s=-1,this._value.shift()):Ni(a,i)&&(r+=this.consumeStringSlice(s),r+=tn(this.consumeEscapedCodePoint()),s=-1))}s++}while(!0)},e.prototype.consumeNumber=function(){var n=[],r=mh,s=this.peekCodePoint(0);for((s===$o||s===wr)&&n.push(this.consumeCodePoint());Wn(this.peekCodePoint(0));)n.push(this.consumeCodePoint());s=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(s===Td&&Wn(a))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Bj;Wn(this.peekCodePoint(0));)n.push(this.consumeCodePoint());s=this.peekCodePoint(0),a=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((s===JP||s===XP)&&((a===$o||a===wr)&&Wn(i)||Wn(a)))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Bj;Wn(this.peekCodePoint(0));)n.push(this.consumeCodePoint());return[E6e(n),r]},e.prototype.consumeNumericToken=function(){var n=this.consumeNumber(),r=n[0],s=n[1],a=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(yf(a,i,o)){var c=this.consumeName();return{type:15,number:r,flags:s,unit:c}}return a===Y3e?(this.consumeCodePoint(),{type:16,number:r,flags:s}):{type:17,number:r,flags:s}},e.prototype.consumeEscapedCodePoint=function(){var n=this.consumeCodePoint();if(Hl(n)){for(var r=tn(n);Hl(this.peekCodePoint(0))&&r.length<6;)r+=tn(this.consumeCodePoint());pf(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(r,16);return s===0||C6e(s)||s>1114111?jj:s}return n===ta?jj:n},e.prototype.consumeName=function(){for(var n="";;){var r=this.consumeCodePoint();if(Nj(r))n+=tn(r);else if(Ni(r,this.peekCodePoint(0)))n+=tn(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),n}},e}(),tQ=function(){function e(n){this._tokens=n}return e.create=function(n){var r=new eQ;return r.write(n),new e(r.read())},e.parseValue=function(n){return e.create(n).parseComponentValue()},e.parseValues=function(n){return e.create(n).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var n=this.consumeToken();n.type===31;)n=this.consumeToken();if(n.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(n);var r=this.consumeComponentValue();do n=this.consumeToken();while(n.type===31);if(n.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var n=[];;){var r=this.consumeComponentValue();if(r.type===32)return n;n.push(r),n.push()}},e.prototype.consumeComponentValue=function(){var n=this.consumeToken();switch(n.type){case 11:case 28:case 2:return this.consumeSimpleBlock(n.type);case 19:return this.consumeFunction(n)}return n},e.prototype.consumeSimpleBlock=function(n){for(var r={type:n,values:[]},s=this.consumeToken();;){if(s.type===32||Y6e(s,n))return r;this.reconsumeToken(s),r.values.push(this.consumeComponentValue()),s=this.consumeToken()}},e.prototype.consumeFunction=function(n){for(var r={name:n.value,values:[],type:18};;){var s=this.consumeToken();if(s.type===32||s.type===3)return r;this.reconsumeToken(s),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var n=this._tokens.shift();return typeof n>"u"?W1:n},e.prototype.reconsumeToken=function(n){this._tokens.unshift(n)},e}(),ph=function(e){return e.type===15},_A=function(e){return e.type===17},wt=function(e){return e.type===20},X6e=function(e){return e.type===0},V1=function(e,n){return wt(e)&&e.value===n},nQ=function(e){return e.type!==31},sA=function(e){return e.type!==31&&e.type!==4},_a=function(e){var n=[],r=[];return e.forEach(function(s){if(s.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");n.push(r),r=[];return}s.type!==31&&r.push(s)}),r.length&&n.push(r),n},Y6e=function(e,n){return n===11&&e.type===12||n===28&&e.type===29?!0:n===2&&e.type===3},oo=function(e){return e.type===17||e.type===15},an=function(e){return e.type===16||oo(e)},rQ=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Qn={type:17,number:0,flags:mh},F2={type:16,number:50,flags:mh},Oi={type:16,number:100,flags:mh},vu=function(e,n,r){var s=e[0],a=e[1];return[Nt(s,n),Nt(typeof a<"u"?a:s,r)]},Nt=function(e,n){if(e.type===16)return e.number/100*n;if(ph(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},sQ="deg",aQ="grad",iQ="rad",oQ="turn",vp={name:"angle",parse:function(e,n){if(n.type===15)switch(n.unit){case sQ:return Math.PI*n.number/180;case aQ:return Math.PI/200*n.number;case iQ:return n.number;case oQ:return Math.PI*2*n.number}throw new Error("Unsupported angle type")}},lQ=function(e){return e.type===15&&(e.unit===sQ||e.unit===aQ||e.unit===iQ||e.unit===oQ)},cQ=function(e){var n=e.filter(wt).map(function(r){return r.value}).join(" ");switch(n){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Qn,Qn];case"to top":case"bottom":return As(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Qn,Oi];case"to right":case"left":return As(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Oi,Oi];case"to bottom":case"top":return As(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Oi,Qn];case"to left":case"right":return As(270)}return 0},As=function(e){return Math.PI*e/180},Zi={name:"color",parse:function(e,n){if(n.type===18){var r=J6e[n.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+n.name+'"');return r(e,n.values)}if(n.type===5){if(n.value.length===3){var s=n.value.substring(0,1),a=n.value.substring(1,2),i=n.value.substring(2,3);return Li(parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16),1)}if(n.value.length===4){var s=n.value.substring(0,1),a=n.value.substring(1,2),i=n.value.substring(2,3),o=n.value.substring(3,4);return Li(parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(n.value.length===6){var s=n.value.substring(0,2),a=n.value.substring(2,4),i=n.value.substring(4,6);return Li(parseInt(s,16),parseInt(a,16),parseInt(i,16),1)}if(n.value.length===8){var s=n.value.substring(0,2),a=n.value.substring(2,4),i=n.value.substring(4,6),o=n.value.substring(6,8);return Li(parseInt(s,16),parseInt(a,16),parseInt(i,16),parseInt(o,16)/255)}}if(n.type===20){var c=Za[n.value.toUpperCase()];if(typeof c<"u")return c}return Za.TRANSPARENT}},eo=function(e){return(255&e)===0},xn=function(e){var n=255&e,r=255&e>>8,s=255&e>>16,a=255&e>>24;return n<255?"rgba("+a+","+s+","+r+","+n/255+")":"rgb("+a+","+s+","+r+")"},Li=function(e,n,r,s){return(e<<24|n<<16|r<<8|Math.round(s*255)<<0)>>>0},Ej=function(e,n){if(e.type===17)return e.number;if(e.type===16){var r=n===3?1:255;return n===3?e.number/100*r:Math.round(e.number/100*r)}return 0},Tj=function(e,n){var r=n.filter(sA);if(r.length===3){var s=r.map(Ej),a=s[0],i=s[1],o=s[2];return Li(a,i,o,1)}if(r.length===4){var c=r.map(Ej),a=c[0],i=c[1],o=c[2],A=c[3];return Li(a,i,o,A)}return 0};function nv(e,n,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(n-e)*r*6+e:r<1/2?n:r<2/3?(n-e)*6*(2/3-r)+e:e}var Fj=function(e,n){var r=n.filter(sA),s=r[0],a=r[1],i=r[2],o=r[3],c=(s.type===17?As(s.number):vp.parse(e,s))/(Math.PI*2),A=an(a)?a.number/100:0,u=an(i)?i.number/100:0,h=typeof o<"u"&&an(o)?Nt(o,1):1;if(A===0)return Li(u*255,u*255,u*255,1);var d=u<=.5?u*(A+1):u+A-u*A,f=u*2-d,g=nv(f,d,c+1/3),m=nv(f,d,c),y=nv(f,d,c-1/3);return Li(g*255,m*255,y*255,h)},J6e={hsl:Fj,hsla:Fj,rgb:Tj,rgba:Tj},Du=function(e,n){return Zi.parse(e,tQ.create(n).parseComponentValue())},Za={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Z6e={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(r){if(wt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},eTe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xp=function(e,n){var r=Zi.parse(e,n[0]),s=n[1];return s&&an(s)?{color:r,stop:s}:{color:r,stop:null}},Uj=function(e,n){var r=e[0],s=e[e.length-1];r.stop===null&&(r.stop=Qn),s.stop===null&&(s.stop=Oi);for(var a=[],i=0,o=0;o<e.length;o++){var c=e[o].stop;if(c!==null){var A=Nt(c,n);A>i?a.push(A):a.push(i),i=A}else a.push(null)}for(var u=null,o=0;o<a.length;o++){var h=a[o];if(h===null)u===null&&(u=o);else if(u!==null){for(var d=o-u,f=a[u-1],g=(h-f)/(d+1),m=1;m<=d;m++)a[u+m-1]=g*m;u=null}}return e.map(function(y,x){var p=y.color;return{color:p,stop:Math.max(Math.min(1,a[x]/n),0)}})},tTe=function(e,n,r){var s=n/2,a=r/2,i=Nt(e[0],n)-s,o=a-Nt(e[1],r);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},nTe=function(e,n,r){var s=typeof e=="number"?e:tTe(e,n,r),a=Math.abs(n*Math.sin(s))+Math.abs(r*Math.cos(s)),i=n/2,o=r/2,c=a/2,A=Math.sin(s-Math.PI/2)*c,u=Math.cos(s-Math.PI/2)*c;return[a,i-u,i+u,o-A,o+A]},ks=function(e,n){return Math.sqrt(e*e+n*n)},Ij=function(e,n,r,s,a){var i=[[0,0],[0,n],[e,0],[e,n]];return i.reduce(function(o,c){var A=c[0],u=c[1],h=ks(r-A,s-u);return(a?h<o.optimumDistance:h>o.optimumDistance)?{optimumCorner:c,optimumDistance:h}:o},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},rTe=function(e,n,r,s,a){var i=0,o=0;switch(e.size){case 0:e.shape===0?i=o=Math.min(Math.abs(n),Math.abs(n-s),Math.abs(r),Math.abs(r-a)):e.shape===1&&(i=Math.min(Math.abs(n),Math.abs(n-s)),o=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)i=o=Math.min(ks(n,r),ks(n,r-a),ks(n-s,r),ks(n-s,r-a));else if(e.shape===1){var c=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(n),Math.abs(n-s)),A=Ij(s,a,n,r,!0),u=A[0],h=A[1];i=ks(u-n,(h-r)/c),o=c*i}break;case 1:e.shape===0?i=o=Math.max(Math.abs(n),Math.abs(n-s),Math.abs(r),Math.abs(r-a)):e.shape===1&&(i=Math.max(Math.abs(n),Math.abs(n-s)),o=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)i=o=Math.max(ks(n,r),ks(n,r-a),ks(n-s,r),ks(n-s,r-a));else if(e.shape===1){var c=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(n),Math.abs(n-s)),d=Ij(s,a,n,r,!1),u=d[0],h=d[1];i=ks(u-n,(h-r)/c),o=c*i}break}return Array.isArray(e.size)&&(i=Nt(e.size[0],s),o=e.size.length===2?Nt(e.size[1],a):i),[i,o]},sTe=function(e,n){var r=As(180),s=[];return _a(n).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&o.value==="to"){r=cQ(a);return}else if(lQ(o)){r=vp.parse(e,o);return}}var c=xp(e,a);s.push(c)}),{angle:r,stops:s,type:1}},xf=function(e,n){var r=As(180),s=[];return _a(n).forEach(function(a,i){if(i===0){var o=a[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=cQ(a);return}else if(lQ(o)){r=(vp.parse(e,o)+As(270))%As(360);return}}var c=xp(e,a);s.push(c)}),{angle:r,stops:s,type:1}},aTe=function(e,n){var r=As(180),s=[],a=1,i=0,o=3,c=[];return _a(n).forEach(function(A,u){var h=A[0];if(u===0){if(wt(h)&&h.value==="linear"){a=1;return}else if(wt(h)&&h.value==="radial"){a=2;return}}if(h.type===18){if(h.name==="from"){var d=Zi.parse(e,h.values[0]);s.push({stop:Qn,color:d})}else if(h.name==="to"){var d=Zi.parse(e,h.values[0]);s.push({stop:Oi,color:d})}else if(h.name==="color-stop"){var f=h.values.filter(sA);if(f.length===2){var d=Zi.parse(e,f[1]),g=f[0];_A(g)&&s.push({stop:{type:16,number:g.number*100,flags:g.flags},color:d})}}}}),a===1?{angle:(r+As(180))%As(360),stops:s,type:a}:{size:o,shape:i,stops:s,position:c,type:a}},AQ="closest-side",uQ="farthest-side",dQ="closest-corner",hQ="farthest-corner",fQ="circle",gQ="ellipse",mQ="cover",pQ="contain",iTe=function(e,n){var r=0,s=3,a=[],i=[];return _a(n).forEach(function(o,c){var A=!0;if(c===0){var u=!1;A=o.reduce(function(d,f){if(u)if(wt(f))switch(f.value){case"center":return i.push(F2),d;case"top":case"left":return i.push(Qn),d;case"right":case"bottom":return i.push(Oi),d}else(an(f)||oo(f))&&i.push(f);else if(wt(f))switch(f.value){case fQ:return r=0,!1;case gQ:return r=1,!1;case"at":return u=!0,!1;case AQ:return s=0,!1;case mQ:case uQ:return s=1,!1;case pQ:case dQ:return s=2,!1;case hQ:return s=3,!1}else if(oo(f)||an(f))return Array.isArray(s)||(s=[]),s.push(f),!1;return d},A)}if(A){var h=xp(e,o);a.push(h)}}),{size:s,shape:r,stops:a,position:i,type:2}},wf=function(e,n){var r=0,s=3,a=[],i=[];return _a(n).forEach(function(o,c){var A=!0;if(c===0?A=o.reduce(function(h,d){if(wt(d))switch(d.value){case"center":return i.push(F2),!1;case"top":case"left":return i.push(Qn),!1;case"right":case"bottom":return i.push(Oi),!1}else if(an(d)||oo(d))return i.push(d),!1;return h},A):c===1&&(A=o.reduce(function(h,d){if(wt(d))switch(d.value){case fQ:return r=0,!1;case gQ:return r=1,!1;case pQ:case AQ:return s=0,!1;case uQ:return s=1,!1;case dQ:return s=2,!1;case mQ:case hQ:return s=3,!1}else if(oo(d)||an(d))return Array.isArray(s)||(s=[]),s.push(d),!1;return h},A)),A){var u=xp(e,o);a.push(u)}}),{size:s,shape:r,stops:a,position:i,type:2}},oTe=function(e){return e.type===1},lTe=function(e){return e.type===2},U2={name:"image",parse:function(e,n){if(n.type===22){var r={url:n.value,type:0};return e.cache.addImage(n.value),r}if(n.type===18){var s=yQ[n.name];if(typeof s>"u")throw new Error('Attempting to parse an unsupported image function "'+n.name+'"');return s(e,n.values)}throw new Error("Unsupported image type "+n.type)}};function cTe(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!yQ[e.name])}var yQ={"linear-gradient":sTe,"-moz-linear-gradient":xf,"-ms-linear-gradient":xf,"-o-linear-gradient":xf,"-webkit-linear-gradient":xf,"radial-gradient":iTe,"-moz-radial-gradient":wf,"-ms-radial-gradient":wf,"-o-radial-gradient":wf,"-webkit-radial-gradient":wf,"-webkit-gradient":aTe},ATe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var r=n[0];return r.type===20&&r.value==="none"?[]:n.filter(function(s){return sA(s)&&cTe(s)}).map(function(s){return U2.parse(e,s)})}},uTe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(r){if(wt(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},dTe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,n){return _a(n).map(function(r){return r.filter(an)}).map(rQ)}},hTe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,n){return _a(n).map(function(r){return r.filter(wt).map(function(s){return s.value}).join(" ")}).map(fTe)}},fTe=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ic;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Ic||(Ic={}));var gTe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,n){return _a(n).map(function(r){return r.filter(mTe)})}},mTe=function(e){return wt(e)||an(e)},wp=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},pTe=wp("top"),yTe=wp("right"),vTe=wp("bottom"),xTe=wp("left"),bp=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(n,r){return rQ(r.filter(an))}}},wTe=bp("top-left"),bTe=bp("top-right"),_Te=bp("bottom-right"),CTe=bp("bottom-left"),_p=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(n,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},BTe=_p("top"),STe=_p("right"),kTe=_p("bottom"),jTe=_p("left"),Cp=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(n,r){return ph(r)?r.number:0}}},NTe=Cp("top"),ETe=Cp("right"),TTe=Cp("bottom"),FTe=Cp("left"),UTe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ITe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,n){switch(n){case"rtl":return 1;case"ltr":default:return 0}}},PTe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,n){return n.filter(wt).reduce(function(r,s){return r|QTe(s.value)},0)}},QTe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},MTe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},DTe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,n){return n.type===20&&n.value==="normal"?0:n.type===17||n.type===15?n.number:0}},Ug;(function(e){e.NORMAL="normal",e.STRICT="strict"})(Ug||(Ug={}));var RTe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"strict":return Ug.STRICT;case"normal":default:return Ug.NORMAL}}},$Te={name:"line-height",initialValue:"normal",prefix:!1,type:4},Pj=function(e,n){return wt(e)&&e.value==="normal"?1.2*n:e.type===17?n*e.number:an(e)?Nt(e,n):n},OTe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,n){return n.type===20&&n.value==="none"?null:U2.parse(e,n)}},LTe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,n){switch(n){case"inside":return 0;case"outside":default:return 1}}},q1={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Bp=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},HTe=Bp("top"),zTe=Bp("right"),KTe=Bp("bottom"),GTe=Bp("left"),WTe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,n){return n.filter(wt).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},VTe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-word":return"break-word";case"normal":default:return"normal"}}},Sp=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},qTe=Sp("top"),XTe=Sp("right"),YTe=Sp("bottom"),JTe=Sp("left"),ZTe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,n){switch(n){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},eFe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,n){switch(n){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},tFe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&V1(n[0],"none")?[]:_a(n).map(function(r){for(var s={color:Za.TRANSPARENT,offsetX:Qn,offsetY:Qn,blur:Qn},a=0,i=0;i<r.length;i++){var o=r[i];oo(o)?(a===0?s.offsetX=o:a===1?s.offsetY=o:s.blur=o,a++):s.color=Zi.parse(e,o)}return s})}},nFe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},rFe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,n){if(n.type===20&&n.value==="none")return null;if(n.type===18){var r=iFe[n.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+n.name+'"');return r(n.values)}return null}},sFe=function(e){var n=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return n.length===6?n:null},aFe=function(e){var n=e.filter(function(A){return A.type===17}).map(function(A){return A.number}),r=n[0],s=n[1];n[2],n[3];var a=n[4],i=n[5];n[6],n[7],n[8],n[9],n[10],n[11];var o=n[12],c=n[13];return n[14],n[15],n.length===16?[r,s,a,i,o,c]:null},iFe={matrix:sFe,matrix3d:aFe},Qj={type:16,number:50,flags:mh},oFe=[Qj,Qj],lFe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,n){var r=n.filter(an);return r.length!==2?oFe:[r[0],r[1]]}},cFe={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Ru;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Ru||(Ru={}));var AFe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-all":return Ru.BREAK_ALL;case"keep-all":return Ru.KEEP_ALL;case"normal":default:return Ru.NORMAL}}},uFe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,n){if(n.type===20)return{auto:!0,order:0};if(_A(n))return{auto:!1,order:n.number};throw new Error("Invalid z-index number parsed")}},vQ={name:"time",parse:function(e,n){if(n.type===15)switch(n.unit.toLowerCase()){case"s":return 1e3*n.number;case"ms":return n.number}throw new Error("Unsupported time type")}},dFe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,n){return _A(n)?n.number:1}},hFe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},fFe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,n){return n.filter(wt).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},gFe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,n){var r=[],s=[];return n.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:s.push(r.join(" ")),r.length=0;break}}),r.length&&s.push(r.join(" ")),s.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},mFe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},pFe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,n){if(_A(n))return n.number;if(wt(n))switch(n.value){case"bold":return 700;case"normal":default:return 400}return 400}},yFe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.filter(wt).map(function(r){return r.value})}},vFe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},gn=function(e,n){return(e&n)!==0},xFe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var r=n[0];return r.type===20&&r.value==="none"?[]:n}},wFe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var r=n[0];if(r.type===20&&r.value==="none")return null;for(var s=[],a=n.filter(nQ),i=0;i<a.length;i++){var o=a[i],c=a[i+1];if(o.type===20){var A=c&&_A(c)?c.number:1;s.push({counter:o.value,increment:A})}}return s}},bFe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return[];for(var r=[],s=n.filter(nQ),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(wt(i)&&i.value!=="none"){var c=o&&_A(o)?o.number:0;r.push({counter:i.value,reset:c})}}return r}},_Fe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,n){return n.filter(ph).map(function(r){return vQ.parse(e,r)})}},CFe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var r=n[0];if(r.type===20&&r.value==="none")return null;var s=[],a=n.filter(X6e);if(a.length%2!==0)return null;for(var i=0;i<a.length;i+=2){var o=a[i].value,c=a[i+1].value;s.push({open:o,close:c})}return s}},Mj=function(e,n,r){if(!e)return"";var s=e[Math.min(n,e.length-1)];return s?r?s.open:s.close:""},BFe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&V1(n[0],"none")?[]:_a(n).map(function(r){for(var s={color:255,offsetX:Qn,offsetY:Qn,blur:Qn,spread:Qn,inset:!1},a=0,i=0;i<r.length;i++){var o=r[i];V1(o,"inset")?s.inset=!0:oo(o)?(a===0?s.offsetX=o:a===1?s.offsetY=o:a===2?s.blur=o:s.spread=o,a++):s.color=Zi.parse(e,o)}return s})}},SFe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,n){var r=[0,1,2],s=[];return n.filter(wt).forEach(function(a){switch(a.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2);break}}),r.forEach(function(a){s.indexOf(a)===-1&&s.push(a)}),s}},kFe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},jFe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return ph(n)?n.number:0}},NFe=function(){function e(n,r){var s,a;this.animationDuration=Te(n,_Fe,r.animationDuration),this.backgroundClip=Te(n,Z6e,r.backgroundClip),this.backgroundColor=Te(n,eTe,r.backgroundColor),this.backgroundImage=Te(n,ATe,r.backgroundImage),this.backgroundOrigin=Te(n,uTe,r.backgroundOrigin),this.backgroundPosition=Te(n,dTe,r.backgroundPosition),this.backgroundRepeat=Te(n,hTe,r.backgroundRepeat),this.backgroundSize=Te(n,gTe,r.backgroundSize),this.borderTopColor=Te(n,pTe,r.borderTopColor),this.borderRightColor=Te(n,yTe,r.borderRightColor),this.borderBottomColor=Te(n,vTe,r.borderBottomColor),this.borderLeftColor=Te(n,xTe,r.borderLeftColor),this.borderTopLeftRadius=Te(n,wTe,r.borderTopLeftRadius),this.borderTopRightRadius=Te(n,bTe,r.borderTopRightRadius),this.borderBottomRightRadius=Te(n,_Te,r.borderBottomRightRadius),this.borderBottomLeftRadius=Te(n,CTe,r.borderBottomLeftRadius),this.borderTopStyle=Te(n,BTe,r.borderTopStyle),this.borderRightStyle=Te(n,STe,r.borderRightStyle),this.borderBottomStyle=Te(n,kTe,r.borderBottomStyle),this.borderLeftStyle=Te(n,jTe,r.borderLeftStyle),this.borderTopWidth=Te(n,NTe,r.borderTopWidth),this.borderRightWidth=Te(n,ETe,r.borderRightWidth),this.borderBottomWidth=Te(n,TTe,r.borderBottomWidth),this.borderLeftWidth=Te(n,FTe,r.borderLeftWidth),this.boxShadow=Te(n,BFe,r.boxShadow),this.color=Te(n,UTe,r.color),this.direction=Te(n,ITe,r.direction),this.display=Te(n,PTe,r.display),this.float=Te(n,MTe,r.cssFloat),this.fontFamily=Te(n,gFe,r.fontFamily),this.fontSize=Te(n,mFe,r.fontSize),this.fontStyle=Te(n,vFe,r.fontStyle),this.fontVariant=Te(n,yFe,r.fontVariant),this.fontWeight=Te(n,pFe,r.fontWeight),this.letterSpacing=Te(n,DTe,r.letterSpacing),this.lineBreak=Te(n,RTe,r.lineBreak),this.lineHeight=Te(n,$Te,r.lineHeight),this.listStyleImage=Te(n,OTe,r.listStyleImage),this.listStylePosition=Te(n,LTe,r.listStylePosition),this.listStyleType=Te(n,q1,r.listStyleType),this.marginTop=Te(n,HTe,r.marginTop),this.marginRight=Te(n,zTe,r.marginRight),this.marginBottom=Te(n,KTe,r.marginBottom),this.marginLeft=Te(n,GTe,r.marginLeft),this.opacity=Te(n,dFe,r.opacity);var i=Te(n,WTe,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Te(n,VTe,r.overflowWrap),this.paddingTop=Te(n,qTe,r.paddingTop),this.paddingRight=Te(n,XTe,r.paddingRight),this.paddingBottom=Te(n,YTe,r.paddingBottom),this.paddingLeft=Te(n,JTe,r.paddingLeft),this.paintOrder=Te(n,SFe,r.paintOrder),this.position=Te(n,eFe,r.position),this.textAlign=Te(n,ZTe,r.textAlign),this.textDecorationColor=Te(n,hFe,(s=r.textDecorationColor)!==null&&s!==void 0?s:r.color),this.textDecorationLine=Te(n,fFe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Te(n,tFe,r.textShadow),this.textTransform=Te(n,nFe,r.textTransform),this.transform=Te(n,rFe,r.transform),this.transformOrigin=Te(n,lFe,r.transformOrigin),this.visibility=Te(n,cFe,r.visibility),this.webkitTextStrokeColor=Te(n,kFe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Te(n,jFe,r.webkitTextStrokeWidth),this.wordBreak=Te(n,AFe,r.wordBreak),this.zIndex=Te(n,uFe,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return eo(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return gn(this.display,4)||gn(this.display,33554432)||gn(this.display,268435456)||gn(this.display,536870912)||gn(this.display,67108864)||gn(this.display,134217728)},e}(),EFe=function(){function e(n,r){this.content=Te(n,xFe,r.content),this.quotes=Te(n,CFe,r.quotes)}return e}(),Dj=function(){function e(n,r){this.counterIncrement=Te(n,wFe,r.counterIncrement),this.counterReset=Te(n,bFe,r.counterReset)}return e}(),Te=function(e,n,r){var s=new eQ,a=r!==null&&typeof r<"u"?r.toString():n.initialValue;s.write(a);var i=new tQ(s.read());switch(n.type){case 2:var o=i.parseComponentValue();return n.parse(e,wt(o)?o.value:n.initialValue);case 0:return n.parse(e,i.parseComponentValue());case 1:return n.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(n.format){case"angle":return vp.parse(e,i.parseComponentValue());case"color":return Zi.parse(e,i.parseComponentValue());case"image":return U2.parse(e,i.parseComponentValue());case"length":var c=i.parseComponentValue();return oo(c)?c:Qn;case"length-percentage":var A=i.parseComponentValue();return an(A)?A:Qn;case"time":return vQ.parse(e,i.parseComponentValue())}break}},TFe="data-html2canvas-debug",FFe=function(e){var n=e.getAttribute(TFe);switch(n){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},X1=function(e,n){var r=FFe(e);return r===1||n===r},Ca=function(){function e(n,r){if(this.context=n,this.textNodes=[],this.elements=[],this.flags=0,X1(r,3))debugger;this.styles=new NFe(n,window.getComputedStyle(r,null)),Z1(r)&&(this.styles.animationDuration.some(function(s){return s>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=pp(this.context,r),X1(r,4)&&(this.flags|=16)}return e}(),UFe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Rj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bf=0;bf<Rj.length;bf++)xu[Rj.charCodeAt(bf)]=bf;var IFe=function(e){var n=e.length*.75,r=e.length,s,a=0,i,o,c,A;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),h=Array.isArray(u)?u:new Uint8Array(u);for(s=0;s<r;s+=4)i=xu[e.charCodeAt(s)],o=xu[e.charCodeAt(s+1)],c=xu[e.charCodeAt(s+2)],A=xu[e.charCodeAt(s+3)],h[a++]=i<<2|o>>4,h[a++]=(o&15)<<4|c>>2,h[a++]=(c&3)<<6|A&63;return u},PFe=function(e){for(var n=e.length,r=[],s=0;s<n;s+=2)r.push(e[s+1]<<8|e[s]);return r},QFe=function(e){for(var n=e.length,r=[],s=0;s<n;s+=4)r.push(e[s+3]<<24|e[s+2]<<16|e[s+1]<<8|e[s]);return r},Wo=5,I2=6+5,rv=2,MFe=I2-Wo,xQ=65536>>Wo,DFe=1<<Wo,sv=DFe-1,RFe=1024>>Wo,$Fe=xQ+RFe,OFe=$Fe,LFe=32,HFe=OFe+LFe,zFe=65536>>I2,KFe=1<<MFe,GFe=KFe-1,$j=function(e,n,r){return e.slice?e.slice(n,r):new Uint16Array(Array.prototype.slice.call(e,n,r))},WFe=function(e,n,r){return e.slice?e.slice(n,r):new Uint32Array(Array.prototype.slice.call(e,n,r))},VFe=function(e,n){var r=IFe(e),s=Array.isArray(r)?QFe(r):new Uint32Array(r),a=Array.isArray(r)?PFe(r):new Uint16Array(r),i=24,o=$j(a,i/2,s[4]/2),c=s[5]===2?$j(a,(i+s[4])/2):WFe(s,Math.ceil((i+s[4])/4));return new qFe(s[0],s[1],s[2],s[3],o,c)},qFe=function(){function e(n,r,s,a,i,o){this.initialValue=n,this.errorValue=r,this.highStart=s,this.highValueIndex=a,this.index=i,this.data=o}return e.prototype.get=function(n){var r;if(n>=0){if(n<55296||n>56319&&n<=65535)return r=this.index[n>>Wo],r=(r<<rv)+(n&sv),this.data[r];if(n<=65535)return r=this.index[xQ+(n-55296>>Wo)],r=(r<<rv)+(n&sv),this.data[r];if(n<this.highStart)return r=HFe-zFe+(n>>I2),r=this.index[r],r+=n>>Wo&GFe,r=this.index[r],r=(r<<rv)+(n&sv),this.data[r];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Oj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",XFe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _f=0;_f<Oj.length;_f++)XFe[Oj.charCodeAt(_f)]=_f;var YFe=1,av=2,iv=3,Lj=4,Hj=5,JFe=7,zj=8,ov=9,lv=10,Kj=11,Gj=12,Wj=13,Vj=14,cv=15,ZFe=function(e){for(var n=[],r=0,s=e.length;r<s;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<s){var i=e.charCodeAt(r++);(i&64512)===56320?n.push(((a&1023)<<10)+(i&1023)+65536):(n.push(a),r--)}else n.push(a)}return n},eUe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var s=[],a=-1,i="";++a<r;){var o=e[a];o<=65535?s.push(o):(o-=65536,s.push((o>>10)+55296,o%1024+56320)),(a+1===r||s.length>16384)&&(i+=String.fromCharCode.apply(String,s),s.length=0)}return i},tUe=VFe(UFe),ns="",Av="",nUe=function(e){return tUe.get(e)},rUe=function(e,n,r){var s=r-2,a=n[s],i=n[r-1],o=n[r];if(i===av&&o===iv)return ns;if(i===av||i===iv||i===Lj||o===av||o===iv||o===Lj)return Av;if(i===zj&&[zj,ov,Kj,Gj].indexOf(o)!==-1||(i===Kj||i===ov)&&(o===ov||o===lv)||(i===Gj||i===lv)&&o===lv||o===Wj||o===Hj||o===JFe||i===YFe)return ns;if(i===Wj&&o===Vj){for(;a===Hj;)a=n[--s];if(a===Vj)return ns}if(i===cv&&o===cv){for(var c=0;a===cv;)c++,a=n[--s];if(c%2===0)return ns}return Av},sUe=function(e){var n=ZFe(e),r=n.length,s=0,a=0,i=n.map(nUe);return{next:function(){if(s>=r)return{done:!0,value:null};for(var o=ns;s<r&&(o=rUe(n,i,++s))===ns;);if(o!==ns||s===r){var c=eUe.apply(null,n.slice(a,s));return a=s,{value:c,done:!1}}return{done:!0,value:null}}}},aUe=function(e){for(var n=sUe(e),r=[],s;!(s=n.next()).done;)s.value&&r.push(s.value.slice());return r},iUe=function(e){var n=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var s=e.createElement("boundtest");s.style.height=n+"px",s.style.display="block",e.body.appendChild(s),r.selectNode(s);var a=r.getBoundingClientRect(),i=Math.round(a.height);if(e.body.removeChild(s),i===n)return!0}}return!1},oUe=function(e){var n=e.createElement("boundtest");n.style.width="50px",n.style.display="block",n.style.fontSize="12px",n.style.letterSpacing="0px",n.style.wordSpacing="0px",e.body.appendChild(n);var r=e.createRange();n.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var s=n.firstChild,a=yp(s.data).map(function(A){return tn(A)}),i=0,o={},c=a.every(function(A,u){r.setStart(s,i),r.setEnd(s,i+A.length);var h=r.getBoundingClientRect();i+=A.length;var d=h.x>o.x||h.y>o.y;return o=h,u===0?!0:d});return e.body.removeChild(n),c},lUe=function(){return typeof new Image().crossOrigin<"u"},cUe=function(){return typeof new XMLHttpRequest().responseType=="string"},AUe=function(e){var n=new Image,r=e.createElement("canvas"),s=r.getContext("2d");if(!s)return!1;n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{s.drawImage(n,0,0),r.toDataURL()}catch{return!1}return!0},qj=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},uUe=function(e){var n=e.createElement("canvas"),r=100;n.width=r,n.height=r;var s=n.getContext("2d");if(!s)return Promise.reject(!1);s.fillStyle="rgb(0, 255, 0)",s.fillRect(0,0,r,r);var a=new Image,i=n.toDataURL();a.src=i;var o=Y1(r,r,0,0,a);return s.fillStyle="red",s.fillRect(0,0,r,r),Xj(o).then(function(c){s.drawImage(c,0,0);var A=s.getImageData(0,0,r,r).data;s.fillStyle="red",s.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+i+")",u.style.height=r+"px",qj(A)?Xj(Y1(r,r,0,0,u)):Promise.reject(!1)}).then(function(c){return s.drawImage(c,0,0),qj(s.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Y1=function(e,n,r,s,a){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),c=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",n.toString()),c.setAttributeNS(null,"width","100%"),c.setAttributeNS(null,"height","100%"),c.setAttributeNS(null,"x",r.toString()),c.setAttributeNS(null,"y",s.toString()),c.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(c),c.appendChild(a),o},Xj=function(e){return new Promise(function(n,r){var s=new Image;s.onload=function(){return n(s)},s.onerror=r,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Pn={get SUPPORT_RANGE_BOUNDS(){var e=iUe(document);return Object.defineProperty(Pn,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Pn.SUPPORT_RANGE_BOUNDS&&oUe(document);return Object.defineProperty(Pn,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=AUe(document);return Object.defineProperty(Pn,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?uUe(document):Promise.resolve(!1);return Object.defineProperty(Pn,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=lUe();return Object.defineProperty(Pn,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=cUe();return Object.defineProperty(Pn,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Pn,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Pn,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},$u=function(){function e(n,r){this.text=n,this.bounds=r}return e}(),dUe=function(e,n,r,s){var a=gUe(n,r),i=[],o=0;return a.forEach(function(c){if(r.textDecorationLine.length||c.trim().length>0)if(Pn.SUPPORT_RANGE_BOUNDS){var A=Yj(s,o,c.length).getClientRects();if(A.length>1){var u=P2(c),h=0;u.forEach(function(f){i.push(new $u(f,Ai.fromDOMRectList(e,Yj(s,h+o,f.length).getClientRects()))),h+=f.length})}else i.push(new $u(c,Ai.fromDOMRectList(e,A)))}else{var d=s.splitText(c.length);i.push(new $u(c,hUe(e,s))),s=d}else Pn.SUPPORT_RANGE_BOUNDS||(s=s.splitText(c.length));o+=c.length}),i},hUe=function(e,n){var r=n.ownerDocument;if(r){var s=r.createElement("html2canvaswrapper");s.appendChild(n.cloneNode(!0));var a=n.parentNode;if(a){a.replaceChild(s,n);var i=pp(e,s);return s.firstChild&&a.replaceChild(s.firstChild,s),i}}return Ai.EMPTY},Yj=function(e,n,r){var s=e.ownerDocument;if(!s)throw new Error("Node has no owner document");var a=s.createRange();return a.setStart(e,n),a.setEnd(e,n+r),a},P2=function(e){if(Pn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(n.segment(e)).map(function(r){return r.segment})}return aUe(e)},fUe=function(e,n){if(Pn.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(s){return s.segment})}return pUe(e,n)},gUe=function(e,n){return n.letterSpacing!==0?P2(e):fUe(e,n)},mUe=[32,160,4961,65792,65793,4153,4241],pUe=function(e,n){for(var r=z3e(e,{lineBreak:n.lineBreak,wordBreak:n.overflowWrap==="break-word"?"break-word":n.wordBreak}),s=[],a,i=function(){if(a.value){var o=a.value.slice(),c=yp(o),A="";c.forEach(function(u){mUe.indexOf(u)===-1?A+=tn(u):(A.length&&s.push(A),s.push(tn(u)),A="")}),A.length&&s.push(A)}};!(a=r.next()).done;)i();return s},yUe=function(){function e(n,r,s){this.text=vUe(r.data,s.textTransform),this.textBounds=dUe(n,this.text,s,r)}return e}(),vUe=function(e,n){switch(n){case 1:return e.toLowerCase();case 3:return e.replace(xUe,wUe);case 2:return e.toUpperCase();default:return e}},xUe=/(^|\s|:|-|\(|\))([a-z])/g,wUe=function(e,n,r){return e.length>0?n+r.toUpperCase():e},wQ=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.src=s.currentSrc||s.src,a.intrinsicWidth=s.naturalWidth,a.intrinsicHeight=s.naturalHeight,a.context.cache.addImage(a.src),a}return n}(Ca),bQ=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.canvas=s,a.intrinsicWidth=s.width,a.intrinsicHeight=s.height,a}return n}(Ca),_Q=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this,i=new XMLSerializer,o=pp(r,s);return s.setAttribute("width",o.width+"px"),s.setAttribute("height",o.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(s)),a.intrinsicWidth=s.width.baseVal.value,a.intrinsicHeight=s.height.baseVal.value,a.context.cache.addImage(a.svg),a}return n}(Ca),CQ=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.value=s.value,a}return n}(Ca),J1=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.start=s.start,a.reversed=typeof s.reversed=="boolean"&&s.reversed===!0,a}return n}(Ca),bUe=[{type:15,flags:0,unit:"px",number:3}],_Ue=[{type:16,flags:0,number:50}],CUe=function(e){return e.width>e.height?new Ai(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Ai(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},BUe=function(e){var n=e.type===SUe?new Array(e.value.length+1).join(""):e.value;return n.length===0?e.placeholder||"":n},Ig="checkbox",Pg="radio",SUe="password",Jj=707406591,Q2=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this;switch(a.type=s.type.toLowerCase(),a.checked=s.checked,a.value=BUe(s),(a.type===Ig||a.type===Pg)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=CUe(a.bounds)),a.type){case Ig:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=bUe;break;case Pg:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=_Ue;break}return a}return n}(Ca),BQ=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this,i=s.options[s.selectedIndex||0];return a.value=i&&i.text||"",a}return n}(Ca),SQ=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.value=s.value,a}return n}(Ca),kQ=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this;a.src=s.src,a.width=parseInt(s.width,10)||0,a.height=parseInt(s.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){a.tree=NQ(r,s.contentWindow.document.documentElement);var i=s.contentWindow.document.documentElement?Du(r,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):Za.TRANSPARENT,o=s.contentWindow.document.body?Du(r,getComputedStyle(s.contentWindow.document.body).backgroundColor):Za.TRANSPARENT;a.backgroundColor=eo(i)?eo(o)?a.styles.backgroundColor:o:i}}catch{}return a}return n}(Ca),kUe=["OL","UL","MENU"],n0=function(e,n,r,s){for(var a=n.firstChild,i=void 0;a;a=i)if(i=a.nextSibling,EQ(a)&&a.data.trim().length>0)r.textNodes.push(new yUe(e,a,r.styles));else if(yc(a))if(IQ(a)&&a.assignedNodes)a.assignedNodes().forEach(function(c){return n0(e,c,r,s)});else{var o=jQ(e,a);o.styles.isVisible()&&(jUe(a,o,s)?o.flags|=4:NUe(o.styles)&&(o.flags|=2),kUe.indexOf(a.tagName)!==-1&&(o.flags|=8),r.elements.push(o),a.slot,a.shadowRoot?n0(e,a.shadowRoot,o,s):!Qg(a)&&!TQ(a)&&!Mg(a)&&n0(e,a,o,s))}},jQ=function(e,n){return ew(n)?new wQ(e,n):FQ(n)?new bQ(e,n):TQ(n)?new _Q(e,n):EUe(n)?new CQ(e,n):TUe(n)?new J1(e,n):FUe(n)?new Q2(e,n):Mg(n)?new BQ(e,n):Qg(n)?new SQ(e,n):UQ(n)?new kQ(e,n):new Ca(e,n)},NQ=function(e,n){var r=jQ(e,n);return r.flags|=4,n0(e,n,r,r),r},jUe=function(e,n,r){return n.styles.isPositionedWithZIndex()||n.styles.opacity<1||n.styles.isTransformed()||M2(e)&&r.styles.isTransparent()},NUe=function(e){return e.isPositioned()||e.isFloating()},EQ=function(e){return e.nodeType===Node.TEXT_NODE},yc=function(e){return e.nodeType===Node.ELEMENT_NODE},Z1=function(e){return yc(e)&&typeof e.style<"u"&&!r0(e)},r0=function(e){return typeof e.className=="object"},EUe=function(e){return e.tagName==="LI"},TUe=function(e){return e.tagName==="OL"},FUe=function(e){return e.tagName==="INPUT"},UUe=function(e){return e.tagName==="HTML"},TQ=function(e){return e.tagName==="svg"},M2=function(e){return e.tagName==="BODY"},FQ=function(e){return e.tagName==="CANVAS"},Zj=function(e){return e.tagName==="VIDEO"},ew=function(e){return e.tagName==="IMG"},UQ=function(e){return e.tagName==="IFRAME"},e4=function(e){return e.tagName==="STYLE"},IUe=function(e){return e.tagName==="SCRIPT"},Qg=function(e){return e.tagName==="TEXTAREA"},Mg=function(e){return e.tagName==="SELECT"},IQ=function(e){return e.tagName==="SLOT"},t4=function(e){return e.tagName.indexOf("-")>0},PUe=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(n){var r=this.counters[n];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(n){var r=this.counters[n];return r||[]},e.prototype.pop=function(n){var r=this;n.forEach(function(s){return r.counters[s].pop()})},e.prototype.parse=function(n){var r=this,s=n.counterIncrement,a=n.counterReset,i=!0;s!==null&&s.forEach(function(c){var A=r.counters[c.counter];A&&c.increment!==0&&(i=!1,A.length||A.push(1),A[Math.max(0,A.length-1)]+=c.increment)});var o=[];return i&&a.forEach(function(c){var A=r.counters[c.counter];o.push(c.counter),A||(A=r.counters[c.counter]=[]),A.push(c.reset)}),o},e}(),n4={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},r4={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},QUe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},MUe={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},zl=function(e,n,r,s,a,i){return e<n||e>r?Fd(e,a,i.length>0):s.integers.reduce(function(o,c,A){for(;e>=c;)e-=c,o+=s.values[A];return o},"")+i},PQ=function(e,n,r,s){var a="";do r||e--,a=s(e)+a,e/=n;while(e*n>=n);return a},en=function(e,n,r,s,a){var i=r-n+1;return(e<0?"-":"")+(PQ(Math.abs(e),i,s,function(o){return tn(Math.floor(o%i)+n)})+a)},xo=function(e,n,r){r===void 0&&(r=". ");var s=n.length;return PQ(Math.abs(e),s,!1,function(a){return n[Math.floor(a%s)]})+r},nc=1,Ci=2,Bi=4,wu=8,Na=function(e,n,r,s,a,i){if(e<-9999||e>9999)return Fd(e,4,a.length>0);var o=Math.abs(e),c=a;if(o===0)return n[0]+c;for(var A=0;o>0&&A<=4;A++){var u=o%10;u===0&&gn(i,nc)&&c!==""?c=n[u]+c:u>1||u===1&&A===0||u===1&&A===1&&gn(i,Ci)||u===1&&A===1&&gn(i,Bi)&&e>100||u===1&&A>1&&gn(i,wu)?c=n[u]+(A>0?r[A-1]:"")+c:u===1&&A>0&&(c=r[A-1]+c),o=Math.floor(o/10)}return(e<0?s:"")+c},s4="",a4="",i4="",uv="",Fd=function(e,n,r){var s=r?". ":"",a=r?"":"",i=r?", ":"",o=r?" ":"";switch(n){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var c=en(e,48,57,!0,s);return c.length<4?"0"+c:c;case 4:return xo(e,"",a);case 6:return zl(e,1,3999,n4,3,s).toLowerCase();case 7:return zl(e,1,3999,n4,3,s);case 8:return en(e,945,969,!1,s);case 9:return en(e,97,122,!1,s);case 10:return en(e,65,90,!1,s);case 11:return en(e,1632,1641,!0,s);case 12:case 49:return zl(e,1,9999,r4,3,s);case 35:return zl(e,1,9999,r4,3,s).toLowerCase();case 13:return en(e,2534,2543,!0,s);case 14:case 30:return en(e,6112,6121,!0,s);case 15:return xo(e,"",a);case 16:return xo(e,"",a);case 17:case 48:return Na(e,"",s4,"",a,Ci|Bi|wu);case 47:return Na(e,"",a4,"",a,nc|Ci|Bi|wu);case 42:return Na(e,"",s4,"",a,Ci|Bi|wu);case 41:return Na(e,"",a4,"",a,nc|Ci|Bi|wu);case 26:return Na(e,"","",i4,a,0);case 25:return Na(e,"","",i4,a,nc|Ci|Bi);case 31:return Na(e,"","",uv,i,nc|Ci|Bi);case 33:return Na(e,"","",uv,i,0);case 32:return Na(e,"","",uv,i,nc|Ci|Bi);case 18:return en(e,2406,2415,!0,s);case 20:return zl(e,1,19999,MUe,3,s);case 21:return en(e,2790,2799,!0,s);case 22:return en(e,2662,2671,!0,s);case 22:return zl(e,1,10999,QUe,3,s);case 23:return xo(e,"");case 24:return xo(e,"");case 27:return en(e,3302,3311,!0,s);case 28:return xo(e,"",a);case 29:return xo(e,"",a);case 34:return en(e,3792,3801,!0,s);case 37:return en(e,6160,6169,!0,s);case 38:return en(e,4160,4169,!0,s);case 39:return en(e,2918,2927,!0,s);case 40:return en(e,1776,1785,!0,s);case 43:return en(e,3046,3055,!0,s);case 44:return en(e,3174,3183,!0,s);case 45:return en(e,3664,3673,!0,s);case 46:return en(e,3872,3881,!0,s);case 3:default:return en(e,48,57,!0,s)}},QQ="data-html2canvas-ignore",o4=function(){function e(n,r,s){if(this.context=n,this.options=s,this.scrolledElements=[],this.referenceElement=r,this.counters=new PUe,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(n,r){var s=this,a=DUe(n,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var i=n.defaultView.pageXOffset,o=n.defaultView.pageYOffset,c=a.contentWindow,A=c.document,u=OUe(a).then(function(){return sr(s,void 0,void 0,function(){var h,d;return Kn(this,function(f){switch(f.label){case 0:return this.scrolledElements.forEach(KUe),c&&(c.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(c.scrollY!==r.top||c.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(c.scrollX-r.left,c.scrollY-r.top,0,0))),h=this.options.onclone,d=this.clonedReferenceElement,typeof d>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:A.fonts&&A.fonts.ready?[4,A.fonts.ready]:[3,2];case 1:f.sent(),f.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,$Ue(A)]:[3,4];case 3:f.sent(),f.label=4;case 4:return typeof h=="function"?[2,Promise.resolve().then(function(){return h(A,d)}).then(function(){return a})]:[2,a]}})})});return A.open(),A.write(HUe(document.doctype)+"<html></html>"),zUe(this.referenceElement.ownerDocument,i,o),A.replaceChild(A.adoptNode(this.documentElement),A.documentElement),A.close(),u},e.prototype.createElementClone=function(n){if(X1(n,2))debugger;if(FQ(n))return this.createCanvasClone(n);if(Zj(n))return this.createVideoClone(n);if(e4(n))return this.createStyleClone(n);var r=n.cloneNode(!1);return ew(r)&&(ew(n)&&n.currentSrc&&n.currentSrc!==n.src&&(r.src=n.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),t4(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(n){var r=document.createElement("html2canvascustomelement");return dv(n.style,r),r},e.prototype.createStyleClone=function(n){try{var r=n.sheet;if(r&&r.cssRules){var s=[].slice.call(r.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),a=n.cloneNode(!1);return a.textContent=s,a}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return n.cloneNode(!1)},e.prototype.createCanvasClone=function(n){var r;if(this.options.inlineImages&&n.ownerDocument){var s=n.ownerDocument.createElement("img");try{return s.src=n.toDataURL(),s}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",n)}}var a=n.cloneNode(!1);try{a.width=n.width,a.height=n.height;var i=n.getContext("2d"),o=a.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,n.width,n.height),0,0);else{var c=(r=n.getContext("webgl2"))!==null&&r!==void 0?r:n.getContext("webgl");if(c){var A=c.getContextAttributes();(A==null?void 0:A.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",n)}o.drawImage(n,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",n)}return a},e.prototype.createVideoClone=function(n){var r=n.ownerDocument.createElement("canvas");r.width=n.offsetWidth,r.height=n.offsetHeight;var s=r.getContext("2d");try{return s&&(s.drawImage(n,0,0,r.width,r.height),this.options.allowTaint||s.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",n)}var a=n.ownerDocument.createElement("canvas");return a.width=n.offsetWidth,a.height=n.offsetHeight,a},e.prototype.appendChildNode=function(n,r,s){(!yc(r)||!IUe(r)&&!r.hasAttribute(QQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!yc(r)||!e4(r))&&n.appendChild(this.cloneNode(r,s))},e.prototype.cloneChildNodes=function(n,r,s){for(var a=this,i=n.shadowRoot?n.shadowRoot.firstChild:n.firstChild;i;i=i.nextSibling)if(yc(i)&&IQ(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(c){return a.appendChildNode(r,c,s)})}else this.appendChildNode(r,i,s)},e.prototype.cloneNode=function(n,r){if(EQ(n))return document.createTextNode(n.data);if(!n.ownerDocument)return n.cloneNode(!1);var s=n.ownerDocument.defaultView;if(s&&yc(n)&&(Z1(n)||r0(n))){var a=this.createElementClone(n);a.style.transitionProperty="none";var i=s.getComputedStyle(n),o=s.getComputedStyle(n,":before"),c=s.getComputedStyle(n,":after");this.referenceElement===n&&Z1(a)&&(this.clonedReferenceElement=a),M2(a)&&VUe(a);var A=this.counters.parse(new Dj(this.context,i)),u=this.resolvePseudoContent(n,a,o,Ou.BEFORE);t4(n)&&(r=!0),Zj(n)||this.cloneChildNodes(n,a,r),u&&a.insertBefore(u,a.firstChild);var h=this.resolvePseudoContent(n,a,c,Ou.AFTER);return h&&a.appendChild(h),this.counters.pop(A),(i&&(this.options.copyStyles||r0(n))&&!UQ(n)||r)&&dv(i,a),(n.scrollTop!==0||n.scrollLeft!==0)&&this.scrolledElements.push([a,n.scrollLeft,n.scrollTop]),(Qg(n)||Mg(n))&&(Qg(a)||Mg(a))&&(a.value=n.value),a}return n.cloneNode(!1)},e.prototype.resolvePseudoContent=function(n,r,s,a){var i=this;if(s){var o=s.content,c=r.ownerDocument;if(!(!c||!o||o==="none"||o==="-moz-alt-content"||s.display==="none")){this.counters.parse(new Dj(this.context,s));var A=new EFe(this.context,s),u=c.createElement("html2canvaspseudoelement");dv(s,u),A.content.forEach(function(d){if(d.type===0)u.appendChild(c.createTextNode(d.value));else if(d.type===22){var f=c.createElement("img");f.src=d.value,f.style.opacity="1",u.appendChild(f)}else if(d.type===18){if(d.name==="attr"){var g=d.values.filter(wt);g.length&&u.appendChild(c.createTextNode(n.getAttribute(g[0].value)||""))}else if(d.name==="counter"){var m=d.values.filter(sA),y=m[0],x=m[1];if(y&&wt(y)){var p=i.counters.getCounterValue(y.value),v=x&&wt(x)?q1.parse(i.context,x.value):3;u.appendChild(c.createTextNode(Fd(p,v,!1)))}}else if(d.name==="counters"){var b=d.values.filter(sA),y=b[0],w=b[1],x=b[2];if(y&&wt(y)){var _=i.counters.getCounterValues(y.value),C=x&&wt(x)?q1.parse(i.context,x.value):3,k=w&&w.type===0?w.value:"",j=_.map(function(P){return Fd(P,C,!1)}).join(k);u.appendChild(c.createTextNode(j))}}}else if(d.type===20)switch(d.value){case"open-quote":u.appendChild(c.createTextNode(Mj(A.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(c.createTextNode(Mj(A.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(c.createTextNode(d.value))}}),u.className=tw+" "+nw;var h=a===Ou.BEFORE?" "+tw:" "+nw;return r0(r)?r.className.baseValue+=h:r.className+=h,u}}},e.destroy=function(n){return n.parentNode?(n.parentNode.removeChild(n),!0):!1},e}(),Ou;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Ou||(Ou={}));var DUe=function(e,n){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=n.width.toString(),r.height=n.height.toString(),r.scrolling="no",r.setAttribute(QQ,"true"),e.body.appendChild(r),r},RUe=function(e){return new Promise(function(n){if(e.complete){n();return}if(!e.src){n();return}e.onload=n,e.onerror=n})},$Ue=function(e){return Promise.all([].slice.call(e.images,0).map(RUe))},OUe=function(e){return new Promise(function(n,r){var s=e.contentWindow;if(!s)return r("No window assigned for iframe");var a=s.document;s.onload=e.onload=function(){s.onload=e.onload=null;var i=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(i),n(e))},50)}})},LUe=["all","d","content"],dv=function(e,n){for(var r=e.length-1;r>=0;r--){var s=e.item(r);LUe.indexOf(s)===-1&&n.style.setProperty(s,e.getPropertyValue(s))}return n},HUe=function(e){var n="";return e&&(n+="<!DOCTYPE ",e.name&&(n+=e.name),e.internalSubset&&(n+=e.internalSubset),e.publicId&&(n+='"'+e.publicId+'"'),e.systemId&&(n+='"'+e.systemId+'"'),n+=">"),n},zUe=function(e,n,r){e&&e.defaultView&&(n!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(n,r)},KUe=function(e){var n=e[0],r=e[1],s=e[2];n.scrollLeft=r,n.scrollTop=s},GUe=":before",WUe=":after",tw="___html2canvas___pseudoelement_before",nw="___html2canvas___pseudoelement_after",l4=`{
    content: "" !important;
    display: none !important;
}`,VUe=function(e){qUe(e,"."+tw+GUe+l4+`
         .`+nw+WUe+l4)},qUe=function(e,n){var r=e.ownerDocument;if(r){var s=r.createElement("style");s.textContent=n,e.appendChild(s)}},MQ=function(){function e(){}return e.getOrigin=function(n){var r=e._link;return r?(r.href=n,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(n){return e.getOrigin(n)===e._origin},e.setContext=function(n){e._link=n.document.createElement("a"),e._origin=e.getOrigin(n.location.href)},e._origin="about:blank",e}(),XUe=function(){function e(n,r){this.context=n,this._options=r,this._cache={}}return e.prototype.addImage=function(n){var r=Promise.resolve();return this.has(n)||(fv(n)||eIe(n))&&(this._cache[n]=this.loadImage(n)).catch(function(){}),r},e.prototype.match=function(n){return this._cache[n]},e.prototype.loadImage=function(n){return sr(this,void 0,void 0,function(){var r,s,a,i,o=this;return Kn(this,function(c){switch(c.label){case 0:return r=MQ.isSameOrigin(n),s=!hv(n)&&this._options.useCORS===!0&&Pn.SUPPORT_CORS_IMAGES&&!r,a=!hv(n)&&!r&&!fv(n)&&typeof this._options.proxy=="string"&&Pn.SUPPORT_CORS_XHR&&!s,!r&&this._options.allowTaint===!1&&!hv(n)&&!fv(n)&&!a&&!s?[2]:(i=n,a?[4,this.proxy(i)]:[3,2]);case 1:i=c.sent(),c.label=2;case 2:return this.context.logger.debug("Added image "+n.substring(0,256)),[4,new Promise(function(A,u){var h=new Image;h.onload=function(){return A(h)},h.onerror=u,(tIe(i)||s)&&(h.crossOrigin="anonymous"),h.src=i,h.complete===!0&&setTimeout(function(){return A(h)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,c.sent()]}})})},e.prototype.has=function(n){return typeof this._cache[n]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(n){var r=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var a=n.substring(0,256);return new Promise(function(i,o){var c=Pn.SUPPORT_RESPONSE_TYPE?"blob":"text",A=new XMLHttpRequest;A.onload=function(){if(A.status===200)if(c==="text")i(A.response);else{var d=new FileReader;d.addEventListener("load",function(){return i(d.result)},!1),d.addEventListener("error",function(f){return o(f)},!1),d.readAsDataURL(A.response)}else o("Failed to proxy resource "+a+" with status code "+A.status)},A.onerror=o;var u=s.indexOf("?")>-1?"&":"?";if(A.open("GET",""+s+u+"url="+encodeURIComponent(n)+"&responseType="+c),c!=="text"&&A instanceof XMLHttpRequest&&(A.responseType=c),r._options.imageTimeout){var h=r._options.imageTimeout;A.timeout=h,A.ontimeout=function(){return o("Timed out ("+h+"ms) proxying "+a)}}A.send()})},e}(),YUe=/^data:image\/svg\+xml/i,JUe=/^data:image\/.*;base64,/i,ZUe=/^data:image\/.*/i,eIe=function(e){return Pn.SUPPORT_SVG_DRAWING||!nIe(e)},hv=function(e){return ZUe.test(e)},tIe=function(e){return JUe.test(e)},fv=function(e){return e.substr(0,4)==="blob"},nIe=function(e){return e.substr(-3).toLowerCase()==="svg"||YUe.test(e)},ke=function(){function e(n,r){this.type=0,this.x=n,this.y=r}return e.prototype.add=function(n,r){return new e(this.x+n,this.y+r)},e}(),Kl=function(e,n,r){return new ke(e.x+(n.x-e.x)*r,e.y+(n.y-e.y)*r)},Cf=function(){function e(n,r,s,a){this.type=1,this.start=n,this.startControl=r,this.endControl=s,this.end=a}return e.prototype.subdivide=function(n,r){var s=Kl(this.start,this.startControl,n),a=Kl(this.startControl,this.endControl,n),i=Kl(this.endControl,this.end,n),o=Kl(s,a,n),c=Kl(a,i,n),A=Kl(o,c,n);return r?new e(this.start,s,o,A):new e(A,c,i,this.end)},e.prototype.add=function(n,r){return new e(this.start.add(n,r),this.startControl.add(n,r),this.endControl.add(n,r),this.end.add(n,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),as=function(e){return e.type===1},rIe=function(){function e(n){var r=n.styles,s=n.bounds,a=vu(r.borderTopLeftRadius,s.width,s.height),i=a[0],o=a[1],c=vu(r.borderTopRightRadius,s.width,s.height),A=c[0],u=c[1],h=vu(r.borderBottomRightRadius,s.width,s.height),d=h[0],f=h[1],g=vu(r.borderBottomLeftRadius,s.width,s.height),m=g[0],y=g[1],x=[];x.push((i+A)/s.width),x.push((m+d)/s.width),x.push((o+y)/s.height),x.push((u+f)/s.height);var p=Math.max.apply(Math,x);p>1&&(i/=p,o/=p,A/=p,u/=p,d/=p,f/=p,m/=p,y/=p);var v=s.width-A,b=s.height-f,w=s.width-d,_=s.height-y,C=r.borderTopWidth,k=r.borderRightWidth,j=r.borderBottomWidth,B=r.borderLeftWidth,E=Nt(r.paddingTop,n.bounds.width),P=Nt(r.paddingRight,n.bounds.width),I=Nt(r.paddingBottom,n.bounds.width),U=Nt(r.paddingLeft,n.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?Dt(s.left+B/3,s.top+C/3,i-B/3,o-C/3,mt.TOP_LEFT):new ke(s.left+B/3,s.top+C/3),this.topRightBorderDoubleOuterBox=i>0||o>0?Dt(s.left+v,s.top+C/3,A-k/3,u-C/3,mt.TOP_RIGHT):new ke(s.left+s.width-k/3,s.top+C/3),this.bottomRightBorderDoubleOuterBox=d>0||f>0?Dt(s.left+w,s.top+b,d-k/3,f-j/3,mt.BOTTOM_RIGHT):new ke(s.left+s.width-k/3,s.top+s.height-j/3),this.bottomLeftBorderDoubleOuterBox=m>0||y>0?Dt(s.left+B/3,s.top+_,m-B/3,y-j/3,mt.BOTTOM_LEFT):new ke(s.left+B/3,s.top+s.height-j/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?Dt(s.left+B*2/3,s.top+C*2/3,i-B*2/3,o-C*2/3,mt.TOP_LEFT):new ke(s.left+B*2/3,s.top+C*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?Dt(s.left+v,s.top+C*2/3,A-k*2/3,u-C*2/3,mt.TOP_RIGHT):new ke(s.left+s.width-k*2/3,s.top+C*2/3),this.bottomRightBorderDoubleInnerBox=d>0||f>0?Dt(s.left+w,s.top+b,d-k*2/3,f-j*2/3,mt.BOTTOM_RIGHT):new ke(s.left+s.width-k*2/3,s.top+s.height-j*2/3),this.bottomLeftBorderDoubleInnerBox=m>0||y>0?Dt(s.left+B*2/3,s.top+_,m-B*2/3,y-j*2/3,mt.BOTTOM_LEFT):new ke(s.left+B*2/3,s.top+s.height-j*2/3),this.topLeftBorderStroke=i>0||o>0?Dt(s.left+B/2,s.top+C/2,i-B/2,o-C/2,mt.TOP_LEFT):new ke(s.left+B/2,s.top+C/2),this.topRightBorderStroke=i>0||o>0?Dt(s.left+v,s.top+C/2,A-k/2,u-C/2,mt.TOP_RIGHT):new ke(s.left+s.width-k/2,s.top+C/2),this.bottomRightBorderStroke=d>0||f>0?Dt(s.left+w,s.top+b,d-k/2,f-j/2,mt.BOTTOM_RIGHT):new ke(s.left+s.width-k/2,s.top+s.height-j/2),this.bottomLeftBorderStroke=m>0||y>0?Dt(s.left+B/2,s.top+_,m-B/2,y-j/2,mt.BOTTOM_LEFT):new ke(s.left+B/2,s.top+s.height-j/2),this.topLeftBorderBox=i>0||o>0?Dt(s.left,s.top,i,o,mt.TOP_LEFT):new ke(s.left,s.top),this.topRightBorderBox=A>0||u>0?Dt(s.left+v,s.top,A,u,mt.TOP_RIGHT):new ke(s.left+s.width,s.top),this.bottomRightBorderBox=d>0||f>0?Dt(s.left+w,s.top+b,d,f,mt.BOTTOM_RIGHT):new ke(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=m>0||y>0?Dt(s.left,s.top+_,m,y,mt.BOTTOM_LEFT):new ke(s.left,s.top+s.height),this.topLeftPaddingBox=i>0||o>0?Dt(s.left+B,s.top+C,Math.max(0,i-B),Math.max(0,o-C),mt.TOP_LEFT):new ke(s.left+B,s.top+C),this.topRightPaddingBox=A>0||u>0?Dt(s.left+Math.min(v,s.width-k),s.top+C,v>s.width+k?0:Math.max(0,A-k),Math.max(0,u-C),mt.TOP_RIGHT):new ke(s.left+s.width-k,s.top+C),this.bottomRightPaddingBox=d>0||f>0?Dt(s.left+Math.min(w,s.width-B),s.top+Math.min(b,s.height-j),Math.max(0,d-k),Math.max(0,f-j),mt.BOTTOM_RIGHT):new ke(s.left+s.width-k,s.top+s.height-j),this.bottomLeftPaddingBox=m>0||y>0?Dt(s.left+B,s.top+Math.min(_,s.height-j),Math.max(0,m-B),Math.max(0,y-j),mt.BOTTOM_LEFT):new ke(s.left+B,s.top+s.height-j),this.topLeftContentBox=i>0||o>0?Dt(s.left+B+U,s.top+C+E,Math.max(0,i-(B+U)),Math.max(0,o-(C+E)),mt.TOP_LEFT):new ke(s.left+B+U,s.top+C+E),this.topRightContentBox=A>0||u>0?Dt(s.left+Math.min(v,s.width+B+U),s.top+C+E,v>s.width+B+U?0:A-B+U,u-(C+E),mt.TOP_RIGHT):new ke(s.left+s.width-(k+P),s.top+C+E),this.bottomRightContentBox=d>0||f>0?Dt(s.left+Math.min(w,s.width-(B+U)),s.top+Math.min(b,s.height+C+E),Math.max(0,d-(k+P)),f-(j+I),mt.BOTTOM_RIGHT):new ke(s.left+s.width-(k+P),s.top+s.height-(j+I)),this.bottomLeftContentBox=m>0||y>0?Dt(s.left+B+U,s.top+_,Math.max(0,m-(B+U)),y-(j+I),mt.BOTTOM_LEFT):new ke(s.left+B+U,s.top+s.height-(j+I))}return e}(),mt;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(mt||(mt={}));var Dt=function(e,n,r,s,a){var i=4*((Math.sqrt(2)-1)/3),o=r*i,c=s*i,A=e+r,u=n+s;switch(a){case mt.TOP_LEFT:return new Cf(new ke(e,u),new ke(e,u-c),new ke(A-o,n),new ke(A,n));case mt.TOP_RIGHT:return new Cf(new ke(e,n),new ke(e+o,n),new ke(A,u-c),new ke(A,u));case mt.BOTTOM_RIGHT:return new Cf(new ke(A,n),new ke(A,n+c),new ke(e+o,u),new ke(e,u));case mt.BOTTOM_LEFT:default:return new Cf(new ke(A,u),new ke(A-o,u),new ke(e,n+c),new ke(e,n))}},Dg=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},sIe=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},Rg=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},aIe=function(){function e(n,r,s){this.offsetX=n,this.offsetY=r,this.matrix=s,this.type=0,this.target=6}return e}(),Bf=function(){function e(n,r){this.path=n,this.target=r,this.type=1}return e}(),iIe=function(){function e(n){this.opacity=n,this.type=2,this.target=6}return e}(),oIe=function(e){return e.type===0},DQ=function(e){return e.type===1},lIe=function(e){return e.type===2},c4=function(e,n){return e.length===n.length?e.some(function(r,s){return r===n[s]}):!1},cIe=function(e,n,r,s,a){return e.map(function(i,o){switch(o){case 0:return i.add(n,r);case 1:return i.add(n+s,r);case 2:return i.add(n+s,r+a);case 3:return i.add(n,r+a)}return i})},RQ=function(){function e(n){this.element=n,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),$Q=function(){function e(n,r){if(this.container=n,this.parent=r,this.effects=[],this.curves=new rIe(this.container),this.container.styles.opacity<1&&this.effects.push(new iIe(this.container.styles.opacity)),this.container.styles.transform!==null){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new aIe(s,a,i))}if(this.container.styles.overflowX!==0){var o=Dg(this.curves),c=Rg(this.curves);c4(o,c)?this.effects.push(new Bf(o,6)):(this.effects.push(new Bf(o,2)),this.effects.push(new Bf(c,4)))}}return e.prototype.getEffects=function(n){for(var r=[2,3].indexOf(this.container.styles.position)===-1,s=this.parent,a=this.effects.slice(0);s;){var i=s.effects.filter(function(A){return!DQ(A)});if(r||s.container.styles.position!==0||!s.parent){if(a.unshift.apply(a,i),r=[2,3].indexOf(s.container.styles.position)===-1,s.container.styles.overflowX!==0){var o=Dg(s.curves),c=Rg(s.curves);c4(o,c)||a.unshift(new Bf(c,6))}}else a.unshift.apply(a,i);s=s.parent}return a.filter(function(A){return gn(A.target,n)})},e}(),rw=function(e,n,r,s){e.container.elements.forEach(function(a){var i=gn(a.flags,4),o=gn(a.flags,2),c=new $Q(a,e);gn(a.styles.display,2048)&&s.push(c);var A=gn(a.flags,8)?[]:s;if(i||o){var u=i||a.styles.isPositioned()?r:n,h=new RQ(c);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var d=a.styles.zIndex.order;if(d<0){var f=0;u.negativeZIndex.some(function(m,y){return d>m.element.container.styles.zIndex.order?(f=y,!1):f>0}),u.negativeZIndex.splice(f,0,h)}else if(d>0){var g=0;u.positiveZIndex.some(function(m,y){return d>=m.element.container.styles.zIndex.order?(g=y+1,!1):g>0}),u.positiveZIndex.splice(g,0,h)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(h)}else a.styles.isFloating()?u.nonPositionedFloats.push(h):u.nonPositionedInlineLevel.push(h);rw(c,h,i?h:r,A)}else a.styles.isInlineLevel()?n.inlineLevel.push(c):n.nonInlineLevel.push(c),rw(c,n,r,A);gn(a.flags,8)&&OQ(a,A)})},OQ=function(e,n){for(var r=e instanceof J1?e.start:1,s=e instanceof J1?e.reversed:!1,a=0;a<n.length;a++){var i=n[a];i.container instanceof CQ&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=Fd(r,i.container.styles.listStyleType,!0),r+=s?-1:1}},AIe=function(e){var n=new $Q(e,null),r=new RQ(n),s=[];return rw(n,r,r,s),OQ(n.container,s),r},A4=function(e,n){switch(n){case 0:return us(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return us(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return us(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return us(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},uIe=function(e,n){switch(n){case 0:return us(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return us(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return us(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return us(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},dIe=function(e,n){switch(n){case 0:return us(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return us(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return us(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return us(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},hIe=function(e,n){switch(n){case 0:return Sf(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Sf(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Sf(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Sf(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Sf=function(e,n){var r=[];return as(e)?r.push(e.subdivide(.5,!1)):r.push(e),as(n)?r.push(n.subdivide(.5,!0)):r.push(n),r},us=function(e,n,r,s){var a=[];return as(e)?a.push(e.subdivide(.5,!1)):a.push(e),as(r)?a.push(r.subdivide(.5,!0)):a.push(r),as(s)?a.push(s.subdivide(.5,!0).reverse()):a.push(s),as(n)?a.push(n.subdivide(.5,!1).reverse()):a.push(n),a},LQ=function(e){var n=e.bounds,r=e.styles;return n.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},$g=function(e){var n=e.styles,r=e.bounds,s=Nt(n.paddingLeft,r.width),a=Nt(n.paddingRight,r.width),i=Nt(n.paddingTop,r.width),o=Nt(n.paddingBottom,r.width);return r.add(s+n.borderLeftWidth,i+n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth+s+a),-(n.borderTopWidth+n.borderBottomWidth+i+o))},fIe=function(e,n){return e===0?n.bounds:e===2?$g(n):LQ(n)},gIe=function(e,n){return e===0?n.bounds:e===2?$g(n):LQ(n)},gv=function(e,n,r){var s=fIe(rc(e.styles.backgroundOrigin,n),e),a=gIe(rc(e.styles.backgroundClip,n),e),i=mIe(rc(e.styles.backgroundSize,n),r,s),o=i[0],c=i[1],A=vu(rc(e.styles.backgroundPosition,n),s.width-o,s.height-c),u=pIe(rc(e.styles.backgroundRepeat,n),A,i,s,a),h=Math.round(s.left+A[0]),d=Math.round(s.top+A[1]);return[u,h,d,o,c]},Gl=function(e){return wt(e)&&e.value===Ic.AUTO},kf=function(e){return typeof e=="number"},mIe=function(e,n,r){var s=n[0],a=n[1],i=n[2],o=e[0],c=e[1];if(!o)return[0,0];if(an(o)&&c&&an(c))return[Nt(o,r.width),Nt(c,r.height)];var A=kf(i);if(wt(o)&&(o.value===Ic.CONTAIN||o.value===Ic.COVER)){if(kf(i)){var u=r.width/r.height;return u<i!=(o.value===Ic.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var h=kf(s),d=kf(a),f=h||d;if(Gl(o)&&(!c||Gl(c))){if(h&&d)return[s,a];if(!A&&!f)return[r.width,r.height];if(f&&A){var g=h?s:a*i,m=d?a:s/i;return[g,m]}var y=h?s:r.width,x=d?a:r.height;return[y,x]}if(A){var p=0,v=0;return an(o)?p=Nt(o,r.width):an(c)&&(v=Nt(c,r.height)),Gl(o)?p=v*i:(!c||Gl(c))&&(v=p/i),[p,v]}var b=null,w=null;if(an(o)?b=Nt(o,r.width):c&&an(c)&&(w=Nt(c,r.height)),b!==null&&(!c||Gl(c))&&(w=h&&d?b/s*a:r.height),w!==null&&Gl(o)&&(b=h&&d?w/a*s:r.width),b!==null&&w!==null)return[b,w];throw new Error("Unable to calculate background-size for element")},rc=function(e,n){var r=e[n];return typeof r>"u"?e[0]:r},pIe=function(e,n,r,s,a){var i=n[0],o=n[1],c=r[0],A=r[1];switch(e){case 2:return[new ke(Math.round(s.left),Math.round(s.top+o)),new ke(Math.round(s.left+s.width),Math.round(s.top+o)),new ke(Math.round(s.left+s.width),Math.round(A+s.top+o)),new ke(Math.round(s.left),Math.round(A+s.top+o))];case 3:return[new ke(Math.round(s.left+i),Math.round(s.top)),new ke(Math.round(s.left+i+c),Math.round(s.top)),new ke(Math.round(s.left+i+c),Math.round(s.height+s.top)),new ke(Math.round(s.left+i),Math.round(s.height+s.top))];case 1:return[new ke(Math.round(s.left+i),Math.round(s.top+o)),new ke(Math.round(s.left+i+c),Math.round(s.top+o)),new ke(Math.round(s.left+i+c),Math.round(s.top+o+A)),new ke(Math.round(s.left+i),Math.round(s.top+o+A))];default:return[new ke(Math.round(a.left),Math.round(a.top)),new ke(Math.round(a.left+a.width),Math.round(a.top)),new ke(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ke(Math.round(a.left),Math.round(a.height+a.top))]}},yIe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",u4="Hidden Text",vIe=function(){function e(n){this._data={},this._document=n}return e.prototype.parseMetrics=function(n,r){var s=this._document.createElement("div"),a=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;s.style.visibility="hidden",s.style.fontFamily=n,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",o.appendChild(s),a.src=yIe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",i.style.fontFamily=n,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(u4)),s.appendChild(i),s.appendChild(a);var c=a.offsetTop-i.offsetTop+2;s.removeChild(i),s.appendChild(this._document.createTextNode(u4)),s.style.lineHeight="normal",a.style.verticalAlign="super";var A=a.offsetTop-s.offsetTop+2;return o.removeChild(s),{baseline:c,middle:A}},e.prototype.getMetrics=function(n,r){var s=n+" "+r;return typeof this._data[s]>"u"&&(this._data[s]=this.parseMetrics(n,r)),this._data[s]},e}(),HQ=function(){function e(n,r){this.context=n,this.options=r}return e}(),xIe=1e4,wIe=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a._activeEffects=[],a.canvas=s.canvas?s.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),s.canvas||(a.canvas.width=Math.floor(s.width*s.scale),a.canvas.height=Math.floor(s.height*s.scale),a.canvas.style.width=s.width+"px",a.canvas.style.height=s.height+"px"),a.fontMetrics=new vIe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-s.x,-s.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),a}return n.prototype.applyEffects=function(r){for(var s=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return s.applyEffect(a)})},n.prototype.applyEffect=function(r){this.ctx.save(),lIe(r)&&(this.ctx.globalAlpha=r.opacity),oIe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),DQ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(r){return sr(this,void 0,void 0,function(){var s;return Kn(this,function(a){switch(a.label){case 0:return s=r.element.container.styles,s.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(r){return sr(this,void 0,void 0,function(){return Kn(this,function(s){switch(s.label){case 0:if(gn(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return s.sent(),[4,this.renderNodeContent(r)];case 2:s.sent(),s.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(r,s,a){var i=this;if(s===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var o=P2(r.text);o.reduce(function(c,A){return i.ctx.fillText(A,c,r.bounds.top+a),c+i.ctx.measureText(A).width},r.bounds.left)}},n.prototype.createFontStyle=function(r){var s=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),a=SIe(r.fontFamily).join(", "),i=ph(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,s,r.fontWeight,i,a].join(" "),a,i]},n.prototype.renderTextNode=function(r,s){return sr(this,void 0,void 0,function(){var a,i,o,c,A,u,h,d,f=this;return Kn(this,function(g){return a=this.createFontStyle(s),i=a[0],o=a[1],c=a[2],this.ctx.font=i,this.ctx.direction=s.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",A=this.fontMetrics.getMetrics(o,c),u=A.baseline,h=A.middle,d=s.paintOrder,r.textBounds.forEach(function(m){d.forEach(function(y){switch(y){case 0:f.ctx.fillStyle=xn(s.color),f.renderTextWithLetterSpacing(m,s.letterSpacing,u);var x=s.textShadow;x.length&&m.text.trim().length&&(x.slice(0).reverse().forEach(function(p){f.ctx.shadowColor=xn(p.color),f.ctx.shadowOffsetX=p.offsetX.number*f.options.scale,f.ctx.shadowOffsetY=p.offsetY.number*f.options.scale,f.ctx.shadowBlur=p.blur.number,f.renderTextWithLetterSpacing(m,s.letterSpacing,u)}),f.ctx.shadowColor="",f.ctx.shadowOffsetX=0,f.ctx.shadowOffsetY=0,f.ctx.shadowBlur=0),s.textDecorationLine.length&&(f.ctx.fillStyle=xn(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(p){switch(p){case 1:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top+u),m.bounds.width,1);break;case 2:f.ctx.fillRect(m.bounds.left,Math.round(m.bounds.top),m.bounds.width,1);break;case 3:f.ctx.fillRect(m.bounds.left,Math.ceil(m.bounds.top+h),m.bounds.width,1);break}}));break;case 1:s.webkitTextStrokeWidth&&m.text.trim().length&&(f.ctx.strokeStyle=xn(s.webkitTextStrokeColor),f.ctx.lineWidth=s.webkitTextStrokeWidth,f.ctx.lineJoin=window.chrome?"miter":"round",f.ctx.strokeText(m.text,m.bounds.left,m.bounds.top+u)),f.ctx.strokeStyle="",f.ctx.lineWidth=0,f.ctx.lineJoin="miter";break}})}),[2]})})},n.prototype.renderReplacedElement=function(r,s,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=$g(r),o=Rg(s);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(r){return sr(this,void 0,void 0,function(){var s,a,i,o,c,A,v,v,u,h,d,f,w,g,m,_,y,x,p,v,b,w,_;return Kn(this,function(C){switch(C.label){case 0:this.applyEffects(r.getEffects(4)),s=r.container,a=r.curves,i=s.styles,o=0,c=s.textNodes,C.label=1;case 1:return o<c.length?(A=c[o],[4,this.renderTextNode(A,i)]):[3,4];case 2:C.sent(),C.label=3;case 3:return o++,[3,1];case 4:if(!(s instanceof wQ))return[3,8];C.label=5;case 5:return C.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return v=C.sent(),this.renderReplacedElement(s,a,v),[3,8];case 7:return C.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof bQ&&this.renderReplacedElement(s,a,s.canvas),!(s instanceof _Q))return[3,12];C.label=9;case 9:return C.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return v=C.sent(),this.renderReplacedElement(s,a,v),[3,12];case 11:return C.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof kQ&&s.tree?(u=new n(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}),[4,u.render(s.tree)]):[3,14];case 13:h=C.sent(),s.width&&s.height&&this.ctx.drawImage(h,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),C.label=14;case 14:if(s instanceof Q2&&(d=Math.min(s.bounds.width,s.bounds.height),s.type===Ig?s.checked&&(this.ctx.save(),this.path([new ke(s.bounds.left+d*.39363,s.bounds.top+d*.79),new ke(s.bounds.left+d*.16,s.bounds.top+d*.5549),new ke(s.bounds.left+d*.27347,s.bounds.top+d*.44071),new ke(s.bounds.left+d*.39694,s.bounds.top+d*.5649),new ke(s.bounds.left+d*.72983,s.bounds.top+d*.23),new ke(s.bounds.left+d*.84,s.bounds.top+d*.34085),new ke(s.bounds.left+d*.39363,s.bounds.top+d*.79)]),this.ctx.fillStyle=xn(Jj),this.ctx.fill(),this.ctx.restore()):s.type===Pg&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+d/2,s.bounds.top+d/2,d/4,0,Math.PI*2,!0),this.ctx.fillStyle=xn(Jj),this.ctx.fill(),this.ctx.restore())),bIe(s)&&s.value.length){switch(f=this.createFontStyle(i),w=f[0],g=f[1],m=this.fontMetrics.getMetrics(w,g).baseline,this.ctx.font=w,this.ctx.fillStyle=xn(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=CIe(s.styles.textAlign),_=$g(s),y=0,s.styles.textAlign){case 1:y+=_.width/2;break;case 2:y+=_.width;break}x=_.add(y,0,0,-_.height/2+1),this.ctx.save(),this.path([new ke(_.left,_.top),new ke(_.left+_.width,_.top),new ke(_.left+_.width,_.top+_.height),new ke(_.left,_.top+_.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new $u(s.value,x),i.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!gn(s.styles.display,2048))return[3,20];if(s.styles.listStyleImage===null)return[3,19];if(p=s.styles.listStyleImage,p.type!==0)return[3,18];v=void 0,b=p.url,C.label=15;case 15:return C.trys.push([15,17,,18]),[4,this.context.cache.match(b)];case 16:return v=C.sent(),this.ctx.drawImage(v,s.bounds.left-(v.width+10),s.bounds.top),[3,18];case 17:return C.sent(),this.context.logger.error("Error loading list-style-image "+b),[3,18];case 18:return[3,20];case 19:r.listValue&&s.styles.listStyleType!==-1&&(w=this.createFontStyle(i)[0],this.ctx.font=w,this.ctx.fillStyle=xn(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",_=new Ai(s.bounds.left,s.bounds.top+Nt(s.styles.paddingTop,s.bounds.width),s.bounds.width,Pj(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new $u(r.listValue,_),i.letterSpacing,Pj(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),C.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(r){return sr(this,void 0,void 0,function(){var s,a,p,i,o,p,c,A,p,u,h,p,d,f,p,g,m,p,y,x,p;return Kn(this,function(v){switch(v.label){case 0:if(gn(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:v.sent(),s=0,a=r.negativeZIndex,v.label=2;case 2:return s<a.length?(p=a[s],[4,this.renderStack(p)]):[3,5];case 3:v.sent(),v.label=4;case 4:return s++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:v.sent(),i=0,o=r.nonInlineLevel,v.label=7;case 7:return i<o.length?(p=o[i],[4,this.renderNode(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return i++,[3,7];case 10:c=0,A=r.nonPositionedFloats,v.label=11;case 11:return c<A.length?(p=A[c],[4,this.renderStack(p)]):[3,14];case 12:v.sent(),v.label=13;case 13:return c++,[3,11];case 14:u=0,h=r.nonPositionedInlineLevel,v.label=15;case 15:return u<h.length?(p=h[u],[4,this.renderStack(p)]):[3,18];case 16:v.sent(),v.label=17;case 17:return u++,[3,15];case 18:d=0,f=r.inlineLevel,v.label=19;case 19:return d<f.length?(p=f[d],[4,this.renderNode(p)]):[3,22];case 20:v.sent(),v.label=21;case 21:return d++,[3,19];case 22:g=0,m=r.zeroOrAutoZIndexOrTransformedOrOpacity,v.label=23;case 23:return g<m.length?(p=m[g],[4,this.renderStack(p)]):[3,26];case 24:v.sent(),v.label=25;case 25:return g++,[3,23];case 26:y=0,x=r.positiveZIndex,v.label=27;case 27:return y<x.length?(p=x[y],[4,this.renderStack(p)]):[3,30];case 28:v.sent(),v.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},n.prototype.formatPath=function(r){var s=this;r.forEach(function(a,i){var o=as(a)?a.start:a;i===0?s.ctx.moveTo(o.x,o.y):s.ctx.lineTo(o.x,o.y),as(a)&&s.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},n.prototype.renderRepeat=function(r,s,a,i){this.path(r),this.ctx.fillStyle=s,this.ctx.translate(a,i),this.ctx.fill(),this.ctx.translate(-a,-i)},n.prototype.resizeImage=function(r,s,a){var i;if(r.width===s&&r.height===a)return r;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,c=o.createElement("canvas");c.width=Math.max(1,s),c.height=Math.max(1,a);var A=c.getContext("2d");return A.drawImage(r,0,0,r.width,r.height,0,0,s,a),c},n.prototype.renderBackgroundImage=function(r){return sr(this,void 0,void 0,function(){var s,a,i,o,c,A;return Kn(this,function(u){switch(u.label){case 0:s=r.styles.backgroundImage.length-1,a=function(h){var d,f,g,E,T,L,U,N,j,m,E,T,L,U,N,y,x,p,v,b,w,_,C,k,j,B,E,P,I,U,N,D,T,L,Q,M,F,O,X,ae,$,J;return Kn(this,function(le){switch(le.label){case 0:if(h.type!==0)return[3,5];d=void 0,f=h.url,le.label=1;case 1:return le.trys.push([1,3,,4]),[4,i.context.cache.match(f)];case 2:return d=le.sent(),[3,4];case 3:return le.sent(),i.context.logger.error("Error loading background-image "+f),[3,4];case 4:return d&&(g=gv(r,s,[d.width,d.height,d.width/d.height]),E=g[0],T=g[1],L=g[2],U=g[3],N=g[4],j=i.ctx.createPattern(i.resizeImage(d,U,N),"repeat"),i.renderRepeat(E,j,T,L)),[3,6];case 5:oTe(h)?(m=gv(r,s,[null,null,null]),E=m[0],T=m[1],L=m[2],U=m[3],N=m[4],y=nTe(h.angle,U,N),x=y[0],p=y[1],v=y[2],b=y[3],w=y[4],_=document.createElement("canvas"),_.width=U,_.height=N,C=_.getContext("2d"),k=C.createLinearGradient(p,b,v,w),Uj(h.stops,x).forEach(function(re){return k.addColorStop(re.stop,xn(re.color))}),C.fillStyle=k,C.fillRect(0,0,U,N),U>0&&N>0&&(j=i.ctx.createPattern(_,"repeat"),i.renderRepeat(E,j,T,L))):lTe(h)&&(B=gv(r,s,[null,null,null]),E=B[0],P=B[1],I=B[2],U=B[3],N=B[4],D=h.position.length===0?[F2]:h.position,T=Nt(D[0],U),L=Nt(D[D.length-1],N),Q=rTe(h,T,L,U,N),M=Q[0],F=Q[1],M>0&&F>0&&(O=i.ctx.createRadialGradient(P+T,I+L,0,P+T,I+L,M),Uj(h.stops,M*2).forEach(function(re){return O.addColorStop(re.stop,xn(re.color))}),i.path(E),i.ctx.fillStyle=O,M!==F?(X=r.bounds.left+.5*r.bounds.width,ae=r.bounds.top+.5*r.bounds.height,$=F/M,J=1/$,i.ctx.save(),i.ctx.translate(X,ae),i.ctx.transform(1,0,0,$,0,0),i.ctx.translate(-X,-ae),i.ctx.fillRect(P,J*(I-ae)+ae,U,N*J),i.ctx.restore()):i.ctx.fill())),le.label=6;case 6:return s--,[2]}})},i=this,o=0,c=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<c.length?(A=c[o],[5,a(A)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(r,s,a){return sr(this,void 0,void 0,function(){return Kn(this,function(i){return this.path(A4(a,s)),this.ctx.fillStyle=xn(r),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(r,s,a,i){return sr(this,void 0,void 0,function(){var o,c;return Kn(this,function(A){switch(A.label){case 0:return s<3?[4,this.renderSolidBorder(r,a,i)]:[3,2];case 1:return A.sent(),[2];case 2:return o=uIe(i,a),this.path(o),this.ctx.fillStyle=xn(r),this.ctx.fill(),c=dIe(i,a),this.path(c),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(r){return sr(this,void 0,void 0,function(){var s,a,i,o,c,A,u,h,d=this;return Kn(this,function(f){switch(f.label){case 0:return this.applyEffects(r.getEffects(2)),s=r.container.styles,a=!eo(s.backgroundColor)||s.backgroundImage.length,i=[{style:s.borderTopStyle,color:s.borderTopColor,width:s.borderTopWidth},{style:s.borderRightStyle,color:s.borderRightColor,width:s.borderRightWidth},{style:s.borderBottomStyle,color:s.borderBottomColor,width:s.borderBottomWidth},{style:s.borderLeftStyle,color:s.borderLeftColor,width:s.borderLeftWidth}],o=_Ie(rc(s.backgroundClip,0),r.curves),a||s.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),eo(s.backgroundColor)||(this.ctx.fillStyle=xn(s.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:f.sent(),this.ctx.restore(),s.boxShadow.slice(0).reverse().forEach(function(g){d.ctx.save();var m=Dg(r.curves),y=g.inset?0:xIe,x=cIe(m,-y+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(d.path(m),d.ctx.clip(),d.mask(x)):(d.mask(m),d.ctx.clip(),d.path(x)),d.ctx.shadowOffsetX=g.offsetX.number+y,d.ctx.shadowOffsetY=g.offsetY.number,d.ctx.shadowColor=xn(g.color),d.ctx.shadowBlur=g.blur.number,d.ctx.fillStyle=g.inset?xn(g.color):"rgba(0,0,0,1)",d.ctx.fill(),d.ctx.restore()}),f.label=2;case 2:c=0,A=0,u=i,f.label=3;case 3:return A<u.length?(h=u[A],h.style!==0&&!eo(h.color)&&h.width>0?h.style!==2?[3,5]:[4,this.renderDashedDottedBorder(h.color,h.width,c,r.curves,2)]:[3,11]):[3,13];case 4:return f.sent(),[3,11];case 5:return h.style!==3?[3,7]:[4,this.renderDashedDottedBorder(h.color,h.width,c,r.curves,3)];case 6:return f.sent(),[3,11];case 7:return h.style!==4?[3,9]:[4,this.renderDoubleBorder(h.color,h.width,c,r.curves)];case 8:return f.sent(),[3,11];case 9:return[4,this.renderSolidBorder(h.color,c,r.curves)];case 10:f.sent(),f.label=11;case 11:c++,f.label=12;case 12:return A++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(r,s,a,i,o){return sr(this,void 0,void 0,function(){var c,A,u,h,d,f,g,m,y,x,p,v,b,w,_,C,_,C;return Kn(this,function(k){return this.ctx.save(),c=hIe(i,a),A=A4(i,a),o===2&&(this.path(A),this.ctx.clip()),as(A[0])?(u=A[0].start.x,h=A[0].start.y):(u=A[0].x,h=A[0].y),as(A[1])?(d=A[1].end.x,f=A[1].end.y):(d=A[1].x,f=A[1].y),a===0||a===2?g=Math.abs(u-d):g=Math.abs(h-f),this.ctx.beginPath(),o===3?this.formatPath(c):this.formatPath(A.slice(0,2)),m=s<3?s*3:s*2,y=s<3?s*2:s,o===3&&(m=s,y=s),x=!0,g<=m*2?x=!1:g<=m*2+y?(p=g/(2*m+y),m*=p,y*=p):(v=Math.floor((g+y)/(m+y)),b=(g-v*m)/(v-1),w=(g-(v+1)*m)/v,y=w<=0||Math.abs(y-b)<Math.abs(y-w)?b:w),x&&(o===3?this.ctx.setLineDash([0,m+y]):this.ctx.setLineDash([m,y])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=s):this.ctx.lineWidth=s*2+1.1,this.ctx.strokeStyle=xn(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(as(A[0])&&(_=A[3],C=A[0],this.ctx.beginPath(),this.formatPath([new ke(_.end.x,_.end.y),new ke(C.start.x,C.start.y)]),this.ctx.stroke()),as(A[1])&&(_=A[1],C=A[2],this.ctx.beginPath(),this.formatPath([new ke(_.end.x,_.end.y),new ke(C.start.x,C.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(r){return sr(this,void 0,void 0,function(){var s;return Kn(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=xn(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),s=AIe(r),[4,this.renderStack(s)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},n}(HQ),bIe=function(e){return e instanceof SQ||e instanceof BQ?!0:e instanceof Q2&&e.type!==Pg&&e.type!==Ig},_Ie=function(e,n){switch(e){case 0:return Dg(n);case 2:return sIe(n);case 1:default:return Rg(n)}},CIe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},BIe=["-apple-system","system-ui"],SIe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(n){return BIe.indexOf(n)===-1}):e},kIe=function(e){Xs(n,e);function n(r,s){var a=e.call(this,r,s)||this;return a.canvas=s.canvas?s.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=s,a.canvas.width=Math.floor(s.width*s.scale),a.canvas.height=Math.floor(s.height*s.scale),a.canvas.style.width=s.width+"px",a.canvas.style.height=s.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-s.x,-s.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),a}return n.prototype.render=function(r){return sr(this,void 0,void 0,function(){var s,a;return Kn(this,function(i){switch(i.label){case 0:return s=Y1(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,jIe(s)];case 1:return a=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=xn(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n}(HQ),jIe=function(e){return new Promise(function(n,r){var s=new Image;s.onload=function(){n(s)},s.onerror=r,s.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},NIe=function(){function e(n){var r=n.id,s=n.enabled;this.id=r,this.enabled=s,this.start=Date.now()}return e.prototype.debug=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,sf([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,sf([this.id,this.getTime()+"ms"],n))},e.prototype.warn=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,sf([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.error=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,sf([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.instances={},e}(),EIe=function(){function e(n,r){var s;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new NIe({id:this.instanceName,enabled:n.logging}),this.cache=(s=n.cache)!==null&&s!==void 0?s:new XUe(this,n)}return e.instanceCount=1,e}(),kl=function(e,n){return n===void 0&&(n={}),TIe(e,n)};typeof window<"u"&&MQ.setContext(window);var TIe=function(e,n){return sr(void 0,void 0,void 0,function(){var r,s,a,i,o,c,A,u,h,d,f,g,m,y,x,p,v,b,w,_,k,C,k,j,B,E,P,I,U,N,D,T,L,Q,M,F,O,X,ae,$;return Kn(this,function(J){switch(J.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(s=r.defaultView,!s)throw new Error("Document is not attached to a Window");return a={allowTaint:(j=n.allowTaint)!==null&&j!==void 0?j:!1,imageTimeout:(B=n.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:n.proxy,useCORS:(E=n.useCORS)!==null&&E!==void 0?E:!1},i=Q1({logging:(P=n.logging)!==null&&P!==void 0?P:!0,cache:n.cache},a),o={windowWidth:(I=n.windowWidth)!==null&&I!==void 0?I:s.innerWidth,windowHeight:(U=n.windowHeight)!==null&&U!==void 0?U:s.innerHeight,scrollX:(N=n.scrollX)!==null&&N!==void 0?N:s.pageXOffset,scrollY:(D=n.scrollY)!==null&&D!==void 0?D:s.pageYOffset},c=new Ai(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),A=new EIe(i,c),u=(T=n.foreignObjectRendering)!==null&&T!==void 0?T:!1,h={allowTaint:(L=n.allowTaint)!==null&&L!==void 0?L:!1,onclone:n.onclone,ignoreElements:n.ignoreElements,inlineImages:u,copyStyles:u},A.logger.debug("Starting document clone with size "+c.width+"x"+c.height+" scrolled to "+-c.left+","+-c.top),d=new o4(A,e,h),f=d.clonedReferenceElement,f?[4,d.toIFrame(r,c)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=J.sent(),m=M2(f)||UUe(f)?c3e(f.ownerDocument):pp(A,f),y=m.width,x=m.height,p=m.left,v=m.top,b=FIe(A,f,n.backgroundColor),w={canvas:n.canvas,backgroundColor:b,scale:(M=(Q=n.scale)!==null&&Q!==void 0?Q:s.devicePixelRatio)!==null&&M!==void 0?M:1,x:((F=n.x)!==null&&F!==void 0?F:0)+p,y:((O=n.y)!==null&&O!==void 0?O:0)+v,width:(X=n.width)!==null&&X!==void 0?X:Math.ceil(y),height:(ae=n.height)!==null&&ae!==void 0?ae:Math.ceil(x)},u?(A.logger.debug("Document cloned, using foreign object rendering"),k=new kIe(A,w),[4,k.render(f)]):[3,3];case 2:return _=J.sent(),[3,5];case 3:return A.logger.debug("Document cloned, element located at "+p+","+v+" with size "+y+"x"+x+" using computed rendering"),A.logger.debug("Starting DOM parsing"),C=NQ(A,f),b===C.styles.backgroundColor&&(C.styles.backgroundColor=Za.TRANSPARENT),A.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),k=new wIe(A,w),[4,k.render(C)];case 4:_=J.sent(),J.label=5;case 5:return(!(($=n.removeContainer)!==null&&$!==void 0)||$)&&(o4.destroy(g)||A.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),A.logger.debug("Finished rendering"),[2,_]}})})},FIe=function(e,n,r){var s=n.ownerDocument,a=s.documentElement?Du(e,getComputedStyle(s.documentElement).backgroundColor):Za.TRANSPARENT,i=s.body?Du(e,getComputedStyle(s.body).backgroundColor):Za.TRANSPARENT,o=typeof r=="string"?Du(e,r):r===null?Za.TRANSPARENT:4294967295;return n===s.documentElement?eo(a)?eo(i)?o:i:a:o};const UIe=({onBack:e})=>{const{playSound:n}=it(),[r,s]=S.useState(!0),[a,i]=S.useState([]),[o,c]=S.useState([]),[A,u]=S.useState(new Set),[h,d]=S.useState({}),[f,g]=S.useState(!1),[m,y]=S.useState(!1),[x,p]=S.useState(!1),[v,b]=S.useState(null),[w,_]=S.useState(()=>({start:localStorage.getItem("skillOverTime_startDate"),end:localStorage.getItem("skillOverTime_endDate")})),C=S.useRef(null);S.useEffect(()=>{const F=()=>{p(window.innerWidth<768)};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),S.useEffect(()=>{(async()=>{s(!0);try{const O=await Pe.getHistoricalRatings(),X=await Pe.getCurrentTrueSkillRatings(),ae=await Pe.getAllPlayers(),$=new Map(ae.map(Y=>[Y.id,Y.name])),J=new Set;O.forEach(Y=>{Object.keys(Y.ratings).forEach(K=>{J.add(K)})});const le=O.map(Y=>{const K={matchNumber:Y.matchNumber,date:Y.date};return J.forEach(ue=>{const be=$.get(ue)||ue;Y.ratings[ue]!==void 0&&(K[be]=Y.ratings[ue],K[be+"_participated"]=Y.participants.includes(ue))}),K});c(le);const re=[];J.forEach(Y=>{const K=$.get(Y)||Y,ue=O.filter(be=>be.participants.includes(Y)).length;ue>0&&re.push({playerId:Y,playerName:K,currentRating:X[Y]||1200,actualMatchCount:ue})}),re.sort((Y,K)=>K.currentRating-Y.currentRating),i(re);const V=re.filter(Y=>Y.actualMatchCount>=5).slice(0,5).map(Y=>Y.playerId);u(new Set(V));const z=D(re.length),Z={};re.forEach((Y,K)=>{Z[Y.playerName]=z[K]}),d(Z)}catch(O){console.error("Error loading rating history:",O)}finally{s(!1)}})()},[]);const k=S.useMemo(()=>!w.start&&!w.end?o:o.filter(F=>{const O=new Date(F.date);return!(w.start&&O<new Date(w.start)||w.end&&O>new Date(w.end+"T23:59:59"))}),[o,w]),j=S.useCallback(F=>{const O=k;if(O.length<2)return{segments:[],participationPoints:[]};let X=-1,ae=-1;for(let le=0;le<O.length;le++)O[le][F+"_participated"]&&(X===-1&&(X=le),ae=le);if(X===-1)return{segments:[],participationPoints:[]};const $=[];for(let le=X;le<ae;le++){const re=O[le],V=O[le+1],z=V[F+"_participated"];$.push({data:[{x:re.matchNumber,y:re[F]},{x:V.matchNumber,y:V[F]}],style:z?"solid":"dotted"})}const J=O.filter(le=>le[F+"_participated"]).map(le=>({x:le.matchNumber,y:le[F],date:le.date}));return{segments:$,participationPoints:J}},[k]),B=()=>{n("buttonClick"),e()},E=F=>{n("buttonClick");const O=new Set(A);O.has(F)?O.delete(F):O.add(F),u(O)},P=()=>{n("buttonClick"),u(new Set(a.map(F=>F.playerId)))},I=()=>{n("buttonClick"),u(new Set)},U=S.useCallback((F,O)=>{n("buttonClick");const X=O||null;_(ae=>({...ae,[F]:X})),X?localStorage.setItem(`skillOverTime_${F}Date`,X):localStorage.removeItem(`skillOverTime_${F}Date`)},[n]),N=S.useCallback(()=>{n("buttonClick"),_({start:null,end:null}),localStorage.removeItem("skillOverTime_startDate"),localStorage.removeItem("skillOverTime_endDate")},[n]),D=F=>{const O=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16","#06B6D4","#A855F7","#F43F5E","#0EA5E9","#22C55E"],X=[];for(let ae=0;ae<F;ae++)X.push(O[ae%O.length]);return X},T=async()=>{if(C.current){n("buttonClick"),g(!0);try{const F=document.createElement("div");F.className="screenshot-title text-center mb-6 bg-gray-800 p-6",F.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Skill Rating Over Time</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,C.current.insertBefore(F,C.current.firstChild);const O=C.current.querySelectorAll(".no-screenshot");O.forEach(J=>{J.style.display="none"});const ae=(await kl(C.current,{backgroundColor:"#1F2937",scale:2,logging:!1,windowWidth:1400,windowHeight:C.current.scrollHeight})).toDataURL("image/png"),$=document.createElement("a");$.download=`skill-over-time-${new Date().toISOString().slice(0,10)}.png`,$.href=ae,$.click(),C.current.removeChild(F),O.forEach(J=>{J.style.display=""})}catch(F){console.error("Error creating screenshot:",F)}finally{g(!1)}}},L=()=>{n("buttonClick"),y(!m)},Q=S.useMemo(()=>{let F=1/0,O=-1/0;return a.filter(X=>A.has(X.playerId)).forEach(X=>{k.forEach(ae=>{const $=ae[X.playerName];$!==void 0&&(F=Math.min(F,$),O=Math.max(O,$))})}),F===1/0?[1e3,1400]:[Math.floor(F/50)*50-50,Math.ceil(O/50)*50+50]},[k,a,A]),M=S.useMemo(()=>{if(k.length===0)return[0,10];const F=k.map(O=>O.matchNumber);return[Math.min(...F),Math.max(...F)]},[k]);return l.jsxs("div",{ref:C,className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:B,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back"})]}),l.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Skill Rating Over Time"}),l.jsxs("button",{onClick:T,disabled:f,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg w-full sm:w-auto justify-center",children:[l.jsx(cl,{size:18,className:"mr-2"}),l.jsx("span",{children:f?"Capturing...":"Screenshot"})]})]}),r?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 sm:hidden no-screenshot",children:l.jsxs("button",{onClick:L,className:"w-full px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(uo,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Player Selection (",A.size," selected)"]})]}),m?l.jsx(Nr,{size:18}):l.jsx(Zn,{size:18})]})}),l.jsx("div",{className:`mb-4 no-screenshot ${!m&&x?"hidden":""}`,children:l.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Hr,{size:18,className:"mr-2 text-blue-400"}),l.jsx("span",{className:"font-semibold",children:"Date Range"})]}),l.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-gray-400",children:"From:"}),l.jsx("input",{type:"date",value:w.start||"",onChange:F=>U("start",F.target.value),className:"bg-gray-600 rounded px-2 py-1 text-sm border border-gray-500 focus:border-blue-500 focus:outline-none"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-gray-400",children:"To:"}),l.jsx("input",{type:"date",value:w.end||"",onChange:F=>U("end",F.target.value),className:"bg-gray-600 rounded px-2 py-1 text-sm border border-gray-500 focus:border-blue-500 focus:outline-none"})]}),(w.start||w.end)&&l.jsx("button",{onClick:N,className:"text-sm text-blue-400 hover:text-blue-300 underline",children:"Clear"})]})]})})}),l.jsx("div",{className:`mb-6 no-screenshot ${!m&&x?"hidden":""}`,children:l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2",children:[l.jsxs("h3",{className:"font-semibold flex items-center",children:[l.jsx(ht,{size:18,className:"mr-2"}),"Select Players to Compare"]}),l.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[l.jsx("button",{onClick:P,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 rounded text-sm flex-1 sm:flex-none",children:"Select All"}),l.jsx("button",{onClick:I,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm flex-1 sm:flex-none",children:"Clear All"})]})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:a.map(F=>l.jsxs("button",{onClick:()=>E(F.playerId),className:`p-2 sm:p-3 rounded-lg text-left transition-all ${A.has(F.playerId)?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:[l.jsx("div",{className:"font-medium truncate",children:F.playerName}),l.jsxs("div",{className:"text-xs sm:text-sm opacity-80",children:["Rating: ",F.currentRating]}),l.jsxs("div",{className:"text-xs opacity-60",children:[F.actualMatchCount," matches played"]})]},F.playerId))})]})}),A.size>0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-2 sm:p-4",children:[l.jsx("div",{style:{width:"100%",height:x?400:600},children:l.jsxs(gh,{width:x?380:1e3,height:x?380:580,domain:{x:M,y:Q},padding:{top:60,bottom:60,left:70,right:30},children:[l.jsx(pa,{orientation:"top",tickValues:k.filter(F=>F.matchNumber>0).map(F=>F.matchNumber),tickFormat:F=>{const O=k.find(ae=>ae.matchNumber===F);return O?new Date(O.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}):""},style:{axis:{stroke:"#6B7280"},tickLabels:{fill:"#9CA3AF",fontSize:x?8:10,angle:-45,textAnchor:"start"},grid:{stroke:"transparent"}}}),l.jsx(pa,{label:"Match Number",tickFormat:F=>Math.round(F),style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:x?12:14,padding:40},tickLabels:{fill:"#9CA3AF",fontSize:x?10:12},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(pa,{dependentAxis:!0,label:"Skill Rating",style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:x?12:14,padding:50},tickLabels:{fill:"#9CA3AF",fontSize:x?10:12},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),a.filter(F=>A.has(F.playerId)).flatMap(F=>{const{segments:O}=j(F.playerName),X=h[F.playerName],ae=v===F.playerId,$=v!==null&&!ae;return O.map((J,le)=>l.jsx(Ro,{data:J.data,style:{data:{stroke:X,strokeWidth:ae?5:3,strokeOpacity:$?.3:1,strokeDasharray:J.style==="dotted"?"8 4":void 0,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(b(F.playerId),[]),onMouseLeave:()=>(b(null),[])}}]},`${F.playerId}-seg-${le}`))}),a.filter(F=>A.has(F.playerId)).map(F=>{const{participationPoints:O}=j(F.playerName),X=h[F.playerName],ae=v===F.playerId,$=v!==null&&!ae;return l.jsx(mp,{data:O,size:ae?8:5,symbol:"circle",style:{data:{fill:X,fillOpacity:$?.3:1,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(b(F.playerId),[]),onMouseLeave:()=>(b(null),[])}}]},`${F.playerId}-scatter`)})]})}),l.jsx("div",{className:"flex flex-wrap gap-4 mt-4 justify-center p-3 bg-gray-800 rounded-lg",children:a.filter(F=>A.has(F.playerId)).map(F=>l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onMouseEnter:()=>b(F.playerId),onMouseLeave:()=>b(null),children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h[F.playerName]}}),l.jsx("span",{className:`text-sm ${v===F.playerId?"text-white font-bold":"text-gray-300"}`,children:F.playerName})]},F.playerId))})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-8 text-center",children:[l.jsx(Os,{size:48,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400",children:"Select players to view their rating progression"})]}),l.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Line Types:"})," Solid lines lead to matches where the player participated. Dotted lines show periods of inactivity (rating carried forward)."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Dot Markers:"})," Each dot marks a match where the player actually participated."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Legend Hover:"})," Hover over a player name in the legend to highlight their line."]}),l.jsx("p",{children:"Ratings use the TrueSkill system where new players start around 1200 and converge to their true skill level after ~20 matches."})]})]})})]})]})},IIe=({onClose:e,onDataReceived:n})=>{var F;const{connectionState:r,syncProgress:s,initAsHost:a,connect:i,disconnect:o,sendData:c,requestData:A,confirmDataOperation:u,rejectDataOperation:h}=xF(),{playSound:d}=it(),[f,g]=S.useState(""),[m,y]=S.useState(!1),[x,p]=S.useState(!1),[v,b]=S.useState(!1),[w,_]=S.useState(!1);S.useEffect(()=>{b(/^[A-Z0-9]{6,}$/.test(f))},[f]);const C=O=>{const X=O.target.value.replace(/[^A-Za-z0-9]/g,"").toUpperCase();g(X)},k=async()=>{try{d("buttonClick"),console.log("[ConnectionSetup] Initiating host session..."),_(!0);const O=await a();_(!1),console.log("[ConnectionSetup] Host session created with code:",O)}catch(O){_(!1),console.error("[ConnectionSetup] Failed to host session:",O)}},j=async()=>{if(v)try{d("buttonClick"),console.log("[ConnectionSetup] Joining session with code:",f),_(!0),await i(f),_(!1),console.log("[ConnectionSetup] Successfully joined session")}catch(O){_(!1),console.error("[ConnectionSetup] Failed to join session:",O)}},B=()=>{d("buttonClick"),console.log("[ConnectionSetup] Disconnecting from session"),o()},E=async()=>{try{d("buttonClick"),console.log("[ConnectionSetup] Sending data..."),await c()}catch(O){console.error("[ConnectionSetup] Failed to send data:",O)}},P=async()=>{try{d("buttonClick"),console.log("[ConnectionSetup] Requesting data..."),await A()}catch(O){console.error("[ConnectionSetup] Failed to request data:",O)}},I=()=>{if(d("buttonClick"),console.log("[ConnectionSetup] Confirming data operation"),!r.isConnected){console.error("[ConnectionSetup] Cannot confirm - not connected"),r.connectionCode&&(console.log("[ConnectionSetup] Attempting reconnection before confirming"),i(r.connectionCode).then(()=>{setTimeout(()=>{u()},1e3)}).catch(O=>{console.error("[ConnectionSetup] Reconnection failed:",O)}));return}u()},U=()=>{d("buttonClick"),console.log("[ConnectionSetup] Rejecting data operation"),h()},N=()=>{r.connectionCode&&(d("buttonClick"),navigator.clipboard.writeText(r.connectionCode),y(!0),setTimeout(()=>y(!1),2e3))},D=()=>{if(r.connectionCode){d("buttonClick");const O=new URL(window.location.href);O.searchParams.set("connect",r.connectionCode),navigator.clipboard.writeText(O.toString()),p(!0),setTimeout(()=>p(!1),2e3)}},T=()=>{d("buttonClick"),e&&e()},L=s.status==="awaiting-confirmation",Q=s.status==="pending-confirmation",M=r.detailedStatus;return S.useEffect(()=>{s.status==="complete"&&n&&(console.log("[ConnectionSetup] Data sync completed, calling onDataReceived"),n())},[s.status,n]),S.useEffect(()=>{console.log("[ConnectionSetup] Connection state update:",r.isConnected?"connected":"disconnected","peers:",r.peerCount,"status:",s.status)},[r.isConnected,r.peerCount,s.status]),l.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg w-full max-w-md mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-2xl font-bold flex items-center",children:[l.jsx(Gc,{className:"mr-2",size:22}),"P2P Connection"]}),e&&l.jsx("button",{onClick:T,className:"p-1 rounded-full hover:bg-gray-700","aria-label":"Close",children:l.jsx(Bn,{size:20})})]}),r.error&&l.jsxs("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-500 rounded-lg text-red-300 flex items-start",children:[l.jsx("span",{className:"flex-shrink-0 mr-2",children:""}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:"Connection Error"}),l.jsx("div",{className:"text-sm mt-1",children:r.error}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx("button",{onClick:r.isHost?k:B,className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-white text-sm",children:r.isHost?"Try Again":"Start Over"}),!r.isHost&&l.jsxs("button",{onClick:()=>i(f||r.connectionCode||""),className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 rounded text-white text-sm flex items-center",disabled:!f&&!r.connectionCode||w,children:[w?l.jsx(At,{size:14,className:"mr-1 animate-spin"}):l.jsx(zs,{size:14,className:"mr-1"}),"Reconnect"]})]})]})]}),M&&!r.error&&r.isConnecting&&l.jsx("div",{className:"mb-4 p-2 bg-blue-900/30 border border-blue-500 rounded-lg text-blue-300 text-sm",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mr-2 animate-pulse"}),M]})}),!r.isConnected&&!r.isConnecting?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex justify-center mb-4",children:l.jsx(q$,{className:"text-gray-400",size:48})}),l.jsx("p",{className:"text-center text-gray-300 mb-4",children:"Create a new connection to share data, or join an existing connection using a code."}),l.jsx("button",{className:"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg flex items-center justify-center",onClick:k,disabled:w,children:w?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:18,className:"mr-2 animate-spin"}),"Creating Connection..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Gc,{size:18,className:"mr-2"}),"Create New Connection"]})}),l.jsxs("div",{className:"relative flex items-center py-2",children:[l.jsx("div",{className:"flex-grow border-t border-gray-600"}),l.jsx("span",{className:"flex-shrink mx-3 text-gray-400",children:"or"}),l.jsx("div",{className:"flex-grow border-t border-gray-600"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsx("input",{type:"text",placeholder:"Enter code",value:f,onChange:C,className:"flex-grow px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-center font-mono text-lg uppercase tracking-wider",maxLength:12,disabled:w}),l.jsx("button",{className:`py-3 px-4 ${v&&!w?"bg-green-600 hover:bg-green-500":"bg-gray-600 cursor-not-allowed"} text-white rounded-lg flex-shrink-0 flex items-center justify-center`,onClick:j,disabled:!v||w,children:w?l.jsx(At,{size:18,className:"animate-spin"}):"Join"})]})]}):r.isConnecting&&!r.connectionCode?l.jsxs("div",{className:"text-center py-4",children:[l.jsx(At,{className:"animate-spin mx-auto mb-4",size:48}),l.jsx("p",{className:"text-lg mb-2",children:"Establishing connection..."}),l.jsx("p",{className:"text-sm text-gray-400 mb-4",children:r.isHost?"Creating secure connection code...":"Connecting to remote device..."}),l.jsx("button",{className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg",onClick:B,children:"Cancel"})]}):r.connectionCode&&!r.isConnected?l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex justify-center mb-2",children:l.jsx(At,{className:"animate-spin text-blue-400",size:48})}),l.jsx("div",{className:"flex items-center justify-center text-lg font-medium mb-2",children:l.jsx("span",{children:r.isHost?"Waiting for Connection":"Connecting to Host..."})}),r.isHost&&r.connectionCode&&l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Share this code with others:"}),l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-grow py-3 px-4 bg-gray-700 border border-gray-600 rounded-l-lg text-center font-mono text-xl tracking-wider",children:r.connectionCode}),l.jsx("button",{onClick:N,className:"px-3 bg-blue-600 hover:bg-blue-500 rounded-r-lg flex items-center",title:"Copy code",children:m?l.jsx(Xn,{size:18}):l.jsx(vx,{size:18})})]}),l.jsxs("button",{onClick:D,className:"mt-2 w-full py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-center",children:[l.jsx(xx,{size:16,className:"mr-2"}),x?"Link Copied!":"Copy as Link"]})]}),l.jsx("button",{className:"w-full py-2 bg-red-600 hover:bg-red-500 rounded-lg",onClick:B,children:"Cancel"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex justify-center mb-2",children:l.jsx(C3,{className:"text-green-400",size:48})}),l.jsxs("div",{className:"flex items-center justify-center text-lg font-medium mb-2",children:[l.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),l.jsx("span",{children:r.isHost?`Hosting Connection (${r.peerCount} ${r.peerCount===1?"peer":"peers"} connected)`:"Connected to Host"})]}),r.isHost&&r.connectionCode&&l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Share this code with others:"}),l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-grow py-3 px-4 bg-gray-700 border border-gray-600 rounded-l-lg text-center font-mono text-xl tracking-wider",children:r.connectionCode}),l.jsx("button",{onClick:N,className:"px-3 bg-blue-600 hover:bg-blue-500 rounded-r-lg flex items-center",title:"Copy code",children:m?l.jsx(Xn,{size:18}):l.jsx(vx,{size:18})})]}),l.jsxs("button",{onClick:D,className:"mt-2 w-full py-2 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-center",children:[l.jsx(xx,{size:16,className:"mr-2"}),x?"Link Copied!":"Copy as Link"]})]}),l.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-700",children:[l.jsxs("h3",{className:"text-lg font-medium mb-2 flex items-center",children:[l.jsx(el,{size:18,className:"mr-2 text-blue-400"}),"Share Match Data"]}),Q&&l.jsx("div",{className:"bg-yellow-900/30 border border-yellow-600 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Aa,{size:18,className:"text-yellow-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-yellow-400 mb-1",children:s.message}),l.jsxs("p",{className:"text-sm text-gray-300 mb-3",children:["Do you want to ",s.isDataRequest?"send":"receive"," match data?"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:I,className:"px-3 py-1 bg-green-600 hover:bg-green-500 rounded",children:s.isDataRequest?"Send Data":"Receive Data"}),l.jsx("button",{onClick:U,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded",children:"Decline"})]})]})]})}),s.status==="idle"&&!Q&&!L&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Exchange match history, player stats, and game data with the connected device."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[l.jsxs("button",{onClick:E,className:"flex-1 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg flex items-center justify-center",children:[l.jsx(x8,{size:16,className:"mr-2"}),"Send My Data"]}),l.jsxs("button",{onClick:P,className:"flex-1 py-2 bg-green-600 hover:bg-green-500 rounded-lg flex items-center justify-center",children:[l.jsx(y8,{size:16,className:"mr-2"}),"Request Data"]})]})]}),L&&l.jsx("div",{className:"p-3 bg-blue-900/30 border border-blue-600 rounded-lg mb-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(At,{size:18,className:"text-blue-500 mr-2 mt-0.5 animate-spin"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-blue-300",children:s.message}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Waiting for the other device to respond..."}),l.jsx("button",{onClick:U,className:"mt-2 px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Cancel"})]})]})}),(s.status==="preparing"||s.status==="sending"||s.status==="receiving"||s.status==="processing")&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${s.percent}%`}})}),l.jsx("p",{className:"text-center text-sm",children:s.message})]}),s.status==="complete"&&l.jsxs("div",{className:"p-3 bg-green-900/30 border border-green-600 rounded-lg mb-4",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx(Xn,{size:18,className:"text-green-500 mr-2 mt-0.5"}),l.jsx("p",{className:"text-green-300",children:s.message})]}),l.jsx("div",{className:"mt-2 text-right",children:l.jsx("button",{onClick:()=>{h()},className:"px-3 py-1 bg-green-800 hover:bg-green-700 rounded text-sm",children:"Done"})})]}),s.status==="error"&&l.jsx("div",{className:"p-3 bg-red-900/30 border border-red-500 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Aa,{size:18,className:"text-red-500 mr-2 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-red-300",children:s.message}),l.jsxs("div",{className:"mt-2 flex gap-2",children:[l.jsx("button",{onClick:()=>{h()},className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Dismiss"}),((F=s.error)==null?void 0:F.includes("connection"))&&l.jsxs("button",{onClick:()=>{r.connectionCode&&(h(),i(r.connectionCode))},className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 rounded text-sm flex items-center",children:[l.jsx(zs,{size:14,className:"mr-1"}),"Reconnect"]})]})]})]})})]}),l.jsx("div",{className:"mt-4 pt-4 border-t border-gray-700",children:l.jsx("button",{onClick:B,className:"w-full py-2 bg-red-600 hover:bg-red-500 rounded-lg",children:"Disconnect"})})]})]})},PIe=({isOpen:e,onClose:n,onDataReceived:r})=>{const{playSound:s}=it(),a=S.useRef(null),i=c=>{a.current&&!a.current.contains(c.target)&&o()},o=()=>{s("buttonClick"),n()};return S.useEffect(()=>{const c=A=>{A.key==="Escape"&&e&&o()};return e&&(document.addEventListener("keydown",c),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",c),document.body.style.overflow=""}},[e]),e?l.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:i,children:l.jsx("div",{ref:a,className:"max-w-md w-full",children:l.jsx(IIe,{onClose:o,onDataReceived:r})})}):null},QIe=({player:e,onDelete:n,isDeleting:r})=>{const{playSound:s}=it(),[a,i]=S.useState(!1),[o,c]=S.useState(!1),A=()=>{s("buttonClick"),i(!a)},u=()=>{if(s("buttonClick"),!o){c(!0);return}n(e.id),c(!1)},h=()=>{s("buttonClick"),c(!1)},d=f=>new Date(f).toLocaleDateString()+" "+new Date(f).toLocaleTimeString();return l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 border border-gray-600",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(ht,{size:20,className:"mr-2 text-blue-400"}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-lg",children:e.name}),l.jsxs("p",{className:"text-sm text-gray-400",children:["Created: ",d(e.dateCreated)]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(qe,{text:"View player data in JSON format",children:l.jsxs("button",{onClick:A,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm flex items-center",children:[a?l.jsx(Zn,{size:16}):l.jsx(ud,{size:16}),l.jsx("span",{className:"ml-1",children:"JSON"})]})}),o?l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:u,disabled:r,className:"px-3 py-1 bg-red-500 hover:bg-red-400 rounded text-sm",children:"Confirm"}),l.jsx("button",{onClick:h,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Cancel"})]}):l.jsx(qe,{text:"Delete this player (only available for players with no matches)",children:l.jsxs("button",{onClick:u,disabled:r,className:`px-3 py-1 bg-red-600 hover:bg-red-500 rounded text-sm flex items-center ${r?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx(jc,{size:16,className:"mr-1"}),r?"Deleting...":"Delete"]})})]})]}),l.jsx("div",{className:"text-sm text-gray-300 mb-2",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("span",{children:["Games: ",l.jsx("strong",{children:e.totalGames})]}),l.jsxs("span",{children:["ELO: ",l.jsx("strong",{children:e.elo})]}),l.jsxs("span",{children:["Device ID: ",l.jsx("strong",{children:e.deviceId||"N/A"})]}),l.jsxs("span",{children:["Level: ",l.jsx("strong",{children:e.level||1})]})]})}),o&&l.jsx("div",{className:"bg-red-900/30 border border-red-600 p-3 rounded-lg mt-3",children:l.jsxs("p",{className:"text-red-300 text-sm",children:[l.jsx("strong",{children:"Warning:"}),' This will permanently delete "',e.name,'" from your player database. This action cannot be undone.']})}),a&&l.jsx("div",{className:"mt-3 bg-gray-800 rounded-lg p-3",children:l.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto",children:JSON.stringify(e,null,2)})})]})},MIe=({isOpen:e,onClose:n,onPlayerDeleted:r})=>{const{playSound:s}=it(),a=S.useRef(null),[i,o]=S.useState([]),[c,A]=S.useState(!1),[u,h]=S.useState(null),[d,f]=S.useState(new Set);S.useEffect(()=>{e&&g()},[e]);const g=async()=>{try{A(!0),h(null);const p=await Pe.getPlayersWithNoGames();o(p)}catch(p){console.error("Error loading zero-game players:",p),h("Failed to load player data")}finally{A(!1)}},m=async p=>{try{f(b=>new Set([...b,p])),await Pe.deletePlayer(p)?(o(b=>b.filter(w=>w.id!==p)),r(),s("phaseChange")):h(`Failed to delete player "${p}". They may have recorded matches.`)}catch(v){console.error("Error deleting player:",v),h(`Error deleting player "${p}"`)}finally{f(v=>{const b=new Set(v);return b.delete(p),b})}},y=p=>{a.current&&!a.current.contains(p.target)&&x()},x=()=>{s("buttonClick"),n()};return S.useEffect(()=>{const p=v=>{v.key==="Escape"&&e&&x()};return e&&(document.addEventListener("keydown",p),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",p),document.body.style.overflow=""}},[e]),e?l.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:y,children:l.jsxs("div",{ref:a,className:"max-w-4xl w-full max-h-[80vh] bg-gray-800 rounded-lg border border-gray-600 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold",children:"Edit Player Database"}),l.jsxs("p",{className:"text-gray-400 text-sm",children:["Players with no recorded matches (",i.length," found)"]})]}),l.jsx("button",{onClick:x,className:"text-gray-400 hover:text-white p-2",children:l.jsx(Bn,{size:24})})]}),l.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[c&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-400",children:"Loading players..."})}),u&&l.jsx("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300",children:u}),!c&&i.length===0&&!u&&l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ht,{size:48,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400",children:"No players with zero games found"}),l.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"All players in your database have recorded match history."})]}),!c&&i.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"bg-amber-900/30 border border-amber-600 p-3 rounded-lg mb-4",children:l.jsxs("p",{className:"text-amber-300 text-sm",children:[l.jsx("strong",{children:"Note:"})," Only players with no recorded matches can be deleted. This is a safety measure to prevent accidental data loss."]})}),i.map(p=>l.jsx(QIe,{player:p,onDelete:m,isDeleting:d.has(p.id)},p.id))]})]}),l.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-700",children:l.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"Close"})})]})}):null},DIe=({onBack:e,onNavigate:n})=>{const{playSound:r}=it(),{connectionState:s}=xF(),[a,i]=S.useState(!1),[o,c]=S.useState(!1),[A,u]=S.useState(null),[h,d]=S.useState(!1),[f,g]=S.useState(!1),[m,y]=S.useState(!1),[x,p]=S.useState("replace"),[v,b]=S.useState(!1),[w,_]=S.useState(!1),C=async()=>{const O=await Pe.hasMatchData();i(O)},k=async()=>{try{const O=await Pe.getPlayersWithNoGames();_(O.length>0)}catch(O){console.error("Error checking for zero-game players:",O),_(!1)}};S.useEffect(()=>{C(),k()},[]);const j=O=>{r("buttonClick"),n(O)},B=()=>{r("buttonClick"),e()},E=()=>{r("buttonClick"),g(!0)},P=()=>{g(!1)},I=()=>{console.log("Data received, refreshing match data status"),C()},U=()=>{r("buttonClick"),b(!0)},N=()=>{b(!1)},D=()=>{k(),C()},T=async()=>{try{c(!0),r("buttonClick");const O=await Pe.exportData(),X=JSON.stringify(O,null,2),ae=new Blob([X],{type:"application/json"}),$=URL.createObjectURL(ae),J=document.createElement("a");J.href=$,J.download=`guards-of-atlantis-stats-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(J),J.click(),setTimeout(()=>{document.body.removeChild(J),URL.revokeObjectURL($),c(!1)},100)}catch(O){console.error("Error exporting data:",O),c(!1)}},L=()=>{if(!m){r("buttonClick"),y(!0);return}r("buttonClick");const O=document.createElement("input");O.type="file",O.accept=".json",O.onchange=async X=>{var $;const ae=($=X.target.files)==null?void 0:$[0];if(ae)try{const J=await ae.text(),le=JSON.parse(J);if(!le.players||!le.matches||!le.matchPlayers){u("Invalid data format");return}await Pe.importData(le,x)?(r("phaseChange"),await C(),u(null),y(!1)):u("Failed to import data")}catch(J){console.error("Error importing data:",J),u("Error importing data")}},O.click()},Q=()=>{r("buttonClick"),y(!1)},M=async()=>{if(!h){d(!0),r("buttonClick");return}try{r("buttonClick"),await Pe.clearAllData()&&(i(!1),d(!1))}catch(O){console.error("Error deleting data:",O)}},F={replace:"This will delete all your existing match history and player statistics and replace them with the imported data. Use this when setting up a new device or completely refreshing your data.",merge:"This will add new matches from the imported file while preserving your existing data. Any new match records will be added to your match records. Use this to synchronize data between devices."};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("button",{onClick:B,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Setup"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Match Statistics"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-8",children:[l.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${a?"":"opacity-50 pointer-events-none"}`,onClick:()=>a&&j("player-stats"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(ht,{size:24,className:"mr-3 text-blue-400"}),l.jsx("span",{children:"Player Stats"})]}),l.jsx("p",{className:"text-gray-300",children:"View detailed player performance statistics, favorite heroes, and ELO ratings."}),!a&&l.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[l.jsx(Gt,{size:16,className:"mr-1"}),l.jsx("span",{children:"No match data available"})]})]}),l.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${a?"":"opacity-50 pointer-events-none"}`,onClick:()=>a&&j("hero-stats"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(jt,{size:24,className:"mr-3 text-purple-400"}),l.jsx("span",{children:"Hero Stats"})]}),l.jsx("p",{className:"text-gray-300",children:"Analyze hero win rates, synergies, and counters based on your match history."}),!a&&l.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[l.jsx(Gt,{size:16,className:"mr-1"}),l.jsx("span",{children:"No match data available"})]})]}),l.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${a?"":"opacity-50 pointer-events-none"}`,onClick:()=>a&&j("match-history"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(z8,{size:24,className:"mr-3 text-green-400"}),l.jsx("span",{children:"Match History"})]}),l.jsx("p",{className:"text-gray-300",children:"Browse past matches, view details, and manage your match history."}),!a&&l.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[l.jsx(Gt,{size:16,className:"mr-1"}),l.jsx("span",{children:"No match data available"})]})]}),l.jsxs("div",{className:"bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors",onClick:()=>j("record-match"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(P8,{size:24,className:"mr-3 text-orange-400"}),l.jsx("span",{children:"Record Match"})]}),l.jsx("p",{className:"text-gray-300",children:"Manually log match results for games played outside the application."})]}),l.jsxs("div",{className:`bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors ${a?"":"opacity-50 pointer-events-none"}`,onClick:()=>a&&j("match-maker"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(wx,{size:24,className:"mr-3 text-purple-400"}),l.jsx("span",{children:"Match Maker"})]}),l.jsx("p",{className:"text-gray-300",children:"Generate balanced teams based on player rankings or experience for fair matches."}),!a&&l.jsxs("div",{className:"mt-3 text-yellow-400 text-sm flex items-center",children:[l.jsx(Gt,{size:16,className:"mr-1"}),l.jsx("span",{children:"No match data available"})]})]}),l.jsxs("div",{className:"bg-gray-700 hover:bg-gray-600 rounded-lg p-6 cursor-pointer transition-colors",onClick:()=>j("hero-info"),children:[l.jsxs("div",{className:"flex items-center text-xl font-semibold mb-4",children:[l.jsx(a8,{size:24,className:"mr-3 text-teal-400"}),l.jsx("span",{children:"Hero Guide"})]}),l.jsx("p",{className:"text-gray-300",children:"Browse complete information about all heroes, including stats, roles, and abilities."})]})]}),l.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-6",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("h3",{className:"text-xl font-bold",children:"Data Management"}),l.jsx(qe,{text:"Share, import, and export features allow you to transfer your match data between devices or merge game records from different devices.",position:"right",maxWidth:"max-w-md",children:l.jsx(Gt,{size:16,className:"ml-2 text-blue-400 cursor-help"})})]}),l.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"mr-3 p-2 bg-blue-800 rounded-full flex-shrink-0",children:l.jsx(Gc,{size:24,className:"text-blue-300"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h4",{className:"font-semibold text-lg text-blue-300 mb-1",children:"Direct Data Sharing"}),l.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Share game data directly between devices with a simple connection code."}),l.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg flex items-center",children:s.isConnected?l.jsxs(l.Fragment,{children:[l.jsx(C3,{size:16,className:"mr-2 text-green-300"}),l.jsx("span",{children:"Connected"})]}):l.jsxs(l.Fragment,{children:[l.jsx(Gc,{size:16,className:"mr-2"}),l.jsx("span",{children:"Connect and Share"})]})})]})]})}),l.jsx("div",{className:"bg-green-900/30 border border-green-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"mr-3 p-2 bg-green-800 rounded-full flex-shrink-0",children:l.jsx(M8,{size:24,className:"text-green-300"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h4",{className:"font-semibold text-lg text-green-300 mb-1",children:"Manual Data Sharing"}),l.jsx("p",{className:"text-sm text-gray-300 mb-3",children:"Manually import or export data files to share data between devices."}),m?l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg mb-4",children:[l.jsx("h4",{className:"font-semibold text-base mb-3",children:"Import Options"}),l.jsxs("div",{className:"mb-4 space-y-3",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("input",{type:"radio",id:"replaceMode",name:"importMode",checked:x==="replace",onChange:()=>p("replace"),className:"mt-1 mr-3"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("label",{htmlFor:"replaceMode",className:"flex items-center font-medium cursor-pointer",children:["Replace all data",l.jsx(qe,{text:F.replace,position:"right",maxWidth:"max-w-md",children:l.jsx(Gt,{size:16,className:"ml-2 text-blue-400 cursor-help"})})]}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Delete all existing data and replace with imported data."})]})]}),l.jsxs("div",{className:"flex items-start",children:[l.jsx("input",{type:"radio",id:"mergeMode",name:"importMode",checked:x==="merge",onChange:()=>p("merge"),className:"mt-1 mr-3"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("label",{htmlFor:"mergeMode",className:"flex items-center font-medium cursor-pointer",children:["Merge with existing data",l.jsx(qe,{text:F.merge,position:"right",maxWidth:"max-w-md",children:l.jsx(Gt,{size:16,className:"ml-2 text-blue-400 cursor-help"})})]}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add new data while preserving existing records."})]})]})]}),l.jsx("div",{className:"bg-amber-900/30 border border-amber-600 p-3 rounded-lg mb-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Aa,{size:16,className:"mr-2 mt-0.5 flex-shrink-0 text-amber-400"}),l.jsx("div",{children:x==="replace"?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"font-semibold text-amber-400",children:"Warning: All existing data will be deleted!"}),l.jsx("p",{className:"mt-1 text-sm",children:"This action will permanently delete all your match history and player statistics and replace them with the imported data."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"font-semibold text-amber-400",children:"Merge Information:"}),l.jsx("p",{className:"mt-1 text-sm",children:"Player stats will be combined (wins, losses, ELO), and new matches will be added to your history. Matches with the same ID will be skipped to avoid duplicates."})]})})]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsxs("button",{onClick:L,className:"px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg flex items-center",children:[l.jsx($0,{size:18,className:"mr-2"}),l.jsx("span",{children:"Proceed with Import"})]}),l.jsx("button",{onClick:Q,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"Cancel"})]})]}):l.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.jsx(qe,{text:"Export match statistics data to a file. Use this to backup your data or transfer it to another device.",children:l.jsxs("button",{onClick:T,disabled:!a||o,className:`px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg flex items-center ${!a||o?"opacity-50 cursor-not-allowed":""}`,children:[l.jsx(P0,{size:18,className:"mr-2"}),l.jsx("span",{children:o?"Exporting...":"Export Data"})]})}),l.jsx(qe,{text:"Import match statistics data from a previously exported file.",children:l.jsxs("button",{onClick:L,className:"px-4 py-2 bg-green-600 hover:bg-green-500 rounded-lg flex items-center",children:[l.jsx($0,{size:18,className:"mr-2"}),l.jsx("span",{children:"Import Data"})]})}),w&&l.jsx(qe,{text:"Manage players with no recorded matches. You can view their data and delete them if needed.",children:l.jsxs("button",{onClick:U,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 rounded-lg flex items-center",children:[l.jsx(D$,{size:18,className:"mr-2"}),l.jsx("span",{children:"Edit Player Data"})]})}),l.jsx(qe,{text:"Delete all match statistics data permanently",children:l.jsxs("button",{onClick:M,disabled:!a,className:`px-4 py-2 ${h?"bg-red-500 hover:bg-red-400":"bg-red-700 hover:bg-red-600"} rounded-lg flex items-center ${a?"":"opacity-50 cursor-not-allowed"}`,children:[l.jsx(jc,{size:18,className:"mr-2"}),l.jsx("span",{children:h?"Confirm Delete":"Delete All Data"})]})})]})]})]})}),A&&l.jsx("div",{className:"mt-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300",children:A}),l.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"mb-2",children:"Match data is stored locally on this device using your browser's storage. It is recommended you back up your data locally with Export Data (in case your browser's storage gets cleared)."}),l.jsx("p",{children:"Use direct data sharing, or manually import and export data to transfer match records between devices or merge records from different devices (e.g. with friends)."})]})]})})]}),l.jsx(PIe,{isOpen:f,onClose:P,onDataReceived:I}),l.jsx(MIe,{isOpen:v,onClose:N,onPlayerDeleted:D})]})};function RIe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;A=!1}else for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function $Ie(e,n,r){return n=VIe(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function d4(e,n){return HIe(e)||RIe(e,n)||zQ(e,n)||GIe()}function OIe(e){return LIe(e)||zIe(e)||zQ(e)||KIe()}function LIe(e){if(Array.isArray(e))return sw(e)}function HIe(e){if(Array.isArray(e))return e}function zIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zQ(e,n){if(e){if(typeof e=="string")return sw(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sw(e,n)}}function sw(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}function KIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WIe(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function VIe(e){var n=WIe(e,"string");return typeof n=="symbol"?n:String(n)}var qIe=function(n,r){var s=new Set(r);return Object.assign.apply(Object,[{}].concat(OIe(Object.entries(n).filter(function(a){var i=d4(a,1),o=i[0];return!s.has(o)}).map(function(a){var i=d4(a,2),o=i[0],c=i[1];return $Ie({},o,c)}))))};function aw(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function XIe(e){if(Array.isArray(e))return e}function YIe(e){if(Array.isArray(e))return aw(e)}function JIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZIe(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function ePe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nPe(e,n){return XIe(e)||ZIe(e,n)||KQ(e,n)||ePe()}function h4(e){return YIe(e)||JIe(e)||KQ(e)||tPe()}function KQ(e,n){if(e){if(typeof e=="string")return aw(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aw(e,n):void 0}}function rPe(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.wrapperElementType,s=r===void 0?"div":r,a=n.nodeMapper,i=a===void 0?function(h){return h}:a,o=n.methodNames,c=o===void 0?[]:o,A=n.initPropNames,u=A===void 0?[]:A;return S.forwardRef(function(h,d){var f=S.useRef(),g=S.useMemo(function(){var x=Object.fromEntries(u.filter(function(p){return h.hasOwnProperty(p)}).map(function(p){return[p,h[p]]}));return e(x)},[]);f4(function(){g(i(f.current))},S.useLayoutEffect),f4(function(){return g._destructor instanceof Function?g._destructor:void 0});var m=S.useCallback(function(x){for(var p=arguments.length,v=new Array(p>1?p-1:0),b=1;b<p;b++)v[b-1]=arguments[b];return g[x]instanceof Function?g[x].apply(g,v):void 0},[g]),y=S.useRef({});return Object.keys(qIe(h,[].concat(h4(c),h4(u)))).filter(function(x){return y.current[x]!==h[x]}).forEach(function(x){return m(x,h[x])}),y.current=h,S.useImperativeHandle(d,function(){return Object.fromEntries(c.map(function(x){return[x,function(){for(var p=arguments.length,v=new Array(p),b=0;b<p;b++)v[b]=arguments[b];return m.apply(void 0,[x].concat(v))}]}))},[m]),G.createElement(s,{ref:f})})}function f4(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.useEffect,r=S.useRef(),s=S.useRef(!1),a=S.useRef(!1),i=S.useState(0),o=nPe(i,2);o[0];var c=o[1];s.current&&(a.current=!0),n(function(){return s.current||(r.current=e(),s.current=!0),c(function(A){return A+1}),function(){a.current&&r.current&&r.current()}},[])}var iw="http://www.w3.org/1999/xhtml";const g4={svg:"http://www.w3.org/2000/svg",xhtml:iw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kp(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),g4.hasOwnProperty(n)?{space:g4[n],local:e}:e}function sPe(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===iw&&n.documentElement.namespaceURI===iw?n.createElement(e):n.createElementNS(r,e)}}function aPe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function GQ(e){var n=kp(e);return(n.local?aPe:sPe)(n)}function iPe(){}function D2(e){return e==null?iPe:function(){return this.querySelector(e)}}function oPe(e){typeof e!="function"&&(e=D2(e));for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a)for(var i=n[a],o=i.length,c=s[a]=new Array(o),A,u,h=0;h<o;++h)(A=i[h])&&(u=e.call(A,A.__data__,h,i))&&("__data__"in A&&(u.__data__=A.__data__),c[h]=u);return new Gr(s,this._parents)}function lPe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cPe(){return[]}function WQ(e){return e==null?cPe:function(){return this.querySelectorAll(e)}}function APe(e){return function(){return lPe(e.apply(this,arguments))}}function uPe(e){typeof e=="function"?e=APe(e):e=WQ(e);for(var n=this._groups,r=n.length,s=[],a=[],i=0;i<r;++i)for(var o=n[i],c=o.length,A,u=0;u<c;++u)(A=o[u])&&(s.push(e.call(A,A.__data__,u,o)),a.push(A));return new Gr(s,a)}function VQ(e){return function(){return this.matches(e)}}function qQ(e){return function(n){return n.matches(e)}}var dPe=Array.prototype.find;function hPe(e){return function(){return dPe.call(this.children,e)}}function fPe(){return this.firstElementChild}function gPe(e){return this.select(e==null?fPe:hPe(typeof e=="function"?e:qQ(e)))}var mPe=Array.prototype.filter;function pPe(){return Array.from(this.children)}function yPe(e){return function(){return mPe.call(this.children,e)}}function vPe(e){return this.selectAll(e==null?pPe:yPe(typeof e=="function"?e:qQ(e)))}function xPe(e){typeof e!="function"&&(e=VQ(e));for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a)for(var i=n[a],o=i.length,c=s[a]=[],A,u=0;u<o;++u)(A=i[u])&&e.call(A,A.__data__,u,i)&&c.push(A);return new Gr(s,this._parents)}function XQ(e){return new Array(e.length)}function wPe(){return new Gr(this._enter||this._groups.map(XQ),this._parents)}function Og(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Og.prototype={constructor:Og,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function bPe(e){return function(){return e}}function _Pe(e,n,r,s,a,i){for(var o=0,c,A=n.length,u=i.length;o<u;++o)(c=n[o])?(c.__data__=i[o],s[o]=c):r[o]=new Og(e,i[o]);for(;o<A;++o)(c=n[o])&&(a[o]=c)}function CPe(e,n,r,s,a,i,o){var c,A,u=new Map,h=n.length,d=i.length,f=new Array(h),g;for(c=0;c<h;++c)(A=n[c])&&(f[c]=g=o.call(A,A.__data__,c,n)+"",u.has(g)?a[c]=A:u.set(g,A));for(c=0;c<d;++c)g=o.call(e,i[c],c,i)+"",(A=u.get(g))?(s[c]=A,A.__data__=i[c],u.delete(g)):r[c]=new Og(e,i[c]);for(c=0;c<h;++c)(A=n[c])&&u.get(f[c])===A&&(a[c]=A)}function BPe(e){return e.__data__}function SPe(e,n){if(!arguments.length)return Array.from(this,BPe);var r=n?CPe:_Pe,s=this._parents,a=this._groups;typeof e!="function"&&(e=bPe(e));for(var i=a.length,o=new Array(i),c=new Array(i),A=new Array(i),u=0;u<i;++u){var h=s[u],d=a[u],f=d.length,g=kPe(e.call(h,h&&h.__data__,u,s)),m=g.length,y=c[u]=new Array(m),x=o[u]=new Array(m),p=A[u]=new Array(f);r(h,d,y,x,p,g,n);for(var v=0,b=0,w,_;v<m;++v)if(w=y[v]){for(v>=b&&(b=v+1);!(_=x[b])&&++b<m;);w._next=_||null}}return o=new Gr(o,s),o._enter=c,o._exit=A,o}function kPe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jPe(){return new Gr(this._exit||this._groups.map(XQ),this._parents)}function NPe(e,n,r){var s=this.enter(),a=this,i=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),n!=null&&(a=n(a),a&&(a=a.selection())),r==null?i.remove():r(i),s&&a?s.merge(a).order():a}function EPe(e){for(var n=e.selection?e.selection():e,r=this._groups,s=n._groups,a=r.length,i=s.length,o=Math.min(a,i),c=new Array(a),A=0;A<o;++A)for(var u=r[A],h=s[A],d=u.length,f=c[A]=new Array(d),g,m=0;m<d;++m)(g=u[m]||h[m])&&(f[m]=g);for(;A<a;++A)c[A]=r[A];return new Gr(c,this._parents)}function TPe(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var s=e[n],a=s.length-1,i=s[a],o;--a>=0;)(o=s[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function FPe(e){e||(e=UPe);function n(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var r=this._groups,s=r.length,a=new Array(s),i=0;i<s;++i){for(var o=r[i],c=o.length,A=a[i]=new Array(c),u,h=0;h<c;++h)(u=o[h])&&(A[h]=u);A.sort(n)}return new Gr(a,this._parents).order()}function UPe(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function IPe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function PPe(){return Array.from(this)}function QPe(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,i=s.length;a<i;++a){var o=s[a];if(o)return o}return null}function MPe(){let e=0;for(const n of this)++e;return e}function DPe(){return!this.node()}function RPe(e){for(var n=this._groups,r=0,s=n.length;r<s;++r)for(var a=n[r],i=0,o=a.length,c;i<o;++i)(c=a[i])&&e.call(c,c.__data__,i,a);return this}function $Pe(e){return function(){this.removeAttribute(e)}}function OPe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function LPe(e,n){return function(){this.setAttribute(e,n)}}function HPe(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function zPe(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function KPe(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function GPe(e,n){var r=kp(e);if(arguments.length<2){var s=this.node();return r.local?s.getAttributeNS(r.space,r.local):s.getAttribute(r)}return this.each((n==null?r.local?OPe:$Pe:typeof n=="function"?r.local?KPe:zPe:r.local?HPe:LPe)(r,n))}function YQ(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function WPe(e){return function(){this.style.removeProperty(e)}}function VPe(e,n,r){return function(){this.style.setProperty(e,n,r)}}function qPe(e,n,r){return function(){var s=n.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,r)}}function XPe(e,n,r){return arguments.length>1?this.each((n==null?WPe:typeof n=="function"?qPe:VPe)(e,n,r??"")):aA(this.node(),e)}function aA(e,n){return e.style.getPropertyValue(n)||YQ(e).getComputedStyle(e,null).getPropertyValue(n)}function YPe(e){return function(){delete this[e]}}function JPe(e,n){return function(){this[e]=n}}function ZPe(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function eQe(e,n){return arguments.length>1?this.each((n==null?YPe:typeof n=="function"?ZPe:JPe)(e,n)):this.node()[e]}function JQ(e){return e.trim().split(/^|\s+/)}function R2(e){return e.classList||new ZQ(e)}function ZQ(e){this._node=e,this._names=JQ(e.getAttribute("class")||"")}ZQ.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function eM(e,n){for(var r=R2(e),s=-1,a=n.length;++s<a;)r.add(n[s])}function tM(e,n){for(var r=R2(e),s=-1,a=n.length;++s<a;)r.remove(n[s])}function tQe(e){return function(){eM(this,e)}}function nQe(e){return function(){tM(this,e)}}function rQe(e,n){return function(){(n.apply(this,arguments)?eM:tM)(this,e)}}function sQe(e,n){var r=JQ(e+"");if(arguments.length<2){for(var s=R2(this.node()),a=-1,i=r.length;++a<i;)if(!s.contains(r[a]))return!1;return!0}return this.each((typeof n=="function"?rQe:n?tQe:nQe)(r,n))}function aQe(){this.textContent=""}function iQe(e){return function(){this.textContent=e}}function oQe(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function lQe(e){return arguments.length?this.each(e==null?aQe:(typeof e=="function"?oQe:iQe)(e)):this.node().textContent}function cQe(){this.innerHTML=""}function AQe(e){return function(){this.innerHTML=e}}function uQe(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function dQe(e){return arguments.length?this.each(e==null?cQe:(typeof e=="function"?uQe:AQe)(e)):this.node().innerHTML}function hQe(){this.nextSibling&&this.parentNode.appendChild(this)}function fQe(){return this.each(hQe)}function gQe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mQe(){return this.each(gQe)}function pQe(e){var n=typeof e=="function"?e:GQ(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function yQe(){return null}function vQe(e,n){var r=typeof e=="function"?e:GQ(e),s=n==null?yQe:typeof n=="function"?n:D2(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),s.apply(this,arguments)||null)})}function xQe(){var e=this.parentNode;e&&e.removeChild(this)}function wQe(){return this.each(xQe)}function bQe(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function _Qe(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function CQe(e){return this.select(e?_Qe:bQe)}function BQe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function SQe(e){return function(n){e.call(this,n,this.__data__)}}function kQe(e){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");return s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),{type:n,name:r}})}function jQe(e){return function(){var n=this.__on;if(n){for(var r=0,s=-1,a=n.length,i;r<a;++r)i=n[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):n[++s]=i;++s?n.length=s:delete this.__on}}}function NQe(e,n,r){return function(){var s=this.__on,a,i=SQe(n);if(s){for(var o=0,c=s.length;o<c;++o)if((a=s[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=r),a.value=n;return}}this.addEventListener(e.type,i,r),a={type:e.type,name:e.name,value:n,listener:i,options:r},s?s.push(a):this.__on=[a]}}function EQe(e,n,r){var s=kQe(e+""),a,i=s.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var A=0,u=c.length,h;A<u;++A)for(a=0,h=c[A];a<i;++a)if((o=s[a]).type===h.type&&o.name===h.name)return h.value}return}for(c=n?NQe:jQe,a=0;a<i;++a)this.each(c(s[a],n,r));return this}function nM(e,n,r){var s=YQ(e),a=s.CustomEvent;typeof a=="function"?a=new a(n,r):(a=s.document.createEvent("Event"),r?(a.initEvent(n,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(n,!1,!1)),e.dispatchEvent(a)}function TQe(e,n){return function(){return nM(this,e,n)}}function FQe(e,n){return function(){return nM(this,e,n.apply(this,arguments))}}function UQe(e,n){return this.each((typeof n=="function"?FQe:TQe)(e,n))}function*IQe(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],a=0,i=s.length,o;a<i;++a)(o=s[a])&&(yield o)}var rM=[null];function Gr(e,n){this._groups=e,this._parents=n}function yh(){return new Gr([[document.documentElement]],rM)}function PQe(){return this}Gr.prototype=yh.prototype={constructor:Gr,select:oPe,selectAll:uPe,selectChild:gPe,selectChildren:vPe,filter:xPe,data:SPe,enter:wPe,exit:jPe,join:NPe,merge:EPe,selection:PQe,order:TPe,sort:FPe,call:IPe,nodes:PPe,node:QPe,size:MPe,empty:DPe,each:RPe,attr:GPe,style:XPe,property:eQe,classed:sQe,text:lQe,html:dQe,raise:fQe,lower:mQe,append:pQe,insert:vQe,remove:wQe,clone:CQe,datum:BQe,on:EQe,dispatch:UQe,[Symbol.iterator]:IQe};function is(e){return typeof e=="string"?new Gr([[document.querySelector(e)]],[document.documentElement]):new Gr([[e]],rM)}function QQe(e){let n;for(;n=e.sourceEvent;)e=n;return e}function aa(e,n){if(e=QQe(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var s=r.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(n.getScreenCTM().inverse()),[s.x,s.y]}if(n.getBoundingClientRect){var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}}return[e.pageX,e.pageY]}var MQe={value:()=>{}};function vh(){for(var e=0,n=arguments.length,r={},s;e<n;++e){if(!(s=arguments[e]+"")||s in r||/[\s.]/.test(s))throw new Error("illegal type: "+s);r[s]=[]}return new s0(r)}function s0(e){this._=e}function DQe(e,n){return e.trim().split(/^|\s+/).map(function(r){var s="",a=r.indexOf(".");if(a>=0&&(s=r.slice(a+1),r=r.slice(0,a)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:s}})}s0.prototype=vh.prototype={constructor:s0,on:function(e,n){var r=this._,s=DQe(e+"",r),a,i=-1,o=s.length;if(arguments.length<2){for(;++i<o;)if((a=(e=s[i]).type)&&(a=RQe(r[a],e.name)))return a;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++i<o;)if(a=(e=s[i]).type)r[a]=m4(r[a],e.name,n);else if(n==null)for(a in r)r[a]=m4(r[a],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new s0(e)},call:function(e,n){if((a=arguments.length-2)>0)for(var r=new Array(a),s=0,a,i;s<a;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],s=0,a=i.length;s<a;++s)i[s].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],a=0,i=s.length;a<i;++a)s[a].value.apply(n,r)}};function RQe(e,n){for(var r=0,s=e.length,a;r<s;++r)if((a=e[r]).name===n)return a.value}function m4(e,n,r){for(var s=0,a=e.length;s<a;++s)if(e[s].name===n){e[s]=MQe,e=e.slice(0,s).concat(e.slice(s+1));break}return r!=null&&e.push({name:n,value:r}),e}const $Qe={passive:!1},Ud={capture:!0,passive:!1};function mv(e){e.stopImmediatePropagation()}function Pc(e){e.preventDefault(),e.stopImmediatePropagation()}function sM(e){var n=e.document.documentElement,r=is(e).on("dragstart.drag",Pc,Ud);"onselectstart"in n?r.on("selectstart.drag",Pc,Ud):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function aM(e,n){var r=e.document.documentElement,s=is(e).on("dragstart.drag",null);n&&(s.on("click.drag",Pc,Ud),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in r?s.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const jf=e=>()=>e;function ow(e,{sourceEvent:n,subject:r,target:s,identifier:a,active:i,x:o,y:c,dx:A,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:A,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}ow.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function OQe(e){return!e.ctrlKey&&!e.button}function LQe(){return this.parentNode}function HQe(e,n){return n??{x:e.x,y:e.y}}function zQe(){return navigator.maxTouchPoints||"ontouchstart"in this}function KQe(){var e=OQe,n=LQe,r=HQe,s=zQe,a={},i=vh("start","drag","end"),o=0,c,A,u,h,d=0;function f(w){w.on("mousedown.drag",g).filter(s).on("touchstart.drag",x).on("touchmove.drag",p,$Qe).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(w,_){if(!(h||!e.call(this,w,_))){var C=b(this,n.call(this,w,_),w,_,"mouse");C&&(is(w.view).on("mousemove.drag",m,Ud).on("mouseup.drag",y,Ud),sM(w.view),mv(w),u=!1,c=w.clientX,A=w.clientY,C("start",w))}}function m(w){if(Pc(w),!u){var _=w.clientX-c,C=w.clientY-A;u=_*_+C*C>d}a.mouse("drag",w)}function y(w){is(w.view).on("mousemove.drag mouseup.drag",null),aM(w.view,u),Pc(w),a.mouse("end",w)}function x(w,_){if(e.call(this,w,_)){var C=w.changedTouches,k=n.call(this,w,_),j=C.length,B,E;for(B=0;B<j;++B)(E=b(this,k,w,_,C[B].identifier,C[B]))&&(mv(w),E("start",w,C[B]))}}function p(w){var _=w.changedTouches,C=_.length,k,j;for(k=0;k<C;++k)(j=a[_[k].identifier])&&(Pc(w),j("drag",w,_[k]))}function v(w){var _=w.changedTouches,C=_.length,k,j;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),k=0;k<C;++k)(j=a[_[k].identifier])&&(mv(w),j("end",w,_[k]))}function b(w,_,C,k,j,B){var E=i.copy(),P=aa(B||C,_),I,U,N;if((N=r.call(w,new ow("beforestart",{sourceEvent:C,target:f,identifier:j,active:o,x:P[0],y:P[1],dx:0,dy:0,dispatch:E}),k))!=null)return I=N.x-P[0]||0,U=N.y-P[1]||0,function D(T,L,Q){var M=P,F;switch(T){case"start":a[j]=D,F=o++;break;case"end":delete a[j],--o;case"drag":P=aa(Q||L,_),F=o;break}E.call(T,w,new ow(T,{sourceEvent:L,subject:N,target:f,identifier:j,active:F,x:P[0]+I,y:P[1]+U,dx:P[0]-M[0],dy:P[1]-M[1],dispatch:E}),k)}}return f.filter=function(w){return arguments.length?(e=typeof w=="function"?w:jf(!!w),f):e},f.container=function(w){return arguments.length?(n=typeof w=="function"?w:jf(w),f):n},f.subject=function(w){return arguments.length?(r=typeof w=="function"?w:jf(w),f):r},f.touchable=function(w){return arguments.length?(s=typeof w=="function"?w:jf(!!w),f):s},f.on=function(){var w=i.on.apply(i,arguments);return w===i?f:w},f.clickDistance=function(w){return arguments.length?(d=(w=+w)*w,f):Math.sqrt(d)},f}var GQe=vh("start","end","cancel","interrupt"),WQe=[],iM=0,p4=1,lw=2,a0=3,y4=4,cw=5,i0=6;function jp(e,n,r,s,a,i){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;VQe(e,r,{name:n,index:s,group:a,on:GQe,tween:WQe,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:iM})}function $2(e,n){var r=Ys(e,n);if(r.state>iM)throw new Error("too late; already scheduled");return r}function Ba(e,n){var r=Ys(e,n);if(r.state>a0)throw new Error("too late; already running");return r}function Ys(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function VQe(e,n,r){var s=e.__transition,a;s[n]=r,r.timer=Xm(i,0,r.time);function i(u){r.state=p4,r.timer.restart(o,r.delay,r.time),r.delay<=u&&o(u-r.delay)}function o(u){var h,d,f,g;if(r.state!==p4)return A();for(h in s)if(g=s[h],g.name===r.name){if(g.state===a0)return qS(o);g.state===y4?(g.state=i0,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete s[h]):+h<n&&(g.state=i0,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete s[h])}if(qS(function(){r.state===a0&&(r.state=y4,r.timer.restart(c,r.delay,r.time),c(u))}),r.state=lw,r.on.call("start",e,e.__data__,r.index,r.group),r.state===lw){for(r.state=a0,a=new Array(f=r.tween.length),h=0,d=-1;h<f;++h)(g=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(a[++d]=g);a.length=d+1}}function c(u){for(var h=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(A),r.state=cw,1),d=-1,f=a.length;++d<f;)a[d].call(e,h);r.state===cw&&(r.on.call("end",e,e.__data__,r.index,r.group),A())}function A(){r.state=i0,r.timer.stop(),delete s[n];for(var u in s)return;delete e.__transition}}function o0(e,n){var r=e.__transition,s,a,i=!0,o;if(r){n=n==null?null:n+"";for(o in r){if((s=r[o]).name!==n){i=!1;continue}a=s.state>lw&&s.state<cw,s.state=i0,s.timer.stop(),s.on.call(a?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete r[o]}i&&delete e.__transition}}function qQe(e){return this.each(function(){o0(this,e)})}function XQe(e,n){var r,s;return function(){var a=Ba(this,e),i=a.tween;if(i!==r){s=r=i;for(var o=0,c=s.length;o<c;++o)if(s[o].name===n){s=s.slice(),s.splice(o,1);break}}a.tween=s}}function YQe(e,n,r){var s,a;if(typeof r!="function")throw new Error;return function(){var i=Ba(this,e),o=i.tween;if(o!==s){a=(s=o).slice();for(var c={name:n,value:r},A=0,u=a.length;A<u;++A)if(a[A].name===n){a[A]=c;break}A===u&&a.push(c)}i.tween=a}}function JQe(e,n){var r=this._id;if(e+="",arguments.length<2){for(var s=Ys(this.node(),r).tween,a=0,i=s.length,o;a<i;++a)if((o=s[a]).name===e)return o.value;return null}return this.each((n==null?XQe:YQe)(r,e,n))}function O2(e,n,r){var s=e._id;return e.each(function(){var a=Ba(this,s);(a.value||(a.value={}))[n]=r.apply(this,arguments)}),function(a){return Ys(a,s).value[n]}}function oM(e,n){var r;return(typeof n=="number"?Is:n instanceof rl?J0:(r=rl(n))?(n=r,J0):iU)(e,n)}function ZQe(e){return function(){this.removeAttribute(e)}}function eMe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tMe(e,n,r){var s,a=r+"",i;return function(){var o=this.getAttribute(e);return o===a?null:o===s?i:i=n(s=o,r)}}function nMe(e,n,r){var s,a=r+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===s?i:i=n(s=o,r)}}function rMe(e,n,r){var s,a,i;return function(){var o,c=r(this),A;return c==null?void this.removeAttribute(e):(o=this.getAttribute(e),A=c+"",o===A?null:o===s&&A===a?i:(a=A,i=n(s=o,c)))}}function sMe(e,n,r){var s,a,i;return function(){var o,c=r(this),A;return c==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),A=c+"",o===A?null:o===s&&A===a?i:(a=A,i=n(s=o,c)))}}function aMe(e,n){var r=kp(e),s=r==="transform"?Bbe:oM;return this.attrTween(e,typeof n=="function"?(r.local?sMe:rMe)(r,s,O2(this,"attr."+e,n)):n==null?(r.local?eMe:ZQe)(r):(r.local?nMe:tMe)(r,s,n))}function iMe(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function oMe(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function lMe(e,n){var r,s;function a(){var i=n.apply(this,arguments);return i!==s&&(r=(s=i)&&oMe(e,i)),r}return a._value=n,a}function cMe(e,n){var r,s;function a(){var i=n.apply(this,arguments);return i!==s&&(r=(s=i)&&iMe(e,i)),r}return a._value=n,a}function AMe(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var s=kp(e);return this.tween(r,(s.local?lMe:cMe)(s,n))}function uMe(e,n){return function(){$2(this,e).delay=+n.apply(this,arguments)}}function dMe(e,n){return n=+n,function(){$2(this,e).delay=n}}function hMe(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?uMe:dMe)(n,e)):Ys(this.node(),n).delay}function fMe(e,n){return function(){Ba(this,e).duration=+n.apply(this,arguments)}}function gMe(e,n){return n=+n,function(){Ba(this,e).duration=n}}function mMe(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?fMe:gMe)(n,e)):Ys(this.node(),n).duration}function pMe(e,n){if(typeof n!="function")throw new Error;return function(){Ba(this,e).ease=n}}function yMe(e){var n=this._id;return arguments.length?this.each(pMe(n,e)):Ys(this.node(),n).ease}function vMe(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;Ba(this,e).ease=r}}function xMe(e){if(typeof e!="function")throw new Error;return this.each(vMe(this._id,e))}function wMe(e){typeof e!="function"&&(e=VQ(e));for(var n=this._groups,r=n.length,s=new Array(r),a=0;a<r;++a)for(var i=n[a],o=i.length,c=s[a]=[],A,u=0;u<o;++u)(A=i[u])&&e.call(A,A.__data__,u,i)&&c.push(A);return new ui(s,this._parents,this._name,this._id)}function bMe(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,s=n.length,a=r.length,i=Math.min(s,a),o=new Array(s),c=0;c<i;++c)for(var A=n[c],u=r[c],h=A.length,d=o[c]=new Array(h),f,g=0;g<h;++g)(f=A[g]||u[g])&&(d[g]=f);for(;c<s;++c)o[c]=n[c];return new ui(o,this._parents,this._name,this._id)}function _Me(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function CMe(e,n,r){var s,a,i=_Me(n)?$2:Ba;return function(){var o=i(this,e),c=o.on;c!==s&&(a=(s=c).copy()).on(n,r),o.on=a}}function BMe(e,n){var r=this._id;return arguments.length<2?Ys(this.node(),r).on.on(e):this.each(CMe(r,e,n))}function SMe(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function kMe(){return this.on("end.remove",SMe(this._id))}function jMe(e){var n=this._name,r=this._id;typeof e!="function"&&(e=D2(e));for(var s=this._groups,a=s.length,i=new Array(a),o=0;o<a;++o)for(var c=s[o],A=c.length,u=i[o]=new Array(A),h,d,f=0;f<A;++f)(h=c[f])&&(d=e.call(h,h.__data__,f,c))&&("__data__"in h&&(d.__data__=h.__data__),u[f]=d,jp(u[f],n,r,f,u,Ys(h,r)));return new ui(i,this._parents,n,r)}function NMe(e){var n=this._name,r=this._id;typeof e!="function"&&(e=WQ(e));for(var s=this._groups,a=s.length,i=[],o=[],c=0;c<a;++c)for(var A=s[c],u=A.length,h,d=0;d<u;++d)if(h=A[d]){for(var f=e.call(h,h.__data__,d,A),g,m=Ys(h,r),y=0,x=f.length;y<x;++y)(g=f[y])&&jp(g,n,r,y,f,m);i.push(f),o.push(h)}return new ui(i,o,n,r)}var EMe=yh.prototype.constructor;function TMe(){return new EMe(this._groups,this._parents)}function FMe(e,n){var r,s,a;return function(){var i=aA(this,e),o=(this.style.removeProperty(e),aA(this,e));return i===o?null:i===r&&o===s?a:a=n(r=i,s=o)}}function lM(e){return function(){this.style.removeProperty(e)}}function UMe(e,n,r){var s,a=r+"",i;return function(){var o=aA(this,e);return o===a?null:o===s?i:i=n(s=o,r)}}function IMe(e,n,r){var s,a,i;return function(){var o=aA(this,e),c=r(this),A=c+"";return c==null&&(A=c=(this.style.removeProperty(e),aA(this,e))),o===A?null:o===s&&A===a?i:(a=A,i=n(s=o,c))}}function PMe(e,n){var r,s,a,i="style."+n,o="end."+i,c;return function(){var A=Ba(this,e),u=A.on,h=A.value[i]==null?c||(c=lM(n)):void 0;(u!==r||a!==h)&&(s=(r=u).copy()).on(o,a=h),A.on=s}}function QMe(e,n,r){var s=(e+="")=="transform"?Cbe:oM;return n==null?this.styleTween(e,FMe(e,s)).on("end.style."+e,lM(e)):typeof n=="function"?this.styleTween(e,IMe(e,s,O2(this,"style."+e,n))).each(PMe(this._id,e)):this.styleTween(e,UMe(e,s,n),r).on("end.style."+e,null)}function MMe(e,n,r){return function(s){this.style.setProperty(e,n.call(this,s),r)}}function DMe(e,n,r){var s,a;function i(){var o=n.apply(this,arguments);return o!==a&&(s=(a=o)&&MMe(e,o,r)),s}return i._value=n,i}function RMe(e,n,r){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(n==null)return this.tween(s,null);if(typeof n!="function")throw new Error;return this.tween(s,DMe(e,n,r??""))}function $Me(e){return function(){this.textContent=e}}function OMe(e){return function(){var n=e(this);this.textContent=n??""}}function LMe(e){return this.tween("text",typeof e=="function"?OMe(O2(this,"text",e)):$Me(e==null?"":e+""))}function HMe(e){return function(n){this.textContent=e.call(this,n)}}function zMe(e){var n,r;function s(){var a=e.apply(this,arguments);return a!==r&&(n=(r=a)&&HMe(a)),n}return s._value=e,s}function KMe(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,zMe(e))}function GMe(){for(var e=this._name,n=this._id,r=cM(),s=this._groups,a=s.length,i=0;i<a;++i)for(var o=s[i],c=o.length,A,u=0;u<c;++u)if(A=o[u]){var h=Ys(A,n);jp(A,e,r,u,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ui(s,this._parents,e,r)}function WMe(){var e,n,r=this,s=r._id,a=r.size();return new Promise(function(i,o){var c={value:o},A={value:function(){--a===0&&i()}};r.each(function(){var u=Ba(this,s),h=u.on;h!==e&&(n=(e=h).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(A)),u.on=n}),a===0&&i()})}var VMe=0;function ui(e,n,r,s){this._groups=e,this._parents=n,this._name=r,this._id=s}function cM(){return++VMe}var Ea=yh.prototype;ui.prototype={constructor:ui,select:jMe,selectAll:NMe,selectChild:Ea.selectChild,selectChildren:Ea.selectChildren,filter:wMe,merge:bMe,selection:TMe,transition:GMe,call:Ea.call,nodes:Ea.nodes,node:Ea.node,size:Ea.size,empty:Ea.empty,each:Ea.each,on:BMe,attr:aMe,attrTween:AMe,style:QMe,styleTween:RMe,text:LMe,textTween:KMe,remove:kMe,tween:JQe,delay:hMe,duration:mMe,ease:yMe,easeVarying:xMe,end:WMe,[Symbol.iterator]:Ea[Symbol.iterator]};var qMe={time:null,delay:0,duration:250,ease:Kx};function XMe(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function YMe(e){var n,r;e instanceof ui?(n=e._id,e=e._name):(n=cM(),(r=qMe).time=Sd(),e=e==null?null:e+"");for(var s=this._groups,a=s.length,i=0;i<a;++i)for(var o=s[i],c=o.length,A,u=0;u<c;++u)(A=o[u])&&jp(A,e,n,u,o,r||XMe(A,n));return new ui(s,this._parents,e,n)}yh.prototype.interrupt=qQe;yh.prototype.transition=YMe;const Nf=e=>()=>e;function JMe(e,{sourceEvent:n,target:r,transform:s,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:a}})}function Xa(e,n,r){this.k=e,this.x=n,this.y=r}Xa.prototype={constructor:Xa,scale:function(e){return e===1?this:new Xa(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Xa(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var L2=new Xa(1,0,0);sa.prototype=Xa.prototype;function sa(e){for(;!e.__zoom;)if(!(e=e.parentNode))return L2;return e.__zoom}function pv(e){e.stopImmediatePropagation()}function qA(e){e.preventDefault(),e.stopImmediatePropagation()}function ZMe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function eDe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function v4(){return this.__zoom||L2}function tDe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function nDe(){return navigator.maxTouchPoints||"ontouchstart"in this}function rDe(e,n,r){var s=e.invertX(n[0][0])-r[0][0],a=e.invertX(n[1][0])-r[1][0],i=e.invertY(n[0][1])-r[0][1],o=e.invertY(n[1][1])-r[1][1];return e.translate(a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function sDe(){var e=ZMe,n=eDe,r=rDe,s=tDe,a=nDe,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,A=Nbe,u=vh("start","zoom","end"),h,d,f,g=500,m=150,y=0,x=10;function p(N){N.property("__zoom",v4).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",E).filter(a).on("touchstart.zoom",P).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(N,D,T,L){var Q=N.selection?N.selection():N;Q.property("__zoom",v4),N!==Q?_(N,D,T,L):Q.interrupt().each(function(){C(this,arguments).event(L).start().zoom(null,typeof D=="function"?D.apply(this,arguments):D).end()})},p.scaleBy=function(N,D,T,L){p.scaleTo(N,function(){var Q=this.__zoom.k,M=typeof D=="function"?D.apply(this,arguments):D;return Q*M},T,L)},p.scaleTo=function(N,D,T,L){p.transform(N,function(){var Q=n.apply(this,arguments),M=this.__zoom,F=T==null?w(Q):typeof T=="function"?T.apply(this,arguments):T,O=M.invert(F),X=typeof D=="function"?D.apply(this,arguments):D;return r(b(v(M,X),F,O),Q,o)},T,L)},p.translateBy=function(N,D,T,L){p.transform(N,function(){return r(this.__zoom.translate(typeof D=="function"?D.apply(this,arguments):D,typeof T=="function"?T.apply(this,arguments):T),n.apply(this,arguments),o)},null,L)},p.translateTo=function(N,D,T,L,Q){p.transform(N,function(){var M=n.apply(this,arguments),F=this.__zoom,O=L==null?w(M):typeof L=="function"?L.apply(this,arguments):L;return r(L2.translate(O[0],O[1]).scale(F.k).translate(typeof D=="function"?-D.apply(this,arguments):-D,typeof T=="function"?-T.apply(this,arguments):-T),M,o)},L,Q)};function v(N,D){return D=Math.max(i[0],Math.min(i[1],D)),D===N.k?N:new Xa(D,N.x,N.y)}function b(N,D,T){var L=D[0]-T[0]*N.k,Q=D[1]-T[1]*N.k;return L===N.x&&Q===N.y?N:new Xa(N.k,L,Q)}function w(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function _(N,D,T,L){N.on("start.zoom",function(){C(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(L).end()}).tween("zoom",function(){var Q=this,M=arguments,F=C(Q,M).event(L),O=n.apply(Q,M),X=T==null?w(O):typeof T=="function"?T.apply(Q,M):T,ae=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),$=Q.__zoom,J=typeof D=="function"?D.apply(Q,M):D,le=A($.invert(X).concat(ae/$.k),J.invert(X).concat(ae/J.k));return function(re){if(re===1)re=J;else{var V=le(re),z=ae/V[2];re=new Xa(z,X[0]-V[0]*z,X[1]-V[1]*z)}F.zoom(null,re)}})}function C(N,D,T){return!T&&N.__zooming||new k(N,D)}function k(N,D){this.that=N,this.args=D,this.active=0,this.sourceEvent=null,this.extent=n.apply(N,D),this.taps=0}k.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,D){return this.mouse&&N!=="mouse"&&(this.mouse[1]=D.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=D.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=D.invert(this.touch1[0])),this.that.__zoom=D,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var D=is(this.that).datum();u.call(N,this.that,new JMe(N,{sourceEvent:this.sourceEvent,target:p,type:N,transform:this.that.__zoom,dispatch:u}),D)}};function j(N,...D){if(!e.apply(this,arguments))return;var T=C(this,D).event(N),L=this.__zoom,Q=Math.max(i[0],Math.min(i[1],L.k*Math.pow(2,s.apply(this,arguments)))),M=aa(N);if(T.wheel)(T.mouse[0][0]!==M[0]||T.mouse[0][1]!==M[1])&&(T.mouse[1]=L.invert(T.mouse[0]=M)),clearTimeout(T.wheel);else{if(L.k===Q)return;T.mouse=[M,L.invert(M)],o0(this),T.start()}qA(N),T.wheel=setTimeout(F,m),T.zoom("mouse",r(b(v(L,Q),T.mouse[0],T.mouse[1]),T.extent,o));function F(){T.wheel=null,T.end()}}function B(N,...D){if(f||!e.apply(this,arguments))return;var T=N.currentTarget,L=C(this,D,!0).event(N),Q=is(N.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",ae,!0),M=aa(N,T),F=N.clientX,O=N.clientY;sM(N.view),pv(N),L.mouse=[M,this.__zoom.invert(M)],o0(this),L.start();function X($){if(qA($),!L.moved){var J=$.clientX-F,le=$.clientY-O;L.moved=J*J+le*le>y}L.event($).zoom("mouse",r(b(L.that.__zoom,L.mouse[0]=aa($,T),L.mouse[1]),L.extent,o))}function ae($){Q.on("mousemove.zoom mouseup.zoom",null),aM($.view,L.moved),qA($),L.event($).end()}}function E(N,...D){if(e.apply(this,arguments)){var T=this.__zoom,L=aa(N.changedTouches?N.changedTouches[0]:N,this),Q=T.invert(L),M=T.k*(N.shiftKey?.5:2),F=r(b(v(T,M),L,Q),n.apply(this,D),o);qA(N),c>0?is(this).transition().duration(c).call(_,F,L,N):is(this).call(p.transform,F,L,N)}}function P(N,...D){if(e.apply(this,arguments)){var T=N.touches,L=T.length,Q=C(this,D,N.changedTouches.length===L).event(N),M,F,O,X;for(pv(N),F=0;F<L;++F)O=T[F],X=aa(O,this),X=[X,this.__zoom.invert(X),O.identifier],Q.touch0?!Q.touch1&&Q.touch0[2]!==X[2]&&(Q.touch1=X,Q.taps=0):(Q.touch0=X,M=!0,Q.taps=1+!!h);h&&(h=clearTimeout(h)),M&&(Q.taps<2&&(d=X[0],h=setTimeout(function(){h=null},g)),o0(this),Q.start())}}function I(N,...D){if(this.__zooming){var T=C(this,D).event(N),L=N.changedTouches,Q=L.length,M,F,O,X;for(qA(N),M=0;M<Q;++M)F=L[M],O=aa(F,this),T.touch0&&T.touch0[2]===F.identifier?T.touch0[0]=O:T.touch1&&T.touch1[2]===F.identifier&&(T.touch1[0]=O);if(F=T.that.__zoom,T.touch1){var ae=T.touch0[0],$=T.touch0[1],J=T.touch1[0],le=T.touch1[1],re=(re=J[0]-ae[0])*re+(re=J[1]-ae[1])*re,V=(V=le[0]-$[0])*V+(V=le[1]-$[1])*V;F=v(F,Math.sqrt(re/V)),O=[(ae[0]+J[0])/2,(ae[1]+J[1])/2],X=[($[0]+le[0])/2,($[1]+le[1])/2]}else if(T.touch0)O=T.touch0[0],X=T.touch0[1];else return;T.zoom("touch",r(b(F,O,X),T.extent,o))}}function U(N,...D){if(this.__zooming){var T=C(this,D).event(N),L=N.changedTouches,Q=L.length,M,F;for(pv(N),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),M=0;M<Q;++M)F=L[M],T.touch0&&T.touch0[2]===F.identifier?delete T.touch0:T.touch1&&T.touch1[2]===F.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(F=aa(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<x)){var O=is(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return p.wheelDelta=function(N){return arguments.length?(s=typeof N=="function"?N:Nf(+N),p):s},p.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Nf(!!N),p):e},p.touchable=function(N){return arguments.length?(a=typeof N=="function"?N:Nf(!!N),p):a},p.extent=function(N){return arguments.length?(n=typeof N=="function"?N:Nf([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),p):n},p.scaleExtent=function(N){return arguments.length?(i[0]=+N[0],i[1]=+N[1],p):[i[0],i[1]]},p.translateExtent=function(N){return arguments.length?(o[0][0]=+N[0][0],o[1][0]=+N[1][0],o[0][1]=+N[0][1],o[1][1]=+N[1][1],p):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},p.constrain=function(N){return arguments.length?(r=N,p):r},p.duration=function(N){return arguments.length?(c=+N,p):c},p.interpolate=function(N){return arguments.length?(A=N,p):A},p.on=function(){var N=u.on.apply(u,arguments);return N===u?p:N},p.clickDistance=function(N){return arguments.length?(y=(N=+N)*N,p):Math.sqrt(y)},p.tapDistance=function(N){return arguments.length?(x=+N,p):x},p}var aDe=typeof global=="object"&&global&&global.Object===Object&&global;const iDe=aDe;var oDe=typeof self=="object"&&self&&self.Object===Object&&self,lDe=iDe||oDe||Function("return this")();const AM=lDe;var cDe=AM.Symbol;const Lg=cDe;var uM=Object.prototype,ADe=uM.hasOwnProperty,uDe=uM.toString,XA=Lg?Lg.toStringTag:void 0;function dDe(e){var n=ADe.call(e,XA),r=e[XA];try{e[XA]=void 0;var s=!0}catch{}var a=uDe.call(e);return s&&(n?e[XA]=r:delete e[XA]),a}var hDe=Object.prototype,fDe=hDe.toString;function gDe(e){return fDe.call(e)}var mDe="[object Null]",pDe="[object Undefined]",x4=Lg?Lg.toStringTag:void 0;function yDe(e){return e==null?e===void 0?pDe:mDe:x4&&x4 in Object(e)?dDe(e):gDe(e)}function vDe(e){return e!=null&&typeof e=="object"}var xDe="[object Symbol]";function wDe(e){return typeof e=="symbol"||vDe(e)&&yDe(e)==xDe}var bDe=/\s/;function _De(e){for(var n=e.length;n--&&bDe.test(e.charAt(n)););return n}var CDe=/^\s+/;function BDe(e){return e&&e.slice(0,_De(e)+1).replace(CDe,"")}function Hg(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var w4=0/0,SDe=/^[-+]0x[0-9a-f]+$/i,kDe=/^0b[01]+$/i,jDe=/^0o[0-7]+$/i,NDe=parseInt;function b4(e){if(typeof e=="number")return e;if(wDe(e))return w4;if(Hg(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Hg(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=BDe(e);var r=kDe.test(e);return r||jDe.test(e)?NDe(e.slice(2),r?2:8):SDe.test(e)?w4:+e}var EDe=function(){return AM.Date.now()};const yv=EDe;var TDe="Expected a function",FDe=Math.max,UDe=Math.min;function dM(e,n,r){var s,a,i,o,c,A,u=0,h=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(TDe);n=b4(n)||0,Hg(r)&&(h=!!r.leading,d="maxWait"in r,i=d?FDe(b4(r.maxWait)||0,n):i,f="trailing"in r?!!r.trailing:f);function g(C){var k=s,j=a;return s=a=void 0,u=C,o=e.apply(j,k),o}function m(C){return u=C,c=setTimeout(p,n),h?g(C):o}function y(C){var k=C-A,j=C-u,B=n-k;return d?UDe(B,i-j):B}function x(C){var k=C-A,j=C-u;return A===void 0||k>=n||k<0||d&&j>=i}function p(){var C=yv();if(x(C))return v(C);c=setTimeout(p,y(C))}function v(C){return c=void 0,f&&s?g(C):(s=a=void 0,o)}function b(){c!==void 0&&clearTimeout(c),u=0,s=A=a=c=void 0}function w(){return c===void 0?o:v(yv())}function _(){var C=yv(),k=x(C);if(s=arguments,a=this,A=C,k){if(c===void 0)return m(A);if(d)return clearTimeout(c),c=setTimeout(p,n),g(A)}return c===void 0&&(c=setTimeout(p,n)),o}return _.cancel=b,_.flush=w,_}var IDe="Expected a function";function PDe(e,n,r){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(IDe);return Hg(r)&&(s="leading"in r?!!r.leading:s,a="trailing"in r?!!r.trailing:a),dM(e,n,{leading:s,maxWait:n,trailing:a})}var Vo=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var n=1.70158;return e===1?1:e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return e===0?0:--e*e*((n+1)*e+n)+1},InOut:function(e){var n=2.5949095;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}}),Bounce:Object.freeze({In:function(e){return 1-Vo.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?Vo.Bounce.In(e*2)*.5:Vo.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(n*2,e)/2:(1-Math.pow(2-n*2,e))/2+.5}}}}),bu=function(){return performance.now()},hM=function(){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,n)}return e.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(r){return n._tweens[r]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var n,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];for(var a=0,i=r;a<i.length;a++){var o=i[a];(n=o._group)===null||n===void 0||n.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},e.prototype.remove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var s=0,a=n;s<a.length;s++){var i=a[s];i._group=void 0,delete this._tweens[i.getId()],delete this._tweensAddedDuringUpdate[i.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(n){return!n.isPlaying()})},e.prototype.update=function(n,r){n===void 0&&(n=bu()),r===void 0&&(r=!0);var s=Object.keys(this._tweens);if(s.length!==0)for(;s.length>0;){this._tweensAddedDuringUpdate={};for(var a=0;a<s.length;a++){var i=this._tweens[s[a]],o=!r;i&&i.update(n,o)===!1&&!r&&this.remove(i)}s=Object.keys(this._tweensAddedDuringUpdate)}},e}(),vc={Linear:function(e,n){var r=e.length-1,s=r*n,a=Math.floor(s),i=vc.Utils.Linear;return n<0?i(e[0],e[1],s):n>1?i(e[r],e[r-1],r-s):i(e[a],e[a+1>r?r:a+1],s-a)},Bezier:function(e,n){for(var r=0,s=e.length-1,a=Math.pow,i=vc.Utils.Bernstein,o=0;o<=s;o++)r+=a(1-n,s-o)*a(n,o)*e[o]*i(s,o);return r},CatmullRom:function(e,n){var r=e.length-1,s=r*n,a=Math.floor(s),i=vc.Utils.CatmullRom;return e[0]===e[r]?(n<0&&(a=Math.floor(s=r*(1+n))),i(e[(a-1+r)%r],e[a],e[(a+1)%r],e[(a+2)%r],s-a)):n<0?e[0]-(i(e[0],e[0],e[1],e[1],-s)-e[0]):n>1?e[r]-(i(e[r],e[r],e[r-1],e[r-1],s-r)-e[r]):i(e[a?a-1:0],e[a],e[r<a+1?r:a+1],e[r<a+2?r:a+2],s-a)},Utils:{Linear:function(e,n,r){return(n-e)*r+e},Bernstein:function(e,n){var r=vc.Utils.Factorial;return r(e)/r(n)/r(e-n)},Factorial:function(){var e=[1];return function(n){var r=1;if(e[n])return e[n];for(var s=n;s>1;s--)r*=s;return e[n]=r,r}}(),CatmullRom:function(e,n,r,s,a){var i=(r-e)*.5,o=(s-n)*.5,c=a*a,A=a*c;return(2*n-2*r+i+o)*A+(-3*n+3*r-2*i-o)*c+i*a+n}}},QDe=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),Aw=new hM,_4=function(){function e(n,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Vo.Linear.None,this._interpolationFunction=vc.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=QDe.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=n,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=Aw,Aw.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(n,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=n,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},e.prototype.duration=function(n){return n===void 0&&(n=1e3),this._duration=n<0?0:n,this},e.prototype.dynamic=function(n){return n===void 0&&(n=!1),this._isDynamic=n,this},e.prototype.start=function(n,r){if(n===void 0&&(n=bu()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var s in this._valuesStartRepeat)this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var a={};for(var i in this._valuesEnd)a[i]=this._valuesEnd[i];this._valuesEnd=a}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},e.prototype.startFromCurrentValues=function(n){return this.start(n,!0)},e.prototype._setupProperties=function(n,r,s,a,i){for(var o in s){var c=n[o],A=Array.isArray(c),u=A?"array":typeof c,h=!A&&Array.isArray(s[o]);if(!(u==="undefined"||u==="function")){if(h){var d=s[o];if(d.length===0)continue;for(var f=[c],g=0,m=d.length;g<m;g+=1){var y=this._handleRelativeValue(c,d[g]);if(isNaN(y)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(y)}h&&(s[o]=f)}if((u==="object"||A)&&c&&!h){r[o]=A?[]:{};var x=c;for(var p in x)r[o][p]=x[p];a[o]=A?[]:{};var d=s[o];if(!this._isDynamic){var v={};for(var p in d)v[p]=d[p];s[o]=d=v}this._setupProperties(x,r[o],d,a[o],i)}else(typeof r[o]>"u"||i)&&(r[o]=c),A||(r[o]*=1),h?a[o]=s[o].slice().reverse():a[o]=r[o]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(n){return n===void 0&&(n=bu()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this)},e.prototype.resume=function(n){return n===void 0&&(n=bu()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var n=0,r=this._chainedTweens.length;n<r;n++)this._chainedTweens[n].stop();return this},e.prototype.group=function(n){return n?(n.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var n;return(n=this._group)===null||n===void 0||n.remove(this),this},e.prototype.delay=function(n){return n===void 0&&(n=0),this._delayTime=n,this},e.prototype.repeat=function(n){return n===void 0&&(n=0),this._initialRepeat=n,this._repeat=n,this},e.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},e.prototype.yoyo=function(n){return n===void 0&&(n=!1),this._yoyo=n,this},e.prototype.easing=function(n){return n===void 0&&(n=Vo.Linear.None),this._easingFunction=n,this},e.prototype.interpolation=function(n){return n===void 0&&(n=vc.Linear),this._interpolationFunction=n,this},e.prototype.chain=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this._chainedTweens=n,this},e.prototype.onStart=function(n){return this._onStartCallback=n,this},e.prototype.onEveryStart=function(n){return this._onEveryStartCallback=n,this},e.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},e.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},e.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},e.prototype.onStop=function(n){return this._onStopCallback=n,this},e.prototype.update=function(n,r){var s=this,a;if(n===void 0&&(n=bu()),r===void 0&&(r=e.autoStartOnUpdate),this._isPaused)return!0;var i;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(n,!0);else return!1;if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var o=n-this._startTime,c=this._duration+((a=this._repeatDelayTime)!==null&&a!==void 0?a:this._delayTime),A=this._duration+this._repeat*c,u=function(){if(s._duration===0||o>A)return 1;var y=Math.trunc(o/c),x=o-y*c,p=Math.min(x/s._duration,1);return p===0&&o===s._duration?1:p},h=u(),d=this._easingFunction(h);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),this._onUpdateCallback&&this._onUpdateCallback(this._object,h),this._duration===0||o>=this._duration)if(this._repeat>0){var f=Math.min(Math.trunc((o-this._duration)/c)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=f);for(i in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[i]=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*f,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var g=0,m=this._chainedTweens.length;g<m;g++)this._chainedTweens[g].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(n,r,s,a){for(var i in s)if(r[i]!==void 0){var o=r[i]||0,c=s[i],A=Array.isArray(n[i]),u=Array.isArray(c),h=!A&&u;h?n[i]=this._interpolationFunction(c,a):typeof c=="object"&&c?this._updateProperties(n[i],o,c,a):(c=this._handleRelativeValue(o,c),typeof c=="number"&&(n[i]=o+(c-o)*a))}},e.prototype._handleRelativeValue=function(n,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?n+parseFloat(r):parseFloat(r)},e.prototype._swapEndStartRepeatValues=function(n){var r=this._valuesStartRepeat[n],s=this._valuesEnd[n];typeof s=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(s):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=r},e.autoStartOnUpdate=!1,e}(),va=Aw;va.getAll.bind(va);va.removeAll.bind(va);va.add.bind(va);va.remove.bind(va);va.update.bind(va);function C4(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function MDe(e){if(Array.isArray(e))return e}function DDe(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function RDe(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function $De(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function ODe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LDe(e,n){return MDe(e)||$De(e,n)||HDe(e,n)||ODe()}function HDe(e,n){if(e){if(typeof e=="string")return C4(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C4(e,n):void 0}}var zDe=RDe(function e(n,r){var s=r.default,a=s===void 0?null:s,i=r.triggerUpdate,o=i===void 0?!0:i,c=r.onChange,A=c===void 0?function(u,h){}:c;DDe(this,e),this.name=n,this.defaultVal=a,this.triggerUpdate=o,this.onChange=A});function H2(e){var n=e.stateInit,r=n===void 0?function(){return{}}:n,s=e.props,a=s===void 0?{}:s,i=e.methods,o=i===void 0?{}:i,c=e.aliases,A=c===void 0?{}:c,u=e.init,h=u===void 0?function(){}:u,d=e.update,f=d===void 0?function(){}:d,g=Object.keys(a).map(function(m){return new zDe(m,a[m])});return function m(){for(var y=arguments.length,x=new Array(y),p=0;p<y;p++)x[p]=arguments[p];var v=!!(this instanceof m&&this.constructor),b=v?x.shift():void 0,w=x[0],_=w===void 0?{}:w,C=Object.assign({},r instanceof Function?r(_):r,{initialised:!1}),k={};function j(P){return B(P,_),E(),j}var B=function(I,U){h.call(j,I,C,U),C.initialised=!0},E=dM(function(){C.initialised&&(f.call(j,C,k),k={})},1);return g.forEach(function(P){j[P.name]=I(P);function I(U){var N=U.name,D=U.triggerUpdate,T=D===void 0?!1:D,L=U.onChange,Q=L===void 0?function(O,X){}:L,M=U.defaultVal,F=M===void 0?null:M;return function(O){var X=C[N];if(!arguments.length)return X;var ae=O===void 0?F:O;return C[N]=ae,Q.call(j,ae,C,X),!k.hasOwnProperty(N)&&(k[N]=X),T&&E(),j}}}),Object.keys(o).forEach(function(P){j[P]=function(){for(var I,U=arguments.length,N=new Array(U),D=0;D<U;D++)N[D]=arguments[D];return(I=o[P]).call.apply(I,[j,C].concat(N))}}),Object.entries(A).forEach(function(P){var I=LDe(P,2),U=I[0],N=I[1];return j[U]=j[N]}),j.resetProps=function(){return g.forEach(function(P){j[P.name](P.defaultVal)}),j},j.resetProps(),C._rerender=E,v&&b&&j(b),j}}var pt=function(e){return typeof e=="function"?e:typeof e=="string"?function(n){return n[e]}:function(n){return e}};function zg(e){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zg(e)}var KDe=/^\s+/,GDe=/\s+$/;function Oe(e,n){if(e=e||"",n=n||{},e instanceof Oe)return e;if(!(this instanceof Oe))return new Oe(e,n);var r=WDe(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}Oe.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),r,s,a,i,o,c;return r=n.r/255,s=n.g/255,a=n.b/255,r<=.03928?i=r/12.92:i=Math.pow((r+.055)/1.055,2.4),s<=.03928?o=s/12.92:o=Math.pow((s+.055)/1.055,2.4),a<=.03928?c=a/12.92:c=Math.pow((a+.055)/1.055,2.4),.2126*i+.7152*o+.0722*c},setAlpha:function(n){return this._a=fM(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=S4(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=S4(this._r,this._g,this._b),r=Math.round(n.h*360),s=Math.round(n.s*100),a=Math.round(n.v*100);return this._a==1?"hsv("+r+", "+s+"%, "+a+"%)":"hsva("+r+", "+s+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var n=B4(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=B4(this._r,this._g,this._b),r=Math.round(n.h*360),s=Math.round(n.s*100),a=Math.round(n.l*100);return this._a==1?"hsl("+r+", "+s+"%, "+a+"%)":"hsla("+r+", "+s+"%, "+a+"%, "+this._roundA+")"},toHex:function(n){return k4(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return YDe(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Rt(this._r,255)*100)+"%",g:Math.round(Rt(this._g,255)*100)+"%",b:Math.round(Rt(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Rt(this._r,255)*100)+"%, "+Math.round(Rt(this._g,255)*100)+"%, "+Math.round(Rt(this._b,255)*100)+"%)":"rgba("+Math.round(Rt(this._r,255)*100)+"%, "+Math.round(Rt(this._g,255)*100)+"%, "+Math.round(Rt(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:c7e[k4(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var r="#"+j4(this._r,this._g,this._b,this._a),s=r,a=this._gradientType?"GradientType = 1, ":"";if(n){var i=Oe(n);s="#"+j4(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+r+",endColorstr="+s+")"},toString:function(n){var r=!!n;n=n||this._format;var s=!1,a=this._a<1&&this._a>=0,i=!r&&a&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return i?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(s=this.toRgbString()),n==="prgb"&&(s=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(s=this.toHexString()),n==="hex3"&&(s=this.toHexString(!0)),n==="hex4"&&(s=this.toHex8String(!0)),n==="hex8"&&(s=this.toHex8String()),n==="name"&&(s=this.toName()),n==="hsl"&&(s=this.toHslString()),n==="hsv"&&(s=this.toHsvString()),s||this.toHexString())},clone:function(){return Oe(this.toString())},_applyModification:function(n,r){var s=n.apply(null,[this].concat([].slice.call(r)));return this._r=s._r,this._g=s._g,this._b=s._b,this.setAlpha(s._a),this},lighten:function(){return this._applyModification(t7e,arguments)},brighten:function(){return this._applyModification(n7e,arguments)},darken:function(){return this._applyModification(r7e,arguments)},desaturate:function(){return this._applyModification(JDe,arguments)},saturate:function(){return this._applyModification(ZDe,arguments)},greyscale:function(){return this._applyModification(e7e,arguments)},spin:function(){return this._applyModification(s7e,arguments)},_applyCombination:function(n,r){return n.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(o7e,arguments)},complement:function(){return this._applyCombination(a7e,arguments)},monochromatic:function(){return this._applyCombination(l7e,arguments)},splitcomplement:function(){return this._applyCombination(i7e,arguments)},triad:function(){return this._applyCombination(N4,[3])},tetrad:function(){return this._applyCombination(N4,[4])}};Oe.fromRatio=function(e,n){if(zg(e)=="object"){var r={};for(var s in e)e.hasOwnProperty(s)&&(s==="a"?r[s]=e[s]:r[s]=_u(e[s]));e=r}return Oe(e,n)};function WDe(e){var n={r:0,g:0,b:0},r=1,s=null,a=null,i=null,o=!1,c=!1;return typeof e=="string"&&(e=h7e(e)),zg(e)=="object"&&(Ta(e.r)&&Ta(e.g)&&Ta(e.b)?(n=VDe(e.r,e.g,e.b),o=!0,c=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Ta(e.h)&&Ta(e.s)&&Ta(e.v)?(s=_u(e.s),a=_u(e.v),n=XDe(e.h,s,a),o=!0,c="hsv"):Ta(e.h)&&Ta(e.s)&&Ta(e.l)&&(s=_u(e.s),i=_u(e.l),n=qDe(e.h,s,i),o=!0,c="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=fM(r),{ok:o,format:e.format||c,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function VDe(e,n,r){return{r:Rt(e,255)*255,g:Rt(n,255)*255,b:Rt(r,255)*255}}function B4(e,n,r){e=Rt(e,255),n=Rt(n,255),r=Rt(r,255);var s=Math.max(e,n,r),a=Math.min(e,n,r),i,o,c=(s+a)/2;if(s==a)i=o=0;else{var A=s-a;switch(o=c>.5?A/(2-s-a):A/(s+a),s){case e:i=(n-r)/A+(n<r?6:0);break;case n:i=(r-e)/A+2;break;case r:i=(e-n)/A+4;break}i/=6}return{h:i,s:o,l:c}}function qDe(e,n,r){var s,a,i;e=Rt(e,360),n=Rt(n,100),r=Rt(r,100);function o(u,h,d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?u+(h-u)*6*d:d<1/2?h:d<2/3?u+(h-u)*(2/3-d)*6:u}if(n===0)s=a=i=r;else{var c=r<.5?r*(1+n):r+n-r*n,A=2*r-c;s=o(A,c,e+1/3),a=o(A,c,e),i=o(A,c,e-1/3)}return{r:s*255,g:a*255,b:i*255}}function S4(e,n,r){e=Rt(e,255),n=Rt(n,255),r=Rt(r,255);var s=Math.max(e,n,r),a=Math.min(e,n,r),i,o,c=s,A=s-a;if(o=s===0?0:A/s,s==a)i=0;else{switch(s){case e:i=(n-r)/A+(n<r?6:0);break;case n:i=(r-e)/A+2;break;case r:i=(e-n)/A+4;break}i/=6}return{h:i,s:o,v:c}}function XDe(e,n,r){e=Rt(e,360)*6,n=Rt(n,100),r=Rt(r,100);var s=Math.floor(e),a=e-s,i=r*(1-n),o=r*(1-a*n),c=r*(1-(1-a)*n),A=s%6,u=[r,o,i,i,c,r][A],h=[c,r,r,o,i,i][A],d=[i,i,c,r,r,o][A];return{r:u*255,g:h*255,b:d*255}}function k4(e,n,r,s){var a=[Ms(Math.round(e).toString(16)),Ms(Math.round(n).toString(16)),Ms(Math.round(r).toString(16))];return s&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function YDe(e,n,r,s,a){var i=[Ms(Math.round(e).toString(16)),Ms(Math.round(n).toString(16)),Ms(Math.round(r).toString(16)),Ms(gM(s))];return a&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function j4(e,n,r,s){var a=[Ms(gM(s)),Ms(Math.round(e).toString(16)),Ms(Math.round(n).toString(16)),Ms(Math.round(r).toString(16))];return a.join("")}Oe.equals=function(e,n){return!e||!n?!1:Oe(e).toRgbString()==Oe(n).toRgbString()};Oe.random=function(){return Oe.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function JDe(e,n){n=n===0?0:n||10;var r=Oe(e).toHsl();return r.s-=n/100,r.s=Np(r.s),Oe(r)}function ZDe(e,n){n=n===0?0:n||10;var r=Oe(e).toHsl();return r.s+=n/100,r.s=Np(r.s),Oe(r)}function e7e(e){return Oe(e).desaturate(100)}function t7e(e,n){n=n===0?0:n||10;var r=Oe(e).toHsl();return r.l+=n/100,r.l=Np(r.l),Oe(r)}function n7e(e,n){n=n===0?0:n||10;var r=Oe(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),Oe(r)}function r7e(e,n){n=n===0?0:n||10;var r=Oe(e).toHsl();return r.l-=n/100,r.l=Np(r.l),Oe(r)}function s7e(e,n){var r=Oe(e).toHsl(),s=(r.h+n)%360;return r.h=s<0?360+s:s,Oe(r)}function a7e(e){var n=Oe(e).toHsl();return n.h=(n.h+180)%360,Oe(n)}function N4(e,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var r=Oe(e).toHsl(),s=[Oe(e)],a=360/n,i=1;i<n;i++)s.push(Oe({h:(r.h+i*a)%360,s:r.s,l:r.l}));return s}function i7e(e){var n=Oe(e).toHsl(),r=n.h;return[Oe(e),Oe({h:(r+72)%360,s:n.s,l:n.l}),Oe({h:(r+216)%360,s:n.s,l:n.l})]}function o7e(e,n,r){n=n||6,r=r||30;var s=Oe(e).toHsl(),a=360/r,i=[Oe(e)];for(s.h=(s.h-(a*n>>1)+720)%360;--n;)s.h=(s.h+a)%360,i.push(Oe(s));return i}function l7e(e,n){n=n||6;for(var r=Oe(e).toHsv(),s=r.h,a=r.s,i=r.v,o=[],c=1/n;n--;)o.push(Oe({h:s,s:a,v:i})),i=(i+c)%1;return o}Oe.mix=function(e,n,r){r=r===0?0:r||50;var s=Oe(e).toRgb(),a=Oe(n).toRgb(),i=r/100,o={r:(a.r-s.r)*i+s.r,g:(a.g-s.g)*i+s.g,b:(a.b-s.b)*i+s.b,a:(a.a-s.a)*i+s.a};return Oe(o)};Oe.readability=function(e,n){var r=Oe(e),s=Oe(n);return(Math.max(r.getLuminance(),s.getLuminance())+.05)/(Math.min(r.getLuminance(),s.getLuminance())+.05)};Oe.isReadable=function(e,n,r){var s=Oe.readability(e,n),a,i;switch(i=!1,a=f7e(r),a.level+a.size){case"AAsmall":case"AAAlarge":i=s>=4.5;break;case"AAlarge":i=s>=3;break;case"AAAsmall":i=s>=7;break}return i};Oe.mostReadable=function(e,n,r){var s=null,a=0,i,o,c,A;r=r||{},o=r.includeFallbackColors,c=r.level,A=r.size;for(var u=0;u<n.length;u++)i=Oe.readability(e,n[u]),i>a&&(a=i,s=Oe(n[u]));return Oe.isReadable(e,s,{level:c,size:A})||!o?s:(r.includeFallbackColors=!1,Oe.mostReadable(e,["#fff","#000"],r))};var uw=Oe.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},c7e=Oe.hexNames=A7e(uw);function A7e(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}function fM(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Rt(e,n){u7e(e)&&(e="100%");var r=d7e(e);return e=Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function Np(e){return Math.min(1,Math.max(0,e))}function Pr(e){return parseInt(e,16)}function u7e(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function d7e(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Ms(e){return e.length==1?"0"+e:""+e}function _u(e){return e<=1&&(e=e*100+"%"),e}function gM(e){return Math.round(parseFloat(e)*255).toString(16)}function E4(e){return Pr(e)/255}var js=function(){var e="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",r="(?:"+n+")|(?:"+e+")",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+s),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+s),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+s),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ta(e){return!!js.CSS_UNIT.exec(e)}function h7e(e){e=e.replace(KDe,"").replace(GDe,"").toLowerCase();var n=!1;if(uw[e])e=uw[e],n=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=js.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=js.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=js.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=js.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=js.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=js.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=js.hex8.exec(e))?{r:Pr(r[1]),g:Pr(r[2]),b:Pr(r[3]),a:E4(r[4]),format:n?"name":"hex8"}:(r=js.hex6.exec(e))?{r:Pr(r[1]),g:Pr(r[2]),b:Pr(r[3]),format:n?"name":"hex"}:(r=js.hex4.exec(e))?{r:Pr(r[1]+""+r[1]),g:Pr(r[2]+""+r[2]),b:Pr(r[3]+""+r[3]),a:E4(r[4]+""+r[4]),format:n?"name":"hex8"}:(r=js.hex3.exec(e))?{r:Pr(r[1]+""+r[1]),g:Pr(r[2]+""+r[2]),b:Pr(r[3]+""+r[3]),format:n?"name":"hex"}:!1}function f7e(e){var n,r;return e=e||{level:"AA",size:"small"},n=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:n,size:r}}function dw(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function g7e(e){if(Array.isArray(e))return dw(e)}function mM(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function m7e(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function p7e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function es(e,n){return e.get(mM(e,n))}function T4(e,n,r){m7e(e,n),n.set(e,r)}function F4(e,n,r){return e.set(mM(e,n),r),r}function y7e(e,n){for(var r=0;r<n.length;r++){var s=n[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,C7e(s.key),s)}}function v7e(e,n,r){return n&&y7e(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function x7e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function w7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b7e(e){return g7e(e)||x7e(e)||B7e(e)||w7e()}function _7e(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function C7e(e){var n=_7e(e,"string");return typeof n=="symbol"?n:n+""}function B7e(e,n){if(e){if(typeof e=="string")return dw(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dw(e,n):void 0}}var S7e=123,k7e=function(n){return"#".concat(Math.min(n,Math.pow(2,24)).toString(16).padStart(6,"0"))},pM=function(n,r,s){return(n<<16)+(r<<8)+s},j7e=function(n){var r=Oe(n).toRgb(),s=r.r,a=r.g,i=r.b;return pM(s,a,i)},U4=function(n,r){return n*S7e%Math.pow(2,r)},wo=new WeakMap,Fa=new WeakMap,N7e=function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;p7e(this,e),T4(this,wo,void 0),T4(this,Fa,void 0),F4(Fa,this,n),this.reset()}return v7e(e,[{key:"reset",value:function(){F4(wo,this,["__reserved for background__"])}},{key:"register",value:function(r){if(es(wo,this).length>=Math.pow(2,24-es(Fa,this)))return null;var s=es(wo,this).length,a=U4(s,es(Fa,this)),i=k7e(s+(a<<24-es(Fa,this)));return es(wo,this).push(r),i}},{key:"lookup",value:function(r){if(!r)return null;var s=typeof r=="string"?j7e(r):pM.apply(void 0,b7e(r));if(!s)return null;var a=s&Math.pow(2,24-es(Fa,this))-1,i=s>>24-es(Fa,this)&Math.pow(2,es(Fa,this))-1;return U4(a,es(Fa,this))!==i||a>=es(wo,this).length?null:es(wo,this)[a]}}])}(),xh,Lt,yM,vM,To,I4,xM,wM,bM,z2,hw,fw,Id={},_M=[],E7e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ep=Array.isArray;function da(e,n){for(var r in n)e[r]=n[r];return e}function K2(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function T7e(e,n,r){var s,a,i,o={};for(i in n)i=="key"?s=n[i]:i=="ref"?a=n[i]:o[i]=n[i];if(arguments.length>2&&(o.children=arguments.length>3?xh.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return Lu(e,o,s,a,null)}function Lu(e,n,r,s,a){var i={type:e,props:n,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++yM,__i:-1,__u:0};return a==null&&Lt.vnode!=null&&Lt.vnode(i),i}function Tp(e){return e.children}function l0(e,n){this.props=e,this.context=n}function iA(e,n){if(n==null)return e.__?iA(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?iA(e):null}function CM(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return CM(e)}}function P4(e){(!e.__d&&(e.__d=!0)&&To.push(e)&&!Kg.__r++||I4!=Lt.debounceRendering)&&((I4=Lt.debounceRendering)||xM)(Kg)}function Kg(){for(var e,n,r,s,a,i,o,c=1;To.length;)To.length>c&&To.sort(wM),e=To.shift(),c=To.length,e.__d&&(r=void 0,s=void 0,a=(s=(n=e).__v).__e,i=[],o=[],n.__P&&((r=da({},s)).__v=s.__v+1,Lt.vnode&&Lt.vnode(r),G2(n.__P,r,s,n.__n,n.__P.namespaceURI,32&s.__u?[a]:null,i,a??iA(s),!!(32&s.__u),o),r.__v=s.__v,r.__.__k[r.__i]=r,kM(i,r,o),s.__e=s.__=null,r.__e!=a&&CM(r)));Kg.__r=0}function BM(e,n,r,s,a,i,o,c,A,u,h){var d,f,g,m,y,x,p,v=s&&s.__k||_M,b=n.length;for(A=F7e(r,n,v,A,b),d=0;d<b;d++)(g=r.__k[d])!=null&&(f=g.__i==-1?Id:v[g.__i]||Id,g.__i=d,x=G2(e,g,f,a,i,o,c,A,u,h),m=g.__e,g.ref&&f.ref!=g.ref&&(f.ref&&W2(f.ref,null,g),h.push(g.ref,g.__c||m,g)),y==null&&m!=null&&(y=m),(p=!!(4&g.__u))||f.__k===g.__k?A=SM(g,A,e,p):typeof g.type=="function"&&x!==void 0?A=x:m&&(A=m.nextSibling),g.__u&=-7);return r.__e=y,A}function F7e(e,n,r,s,a){var i,o,c,A,u,h=r.length,d=h,f=0;for(e.__k=new Array(a),i=0;i<a;i++)(o=n[i])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=e.__k[i]=Lu(null,o,null,null,null):Ep(o)?o=e.__k[i]=Lu(Tp,{children:o},null,null,null):o.constructor==null&&o.__b>0?o=e.__k[i]=Lu(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):e.__k[i]=o,A=i+f,o.__=e,o.__b=e.__b+1,c=null,(u=o.__i=U7e(o,r,A,d))!=-1&&(d--,(c=r[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(a>h?f--:a<h&&f++),typeof o.type!="function"&&(o.__u|=4)):u!=A&&(u==A-1?f--:u==A+1?f++:(u>A?f--:f++,o.__u|=4))):e.__k[i]=null;if(d)for(i=0;i<h;i++)(c=r[i])!=null&&!(2&c.__u)&&(c.__e==s&&(s=iA(c)),NM(c,c));return s}function SM(e,n,r,s){var a,i;if(typeof e.type=="function"){for(a=e.__k,i=0;a&&i<a.length;i++)a[i]&&(a[i].__=e,n=SM(a[i],n,r,s));return n}e.__e!=n&&(s&&(n&&e.type&&!n.parentNode&&(n=iA(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function U7e(e,n,r,s){var a,i,o,c=e.key,A=e.type,u=n[r],h=u!=null&&(2&u.__u)==0;if(u===null&&c==null||h&&c==u.key&&A==u.type)return r;if(s>(h?1:0)){for(a=r-1,i=r+1;a>=0||i<n.length;)if((u=n[o=a>=0?a--:i++])!=null&&!(2&u.__u)&&c==u.key&&A==u.type)return o}return-1}function Q4(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||E7e.test(n)?r:r+"px"}function Ef(e,n,r,s,a){var i,o;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof s=="string"&&(e.style.cssText=s=""),s)for(n in s)r&&n in r||Q4(e.style,n,"");if(r)for(n in r)s&&r[n]==s[n]||Q4(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")i=n!=(n=n.replace(bM,"$1")),o=n.toLowerCase(),n=o in e||n=="onFocusOut"||n=="onFocusIn"?o.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+i]=r,r?s?r.u=s.u:(r.u=z2,e.addEventListener(n,i?fw:hw,i)):e.removeEventListener(n,i?fw:hw,i);else{if(a=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function M4(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=z2++;else if(n.t<r.u)return;return r(Lt.event?Lt.event(n):n)}}}function G2(e,n,r,s,a,i,o,c,A,u){var h,d,f,g,m,y,x,p,v,b,w,_,C,k,j,B,E,P=n.type;if(n.constructor!=null)return null;128&r.__u&&(A=!!(32&r.__u),i=[c=n.__e=r.__e]),(h=Lt.__b)&&h(n);e:if(typeof P=="function")try{if(p=n.props,v="prototype"in P&&P.prototype.render,b=(h=P.contextType)&&s[h.__c],w=h?b?b.props.value:h.__:s,r.__c?x=(d=n.__c=r.__c).__=d.__E:(v?n.__c=d=new P(p,w):(n.__c=d=new l0(p,w),d.constructor=P,d.render=P7e),b&&b.sub(d),d.state||(d.state={}),d.__n=s,f=d.__d=!0,d.__h=[],d._sb=[]),v&&d.__s==null&&(d.__s=d.state),v&&P.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=da({},d.__s)),da(d.__s,P.getDerivedStateFromProps(p,d.__s))),g=d.props,m=d.state,d.__v=n,f)v&&P.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),v&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(v&&P.getDerivedStateFromProps==null&&p!==g&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(p,w),n.__v==r.__v||!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(p,d.__s,w)===!1){for(n.__v!=r.__v&&(d.props=p,d.state=d.__s,d.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(I){I&&(I.__=n)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(p,d.__s,w),v&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(g,m,y)})}if(d.context=w,d.props=p,d.__P=e,d.__e=!1,C=Lt.__r,k=0,v){for(d.state=d.__s,d.__d=!1,C&&C(n),h=d.render(d.props,d.state,d.context),j=0;j<d._sb.length;j++)d.__h.push(d._sb[j]);d._sb=[]}else do d.__d=!1,C&&C(n),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++k<25);d.state=d.__s,d.getChildContext!=null&&(s=da(da({},s),d.getChildContext())),v&&!f&&d.getSnapshotBeforeUpdate!=null&&(y=d.getSnapshotBeforeUpdate(g,m)),B=h,h!=null&&h.type===Tp&&h.key==null&&(B=jM(h.props.children)),c=BM(e,Ep(B)?B:[B],n,r,s,a,i,o,c,A,u),d.base=n.__e,n.__u&=-161,d.__h.length&&o.push(d),x&&(d.__E=d.__=null)}catch(I){if(n.__v=null,A||i!=null)if(I.then){for(n.__u|=A?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,n.__e=c}else{for(E=i.length;E--;)K2(i[E]);gw(n)}else n.__e=r.__e,n.__k=r.__k,I.then||gw(n);Lt.__e(I,n,r)}else i==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):c=n.__e=I7e(r.__e,n,r,s,a,i,o,A,u);return(h=Lt.diffed)&&h(n),128&n.__u?void 0:c}function gw(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(gw)}function kM(e,n,r){for(var s=0;s<r.length;s++)W2(r[s],r[++s],r[++s]);Lt.__c&&Lt.__c(n,e),e.some(function(a){try{e=a.__h,a.__h=[],e.some(function(i){i.call(a)})}catch(i){Lt.__e(i,a.__v)}})}function jM(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Ep(e)?e.map(jM):da({},e)}function I7e(e,n,r,s,a,i,o,c,A){var u,h,d,f,g,m,y,x=r.props||Id,p=n.props,v=n.type;if(v=="svg"?a="http://www.w3.org/2000/svg":v=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((g=i[u])&&"setAttribute"in g==!!v&&(v?g.localName==v:g.nodeType==3)){e=g,i[u]=null;break}}if(e==null){if(v==null)return document.createTextNode(p);e=document.createElementNS(a,v,p.is&&p),c&&(Lt.__m&&Lt.__m(n,i),c=!1),i=null}if(v==null)x===p||c&&e.data==p||(e.data=p);else{if(i=i&&xh.call(e.childNodes),!c&&i!=null)for(x={},u=0;u<e.attributes.length;u++)x[(g=e.attributes[u]).name]=g.value;for(u in x)if(g=x[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=g;else if(!(u in p)){if(u=="value"&&"defaultValue"in p||u=="checked"&&"defaultChecked"in p)continue;Ef(e,u,null,g,a)}}for(u in p)g=p[u],u=="children"?f=g:u=="dangerouslySetInnerHTML"?h=g:u=="value"?m=g:u=="checked"?y=g:c&&typeof g!="function"||x[u]===g||Ef(e,u,g,x[u],a);if(h)c||d&&(h.__html==d.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),n.__k=[];else if(d&&(e.innerHTML=""),BM(n.type=="template"?e.content:e,Ep(f)?f:[f],n,r,s,v=="foreignObject"?"http://www.w3.org/1999/xhtml":a,i,o,i?i[0]:r.__k&&iA(r,0),c,A),i!=null)for(u=i.length;u--;)K2(i[u]);c||(u="value",v=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[u]||v=="progress"&&!m||v=="option"&&m!=x[u])&&Ef(e,u,m,x[u],a),u="checked",y!=null&&y!=e[u]&&Ef(e,u,y,x[u],a))}return e}function W2(e,n,r){try{if(typeof e=="function"){var s=typeof e.__u=="function";s&&e.__u(),s&&n==null||(e.__u=e(n))}else e.current=n}catch(a){Lt.__e(a,r)}}function NM(e,n,r){var s,a;if(Lt.unmount&&Lt.unmount(e),(s=e.ref)&&(s.current&&s.current!=e.__e||W2(s,null,n)),(s=e.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){Lt.__e(i,n)}s.base=s.__P=null}if(s=e.__k)for(a=0;a<s.length;a++)s[a]&&NM(s[a],n,r||typeof e.type!="function");r||K2(e.__e),e.__c=e.__=e.__e=void 0}function P7e(e,n,r){return this.constructor(e,r)}function Q7e(e,n,r){var s,a,i,o;n==document&&(n=document.documentElement),Lt.__&&Lt.__(e,n),a=(s=typeof r=="function")?null:r&&r.__k||n.__k,i=[],o=[],G2(n,e=(!s&&r||n).__k=T7e(Tp,null,[e]),a||Id,Id,n.namespaceURI,!s&&r?[r]:a?null:n.firstChild?xh.call(n.childNodes):null,i,!s&&r?r:a?a.__e:n.firstChild,s,o),kM(i,e,o)}function EM(e,n,r){var s,a,i,o,c=da({},e.props);for(i in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),n)i=="key"?s=n[i]:i=="ref"?a=n[i]:c[i]=n[i]===void 0&&o!=null?o[i]:n[i];return arguments.length>2&&(c.children=arguments.length>3?xh.call(arguments,2):r),Lu(e.type,c,s||e.key,a||e.ref,null)}xh=_M.slice,Lt={__e:function(e,n,r,s){for(var a,i,o;n=n.__;)if((a=n.__c)&&!a.__)try{if((i=a.constructor)&&i.getDerivedStateFromError!=null&&(a.setState(i.getDerivedStateFromError(e)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(e,s||{}),o=a.__d),o)return a.__E=a}catch(c){e=c}throw e}},yM=0,vM=function(e){return e!=null&&e.constructor==null},l0.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=da({},this.state),typeof e=="function"&&(e=e(da({},r),this.props)),e&&da(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),P4(this))},l0.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),P4(this))},l0.prototype.render=Tp,To=[],xM=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,wM=function(e,n){return e.__v.__b-n.__v.__b},Kg.__r=0,bM=/(PointerCapture)$|Capture$/i,z2=0,hw=M4(!1),fw=M4(!0);function D4(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function M7e(e){if(Array.isArray(e))return e}function D7e(e,n,r){return(n=z7e(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function R7e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function $7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R4(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function O7e(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?R4(Object(r),!0).forEach(function(s){D7e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R4(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function L7e(e,n){return M7e(e)||R7e(e,n)||K7e(e,n)||$7e()}function H7e(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function z7e(e){var n=H7e(e,"string");return typeof n=="symbol"?n:n+""}function Gg(e){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gg(e)}function K7e(e,n){if(e){if(typeof e=="string")return D4(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D4(e,n):void 0}}var mw=function(n){if(Gg(n)!=="object")return n;var r=EM(n);if(r.props){var s;r.props=O7e({},r.props),r!=null&&(s=r.props)!==null&&s!==void 0&&s.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(mw):mw(r.props.children))}return r},G7e=function(n){return vM(EM(n))},W7e=function(n,r){delete r.__k,Q7e(mw(n),r)};function V7e(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var q7e=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;V7e(q7e);var X7e=H2({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(n,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.style,i=a===void 0?{}:a,o=!!n&&Gg(n)==="object"&&!!n.node&&typeof n.node=="function",c=is(o?n.node():n);c.style("position")==="static"&&c.style("position","relative"),r.tooltipEl=c.append("div").attr("class","float-tooltip-kap"),Object.entries(i).forEach(function(u){var h=L7e(u,2),d=h[0],f=h[1];return r.tooltipEl.style(d,f)}),r.tooltipEl.style("left","-10000px").style("display","none");var A="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,c.on("mousemove.".concat(A),function(u){r.mouseInside=!0;var h=aa(u),d=c.node(),f=d.offsetWidth,g=d.offsetHeight,m=[r.offsetX===null||r.offsetX===void 0?"-".concat(h[0]/f*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?g>130&&g-h[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",h[0]+"px").style("top",h[1]+"px").style("transform","translate(".concat(m.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseover.".concat(A),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),c.on("mouseout.".concat(A),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(n){n.tooltipEl.style("display",n.content&&n.mouseInside?"inline":"none"),n.content?n.content instanceof HTMLElement?(n.tooltipEl.text(""),n.tooltipEl.append(function(){return n.content})):typeof n.content=="string"?n.tooltipEl.html(n.content):G7e(n.content)?(n.tooltipEl.text(""),W7e(n.content,n.tooltipEl.node())):(n.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",n.content,n.content.toString())):n.tooltipEl.text("")}});function Y7e(e,n,r){var s,a=1;e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function i(){var o,c=s.length,A,u=0,h=0,d=0;for(o=0;o<c;++o)A=s[o],u+=A.x||0,h+=A.y||0,d+=A.z||0;for(u=(u/c-e)*a,h=(h/c-n)*a,d=(d/c-r)*a,o=0;o<c;++o)A=s[o],u&&(A.x-=u),h&&(A.y-=h),d&&(A.z-=d)}return i.initialize=function(o){s=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(n=+o,i):n},i.z=function(o){return arguments.length?(r=+o,i):r},i.strength=function(o){return arguments.length?(a=+o,i):a},i}function J7e(e){const n=+this._x.call(null,e);return TM(this.cover(n),n,e)}function TM(e,n,r){if(isNaN(n))return e;var s,a=e._root,i={data:r},o=e._x0,c=e._x1,A,u,h,d,f;if(!a)return e._root=i,e;for(;a.length;)if((h=n>=(A=(o+c)/2))?o=A:c=A,s=a,!(a=a[d=+h]))return s[d]=i,e;if(u=+e._x.call(null,a.data),n===u)return i.next=a,s?s[d]=i:e._root=i,e;do s=s?s[d]=new Array(2):e._root=new Array(2),(h=n>=(A=(o+c)/2))?o=A:c=A;while((d=+h)==(f=+(u>=A)));return s[f]=a,s[d]=i,e}function Z7e(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n);let s=1/0,a=-1/0;for(let i=0,o;i<n;++i)isNaN(o=+this._x.call(null,e[i]))||(r[i]=o,o<s&&(s=o),o>a&&(a=o));if(s>a)return this;this.cover(s).cover(a);for(let i=0;i<n;++i)TM(this,r[i],e[i]);return this}function eRe(e){if(isNaN(e=+e))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var s=r-n||1,a=this._root,i,o;n>e||e>=r;)switch(o=+(e<n),i=new Array(2),i[o]=a,a=i,s*=2,o){case 0:r=n+s;break;case 1:n=r-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._x1=r,this}function tRe(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function nRe(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function ei(e,n,r){this.node=e,this.x0=n,this.x1=r}function rRe(e,n){var r,s=this._x0,a,i,o=this._x1,c=[],A=this._root,u,h;for(A&&c.push(new ei(A,s,o)),n==null?n=1/0:(s=e-n,o=e+n);u=c.pop();)if(!(!(A=u.node)||(a=u.x0)>o||(i=u.x1)<s))if(A.length){var d=(a+i)/2;c.push(new ei(A[1],d,i),new ei(A[0],a,d)),(h=+(e>=d))&&(u=c[c.length-1],c[c.length-1]=c[c.length-1-h],c[c.length-1-h]=u)}else{var f=Math.abs(e-+this._x.call(null,A.data));f<n&&(n=f,s=e-f,o=e+f,r=A.data)}return r}function sRe(e){if(isNaN(A=+this._x.call(null,e)))return this;var n,r=this._root,s,a,i,o=this._x0,c=this._x1,A,u,h,d,f;if(!r)return this;if(r.length)for(;;){if((h=A>=(u=(o+c)/2))?o=u:c=u,n=r,!(r=r[d=+h]))return this;if(!r.length)break;n[d+1&1]&&(s=n,f=d)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,a?(i?a.next=i:delete a.next,this):n?(i?n[d]=i:delete n[d],(r=n[0]||n[1])&&r===(n[1]||n[0])&&!r.length&&(s?s[f]=r:this._root=r),this):(this._root=i,this)}function aRe(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function iRe(){return this._root}function oRe(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function lRe(e){var n=[],r,s=this._root,a,i,o;for(s&&n.push(new ei(s,this._x0,this._x1));r=n.pop();)if(!e(s=r.node,i=r.x0,o=r.x1)&&s.length){var c=(i+o)/2;(a=s[1])&&n.push(new ei(a,c,o)),(a=s[0])&&n.push(new ei(a,i,c))}return this}function cRe(e){var n=[],r=[],s;for(this._root&&n.push(new ei(this._root,this._x0,this._x1));s=n.pop();){var a=s.node;if(a.length){var i,o=s.x0,c=s.x1,A=(o+c)/2;(i=a[0])&&n.push(new ei(i,o,A)),(i=a[1])&&n.push(new ei(i,A,c))}r.push(s)}for(;s=r.pop();)e(s.node,s.x0,s.x1);return this}function ARe(e){return e[0]}function uRe(e){return arguments.length?(this._x=e,this):this._x}function FM(e,n){var r=new V2(n??ARe,NaN,NaN);return e==null?r:r.addAll(e)}function V2(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function $4(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var Er=FM.prototype=V2.prototype;Er.copy=function(){var e=new V2(this._x,this._x0,this._x1),n=this._root,r,s;if(!n)return e;if(!n.length)return e._root=$4(n),e;for(r=[{source:n,target:e._root=new Array(2)}];n=r.pop();)for(var a=0;a<2;++a)(s=n.source[a])&&(s.length?r.push({source:s,target:n.target[a]=new Array(2)}):n.target[a]=$4(s));return e};Er.add=J7e;Er.addAll=Z7e;Er.cover=eRe;Er.data=tRe;Er.extent=nRe;Er.find=rRe;Er.remove=sRe;Er.removeAll=aRe;Er.root=iRe;Er.size=oRe;Er.visit=lRe;Er.visitAfter=cRe;Er.x=uRe;function dRe(e){const n=+this._x.call(null,e),r=+this._y.call(null,e);return UM(this.cover(n,r),n,r,e)}function UM(e,n,r,s){if(isNaN(n)||isNaN(r))return e;var a,i=e._root,o={data:s},c=e._x0,A=e._y0,u=e._x1,h=e._y1,d,f,g,m,y,x,p,v;if(!i)return e._root=o,e;for(;i.length;)if((y=n>=(d=(c+u)/2))?c=d:u=d,(x=r>=(f=(A+h)/2))?A=f:h=f,a=i,!(i=i[p=x<<1|y]))return a[p]=o,e;if(g=+e._x.call(null,i.data),m=+e._y.call(null,i.data),n===g&&r===m)return o.next=i,a?a[p]=o:e._root=o,e;do a=a?a[p]=new Array(4):e._root=new Array(4),(y=n>=(d=(c+u)/2))?c=d:u=d,(x=r>=(f=(A+h)/2))?A=f:h=f;while((p=x<<1|y)===(v=(m>=f)<<1|g>=d));return a[v]=i,a[p]=o,e}function hRe(e){var n,r,s=e.length,a,i,o=new Array(s),c=new Array(s),A=1/0,u=1/0,h=-1/0,d=-1/0;for(r=0;r<s;++r)isNaN(a=+this._x.call(null,n=e[r]))||isNaN(i=+this._y.call(null,n))||(o[r]=a,c[r]=i,a<A&&(A=a),a>h&&(h=a),i<u&&(u=i),i>d&&(d=i));if(A>h||u>d)return this;for(this.cover(A,u).cover(h,d),r=0;r<s;++r)UM(this,o[r],c[r],e[r]);return this}function fRe(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,s=this._y0,a=this._x1,i=this._y1;if(isNaN(r))a=(r=Math.floor(e))+1,i=(s=Math.floor(n))+1;else{for(var o=a-r||1,c=this._root,A,u;r>e||e>=a||s>n||n>=i;)switch(u=(n<s)<<1|e<r,A=new Array(4),A[u]=c,c=A,o*=2,u){case 0:a=r+o,i=s+o;break;case 1:r=a-o,i=s+o;break;case 2:a=r+o,s=i-o;break;case 3:r=a-o,s=i-o;break}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=s,this._x1=a,this._y1=i,this}function gRe(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function mRe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function cr(e,n,r,s,a){this.node=e,this.x0=n,this.y0=r,this.x1=s,this.y1=a}function pRe(e,n,r){var s,a=this._x0,i=this._y0,o,c,A,u,h=this._x1,d=this._y1,f=[],g=this._root,m,y;for(g&&f.push(new cr(g,a,i,h,d)),r==null?r=1/0:(a=e-r,i=n-r,h=e+r,d=n+r,r*=r);m=f.pop();)if(!(!(g=m.node)||(o=m.x0)>h||(c=m.y0)>d||(A=m.x1)<a||(u=m.y1)<i))if(g.length){var x=(o+A)/2,p=(c+u)/2;f.push(new cr(g[3],x,p,A,u),new cr(g[2],o,p,x,u),new cr(g[1],x,c,A,p),new cr(g[0],o,c,x,p)),(y=(n>=p)<<1|e>=x)&&(m=f[f.length-1],f[f.length-1]=f[f.length-1-y],f[f.length-1-y]=m)}else{var v=e-+this._x.call(null,g.data),b=n-+this._y.call(null,g.data),w=v*v+b*b;if(w<r){var _=Math.sqrt(r=w);a=e-_,i=n-_,h=e+_,d=n+_,s=g.data}}return s}function yRe(e){if(isNaN(h=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var n,r=this._root,s,a,i,o=this._x0,c=this._y0,A=this._x1,u=this._y1,h,d,f,g,m,y,x,p;if(!r)return this;if(r.length)for(;;){if((m=h>=(f=(o+A)/2))?o=f:A=f,(y=d>=(g=(c+u)/2))?c=g:u=g,n=r,!(r=r[x=y<<1|m]))return this;if(!r.length)break;(n[x+1&3]||n[x+2&3]||n[x+3&3])&&(s=n,p=x)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,a?(i?a.next=i:delete a.next,this):n?(i?n[x]=i:delete n[x],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(s?s[p]=r:this._root=r),this):(this._root=i,this)}function vRe(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function xRe(){return this._root}function wRe(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function bRe(e){var n=[],r,s=this._root,a,i,o,c,A;for(s&&n.push(new cr(s,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(s=r.node,i=r.x0,o=r.y0,c=r.x1,A=r.y1)&&s.length){var u=(i+c)/2,h=(o+A)/2;(a=s[3])&&n.push(new cr(a,u,h,c,A)),(a=s[2])&&n.push(new cr(a,i,h,u,A)),(a=s[1])&&n.push(new cr(a,u,o,c,h)),(a=s[0])&&n.push(new cr(a,i,o,u,h))}return this}function _Re(e){var n=[],r=[],s;for(this._root&&n.push(new cr(this._root,this._x0,this._y0,this._x1,this._y1));s=n.pop();){var a=s.node;if(a.length){var i,o=s.x0,c=s.y0,A=s.x1,u=s.y1,h=(o+A)/2,d=(c+u)/2;(i=a[0])&&n.push(new cr(i,o,c,h,d)),(i=a[1])&&n.push(new cr(i,h,c,A,d)),(i=a[2])&&n.push(new cr(i,o,d,h,u)),(i=a[3])&&n.push(new cr(i,h,d,A,u))}r.push(s)}for(;s=r.pop();)e(s.node,s.x0,s.y0,s.x1,s.y1);return this}function CRe(e){return e[0]}function BRe(e){return arguments.length?(this._x=e,this):this._x}function SRe(e){return e[1]}function kRe(e){return arguments.length?(this._y=e,this):this._y}function Fp(e,n,r){var s=new q2(n??CRe,r??SRe,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function q2(e,n,r,s,a,i){this._x=e,this._y=n,this._x0=r,this._y0=s,this._x1=a,this._y1=i,this._root=void 0}function O4(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var mr=Fp.prototype=q2.prototype;mr.copy=function(){var e=new q2(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,s;if(!n)return e;if(!n.length)return e._root=O4(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var a=0;a<4;++a)(s=n.source[a])&&(s.length?r.push({source:s,target:n.target[a]=new Array(4)}):n.target[a]=O4(s));return e};mr.add=dRe;mr.addAll=hRe;mr.cover=fRe;mr.data=gRe;mr.extent=mRe;mr.find=pRe;mr.remove=yRe;mr.removeAll=vRe;mr.root=xRe;mr.size=wRe;mr.visit=bRe;mr.visitAfter=_Re;mr.x=BRe;mr.y=kRe;function jRe(e){const n=+this._x.call(null,e),r=+this._y.call(null,e),s=+this._z.call(null,e);return IM(this.cover(n,r,s),n,r,s,e)}function IM(e,n,r,s,a){if(isNaN(n)||isNaN(r)||isNaN(s))return e;var i,o=e._root,c={data:a},A=e._x0,u=e._y0,h=e._z0,d=e._x1,f=e._y1,g=e._z1,m,y,x,p,v,b,w,_,C,k,j;if(!o)return e._root=c,e;for(;o.length;)if((w=n>=(m=(A+d)/2))?A=m:d=m,(_=r>=(y=(u+f)/2))?u=y:f=y,(C=s>=(x=(h+g)/2))?h=x:g=x,i=o,!(o=o[k=C<<2|_<<1|w]))return i[k]=c,e;if(p=+e._x.call(null,o.data),v=+e._y.call(null,o.data),b=+e._z.call(null,o.data),n===p&&r===v&&s===b)return c.next=o,i?i[k]=c:e._root=c,e;do i=i?i[k]=new Array(8):e._root=new Array(8),(w=n>=(m=(A+d)/2))?A=m:d=m,(_=r>=(y=(u+f)/2))?u=y:f=y,(C=s>=(x=(h+g)/2))?h=x:g=x;while((k=C<<2|_<<1|w)===(j=(b>=x)<<2|(v>=y)<<1|p>=m));return i[j]=o,i[k]=c,e}function NRe(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n),s=new Float64Array(n),a=new Float64Array(n);let i=1/0,o=1/0,c=1/0,A=-1/0,u=-1/0,h=-1/0;for(let d=0,f,g,m,y;d<n;++d)isNaN(g=+this._x.call(null,f=e[d]))||isNaN(m=+this._y.call(null,f))||isNaN(y=+this._z.call(null,f))||(r[d]=g,s[d]=m,a[d]=y,g<i&&(i=g),g>A&&(A=g),m<o&&(o=m),m>u&&(u=m),y<c&&(c=y),y>h&&(h=y));if(i>A||o>u||c>h)return this;this.cover(i,o,c).cover(A,u,h);for(let d=0;d<n;++d)IM(this,r[d],s[d],a[d],e[d]);return this}function ERe(e,n,r){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(r=+r))return this;var s=this._x0,a=this._y0,i=this._z0,o=this._x1,c=this._y1,A=this._z1;if(isNaN(s))o=(s=Math.floor(e))+1,c=(a=Math.floor(n))+1,A=(i=Math.floor(r))+1;else{for(var u=o-s||1,h=this._root,d,f;s>e||e>=o||a>n||n>=c||i>r||r>=A;)switch(f=(r<i)<<2|(n<a)<<1|e<s,d=new Array(8),d[f]=h,h=d,u*=2,f){case 0:o=s+u,c=a+u,A=i+u;break;case 1:s=o-u,c=a+u,A=i+u;break;case 2:o=s+u,a=c-u,A=i+u;break;case 3:s=o-u,a=c-u,A=i+u;break;case 4:o=s+u,c=a+u,i=A-u;break;case 5:s=o-u,c=a+u,i=A-u;break;case 6:o=s+u,a=c-u,i=A-u;break;case 7:s=o-u,a=c-u,i=A-u;break}this._root&&this._root.length&&(this._root=h)}return this._x0=s,this._y0=a,this._z0=i,this._x1=o,this._y1=c,this._z1=A,this}function TRe(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function FRe(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Ct(e,n,r,s,a,i,o){this.node=e,this.x0=n,this.y0=r,this.z0=s,this.x1=a,this.y1=i,this.z1=o}function URe(e,n,r,s){var a,i=this._x0,o=this._y0,c=this._z0,A,u,h,d,f,g,m=this._x1,y=this._y1,x=this._z1,p=[],v=this._root,b,w;for(v&&p.push(new Ct(v,i,o,c,m,y,x)),s==null?s=1/0:(i=e-s,o=n-s,c=r-s,m=e+s,y=n+s,x=r+s,s*=s);b=p.pop();)if(!(!(v=b.node)||(A=b.x0)>m||(u=b.y0)>y||(h=b.z0)>x||(d=b.x1)<i||(f=b.y1)<o||(g=b.z1)<c))if(v.length){var _=(A+d)/2,C=(u+f)/2,k=(h+g)/2;p.push(new Ct(v[7],_,C,k,d,f,g),new Ct(v[6],A,C,k,_,f,g),new Ct(v[5],_,u,k,d,C,g),new Ct(v[4],A,u,k,_,C,g),new Ct(v[3],_,C,h,d,f,k),new Ct(v[2],A,C,h,_,f,k),new Ct(v[1],_,u,h,d,C,k),new Ct(v[0],A,u,h,_,C,k)),(w=(r>=k)<<2|(n>=C)<<1|e>=_)&&(b=p[p.length-1],p[p.length-1]=p[p.length-1-w],p[p.length-1-w]=b)}else{var j=e-+this._x.call(null,v.data),B=n-+this._y.call(null,v.data),E=r-+this._z.call(null,v.data),P=j*j+B*B+E*E;if(P<s){var I=Math.sqrt(s=P);i=e-I,o=n-I,c=r-I,m=e+I,y=n+I,x=r+I,a=v.data}}return a}const IRe=(e,n,r,s,a,i)=>Math.sqrt((e-s)**2+(n-a)**2+(r-i)**2);function PRe(e,n,r,s){const a=[],i=e-s,o=n-s,c=r-s,A=e+s,u=n+s,h=r+s;return this.visit((d,f,g,m,y,x,p)=>{if(!d.length)do{const v=d.data;IRe(e,n,r,this._x(v),this._y(v),this._z(v))<=s&&a.push(v)}while(d=d.next);return f>A||g>u||m>h||y<i||x<o||p<c}),a}function QRe(e){if(isNaN(f=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e))||isNaN(m=+this._z.call(null,e)))return this;var n,r=this._root,s,a,i,o=this._x0,c=this._y0,A=this._z0,u=this._x1,h=this._y1,d=this._z1,f,g,m,y,x,p,v,b,w,_,C;if(!r)return this;if(r.length)for(;;){if((v=f>=(y=(o+u)/2))?o=y:u=y,(b=g>=(x=(c+h)/2))?c=x:h=x,(w=m>=(p=(A+d)/2))?A=p:d=p,n=r,!(r=r[_=w<<2|b<<1|v]))return this;if(!r.length)break;(n[_+1&7]||n[_+2&7]||n[_+3&7]||n[_+4&7]||n[_+5&7]||n[_+6&7]||n[_+7&7])&&(s=n,C=_)}for(;r.data!==e;)if(a=r,!(r=r.next))return this;return(i=r.next)&&delete r.next,a?(i?a.next=i:delete a.next,this):n?(i?n[_]=i:delete n[_],(r=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&r===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!r.length&&(s?s[C]=r:this._root=r),this):(this._root=i,this)}function MRe(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function DRe(){return this._root}function RRe(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function $Re(e){var n=[],r,s=this._root,a,i,o,c,A,u,h;for(s&&n.push(new Ct(s,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=n.pop();)if(!e(s=r.node,i=r.x0,o=r.y0,c=r.z0,A=r.x1,u=r.y1,h=r.z1)&&s.length){var d=(i+A)/2,f=(o+u)/2,g=(c+h)/2;(a=s[7])&&n.push(new Ct(a,d,f,g,A,u,h)),(a=s[6])&&n.push(new Ct(a,i,f,g,d,u,h)),(a=s[5])&&n.push(new Ct(a,d,o,g,A,f,h)),(a=s[4])&&n.push(new Ct(a,i,o,g,d,f,h)),(a=s[3])&&n.push(new Ct(a,d,f,c,A,u,g)),(a=s[2])&&n.push(new Ct(a,i,f,c,d,u,g)),(a=s[1])&&n.push(new Ct(a,d,o,c,A,f,g)),(a=s[0])&&n.push(new Ct(a,i,o,c,d,f,g))}return this}function ORe(e){var n=[],r=[],s;for(this._root&&n.push(new Ct(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));s=n.pop();){var a=s.node;if(a.length){var i,o=s.x0,c=s.y0,A=s.z0,u=s.x1,h=s.y1,d=s.z1,f=(o+u)/2,g=(c+h)/2,m=(A+d)/2;(i=a[0])&&n.push(new Ct(i,o,c,A,f,g,m)),(i=a[1])&&n.push(new Ct(i,f,c,A,u,g,m)),(i=a[2])&&n.push(new Ct(i,o,g,A,f,h,m)),(i=a[3])&&n.push(new Ct(i,f,g,A,u,h,m)),(i=a[4])&&n.push(new Ct(i,o,c,m,f,g,d)),(i=a[5])&&n.push(new Ct(i,f,c,m,u,g,d)),(i=a[6])&&n.push(new Ct(i,o,g,m,f,h,d)),(i=a[7])&&n.push(new Ct(i,f,g,m,u,h,d))}r.push(s)}for(;s=r.pop();)e(s.node,s.x0,s.y0,s.z0,s.x1,s.y1,s.z1);return this}function LRe(e){return e[0]}function HRe(e){return arguments.length?(this._x=e,this):this._x}function zRe(e){return e[1]}function KRe(e){return arguments.length?(this._y=e,this):this._y}function GRe(e){return e[2]}function WRe(e){return arguments.length?(this._z=e,this):this._z}function PM(e,n,r,s){var a=new X2(n??LRe,r??zRe,s??GRe,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?a:a.addAll(e)}function X2(e,n,r,s,a,i,o,c,A){this._x=e,this._y=n,this._z=r,this._x0=s,this._y0=a,this._z0=i,this._x1=o,this._y1=c,this._z1=A,this._root=void 0}function L4(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var Rn=PM.prototype=X2.prototype;Rn.copy=function(){var e=new X2(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root,r,s;if(!n)return e;if(!n.length)return e._root=L4(n),e;for(r=[{source:n,target:e._root=new Array(8)}];n=r.pop();)for(var a=0;a<8;++a)(s=n.source[a])&&(s.length?r.push({source:s,target:n.target[a]=new Array(8)}):n.target[a]=L4(s));return e};Rn.add=jRe;Rn.addAll=NRe;Rn.cover=ERe;Rn.data=TRe;Rn.extent=FRe;Rn.find=URe;Rn.findAllWithinRadius=PRe;Rn.remove=QRe;Rn.removeAll=MRe;Rn.root=DRe;Rn.size=RRe;Rn.visit=$Re;Rn.visitAfter=ORe;Rn.x=HRe;Rn.y=KRe;Rn.z=WRe;function Ya(e){return function(){return e}}function Ha(e){return(e()-.5)*1e-6}function VRe(e){return e.index}function H4(e,n){var r=e.get(n);if(!r)throw new Error("node not found: "+n);return r}function qRe(e){var n=VRe,r=f,s,a=Ya(30),i,o,c,A,u,h,d=1;e==null&&(e=[]);function f(p){return 1/Math.min(A[p.source.index],A[p.target.index])}function g(p){for(var v=0,b=e.length;v<d;++v)for(var w=0,_,C,k,j=0,B=0,E=0,P,I;w<b;++w)_=e[w],C=_.source,k=_.target,j=k.x+k.vx-C.x-C.vx||Ha(h),c>1&&(B=k.y+k.vy-C.y-C.vy||Ha(h)),c>2&&(E=k.z+k.vz-C.z-C.vz||Ha(h)),P=Math.sqrt(j*j+B*B+E*E),P=(P-i[w])/P*p*s[w],j*=P,B*=P,E*=P,k.vx-=j*(I=u[w]),c>1&&(k.vy-=B*I),c>2&&(k.vz-=E*I),C.vx+=j*(I=1-I),c>1&&(C.vy+=B*I),c>2&&(C.vz+=E*I)}function m(){if(o){var p,v=o.length,b=e.length,w=new Map(o.map((C,k)=>[n(C,k,o),C])),_;for(p=0,A=new Array(v);p<b;++p)_=e[p],_.index=p,typeof _.source!="object"&&(_.source=H4(w,_.source)),typeof _.target!="object"&&(_.target=H4(w,_.target)),A[_.source.index]=(A[_.source.index]||0)+1,A[_.target.index]=(A[_.target.index]||0)+1;for(p=0,u=new Array(b);p<b;++p)_=e[p],u[p]=A[_.source.index]/(A[_.source.index]+A[_.target.index]);s=new Array(b),y(),i=new Array(b),x()}}function y(){if(o)for(var p=0,v=e.length;p<v;++p)s[p]=+r(e[p],p,e)}function x(){if(o)for(var p=0,v=e.length;p<v;++p)i[p]=+a(e[p],p,e)}return g.initialize=function(p,...v){o=p,h=v.find(b=>typeof b=="function")||Math.random,c=v.find(b=>[1,2,3].includes(b))||2,m()},g.links=function(p){return arguments.length?(e=p,m(),g):e},g.id=function(p){return arguments.length?(n=p,g):n},g.iterations=function(p){return arguments.length?(d=+p,g):d},g.strength=function(p){return arguments.length?(r=typeof p=="function"?p:Ya(+p),y(),g):r},g.distance=function(p){return arguments.length?(a=typeof p=="function"?p:Ya(+p),x(),g):a},g}const XRe=1664525,YRe=1013904223,z4=4294967296;function JRe(){let e=1;return()=>(e=(XRe*e+YRe)%z4)/z4}var K4=3;function vv(e){return e.x}function G4(e){return e.y}function ZRe(e){return e.z}var e8e=10,t8e=Math.PI*(3-Math.sqrt(5)),n8e=Math.PI*20/(9+Math.sqrt(221));function r8e(e,n){n=n||2;var r=Math.min(K4,Math.max(1,Math.round(n))),s,a=1,i=.001,o=1-Math.pow(i,1/300),c=0,A=.6,u=new Map,h=Xm(g),d=vh("tick","end"),f=JRe();e==null&&(e=[]);function g(){m(),d.call("tick",s),a<i&&(h.stop(),d.call("end",s))}function m(p){var v,b=e.length,w;p===void 0&&(p=1);for(var _=0;_<p;++_)for(a+=(c-a)*o,u.forEach(function(C){C(a)}),v=0;v<b;++v)w=e[v],w.fx==null?w.x+=w.vx*=A:(w.x=w.fx,w.vx=0),r>1&&(w.fy==null?w.y+=w.vy*=A:(w.y=w.fy,w.vy=0)),r>2&&(w.fz==null?w.z+=w.vz*=A:(w.z=w.fz,w.vz=0));return s}function y(){for(var p=0,v=e.length,b;p<v;++p){if(b=e[p],b.index=p,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),b.fz!=null&&(b.z=b.fz),isNaN(b.x)||r>1&&isNaN(b.y)||r>2&&isNaN(b.z)){var w=e8e*(r>2?Math.cbrt(.5+p):r>1?Math.sqrt(.5+p):p),_=p*t8e,C=p*n8e;r===1?b.x=w:r===2?(b.x=w*Math.cos(_),b.y=w*Math.sin(_)):(b.x=w*Math.sin(_)*Math.cos(C),b.y=w*Math.cos(_),b.z=w*Math.sin(_)*Math.sin(C))}(isNaN(b.vx)||r>1&&isNaN(b.vy)||r>2&&isNaN(b.vz))&&(b.vx=0,r>1&&(b.vy=0),r>2&&(b.vz=0))}}function x(p){return p.initialize&&p.initialize(e,f,r),p}return y(),s={tick:m,restart:function(){return h.restart(g),s},stop:function(){return h.stop(),s},numDimensions:function(p){return arguments.length?(r=Math.min(K4,Math.max(1,Math.round(p))),u.forEach(x),s):r},nodes:function(p){return arguments.length?(e=p,y(),u.forEach(x),s):e},alpha:function(p){return arguments.length?(a=+p,s):a},alphaMin:function(p){return arguments.length?(i=+p,s):i},alphaDecay:function(p){return arguments.length?(o=+p,s):+o},alphaTarget:function(p){return arguments.length?(c=+p,s):c},velocityDecay:function(p){return arguments.length?(A=1-p,s):1-A},randomSource:function(p){return arguments.length?(f=p,u.forEach(x),s):f},force:function(p,v){return arguments.length>1?(v==null?u.delete(p):u.set(p,x(v)),s):u.get(p)},find:function(){var p=Array.prototype.slice.call(arguments),v=p.shift()||0,b=(r>1?p.shift():null)||0,w=(r>2?p.shift():null)||0,_=p.shift()||1/0,C=0,k=e.length,j,B,E,P,I,U;for(_*=_,C=0;C<k;++C)I=e[C],j=v-I.x,B=b-(I.y||0),E=w-(I.z||0),P=j*j+B*B+E*E,P<_&&(U=I,_=P);return U},on:function(p,v){return arguments.length>1?(d.on(p,v),s):d.on(p)}}}function s8e(){var e,n,r,s,a,i=Ya(-30),o,c=1,A=1/0,u=.81;function h(m){var y,x=e.length,p=(n===1?FM(e,vv):n===2?Fp(e,vv,G4):n===3?PM(e,vv,G4,ZRe):null).visitAfter(f);for(a=m,y=0;y<x;++y)r=e[y],p.visit(g)}function d(){if(e){var m,y=e.length,x;for(o=new Array(y),m=0;m<y;++m)x=e[m],o[x.index]=+i(x,m,e)}}function f(m){var y=0,x,p,v=0,b,w,_,C,k=m.length;if(k){for(b=w=_=C=0;C<k;++C)(x=m[C])&&(p=Math.abs(x.value))&&(y+=x.value,v+=p,b+=p*(x.x||0),w+=p*(x.y||0),_+=p*(x.z||0));y*=Math.sqrt(4/k),m.x=b/v,n>1&&(m.y=w/v),n>2&&(m.z=_/v)}else{x=m,x.x=x.data.x,n>1&&(x.y=x.data.y),n>2&&(x.z=x.data.z);do y+=o[x.data.index];while(x=x.next)}m.value=y}function g(m,y,x,p,v){if(!m.value)return!0;var b=[x,p,v][n-1],w=m.x-r.x,_=n>1?m.y-r.y:0,C=n>2?m.z-r.z:0,k=b-y,j=w*w+_*_+C*C;if(k*k/u<j)return j<A&&(w===0&&(w=Ha(s),j+=w*w),n>1&&_===0&&(_=Ha(s),j+=_*_),n>2&&C===0&&(C=Ha(s),j+=C*C),j<c&&(j=Math.sqrt(c*j)),r.vx+=w*m.value*a/j,n>1&&(r.vy+=_*m.value*a/j),n>2&&(r.vz+=C*m.value*a/j)),!0;if(m.length||j>=A)return;(m.data!==r||m.next)&&(w===0&&(w=Ha(s),j+=w*w),n>1&&_===0&&(_=Ha(s),j+=_*_),n>2&&C===0&&(C=Ha(s),j+=C*C),j<c&&(j=Math.sqrt(c*j)));do m.data!==r&&(k=o[m.data.index]*a/j,r.vx+=w*k,n>1&&(r.vy+=_*k),n>2&&(r.vz+=C*k));while(m=m.next)}return h.initialize=function(m,...y){e=m,s=y.find(x=>typeof x=="function")||Math.random,n=y.find(x=>[1,2,3].includes(x))||2,d()},h.strength=function(m){return arguments.length?(i=typeof m=="function"?m:Ya(+m),d(),h):i},h.distanceMin=function(m){return arguments.length?(c=m*m,h):Math.sqrt(c)},h.distanceMax=function(m){return arguments.length?(A=m*m,h):Math.sqrt(A)},h.theta=function(m){return arguments.length?(u=m*m,h):Math.sqrt(u)},h}function a8e(e,n,r,s){var a,i,o=Ya(.1),c,A;typeof e!="function"&&(e=Ya(+e)),n==null&&(n=0),r==null&&(r=0),s==null&&(s=0);function u(d){for(var f=0,g=a.length;f<g;++f){var m=a[f],y=m.x-n||1e-6,x=(m.y||0)-r||1e-6,p=(m.z||0)-s||1e-6,v=Math.sqrt(y*y+x*x+p*p),b=(A[f]-v)*c[f]*d/v;m.vx+=y*b,i>1&&(m.vy+=x*b),i>2&&(m.vz+=p*b)}}function h(){if(a){var d,f=a.length;for(c=new Array(f),A=new Array(f),d=0;d<f;++d)A[d]=+e(a[d],d,a),c[d]=isNaN(A[d])?0:+o(a[d],d,a)}}return u.initialize=function(d,...f){a=d,i=f.find(g=>[1,2,3].includes(g))||2,h()},u.strength=function(d){return arguments.length?(o=typeof d=="function"?d:Ya(+d),h(),u):o},u.radius=function(d){return arguments.length?(e=typeof d=="function"?d:Ya(+d),h(),u):e},u.x=function(d){return arguments.length?(n=+d,u):n},u.y=function(d){return arguments.length?(r=+d,u):r},u.z=function(d){return arguments.length?(s=+d,u):s},u}const{abs:YA,cos:Ua,sin:Wl,acos:i8e,atan2:JA,sqrt:wi,pow:ts}=Math;function ZA(e){return e<0?-ts(-e,1/3):ts(e,1/3)}const QM=Math.PI,Tf=2*QM,bi=QM/2,o8e=1e-6,xv=Number.MAX_SAFE_INTEGER||9007199254740991,wv=Number.MIN_SAFE_INTEGER||-9007199254740991,l8e={x:0,y:0,z:0},pe={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){const r=n(e);let s=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(s+=r.z*r.z),wi(s)},compute:function(e,n,r){if(e===0)return n[0].t=0,n[0];const s=n.length-1;if(e===1)return n[s].t=1,n[s];const a=1-e;let i=n;if(s===0)return n[0].t=e,n[0];if(s===1){const c={x:a*i[0].x+e*i[1].x,y:a*i[0].y+e*i[1].y,t:e};return r&&(c.z=a*i[0].z+e*i[1].z),c}if(s<4){let c=a*a,A=e*e,u,h,d,f=0;s===2?(i=[i[0],i[1],i[2],l8e],u=c,h=a*e*2,d=A):s===3&&(u=c*a,h=c*e*3,d=a*A*3,f=e*A);const g={x:u*i[0].x+h*i[1].x+d*i[2].x+f*i[3].x,y:u*i[0].y+h*i[1].y+d*i[2].y+f*i[3].y,t:e};return r&&(g.z=u*i[0].z+h*i[1].z+d*i[2].z+f*i[3].z),g}const o=JSON.parse(JSON.stringify(n));for(;o.length>1;){for(let c=0;c<o.length-1;c++)o[c]={x:o[c].x+(o[c+1].x-o[c].x)*e,y:o[c].y+(o[c+1].y-o[c].y)*e},typeof o[c].z<"u"&&(o[c].z=o[c].z+(o[c+1].z-o[c].z)*e);o.splice(o.length-1,1)}return o[0].t=e,o[0]},computeWithRatios:function(e,n,r,s){const a=1-e,i=r,o=n;let c=i[0],A=i[1],u=i[2],h=i[3],d;if(c*=a,A*=e,o.length===2)return d=c+A,{x:(c*o[0].x+A*o[1].x)/d,y:(c*o[0].y+A*o[1].y)/d,z:s?(c*o[0].z+A*o[1].z)/d:!1,t:e};if(c*=a,A*=2*a,u*=e*e,o.length===3)return d=c+A+u,{x:(c*o[0].x+A*o[1].x+u*o[2].x)/d,y:(c*o[0].y+A*o[1].y+u*o[2].y)/d,z:s?(c*o[0].z+A*o[1].z+u*o[2].z)/d:!1,t:e};if(c*=a,A*=1.5*a,u*=3*a,h*=e*e*e,o.length===4)return d=c+A+u+h,{x:(c*o[0].x+A*o[1].x+u*o[2].x+h*o[3].x)/d,y:(c*o[0].y+A*o[1].y+u*o[2].y+h*o[3].y)/d,z:s?(c*o[0].z+A*o[1].z+u*o[2].z+h*o[3].z)/d:!1,t:e}},derive:function(e,n){const r=[];for(let s=e,a=s.length,i=a-1;a>1;a--,i--){const o=[];for(let c=0,A;c<i;c++)A={x:i*(s[c+1].x-s[c].x),y:i*(s[c+1].y-s[c].y)},n&&(A.z=i*(s[c+1].z-s[c].z)),o.push(A);r.push(o),s=o}return r},between:function(e,n,r){return n<=e&&e<=r||pe.approximately(e,n)||pe.approximately(e,r)},approximately:function(e,n,r){return YA(e-n)<=(r||o8e)},length:function(e){const r=pe.Tvalues.length;let s=0;for(let a=0,i;a<r;a++)i=.5*pe.Tvalues[a]+.5,s+=pe.Cvalues[a]*pe.arcfn(i,e);return .5*s},map:function(e,n,r,s,a){const i=r-n,o=a-s,c=e-n,A=c/i;return s+o*A},lerp:function(e,n,r){const s={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return n.z!==void 0&&r.z!==void 0&&(s.z=n.z+e*(r.z-n.z)),s},pointToString:function(e){let n=e.x+"/"+e.y;return typeof e.z<"u"&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(pe.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){const s=n.x-e.x,a=n.y-e.y,i=r.x-e.x,o=r.y-e.y,c=s*o-a*i,A=s*i+a*o;return JA(c,A)},round:function(e,n){const r=""+e,s=r.indexOf(".");return parseFloat(r.substring(0,s+1+n))},dist:function(e,n){const r=e.x-n.x,s=e.y-n.y;return wi(r*r+s*s)},closest:function(e,n){let r=ts(2,63),s,a;return e.forEach(function(i,o){a=pe.dist(n,i),a<r&&(r=a,s=o)}),{mdist:r,mpos:s}},abcratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=ts(e,n)+ts(1-e,n),s=r-1;return YA(s/r)},projectionratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=ts(1-e,n),s=ts(e,n)+r;return r/s},lli8:function(e,n,r,s,a,i,o,c){const A=(e*s-n*r)*(a-o)-(e-r)*(a*c-i*o),u=(e*s-n*r)*(i-c)-(n-s)*(a*c-i*o),h=(e-r)*(i-c)-(n-s)*(a-o);return h==0?!1:{x:A/h,y:u/h}},lli4:function(e,n,r,s){const a=e.x,i=e.y,o=n.x,c=n.y,A=r.x,u=r.y,h=s.x,d=s.y;return pe.lli8(a,i,o,c,A,u,h,d)},lli:function(e,n){return pe.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new Ft(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=xv,r=xv,s=wv,a=wv;return e.forEach(function(i){const o=i.bbox();n>o.x.min&&(n=o.x.min),r>o.y.min&&(r=o.y.min),s<o.x.max&&(s=o.x.max),a<o.y.max&&(a=o.y.max)}),{x:{min:n,mid:(n+s)/2,max:s,size:s-n},y:{min:r,mid:(r+a)/2,max:a,size:a-r}}},shapeintersections:function(e,n,r,s,a){if(!pe.bboxoverlap(n,s))return[];const i=[],o=[e.startcap,e.forward,e.back,e.endcap],c=[r.startcap,r.forward,r.back,r.endcap];return o.forEach(function(A){A.virtual||c.forEach(function(u){if(u.virtual)return;const h=A.intersects(u,a);h.length>0&&(h.c1=A,h.c2=u,h.s1=e,h.s2=r,i.push(h))})}),i},makeshape:function(e,n,r){const s=n.points.length,a=e.points.length,i=pe.makeline(n.points[s-1],e.points[0]),o=pe.makeline(e.points[a-1],n.points[0]),c={startcap:i,forward:e,back:n,endcap:o,bbox:pe.findbbox([i,e,n,o])};return c.intersections=function(A){return pe.shapeintersections(c,c.bbox,A,A.bbox,r)},c},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let s=xv,a=wv,i,o;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let c=0,A=r.length;c<A;c++)i=r[c],o=e.get(i),o[n]<s&&(s=o[n]),o[n]>a&&(a=o[n]);return{min:s,mid:(s+a)/2,max:a,size:a-s}},align:function(e,n){const r=n.p1.x,s=n.p1.y,a=-JA(n.p2.y-s,n.p2.x-r),i=function(o){return{x:(o.x-r)*Ua(a)-(o.y-s)*Wl(a),y:(o.x-r)*Wl(a)+(o.y-s)*Ua(a)}};return e.map(i)},roots:function(e,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=e.length-1,s=pe.align(e,n),a=function(k){return 0<=k&&k<=1};if(r===2){const k=s[0].y,j=s[1].y,B=s[2].y,E=k-2*j+B;if(E!==0){const P=-wi(j*j-k*B),I=-k+j,U=-(P+I)/E,N=-(-P+I)/E;return[U,N].filter(a)}else if(j!==B&&E===0)return[(2*j-B)/(2*j-2*B)].filter(a);return[]}const i=s[0].y,o=s[1].y,c=s[2].y,A=s[3].y;let u=-i+3*o-3*c+A,h=3*i-6*o+3*c,d=-3*i+3*o,f=i;if(pe.approximately(u,0)){if(pe.approximately(h,0))return pe.approximately(d,0)?[]:[-f/d].filter(a);const k=wi(d*d-4*h*f),j=2*h;return[(k-d)/j,(-d-k)/j].filter(a)}h/=u,d/=u,f/=u;const g=(3*d-h*h)/3,m=g/3,y=(2*h*h*h-9*h*d+27*f)/27,x=y/2,p=x*x+m*m*m;let v,b,w,_,C;if(p<0){const k=-g/3,j=k*k*k,B=wi(j),E=-y/(2*B),P=E<-1?-1:E>1?1:E,I=i8e(P),U=ZA(B),N=2*U;return w=N*Ua(I/3)-h/3,_=N*Ua((I+Tf)/3)-h/3,C=N*Ua((I+2*Tf)/3)-h/3,[w,_,C].filter(a)}else{if(p===0)return v=x<0?ZA(-x):-ZA(x),w=2*v-h/3,_=-v-h/3,[w,_].filter(a);{const k=wi(p);return v=ZA(-x+k),b=ZA(x+k),[v-b-h/3].filter(a)}}},droots:function(e){if(e.length===3){const n=e[0],r=e[1],s=e[2],a=n-2*r+s;if(a!==0){const i=-wi(r*r-n*s),o=-n+r,c=-(i+o)/a,A=-(-i+o)/a;return[c,A]}else if(r!==s&&a===0)return[(2*r-s)/(2*(r-s))];return[]}if(e.length===2){const n=e[0],r=e[1];return n!==r?[n/(n-r)]:[]}return[]},curvature:function(e,n,r,s,a){let i,o,c,A,u=0,h=0;const d=pe.compute(e,n),f=pe.compute(e,r),g=d.x*d.x+d.y*d.y;if(s?(i=wi(ts(d.y*f.z-f.y*d.z,2)+ts(d.z*f.x-f.z*d.x,2)+ts(d.x*f.y-f.x*d.y,2)),o=ts(g+d.z*d.z,3/2)):(i=d.x*f.y-d.y*f.x,o=ts(g,3/2)),i===0||o===0)return{k:0,r:0};if(u=i/o,h=o/i,!a){const m=pe.curvature(e-.001,n,r,s,!0).k,y=pe.curvature(e+.001,n,r,s,!0).k;A=(y-u+(u-m))/2,c=(YA(y-u)+YA(u-m))/2}return{k:u,r:h,dk:A,adk:c}},inflections:function(e){if(e.length<4)return[];const n=pe.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,s=n[3].x*n[1].y,a=n[1].x*n[2].y,i=n[3].x*n[2].y,o=18*(-3*r+2*s+3*a-i),c=18*(3*r-s-3*a),A=18*(a-r);if(pe.approximately(o,0)){if(!pe.approximately(c,0)){let f=-A/c;if(0<=f&&f<=1)return[f]}return[]}const u=2*o;if(pe.approximately(u,0))return[];const h=c*c-4*o*A;if(h<0)return[];const d=Math.sqrt(h);return[(d-c)/u,-(c+d)/u].filter(function(f){return 0<=f&&f<=1})},bboxoverlap:function(e,n){const r=["x","y"],s=r.length;for(let a=0,i,o,c,A;a<s;a++)if(i=r[a],o=e[i].mid,c=n[i].mid,A=(e[i].size+n[i].size)/2,YA(o-c)>=A)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){const s=e.bbox(),a=n.bbox(),i=1e5,o=r||.5;if(s.x.size+s.y.size<o&&a.x.size+a.y.size<o)return[(i*(e._t1+e._t2)/2|0)/i+"/"+(i*(n._t1+n._t2)/2|0)/i];let c=e.split(.5),A=n.split(.5),u=[{left:c.left,right:A.left},{left:c.left,right:A.right},{left:c.right,right:A.right},{left:c.right,right:A.left}];u=u.filter(function(d){return pe.bboxoverlap(d.left.bbox(),d.right.bbox())});let h=[];return u.length===0||(u.forEach(function(d){h=h.concat(pe.pairiteration(d.left,d.right,o))}),h=h.filter(function(d,f){return h.indexOf(d)===f})),h},getccenter:function(e,n,r){const s=n.x-e.x,a=n.y-e.y,i=r.x-n.x,o=r.y-n.y,c=s*Ua(bi)-a*Wl(bi),A=s*Wl(bi)+a*Ua(bi),u=i*Ua(bi)-o*Wl(bi),h=i*Wl(bi)+o*Ua(bi),d=(e.x+n.x)/2,f=(e.y+n.y)/2,g=(n.x+r.x)/2,m=(n.y+r.y)/2,y=d+c,x=f+A,p=g+u,v=m+h,b=pe.lli8(d,f,y,x,g,m,p,v),w=pe.dist(b,e);let _=JA(e.y-b.y,e.x-b.x),C=JA(n.y-b.y,n.x-b.x),k=JA(r.y-b.y,r.x-b.x),j;return _<k?((_>C||C>k)&&(_+=Tf),_>k&&(j=k,k=_,_=j)):k<C&&C<_?(j=k,k=_,_=j):k+=Tf,b.s=_,b.e=k,b.r=w,b},numberSort:function(e,n){return e-n}};class Hu{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return pe.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var r=n[0].bbox(),s=1;s<n.length;s++)pe.expandbox(r,n[s].bbox());return r}offset(n){const r=[];return this.curves.forEach(function(s){r.push(...s.offset(n))}),new Hu(r)}}const{abs:eu,min:W4,max:V4,cos:c8e,sin:A8e,acos:u8e,sqrt:tu}=Math,d8e=Math.PI;class Ft{constructor(n){let r=n&&n.forEach?n:Array.from(arguments).slice(),s=!1;if(typeof r[0]=="object"){s=r.length;const g=[];r.forEach(function(m){["x","y","z"].forEach(function(y){typeof m[y]<"u"&&g.push(m[y])})}),r=g}let a=!1;const i=r.length;if(s){if(s>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");a=!0}}else if(i!==6&&i!==8&&i!==9&&i!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!a&&(i===9||i===12)||n&&n[0]&&typeof n[0].z<"u",c=this.points=[];for(let g=0,m=o?3:2;g<i;g+=m){var A={x:r[g],y:r[g+1]};o&&(A.z=r[g+2]),c.push(A)}const u=this.order=c.length-1,h=this.dims=["x","y"];o&&h.push("z"),this.dimlen=h.length;const d=pe.align(c,{p1:c[0],p2:c[u]}),f=pe.dist(c[0],c[u]);this._linear=d.reduce((g,m)=>g+eu(m.y),0)<f/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,r,s,a){if(typeof a>"u"&&(a=.5),a===0)return new Ft(r,r,s);if(a===1)return new Ft(n,r,r);const i=Ft.getABC(2,n,r,s,a);return new Ft(n,i.A,s)}static cubicFromPoints(n,r,s,a,i){typeof a>"u"&&(a=.5);const o=Ft.getABC(3,n,r,s,a);typeof i>"u"&&(i=pe.dist(r,o.C));const c=i*(1-a)/a,A=pe.dist(n,s),u=(s.x-n.x)/A,h=(s.y-n.y)/A,d=i*u,f=i*h,g=c*u,m=c*h,y={x:r.x-d,y:r.y-f},x={x:r.x+g,y:r.y+m},p=o.A,v={x:p.x+(y.x-p.x)/(1-a),y:p.y+(y.y-p.y)/(1-a)},b={x:p.x+(x.x-p.x)/a,y:p.y+(x.y-p.y)/a},w={x:n.x+(v.x-n.x)/a,y:n.y+(v.y-n.y)/a},_={x:s.x+(b.x-s.x)/(1-a),y:s.y+(b.y-s.y)/(1-a)};return new Ft(n,w,_,s)}static getUtils(){return pe}getUtils(){return Ft.getUtils()}static get PolyBezier(){return Hu}valueOf(){return this.toString()}toString(){return pe.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,r=n[0].x,s=n[0].y,a=["M",r,s,this.order===2?"Q":"C"];for(let i=1,o=n.length;i<o;i++)a.push(n[i].x),a.push(n[i].y);return a.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,r){return""+r+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=pe.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,r=pe.angle(n[0],n[this.order],n[1]);this.clockwise=r>0}length(){return pe.length(this.derivative.bind(this))}static getABC(n=2,r,s,a,i=.5){const o=pe.projectionratio(i,n),c=1-o,A={x:o*r.x+c*a.x,y:o*r.y+c*a.y},u=pe.abcratio(i,n);return{A:{x:s.x+(s.x-A.x)/u,y:s.y+(s.y-A.y)/u},B:s,C:A,S:r,E:a}}getABC(n,r){r=r||this.get(n);let s=this.points[0],a=this.points[this.order];return Ft.getABC(this.order,s,r,a,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r=0,s,a;r<n;r++)a=r/(n-1),s=this.compute(a),s.t=a,this._lut.push(s);return this._lut}on(n,r){r=r||5;const s=this.getLUT(),a=[];for(let i=0,o,c=0;i<s.length;i++)o=s[i],pe.dist(o,n)<r&&(a.push(o),c+=i/s.length);return a.length?t/=a.length:!1}project(n){const r=this.getLUT(),s=r.length-1,a=pe.closest(r,n),i=a.mpos,o=(i-1)/s,c=(i+1)/s,A=.1/s;let u=a.mdist,h=o,d=h,f;u+=1;for(let g;h<c+A;h+=A)f=this.compute(h),g=pe.dist(n,f),g<u&&(u=g,d=h);return d=d<0?0:d>1?1:d,f=this.compute(d),f.t=d,f.d=u,f}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?pe.computeWithRatios(n,this.points,this.ratios,this._3d):pe.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,r=[n[0]],s=n.length;for(let a=1,i,o;a<s;a++)i=n[a],o=n[a-1],r[a]={x:(s-a)/s*i.x+a/s*o.x,y:(s-a)/s*i.y+a/s*o.y};return r[s]=n[s-1],new Ft(r)}derivative(n){return pe.compute(n,this.dpoints[0],this._3d)}dderivative(n){return pe.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new Ft(pe.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return pe.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return pe.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const r=this.derivative(n),s=tu(r.x*r.x+r.y*r.y);return{t:n,x:-r.y/s,y:r.x/s}}__normal3(n){const r=this.derivative(n),s=this.derivative(n+.01),a=tu(r.x*r.x+r.y*r.y+r.z*r.z),i=tu(s.x*s.x+s.y*s.y+s.z*s.z);r.x/=a,r.y/=a,r.z/=a,s.x/=i,s.y/=i,s.z/=i;const o={x:s.y*r.z-s.z*r.y,y:s.z*r.x-s.x*r.z,z:s.x*r.y-s.y*r.x},c=tu(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=c,o.y/=c,o.z/=c;const A=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:n,x:A[0]*r.x+A[1]*r.y+A[2]*r.z,y:A[3]*r.x+A[4]*r.y+A[5]*r.z,z:A[6]*r.x+A[7]*r.y+A[8]*r.z}}hull(n){let r=this.points,s=[],a=[],i=0;for(a[i++]=r[0],a[i++]=r[1],a[i++]=r[2],this.order===3&&(a[i++]=r[3]);r.length>1;){s=[];for(let o=0,c,A=r.length-1;o<A;o++)c=pe.lerp(n,r[o],r[o+1]),a[i++]=c,s.push(c);r=s}return a}split(n,r){if(n===0&&r)return this.split(r).left;if(r===1)return this.split(n).right;const s=this.hull(n),a={left:this.order===2?new Ft([s[0],s[3],s[5]]):new Ft([s[0],s[4],s[7],s[9]]),right:this.order===2?new Ft([s[5],s[4],s[2]]):new Ft([s[9],s[8],s[6],s[3]]),span:s};return a.left._t1=pe.map(0,0,1,this._t1,this._t2),a.left._t2=pe.map(n,0,1,this._t1,this._t2),a.right._t1=pe.map(n,0,1,this._t1,this._t2),a.right._t2=pe.map(1,0,1,this._t1,this._t2),r?(r=pe.map(r,n,1,0,1),a.right.split(r).left):a}extrema(){const n={};let r=[];return this.dims.forEach((function(s){let a=function(o){return o[s]},i=this.dpoints[0].map(a);n[s]=pe.droots(i),this.order===3&&(i=this.dpoints[1].map(a),n[s]=n[s].concat(pe.droots(i))),n[s]=n[s].filter(function(o){return o>=0&&o<=1}),r=r.concat(n[s].sort(pe.numberSort))}).bind(this)),n.values=r.sort(pe.numberSort).filter(function(s,a){return r.indexOf(s)===a}),n}bbox(){const n=this.extrema(),r={};return this.dims.forEach((function(s){r[s]=pe.getminmax(this,s,n[s])}).bind(this)),r}overlaps(n){const r=this.bbox(),s=n.bbox();return pe.bboxoverlap(r,s)}offset(n,r){if(typeof r<"u"){const s=this.get(n),a=this.normal(n),i={c:s,n:a,x:s.x+a.x*r,y:s.y+a.y*r};return this._3d&&(i.z=s.z+a.z*r),i}if(this._linear){const s=this.normal(0),a=this.points.map(function(i){const o={x:i.x+n*s.x,y:i.y+n*s.y};return i.z&&s.z&&(o.z=i.z+n*s.z),o});return[new Ft(a)]}return this.reduce().map(function(s){return s._linear?s.offset(n)[0]:s.scale(n)})}simple(){if(this.order===3){const a=pe.angle(this.points[0],this.points[3],this.points[1]),i=pe.angle(this.points[0],this.points[3],this.points[2]);if(a>0&&i<0||a<0&&i>0)return!1}const n=this.normal(0),r=this.normal(1);let s=n.x*r.x+n.y*r.y;return this._3d&&(s+=n.z*r.z),eu(u8e(s))<d8e/3}reduce(){let n,r=0,s=0,a=.01,i,o=[],c=[],A=this.extrema().values;for(A.indexOf(0)===-1&&(A=[0].concat(A)),A.indexOf(1)===-1&&A.push(1),r=A[0],n=1;n<A.length;n++)s=A[n],i=this.split(r,s),i._t1=r,i._t2=s,o.push(i),r=s;return o.forEach(function(u){for(r=0,s=0;s<=1;)for(s=r+a;s<=1+a;s+=a)if(i=u.split(r,s),!i.simple()){if(s-=a,eu(r-s)<a)return[];i=u.split(r,s),i._t1=pe.map(r,0,1,u._t1,u._t2),i._t2=pe.map(s,0,1,u._t1,u._t2),c.push(i),r=s;break}r<1&&(i=u.split(r,1),i._t1=pe.map(r,0,1,u._t1,u._t2),i._t2=u._t2,c.push(i))}),c}translate(n,r,s){s=typeof s=="number"?s:r;const a=this.order;let i=this.points.map((o,c)=>(1-c/a)*r+c/a*s);return new Ft(this.points.map((o,c)=>({x:o.x+n.x*i[c],y:o.y+n.y*i[c]})))}scale(n){const r=this.order;let s=!1;if(typeof n=="function"&&(s=n),s&&r===2)return this.raise().scale(s);const a=this.clockwise,i=this.points;if(this._linear)return this.translate(this.normal(0),s?s(0):n,s?s(1):n);const o=s?s(0):n,c=s?s(1):n,A=[this.offset(0,10),this.offset(1,10)],u=[],h=pe.lli4(A[0],A[0].c,A[1],A[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(d){const f=u[d*r]=pe.copy(i[d*r]);f.x+=(d?c:o)*A[d].n.x,f.y+=(d?c:o)*A[d].n.y}),s?([0,1].forEach(function(d){if(!(r===2&&d)){var f=i[d+1],g={x:f.x-h.x,y:f.y-h.y},m=s?s((d+1)/r):n;s&&!a&&(m=-m);var y=tu(g.x*g.x+g.y*g.y);g.x/=y,g.y/=y,u[d+1]={x:f.x+m*g.x,y:f.y+m*g.y}}}),new Ft(u)):([0,1].forEach(d=>{if(r===2&&d)return;const f=u[d*r],g=this.derivative(d),m={x:f.x+g.x,y:f.y+g.y};u[d+1]=pe.lli4(f,m,h,i[d+1])}),new Ft(u))}outline(n,r,s,a){if(r=r===void 0?n:r,this._linear){const _=this.normal(0),C=this.points[0],k=this.points[this.points.length-1];let j,B,E;s===void 0&&(s=n,a=r),j={x:C.x+_.x*n,y:C.y+_.y*n},E={x:k.x+_.x*s,y:k.y+_.y*s},B={x:(j.x+E.x)/2,y:(j.y+E.y)/2};const P=[j,B,E];j={x:C.x-_.x*r,y:C.y-_.y*r},E={x:k.x-_.x*a,y:k.y-_.y*a},B={x:(j.x+E.x)/2,y:(j.y+E.y)/2};const I=[E,B,j],U=pe.makeline(I[2],P[0]),N=pe.makeline(P[2],I[0]),D=[U,new Ft(P),N,new Ft(I)];return new Hu(D)}const i=this.reduce(),o=i.length,c=[];let A=[],u,h=0,d=this.length();const f=typeof s<"u"&&typeof a<"u";function g(_,C,k,j,B){return function(E){const P=j/k,I=(j+B)/k,U=C-_;return pe.map(E,0,1,_+P*U,_+I*U)}}i.forEach(function(_){const C=_.length();f?(c.push(_.scale(g(n,s,d,h,C))),A.push(_.scale(g(-r,-a,d,h,C)))):(c.push(_.scale(n)),A.push(_.scale(-r))),h+=C}),A=A.map(function(_){return u=_.points,u[3]?_.points=[u[3],u[2],u[1],u[0]]:_.points=[u[2],u[1],u[0]],_}).reverse();const m=c[0].points[0],y=c[o-1].points[c[o-1].points.length-1],x=A[o-1].points[A[o-1].points.length-1],p=A[0].points[0],v=pe.makeline(x,m),b=pe.makeline(y,p),w=[v].concat(c).concat([b]).concat(A);return new Hu(w)}outlineshapes(n,r,s){r=r||n;const a=this.outline(n,r).curves,i=[];for(let o=1,c=a.length;o<c/2;o++){const A=pe.makeshape(a[o],a[c-o],s);A.startcap.virtual=o>1,A.endcap.virtual=o<c/2-1,i.push(A)}return i}intersects(n,r){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof Ft&&(n=n.reduce()),this.curveintersects(this.reduce(),n,r)):this.selfintersects(r)}lineIntersects(n){const r=W4(n.p1.x,n.p2.x),s=W4(n.p1.y,n.p2.y),a=V4(n.p1.x,n.p2.x),i=V4(n.p1.y,n.p2.y);return pe.roots(this.points,n).filter(o=>{var c=this.get(o);return pe.between(c.x,r,a)&&pe.between(c.y,s,i)})}selfintersects(n){const r=this.reduce(),s=r.length-2,a=[];for(let i=0,o,c,A;i<s;i++)c=r.slice(i,i+1),A=r.slice(i+2),o=this.curveintersects(c,A,n),a.push(...o);return a}curveintersects(n,r,s){const a=[];n.forEach(function(o){r.forEach(function(c){o.overlaps(c)&&a.push({left:o,right:c})})});let i=[];return a.forEach(function(o){const c=pe.pairiteration(o.left,o.right,s);c.length>0&&(i=i.concat(c))}),i}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,r,s,a){const i=(a-s)/4,o=this.get(s+i),c=this.get(a-i),A=pe.dist(n,r),u=pe.dist(n,o),h=pe.dist(n,c);return eu(u-A)+eu(h-A)}_iterate(n,r){let s=0,a=1,i;do{i=0,a=1;let o=this.get(s),c,A,u,h,d=!1,f=!1,g,m=a,y=1;do if(f=d,h=u,m=(s+a)/2,c=this.get(m),A=this.get(a),u=pe.getccenter(o,c,A),u.interval={start:s,end:a},d=this._error(u,o,s,a)<=n,g=f&&!d,g||(y=a),d){if(a>=1){if(u.interval.end=y=1,h=u,a>1){let p={x:u.x+u.r*c8e(u.e),y:u.y+u.r*A8e(u.e)};u.e+=pe.angle({x:u.x,y:u.y},p,this.get(1))}break}a=a+(a-s)/2}else a=m;while(!g&&i++<100);if(i>=100)break;h=h||u,r.push(h),s=y}while(a<1);return r}}function pw(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function h8e(e){if(Array.isArray(e))return e}function f8e(e){if(Array.isArray(e))return pw(e)}function g8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function m8e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function p8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v8e(e,n){if(e==null)return{};var r,s,a=x8e(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],n.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function x8e(e,n){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(n.includes(s))continue;r[s]=e[s]}return r}function w8e(e,n){return h8e(e)||m8e(e,n)||MM(e,n)||p8e()}function b8e(e){return f8e(e)||g8e(e)||MM(e)||y8e()}function _8e(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function C8e(e){var n=_8e(e,"string");return typeof n=="symbol"?n:n+""}function MM(e,n){if(e){if(typeof e=="string")return pw(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pw(e,n):void 0}}var B8e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(c){return{keyAccessor:c,isProp:!(c instanceof Function)}}),i=e.reduce(function(c,A){var u=c,h=A;return a.forEach(function(d,f){var g=d.keyAccessor,m=d.isProp,y;if(m){var x=h,p=x[g],v=v8e(x,[g].map(C8e));y=p,h=v}else y=g(h,f);f+1<a.length?(u.hasOwnProperty(y)||(u[y]={}),u=u[y]):r?(u.hasOwnProperty(y)||(u[y]=[]),u[y].push(h)):u[y]=h}),c},{});r instanceof Function&&function c(A){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===a.length?Object.keys(A).forEach(function(h){return A[h]=r(A[h])}):Object.values(A).forEach(function(h){return c(h,u+1)})}(i);var o=i;return s&&(o=[],function c(A){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===a.length?o.push({keys:u,vals:A}):Object.entries(A).forEach(function(h){var d=w8e(h,2),f=d[0],g=d[1];return c(g,[].concat(b8e(u),[f]))})}(i),n instanceof Array&&n.length===0&&o.length===1&&(o[0].keys=[])),o};function S8e(e){for(var n=e.length/6|0,r=new Array(n),s=0;s<n;)r[s]="#"+e.slice(s*6,++s*6);return r}const k8e=S8e("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function j8e(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&s.firstChild?s.insertBefore(a,s.firstChild):s.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var N8e=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;j8e(N8e);function yw(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=Array(n);r<n;r++)s[r]=e[r];return s}function E8e(e){if(Array.isArray(e))return e}function T8e(e){if(Array.isArray(e))return yw(e)}function q4(e,n,r){if(DM())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,n);var a=new(e.bind.apply(e,s));return a}function Pd(e,n,r){return(n=M8e(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function DM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DM=function(){return!!e})()}function F8e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U8e(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,c=[],A=!0,u=!1;try{if(i=(r=r.call(e)).next,n!==0)for(;!(A=(s=i.call(r)).done)&&(c.push(s.value),c.length!==n);A=!0);}catch(h){u=!0,a=h}finally{try{if(!A&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}function I8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P8e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X4(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Vl(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?X4(Object(r),!0).forEach(function(s){Pd(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X4(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function zu(e,n){return E8e(e)||U8e(e,n)||RM(e,n)||I8e()}function os(e){return T8e(e)||F8e(e)||RM(e)||P8e()}function Q8e(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function M8e(e){var n=Q8e(e,"string");return typeof n=="symbol"?n:n+""}function vw(e){"@babel/helpers - typeof";return vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},vw(e)}function RM(e,n){if(e){if(typeof e=="string")return yw(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yw(e,n):void 0}}var D8e=Ym(k8e);function Y4(e,n,r){!n||typeof r!="string"||e.filter(function(s){return!s[r]}).forEach(function(s){s[r]=D8e(n(s))})}function R8e(e,n){var r=e.nodes,s=e.links,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=a.nodeFilter,o=i===void 0?function(){return!0}:i,c=a.onLoopError,A=c===void 0?function(g){throw"Invalid DAG structure! Found cycle in node path: ".concat(g.join(" -> "),".")}:c,u={};r.forEach(function(g){return u[n(g)]={data:g,out:[],depth:-1,skip:!o(g)}}),s.forEach(function(g){var m=g.source,y=g.target,x=w(m),p=w(y);if(!u.hasOwnProperty(x))throw"Missing source node with id: ".concat(x);if(!u.hasOwnProperty(p))throw"Missing target node with id: ".concat(p);var v=u[x],b=u[p];v.out.push(b);function w(_){return vw(_)==="object"?n(_):_}});var h=[];f(Object.values(u));var d=Object.assign.apply(Object,[{}].concat(os(Object.entries(u).filter(function(g){var m=zu(g,2),y=m[1];return!y.skip}).map(function(g){var m=zu(g,2),y=m[0],x=m[1];return Pd({},y,x.depth)}))));return d;function f(g){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,x=function(){var w=g[p];if(m.indexOf(w)!==-1){var _=[].concat(os(m.slice(m.indexOf(w))),[w]).map(function(C){return n(C.data)});return h.some(function(C){return C.length===_.length&&C.every(function(k,j){return k===_[j]})})||(h.push(_),A(_)),1}y>w.depth&&(w.depth=y,f(w.out,[].concat(os(m),[w]),y+(w.skip?0:1)))},p=0,v=g.length;p<v;p++)x()}}var $8e=2,Hn=function(n,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},J4=function(n,r){if(!r.isShadow){var s=pt(r.linkDirectionalParticles);r.graphData.links.forEach(function(a){var i=Math.round(Math.abs(s(a)));i?a.__photons=os(Array(i)).map(function(){return{}}):delete a.__photons})}},Wg=H2({props:{graphData:{default:{nodes:[],links:[]},onChange:function(n,r){r.engineRunning=!1,J4(n,r)}},dagMode:{onChange:function(n,r){!n&&(r.graphData.nodes||[]).forEach(function(s){return s.fx=s.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(n){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:Hn},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:Hn},nodeColor:{default:"color",triggerUpdate:!1,onChange:Hn},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:Hn},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Hn},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:Hn},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:Hn},linkColor:{default:"color",triggerUpdate:!1,onChange:Hn},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:Hn},linkWidth:{default:1,triggerUpdate:!1,onChange:Hn},linkCurvature:{default:0,triggerUpdate:!1,onChange:Hn},linkCanvasObject:{triggerUpdate:!1,onChange:Hn},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:Hn},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:Hn},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:Hn},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:Hn},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:J4},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaDecay(n)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaTarget(n)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.velocityDecay(n)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(n,r,s){return s===void 0?n.forceLayout.force(r):(n.forceLayout.force(r,s),this)},d3ReheatSimulation:function(n){return n.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(n){return n.cntTicks=0,n.startTickTime=new Date,n.engineRunning=!0,this},isEngineRunning:function(n){return!!n.engineRunning},tickFrame:function(n){return!n.isShadow&&r(),a(),!n.isShadow&&i(),!n.isShadow&&o(),s(),this;function r(){n.engineRunning&&(++n.cntTicks>n.cooldownTicks||new Date-n.startTickTime>n.cooldownTime||n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin?(n.engineRunning=!1,n.onEngineStop()):(n.forceLayout.tick(),n.onEngineTick()))}function s(){var c=pt(n.nodeVisibility),A=pt(n.nodeVal),u=pt(n.nodeColor),h=pt(n.nodeCanvasObjectMode),d=n.ctx,f=n.isShadow/n.globalScale,g=n.graphData.nodes.filter(c);d.save(),g.forEach(function(m){var y=h(m);if(n.nodeCanvasObject&&(y==="before"||y==="replace")&&(n.nodeCanvasObject(m,d,n.globalScale),y==="replace")){d.restore();return}var x=Math.sqrt(Math.max(0,A(m)||1))*n.nodeRelSize+f;d.beginPath(),d.arc(m.x,m.y,x,0,2*Math.PI,!1),d.fillStyle=u(m)||"rgba(31, 120, 180, 0.92)",d.fill(),n.nodeCanvasObject&&y==="after"&&n.nodeCanvasObject(m,n.ctx,n.globalScale)}),d.restore()}function a(){var c=pt(n.linkVisibility),A=pt(n.linkColor),u=pt(n.linkWidth),h=pt(n.linkLineDash),d=pt(n.linkCurvature),f=pt(n.linkCanvasObjectMode),g=n.ctx,m=n.isShadow*2,y=n.graphData.links.filter(c);y.forEach(C);var x=[],p=[],v=y;if(n.linkCanvasObject){var b=[],w=[];y.forEach(function(k){return({before:x,after:p,replace:b}[f(k)]||w).push(k)}),v=[].concat(os(x),p,w),x=x.concat(b)}g.save(),x.forEach(function(k){return n.linkCanvasObject(k,g,n.globalScale)}),g.restore();var _=B8e(v,[A,u,h]);g.save(),Object.entries(_).forEach(function(k){var j=zu(k,2),B=j[0],E=j[1],P=!B||B==="undefined"?"rgba(0,0,0,0.15)":B;Object.entries(E).forEach(function(I){var U=zu(I,2),N=U[0],D=U[1],T=(N||1)/n.globalScale+m;Object.entries(D).forEach(function(L){var Q=zu(L,2);Q[0];var M=Q[1],F=h(M[0]);g.beginPath(),M.forEach(function(O){var X=O.source,ae=O.target;if(!(!X||!ae||!X.hasOwnProperty("x")||!ae.hasOwnProperty("x"))){g.moveTo(X.x,X.y);var $=O.__controlPoints;$?g[$.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(g,os($).concat([ae.x,ae.y])):g.lineTo(ae.x,ae.y)}}),g.strokeStyle=P,g.lineWidth=T,g.setLineDash(F||[]),g.stroke()})})}),g.restore(),g.save(),p.forEach(function(k){return n.linkCanvasObject(k,g,n.globalScale)}),g.restore();function C(k){var j=d(k);if(!j){k.__controlPoints=null;return}var B=k.source,E=k.target;if(!(!B||!E||!B.hasOwnProperty("x")||!E.hasOwnProperty("x"))){var P=Math.sqrt(Math.pow(E.x-B.x,2)+Math.pow(E.y-B.y,2));if(P>0){var I=Math.atan2(E.y-B.y,E.x-B.x),U=P*j,N={x:(B.x+E.x)/2+U*Math.cos(I-Math.PI/2),y:(B.y+E.y)/2+U*Math.sin(I-Math.PI/2)};k.__controlPoints=[N.x,N.y]}else{var D=j*70;k.__controlPoints=[E.x,E.y-D,E.x+D,E.y]}}}}function i(){var c=1.6,A=.2,u=pt(n.linkDirectionalArrowLength),h=pt(n.linkDirectionalArrowRelPos),d=pt(n.linkVisibility),f=pt(n.linkDirectionalArrowColor||n.linkColor),g=pt(n.nodeVal),m=n.ctx;m.save(),n.graphData.links.filter(d).forEach(function(y){var x=u(y);if(!(!x||x<0)){var p=y.source,v=y.target;if(!(!p||!v||!p.hasOwnProperty("x")||!v.hasOwnProperty("x"))){var b=Math.sqrt(Math.max(0,g(p)||1))*n.nodeRelSize,w=Math.sqrt(Math.max(0,g(v)||1))*n.nodeRelSize,_=Math.min(1,Math.max(0,h(y))),C=f(y)||"rgba(0,0,0,0.28)",k=x/c/2,j=y.__controlPoints&&q4(Ft,[p.x,p.y].concat(os(y.__controlPoints),[v.x,v.y])),B=j?function(T){return j.get(T)}:function(T){return{x:p.x+(v.x-p.x)*T||0,y:p.y+(v.y-p.y)*T||0}},E=j?j.length():Math.sqrt(Math.pow(v.x-p.x,2)+Math.pow(v.y-p.y,2)),P=b+x+(E-b-w-x)*_,I=B(P/E),U=B((P-x)/E),N=B((P-x*(1-A))/E),D=Math.atan2(I.y-U.y,I.x-U.x)-Math.PI/2;m.beginPath(),m.moveTo(I.x,I.y),m.lineTo(U.x+k*Math.cos(D),U.y+k*Math.sin(D)),m.lineTo(N.x,N.y),m.lineTo(U.x-k*Math.cos(D),U.y-k*Math.sin(D)),m.fillStyle=C,m.fill()}}}),m.restore()}function o(){var c=pt(n.linkDirectionalParticles),A=pt(n.linkDirectionalParticleSpeed),u=pt(n.linkDirectionalParticleOffset),h=pt(n.linkDirectionalParticleWidth),d=pt(n.linkVisibility),f=pt(n.linkDirectionalParticleColor||n.linkColor),g=n.ctx;g.save(),n.graphData.links.filter(d).forEach(function(m){var y=c(m);if(!(!m.hasOwnProperty("__photons")||!m.__photons.length)){var x=m.source,p=m.target;if(!(!x||!p||!x.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var v=A(m),b=Math.abs(u(m)),w=m.__photons||[],_=Math.max(0,h(m)/2)/Math.sqrt(n.globalScale),C=f(m)||"rgba(0,0,0,0.28)";g.fillStyle=C;var k=m.__controlPoints?q4(Ft,[x.x,x.y].concat(os(m.__controlPoints),[p.x,p.y])):null,j=0,B=!1;w.forEach(function(E){var P=!!E.__singleHop;if(E.hasOwnProperty("__progressRatio")||(E.__progressRatio=P?0:(j+b)/y),!P&&j++,E.__progressRatio+=v,E.__progressRatio>=1)if(!P)E.__progressRatio=E.__progressRatio%1;else{B=!0;return}var I=E.__progressRatio,U=k?k.get(I):{x:x.x+(p.x-x.x)*I||0,y:x.y+(p.y-x.y)*I||0};n.linkDirectionalParticleCanvasObject?n.linkDirectionalParticleCanvasObject(U.x,U.y,m,g,n.globalScale):(g.beginPath(),g.arc(U.x,U.y,_,0,2*Math.PI,!1),g.fill())}),B&&(m.__photons=m.__photons.filter(function(E){return!E.__singleHop||E.__progressRatio<=1}))}}}),g.restore()}},emitParticle:function(n,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:r8e().force("link",qRe()).force("charge",s8e()).force("center",Y7e()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(n,r){r.ctx=n},update:function(n,r){n.engineRunning=!1,n.onUpdate(),n.nodeAutoColorBy!==null&&Y4(n.graphData.nodes,pt(n.nodeAutoColorBy),n.nodeColor),n.linkAutoColorBy!==null&&Y4(n.graphData.links,pt(n.linkAutoColorBy),n.linkColor),n.graphData.links.forEach(function(f){f.source=f[n.linkSource],f.target=f[n.linkTarget]}),n.forceLayout.stop().alpha(1).nodes(n.graphData.nodes);var s=n.forceLayout.force("link");s&&s.id(function(f){return f[n.nodeId]}).links(n.graphData.links);var a=n.dagMode&&R8e(n.graphData,function(f){return f[n.nodeId]},{nodeFilter:n.dagNodeFilter,onLoopError:n.onDagError||void 0}),i=Math.max.apply(Math,os(Object.values(a||[]))),o=n.dagLevelDistance||n.graphData.nodes.length/(i||1)*$8e*(["radialin","radialout"].indexOf(n.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var c=["lr","rl"].includes(r.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(f){return delete f[c]})}if(["lr","rl","td","bu"].includes(n.dagMode)){var A=["rl","bu"].includes(n.dagMode),u=function(g){return(a[g[n.nodeId]]-i/2)*o*(A?-1:1)},h=["lr","rl"].includes(n.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(f){return f[h]=u(f)})}n.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(n.dagMode)!==-1?a8e(function(f){var g=a[f[n.nodeId]]||-1;return(n.dagMode==="radialin"?i-g:g)*o}).strength(function(f){return n.dagNodeFilter(f)?1:0}):null);for(var d=0;d<n.warmupTicks&&!(n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin);d++)n.forceLayout.tick();this.resetCountdown(),n.onFinishUpdate()}});function $M(e,n){var r=e instanceof Array?e:[e],s=new n;return s._destructor&&s._destructor(),{linkProp:function(i){return{default:s[i](),onChange:function(c,A){r.forEach(function(u){return A[u][i](c)})},triggerUpdate:!1}},linkMethod:function(i){return function(o){for(var c=arguments.length,A=new Array(c>1?c-1:0),u=1;u<c;u++)A[u-1]=arguments[u];var h=[];return r.forEach(function(d){var f=o[d],g=f[i].apply(f,A);g!==f&&h.push(g)}),h.length?h[0]:this}}}}var O8e=800,L8e=4,H8e=5,OM=$M("forceGraph",Wg),z8e=$M(["forceGraph","shadowGraph"],Wg),K8e=Object.assign.apply(Object,os(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return Pd({},e,OM.linkProp(e))})).concat(os(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return Pd({},e,z8e.linkProp(e))})))),G8e=Object.assign.apply(Object,os(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return Pd({},e,OM.linkMethod(e))})));function bv(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;n===300&&r===150&&(n=r=0);var s=window.devicePixelRatio;n/=s,r/=s,[e.canvas,e.shadowCanvas].forEach(function(i){i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px"),i.width=e.width*s,i.height=e.height*s,!n&&!r&&i.getContext("2d").scale(s,s)});var a=sa(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/a,(e.height-r)/2/a),e.needsRedraw=!0}}function LM(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function Z4(e,n,r){e.save(),LM(e),e.clearRect(0,0,n,r),e.restore()}var W8e=H2({props:Vl({width:{default:window.innerWidth,onChange:function(n,r){return bv(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(n,r){return bv(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(n,r){[n.nodes,n.links].every(function(a){return(a||[]).every(function(i){return!i.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:n.nodes},{type:"Link",objs:n.links}].forEach(s),r.forceGraph.graphData(n),r.shadowGraph.graphData(n);function s(a){var i=a.type,o=a.objs;o.filter(function(c){if(!c.hasOwnProperty("__indexColor"))return!0;var A=r.colorTracker.lookup(c.__indexColor);return!A||!A.hasOwnProperty("d")||A.d!==c}).forEach(function(c){c.__indexColor=r.colorTracker.register({type:i,d:c})})}},triggerUpdate:!1},backgroundColor:{onChange:function(n,r){r.canvas&&n&&(r.canvas.style.background=n)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(n,r){r.shadowGraph.nodeCanvasObject(n?function(s,a,i){return n(s,s.__indexColor,a,i)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(n,r){r.shadowGraph.linkCanvasObject(n?function(s,a,i){return n(s,s.__indexColor,a,i)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(n,r){r.zoom.scaleExtent([n,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(n,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],n])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(n,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},K8e),aliases:{stopAnimation:"pauseAnimation"},methods:Vl({graph2ScreenCoords:function(n,r,s){var a=sa(n.canvas);return{x:r*a.k+a.x,y:s*a.k+a.y}},screen2GraphCoords:function(n,r,s){var a=sa(n.canvas);return{x:(r-a.x)/a.k,y:(s-a.y)/a.k}},centerAt:function(n,r,s,a){if(!n.canvas)return null;if(r!==void 0||s!==void 0){var i=Object.assign({},r!==void 0?{x:r}:{},s!==void 0?{y:s}:{});return a?n.tweenGroup.add(new _4(o()).to(i,a).easing(Vo.Quadratic.Out).onUpdate(c).start()):c(i),this}return o();function o(){var A=sa(n.canvas);return{x:(n.width/2-A.x)/A.k,y:(n.height/2-A.y)/A.k}}function c(A){var u=A.x,h=A.y;n.zoom.translateTo(n.zoom.__baseElem,u===void 0?o().x:u,h===void 0?o().y:h),n.needsRedraw=!0}},zoom:function(n,r,s){if(!n.canvas)return null;if(r!==void 0)return s?n.tweenGroup.add(new _4({k:a()}).to({k:r},s).easing(Vo.Quadratic.Out).onUpdate(function(o){var c=o.k;return i(c)}).start()):i(r),this;return a();function a(){return sa(n.canvas).k}function i(o){n.zoom.scaleTo(n.zoom.__baseElem,o),n.needsRedraw=!0}},zoomToFit:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,a=arguments.length,i=new Array(a>3?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];var c=this.getGraphBbox.apply(this,i);if(c){var A={x:(c.x[0]+c.x[1])/2,y:(c.y[0]+c.y[1])/2},u=Math.max(1e-12,Math.min(1e12,(n.width-s*2)/(c.x[1]-c.x[0]),(n.height-s*2)/(c.y[1]-c.y[0])));this.centerAt(A.x,A.y,r),this.zoom(u,r)}return this},getGraphBbox:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},s=pt(n.nodeVal),a=function(c){return Math.sqrt(Math.max(0,s(c)||1))*n.nodeRelSize},i=n.graphData.nodes.filter(r).map(function(o){return{x:o.x,y:o.y,r:a(o)}});return i.length?{x:[Ag(i,function(o){return o.x-o.r}),cg(i,function(o){return o.x+o.r})],y:[Ag(i,function(o){return o.y-o.r}),cg(i,function(o){return o.y+o.r})]}:null},pauseAnimation:function(n){return n.animationFrameRequestId&&(cancelAnimationFrame(n.animationFrameRequestId),n.animationFrameRequestId=null),this},resumeAnimation:function(n){return n.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},G8e),stateInit:function(){return{lastSetZoom:1,zoom:sDe(),forceGraph:new Wg,shadowGraph:new Wg().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new N7e,tweenGroup:new hM}},init:function(n,r){var s=this;n.innerHTML="";var a=document.createElement("div");a.classList.add("force-graph-container"),a.style.position="relative",n.appendChild(a),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),a.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var i=r.canvas.getContext("2d"),o=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),c={x:-1e12,y:-1e12},A=function(){var d=null,f=window.devicePixelRatio,g=c.x>0&&c.y>0?o.getImageData(c.x*f,c.y*f,1,1):null;return g&&(d=r.colorTracker.lookup(g.data)),d};is(r.canvas).call(KQe().subject(function(){if(!r.enableNodeDrag)return null;var h=A();return h&&h.type==="Node"?h.d:null}).on("start",function(h){var d=h.subject;d.__initialDragPos={x:d.x,y:d.y,fx:d.fx,fy:d.fy},h.active||(d.fx=d.x,d.fy=d.y),r.canvas.classList.add("grabbable")}).on("drag",function(h){var d=h.subject,f=d.__initialDragPos,g=h,m=sa(r.canvas).k,y={x:f.x+(g.x-f.x)/m-d.x,y:f.y+(g.y-f.y)/m-d.y};["x","y"].forEach(function(x){return d["f".concat(x)]=d[x]=f[x]+(g[x]-f[x])/m}),!(!d.__dragged&&H8e>=Math.sqrt(r5e(["x","y"].map(function(x){return Math.pow(h[x]-f[x],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,d.__dragged=!0,r.onNodeDrag(d,y))}).on("end",function(h){var d=h.subject,f=d.__initialDragPos,g={x:d.x-f.x,y:d.y-f.y};f.fx===void 0&&(d.fx=void 0),f.fy===void 0&&(d.fy=void 0),delete d.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,d.__dragged&&(delete d.__dragged,r.onNodeDragEnd(d,g))})),r.zoom(r.zoom.__baseElem=is(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(h){return!h.button&&r.enableZoomPanInteraction&&(h.type!=="wheel"||pt(r.enableZoomInteraction)(h))&&(h.type==="wheel"||pt(r.enablePanInteraction)(h))}).on("zoom",function(h){var d=h.transform;[i,o].forEach(function(f){LM(f),f.translate(d.x,d.y),f.scale(d.k,d.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(Vl(Vl({},d),s.centerAt())),r.needsRedraw=!0}).on("end",function(h){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(Vl(Vl({},h.transform),s.centerAt()))}),bv(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){sa(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=L8e/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new X7e(a),["pointermove","pointerdown"].forEach(function(h){return a.addEventListener(h,function(d){h==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=d),!r.isPointerDragging&&d.type==="pointermove"&&r.onBackgroundClick&&(d.pressure>0||r.isPointerPressed)&&(d.pointerType==="mouse"||d.movementX===void 0||[d.movementX,d.movementY].some(function(m){return Math.abs(m)>1}))&&(r.isPointerDragging=!0);var f=g(a);c.x=d.pageX-f.left,c.y=d.pageY-f.top;function g(m){var y=m.getBoundingClientRect(),x=window.pageXOffset||document.documentElement.scrollLeft,p=window.pageYOffset||document.documentElement.scrollTop;return{top:y.top+p,left:y.left+x}}},{passive:!0})}),a.addEventListener("pointerup",function(h){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var d=[h,r.pointerDownEvent];requestAnimationFrame(function(){if(h.button===0)if(r.hoverObj){var f=r["on".concat(r.hoverObj.type,"Click")];f&&f.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,d);if(h.button===2)if(r.hoverObj){var g=r["on".concat(r.hoverObj.type,"RightClick")];g&&g.apply(void 0,[r.hoverObj.d].concat(d))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,d)})}},{passive:!0}),a.addEventListener("contextmenu",function(h){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(h.preventDefault(),!1)}),r.forceGraph(i),r.shadowGraph(o);var u=PDe(function(){Z4(o,r.width,r.height),r.shadowGraph.linkWidth(function(d){return pt(r.linkWidth)(d)+r.linkHoverPrecision});var h=sa(r.canvas);r.shadowGraph.globalScale(h.k).tickFrame()},O8e);r.flushShadowCanvas=u.flush,(this._animationCycle=function h(){var d=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(b){return b.__photons&&b.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var f=r.isPointerDragging?null:A();if(f!==r.hoverObj){var g=r.hoverObj,m=g?g.type:null,y=f?f.type:null;if(m&&m!==y){var x=r["on".concat(m,"Hover")];x&&x(null,g.d)}if(y){var p=r["on".concat(y,"Hover")];p&&p(f.d,m===y?g.d:null)}r.tooltip.content(f&&pt(r["".concat(f.type.toLowerCase(),"Label")])(f.d)||null),r.canvas.classList[(f&&r["on".concat(y,"Click")]||!f&&r.onBackgroundClick)&&pt(r.showPointerCursor)(f==null?void 0:f.d)?"add":"remove"]("clickable"),r.hoverObj=f}d&&u()}if(d){Z4(i,r.width,r.height);var v=sa(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(i,v),r.forceGraph.globalScale(v).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(i,v)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(h)})()},update:function(n){}}),HM={exports:{}},V8e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",q8e=V8e,X8e=q8e;function zM(){}function KM(){}KM.resetWarningCache=zM;var Y8e=function(){function e(s,a,i,o,c,A){if(A!==X8e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function n(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:KM,resetWarningCache:zM};return r.PropTypes=r,r};HM.exports=Y8e();var J8e=HM.exports;const q=Ht(J8e),Up={width:q.number,height:q.number,graphData:q.shape({nodes:q.arrayOf(q.object).isRequired,links:q.arrayOf(q.object).isRequired}),backgroundColor:q.string,nodeRelSize:q.number,nodeId:q.string,nodeLabel:q.oneOfType([q.string,q.func]),nodeVal:q.oneOfType([q.number,q.string,q.func]),nodeVisibility:q.oneOfType([q.bool,q.string,q.func]),nodeColor:q.oneOfType([q.string,q.func]),nodeAutoColorBy:q.oneOfType([q.string,q.func]),onNodeHover:q.func,onNodeClick:q.func,linkSource:q.string,linkTarget:q.string,linkLabel:q.oneOfType([q.string,q.func]),linkVisibility:q.oneOfType([q.bool,q.string,q.func]),linkColor:q.oneOfType([q.string,q.func]),linkAutoColorBy:q.oneOfType([q.string,q.func]),linkWidth:q.oneOfType([q.number,q.string,q.func]),linkCurvature:q.oneOfType([q.number,q.string,q.func]),linkDirectionalArrowLength:q.oneOfType([q.number,q.string,q.func]),linkDirectionalArrowColor:q.oneOfType([q.string,q.func]),linkDirectionalArrowRelPos:q.oneOfType([q.number,q.string,q.func]),linkDirectionalParticles:q.oneOfType([q.number,q.string,q.func]),linkDirectionalParticleSpeed:q.oneOfType([q.number,q.string,q.func]),linkDirectionalParticleOffset:q.oneOfType([q.number,q.string,q.func]),linkDirectionalParticleWidth:q.oneOfType([q.number,q.string,q.func]),linkDirectionalParticleColor:q.oneOfType([q.string,q.func]),onLinkHover:q.func,onLinkClick:q.func,dagMode:q.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:q.number,dagNodeFilter:q.func,onDagError:q.func,d3AlphaMin:q.number,d3AlphaDecay:q.number,d3VelocityDecay:q.number,warmupTicks:q.number,cooldownTicks:q.number,cooldownTime:q.number,onEngineTick:q.func,onEngineStop:q.func,getGraphBbox:q.func},GM={zoomToFit:q.func,onNodeRightClick:q.func,onNodeDrag:q.func,onNodeDragEnd:q.func,onLinkRightClick:q.func,linkHoverPrecision:q.number,onBackgroundClick:q.func,onBackgroundRightClick:q.func,showPointerCursor:q.oneOfType([q.bool,q.func]),enablePointerInteraction:q.bool,enableNodeDrag:q.bool},Y2={showNavInfo:q.bool,nodeOpacity:q.number,nodeResolution:q.number,nodeThreeObject:q.oneOfType([q.object,q.string,q.func]),nodeThreeObjectExtend:q.oneOfType([q.bool,q.string,q.func]),nodePositionUpdate:q.func,linkOpacity:q.number,linkResolution:q.number,linkCurveRotation:q.oneOfType([q.number,q.string,q.func]),linkMaterial:q.oneOfType([q.object,q.string,q.func]),linkThreeObject:q.oneOfType([q.object,q.string,q.func]),linkThreeObjectExtend:q.oneOfType([q.bool,q.string,q.func]),linkPositionUpdate:q.func,linkDirectionalArrowResolution:q.number,linkDirectionalParticleResolution:q.number,linkDirectionalParticleThreeObject:q.oneOfType([q.object,q.string,q.func]),forceEngine:q.oneOf(["d3","ngraph"]),ngraphPhysics:q.object,numDimensions:q.oneOf([1,2,3])},Z8e=Object.assign({},Up,GM,{linkLineDash:q.oneOfType([q.arrayOf(q.number),q.string,q.func]),nodeCanvasObjectMode:q.oneOfType([q.string,q.func]),nodeCanvasObject:q.func,nodePointerAreaPaint:q.func,linkCanvasObjectMode:q.oneOfType([q.string,q.func]),linkCanvasObject:q.func,linkPointerAreaPaint:q.func,linkDirectionalParticleCanvasObject:q.func,autoPauseRedraw:q.bool,minZoom:q.number,maxZoom:q.number,enableZoomInteraction:q.oneOfType([q.bool,q.func]),enablePanInteraction:q.oneOfType([q.bool,q.func]),onZoom:q.func,onZoomEnd:q.func,onRenderFramePre:q.func,onRenderFramePost:q.func});Object.assign({},Up,GM,Y2,{enableNavigationControls:q.bool,controlType:q.oneOf(["trackball","orbit","fly"]),rendererConfig:q.object,extraRenderers:q.arrayOf(q.shape({render:q.func.isRequired}))});Object.assign({},Up,Y2,{nodeDesc:q.oneOfType([q.string,q.func]),linkDesc:q.oneOfType([q.string,q.func])});Object.assign({},Up,Y2,{markerAttrs:q.object,yOffset:q.number,glScale:q.number});const Ip=rPe(W8e,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});Ip.displayName="ForceGraph2D";Ip.propTypes=Z8e;function WM(e,n){var r,s=1;e==null&&(e=0),n==null&&(n=0);function a(){var i,o=r.length,c,A=0,u=0;for(i=0;i<o;++i)c=r[i],A+=c.x,u+=c.y;for(A=(A/o-e)*s,u=(u/o-n)*s,i=0;i<o;++i)c=r[i],c.x-=A,c.y-=u}return a.initialize=function(i){r=i},a.x=function(i){return arguments.length?(e=+i,a):e},a.y=function(i){return arguments.length?(n=+i,a):n},a.strength=function(i){return arguments.length?(s=+i,a):s},a}function Vg(e){return function(){return e}}function xc(e){return(e()-.5)*1e-6}function e$e(e){return e.x+e.vx}function t$e(e){return e.y+e.vy}function VM(e){var n,r,s,a=1,i=1;typeof e!="function"&&(e=Vg(e==null?1:+e));function o(){for(var u,h=n.length,d,f,g,m,y,x,p=0;p<i;++p)for(d=Fp(n,e$e,t$e).visitAfter(c),u=0;u<h;++u)f=n[u],y=r[f.index],x=y*y,g=f.x+f.vx,m=f.y+f.vy,d.visit(v);function v(b,w,_,C,k){var j=b.data,B=b.r,E=y+B;if(j){if(j.index>f.index){var P=g-j.x-j.vx,I=m-j.y-j.vy,U=P*P+I*I;U<E*E&&(P===0&&(P=xc(s),U+=P*P),I===0&&(I=xc(s),U+=I*I),U=(E-(U=Math.sqrt(U)))/U*a,f.vx+=(P*=U)*(E=(B*=B)/(x+B)),f.vy+=(I*=U)*E,j.vx-=P*(E=1-E),j.vy-=I*E)}return}return w>g+E||C<g-E||_>m+E||k<m-E}}function c(u){if(u.data)return u.r=r[u.data.index];for(var h=u.r=0;h<4;++h)u[h]&&u[h].r>u.r&&(u.r=u[h].r)}function A(){if(n){var u,h=n.length,d;for(r=new Array(h),u=0;u<h;++u)d=n[u],r[d.index]=+e(d,u,n)}}return o.initialize=function(u,h){n=u,s=h,A()},o.iterations=function(u){return arguments.length?(i=+u,o):i},o.strength=function(u){return arguments.length?(a=+u,o):a},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:Vg(+u),A(),o):e},o}function n$e(e){return e.x}function r$e(e){return e.y}function qM(){var e,n,r,s,a=Vg(-30),i,o=1,c=1/0,A=.81;function u(g){var m,y=e.length,x=Fp(e,n$e,r$e).visitAfter(d);for(s=g,m=0;m<y;++m)n=e[m],x.visit(f)}function h(){if(e){var g,m=e.length,y;for(i=new Array(m),g=0;g<m;++g)y=e[g],i[y.index]=+a(y,g,e)}}function d(g){var m=0,y,x,p=0,v,b,w;if(g.length){for(v=b=w=0;w<4;++w)(y=g[w])&&(x=Math.abs(y.value))&&(m+=y.value,p+=x,v+=x*y.x,b+=x*y.y);g.x=v/p,g.y=b/p}else{y=g,y.x=y.data.x,y.y=y.data.y;do m+=i[y.data.index];while(y=y.next)}g.value=m}function f(g,m,y,x){if(!g.value)return!0;var p=g.x-n.x,v=g.y-n.y,b=x-m,w=p*p+v*v;if(b*b/A<w)return w<c&&(p===0&&(p=xc(r),w+=p*p),v===0&&(v=xc(r),w+=v*v),w<o&&(w=Math.sqrt(o*w)),n.vx+=p*g.value*s/w,n.vy+=v*g.value*s/w),!0;if(g.length||w>=c)return;(g.data!==n||g.next)&&(p===0&&(p=xc(r),w+=p*p),v===0&&(v=xc(r),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do g.data!==n&&(b=i[g.data.index]*s/w,n.vx+=p*b,n.vy+=v*b);while(g=g.next)}return u.initialize=function(g,m){e=g,r=m,h()},u.strength=function(g){return arguments.length?(a=typeof g=="function"?g:Vg(+g),h(),u):a},u.distanceMin=function(g){return arguments.length?(o=g*g,u):Math.sqrt(o)},u.distanceMax=function(g){return arguments.length?(c=g*g,u):Math.sqrt(c)},u.theta=function(g){return arguments.length?(A=g*g,u):Math.sqrt(A)},u}const _v={teammate_won:"#3B82F6",teammate_lost:"#A855F7",opponent_won:"#22C55E",opponent_lost:"#EF4444"},eN={teammate_won:"Won together",teammate_lost:"Lost together",opponent_won:"Beat",opponent_lost:"Lost to"},s$e=(e,n,r)=>{const s=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),o=parseInt(n.slice(1,3),16),c=parseInt(n.slice(3,5),16),A=parseInt(n.slice(5,7),16),u=Math.round(s+(o-s)*r),h=Math.round(a+(c-a)*r),d=Math.round(i+(A-i)*r);return`#${u.toString(16).padStart(2,"0")}${h.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`},tN=e=>{const n=Math.max(0,Math.min(1,e)),r=[{stop:0,color:"#EF4444"},{stop:.33,color:"#F97316"},{stop:.66,color:"#EAB308"},{stop:1,color:"#22C55E"}];for(let s=0;s<r.length-1;s++)if(n<=r[s+1].stop){const a=r[s+1].stop-r[s].stop,i=(n-r[s].stop)/a;return s$e(r[s].color,r[s+1].color,i)}return r[r.length-1].color},a$e=(e,n)=>{if(n.length<=1)return .5;const r=[...n].sort((i,o)=>i-o),s=r[0],a=r[r.length-1];return a===s?.5:(e-s)/(a-s)},i$e=({onBack:e})=>{const{playSound:n}=it(),[r,s]=S.useState(!1),[a,i]=S.useState(new Set),[o,c]=S.useState({nodes:[],links:[]}),[A,u]=S.useState(!1),[h,d]=S.useState(!1),[f,g]=S.useState(!1),[m,y]=S.useState(null),[x,p]=S.useState([]),[v,b]=S.useState(!0),[w,_]=S.useState({teammate_won:!0,teammate_lost:!0,opponent_won:!0,opponent_lost:!0}),C=S.useRef(),k=S.useRef(null),j=S.useRef(null),[B,E]=S.useState({width:800,height:600}),P=S.useRef(!1),I=S.useRef(new Map),U=S.useRef(null),N=S.useRef(!1),D=S.useCallback(H=>{if(j.current=H,H){const ee=H.clientWidth||800;E({width:ee,height:f?450:600})}},[f]);S.useEffect(()=>{const H=()=>g(window.innerWidth<768);return H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]),S.useEffect(()=>{const H=()=>{if(j.current){const me=j.current.getBoundingClientRect(),Ae=j.current.clientWidth||Math.floor(me.width)||800,Ne=f?450:600;E(Ce=>Ce.width!==Ae||Ce.height!==Ne?{width:Ae,height:Ne}:Ce)}},ee=[setTimeout(H,0),setTimeout(H,100),setTimeout(H,300)],Se=new ResizeObserver(H);return j.current&&Se.observe(j.current),window.addEventListener("resize",H),()=>{ee.forEach(me=>clearTimeout(me)),Se.disconnect(),window.removeEventListener("resize",H)}},[f,a.size]),S.useEffect(()=>{(async()=>{b(!0);try{const Se=(await Pe.getAllPlayers()).filter(Ee=>Ee.totalGames>0),me=Se.map(Ee=>Ee.id),Ae=await Pe.getPlayerRelationshipNetwork(me,1),Ne=new Set;Ae.forEach(Ee=>{Ne.add(Ee.playerId),Ne.add(Ee.relatedPlayerId)});const Ce=Se.filter(Ee=>Ne.has(Ee.id)).map(Ee=>({...Ee,winRate:Ee.totalGames>0?Ee.wins/Ee.totalGames*100:0,displayRating:Pe.getDisplayRating(Ee),skillPercentile:0})),et=Ce.map(Ee=>Ee.displayRating),Be=Ce.map(Ee=>({...Ee,skillPercentile:a$e(Ee.displayRating,et)}));Be.sort((Ee,rt)=>Ee.name.localeCompare(rt.name)),p(Be)}catch(ee){console.error("Error loading available players:",ee),p([])}finally{b(!1)}})()},[]),S.useEffect(()=>{if(C.current&&o.nodes.length>0){const H=C.current;H.d3Force("center",WM(B.width/2,B.height/2));const ee=qM().strength(-300).distanceMax(300);H.d3Force("charge",ee);const Se=VM().radius(50).strength(1);H.d3Force("collision",Se);const me=H.d3Force("link");me&&me.distance(120).strength(.3);const Ae=60,Ne=()=>{for(const Ce of o.nodes)if(Ce.x!==void 0&&Ce.y!==void 0){const et=Ae,Be=B.width-Ae,Ee=Ae,rt=B.height-Ae;Ce.x<et?Ce.vx=(Ce.vx||0)+(et-Ce.x)*.1:Ce.x>Be&&(Ce.vx=(Ce.vx||0)+(Be-Ce.x)*.1),Ce.y<Ee?Ce.vy=(Ce.vy||0)+(Ee-Ce.y)*.1:Ce.y>rt&&(Ce.vy=(Ce.vy||0)+(rt-Ce.y)*.1)}};if(H.d3Force("boundary",Ne),H.d3ReheatSimulation(),!P.current&&o.nodes.length>=2)P.current=!0,setTimeout(()=>{C.current&&(C.current.zoomToFit(400,80),setTimeout(()=>{if(C.current){const Ce=C.current.zoom(),et=1.5;Ce>et&&C.current.zoom(et,300)}},450))},600);else if(N.current&&U.current){N.current=!1;const{x:Ce,y:et,k:Be}=U.current;setTimeout(()=>{C.current&&(C.current.centerAt(Ce,et,0),C.current.zoom(Be,0))},50)}}},[o.nodes.length,B.width,B.height]),S.useEffect(()=>{(async()=>{if(a.size<2){c({nodes:[],links:[]});return}const ee=Array.from(a);P.current&&I.current.size>0&&(N.current=!0),s(!0);try{const Se=await Pe.getPlayerRelationshipNetwork(ee,1),me=T(ee,Se);c(me)}catch(Se){console.error("Error loading relationship data:",Se)}finally{s(!1)}})()},[a]);const T=S.useCallback((H,ee)=>{const Se=I.current;let me=B.width/2,Ae=B.height/2;if(Se.size>0){let te=0,W=0;Se.forEach(se=>{te+=se.x,W+=se.y}),me=te/Se.size,Ae=W/Se.size}const Ne=H.length,Ce=Math.min(B.width,B.height)*.25,et=Se.size===0,Be=H.map((te,W)=>{const se=x.find(Xe=>Xe.id===te),xe=Se.get(te);let ve,Ke;if(xe)ve=xe.x,Ke=xe.y;else if(et){const Xe=2*Math.PI*W/Ne-Math.PI/2;ve=B.width/2+Ce*Math.cos(Xe),Ke=B.height/2+Ce*Math.sin(Xe)}else{const Xe=Math.random()*2*Math.PI,dt=50+Math.random()*50;ve=me+dt*Math.cos(Xe),Ke=Ae+dt*Math.sin(Xe)}return{id:te,playerName:(se==null?void 0:se.name)||te,totalGames:(se==null?void 0:se.totalGames)||0,winRate:(se==null?void 0:se.winRate)||0,displayRating:(se==null?void 0:se.displayRating)||0,skillPercentile:(se==null?void 0:se.skillPercentile)||.5,x:ve,y:Ke}}),Ee=[],rt=new Set;for(const te of ee){const W=te.playerId,se=te.relatedPlayerId,xe=[te.playerId,te.relatedPlayerId].sort().join("-"),ve=te.teammateWins+te.teammateLosses,Ke=te.opponentWins+te.opponentLosses;te.teammateWins>0&&!rt.has(`${xe}-won`)&&(rt.add(`${xe}-won`),Ee.push({source:W,target:se,type:"teammate_won",count:te.teammateWins,percentage:ve>0?te.teammateWins/ve:0,curvature:.15})),te.teammateLosses>0&&!rt.has(`${xe}-lost`)&&(rt.add(`${xe}-lost`),Ee.push({source:W,target:se,type:"teammate_lost",count:te.teammateLosses,percentage:ve>0?te.teammateLosses/ve:0,curvature:-.15})),te.opponentWins>0&&Ee.push({source:W,target:se,type:"opponent_won",count:te.opponentWins,percentage:Ke>0?te.opponentWins/Ke:0,curvature:.25}),te.opponentLosses>0&&Ee.push({source:W,target:se,type:"opponent_lost",count:te.opponentLosses,percentage:Ke>0?te.opponentLosses/Ke:0,curvature:-.25})}return{nodes:Be,links:Ee}},[B.width,B.height,x]),L=S.useCallback(H=>{if(!m)return!1;const ee=typeof H.source=="object"?H.source.id:H.source,Se=typeof H.target=="object"?H.target.id:H.target;return w[H.type]?H.type.startsWith("teammate")?ee===m||Se===m:ee===m:!1},[m,w]),Q=S.useMemo(()=>{if(!m)return null;const H=x.find(ee=>ee.id===m);return(H==null?void 0:H.name)||null},[m,x]),M=S.useCallback(()=>{n("buttonClick"),e()},[n,e]),F=S.useCallback(H=>{n("buttonClick"),i(ee=>{const Se=new Set(ee);return Se.has(H)?Se.delete(H):Se.add(H),Se})},[n]),O=S.useCallback(()=>{n("buttonClick"),i(new Set(x.map(H=>H.id)))},[n,x]),X=S.useCallback(()=>{n("buttonClick"),i(new Set),P.current=!1,I.current.clear()},[n]),ae=S.useCallback(H=>{n("buttonClick"),_(ee=>({...ee,[H]:!ee[H]}))},[n]),$=async()=>{if(k.current){n("buttonClick"),u(!0);try{const H=document.createElement("div");H.className="screenshot-title text-center mb-6 bg-gray-800 p-6",H.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Player Relationship Network</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,k.current.insertBefore(H,k.current.firstChild);const ee=k.current.querySelectorAll(".no-screenshot");ee.forEach(Ne=>{Ne.style.display="none"});const me=(await kl(k.current,{backgroundColor:"#1F2937",scale:2,logging:!1,windowWidth:1400,windowHeight:k.current.scrollHeight})).toDataURL("image/png"),Ae=document.createElement("a");Ae.download=`player-relationship-network-${new Date().toISOString().slice(0,10)}.png`,Ae.href=me,Ae.click(),k.current.removeChild(H),ee.forEach(Ne=>{Ne.style.display=""})}catch(H){console.error("Error creating screenshot:",H)}finally{u(!1)}}},J=()=>{n("buttonClick"),d(!h)},le=S.useCallback((H,ee,Se)=>{const Ae=m===H.id,Ne=m&&o.links.some(Be=>{const Ee=typeof Be.source=="object"?Be.source.id:Be.source,rt=typeof Be.target=="object"?Be.target.id:Be.target;return L(Be)&&(Ee===H.id||rt===H.id)}),Ce=Ae||Ne;Ce&&(ee.beginPath(),ee.arc(H.x||0,H.y||0,40/2+8,0,2*Math.PI),ee.fillStyle=Ae?"rgba(96, 165, 250, 0.4)":"rgba(96, 165, 250, 0.2)",ee.fill()),ee.beginPath(),ee.arc(H.x||0,H.y||0,40/2,0,2*Math.PI),ee.fillStyle=tN(H.skillPercentile),ee.fill(),ee.strokeStyle=Ce?"#60A5FA":"#6B7280",ee.lineWidth=Ce?3:2,ee.stroke(),ee.fillStyle="#fff",ee.font="bold 18px Sans-Serif",ee.textAlign="center",ee.textBaseline="middle",ee.fillText(H.playerName.charAt(0).toUpperCase(),H.x||0,H.y||0);const et=Ce?13:11;ee.font=`${Ce?"bold ":""}${et}px Sans-Serif`,ee.textAlign="center",ee.textBaseline="top",ee.fillStyle=Ce?"#fff":"#9CA3AF",ee.fillText(H.playerName,H.x||0,(H.y||0)+40/2+5)},[m,o.links,L]),re=S.useCallback((H,ee,Se)=>{Se.beginPath(),Se.arc(H.x||0,H.y||0,28,0,2*Math.PI),Se.fillStyle=ee,Se.fill()},[]),V=S.useCallback(H=>L(H)?_v[H.type]:"rgba(0,0,0,0)",[L]),z=S.useCallback(H=>{if(!L(H))return 0;const ee=1;return ee+(10-ee)*H.percentage},[L]),Z=S.useCallback(()=>0,[]),Y=S.useCallback(()=>{},[]),K=S.useCallback(()=>{},[]),ue=S.useCallback(H=>{const ee=(B.width/2-H.x)/H.k,Se=(B.height/2-H.y)/H.k;U.current={x:ee,y:Se,k:H.k}},[B.width,B.height]),be=S.useCallback(()=>{if(!C.current)return;const H=60;for(const ee of o.nodes)if(ee.x!==void 0&&ee.y!==void 0){const Se=H,me=B.width-H,Ae=H,Ne=B.height-H;ee.x<Se&&(ee.x=Se),ee.x>me&&(ee.x=me),ee.y<Ae&&(ee.y=Ae),ee.y>Ne&&(ee.y=Ne),I.current.set(ee.id,{x:ee.x,y:ee.y})}},[o.nodes,B.width,B.height]);return l.jsxs("div",{ref:k,className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:M,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back"})]}),l.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center",children:[l.jsx(Kc,{size:24,className:"mr-2"}),"Player Relationship Network"]}),l.jsxs("button",{onClick:$,disabled:A,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg w-full sm:w-auto justify-center",children:[l.jsx(cl,{size:18,className:"mr-2"}),l.jsx("span",{children:A?"Capturing...":"Screenshot"})]})]}),l.jsx("div",{className:"mb-4 sm:hidden no-screenshot",children:l.jsxs("button",{onClick:J,className:"w-full px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(uo,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Settings (",a.size," players)"]})]}),h?l.jsx(Nr,{size:18}):l.jsx(Zn,{size:18})]})}),l.jsx("div",{className:`${f&&!h?"hidden":""} mb-4 no-screenshot`,children:l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"font-medium",children:"Select Players"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:O,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"All"}),l.jsx("button",{onClick:X,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Clear"})]})]}),v?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx(At,{size:24,className:"animate-spin text-blue-400 mr-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading players..."})]}):x.length===0?l.jsx("div",{className:"text-center py-8 text-gray-400",children:"No players with recorded relationships found"}):l.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 xl:grid-cols-12 gap-2 mb-4",children:x.map(H=>l.jsxs("button",{onClick:()=>F(H.id),className:`p-2 rounded-lg transition-all flex flex-col items-center ${a.has(H.id)?"bg-blue-600 hover:bg-blue-500 ring-2 ring-blue-400":"bg-gray-600 hover:bg-gray-500"}`,title:`${H.name} - Skill: ${H.displayRating}`,children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg",style:{backgroundColor:tN(H.skillPercentile)},children:H.name.charAt(0).toUpperCase()}),l.jsx("span",{className:"text-[10px] mt-1 truncate w-full text-center leading-tight",children:H.name})]},H.id))}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(_v).map(H=>l.jsxs("button",{onClick:()=>ae(H),className:`flex items-center px-2 py-1 rounded transition-colors text-xs ${w[H]?"bg-gray-600":"bg-gray-800 opacity-40"}`,title:eN[H],children:[l.jsx("div",{className:"w-3 h-3 rounded-sm mr-1.5",style:{backgroundColor:_v[H]}}),l.jsx("span",{className:"hidden sm:inline",children:eN[H]})]},H))})]})}),r?l.jsx("div",{className:"flex justify-center items-center h-96",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(At,{size:32,className:"animate-spin text-blue-400 mb-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading relationship data..."})]})}):a.size<2?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-12 text-center",children:[l.jsx(Kc,{size:64,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400 text-lg",children:"Select at least 2 players to visualize their relationships"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-2 px-3 py-2 bg-gray-700/50 rounded-lg text-center",children:Q?l.jsxs("span",{className:"text-white",children:[l.jsx("span",{className:"font-bold text-blue-400",children:Q}),l.jsx("span",{className:"text-gray-300",children:"'s relationships:"}),l.jsx("span",{className:"ml-2 text-blue-400",children:" Won with"}),l.jsx("span",{className:"mx-1 text-purple-400",children:" Lost with"}),l.jsx("span",{className:"mx-1 text-green-400",children:" Beat"}),l.jsx("span",{className:"ml-1 text-red-400",children:" Lost to"})]}):l.jsx("span",{className:"text-gray-400",children:"Hover over a player to see their relationships"})}),l.jsx("div",{ref:D,className:"bg-gray-900 rounded-lg overflow-hidden border border-gray-700 w-full",style:{height:f?450:600},children:l.jsx(Ip,{ref:C,graphData:o,width:B.width,height:B.height,backgroundColor:"#111827",nodeCanvasObject:le,nodePointerAreaPaint:re,linkColor:V,linkWidth:z,linkCurvature:H=>H.curvature,linkDirectionalArrowLength:Z,linkDirectionalArrowRelPos:.85,linkDirectionalArrowColor:V,linkCanvasObjectMode:Y,linkCanvasObject:K,onNodeHover:H=>y(H?H.id:null),onEngineTick:be,onZoom:ue,d3AlphaDecay:.02,d3VelocityDecay:.3,cooldownTime:3e3,warmupTicks:50,enableNodeDrag:!0,enableZoomInteraction:!0,enablePanInteraction:!0,minZoom:.5,maxZoom:3})})]}),a.size>=2&&!r&&l.jsx("div",{className:"mt-4 p-4 bg-gray-700/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-1",children:[l.jsx("strong",{children:"Hover"})," over any player to reveal their relationships with other selected players."]}),l.jsxs("p",{className:"mb-1",children:[l.jsx("span",{className:"text-blue-400 font-medium",children:"Blue"})," = won together,",l.jsx("span",{className:"text-purple-400 font-medium ml-2",children:"Purple"})," = lost together,",l.jsx("span",{className:"text-green-400 font-medium ml-2",children:"Green"})," = beat opponent,",l.jsx("span",{className:"text-red-400 font-medium ml-2",children:"Red"})," = lost to opponent."]}),l.jsxs("p",{className:"text-gray-400",children:[l.jsx("strong",{children:"Node color"})," = TrueSkill ranking (green = highest, yellow/orange = middle, red = lowest). ",l.jsx("strong",{children:"Edge thickness"})," = win/loss rate."]})]})]})})]})};function o$e(e){return{id:e.local_id||e.name,name:e.name,totalGames:e.total_games,wins:e.wins,losses:e.losses,elo:e.elo,mu:e.mu,sigma:e.sigma,ordinal:e.ordinal,lastPlayed:e.last_played?new Date(e.last_played):new Date,dateCreated:new Date(e.date_created),deviceId:e.device_id||void 0,level:e.level||void 0}}function l$e(e){return{id:e.id,date:new Date(e.date),winningTeam:e.winning_team,gameLength:e.game_length,doubleLanes:e.double_lanes,titanPlayers:e.titan_players,atlanteanPlayers:e.atlantean_players,deviceId:e.device_id||void 0}}function c$e(e){return{id:e.id,matchId:e.match_id,playerId:e.player_id,team:e.team,heroId:e.hero_id,heroName:e.hero_name,heroRoles:e.hero_roles||[],kills:e.kills,deaths:e.deaths,assists:e.assists,goldEarned:e.gold_earned,minionKills:e.minion_kills,level:e.level,deviceId:e.device_id||void 0}}function XM(){const{isViewMode:e,sharedData:n}=s_(),r=S.useMemo(()=>!e||!(n!=null&&n.players)?null:n.players.map(o$e),[e,n==null?void 0:n.players]),s=S.useMemo(()=>!e||!(n!=null&&n.matches)?null:n.matches.map(l$e),[e,n==null?void 0:n.matches]),a=S.useMemo(()=>!e||!(n!=null&&n.matchPlayers)?null:n.matchPlayers.map(c$e),[e,n==null?void 0:n.matchPlayers]),i=S.useCallback(async()=>e&&r?r:ra.getAllPlayers(),[e,r]),o=S.useCallback(async d=>e&&r?r.find(g=>g.id===d||g.name===d):await ra.getPlayer(d)??void 0,[e,r]),c=S.useCallback(async()=>e&&s?s:ra.getAllMatches(),[e,s]),A=S.useCallback(async d=>e&&a?a.filter(f=>f.matchId===d):ra.getMatchPlayers(d),[e,a]),u=S.useCallback(async()=>{if(e&&a)return a;const d=await ra.getAllMatches(),f=[];for(const g of d){const m=await ra.getMatchPlayers(g.id);f.push(...m)}return f},[e,a]),h=S.useCallback(async d=>{if(e&&s&&a)return a.filter(y=>y.playerId===d).map(y=>{const x=s.find(p=>p.id===y.matchId);return x?{match:x,matchPlayer:y}:null}).filter(Boolean);const f=await ra.getPlayerMatches(d),g=[];for(const m of f){const x=(await ra.getAllMatches()).find(p=>p.id===m.matchId);x&&g.push({match:x,matchPlayer:m})}return g},[e,s,a]);return{isViewMode:e,getAllPlayers:i,getPlayer:o,getAllMatches:c,getMatchPlayers:A,getAllMatchPlayers:u,getPlayerMatches:h}}const A$e=({isOpen:e,onClose:n})=>{const[r,s]=S.useState("simple"),{playSound:a}=it();if(!e)return null;const i=()=>{a("buttonClick"),n()},o=c=>{a("buttonClick"),s(c)};return l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"p-4 bg-gray-700 flex justify-between items-center",children:[l.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[l.jsx(el,{size:24,className:"mr-2 text-blue-400"}),"Understanding Skill Ratings"]}),l.jsx("button",{onClick:i,className:"p-1 bg-gray-600 hover:bg-gray-500 rounded-full","aria-label":"Close modal",children:l.jsx(Bn,{size:20})})]}),l.jsxs("div",{className:"flex border-b border-gray-700",children:[l.jsx("button",{onClick:()=>o("simple"),className:`flex-1 px-4 py-3 font-medium transition-colors ${r==="simple"?"bg-gray-700 text-white border-b-2 border-blue-500":"bg-gray-800 text-gray-400 hover:text-white"}`,children:"Simple Explanation"}),l.jsx("button",{onClick:()=>o("technical"),className:`flex-1 px-4 py-3 font-medium transition-colors ${r==="technical"?"bg-gray-700 text-white border-b-2 border-blue-500":"bg-gray-800 text-gray-400 hover:text-white"}`,children:"Technical Details"})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r==="simple"?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"What is a Skill Rating?"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"Your skill rating is a number that represents how good you are at the game compared to other players. It goes up when you win and down when you lose, but there's more to it than that!"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Why Start Low?"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"New players start with a lower visible rating even if they win their first few games. This is because the system needs to be confident about your skill level. Think of it like this:"}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg mb-4",children:[l.jsxs("p",{className:"text-sm mb-2",children:[l.jsx("strong",{className:"text-yellow-400",children:"After 1 game:"}),' "This player might be good, but it could be luck"']}),l.jsxs("p",{className:"text-sm mb-2",children:[l.jsx("strong",{className:"text-yellow-400",children:"After 10 games:"}),` "Now I'm getting a clearer picture"`]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{className:"text-yellow-400",children:"After 20+ games:"}),` "I'm confident about this player's skill level"`]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"How Rankings Work"}),l.jsxs("ul",{className:"space-y-3 text-gray-300",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Beat stronger teams = bigger rating increase"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Lose to weaker teams = bigger rating decrease"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Play more games = more accurate rating"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Consistent performance = higher rating"})]})]})]}),l.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm text-blue-300",children:[l.jsx("strong",{children:"Pro tip:"})," Don't worry if your rating seems low at first. Play more games and the system will quickly figure out your true skill level. It typically takes about 20 games for ratings to stabilize."]})})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"TrueSkill Rating System"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"Guards of Atlantis uses the TrueSkill algorithm, a Bayesian skill rating system developed by Microsoft Research. Unlike traditional Elo systems, TrueSkill models both skill and uncertainty."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Mathematical Model"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"Each player's skill is modeled as a normal distribution:"}),l.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4",children:[l.jsx("p",{className:"text-green-400 mb-2",children:"skill ~ N(, )"}),l.jsx("p",{className:"text-gray-400",children:"where:"}),l.jsx("p",{className:"text-gray-300 ml-4",children:" (mu) = mean skill estimate"}),l.jsx("p",{className:"text-gray-300 ml-4",children:" (sigma) = standard deviation (uncertainty)"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Conservative Skill Estimate"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"The displayed rating uses the conservative skill estimate (ordinal):"}),l.jsx("div",{className:"bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4",children:l.jsx("p",{className:"text-green-400",children:"ordinal =  - 3"})}),l.jsx("p",{className:"text-gray-300 mb-4",children:"This represents the skill level we're 99.7% confident the player exceeds (3-sigma confidence interval). The display rating is then scaled to a familiar range:"}),l.jsx("div",{className:"bg-gray-900 p-4 rounded-lg font-mono text-sm mb-4",children:l.jsx("p",{className:"text-green-400",children:"displayRating = (ordinal + 25)  40 + 200"})})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Update Dynamics"}),l.jsx("p",{className:"text-gray-300 mb-4",children:"After each match, the system updates beliefs using Bayes' theorem:"}),l.jsxs("ul",{className:"space-y-2 text-gray-300 ml-4",children:[l.jsx("li",{children:" Prior: Current skill distribution"}),l.jsx("li",{children:" Likelihood: Match outcome probability"}),l.jsx("li",{children:" Posterior: Updated skill distribution"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Key Parameters"}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg space-y-2",children:[l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{className:"text-yellow-400",children:" (beta) = 25/6:"})," Performance variance parameter"]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{className:"text-yellow-400",children:" (tau) = 25/300:"})," Dynamics factor (skill change rate)"]}),l.jsxs("p",{className:"text-sm",children:[l.jsx("strong",{className:"text-yellow-400",children:"Initial values:"}),"  = 25,  = 25/3"]})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-blue-400",children:"Advantages over Elo"}),l.jsxs("ul",{className:"space-y-2 text-gray-300",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Handles uncertainty explicitly (new vs experienced players)"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Better team balance predictions"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Faster convergence to true skill"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("span",{className:"text-green-400 mr-2",children:""}),l.jsx("span",{children:"Natural handling of returning players"})]})]})]}),l.jsx("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm text-gray-400",children:[l.jsx("strong",{children:"Reference:"})," Herbrich, R., Minka, T., & Graepel, T. (2007). TrueSkill: A Bayesian skill rating system. In Advances in Neural Information Processing Systems 19."]})})]})})]})})},u$e=({rank:e,skill:n})=>{let r,s;return e===1?(r=l.jsx(R0,{size:18,className:"mr-2 text-yellow-300"}),s="text-yellow-300 font-bold"):e===2?(r=l.jsx(fB,{size:18,className:"mr-2 text-gray-300"}),s="text-gray-300 font-bold"):e===3?(r=l.jsx(fB,{size:18,className:"mr-2 text-amber-600"}),s="text-amber-600 font-bold"):(r=l.jsx(Q0,{size:18,className:"mr-2 text-blue-400"}),s="text-blue-400 font-medium"),l.jsxs("div",{className:"flex items-center",children:[r,l.jsxs("span",{className:s,children:["#",e," ",l.jsxs("span",{className:"ml-1 text-sm text-gray-400",children:["(",n,")"]})]})]})},d$e=({onBack:e,onViewSkillOverTime:n,onViewPlayerDetails:r})=>{const{playSound:s}=it(),{isViewMode:a,getAllPlayers:i,getAllMatchPlayers:o}=XM(),[c,A]=S.useState([]),[u,h]=S.useState(""),[d,f]=S.useState(!0),[g,m]=S.useState("skill"),[y,x]=S.useState("desc"),[p,v]=S.useState(!1),[b,w]=S.useState(!1),[_,C]=S.useState(!1),[k,j]=S.useState(()=>{const $=localStorage.getItem("playerStats_minGames");return $?parseInt($,10):3}),[B,E]=S.useState(()=>{const $=localStorage.getItem("playerStats_recencyMonths");return $?parseInt($,10):null}),[P,I]=S.useState(()=>localStorage.getItem("playerStats_recalculateTrueSkill")==="true"),[U,N]=S.useState(!1),D=S.useRef(null),T=a?null:B;S.useEffect(()=>{localStorage.setItem("playerStats_minGames",k.toString())},[k]),S.useEffect(()=>{B===null?localStorage.removeItem("playerStats_recencyMonths"):localStorage.setItem("playerStats_recencyMonths",B.toString())},[B]),S.useEffect(()=>{localStorage.setItem("playerStats_recalculateTrueSkill",P.toString())},[P]);const L=S.useMemo(()=>{if(T===null)return{startDate:void 0,endDate:void 0};const $=new Date,J=new Date;return J.setMonth(J.getMonth()-T),{startDate:J,endDate:$}},[T]);S.useEffect(()=>{(async()=>{f(!0);try{let J;if(L.startDate&&L.endDate)J=(await Pe.getFilteredPlayerStats(L.startDate,L.endDate,P)).players.map(ue=>({id:ue.id,name:ue.name,totalGames:ue.gamesPlayed,wins:ue.wins,losses:ue.losses,mu:0,sigma:0,elo:0,lastPlayed:ue.lastPlayed||new Date,dateCreated:new Date,favoriteHeroes:ue.favoriteHeroes,favoriteRoles:ue.favoriteRoles,winRate:ue.winRate,kills:ue.kills,deaths:ue.deaths,assists:ue.assists,kdRatio:ue.kdRatio,averageGold:ue.averageGold,averageMinionKills:ue.averageMinionKills,hasCombatStats:ue.hasCombatStats,displayRating:ue.displayRating,rank:0}));else{const K=await i(),ue=await o(),be=a?{}:await Pe.getCurrentTrueSkillRatings();J=await Promise.all(K.map(async H=>{const ee=ue.filter(ve=>ve.playerId===H.id||ve.playerId===H.name),Se={},me={};let Ae=0,Ne=0,Ce=0,et=0,Be=0;ee.forEach(ve=>{Ae+=ve.kills||0,Ne+=ve.deaths||0,Ce+=ve.assists||0,et+=ve.goldEarned||0,Be+=ve.minionKills||0,Se[ve.heroId]||(Se[ve.heroId]={heroId:ve.heroId,heroName:ve.heroName,count:0}),Se[ve.heroId].count++,(ve.heroRoles||[]).forEach(Ke=>{me[Ke]=(me[Ke]||0)+1})});const Ee=Object.values(Se).sort((ve,Ke)=>Ke.count-ve.count).slice(0,3),rt=Object.entries(me).map(([ve,Ke])=>({role:ve,count:Ke})).sort((ve,Ke)=>Ke.count-ve.count).slice(0,3),te=Ne===0?Ae:Ae/Ne,W=H.totalGames>0?H.wins/H.totalGames*100:0,se=Ae>0||Ne>0||Ce>0||et>0,xe=be[H.id]||Ehe(H);return{...H,favoriteHeroes:Ee,favoriteRoles:rt,winRate:W,kills:Ae,deaths:Ne,assists:Ce,kdRatio:parseFloat(te.toFixed(2)),averageGold:H.totalGames>0?Math.round(et/H.totalGames):0,averageMinionKills:H.totalGames>0?Math.round(Be/H.totalGames):0,hasCombatStats:se,displayRating:xe,rank:0}}))}const re=[...J.filter(K=>K.totalGames>0)].sort((K,ue)=>ue.displayRating-K.displayRating);let V=1,z=re.length>0?re[0].displayRating:0,Z=0;const Y=re.map((K,ue)=>(K.displayRating!==z?(V=ue+1,z=K.displayRating,Z=0):Z++,{...K,rank:V}));A(Y)}catch(J){console.error("Error loading player stats:",J)}finally{f(!1)}})()},[L.startDate,L.endDate,P,a,i,o]);const Q=()=>{s("buttonClick"),e()},M=async()=>{if(D.current){s("buttonClick"),v(!0);try{D.current.classList.add("taking-screenshot");const $=document.createElement("div");$.className="screenshot-title text-center mb-6",$.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Player Rankings</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,D.current.insertBefore($,D.current.firstChild);const J=document.createElement("div");J.className="screenshot-footer text-center mt-8 text-sm text-gray-400",J.innerHTML=`
        <p>Generated by Guards of Atlantis II Timer App on ${new Date().toLocaleString()}</p>
      `,D.current.appendChild(J);const le=D.current.querySelectorAll(".no-screenshot");le.forEach(Z=>{Z.style.display="none"});const V=(await kl(D.current,{backgroundColor:"#1F2937",windowWidth:1400,scrollX:0,scrollY:0,scale:window.devicePixelRatio||1,logging:!1,allowTaint:!0,useCORS:!0,onclone:Z=>{const Y=Z.querySelector("#screenshotContent");Y&&(Y.scrollTop=0)}})).toDataURL("image/png"),z=document.createElement("a");z.download=`guards-of-atlantis-player-stats-${new Date().toISOString().slice(0,10)}.png`,z.href=V,z.click(),D.current.removeChild($),D.current.removeChild(J),D.current.classList.remove("taking-screenshot"),le.forEach(Z=>{Z.style.display=""})}catch($){console.error("Error creating screenshot:",$)}finally{v(!1)}}},F=()=>{s("buttonClick"),w(!0)},X=[...c.filter($=>$.name.toLowerCase().includes(u.toLowerCase()))].sort(($,J)=>{let le=0;switch(g){case"name":le=$.name.localeCompare(J.name);break;case"skill":le=$.displayRating-J.displayRating;break;case"games":le=$.totalGames-J.totalGames;break;case"winRate":le=$.winRate-J.winRate;break;case"kdRatio":le=$.kdRatio-J.kdRatio;break;default:le=0}return y==="asc"?le:-le}),ae=$=>{s("buttonClick"),$===g?x(y==="asc"?"desc":"asc"):(m($),x("desc"))};return S.useEffect(()=>{const $=document.createElement("style");return $.type="text/css",$.innerHTML=`
      .taking-screenshot {
        background-color: #1F2937 !important;
        padding: 2rem !important;
        width: 1400px !important;
        position: relative !important;
        overflow: visible !important;
      }
      
      .screenshot-title {
        color: white;
        margin-bottom: 2rem;
      }
      
      .screenshot-footer {
        color: #9CA3AF;
        margin-top: 2rem;
        border-top: 1px solid #4B5563;
        padding-top: 1rem;
      }
      
      .taking-screenshot .no-screenshot {
        display: none !important;
      }
      
      .taking-screenshot .grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 2rem !important;
      }
      
      .taking-screenshot .bg-gray-700 {
        padding: 1.5rem !important;
      }
      
      .taking-screenshot h3.text-xl.font-bold {
        white-space: normal !important;
        max-width: 100% !important;
        overflow: visible !important; 
        padding-left: 0.5rem !important;
        padding-right: 0.5rem !important;
      }
      
      .taking-screenshot .px-5.py-4.bg-gray-800 {
        padding: 1.25rem !important;
        display: flex !important;
        justify-content: space-between !important;
        flex-wrap: wrap !important;
      }
      
      .taking-screenshot .text-sm,
      .taking-screenshot .text-xs {
        overflow: visible !important;
        white-space: normal !important;
      }
      
      .taking-screenshot .flex-wrap {
        margin-bottom: 0.5rem !important;
      }
    `,document.head.appendChild($),()=>{document.head.removeChild($)}},[]),U?l.jsx(i$e,{onBack:()=>N(!1)}):l.jsxs("div",{ref:D,id:"screenshotContent",className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:Q,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold text-center sm:text-left",children:"Player Statistics"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[l.jsx(qe,{text:"View skill rating progression over time",position:"left",children:l.jsxs("button",{onClick:()=>{s("buttonClick"),n()},className:"flex items-center justify-center px-3 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg w-full sm:w-auto",children:[l.jsx(Os,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:"View Over Time"})]})}),l.jsx(qe,{text:"View player relationship network graph",position:"left",children:l.jsxs("button",{onClick:()=>{s("buttonClick"),N(!0)},className:"flex items-center justify-center px-3 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg w-full sm:w-auto",children:[l.jsx(Kc,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:"Relationships"})]})}),l.jsx(qe,{text:"Take a screenshot of all player statistics",position:"left",children:l.jsxs("button",{onClick:M,className:"flex items-center justify-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg w-full sm:w-auto",disabled:p,children:[l.jsx(cl,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:p?"Capturing...":"Share Stats"})]})})]})]}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 no-screenshot",children:l.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:u,onChange:$=>h($.target.value),placeholder:"Search players...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx(Al,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:()=>ae("skill"),className:`px-3 py-1 rounded text-sm ${g==="skill"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Skill ",g==="skill"&&(y==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>ae("games"),className:`px-3 py-1 rounded text-sm ${g==="games"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Games ",g==="games"&&(y==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>ae("winRate"),className:`px-3 py-1 rounded text-sm ${g==="winRate"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Win% ",g==="winRate"&&(y==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>ae("kdRatio"),className:`px-3 py-1 rounded text-sm ${g==="kdRatio"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["KD ",g==="kdRatio"&&(y==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>ae("name"),className:`px-3 py-1 rounded text-sm ${g==="name"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Name ",g==="name"&&(y==="asc"?"":"")]})]}),!a&&l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>{s("buttonClick"),C(!_)},className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(uo,{size:18,className:"mr-2"}),l.jsx("span",{children:"Filters"}),(k!==3||B!==null)&&l.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(k!==3?1:0)+(B!==null?1:0)}),_?l.jsx(Nr,{size:16,className:"ml-2"}):l.jsx(Zn,{size:16,className:"ml-2"})]}),_&&l.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-72",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Time Period"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"playerTimePeriod",checked:B===null,onChange:()=>E(null),className:"mr-2 accent-blue-500"}),l.jsx("span",{className:"text-sm",children:"All Time"})]}),l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"playerTimePeriod",checked:B!==null,onChange:()=>E(B||6),className:"mr-2 accent-blue-500"}),l.jsx("span",{className:"text-sm mr-2",children:"Last"}),l.jsx("input",{type:"number",min:"1",max:"24",value:B||6,onChange:$=>{const J=parseInt($.target.value,10);!isNaN(J)&&J>=1&&J<=24&&E(J)},disabled:B===null,className:"w-16 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),l.jsx("span",{className:"text-sm ml-2",children:"months"})]})]})]}),B!==null&&l.jsx("div",{className:"mb-4 p-3 bg-gray-700/50 rounded-lg",children:l.jsxs("label",{className:"flex items-start cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:P,onChange:$=>I($.target.checked),className:"mr-2 mt-0.5 accent-blue-500"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm",children:"Recalculate skill for period only"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When checked, skill ratings are calculated using only matches in the selected period. Otherwise, current cumulative ratings are shown."})]})]})}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Min games for relationships"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>j($=>Math.max(1,$-1)),disabled:k<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:""}),l.jsx("div",{className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-center font-medium",children:k}),l.jsx("button",{onClick:()=>j($=>Math.min(20,$+1)),disabled:k>=20,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:"+"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For BFF/Nemesis calculations in player details"})]}),l.jsx("button",{onClick:()=>{s("buttonClick"),j(3),E(null),I(!1),C(!1)},className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),u!==""&&l.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg screenshot-info",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Search Results:"}),l.jsxs("p",{className:"text-sm",children:['Showing players matching: "',u,'"']})]}),B!==null&&L.startDate&&L.endDate&&l.jsxs("div",{className:"mb-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center flex-wrap gap-2",children:[l.jsx(Hr,{size:18,className:"text-blue-400 flex-shrink-0"}),l.jsxs("span",{className:"text-sm text-blue-200",children:["Showing stats from"," ",l.jsx("span",{className:"font-medium",children:L.startDate.toLocaleDateString()})," ","to"," ",l.jsx("span",{className:"font-medium",children:L.endDate.toLocaleDateString()})," ","(",B," month",B!==1?"s":"",")"]}),P&&l.jsx("span",{className:"text-xs bg-purple-600/50 text-purple-200 px-2 py-0.5 rounded",children:"Skill recalculated for period"})]}),d?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsx("div",{children:X.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:X.map($=>l.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md relative",children:[l.jsxs("div",{className:"px-5 py-4 bg-gray-800 flex justify-between items-center relative",children:[l.jsx("h3",{className:`text-xl font-bold truncate ${$.rank<=3?"ml-10":""}`,children:$.name}),l.jsx("div",{className:"flex items-center",children:l.jsx("div",{children:l.jsx(u$e,{rank:$.rank,skill:$.displayRating})})})]}),$.rank<=3&&l.jsx("div",{className:`absolute top-0 left-0 w-0 h-0 z-10
                        border-t-[50px] border-r-[50px] 
                        ${$.rank===1?"border-t-yellow-500 border-r-transparent":$.rank===2?"border-t-gray-400 border-r-transparent":"border-t-amber-600 border-r-transparent"}`,children:l.jsx("span",{className:"absolute top-[-45px] left-[5px] font-bold text-black",children:$.rank})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("div",{className:"text-sm text-gray-400",children:"Win Rate"}),l.jsxs("div",{className:"font-medium",children:[$.winRate.toFixed(1),"%"]})]}),l.jsx("div",{className:"h-2 bg-red-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${$.winRate}%`}})}),l.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-400",children:[l.jsxs("span",{children:["Wins: ",$.wins]}),l.jsxs("span",{children:["Losses: ",$.losses]}),l.jsxs("span",{children:["Total: ",$.totalGames]})]})]}),$.hasCombatStats&&l.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[l.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center text-blue-400 text-sm mb-1",children:[l.jsx(or,{size:14,className:"mr-1"}),l.jsx("span",{children:"K/D/A"})]}),l.jsxs("div",{className:"font-medium text-center",children:[$.kills,"/",$.deaths,"/",$.assists]})]}),l.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center text-yellow-400 text-sm mb-1",children:[l.jsx(Os,{size:14,className:"mr-1"}),l.jsx("span",{children:"KD Ratio"})]}),l.jsx("div",{className:"font-medium text-center",children:$.kdRatio})]}),l.jsxs("div",{className:"bg-gray-800 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center text-green-400 text-sm mb-1",children:[l.jsx(ht,{size:14,className:"mr-1"}),l.jsx("span",{children:"Avg Gold"})]}),l.jsx("div",{className:"font-medium text-center",children:$.averageGold})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Favorite Heroes"}),$.favoriteHeroes.length>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:$.favoriteHeroes.map(J=>l.jsxs("div",{className:"bg-gray-800 px-3 py-1 rounded-full text-sm",children:[J.heroName," (",J.count,")"]},J.heroId))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No heroes played"})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Favorite Roles"}),$.favoriteRoles.length>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:$.favoriteRoles.map(J=>l.jsxs("div",{className:"bg-gray-800 px-3 py-1 rounded-full text-sm",children:[J.role," (",J.count,")"]},J.role))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No roles data"})]}),l.jsxs("button",{onClick:()=>{s("buttonClick"),r($.id)},className:`w-full mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 
                                   rounded-lg flex items-center justify-center transition-colors`,children:[l.jsx(ro,{size:18,className:"mr-2"}),l.jsx("span",{children:"View Details"})]})]})]},$.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(ht,{size:48,className:"text-gray-500 mb-4"}),l.jsx("p",{className:"text-xl text-gray-400",children:u?"No players found matching your search":"No player data available"}),u&&l.jsx("button",{onClick:()=>h(""),className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg no-screenshot",children:"Clear Search"})]})}),l.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:[l.jsxs("h4",{className:"font-medium mb-2 flex items-center justify-between",children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400"}),"About Player Rankings"]}),l.jsxs("button",{onClick:F,className:"text-blue-400 hover:text-blue-300 flex items-center no-screenshot",children:[l.jsx(el,{size:16,className:"mr-1"}),l.jsx("span",{children:"Learn More"})]})]}),l.jsx("p",{children:"Players are ranked based on their skill rating, which reflects their performance against other players using the TrueSkill rating system. It takes roughly 20 matches for ratings to stabilise. Rankings are calculated based on match wins and losses, with players winning more points if their team beat higher ranked teams, and losing more points if they lose to lower ranked teams."})]}),l.jsx(A$e,{isOpen:b,onClose:()=>w(!1)})]})},h$e=({kills:e,deaths:n,assists:r,kdRatio:s,averageKills:a,averageDeaths:i,averageAssists:o,gamesWithCombatData:c,gamesWithGoldData:A,gamesWithMinionData:u,averageGold:h,averageMinionKills:d,averageLevel:f,totalGames:g,hasCombatStats:m})=>m?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(or,{size:20,className:"mr-2 text-blue-400"}),"Detailed Combat Statistics"]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Total K/D/A"}),l.jsx(or,{size:16,className:"text-red-400"})]}),l.jsxs("div",{className:"text-lg font-bold text-white",children:[e,"/",n,"/",r]}),l.jsxs("div",{className:"text-xs text-gray-500",children:[g," games played"]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"K/D Ratio"}),l.jsx(D0,{size:16,className:"text-yellow-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:s.toFixed(2)}),l.jsx("div",{className:"text-xs text-gray-500",children:n===0?"Perfect":"kill/death ratio"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Avg Level"}),l.jsx(Os,{size:16,className:"text-purple-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-purple-400",children:f.toFixed(1)}),l.jsx("div",{className:"text-xs text-gray-500",children:"end of game"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Avg Gold"}),l.jsx(Ps,{size:16,className:"text-yellow-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:h.toLocaleString()}),l.jsx("div",{className:"text-xs text-gray-500",children:"per game"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Avg Minions"}),l.jsx(ht,{size:16,className:"text-green-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-green-400",children:d.toFixed(1)}),l.jsx("div",{className:"text-xs text-gray-500",children:"per game"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Kill Participation"}),l.jsx(D0,{size:16,className:"text-blue-400"})]}),l.jsx("div",{className:"text-2xl font-bold text-blue-400",children:(a+o).toFixed(1)}),l.jsxs("div",{className:"text-xs text-gray-500",children:["(K+A) per game (",c," games)"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Combat Performance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Kills per Game"}),l.jsxs("span",{className:"font-medium",children:[a.toFixed(1)," (",c," games)"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Deaths per Game"}),l.jsxs("span",{className:"font-medium",children:[i.toFixed(1)," (",c," games)"]})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Assists per Game"}),l.jsxs("span",{className:"font-medium",children:[o.toFixed(1)," (",c," games)"]})]})]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Economic Performance"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Total Gold Earned"}),l.jsx("span",{className:"font-medium",children:A>0?(h*A).toLocaleString():"N/A"})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Farming Efficiency"}),l.jsx("span",{className:"font-medium",children:u>0?`${d.toFixed(1)} minions/game (${u} games)`:"N/A"})]})]})]})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(or,{size:20,className:"mr-2 text-blue-400"}),"Detailed Combat Statistics"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(or,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"No Combat Data Available"}),l.jsx("p",{className:"text-sm text-gray-500",children:"This player hasn't recorded any matches with detailed combat statistics yet."})]})]});function ql(e,n=.4){const r=e.length;if(r===0)return[];if(r===1)return[...e];const s=[],a=Math.max(Math.floor(r*n),2);for(let i=0;i<r;i++){let o=0,c=0;for(let A=0;A<r;A++){const u=Math.abs(i-A)/a;if(u<1){const h=Math.pow(1-Math.pow(u,3),3);o+=h,c+=h*e[A]}}s.push(o>0?c/o:e[i])}return s}function nu(e,n){if(e.length===0)return 0;if(e.length===1)return e[0];const r=n/100*(e.length-1),s=Math.floor(r),a=Math.ceil(r),i=r-s;return s===a?e[s]:e[s]*(1-i)+e[a]*i}const f$e=(e,n)=>{if(n.length===0)return{category:"Average",color:"text-blue-400",description:"similar to",percentile:50};const r=[...n].sort((i,o)=>i-o),s=r.findIndex(i=>i>=e),a=s===-1?100:Math.round(s/r.length*100);return a>=95?{category:"Top 5%",color:"text-green-500",description:"in top 5% of",percentile:a}:a>=80?{category:"Top 20%",color:"text-green-400",description:"in top 20% of",percentile:a}:a>=60?{category:"Above Average",color:"text-blue-400",description:"above average of",percentile:a}:a>=40?{category:"Average",color:"text-gray-400",description:"average among",percentile:a}:a>=20?{category:"Below Average",color:"text-orange-400",description:"below average of",percentile:a}:{category:"Bottom 20%",color:"text-red-400",description:"in bottom 20% of",percentile:a}},g$e=e=>e>150?{category:"Rapidly Improving",color:"text-green-500"}:e>40?{category:"Improving",color:"text-green-400"}:e>-40?{category:"Stable",color:"text-blue-400"}:e>-150?{category:"Declining",color:"text-orange-400"}:{category:"Rapidly Declining",color:"text-red-400"},m$e=e=>e<10?{level:"Very Low",description:"Extremely consistent performance"}:e<20?{level:"Low",description:"Predictable results"}:e<35?{level:"Medium",description:"Typical variation"}:e<60?{level:"High",description:"Noticeable swings"}:{level:"Very High",description:"Highly unpredictable"},p$e=({playerId:e,playerName:n})=>{const[r,s]=S.useState(!0),[a,i]=S.useState([]),[o,c]=S.useState([]),[A,u]=S.useState(!1);S.useEffect(()=>{const g=()=>u(window.innerWidth<768);return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[]),S.useEffect(()=>{(async()=>{try{s(!0);const[m,y]=await Promise.all([Pe.getHistoricalRatings(),Pe.getCurrentTrueSkillRatings()]);c(Object.values(y));const x=[];for(const T of m)if(T.participants.includes(e)&&T.matchNumber>0){const L=Object.values(T.ratings).sort((Q,M)=>Q-M);x.push({matchNumber:T.matchNumber,date:T.date,playerRating:T.ratings[e],allRatings:L})}if(x.length===0){i([]),s(!1);return}const p=x[0].date,v=x[0].allRatings.map(()=>1200);x.unshift({matchNumber:0,date:p,playerRating:1200,allRatings:v});const b=x.map(T=>nu(T.allRatings,10)),w=x.map(T=>nu(T.allRatings,25)),_=x.map(T=>nu(T.allRatings,50)),C=x.map(T=>nu(T.allRatings,75)),k=x.map(T=>nu(T.allRatings,90)),j=x.map(T=>T.allRatings.reduce((L,Q)=>L+Q,0)/T.allRatings.length),B=ql(b),E=ql(w),P=ql(_),I=ql(C),U=ql(k),N=ql(j),D=x.map((T,L)=>({matchNumber:T.matchNumber,date:T.date,playerRating:T.playerRating,p10:Math.round(B[L]),p25:Math.round(E[L]),p50:Math.round(P[L]),p75:Math.round(I[L]),p90:Math.round(U[L]),mean:Math.round(N[L])}));i(D)}catch(m){console.error("Error loading skill progression:",m)}finally{s(!1)}})()},[e]);const h=S.useMemo(()=>{var I,U;if(a.length===0)return null;const g=1200,m=((I=a[a.length-1])==null?void 0:I.playerRating)||0,y=((U=a[a.length-1])==null?void 0:U.p50)||0,x=m-g,p=y-g,v=x-p,b=m-y,w=b>0,_=a.slice(1).map((N,D)=>N.playerRating-a[D].playerRating),C=_.length>0?_.reduce((N,D)=>N+D,0)/_.length:0,k=_.length>0?Math.sqrt(_.reduce((N,D)=>N+Math.pow(D-C,2),0)/_.length):0;let j=0;if(a.length>=2){const N=a.slice(-Math.min(5,a.length));if(N.length>=2){const D=N[0];j=(N[N.length-1].playerRating-D.playerRating)/(N.length-1)}}const B=f$e(m,o),E=g$e(j),P=m$e(Math.round(k));return{startRating:g,endRating:m,playerChange:x,groupChange:p,relativeToGroup:v,isAboveAverage:w,currentDifference:Math.abs(b),volatility:Math.round(k),totalMatches:a.length-1,trend:x>=0?"up":"down",positionCategory:B,trendCategory:E,volatilityInfo:P,recentSlope:j,lastMedian:y}},[a,o]),d=S.useMemo(()=>{if(a.length===0)return[1e3,1400];const g=a.flatMap(x=>[x.playerRating,x.p10,x.p90,1200]),m=Math.min(...g),y=Math.max(...g);return[Math.floor(m/50)*50-50,Math.ceil(y/50)*50+50]},[a]),f=S.useMemo(()=>{if(a.length===0)return[0,10];const g=a.map(m=>m.matchNumber);return[Math.min(...g)-.5,Math.max(...g)+.5]},[a]);return r?l.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),l.jsx("div",{className:"h-64 bg-gray-600 rounded"})]})}):a.length===0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(Os,{size:20,className:"mr-2 text-blue-400"}),"Skill Progression Over Time"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Os,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"No Progression Data Available"}),l.jsx("p",{className:"text-sm text-gray-500",children:"Not enough match history to show skill progression."})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[l.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[l.jsx(Os,{size:20,className:"mr-2 text-blue-400"}),"Skill Progression vs Group"]}),h&&l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`text-lg font-semibold flex items-center ${h.trend==="up"?"text-green-400":"text-red-400"}`,children:[h.trend==="up"?l.jsx(I0,{size:16,className:"mr-1"}):l.jsx(U0,{size:16,className:"mr-1"}),h.playerChange>=0?"+":"",h.playerChange]}),l.jsx("div",{className:"text-sm text-gray-400",children:"Total change"})]}),l.jsxs("div",{className:"text-right",children:[l.jsxs("div",{className:`text-lg font-semibold flex items-center ${h.isAboveAverage?"text-green-400":"text-orange-400"}`,children:[h.isAboveAverage?l.jsx(I0,{size:16,className:"mr-1"}):l.jsx(U0,{size:16,className:"mr-1"}),h.currentDifference]}),l.jsx("div",{className:"text-sm text-gray-400",children:"vs median"})]})]})]}),l.jsx("div",{style:{width:"100%",height:A?400:550},children:l.jsxs(gh,{width:A?400:1e3,height:A?380:530,domain:{x:f,y:d},padding:{top:30,bottom:60,left:70,right:30},children:[l.jsx(pa,{label:"Match Number",tickValues:a.map(g=>g.matchNumber),tickFormat:g=>Math.round(g),style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:A?12:16,padding:40},tickLabels:{fill:"#9CA3AF",fontSize:A?10:14},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(pa,{dependentAxis:!0,label:"Skill Rating",style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:A?12:16,padding:50},tickLabels:{fill:"#9CA3AF",fontSize:A?10:14},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(rf,{data:a,x:"matchNumber",y:"p25",y0:"p10",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.15,stroke:"none"}}}),l.jsx(rf,{data:a,x:"matchNumber",y:"p50",y0:"p25",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.25,stroke:"none"}}}),l.jsx(rf,{data:a,x:"matchNumber",y:"p75",y0:"p50",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.25,stroke:"none"}}}),l.jsx(rf,{data:a,x:"matchNumber",y:"p90",y0:"p75",interpolation:"monotoneX",style:{data:{fill:"#EF4444",fillOpacity:.15,stroke:"none"}}}),l.jsx(Ro,{data:[{x:f[0],y:1200},{x:f[1],y:1200}],style:{data:{stroke:"#6B7280",strokeWidth:2,strokeDasharray:"10 5"}}}),l.jsx(Ro,{data:a,x:"matchNumber",y:"mean",interpolation:"monotoneX",style:{data:{stroke:"#EF4444",strokeWidth:2.5,strokeDasharray:"8 4"}}}),l.jsx(Ro,{data:a,x:"matchNumber",y:"p50",interpolation:"monotoneX",style:{data:{stroke:"#EF4444",strokeWidth:2.5}}}),l.jsx(Ro,{data:a,x:"matchNumber",y:"playerRating",interpolation:"linear",style:{data:{stroke:"#3B82F6",strokeWidth:4}}}),l.jsx(mp,{data:a,x:"matchNumber",y:"playerRating",size:7,style:{data:{fill:"#3B82F6"}}})]})}),l.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 justify-center p-3 bg-gray-800 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-500"}),l.jsx("span",{className:"text-sm text-gray-300",children:n})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-6 h-0.5 bg-red-500"}),l.jsx("span",{className:"text-sm text-gray-300",children:"Group Median"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("svg",{width:"24",height:"8",className:"flex-shrink-0",children:l.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#EF4444",strokeWidth:"2",strokeDasharray:"6 3"})}),l.jsx("span",{className:"text-sm text-gray-300",children:"Group Mean"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-5 h-3 rounded",style:{backgroundColor:"rgba(239,68,68,0.25)"}}),l.jsx("span",{className:"text-sm text-gray-300",children:"25th-75th %ile"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-5 h-3 rounded",style:{backgroundColor:"rgba(239,68,68,0.15)"}}),l.jsx("span",{className:"text-sm text-gray-300",children:"10th-90th %ile"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("svg",{width:"24",height:"8",className:"flex-shrink-0",children:l.jsx("line",{x1:"0",y1:"4",x2:"24",y2:"4",stroke:"#6B7280",strokeWidth:"1.5",strokeDasharray:"8 4"})}),l.jsx("span",{className:"text-sm text-gray-300",children:"Starting (1200)"})]})]}),h&&l.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-2 text-gray-300",children:"Performance vs Group"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx(qe,{text:`Shows where you rank compared to all players.

${h.positionCategory.category}: You are ${h.positionCategory.description} all players.

Your rating: ${h.endRating} points
Percentile rank: ${h.positionCategory.percentile}th percentile`,position:"right",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Position"})}),l.jsx("span",{className:`font-medium ${h.positionCategory.color}`,children:h.positionCategory.category})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(qe,{text:`Gap between your rating and group median.

${Math.abs(h.currentDifference)} points ${h.isAboveAverage?"above":"below"} median.

Larger gaps = more distinctive skill level.`,position:"right",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Difference"})}),l.jsxs("span",{className:"font-medium",children:[h.currentDifference," pts"]})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(qe,{text:`Your improvement vs everyone else's.

You: ${h.playerChange>=0?"+":""}${h.playerChange} points since start
Group: ${h.groupChange>=0?"+":""}${h.groupChange} points median change

Positive = improved faster than median
Negative = improved slower than median`,position:"right",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Relative Gain"})}),l.jsxs("span",{className:`font-medium ${h.relativeToGroup>=0?"text-green-400":"text-red-400"}`,children:[h.relativeToGroup>=0?"+":"",h.relativeToGroup]})]})]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-2 text-gray-300",children:"Rating Journey"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Starting Rating"}),l.jsx("span",{className:"font-medium",children:h.startRating})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Current Rating"}),l.jsx("span",{className:"font-medium",children:h.endRating})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"Matches Played"}),l.jsx("span",{className:"font-medium",children:h.totalMatches})]})]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-2 text-gray-300",children:"Consistency"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx(qe,{text:`How much your rating varies between games.

${h.volatilityInfo.level} volatility (${h.volatility} points)

${h.volatilityInfo.description} - consistent players are easier to balance teams with.`,position:"left",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Volatility"})}),l.jsx("span",{className:"font-medium",children:h.volatilityInfo.level})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(qe,{text:`Recent performance trajectory (last 5 games).

${h.trendCategory.category}: ${h.recentSlope>=0?"+":""}${h.recentSlope.toFixed(1)} pts/game

Recent trends show current form better than overall stats.`,position:"left",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Trend"})}),l.jsx("span",{className:`font-medium ${h.trendCategory.color}`,children:h.trendCategory.category})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(qe,{text:`How predictable your performance is.

Based on your volatility (${h.volatility} pts).

High stability = consistent results
Low stability = unpredictable swings`,position:"left",maxWidth:"max-w-sm",children:l.jsx("span",{className:"text-sm text-gray-400 cursor-help",children:"Stability"})}),l.jsx("span",{className:"font-medium",children:h.volatility<10?"Very High":h.volatility<20?"High":h.volatility<35?"Medium":h.volatility<60?"Low":"Very Low"})]})]})]})]}),l.jsx("div",{className:"mt-6 p-4 bg-gray-800/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Your Rating (Blue Line):"})," Shows your skill rating at each match you played."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Group Median (Solid Red):"})," The smoothed median (50th percentile) of all player ratings."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Group Mean (Dashed Red):"})," The smoothed average rating of all players."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Shaded Bands:"})," Show the distribution of player ratings. Darker = 25th-75th percentile (middle 50%). Lighter = 10th-90th percentile."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Starting Line (Dashed Grey at 1200):"})," The default skill rating all players begin with."]}),l.jsx("p",{children:"Being above the median means you're better than half the group. The higher in the shaded region, the better your relative performance."})]})]})})]})},y$e=({playerId:e})=>{const[n,r]=S.useState(!0),[s,a]=S.useState(null),i=(()=>{const A=localStorage.getItem("playerStats_minGames");return A?parseInt(A,10):3})(),o=(()=>{const A=localStorage.getItem("playerStats_recencyMonths");return A?parseInt(A,10):null})(),c=S.useMemo(()=>{if(o===null)return{startDate:null,endDate:null};const A=new Date,u=new Date;return u.setMonth(u.getMonth()-o),{startDate:u,endDate:A}},[o]);return S.useEffect(()=>{(async()=>{try{r(!0);const[u,h]=await Promise.all([Pe.getPlayerStats(e),Pe.getAllMatches()]);let d=h;c.startDate&&c.endDate&&(d=h.filter(k=>{const j=new Date(k.date);return j>=c.startDate&&j<=c.endDate}));const f=new Set(d.map(k=>k.id)),g=u.matchesPlayed.filter(k=>f.has(k.matchId)),m=new Map;for(const k of g)if(!m.has(k.matchId)){const j=await Pe.getMatchPlayers(k.matchId);m.set(k.matchId,j)}const y=new Map,x=new Map;for(const[k,j]of m){const B=j.find(I=>I.playerId===e);if(!B)continue;const E=d.find(I=>I.id===k);if(!E)continue;const P=B.team===E.winningTeam;j.forEach(I=>{if(I.playerId!==e)if(I.team===B.team){y.has(I.playerId)||y.set(I.playerId,{wins:0,total:0,name:I.playerId});const U=y.get(I.playerId);U.total++,P&&U.wins++}else{x.has(I.playerId)||x.set(I.playerId,{wins:0,total:0,name:I.playerId});const U=x.get(I.playerId);U.total++,P&&U.wins++}})}const p=Array.from(y.entries()).map(([k,j])=>({playerId:k,playerName:j.name,gamesPlayed:j.total,winRate:j.wins/j.total*100,isSignificant:j.total>=i})).filter(k=>k.isSignificant).sort((k,j)=>j.winRate-k.winRate),v=Array.from(x.entries()).map(([k,j])=>({playerId:k,playerName:j.name,gamesPlayed:j.total,winRate:j.wins/j.total*100,isSignificant:j.total>=i})).filter(k=>k.isSignificant).sort((k,j)=>k.winRate-j.winRate),b=k=>{if(k.length===0)return[];const j=k[0].winRate;return k.filter(B=>B.winRate===j)},w=k=>{if(k.length===0)return[];const j=k[0].winRate;return k.filter(B=>B.winRate===j)},_=b(p),C=w(v);a({bestTeammates:_,nemeses:C})}catch(u){console.error("Error calculating relationship stats:",u)}finally{r(!1)}})()},[e,c.startDate,c.endDate]),n?l.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx("div",{className:"h-32 bg-gray-600 rounded"}),l.jsx("div",{className:"h-32 bg-gray-600 rounded"})]})]})}):!s||s.bestTeammates.length===0&&s.nemeses.length===0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(ht,{size:20,className:"mr-2 text-blue-400"}),"Player Relationships"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(ht,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"Not Enough Data"}),l.jsxs("p",{className:"text-sm text-gray-500",children:["Need at least ",i," game",i!==1?"s":""," with the same players to calculate meaningful relationships."]})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(ht,{size:20,className:"mr-2 text-blue-400"}),"Player Relationships"]}),o!==null&&c.startDate&&c.endDate&&l.jsxs("div",{className:"mb-4 p-2 bg-blue-900/30 border border-blue-700/50 rounded text-sm flex items-center",children:[l.jsx(Hr,{size:14,className:"mr-2 text-blue-400"}),l.jsxs("span",{className:"text-blue-200",children:["Showing relationships from last ",o," month",o!==1?"s":""]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(vb,{size:20,className:"mr-2 text-green-400"}),l.jsx("h4",{className:"font-semibold text-green-400",children:"Best Teammate (BFF)"})]})}),s.bestTeammates.length>0?l.jsx("div",{children:s.bestTeammates.map((A,u)=>l.jsxs("div",{className:u>0?"mt-3 pt-3 border-t border-gray-600":"",children:[l.jsxs("div",{className:"text-lg font-bold text-white mb-1",children:[A.playerName,s.bestTeammates.length>1&&l.jsx("span",{className:"text-sm text-gray-400 ml-2",children:"(tied)"})]}),l.jsxs("div",{className:"text-2xl font-bold text-green-400 mb-2",children:[A.winRate.toFixed(1),"% Win Rate"]}),l.jsxs("div",{className:"text-sm text-gray-400",children:[A.gamesPlayed," games together"]}),l.jsx("div",{className:"mt-3 h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${A.winRate}%`}})})]},A.playerId))}):l.jsx("div",{className:"text-center py-4",children:l.jsx("p",{className:"text-gray-400",children:"No significant teammate relationships yet"})})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(Z$,{size:20,className:"mr-2 text-red-400"}),l.jsx("h4",{className:"font-semibold text-red-400",children:"Nemesis"})]})}),s.nemeses.length>0?l.jsx("div",{children:s.nemeses.map((A,u)=>l.jsxs("div",{className:u>0?"mt-3 pt-3 border-t border-gray-600":"",children:[l.jsxs("div",{className:"text-lg font-bold text-white mb-1",children:[A.playerName,s.nemeses.length>1&&l.jsx("span",{className:"text-sm text-gray-400 ml-2",children:"(tied)"})]}),l.jsxs("div",{className:"text-2xl font-bold text-red-400 mb-2",children:[A.winRate.toFixed(1),"% Win Rate"]}),l.jsxs("div",{className:"text-sm text-gray-400",children:[A.gamesPlayed," games against"]}),l.jsx("div",{className:"mt-3 h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-red-500",style:{width:`${A.winRate}%`}})})]},A.playerId))}):l.jsx("div",{className:"text-center py-4",children:l.jsx("p",{className:"text-gray-400",children:"No significant opponent relationships yet"})})]})]}),l.jsx("div",{className:"mt-6 p-4 bg-gray-800/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Best Teammate (BFF):"})," The player you have the highest win rate with (minimum ",i," game",i!==1?"s":"",")."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Nemesis:"})," The opponent you struggle against most (lowest win rate, minimum ",i," game",i!==1?"s":"",")."]}),l.jsxs("p",{children:["These statistics help identify which players complement your playstyle best and which opponents present the greatest challenge. Relationships require at least ",i," game",i!==1?"s":""," for statistical significance."]})]})]})})]})},v$e={guardian:{name:"Guardian",description:"Tanky defenders who protect allies and control space on the battlefield",shortDescription:"Protects allies from damage and controls battlefield positioning"},durable:{name:"Durable",description:"Tough heroes with high survivability and defensive capabilities",shortDescription:"Survives extended fights and outlasts enemies with defensive abilities"},slayer:{name:"Slayer",description:"High damage dealers who excel at eliminating enemy heroes",shortDescription:"Eliminates enemy heroes quickly with high damage output and burst"},tactician:{name:"Tactician",description:"Strategic heroes with strong positioning and battlefield control",shortDescription:"Controls battles through strategic positioning and tactical battlefield awareness"},support:{name:"Support",description:"Team utility specialists who heal, buff allies, and provide assistance",shortDescription:"Heals allies and provides team utility through buffs and assistance"},sorcerer:{name:"Sorcerer",description:"Magic damage dealers with powerful spells and area control",shortDescription:"Casts powerful magic spells for damage and area battlefield control"},disabler:{name:"Disabler",description:"Heroes who control enemies through stuns, roots, and debuffs",shortDescription:"Disrupts enemies with stuns, roots, and debuffs to control fights"},pusher:{name:"Pusher",description:"Heroes who excel at destroying structures and advancing lanes",shortDescription:"Destroys enemy structures and advances lanes to gain map control"},farming:{name:"Farming",description:"Heroes who efficiently gather resources and scale into late game",shortDescription:"Gathers resources efficiently to become powerful in late game scenarios"}},YM=e=>{const n=e.toLowerCase(),r=v$e[n];return r?`${r.name}: ${r.shortDescription}`:e.charAt(0).toUpperCase()+e.slice(1)},x$e=({favoriteHeroes:e,allHeroesPlayed:n,favoriteRoles:r,allRolesPlayed:s,totalGames:a,matches:i})=>{const[o,c]=S.useState([]),[A,u]=S.useState(!0);S.useEffect(()=>{const f=async()=>{try{u(!0);const g=[];for(const m of e){const y=i.filter(b=>b.heroId===m.heroId||b.heroName===m.heroName);let x=0,p=0;for(const b of y)try{const w=await Pe.getMatch(b.matchId);w&&(p++,b.team===w.winningTeam&&x++)}catch(w){console.warn(`Failed to load match ${b.matchId}:`,w)}const v=p>0?x/p*100:0;g.push({heroName:m.heroName,gamesPlayed:m.count,winRate:v,percentage:a>0?m.count/a*100:0})}c(g)}catch(g){console.error("Error calculating hero win rates:",g);const m=e.map(y=>({heroName:y.heroName,gamesPlayed:y.count,winRate:0,percentage:a>0?y.count/a*100:0}));c(m)}finally{u(!1)}};e.length>0?f():(c([]),u(!1))},[e,i,a]);const h=f=>{switch(f.toLowerCase()){case"guardian":case"durable":return l.jsx(jt,{size:16,className:"text-blue-400"});case"slayer":case"tactician":return l.jsx(or,{size:16,className:"text-red-400"});case"support":return l.jsx(ht,{size:16,className:"text-green-400"});case"sorcerer":return l.jsx(tl,{size:16,className:"text-purple-400"});default:return l.jsx(Q0,{size:16,className:"text-gray-400"})}},d=f=>{switch(f.toLowerCase()){case"guardian":case"durable":return"text-blue-400";case"slayer":case"tactician":return"text-red-400";case"support":return"text-green-400";case"sorcerer":return"text-purple-400";default:return"text-gray-400"}};return A?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(jt,{size:20,className:"mr-2 text-blue-400"}),"Hero Performance Analytics"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-400 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-400",children:"Calculating hero win rates..."})]})]}):e.length===0||o.length===0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(jt,{size:20,className:"mr-2 text-blue-400"}),"Hero Performance Analytics"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(jt,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:"No Hero Data Available"}),l.jsx("p",{className:"text-sm text-gray-500",children:"This player hasn't recorded any matches with hero selection yet."})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(jt,{size:20,className:"mr-2 text-blue-400"}),"Hero Performance Analytics"]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Most Played Heroes"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:o.slice(0,6).map(f=>l.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-white truncate",children:f.heroName}),l.jsxs("div",{className:"text-xs text-gray-400",children:[f.gamesPlayed," games"]})]}),l.jsxs("div",{className:"text-right ml-2",children:[l.jsxs("div",{className:"text-sm font-semibold text-green-400",children:[f.winRate.toFixed(0),"%"]}),l.jsx("div",{className:"text-xs text-gray-500",children:"win rate"})]})]}),l.jsxs("div",{className:"mb-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[l.jsx("span",{children:"Usage"}),l.jsxs("span",{children:[f.percentage.toFixed(1),"%"]})]}),l.jsx("div",{className:"h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-500",style:{width:`${f.percentage}%`}})})]}),l.jsx("div",{children:l.jsx("div",{className:"h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${f.winRate}%`}})})})]},f.heroName))})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h4",{className:"font-semibold mb-3 text-gray-300",children:"Role Preferences"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:r.map(f=>{const g=a>0?f.count/a*100:0;return l.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg",children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsx(qe,{text:YM(f.role),position:"top",maxWidth:"max-w-sm",children:l.jsxs("div",{className:"flex items-center cursor-help",children:[h(f.role),l.jsx("span",{className:`ml-2 font-medium ${d(f.role)}`,children:f.role})]})})}),l.jsx("div",{className:"text-lg font-bold text-white",children:f.count}),l.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[g.toFixed(1),"% of games"]}),l.jsx("div",{className:"h-2 bg-gray-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-blue-500",style:{width:`${g}%`}})})]},f.role)})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-semibold mb-2 text-gray-300 flex items-center",children:[l.jsx(Os,{size:16,className:"mr-2 text-blue-400"}),"Hero Diversity"]}),l.jsx("div",{className:"text-2xl font-bold text-blue-400 mb-1",children:n.length}),l.jsx("div",{className:"text-sm text-gray-400",children:"Different heroes played"}),l.jsx("div",{className:"mt-2 text-xs text-gray-500",children:a>0&&n.length>0?`Avg ${(a/n.length).toFixed(1)} games per hero`:"No data"})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-semibold mb-2 text-gray-300 flex items-center",children:[l.jsx(tl,{size:16,className:"mr-2 text-yellow-400"}),"Main Hero"]}),e[0]&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"text-lg font-bold text-white mb-1",children:e[0].heroName}),l.jsxs("div",{className:"text-sm text-gray-400",children:[e[0].count," games played"]}),l.jsx("div",{className:"mt-2 text-xs text-gray-500",children:a>0?`${(e[0].count/a*100).toFixed(1)}% of all games`:""})]})]}),l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg",children:[l.jsxs("h4",{className:"font-semibold mb-2 text-gray-300 flex items-center",children:[l.jsx(ht,{size:16,className:"mr-2 text-green-400"}),"Favorite Role"]}),r[0]&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-lg font-bold text-white mb-1 flex items-center",children:[h(r[0].role),l.jsx("span",{className:"ml-2",children:r[0].role})]}),l.jsxs("div",{className:"text-sm text-gray-400",children:[r[0].count," games played"]}),l.jsx("div",{className:"mt-2 text-xs text-gray-500",children:a>0?`${(r[0].count/a*100).toFixed(1)}% preference`:""})]})]})]})]})},w$e=({playerId:e})=>{const[n,r]=S.useState(!0),[s,a]=S.useState([]),[i,o]=S.useState(1),[c,A]=S.useState(null),u=10,h=(()=>{const v=localStorage.getItem("playerStats_recencyMonths");return v?parseInt(v,10):null})(),d=S.useMemo(()=>{if(h===null)return{startDate:null,endDate:null};const v=new Date,b=new Date;return b.setMonth(b.getMonth()-h),{startDate:b,endDate:v}},[h]);S.useEffect(()=>{(async()=>{try{r(!0),A(null);let w=(await Pe.getPlayerStats(e)).matchesPlayed;if(d.startDate&&d.endDate){const C=await Pe.getAllMatches(),k=new Set(C.filter(j=>{const B=new Date(j.date);return B>=d.startDate&&B<=d.endDate}).map(j=>j.id));w=w.filter(j=>k.has(j.matchId))}const _=[];for(const C of w)try{const[k,j]=await Promise.all([Pe.getMatch(C.matchId),Pe.getMatchPlayers(C.matchId)]);if(k&&j.length>0){const B=j.find(U=>U.playerId===e);if(!B)continue;const E=j.filter(U=>U.playerId!==e&&U.team===B.team),P=j.filter(U=>U.team!==B.team),I=B.team===k.winningTeam;_.push({match:k,playerData:B,teammates:E,opponents:P,won:I})}}catch(k){console.warn(`Failed to load match ${C.matchId}:`,k)}_.sort((C,k)=>new Date(k.match.date).getTime()-new Date(C.match.date).getTime()),a(_)}catch(b){console.error("Error loading match history:",b),A("Failed to load match history")}finally{r(!1)}})()},[e,d.startDate,d.endDate]);const f=v=>{if(!v)return l.jsx(qe,{text:"Unknown role",position:"top",maxWidth:"max-w-sm",children:l.jsx(Q0,{size:16,className:"text-gray-400"})});const b=YM(v);let w;switch(v.toLowerCase()){case"guardian":case"durable":w=l.jsx(jt,{size:16,className:"text-blue-400"});break;case"slayer":case"tactician":w=l.jsx(or,{size:16,className:"text-red-400"});break;case"support":w=l.jsx(ht,{size:16,className:"text-green-400"});break;case"sorcerer":w=l.jsx(tl,{size:16,className:"text-purple-400"});break;default:w=l.jsx(Q0,{size:16,className:"text-gray-400"});break}return l.jsx(qe,{text:b,position:"top",maxWidth:"max-w-sm",children:w})},g=Math.ceil(s.length/u),m=(i-1)*u,y=m+u,x=s.slice(m,y),p=v=>{o(Math.max(1,Math.min(v,g)))};return n?l.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:l.jsxs("div",{className:"animate-pulse",children:[l.jsx("div",{className:"h-6 bg-gray-600 rounded w-1/3 mb-4"}),l.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((v,b)=>l.jsx("div",{className:"h-16 bg-gray-600 rounded"},b))})]})}):c||s.length===0?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center",children:[l.jsx(Hr,{size:20,className:"mr-2 text-blue-400"}),"Match History"]}),l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Hr,{size:48,className:"mx-auto text-gray-500 mb-4"}),l.jsx("p",{className:"text-gray-400 mb-2",children:c?"Error Loading History":"No Match History Available"}),l.jsx("p",{className:"text-sm text-gray-500",children:c||"This player hasn't recorded any matches yet."})]})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4",children:[l.jsxs("h3",{className:"text-xl font-bold flex items-center",children:[l.jsx(Hr,{size:20,className:"mr-2 text-blue-400"}),"Match History"]}),g>1&&l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>p(i-1),disabled:i===1,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(pn,{size:16})}),l.jsxs("span",{className:"text-sm text-gray-400 px-3",children:["Page ",i," of ",g]}),l.jsx("button",{onClick:()=>p(i+1),disabled:i===g,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(ud,{size:16})})]})]}),h!==null&&d.startDate&&d.endDate&&l.jsxs("div",{className:"mb-4 p-2 bg-blue-900/30 border border-blue-700/50 rounded text-sm flex items-center",children:[l.jsx(Hr,{size:14,className:"mr-2 text-blue-400"}),l.jsxs("span",{className:"text-blue-200",children:["Showing matches from last ",h," month",h!==1?"s":""]})]}),l.jsx("div",{className:"space-y-4",children:x.map(v=>{var b,w;return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[l.jsxs("div",{className:"block lg:hidden",children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${v.won?"bg-green-500":"bg-red-500"}`}),l.jsx("span",{className:`font-semibold ${v.won?"text-green-400":"text-red-400"}`,children:v.won?"Victory":"Defeat"})]}),l.jsx("div",{className:"text-right text-sm text-gray-400",children:l.jsx("div",{children:new Date(v.match.date).toLocaleDateString()})})]}),l.jsxs("div",{className:"mb-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center",children:[f((b=v.playerData.heroRoles)==null?void 0:b[0]),l.jsx("span",{className:"ml-2 font-medium text-white",children:v.playerData.heroName||"Unknown Hero"})]}),l.jsxs("div",{className:"text-sm text-gray-400",children:["Team ",v.playerData.team]})]}),(v.playerData.kills!==void 0||v.playerData.deaths!==void 0||v.playerData.assists!==void 0)&&l.jsxs("div",{className:"text-sm text-gray-300",children:["KDA: ",v.playerData.kills??0,"/",v.playerData.deaths??0,"/",v.playerData.assists??0,v.playerData.level&&`  Level ${v.playerData.level}`,v.playerData.goldEarned&&`  ${v.playerData.goldEarned.toLocaleString()} gold`]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-green-400 mb-1",children:"Teammates"}),l.jsx("div",{className:"space-y-1",children:v.teammates.map((_,C)=>{var k;return l.jsxs("div",{className:"flex items-center",children:[f((k=_.heroRoles)==null?void 0:k[0]),l.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[l.jsx("div",{className:"font-medium",children:_.playerId}),_.heroName&&l.jsx("div",{className:"text-xs text-gray-500",children:_.heroName})]})]},C)})})]}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-red-400 mb-1",children:"Opponents"}),l.jsx("div",{className:"space-y-1",children:v.opponents.map((_,C)=>{var k;return l.jsxs("div",{className:"flex items-center",children:[f((k=_.heroRoles)==null?void 0:k[0]),l.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[l.jsx("div",{className:"font-medium",children:_.playerId}),_.heroName&&l.jsx("div",{className:"text-xs text-gray-500",children:_.heroName})]})]},C)})})]})]})]}),l.jsx("div",{className:"hidden lg:block",children:l.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[l.jsx("div",{className:"col-span-1",children:l.jsx("div",{className:`w-4 h-4 rounded-full ${v.won?"bg-green-500":"bg-red-500"}`})}),l.jsx("div",{className:"col-span-2 text-sm text-gray-400",children:l.jsx("div",{children:new Date(v.match.date).toLocaleDateString()})}),l.jsxs("div",{className:"col-span-3",children:[l.jsxs("div",{className:"flex items-center mb-1",children:[f((w=v.playerData.heroRoles)==null?void 0:w[0]),l.jsx("span",{className:"ml-2 font-medium text-white",children:v.playerData.heroName||"Unknown Hero"})]}),(v.playerData.kills!==void 0||v.playerData.deaths!==void 0||v.playerData.assists!==void 0)&&l.jsxs("div",{className:"text-sm text-gray-400",children:[v.playerData.kills??0,"/",v.playerData.deaths??0,"/",v.playerData.assists??0,v.playerData.level&&`  Lv.${v.playerData.level}`]})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("div",{className:"text-xs text-green-400 mb-1",children:"Teammates"}),l.jsx("div",{className:"space-y-1",children:v.teammates.map((_,C)=>{var k;return l.jsxs("div",{className:"flex items-center text-xs",children:[f((k=_.heroRoles)==null?void 0:k[0]),l.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[l.jsx("div",{children:_.playerId}),_.heroName&&l.jsx("div",{className:"text-xs text-gray-500",children:_.heroName})]})]},C)})})]}),l.jsxs("div",{className:"col-span-3",children:[l.jsx("div",{className:"text-xs text-red-400 mb-1",children:"Opponents"}),l.jsx("div",{className:"space-y-1",children:v.opponents.map((_,C)=>{var k;return l.jsxs("div",{className:"flex items-center text-xs",children:[f((k=_.heroRoles)==null?void 0:k[0]),l.jsxs("div",{className:"ml-1 text-gray-300 truncate",children:[l.jsx("div",{children:_.playerId}),_.heroName&&l.jsx("div",{className:"text-xs text-gray-500",children:_.heroName})]})]},C)})})]})]})})]},v.match.id)})}),g>1&&l.jsxs("div",{className:"mt-6 flex justify-center items-center gap-2",children:[l.jsx("button",{onClick:()=>p(1),disabled:i===1,className:"px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"First"}),l.jsx("button",{onClick:()=>p(i-1),disabled:i===1,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(pn,{size:16})}),l.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,g)},(v,b)=>{const w=Math.max(1,Math.min(g-4,i-2))+b;return w<=g?l.jsx("button",{onClick:()=>p(w),className:`px-3 py-2 text-sm rounded-lg ${w===i?"bg-blue-600 text-white":"bg-gray-800 hover:bg-gray-600"}`,children:w},w):null})}),l.jsx("button",{onClick:()=>p(i+1),disabled:i===g,className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l.jsx(ud,{size:16})}),l.jsx("button",{onClick:()=>p(g),disabled:i===g,className:"px-3 py-2 text-sm rounded-lg bg-gray-800 hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Last"})]}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-600",children:l.jsxs("div",{className:"text-center text-sm text-gray-400",children:["Showing ",m+1,"-",Math.min(y,s.length)," of ",s.length," matches",l.jsx("span",{className:"mx-2",children:""}),s.filter(v=>v.won).length," wins, ",s.filter(v=>!v.won).length," losses",l.jsx("span",{className:"mx-2",children:""}),s.length>0?(s.filter(v=>v.won).length/s.length*100).toFixed(1):"0.0","% win rate"]})})]})},b$e=({playerId:e,onBack:n})=>{const{playSound:r}=it(),[s,a]=S.useState(null),[i,o]=S.useState(!0),[c,A]=S.useState(null),u=(()=>{const p=localStorage.getItem("playerStats_recencyMonths");return p?parseInt(p,10):null})(),h=S.useMemo(()=>{if(u===null)return{startDate:null,endDate:null};const p=new Date,v=new Date;return v.setMonth(v.getMonth()-u),{startDate:v,endDate:p}},[u]);S.useEffect(()=>{e&&(async()=>{try{o(!0),A(null);const[v,b,w,_]=await Promise.all([Pe.getPlayer(e),Pe.getPlayerStats(e),Pe.getCurrentTrueSkillRatings(),Pe.getAllPlayers()]);if(!v)throw new Error("Player not found");const k=_.map(H=>({...H,rating:w[H.id]||0})).filter(H=>H.totalGames>0).sort((H,ee)=>ee.rating-H.rating).findIndex(H=>H.id===e)+1;let j=await Pe.getAllMatches(),B=null;h.startDate&&h.endDate&&(B=new Set(j.filter(H=>{const ee=new Date(H.date);return ee>=h.startDate&&ee<=h.endDate}).map(H=>H.id)));let E=b.matchesPlayed;B&&(E=E.filter(H=>B.has(H.matchId)));const P=E.reduce((H,ee)=>H+(ee.kills??0),0),I=E.reduce((H,ee)=>H+(ee.deaths??0),0),U=E.reduce((H,ee)=>H+(ee.assists??0),0),N=E.reduce((H,ee)=>H+(ee.goldEarned??0),0),D=E.reduce((H,ee)=>H+(ee.minionKills??0),0),T=E.reduce((H,ee)=>H+(ee.level??0),0),L=E.filter(H=>H.kills!==void 0||H.deaths!==void 0||H.assists!==void 0).length,Q=E.filter(H=>H.goldEarned!==void 0).length,M=E.filter(H=>H.minionKills!==void 0).length,F=E.filter(H=>H.level!==void 0).length,O=I===0?P:P/I,X=L>0?P/L:0,ae=L>0?I/L:0,$=L>0?U/L:0,J=Q>0?Math.round(N/Q):0,le=M>0?D/M:0,re=F>0?T/F:0,V=P>0||I>0||U>0||N>0,z=new Map,Z=new Map;for(const H of E){if(H.heroId){const ee=z.get(H.heroId);ee?ee.count++:z.set(H.heroId,{heroId:H.heroId,heroName:H.heroName||`Hero ${H.heroId}`,count:1})}if(H.heroRoles)for(const ee of H.heroRoles)Z.set(ee,(Z.get(ee)||0)+1)}const Y=Array.from(z.values()).sort((H,ee)=>ee.count-H.count).slice(0,5),K=Array.from(Z.entries()).map(([H,ee])=>({role:H,count:ee})).sort((H,ee)=>ee.count-H.count),ue=Array.from(z.values()).sort((H,ee)=>ee.count-H.count),be={...b,favoriteHeroes:Y,favoriteRoles:K,allHeroesPlayed:ue,allRolesPlayed:K};a({player:v,stats:be,matches:E,currentRating:w[e]||0,rank:k,combatStats:{kills:P,deaths:I,assists:U,kdRatio:parseFloat(O.toFixed(2)),averageKills:X,averageDeaths:ae,averageAssists:$,gamesWithCombatData:L,gamesWithGoldData:Q,gamesWithMinionData:M,averageGold:J,averageMinionKills:le,averageLevel:re,hasCombatStats:V}})}catch(v){A(v instanceof Error?v.message:"Failed to load player details")}finally{o(!1)}})()},[e,h.startDate,h.endDate]);const d=()=>{r("buttonClick"),n()};if(i)return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsxs("button",{onClick:d,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Player Stats"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Player Details"})]}),l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(J8,{size:24,className:"animate-spin text-blue-500 mr-3"}),l.jsx("span",{className:"text-gray-300",children:"Loading player details..."})]})})]});if(c||!s)return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsxs("button",{onClick:d,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Player Stats"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Player Details"})]}),l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(ro,{size:48,className:"text-red-500 mb-4"}),l.jsx("p",{className:"text-xl text-red-400 mb-2",children:"Error Loading Player"}),l.jsx("p",{className:"text-gray-400",children:c||"Player not found"}),l.jsx("button",{onClick:d,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Go Back"})]})]});const{player:f,stats:g,currentRating:m,rank:y,combatStats:x}=s;return f?l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsxs("button",{onClick:d,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Player Stats"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Detailed Player Statistics"})]}),u!==null&&h.startDate&&h.endDate&&l.jsxs("div",{className:"mb-6 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center",children:[l.jsx(Hr,{size:18,className:"mr-2 text-blue-400 flex-shrink-0"}),l.jsxs("span",{className:"text-sm text-blue-200",children:["Showing stats from"," ",l.jsx("span",{className:"font-medium",children:h.startDate.toLocaleDateString()})," ","to"," ",l.jsx("span",{className:"font-medium",children:h.endDate.toLocaleDateString()})," ","(",u," month",u!==1?"s":"",")"]})]}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-600 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-2xl font-bold text-gray-300",children:f.name.charAt(0).toUpperCase()})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-white",children:f.name}),l.jsxs("div",{className:"flex items-center gap-2 mt-1 text-blue-400",children:[l.jsx(Os,{size:20}),l.jsxs("span",{className:"text-lg font-semibold",children:["Rank #",y]})]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-400",children:m}),l.jsx("div",{className:"text-sm text-gray-400",children:"TrueSkill Rating"}),l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[f.totalGames," games  Last played ",new Date(f.lastPlayed).toLocaleDateString()]})]})]})}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Quick Overview"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:f.wins}),l.jsx("div",{className:"text-sm text-gray-400",children:"Wins"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-red-400",children:f.losses}),l.jsx("div",{className:"text-sm text-gray-400",children:"Losses"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:[f.totalGames>0?(f.wins/f.totalGames*100).toFixed(1):"0.0","%"]}),l.jsx("div",{className:"text-sm text-gray-400",children:"Win Rate"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:g.allHeroesPlayed.length}),l.jsx("div",{className:"text-sm text-gray-400",children:"Heroes Played"})]})]})]}),l.jsx(h$e,{kills:x.kills,deaths:x.deaths,assists:x.assists,kdRatio:x.kdRatio,averageKills:x.averageKills,averageDeaths:x.averageDeaths,averageAssists:x.averageAssists,gamesWithCombatData:x.gamesWithCombatData,gamesWithGoldData:x.gamesWithGoldData,gamesWithMinionData:x.gamesWithMinionData,averageGold:x.averageGold,averageMinionKills:x.averageMinionKills,averageLevel:x.averageLevel,totalGames:f.totalGames,hasCombatStats:x.hasCombatStats}),l.jsx(p$e,{playerId:f.id,playerName:f.name}),l.jsx(y$e,{playerId:f.id,playerName:f.name}),l.jsx(x$e,{favoriteHeroes:g.favoriteHeroes,allHeroesPlayed:g.allHeroesPlayed,favoriteRoles:g.favoriteRoles,allRolesPlayed:g.allRolesPlayed,totalGames:f.totalGames,matches:s.matches}),l.jsx(w$e,{playerId:f.id,playerName:f.name})]}):l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsxs("button",{onClick:d,className:"flex items-center text-gray-300 hover:text-white mr-4",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Player Stats"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Player Details"})]}),l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(ro,{size:48,className:"text-red-500 mb-4"}),l.jsx("p",{className:"text-xl text-red-400 mb-2",children:"Player Not Found"}),l.jsx("p",{className:"text-gray-400",children:"Unable to load player data"}),l.jsx("button",{onClick:d,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Go Back"})]})]})},_$e=({selectedHeroId:e,onHeroChange:n,disabled:r=!1,className:s=""})=>{const[a,i]=S.useState(!1),[o,c]=S.useState(""),A=S.useRef(null),u=S.useRef(null),h=qn.find(p=>p.id===e);S.useEffect(()=>{const p=v=>{A.current&&!A.current.contains(v.target)&&(i(!1),c(""))};return a&&(document.addEventListener("mousedown",p),setTimeout(()=>{var v;(v=u.current)==null||v.focus()},0)),()=>{document.removeEventListener("mousedown",p)}},[a]);const d=qn.filter(p=>{var v;return p.name.toLowerCase().includes(o.toLowerCase())||p.roles.some(b=>b.toLowerCase().includes(o.toLowerCase()))||((v=p.additionalRoles)==null?void 0:v.some(b=>b.toLowerCase().includes(o.toLowerCase())))}),f=new Map;d.forEach(p=>{const v=p.roles[0]||"Unknown";f.has(v)||f.set(v,[]),f.get(v).push(p)});const g=Array.from(f.entries()).sort(([p],[v])=>{const b=["Durable","Tactician","Pusher","Disabler","Farming"],w=b.indexOf(p),_=b.indexOf(v);return w===-1&&_===-1?p.localeCompare(v):w===-1?1:_===-1?-1:w-_}),m=p=>{n(p.id,p),i(!1),c("")},y=()=>{r||(i(!a),c(""))},x=p=>Array.from({length:5},(v,b)=>l.jsx("span",{className:`text-sm ${b<p?"text-yellow-400":"text-gray-600"}`,children:""},b));return l.jsxs("div",{ref:A,className:`relative ${s}`,children:[l.jsxs("button",{type:"button",onClick:y,disabled:r,className:`w-full px-3 py-2 text-left bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center justify-between ${r?"opacity-50 cursor-not-allowed":"hover:bg-gray-600"}`,children:[l.jsx("div",{className:"flex items-center",children:h?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-8 h-8 bg-gray-800 rounded mr-3 flex items-center justify-center text-xs",children:""}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:h.name}),l.jsx("div",{className:"text-xs text-gray-400",children:h.roles.join(", ")})]})]}):l.jsx("span",{className:"text-gray-400",children:"Select a hero..."})}),l.jsx(Zn,{size:20,className:`transition-transform ${a?"rotate-180":""}`})]}),a&&l.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded-lg shadow-lg z-50 max-h-96 overflow-hidden",children:[l.jsx("div",{className:"p-3 border-b border-gray-700",children:l.jsxs("div",{className:"relative",children:[l.jsx(Al,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),l.jsx("input",{ref:u,type:"text",value:o,onChange:p=>c(p.target.value),placeholder:"Search heroes...",className:"w-full pl-10 pr-3 py-2 bg-gray-700 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),l.jsx("div",{className:"max-h-80 overflow-y-auto",children:g.length>0?g.map(([p,v])=>l.jsxs("div",{children:[l.jsx("div",{className:"px-3 py-2 bg-gray-700/50 border-b border-gray-700 text-sm font-medium text-gray-300",children:p.toUpperCase()}),v.sort((b,w)=>b.name.localeCompare(w.name)).map(b=>l.jsxs("button",{type:"button",onClick:()=>m(b),className:`w-full px-3 py-3 text-left hover:bg-gray-700 flex items-center justify-between border-b border-gray-800 last:border-b-0 ${e===b.id?"bg-blue-900/30 ring-1 ring-blue-500":""}`,children:[l.jsxs("div",{className:"flex items-center flex-1",children:[l.jsx("div",{className:"w-10 h-10 bg-gray-800 rounded mr-3 flex items-center justify-center",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium",children:b.name}),l.jsx("div",{className:"text-xs text-gray-400",children:b.roles.concat(b.additionalRoles||[]).join(", ")}),l.jsx("div",{className:"text-xs text-gray-500 mt-1",children:b.expansion})]})]}),l.jsx("div",{className:"flex items-center ml-2",children:x(b.complexity)})]},b.id))]},p)):l.jsxs("div",{className:"px-3 py-6 text-center text-gray-400",children:['No heroes found matching "',o,'"']})}),h&&l.jsx("div",{className:"p-3 bg-gray-700/30 border-t border-gray-700",children:l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-gray-400",children:"Current Selection: "}),l.jsx("span",{className:"font-medium",children:h.name}),l.jsxs("span",{className:"text-gray-400",children:[" - ",h.roles.join(", ")]})]})})]})]})},C$e=({isOpen:e,matchId:n,onClose:r,onSaveComplete:s})=>{const{playSound:a}=it(),i=S.useRef(null),[o,c]=S.useState(null),[A,u]=S.useState(null),[h,d]=S.useState([]),[f,g]=S.useState(!1),[m,y]=S.useState(!1),[x,p]=S.useState(null),[v,b]=S.useState({isValid:!0,errors:[],warnings:[]}),[w,_]=S.useState(!1);S.useEffect(()=>{e&&n?j():k()},[e,n]),S.useEffect(()=>{A&&h.length>0&&(B(),E())},[A,h]);const C=F=>{i.current&&!i.current.contains(F.target)&&P()};S.useEffect(()=>{const F=O=>{O.key==="Escape"&&e&&P()};return e&&(document.addEventListener("keydown",F),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",F),document.body.style.overflow=""}},[e]);const k=()=>{c(null),u(null),d([]),g(!1),y(!1),p(null),b({isValid:!0,errors:[],warnings:[]}),_(!1)},j=async()=>{g(!0),p(null);try{const F=await Pe.getEditableMatch(n);if(!F)throw new Error("Match not found");const O=await Pe.canEditMatch(n);if(!O.canEdit)throw new Error(O.reason||"Cannot edit this match");c(F),u({...F.match}),d(F.players.map(X=>({...X})))}catch(F){console.error("Error loading match data:",F),p(F instanceof Error?F.message:"Failed to load match data")}finally{g(!1)}},B=()=>{if(!A||!h)return;const F=Pe.validateMatchEdit(A,h);b(F)},E=()=>{if(!o||!A){_(!1);return}const F=JSON.stringify(o.match)!==JSON.stringify(A),O=JSON.stringify(o.players)!==JSON.stringify(h);_(F||O)},P=()=>{w&&!window.confirm("You have unsaved changes. Are you sure you want to close without saving?")||(a("buttonClick"),r())},I=async()=>{if(!(!A||!h||!v.isValid)){y(!0),p(null);try{const F={};o&&Object.keys(A).forEach(X=>{const ae=X;o.match[ae]!==A[ae]&&(F[ae]=A[ae])});const O=h.filter(X=>{const ae=o==null?void 0:o.players.find($=>$.id===X.id);return ae&&JSON.stringify(ae)!==JSON.stringify(X)}).map(X=>({id:X.id,updates:{heroId:X.heroId,heroName:X.heroName,heroRoles:X.heroRoles,kills:X.kills,deaths:X.deaths,assists:X.assists,goldEarned:X.goldEarned,minionKills:X.minionKills,level:X.level,team:X.team}}));if(Object.keys(F).length===0&&O.length===0){a("buttonClick"),s();return}await Pe.editMatch(n,F,O),a("phaseChange"),s()}catch(F){console.error("Error saving match:",F),p(F instanceof Error?F.message:"Failed to save match")}finally{y(!1)}}},U=()=>{o&&window.confirm("Reset all changes to original values?")&&(a("buttonClick"),u({...o.match}),d(o.players.map(F=>({...F}))))},N=(F,O)=>{A&&u({...A,[F]:O})},D=(F,O,X)=>{d(ae=>ae.map($=>$.id===F?{...$,[O]:X}:$))},T=(F,O)=>{const X=qn.find(ae=>ae.id===O);X&&d(ae=>ae.map($=>$.id===F?{...$,heroId:X.id,heroName:X.name,heroRoles:[...X.roles,...X.additionalRoles||[]]}:$))},L=F=>new Date(F).toISOString().split("T")[0],Q=F=>{const O=new Date(F);return`${O.getHours().toString().padStart(2,"0")}:${O.getMinutes().toString().padStart(2,"0")}`},M=(F,O)=>{const[X,ae]=O.split(":"),$=new Date(F);$.setHours(parseInt(X),parseInt(ae)),N("date",$)};return e?l.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:C,children:l.jsxs("div",{ref:i,className:"max-w-6xl w-full max-h-[90vh] bg-gray-800 rounded-lg border border-gray-600 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[" Edit Match",A&&l.jsx("span",{className:"ml-3 text-base text-gray-400",children:new Date(A.date).toLocaleDateString()})]}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Changes will recalculate all player ratings from this match forward"})]}),l.jsx("button",{onClick:P,className:"text-gray-400 hover:text-white p-2",children:l.jsx(Bn,{size:24})})]}),l.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-180px)]",children:f?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(At,{size:24,className:"animate-spin mr-3"}),l.jsx("span",{className:"text-gray-400",children:"Loading match data..."})]})}):x?l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"bg-red-900/30 border border-red-600 p-4 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Aa,{size:20,className:"mr-3 text-red-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-red-300",children:"Error Loading Match"}),l.jsx("p",{className:"text-red-200 mt-1",children:x})]})]})})}):A&&h?l.jsxs("div",{className:"p-6",children:[(v.errors.length>0||v.warnings.length>0)&&l.jsxs("div",{className:"mb-6",children:[v.errors.length>0&&l.jsxs("div",{className:"bg-red-900/30 border border-red-600 p-4 rounded-lg mb-4",children:[l.jsxs("h3",{className:"font-semibold text-red-300 mb-2 flex items-center",children:[l.jsx(Aa,{size:18,className:"mr-2"}),"Validation Errors"]}),l.jsx("ul",{className:"text-red-200 text-sm space-y-1",children:v.errors.map((F,O)=>l.jsxs("li",{children:[" ",F.message]},O))})]}),v.warnings.length>0&&l.jsxs("div",{className:"bg-amber-900/30 border border-amber-600 p-4 rounded-lg mb-4",children:[l.jsxs("h3",{className:"font-semibold text-amber-300 mb-2 flex items-center",children:[l.jsx(Aa,{size:18,className:"mr-2"}),"Warnings"]}),l.jsx("ul",{className:"text-amber-200 text-sm space-y-1",children:v.warnings.map((F,O)=>l.jsxs("li",{children:[" ",F.message]},O))})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-200",children:"Match Details"}),l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date"}),l.jsx("input",{type:"date",value:L(A.date),onChange:F=>M(F.target.value,Q(A.date)),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Time"}),l.jsx("input",{type:"time",value:Q(A.date),onChange:F=>M(L(A.date),F.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Winner"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"winner",checked:A.winningTeam===ne.Titans,onChange:()=>N("winningTeam",ne.Titans),className:"mr-2"}),l.jsx("span",{className:"text-blue-400",children:"Titans"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"winner",checked:A.winningTeam===ne.Atlanteans,onChange:()=>N("winningTeam",ne.Atlanteans),className:"mr-2"}),l.jsx("span",{className:"text-red-400",children:"Atlanteans"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Length"}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"gameLength",checked:A.gameLength===at.Quick,onChange:()=>N("gameLength",at.Quick),className:"mr-2"}),l.jsx("span",{children:"Quick"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"gameLength",checked:A.gameLength===at.Long,onChange:()=>N("gameLength",at.Long),className:"mr-2"}),l.jsx("span",{children:"Long"})]})]})]})]}),l.jsx("div",{className:"mt-4",children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:A.doubleLanes,onChange:F=>N("doubleLanes",F.target.checked),className:"mr-2"}),l.jsx("span",{className:"text-gray-300",children:"Double Lanes"})]})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-200",children:"Teams"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium mb-3 text-blue-400 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans (",h.filter(F=>F.team===ne.Titans).length," players)"]}),l.jsx("div",{className:"space-y-4",children:h.filter(F=>F.team===ne.Titans).map(F=>l.jsx(nN,{player:F,onHeroChange:O=>T(F.id,O),onFieldChange:(O,X)=>D(F.id,O,X),validation:v},F.id))})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-medium mb-3 text-red-400 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans (",h.filter(F=>F.team===ne.Atlanteans).length," players)"]}),l.jsx("div",{className:"space-y-4",children:h.filter(F=>F.team===ne.Atlanteans).map(F=>l.jsx(nN,{player:F,onHeroChange:O=>T(F.id,O),onFieldChange:(O,X)=>D(F.id,O,X),validation:v},F.id))})]})]})]})]}):null}),l.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-700",children:[l.jsx("div",{className:"flex items-center space-x-4",children:w&&l.jsxs("div",{className:"flex items-center text-amber-400 text-sm",children:[l.jsx(Aa,{size:16,className:"mr-1"}),l.jsx("span",{children:"Unsaved changes"})]})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx(qe,{text:"Reset all changes to original values",children:l.jsxs("button",{onClick:U,disabled:m||!w,className:`px-4 py-2 rounded-lg flex items-center ${w?"bg-gray-600 hover:bg-gray-500":"bg-gray-700 cursor-not-allowed opacity-50"}`,children:[l.jsx(Uu,{size:18,className:"mr-2"}),"Reset"]})}),l.jsx("button",{onClick:P,disabled:m,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg",children:"Cancel"}),l.jsx(qe,{text:v.isValid?w?"Save all changes and recalculate ratings":"No changes to save":"Fix validation errors before saving",children:l.jsx("button",{onClick:I,disabled:m||!v.isValid||!w,className:`px-4 py-2 rounded-lg flex items-center ${v.isValid&&w?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 cursor-not-allowed opacity-50"}`,children:m?l.jsxs(l.Fragment,{children:[l.jsx(At,{size:18,className:"mr-2 animate-spin"}),"Saving..."]}):l.jsxs(l.Fragment,{children:[l.jsx(w3,{size:18,className:"mr-2"}),"Save Changes"]})})})]})]})]})}):null},nN=({player:e,onHeroChange:n,onFieldChange:r,validation:s})=>{var u;const[a,i]=S.useState(!1),o=h=>s.errors.find(d=>d.field===h&&d.playerId===e.playerId),c=h=>s.warnings.find(d=>d.field===h&&d.playerId===e.playerId),A=(h,d,f)=>{var x;const g=o(h),m=c(h),y=g||m;return l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:d}),l.jsx("input",{type:"number",min:"0",value:f||"",onChange:p=>r(h,p.target.value?parseInt(p.target.value):void 0),className:`w-full px-2 py-1 text-sm bg-gray-800 border rounded focus:outline-none focus:ring-1 ${g?"border-red-500 focus:ring-red-500":m?"border-amber-500 focus:ring-amber-500":"border-gray-600 focus:ring-blue-500"}`}),y&&l.jsx("div",{className:`text-xs mt-1 ${g?"text-red-400":"text-amber-400"}`,children:(x=g||m)==null?void 0:x.message})]})};return l.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg border border-gray-600",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"mr-3 bg-gray-800 p-2 rounded-full",children:""}),l.jsxs("div",{children:[l.jsx("h5",{className:"font-medium",children:e.playerName}),l.jsxs("p",{className:"text-xs text-gray-400",children:["Player ID: ",e.playerId]})]})]}),l.jsx("button",{onClick:()=>i(!a),className:"px-3 py-1 text-xs bg-gray-600 hover:bg-gray-500 rounded",children:a?"Hide Stats":"Show Stats"})]}),l.jsxs("div",{className:"mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hero"}),l.jsx(_$e,{selectedHeroId:e.heroId,onHeroChange:n,className:"w-full"}),o("hero")&&l.jsx("div",{className:"text-xs text-red-400 mt-1",children:(u=o("hero"))==null?void 0:u.message})]}),a&&l.jsxs("div",{className:"bg-gray-800/50 p-3 rounded",children:[l.jsx("h6",{className:"text-sm font-medium text-gray-300 mb-3",children:"Statistics (Optional)"}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[A("kills","Kills",e.kills),A("deaths","Deaths",e.deaths),A("assists","Assists",e.assists),A("goldEarned","Gold",e.goldEarned),A("minionKills","Minions",e.minionKills),A("level","Level",e.level)]})]})]})},B$e=({onBack:e})=>{const{playSound:n}=it(),{isViewMode:r,getAllMatches:s,getMatchPlayers:a,getPlayer:i}=XM(),[o,c]=S.useState([]),[A,u]=S.useState(!0),[h,d]=S.useState(""),[f,g]=S.useState("all"),[m,y]=S.useState("all"),[x,p]=S.useState("desc"),[v,b]=S.useState(!1),[w,_]=S.useState(null),[C,k]=S.useState(null),[j,B]=S.useState(!1),E=async()=>{u(!0);try{const $=await s();$.sort((le,re)=>{const V=new Date(le.date).getTime();return new Date(re.date).getTime()-V});const J=await Promise.all($.map(async le=>{const re=await a(le.id),V=await Promise.all(re.map(async z=>{const Z=await i(z.playerId);return{...z,playerName:(Z==null?void 0:Z.name)||"Unknown Player"}}));return{...le,players:V,expanded:!1}}));c(J)}catch($){console.error("Error loading match history:",$)}finally{u(!1)}};S.useEffect(()=>{E()},[s,a,i]);const P=()=>{n("buttonClick"),e()},I=$=>{n("buttonClick"),c(o.map(J=>J.id===$?{...J,expanded:!J.expanded}:J))},U=async $=>{if(w!==$){n("buttonClick"),_($);return}try{n("buttonClick"),await Pe.deleteMatch($),c(o.filter(J=>J.id!==$)),_(null)}catch(J){console.error("Error deleting match:",J)}},N=$=>{n("buttonClick"),k($),B(!0)},D=()=>{n("buttonClick"),B(!1),k(null)},T=async()=>{n("phaseChange"),B(!1),k(null);try{await E()}catch($){console.error("Error reloading matches after edit:",$)}},L=()=>{n("buttonClick"),p(x==="asc"?"desc":"asc")},Q=()=>{n("buttonClick"),b(!v)},M=()=>{n("buttonClick"),d(""),g("all"),y("all"),b(!1)},F=$=>new Date($).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),O=$=>$.players.some(J=>J.kills&&J.kills>0||J.deaths&&J.deaths>0||J.assists&&J.assists>0),X=$=>$.players.some(J=>J.goldEarned&&J.goldEarned>0),ae=o.filter($=>{if(f!=="all"&&$.winningTeam!==f||m!=="all"&&$.gameLength!==m)return!1;if(h){const J=h.toLowerCase();return $.players.some(le=>le.playerName.toLowerCase().includes(J)||le.heroName.toLowerCase().includes(J))}return!0}).sort(($,J)=>{const le=new Date($.date).getTime(),re=new Date(J.date).getTime();return x==="asc"?le-re:re-le});return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("button",{onClick:P,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Match History"})]}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:h,onChange:$=>d($.target.value),placeholder:"Search players or heroes...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx(Al,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("button",{onClick:L,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(Hr,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Date ",x==="asc"?"(Oldest)":"(Newest)"]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:Q,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(uo,{size:18,className:"mr-2"}),l.jsx("span",{children:"Filters"}),(f!=="all"||m!=="all")&&l.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(f!=="all"?1:0)+(m!=="all"?1:0)}),v?l.jsx(Nr,{size:16,className:"ml-2"}):l.jsx(Zn,{size:16,className:"ml-2"})]}),v&&l.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-64",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Winning Team"}),l.jsxs("select",{value:f,onChange:$=>g($.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Teams"}),l.jsx("option",{value:ne.Titans,children:"Titans"}),l.jsx("option",{value:ne.Atlanteans,children:"Atlanteans"})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Game Length"}),l.jsxs("select",{value:m,onChange:$=>y($.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Lengths"}),l.jsx("option",{value:at.Quick,children:"Quick"}),l.jsx("option",{value:at.Long,children:"Long"})]})]}),l.jsx("button",{onClick:M,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),A?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsx("div",{children:ae.length>0?l.jsx("div",{className:"space-y-4",children:ae.map($=>l.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md",children:[l.jsxs("div",{className:`px-5 py-4 ${$.winningTeam===ne.Titans?"bg-blue-900/50":"bg-red-900/50"} flex justify-between items-center cursor-pointer`,onClick:()=>I($.id),children:[l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(Ad,{size:18,className:"mr-2"}),l.jsx("span",{className:"font-bold",children:$.winningTeam===ne.Titans?"Titans Victory":"Atlanteans Victory"})]}),l.jsx("div",{className:"text-sm text-gray-300 mt-1",children:F($.date)})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"bg-gray-800 px-2 py-1 rounded",children:$.gameLength===at.Quick?"Quick":"Long"}),$.doubleLanes&&l.jsx("span",{className:"ml-2 bg-gray-800 px-2 py-1 rounded",children:"Double Lane"})]}),l.jsx("div",{children:$.expanded?l.jsx(Nr,{size:20}):l.jsx(Zn,{size:20})})]})]}),$.expanded&&l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-3 rounded-lg ${$.winningTeam===ne.Titans?"bg-blue-900/30 ring-2 ring-blue-500":"bg-blue-900/20"}`,children:[l.jsxs("h4",{className:"font-bold mb-2 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans Team",$.winningTeam===ne.Titans&&l.jsx("span",{className:"ml-2 text-xs bg-blue-600 px-2 py-0.5 rounded-full",children:"Winner"})]}),l.jsx("div",{className:"space-y-2",children:$.players.filter(J=>J.team===ne.Titans).map(J=>l.jsxs("div",{className:"flex justify-between items-center bg-blue-900/30 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"mr-2 bg-gray-800 p-1 rounded-full",children:l.jsx(jt,{size:16})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:J.playerName}),l.jsxs("div",{className:"text-xs text-gray-300",children:[J.heroName,"  ",J.heroRoles.join(", ")]})]})]}),(O($)||X($))&&l.jsxs("div",{className:"flex items-center space-x-2 text-xs bg-gray-800 px-2 py-1 rounded",children:[O($)&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(or,{size:12,className:"text-blue-400 mr-1"}),J.kills||0]}),l.jsx("span",{children:"/"}),l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(Ui,{size:12,className:"text-red-400 mr-1"}),J.deaths||0]}),l.jsx("span",{children:"/"}),l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(ht,{size:12,className:"text-green-400 mr-1"}),J.assists||0]})]}),X($)&&l.jsxs("div",{className:"flex items-center ml-2",title:"Gold",children:[l.jsx(Ps,{size:12,className:"text-yellow-400 mr-1"}),J.goldEarned||0]})]})]},J.id))})]}),l.jsxs("div",{className:`p-3 rounded-lg ${$.winningTeam===ne.Atlanteans?"bg-red-900/30 ring-2 ring-red-500":"bg-red-900/20"}`,children:[l.jsxs("h4",{className:"font-bold mb-2 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans Team",$.winningTeam===ne.Atlanteans&&l.jsx("span",{className:"ml-2 text-xs bg-red-600 px-2 py-0.5 rounded-full",children:"Winner"})]}),l.jsx("div",{className:"space-y-2",children:$.players.filter(J=>J.team===ne.Atlanteans).map(J=>l.jsxs("div",{className:"flex justify-between items-center bg-red-900/30 p-2 rounded",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"mr-2 bg-gray-800 p-1 rounded-full",children:l.jsx(jt,{size:16})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:J.playerName}),l.jsxs("div",{className:"text-xs text-gray-300",children:[J.heroName,"  ",J.heroRoles.join(", ")]})]})]}),(O($)||X($))&&l.jsxs("div",{className:"flex items-center space-x-2 text-xs bg-gray-800 px-2 py-1 rounded",children:[O($)&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsxs("span",{className:"flex items-center",title:"Kills",children:[l.jsx(or,{size:12,className:"text-blue-400 mr-1"}),J.kills||0]}),l.jsx("span",{children:"/"}),l.jsxs("span",{className:"flex items-center",title:"Deaths",children:[l.jsx(Ui,{size:12,className:"text-red-400 mr-1"}),J.deaths||0]}),l.jsx("span",{children:"/"}),l.jsxs("span",{className:"flex items-center",title:"Assists",children:[l.jsx(ht,{size:12,className:"text-green-400 mr-1"}),J.assists||0]})]}),X($)&&l.jsxs("div",{className:"flex items-center ml-2",title:"Gold",children:[l.jsx(Ps,{size:12,className:"text-yellow-400 mr-1"}),J.goldEarned||0]})]})]},J.id))})]})]}),!r&&l.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[l.jsx(qe,{text:"Edit this match data",children:l.jsxs("button",{onClick:J=>{J.stopPropagation(),N($.id)},className:"px-3 py-1 bg-blue-700 hover:bg-blue-600 rounded-lg flex items-center",children:[l.jsx(k$,{size:16,className:"mr-2"}),l.jsx("span",{children:"Edit Match"})]})}),l.jsx(qe,{text:"Delete this match and its data",children:l.jsxs("button",{onClick:J=>{J.stopPropagation(),U($.id)},className:`px-3 py-1 rounded-lg flex items-center ${w===$.id?"bg-red-500 hover:bg-red-400":"bg-red-700 hover:bg-red-600"}`,children:[l.jsx(jc,{size:16,className:"mr-2"}),l.jsx("span",{children:w===$.id?"Confirm Delete":"Delete Match"})]})})]})]})]},$.id))}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(Hr,{size:48,className:"text-gray-500 mb-4"}),l.jsx("p",{className:"text-xl text-gray-400",children:h||f!=="all"||m!=="all"?"No matches found matching your filters":"No match history available"}),(h||f!=="all"||m!=="all")&&l.jsx("button",{onClick:M,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Clear Filters"})]})}),j&&C&&l.jsx(C$e,{isOpen:j,matchId:C,onClose:D,onSaveComplete:T})]})},S$e=({probability:e,team1Name:n,team2Name:r})=>l.jsxs("div",{className:"space-y-6 bg-gray-800 p-8 rounded-lg text-white",children:[l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-between items-center mb-2 text-sm",children:l.jsx("span",{className:"text-gray-400",children:"Win Probability Scale"})}),l.jsxs("div",{className:"relative h-8 bg-gray-700 rounded-lg",children:[l.jsxs("div",{className:"absolute inset-0 flex justify-between items-center px-1 pointer-events-none",children:[l.jsx("span",{className:"text-xs text-gray-400",children:"0%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"20%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"40%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"60%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"80%"}),l.jsx("span",{className:"text-xs text-gray-400",children:"100%"})]}),[20,40,60,80].map(s=>l.jsx("div",{className:"absolute top-0 bottom-0 border-l border-gray-600/50",style:{left:`${s}%`}},s))]})]}),l.jsxs("div",{className:"mt-16",children:[l.jsx("div",{className:"flex items-center mb-3",children:l.jsx("span",{className:"text-blue-400 font-medium relative -top-4",children:n})}),l.jsxs("div",{className:"relative h-8 bg-gray-700 rounded-lg overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 bottom-0 bg-blue-500/30",style:{left:`${e.team1Lower}%`,width:`${e.team1Upper-e.team1Lower}%`}}),l.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 z-10",style:{left:`${e.team1Probability}%`},children:l.jsxs("div",{className:"relative",children:[l.jsxs("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-sm font-bold text-white whitespace-nowrap",children:[e.team1Probability,"% (",e.team1Lower,"-",e.team1Upper,"%)"]}),l.jsx("div",{className:"w-4 h-4 bg-blue-500 transform rotate-45 -translate-x-1/2"})]})})]})]}),l.jsxs("div",{className:"mt-16",children:[l.jsx("div",{className:"flex items-center mb-3",children:l.jsx("span",{className:"text-red-400 font-medium relative -top-4",children:r})}),l.jsxs("div",{className:"relative h-8 bg-gray-700 rounded-lg overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 bottom-0 bg-red-500/30",style:{left:`${e.team2Lower}%`,width:`${e.team2Upper-e.team2Lower}%`}}),l.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 z-10",style:{left:`${e.team2Probability}%`},children:l.jsxs("div",{className:"relative",children:[l.jsxs("span",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 text-sm font-bold text-white whitespace-nowrap",children:[e.team2Probability,"% (",e.team2Lower,"-",e.team2Upper,"%)"]}),l.jsx("div",{className:"w-4 h-4 bg-red-500 transform rotate-45 -translate-x-1/2"})]})})]})]})]}),k$e=({onBack:e,onUseTeams:n})=>{const{playSound:r}=it(),[s,a]=S.useState([]),[i,o]=S.useState([]),[c,A]=S.useState([]),[u,h]=S.useState([]),[d,f]=S.useState(!0),[g,m]=S.useState(!1),[y,x]=S.useState(!1),[p,v]=S.useState(null),[b,w]=S.useState(!1);S.useEffect(()=>{(async()=>{f(!0);try{const F=(await Pe.getAllPlayers()).filter(O=>O.totalGames>0);F.sort((O,X)=>O.name.localeCompare(X.name)),a(F)}catch(M){console.error("Error loading players:",M)}finally{f(!1)}})()},[]),S.useEffect(()=>{(async()=>{if(c.length>0&&u.length>0)try{const M=c.map(X=>X.id),F=u.map(X=>X.id),O=await Pe.calculateWinProbabilityWithCI(M,F);v(O)}catch(M){console.error("Error calculating win probability:",M),v(null)}else v(null)})()},[c,u]);const _=()=>{r("buttonClick"),e()},C=Q=>{r("buttonClick"),i.some(M=>M.id===Q.id)?(o(i.filter(M=>M.id!==Q.id)),y&&(A(c.filter(M=>M.id!==Q.id)),h(u.filter(M=>M.id!==Q.id)))):o([...i,Q])},k=(Q,M)=>{const F=Q.length;if(F<2)return{team1:[...Q],team2:[]};const O=[...Q].sort((Y,K)=>{const ue=M(K)-M(Y);return ue!==0?ue:Y.id.localeCompare(K.id)}),X=Math.ceil(F/2),ae=F-X,J=(Y=>{const K=[],ue=(be,H)=>{if(H.length===Y){K.push([...H]);return}for(let ee=be;ee<=F-(Y-H.length);ee++)H.push(ee),ue(ee+1,H),H.pop()};return ue(0,[]),K})(X);let le=[],re=1/0;for(const Y of J){let K=0,ue=0;const be=new Set(Y);for(let me=0;me<F;me++){const Ae=M(O[me]);be.has(me)?K+=Ae:ue+=Ae}const H=K/X,ee=ue/ae,Se=Math.abs(H-ee);Se<re&&(re=Se,le=Y)}const V=new Set(le),z=le.map(Y=>O[Y]),Z=O.filter((Y,K)=>!V.has(K));return{team1:z,team2:Z}},j=async()=>{if(!(i.length<4)){m(!0),r("phaseChange");try{const{team1:Q,team2:M}=k(i,F=>Pe.getDisplayRating(F));A(Q),h(M),w(!1)}catch(Q){console.error("Error balancing teams:",Q)}finally{m(!1)}}},B=async()=>{if(!(i.length<4)){m(!0),r("phaseChange");try{const{team1:Q,team2:M}=k(i,F=>F.totalGames);A(Q),h(M),w(!1)}catch(Q){console.error("Error balancing teams by experience:",Q)}finally{m(!1)}}},E=()=>{if(i.length<4)return;r("phaseChange");const Q=[...i];for(let F=Q.length-1;F>0;F--){const O=Math.floor(Math.random()*(F+1));[Q[F],Q[O]]=[Q[O],Q[F]]}const M=Math.ceil(Q.length/2);A(Q.slice(0,M)),h(Q.slice(M)),w(!1)},P=()=>{r("buttonClick"),A([]),h([]),w(!1)},I=()=>{r("buttonClick"),o([]),A([]),h([]),w(!1)},U=()=>{r("toggleSwitch"),y&&(A([]),h([]),w(!1)),x(!y)},N=()=>{r("buttonClick"),w(!b)},D=(Q,M)=>{y&&(r("buttonClick"),M===1?(h(u.filter(F=>F.id!==Q.id)),c.some(F=>F.id===Q.id)||A([...c,Q])):(A(c.filter(F=>F.id!==Q.id)),u.some(F=>F.id===Q.id)||h([...u,Q])),(c.length>0||M===1)&&(u.length>0||M===2)&&w(!1))},T=()=>{if(n&&c.length>0&&u.length>0){r("phaseChange");const Q=c.map(F=>F.id),M=u.map(F=>F.id);n(Q,M)}},L={ranking:"Find the optimal team assignment that minimizes the difference in average skill between teams. Equal team sizes guaranteed. Same players always produce the same teams.",experience:"Find the optimal team assignment that minimizes the difference in average experience (games played) between teams. Equal team sizes guaranteed. Same players always produce the same teams.",random:"Create random teams without consideration for player skill or experience. Each click generates a completely new random configuration.",manual:"Enable manual team assignment mode to create teams by hand. You can move players between teams freely to create custom matchups.",reset:"Reset both teams and start over. Player selection will be maintained but no players will be assigned to teams."};return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("button",{onClick:_,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Match Maker"})]}),d?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsxs("div",{children:[l.jsx("div",{className:"bg-gray-700/50 p-4 rounded-lg mb-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Gt,{size:20,className:"mr-3 text-blue-400 flex-shrink-0 mt-0.5"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold mb-1",children:"How Match Maker Works"}),l.jsx("p",{className:"text-sm text-gray-300",children:"Select players to include, then balance teams based on player skill or experience (games played)."})]})]})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h3",{className:"text-xl font-semibold",children:["Select Players (",i.length," selected)"]}),i.length>0&&l.jsx("button",{onClick:I,className:"px-3 py-1 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm",children:"Reset Selection"})]}),s.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:s.map(Q=>{const M=i.some(F=>F.id===Q.id);return l.jsxs("div",{className:`relative p-3 rounded-lg cursor-pointer transition-all ${M?"bg-blue-900/50 ring-2 ring-blue-500":"bg-gray-700 hover:bg-gray-600"}`,onClick:()=>C(Q),children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"font-medium mb-1 truncate w-full text-center",children:Q.name}),l.jsxs("div",{className:"text-sm mb-1",children:["(",Pe.getDisplayRating(Q),")"]}),l.jsxs("div",{className:"text-xs text-gray-400",children:["W: ",Q.wins," L: ",Q.losses]})]}),M&&l.jsx("div",{className:"absolute -top-2 -right-2 bg-blue-500 rounded-full p-1",children:l.jsx(Ka,{size:14,className:"transform rotate-45"})})]},Q.id)})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-center",children:[l.jsx(ht,{size:32,className:"text-gray-500 mb-2"}),l.jsx("p",{className:"text-gray-400",children:"No players available"})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"bg-gray-700/30 p-4 rounded-lg mx-auto max-w-2xl",children:[l.jsxs("div",{className:"flex items-center justify-center bg-gray-700/80 p-2 rounded-t-lg mb-3",children:[l.jsx(Ad,{size:18,className:"mr-2 text-blue-400"}),l.jsx("span",{className:"font-medium",children:"Balance Teams"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[l.jsx("div",{className:"hidden sm:block",children:l.jsx(qe,{text:L.ranking,maxWidth:"max-w-md",children:l.jsxs("button",{onClick:j,disabled:i.length<4||g||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${i.length<4||g||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-blue-600 hover:bg-blue-500"}`,children:[g?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):l.jsx(R0,{size:18,className:"mr-2"}),l.jsx("span",{children:"On Ranking"})]})})}),l.jsx("div",{className:"sm:hidden",children:l.jsxs("button",{onClick:j,disabled:i.length<4||g||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${i.length<4||g||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-blue-600 hover:bg-blue-500"}`,children:[g?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):l.jsx(R0,{size:18,className:"mr-2"}),l.jsx("span",{children:"On Ranking"})]})}),l.jsx("div",{className:"hidden sm:block",children:l.jsx(qe,{text:L.experience,maxWidth:"max-w-md",children:l.jsxs("button",{onClick:B,disabled:i.length<4||g||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${i.length<4||g||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-green-600 hover:bg-green-500"}`,children:[g?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):l.jsx($s,{size:18,className:"mr-2"}),l.jsx("span",{children:"On Experience"})]})})}),l.jsx("div",{className:"sm:hidden",children:l.jsxs("button",{onClick:B,disabled:i.length<4||g||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${i.length<4||g||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-green-600 hover:bg-green-500"}`,children:[g?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):l.jsx($s,{size:18,className:"mr-2"}),l.jsx("span",{children:"On Experience"})]})}),l.jsx("div",{className:"hidden sm:block",children:l.jsx(qe,{text:L.random,maxWidth:"max-w-md",children:l.jsxs("button",{onClick:E,disabled:i.length<4||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${i.length<4||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-purple-600 hover:bg-purple-500"}`,children:[l.jsx(wx,{size:18,className:"mr-2"}),l.jsx("span",{children:"Random"})]})})}),l.jsx("div",{className:"sm:hidden",children:l.jsxs("button",{onClick:E,disabled:i.length<4||y,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${i.length<4||y?"opacity-50 cursor-not-allowed bg-gray-600":"bg-purple-600 hover:bg-purple-500"}`,children:[l.jsx(wx,{size:18,className:"mr-2"}),l.jsx("span",{children:"Random"})]})})]})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[l.jsx("div",{className:"hidden sm:block",children:l.jsx(qe,{text:L.manual,maxWidth:"max-w-md",children:l.jsxs("button",{onClick:U,disabled:i.length<4,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${i.length<4?"opacity-50 cursor-not-allowed bg-gray-600":y?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 hover:bg-gray-600"}`,children:[l.jsx(ht,{size:18,className:"mr-2"}),l.jsx("span",{children:"Manual Mode"})]})})}),l.jsx("div",{className:"sm:hidden",children:l.jsxs("button",{onClick:U,disabled:i.length<4,className:`px-4 py-3 w-full rounded-lg flex items-center justify-center ${i.length<4?"opacity-50 cursor-not-allowed bg-gray-600":y?"bg-blue-600 hover:bg-blue-500":"bg-gray-700 hover:bg-gray-600"}`,children:[l.jsx(ht,{size:18,className:"mr-2"}),l.jsx("span",{children:"Manual Mode"})]})}),(c.length>0||u.length>0)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"hidden sm:block",children:l.jsx(qe,{text:L.reset,maxWidth:"max-w-md",children:l.jsxs("button",{onClick:P,className:"px-4 py-3 w-full bg-red-700 hover:bg-red-600 rounded-lg flex items-center justify-center",children:[l.jsx(zs,{size:18,className:"mr-2"}),l.jsx("span",{children:"Reset Teams"})]})})}),l.jsx("div",{className:"sm:hidden",children:l.jsxs("button",{onClick:P,className:"px-4 py-3 w-full bg-red-700 hover:bg-red-600 rounded-lg flex items-center justify-center",children:[l.jsx(zs,{size:18,className:"mr-2"}),l.jsx("span",{children:"Reset Teams"})]})})]})]})]}),(c.length>0||u.length>0)&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-blue-900/30 border border-blue-800 rounded-lg p-4",children:[l.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-blue-500"}),"Titans Team",c.length>0&&l.jsxs("span",{className:"ml-3 text-sm font-normal",children:["Avg Skill: ",Math.round(c.reduce((Q,M)=>Q+Pe.getDisplayRating(M),0)/c.length)]})]}),l.jsx("div",{className:"space-y-2",children:c.map(Q=>l.jsxs("div",{className:"bg-blue-900/50 rounded-lg p-3 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:Q.name}),l.jsxs("div",{className:"text-sm text-gray-300",children:["(",Pe.getDisplayRating(Q),")"]})]}),y&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"hidden sm:block",children:l.jsx(qe,{text:"Move to Atlanteans team",children:l.jsx("button",{onClick:()=>D(Q,2),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-red-400 hover:text-red-300","aria-label":"Move to Atlanteans",children:l.jsx(hB,{size:16})})})}),l.jsx("div",{className:"sm:hidden",children:l.jsx("button",{onClick:()=>D(Q,2),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-red-400 hover:text-red-300","aria-label":"Move to Atlanteans",children:l.jsx(hB,{size:16})})})]})]},Q.id))})]}),l.jsxs("div",{className:"bg-red-900/30 border border-red-800 rounded-lg p-4",children:[l.jsxs("h3",{className:"font-bold text-lg mb-3 flex items-center",children:[l.jsx("div",{className:"w-3 h-3 rounded-full mr-2 bg-red-500"}),"Atlanteans Team",u.length>0&&l.jsxs("span",{className:"ml-3 text-sm font-normal",children:["Avg Skill: ",Math.round(u.reduce((Q,M)=>Q+Pe.getDisplayRating(M),0)/u.length)]})]}),l.jsx("div",{className:"space-y-2",children:u.map(Q=>l.jsxs("div",{className:"bg-red-900/50 rounded-lg p-3 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:Q.name}),l.jsxs("div",{className:"text-sm text-gray-300",children:["(",Pe.getDisplayRating(Q),")"]})]}),y&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"hidden sm:block",children:l.jsx(qe,{text:"Move to Titans team",children:l.jsx("button",{onClick:()=>D(Q,1),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-blue-400 hover:text-blue-300","aria-label":"Move to Titans",children:l.jsx(yx,{size:16})})})}),l.jsx("div",{className:"sm:hidden",children:l.jsx("button",{onClick:()=>D(Q,1),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-blue-400 hover:text-blue-300","aria-label":"Move to Titans",children:l.jsx(yx,{size:16})})})]})]},Q.id))})]})]}),c.length>0&&u.length>0&&n&&l.jsx("div",{className:"mt-6 flex justify-center",children:l.jsxs("button",{onClick:T,className:"px-8 py-4 bg-green-600 hover:bg-green-500 rounded-lg flex items-center text-xl",children:[l.jsx(xb,{size:24,className:"mr-3"}),"Use These Teams in Game Setup"]})})]}),y&&i.length>0&&l.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg p-4",children:[l.jsx("h3",{className:"font-bold text-lg mb-3",children:"Unassigned Players"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:i.filter(Q=>!c.some(M=>M.id===Q.id)&&!u.some(M=>M.id===Q.id)).map(Q=>l.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"font-medium",children:Q.name}),l.jsxs("div",{className:"text-sm text-gray-300",children:["(",Pe.getDisplayRating(Q),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>D(Q,1),className:"px-2 py-1 bg-blue-700 hover:bg-blue-600 rounded-md text-xs",children:"Titans"}),l.jsx("button",{onClick:()=>D(Q,2),className:"px-2 py-1 bg-red-700 hover:bg-red-600 rounded-md text-xs",children:"Atlanteans"})]})]},Q.id))})]}),p!==null&&c.length>0&&u.length>0&&l.jsxs("div",{className:"mt-8 bg-gray-700 rounded-lg overflow-hidden",children:[l.jsxs("div",{className:"p-4 bg-gray-700 cursor-pointer flex justify-between items-center",onClick:N,children:[l.jsxs("h3",{className:"font-semibold flex items-center",children:[l.jsx(Ad,{size:16,className:"mr-2 text-yellow-400"}),"Predicted Win Probability"]}),b?l.jsx(Nr,{size:18}):l.jsx(Zn,{size:18})]}),b&&l.jsxs("div",{className:"p-6 pb-4 border-t border-gray-600",children:[l.jsx(S$e,{probability:p,team1Name:"Titans",team2Name:"Atlanteans"}),l.jsxs("div",{className:"mt-4 text-sm text-gray-300",children:[l.jsx("p",{className:"mb-2",children:"Prediction based on TrueSkill ratings. The diamond shows the point estimate, and the shaded region shows the 95% confidence interval."}),l.jsxs("p",{children:[l.jsx("strong",{children:"Wider bands"})," indicate less certainty (teams with newer players). ",l.jsx("strong",{children:"Narrow bands"})," indicate high confidence in the prediction."]})]})]})]}),y&&l.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:l.jsxs("p",{className:"flex items-start",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"Manual Mode allows you to assign players to teams directly. Use the arrow buttons to move players between teams or the team buttons for unassigned players."})]})})]})]})},rN=5*60*1e3;class j$e{constructor(){de(this,"cache",null)}isCacheValid(n,r){if(!this.cache)return!1;const a=Date.now()-this.cache.timestamp>rN,i=this.cache.minGamesHero===n&&this.cache.minGamesRelationship===r;return!a&&i}getCacheAge(){return this.cache?Math.floor((Date.now()-this.cache.timestamp)/1e3):null}isCached(){return this.cache!==null&&Date.now()-this.cache.timestamp<=rN}clearCache(){this.cache=null,console.log("[GlobalStatsService] Cache cleared")}transformRelationship(n){const r=qn.find(s=>s.id===n.related_hero_id);return{heroId:n.related_hero_id,heroName:n.related_hero_name,icon:(r==null?void 0:r.icon)||`heroes/${n.related_hero_name.toLowerCase().replace(/\s+/g,"")}.png`,winRate:n.win_rate,gamesPlayed:n.games_played}}transformHeroStats(n){const r=qn.find(s=>s.id===n.hero_id);return{heroId:n.hero_id,heroName:n.hero_name,icon:(r==null?void 0:r.icon)||`heroes/${n.hero_name.toLowerCase().replace(/\s+/g,"")}.png`,totalGames:n.total_games,wins:n.wins,losses:n.losses,winRate:n.win_rate,complexity:(r==null?void 0:r.complexity)||1,roles:(r==null?void 0:r.roles)||[],expansion:(r==null?void 0:r.expansion)||"Unknown",bestTeammates:(n.best_teammates||[]).map(s=>this.transformRelationship(s)),bestAgainst:(n.best_against||[]).map(s=>this.transformRelationship(s)),worstAgainst:(n.worst_against||[]).map(s=>this.transformRelationship(s))}}async getGlobalHeroStats(n=1,r=3,s=!1){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured. Please set up Supabase environment variables."};if(!s&&this.isCacheValid(n,r))return console.log("[GlobalStatsService] Returning cached data"),{success:!0,data:this.cache.data};try{console.log("[GlobalStatsService] Fetching global stats from Supabase...");const{data:a,error:i}=await ce.rpc("get_global_hero_stats_full",{min_games_hero:n,min_games_relationship:r});if(i)return console.error("[GlobalStatsService] RPC error:",i),{success:!1,error:`Failed to fetch global stats: ${i.message}`};if(!a||!Array.isArray(a))return console.log("[GlobalStatsService] No data returned or empty array"),{success:!0,data:[]};const o=a.map(c=>this.transformHeroStats(c));return this.cache={data:o,timestamp:Date.now(),minGamesHero:n,minGamesRelationship:r},console.log(`[GlobalStatsService] Fetched ${o.length} hero stats`),{success:!0,data:o}}catch(a){return console.error("[GlobalStatsService] Unexpected error:",a),{success:!1,error:a instanceof Error?a.message:"An unexpected error occurred"}}}async getGlobalMatchCount(){if(!Ze()||!ce)return{success:!1,error:"Cloud features not configured"};try{const{data:n,error:r}=await ce.from("global_hero_stats").select("total_games");if(r||!n)return{success:!0,count:0};const s=n.reduce((i,o)=>i+(o.total_games||0),0);return{success:!0,count:Math.round(s/10)}}catch{return{success:!0,count:0}}}async getGlobalHeroStatsOverTime(n,r=3,s,a){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured. Please set up Supabase environment variables."};try{console.log("[GlobalStatsService] Fetching global hero stats over time...");const i=s?s.toISOString().split("T")[0]:null,o=a?a.toISOString().split("T")[0]:null,{data:c,error:A}=await ce.rpc("get_global_hero_stats_over_time",{p_hero_ids:n&&n.length>0?n:null,p_min_games:r,p_start_date:i,p_end_date:o});if(A)return console.error("[GlobalStatsService] RPC error:",A),{success:!1,error:`Failed to fetch global hero stats over time: ${A.message}`};if(!c)return{success:!0,data:{heroes:[],dateRange:null}};const u=c,h=u.heroes.map(d=>{const f=qn.find(g=>g.id===d.heroId);return{...d,icon:(f==null?void 0:f.icon)||`heroes/${d.heroName.toLowerCase().replace(/\s+/g,"")}.png`}});return console.log(`[GlobalStatsService] Fetched ${h.length} heroes over time`),{success:!0,data:{heroes:h,dateRange:u.dateRange}}}catch(i){return console.error("[GlobalStatsService] Unexpected error:",i),{success:!1,error:i instanceof Error?i.message:"An unexpected error occurred"}}}async getHeroRelationshipNetwork(n,r=1){if(!Ze()||!ce)return{success:!1,error:"Cloud features are not configured. Please set up Supabase environment variables."};try{console.log("[GlobalStatsService] Fetching hero relationship network...");const{data:s,error:a}=await ce.from("global_hero_relationships").select("hero_id, related_hero_id, relationship_type, games_played, wins").in("hero_id",n).in("related_hero_id",n).gte("games_played",r);if(a)return console.error("[GlobalStatsService] Query error:",a),{success:!1,error:`Failed to fetch relationship data: ${a.message}`};if(!s||s.length===0)return{success:!0,data:[]};const i=new Map;for(const c of s){const A=`${c.hero_id}-${c.related_hero_id}`;i.has(A)||i.set(A,{heroId:c.hero_id,relatedHeroId:c.related_hero_id,teammateWins:0,teammateLosses:0,opponentWins:0,opponentLosses:0});const u=i.get(A);c.relationship_type==="teammate"?(u.teammateWins=c.wins,u.teammateLosses=c.games_played-c.wins):c.relationship_type==="opponent"&&(u.opponentWins=c.wins,u.opponentLosses=c.games_played-c.wins)}const o=Array.from(i.values());return console.log(`[GlobalStatsService] Fetched ${o.length} hero relationships`),{success:!0,data:o}}catch(s){return console.error("[GlobalStatsService] Unexpected error:",s),{success:!1,error:s instanceof Error?s.message:"An unexpected error occurred"}}}}const Qi=new j$e,N$e=({onBack:e,initialStatsMode:n="local"})=>{const{playSound:r}=it(),[s,a]=S.useState(!0),[i,o]=S.useState(null),[c,A]=S.useState(new Set),[u,h]=S.useState({}),[d,f]=S.useState(!1),[g,m]=S.useState(!1),[y,x]=S.useState(!1),[p,v]=S.useState(null),[b,w]=S.useState(n),[_,C]=S.useState(!1),[k,j]=S.useState(null),B=Ze(),[E,P]=S.useState(()=>{const V=localStorage.getItem("heroWinRateOverTime_minGames");return V?parseInt(V,10):3}),[I,U]=S.useState(()=>({start:localStorage.getItem("heroWinRateOverTime_startDate"),end:localStorage.getItem("heroWinRateOverTime_endDate")})),N=S.useRef(null);S.useEffect(()=>{const V=()=>x(window.innerWidth<768);return V(),window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]),S.useEffect(()=>{localStorage.setItem("heroWinRateOverTime_minGames",E.toString())},[E]),S.useEffect(()=>{(async()=>{if(b==="local"){a(!0);try{const z=I.start?new Date(I.start):void 0,Z=I.end?new Date(I.end+"T23:59:59"):void 0,Y=await Pe.getHeroWinRateOverTime(void 0,E,z,Z);if(o(Y),c.size===0&&Y.heroes.length>0){const be=Y.heroes.slice(0,5).map(H=>H.heroId);A(new Set(be))}const K=Q(Y.heroes.length),ue={};Y.heroes.forEach((be,H)=>{ue[be.heroId]=K[H]}),h(ue)}catch(z){console.error("Error loading hero win rate data:",z)}finally{a(!1)}}else{C(!0),j(null);try{const z=I.start?new Date(I.start):null,Z=I.end?new Date(I.end+"T23:59:59"):null,Y=await Qi.getGlobalHeroStatsOverTime(void 0,E,z,Z);if(Y.success&&Y.data){if(o(Y.data),c.size===0&&Y.data.heroes.length>0){const be=Y.data.heroes.slice(0,5).map(H=>H.heroId);A(new Set(be))}const K=Q(Y.data.heroes.length),ue={};Y.data.heroes.forEach((be,H)=>{ue[be.heroId]=K[H]}),h(ue)}else j(Y.error||"Failed to load global data")}catch(z){console.error("Error loading global hero win rate data:",z),j(z instanceof Error?z.message:"An unexpected error occurred")}finally{C(!1),a(!1)}}})()},[b,E,I.start,I.end]);const D=S.useCallback(()=>{r("buttonClick"),e()},[r,e]),T=S.useCallback((V,z)=>{r("buttonClick");const Z=z||null;U(Y=>({...Y,[V]:Z})),Z?localStorage.setItem(`heroWinRateOverTime_${V}Date`,Z):localStorage.removeItem(`heroWinRateOverTime_${V}Date`)},[r]),L=S.useCallback(()=>{r("buttonClick"),U({start:null,end:null}),localStorage.removeItem("heroWinRateOverTime_startDate"),localStorage.removeItem("heroWinRateOverTime_endDate")},[r]),Q=V=>{const z=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16","#06B6D4","#A855F7","#F43F5E","#0EA5E9","#22C55E"],Z=[];for(let Y=0;Y<V;Y++)Z.push(z[Y%z.length]);return Z},M=S.useCallback(V=>{r("buttonClick"),A(z=>{const Z=new Set(z);return Z.has(V)?Z.delete(V):Z.add(V),Z})},[r]),F=S.useCallback(()=>{r("buttonClick"),i&&A(new Set(i.heroes.map(V=>V.heroId)))},[r,i]),O=S.useCallback(()=>{r("buttonClick"),A(new Set)},[r]),X=async()=>{if(N.current){r("buttonClick"),f(!0);try{const V=document.createElement("div");V.className="screenshot-title text-center mb-6 bg-gray-800 p-6",V.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Hero Win Rate Over Time</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()} (${b==="global"?"Global Stats":"Play Group Stats"})</p>
      `,N.current.insertBefore(V,N.current.firstChild);const z=N.current.querySelectorAll(".no-screenshot");z.forEach(ue=>{ue.style.display="none"});const Y=(await kl(N.current,{backgroundColor:"#1F2937",scale:2,logging:!1,windowWidth:1400,windowHeight:N.current.scrollHeight})).toDataURL("image/png"),K=document.createElement("a");K.download=`hero-win-rate-over-time-${new Date().toISOString().slice(0,10)}.png`,K.href=Y,K.click(),N.current.removeChild(V),z.forEach(ue=>{ue.style.display=""})}catch(V){console.error("Error creating screenshot:",V)}finally{f(!1)}}},ae=()=>{r("buttonClick"),m(!g)},$=S.useCallback(V=>{const z=i==null?void 0:i.heroes.find(K=>K.heroId===V);if(!z||z.dataPoints.length===0)return{lineData:[],scatterData:[]};const Z=z.dataPoints.map(K=>({x:new Date(K.date).getTime(),y:K.winRate})),Y=z.dataPoints.map(K=>({x:new Date(K.date).getTime(),y:K.winRate,gamesOnDate:K.gamesPlayedOnDate}));return{lineData:Z,scatterData:Y}},[i]),J=S.useMemo(()=>{if(!i)return[0,100];let V=100,z=0;if(i.heroes.filter(Y=>c.has(Y.heroId)).forEach(Y=>{Y.dataPoints.forEach(K=>{V=Math.min(V,K.winRate),z=Math.max(z,K.winRate)})}),V===100&&z===0)return[0,100];const Z=10;return[Math.max(0,Math.floor(V/10)*10-Z),Math.min(100,Math.ceil(z/10)*10+Z)]},[i,c]),le=S.useMemo(()=>{if(!i)return[Date.now()-864e5*30,Date.now()];const V=[];if(i.heroes.filter(K=>c.has(K.heroId)).forEach(K=>{K.dataPoints.forEach(ue=>{V.push(new Date(ue.date).getTime())})}),V.length===0)return[Date.now()-864e5*30,Date.now()];const z=Math.min(...V),Z=Math.max(...V),Y=864e5;return[z-Y,Z+Y]},[i,c]),re=s||_;return l.jsxs("div",{ref:N,className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:D,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back"})]}),l.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Hero Win Rate Over Time"}),l.jsxs("button",{onClick:X,disabled:d,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg w-full sm:w-auto justify-center",children:[l.jsx(cl,{size:18,className:"mr-2"}),l.jsx("span",{children:d?"Capturing...":"Screenshot"})]})]}),B&&l.jsx("div",{className:"mb-4 no-screenshot",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsxs("button",{onClick:()=>{r("buttonClick"),w("local")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${b==="local"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(ht,{size:18,className:"mr-2"}),"Play Group"]}),l.jsxs("button",{onClick:()=>{r("buttonClick"),w("global")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${b==="global"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(zc,{size:18,className:"mr-2"}),"Global"]})]})}),b==="global"&&l.jsx("div",{className:"mb-4 p-3 bg-green-900/30 border border-green-700/50 rounded-lg no-screenshot",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(zc,{size:18,className:"mr-2 text-green-400 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-green-200",children:"Viewing global statistics from all players"})]})}),b==="global"&&k&&l.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-700/50 rounded-lg no-screenshot",children:l.jsx("p",{className:"text-sm text-red-200",children:k})}),re?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(At,{size:32,className:"animate-spin text-blue-400 mb-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading hero data..."})]})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 sm:hidden no-screenshot",children:l.jsxs("button",{onClick:ae,className:"w-full px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(uo,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Hero Selection (",c.size," selected)"]})]}),g?l.jsx(Nr,{size:18}):l.jsx(Zn,{size:18})]})}),l.jsxs("div",{className:`${y&&!g?"hidden":""} mb-6 space-y-4 no-screenshot`,children:[l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center mb-3",children:[l.jsx(Hr,{size:18,className:"mr-2 text-blue-400"}),l.jsx("span",{className:"font-medium",children:"Date Range"})]}),l.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"From:"}),l.jsx("input",{type:"date",value:I.start||"",onChange:V=>T("start",V.target.value),className:"px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-sm"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-gray-400",children:"To:"}),l.jsx("input",{type:"date",value:I.end||"",onChange:V=>T("end",V.target.value),className:"px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-sm"})]}),(I.start||I.end)&&l.jsx("button",{onClick:L,className:"px-3 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm",children:"Clear"})]})]}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Minimum Games"}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Heroes must have at least this many games to appear"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{r("buttonClick"),P(V=>Math.max(1,V-1))},disabled:E<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:""}),l.jsx("div",{className:"w-12 h-10 flex items-center justify-center bg-gray-800 border border-gray-600 rounded-lg font-medium",children:E}),l.jsx("button",{onClick:()=>{r("buttonClick"),P(V=>Math.min(50,V+1))},disabled:E>=50,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:"+"})]})]})}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"font-medium",children:"Hero Selection"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:F,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Select All"}),l.jsx("button",{onClick:O,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Clear"})]})]}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-2 max-h-64 overflow-y-auto",children:i==null?void 0:i.heroes.map(V=>l.jsx("button",{onClick:()=>M(V.heroId),className:`p-2 rounded-lg text-left transition-all ${c.has(V.heroId)?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("img",{src:V.icon,alt:V.heroName,className:"w-8 h-8 rounded-full object-cover",onError:z=>{z.target.src="https://via.placeholder.com/32?text=H"}}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("div",{className:"font-medium text-sm truncate",children:V.heroName}),l.jsxs("div",{className:"text-xs opacity-70",children:[V.totalGames,"g  ",V.currentWinRate.toFixed(0),"%"]})]})]})},V.heroId))})]})]}),c.size>0&&i&&i.heroes.some(V=>c.has(V.heroId))?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-2 sm:p-4",children:[l.jsx("div",{style:{width:"100%",height:y?400:500},children:l.jsxs(gh,{width:y?380:1e3,height:y?380:480,domain:{x:le,y:J},padding:{top:40,bottom:60,left:60,right:30},scale:{x:"time"},children:[l.jsx(pa,{label:"Date",tickFormat:V=>new Date(V).toLocaleDateString("en-US",{month:"short",day:"numeric"}),style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:y?12:14,padding:40},tickLabels:{fill:"#9CA3AF",fontSize:y?9:11,angle:-45,textAnchor:"end"},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(pa,{dependentAxis:!0,label:"Win Rate %",tickFormat:V=>`${V}%`,style:{axis:{stroke:"#6B7280"},axisLabel:{fill:"#9CA3AF",fontSize:y?12:14,padding:45},tickLabels:{fill:"#9CA3AF",fontSize:y?10:12},grid:{stroke:"#374151",strokeDasharray:"3,3"}}}),l.jsx(Ro,{data:[{x:le[0],y:50},{x:le[1],y:50}],style:{data:{stroke:"#6B7280",strokeWidth:1,strokeDasharray:"5,5"}}}),i.heroes.filter(V=>c.has(V.heroId)).map(V=>{const{lineData:z}=$(V.heroId),Z=u[V.heroId],Y=p===V.heroId,K=p!==null&&!Y;return l.jsx(Ro,{data:z,style:{data:{stroke:Z,strokeWidth:Y?4:2,strokeOpacity:K?.2:1,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(v(V.heroId),[]),onMouseLeave:()=>(v(null),[])}}]},`line-${V.heroId}`)}),i.heroes.filter(V=>c.has(V.heroId)).map(V=>{const{scatterData:z}=$(V.heroId),Z=u[V.heroId],Y=p===V.heroId,K=p!==null&&!Y;return l.jsx(mp,{data:z,size:Y?6:4,symbol:"circle",style:{data:{fill:Z,fillOpacity:K?.2:1,cursor:"pointer"}},events:[{target:"data",eventHandlers:{onMouseEnter:()=>(v(V.heroId),[]),onMouseLeave:()=>(v(null),[])}}]},`scatter-${V.heroId}`)})]})}),l.jsx("div",{className:"flex flex-wrap gap-3 mt-4 justify-center p-3 bg-gray-800 rounded-lg",children:i.heroes.filter(V=>c.has(V.heroId)).map(V=>l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer px-2 py-1 rounded hover:bg-gray-700",onMouseEnter:()=>v(V.heroId),onMouseLeave:()=>v(null),children:[l.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u[V.heroId]}}),l.jsx("img",{src:V.icon,alt:V.heroName,className:"w-5 h-5 rounded-full object-cover",onError:z=>{z.target.style.display="none"}}),l.jsx("span",{className:`text-sm ${p===V.heroId?"text-white font-bold":"text-gray-300"}`,children:V.heroName})]},V.heroId))})]}):l.jsxs("div",{className:"bg-gray-700 rounded-lg p-8 text-center",children:[l.jsx(Os,{size:48,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400",children:(i==null?void 0:i.heroes.length)===0?`No heroes found with at least ${E} games`:"Select heroes to view their win rate progression"})]}),l.jsx("div",{className:"mt-6 p-4 bg-gray-700/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Lines:"})," Show cumulative win rate from first match to last match for each hero. The line connects data points at each date where matches occurred."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Dots:"})," Mark dates where the hero was played. Multiple games on the same day are combined."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Legend:"})," Hover over a hero name to highlight their line."]}),l.jsxs("p",{children:[l.jsx("strong",{children:"50% Line:"})," Dashed line shows the 50% win rate baseline."]})]})]})})]})]})},Cv={teammate_won:"#3B82F6",teammate_lost:"#A855F7",opponent_won:"#22C55E",opponent_lost:"#EF4444"},sN={teammate_won:"Won together",teammate_lost:"Lost together",opponent_won:"Beat",opponent_lost:"Lost to"},E$e=({onBack:e,initialStatsMode:n="local"})=>{const{playSound:r}=it(),[s,a]=S.useState(!1),[i,o]=S.useState(new Set),[c,A]=S.useState({nodes:[],links:[]}),[u,h]=S.useState(!1),[d,f]=S.useState(!1),[g,m]=S.useState(!1),[y,x]=S.useState(null),[p,v]=S.useState(n),[b,w]=S.useState(!1),[_,C]=S.useState(null),k=Ze(),[j,B]=S.useState([]),[E,P]=S.useState(!0),[I,U]=S.useState({teammate_won:!0,teammate_lost:!0,opponent_won:!0,opponent_lost:!0}),[N,D]=S.useState({}),T=S.useRef(),L=S.useRef(null),Q=S.useRef(null),[M,F]=S.useState({width:800,height:600}),O=S.useRef(!1),X=S.useRef(new Map),ae=S.useRef(null),$=S.useRef(!1),J=S.useCallback(te=>{if(Q.current=te,te){const W=te.clientWidth||800;F({width:W,height:g?450:600})}},[g]);S.useEffect(()=>{const te=()=>m(window.innerWidth<768);return te(),window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]),S.useEffect(()=>{const te=()=>{if(Q.current){const xe=Q.current.getBoundingClientRect(),ve=Q.current.clientWidth||Math.floor(xe.width)||800,Ke=g?450:600;F(Xe=>Xe.width!==ve||Xe.height!==Ke?{width:ve,height:Ke}:Xe)}},W=[setTimeout(te,0),setTimeout(te,100),setTimeout(te,300)],se=new ResizeObserver(te);return Q.current&&se.observe(Q.current),window.addEventListener("resize",te),()=>{W.forEach(xe=>clearTimeout(xe)),se.disconnect(),window.removeEventListener("resize",te)}},[g,i.size]),S.useEffect(()=>{(async()=>{P(!0);try{const W=qn.map(ve=>ve.id);let se=new Set;if(p==="local")(await Pe.getHeroRelationshipNetwork(W,1)).forEach(Ke=>{se.add(Ke.heroId),se.add(Ke.relatedHeroId)});else{const ve=await Qi.getHeroRelationshipNetwork(W,1);ve.success&&ve.data&&ve.data.forEach(Ke=>{se.add(Ke.heroId),se.add(Ke.relatedHeroId)})}const xe=qn.filter(ve=>se.has(ve.id));B(xe)}catch(W){console.error("Error loading available heroes:",W),B(qn)}finally{P(!1)}})()},[p]),S.useEffect(()=>{(async()=>{const W={};for(const se of qn){const xe=new Image;xe.crossOrigin="anonymous",xe.src=se.icon,await new Promise(ve=>{xe.onload=()=>ve(),xe.onerror=()=>ve()}),W[String(se.id)]=xe}D(W)})()},[]),S.useEffect(()=>{if(T.current&&c.nodes.length>0){const te=T.current;te.d3Force("center",WM(M.width/2,M.height/2));const W=qM().strength(-300).distanceMax(300);te.d3Force("charge",W);const se=VM().radius(50).strength(1);te.d3Force("collision",se);const xe=te.d3Force("link");xe&&xe.distance(120).strength(.3);const ve=60,Ke=()=>{for(const Xe of c.nodes)if(Xe.x!==void 0&&Xe.y!==void 0){const dt=ve,oe=M.width-ve,he=ve,Ie=M.height-ve;Xe.x<dt?Xe.vx=(Xe.vx||0)+(dt-Xe.x)*.1:Xe.x>oe&&(Xe.vx=(Xe.vx||0)+(oe-Xe.x)*.1),Xe.y<he?Xe.vy=(Xe.vy||0)+(he-Xe.y)*.1:Xe.y>Ie&&(Xe.vy=(Xe.vy||0)+(Ie-Xe.y)*.1)}};if(te.d3Force("boundary",Ke),te.d3ReheatSimulation(),!O.current&&c.nodes.length>=2)O.current=!0,setTimeout(()=>{T.current&&(T.current.zoomToFit(400,80),setTimeout(()=>{if(T.current){const Xe=T.current.zoom(),dt=1.5;Xe>dt&&T.current.zoom(dt,300)}},450))},600);else if($.current&&ae.current){$.current=!1;const{x:Xe,y:dt,k:oe}=ae.current;setTimeout(()=>{T.current&&(T.current.centerAt(Xe,dt,0),T.current.zoom(oe,0))},50)}}},[c.nodes.length,M.width,M.height]),S.useEffect(()=>{(async()=>{if(i.size<2){A({nodes:[],links:[]});return}const W=Array.from(i);if(O.current&&X.current.size>0&&($.current=!0),p==="local"){a(!0);try{const se=await Pe.getHeroRelationshipNetwork(W,1),xe=le(W,se);A(xe)}catch(se){console.error("Error loading relationship data:",se)}finally{a(!1)}}else{w(!0),C(null);try{const se=await Qi.getHeroRelationshipNetwork(W,1);if(se.success&&se.data){const xe=le(W,se.data);A(xe)}else C(se.error||"Failed to load global data")}catch(se){console.error("Error loading global relationship data:",se),C(se instanceof Error?se.message:"An unexpected error occurred")}finally{w(!1)}}})()},[i,p]);const le=S.useCallback((te,W)=>{const se=X.current;let xe=M.width/2,ve=M.height/2;if(se.size>0){let Me=0,bt=0;se.forEach(Ye=>{Me+=Ye.x,bt+=Ye.y}),xe=Me/se.size,ve=bt/se.size}const Ke=te.length,Xe=Math.min(M.width,M.height)*.25,dt=se.size===0,oe=te.map((Me,bt)=>{const Ye=qn.find(Nn=>Nn.id===Me),_t=String(Me),ze=se.get(_t);let ln,cn;if(ze)ln=ze.x,cn=ze.y;else if(dt){const Nn=2*Math.PI*bt/Ke-Math.PI/2;ln=M.width/2+Xe*Math.cos(Nn),cn=M.height/2+Xe*Math.sin(Nn)}else{const Nn=Math.random()*2*Math.PI,Sa=50+Math.random()*50;ln=xe+Sa*Math.cos(Nn),cn=ve+Sa*Math.sin(Nn)}return{id:_t,heroId:Me,heroName:(Ye==null?void 0:Ye.name)||`Hero ${Me}`,icon:(Ye==null?void 0:Ye.icon)||"",totalGames:0,winRate:0,x:ln,y:cn}}),he=[],Ie=new Set;for(const Me of W){const bt=String(Me.heroId),Ye=String(Me.relatedHeroId),_t=[Me.heroId,Me.relatedHeroId].sort().join("-"),ze=Me.teammateWins+Me.teammateLosses,ln=Me.opponentWins+Me.opponentLosses;Me.teammateWins>0&&!Ie.has(`${_t}-won`)&&(Ie.add(`${_t}-won`),he.push({source:bt,target:Ye,type:"teammate_won",count:Me.teammateWins,percentage:ze>0?Me.teammateWins/ze:0,curvature:.15})),Me.teammateLosses>0&&!Ie.has(`${_t}-lost`)&&(Ie.add(`${_t}-lost`),he.push({source:bt,target:Ye,type:"teammate_lost",count:Me.teammateLosses,percentage:ze>0?Me.teammateLosses/ze:0,curvature:-.15})),Me.opponentWins>0&&he.push({source:bt,target:Ye,type:"opponent_won",count:Me.opponentWins,percentage:ln>0?Me.opponentWins/ln:0,curvature:.25}),Me.opponentLosses>0&&he.push({source:bt,target:Ye,type:"opponent_lost",count:Me.opponentLosses,percentage:ln>0?Me.opponentLosses/ln:0,curvature:-.25})}return{nodes:oe,links:he}},[M.width,M.height]),re=S.useCallback(te=>{if(!y)return!1;const W=typeof te.source=="object"?te.source.id:te.source,se=typeof te.target=="object"?te.target.id:te.target;return I[te.type]?te.type.startsWith("teammate")?W===y||se===y:W===y:!1},[y,I]),V=S.useMemo(()=>{if(!y)return null;const te=qn.find(W=>String(W.id)===y);return(te==null?void 0:te.name)||null},[y]),z=S.useCallback(()=>{r("buttonClick"),e()},[r,e]),Z=S.useCallback(te=>{r("buttonClick"),o(W=>{const se=new Set(W);return se.has(te)?se.delete(te):se.add(te),se})},[r]),Y=S.useCallback(()=>{r("buttonClick"),o(new Set(j.map(te=>te.id)))},[r,j]),K=S.useCallback(()=>{r("buttonClick"),o(new Set),O.current=!1,X.current.clear()},[r]),ue=S.useCallback(te=>{r("buttonClick"),U(W=>({...W,[te]:!W[te]}))},[r]),be=async()=>{if(L.current){r("buttonClick"),h(!0);try{const te=document.createElement("div");te.className="screenshot-title text-center mb-6 bg-gray-800 p-6",te.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Hero Relationship Network</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()} (${p==="global"?"Global Stats":"Play Group Stats"})</p>
      `,L.current.insertBefore(te,L.current.firstChild);const W=L.current.querySelectorAll(".no-screenshot");W.forEach(Ke=>{Ke.style.display="none"});const xe=(await kl(L.current,{backgroundColor:"#1F2937",scale:2,logging:!1,windowWidth:1400,windowHeight:L.current.scrollHeight})).toDataURL("image/png"),ve=document.createElement("a");ve.download=`hero-relationship-network-${new Date().toISOString().slice(0,10)}.png`,ve.href=xe,ve.click(),L.current.removeChild(te),W.forEach(Ke=>{Ke.style.display=""})}catch(te){console.error("Error creating screenshot:",te)}finally{h(!1)}}},H=()=>{r("buttonClick"),f(!d)},ee=S.useCallback((te,W,se)=>{const ve=N[te.id],Ke=y===te.id,Xe=y&&c.links.some(he=>{const Ie=typeof he.source=="object"?he.source.id:he.source,Me=typeof he.target=="object"?he.target.id:he.target;return re(he)&&(Ie===te.id||Me===te.id)}),dt=Ke||Xe;dt&&(W.beginPath(),W.arc(te.x||0,te.y||0,40/2+8,0,2*Math.PI),W.fillStyle=Ke?"rgba(96, 165, 250, 0.4)":"rgba(96, 165, 250, 0.2)",W.fill()),W.save(),W.beginPath(),W.arc(te.x||0,te.y||0,40/2,0,2*Math.PI),W.closePath(),W.fillStyle="#1F2937",W.fill(),W.clip(),ve&&ve.complete&&ve.naturalWidth>0?W.drawImage(ve,(te.x||0)-40/2,(te.y||0)-40/2,40,40):(W.fillStyle="#4B5563",W.fill(),W.fillStyle="#fff",W.font="bold 16px Sans-Serif",W.textAlign="center",W.textBaseline="middle",W.fillText(te.heroName.charAt(0),te.x||0,te.y||0)),W.restore(),W.beginPath(),W.arc(te.x||0,te.y||0,40/2,0,2*Math.PI),W.strokeStyle=dt?"#60A5FA":"#6B7280",W.lineWidth=dt?3:2,W.stroke();const oe=dt?13:11;W.font=`${dt?"bold ":""}${oe}px Sans-Serif`,W.textAlign="center",W.textBaseline="top",W.fillStyle=dt?"#fff":"#9CA3AF",W.fillText(te.heroName,te.x||0,(te.y||0)+40/2+5)},[N,y,c.links,re]),Se=S.useCallback((te,W,se)=>{se.beginPath(),se.arc(te.x||0,te.y||0,28,0,2*Math.PI),se.fillStyle=W,se.fill()},[]),me=S.useCallback(te=>re(te)?Cv[te.type]:"rgba(0,0,0,0)",[re]),Ae=S.useCallback(te=>{if(!re(te))return 0;const W=1;return W+(10-W)*te.percentage},[re]),Ne=S.useCallback(()=>0,[]),Ce=S.useCallback(()=>{},[]),et=S.useCallback(()=>{},[]),Be=S.useCallback(te=>{const W=(M.width/2-te.x)/te.k,se=(M.height/2-te.y)/te.k;ae.current={x:W,y:se,k:te.k}},[M.width,M.height]),Ee=S.useCallback(()=>{if(!T.current)return;const te=60;for(const W of c.nodes)if(W.x!==void 0&&W.y!==void 0){const se=te,xe=M.width-te,ve=te,Ke=M.height-te;W.x<se&&(W.x=se),W.x>xe&&(W.x=xe),W.y<ve&&(W.y=ve),W.y>Ke&&(W.y=Ke),X.current.set(W.id,{x:W.x,y:W.y})}},[c.nodes,M.width,M.height]),rt=s||b;return l.jsxs("div",{ref:L,className:"bg-gray-800 rounded-lg p-4 sm:p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:z,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back"})]}),l.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center",children:[l.jsx(Kc,{size:24,className:"mr-2"}),"Hero Relationship Network"]}),l.jsxs("button",{onClick:be,disabled:u,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg w-full sm:w-auto justify-center",children:[l.jsx(cl,{size:18,className:"mr-2"}),l.jsx("span",{children:u?"Capturing...":"Screenshot"})]})]}),k&&l.jsx("div",{className:"mb-4 no-screenshot",children:l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsxs("button",{onClick:()=>{r("buttonClick"),v("local")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${p==="local"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(ht,{size:18,className:"mr-2"}),"Play Group"]}),l.jsxs("button",{onClick:()=>{r("buttonClick"),v("global")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${p==="global"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(zc,{size:18,className:"mr-2"}),"Global"]})]})}),p==="global"&&l.jsx("div",{className:"mb-4 p-3 bg-green-900/30 border border-green-700/50 rounded-lg no-screenshot",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(zc,{size:18,className:"mr-2 text-green-400 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-green-200",children:"Viewing global statistics from all players"})]})}),p==="global"&&_&&l.jsx("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-700/50 rounded-lg no-screenshot",children:l.jsx("p",{className:"text-sm text-red-200",children:_})}),l.jsx("div",{className:"mb-4 sm:hidden no-screenshot",children:l.jsxs("button",{onClick:H,className:"w-full px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(uo,{size:18,className:"mr-2"}),l.jsxs("span",{children:["Settings (",i.size," heroes)"]})]}),d?l.jsx(Nr,{size:18}):l.jsx(Zn,{size:18})]})}),l.jsx("div",{className:`${g&&!d?"hidden":""} mb-4 no-screenshot`,children:l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"font-medium",children:"Select Heroes"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:Y,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"All"}),l.jsx("button",{onClick:K,className:"px-3 py-1 bg-gray-600 hover:bg-gray-500 rounded text-sm",children:"Clear"})]})]}),E?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx(At,{size:24,className:"animate-spin text-blue-400 mr-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading heroes..."})]}):j.length===0?l.jsx("div",{className:"text-center py-8 text-gray-400",children:"No heroes with recorded relationships found"}):l.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-10 xl:grid-cols-12 gap-2 mb-4",children:j.map(te=>l.jsxs("button",{onClick:()=>Z(te.id),className:`p-2 rounded-lg transition-all flex flex-col items-center ${i.has(te.id)?"bg-blue-600 hover:bg-blue-500 ring-2 ring-blue-400":"bg-gray-600 hover:bg-gray-500"}`,title:te.name,children:[l.jsx("img",{src:te.icon,alt:te.name,className:"w-10 h-10 rounded-full object-cover",onError:W=>{W.target.src="https://via.placeholder.com/40?text=H"}}),l.jsx("span",{className:"text-[10px] mt-1 truncate w-full text-center leading-tight",children:te.name})]},te.id))}),l.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(Cv).map(te=>l.jsxs("button",{onClick:()=>ue(te),className:`flex items-center px-2 py-1 rounded transition-colors text-xs ${I[te]?"bg-gray-600":"bg-gray-800 opacity-40"}`,title:sN[te],children:[l.jsx("div",{className:"w-3 h-3 rounded-sm mr-1.5",style:{backgroundColor:Cv[te]}}),l.jsx("span",{className:"hidden sm:inline",children:sN[te]})]},te))})]})}),rt?l.jsx("div",{className:"flex justify-center items-center h-96",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(At,{size:32,className:"animate-spin text-blue-400 mb-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading relationship data..."})]})}):i.size<2?l.jsxs("div",{className:"bg-gray-700 rounded-lg p-12 text-center",children:[l.jsx(Kc,{size:64,className:"mx-auto mb-4 text-gray-500"}),l.jsx("p",{className:"text-gray-400 text-lg",children:"Select at least 2 heroes to visualize their relationships"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-2 px-3 py-2 bg-gray-700/50 rounded-lg text-center",children:V?l.jsxs("span",{className:"text-white",children:[l.jsx("span",{className:"font-bold text-blue-400",children:V}),l.jsx("span",{className:"text-gray-300",children:"'s relationships:"}),l.jsx("span",{className:"ml-2 text-blue-400",children:" Won with"}),l.jsx("span",{className:"mx-1 text-purple-400",children:" Lost with"}),l.jsx("span",{className:"mx-1 text-green-400",children:" Beat"}),l.jsx("span",{className:"ml-1 text-red-400",children:" Lost to"})]}):l.jsx("span",{className:"text-gray-400",children:"Hover over a hero to see their relationships"})}),l.jsx("div",{ref:J,className:"bg-gray-900 rounded-lg overflow-hidden border border-gray-700 w-full",style:{height:g?450:600},children:l.jsx(Ip,{ref:T,graphData:c,width:M.width,height:M.height,backgroundColor:"#111827",nodeCanvasObject:ee,nodePointerAreaPaint:Se,linkColor:me,linkWidth:Ae,linkCurvature:te=>te.curvature,linkDirectionalArrowLength:Ne,linkDirectionalArrowRelPos:.85,linkDirectionalArrowColor:me,linkCanvasObjectMode:Ce,linkCanvasObject:et,onNodeHover:te=>x(te?te.id:null),onEngineTick:Ee,onZoom:Be,d3AlphaDecay:.02,d3VelocityDecay:.3,cooldownTime:3e3,warmupTicks:50,enableNodeDrag:!0,enableZoomInteraction:!0,enablePanInteraction:!0,minZoom:.5,maxZoom:3})})]}),i.size>=2&&!rt&&l.jsx("div",{className:"mt-4 p-4 bg-gray-700/50 rounded-lg",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400 mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm text-gray-300",children:[l.jsxs("p",{className:"mb-1",children:[l.jsx("strong",{children:"Hover"})," over any hero to reveal their relationships with other selected heroes."]}),l.jsxs("p",{className:"mb-1",children:[l.jsx("span",{className:"text-blue-400 font-medium",children:"Blue"})," = won together,",l.jsx("span",{className:"text-purple-400 font-medium ml-2",children:"Purple"})," = lost together,",l.jsx("span",{className:"text-green-400 font-medium ml-2",children:"Green"})," = beat opponent,",l.jsx("span",{className:"text-red-400 font-medium ml-2",children:"Red"})," = lost to opponent."]}),l.jsxs("p",{className:"text-gray-400",children:[l.jsx("strong",{children:"Edge thickness"})," = win/loss rate (thicker = higher % of games with that outcome)."]})]})]})})]})},T$e=({onBack:e})=>{const{playSound:n}=it(),[r,s]=S.useState([]),[a,i]=S.useState(!0),[o,c]=S.useState(""),[A,u]=S.useState("games"),[h,d]=S.useState("desc"),[f,g]=S.useState("all"),[m,y]=S.useState("all"),[x,p]=S.useState(!1),[v,b]=S.useState(!1),[w,_]=S.useState(()=>{const W=localStorage.getItem("heroStats_minGames");return W?parseInt(W,10):1}),[C,k]=S.useState(()=>{const W=localStorage.getItem("heroStats_recencyMonths");return W?parseInt(W,10):null}),[j,B]=S.useState("local"),[E,P]=S.useState([]),[I,U]=S.useState(!1),[N,D]=S.useState(null),[T,L]=S.useState(null),[Q,M]=S.useState(!1),[F,O]=S.useState(!1),X=Ze(),ae=S.useRef(null),[$,J]=S.useState(null),[le,re]=S.useState(!1),[V,z]=S.useState(void 0),Z=S.useMemo(()=>{if(C===null)return{startDate:void 0,endDate:void 0};const W=new Date,se=new Date;return se.setMonth(se.getMonth()-C),{startDate:se,endDate:W}},[C]),Y=S.useCallback(async(W=!1)=>{U(!0),D(null);try{const se=await Qi.getGlobalHeroStats(1,w,W);se.success&&se.data?(P(se.data),L(Qi.getCacheAge())):D(se.error||"Failed to load global statistics")}catch(se){console.error("Error loading global stats:",se),D(se instanceof Error?se.message:"An unexpected error occurred")}finally{U(!1)}},[w]);S.useEffect(()=>{j==="local"&&(async()=>{i(!0);try{const se=await Pe.getHeroStats(w,Z.startDate,Z.endDate);s(se)}catch(se){console.error("Error loading hero stats:",se)}finally{i(!1)}})()},[j,w,Z.startDate,Z.endDate]),S.useEffect(()=>{j==="global"&&E.length===0&&!I&&Y()},[j,E.length,I,Y]);const K=S.useRef(w);S.useEffect(()=>{j==="global"&&K.current!==w&&(Qi.clearCache(),Y(!0)),K.current=w},[j,w,Y]),S.useEffect(()=>{if(j==="global"){const W=setInterval(()=>{L(Qi.getCacheAge())},1e4);return()=>clearInterval(W)}},[j]),S.useEffect(()=>{localStorage.setItem("heroStats_minGames",w.toString())},[w]),S.useEffect(()=>{C===null?localStorage.removeItem("heroStats_recencyMonths"):localStorage.setItem("heroStats_recencyMonths",C.toString())},[C]);const ue=()=>{n("buttonClick"),e()},be=async()=>{if(ae.current){n("buttonClick"),b(!0);try{re(!1),ae.current.classList.add("taking-screenshot");const W=document.createElement("div");W.className="screenshot-title text-center mb-6",W.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Hero Statistics</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,ae.current.insertBefore(W,ae.current.firstChild);const se=document.createElement("div");se.className="screenshot-footer text-center mt-8 text-sm text-gray-400",se.innerHTML=`
        <p>Generated by Guards of Atlantis II Timer App on ${new Date().toLocaleString()}</p>
      `,ae.current.appendChild(se);const xe=ae.current.querySelectorAll(".no-screenshot");xe.forEach(dt=>{dt.style.display="none"});const Ke=(await kl(ae.current,{backgroundColor:"#1F2937",windowWidth:1400,scrollX:0,scrollY:0,scale:window.devicePixelRatio||1,logging:!1,allowTaint:!0,useCORS:!0,onclone:dt=>{const oe=dt.querySelector("#screenshotContent");oe&&(oe.scrollTop=0)}})).toDataURL("image/png"),Xe=document.createElement("a");Xe.download=`guards-of-atlantis-hero-stats-${new Date().toISOString().slice(0,10)}.png`,Xe.href=Ke,Xe.click(),ae.current.removeChild(W),ae.current.removeChild(se),ae.current.classList.remove("taking-screenshot"),xe.forEach(dt=>{dt.style.display=""})}catch(W){console.error("Error creating screenshot:",W)}finally{b(!1)}}},H=W=>{n("buttonClick"),W===A?d(h==="asc"?"desc":"asc"):(u(W),d("desc"))},ee=()=>{n("buttonClick"),p(!x)},Se=()=>{n("buttonClick"),c(""),g("all"),y("all"),_(1),k(null),p(!1)},me=(W,se)=>{const xe=se.currentTarget.getBoundingClientRect();z({x:xe.x,y:xe.y,width:xe.width,height:xe.height}),J(W),re(!0)},Ae=()=>{re(!1)},Ne=(W,se)=>{const xe=se.currentTarget.getBoundingClientRect();z({x:xe.x,y:xe.y,width:xe.width,height:xe.height}),($==null?void 0:$.id)===W.id&&le?re(!1):(J(W),re(!0))},Ce=S.useMemo(()=>j==="local"?r:E,[j,r,E]),et=G.useMemo(()=>{const W=new Set;return Ce.forEach(se=>{se.roles.forEach(xe=>W.add(xe))}),Array.from(W).sort()},[Ce]),Be=G.useMemo(()=>{const W=new Set;return Ce.forEach(se=>{W.add(se.expansion)}),Array.from(W).sort()},[Ce]),Ee=Ce.filter(W=>{if(o){const se=o.toLowerCase();return W.heroName.toLowerCase().includes(se)||W.roles.some(xe=>xe.toLowerCase().includes(se))}return!(f!=="all"&&W.expansion!==f||m!=="all"&&!W.roles.includes(m))}).sort((W,se)=>{let xe=0;switch(A){case"name":xe=W.heroName.localeCompare(se.heroName);break;case"games":xe=W.totalGames-se.totalGames;break;case"winRate":xe=W.winRate-se.winRate;break;case"complexity":xe=W.complexity-se.complexity;break;default:xe=0}return h==="asc"?xe:-xe}),rt=W=>qn.find(se=>se.id===W),te=W=>{const se=rt(W.heroId);return se?l.jsxs("div",{className:"flex flex-col items-center p-1 bg-gray-800 rounded-lg hover:bg-gray-700 cursor-pointer relative",onMouseEnter:xe=>me(se,xe),onMouseLeave:Ae,onClick:xe=>Ne(se,xe),children:[l.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden mb-1",children:l.jsx("img",{src:se.icon,alt:se.name,className:"w-full h-full object-cover",onError:xe=>{xe.target.src="https://via.placeholder.com/48?text=Hero"}})}),l.jsx("div",{className:"text-xs text-center truncate w-full",children:W.heroName}),l.jsxs("div",{className:"text-xs text-gray-400",children:[W.winRate.toFixed(0),"% (",W.gamesPlayed,")"]})]},W.heroId):null};return S.useEffect(()=>{const W=document.createElement("style");return W.type="text/css",W.innerHTML=`
      /* Styles applied during screenshot taking */
      .taking-screenshot {
        background-color: #1F2937 !important;
        padding: 2rem !important;
        width: 1400px !important; /* Increased width for more space */
        position: relative !important;
        overflow: visible !important;
      }
      
      .screenshot-title {
        color: white;
        margin-bottom: 2rem;
      }
      
      .screenshot-footer {
        color: #9CA3AF;
        margin-top: 2rem;
        border-top: 1px solid #4B5563;
        padding-top: 1rem;
      }
      
      /* Hide elements with no-screenshot class */
      .taking-screenshot .no-screenshot {
        display: none !important;
      }
      
      /* Make all hero cards look good in screenshot */
      .taking-screenshot .bg-gray-700 {
        background-color: rgba(55, 65, 81, 0.8) !important;
        padding: 1.5rem !important; /* More padding in cards */
      }
      
      .taking-screenshot .bg-gray-800 {
        background-color: rgba(31, 41, 55, 0.9) !important;
        padding: 1.25rem !important; /* More padding in card headers */
      }
      
      /* Adjust grid layout for screenshots */
      .taking-screenshot .grid {
        grid-template-columns: repeat(2, 1fr) !important; /* Force 2 columns for more space */
        gap: 2rem !important; /* Increase gap between cards */
      }
      
      /* Fix nested grids (like teammate grids) */
      .taking-screenshot .grid .grid {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 0.75rem !important;
      }
      
      /* Ensure text doesn't get cut off */
      .taking-screenshot .text-sm,
      .taking-screenshot .text-xs {
        overflow: visible !important;
        white-space: normal !important;
        line-height: 1.4 !important;
      }
      
      /* Fix for tooltip icons - ensure they're visible */
      .taking-screenshot .flex.items-center {
        display: flex !important;
        align-items: center !important;
        margin-bottom: 0.5rem !important;
      }
      
      .taking-screenshot .flex.items-center svg {
        margin-left: 0.5rem !important;
        visibility: visible !important;
        display: inline-block !important;
      }
      
      /* Make sure section headers have proper spacing */
      .taking-screenshot h4.font-semibold {
        display: inline-block !important;
        margin-right: 0.5rem !important;
      }
      
      /* Make sure progress bars show up correctly */
      .taking-screenshot .bg-red-600 {
        background-color: rgba(220, 38, 38, 0.9) !important;
      }
      
      .taking-screenshot .bg-green-500 {
        background-color: rgba(34, 197, 94, 0.9) !important;
      }
      
      /* Space out section titles */
      .taking-screenshot h4 {
        margin-top: 1rem !important;
        margin-bottom: 0.75rem !important;
      }
    `,document.head.appendChild(W),()=>{document.head.removeChild(W)}},[]),Q?l.jsx(N$e,{onBack:()=>M(!1),initialStatsMode:j}):F?l.jsx(E$e,{onBack:()=>O(!1),initialStatsMode:j}):l.jsxs("div",{ref:ae,id:"screenshotContent",className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 no-screenshot",children:[l.jsxs("button",{onClick:ue,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold text-center sm:text-left",children:"Hero Statistics"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[l.jsx(qe,{text:"View hero win rate progression over time",position:"left",children:l.jsxs("button",{onClick:()=>{n("buttonClick"),M(!0)},className:"flex items-center justify-center px-3 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg w-full sm:w-auto",children:[l.jsx(Os,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:"View Over Time"})]})}),l.jsx(qe,{text:"View hero relationships as a network graph",position:"left",children:l.jsxs("button",{onClick:()=>{n("buttonClick"),O(!0)},className:"flex items-center justify-center px-3 py-2 bg-teal-600 hover:bg-teal-500 rounded-lg w-full sm:w-auto",children:[l.jsx(Kc,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:"Relationships"})]})}),l.jsx(qe,{text:"Take a screenshot of all hero statistics",position:"left",children:l.jsxs("button",{onClick:be,className:"flex items-center justify-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg w-full sm:w-auto",disabled:v,children:[l.jsx(cl,{size:18,className:"mr-2"}),l.jsx("span",{className:"whitespace-nowrap",children:v?"Capturing...":"Share Stats"})]})})]})]}),X&&l.jsxs("div",{className:"mb-4 no-screenshot",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsxs("button",{onClick:()=>{n("buttonClick"),B("local")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${j==="local"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(ht,{size:18,className:"mr-2"}),"Play Group"]}),l.jsxs("button",{onClick:()=>{n("buttonClick"),B("global")},className:`flex items-center px-4 py-2 rounded-lg transition-colors ${j==="global"?"bg-green-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[l.jsx(zc,{size:18,className:"mr-2"}),"Global"]})]}),l.jsx("p",{className:"text-center text-xs text-gray-500 mt-2",children:j==="local"?"Showing statistics from your match history":"Showing aggregated statistics from all players"})]}),j==="global"&&l.jsxs("div",{className:"mb-4 p-3 bg-green-900/30 border border-green-700/50 rounded-lg no-screenshot",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(zc,{size:18,className:"mr-2 text-green-400 flex-shrink-0"}),l.jsxs("span",{className:"text-sm text-green-200",children:["Viewing global statistics from all players who have uploaded data via Cloud Sync",T!==null&&l.jsxs("span",{className:"ml-2 text-green-400/70",children:["(cached ",T<60?`${T}s`:`${Math.floor(T/60)}m`," ago)"]})]})]}),l.jsxs("button",{onClick:()=>{n("buttonClick"),Qi.clearCache(),Y(!0)},disabled:I,className:"flex items-center px-2 py-1 text-sm bg-green-700 hover:bg-green-600 rounded transition-colors disabled:opacity-50",title:"Refresh global data",children:[I?l.jsx(At,{size:14,className:"animate-spin"}):l.jsx(zs,{size:14}),l.jsx("span",{className:"ml-1",children:"Refresh"})]})]}),l.jsx("p",{className:"text-xs text-green-200/60 mt-2",children:"Global stats update hourly. Time period filter is not available. Data is not saved locally."})]}),j==="global"&&N&&l.jsxs("div",{className:"mb-4 p-3 bg-red-900/30 border border-red-700/50 rounded-lg no-screenshot",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx(la,{size:18,className:"mr-2 text-red-400 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-red-200",children:N})]}),l.jsx("button",{onClick:()=>{n("buttonClick"),Y(!0)},className:"mt-2 text-sm text-red-400 hover:text-red-300 underline",children:"Try again"})]}),j==="global"&&I&&E.length===0&&l.jsx("div",{className:"flex justify-center items-center h-32 no-screenshot",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(At,{size:32,className:"animate-spin text-green-400 mb-2"}),l.jsx("span",{className:"text-gray-400",children:"Loading global statistics..."})]})}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 no-screenshot",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:o,onChange:W=>c(W.target.value),placeholder:"Search heroes or roles...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx(Al,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:()=>H("games"),className:`px-3 py-1 rounded ${A==="games"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Games ",A==="games"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>H("winRate"),className:`px-3 py-1 rounded ${A==="winRate"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Win Rate ",A==="winRate"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>H("complexity"),className:`px-3 py-1 rounded ${A==="complexity"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Complexity ",A==="complexity"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>H("name"),className:`px-3 py-1 rounded ${A==="name"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Name ",A==="name"&&(h==="asc"?"":"")]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:ee,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(uo,{size:18,className:"mr-2"}),l.jsx("span",{children:"Filters"}),(f!=="all"||m!=="all"||w!==1||C!==null)&&l.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(f!=="all"?1:0)+(m!=="all"?1:0)+(w!==1?1:0)+(C!==null?1:0)}),x?l.jsx(Nr,{size:16,className:"ml-2"}):l.jsx(Zn,{size:16,className:"ml-2"})]}),x&&l.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-72",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),l.jsxs("div",{className:`mb-4 ${j==="global"?"opacity-50":""}`,children:[l.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:["Time Period",j==="global"&&l.jsx("span",{className:"ml-2 text-xs text-yellow-500",children:"(not available for global stats)"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:`flex items-center ${j==="global"?"cursor-not-allowed":"cursor-pointer"}`,children:[l.jsx("input",{type:"radio",name:"timePeriod",checked:C===null,onChange:()=>k(null),disabled:j==="global",className:"mr-2 accent-blue-500"}),l.jsx("span",{className:"text-sm",children:"All Time"})]}),l.jsxs("label",{className:`flex items-center ${j==="global"?"cursor-not-allowed":"cursor-pointer"}`,children:[l.jsx("input",{type:"radio",name:"timePeriod",checked:C!==null,onChange:()=>k(C||6),disabled:j==="global",className:"mr-2 accent-blue-500"}),l.jsx("span",{className:"text-sm mr-2",children:"Last"}),l.jsx("input",{type:"number",min:"1",max:"24",value:C||6,onChange:W=>{const se=parseInt(W.target.value,10);!isNaN(se)&&se>=1&&se<=24&&k(se)},disabled:C===null||j==="global",className:"w-16 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}),l.jsx("span",{className:"text-sm ml-2",children:"months"})]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Expansion"}),l.jsxs("select",{value:f,onChange:W=>g(W.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Expansions"}),Be.map(W=>l.jsx("option",{value:W,children:W},W))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Role"}),l.jsxs("select",{value:m,onChange:W=>y(W.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Roles"}),et.map(W=>l.jsx("option",{value:W,children:W},W))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Min games for relationships"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>_(W=>Math.max(1,W-1)),disabled:w<=1,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:""}),l.jsx("div",{className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-center font-medium",children:w}),l.jsx("button",{onClick:()=>_(W=>Math.min(20,W+1)),disabled:w>=20,className:"w-10 h-10 flex items-center justify-center bg-gray-600 hover:bg-gray-500 disabled:bg-gray-700 disabled:text-gray-500 rounded-lg text-xl font-bold",children:"+"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Only show teammate/opponent stats with at least this many shared games"})]}),l.jsx("button",{onClick:Se,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),(f!=="all"||m!=="all"||o!=="")&&l.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg screenshot-info",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Filtered View:"}),l.jsxs("ul",{className:"text-sm space-y-1",children:[f!=="all"&&l.jsxs("li",{children:["Expansion: ",f]}),m!=="all"&&l.jsxs("li",{children:["Role: ",m]}),o!==""&&l.jsxs("li",{children:['Search Term: "',o,'"']})]})]}),j==="local"&&C!==null&&Z.startDate&&Z.endDate&&l.jsxs("div",{className:"mb-4 p-3 bg-blue-900/30 border border-blue-700/50 rounded-lg flex items-center",children:[l.jsx(Hr,{size:18,className:"mr-2 text-blue-400 flex-shrink-0"}),l.jsxs("span",{className:"text-sm text-blue-200",children:["Showing stats from"," ",l.jsx("span",{className:"font-medium",children:Z.startDate.toLocaleDateString()})," ","to"," ",l.jsx("span",{className:"font-medium",children:Z.endDate.toLocaleDateString()})," ","(",C," month",C!==1?"s":"",")"]})]}),(j==="local"?a:I&&E.length===0)?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsx("div",{children:Ee.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Ee.map(W=>{const se=rt(W.heroId),xe=(se==null?void 0:se.icon)||W.icon||`heroes/${W.heroName.toLowerCase().replace(/\s+/g,"")}.png`;return l.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md",children:[l.jsxs("div",{className:"px-5 py-4 bg-gray-800 flex items-center cursor-pointer",onMouseEnter:ve=>me(rt(W.heroId),ve),onMouseLeave:Ae,onClick:ve=>Ne(rt(W.heroId),ve),children:[l.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-full overflow-hidden mr-4 flex-shrink-0",children:l.jsx("img",{src:xe,alt:W.heroName,className:"w-full h-full object-cover",onError:ve=>{ve.target.src="https://via.placeholder.com/64?text=Hero"}})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold",children:W.heroName}),l.jsx("div",{className:"text-sm text-gray-300",children:W.roles.join("  ")}),l.jsxs("div",{className:"text-xs text-blue-400 mt-1",children:[W.expansion,"  Complexity: ",W.complexity]})]})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("div",{className:"text-sm text-gray-400 flex items-center",children:[l.jsx("span",{children:"Win Rate"}),l.jsx(Gt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),l.jsxs("div",{className:"font-medium",children:[W.winRate.toFixed(1),"%"]})]}),l.jsx("div",{className:"h-2 bg-red-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-green-500",style:{width:`${W.winRate}%`}})}),l.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-400",children:[l.jsxs("span",{children:["Wins: ",W.wins]}),l.jsxs("span",{children:["Losses: ",W.losses]}),l.jsxs("span",{children:["Total: ",W.totalGames]})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("h4",{className:"font-semibold text-sm",children:"Best Teammates"}),l.jsx(Gt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),W.bestTeammates.length>0?l.jsx("div",{className:"grid grid-cols-3 gap-2",children:W.bestTeammates.map(ve=>te(ve))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No data available"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("h4",{className:"font-semibold text-sm",children:"Best Against"}),l.jsx(Gt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),W.bestAgainst.length>0?l.jsx("div",{className:"grid grid-cols-3 gap-2",children:W.bestAgainst.map(ve=>te(ve))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No data available"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("h4",{className:"font-semibold text-sm",children:"Countered By"}),l.jsx(Gt,{size:14,className:"ml-1 text-gray-500 cursor-help"})]}),W.worstAgainst.length>0?l.jsx("div",{className:"grid grid-cols-3 gap-2",children:W.worstAgainst.map(ve=>te(ve))}):l.jsx("div",{className:"text-sm text-gray-500 italic",children:"No data available"})]})]})]},W.heroId)})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(jt,{size:48,className:"text-gray-500 mb-4"}),l.jsx("p",{className:"text-xl text-gray-400",children:o||f!=="all"||m!=="all"?"No heroes found matching your filters":"No hero data available"}),(o||f!=="all"||m!=="all")&&l.jsx("button",{onClick:Se,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg no-screenshot",children:"Clear Filters"})]})}),$&&l.jsx(NT,{hero:$,isVisible:le,onClose:()=>re(!1),cardPosition:V}),l.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:[l.jsxs("h4",{className:"font-medium mb-2 flex items-center",children:[l.jsx(Gt,{size:16,className:"mr-2 text-blue-400"}),"About Hero Statistics"]}),j==="local"?l.jsx("p",{className:"mb-2",children:"These statistics show hero performance based on your match history. Win rates and synergies are calculated from your recorded matches, so they reflect your play group's style and may differ from global statistics."}):l.jsx("p",{className:"mb-2",children:"These are aggregated statistics from all players who have uploaded their matches to the cloud. Win rates and synergies reflect the global community's experience. This data is downloaded fresh each session and is not stored locally."})]})]})},F$e=({onBack:e})=>{const{playSound:n}=it(),[r,s]=S.useState(!1),[a,i]=S.useState(null),[o,c]=S.useState(null),[A,u]=S.useState(new Date().toISOString().split("T")[0]),[h,d]=S.useState(new Date().toTimeString().split(" ")[0].substring(0,5)),[f,g]=S.useState(at.Long),[m,y]=S.useState(!1),[x,p]=S.useState(ne.Titans),[v,b]=S.useState([]),[w,_]=S.useState(!1),[C,k]=S.useState(-1),[j,B]=S.useState(Hc()),[E,P]=S.useState(""),[I,U]=S.useState(4),[N,D]=S.useState("name"),[T,L]=S.useState("asc"),[Q,M]=S.useState({}),[F,O]=S.useState([]),[X,ae]=S.useState([]),[$,J]=S.useState(!1),[le,re]=S.useState(new Map),[V,z]=S.useState(new Map),[Z,Y]=S.useState({kills:!1,deaths:!1,assists:!1,goldEarned:!1,minionKills:!1,level:!1}),[K,ue]=S.useState([]);S.useEffect(()=>{(async()=>{try{const Ie=(await Pe.getAllPlayers()).map(Me=>Me.name);ue(Ie)}catch(he){console.error("Error loading player names:",he)}})(),v.length>0&&rt()},[]);const be=()=>{n("buttonClick"),e()},H=()=>{const oe={};return Z.kills&&(oe.kills=0),Z.deaths&&(oe.deaths=0),Z.assists&&(oe.assists=0),Z.goldEarned&&(oe.goldEarned=0),Z.minionKills&&(oe.minionKills=0),Z.level&&(oe.level=1),oe},ee=oe=>{n("buttonClick");const he={...Z,[oe]:!Z[oe]};if(Y(he),$){const Ie=new Map;v.forEach((Me,bt)=>{const Ye=le.get(bt)||{},_t={};he.kills&&(_t.kills=Ye.kills??0),he.deaths&&(_t.deaths=Ye.deaths??0),he.assists&&(_t.assists=Ye.assists??0),he.goldEarned&&(_t.goldEarned=Ye.goldEarned??0),he.minionKills&&(_t.minionKills=Ye.minionKills??0),he.level&&(_t.level=Ye.level??1),Ie.set(bt,_t)}),re(Ie),z(new Map)}},Se=()=>{if(n("buttonClick"),J(!$),!$){const oe=new Map;v.forEach((he,Ie)=>{oe.set(Ie,H())}),re(oe)}},me=(oe,he)=>{const Ie=[];return Z.kills&&he.kills!==void 0&&(he.kills<0||he.kills>50)&&Ie.push("Kills must be between 0 and 50"),Z.deaths&&he.deaths!==void 0&&(he.deaths<0||he.deaths>20)&&Ie.push("Deaths must be between 0 and 20"),Z.assists&&he.assists!==void 0&&(he.assists<0||he.assists>100)&&Ie.push("Assists must be between 0 and 100"),Z.goldEarned&&he.goldEarned!==void 0&&(he.goldEarned<0||he.goldEarned>1e4)&&Ie.push("Gold earned must be between 0 and 10,000"),Z.minionKills&&he.minionKills!==void 0&&(he.minionKills<0||he.minionKills>200)&&Ie.push("Minion kills must be between 0 and 200"),Z.level&&he.level!==void 0&&(he.level<1||he.level>8)&&Ie.push("Level must be between 1 and 8"),Ie},Ae=(oe,he)=>{const Ie=new Map(le);Ie.set(oe,he),re(Ie);const Me=me(oe,he),bt=new Map(V);Me.length>0?bt.set(oe,Me):bt.delete(oe),z(bt)},Ne=oe=>{n("buttonClick");const he=new Map(le);he.set(oe,H()),re(he);const Ie=new Map(V);Ie.delete(oe),z(Ie)},Ce=()=>{n("buttonClick");const oe=new Map;v.forEach((he,Ie)=>{oe.set(Ie,H())}),re(oe),z(new Map)},et=oe=>{if(v.length>=10){M({...Q,maxPlayers:"Maximum 10 players allowed"});return}n("buttonClick");const he={id:"",name:"",team:oe,heroId:null,heroName:"",heroRoles:[]},Ie=v.length;if(b([...v,he]),$){const Me=new Map(le);Me.set(Ie,H()),re(Me)}M({...Q,players:void 0,maxPlayers:void 0})},Be=oe=>{n("buttonClick");const he=[...v];if(he.splice(oe,1),b(he),$){const Ie=new Map,Me=new Map;he.forEach((bt,Ye)=>{const _t=Ye>=oe?Ye+1:Ye;le.has(_t)&&Ie.set(Ye,le.get(_t)),V.has(_t)&&Me.set(Ye,V.get(_t))}),re(Ie),z(Me)}rt(he)},Ee=(oe,he)=>{const Ie=[...v];Ie[oe].id=he,Ie[oe].name=he,b(Ie),rt(Ie)},rt=(oe=v)=>{const he=oe.map(ze=>ze.id.trim()).filter(ze=>ze!==""),Ie={},Me=[];he.forEach(ze=>{Ie[ze]=(Ie[ze]||0)+1,Ie[ze]>1&&!Me.includes(ze)&&Me.push(ze)}),O(Me);const bt=oe.map(ze=>ze.heroId).filter(ze=>ze!==null),Ye={},_t=[];bt.forEach(ze=>{Ye[ze]=(Ye[ze]||0)+1,Ye[ze]>1&&!_t.includes(ze)&&_t.push(ze)}),ae(_t)},te=oe=>{n("buttonClick"),k(oe),_(!0)},W=oe=>{if(n("heroSelect"),C===-1)return;const he=[...v];he[C].heroId=oe.id,he[C].heroName=oe.name,he[C].heroRoles=oe.roles,b(he),rt(he),_(!1),M({...Q,heroes:void 0,heroDuplicates:void 0})},se=oe=>{n("buttonClick"),j.includes(oe)?B(j.filter(he=>he!==oe)):B([...j,oe])},xe=oe=>{n("buttonClick"),N===oe?L(T==="asc"?"desc":"asc"):(D(oe),L("asc"))},ve=()=>{const oe={};A||(oe.date="Match date is required"),v.length<4&&(oe.players="At least 4 players are required (2 per team)"),v.length>10&&(oe.maxPlayers="Maximum 10 players allowed"),v.some(ze=>!ze.id.trim())&&(oe.players="All players must have names");const he=v.map(ze=>ze.id.trim());if(new Set(he).size!==he.length){const ze=he.filter((ln,cn)=>ln&&he.indexOf(ln)!==cn);oe.players=`Duplicate player names found: ${[...new Set(ze)].join(", ")}`}const Me=v.filter(ze=>ze.team===ne.Titans),bt=v.filter(ze=>ze.team===ne.Atlanteans);(Me.length<2||bt.length<2)&&(oe.teams="Each team must have at least 2 players"),Math.abs(Me.length-bt.length)>1&&(oe.teamBalance="Teams must be balanced (equal count or differ by at most 1 player)"),v.some(ze=>ze.heroId===null)&&(oe.heroes="All players must select a hero");const Ye=v.map(ze=>ze.heroId).filter(ze=>ze!==null);if(new Set(Ye).size!==Ye.length){const ze=Ye.filter((cn,Nn)=>cn!==null&&Ye.indexOf(cn)!==Nn),ln=v.filter(cn=>cn.heroId!==null&&ze.includes(cn.heroId)).map(cn=>cn.heroName).filter((cn,Nn,Sa)=>Sa.indexOf(cn)===Nn);oe.heroDuplicates=`Duplicate heroes selected: ${ln.join(", ")}`}if($){let ze=!1;const ln=new Map;v.forEach((cn,Nn)=>{const Sa=le.get(Nn);if(Sa){const wh=me(Nn,Sa);wh.length>0&&(ln.set(Nn,wh),ze=!0)}}),ze&&(oe.stats="Please fix player statistics errors before submitting",z(ln))}return M(oe),Object.keys(oe).length===0},Ke=async()=>{if(!ve()){n("buttonClick");return}s(!0),i(null),c(null);try{const oe={date:new Date(`${A}T${h||"00:00"}`),winningTeam:x,gameLength:f,doubleLanes:m},he=v.map((Ie,Me)=>{const bt={id:Ie.id,team:Ie.team,heroId:Ie.heroId,heroName:Ie.heroName,heroRoles:Ie.heroRoles};if($&&le.has(Me)){const Ye=le.get(Me);return{...bt,kills:Z.kills?Ye.kills:void 0,deaths:Z.deaths?Ye.deaths:void 0,assists:Z.assists?Ye.assists:void 0,goldEarned:Z.goldEarned?Ye.goldEarned:void 0,minionKills:Z.minionKills?Ye.minionKills:void 0,level:Z.level?Ye.level:void 0}}return{...bt,kills:void 0,deaths:void 0,assists:void 0,goldEarned:void 0,minionKills:void 0,level:void 0}});await Pe.recordMatch(oe,he),n("phaseChange"),i("Match successfully recorded!"),b([]),u(new Date().toISOString().split("T")[0]),d(new Date().toTimeString().split(" ")[0].substring(0,5))}catch(oe){console.error("Error recording match:",oe),c("Failed to record match. Please try again.")}finally{s(!1)}},dt=(()=>{let oe=yb(j).filter(he=>he.complexity<=I);if(E){const he=E.toLowerCase();oe=oe.filter(Ie=>Ie.name.toLowerCase().includes(he)||Ie.roles.some(Me=>Me.toLowerCase().includes(he)))}return oe.sort((he,Ie)=>{let Me=0;return N==="name"?Me=he.name.localeCompare(Ie.name):Me=he.complexity-Ie.complexity,T==="asc"?Me:-Me}),oe})();return l.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("button",{onClick:be,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Record Match"})]}),l.jsx("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx(el,{size:20,className:"text-blue-400 mr-3 mt-0.5 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-blue-300 mb-1",children:"Manual Match Recording"}),l.jsx("p",{className:"text-sm",children:"Use this form to record matches played outside the timer app. Note that matches played using the drafting system and timer are automatically recorded."})]})]})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(Hr,{size:18,className:"mr-2 text-blue-400"}),"Match Details"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Match Date"}),l.jsx("input",{type:"date",value:A,onChange:oe=>u(oe.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),Q.date&&l.jsx("div",{className:"text-red-400 text-sm mt-1",children:Q.date})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Match Time (optional)"}),l.jsx("input",{type:"time",value:h,onChange:oe=>d(oe.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Game Type"}),l.jsxs("div",{className:"flex gap-4",children:[l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gameLength",value:at.Quick,checked:f===at.Quick,onChange:()=>g(at.Quick),className:"form-radio h-5 w-5 text-blue-600"}),l.jsx("span",{className:"ml-2",children:"Quick"})]}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"radio",name:"gameLength",value:at.Long,checked:f===at.Long,onChange:()=>g(at.Long),className:"form-radio h-5 w-5 text-blue-600"}),l.jsx("span",{className:"ml-2",children:"Long"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm text-gray-300 mb-1",children:"Lane Configuration"}),l.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:m,onChange:()=>y(!m),className:"form-checkbox h-5 w-5 text-blue-600"}),l.jsx("span",{className:"ml-2",children:"Double Lanes (2 Lanes)"})]})]})]})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(ht,{size:18,className:"mr-2 text-blue-400"}),"Teams and Players"]}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[l.jsxs("button",{onClick:()=>et(ne.Titans),className:`flex-1 flex items-center justify-center ${v.length>=10?"bg-gray-700 cursor-not-allowed":"bg-blue-700 hover:bg-blue-600"} px-4 py-2 rounded-lg`,disabled:v.length>=10,children:[l.jsx(Ka,{size:18,className:"mr-2"}),l.jsx("span",{children:"Add Titan Player"})]}),l.jsxs("button",{onClick:()=>et(ne.Atlanteans),className:`flex-1 flex items-center justify-center ${v.length>=10?"bg-gray-700 cursor-not-allowed":"bg-red-700 hover:bg-red-600"} px-4 py-2 rounded-lg`,disabled:v.length>=10,children:[l.jsx(Ka,{size:18,className:"mr-2"}),l.jsx("span",{children:"Add Atlantean Player"})]})]}),v.length>0?l.jsx("div",{className:"space-y-2",children:v.map((oe,he)=>l.jsxs("div",{className:`p-3 rounded-lg ${oe.team===ne.Titans?"bg-blue-900/30":"bg-red-900/30"} flex flex-col sm:flex-row items-start sm:items-center gap-2`,children:[l.jsx("div",{className:"w-full sm:w-1/3",children:l.jsx(S3,{player:{id:he,team:oe.team,hero:null,name:oe.name},onNameChange:Ie=>Ee(he,Ie),onRemove:()=>Be(he),isDuplicate:F.includes(oe.name.trim())&&oe.name.trim()!=="",suggestedNames:K})}),l.jsx("div",{className:"flex-1 flex items-center",children:l.jsx("button",{onClick:()=>te(he),className:`flex-1 px-3 py-2 ${oe.heroId!==null?X.includes(oe.heroId)?"bg-amber-900/30 border border-amber-500":"bg-gray-700":"bg-gray-800 border border-dashed border-gray-600"} rounded-lg hover:bg-gray-600 transition-colors`,children:oe.heroId!==null?l.jsxs("div",{className:"flex items-center",children:[l.jsx(jt,{size:16,className:"mr-2"}),l.jsx("span",{children:oe.heroName})]}):l.jsx("span",{className:"text-gray-400",children:"Select Hero"})})})]},he))}):l.jsx("div",{className:"text-center p-4 border border-dashed border-gray-600 rounded-lg text-gray-400",children:"Add players to both teams using the buttons above"}),Q.players&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:Q.players}),Q.teams&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:Q.teams}),Q.teamBalance&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:Q.teamBalance}),Q.heroes&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:Q.heroes}),Q.heroDuplicates&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:Q.heroDuplicates}),Q.maxPlayers&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:Q.maxPlayers}),Q.stats&&l.jsx("div",{className:"text-red-400 text-sm mt-2",children:Q.stats}),v.length>0&&l.jsxs("div",{className:"mt-3 flex justify-between text-sm",children:[l.jsxs("div",{children:["Titans: ",v.filter(oe=>oe.team===ne.Titans).length," players",v.filter(oe=>oe.team===ne.Titans).length<2&&l.jsx("span",{className:"ml-2 text-amber-400",children:"Minimum 2 required"})]}),l.jsxs("div",{children:["Atlanteans: ",v.filter(oe=>oe.team===ne.Atlanteans).length," players",v.filter(oe=>oe.team===ne.Atlanteans).length<2&&l.jsx("span",{className:"ml-2 text-amber-400",children:"Minimum 2 required"})]})]}),v.length>0&&Math.abs(v.filter(oe=>oe.team===ne.Titans).length-v.filter(oe=>oe.team===ne.Atlanteans).length)>1&&l.jsx("div",{className:"mt-1 text-amber-400 text-sm text-center",children:"Teams are unbalanced! Teams should have equal player counts or differ by at most 1."}),v.length>10&&l.jsx("div",{className:"mt-1 text-red-400 text-sm text-center",children:"Too many players! Maximum 10 players allowed."})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(zf,{size:18,className:"mr-2 text-green-400"}),"Recording Mode"]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsx("button",{onClick:Se,className:`flex-1 p-4 rounded-lg border-2 transition-all ${$?"border-gray-600 bg-gray-800 hover:bg-gray-700":"border-blue-500 bg-blue-900/50"}`,children:l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-lg mb-1",children:"Basic Recording"}),l.jsx("div",{className:"text-sm text-gray-300",children:"Record match results with player names, heroes, and winner only"})]})}),l.jsx("button",{onClick:Se,className:`flex-1 p-4 rounded-lg border-2 transition-all ${$?"border-green-500 bg-green-900/50":"border-gray-600 bg-gray-800 hover:bg-gray-700"}`,children:l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"font-medium text-lg mb-1",children:"Detailed Recording"}),l.jsx("div",{className:"text-sm text-gray-300",children:"Record complete player statistics: kills, deaths, assists, gold, level"})]})})]}),$&&l.jsx("div",{className:"mt-3 p-3 bg-green-900/20 border border-green-500/30 rounded-lg",children:l.jsxs("p",{className:"text-sm text-green-200 flex items-center",children:[l.jsx(el,{size:16,className:"mr-2"}),"Detailed mode allows you to record comprehensive player statistics for more accurate match analysis."]})})]}),$&&l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(ht,{size:18,className:"mr-2 text-green-400"}),"Player Statistics"]}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-600",children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center",children:[l.jsx(Xn,{size:16,className:"mr-2"}),"Select Statistics to Track"]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:Z.kills,onChange:()=>ee("kills"),className:"form-checkbox h-4 w-4 text-red-600 bg-gray-800 border-gray-600 rounded focus:ring-red-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(b3,{size:14,className:"mr-1"}),"Kills"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:Z.deaths,onChange:()=>ee("deaths"),className:"form-checkbox h-4 w-4 text-red-600 bg-gray-800 border-gray-600 rounded focus:ring-red-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(vb,{size:14,className:"mr-1"}),"Deaths"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:Z.assists,onChange:()=>ee("assists"),className:"form-checkbox h-4 w-4 text-blue-600 bg-gray-800 border-gray-600 rounded focus:ring-blue-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(x3,{size:14,className:"mr-1"}),"Assists"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:Z.goldEarned,onChange:()=>ee("goldEarned"),className:"form-checkbox h-4 w-4 text-yellow-600 bg-gray-800 border-gray-600 rounded focus:ring-yellow-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(Ps,{size:14,className:"mr-1"}),"Gold"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:Z.minionKills,onChange:()=>ee("minionKills"),className:"form-checkbox h-4 w-4 text-green-600 bg-gray-800 border-gray-600 rounded focus:ring-green-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(D0,{size:14,className:"mr-1"}),"Minions"]})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-700/50 p-2 rounded",children:[l.jsx("input",{type:"checkbox",checked:Z.level,onChange:()=>ee("level"),className:"form-checkbox h-4 w-4 text-purple-600 bg-gray-800 border-gray-600 rounded focus:ring-purple-500"}),l.jsxs("span",{className:"text-sm flex items-center",children:[l.jsx(tl,{size:14,className:"mr-1"}),"Level"]})]})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-3",children:" Only checked statistics will be tracked."})]}),l.jsx(Q$e,{players:v,playerStats:le,statsErrors:V,enabledStats:Z,onStatsChange:Ae,onResetPlayerStats:Ne,onResetAllStats:Ce})]}),l.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[l.jsx(U$e,{size:18,className:"mr-2 text-yellow-400"}),"Match Winner"]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("button",{onClick:()=>p(ne.Titans),className:`p-4 rounded-lg border-2 ${x===ne.Titans?"border-blue-500 bg-blue-900/50":"border-gray-600 bg-gray-800 hover:bg-gray-700"} flex items-center`,children:[x===ne.Titans&&l.jsx(Xn,{size:18,className:"mr-2 text-blue-400"}),l.jsx("span",{className:"text-lg font-medium",children:"Titans Victory"})]}),l.jsxs("button",{onClick:()=>p(ne.Atlanteans),className:`p-4 rounded-lg border-2 ${x===ne.Atlanteans?"border-red-500 bg-red-900/50":"border-gray-600 bg-gray-800 hover:bg-gray-700"} flex items-center`,children:[x===ne.Atlanteans&&l.jsx(Xn,{size:18,className:"mr-2 text-red-400"}),l.jsx("span",{className:"text-lg font-medium",children:"Atlanteans Victory"})]})]})]}),l.jsx("div",{className:"flex justify-center mt-6",children:l.jsx("button",{onClick:Ke,disabled:r,className:`px-6 py-3 bg-green-600 hover:bg-green-500 rounded-lg flex items-center text-xl ${r?"opacity-70 cursor-not-allowed":""}`,children:r?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),l.jsx("span",{children:"Recording..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(w3,{size:20,className:"mr-3"}),l.jsx("span",{children:"Record Match"})]})})}),a&&l.jsx("div",{className:"mt-4 p-3 bg-green-900/50 border border-green-500 rounded-lg text-green-300 text-center",children:a}),o&&l.jsx("div",{className:"mt-4 p-3 bg-red-900/50 border border-red-500 rounded-lg text-red-300 text-center",children:o})]}),w&&l.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"p-4 bg-gray-700 flex justify-between items-center",children:[l.jsx("h3",{className:"text-xl font-bold",children:"Select Hero"}),l.jsx("button",{onClick:()=>_(!1),className:"p-1 bg-gray-600 hover:bg-gray-500 rounded-full",children:l.jsx(P$e,{size:20})})]}),l.jsxs("div",{className:"p-4 border-b border-gray-700",children:[l.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:E,onChange:oe=>P(oe.target.value),placeholder:"Search heroes or roles...",className:"w-full px-4 py-2 pl-10 bg-gray-700 border border-gray-600 rounded-lg"}),l.jsx(I$e,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm whitespace-nowrap",children:"Max Complexity:"}),l.jsxs("select",{value:I,onChange:oe=>U(Number(oe.target.value)),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"1",children:"1"}),l.jsx("option",{value:"2",children:"2"}),l.jsx("option",{value:"3",children:"3"}),l.jsx("option",{value:"4",children:"4"})]})]})]}),l.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Hc().map(oe=>l.jsx("button",{onClick:()=>se(oe),className:`px-3 py-1 text-sm rounded ${j.includes(oe)?"bg-blue-700 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:oe},oe))}),l.jsxs("div",{className:"mt-3 border-t border-gray-600 pt-3 flex items-center",children:[l.jsx("span",{className:"text-sm mr-2",children:"Sort by:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>xe("name"),className:`px-3 py-1 text-sm rounded flex items-center ${N==="name"?"bg-blue-700 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:[l.jsx("span",{children:"Name"}),N==="name"&&(T==="asc"?l.jsx(I0,{size:14,className:"ml-1"}):l.jsx(U0,{size:14,className:"ml-1"}))]}),l.jsxs("button",{onClick:()=>xe("complexity"),className:`px-3 py-1 text-sm rounded flex items-center ${N==="complexity"?"bg-blue-700 hover:bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:[l.jsx("span",{children:"Complexity"}),N==="complexity"&&(T==="asc"?l.jsx(I0,{size:14,className:"ml-1"}):l.jsx(U0,{size:14,className:"ml-1"}))]})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[dt.map(oe=>l.jsxs("div",{onClick:()=>W(oe),className:"bg-gray-700 hover:bg-gray-600 rounded-lg p-3 cursor-pointer transition-colors flex flex-col items-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-800 rounded-full overflow-hidden mb-2",children:l.jsx("img",{src:oe.icon,alt:oe.name,className:"w-full h-full object-cover",onError:he=>{he.target.src="https://via.placeholder.com/64?text=Hero"}})}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"font-medium",children:oe.name}),l.jsx("div",{className:"text-xs text-gray-400",children:oe.roles.join("  ")}),l.jsx("div",{className:"text-xs",children:[...Array(oe.complexity)].map((he,Ie)=>l.jsx("span",{className:"text-yellow-500",children:""},Ie))})]})]},oe.id)),dt.length===0&&l.jsx("div",{className:"col-span-full text-center p-8 text-gray-400",children:"No heroes match your search criteria. Try adjusting your filters."})]})})]})})]})},U$e=({size:e,className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6"}),l.jsx("path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18"}),l.jsx("path",{d:"M4 22h16"}),l.jsx("path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"}),l.jsx("path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"}),l.jsx("path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z"})]}),I$e=({size:e,className:n})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:n,children:[l.jsx("circle",{cx:"11",cy:"11",r:"8"}),l.jsx("path",{d:"m21 21-4.3-4.3"})]}),P$e=({size:e})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M18 6 6 18"}),l.jsx("path",{d:"m6 6 12 12"})]}),Q$e=({players:e,playerStats:n,statsErrors:r,enabledStats:s,onStatsChange:a,onResetPlayerStats:i,onResetAllStats:o})=>{const c=e.map((u,h)=>({player:u,index:h})).filter(({player:u})=>u.team===ne.Titans),A=e.map((u,h)=>({player:u,index:h})).filter(({player:u})=>u.team===ne.Atlanteans);return l.jsxs("div",{className:"space-y-6",children:[e.length>0&&o&&l.jsx("div",{className:"flex justify-end",children:l.jsxs("button",{type:"button",onClick:o,className:"px-4 py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg flex items-center text-sm transition-colors",children:[l.jsx(Fi,{size:16,className:"mr-2"}),"Reset All Stats"]})}),c.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"text-lg font-medium flex items-center text-blue-300",children:[l.jsx(jt,{size:18,className:"mr-2"}),"Titans (",c.length," players)"]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:c.map(({player:u,index:h})=>l.jsx(aN,{player:u,playerIndex:h,stats:n.get(h),errors:r.get(h),enabledStats:s,onStatsChange:d=>a(h,d),onResetStats:i},h))})]}),A.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("h4",{className:"text-lg font-medium flex items-center text-red-300",children:[l.jsx(jt,{size:18,className:"mr-2"}),"Atlanteans (",A.length," players)"]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:A.map(({player:u,index:h})=>l.jsx(aN,{player:u,playerIndex:h,stats:n.get(h),errors:r.get(h),enabledStats:s,onStatsChange:d=>a(h,d),onResetStats:i},h))})]}),e.length===0&&l.jsxs("div",{className:"text-center text-gray-400 py-8",children:[l.jsx(ht,{size:48,className:"mx-auto mb-3 opacity-50"}),l.jsx("p",{children:"Add players to both teams to enter statistics"})]})]})},aN=({player:e,playerIndex:n,onStatsChange:r,stats:s,errors:a=[],enabledStats:i,onResetStats:o})=>{const c=s||{},A=(g,m)=>{const y={...c,[g]:m};r(y)},u=Object.values(i).some(Boolean),h=Object.values(i).filter(Boolean).length,d=e.team===ne.Titans?"border-blue-500":"border-red-500",f=e.team===ne.Titans?"bg-blue-900/20":"bg-red-900/20";return l.jsxs("div",{className:`bg-gray-800 rounded-lg p-4 border-2 ${d} ${f}`,children:[l.jsxs("div",{className:"flex items-center mb-4 pb-3 border-b border-gray-600",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-medium text-lg",children:e.name||"Unnamed Player"}),l.jsxs("div",{className:"text-sm text-gray-300 flex items-center",children:[l.jsx(jt,{size:14,className:"mr-1"}),e.heroName||"No Hero Selected"]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[o&&l.jsxs("button",{type:"button",onClick:()=>o(n),className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded text-xs flex items-center transition-colors",title:"Reset this player's stats",children:[l.jsx(Fi,{size:12,className:"mr-1"}),"Reset"]}),a.length>0&&l.jsx("div",{className:"text-red-400 text-sm",title:a.join(", "),children:l.jsx(el,{size:16})})]})]}),u?l.jsxs("div",{className:`grid gap-4 ${h<=3?`grid-cols-${h}`:"grid-cols-3"}`,children:[i.kills&&l.jsx(Xl,{label:"Kills",value:c.kills??0,onChange:g=>A("kills",g),min:0,max:50,enabled:!0,icon:l.jsx(b3,{size:14})}),i.deaths&&l.jsx(Xl,{label:"Deaths",value:c.deaths??0,onChange:g=>A("deaths",g),min:0,max:20,enabled:!0,icon:l.jsx(vb,{size:14})}),i.assists&&l.jsx(Xl,{label:"Assists",value:c.assists??0,onChange:g=>A("assists",g),min:0,max:100,enabled:!0,icon:l.jsx(x3,{size:14})}),i.goldEarned&&l.jsx(Xl,{label:"Gold",value:c.goldEarned??0,onChange:g=>A("goldEarned",g),min:0,max:1e4,enabled:!0,icon:l.jsx(Ps,{size:14})}),i.minionKills&&l.jsx(Xl,{label:"Minions",value:c.minionKills??0,onChange:g=>A("minionKills",g),min:0,max:200,enabled:!0,icon:l.jsx(D0,{size:14})}),i.level&&l.jsx(Xl,{label:"Level",value:c.level??1,onChange:g=>A("level",g),min:1,max:8,enabled:!0,icon:l.jsx(tl,{size:14})})]}):l.jsxs("div",{className:"text-center p-6 border border-dashed border-gray-600 rounded-lg text-gray-400",children:[l.jsx("p",{className:"text-sm",children:"No statistics selected for tracking"}),l.jsx("p",{className:"text-xs mt-1",children:"Enable stat categories above to start recording"})]}),a.length>0&&l.jsx("div",{className:"mt-3 space-y-1",children:a.map((g,m)=>l.jsxs("div",{className:"text-red-400 text-xs flex items-center",children:[l.jsx(el,{size:12,className:"mr-1"}),g]},m))})]})},Xl=({label:e,value:n,onChange:r,min:s=0,max:a=999,disabled:i=!1,icon:o,enabled:c=!0})=>{const A=n??0,u=()=>{A<a&&r(A+1)},h=()=>{A>s&&r(A-1)},d=f=>{const g=parseInt(f.target.value)||0;g>=s&&g<=a&&r(g)};return c?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[o&&l.jsx("span",{className:"mr-1",children:o}),l.jsx("span",{children:e})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{type:"button",onClick:h,disabled:i||A<=s,className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:l.jsx(Fi,{size:14})}),l.jsx("input",{type:"number",value:A,onChange:d,disabled:i,min:s,max:a,className:"w-16 h-8 text-center bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white"}),l.jsx("button",{type:"button",onClick:u,disabled:i||A>=a,className:"w-8 h-8 rounded-full bg-gray-600 hover:bg-gray-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transition-colors",children:l.jsx(Ka,{size:14})})]})]}):l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o&&l.jsx("span",{className:"mr-1 opacity-50",children:o}),l.jsx("span",{children:e})]}),l.jsx("div",{className:"flex items-center justify-center w-16 h-8 bg-gray-800 border border-gray-600 rounded-lg text-gray-500 text-sm",children:"N/A"})]})},M$e=({onBack:e})=>{const{playSound:n}=it(),[r,s]=S.useState([]),[a,i]=S.useState(!0),[o,c]=S.useState(""),[A,u]=S.useState("name"),[h,d]=S.useState("asc"),[f,g]=S.useState("all"),[m,y]=S.useState("all"),[x,p]=S.useState("all"),[v,b]=S.useState(!1),[w,_]=S.useState(!1),C=G.useRef(null);S.useEffect(()=>{const T=document.createElement("style");return T.type="text/css",T.innerHTML=`
      /* Styles applied during screenshot taking */
      .taking-screenshot {
        background-color: #1F2937 !important;
        padding: 2rem !important;
        width: 1400px !important; /* Increased width for more space */
        position: relative !important;
        overflow: visible !important;
      }
      
      .screenshot-title {
        color: white;
        margin-bottom: 2rem;
      }
      
      .screenshot-footer {
        color: #9CA3AF;
        margin-top: 2rem;
        border-top: 1px solid #4B5563;
        padding-top: 1rem;
      }
      
      /* Hide elements with no-screenshot class */
      .taking-screenshot .no-screenshot {
        display: none !important;
      }
      
      /* Adjust card spacing and layout for screenshots */
      .taking-screenshot .grid {
        grid-template-columns: repeat(2, 1fr) !important; /* Force 2 columns for readability */
        gap: 2rem !important; /* Increase gap between cards */
      }
      
      .taking-screenshot .bg-gray-700 {
        padding: 1.5rem !important; /* More padding inside cards */
      }
      
      /* Fix stat bar display */
      .taking-screenshot .transform.skew-x-12 {
        height: 20px !important;
        width: 20px !important; 
      }
      
      /* Make text more readable */
      .taking-screenshot .text-sm {
        font-size: 14px !important;
        line-height: 1.5 !important;
      }
      
      .taking-screenshot .leading-relaxed {
        line-height: 1.7 !important;
      }
      
      /* Fix hero header display */
      .taking-screenshot .px-5.py-4.bg-gray-800 {
        padding: 1.25rem !important;
      }
      
      /* Enhance hero images */
      .taking-screenshot .rounded-full.overflow-hidden {
        border: 2px solid #4B5563 !important;
      }
      
      /* Make role explanations visible in screenshots */
      .taking-screenshot .bg-gray-700.rounded-lg.mb-4.overflow-hidden {
        margin-bottom: 2rem !important;
      }
      
      /* Make sure role explanation grid looks good */
      .taking-screenshot .grid.grid-cols-1.md\\:grid-cols-2.gap-4 {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 1rem !important;
      }
      
      /* Ensure role text is properly visible */
      .taking-screenshot .text-xs.text-gray-400 {
        font-size: 0.85rem !important;
        margin-top: 0.25rem !important;
        color: #9CA3AF !important;
      }
    `,document.head.appendChild(T),()=>{document.head.removeChild(T)}},[]),S.useEffect(()=>{i(!0);try{s(qn)}catch(T){console.error("Error loading heroes:",T)}finally{i(!1)}},[]);const k=()=>{n("buttonClick"),e()},j=async()=>{if(C.current){n("buttonClick"),_(!0);try{C.current.classList.add("taking-screenshot");const T=document.createElement("div");T.className="screenshot-title text-center mb-6",T.innerHTML=`
        <h1 class="text-3xl font-bold">Guards of Atlantis II - Hero Reference Guide</h1>
        <p class="text-gray-400 mt-2">Generated on ${new Date().toLocaleDateString()}</p>
      `,C.current.insertBefore(T,C.current.firstChild);const L=document.createElement("div");L.className="screenshot-footer text-center mt-8 text-sm text-gray-400",L.innerHTML=`
        <p>Generated by Guards of Atlantis II Timer App</p>
      `,C.current.appendChild(L);const Q=C.current.querySelectorAll(".no-screenshot");Q.forEach(X=>{X.style.display="none"});const F=(await kl(C.current,{backgroundColor:"#1F2937",windowWidth:1400,scrollX:0,scrollY:0,scale:window.devicePixelRatio||1,logging:!1,allowTaint:!0,useCORS:!0,onclone:X=>{const ae=X.querySelector("#screenshotContent");ae&&(ae.scrollTop=0)}})).toDataURL("image/png"),O=document.createElement("a");O.download=`guards-of-atlantis-hero-guide-${new Date().toISOString().slice(0,10)}.png`,O.href=F,O.click(),C.current.removeChild(T),C.current.removeChild(L),C.current.classList.remove("taking-screenshot"),Q.forEach(X=>{X.style.display=""})}catch(T){console.error("Error creating screenshot:",T)}finally{_(!1)}}},B=T=>{n("buttonClick"),T===A?d(h==="asc"?"desc":"asc"):(u(T),d(T==="name"?"asc":"desc"))},E=()=>{n("buttonClick"),b(!v)},P=()=>{n("buttonClick"),c(""),g("all"),y("all"),p("all"),b(!1)},I=G.useMemo(()=>{const T=new Set;return r.forEach(L=>{L.roles.forEach(Q=>T.add(Q)),L.additionalRoles&&L.additionalRoles.forEach(Q=>T.add(Q))}),Array.from(T).sort()},[r]),U=G.useMemo(()=>Hc(),[]),N=r.filter(T=>{if(o){const L=o.toLowerCase();return!!(T.name.toLowerCase().includes(L)||T.roles.some(Q=>Q.toLowerCase().includes(L))||T.additionalRoles&&T.additionalRoles.some(Q=>Q.toLowerCase().includes(L))||T.description&&T.description.toLowerCase().includes(L))}if(f!=="all"&&T.expansion!==f)return!1;if(m!=="all"){const L=T.roles.includes(m),Q=T.additionalRoles?T.additionalRoles.includes(m):!1;if(!L&&!Q)return!1}return!(x!=="all"&&T.complexity!==x)}).sort((T,L)=>{let Q=0;switch(A){case"name":Q=T.name.localeCompare(L.name);break;case"complexity":Q=T.complexity-L.complexity;break;case"attack":Q=(T.attack||0)-(L.attack||0);break;case"defence":Q=(T.defence||0)-(L.defence||0);break;case"initiative":Q=(T.initiative||0)-(L.initiative||0);break;case"movement":Q=(T.movement||0)-(L.movement||0);break;case"expansion":Q=(T.expansion||"").localeCompare(L.expansion||"");break;default:Q=0}return h==="asc"?Q:-Q}),D=(T,L=0,Q=0)=>l.jsxs("div",{className:"mb-2",children:[l.jsx("div",{className:"text-sm font-medium mb-1",children:T}),l.jsx("div",{className:"flex",children:Array.from({length:8}).map((M,F)=>l.jsx("div",{className:`h-5 w-5 transform skew-x-12 mr-0.5 flex-shrink-0 ${F<L?"bg-blue-600":F<Q?"bg-blue-200":"bg-gray-700"}`},F))})]});return l.jsxs("div",{ref:C,id:"screenshotContent",className:"bg-gray-800 rounded-lg p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 no-screenshot",children:[l.jsxs("button",{onClick:k,className:"flex items-center text-gray-300 hover:text-white",children:[l.jsx(pn,{size:20,className:"mr-1"}),l.jsx("span",{children:"Back to Menu"})]}),l.jsx("h2",{className:"text-2xl font-bold",children:"Hero Information"}),l.jsx(qe,{text:"Take a screenshot of all hero information",position:"left",children:l.jsxs("button",{onClick:j,className:"flex items-center px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",disabled:w,children:[l.jsx(cl,{size:18,className:"mr-2"}),l.jsx("span",{children:w?"Capturing...":"Share Guide"})]})})]}),l.jsx("div",{className:"mb-4 p-3 bg-gray-700/30 rounded-lg text-xs text-gray-400 border-t border-gray-600",children:l.jsxs("p",{className:"text-center leading-relaxed",children:["Many thanks to the various authors of Hero Guide's on BoardGameGeek who's work aided in the creation of this page, notably: ",l.jsx("span",{className:"text-gray-300",children:"Mad_Mike"})," and ",l.jsx("span",{className:"text-gray-300",children:"TheTomTraveller"}),", but also ",l.jsx("span",{className:"text-gray-300",children:"CCplusplus"}),", ",l.jsx("span",{className:"text-gray-300",children:"Eric_McClain"}),", ",l.jsx("span",{className:"text-gray-300",children:"Drakonis1"}),", ",l.jsx("span",{className:"text-gray-300",children:"bcsj"}),", ",l.jsx("span",{className:"text-gray-300",children:"Deiflex"}),", ",l.jsx("span",{className:"text-gray-300",children:"Ramsar"}),", ",l.jsx("span",{className:"text-gray-300",children:"GoatRogan"}),", and ",l.jsx("span",{className:"text-gray-300",children:"NullEnvoy"}),"."]})}),l.jsx("div",{className:"bg-gray-700 rounded-lg p-4 mb-6 no-screenshot",children:l.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-stretch",children:[l.jsxs("div",{className:"relative flex-grow",children:[l.jsx("input",{type:"text",value:o,onChange:T=>c(T.target.value),placeholder:"Search heroes, roles, or descriptions...",className:"w-full px-4 py-2 pl-10 bg-gray-800 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx(Al,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("button",{onClick:()=>B("name"),className:`px-3 py-1 rounded ${A==="name"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Name ",A==="name"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>B("complexity"),className:`px-3 py-1 rounded ${A==="complexity"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Complexity ",A==="complexity"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>B("attack"),className:`px-3 py-1 rounded ${A==="attack"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Attack ",A==="attack"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>B("initiative"),className:`px-3 py-1 rounded ${A==="initiative"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Initiative ",A==="initiative"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>B("defence"),className:`px-3 py-1 rounded ${A==="defence"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Defence ",A==="defence"&&(h==="asc"?"":"")]}),l.jsxs("button",{onClick:()=>B("movement"),className:`px-3 py-1 rounded ${A==="movement"?"bg-blue-600 hover:bg-blue-500":"bg-gray-600 hover:bg-gray-500"}`,children:["Movement ",A==="movement"&&(h==="asc"?"":"")]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:E,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg flex items-center",children:[l.jsx(uo,{size:18,className:"mr-2"}),l.jsx("span",{children:"Filters"}),(f!=="all"||m!=="all"||x!=="all")&&l.jsx("span",{className:"ml-2 bg-blue-600 text-xs rounded-full w-5 h-5 flex items-center justify-center",children:(f!=="all"?1:0)+(m!=="all"?1:0)+(x!=="all"?1:0)}),v?l.jsx(Nr,{size:16,className:"ml-2"}):l.jsx(Zn,{size:16,className:"ml-2"})]}),v&&l.jsxs("div",{className:"absolute right-0 top-full mt-1 z-10 bg-gray-800 border border-gray-600 rounded-lg shadow-lg p-4 w-72",children:[l.jsx("h4",{className:"font-medium mb-3",children:"Filter Options"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Expansion"}),l.jsxs("select",{value:f,onChange:T=>g(T.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Expansions"}),U.map(T=>l.jsx("option",{value:T,children:T},T))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Role"}),l.jsxs("select",{value:m,onChange:T=>y(T.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Roles"}),I.map(T=>l.jsx("option",{value:T,children:T},T))]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Complexity"}),l.jsxs("select",{value:x,onChange:T=>p(T.target.value==="all"?"all":parseInt(T.target.value)),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg",children:[l.jsx("option",{value:"all",children:"All Complexity"}),l.jsx("option",{value:"1",children:" (Beginner)"}),l.jsx("option",{value:"2",children:" (Intermediate)"}),l.jsx("option",{value:"3",children:" (Advanced)"}),l.jsx("option",{value:"4",children:" (Expert)"})]})]}),l.jsx("button",{onClick:P,className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg",children:"Reset Filters"})]})]})]})}),(f!=="all"||m!=="all"||x!=="all"||o!=="")&&l.jsxs("div",{className:"mb-4 p-4 bg-gray-700 rounded-lg screenshot-info",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Filtered View:"}),l.jsxs("ul",{className:"text-sm space-y-1",children:[f!=="all"&&l.jsxs("li",{children:["Expansion: ",f]}),m!=="all"&&l.jsxs("li",{children:["Role: ",m]}),x!=="all"&&l.jsxs("li",{children:["Complexity: ",x===1?"":x===2?"":x===3?"":""]}),o!==""&&l.jsxs("li",{children:['Search Term: "',o,'"']})]})]}),a?l.jsx("div",{className:"flex justify-center items-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):l.jsxs("div",{children:[l.jsx("div",{className:"mb-6",children:l.jsx(jT,{})}),N.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:N.map(T=>{const L=T.name||"Unknown Hero",Q=T.roles||[],M=T.additionalRoles||[],F=T.expansion||"Unknown",O=T.complexity||1,X=T.description||"This hero's abilities and playstyle are shrouded in mystery.";return l.jsxs("div",{className:"bg-gray-700 rounded-lg overflow-hidden shadow-md",children:[l.jsxs("div",{className:"px-5 py-4 bg-gray-800 flex items-center",children:[l.jsx("div",{className:"w-16 h-16 bg-gray-900 rounded-full overflow-hidden mr-4 flex-shrink-0",children:l.jsx("img",{src:T.icon,alt:L,className:"w-full h-full object-cover",onError:ae=>{ae.target.src="https://via.placeholder.com/64?text=Hero"}})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold",children:L}),l.jsx("div",{className:"text-sm text-gray-300",children:Q.join("  ")}),M.length>0&&l.jsx("div",{className:"text-xs text-gray-400 mt-1",children:M.join("  ")}),l.jsxs("div",{className:"text-xs mt-2 flex items-center",children:[l.jsxs("span",{className:"text-blue-400",children:["Expansion: ",F]}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"text-blue-400",children:"Complexity: "}),l.jsx("span",{className:"text-yellow-400 ml-1",children:[...Array(O)].map(ae=>"").join("")}),l.jsx("span",{className:"text-gray-600",children:[...Array(4-O)].map(ae=>"").join("")})]})]})]}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-4",children:[D("Attack",T.attack||0,T.attack_upgraded||T.attack||0),D("Initiative",T.initiative||0,T.initiative_upgraded||T.initiative||0),D("Defence",T.defence||0,T.defence_upgraded||T.defence||0),D("Movement",T.movement||0,T.movement_upgraded||T.movement||0)]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Description"}),l.jsx("p",{className:"text-sm leading-relaxed",children:X})]})]})]},T.id)})}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[l.jsx(jt,{size:48,className:"text-gray-500 mb-4"}),l.jsx("p",{className:"text-xl text-gray-400",children:o||f!=="all"||m!=="all"||x!=="all"?"No heroes found matching your filters":"No hero data available"}),(o||f!=="all"||m!=="all"||x!=="all")&&l.jsx("button",{onClick:P,className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg no-screenshot",children:"Clear Filters"})]})]}),l.jsxs("div",{className:"mt-8 p-4 bg-gray-700/50 rounded-lg text-sm text-gray-300",children:[l.jsx("h4",{className:"font-bold mb-2",children:"How to Read the Stats"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Attack:"})," Higher values mean the hero deals more damage and has stronger offensive abilities."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Initiative:"})," Determines when a hero acts in combat. Higher values let heroes move earlier."]})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Defence:"})," Higher values give the hero better survivability and ability to withstand attacks."]}),l.jsxs("p",{className:"mb-2",children:[l.jsx("strong",{children:"Movement:"})," Determines how far a hero can travel each turn. Higher values give more mobility."]})]})]}),l.jsxs("p",{className:"mt-2",children:[l.jsx("strong",{children:"Upgrade Potential:"})," Light blue segments show stats that can be improved through upgrades."]})]})]})},D$e=(e,n,r)=>n>=7||n===6&&r&&e===at.Long?{top:{currentWave:1,totalWaves:7},bottom:{currentWave:1,totalWaves:7},hasMultipleLanes:!0}:{single:{currentWave:1,totalWaves:e===at.Quick?3:5},hasMultipleLanes:!1},R$e=(e,n,r)=>e===at.Quick?n<=5?4:5:n===6&&!r?8:n<=5||n===6&&r||n<=8?6:7,iN=e=>{const n=[],r=e%2===1?e+1:e;return n.push({team:"A",action:"ban",round:1}),n.push({team:"B",action:"ban",round:1}),n.push({team:"A",action:"pick",round:1}),n.push({team:"B",action:"pick",round:1}),n.push({team:"B",action:"ban",round:2}),n.push({team:"A",action:"ban",round:2}),n.push({team:"B",action:"pick",round:2}),n.push({team:"A",action:"pick",round:2}),r>=6&&(n.push({team:"A",action:"ban",round:3}),n.push({team:"B",action:"ban",round:3}),n.push({team:"B",action:"pick",round:3}),n.push({team:"A",action:"pick",round:3})),r>=8&&(n.push({team:"B",action:"ban",round:4}),n.push({team:"A",action:"ban",round:4}),n.push({team:"A",action:"pick",round:4}),n.push({team:"B",action:"pick",round:4})),r>=10&&(n.push({team:"B",action:"ban",round:5}),n.push({team:"A",action:"ban",round:5}),n.push({team:"B",action:"pick",round:5}),n.push({team:"A",action:"pick",round:5})),n},JM=()=>({round:1,turn:1,gameLength:at.Quick,waves:{[We.Single]:{currentWave:1,totalWaves:3}},teamLives:{[ne.Titans]:4,[ne.Atlanteans]:4},currentPhase:"setup",activeHeroIndex:-1,coinSide:Math.random()>.5?ne.Titans:ne.Atlanteans,hasMultipleLanes:!1,completedTurns:[],allPlayersMoved:!1}),$$e=(e,n)=>{switch(n.type){case"START_GAME":return n.payload;case"START_STRATEGY":return{...e,currentPhase:"strategy",activeHeroIndex:-1};case"END_STRATEGY":return{...e,currentPhase:"move",activeHeroIndex:-1,completedTurns:[]};case"SELECT_PLAYER":return e.completedTurns.includes(n.playerIndex)?e:{...e,activeHeroIndex:n.playerIndex};case"MARK_PLAYER_COMPLETE":{const r=[...e.completedTurns,n.playerIndex];return r.length===sc.length?{...e,completedTurns:r,activeHeroIndex:-1,currentPhase:"turn-end",allPlayersMoved:!0}:{...e,completedTurns:r,activeHeroIndex:-1}}case"START_NEXT_TURN":{const r=e.turn+1;return r>4?{...e,round:e.round+1,turn:1,currentPhase:"strategy",completedTurns:[],allPlayersMoved:!1}:{...e,turn:r,currentPhase:"strategy",completedTurns:[],allPlayersMoved:!1}}case"ADJUST_TEAM_LIFE":return{...e,teamLives:{...e.teamLives,[n.team]:Math.max(0,e.teamLives[n.team]+n.delta)}};case"INCREMENT_WAVE":{if(n.lane===We.Single&&!e.hasMultipleLanes){const r=e.waves[We.Single];if(r)return{...e,waves:{...e.waves,[We.Single]:{...r,currentWave:Math.min(r.currentWave+1,r.totalWaves)}}}}else if(e.hasMultipleLanes&&(n.lane===We.Top||n.lane===We.Bottom)){const r=e.waves[n.lane];if(r)return{...e,waves:{...e.waves,[n.lane]:{...r,currentWave:Math.min(r.currentWave+1,r.totalWaves)}}}}return e}case"DECREMENT_WAVE":{if(n.lane===We.Single&&!e.hasMultipleLanes){const r=e.waves[We.Single];if(r)return{...e,waves:{...e.waves,[We.Single]:{...r,currentWave:Math.max(1,r.currentWave-1)}}}}else if(e.hasMultipleLanes&&(n.lane===We.Top||n.lane===We.Bottom)){const r=e.waves[n.lane];if(r)return{...e,waves:{...e.waves,[n.lane]:{...r,currentWave:Math.max(1,r.currentWave-1)}}}}return e}case"ADJUST_ROUND":{const r=Math.max(1,e.round+n.delta);return{...e,round:r}}case"ADJUST_TURN":{const r=Math.max(1,Math.min(4,e.turn+n.delta));return{...e,turn:r}}case"DECLARE_VICTORY":return{...e,currentPhase:"victory",victorTeam:n.team};case"RESET_GAME":return JM();case"FLIP_COIN":return{...e,coinSide:e.coinSide===ne.Titans?ne.Atlanteans:ne.Titans};default:return e}};let sc=[];function O$e(){const{playSound:e,unlockAudio:n,isAudioReady:r}=it(),{isViewMode:s,isLoading:a,error:i}=s_(),[o,c]=S.useState(!1),[A,u]=S.useState(90),[h,d]=S.useState(30),[f,g]=S.useState(!0),[m,y]=S.useState(!0),[x,p]=S.useState(at.Quick),[v,b]=S.useState(!1),[w,_]=S.useState([]),[C,k]=S.useState(()=>{const fe=localStorage.getItem("goa-selected-expansions");if(fe)try{const _e=JSON.parse(fe);if(Array.isArray(_e)&&_e.every(je=>typeof je=="string"))return _e}catch{}return Hc()}),[j,B]=S.useState(4),[E,P]=S.useState(!1),[I,U]=S.useState(!1),[N,D]=S.useState({mode:we.None,currentTeam:ne.Titans,availableHeroes:[],assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1}),[T,L]=S.useState([]),[Q,M]=S.useState(!1),[F,O]=S.useState(!1),[X,ae]=S.useState(null),[$,J]=S.useState(!1),[le,re]=S.useState("menu"),[V,z]=S.useState(null);S.useEffect(()=>{s&&!$&&(J(!0),re("menu"))},[s,$]);const[Z,Y]=S.useState(!1),[K,ue]=S.useState(null),[be,H]=S.useState(""),ee=yb(C).filter(fe=>fe.complexity<=j);sc=w;const Se=S.useRef(!1),me=JM(),[Ae,Ne]=S.useReducer($$e,me),[Ce,et]=S.useState(!1),[Be,Ee]=S.useState(!1),[rt,te]=S.useState(A),[W,se]=S.useState(h);S.useEffect(()=>{o&&!F&&(async()=>{try{await Dl.saveGame({gameState:Ae,players:w,strategyTimeRemaining:rt,moveTimeRemaining:W,strategyTimerActive:Ce,moveTimerActive:Be,strategyTimerEnabled:f,moveTimerEnabled:m})}catch(_e){console.error("Error saving game state:",_e)}})()},[o,Ae.round,Ae.turn,Ae.currentPhase,Ae.teamLives,Ce,Be,F]),S.useEffect(()=>{!o&&!E&&(async()=>{try{const _e=await Ghe.runMigrations();console.log(" Migration completed:",_e);const je=await Dl.loadGame();if(je){const st=new Date(je.timestamp).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});ue(je),H(st),Y(!0)}}catch(_e){console.error("App initialization error:",_e)}})()},[o,E]),S.useEffect(()=>{localStorage.setItem("goa-selected-expansions",JSON.stringify(C))},[C]),S.useEffect(()=>{const fe=()=>{console.log("First interaction detected, unlocking audio"),n(),document.removeEventListener("click",fe,!0),document.removeEventListener("keydown",fe,!0),document.removeEventListener("touchstart",fe,!0)};return document.addEventListener("click",fe,!0),document.addEventListener("keydown",fe,!0),document.addEventListener("touchstart",fe,!0),()=>{document.removeEventListener("click",fe,!0),document.removeEventListener("keydown",fe,!0),document.removeEventListener("touchstart",fe,!0)}},[n]);const xe=()=>{const fe=w.map(je=>je.name.trim()).filter(je=>je!=="");if(new Set(fe).size!==fe.length){const je=[],Fe=new Set;for(const st of fe)Fe.has(st)?je.push(st):Fe.add(st);return[...new Set(je)]}return[]},ve=fe=>{if(w.length>=10)return;e("buttonClick");let _e;if(w.length>=7||w.length===5&&v&&x===at.Long){if(w.length===6){const st=w.map((Je,ot)=>({...Je,lane:ot<3?We.Top:We.Bottom}));_(st)}w.length===5&&v&&x===at.Long||w.length===6?_e=We.Top:w.length===7?_e=We.Bottom:w.length>=8&&(_e=w.length%2===0?We.Top:We.Bottom)}const Fe={id:w.length+1,team:fe,hero:null,lane:_e,name:""};_([...w,Fe]),w.length>=7&&x===at.Quick&&p(at.Long)},Ke=fe=>{if(!w.find(Je=>Je.id===fe))return;e("buttonClick");const Fe=w.filter(Je=>Je.id!==fe).map((Je,ot)=>({...Je,id:ot+1}));if(_(Fe),!(Fe.length>=7||Fe.length===6&&v&&x===at.Long)){const Je=Fe.map(ot=>({...ot,lane:void 0}));_(Je)}},Xe=fe=>{if(fe===at.Quick&&w.length>6){alert("Quick game is only available for 6 or fewer players");return}if(e("toggleSwitch"),fe===at.Long&&w.length===6&&v){const _e=w.map(je=>({...je,lane:void 0}));_(_e),b(!1)}p(fe)},dt=fe=>{e("toggleSwitch"),C.includes(fe)?k(C.filter(_e=>_e!==fe)):k([...C,fe])},oe=(fe,_e)=>{const je=w.map(Fe=>Fe.id===fe?{...Fe,name:_e}:Fe);_(je),Se.current=!1},he=fe=>{const _e=w.length,je=ee.length;switch(fe){case we.AllPick:return je>=_e;case we.Single:return je>=_e*3;case we.Random:return je>=_e+2;case we.PickAndBan:return je>=_e*2;default:return!1}},[Ie,Me]=S.useState(null),bt=()=>{n();const fe=xe();if(fe.length>0){alert(`Players must have unique names. Duplicates found: ${fe.join(", ")}`);return}e("buttonClick");const _e=w.filter(Je=>Je.team===ne.Titans),je=w.filter(Je=>Je.team===ne.Atlanteans);if(Math.abs(_e.length-je.length)>1){alert("Teams must have equal player counts or differ by only 1 player");return}if(_e.length!==je.length){const Je=_e.length>je.length?ne.Titans:ne.Atlanteans;Me(Je)}else Me(null);if(_e.length<2||je.length<2){alert("Each team must have at least 2 players");return}if(w.filter(Je=>!Je.name.trim()).length>0){alert("All players must enter their names");return}if(!he(we.AllPick)){alert("Not enough heroes in selected expansions. Please select more expansions, increase complexity, or reduce player count.");return}const st=Math.random()>.5?ne.Titans:ne.Atlanteans;Ne({type:"START_GAME",payload:{...me,coinSide:st}}),e("coinFlip"),M(!0)},Ye=fe=>{let _e;const je=w.length;e("buttonClick");const Fe=[...ee],st=Ae.coinSide,Je=tC([...Fe]);switch(fe){case we.AllPick:_e={mode:fe,currentTeam:st,availableHeroes:Je,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};break;case we.Single:const ot=[...Je],Mt=w.map(Cs=>{const Xr=[];for(let Yr=0;Yr<3;Yr++)if(ot.length>0){const gt=Math.floor(Math.random()*ot.length);Xr.push(ot[gt]),ot.splice(gt,1)}return{playerId:Cs.id,heroOptions:Xr}});_e={mode:fe,currentTeam:st,availableHeroes:[],assignedHeroes:Mt,selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};break;case we.Random:const qr=Je.slice(0,Math.min(je+2,Je.length));_e={mode:fe,currentTeam:st,availableHeroes:qr,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};break;case we.PickAndBan:const Js=iN(je);_e={mode:fe,currentTeam:st,availableHeroes:Je,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:Js,isComplete:!1};break;default:_e={mode:we.None,currentTeam:st,availableHeroes:[],assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1}}D(_e),L([]),U(!1),P(!0)},_t=(fe,_e)=>{if(L(gt=>[...gt,{...N}]),e("heroSelect"),!w.find(gt=>gt.id===_e))return;const Fe=[...N.selectedHeroes,{playerId:_e,hero:fe}],st=N.availableHeroes.filter(gt=>gt.id!==fe.id),Je=N.mode===we.Single?N.assignedHeroes.map(gt=>gt.playerId===_e?{...gt,heroOptions:[]}:gt):N.assignedHeroes;let ot=N.currentTeam,Mt=N.currentStep,qr=!1;const Js=w.filter(gt=>gt.team===ne.Titans),Cs=w.filter(gt=>gt.team===ne.Atlanteans),Xr=Fe.filter(gt=>{var En;return((En=w.find(vn=>vn.id===gt.playerId))==null?void 0:En.team)===ne.Titans}).length,Yr=Fe.filter(gt=>{var En;return((En=w.find(vn=>vn.id===gt.playerId))==null?void 0:En.team)===ne.Atlanteans}).length;if(Xr>=Js.length&&Yr>=Cs.length&&(qr=!0),N.mode===we.Single||N.mode===we.AllPick||N.mode===we.Random){const gt=Xr>=Js.length,En=Yr>=Cs.length;gt&&!En?ot=ne.Atlanteans:En&&!gt?ot=ne.Titans:ot=N.currentTeam===ne.Titans?ne.Atlanteans:ne.Titans}else if(N.mode===we.PickAndBan)if(Mt=N.currentStep+1,Mt>=N.pickBanSequence.length)qr=!0;else{let gt=!1;do{const En=N.pickBanSequence[Mt];if(En&&En.action==="pick"){const vn=Ae.coinSide===ne.Titans;if((En.team==="A"?vn?ne.Titans:ne.Atlanteans:vn?ne.Atlanteans:ne.Titans)===ne.Titans?Xr>=Js.length:Yr>=Cs.length){if(gt=!0,Mt++,Mt>=N.pickBanSequence.length){qr=!0;break}}else gt=!1}else gt=!1}while(gt&&Mt<N.pickBanSequence.length);if(!qr&&Mt<N.pickBanSequence.length){const En=N.pickBanSequence[Mt].team,vn=Ae.coinSide===ne.Titans;En==="A"?ot=vn?ne.Titans:ne.Atlanteans:ot=vn?ne.Atlanteans:ne.Titans}}D({...N,currentTeam:ot,availableHeroes:st,assignedHeroes:Je,selectedHeroes:Fe,currentStep:Mt,isComplete:qr})},ze=fe=>{if(L(ot=>[...ot,{...N}]),e("heroBan"),N.mode!==we.PickAndBan)return;const _e=[...N.bannedHeroes,fe],je=N.availableHeroes.filter(ot=>ot.id!==fe.id),Fe=N.currentStep+1;let st=N.currentTeam,Je=N.isComplete;if(Fe>=N.pickBanSequence.length)Je=!0;else{const ot=N.pickBanSequence[Fe].team,Mt=Ae.coinSide===ne.Titans;ot==="A"?st=Mt?ne.Titans:ne.Atlanteans:st=Mt?ne.Atlanteans:ne.Titans}D({...N,currentTeam:st,availableHeroes:je,bannedHeroes:_e,currentStep:Fe,isComplete:Je})},ln=()=>{if(T.length>0){e("buttonClick");const fe=T[T.length-1];L(_e=>_e.slice(0,-1)),D(fe)}},cn=fe=>{const _e=w.length,je=[...ee],Fe=Ae.coinSide,st=tC([...je]);switch(fe){case we.AllPick:return{mode:fe,currentTeam:Fe,availableHeroes:st,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};case we.Single:const Je=[...st],ot=w.map(Js=>{const Cs=[];for(let Xr=0;Xr<3;Xr++)if(Je.length>0){const Yr=Math.floor(Math.random()*Je.length);Cs.push(Je[Yr]),Je.splice(Yr,1)}return{playerId:Js.id,heroOptions:Cs}});return{mode:fe,currentTeam:Fe,availableHeroes:[],assignedHeroes:ot,selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};case we.Random:const Mt=st.slice(0,Math.min(_e+2,st.length));return{mode:fe,currentTeam:Fe,availableHeroes:Mt,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1};case we.PickAndBan:const qr=iN(_e);return{mode:fe,currentTeam:Fe,availableHeroes:st,assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:qr,isComplete:!1};default:return{mode:we.None,currentTeam:Fe,availableHeroes:[],assignedHeroes:[],selectedHeroes:[],bannedHeroes:[],currentStep:0,pickBanSequence:[],isComplete:!1}}},Nn=()=>{e("buttonClick");const fe=cn(N.mode);D(fe),L([])},Sa=()=>{e("buttonClick"),P(!1),U(!0),L([])},wh=()=>{const fe=w.map(_e=>{const je=N.selectedHeroes.find(Fe=>Fe.playerId===_e.id);return je?{..._e,hero:je.hero}:_e});e("phaseChange"),_(fe),sc=fe,ZM(fe)},ZM=fe=>{const _e=fe.length,je=fe.map(ot=>{var Mt;return{...ot,stats:(Mt=ot.stats)!=null&&Mt.level?{level:ot.stats.level}:void 0}});_(je),sc=je;const Fe=D$e(x,_e,v),st=R$e(x,_e,v),Je={round:1,turn:1,gameLength:x,waves:Fe.hasMultipleLanes?{[We.Top]:Fe.top,[We.Bottom]:Fe.bottom}:{[We.Single]:Fe.single},teamLives:{[ne.Titans]:st,[ne.Atlanteans]:st},currentPhase:"strategy",activeHeroIndex:-1,coinSide:Ae.coinSide,hasMultipleLanes:Fe.hasMultipleLanes,completedTurns:[],allPlayersMoved:!1};Ne({type:"START_GAME",payload:Je}),c(!0),et(!0),te(A),P(!1),Dl.clearGame().catch(console.error),e("turnStart")},eD=()=>{e("buttonClick"),P(!1),U(!1)},tD=fe=>{Ae.activeHeroIndex===-1&&!Ae.completedTurns.includes(fe)&&(e("heroSelect"),Ne({type:"SELECT_PLAYER",playerIndex:fe}),Ee(!0),se(h))},J2=()=>{Ae.activeHeroIndex>=0&&(e("turnComplete"),Ee(!1),Ne({type:"MARK_PLAYER_COMPLETE",playerIndex:Ae.activeHeroIndex}))},nD=()=>{e("turnStart"),Ne({type:"START_NEXT_TURN"}),et(!0),te(A)},Z2=()=>{e("phaseChange"),et(!1),Ne({type:"END_STRATEGY"})},rD=()=>{e("buttonClick"),te(A)},sD=()=>{e("buttonClick"),se(h)},aD=(fe,_e)=>{e("lifeChange"),Ne({type:"ADJUST_TEAM_LIFE",team:fe,delta:_e})},iD=fe=>{e("buttonClick"),Ne({type:"INCREMENT_WAVE",lane:fe})},oD=fe=>{e("buttonClick"),Ne({type:"DECREMENT_WAVE",lane:fe})},lD=fe=>{e("buttonClick"),Ne({type:"ADJUST_ROUND",delta:fe})},cD=fe=>{e("buttonClick"),Ne({type:"ADJUST_TURN",delta:fe})},AD=fe=>{e("victory"),et(!1),Ee(!1),ae(fe),O(!0),Dl.clearGame().catch(console.error)},uD=()=>{e("buttonClick"),et(!1),Ee(!1),te(A),se(h),O(!1),ae(null),c(!1),P(!1),U(!1),Ne({type:"RESET_GAME"}),Dl.clearGame().catch(console.error)},dD=()=>{e("coinFlip"),Ne({type:"FLIP_COIN"})},hD=()=>{if(!K)return;e("buttonClick");const{gameState:fe,players:_e,strategyTimeRemaining:je,moveTimeRemaining:Fe,strategyTimerActive:st,moveTimerActive:Je,strategyTimerEnabled:ot,moveTimerEnabled:Mt}=K;Ne({type:"START_GAME",payload:fe}),_(_e),sc=_e,te(je),se(Fe),et(st),Ee(Je),g(ot),y(Mt),c(!0),Y(!1)},fD=()=>{e("buttonClick"),Dl.clearGame().catch(console.error),Y(!1)},eC=fe=>{const _e=w.map(je=>{var st,Je,ot,Mt,qr,Js,Cs,Xr,Yr,gt,En;const Fe=fe[je.id];if(Fe&&((Fe.kills??0)>0||(Fe.deaths??0)>0||(Fe.assists??0)>0||(Fe.goldCollected??0)>0||(Fe.minionKills??0)>0||Fe.level)){const vn={};return((Fe.kills??0)>0||(st=je.stats)!=null&&st.totalKills)&&(vn.totalKills=(((Je=je.stats)==null?void 0:Je.totalKills)||0)+(Fe.kills??0)),((Fe.deaths??0)>0||(ot=je.stats)!=null&&ot.totalDeaths)&&(vn.totalDeaths=(((Mt=je.stats)==null?void 0:Mt.totalDeaths)||0)+(Fe.deaths??0)),((Fe.assists??0)>0||(qr=je.stats)!=null&&qr.totalAssists)&&(vn.totalAssists=(((Js=je.stats)==null?void 0:Js.totalAssists)||0)+(Fe.assists??0)),((Fe.goldCollected??0)>0||(Cs=je.stats)!=null&&Cs.totalGoldEarned)&&(vn.totalGoldEarned=(((Xr=je.stats)==null?void 0:Xr.totalGoldEarned)||0)+(Fe.goldCollected??0)),((Fe.minionKills??0)>0||(Yr=je.stats)!=null&&Yr.totalMinionKills)&&(vn.totalMinionKills=(((gt=je.stats)==null?void 0:gt.totalMinionKills)||0)+(Fe.minionKills??0)),Fe.level?vn.level=Fe.level:(En=je.stats)!=null&&En.level&&(vn.level=je.stats.level),{...je,stats:vn}}return je});_(_e),sc=_e};S.useEffect(()=>{let fe;return Ce&&rt>0?fe=setTimeout(()=>{rt===11&&e("timerWarning"),r&&e("timerTick"),te(rt-1)},1e3):Ce&&rt===0&&(e("timerComplete"),et(!1),Z2()),()=>clearTimeout(fe)},[Ce,rt,e,r]),S.useEffect(()=>{let fe;return Be&&W>0?fe=setTimeout(()=>{W===11&&e("timerWarning"),r&&e("timerTick"),se(W-1)},1e3):Be&&W===0&&(e("timerComplete"),Ee(!1),J2()),()=>clearTimeout(fe)},[Be,W,e,r]);const tC=fe=>{const _e=[...fe];for(let je=_e.length-1;je>0;je--){const Fe=Math.floor(Math.random()*(je+1));[_e[je],_e[Fe]]=[_e[Fe],_e[je]]}if(_e.length>3){const je=Math.floor(_e.length/2),Fe=_e.slice(0,je);return[..._e.slice(je),...Fe]}return _e},gD=()=>{e("buttonClick"),J(!0),re("menu")},_s=fe=>{re(fe)},mD=()=>{J(!1)};return l.jsxs("div",{className:"App min-h-screen bg-gradient-to-b from-blue-400 to-orange-300 text-white p-6",children:[l.jsx(Lhe,{}),l.jsx(Ffe,{}),l.jsx("header",{className:`App-header mb-8 ${s||a||i?"mt-12":""}`,children:l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Guards of Atlantis II Timer"})}),Z&&K&&l.jsx(zhe,{gameState:K.gameState,players:K.players,onResume:hD,onDiscard:fD,savedTime:be}),Q&&l.jsx(Phe,{result:Ae.coinSide,onComplete:()=>{M(!1),U(!0)}}),$?l.jsxs(l.Fragment,{children:[le==="menu"&&l.jsx(DIe,{onBack:mD,onNavigate:_s}),le==="skill-over-time"&&l.jsx(UIe,{onBack:()=>_s("player-stats")}),le==="player-stats"&&l.jsx(d$e,{onBack:()=>_s("menu"),onViewSkillOverTime:()=>_s("skill-over-time"),onViewPlayerDetails:fe=>{z(fe),_s("detailed-player-stats")}}),le==="detailed-player-stats"&&V&&l.jsx(b$e,{playerId:V,onBack:()=>{z(null),_s("player-stats")}}),le==="hero-stats"&&l.jsx(T$e,{onBack:()=>_s("menu")}),le==="match-history"&&l.jsx(B$e,{onBack:()=>_s("menu")}),le==="hero-info"&&l.jsx(M$e,{onBack:()=>_s("menu")}),le==="record-match"&&l.jsx(F$e,{onBack:()=>_s("menu")}),le==="match-maker"&&l.jsx(k$e,{onBack:()=>_s("menu"),onUseTeams:(fe,_e)=>{_([]);const je=fe.map((Je,ot)=>({id:ot+1,team:ne.Titans,hero:null,name:Je})),Fe=_e.map((Je,ot)=>({id:fe.length+ot+1,team:ne.Atlanteans,hero:null,name:Je})),st=[...je,...Fe];_(st),J(!1),e("phaseChange")}})]}):o?l.jsx(Uhe,{gameState:Ae,players:w,strategyTimeRemaining:rt,moveTimeRemaining:W,strategyTimerEnabled:f,moveTimerEnabled:m,strategyTimerActive:Ce,moveTimerActive:Be,onStartStrategyTimer:()=>et(!0),onPauseStrategyTimer:()=>et(!1),onResetStrategyTimer:rD,onEndStrategyPhase:Z2,onStartMoveTimer:()=>Ee(!0),onPauseMoveTimer:()=>Ee(!1),onResetMoveTimer:sD,onSelectPlayer:tD,onCompletePlayerTurn:J2,onStartNextTurn:nD,onAdjustTeamLife:aD,onIncrementWave:iD,onDecrementWave:oD,onAdjustRound:lD,onAdjustTurn:cD,onDeclareVictory:AD,onFlipCoin:dD,onSavePlayerStats:eC}):l.jsx("div",{className:"game-setup-container",children:I?l.jsx(Qhe,{onSelectMode:Ye,onCancel:()=>U(!1),playerCount:w.length,availableDraftModes:{[we.AllPick]:he(we.AllPick),[we.Single]:he(we.Single),[we.Random]:he(we.Random),[we.PickAndBan]:he(we.PickAndBan)},heroCount:ee.length,handicapTeam:Ie}):E?l.jsx(Ihe,{players:w,availableHeroes:ee,draftingState:N,onHeroSelect:_t,onHeroBan:ze,onFinishDrafting:wh,onCancelDrafting:eD,onUndoLastAction:ln,onResetDraft:Nn,onBackToDraftSelection:Sa,canUndo:T.length>0}):l.jsx(The,{strategyTime:A,moveTime:h,gameLength:x,strategyTimerEnabled:f,moveTimerEnabled:m,onStrategyTimeChange:u,onMoveTimeChange:d,onGameLengthChange:Xe,onStrategyTimerEnabledChange:g,onMoveTimerEnabledChange:y,players:w,onAddPlayer:ve,onRemovePlayer:Ke,onDraftHeroes:bt,selectedExpansions:C,onToggleExpansion:dt,onPlayerNameChange:oe,duplicateNames:xe(),canStartDrafting:he(we.AllPick),heroCount:ee.length,maxComplexity:j,onMaxComplexityChange:B,useDoubleLaneFor6Players:v,onUseDoubleLaneFor6PlayersChange:b,onViewMatches:gD})}),F&&X&&l.jsx(Hhe,{winningTeam:X,onReturnToSetup:uD,players:w,gameLength:x,doubleLanes:Ae.hasMultipleLanes,onUpdatePlayerStats:eC}),l.jsx(Mhe,{feedbackUrl:"https://forms.gle/dsjjDSbqhTn3hATt6"}),l.jsx(Dhe,{}),!s&&l.jsx(Tfe,{}),l.jsx(Ohe,{id:"cloud-sync-v1",title:"New: Cloud Sync!",description:l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"mb-2",children:"You can now sync your match data across devices and with friends!"}),l.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-400",children:[l.jsx("li",{children:"Create an account to back up your data"}),l.jsx("li",{children:"Sync matches across your own devices"}),l.jsx("li",{children:"Share match data with friends"})]}),l.jsxs("p",{className:"mt-3 text-orange-400",children:["Look for the ",l.jsx("strong",{children:"orange arrow"})," in the top-right corner to get started."]})]})})]})}function L$e(){return l.jsx(tO,{children:l.jsx(yfe,{children:l.jsx(xfe,{children:l.jsx(bfe,{children:l.jsx(O$e,{})})})})})}Bv.createRoot(document.getElementById("root")).render(l.jsx(G.StrictMode,{children:l.jsx(L$e,{})}));
